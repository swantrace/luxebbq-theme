{
  "version": 3,
  "sources": ["../src/components/searchResult/SearchBar.js", "../src/components/searchResult/SearchResultMainContent.js", "../src/pages/SearchResult.js"],
  "sourcesContent": ["import { html, useState, virtual } from '@apollo-elements/haunted';\n\nconst SearchBar = virtual(() => {\n  const params = new URLSearchParams(window.location.search);\n  const searchTermFromUrl = decodeURI(params.get('q') ?? '');\n  const [searchTerm, setSearchTerm] = useState(searchTermFromUrl);\n  const handleSearchTermChanged = (e) => {\n    setSearchTerm(e.target.value);\n  };\n  return html`\n    <div class=\"row search-bar-row\">\n      <div class=\"col-lg-10 offset-lg-1\">\n        <form class=\"form-header\" action=\"/search\" method=\"get\" role=\"search\">\n          <div class=\"input-group\">\n            <input\n              type=\"search\"\n              class=\"form-control\"\n              name=\"q\"\n              value=${searchTerm}\n              onChange=${handleSearchTermChanged}\n              aria-label=\"Amount (to the nearest dollar)\"\n              placeholder=\"Type some keywords\"\n            />\n            <div class=\"input-group-append\">\n              <button class=\"btn btn-solid\">\n                <span class=\"search-text\">Search</span\n                ><span class=\"search-icon\"\n                  >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; \u00BB</span\n                >\n              </button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  `;\n});\n\nexport default SearchBar;\n", "import { html, useRef } from '@apollo-elements/haunted';\nimport chunk from 'lodash.chunk';\nimport { usePageContext } from '../../shared/context';\nimport Pagination from '../common/Pagination';\nimport TopControllers from '../common/TopControllers';\nimport Products from '../common/Products';\nimport { getDisplayedPageNumbers, productsSorter } from '../../shared/helpers';\n\nfunction SearchResultMainContent() {\n  const {\n    productsOfFirstPage,\n    state,\n    dispatch,\n    emptyCollectionImage,\n  } = usePageContext();\n  const {\n    allProducts,\n    fetchIsFinished,\n    viewMode,\n    sortValue,\n    productsPerPage,\n    pageNumber,\n  } = state;\n  const searchedProducts = allProducts.sort(productsSorter(state));\n  const productsSize = searchedProducts.length;\n  let productsOfCurrentPage = [];\n  let pageCount = 1;\n  let displayedPageNumbers = [1];\n  if (!fetchIsFinished) {\n    productsOfCurrentPage = productsOfFirstPage ?? [];\n  } else {\n    const productsInChunk = chunk(searchedProducts, productsPerPage);\n    productsOfCurrentPage = productsInChunk?.[pageNumber - 1] ?? [];\n    pageCount = productsInChunk?.length ?? 1;\n    displayedPageNumbers = getDisplayedPageNumbers(pageCount, pageNumber);\n  }\n\n  const thisRef = useRef(this);\n  const handleViewModeIconClicked = (newViewMode) => {\n    dispatch({ type: 'changeViewMode', payload: newViewMode });\n  };\n  const handleProductsPerPageChanged = (e) => {\n    dispatch({\n      type: 'changeProductsPerPage',\n      payload: Number(e.target.value),\n    });\n  };\n  const handleSortValueChanged = (e) => {\n    dispatch({\n      type: 'changeSortValue',\n      payload: e.target.value,\n    });\n  };\n  const handlePageLinkClicked = (number) => {\n    if (Number.isNaN(Number(number))) {\n      return;\n    }\n    dispatch({ type: 'changePageNumber', payload: number });\n  };\n\n  return html`${TopControllers({\n    fetchIsFinished,\n    productsSize,\n    viewMode,\n    productsPerPage,\n    sortValue,\n    handleViewModeIconClicked,\n    handleProductsPerPageChanged,\n    handleSortValueChanged,\n  })}${Products({\n    mainContentElement: thisRef.current,\n    productsOfCurrentPage,\n    viewMode,\n    emptyCollectionImage,\n    itemClassList: {\n      grid: 'col-lg-3 col-md-6 col-grid-box',\n      list: 'col-lg-12',\n    },\n  })}${Pagination({\n    fetchIsFinished,\n    pageNumber,\n    displayedPageNumbers,\n    pageCount,\n    handlePageLinkClicked,\n  })}`;\n}\n\nexport default {\n  tagName: 'search-result-main-content',\n  renderer: SearchResultMainContent,\n  options: {\n    observedAttributes: [],\n    useShadowDOM: false,\n  },\n};\n", "import {\n  html,\n  useEffect,\n  useQuery,\n  useReducer,\n  component,\n} from '@apollo-elements/haunted';\nimport { CompareTable } from '../shared/index';\nimport SearchBar from '../components/searchResult/SearchBar';\nimport TitleBanner from '../components/common/TitleBanner';\nimport { pageWrapper as SearchResultWrapper } from '../shared/context';\nimport {\n  getQueryString,\n  getSortValueFromDefaultSortBy,\n  queryAllProductsFromSearchTerm,\n  GET_PRODUCTS,\n  transformFunc,\n} from '../shared/helpers';\nimport SearchResultMainContent from '../components/searchResult/SearchResultMainContent';\n\nfunction SearchResult({ defaultSortBy, emptyCollectionImage }) {\n  const params = new URLSearchParams(window.location.search);\n  const searchString = decodeURI(params.get('q')?.trim() ?? '');\n\n  const searchResultReducer = (previousState, action) => {\n    switch (action.type) {\n      case 'setAllProducts': {\n        return {\n          ...previousState,\n          allProducts: action.payload,\n        };\n      }\n      case 'setFetchIsFinished': {\n        return {\n          ...previousState,\n          fetchIsFinished: action.payload,\n        };\n      }\n      case 'changeSortValue': {\n        return {\n          ...previousState,\n          sortValue: action.payload,\n          pageNumber: 1,\n        };\n      }\n      case 'changeProductsPerPage': {\n        return {\n          ...previousState,\n          productsPerPage: action.payload,\n          pageNumber: 1,\n        };\n      }\n      case 'changePageNumber': {\n        return {\n          ...previousState,\n          pageNumber: action.payload,\n        };\n      }\n      case 'changeViewMode': {\n        return {\n          ...previousState,\n          viewMode: action.payload,\n        };\n      }\n      case 'changeOnlineStoreOnly': {\n        return {\n          ...previousState,\n          onlineStoreOnly: action.payload,\n        };\n      }\n      default:\n        return { ...previousState };\n    }\n  };\n\n  const [state, dispatch] = useReducer(searchResultReducer, {\n    allProducts: [],\n    fetchIsFinished: false,\n    searchString: '',\n    productsPerPage: 24,\n    pageNumber: 1,\n    viewMode: 'grid',\n    sortValue: 'BEST_SELLING_ASC',\n    onlineStoreOnly: false,\n  });\n\n  const { data: dataWithFirstPageProducts } = useQuery(GET_PRODUCTS, {\n    variables: {\n      first: state.productsPerPage,\n      query: `${getQueryString({ searchString })}`,\n      reverse: !!getSortValueFromDefaultSortBy(defaultSortBy).includes('DESC'),\n      sortKey: getSortValueFromDefaultSortBy(defaultSortBy)\n        .replace('_DESC', '')\n        .replace('_ASC', ''),\n    },\n  });\n\n  const productsOfFirstPage =\n    dataWithFirstPageProducts?.products?.edges?.map(({ node }) =>\n      transformFunc(node)\n    ) ?? [];\n\n  useEffect(async () => {\n    const products = await queryAllProductsFromSearchTerm(searchString);\n    // console.log('allProducts:', products);\n    dispatch({ type: 'setAllProducts', payload: products });\n    dispatch({ type: 'setFetchIsFinished', payload: true });\n  }, []);\n\n  return html`${SearchResultWrapper({\n    children: html` <section class=\"authentication-page section-b-space\">\n      <div class=\"container\">\n        <section class=\"p-0\">\n          <div class=\"container\">\n            ${SearchBar({ searchString })}\n            <div class=\"row search-title-banner-row\">\n              <div class=\"col-lg-10 offset-lg-1\">\n                ${TitleBanner({ title: 'SEARCH RESULTS' })}\n              </div>\n            </div>\n            ${searchString\n              ? html` <div class=\"row\">\n                  <div class=\"col-lg-10 offset-lg-1\">\n                    <search-result-main-content></search-result-main-content>\n                  </div>\n                </div>`\n              : null}\n          </div>\n        </section>\n      </div>\n    </section>`,\n    productsOfFirstPage,\n    state,\n    dispatch,\n    emptyCollectionImage,\n  })}`;\n}\n\n[\n  SearchResultMainContent,\n  CompareTable,\n  {\n    tagName: 'search-result',\n    renderer: SearchResult,\n    options: {\n      observedAttributes: ['default-sort-by', 'empty-collection-image'],\n      useShadowDOM: false,\n    },\n  },\n].forEach((pComponent) => {\n  customElements.define(\n    pComponent.tagName,\n    component(pComponent.renderer, pComponent.options)\n  );\n});\n"],
  "mappings": "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",
  "names": []
}
