var Km=Object.create,$o=Object.defineProperty,Qm=Object.getPrototypeOf,zm=Object.prototype.hasOwnProperty,$m=Object.getOwnPropertyNames,Gm=Object.getOwnPropertyDescriptor;var Wm=t=>$o(t,"__esModule",{value:!0});var ue=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var Ym=(t,e,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $m(e))!zm.call(t,i)&&i!=="default"&&$o(t,i,{get:()=>e[i],enumerable:!(r=Gm(e,i))||r.enumerable});return t},dt=t=>Ym(Wm($o(t!=null?Km(Qm(t)):{},"default",t&&t.__esModule&&"default"in t?{get:()=>t.default,enumerable:!0}:{value:t,enumerable:!0})),t);var zu=ue((CE,en)=>{var Cu,Ou,Pu,ku,Au,Du,Nu,Iu,Mu,tn,hs,Ru,ju,Ut,Fu,Lu,Vu,Bu,qu,Uu,Hu,Ku,Qu;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(i){t(r(e,r(i)))}):typeof en=="object"&&typeof en.exports=="object"?t(r(e,r(en.exports))):t(r(e));function r(i,n){return i!==e&&(typeof Object.create=="function"?Object.defineProperty(i,"__esModule",{value:!0}):i.__esModule=!0),function(o,s){return i[o]=n?n(o,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])};Cu=function(r,i){e(r,i);function n(){this.constructor=r}r.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)},Ou=Object.assign||function(r){for(var i,n=1,o=arguments.length;n<o;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])}return r},Pu=function(r,i){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&i.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(r);s<o.length;s++)i.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(r,o[s])&&(n[o[s]]=r[o[s]]);return n},ku=function(r,i,n,o){var s=arguments.length,a=s<3?i:o===null?o=Object.getOwnPropertyDescriptor(i,n):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,i,n,o);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(a=(s<3?l(a):s>3?l(i,n,a):l(i,n))||a);return s>3&&a&&Object.defineProperty(i,n,a),a},Au=function(r,i){return function(n,o){i(n,o,r)}},Du=function(r,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,i)},Nu=function(r,i,n,o){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(f){try{p(o.next(f))}catch(h){l(h)}}function c(f){try{p(o.throw(f))}catch(h){l(h)}}function p(f){f.done?a(f.value):s(f.value).then(u,c)}p((o=o.apply(r,i||[])).next())})},Iu=function(r,i){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(p){return function(f){return c([p,f])}}function c(p){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=i.call(r,n)}catch(f){p=[6,f],s=0}finally{o=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},Qu=function(r,i,n,o){o===void 0&&(o=n),r[o]=i[n]},Mu=function(r,i){for(var n in r)n!=="default"&&!i.hasOwnProperty(n)&&(i[n]=r[n])},tn=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,n=i&&r[i],o=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},hs=function(r,i){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var o=n.call(r),s,a=[],l;try{for(;(i===void 0||i-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(l)throw l.error}}return a},Ru=function(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(hs(arguments[i]));return r},ju=function(){for(var r=0,i=0,n=arguments.length;i<n;i++)r+=arguments[i].length;for(var o=Array(r),s=0,i=0;i<n;i++)for(var a=arguments[i],l=0,u=a.length;l<u;l++,s++)o[s]=a[l];return o},Ut=function(r){return this instanceof Ut?(this.v=r,this):new Ut(r)},Fu=function(r,i,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(r,i||[]),s,a=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(d){o[d]&&(s[d]=function(m){return new Promise(function(y,_){a.push([d,m,y,_])>1||u(d,m)})})}function u(d,m){try{c(o[d](m))}catch(y){h(a[0][3],y)}}function c(d){d.value instanceof Ut?Promise.resolve(d.value.v).then(p,f):h(a[0][2],d)}function p(d){u("next",d)}function f(d){u("throw",d)}function h(d,m){d(m),a.shift(),a.length&&u(a[0][0],a[0][1])}},Lu=function(r){var i,n;return i={},o("next"),o("throw",function(s){throw s}),o("return"),i[Symbol.iterator]=function(){return this},i;function o(s,a){i[s]=r[s]?function(l){return(n=!n)?{value:Ut(r[s](l)),done:s==="return"}:a?a(l):l}:a}},Vu=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],n;return i?i.call(r):(r=typeof tn=="function"?tn(r):r[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=r[a]&&function(l){return new Promise(function(u,c){l=r[a](l),s(u,c,l.done,l.value)})}}function s(a,l,u,c){Promise.resolve(c).then(function(p){a({value:p,done:u})},l)}},Bu=function(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r},qu=function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var n in r)Object.hasOwnProperty.call(r,n)&&(i[n]=r[n]);return i.default=r,i},Uu=function(r){return r&&r.__esModule?r:{default:r}},Hu=function(r,i){if(!i.has(r))throw new TypeError("attempted to get private field on non-instance");return i.get(r)},Ku=function(r,i,n){if(!i.has(r))throw new TypeError("attempted to set private field on non-instance");return i.set(r,n),n},t("__extends",Cu),t("__assign",Ou),t("__rest",Pu),t("__decorate",ku),t("__param",Au),t("__metadata",Du),t("__awaiter",Nu),t("__generator",Iu),t("__exportStar",Mu),t("__createBinding",Qu),t("__values",tn),t("__read",hs),t("__spread",Ru),t("__spreadArrays",ju),t("__await",Ut),t("__asyncGenerator",Fu),t("__asyncDelegator",Lu),t("__asyncValues",Vu),t("__makeTemplateObject",Bu),t("__importStar",qu),t("__importDefault",Uu),t("__classPrivateFieldGet",Hu),t("__classPrivateFieldSet",Ku)})});var hc=ue((QE,rn)=>{var Gu,Wu,Yu,Ju,Xu,Zu,ec,tc,rc,nn,ms,ic,nc,Ht,oc,sc,ac,lc,uc,cc,pc,fc,dc;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(i){t(r(e,r(i)))}):typeof rn=="object"&&typeof rn.exports=="object"?t(r(e,r(rn.exports))):t(r(e));function r(i,n){return i!==e&&(typeof Object.create=="function"?Object.defineProperty(i,"__esModule",{value:!0}):i.__esModule=!0),function(o,s){return i[o]=n?n(o,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])};Gu=function(r,i){e(r,i);function n(){this.constructor=r}r.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)},Wu=Object.assign||function(r){for(var i,n=1,o=arguments.length;n<o;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])}return r},Yu=function(r,i){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&i.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(r);s<o.length;s++)i.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(r,o[s])&&(n[o[s]]=r[o[s]]);return n},Ju=function(r,i,n,o){var s=arguments.length,a=s<3?i:o===null?o=Object.getOwnPropertyDescriptor(i,n):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,i,n,o);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(a=(s<3?l(a):s>3?l(i,n,a):l(i,n))||a);return s>3&&a&&Object.defineProperty(i,n,a),a},Xu=function(r,i){return function(n,o){i(n,o,r)}},Zu=function(r,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,i)},ec=function(r,i,n,o){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(f){try{p(o.next(f))}catch(h){l(h)}}function c(f){try{p(o.throw(f))}catch(h){l(h)}}function p(f){f.done?a(f.value):s(f.value).then(u,c)}p((o=o.apply(r,i||[])).next())})},tc=function(r,i){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(p){return function(f){return c([p,f])}}function c(p){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=i.call(r,n)}catch(f){p=[6,f],s=0}finally{o=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},dc=function(r,i,n,o){o===void 0&&(o=n),r[o]=i[n]},rc=function(r,i){for(var n in r)n!=="default"&&!i.hasOwnProperty(n)&&(i[n]=r[n])},nn=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,n=i&&r[i],o=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},ms=function(r,i){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var o=n.call(r),s,a=[],l;try{for(;(i===void 0||i-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(l)throw l.error}}return a},ic=function(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(ms(arguments[i]));return r},nc=function(){for(var r=0,i=0,n=arguments.length;i<n;i++)r+=arguments[i].length;for(var o=Array(r),s=0,i=0;i<n;i++)for(var a=arguments[i],l=0,u=a.length;l<u;l++,s++)o[s]=a[l];return o},Ht=function(r){return this instanceof Ht?(this.v=r,this):new Ht(r)},oc=function(r,i,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(r,i||[]),s,a=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(d){o[d]&&(s[d]=function(m){return new Promise(function(y,_){a.push([d,m,y,_])>1||u(d,m)})})}function u(d,m){try{c(o[d](m))}catch(y){h(a[0][3],y)}}function c(d){d.value instanceof Ht?Promise.resolve(d.value.v).then(p,f):h(a[0][2],d)}function p(d){u("next",d)}function f(d){u("throw",d)}function h(d,m){d(m),a.shift(),a.length&&u(a[0][0],a[0][1])}},sc=function(r){var i,n;return i={},o("next"),o("throw",function(s){throw s}),o("return"),i[Symbol.iterator]=function(){return this},i;function o(s,a){i[s]=r[s]?function(l){return(n=!n)?{value:Ht(r[s](l)),done:s==="return"}:a?a(l):l}:a}},ac=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],n;return i?i.call(r):(r=typeof nn=="function"?nn(r):r[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=r[a]&&function(l){return new Promise(function(u,c){l=r[a](l),s(u,c,l.done,l.value)})}}function s(a,l,u,c){Promise.resolve(c).then(function(p){a({value:p,done:u})},l)}},lc=function(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r},uc=function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var n in r)Object.hasOwnProperty.call(r,n)&&(i[n]=r[n]);return i.default=r,i},cc=function(r){return r&&r.__esModule?r:{default:r}},pc=function(r,i){if(!i.has(r))throw new TypeError("attempted to get private field on non-instance");return i.get(r)},fc=function(r,i,n){if(!i.has(r))throw new TypeError("attempted to set private field on non-instance");return i.set(r,n),n},t("__extends",Gu),t("__assign",Wu),t("__rest",Yu),t("__decorate",Ju),t("__param",Xu),t("__metadata",Zu),t("__awaiter",ec),t("__generator",tc),t("__exportStar",rc),t("__createBinding",dc),t("__values",nn),t("__read",ms),t("__spread",ic),t("__spreadArrays",nc),t("__await",Ht),t("__asyncGenerator",oc),t("__asyncDelegator",sc),t("__asyncValues",ac),t("__makeTemplateObject",lc),t("__importStar",uc),t("__importDefault",cc),t("__classPrivateFieldGet",pc),t("__classPrivateFieldSet",fc)})});var Lc=ue((VC,Fc)=>{"use strict";Fc.exports=function(t,e){e||(e={}),typeof e=="function"&&(e={cmp:e});var r=typeof e.cycles=="boolean"?e.cycles:!1,i=e.cmp&&function(o){return function(s){return function(a,l){var u={key:a,value:s[a]},c={key:l,value:s[l]};return o(u,c)}}}(e.cmp),n=[];return function o(s){if(s&&s.toJSON&&typeof s.toJSON=="function"&&(s=s.toJSON()),s!==void 0){if(typeof s=="number")return isFinite(s)?""+s:"null";if(typeof s!="object")return JSON.stringify(s);var a,l;if(Array.isArray(s)){for(l="[",a=0;a<s.length;a++)a&&(l+=","),l+=o(s[a])||"null";return l+"]"}if(s===null)return"null";if(n.indexOf(s)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}var u=n.push(s)-1,c=Object.keys(s).sort(i&&i(s));for(l="",a=0;a<c.length;a++){var p=c[a],f=o(s[p]);!f||(l&&(l+=","),l+=JSON.stringify(p)+":"+f)}return n.splice(u,1),"{"+l+"}"}}(t)}});var Yc=ue(En=>{"use strict";Object.defineProperty(En,"__esModule",{value:!0});En.Observable=void 0;function Us(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zc(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hs(t,e,r){return e&&zc(t.prototype,e),r&&zc(t,r),t}var Ks=function(){return typeof Symbol=="function"},Qs=function(t){return Ks()&&Boolean(Symbol[t])},zs=function(t){return Qs(t)?Symbol[t]:"@@"+t};Ks()&&!Qs("observable")&&(Symbol.observable=Symbol("observable"));var lv=zs("iterator"),$s=zs("observable"),$c=zs("species");function Tn(t,e){var r=t[e];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function Zr(t){var e=t.constructor;return e!==void 0&&(e=e[$c],e===null&&(e=void 0)),e!==void 0?e:Cn}function uv(t){return t instanceof Cn}function Gt(t){Gt.log?Gt.log(t):setTimeout(function(){throw t})}function On(t){Promise.resolve().then(function(){try{t()}catch(e){Gt(e)}})}function Gc(t){var e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var r=Tn(e,"unsubscribe");r&&r.call(e)}}catch(i){Gt(i)}}function Gs(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function cv(t){var e=t._queue;if(!!e){t._queue=void 0,t._state="ready";for(var r=0;r<e.length&&(Wc(t,e[r].type,e[r].value),t._state!=="closed");++r);}}function Wc(t,e,r){t._state="running";var i=t._observer;try{var n=Tn(i,e);switch(e){case"next":n&&n.call(i,r);break;case"error":if(Gs(t),n)n.call(i,r);else throw r;break;case"complete":Gs(t),n&&n.call(i);break}}catch(o){Gt(o)}t._state==="closed"?Gc(t):t._state==="running"&&(t._state="ready")}function Ws(t,e,r){if(t._state!=="closed"){if(t._state==="buffering"){t._queue.push({type:e,value:r});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:r}],On(function(){return cv(t)});return}Wc(t,e,r)}}var fv=function(){function t(e,r){Us(this,t),this._cleanup=void 0,this._observer=e,this._queue=void 0,this._state="initializing";var i=new pv(this);try{this._cleanup=r.call(void 0,i)}catch(n){i.error(n)}this._state==="initializing"&&(this._state="ready")}return Hs(t,[{key:"unsubscribe",value:function(){this._state!=="closed"&&(Gs(this),Gc(this))}},{key:"closed",get:function(){return this._state==="closed"}}]),t}(),pv=function(){function t(e){Us(this,t),this._subscription=e}return Hs(t,[{key:"next",value:function(r){Ws(this._subscription,"next",r)}},{key:"error",value:function(r){Ws(this._subscription,"error",r)}},{key:"complete",value:function(){Ws(this._subscription,"complete")}},{key:"closed",get:function(){return this._subscription._state==="closed"}}]),t}(),Cn=function(){function t(e){if(Us(this,t),!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if(typeof e!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=e}return Hs(t,[{key:"subscribe",value:function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new fv(r,this._subscriber)}},{key:"forEach",value:function(r){var i=this;return new Promise(function(n,o){if(typeof r!="function"){o(new TypeError(r+" is not a function"));return}function s(){a.unsubscribe(),n()}var a=i.subscribe({next:function(l){try{r(l,s)}catch(u){o(u),a.unsubscribe()}},error:o,complete:n})})}},{key:"map",value:function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var n=Zr(this);return new n(function(o){return i.subscribe({next:function(s){try{s=r(s)}catch(a){return o.error(a)}o.next(s)},error:function(s){o.error(s)},complete:function(){o.complete()}})})}},{key:"filter",value:function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var n=Zr(this);return new n(function(o){return i.subscribe({next:function(s){try{if(!r(s))return}catch(a){return o.error(a)}o.next(s)},error:function(s){o.error(s)},complete:function(){o.complete()}})})}},{key:"reduce",value:function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var n=Zr(this),o=arguments.length>1,s=!1,a=arguments[1],l=a;return new n(function(u){return i.subscribe({next:function(c){var p=!s;if(s=!0,!p||o)try{l=r(l,c)}catch(f){return u.error(f)}else l=c},error:function(c){u.error(c)},complete:function(){if(!s&&!o)return u.error(new TypeError("Cannot reduce an empty sequence"));u.next(l),u.complete()}})})}},{key:"concat",value:function(){for(var r=this,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];var s=Zr(this);return new s(function(a){var l,u=0;function c(p){l=p.subscribe({next:function(f){a.next(f)},error:function(f){a.error(f)},complete:function(){u===n.length?(l=void 0,a.complete()):c(s.from(n[u++]))}})}return c(r),function(){l&&(l.unsubscribe(),l=void 0)}})}},{key:"flatMap",value:function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var n=Zr(this);return new n(function(o){var s=[],a=i.subscribe({next:function(u){if(r)try{u=r(u)}catch(p){return o.error(p)}var c=n.from(u).subscribe({next:function(p){o.next(p)},error:function(p){o.error(p)},complete:function(){var p=s.indexOf(c);p>=0&&s.splice(p,1),l()}});s.push(c)},error:function(u){o.error(u)},complete:function(){l()}});function l(){a.closed&&s.length===0&&o.complete()}return function(){s.forEach(function(u){return u.unsubscribe()}),a.unsubscribe()}})}},{key:$s,value:function(){return this}}],[{key:"from",value:function(r){var i=typeof this=="function"?this:t;if(r==null)throw new TypeError(r+" is not an object");var n=Tn(r,$s);if(n){var o=n.call(r);if(Object(o)!==o)throw new TypeError(o+" is not an object");return uv(o)&&o.constructor===i?o:new i(function(s){return o.subscribe(s)})}if(Qs("iterator")&&(n=Tn(r,lv),n))return new i(function(s){On(function(){if(!s.closed){var a=!0,l=!1,u=void 0;try{for(var c=n.call(r)[Symbol.iterator](),p;!(a=(p=c.next()).done);a=!0){var f=p.value;if(s.next(f),s.closed)return}}catch(h){l=!0,u=h}finally{try{!a&&c.return!=null&&c.return()}finally{if(l)throw u}}s.complete()}})});if(Array.isArray(r))return new i(function(s){On(function(){if(!s.closed){for(var a=0;a<r.length;++a)if(s.next(r[a]),s.closed)return;s.complete()}})});throw new TypeError(r+" is not observable")}},{key:"of",value:function(){for(var r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];var o=typeof this=="function"?this:t;return new o(function(s){On(function(){if(!s.closed){for(var a=0;a<i.length;++a)if(s.next(i[a]),s.closed)return;s.complete()}})})}},{key:$c,get:function(){return this}}]),t}();En.Observable=Cn;Ks()&&Object.defineProperty(Cn,Symbol("extensions"),{value:{symbol:$s,hostReportError:Gt},configurable:!0})});var Xc=ue((uO,Jc)=>{Jc.exports=Yc().Observable});var ua=ue(An=>{"use strict";Object.defineProperty(An,"__esModule",{value:!0});An.default=void 0;var Sv=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,Ev=Sv;An.default=Ev});var op=ue(ca=>{"use strict";Object.defineProperty(ca,"__esModule",{value:!0});ca.default=Tv;var Ov=Cv(ua());function Cv(t){return t&&t.__esModule?t:{default:t}}function Dn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Dn=function(r){return typeof r}:Dn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Dn(t)}var Pv=10,np=2;function Tv(t){return Nn(t,[])}function Nn(t,e){switch(Dn(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":kv(t,e);default:return String(t)}}function kv(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var r=[].concat(e,[t]),i=Nv(t);if(i!==void 0){var n=i.call(t);if(n!==t)return typeof n=="string"?n:Nn(n,r)}else if(Array.isArray(t))return Dv(t,r);return Av(t,r)}function Av(t,e){var r=Object.keys(t);if(r.length===0)return"{}";if(e.length>np)return"["+Iv(t)+"]";var i=r.map(function(n){var o=Nn(t[n],e);return n+": "+o});return"{ "+i.join(", ")+" }"}function Dv(t,e){if(t.length===0)return"[]";if(e.length>np)return"[Array]";for(var r=Math.min(Pv,t.length),i=t.length-r,n=[],o=0;o<r;++o)n.push(Nn(t[o],e));return i===1?n.push("... 1 more item"):i>1&&n.push("... ".concat(i," more items")),"["+n.join(", ")+"]"}function Nv(t){var e=t[String(Ov.default)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function Iv(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}});var sp=ue(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.default=Mv;function Mv(t,e){var r=Boolean(t);if(!r)throw new Error(e??"Unexpected invariant triggered.")}});var up=ue(fa=>{"use strict";Object.defineProperty(fa,"__esModule",{value:!0});fa.default=Rv;var jv=ap(sp()),lp=ap(ua());function ap(t){return t&&t.__esModule?t:{default:t}}function Rv(t){var e=t.prototype.toJSON;typeof e=="function"||(0,jv.default)(0),t.prototype.inspect=e,lp.default&&(t.prototype[lp.default]=e)}});var dp=ue(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.isNode=Fv;St.Token=St.Location=void 0;var cp=Lv(up());function Lv(t){return t&&t.__esModule?t:{default:t}}var pp=function(){function t(r,i,n){this.start=r.start,this.end=i.end,this.startToken=r,this.endToken=i,this.source=n}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();St.Location=pp;(0,cp.default)(pp);var fp=function(){function t(r,i,n,o,s,a,l){this.kind=r,this.start=i,this.end=n,this.line=o,this.column=s,this.value=l,this.prev=a,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();St.Token=fp;(0,cp.default)(fp);function Fv(t){return t!=null&&typeof t.kind=="string"}});var yp=ue(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.visit=Vv;Be.visitInParallel=Bv;Be.getVisitFn=In;Be.BREAK=Be.QueryDocumentKeys=void 0;var Uv=qv(op()),hp=dp();function qv(t){return t&&t.__esModule?t:{default:t}}var mp={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};Be.QueryDocumentKeys=mp;var tr=Object.freeze({});Be.BREAK=tr;function Vv(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mp,i=void 0,n=Array.isArray(t),o=[t],s=-1,a=[],l=void 0,u=void 0,c=void 0,p=[],f=[],h=t;do{s++;var d=s===o.length,m=d&&a.length!==0;if(d){if(u=f.length===0?void 0:p[p.length-1],l=c,c=f.pop(),m){if(n)l=l.slice();else{for(var y={},_=0,w=Object.keys(l);_<w.length;_++){var S=w[_];y[S]=l[S]}l=y}for(var C=0,E=0;E<a.length;E++){var k=a[E][0],O=a[E][1];n&&(k-=C),n&&O===null?(l.splice(k,1),C++):l[k]=O}}s=i.index,o=i.keys,a=i.edits,n=i.inArray,i=i.prev}else{if(u=c?n?s:o[s]:void 0,l=c?c[u]:h,l==null)continue;c&&p.push(u)}var A=void 0;if(!Array.isArray(l)){if(!(0,hp.isNode)(l))throw new Error("Invalid AST Node: ".concat((0,Uv.default)(l),"."));var H=In(e,l.kind,d);if(H){if(A=H.call(e,l,u,c,p,f),A===tr)break;if(A===!1){if(!d){p.pop();continue}}else if(A!==void 0&&(a.push([u,A]),!d))if((0,hp.isNode)(A))l=A;else{p.pop();continue}}}if(A===void 0&&m&&a.push([u,l]),d)p.pop();else{var J;i={inArray:n,index:s,keys:o,edits:a,prev:i},n=Array.isArray(l),o=n?l:(J=r[l.kind])!==null&&J!==void 0?J:[],s=-1,a=[],c&&f.push(c),c=l}}while(i!==void 0);return a.length!==0&&(h=a[a.length-1][1]),h}function Bv(t){var e=new Array(t.length);return{enter:function(i){for(var n=0;n<t.length;n++)if(e[n]==null){var o=In(t[n],i.kind,!1);if(o){var s=o.apply(t[n],arguments);if(s===!1)e[n]=i;else if(s===tr)e[n]=tr;else if(s!==void 0)return s}}},leave:function(i){for(var n=0;n<t.length;n++)if(e[n]==null){var o=In(t[n],i.kind,!0);if(o){var s=o.apply(t[n],arguments);if(s===tr)e[n]=tr;else if(s!==void 0&&s!==!1)return s}}else e[n]===i&&(e[n]=null)}}}function In(t,e,r){var i=t[e];if(i){if(!r&&typeof i=="function")return i;var n=r?i.leave:i.enter;if(typeof n=="function")return n}else{var o=r?t.leave:t.enter;if(o){if(typeof o=="function")return o;var s=o[e];if(typeof s=="function")return s}}}});var wf=ue((tN,Qn)=>{var tf,rf,nf,of,sf,af,lf,uf,cf,zn,Da,pf,ff,cr,df,hf,mf,yf,vf,_f,gf,bf,xf;(function(t){var e=typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:{};typeof define=="function"&&define.amd?define("tslib",["exports"],function(i){t(r(e,r(i)))}):typeof Qn=="object"&&typeof Qn.exports=="object"?t(r(e,r(Qn.exports))):t(r(e));function r(i,n){return i!==e&&(typeof Object.create=="function"?Object.defineProperty(i,"__esModule",{value:!0}):i.__esModule=!0),function(o,s){return i[o]=n?n(o,s):s}}})(function(t){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])};tf=function(r,i){e(r,i);function n(){this.constructor=r}r.prototype=i===null?Object.create(i):(n.prototype=i.prototype,new n)},rf=Object.assign||function(r){for(var i,n=1,o=arguments.length;n<o;n++){i=arguments[n];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])}return r},nf=function(r,i){var n={};for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&i.indexOf(o)<0&&(n[o]=r[o]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,o=Object.getOwnPropertySymbols(r);s<o.length;s++)i.indexOf(o[s])<0&&Object.prototype.propertyIsEnumerable.call(r,o[s])&&(n[o[s]]=r[o[s]]);return n},of=function(r,i,n,o){var s=arguments.length,a=s<3?i:o===null?o=Object.getOwnPropertyDescriptor(i,n):o,l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(r,i,n,o);else for(var u=r.length-1;u>=0;u--)(l=r[u])&&(a=(s<3?l(a):s>3?l(i,n,a):l(i,n))||a);return s>3&&a&&Object.defineProperty(i,n,a),a},sf=function(r,i){return function(n,o){i(n,o,r)}},af=function(r,i){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,i)},lf=function(r,i,n,o){function s(a){return a instanceof n?a:new n(function(l){l(a)})}return new(n||(n=Promise))(function(a,l){function u(f){try{p(o.next(f))}catch(h){l(h)}}function c(f){try{p(o.throw(f))}catch(h){l(h)}}function p(f){f.done?a(f.value):s(f.value).then(u,c)}p((o=o.apply(r,i||[])).next())})},uf=function(r,i){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},o,s,a,l;return l={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(l[Symbol.iterator]=function(){return this}),l;function u(p){return function(f){return c([p,f])}}function c(p){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(a=p[0]&2?s.return:p[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,p[1])).done)return a;switch(s=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,s=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=i.call(r,n)}catch(f){p=[6,f],s=0}finally{o=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},xf=function(r,i,n,o){o===void 0&&(o=n),r[o]=i[n]},cf=function(r,i){for(var n in r)n!=="default"&&!i.hasOwnProperty(n)&&(i[n]=r[n])},zn=function(r){var i=typeof Symbol=="function"&&Symbol.iterator,n=i&&r[i],o=0;if(n)return n.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&o>=r.length&&(r=void 0),{value:r&&r[o++],done:!r}}};throw new TypeError(i?"Object is not iterable.":"Symbol.iterator is not defined.")},Da=function(r,i){var n=typeof Symbol=="function"&&r[Symbol.iterator];if(!n)return r;var o=n.call(r),s,a=[],l;try{for(;(i===void 0||i-- >0)&&!(s=o.next()).done;)a.push(s.value)}catch(u){l={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(l)throw l.error}}return a},pf=function(){for(var r=[],i=0;i<arguments.length;i++)r=r.concat(Da(arguments[i]));return r},ff=function(){for(var r=0,i=0,n=arguments.length;i<n;i++)r+=arguments[i].length;for(var o=Array(r),s=0,i=0;i<n;i++)for(var a=arguments[i],l=0,u=a.length;l<u;l++,s++)o[s]=a[l];return o},cr=function(r){return this instanceof cr?(this.v=r,this):new cr(r)},df=function(r,i,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(r,i||[]),s,a=[];return s={},l("next"),l("throw"),l("return"),s[Symbol.asyncIterator]=function(){return this},s;function l(d){o[d]&&(s[d]=function(m){return new Promise(function(y,_){a.push([d,m,y,_])>1||u(d,m)})})}function u(d,m){try{c(o[d](m))}catch(y){h(a[0][3],y)}}function c(d){d.value instanceof cr?Promise.resolve(d.value.v).then(p,f):h(a[0][2],d)}function p(d){u("next",d)}function f(d){u("throw",d)}function h(d,m){d(m),a.shift(),a.length&&u(a[0][0],a[0][1])}},hf=function(r){var i,n;return i={},o("next"),o("throw",function(s){throw s}),o("return"),i[Symbol.iterator]=function(){return this},i;function o(s,a){i[s]=r[s]?function(l){return(n=!n)?{value:cr(r[s](l)),done:s==="return"}:a?a(l):l}:a}},mf=function(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r[Symbol.asyncIterator],n;return i?i.call(r):(r=typeof zn=="function"?zn(r):r[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(a){n[a]=r[a]&&function(l){return new Promise(function(u,c){l=r[a](l),s(u,c,l.done,l.value)})}}function s(a,l,u,c){Promise.resolve(c).then(function(p){a({value:p,done:u})},l)}},yf=function(r,i){return Object.defineProperty?Object.defineProperty(r,"raw",{value:i}):r.raw=i,r},vf=function(r){if(r&&r.__esModule)return r;var i={};if(r!=null)for(var n in r)Object.hasOwnProperty.call(r,n)&&(i[n]=r[n]);return i.default=r,i},_f=function(r){return r&&r.__esModule?r:{default:r}},gf=function(r,i){if(!i.has(r))throw new TypeError("attempted to get private field on non-instance");return i.get(r)},bf=function(r,i,n){if(!i.has(r))throw new TypeError("attempted to set private field on non-instance");return i.set(r,n),n},t("__extends",tf),t("__assign",rf),t("__rest",nf),t("__decorate",of),t("__param",sf),t("__metadata",af),t("__awaiter",lf),t("__generator",uf),t("__exportStar",cf),t("__createBinding",xf),t("__values",zn),t("__read",Da),t("__spread",pf),t("__spreadArrays",ff),t("__await",cr),t("__asyncGenerator",df),t("__asyncDelegator",hf),t("__asyncValues",mf),t("__makeTemplateObject",yf),t("__importStar",vf),t("__importDefault",_f),t("__classPrivateFieldGet",gf),t("__classPrivateFieldSet",bf)})});var Cd=ue((pi,dr)=>{var X_=200,Z_="Expected a function",za="__lodash_hash_undefined__",Zn=1,hr=2,Kf=1/0,Qf=9007199254740991,eo="[object Arguments]",$a="[object Array]",zf="[object Boolean]",$f="[object Date]",Gf="[object Error]",Wf="[object Function]",eg="[object GeneratorFunction]",to="[object Map]",Yf="[object Number]",mr="[object Object]",Jf="[object Promise]",Xf="[object RegExp]",ro="[object Set]",Zf="[object String]",ed="[object Symbol]",Ga="[object WeakMap]",td="[object ArrayBuffer]",io="[object DataView]",tg="[object Float32Array]",rg="[object Float64Array]",ig="[object Int8Array]",ng="[object Int16Array]",og="[object Int32Array]",sg="[object Uint8Array]",ag="[object Uint8ClampedArray]",lg="[object Uint16Array]",ug="[object Uint32Array]",cg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pg=/^\w*$/,fg=/^\./,dg=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,hg=/[\\^$.*+?()[\]{}|]/g,mg=/\\(\\)?/g,yg=/^\[object .+?Constructor\]$/,vg=/^(?:0|[1-9]\d*)$/,L={};L[tg]=L[rg]=L[ig]=L[ng]=L[og]=L[sg]=L[ag]=L[lg]=L[ug]=!0;L[eo]=L[$a]=L[td]=L[zf]=L[io]=L[$f]=L[Gf]=L[Wf]=L[to]=L[Yf]=L[mr]=L[Xf]=L[ro]=L[Zf]=L[Ga]=!1;var rd=typeof global=="object"&&global&&global.Object===Object&&global,_g=typeof self=="object"&&self&&self.Object===Object&&self,nt=rd||_g||Function("return this")(),id=typeof pi=="object"&&pi&&!pi.nodeType&&pi,nd=id&&typeof dr=="object"&&dr&&!dr.nodeType&&dr,gg=nd&&nd.exports===id,od=gg&&rd.process,sd=function(){try{return od&&od.binding("util")}catch(t){}}(),ad=sd&&sd.isTypedArray;function ld(t,e){for(var r=-1,i=e.length,n=t.length;++r<i;)t[n+r]=e[r];return t}function bg(t,e){for(var r=-1,i=t?t.length:0;++r<i;)if(e(t[r],r,t))return!0;return!1}function xg(t){return function(e){return e==null?void 0:e[t]}}function wg(t,e){for(var r=-1,i=Array(t);++r<t;)i[r]=e(r);return i}function Sg(t){return function(e){return t(e)}}function Eg(t,e){return t==null?void 0:t[e]}function Wa(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch(r){}return e}function Tg(t){var e=-1,r=Array(t.size);return t.forEach(function(i,n){r[++e]=[n,i]}),r}function Ya(t,e){return function(r){return t(e(r))}}function Cg(t){var e=-1,r=Array(t.size);return t.forEach(function(i){r[++e]=i}),r}var Og=Array.prototype,Pg=Function.prototype,no=Object.prototype,Ja=nt["__core-js_shared__"],ud=function(){var t=/[^.]+$/.exec(Ja&&Ja.keys&&Ja.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),cd=Pg.toString,Ce=no.hasOwnProperty,yr=no.toString,kg=RegExp("^"+cd.call(Ce).replace(hg,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pd=nt.Symbol,fd=nt.Uint8Array,Ag=Ya(Object.getPrototypeOf,Object),Dg=no.propertyIsEnumerable,Ng=Og.splice,Xa=Object.getOwnPropertySymbols,Ig=Ya(Object.keys,Object),Za=vr(nt,"DataView"),fi=vr(nt,"Map"),el=vr(nt,"Promise"),tl=vr(nt,"Set"),rl=vr(nt,"WeakMap"),di=vr(Object,"create"),Mg=Ot(Za),Rg=Ot(fi),jg=Ot(el),Fg=Ot(tl),Lg=Ot(rl),oo=pd?pd.prototype:void 0,il=oo?oo.valueOf:void 0,dd=oo?oo.toString:void 0;function Pt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Vg(){this.__data__=di?di(null):{}}function Bg(t){return this.has(t)&&delete this.__data__[t]}function qg(t){var e=this.__data__;if(di){var r=e[t];return r===za?void 0:r}return Ce.call(e,t)?e[t]:void 0}function Ug(t){var e=this.__data__;return di?e[t]!==void 0:Ce.call(e,t)}function Hg(t,e){var r=this.__data__;return r[t]=di&&e===void 0?za:e,this}Pt.prototype.clear=Vg;Pt.prototype.delete=Bg;Pt.prototype.get=qg;Pt.prototype.has=Ug;Pt.prototype.set=Hg;function He(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Kg(){this.__data__=[]}function Qg(t){var e=this.__data__,r=so(e,t);if(r<0)return!1;var i=e.length-1;return r==i?e.pop():Ng.call(e,r,1),!0}function zg(t){var e=this.__data__,r=so(e,t);return r<0?void 0:e[r][1]}function $g(t){return so(this.__data__,t)>-1}function Gg(t,e){var r=this.__data__,i=so(r,t);return i<0?r.push([t,e]):r[i][1]=e,this}He.prototype.clear=Kg;He.prototype.delete=Qg;He.prototype.get=zg;He.prototype.has=$g;He.prototype.set=Gg;function Ke(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var i=t[e];this.set(i[0],i[1])}}function Wg(){this.__data__={hash:new Pt,map:new(fi||He),string:new Pt}}function Yg(t){return ao(this,t).delete(t)}function Jg(t){return ao(this,t).get(t)}function Xg(t){return ao(this,t).has(t)}function Zg(t,e){return ao(this,t).set(t,e),this}Ke.prototype.clear=Wg;Ke.prototype.delete=Yg;Ke.prototype.get=Jg;Ke.prototype.has=Xg;Ke.prototype.set=Zg;function lo(t){var e=-1,r=t?t.length:0;for(this.__data__=new Ke;++e<r;)this.add(t[e])}function eb(t){return this.__data__.set(t,za),this}function tb(t){return this.__data__.has(t)}lo.prototype.add=lo.prototype.push=eb;lo.prototype.has=tb;function Qe(t){this.__data__=new He(t)}function rb(){this.__data__=new He}function ib(t){return this.__data__.delete(t)}function nb(t){return this.__data__.get(t)}function ob(t){return this.__data__.has(t)}function sb(t,e){var r=this.__data__;if(r instanceof He){var i=r.__data__;if(!fi||i.length<X_-1)return i.push([t,e]),this;r=this.__data__=new Ke(i)}return r.set(t,e),this}Qe.prototype.clear=rb;Qe.prototype.delete=ib;Qe.prototype.get=nb;Qe.prototype.has=ob;Qe.prototype.set=sb;function yd(t,e){var r=ot(t)||md(t)?wg(t.length,String):[],i=r.length,n=!!i;for(var o in t)(e||Ce.call(t,o))&&!(n&&(o=="length"||hd(o,i)))&&r.push(o);return r}function so(t,e){for(var r=t.length;r--;)if(vd(t[r][0],e))return r;return-1}function gd(t,e){e=uo(e,t)?[e]:_d(e);for(var r=0,i=e.length;t!=null&&r<i;)t=t[co(e[r++])];return r&&r==i?t:void 0}function ab(t,e,r){var i=e(t);return ot(t)?i:ld(i,r(t))}function lb(t){return yr.call(t)}function ub(t,e){return t!=null&&e in Object(t)}function nl(t,e,r,i,n){return t===e?!0:t==null||e==null||!hi(t)&&!po(e)?t!==t&&e!==e:cb(t,e,nl,r,i,n)}function cb(t,e,r,i,n,o){var s=ot(t),a=ot(e),l=$a,u=$a;s||(l=st(t),l=l==eo?mr:l),a||(u=st(e),u=u==eo?mr:u);var c=l==mr&&!Wa(t),p=u==mr&&!Wa(e),f=l==u;if(f&&!c)return o||(o=new Qe),s||db(t)?bd(t,e,r,i,n,o):pb(t,e,l,r,i,n,o);if(!(n&hr)){var h=c&&Ce.call(t,"__wrapped__"),d=p&&Ce.call(e,"__wrapped__");if(h||d){var m=h?t.value():t,y=d?e.value():e;return o||(o=new Qe),r(m,y,i,n,o)}}return f?(o||(o=new Qe),fb(t,e,r,i,n,o)):!1}function hb(t,e,r,i){var n=r.length,o=n,s=!i;if(t==null)return!o;for(t=Object(t);n--;){var a=r[n];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<o;){a=r[n];var l=a[0],u=t[l],c=a[1];if(s&&a[2]){if(u===void 0&&!(l in t))return!1}else{var p=new Qe;if(i)var f=i(u,c,l,t,e,p);if(!(f===void 0?nl(c,u,i,Zn|hr,p):f))return!1}}return!0}function yb(t){if(!hi(t)||mb(t))return!1;var e=xd(t)||Wa(t)?kg:yg;return e.test(Ot(t))}function vb(t){return po(t)&&ol(t.length)&&!!L[yr.call(t)]}function wb(t){return typeof t=="function"?t:t==null?bb:typeof t=="object"?ot(t)?gb(t[0],t[1]):_b(t):xb(t)}function Sb(t){if(!wd(t))return Ig(t);var e=[];for(var r in Object(t))Ce.call(t,r)&&r!="constructor"&&e.push(r);return e}function Tb(t){if(!hi(t))return Eb(t);var e=wd(t),r=[];for(var i in t)i=="constructor"&&(e||!Ce.call(t,i))||r.push(i);return r}function _b(t){var e=Cb(t);return e.length==1&&e[0][2]?Sd(e[0][0],e[0][1]):function(r){return r===t||hb(r,t,e)}}function gb(t,e){return uo(t)&&Ed(e)?Sd(co(t),e):function(r){var i=Ob(r,t);return i===void 0&&i===e?Pb(r,t):nl(e,i,void 0,Zn|hr)}}function kb(t,e,r){for(var i=-1,n=e.length,o={};++i<n;){var s=e[i],a=t[s];r(a,s)&&(o[s]=a)}return o}function Ab(t){return function(e){return gd(e,t)}}function Db(t){if(typeof t=="string")return t;if(sl(t))return dd?dd.call(t):"";var e=t+"";return e=="0"&&1/t==-Kf?"-0":e}function _d(t){return ot(t)?t:Nb(t)}function bd(t,e,r,i,n,o){var s=n&hr,a=t.length,l=e.length;if(a!=l&&!(s&&l>a))return!1;var u=o.get(t);if(u&&o.get(e))return u==e;var c=-1,p=!0,f=n&Zn?new lo:void 0;for(o.set(t,e),o.set(e,t);++c<a;){var h=t[c],d=e[c];if(i)var m=s?i(d,h,c,e,t,o):i(h,d,c,t,e,o);if(m!==void 0){if(m)continue;p=!1;break}if(f){if(!bg(e,function(y,_){if(!f.has(_)&&(h===y||r(h,y,i,n,o)))return f.add(_)})){p=!1;break}}else if(!(h===d||r(h,d,i,n,o))){p=!1;break}}return o.delete(t),o.delete(e),p}function pb(t,e,r,i,n,o,s){switch(r){case io:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case td:return!(t.byteLength!=e.byteLength||!i(new fd(t),new fd(e)));case zf:case $f:case Yf:return vd(+t,+e);case Gf:return t.name==e.name&&t.message==e.message;case Xf:case Zf:return t==e+"";case to:var a=Tg;case ro:var l=o&hr;if(a||(a=Cg),t.size!=e.size&&!l)return!1;var u=s.get(t);if(u)return u==e;o|=Zn,s.set(t,e);var c=bd(a(t),a(e),i,n,o,s);return s.delete(t),c;case ed:if(il)return il.call(t)==il.call(e)}return!1}function fb(t,e,r,i,n,o){var s=n&hr,a=al(t),l=a.length,u=al(e),c=u.length;if(l!=c&&!s)return!1;for(var p=l;p--;){var f=a[p];if(!(s?f in e:Ce.call(e,f)))return!1}var h=o.get(t);if(h&&o.get(e))return h==e;var d=!0;o.set(t,e),o.set(e,t);for(var m=s;++p<l;){f=a[p];var y=t[f],_=e[f];if(i)var w=s?i(_,y,f,e,t,o):i(y,_,f,t,e,o);if(!(w===void 0?y===_||r(y,_,i,n,o):w)){d=!1;break}m||(m=f=="constructor")}if(d&&!m){var S=t.constructor,C=e.constructor;S!=C&&"constructor"in t&&"constructor"in e&&!(typeof S=="function"&&S instanceof S&&typeof C=="function"&&C instanceof C)&&(d=!1)}return o.delete(t),o.delete(e),d}function Rb(t){return ab(t,Mb,Ib)}function ao(t,e){var r=t.__data__;return jb(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Cb(t){for(var e=al(t),r=e.length;r--;){var i=e[r],n=t[i];e[r]=[i,n,Ed(n)]}return e}function vr(t,e){var r=Eg(t,e);return yb(r)?r:void 0}var Fb=Xa?Ya(Xa,Object):Td,Ib=Xa?function(t){for(var e=[];t;)ld(e,Fb(t)),t=Ag(t);return e}:Td,st=lb;(Za&&st(new Za(new ArrayBuffer(1)))!=io||fi&&st(new fi)!=to||el&&st(el.resolve())!=Jf||tl&&st(new tl)!=ro||rl&&st(new rl)!=Ga)&&(st=function(t){var e=yr.call(t),r=e==mr?t.constructor:void 0,i=r?Ot(r):void 0;if(i)switch(i){case Mg:return io;case Rg:return to;case jg:return Jf;case Fg:return ro;case Lg:return Ga}return e});function Lb(t,e,r){e=uo(e,t)?[e]:_d(e);for(var i,n=-1,o=e.length;++n<o;){var s=co(e[n]);if(!(i=t!=null&&r(t,s)))break;t=t[s]}if(i)return i;var o=t?t.length:0;return!!o&&ol(o)&&hd(s,o)&&(ot(t)||md(t))}function hd(t,e){return e=e??Qf,!!e&&(typeof t=="number"||vg.test(t))&&t>-1&&t%1==0&&t<e}function uo(t,e){if(ot(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||sl(t)?!0:pg.test(t)||!cg.test(t)||e!=null&&t in Object(e)}function jb(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function mb(t){return!!ud&&ud in t}function wd(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||no;return t===r}function Ed(t){return t===t&&!hi(t)}function Sd(t,e){return function(r){return r==null?!1:r[t]===e&&(e!==void 0||t in Object(r))}}function Eb(t){var e=[];if(t!=null)for(var r in Object(t))e.push(r);return e}var Nb=ll(function(t){t=Vb(t);var e=[];return fg.test(t)&&e.push(""),t.replace(dg,function(r,i,n,o){e.push(n?o.replace(mg,"$1"):i||r)}),e});function co(t){if(typeof t=="string"||sl(t))return t;var e=t+"";return e=="0"&&1/t==-Kf?"-0":e}function Ot(t){if(t!=null){try{return cd.call(t)}catch(e){}try{return t+""}catch(e){}}return""}function ll(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(Z_);var r=function(){var i=arguments,n=e?e.apply(this,i):i[0],o=r.cache;if(o.has(n))return o.get(n);var s=t.apply(this,i);return r.cache=o.set(n,s),s};return r.cache=new(ll.Cache||Ke),r}ll.Cache=Ke;function vd(t,e){return t===e||t!==t&&e!==e}function md(t){return Bb(t)&&Ce.call(t,"callee")&&(!Dg.call(t,"callee")||yr.call(t)==eo)}var ot=Array.isArray;function ul(t){return t!=null&&ol(t.length)&&!xd(t)}function Bb(t){return po(t)&&ul(t)}function xd(t){var e=hi(t)?yr.call(t):"";return e==Wf||e==eg}function ol(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=Qf}function hi(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function po(t){return!!t&&typeof t=="object"}function sl(t){return typeof t=="symbol"||po(t)&&yr.call(t)==ed}var db=ad?Sg(ad):vb;function Vb(t){return t==null?"":Db(t)}function Ob(t,e,r){var i=t==null?void 0:gd(t,e);return i===void 0?r:i}function Pb(t,e){return t!=null&&Lb(t,e,ub)}function al(t){return ul(t)?yd(t):Sb(t)}function Mb(t){return ul(t)?yd(t,!0):Tb(t)}function qb(t,e){return t==null?{}:kb(t,Rb(t),wb(e))}function bb(t){return t}function xb(t){return uo(t)?xg(co(t)):Ab(t)}function Td(){return[]}dr.exports=qb});var du=new WeakMap,Go=t=>(...e)=>{let r=t(...e);return du.set(r,!0),r},ht=t=>typeof t=="function"&&du.has(t);var Wo=typeof window!="undefined"&&window.customElements!=null&&window.customElements.polyfillWrapFlushCallback!==void 0;var jr=(t,e,r=null)=>{for(;e!==r;){let i=e.nextSibling;t.removeChild(e),e=i}};var ce={},Bi={};var we=`{{lit-${String(Math.random()).slice(2)}}}`,Yo=`<!--${we}-->`,hu=new RegExp(`${we}|${Yo}`),Vt="$lit$",qi=class{constructor(e,r){this.parts=[],this.element=r;let i=[],n=[],o=document.createTreeWalker(r.content,133,null,!1),s=0,a=-1,l=0,{strings:u,values:{length:c}}=e;for(;l<c;){let p=o.nextNode();if(p===null){o.currentNode=n.pop();continue}if(a++,p.nodeType===1){if(p.hasAttributes()){let f=p.attributes,{length:h}=f,d=0;for(let m=0;m<h;m++)mu(f[m].name,Vt)&&d++;for(;d-- >0;){let m=u[l],y=Ui.exec(m)[2],_=y.toLowerCase()+Vt,w=p.getAttribute(_);p.removeAttribute(_);let S=w.split(hu);this.parts.push({type:"attribute",index:a,name:y,strings:S}),l+=S.length-1}}p.tagName==="TEMPLATE"&&(n.push(p),o.currentNode=p.content)}else if(p.nodeType===3){let f=p.data;if(f.indexOf(we)>=0){let h=p.parentNode,d=f.split(hu),m=d.length-1;for(let y=0;y<m;y++){let _,w=d[y];if(w==="")_=Se();else{let S=Ui.exec(w);S!==null&&mu(S[2],Vt)&&(w=w.slice(0,S.index)+S[1]+S[2].slice(0,-Vt.length)+S[3]),_=document.createTextNode(w)}h.insertBefore(_,p),this.parts.push({type:"node",index:++a})}d[m]===""?(h.insertBefore(Se(),p),i.push(p)):p.data=d[m],l+=m}}else if(p.nodeType===8)if(p.data===we){let f=p.parentNode;(p.previousSibling===null||a===s)&&(a++,f.insertBefore(Se(),p)),s=a,this.parts.push({type:"node",index:a}),p.nextSibling===null?p.data="":(i.push(p),a--),l++}else{let f=-1;for(;(f=p.data.indexOf(we,f+1))!==-1;)this.parts.push({type:"node",index:-1}),l++}}for(let p of i)p.parentNode.removeChild(p)}},mu=(t,e)=>{let r=t.length-e.length;return r>=0&&t.slice(r)===e},Jo=t=>t.index!==-1,Se=()=>document.createComment(""),Ui=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;var Fr=class{constructor(e,r,i){this.__parts=[],this.template=e,this.processor=r,this.options=i}update(e){let r=0;for(let i of this.__parts)i!==void 0&&i.setValue(e[r]),r++;for(let i of this.__parts)i!==void 0&&i.commit()}_clone(){let e=Wo?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),r=[],i=this.template.parts,n=document.createTreeWalker(e,133,null,!1),o=0,s=0,a,l=n.nextNode();for(;o<i.length;){if(a=i[o],!Jo(a)){this.__parts.push(void 0),o++;continue}for(;s<a.index;)s++,l.nodeName==="TEMPLATE"&&(r.push(l),n.currentNode=l.content),(l=n.nextNode())===null&&(n.currentNode=r.pop(),l=n.nextNode());if(a.type==="node"){let u=this.processor.handleTextExpression(this.options);u.insertAfterNode(l.previousSibling),this.__parts.push(u)}else this.__parts.push(...this.processor.handleAttributeExpressions(l,a.name,a.strings,this.options));o++}return Wo&&(document.adoptNode(e),customElements.upgrade(e)),e}};var yu=window.trustedTypes&&trustedTypes.createPolicy("lit-html",{createHTML:t=>t}),Xm=` ${we} `,Bt=class{constructor(e,r,i,n){this.strings=e,this.values=r,this.type=i,this.processor=n}getHTML(){let e=this.strings.length-1,r="",i=!1;for(let n=0;n<e;n++){let o=this.strings[n],s=o.lastIndexOf("<!--");i=(s>-1||i)&&o.indexOf("-->",s+1)===-1;let a=Ui.exec(o);a===null?r+=o+(i?Xm:Yo):r+=o.substr(0,a.index)+a[1]+a[2]+Vt+a[3]+we}return r+=this.strings[e],r}getTemplateElement(){let e=document.createElement("template"),r=this.getHTML();return yu!==void 0&&(r=yu.createHTML(r)),e.innerHTML=r,e}};var Hi=t=>t===null||!(typeof t=="object"||typeof t=="function"),Ki=t=>Array.isArray(t)||!!(t&&t[Symbol.iterator]),Lr=class{constructor(e,r,i){this.dirty=!0,this.element=e,this.name=r,this.strings=i,this.parts=[];for(let n=0;n<i.length-1;n++)this.parts[n]=this._createPart()}_createPart(){return new Qi(this)}_getValue(){let e=this.strings,r=e.length-1,i=this.parts;if(r===1&&e[0]===""&&e[1]===""){let o=i[0].value;if(typeof o=="symbol")return String(o);if(typeof o=="string"||!Ki(o))return o}let n="";for(let o=0;o<r;o++){n+=e[o];let s=i[o];if(s!==void 0){let a=s.value;if(Hi(a)||!Ki(a))n+=typeof a=="string"?a:String(a);else for(let l of a)n+=typeof l=="string"?l:String(l)}}return n+=e[r],n}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}},Qi=class{constructor(e){this.value=void 0,this.committer=e}setValue(e){e!==ce&&(!Hi(e)||e!==this.value)&&(this.value=e,ht(e)||(this.committer.dirty=!0))}commit(){for(;ht(this.value);){let e=this.value;this.value=ce,e(this)}this.value!==ce&&this.committer.commit()}},Je=class{constructor(e){this.value=void 0,this.__pendingValue=void 0,this.options=e}appendInto(e){this.startNode=e.appendChild(Se()),this.endNode=e.appendChild(Se())}insertAfterNode(e){this.startNode=e,this.endNode=e.nextSibling}appendIntoPart(e){e.__insert(this.startNode=Se()),e.__insert(this.endNode=Se())}insertAfterPart(e){e.__insert(this.startNode=Se()),this.endNode=e.endNode,e.endNode=this.startNode}setValue(e){this.__pendingValue=e}commit(){if(this.startNode.parentNode===null)return;for(;ht(this.__pendingValue);){let r=this.__pendingValue;this.__pendingValue=ce,r(this)}let e=this.__pendingValue;e!==ce&&(Hi(e)?e!==this.value&&this.__commitText(e):e instanceof Bt?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):Ki(e)?this.__commitIterable(e):e===Bi?(this.value=Bi,this.clear()):this.__commitText(e))}__insert(e){this.endNode.parentNode.insertBefore(e,this.endNode)}__commitNode(e){this.value!==e&&(this.clear(),this.__insert(e),this.value=e)}__commitText(e){let r=this.startNode.nextSibling;e=e??"";let i=typeof e=="string"?e:String(e);r===this.endNode.previousSibling&&r.nodeType===3?r.data=i:this.__commitNode(document.createTextNode(i)),this.value=e}__commitTemplateResult(e){let r=this.options.templateFactory(e);if(this.value instanceof Fr&&this.value.template===r)this.value.update(e.values);else{let i=new Fr(r,e.processor,this.options),n=i._clone();i.update(e.values),this.__commitNode(n),this.value=i}}__commitIterable(e){Array.isArray(this.value)||(this.value=[],this.clear());let r=this.value,i=0,n;for(let o of e)n=r[i],n===void 0&&(n=new Je(this.options),r.push(n),i===0?n.appendIntoPart(this):n.insertAfterPart(r[i-1])),n.setValue(o),n.commit(),i++;i<r.length&&(r.length=i,this.clear(n&&n.endNode))}clear(e=this.startNode){jr(this.startNode.parentNode,e.nextSibling,this.endNode)}},zi=class{constructor(e,r,i){if(this.value=void 0,this.__pendingValue=void 0,i.length!==2||i[0]!==""||i[1]!=="")throw new Error("Boolean attributes can only contain a single expression");this.element=e,this.name=r,this.strings=i}setValue(e){this.__pendingValue=e}commit(){for(;ht(this.__pendingValue);){let r=this.__pendingValue;this.__pendingValue=ce,r(this)}if(this.__pendingValue===ce)return;let e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=ce}},$i=class extends Lr{constructor(e,r,i){super(e,r,i);this.single=i.length===2&&i[0]===""&&i[1]===""}_createPart(){return new Xo(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}},Xo=class extends Qi{},vu=!1;(()=>{try{let t={get capture(){return vu=!0,!1}};window.addEventListener("test",t,t),window.removeEventListener("test",t,t)}catch(t){}})();var Gi=class{constructor(e,r,i){this.value=void 0,this.__pendingValue=void 0,this.element=e,this.eventName=r,this.eventContext=i,this.__boundHandleEvent=n=>this.handleEvent(n)}setValue(e){this.__pendingValue=e}commit(){for(;ht(this.__pendingValue);){let o=this.__pendingValue;this.__pendingValue=ce,o(this)}if(this.__pendingValue===ce)return;let e=this.__pendingValue,r=this.value,i=e==null||r!=null&&(e.capture!==r.capture||e.once!==r.once||e.passive!==r.passive),n=e!=null&&(r==null||i);i&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),n&&(this.__options=Zm(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=ce}handleEvent(e){typeof this.value=="function"?this.value.call(this.eventContext||this.element,e):this.value.handleEvent(e)}},Zm=t=>t&&(vu?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);var Zo=class{handleAttributeExpressions(e,r,i,n){let o=r[0];return o==="."?new $i(e,r.slice(1),i).parts:o==="@"?[new Gi(e,r.slice(1),n.eventContext)]:o==="?"?[new zi(e,r.slice(1),i)]:new Lr(e,r,i).parts}handleTextExpression(e){return new Je(e)}},es=new Zo;function rs(t){let e=ts.get(t.type);e===void 0&&(e={stringsArray:new WeakMap,keyString:new Map},ts.set(t.type,e));let r=e.stringsArray.get(t.strings);if(r!==void 0)return r;let i=t.strings.join(we);return r=e.keyString.get(i),r===void 0&&(r=new qi(t,t.getTemplateElement()),e.keyString.set(i,r)),e.stringsArray.set(t.strings,r),r}var ts=new Map;var is=new WeakMap,Wi=(t,e,r)=>{let i=is.get(e);i===void 0&&(jr(e,e.firstChild),is.set(e,i=new Je(Object.assign({templateFactory:rs},r))),i.appendInto(e)),i.setValue(t),i.commit()};typeof window!="undefined"&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.3.0");var pe=(t,...e)=>new Bt(t,e,"html",es);var Yi=Symbol("haunted.phase"),Vr=Symbol("haunted.hook"),ns=Symbol("haunted.update"),os=Symbol("haunted.commit"),Ae=Symbol("haunted.effects"),mt=Symbol("haunted.layoutEffects"),Br="haunted.context";var qr,_u=0;function ss(t){qr=t}function as(){qr=null,_u=0}function gu(){return _u++}var ne=class{constructor(e,r){this.id=e,this.state=r}};function ty(t,...e){let r=gu(),i=qr[Vr],n=i.get(r);return n||(n=new t(r,qr,...e),i.set(r,n)),n.update(...e)}function $(t){return ty.bind(null,t)}function Ji(t){return $(class extends ne{constructor(e,r,i,n){super(e,r);t(r,this)}update(e,r){this.callback=e,this.values=r}call(){(!this.values||this.hasChanged())&&this.run(),this.lastValues=this.values}run(){this.teardown(),this._teardown=this.callback.call(this.state)}teardown(){typeof this._teardown=="function"&&this._teardown()}hasChanged(){return!this.lastValues||this.values.some((e,r)=>this.lastValues[r]!==e)}})}function ls(t,e){t[Ae].push(e)}var ry=Ji(ls);var us=$(class extends ne{constructor(t,e,r){super(t,e);this.updater=this.updater.bind(this),typeof r=="function"&&(r=r()),this.makeArgs(r)}update(){return this.args}updater(t){if(typeof t=="function"){let e=t,[r]=this.args;t=e(r)}this.makeArgs(t),this.state.update()}makeArgs(t){this.args=Object.freeze([t,this.updater])}});var iy=$(class extends ne{constructor(t,e,r,i,n){super(t,e);this.dispatch=this.dispatch.bind(this),this.currentState=n!==void 0?n(i):i}update(t){return this.reducer=t,[this.currentState,this.dispatch]}dispatch(t){this.currentState=this.reducer(this.currentState,t),this.state.update()}});var Xi=class{constructor(e,r){this.update=e,this.host=r,this[Vr]=new Map,this[Ae]=[],this[mt]=[]}run(e){ss(this);let r=e();return as(),r}_runEffects(e){let r=this[e];ss(this);for(let i of r)i.call(this);as()}runEffects(){this._runEffects(Ae)}runLayoutEffects(){this._runEffects(mt)}teardown(){this[Vr].forEach(r=>{typeof r.teardown=="function"&&r.teardown()})}};var ny=Promise.resolve().then.bind(Promise.resolve());function bu(){let t=[],e;function r(){e=null;let i=t;t=[];for(var n=0,o=i.length;n<o;n++)i[n]()}return function(i){t.push(i),e==null&&(e=ny(r))}}var oy=bu(),xu=bu(),qt=class{constructor(e,r){this.renderer=e,this.host=r,this.state=new Xi(this.update.bind(this),r),this[Yi]=null,this._updateQueued=!1}update(){this._updateQueued||(oy(()=>{let e=this.handlePhase(ns);xu(()=>{this.handlePhase(os,e),xu(()=>{this.handlePhase(Ae)})}),this._updateQueued=!1}),this._updateQueued=!0)}handlePhase(e,r){switch(this[Yi]=e,e){case os:this.commit(r),this.runEffects(mt);return;case ns:return this.render();case Ae:return this.runEffects(Ae)}this[Yi]=null}render(){return this.state.run(()=>this.renderer.call(this.host,this.host))}runEffects(e){this.state._runEffects(e)}teardown(){this.state.teardown()}};var sy=(t="")=>t.replace(/-+([a-z])?/g,(e,r)=>r?r.toUpperCase():"");function wu(t){class e extends qt{constructor(n,o,s){super(n,s||o);this.frag=o}commit(n){t(n,this.frag)}}function r(i,n,o){let s=(o||n||{}).baseElement||HTMLElement,{observedAttributes:a=[],useShadowDOM:l=!0,shadowRootInit:u={}}=o||n||{};class c extends s{constructor(){super();l===!1?this._scheduler=new e(i,this):(this.attachShadow({mode:"open",...u}),this._scheduler=new e(i,this.shadowRoot,this))}static get observedAttributes(){return i.observedAttributes||a||[]}connectedCallback(){this._scheduler.update()}disconnectedCallback(){this._scheduler.teardown()}attributeChangedCallback(d,m,y){if(m===y)return;let _=y===""?!0:y;Reflect.set(this,sy(d),_)}}function p(h){let d=h;return Object.freeze({enumerable:!0,configurable:!0,get(){return d},set(m){d=m,this._scheduler.update()}})}let f=new Proxy(s.prototype,{getPrototypeOf(h){return h},set(h,d,m,y){let _;return d in h?(_=Object.getOwnPropertyDescriptor(h,d),_&&_.set?(_.set.call(y,m),!0):(Reflect.set(h,d,m,y),!0)):(typeof d=="symbol"||d[0]==="_"?_={enumerable:!0,configurable:!0,writable:!0,value:m}:_=p(m),Object.defineProperty(y,d,_),_.set&&_.set.call(y,m),!0)}});return Object.setPrototypeOf(c.prototype,f),c}return r}var cs=$(class extends ne{constructor(t,e,r){super(t,e);this._updater=this._updater.bind(this),this._ranEffect=!1,this._unsubscribe=null,ls(e,this)}update(t){if(this.state.virtual)throw new Error("can't be used with virtual components");return this.Context!==t&&(this._subscribe(t),this.Context=t),this.value}call(){this._ranEffect||(this._ranEffect=!0,this._unsubscribe&&this._unsubscribe(),this._subscribe(this.Context),this.state.update())}_updater(t){this.value=t,this.state.update()}_subscribe(t){let e={Context:t,callback:this._updater};this.state.host.dispatchEvent(new CustomEvent(Br,{detail:e,bubbles:!0,cancelable:!0,composed:!0}));let{unsubscribe:r,value:i}=e;this.value=r?i:t.defaultValue,this._unsubscribe=r}teardown(){this._unsubscribe&&this._unsubscribe()}});function Su(t){return e=>{let r={Provider:class extends HTMLElement{constructor(){super();this.listeners=new Set,this.addEventListener(Br,this)}disconnectedCallback(){this.removeEventListener(Br,this)}handleEvent(i){let{detail:n}=i;n.Context===r&&(n.value=this.value,n.unsubscribe=this.unsubscribe.bind(this,n.callback),this.listeners.add(n.callback),i.stopPropagation())}unsubscribe(i){this.listeners.delete(i)}set value(i){this._value=i;for(let n of this.listeners)n(i)}get value(){return this._value}},Consumer:t(function({render:i}){let n=cs(r);return i(n)}),defaultValue:e};return r}}var Zi=$(class extends ne{constructor(t,e,r,i){super(t,e);this.value=r(),this.values=i}update(t,e){return this.hasChanged(e)&&(this.values=e,this.value=t()),this.value}hasChanged(t=[]){return t.some((e,r)=>this.values[r]!==e)}});function ay(t,e){t[mt].push(e)}var ly=Ji(ay);var uy=t=>Zi(()=>({current:t}),[]);function ps({render:t}){let e=wu(t),r=Su(e);return{component:e,createContext:r}}var Eu=Array.prototype.includes;function Tu(){let t=new WeakMap,e=new WeakMap;class r extends qt{constructor(o,s){super(o,s);this.state.virtual=!0}render(){return this.state.run(()=>this.renderer.apply(this.host,this.args))}commit(o){this.host.setValue(o),this.host.commit()}teardown(){super.teardown();let o=e.get(this);t.delete(o)}}function i(n){function o(...s){return a=>{let l=t.get(a);l||(l=new r(n,a),t.set(a,l),e.set(l,a),fs(l,a)),l.args=s,l.update()}}return Go(o)}return i}function fs(t,e,r=e.startNode){let i=r.parentNode,n=new MutationObserver(o=>{for(let s of o)if(Eu.call(s.removedNodes,r)){n.disconnect(),r.parentNode instanceof ShadowRoot?fs(t,e):t.teardown();break}else if(Eu.call(s.addedNodes,r.nextSibling)){n.disconnect(),fs(t,e,r.nextSibling||void 0);break}});n.observe(i,{childList:!0})}var{component:cy,createContext:py}=ps({render:Wi}),ds=Tu();var $u=dt(zu()),{__extends:ee,__assign:g,__rest:De,__decorate:PE,__param:kE,__metadata:AE,__awaiter:Ne,__generator:Ie,__exportStar:DE,__createBinding:NE,__values:IE,__read:ME,__spread:RE,__spreadArrays:yt,__await:jE,__asyncGenerator:FE,__asyncDelegator:LE,__asyncValues:VE,__makeTemplateObject:BE,__importStar:qE,__importDefault:UE,__classPrivateFieldGet:HE,__classPrivateFieldSet:KE}=$u.default;var mc=dt(hc()),{__extends:yc,__assign:$E,__rest:GE,__decorate:WE,__param:YE,__metadata:JE,__awaiter:XE,__generator:ZE,__exportStar:eT,__createBinding:tT,__values:rT,__read:iT,__spread:nT,__spreadArrays:oT,__await:sT,__asyncGenerator:aT,__asyncDelegator:lT,__asyncValues:uT,__makeTemplateObject:cT,__importStar:pT,__importDefault:fT,__classPrivateFieldGet:dT,__classPrivateFieldSet:hT}=mc.default;(function(t){typeof globalThis!="object"&&(this?e():(t.defineProperty(t.prototype,"_T_",{configurable:!0,get:e}),_T_));function e(){var r=this||self;r.globalThis=r,delete t.prototype._T_}})(Object);var ys=globalThis;var vs=ys,vc=vs.console,_s="Invariant Violation",_c=Object.setPrototypeOf,fy=_c===void 0?function(t,e){return t.__proto__=e,t}:_c,F=function(t){yc(e,t);function e(r){r===void 0&&(r=_s);var i=t.call(this,typeof r=="number"?_s+": "+r+" (see https://github.com/apollographql/invariant-packages)":r)||this;return i.framesToPop=1,i.name=_s,fy(i,e.prototype),i}return e}(Error);function P(t,e){if(!t)throw new F(e)}var on=["log","warn","error","silent"],gs=on.indexOf("log");function bs(t){return function(){if(on.indexOf(t)>=gs)return vc[t].apply(vc,arguments)}}(function(t){t.log=bs("log"),t.warn=bs("warn"),t.error=bs("error")})(P||(P={}));function gc(t){var e=on[gs];return gs=Math.max(0,on.indexOf(t)),e}var dy=vs.process||{env:{}};if(!vs.process)try{Object.defineProperty(ys,"process",{value:dy})}catch(t){}function sn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sn=function(r){return typeof r}:sn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},sn(t)}function xs(t){return sn(t)=="object"&&t!==null}var xT=typeof Symbol=="function"&&Symbol.iterator!=null?Symbol.iterator:"@@iterator",wT=typeof Symbol=="function"&&Symbol.asyncIterator!=null?Symbol.asyncIterator:"@@asyncIterator",an=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag";function Kt(t,e){for(var r=/\r\n|[\n\r]/g,i=1,n=e+1,o;(o=r.exec(t.body))&&o.index<e;)i+=1,n=e+1-(o.index+o[0].length);return{line:i,column:n}}function ws(t){return ln(t.source,Kt(t.source,t.start))}function ln(t,e){var r=t.locationOffset.column-1,i=un(r)+t.body,n=e.line-1,o=t.locationOffset.line-1,s=e.line+o,a=e.line===1?r:0,l=e.column+a,u="".concat(t.name,":").concat(s,":").concat(l,`
`),c=i.split(/\r\n|[\n\r]/g),p=c[n];if(p.length>120){for(var f=Math.floor(l/80),h=l%80,d=[],m=0;m<p.length;m+=80)d.push(p.slice(m,m+80));return u+bc([["".concat(s),d[0]]].concat(d.slice(1,f+1).map(function(y){return["",y]}),[[" ",un(h-1)+"^"],["",d[f+1]]]))}return u+bc([["".concat(s-1),c[n-1]],["".concat(s),p],["",un(l-1)+"^"],["".concat(s+1),c[n+1]]])}function bc(t){var e=t.filter(function(i){var n=i[0],o=i[1];return o!==void 0}),r=Math.max.apply(Math,e.map(function(i){var n=i[0];return n.length}));return e.map(function(i){var n=i[0],o=i[1];return hy(r,n)+(o?" | "+o:" |")}).join(`
`)}function un(t){return Array(t+1).join(" ")}function hy(t,e){return un(t-e.length)+e}function cn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?cn=function(r){return typeof r}:cn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},cn(t)}function my(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xc(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yy(t,e,r){return e&&xc(t.prototype,e),r&&xc(t,r),t}function vy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ur(t,e)}function _y(t){var e=Sc();return function(){var i=Hr(t),n;if(e){var o=Hr(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return wc(this,n)}}function wc(t,e){return e&&(cn(e)==="object"||typeof e=="function")?e:Kr(t)}function Kr(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ss(t){var e=typeof Map=="function"?new Map:void 0;return Ss=function(i){if(i===null||!gy(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e!="undefined"){if(e.has(i))return e.get(i);e.set(i,n)}function n(){return pn(i,arguments,Hr(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),Ur(n,i)},Ss(t)}function pn(t,e,r){return Sc()?pn=Reflect.construct:pn=function(n,o,s){var a=[null];a.push.apply(a,o);var l=Function.bind.apply(n,a),u=new l;return s&&Ur(u,s.prototype),u},pn.apply(null,arguments)}function Sc(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function gy(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function Ur(t,e){return Ur=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},Ur(t,e)}function Hr(t){return Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Hr(t)}var Ec=function(t){vy(r,t);var e=_y(r);function r(i,n,o,s,a,l,u){var c,p,f,h,d;my(this,r),d=e.call(this,i);var m=Array.isArray(n)?n.length!==0?n:void 0:n?[n]:void 0,y=o;if(!y&&m){var _;y=(_=m[0].loc)===null||_===void 0?void 0:_.source}var w=s;!w&&m&&(w=m.reduce(function(k,O){return O.loc&&k.push(O.loc.start),k},[])),w&&w.length===0&&(w=void 0);var S;s&&o?S=s.map(function(k){return Kt(o,k)}):m&&(S=m.reduce(function(k,O){return O.loc&&k.push(Kt(O.loc.source,O.loc.start)),k},[]));var C=u;if(C==null&&l!=null){var E=l.extensions;xs(E)&&(C=E)}return Object.defineProperties(Kr(d),{name:{value:"GraphQLError"},message:{value:i,enumerable:!0,writable:!0},locations:{value:(c=S)!==null&&c!==void 0?c:void 0,enumerable:S!=null},path:{value:a??void 0,enumerable:a!=null},nodes:{value:m??void 0},source:{value:(p=y)!==null&&p!==void 0?p:void 0},positions:{value:(f=w)!==null&&f!==void 0?f:void 0},originalError:{value:l},extensions:{value:(h=C)!==null&&h!==void 0?h:void 0,enumerable:C!=null}}),l!=null&&l.stack?(Object.defineProperty(Kr(d),"stack",{value:l.stack,writable:!0,configurable:!0}),wc(d)):(Error.captureStackTrace?Error.captureStackTrace(Kr(d),r):Object.defineProperty(Kr(d),"stack",{value:Error().stack,writable:!0,configurable:!0}),d)}return yy(r,[{key:"toString",value:function(){return by(this)}},{key:an,get:function(){return"Object"}}]),r}(Ss(Error));function by(t){var e=t.message;if(t.nodes)for(var r=0,i=t.nodes;r<i.length;r++){var n=i[r];n.loc&&(e+=`

`+ws(n.loc))}else if(t.source&&t.locations)for(var o=0,s=t.locations;o<s.length;o++){var a=s[o];e+=`

`+ln(t.source,a)}return e}function te(t,e,r){return new Ec("Syntax Error: ".concat(r),void 0,t,[e])}var T=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"});function Es(t,e){var r=Boolean(t);if(!r)throw new Error(e??"Unexpected invariant triggered.")}var xy=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0,Qr=xy;function fn(t){var e=t.prototype.toJSON;typeof e=="function"||Es(0),t.prototype.inspect=e,Qr&&(t.prototype[Qr]=e)}var dn=function(){function t(r,i,n){this.start=r.start,this.end=i.end,this.startToken=r,this.endToken=i,this.source=n}var e=t.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},t}();fn(dn);var B=function(){function t(r,i,n,o,s,a,l){this.kind=r,this.start=i,this.end=n,this.line=o,this.column=s,this.value=l,this.prev=a,this.next=null}var e=t.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},t}();fn(B);function Ts(t){return t!=null&&typeof t.kind=="string"}var v=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function hn(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?hn=function(r){return typeof r}:hn=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},hn(t)}var wy=10,Tc=2;function zr(t){return mn(t,[])}function mn(t,e){switch(hn(t)){case"string":return JSON.stringify(t);case"function":return t.name?"[function ".concat(t.name,"]"):"[function]";case"object":return t===null?"null":Sy(t,e);default:return String(t)}}function Sy(t,e){if(e.indexOf(t)!==-1)return"[Circular]";var r=[].concat(e,[t]),i=Cy(t);if(i!==void 0){var n=i.call(t);if(n!==t)return typeof n=="string"?n:mn(n,r)}else if(Array.isArray(t))return Ty(t,r);return Ey(t,r)}function Ey(t,e){var r=Object.keys(t);if(r.length===0)return"{}";if(e.length>Tc)return"["+Oy(t)+"]";var i=r.map(function(n){var o=mn(t[n],e);return n+": "+o});return"{ "+i.join(", ")+" }"}function Ty(t,e){if(t.length===0)return"[]";if(e.length>Tc)return"[Array]";for(var r=Math.min(wy,t.length),i=t.length-r,n=[],o=0;o<r;++o)n.push(mn(t[o],e));return i===1?n.push("... 1 more item"):i>1&&n.push("... ".concat(i," more items")),"["+n.join(", ")+"]"}function Cy(t){var e=t[String(Qr)];if(typeof e=="function")return e;if(typeof t.inspect=="function")return t.inspect}function Oy(t){var e=Object.prototype.toString.call(t).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof t.constructor=="function"){var r=t.constructor.name;if(typeof r=="string"&&r!=="")return r}return e}function $r(t,e){var r=Boolean(t);if(!r)throw new Error(e)}var Cc=function(e,r){return e instanceof r};function Oc(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Py(t,e,r){return e&&Oc(t.prototype,e),r&&Oc(t,r),t}var yn=function(){function t(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof e=="string"||$r(0,"Body must be a string. Received: ".concat(zr(e),".")),this.body=e,this.name=r,this.locationOffset=i,this.locationOffset.line>0||$r(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||$r(0,"column in locationOffset is 1-indexed and must be positive.")}return Py(t,[{key:an,get:function(){return"Source"}}]),t}();function Pc(t){return Cc(t,yn)}var Cs=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function Ac(t){var e=t.split(/\r\n|[\n\r]/g),r=ky(t);if(r!==0)for(var i=1;i<e.length;i++)e[i]=e[i].slice(r);for(var n=0;n<e.length&&kc(e[n]);)++n;for(var o=e.length;o>n&&kc(e[o-1]);)--o;return e.slice(n,o).join(`
`)}function kc(t){for(var e=0;e<t.length;++e)if(t[e]!==" "&&t[e]!=="	")return!1;return!0}function ky(t){for(var e,r=!0,i=!0,n=0,o=null,s=0;s<t.length;++s)switch(t.charCodeAt(s)){case 13:t.charCodeAt(s+1)===10&&++s;case 10:r=!1,i=!0,n=0;break;case 9:case 32:++n;break;default:i&&!r&&(o===null||n<o)&&(o=n),i=!1}return(e=o)!==null&&e!==void 0?e:0}function Dc(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=t.indexOf(`
`)===-1,n=t[0]===" "||t[0]==="	",o=t[t.length-1]==='"',s=t[t.length-1]==="\\",a=!i||o||s||r,l="";return a&&!(i&&n)&&(l+=`
`+e),l+=e?t.replace(/\n/g,`
`+e):t,a&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}var Os=function(){function t(r){var i=new B(v.SOF,0,0,0,0,null);this.source=r,this.lastToken=i,this.token=i,this.line=1,this.lineStart=0}var e=t.prototype;return e.advance=function(){this.lastToken=this.token;var i=this.token=this.lookahead();return i},e.lookahead=function(){var i=this.token;if(i.kind!==v.EOF)do{var n;i=(n=i.next)!==null&&n!==void 0?n:i.next=Ay(this,i)}while(i.kind===v.COMMENT);return i},t}();function Nc(t){return t===v.BANG||t===v.DOLLAR||t===v.AMP||t===v.PAREN_L||t===v.PAREN_R||t===v.SPREAD||t===v.COLON||t===v.EQUALS||t===v.AT||t===v.BRACKET_L||t===v.BRACKET_R||t===v.BRACE_L||t===v.PIPE||t===v.BRACE_R}function vt(t){return isNaN(t)?v.EOF:t<127?JSON.stringify(String.fromCharCode(t)):'"\\u'.concat(("00"+t.toString(16).toUpperCase()).slice(-4),'"')}function Ay(t,e){for(var r=t.source,i=r.body,n=i.length,o=e.end;o<n;){var s=i.charCodeAt(o),a=t.line,l=1+o-t.lineStart;switch(s){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++t.line,t.lineStart=o;continue;case 13:i.charCodeAt(o+1)===10?o+=2:++o,++t.line,t.lineStart=o;continue;case 33:return new B(v.BANG,o,o+1,a,l,e);case 35:return Ny(r,o,a,l,e);case 36:return new B(v.DOLLAR,o,o+1,a,l,e);case 38:return new B(v.AMP,o,o+1,a,l,e);case 40:return new B(v.PAREN_L,o,o+1,a,l,e);case 41:return new B(v.PAREN_R,o,o+1,a,l,e);case 46:if(i.charCodeAt(o+1)===46&&i.charCodeAt(o+2)===46)return new B(v.SPREAD,o,o+3,a,l,e);break;case 58:return new B(v.COLON,o,o+1,a,l,e);case 61:return new B(v.EQUALS,o,o+1,a,l,e);case 64:return new B(v.AT,o,o+1,a,l,e);case 91:return new B(v.BRACKET_L,o,o+1,a,l,e);case 93:return new B(v.BRACKET_R,o,o+1,a,l,e);case 123:return new B(v.BRACE_L,o,o+1,a,l,e);case 124:return new B(v.PIPE,o,o+1,a,l,e);case 125:return new B(v.BRACE_R,o,o+1,a,l,e);case 34:return i.charCodeAt(o+1)===34&&i.charCodeAt(o+2)===34?Ry(r,o,a,l,e,t):My(r,o,a,l,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Iy(r,o,s,a,l,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return jy(r,o,a,l,e)}throw te(r,o,Dy(s))}var u=t.line,c=1+o-t.lineStart;return new B(v.EOF,n,n,u,c,e)}function Dy(t){return t<32&&t!==9&&t!==10&&t!==13?"Cannot contain the invalid character ".concat(vt(t),"."):t===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(vt(t),".")}function Ny(t,e,r,i,n){var o=t.body,s,a=e;do s=o.charCodeAt(++a);while(!isNaN(s)&&(s>31||s===9));return new B(v.COMMENT,e,a,r,i,n,o.slice(e+1,a))}function Iy(t,e,r,i,n,o){var s=t.body,a=r,l=e,u=!1;if(a===45&&(a=s.charCodeAt(++l)),a===48){if(a=s.charCodeAt(++l),a>=48&&a<=57)throw te(t,l,"Invalid number, unexpected digit after 0: ".concat(vt(a),"."))}else l=Ps(t,l,a),a=s.charCodeAt(l);if(a===46&&(u=!0,a=s.charCodeAt(++l),l=Ps(t,l,a),a=s.charCodeAt(l)),(a===69||a===101)&&(u=!0,a=s.charCodeAt(++l),(a===43||a===45)&&(a=s.charCodeAt(++l)),l=Ps(t,l,a),a=s.charCodeAt(l)),a===46||Fy(a))throw te(t,l,"Invalid number, expected digit but got: ".concat(vt(a),"."));return new B(u?v.FLOAT:v.INT,e,l,i,n,o,s.slice(e,l))}function Ps(t,e,r){var i=t.body,n=e,o=r;if(o>=48&&o<=57){do o=i.charCodeAt(++n);while(o>=48&&o<=57);return n}throw te(t,n,"Invalid number, expected digit but got: ".concat(vt(o),"."))}function My(t,e,r,i,n){for(var o=t.body,s=e+1,a=s,l=0,u="";s<o.length&&!isNaN(l=o.charCodeAt(s))&&l!==10&&l!==13;){if(l===34)return u+=o.slice(a,s),new B(v.STRING,e,s+1,r,i,n,u);if(l<32&&l!==9)throw te(t,s,"Invalid character within String: ".concat(vt(l),"."));if(++s,l===92){switch(u+=o.slice(a,s-1),l=o.charCodeAt(s),l){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+=`
`;break;case 114:u+="\r";break;case 116:u+="	";break;case 117:{var c=Ly(o.charCodeAt(s+1),o.charCodeAt(s+2),o.charCodeAt(s+3),o.charCodeAt(s+4));if(c<0){var p=o.slice(s+1,s+5);throw te(t,s,"Invalid character escape sequence: \\u".concat(p,"."))}u+=String.fromCharCode(c),s+=4;break}default:throw te(t,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}++s,a=s}}throw te(t,s,"Unterminated string.")}function Ry(t,e,r,i,n,o){for(var s=t.body,a=e+3,l=a,u=0,c="";a<s.length&&!isNaN(u=s.charCodeAt(a));){if(u===34&&s.charCodeAt(a+1)===34&&s.charCodeAt(a+2)===34)return c+=s.slice(l,a),new B(v.BLOCK_STRING,e,a+3,r,i,n,Ac(c));if(u<32&&u!==9&&u!==10&&u!==13)throw te(t,a,"Invalid character within String: ".concat(vt(u),"."));u===10?(++a,++o.line,o.lineStart=a):u===13?(s.charCodeAt(a+1)===10?a+=2:++a,++o.line,o.lineStart=a):u===92&&s.charCodeAt(a+1)===34&&s.charCodeAt(a+2)===34&&s.charCodeAt(a+3)===34?(c+=s.slice(l,a)+'"""',a+=4,l=a):++a}throw te(t,a,"Unterminated string.")}function Ly(t,e,r,i){return vn(t)<<12|vn(e)<<8|vn(r)<<4|vn(i)}function vn(t){return t>=48&&t<=57?t-48:t>=65&&t<=70?t-55:t>=97&&t<=102?t-87:-1}function jy(t,e,r,i,n){for(var o=t.body,s=o.length,a=e+1,l=0;a!==s&&!isNaN(l=o.charCodeAt(a))&&(l===95||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++a;return new B(v.NAME,e,a,r,i,n,o.slice(e,a))}function Fy(t){return t===95||t>=65&&t<=90||t>=97&&t<=122}function _n(t,e){var r=new Vy(t,e);return r.parseDocument()}var Vy=function(){function t(r,i){var n=Pc(r)?r:new yn(r);this._lexer=new Os(n),this._options=i}var e=t.prototype;return e.parseName=function(){var i=this.expectToken(v.NAME);return{kind:T.NAME,value:i.value,loc:this.loc(i)}},e.parseDocument=function(){var i=this._lexer.token;return{kind:T.DOCUMENT,definitions:this.many(v.SOF,this.parseDefinition,v.EOF),loc:this.loc(i)}},e.parseDefinition=function(){if(this.peek(v.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(v.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var i=this._lexer.token;if(this.peek(v.BRACE_L))return{kind:T.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(i)};var n=this.parseOperationType(),o;return this.peek(v.NAME)&&(o=this.parseName()),{kind:T.OPERATION_DEFINITION,operation:n,name:o,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},e.parseOperationType=function(){var i=this.expectToken(v.NAME);switch(i.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(i)},e.parseVariableDefinitions=function(){return this.optionalMany(v.PAREN_L,this.parseVariableDefinition,v.PAREN_R)},e.parseVariableDefinition=function(){var i=this._lexer.token;return{kind:T.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(v.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(v.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(i)}},e.parseVariable=function(){var i=this._lexer.token;return this.expectToken(v.DOLLAR),{kind:T.VARIABLE,name:this.parseName(),loc:this.loc(i)}},e.parseSelectionSet=function(){var i=this._lexer.token;return{kind:T.SELECTION_SET,selections:this.many(v.BRACE_L,this.parseSelection,v.BRACE_R),loc:this.loc(i)}},e.parseSelection=function(){return this.peek(v.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var i=this._lexer.token,n=this.parseName(),o,s;return this.expectOptionalToken(v.COLON)?(o=n,s=this.parseName()):s=n,{kind:T.FIELD,alias:o,name:s,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(v.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(i)}},e.parseArguments=function(i){var n=i?this.parseConstArgument:this.parseArgument;return this.optionalMany(v.PAREN_L,n,v.PAREN_R)},e.parseArgument=function(){var i=this._lexer.token,n=this.parseName();return this.expectToken(v.COLON),{kind:T.ARGUMENT,name:n,value:this.parseValueLiteral(!1),loc:this.loc(i)}},e.parseConstArgument=function(){var i=this._lexer.token;return{kind:T.ARGUMENT,name:this.parseName(),value:(this.expectToken(v.COLON),this.parseValueLiteral(!0)),loc:this.loc(i)}},e.parseFragment=function(){var i=this._lexer.token;this.expectToken(v.SPREAD);var n=this.expectOptionalKeyword("on");return!n&&this.peek(v.NAME)?{kind:T.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(i)}:{kind:T.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},e.parseFragmentDefinition=function(){var i,n=this._lexer.token;return this.expectKeyword("fragment"),((i=this._options)===null||i===void 0?void 0:i.experimentalFragmentVariables)===!0?{kind:T.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}:{kind:T.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(i){var n=this._lexer.token;switch(n.kind){case v.BRACKET_L:return this.parseList(i);case v.BRACE_L:return this.parseObject(i);case v.INT:return this._lexer.advance(),{kind:T.INT,value:n.value,loc:this.loc(n)};case v.FLOAT:return this._lexer.advance(),{kind:T.FLOAT,value:n.value,loc:this.loc(n)};case v.STRING:case v.BLOCK_STRING:return this.parseStringLiteral();case v.NAME:switch(this._lexer.advance(),n.value){case"true":return{kind:T.BOOLEAN,value:!0,loc:this.loc(n)};case"false":return{kind:T.BOOLEAN,value:!1,loc:this.loc(n)};case"null":return{kind:T.NULL,loc:this.loc(n)};default:return{kind:T.ENUM,value:n.value,loc:this.loc(n)}}case v.DOLLAR:if(!i)return this.parseVariable();break}throw this.unexpected()},e.parseStringLiteral=function(){var i=this._lexer.token;return this._lexer.advance(),{kind:T.STRING,value:i.value,block:i.kind===v.BLOCK_STRING,loc:this.loc(i)}},e.parseList=function(i){var n=this,o=this._lexer.token,s=function(){return n.parseValueLiteral(i)};return{kind:T.LIST,values:this.any(v.BRACKET_L,s,v.BRACKET_R),loc:this.loc(o)}},e.parseObject=function(i){var n=this,o=this._lexer.token,s=function(){return n.parseObjectField(i)};return{kind:T.OBJECT,fields:this.any(v.BRACE_L,s,v.BRACE_R),loc:this.loc(o)}},e.parseObjectField=function(i){var n=this._lexer.token,o=this.parseName();return this.expectToken(v.COLON),{kind:T.OBJECT_FIELD,name:o,value:this.parseValueLiteral(i),loc:this.loc(n)}},e.parseDirectives=function(i){for(var n=[];this.peek(v.AT);)n.push(this.parseDirective(i));return n},e.parseDirective=function(i){var n=this._lexer.token;return this.expectToken(v.AT),{kind:T.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(i),loc:this.loc(n)}},e.parseTypeReference=function(){var i=this._lexer.token,n;return this.expectOptionalToken(v.BRACKET_L)?(n=this.parseTypeReference(),this.expectToken(v.BRACKET_R),n={kind:T.LIST_TYPE,type:n,loc:this.loc(i)}):n=this.parseNamedType(),this.expectOptionalToken(v.BANG)?{kind:T.NON_NULL_TYPE,type:n,loc:this.loc(i)}:n},e.parseNamedType=function(){var i=this._lexer.token;return{kind:T.NAMED_TYPE,name:this.parseName(),loc:this.loc(i)}},e.parseTypeSystemDefinition=function(){var i=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(i.kind===v.NAME)switch(i.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(i)},e.peekDescription=function(){return this.peek(v.STRING)||this.peek(v.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var i=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");var o=this.parseDirectives(!0),s=this.many(v.BRACE_L,this.parseOperationTypeDefinition,v.BRACE_R);return{kind:T.SCHEMA_DEFINITION,description:n,directives:o,operationTypes:s,loc:this.loc(i)}},e.parseOperationTypeDefinition=function(){var i=this._lexer.token,n=this.parseOperationType();this.expectToken(v.COLON);var o=this.parseNamedType();return{kind:T.OPERATION_TYPE_DEFINITION,operation:n,type:o,loc:this.loc(i)}},e.parseScalarTypeDefinition=function(){var i=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");var o=this.parseName(),s=this.parseDirectives(!0);return{kind:T.SCALAR_TYPE_DEFINITION,description:n,name:o,directives:s,loc:this.loc(i)}},e.parseObjectTypeDefinition=function(){var i=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");var o=this.parseName(),s=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:T.OBJECT_TYPE_DEFINITION,description:n,name:o,interfaces:s,directives:a,fields:l,loc:this.loc(i)}},e.parseImplementsInterfaces=function(){var i;if(!this.expectOptionalKeyword("implements"))return[];if(((i=this._options)===null||i===void 0?void 0:i.allowLegacySDLImplementsInterfaces)===!0){var n=[];this.expectOptionalToken(v.AMP);do n.push(this.parseNamedType());while(this.expectOptionalToken(v.AMP)||this.peek(v.NAME));return n}return this.delimitedMany(v.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var i;return((i=this._options)===null||i===void 0?void 0:i.allowLegacySDLEmptyFields)===!0&&this.peek(v.BRACE_L)&&this._lexer.lookahead().kind===v.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(v.BRACE_L,this.parseFieldDefinition,v.BRACE_R)},e.parseFieldDefinition=function(){var i=this._lexer.token,n=this.parseDescription(),o=this.parseName(),s=this.parseArgumentDefs();this.expectToken(v.COLON);var a=this.parseTypeReference(),l=this.parseDirectives(!0);return{kind:T.FIELD_DEFINITION,description:n,name:o,arguments:s,type:a,directives:l,loc:this.loc(i)}},e.parseArgumentDefs=function(){return this.optionalMany(v.PAREN_L,this.parseInputValueDef,v.PAREN_R)},e.parseInputValueDef=function(){var i=this._lexer.token,n=this.parseDescription(),o=this.parseName();this.expectToken(v.COLON);var s=this.parseTypeReference(),a;this.expectOptionalToken(v.EQUALS)&&(a=this.parseValueLiteral(!0));var l=this.parseDirectives(!0);return{kind:T.INPUT_VALUE_DEFINITION,description:n,name:o,type:s,defaultValue:a,directives:l,loc:this.loc(i)}},e.parseInterfaceTypeDefinition=function(){var i=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");var o=this.parseName(),s=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:T.INTERFACE_TYPE_DEFINITION,description:n,name:o,interfaces:s,directives:a,fields:l,loc:this.loc(i)}},e.parseUnionTypeDefinition=function(){var i=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");var o=this.parseName(),s=this.parseDirectives(!0),a=this.parseUnionMemberTypes();return{kind:T.UNION_TYPE_DEFINITION,description:n,name:o,directives:s,types:a,loc:this.loc(i)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(v.EQUALS)?this.delimitedMany(v.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var i=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");var o=this.parseName(),s=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();return{kind:T.ENUM_TYPE_DEFINITION,description:n,name:o,directives:s,values:a,loc:this.loc(i)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(v.BRACE_L,this.parseEnumValueDefinition,v.BRACE_R)},e.parseEnumValueDefinition=function(){var i=this._lexer.token,n=this.parseDescription(),o=this.parseName(),s=this.parseDirectives(!0);return{kind:T.ENUM_VALUE_DEFINITION,description:n,name:o,directives:s,loc:this.loc(i)}},e.parseInputObjectTypeDefinition=function(){var i=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");var o=this.parseName(),s=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();return{kind:T.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:o,directives:s,fields:a,loc:this.loc(i)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(v.BRACE_L,this.parseInputValueDef,v.BRACE_R)},e.parseTypeSystemExtension=function(){var i=this._lexer.lookahead();if(i.kind===v.NAME)switch(i.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(i)},e.parseSchemaExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var n=this.parseDirectives(!0),o=this.optionalMany(v.BRACE_L,this.parseOperationTypeDefinition,v.BRACE_R);if(n.length===0&&o.length===0)throw this.unexpected();return{kind:T.SCHEMA_EXTENSION,directives:n,operationTypes:o,loc:this.loc(i)}},e.parseScalarTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var n=this.parseName(),o=this.parseDirectives(!0);if(o.length===0)throw this.unexpected();return{kind:T.SCALAR_TYPE_EXTENSION,name:n,directives:o,loc:this.loc(i)}},e.parseObjectTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var n=this.parseName(),o=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(o.length===0&&s.length===0&&a.length===0)throw this.unexpected();return{kind:T.OBJECT_TYPE_EXTENSION,name:n,interfaces:o,directives:s,fields:a,loc:this.loc(i)}},e.parseInterfaceTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var n=this.parseName(),o=this.parseImplementsInterfaces(),s=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(o.length===0&&s.length===0&&a.length===0)throw this.unexpected();return{kind:T.INTERFACE_TYPE_EXTENSION,name:n,interfaces:o,directives:s,fields:a,loc:this.loc(i)}},e.parseUnionTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var n=this.parseName(),o=this.parseDirectives(!0),s=this.parseUnionMemberTypes();if(o.length===0&&s.length===0)throw this.unexpected();return{kind:T.UNION_TYPE_EXTENSION,name:n,directives:o,types:s,loc:this.loc(i)}},e.parseEnumTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var n=this.parseName(),o=this.parseDirectives(!0),s=this.parseEnumValuesDefinition();if(o.length===0&&s.length===0)throw this.unexpected();return{kind:T.ENUM_TYPE_EXTENSION,name:n,directives:o,values:s,loc:this.loc(i)}},e.parseInputObjectTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var n=this.parseName(),o=this.parseDirectives(!0),s=this.parseInputFieldsDefinition();if(o.length===0&&s.length===0)throw this.unexpected();return{kind:T.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:o,fields:s,loc:this.loc(i)}},e.parseDirectiveDefinition=function(){var i=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(v.AT);var o=this.parseName(),s=this.parseArgumentDefs(),a=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var l=this.parseDirectiveLocations();return{kind:T.DIRECTIVE_DEFINITION,description:n,name:o,arguments:s,repeatable:a,locations:l,loc:this.loc(i)}},e.parseDirectiveLocations=function(){return this.delimitedMany(v.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var i=this._lexer.token,n=this.parseName();if(Cs[n.value]!==void 0)return n;throw this.unexpected(i)},e.loc=function(i){var n;if(((n=this._options)===null||n===void 0?void 0:n.noLocation)!==!0)return new dn(i,this._lexer.lastToken,this._lexer.source)},e.peek=function(i){return this._lexer.token.kind===i},e.expectToken=function(i){var n=this._lexer.token;if(n.kind===i)return this._lexer.advance(),n;throw te(this._lexer.source,n.start,"Expected ".concat(Ic(i),", found ").concat(ks(n),"."))},e.expectOptionalToken=function(i){var n=this._lexer.token;if(n.kind===i)return this._lexer.advance(),n},e.expectKeyword=function(i){var n=this._lexer.token;if(n.kind===v.NAME&&n.value===i)this._lexer.advance();else throw te(this._lexer.source,n.start,'Expected "'.concat(i,'", found ').concat(ks(n),"."))},e.expectOptionalKeyword=function(i){var n=this._lexer.token;return n.kind===v.NAME&&n.value===i?(this._lexer.advance(),!0):!1},e.unexpected=function(i){var n=i??this._lexer.token;return te(this._lexer.source,n.start,"Unexpected ".concat(ks(n),"."))},e.any=function(i,n,o){this.expectToken(i);for(var s=[];!this.expectOptionalToken(o);)s.push(n.call(this));return s},e.optionalMany=function(i,n,o){if(this.expectOptionalToken(i)){var s=[];do s.push(n.call(this));while(!this.expectOptionalToken(o));return s}return[]},e.many=function(i,n,o){this.expectToken(i);var s=[];do s.push(n.call(this));while(!this.expectOptionalToken(o));return s},e.delimitedMany=function(i,n){this.expectOptionalToken(i);var o=[];do o.push(n.call(this));while(this.expectOptionalToken(i));return o},t}();function ks(t){var e=t.value;return Ic(t.kind)+(e!=null?' "'.concat(e,'"'):"")}function Ic(t){return Nc(t)?'"'.concat(t,'"'):t}var By={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Gr=Object.freeze({});function re(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:By,i=void 0,n=Array.isArray(t),o=[t],s=-1,a=[],l=void 0,u=void 0,c=void 0,p=[],f=[],h=t;do{s++;var d=s===o.length,m=d&&a.length!==0;if(d){if(u=f.length===0?void 0:p[p.length-1],l=c,c=f.pop(),m){if(n)l=l.slice();else{for(var y={},_=0,w=Object.keys(l);_<w.length;_++){var S=w[_];y[S]=l[S]}l=y}for(var C=0,E=0;E<a.length;E++){var k=a[E][0],O=a[E][1];n&&(k-=C),n&&O===null?(l.splice(k,1),C++):l[k]=O}}s=i.index,o=i.keys,a=i.edits,n=i.inArray,i=i.prev}else{if(u=c?n?s:o[s]:void 0,l=c?c[u]:h,l==null)continue;c&&p.push(u)}var A=void 0;if(!Array.isArray(l)){if(!Ts(l))throw new Error("Invalid AST Node: ".concat(zr(l),"."));var H=As(e,l.kind,d);if(H){if(A=H.call(e,l,u,c,p,f),A===Gr)break;if(A===!1){if(!d){p.pop();continue}}else if(A!==void 0&&(a.push([u,A]),!d))if(Ts(A))l=A;else{p.pop();continue}}}if(A===void 0&&m&&a.push([u,l]),d)p.pop();else{var J;i={inArray:n,index:s,keys:o,edits:a,prev:i},n=Array.isArray(l),o=n?l:(J=r[l.kind])!==null&&J!==void 0?J:[],s=-1,a=[],c&&f.push(c),c=l}}while(i!==void 0);return a.length!==0&&(h=a[a.length-1][1]),h}function As(t,e,r){var i=t[e];if(i){if(!r&&typeof i=="function")return i;var n=r?i.leave:i.enter;if(typeof n=="function")return n}else{var o=r?t.leave:t.enter;if(o){if(typeof o=="function")return o;var s=o[e];if(typeof s=="function")return s}}}function gn(t){return re(t,{leave:qy})}var Uy=80,qy={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return x(e.definitions,`

`)+`
`},OperationDefinition:function(e){var r=e.operation,i=e.name,n=U("(",x(e.variableDefinitions,", "),")"),o=x(e.directives," "),s=e.selectionSet;return!i&&!o&&!n&&r==="query"?s:x([r,x([i,n]),o,s]," ")},VariableDefinition:function(e){var r=e.variable,i=e.type,n=e.defaultValue,o=e.directives;return r+": "+i+U(" = ",n)+U(" ",x(o," "))},SelectionSet:function(e){var r=e.selections;return ve(r)},Field:function(e){var r=e.alias,i=e.name,n=e.arguments,o=e.directives,s=e.selectionSet,a=U("",r,": ")+i,l=a+U("(",x(n,", "),")");return l.length>Uy&&(l=a+U(`(
`,bn(x(n,`
`)),`
)`)),x([l,x(o," "),s]," ")},Argument:function(e){var r=e.name,i=e.value;return r+": "+i},FragmentSpread:function(e){var r=e.name,i=e.directives;return"..."+r+U(" ",x(i," "))},InlineFragment:function(e){var r=e.typeCondition,i=e.directives,n=e.selectionSet;return x(["...",U("on ",r),x(i," "),n]," ")},FragmentDefinition:function(e){var r=e.name,i=e.typeCondition,n=e.variableDefinitions,o=e.directives,s=e.selectionSet;return"fragment ".concat(r).concat(U("(",x(n,", "),")")," ")+"on ".concat(i," ").concat(U("",x(o," ")," "))+s},IntValue:function(e){var r=e.value;return r},FloatValue:function(e){var r=e.value;return r},StringValue:function(e,r){var i=e.value,n=e.block;return n?Dc(i,r==="description"?"":"  "):JSON.stringify(i)},BooleanValue:function(e){var r=e.value;return r?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var r=e.value;return r},ListValue:function(e){var r=e.values;return"["+x(r,", ")+"]"},ObjectValue:function(e){var r=e.fields;return"{"+x(r,", ")+"}"},ObjectField:function(e){var r=e.name,i=e.value;return r+": "+i},Directive:function(e){var r=e.name,i=e.arguments;return"@"+r+U("(",x(i,", "),")")},NamedType:function(e){var r=e.name;return r},ListType:function(e){var r=e.type;return"["+r+"]"},NonNullType:function(e){var r=e.type;return r+"!"},SchemaDefinition:ye(function(t){var e=t.directives,r=t.operationTypes;return x(["schema",x(e," "),ve(r)]," ")}),OperationTypeDefinition:function(e){var r=e.operation,i=e.type;return r+": "+i},ScalarTypeDefinition:ye(function(t){var e=t.name,r=t.directives;return x(["scalar",e,x(r," ")]," ")}),ObjectTypeDefinition:ye(function(t){var e=t.name,r=t.interfaces,i=t.directives,n=t.fields;return x(["type",e,U("implements ",x(r," & ")),x(i," "),ve(n)]," ")}),FieldDefinition:ye(function(t){var e=t.name,r=t.arguments,i=t.type,n=t.directives;return e+(Mc(r)?U(`(
`,bn(x(r,`
`)),`
)`):U("(",x(r,", "),")"))+": "+i+U(" ",x(n," "))}),InputValueDefinition:ye(function(t){var e=t.name,r=t.type,i=t.defaultValue,n=t.directives;return x([e+": "+r,U("= ",i),x(n," ")]," ")}),InterfaceTypeDefinition:ye(function(t){var e=t.name,r=t.interfaces,i=t.directives,n=t.fields;return x(["interface",e,U("implements ",x(r," & ")),x(i," "),ve(n)]," ")}),UnionTypeDefinition:ye(function(t){var e=t.name,r=t.directives,i=t.types;return x(["union",e,x(r," "),i&&i.length!==0?"= "+x(i," | "):""]," ")}),EnumTypeDefinition:ye(function(t){var e=t.name,r=t.directives,i=t.values;return x(["enum",e,x(r," "),ve(i)]," ")}),EnumValueDefinition:ye(function(t){var e=t.name,r=t.directives;return x([e,x(r," ")]," ")}),InputObjectTypeDefinition:ye(function(t){var e=t.name,r=t.directives,i=t.fields;return x(["input",e,x(r," "),ve(i)]," ")}),DirectiveDefinition:ye(function(t){var e=t.name,r=t.arguments,i=t.repeatable,n=t.locations;return"directive @"+e+(Mc(r)?U(`(
`,bn(x(r,`
`)),`
)`):U("(",x(r,", "),")"))+(i?" repeatable":"")+" on "+x(n," | ")}),SchemaExtension:function(e){var r=e.directives,i=e.operationTypes;return x(["extend schema",x(r," "),ve(i)]," ")},ScalarTypeExtension:function(e){var r=e.name,i=e.directives;return x(["extend scalar",r,x(i," ")]," ")},ObjectTypeExtension:function(e){var r=e.name,i=e.interfaces,n=e.directives,o=e.fields;return x(["extend type",r,U("implements ",x(i," & ")),x(n," "),ve(o)]," ")},InterfaceTypeExtension:function(e){var r=e.name,i=e.interfaces,n=e.directives,o=e.fields;return x(["extend interface",r,U("implements ",x(i," & ")),x(n," "),ve(o)]," ")},UnionTypeExtension:function(e){var r=e.name,i=e.directives,n=e.types;return x(["extend union",r,x(i," "),n&&n.length!==0?"= "+x(n," | "):""]," ")},EnumTypeExtension:function(e){var r=e.name,i=e.directives,n=e.values;return x(["extend enum",r,x(i," "),ve(n)]," ")},InputObjectTypeExtension:function(e){var r=e.name,i=e.directives,n=e.fields;return x(["extend input",r,x(i," "),ve(n)]," ")}};function ye(t){return function(e){return x([e.description,t(e)],`
`)}}function x(t){var e,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=t==null?void 0:t.filter(function(i){return i}).join(r))!==null&&e!==void 0?e:""}function ve(t){return U(`{
`,bn(x(t,`
`)),`
}`)}function U(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?t+e+r:""}function bn(t){return U("  ",t.replace(/\n/g,`
  `))}function Hy(t){return t.indexOf(`
`)!==-1}function Mc(t){return t!=null&&t.some(Hy)}function Me(t,e){var r=t.directives;return!r||!r.length?!0:Rc(r).every(function(i){var n=i.directive,o=i.ifArgument,s=!1;return o.value.kind==="Variable"?(s=e&&e[o.value.name.value],P(s!==void 0,38)):s=o.value.value,n.name.value==="skip"?!s:s})}function jc(t){var e=[];return re(t,{Directive:function(r){e.push(r.name.value)}}),e}function _t(t,e){return jc(e).some(function(r){return t.indexOf(r)>-1})}function Ds(t){return t&&_t(["client"],t)&&_t(["export"],t)}function $y(t){var e=t.name.value;return e==="skip"||e==="include"}function Rc(t){var e=[];return t&&t.length&&t.forEach(function(r){if(!!$y(r)){var i=r.arguments,n=r.name.value;P(i&&i.length===1,39);var o=i[0];P(o.name&&o.name.value==="if",40);var s=o.value;P(s&&(s.kind==="Variable"||s.kind==="BooleanValue"),41),e.push({directive:r,ifArgument:o})}}),e}function Ns(t,e){var r=e,i=[];t.definitions.forEach(function(o){if(o.kind==="OperationDefinition")throw new F(42);o.kind==="FragmentDefinition"&&i.push(o)}),typeof r=="undefined"&&(P(i.length===1,43),r=i[0].name.value);var n=g(g({},t),{definitions:yt([{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:r}}]}}],t.definitions)});return n}function Re(t){t===void 0&&(t=[]);var e={};return t.forEach(function(r){e[r.name.value]=r}),e}function je(t,e){switch(t.kind){case"InlineFragment":return t;case"FragmentSpread":{var r=e&&e[t.name.value];return P(r,44),r}default:return null}}var Vc=dt(Lc());function de(t){return{__ref:String(t)}}function q(t){return Boolean(t&&typeof t=="object"&&typeof t.__ref=="string")}function Gy(t){return t.kind==="StringValue"}function Wy(t){return t.kind==="BooleanValue"}function Yy(t){return t.kind==="IntValue"}function Jy(t){return t.kind==="FloatValue"}function Xy(t){return t.kind==="Variable"}function Zy(t){return t.kind==="ObjectValue"}function ev(t){return t.kind==="ListValue"}function tv(t){return t.kind==="EnumValue"}function rv(t){return t.kind==="NullValue"}function Xe(t,e,r,i){if(Yy(r)||Jy(r))t[e.value]=Number(r.value);else if(Wy(r)||Gy(r))t[e.value]=r.value;else if(Zy(r)){var n={};r.fields.map(function(s){return Xe(n,s.name,s.value,i)}),t[e.value]=n}else if(Xy(r)){var o=(i||{})[r.name.value];t[e.value]=o}else if(ev(r))t[e.value]=r.values.map(function(s){var a={};return Xe(a,e,s,i),a[e.value]});else if(tv(r))t[e.value]=r.value;else if(rv(r))t[e.value]=null;else throw new F(53)}function Is(t,e){var r=null;t.directives&&(r={},t.directives.forEach(function(n){r[n.name.value]={},n.arguments&&n.arguments.forEach(function(o){var s=o.name,a=o.value;return Xe(r[n.name.value],s,a,e)})}));var i=null;return t.arguments&&t.arguments.length&&(i={},t.arguments.forEach(function(n){var o=n.name,s=n.value;return Xe(i,o,s,e)})),xn(t.name.value,i,r)}var iv=["connection","include","skip","client","rest","export"];function xn(t,e,r){if(e&&r&&r.connection&&r.connection.key)if(r.connection.filter&&r.connection.filter.length>0){var i=r.connection.filter?r.connection.filter:[];i.sort();var n={};return i.forEach(function(a){n[a]=e[a]}),r.connection.key+"("+JSON.stringify(n)+")"}else return r.connection.key;var o=t;if(e){var s=(0,Vc.default)(e);o+="("+s+")"}return r&&Object.keys(r).forEach(function(a){iv.indexOf(a)===-1&&(r[a]&&Object.keys(r[a]).length?o+="@"+a+"("+JSON.stringify(r[a])+")":o+="@"+a)}),o}function Wr(t,e){if(t.arguments&&t.arguments.length){var r={};return t.arguments.forEach(function(i){var n=i.name,o=i.value;return Xe(r,n,o,e)}),r}return null}function _e(t){return t.alias?t.alias.value:t.name.value}function Qt(t,e,r){if(typeof t.__typename=="string")return t.__typename;for(var i=0,n=e.selections;i<n.length;i++){var o=n[i];if(G(o)){if(o.name.value==="__typename")return t[_e(o)]}else{var s=Qt(t,je(o,r).selectionSet,r);if(typeof s=="string")return s}}}function G(t){return t.kind==="Field"}function Yr(t){return t.kind==="InlineFragment"}function gt(t){P(t&&t.kind==="Document",45);var e=t.definitions.filter(function(r){return r.kind!=="FragmentDefinition"}).map(function(r){if(r.kind!=="OperationDefinition")throw new F(46);return r});return P(e.length<=1,47),t}function Ee(t){return gt(t),t.definitions.filter(function(e){return e.kind==="OperationDefinition"})[0]}function zt(t){return t.definitions.filter(function(e){return e.kind==="OperationDefinition"&&e.name}).map(function(e){return e.name.value})[0]||null}function Fe(t){return t.definitions.filter(function(e){return e.kind==="FragmentDefinition"})}function Ms(t){var e=Ee(t);return P(e&&e.operation==="query",48),e}function Rs(t){P(t.kind==="Document",49),P(t.definitions.length<=1,50);var e=t.definitions[0];return P(e.kind==="FragmentDefinition",51),e}function bt(t){gt(t);for(var e,r=0,i=t.definitions;r<i.length;r++){var n=i[r];if(n.kind==="OperationDefinition"){var o=n.operation;if(o==="query"||o==="mutation"||o==="subscription")return n}n.kind==="FragmentDefinition"&&!e&&(e=n)}if(e)return e;throw new F(52)}function xt(t){var e=Object.create(null),r=t&&t.variableDefinitions;return r&&r.length&&r.forEach(function(i){i.defaultValue&&Xe(e,i.variable.name,i.defaultValue)}),e}function js(t,e,r){var i=0;return t.forEach(function(n,o){e.call(this,n,o,t)&&(t[i++]=n)},r),t.length=i,t}var Bc={kind:"Field",name:{kind:"Name",value:"__typename"}};function qc(t,e){return t.selectionSet.selections.every(function(r){return r.kind==="FragmentSpread"&&qc(e[r.name.value],e)})}function Fs(t){return qc(Ee(t)||Rs(t),Re(Fe(t)))?null:t}function Uc(t){return function(r){return t.some(function(i){return i.name&&i.name===r.name.value||i.test&&i.test(r)})}}function Ls(t,e){var r=Object.create(null),i=[],n=Object.create(null),o=[],s=Fs(re(e,{Variable:{enter:function(a,l,u){u.kind!=="VariableDefinition"&&(r[a.name.value]=!0)}},Field:{enter:function(a){if(t&&a.directives){var l=t.some(function(u){return u.remove});if(l&&a.directives&&a.directives.some(Uc(t)))return a.arguments&&a.arguments.forEach(function(u){u.value.kind==="Variable"&&i.push({name:u.value.name.value})}),a.selectionSet&&Qc(a.selectionSet).forEach(function(u){o.push({name:u.name.value})}),null}}},FragmentSpread:{enter:function(a){n[a.name.value]=!0}},Directive:{enter:function(a){if(Uc(t)(a))return null}}}));return s&&js(i,function(a){return!!a.name&&!r[a.name]}).length&&(s=Hc(i,s)),s&&js(o,function(a){return!!a.name&&!n[a.name]}).length&&(s=Kc(o,s)),s}function $t(t){return re(gt(t),{SelectionSet:{enter:function(e,r,i){if(!(i&&i.kind==="OperationDefinition")){var n=e.selections;if(!!n){var o=n.some(function(a){return G(a)&&(a.name.value==="__typename"||a.name.value.lastIndexOf("__",0)===0)});if(!o){var s=i;if(!(G(s)&&s.directives&&s.directives.some(function(a){return a.name.value==="export"})))return g(g({},e),{selections:yt(n,[Bc])})}}}}}})}$t.added=function(t){return t===Bc};var nv={test:function(t){var e=t.name.value==="connection";return e&&(!t.arguments||!t.arguments.some(function(r){return r.name.value==="key"})),e}};function Vs(t){return Ls([nv],gt(t))}function ov(t){return function(r){return t.some(function(i){return r.value&&r.value.kind==="Variable"&&r.value.name&&(i.name===r.value.name.value||i.test&&i.test(r))})}}function Hc(t,e){var r=ov(t);return Fs(re(e,{OperationDefinition:{enter:function(i){return g(g({},i),{variableDefinitions:i.variableDefinitions?i.variableDefinitions.filter(function(n){return!t.some(function(o){return o.name===n.variable.name.value})}):[]})}},Field:{enter:function(i){var n=t.some(function(s){return s.remove});if(n){var o=0;if(i.arguments&&i.arguments.forEach(function(s){r(s)&&(o+=1)}),o===1)return null}}},Argument:{enter:function(i){if(r(i))return null}}}))}function Kc(t,e){function r(i){if(t.some(function(n){return n.name===i.name.value}))return null}return Fs(re(e,{FragmentSpread:{enter:r},FragmentDefinition:{enter:r}}))}function Qc(t){var e=[];return t.selections.forEach(function(r){(G(r)||Yr(r))&&r.selectionSet?Qc(r.selectionSet).forEach(function(i){return e.push(i)}):r.kind==="FragmentSpread"&&e.push(r)}),e}function Bs(t){var e=bt(t),r=e.operation;if(r==="query")return t;var i=re(t,{OperationDefinition:{enter:function(n){return g(g({},n),{operation:"query"})}}});return i}function qs(t){gt(t);var e=Ls([{test:function(r){return r.name.value==="client"},remove:!0}],t);return e&&(e=re(e,{FragmentDefinition:{enter:function(r){if(r.selectionSet){var i=r.selectionSet.selections.every(function(n){return G(n)&&n.name.value==="__typename"});if(i)return null}}}})),e}var sv=Object.prototype.hasOwnProperty;function wn(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Jr(t)}function Jr(t){var e=t[0]||{},r=t.length;if(r>1)for(var i=new Xr,n=1;n<r;++n)e=i.merge(e,t[n]);return e}function Sn(t){return t!==null&&typeof t=="object"}var av=function(t,e,r){return this.merge(t[r],e[r])},Xr=function(){function t(e){e===void 0&&(e=av),this.reconciler=e,this.isObject=Sn,this.pastCopies=new Set}return t.prototype.merge=function(e,r){for(var i=this,n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];return Sn(r)&&Sn(e)?(Object.keys(r).forEach(function(s){if(sv.call(e,s)){var a=e[s];if(r[s]!==a){var l=i.reconciler.apply(i,yt([e,r,s],n));l!==a&&(e=i.shallowCopyForMerge(e),e[s]=l)}}else e=i.shallowCopyForMerge(e),e[s]=r[s]}),e):r},t.prototype.shallowCopyForMerge=function(e){return Sn(e)&&!this.pastCopies.has(e)&&(Array.isArray(e)?e=e.slice(0):e=g({__proto__:Object.getPrototypeOf(e)},e),this.pastCopies.add(e)),e},t}();var D=dt(Xc());function Ys(t){var e,r=t.Symbol;if(typeof r=="function")if(r.observable)e=r.observable;else{e=r.for("https://github.com/benlesh/symbol-observable");try{r.observable=e}catch(i){}}else e="@@observable";return e}var Wt;typeof self!="undefined"?Wt=self:typeof window!="undefined"?Wt=window:typeof global!="undefined"?Wt=global:typeof module!="undefined"?Wt=module:Wt=Function("return this")();var dO=Ys(Wt);D.default.prototype["@@observable"]=function(){return this};var dv=Object.prototype.toString;function Zc(t){return Js(t)}function Js(t,e){switch(dv.call(t)){case"[object Array]":{if(e=e||new Map,e.has(t))return e.get(t);var r=t.slice(0);return e.set(t,r),r.forEach(function(n,o){r[o]=Js(n,e)}),r}case"[object Object]":{if(e=e||new Map,e.has(t))return e.get(t);var i=Object.create(Object.getPrototypeOf(t));return e.set(t,i),Object.keys(t).forEach(function(n){i[n]=Js(t[n],e)}),i}default:return t}}function Xs(t){return t}function wt(t,e,r){var i=[];t.forEach(function(n){return n[e]&&i.push(n)}),i.forEach(function(n){return n[e](r)})}function Zs(t,e,r){return new D.default(function(i){var n=i.next,o=i.error,s=i.complete,a=0,l=!1;function u(f,h){return f?function(d){++a,new Promise(function(m){return m(f(d))}).then(function(m){--a,n&&n.call(i,m),l&&c.complete()},function(m){--a,o&&o.call(i,m)})}:function(d){return h&&h.call(i,d)}}var c={next:u(e,n),error:u(r,o),complete:function(){l=!0,a||s&&s.call(i)}},p=t.subscribe(c);return function(){return p.unsubscribe()}})}function Pn(t){function e(r){Object.defineProperty(t,r,{value:D.default})}return typeof Symbol=="function"&&Symbol.species&&e(Symbol.species),e("@@species"),t}function ep(t){return t&&typeof t.then=="function"}var Yt=function(t){ee(e,t);function e(r){var i=t.call(this,function(n){return i.addObserver(n),function(){return i.removeObserver(n)}})||this;return i.observers=new Set,i.addCount=0,i.promise=new Promise(function(n,o){i.resolve=n,i.reject=o}),i.handlers={next:function(n){i.sub!==null&&(i.latest=["next",n],wt(i.observers,"next",n))},error:function(n){var o=i.sub;o!==null&&(o&&Promise.resolve().then(function(){return o.unsubscribe()}),i.sub=null,i.latest=["error",n],i.reject(n),wt(i.observers,"error",n))},complete:function(){if(i.sub!==null){var n=i.sources.shift();n?ep(n)?n.then(function(o){return i.sub=o.subscribe(i.handlers)}):i.sub=n.subscribe(i.handlers):(i.sub=null,i.latest&&i.latest[0]==="next"?i.resolve(i.latest[1]):i.resolve(),wt(i.observers,"complete"))}}},i.cancel=function(n){i.reject(n),i.sources=[],i.handlers.complete()},i.promise.catch(function(n){}),typeof r=="function"&&(r=[new D.default(r)]),ep(r)?r.then(function(n){return i.start(n)},i.handlers.error):i.start(r),i}return e.prototype.start=function(r){this.sub===void 0&&(this.sources=Array.from(r),this.handlers.complete())},e.prototype.deliverLastMessage=function(r){if(this.latest){var i=this.latest[0],n=r[i];n&&n.call(r,this.latest[1]),this.sub===null&&i==="next"&&r.complete&&r.complete()}},e.prototype.addObserver=function(r){this.observers.has(r)||(this.deliverLastMessage(r),this.observers.add(r),++this.addCount)},e.prototype.removeObserver=function(r,i){this.observers.delete(r)&&--this.addCount<1&&!i&&this.handlers.error(new Error("Observable cancelled prematurely"))},e.prototype.cleanup=function(r){var i=this,n=!1,o=function(){n||(n=!0,i.observers.delete(s),r())},s={next:o,error:o,complete:o},a=this.addCount;this.addObserver(s),this.addCount=a},e}(D.default);Pn(Yt);function Le(t){return Array.isArray(t)&&t.length>0}function Jt(t){return t.errors&&t.errors.length>0||!1}var Ve=typeof WeakMap=="function"&&!(typeof navigator=="object"&&navigator.product==="ReactNative");function Xt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object.create(null);return t.forEach(function(i){!i||Object.keys(i).forEach(function(n){var o=i[n];o!==void 0&&(r[n]=o)})}),r}function ei(t){return new D.default(function(e){e.error(t)})}var ti=function(t,e,r){var i=new Error(r);throw i.name="ServerError",i.response=t,i.statusCode=t.status,i.result=e,i};function ea(t){for(var e=["query","operationName","variables","extensions","context"],r=0,i=Object.keys(t);r<i.length;r++){var n=i[r];if(e.indexOf(n)<0)throw new F(26)}return t}function ta(t,e){var r=g({},t),i=function(o){typeof o=="function"?r=g(g({},r),o(r)):r=g(g({},r),o)},n=function(){return g({},r)};return Object.defineProperty(e,"setContext",{enumerable:!1,value:i}),Object.defineProperty(e,"getContext",{enumerable:!1,value:n}),e}function ra(t){var e={variables:t.variables||{},extensions:t.extensions||{},operationName:t.operationName,query:t.query};return e.operationName||(e.operationName=typeof e.query!="string"?zt(e.query)||void 0:""),e}function tp(t,e){return e?e(t):D.default.of()}function ri(t){return typeof t=="function"?new z(t):t}function kn(t){return t.request.length<=1}var NP=function(t){ee(e,t);function e(r,i){var n=t.call(this,r)||this;return n.link=i,n}return e}(Error),z=function(){function t(e){e&&(this.request=e)}return t.empty=function(){return new t(function(){return D.default.of()})},t.from=function(e){return e.length===0?t.empty():e.map(ri).reduce(function(r,i){return r.concat(i)})},t.split=function(e,r,i){var n=ri(r),o=ri(i||new t(tp));return kn(n)&&kn(o)?new t(function(s){return e(s)?n.request(s)||D.default.of():o.request(s)||D.default.of()}):new t(function(s,a){return e(s)?n.request(s,a)||D.default.of():o.request(s,a)||D.default.of()})},t.execute=function(e,r){return e.request(ta(r.context,ra(ea(r))))||D.default.of()},t.concat=function(e,r){var i=ri(e);if(kn(i))return i;var n=ri(r);return kn(n)?new t(function(o){return i.request(o,function(s){return n.request(s)||D.default.of()})||D.default.of()}):new t(function(o,s){return i.request(o,function(a){return n.request(a,s)||D.default.of()})||D.default.of()})},t.prototype.split=function(e,r,i){return this.concat(t.split(e,r,i||new t(tp)))},t.prototype.concat=function(e){return t.concat(this,e)},t.prototype.request=function(e,r){throw new F(21)},t.prototype.onError=function(e,r){if(r&&r.error)return r.error(e),!1;throw e},t.prototype.setOnError=function(e){return this.onError=e,this},t}();var yv=z.empty;var vv=z.from;var _v=z.split;var gv=z.concat;var Zt=z.execute;var rp="3.3.11";var ip=Object.prototype.hasOwnProperty;function ia(t){return function(e){return e.text().then(function(r){try{return JSON.parse(r)}catch(n){var i=n;throw i.name="ServerParseError",i.response=e,i.statusCode=e.status,i.bodyText=r,i}}).then(function(r){return e.status>=300&&ti(e,r,"Response not successful: Received status code "+e.status),!Array.isArray(r)&&!ip.call(r,"data")&&!ip.call(r,"errors")&&ti(e,r,"Server response was missing for query '"+(Array.isArray(t)?t.map(function(i){return i.operationName}):t.operationName)+"'."),r})}}var er=function(t,e){var r;try{r=JSON.stringify(t)}catch(n){var i=new F(23);throw i.parseError=n,i}return r};var bv={includeQuery:!0,includeExtensions:!1},xv={accept:"*/*","content-type":"application/json"},wv={method:"POST"},na={http:bv,headers:xv,options:wv},oa=function(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=g(g({},e.options),{headers:e.headers,credentials:e.credentials}),o=e.http||{};r.forEach(function(p){n=g(g(g({},n),p.options),{headers:g(g({},n.headers),p.headers)}),p.credentials&&(n.credentials=p.credentials),o=g(g({},o),p.http)});var s=t.operationName,a=t.extensions,l=t.variables,u=t.query,c={operationName:s,variables:l};return o.includeExtensions&&(c.extensions=a),o.includeQuery&&(c.query=gn(u)),{options:n,body:c}};var sa=function(t){if(!t&&typeof fetch=="undefined")throw new F(22)};var aa=function(){if(typeof AbortController=="undefined")return{controller:!1,signal:!1};var t=new AbortController,e=t.signal;return{controller:t,signal:e}};var la=function(t,e){var r=t.getContext(),i=r.uri;return i||(typeof e=="function"?e(t):e||"/graphql")};var vp=dt(yp());function da(t,e){var r=[],i=function(p,f){r.push(p+"="+encodeURIComponent(f))};if("query"in e&&i("query",e.query),e.operationName&&i("operationName",e.operationName),e.variables){var n=void 0;try{n=er(e.variables,"Variables map")}catch(p){return{parseError:p}}i("variables",n)}if(e.extensions){var o=void 0;try{o=er(e.extensions,"Extensions map")}catch(p){return{parseError:p}}i("extensions",o)}var s="",a=t,l=t.indexOf("#");l!==-1&&(s=t.substr(l),a=t.substr(0,l));var u=a.indexOf("?")===-1?"?":"&",c=a+u+r.join("&")+s;return{newURI:c}}var ha=function(t){t===void 0&&(t={});var e=t.uri,r=e===void 0?"/graphql":e,i=t.fetch,n=t.includeExtensions,o=t.useGETForQueries,s=t.includeUnusedVariables,a=s===void 0?!1:s,l=De(t,["uri","fetch","includeExtensions","useGETForQueries","includeUnusedVariables"]);sa(i),i||(i=fetch);var u={http:{includeExtensions:n},options:l.fetchOptions,credentials:l.credentials,headers:l.headers};return new z(function(c){var p=la(c,r),f=c.getContext(),h={};if(f.clientAwareness){var d=f.clientAwareness,m=d.name,y=d.version;m&&(h["apollographql-client-name"]=m),y&&(h["apollographql-client-version"]=y)}var _=g(g({},h),f.headers),w={http:f.http,options:f.fetchOptions,credentials:f.credentials,headers:_},S=oa(c,na,u,w),C=S.options,E=S.body;if(E.variables&&!a){var k=new Set(Object.keys(E.variables));(0,vp.visit)(c.query,{Variable:function(ae,le,fu){fu&&fu.kind!=="VariableDefinition"&&k.delete(ae.name.value)}}),k.size&&(E.variables=g({},E.variables),k.forEach(function(ae){delete E.variables[ae]}))}var O;if(!C.signal){var A=aa(),H=A.controller,J=A.signal;O=H,O&&(C.signal=J)}var Ft=function(ae){return ae.kind==="OperationDefinition"&&ae.operation==="mutation"};if(o&&!c.query.definitions.some(Ft)&&(C.method="GET"),C.method==="GET"){var Ye=da(p,E),Vi=Ye.newURI,Lt=Ye.parseError;if(Lt)return ei(Lt);p=Vi}else try{C.body=er(E,"Payload")}catch(ae){return ei(ae)}return new D.default(function(ae){return i(p,C).then(function(le){return c.setContext({response:le}),le}).then(ia(c)).then(function(le){return ae.next(le),ae.complete(),le}).catch(function(le){le.name!=="AbortError"&&(le.result&&le.result.errors&&le.result.data&&ae.next(le.result),ae.error(le))}),function(){O&&O.abort()}})})};var ma=function(t){ee(e,t);function e(r){r===void 0&&(r={});var i=t.call(this,ha(r).request)||this;return i.options=r,i}return e}(z);var{toString:_p,hasOwnProperty:Hv}=Object.prototype,gp=Function.prototype.toString,ya=new Map;function oe(t,e){try{return va(t,e)}finally{ya.clear()}}function va(t,e){if(t===e)return!0;let r=_p.call(t),i=_p.call(e);if(r!==i)return!1;switch(r){case"[object Array]":if(t.length!==e.length)return!1;case"[object Object]":{if(xp(t,e))return!0;let n=bp(t),o=bp(e),s=n.length;if(s!==o.length)return!1;for(let a=0;a<s;++a)if(!Hv.call(e,n[a]))return!1;for(let a=0;a<s;++a){let l=n[a];if(!va(t[l],e[l]))return!1}return!0}case"[object Error]":return t.name===e.name&&t.message===e.message;case"[object Number]":if(t!==t)return e!==e;case"[object Boolean]":case"[object Date]":return+t==+e;case"[object RegExp]":case"[object String]":return t==`${e}`;case"[object Map]":case"[object Set]":{if(t.size!==e.size)return!1;if(xp(t,e))return!0;let n=t.entries(),o=r==="[object Map]";for(;;){let s=n.next();if(s.done)break;let[a,l]=s.value;if(!e.has(a)||o&&!va(l,e.get(a)))return!1}return!0}case"[object AsyncFunction]":case"[object GeneratorFunction]":case"[object AsyncGeneratorFunction]":case"[object Function]":{let n=gp.call(t);return n!==gp.call(e)?!1:!Qv(n,Kv)}}return!1}function bp(t){return Object.keys(t).filter(zv,t)}function zv(t){return this[t]!==void 0}var Kv="{ [native code] }";function Qv(t,e){let r=t.length-e.length;return r>=0&&t.indexOf(e,r)===r}function xp(t,e){let r=ya.get(t);if(r){if(r.has(e))return!0}else ya.set(t,r=new Set);return r.add(e),!1}function _a(t){return t.hasOwnProperty("graphQLErrors")}var $v=function(t){var e="";return Le(t.graphQLErrors)&&t.graphQLErrors.forEach(function(r){var i=r?r.message:"Error message not found.";e+=i+`
`}),t.networkError&&(e+=t.networkError.message+`
`),e=e.replace(/\n$/,""),e},Ze=function(t){ee(e,t);function e(r){var i=r.graphQLErrors,n=r.networkError,o=r.errorMessage,s=r.extraInfo,a=t.call(this,o)||this;return a.graphQLErrors=i||[],a.networkError=n||null,a.message=o||$v(a),a.extraInfo=s,a.__proto__=e.prototype,a}return e}(Error);var M;(function(t){t[t.loading=1]="loading",t[t.setVariables=2]="setVariables",t[t.fetchMore=3]="fetchMore",t[t.refetch=4]="refetch",t[t.poll=6]="poll",t[t.ready=7]="ready",t[t.error=8]="error"})(M||(M={}));function et(t){return t?t<7:!1}var wp=function(){function t(e,r,i,n){this.observer=e,this.options=r,this.fetch=i,this.shouldFetch=n}return t.prototype.reobserve=function(e,r){e?this.updateOptions(e):this.updatePolling();var i=this.fetch(this.options,r);return this.concast&&this.concast.removeObserver(this.observer,!0),i.addObserver(this.observer),(this.concast=i).promise},t.prototype.updateOptions=function(e){return Object.assign(this.options,Xt(e)),this.updatePolling(),this},t.prototype.stop=function(){this.concast&&(this.concast.removeObserver(this.observer),delete this.concast),this.pollingInfo&&(clearTimeout(this.pollingInfo.timeout),this.options.pollInterval=0,this.updatePolling())},t.prototype.updatePolling=function(){var e=this,r=this,i=r.pollingInfo,n=r.options.pollInterval;if(!n){i&&(clearTimeout(i.timeout),delete this.pollingInfo);return}if(!(i&&i.interval===n)&&(P(n,20),this.shouldFetch!==!1)){var o=i||(this.pollingInfo={});o.interval=n;var s=function(){e.pollingInfo&&(e.shouldFetch&&e.shouldFetch()?e.reobserve({fetchPolicy:"network-only",nextFetchPolicy:e.options.fetchPolicy||"cache-first"},M.poll).then(a,a):a())},a=function(){var l=e.pollingInfo;l&&(clearTimeout(l.timeout),l.timeout=setTimeout(s,l.interval))};a()}},t}();var Mn=function(t){ee(e,t);function e(r){var i=r.queryManager,n=r.queryInfo,o=r.options,s=t.call(this,function(l){return s.onSubscribe(l)})||this;s.observers=new Set,s.subscriptions=new Set,s.observer={next:function(l){(s.lastError||s.isDifferentFromLastResult(l))&&(s.updateLastResult(l),wt(s.observers,"next",l))},error:function(l){s.updateLastResult(g(g({},s.lastResult),{error:l,errors:l.graphQLErrors,networkStatus:M.error,loading:!1})),wt(s.observers,"error",s.lastError=l)}},s.isTornDown=!1,s.options=o,s.queryId=i.generateQueryId();var a=Ee(o.query);return s.queryName=a&&a.name&&a.name.value,s.queryManager=i,s.queryInfo=n,s}return Object.defineProperty(e.prototype,"variables",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),e.prototype.result=function(){var r=this;return new Promise(function(i,n){var o={next:function(a){i(a),r.observers.delete(o),r.observers.size||r.queryManager.removeQuery(r.queryId),setTimeout(function(){s.unsubscribe()},0)},error:n},s=r.subscribe(o)})},e.prototype.getCurrentResult=function(r){r===void 0&&(r=!0);var i=this.lastResult,n=this.queryInfo.networkStatus||i&&i.networkStatus||M.ready,o=g(g({},i),{loading:et(n),networkStatus:n});if(this.isTornDown)return o;var s=this.options.fetchPolicy,a=s===void 0?"cache-first":s;if(a==="no-cache"||a==="network-only")delete o.partial;else if(!o.data||!this.queryManager.transform(this.options.query).hasForcedResolvers){var l=this.queryInfo.getDiff();o.data=l.complete||this.options.returnPartialData?l.result:void 0,l.complete?(o.networkStatus===M.loading&&(a==="cache-first"||a==="cache-only")&&(o.networkStatus=M.ready,o.loading=!1),delete o.partial):o.partial=!0}return r&&this.updateLastResult(o),o},e.prototype.isDifferentFromLastResult=function(r){return!oe(this.lastResultSnapshot,r)},e.prototype.getLastResult=function(){return this.lastResult},e.prototype.getLastError=function(){return this.lastError},e.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastResultSnapshot,delete this.lastError,this.isTornDown=!1},e.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},e.prototype.refetch=function(r){var i={pollInterval:0},n=this.options.fetchPolicy;return n!=="no-cache"&&n!=="cache-and-network"&&(i.fetchPolicy="network-only",i.nextFetchPolicy=n||"cache-first"),r&&!oe(this.options.variables,r)&&(i.variables=this.options.variables=g(g({},this.options.variables),r)),this.newReobserver(!1).reobserve(i,M.refetch)},e.prototype.fetchMore=function(r){var i=this,n=g(g({},r.query?r:g(g(g({},this.options),r),{variables:g(g({},this.options.variables),r.variables)})),{fetchPolicy:"no-cache"}),o=this.queryManager.generateQueryId();return n.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=M.fetchMore,this.observe()),this.queryManager.fetchQuery(o,n,M.fetchMore).then(function(s){var a=s.data,l=r.updateQuery;return l?i.updateQuery(function(u){return l(u,{fetchMoreResult:a,variables:n.variables})}):i.queryManager.cache.writeQuery({query:n.query,variables:n.variables,data:a}),s}).finally(function(){i.queryManager.stopQuery(o),i.reobserve()})},e.prototype.subscribeToMore=function(r){var i=this,n=this.queryManager.startGraphQLSubscription({query:r.document,variables:r.variables,context:r.context}).subscribe({next:function(o){var s=r.updateQuery;s&&i.updateQuery(function(a,l){var u=l.variables;return s(a,{subscriptionData:o,variables:u})})},error:function(o){if(r.onError){r.onError(o);return}}});return this.subscriptions.add(n),function(){i.subscriptions.delete(n)&&n.unsubscribe()}},e.prototype.setOptions=function(r){return this.reobserve(r)},e.prototype.setVariables=function(r){if(oe(this.variables,r))return this.observers.size?this.result():Promise.resolve();if(this.options.variables=r,!this.observers.size)return Promise.resolve();var i=this.options.fetchPolicy,n=i===void 0?"cache-first":i,o={fetchPolicy:n,variables:r};return n!=="cache-first"&&n!=="no-cache"&&n!=="network-only"&&(o.fetchPolicy="cache-and-network",o.nextFetchPolicy=n),this.reobserve(o,M.setVariables)},e.prototype.updateQuery=function(r){var i,n=this.queryManager,o=n.cache.diff({query:this.options.query,variables:this.variables,previousResult:(i=this.lastResult)===null||i===void 0?void 0:i.data,returnPartialData:!0,optimistic:!1}).result,s=r(o,{variables:this.variables});s&&(n.cache.writeQuery({query:this.options.query,data:s,variables:this.variables}),n.broadcastQueries())},e.prototype.startPolling=function(r){this.getReobserver().updateOptions({pollInterval:r})},e.prototype.stopPolling=function(){this.reobserver&&this.reobserver.updateOptions({pollInterval:0})},e.prototype.updateLastResult=function(r){var i=this.lastResult;return this.lastResult=r,this.lastResultSnapshot=this.queryManager.assumeImmutableResults?r:Zc(r),Le(r.errors)||delete this.lastError,i},e.prototype.onSubscribe=function(r){var i=this;if(r===this.observer)return function(){};try{var n=r._subscription._observer;n&&!n.error&&(n.error=Gv)}catch(s){}var o=!this.observers.size;return this.observers.add(r),this.lastError?r.error&&r.error(this.lastError):this.lastResult&&r.next&&r.next(this.lastResult),o&&this.reobserve().catch(function(s){}),function(){i.observers.delete(r)&&!i.observers.size&&i.tearDownQuery()}},e.prototype.getReobserver=function(){return this.reobserver||(this.reobserver=this.newReobserver(!0))},e.prototype.newReobserver=function(r){var i=this,n=this,o=n.queryManager,s=n.queryId;return o.setObservableQuery(this),new wp(this.observer,r?this.options:g({},this.options),function(a,l){return o.setObservableQuery(i),o.fetchQueryObservable(s,a,l)},!o.ssrMode&&function(){return!et(i.queryInfo.networkStatus)})},e.prototype.reobserve=function(r,i){return this.isTornDown=!1,this.getReobserver().reobserve(r,i)},e.prototype.observe=function(){this.observer.next(this.getCurrentResult(!1))},e.prototype.hasObservers=function(){return this.observers.size>0},e.prototype.tearDownQuery=function(){this.isTornDown||(this.reobserver&&(this.reobserver.stop(),delete this.reobserver),this.subscriptions.forEach(function(r){return r.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},e}(D.default);Pn(Mn);function Gv(t){}var Wv=function(){return Object.create(null)},Sp=Array.prototype,Yv=Sp.forEach,Jv=Sp.slice,tt=function(){function t(e,r){e===void 0&&(e=!0),r===void 0&&(r=Wv),this.weakness=e,this.makeData=r}return t.prototype.lookup=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.lookupArray(e)},t.prototype.lookupArray=function(e){var r=this;return Yv.call(e,function(i){return r=r.getChildTrie(i)}),r.data||(r.data=this.makeData(Jv.call(e)))},t.prototype.getChildTrie=function(e){var r=this.weakness&&Xv(e)?this.weak||(this.weak=new WeakMap):this.strong||(this.strong=new Map),i=r.get(e);return i||r.set(e,i=new t(this.weakness,this.makeData)),i},t}();function Xv(t){switch(typeof t){case"object":if(t===null)break;case"function":return!0}return!1}var W=null,Ep={},Zv=1,e_=function(){return function(){function t(){this.id=["slot",Zv++,Date.now(),Math.random().toString(36).slice(2)].join(":")}return t.prototype.hasValue=function(){for(var e=W;e;e=e.parent)if(this.id in e.slots){var r=e.slots[this.id];if(r===Ep)break;return e!==W&&(W.slots[this.id]=r),!0}return W&&(W.slots[this.id]=Ep),!1},t.prototype.getValue=function(){if(this.hasValue())return W.slots[this.id]},t.prototype.withValue=function(e,r,i,n){var o,s=(o={__proto__:null},o[this.id]=e,o),a=W;W={parent:a,slots:s};try{return r.apply(n,i)}finally{W=a}},t.bind=function(e){var r=W;return function(){var i=W;try{return W=r,e.apply(this,arguments)}finally{W=i}}},t.noContext=function(e,r,i){if(W){var n=W;try{return W=null,e.apply(i,r)}finally{W=n}}else return e.apply(i,r)},t}()},ga="@wry/context:Slot",ba=Array,rr=ba[ga]||function(){var t=e_();try{Object.defineProperty(ba,ga,{value:ba[ga]=t,enumerable:!1,writable:!1,configurable:!1})}finally{return t}}(),t_=rr.bind,r_=rr.noContext;function i_(){}var n_=function(){function t(e,r){e===void 0&&(e=Infinity),r===void 0&&(r=i_),this.max=e,this.dispose=r,this.map=new Map,this.newest=null,this.oldest=null}return t.prototype.has=function(e){return this.map.has(e)},t.prototype.get=function(e){var r=this.getEntry(e);return r&&r.value},t.prototype.getEntry=function(e){var r=this.map.get(e);if(r&&r!==this.newest){var i=r.older,n=r.newer;n&&(n.older=i),i&&(i.newer=n),r.older=this.newest,r.older.newer=r,r.newer=null,this.newest=r,r===this.oldest&&(this.oldest=n)}return r},t.prototype.set=function(e,r){var i=this.getEntry(e);return i?i.value=r:(i={key:e,value:r,newer:null,older:this.newest},this.newest&&(this.newest.newer=i),this.newest=i,this.oldest=this.oldest||i,this.map.set(e,i),i.value)},t.prototype.clean=function(){for(;this.oldest&&this.map.size>this.max;)this.delete(this.oldest.key)},t.prototype.delete=function(e){var r=this.map.get(e);return r?(r===this.newest&&(this.newest=r.older),r===this.oldest&&(this.oldest=r.newer),r.newer&&(r.newer.older=r.older),r.older&&(r.older.newer=r.newer),this.map.delete(e),this.dispose(r.value,e),!0):!1},t}(),Rn=new rr;function ii(t){var e=t.unsubscribe;typeof e=="function"&&(t.unsubscribe=void 0,e())}var ni=[],o_=100;function ir(t,e){if(!t)throw new Error(e||"assertion failure")}function s_(t,e){var r=t.length;return r>0&&r===e.length&&t[r-1]===e[r-1]}function Tp(t){switch(t.length){case 0:throw new Error("unknown value");case 1:return t[0];case 2:throw t[1]}}function a_(t){return t.slice(0)}var c_=function(){function t(e){this.fn=e,this.parents=new Set,this.childValues=new Map,this.dirtyChildren=null,this.dirty=!0,this.recomputing=!1,this.value=[],this.deps=null,++t.count}return t.prototype.peek=function(){if(this.value.length===1&&!Et(this))return this.value[0]},t.prototype.recompute=function(e){return ir(!this.recomputing,"already recomputing"),l_(this),Et(this)?u_(this,e):Tp(this.value)},t.prototype.setDirty=function(){this.dirty||(this.dirty=!0,this.value.length=0,Cp(this),xa(this),ii(this))},t.prototype.dispose=function(){var e=this;xa(this),ii(this),this.parents.forEach(function(r){r.setDirty(),Op(r,e)})},t.prototype.dependOn=function(e){e.add(this),this.deps||(this.deps=ni.pop()||new Set),this.deps.add(e)},t.prototype.forgetDeps=function(){var e=this;this.deps&&(this.deps.forEach(function(r){return r.delete(e)}),this.deps.clear(),ni.push(this.deps),this.deps=null)},t.count=0,t}();function l_(t){var e=Rn.getValue();if(e)return t.parents.add(e),e.childValues.has(t)||e.childValues.set(t,[]),Et(t)?Pp(e,t):kp(e,t),e}function u_(t,e){return xa(t),Rn.withValue(t,p_,[t,e]),d_(t,e)&&f_(t),Tp(t.value)}function p_(t,e){t.recomputing=!0,t.value.length=0;try{t.value[0]=t.fn.apply(null,e)}catch(r){t.value[1]=r}t.recomputing=!1}function Et(t){return t.dirty||!!(t.dirtyChildren&&t.dirtyChildren.size)}function f_(t){t.dirty=!1,!Et(t)&&Ap(t)}function Cp(t){t.parents.forEach(function(e){return Pp(e,t)})}function Ap(t){t.parents.forEach(function(e){return kp(e,t)})}function Pp(t,e){if(ir(t.childValues.has(e)),ir(Et(e)),!t.dirtyChildren)t.dirtyChildren=ni.pop()||new Set;else if(t.dirtyChildren.has(e))return;t.dirtyChildren.add(e),Cp(t)}function kp(t,e){ir(t.childValues.has(e)),ir(!Et(e));var r=t.childValues.get(e);r.length===0?t.childValues.set(e,a_(e.value)):s_(r,e.value)||t.setDirty(),Dp(t,e),!Et(t)&&Ap(t)}function Dp(t,e){var r=t.dirtyChildren;r&&(r.delete(e),r.size===0&&(ni.length<o_&&ni.push(r),t.dirtyChildren=null))}function xa(t){t.childValues.size>0&&t.childValues.forEach(function(e,r){Op(t,r)}),t.forgetDeps(),ir(t.dirtyChildren===null)}function Op(t,e){e.parents.delete(t),t.childValues.delete(e),Dp(t,e)}function d_(t,e){if(typeof t.subscribe=="function")try{ii(t),t.unsubscribe=t.subscribe.apply(null,e)}catch(r){return t.setDirty(),!1}return!0}function nr(t){var e=new Map,r=t&&t.subscribe;function i(n){var o=Rn.getValue();if(o){var s=e.get(n);s||e.set(n,s=new Set),o.dependOn(s),typeof r=="function"&&(ii(s),s.unsubscribe=r(n))}}return i.dirty=function(o){var s=e.get(o);s&&(s.forEach(function(a){return a.setDirty()}),e.delete(o),ii(s))},i}var h_=new tt(typeof WeakMap=="function");function m_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return h_.lookupArray(t)}var wa=new Set;function Tt(t,e){e===void 0&&(e=Object.create(null));var r=new n_(e.max||Math.pow(2,16),function(a){return a.dispose()}),i=e.keyArgs||function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return a},n=e.makeCacheKey||m_;function o(){var a=n.apply(null,i.apply(null,arguments));if(a===void 0)return t.apply(null,arguments);var l=r.get(a);l||(r.set(a,l=new c_(t)),l.subscribe=e.subscribe);var u=l.recompute(Array.prototype.slice.call(arguments));return r.set(a,l),wa.add(r),Rn.hasValue()||(wa.forEach(function(c){return c.clean()}),wa.clear()),u}function s(){var a=n.apply(null,arguments);if(a!==void 0)return r.get(a)}return o.dirty=function(){var a=s.apply(null,arguments);a&&a.setDirty()},o.peek=function(){var a=s.apply(null,arguments);if(a)return a.peek()},o.forget=function(){var a=n.apply(null,arguments);return a!==void 0&&r.delete(a)},o}var jn=function(){function t(){this.getFragmentDoc=Tt(Ns)}return t.prototype.recordOptimisticTransaction=function(e,r){this.performTransaction(e,r)},t.prototype.transformDocument=function(e){return e},t.prototype.identify=function(e){},t.prototype.gc=function(){return[]},t.prototype.modify=function(e){return!1},t.prototype.transformForLink=function(e){return e},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!!e.optimistic),this.read({rootId:e.id||"ROOT_QUERY",query:e.query,variables:e.variables,returnPartialData:e.returnPartialData,optimistic:r})},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!!e.optimistic),this.read({query:this.getFragmentDoc(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,returnPartialData:e.returnPartialData,optimistic:r})},t.prototype.writeQuery=function(e){return this.write({dataId:e.id||"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables,broadcast:e.broadcast})},t.prototype.writeFragment=function(e){return this.write({dataId:e.id,result:e.data,variables:e.variables,query:this.getFragmentDoc(e.fragment,e.fragmentName),broadcast:e.broadcast})},t}();var Fn;(function(t){})(Fn||(Fn={}));var or=function(){function t(e,r,i,n,o){this.message=e,this.path=r,this.query=i,this.clientOnly=n,this.variables=o}return t}();var Q=Object.prototype.hasOwnProperty;var Sa=/^[_a-z][_0-9a-z]*/i;function qe(t){var e=t.match(Sa);return e?e[0]:t}function Ln(t,e,r){return e&&typeof e=="object"?Array.isArray(e)?e.every(function(i){return Ln(t,i,r)}):t.selections.every(function(i){if(G(i)&&Me(i,r)){var n=_e(i);return Q.call(e,n)&&(!i.selectionSet||Ln(i.selectionSet,e[n],r))}return!0}):!1}function oi(t){return t!==null&&typeof t=="object"&&!q(t)&&!Array.isArray(t)}function Np(){return new Xr}var Vn=Object.create(null),Ea=function(){return Vn},Ip=Object.create(null),sr=function(){function t(e,r){var i=this;this.policies=e,this.group=r,this.data=Object.create(null),this.rootIds=Object.create(null),this.refs=Object.create(null),this.getFieldValue=function(n,o){return Xs(q(n)?i.get(n.__ref,o):n&&n[o])},this.canRead=function(n){return q(n)?i.has(n.__ref):typeof n=="object"},this.toReference=function(n,o){if(typeof n=="string")return de(n);if(q(n))return n;var s=i.policies.identify(n)[0];if(s){var a=de(s);return o&&i.merge(s,n),a}}}return t.prototype.toObject=function(){return g({},this.data)},t.prototype.has=function(e){return this.lookup(e,!0)!==void 0},t.prototype.get=function(e,r){if(this.group.depend(e,r),Q.call(this.data,e)){var i=this.data[e];if(i&&Q.call(i,r))return i[r]}if(r==="__typename"&&Q.call(this.policies.rootTypenamesById,e))return this.policies.rootTypenamesById[e];if(this instanceof rt)return this.parent.get(e,r)},t.prototype.lookup=function(e,r){if(r&&this.group.depend(e,"__exists"),Q.call(this.data,e))return this.data[e];if(this instanceof rt)return this.parent.lookup(e,r);if(this.policies.rootTypenamesById[e])return Object.create(null)},t.prototype.merge=function(e,r){var i=this,n=this.lookup(e),o=new Xr(y_).merge(n,r);if(this.data[e]=o,o!==n&&(delete this.refs[e],this.group.caching)){var s=Object.create(null);n||(s.__exists=1),Object.keys(r).forEach(function(a){if(!n||n[a]!==o[a]){s[a]=1;var l=qe(a);l!==a&&!i.policies.hasKeyArgs(o.__typename,l)&&(s[l]=1),o[a]===void 0&&!(i instanceof rt)&&delete o[a]}}),Object.keys(s).forEach(function(a){return i.group.dirty(e,a)})}},t.prototype.modify=function(e,r){var i=this,n=this.lookup(e);if(n){var o=Object.create(null),s=!1,a=!0,l={DELETE:Vn,INVALIDATE:Ip,isReference:q,toReference:this.toReference,canRead:this.canRead,readField:function(u,c){return i.policies.readField(typeof u=="string"?{fieldName:u,from:c||de(e)}:u,{store:i})}};if(Object.keys(n).forEach(function(u){var c=qe(u),p=n[u];if(p!==void 0){var f=typeof r=="function"?r:r[u]||r[c];if(f){var h=f===Ea?Vn:f(Xs(p),g(g({},l),{fieldName:c,storeFieldName:u,storage:i.getStorage(e,u)}));h===Ip?i.group.dirty(e,u):(h===Vn&&(h=void 0),h!==p&&(o[u]=h,s=!0,p=h))}p!==void 0&&(a=!1)}}),s)return this.merge(e,o),a&&(this instanceof rt?this.data[e]=void 0:delete this.data[e],this.group.dirty(e,"__exists")),!0}return!1},t.prototype.delete=function(e,r,i){var n,o=this.lookup(e);if(o){var s=this.getFieldValue(o,"__typename"),a=r&&i?this.policies.getStoreFieldName({typename:s,fieldName:r,args:i}):r;return this.modify(e,a?(n={},n[a]=Ea,n):Ea)}return!1},t.prototype.evict=function(e){var r=!1;return e.id&&(Q.call(this.data,e.id)&&(r=this.delete(e.id,e.fieldName,e.args)),this instanceof rt&&(r=this.parent.evict(e)||r),(e.fieldName||r)&&this.group.dirty(e.id,e.fieldName||"__exists")),r},t.prototype.clear=function(){this.replace(null)},t.prototype.extract=function(){var e=this,r=this.toObject(),i=[];return this.getRootIdSet().forEach(function(n){Q.call(e.policies.rootTypenamesById,n)||i.push(n)}),i.length&&(r.__META={extraRootIds:i.sort()}),r},t.prototype.replace=function(e){var r=this;if(Object.keys(this.data).forEach(function(o){e&&Q.call(e,o)||r.delete(o)}),e){var i=e.__META,n=De(e,["__META"]);Object.keys(n).forEach(function(o){r.merge(o,n[o])}),i&&i.extraRootIds.forEach(this.retain,this)}},t.prototype.retain=function(e){return this.rootIds[e]=(this.rootIds[e]||0)+1},t.prototype.release=function(e){if(this.rootIds[e]>0){var r=--this.rootIds[e];return r||delete this.rootIds[e],r}return 0},t.prototype.getRootIdSet=function(e){return e===void 0&&(e=new Set),Object.keys(this.rootIds).forEach(e.add,e),this instanceof rt?this.parent.getRootIdSet(e):Object.keys(this.policies.rootTypenamesById).forEach(e.add,e),e},t.prototype.gc=function(){var e=this,r=this.getRootIdSet(),i=this.toObject();r.forEach(function(s){Q.call(i,s)&&(Object.keys(e.findChildRefIds(s)).forEach(r.add,r),delete i[s])});var n=Object.keys(i);if(n.length){for(var o=this;o instanceof rt;)o=o.parent;n.forEach(function(s){return o.delete(s)})}return n},t.prototype.findChildRefIds=function(e){if(!Q.call(this.refs,e)){var r=this.refs[e]=Object.create(null),i=new Set([this.data[e]]),n=function(o){return o!==null&&typeof o=="object"};i.forEach(function(o){q(o)?r[o.__ref]=!0:n(o)&&Object.values(o).filter(n).forEach(i.add,i)})}return this.refs[e]},t.prototype.makeCacheKey=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return this.group.keyMaker.lookupArray(e)},t}();var Mp=function(){function t(e){this.caching=e,this.d=null,this.keyMaker=new tt(Ve),this.d=e?nr():null}return t.prototype.depend=function(e,r){if(this.d){this.d(Ta(e,r));var i=qe(r);i!==r&&this.d(Ta(e,i))}},t.prototype.dirty=function(e,r){this.d&&this.d.dirty(Ta(e,r))},t}();function Ta(t,e){return e+"#"+t}(function(t){var e=function(r){ee(i,r);function i(n){var o=n.policies,s=n.resultCaching,a=s===void 0?!0:s,l=n.seed,u=r.call(this,o,new Mp(a))||this;return u.storageTrie=new tt(Ve),u.sharedLayerGroup=new Mp(a),l&&u.replace(l),u}return i.prototype.addLayer=function(n,o){return new rt(n,this,o,this.sharedLayerGroup)},i.prototype.removeLayer=function(){return this},i.prototype.getStorage=function(){return this.storageTrie.lookupArray(arguments)},i}(t);t.Root=e})(sr||(sr={}));var rt=function(t){ee(e,t);function e(r,i,n,o){var s=t.call(this,i.policies,o)||this;return s.id=r,s.parent=i,s.replay=n,s.group=o,n(s),s}return e.prototype.addLayer=function(r,i){return new e(r,this,i,this.group)},e.prototype.removeLayer=function(r){var i=this,n=this.parent.removeLayer(r);return r===this.id?(this.group.caching&&Object.keys(this.data).forEach(function(o){i.data[o]!==n.lookup(o)&&i.delete(o)}),n):n===this.parent?this:n.addLayer(this.id,this.replay)},e.prototype.toObject=function(){return g(g({},this.parent.toObject()),this.data)},e.prototype.findChildRefIds=function(r){var i=this.parent.findChildRefIds(r);return Q.call(this.data,r)?g(g({},i),t.prototype.findChildRefIds.call(this,r)):i},e.prototype.getStorage=function(){for(var r=this.parent;r.parent;)r=r.parent;return r.getStorage.apply(r,arguments)},e}(sr);function y_(t,e,r){var i=t[r],n=e[r];return oe(i,n)?i:n}function ar(t){return!!(t instanceof sr&&t.group.caching)}function Rp(t,e){return new or(t.message,e.path.slice(),e.query,e.clientOnly,e.variables)}var jp=function(){function t(e){var r=this;this.config=e,this.executeSelectionSet=Tt(function(i){return r.execSelectionSetImpl(i)},{keyArgs:function(i){return[i.selectionSet,i.objectOrReference,i.context]},makeCacheKey:function(i,n,o){if(ar(o.store))return o.store.makeCacheKey(i,q(n)?n.__ref:n,o.varString)}}),this.knownResults=new WeakMap,this.executeSubSelectedArray=Tt(function(i){return r.execSubSelectedArrayImpl(i)},{makeCacheKey:function(i){var n=i.field,o=i.array,s=i.context;if(ar(s.store))return s.store.makeCacheKey(n,o,s.varString)}}),this.config=g({addTypename:!0},e)}return t.prototype.diffQueryAgainstStore=function(e){var r=e.store,i=e.query,n=e.rootId,o=n===void 0?"ROOT_QUERY":n,s=e.variables,a=e.returnPartialData,l=a===void 0?!0:a,u=this.config.cache.policies;s=g(g({},xt(Ms(i))),s);var c=this.executeSelectionSet({selectionSet:bt(i).selectionSet,objectOrReference:de(o),context:{store:r,query:i,policies:u,variables:s,varString:JSON.stringify(s),fragmentMap:Re(Fe(i)),path:[],clientOnly:!1}}),p=c.missing&&c.missing.length>0;if(p&&!l)throw c.missing[0];return{result:c.result,missing:c.missing,complete:!p}},t.prototype.isFresh=function(e,r,i,n){if(ar(n.store)&&this.knownResults.get(e)===i){var o=this.executeSelectionSet.peek(i,r,n);if(o&&e===o.result)return!0}return!1},t.prototype.execSelectionSetImpl=function(e){var r=this,i=e.selectionSet,n=e.objectOrReference,o=e.context;if(q(n)&&!o.policies.rootTypenamesById[n.__ref]&&!o.store.has(n.__ref))return{result:{},missing:[Rp(new F(4),o)]};var s=o.variables,a=o.policies,l=o.store,u=[],c={result:null},p=l.getFieldValue(n,"__typename");this.config.addTypename&&typeof p=="string"&&!a.rootIdsByTypename[p]&&u.push({__typename:p});function f(){return c.missing||(c.missing=[])}function h(m){var y;return m.missing&&(y=f()).push.apply(y,m.missing),m.result}var d=new Set(i.selections);return d.forEach(function(m){var y;if(!!Me(m,s))if(G(m)){var _=a.readField({fieldName:m.name.value,field:m,variables:o.variables,from:n},o),w=_e(m);o.path.push(w);var S=o.clientOnly;o.clientOnly=S||!!(m.directives&&m.directives.some(function(E){return E.name.value==="client"})),_===void 0?$t.added(m)||f().push(Rp(new F(5),o)):Array.isArray(_)?_=h(r.executeSubSelectedArray({field:m,array:_,context:o})):m.selectionSet&&_!=null&&(_=h(r.executeSelectionSet({selectionSet:m.selectionSet,objectOrReference:_,context:o}))),_!==void 0&&u.push((y={},y[w]=_,y)),o.clientOnly=S,P(o.path.pop()===w)}else{var C=je(m,o.fragmentMap);C&&a.fragmentMatches(C,p)&&C.selectionSet.selections.forEach(d.add,d)}}),c.result=Jr(u),this.knownResults.set(c.result,i),c},t.prototype.execSubSelectedArrayImpl=function(e){var r=this,i=e.field,n=e.array,o=e.context,s;function a(l,u){return l.missing&&(s=s||[],s.push.apply(s,l.missing)),P(o.path.pop()===u),l.result}return i.selectionSet&&(n=n.filter(o.store.canRead)),n=n.map(function(l,u){return l===null?null:(o.path.push(u),Array.isArray(l)?a(r.executeSubSelectedArray({field:i,array:l,context:o}),u):i.selectionSet?a(r.executeSelectionSet({selectionSet:i.selectionSet,objectOrReference:l,context:o}),u):(P(o.path.pop()===u),l))}),{result:n,missing:s}},t}();var Vp=function(){function t(e,r){this.cache=e,this.reader=r}return t.prototype.writeToStore=function(e){var r=e.query,i=e.result,n=e.dataId,o=e.store,s=e.variables,a=Ee(r),l=Np();s=g(g({},xt(a)),s);var u=this.processSelectionSet({result:i||Object.create(null),dataId:n,selectionSet:a.selectionSet,mergeTree:{map:new Map},context:{store:o,written:Object.create(null),merge:function(c,p){return l.merge(c,p)},variables:s,varString:JSON.stringify(s),fragmentMap:Re(Fe(r))}});if(!q(u))throw new F(7);return o.retain(u.__ref),u},t.prototype.processSelectionSet=function(e){var r=this,i=e.dataId,n=e.result,o=e.selectionSet,s=e.context,a=e.mergeTree,l=this.cache.policies,u=l.identify(n,o,s.fragmentMap),c=u[0],p=u[1];if(i=i||c,typeof i=="string"){var f=s.written[i]||(s.written[i]=[]),h=de(i);if(f.indexOf(o)>=0||(f.push(o),this.reader&&this.reader.isFresh(n,h,o,s)))return h}var d=Object.create(null);p&&(d=s.merge(d,p));var m=i&&l.rootTypenamesById[i]||Qt(n,o,s.fragmentMap)||i&&s.store.get(i,"__typename");typeof m=="string"&&(d.__typename=m);var y=new Set(o.selections);if(y.forEach(function(E){var k;if(!!Me(E,s.variables))if(G(E)){var O=_e(E),A=n[O];if(typeof A!="undefined"){var H=l.getStoreFieldName({typename:m,fieldName:E.name.value,field:E,variables:s.variables}),J=Fp(a,H),Ft=r.processFieldValue(A,E,s,J),Ye=E.selectionSet&&s.store.getFieldValue(Ft,"__typename")||void 0,Vi=l.getMergeFunction(m,E.name.value,Ye);Vi?J.info={field:E,typename:m,merge:Vi}:Lp(a,H),d=s.merge(d,(k={},k[H]=Ft,k))}else if(l.usingPossibleTypes&&!_t(["defer","client"],E))throw new F(8)}else{var Lt=je(E,s.fragmentMap);Lt&&l.fragmentMatches(Lt,m,n,s.variables)&&Lt.selectionSet.selections.forEach(y.add,y)}}),typeof i=="string"){var _=de(i);if(a.map.size&&(d=this.applyMerges(a,_,d,s)),!1)var w,S,C;return s.store.merge(i,d),_}return d},t.prototype.processFieldValue=function(e,r,i,n){var o=this;return!r.selectionSet||e===null?e:Array.isArray(e)?e.map(function(s,a){var l=o.processFieldValue(s,r,i,Fp(n,a));return Lp(n,a),l}):this.processSelectionSet({result:e,selectionSet:r.selectionSet,context:i,mergeTree:n})},t.prototype.applyMerges=function(e,r,i,n,o){var s,a=this;if(e.map.size&&!q(i)){var l=!Array.isArray(i)&&(q(r)||oi(r))?r:void 0,u=i;l&&!o&&(o=[q(l)?l.__ref:l]);var c,p=function(f,h){return Array.isArray(f)?typeof h=="number"?f[h]:void 0:n.store.getFieldValue(f,String(h))};e.map.forEach(function(f,h){o&&o.push(h);var d=p(l,h),m=p(u,h),y=a.applyMerges(f,d,m,n,o);y!==m&&(c=c||new Map,c.set(h,y)),o&&P(o.pop()===h)}),c&&(i=Array.isArray(u)?u.slice(0):g({},u),c.forEach(function(f,h){i[h]=f}))}return e.info?this.cache.policies.runMergeFunction(r,i,e.info,n,o&&(s=n.store).getStorage.apply(s,o)):i},t}();var Bp=[];function Fp(t,e){var r=t.map;return r.has(e)||r.set(e,Bp.pop()||{map:new Map}),r.get(e)}function Lp(t,e){var r=t.map,i=r.get(e);i&&!i.info&&!i.map.size&&(Bp.push(i),r.delete(e))}var QA=new Set;var lr=new rr;function v_(t,e){if(t.size){var r=[];t.forEach(function(i){return r.push(i)}),t.clear(),r.forEach(e)}}var qp=new WeakMap;function si(t){var e=qp.get(t);return e||qp.set(t,e={vars:new Set,dep:nr()}),e}function Up(t){si(t).vars.forEach(function(e){return e.forgetCache(t)})}function Hp(t){si(t).vars.forEach(function(e){return e.attachCache(t)})}function Bn(t){var e=new Set,r=new Set,i=function(o){if(arguments.length>0)t!==o&&(t=o,e.forEach(function(a){si(a).dep.dirty(i),__(a)}),v_(r,function(a){return a(t)}));else{var s=lr.getValue();s&&(n(s),si(s).dep(i))}return t};i.onNextChange=function(o){return r.add(o),function(){r.delete(o)}};var n=i.attachCache=function(o){return e.add(o),si(o).vars.add(i),i};return i.forgetCache=function(o){return e.delete(o)},i}function __(t){t.broadcastWatches&&t.broadcastWatches()}function Ca(t){return t.args!==void 0?t.args:t.field?Wr(t.field,t.variables):null}var ai=function(t,e){var r=t.__typename,i=t.id,n=t._id;if(typeof r=="string"&&(e&&(e.keyObject=i!==void 0?{id:i}:n!==void 0?{_id:n}:void 0),i===void 0&&(i=n),i!==void 0))return r+":"+(typeof i=="number"||typeof i=="string"?i:JSON.stringify(i))},g_=function(){},Kp=function(t,e){return e.fieldName},Qp=function(t,e,r){var i=r.mergeObjects;return i(t,e)},zp=function(t,e){return e},Jp=function(){function t(e){this.config=e,this.typePolicies=Object.create(null),this.toBeAdded=Object.create(null),this.supertypeMap=new Map,this.fuzzySubtypes=new Map,this.rootIdsByTypename=Object.create(null),this.rootTypenamesById=Object.create(null),this.usingPossibleTypes=!1,this.config=g({dataIdFromObject:ai},e),this.cache=this.config.cache,this.setRootTypename("Query"),this.setRootTypename("Mutation"),this.setRootTypename("Subscription"),e.possibleTypes&&this.addPossibleTypes(e.possibleTypes),e.typePolicies&&this.addTypePolicies(e.typePolicies)}return t.prototype.identify=function(e,r,i){var n=r&&i?Qt(e,r,i):e.__typename;if(n===this.rootTypenamesById.ROOT_QUERY)return["ROOT_QUERY"];for(var o={typename:n,selectionSet:r,fragmentMap:i},s,a=n&&this.getTypePolicy(n),l=a&&a.keyFn||this.config.dataIdFromObject;l;){var u=l(e,o);if(Array.isArray(u))l=Yp(u);else{s=u;break}}return s=s&&String(s),o.keyObject?[s,o.keyObject]:[s]},t.prototype.addTypePolicies=function(e){var r=this;Object.keys(e).forEach(function(i){var n=e[i],o=n.queryType,s=n.mutationType,a=n.subscriptionType,l=De(n,["queryType","mutationType","subscriptionType"]);o&&r.setRootTypename("Query",i),s&&r.setRootTypename("Mutation",i),a&&r.setRootTypename("Subscription",i),Q.call(r.toBeAdded,i)?r.toBeAdded[i].push(l):r.toBeAdded[i]=[l]})},t.prototype.updateTypePolicy=function(e,r){var i=this,n=this.getTypePolicy(e),o=r.keyFields,s=r.fields;function a(l,u){l.merge=typeof u=="function"?u:u===!0?Qp:u===!1?zp:l.merge}a(n,r.merge),n.keyFn=o===!1?g_:Array.isArray(o)?Yp(o):typeof o=="function"?o:n.keyFn,s&&Object.keys(s).forEach(function(l){var u=i.getFieldPolicy(e,l,!0),c=s[l];if(typeof c=="function")u.read=c;else{var p=c.keyArgs,f=c.read,h=c.merge;u.keyFn=p===!1?Kp:Array.isArray(p)?Wp(p):typeof p=="function"?p:u.keyFn,typeof f=="function"&&(u.read=f),a(u,h)}u.read&&u.merge&&(u.keyFn=u.keyFn||Kp)})},t.prototype.setRootTypename=function(e,r){r===void 0&&(r=e);var i="ROOT_"+e.toUpperCase(),n=this.rootTypenamesById[i];r!==n&&(P(!n||n===e,1),n&&delete this.rootIdsByTypename[n],this.rootIdsByTypename[r]=i,this.rootTypenamesById[i]=r)},t.prototype.addPossibleTypes=function(e){var r=this;this.usingPossibleTypes=!0,Object.keys(e).forEach(function(i){r.getSupertypeSet(i,!0),e[i].forEach(function(n){r.getSupertypeSet(n,!0).add(i);var o=n.match(Sa);(!o||o[0]!==n)&&r.fuzzySubtypes.set(n,new RegExp(n))})})},t.prototype.getTypePolicy=function(e){var r=this;if(!Q.call(this.typePolicies,e)){var i=this.typePolicies[e]=Object.create(null);i.fields=Object.create(null);var n=this.supertypeMap.get(e);n&&n.size&&n.forEach(function(s){var a=r.getTypePolicy(s),l=a.fields,u=De(a,["fields"]);Object.assign(i,u),Object.assign(i.fields,l)})}var o=this.toBeAdded[e];return o&&o.length&&this.updateTypePolicy(e,Xt.apply(void 0,o.splice(0))),this.typePolicies[e]},t.prototype.getFieldPolicy=function(e,r,i){if(e){var n=this.getTypePolicy(e).fields;return n[r]||i&&(n[r]=Object.create(null))}},t.prototype.getSupertypeSet=function(e,r){var i=this.supertypeMap.get(e);return!i&&r&&this.supertypeMap.set(e,i=new Set),i},t.prototype.fragmentMatches=function(e,r,i,n){var o=this;if(!e.typeCondition)return!0;if(!r)return!1;var s=e.typeCondition.name.value;if(r===s)return!0;if(this.usingPossibleTypes&&this.supertypeMap.has(s))for(var a=this.getSupertypeSet(r,!0),l=[a],u=function(d){var m=o.getSupertypeSet(d,!1);m&&m.size&&l.indexOf(m)<0&&l.push(m)},c=!!(i&&this.fuzzySubtypes.size),p=!1,f=0;f<l.length;++f){var h=l[f];if(h.has(s))return a.has(s)||a.add(s),!0;h.forEach(u),c&&f===l.length-1&&Ln(e.selectionSet,i,n)&&(c=!1,p=!0,this.fuzzySubtypes.forEach(function(d,m){var y=r.match(d);y&&y[0]===r&&u(m)}))}return!1},t.prototype.hasKeyArgs=function(e,r){var i=this.getFieldPolicy(e,r,!1);return!!(i&&i.keyFn)},t.prototype.getStoreFieldName=function(e){var r=e.typename,i=e.fieldName,n=this.getFieldPolicy(r,i,!1),o,s=n&&n.keyFn;if(s&&r)for(var a={typename:r,fieldName:i,field:e.field||null,variables:e.variables},l=Ca(e);s;){var u=s(l,a);if(Array.isArray(u))s=Wp(u);else{o=u||i;break}}return o===void 0&&(o=e.field?Is(e.field,e.variables):xn(i,Ca(e))),i===qe(o)?o:i+":"+o},t.prototype.readField=function(e,r){var i=e.from;if(!!i){var n=e.field||e.fieldName;if(!!n){if(e.typename===void 0){var o=r.store.getFieldValue(i,"__typename");o&&(e.typename=o)}var s=this.getStoreFieldName(e),a=qe(s),l=r.store.getFieldValue(i,s),u=this.getFieldPolicy(e.typename,a,!1),c=u&&u.read;if(c){var p=$p(this,i,e,r,r.store.getStorage(q(i)?i.__ref:i,s));return lr.withValue(this.cache,c,[l,p])}return l}}},t.prototype.getMergeFunction=function(e,r,i){var n=this.getFieldPolicy(e,r,!1),o=n&&n.merge;return!o&&i&&(n=this.getTypePolicy(i),o=n&&n.merge),o},t.prototype.runMergeFunction=function(e,r,i,n,o){var s=i.field,a=i.typename,l=i.merge;return l===Qp?Gp(n.store.getFieldValue)(e,r):l===zp?r:l(e,r,$p(this,void 0,{typename:a,fieldName:s.name.value,field:s,variables:n.variables},n,o||Object.create(null)))},t}();function $p(t,e,r,i,n){var o=t.getStoreFieldName(r),s=qe(o),a=r.variables||i.variables,l=i.store,u=l.getFieldValue,c=l.toReference,p=l.canRead;return{args:Ca(r),field:r.field||null,fieldName:s,storeFieldName:o,variables:a,isReference:q,toReference:c,storage:n,cache:t.cache,canRead:p,readField:function(f,h){var d=typeof f=="string"?{fieldName:f,from:h}:g({},f);return d.from===void 0&&(d.from=e),d.variables===void 0&&(d.variables=a),t.readField(d,i)},mergeObjects:Gp(u)}}function Gp(t){return function(r,i){if(Array.isArray(r)||Array.isArray(i))throw new F(2);if(r&&typeof r=="object"&&i&&typeof i=="object"){var n=t(r,"__typename"),o=t(i,"__typename"),s=n&&o&&n!==o;return s||!oi(r)||!oi(i)?i:g(g({},r),i)}return i}}function Wp(t){return function(e,r){return e?r.fieldName+":"+JSON.stringify(Oa(e,t,!1)):r.fieldName}}function Yp(t){var e=new tt(Ve);return function(r,i){var n;if(i.selectionSet&&i.fragmentMap){var o=e.lookupArray([i.selectionSet,i.fragmentMap]);n=o.aliasMap||(o.aliasMap=Xp(i.selectionSet,i.fragmentMap))}var s=i.keyObject=Oa(r,t,!0,n);return i.typename+":"+JSON.stringify(s)}}function Xp(t,e){var r=Object.create(null),i=new Set([t]);return i.forEach(function(n){n.selections.forEach(function(o){if(G(o)){if(o.alias){var s=o.alias.value,a=o.name.value;if(a!==s){var l=r.aliases||(r.aliases=Object.create(null));l[a]=s}}if(o.selectionSet){var u=r.subsets||(r.subsets=Object.create(null));u[o.name.value]=Xp(o.selectionSet,e)}}else{var c=je(o,e);c&&i.add(c.selectionSet)}})}),r}function Oa(t,e,r,i){var n=Object.create(null),o;return e.forEach(function(s){if(Array.isArray(s)){if(typeof o=="string"){var a=i&&i.subsets,l=a&&a[o];n[o]=Oa(t[o],s,r,l)}}else{var u=i&&i.aliases,c=u&&u[s]||s;Q.call(t,c)?n[o=s]=t[c]:(P(!r,3),o=void 0)}}),n}var b_={dataIdFromObject:ai,addTypename:!0,resultCaching:!0,typePolicies:{}},qn=function(t){ee(e,t);function e(r){r===void 0&&(r={});var i=t.call(this)||this;return i.watches=new Set,i.typenameDocumentCache=new Map,i.makeVar=Bn,i.txCount=0,i.maybeBroadcastWatch=Tt(function(n,o){return i.broadcastWatch.call(i,n,!!o)},{makeCacheKey:function(n){var o=n.optimistic?i.optimisticData:i.data;if(ar(o)){var s=n.optimistic,a=n.rootId,l=n.variables;return o.makeCacheKey(n.query,n.callback,JSON.stringify({optimistic:s,rootId:a,variables:l}))}}}),i.watchDep=nr(),i.config=g(g({},b_),r),i.addTypename=!!i.config.addTypename,i.policies=new Jp({cache:i,dataIdFromObject:i.config.dataIdFromObject,possibleTypes:i.config.possibleTypes,typePolicies:i.config.typePolicies}),i.data=new sr.Root({policies:i.policies,resultCaching:i.config.resultCaching}),i.optimisticData=i.data,i.storeWriter=new Vp(i,i.storeReader=new jp({cache:i,addTypename:i.addTypename})),i}return e.prototype.restore=function(r){return r&&this.data.replace(r),this},e.prototype.extract=function(r){return r===void 0&&(r=!1),(r?this.optimisticData:this.data).extract()},e.prototype.read=function(r){var i=r.returnPartialData,n=i===void 0?!1:i;try{return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,query:r.query,variables:r.variables,rootId:r.rootId,config:this.config,returnPartialData:n}).result||null}catch(o){if(o instanceof or)return null;throw o}},e.prototype.write=function(r){try{return++this.txCount,this.storeWriter.writeToStore({store:this.data,query:r.query,result:r.result,dataId:r.dataId,variables:r.variables})}finally{!--this.txCount&&r.broadcast!==!1&&this.broadcastWatches()}},e.prototype.modify=function(r){if(Q.call(r,"id")&&!r.id)return!1;var i=r.optimistic?this.optimisticData:this.data;try{return++this.txCount,i.modify(r.id||"ROOT_QUERY",r.fields)}finally{!--this.txCount&&r.broadcast!==!1&&this.broadcastWatches()}},e.prototype.diff=function(r){return this.storeReader.diffQueryAgainstStore({store:r.optimistic?this.optimisticData:this.data,rootId:r.id||"ROOT_QUERY",query:r.query,variables:r.variables,returnPartialData:r.returnPartialData,config:this.config})},e.prototype.watch=function(r){var i=this;return this.watches.size||Hp(this),this.watches.add(r),r.immediate&&this.maybeBroadcastWatch(r),function(){i.watches.delete(r)&&!i.watches.size&&Up(i),i.watchDep.dirty(r),i.maybeBroadcastWatch.forget(r)}},e.prototype.gc=function(){return this.optimisticData.gc()},e.prototype.retain=function(r,i){return(i?this.optimisticData:this.data).retain(r)},e.prototype.release=function(r,i){return(i?this.optimisticData:this.data).release(r)},e.prototype.identify=function(r){return q(r)?r.__ref:this.policies.identify(r)[0]},e.prototype.evict=function(r){if(!r.id){if(Q.call(r,"id"))return!1;r=g(g({},r),{id:"ROOT_QUERY"})}try{return++this.txCount,this.optimisticData.evict(r)}finally{!--this.txCount&&r.broadcast!==!1&&this.broadcastWatches()}},e.prototype.reset=function(){return this.data.clear(),this.optimisticData=this.data,this.broadcastWatches(),Promise.resolve()},e.prototype.removeOptimistic=function(r){var i=this.optimisticData.removeLayer(r);i!==this.optimisticData&&(this.optimisticData=i,this.broadcastWatches())},e.prototype.performTransaction=function(r,i){var n=this,o=function(a){var l=n,u=l.data,c=l.optimisticData;++n.txCount,a&&(n.data=n.optimisticData=a);try{r(n)}finally{--n.txCount,n.data=u,n.optimisticData=c}},s=!1;typeof i=="string"?(this.optimisticData=this.optimisticData.addLayer(i,o),s=!0):i===null?o(this.data):o(),this.broadcastWatches(s)},e.prototype.transformDocument=function(r){if(this.addTypename){var i=this.typenameDocumentCache.get(r);return i||(i=$t(r),this.typenameDocumentCache.set(r,i),this.typenameDocumentCache.set(i,i)),i}return r},e.prototype.broadcastWatches=function(r){var i=this;this.txCount||this.watches.forEach(function(n){return i.maybeBroadcastWatch(n,r)})},e.prototype.broadcastWatch=function(r,i){this.watchDep.dirty(r),this.watchDep(r);var n=this.diff({query:r.query,variables:r.variables,optimistic:r.optimistic});r.optimistic&&i&&(n.fromOptimisticTransaction=!0),r.callback(n)},e}(jn);var Un=function(){function t(e){var r=e.cache,i=e.client,n=e.resolvers,o=e.fragmentMatcher;this.cache=r,i&&(this.client=i),n&&this.addResolvers(n),o&&this.setFragmentMatcher(o)}return t.prototype.addResolvers=function(e){var r=this;this.resolvers=this.resolvers||{},Array.isArray(e)?e.forEach(function(i){r.resolvers=wn(r.resolvers,i)}):this.resolvers=wn(this.resolvers,e)},t.prototype.setResolvers=function(e){this.resolvers={},this.addResolvers(e)},t.prototype.getResolvers=function(){return this.resolvers||{}},t.prototype.runResolvers=function(e){var r=e.document,i=e.remoteResult,n=e.context,o=e.variables,s=e.onlyRunForcedResolvers,a=s===void 0?!1:s;return Ne(this,void 0,void 0,function(){return Ie(this,function(l){return r?[2,this.resolveDocument(r,i.data,n,o,this.fragmentMatcher,a).then(function(u){return g(g({},i),{data:u.result})})]:[2,i]})})},t.prototype.setFragmentMatcher=function(e){this.fragmentMatcher=e},t.prototype.getFragmentMatcher=function(){return this.fragmentMatcher},t.prototype.clientQuery=function(e){return _t(["client"],e)&&this.resolvers?e:null},t.prototype.serverQuery=function(e){return qs(e)},t.prototype.prepareContext=function(e){var r=this.cache;return g(g({},e),{cache:r,getCacheKey:function(i){return r.identify(i)}})},t.prototype.addExportedVariables=function(e,r,i){return r===void 0&&(r={}),i===void 0&&(i={}),Ne(this,void 0,void 0,function(){return Ie(this,function(n){return e?[2,this.resolveDocument(e,this.buildRootValueFromCache(e,r)||{},this.prepareContext(i),r).then(function(o){return g(g({},r),o.exportedVariables)})]:[2,g({},r)]})})},t.prototype.shouldForceResolvers=function(e){var r=!1;return re(e,{Directive:{enter:function(i){if(i.name.value==="client"&&i.arguments&&(r=i.arguments.some(function(n){return n.name.value==="always"&&n.value.kind==="BooleanValue"&&n.value.value===!0}),r))return Gr}}}),r},t.prototype.buildRootValueFromCache=function(e,r){return this.cache.diff({query:Bs(e),variables:r,returnPartialData:!0,optimistic:!1}).result},t.prototype.resolveDocument=function(e,r,i,n,o,s){return i===void 0&&(i={}),n===void 0&&(n={}),o===void 0&&(o=function(){return!0}),s===void 0&&(s=!1),Ne(this,void 0,void 0,function(){var a,l,u,c,p,f,h,d,m;return Ie(this,function(y){return a=bt(e),l=Fe(e),u=Re(l),c=a.operation,p=c?c.charAt(0).toUpperCase()+c.slice(1):"Query",f=this,h=f.cache,d=f.client,m={fragmentMap:u,context:g(g({},i),{cache:h,client:d}),variables:n,fragmentMatcher:o,defaultOperationType:p,exportedVariables:{},onlyRunForcedResolvers:s},[2,this.resolveSelectionSet(a.selectionSet,r,m).then(function(_){return{result:_,exportedVariables:m.exportedVariables}})]})})},t.prototype.resolveSelectionSet=function(e,r,i){return Ne(this,void 0,void 0,function(){var n,o,s,a,l,u=this;return Ie(this,function(c){return n=i.fragmentMap,o=i.context,s=i.variables,a=[r],l=function(p){return Ne(u,void 0,void 0,function(){var f,h;return Ie(this,function(d){return Me(p,s)?G(p)?[2,this.resolveField(p,r,i).then(function(m){var y;typeof m!="undefined"&&a.push((y={},y[_e(p)]=m,y))})]:(Yr(p)?f=p:(f=n[p.name.value],P(f,11)),f&&f.typeCondition&&(h=f.typeCondition.name.value,i.fragmentMatcher(r,h,o))?[2,this.resolveSelectionSet(f.selectionSet,r,i).then(function(m){a.push(m)})]:[2]):[2]})})},[2,Promise.all(e.selections.map(l)).then(function(){return Jr(a)})]})})},t.prototype.resolveField=function(e,r,i){return Ne(this,void 0,void 0,function(){var n,o,s,a,l,u,c,p,f,h=this;return Ie(this,function(d){return n=i.variables,o=e.name.value,s=_e(e),a=o!==s,l=r[s]||r[o],u=Promise.resolve(l),(!i.onlyRunForcedResolvers||this.shouldForceResolvers(e))&&(c=r.__typename||i.defaultOperationType,p=this.resolvers&&this.resolvers[c],p&&(f=p[a?o:s],f&&(u=Promise.resolve(lr.withValue(this.cache,f,[r,Wr(e,n),i.context,{field:e,fragmentMap:i.fragmentMap}]))))),[2,u.then(function(m){if(m===void 0&&(m=l),e.directives&&e.directives.forEach(function(y){y.name.value==="export"&&y.arguments&&y.arguments.forEach(function(_){_.name.value==="as"&&_.value.kind==="StringValue"&&(i.exportedVariables[_.value.value]=m)})}),!e.selectionSet||m==null)return m;if(Array.isArray(m))return h.resolveSubSelectedArray(e,m,i);if(e.selectionSet)return h.resolveSelectionSet(e.selectionSet,m,i)})]})})},t.prototype.resolveSubSelectedArray=function(e,r,i){var n=this;return Promise.all(r.map(function(o){if(o===null)return null;if(Array.isArray(o))return n.resolveSubSelectedArray(e,o,i);if(e.selectionSet)return n.resolveSelectionSet(e.selectionSet,o,i)}))},t}();var ur=new(Ve?WeakMap:Map);function Pa(t,e){var r=t[e];typeof r=="function"&&(t[e]=function(){return ur.set(t,(ur.get(t)+1)%1e15),r.apply(this,arguments)})}function Zp(t){t.notifyTimeout&&(clearTimeout(t.notifyTimeout),t.notifyTimeout=void 0)}var ka=function(){function t(e){this.cache=e,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.diff=null,this.observableQuery=null,ur.has(e)||(ur.set(e,0),Pa(e,"evict"),Pa(e,"modify"),Pa(e,"reset"))}return t.prototype.init=function(e){var r=e.networkStatus||M.loading;return this.variables&&this.networkStatus!==M.loading&&!oe(this.variables,e.variables)&&(r=M.setVariables),oe(e.variables,this.variables)||(this.diff=null),Object.assign(this,{document:e.document,variables:e.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:r}),e.observableQuery&&this.setObservableQuery(e.observableQuery),e.lastRequestId&&(this.lastRequestId=e.lastRequestId),this},t.prototype.reset=function(){Zp(this),this.diff=null,this.dirty=!1},t.prototype.getDiff=function(e){return e===void 0&&(e=this.variables),this.diff&&oe(e,this.variables)?this.diff:(this.updateWatch(this.variables=e),this.diff=this.cache.diff({query:this.document,variables:e,returnPartialData:!0,optimistic:!0}))},t.prototype.setDiff=function(e){var r=this,i=this.diff;this.diff=e,!this.dirty&&(e&&e.result)!==(i&&i.result)&&(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return r.notify()},0)))},t.prototype.setObservableQuery=function(e){var r=this;e!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=e,e?(e.queryInfo=this,this.listeners.add(this.oqListener=function(){r.getDiff().fromOptimisticTransaction?e.observe():e.reobserve()})):delete this.oqListener)},t.prototype.notify=function(){var e=this;Zp(this),this.shouldNotify()&&this.listeners.forEach(function(r){return r(e)}),this.dirty=!1},t.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if(et(this.networkStatus)&&this.observableQuery){var e=this.observableQuery.options.fetchPolicy;if(e!=="cache-only"&&e!=="cache-and-network")return!1}return!0},t.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.cancel(),delete this.cancel,this.subscriptions.forEach(function(r){return r.unsubscribe()});var e=this.observableQuery;e&&e.stopPolling()}},t.prototype.cancel=function(){},t.prototype.updateWatch=function(e){var r=this;e===void 0&&(e=this.variables);var i=this.observableQuery;i&&i.options.fetchPolicy==="no-cache"||(!this.lastWatch||this.lastWatch.query!==this.document||!oe(e,this.lastWatch.variables))&&(this.cancel(),this.cancel=this.cache.watch(this.lastWatch={query:this.document,variables:e,optimistic:!0,callback:function(n){return r.setDiff(n)}}))},t.prototype.shouldWrite=function(e,r){var i=this.lastWrite;return!(i&&i.dmCount===ur.get(this.cache)&&oe(r,i.variables)&&oe(e.data,i.result.data))},t.prototype.markResult=function(e,r,i){var n=this;this.graphQLErrors=Le(e.errors)?e.errors:[],this.reset(),r.fetchPolicy==="no-cache"?this.diff={result:e.data,complete:!0}:!this.stopped&&i&&(Hn(e,r.errorPolicy)?this.cache.performTransaction(function(o){if(n.shouldWrite(e,r.variables))o.writeQuery({query:n.document,data:e.data,variables:r.variables}),n.lastWrite={result:e,variables:r.variables,dmCount:ur.get(n.cache)};else if(n.diff&&n.diff.complete){e.data=n.diff.result;return}var s=o.diff({query:n.document,variables:r.variables,returnPartialData:!0,optimistic:!0});n.stopped||n.updateWatch(r.variables),n.diff=s,s.complete&&(e.data=s.result)}):this.lastWrite=void 0)},t.prototype.markReady=function(){return this.networkError=null,this.networkStatus=M.ready},t.prototype.markError=function(e){return this.networkStatus=M.error,this.lastWrite=void 0,this.reset(),e.graphQLErrors&&(this.graphQLErrors=e.graphQLErrors),e.networkError&&(this.networkError=e.networkError),e},t}();function Hn(t,e){e===void 0&&(e="none");var r=e==="ignore"||e==="all",i=!Jt(t);return!i&&r&&t.data&&(i=!0),i}var x_=Object.prototype.hasOwnProperty,ef=function(){function t(e){var r=e.cache,i=e.link,n=e.queryDeduplication,o=n===void 0?!1:n,s=e.onBroadcast,a=e.ssrMode,l=a===void 0?!1:a,u=e.clientAwareness,c=u===void 0?{}:u,p=e.localState,f=e.assumeImmutableResults;this.clientAwareness={},this.queries=new Map,this.fetchCancelFns=new Map,this.transformCache=new(Ve?WeakMap:Map),this.queryIdCounter=1,this.requestIdCounter=1,this.mutationIdCounter=1,this.inFlightLinkObservables=new Map,this.cache=r,this.link=i,this.queryDeduplication=o,this.clientAwareness=c,this.localState=p||new Un({cache:r}),this.ssrMode=l,this.assumeImmutableResults=!!f,(this.onBroadcast=s)&&(this.mutationStore=Object.create(null))}return t.prototype.stop=function(){var e=this;this.queries.forEach(function(r,i){e.stopQueryNoBroadcast(i)}),this.cancelPendingFetches(new F(12))},t.prototype.cancelPendingFetches=function(e){this.fetchCancelFns.forEach(function(r){return r(e)}),this.fetchCancelFns.clear()},t.prototype.mutate=function(e){var r=e.mutation,i=e.variables,n=e.optimisticResponse,o=e.updateQueries,s=e.refetchQueries,a=s===void 0?[]:s,l=e.awaitRefetchQueries,u=l===void 0?!1:l,c=e.update,p=e.errorPolicy,f=p===void 0?"none":p,h=e.fetchPolicy,d=e.context,m=d===void 0?{}:d;return Ne(this,void 0,void 0,function(){var y,_,w;return Ie(this,function(S){switch(S.label){case 0:return P(r,13),P(!h||h==="no-cache",14),y=this.generateMutationId(),r=this.transform(r).document,i=this.getVariables(r,i),this.transform(r).hasClientExports?[4,this.localState.addExportedVariables(r,i,m)]:[3,2];case 1:i=S.sent(),S.label=2;case 2:return _=this.mutationStore&&(this.mutationStore[y]={mutation:r,variables:i,loading:!0,error:null}),n&&this.markMutationOptimistic(n,{mutationId:y,document:r,variables:i,errorPolicy:f,updateQueries:o,update:c}),this.broadcastQueries(),w=this,[2,new Promise(function(C,E){var k,O;w.getObservableFromLink(r,g(g({},m),{optimisticResponse:n}),i,!1).subscribe({next:function(A){if(Jt(A)&&f==="none"){O=new Ze({graphQLErrors:A.errors});return}if(_&&(_.loading=!1,_.error=null),h!=="no-cache")try{w.markMutationResult({mutationId:y,result:A,document:r,variables:i,errorPolicy:f,updateQueries:o,update:c})}catch(H){O=new Ze({networkError:H});return}k=A},error:function(A){_&&(_.loading=!1,_.error=A),n&&w.cache.removeOptimistic(y),w.broadcastQueries(),E(new Ze({networkError:A}))},complete:function(){if(O&&_&&(_.loading=!1,_.error=O),n&&w.cache.removeOptimistic(y),w.broadcastQueries(),O){E(O);return}typeof a=="function"&&(a=a(k));var A=[];Le(a)&&a.forEach(function(H){if(typeof H=="string")w.queries.forEach(function(Ft){var Ye=Ft.observableQuery;Ye&&Ye.queryName===H&&A.push(Ye.refetch())});else{var J={query:H.query,variables:H.variables,fetchPolicy:"network-only"};H.context&&(J.context=H.context),A.push(w.query(J))}}),Promise.all(u?A:[]).then(function(){f==="ignore"&&k&&Jt(k)&&delete k.errors,C(k)},E)}})})]}})})},t.prototype.markMutationResult=function(e,r){var i=this;if(r===void 0&&(r=this.cache),Hn(e.result,e.errorPolicy)){var n=[{result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}],o=e.updateQueries;o&&this.queries.forEach(function(s,a){var l=s.observableQuery,u=l&&l.queryName;if(!(!u||!x_.call(o,u))){var c=o[u],p=i.queries.get(a),f=p.document,h=p.variables,d=r.diff({query:f,variables:h,returnPartialData:!0,optimistic:!1}),m=d.result,y=d.complete;if(y&&m){var _=c(m,{mutationResult:e.result,queryName:f&&zt(f)||void 0,queryVariables:h});_&&n.push({result:_,dataId:"ROOT_QUERY",query:f,variables:h})}}}),r.performTransaction(function(s){n.forEach(function(l){return s.write(l)});var a=e.update;a&&a(s,e.result)},null)}},t.prototype.markMutationOptimistic=function(e,r){var i=this,n=typeof e=="function"?e(r.variables):e;return this.cache.recordOptimisticTransaction(function(o){try{i.markMutationResult(g(g({},r),{result:{data:n}}),o)}catch(s){}},r.mutationId)},t.prototype.fetchQuery=function(e,r,i){return this.fetchQueryObservable(e,r,i).promise},t.prototype.getQueryStore=function(){var e=Object.create(null);return this.queries.forEach(function(r,i){e[i]={variables:r.variables,networkStatus:r.networkStatus,networkError:r.networkError,graphQLErrors:r.graphQLErrors}}),e},t.prototype.resetErrors=function(e){var r=this.queries.get(e);r&&(r.networkError=void 0,r.graphQLErrors=[])},t.prototype.transform=function(e){var r=this.transformCache;if(!r.has(e)){var i=this.cache.transformDocument(e),n=Vs(this.cache.transformForLink(i)),o=this.localState.clientQuery(i),s=n&&this.localState.serverQuery(n),a={document:i,hasClientExports:Ds(i),hasForcedResolvers:this.localState.shouldForceResolvers(i),clientQuery:o,serverQuery:s,defaultVars:xt(Ee(i))},l=function(u){u&&!r.has(u)&&r.set(u,a)};l(e),l(i),l(o),l(s)}return r.get(e)},t.prototype.getVariables=function(e,r){return g(g({},this.transform(e).defaultVars),r)},t.prototype.watchQuery=function(e){e=g(g({},e),{variables:this.getVariables(e.query,e.variables)}),typeof e.notifyOnNetworkStatusChange=="undefined"&&(e.notifyOnNetworkStatusChange=!1);var r=new ka(this.cache),i=new Mn({queryManager:this,queryInfo:r,options:e});return this.queries.set(i.queryId,r),r.init({document:e.query,observableQuery:i,variables:e.variables}),i},t.prototype.query=function(e){var r=this;P(e.query,15),P(e.query.kind==="Document",16),P(!e.returnPartialData,17),P(!e.pollInterval,18);var i=this.generateQueryId();return this.fetchQuery(i,e).finally(function(){return r.stopQuery(i)})},t.prototype.generateQueryId=function(){return String(this.queryIdCounter++)},t.prototype.generateRequestId=function(){return this.requestIdCounter++},t.prototype.generateMutationId=function(){return String(this.mutationIdCounter++)},t.prototype.stopQueryInStore=function(e){this.stopQueryInStoreNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryInStoreNoBroadcast=function(e){var r=this.queries.get(e);r&&r.stop()},t.prototype.clearStore=function(){return this.cancelPendingFetches(new F(19)),this.queries.forEach(function(e){e.observableQuery?e.networkStatus=M.loading:e.stop()}),this.mutationStore&&(this.mutationStore=Object.create(null)),this.cache.reset()},t.prototype.resetStore=function(){var e=this;return this.clearStore().then(function(){return e.reFetchObservableQueries()})},t.prototype.reFetchObservableQueries=function(e){var r=this;e===void 0&&(e=!1);var i=[];return this.queries.forEach(function(n,o){var s=n.observableQuery;if(s&&s.hasObservers()){var a=s.options.fetchPolicy;s.resetLastResults(),a!=="cache-only"&&(e||a!=="standby")&&i.push(s.refetch()),r.getQuery(o).setDiff(null)}}),this.broadcastQueries(),Promise.all(i)},t.prototype.setObservableQuery=function(e){this.getQuery(e.queryId).setObservableQuery(e)},t.prototype.startGraphQLSubscription=function(e){var r=this,i=e.query,n=e.fetchPolicy,o=e.errorPolicy,s=e.variables,a=e.context,l=a===void 0?{}:a;i=this.transform(i).document,s=this.getVariables(i,s);var u=function(p){return r.getObservableFromLink(i,l,p,!1).map(function(f){if(n!=="no-cache"&&(Hn(f,o)&&r.cache.write({query:i,result:f.data,dataId:"ROOT_SUBSCRIPTION",variables:p}),r.broadcastQueries()),Jt(f))throw new Ze({graphQLErrors:f.errors});return f})};if(this.transform(i).hasClientExports){var c=this.localState.addExportedVariables(i,s,l).then(u);return new D.default(function(p){var f=null;return c.then(function(h){return f=h.subscribe(p)},p.error),function(){return f&&f.unsubscribe()}})}return u(s)},t.prototype.stopQuery=function(e){this.stopQueryNoBroadcast(e),this.broadcastQueries()},t.prototype.stopQueryNoBroadcast=function(e){this.stopQueryInStoreNoBroadcast(e),this.removeQuery(e)},t.prototype.removeQuery=function(e){this.fetchCancelFns.delete(e),this.getQuery(e).stop(),this.queries.delete(e)},t.prototype.broadcastQueries=function(){this.onBroadcast&&this.onBroadcast(),this.queries.forEach(function(e){return e.notify()})},t.prototype.getLocalState=function(){return this.localState},t.prototype.getObservableFromLink=function(e,r,i,n){var o=this,s;n===void 0&&(n=(s=r==null?void 0:r.queryDeduplication)!==null&&s!==void 0?s:this.queryDeduplication);var a,l=this.transform(e).serverQuery;if(l){var u=this,c=u.inFlightLinkObservables,p=u.link,f={query:l,variables:i,operationName:zt(l)||void 0,context:this.prepareContext(g(g({},r),{forceFetch:!n}))};if(r=f.context,n){var h=c.get(l)||new Map;c.set(l,h);var d=JSON.stringify(i);if(a=h.get(d),!a){var m=new Yt([Zt(p,f)]);h.set(d,a=m),m.cleanup(function(){h.delete(d)&&h.size<1&&c.delete(l)})}}else a=new Yt([Zt(p,f)])}else a=new Yt([D.default.of({data:{}})]),r=this.prepareContext(r);var y=this.transform(e).clientQuery;return y&&(a=Zs(a,function(_){return o.localState.runResolvers({document:y,remoteResult:_,context:r,variables:i})})),a},t.prototype.getResultsFromLink=function(e,r,i){var n=e.lastRequestId;return Zs(this.getObservableFromLink(e.document,i.context,i.variables),function(o){var s=Le(o.errors);if(n>=e.lastRequestId){if(s&&i.errorPolicy==="none")throw e.markError(new Ze({graphQLErrors:o.errors}));e.markResult(o,i,r),e.markReady()}var a={data:o.data,loading:!1,networkStatus:e.networkStatus||M.ready};return s&&i.errorPolicy!=="ignore"&&(a.errors=o.errors),a},function(o){var s=_a(o)?o:new Ze({networkError:o});throw n>=e.lastRequestId&&e.markError(s),s})},t.prototype.fetchQueryObservable=function(e,r,i){var n=this;i===void 0&&(i=M.loading);var o=this.transform(r.query).document,s=this.getVariables(o,r.variables),a=this.getQuery(e),l=a.networkStatus,u=r.fetchPolicy,c=u===void 0?"cache-first":u,p=r.errorPolicy,f=p===void 0?"none":p,h=r.returnPartialData,d=h===void 0?!1:h,m=r.notifyOnNetworkStatusChange,y=m===void 0?!1:m,_=r.context,w=_===void 0?{}:_,S=c==="cache-first"||c==="cache-and-network"||c==="network-only"||c==="no-cache";S&&y&&typeof l=="number"&&l!==i&&et(i)&&(c!=="cache-first"&&(c="cache-and-network"),d=!0);var C=Object.assign({},r,{query:o,variables:s,fetchPolicy:c,errorPolicy:f,returnPartialData:d,notifyOnNetworkStatusChange:y,context:w}),E=function(O){return C.variables=O,n.fetchQueryByPolicy(a,C,i)};this.fetchCancelFns.set(e,function(O){Promise.resolve().then(function(){return k.cancel(O)})});var k=new Yt(this.transform(C.query).hasClientExports?this.localState.addExportedVariables(C.query,C.variables,C.context).then(E):E(C.variables));return k.cleanup(function(){n.fetchCancelFns.delete(e);var O=r.nextFetchPolicy;O&&(r.nextFetchPolicy=void 0,r.fetchPolicy=typeof O=="function"?O.call(r,r.fetchPolicy||"cache-first"):O)}),k},t.prototype.fetchQueryByPolicy=function(e,r,i){var n=this,o=r.query,s=r.variables,a=r.fetchPolicy,l=r.errorPolicy,u=r.returnPartialData,c=r.context;e.init({document:o,variables:s,lastRequestId:this.generateRequestId(),networkStatus:i});var p=function(){return e.getDiff(s)},f=function(m,y){y===void 0&&(y=e.networkStatus||M.loading);var _=m.result,w=function(S){return D.default.of(g({data:S,loading:et(y),networkStatus:y},m.complete?null:{partial:!0}))};return n.transform(o).hasForcedResolvers?n.localState.runResolvers({document:o,remoteResult:{data:_},context:c,variables:s,onlyRunForcedResolvers:!0}).then(function(S){return w(S.data)}):w(_)},h=function(m){return n.getResultsFromLink(e,m,{variables:s,context:c,fetchPolicy:a,errorPolicy:l})};switch(a){default:case"cache-first":{var d=p();return d.complete?[f(d,e.markReady())]:u?[f(d),h(!0)]:[h(!0)]}case"cache-and-network":{var d=p();return d.complete||u?[f(d),h(!0)]:[h(!0)]}case"cache-only":return[f(p(),e.markReady())];case"network-only":return[h(!0)];case"no-cache":return[h(!1)];case"standby":return[]}},t.prototype.getQuery=function(e){return e&&!this.queries.has(e)&&this.queries.set(e,new ka(this.cache)),this.queries.get(e)},t.prototype.prepareContext=function(e){e===void 0&&(e={});var r=this.localState.prepareContext(e);return g(g({},r),{clientAwareness:this.clientAwareness})},t}();var w_=!1;function Kn(t,e){return Xt(t,e,e.variables&&{variables:g(g({},t.variables),e.variables)})}var Aa=function(){function t(e){var r=this;this.defaultOptions={},this.resetStoreCallbacks=[],this.clearStoreCallbacks=[];var i=e.uri,n=e.credentials,o=e.headers,s=e.cache,a=e.ssrMode,l=a===void 0?!1:a,u=e.ssrForceFetchDelay,c=u===void 0?0:u,p=e.connectToDevTools,f=p===void 0?typeof window=="object"&&!window.__APOLLO_CLIENT__&&!1:p,h=e.queryDeduplication,d=h===void 0?!0:h,m=e.defaultOptions,y=e.assumeImmutableResults,_=y===void 0?!1:y,w=e.resolvers,S=e.typeDefs,C=e.fragmentMatcher,E=e.name,k=e.version,O=e.link;if(O||(O=i?new ma({uri:i,credentials:n,headers:o}):z.empty()),!s)throw new F(9);if(this.link=O,this.cache=s,this.disableNetworkFetches=l||c>0,this.queryDeduplication=d,this.defaultOptions=m||{},this.typeDefs=S,c&&setTimeout(function(){return r.disableNetworkFetches=!1},c),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this),f&&typeof window=="object"&&(window.__APOLLO_CLIENT__=this),!w_&&!1&&typeof window!="undefined"&&window.document&&window.top===window.self&&!window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__)var A,H,J;this.version=rp,this.localState=new Un({cache:s,client:this,resolvers:w,fragmentMatcher:C}),this.queryManager=new ef({cache:this.cache,link:this.link,queryDeduplication:d,ssrMode:l,clientAwareness:{name:E,version:k},localState:this.localState,assumeImmutableResults:_,onBroadcast:f?function(){r.devToolsHookCb&&r.devToolsHookCb({action:{},state:{queries:r.queryManager.getQueryStore(),mutations:r.queryManager.mutationStore||{}},dataWithOptimisticResults:r.cache.extract(!0)})}:void 0})}return t.prototype.stop=function(){this.queryManager.stop()},t.prototype.watchQuery=function(e){return this.defaultOptions.watchQuery&&(e=Kn(this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&(e.fetchPolicy==="network-only"||e.fetchPolicy==="cache-and-network")&&(e=g(g({},e),{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},t.prototype.query=function(e){return this.defaultOptions.query&&(e=Kn(this.defaultOptions.query,e)),P(e.fetchPolicy!=="cache-and-network",10),this.disableNetworkFetches&&e.fetchPolicy==="network-only"&&(e=g(g({},e),{fetchPolicy:"cache-first"})),this.queryManager.query(e)},t.prototype.mutate=function(e){return this.defaultOptions.mutate&&(e=Kn(this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},t.prototype.subscribe=function(e){return this.queryManager.startGraphQLSubscription(e)},t.prototype.readQuery=function(e,r){return r===void 0&&(r=!1),this.cache.readQuery(e,r)},t.prototype.readFragment=function(e,r){return r===void 0&&(r=!1),this.cache.readFragment(e,r)},t.prototype.writeQuery=function(e){this.cache.writeQuery(e),this.queryManager.broadcastQueries()},t.prototype.writeFragment=function(e){this.cache.writeFragment(e),this.queryManager.broadcastQueries()},t.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},t.prototype.__requestRaw=function(e){return Zt(this.link,e)},t.prototype.resetStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.resetStoreCallbacks.map(function(r){return r()}))}).then(function(){return e.reFetchObservableQueries()})},t.prototype.clearStore=function(){var e=this;return Promise.resolve().then(function(){return e.queryManager.clearStore()}).then(function(){return Promise.all(e.clearStoreCallbacks.map(function(r){return r()}))})},t.prototype.onResetStore=function(e){var r=this;return this.resetStoreCallbacks.push(e),function(){r.resetStoreCallbacks=r.resetStoreCallbacks.filter(function(i){return i!==e})}},t.prototype.onClearStore=function(e){var r=this;return this.clearStoreCallbacks.push(e),function(){r.clearStoreCallbacks=r.clearStoreCallbacks.filter(function(i){return i!==e})}},t.prototype.reFetchObservableQueries=function(e){return this.queryManager.reFetchObservableQueries(e)},t.prototype.extract=function(e){return this.cache.extract(e)},t.prototype.restore=function(e){return this.cache.restore(e)},t.prototype.addResolvers=function(e){this.localState.addResolvers(e)},t.prototype.setResolvers=function(e){this.localState.setResolvers(e)},t.prototype.getResolvers=function(){return this.localState.getResolvers()},t.prototype.setLocalStateFragmentMatcher=function(e){this.localState.setFragmentMatcher(e)},t.prototype.setLink=function(e){this.link=this.queryManager.link=e},t}();var Sf=dt(wf()),{__extends:iN,__assign:Na,__rest:nN,__decorate:oN,__param:sN,__metadata:aN,__awaiter:lN,__generator:uN,__exportStar:cN,__createBinding:pN,__values:fN,__read:dN,__spread:hN,__spreadArrays:mN,__await:yN,__asyncGenerator:vN,__asyncDelegator:_N,__asyncValues:gN,__makeTemplateObject:bN,__importStar:xN,__importDefault:wN,__classPrivateFieldGet:SN,__classPrivateFieldSet:EN}=Sf.default;var $n=new Map,Ia=new Map,Ef=!0,Ma=!1;function Tf(t){return t.replace(/[\s,]+/g," ").trim()}function S_(t){return Tf(t.source.body.substring(t.start,t.end))}function E_(t){var e=new Set,r=[];return t.definitions.forEach(function(i){if(i.kind==="FragmentDefinition"){var n=i.name.value,o=S_(i.loc),s=Ia.get(n);s&&!s.has(o)?Ef&&console.warn("Warning: fragment with name "+n+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):s||Ia.set(n,s=new Set),s.add(o),e.has(o)||(e.add(o),r.push(i))}else r.push(i)}),Na(Na({},t),{definitions:r})}function T_(t){var e=new Set(t.definitions);e.forEach(function(i){i.loc&&delete i.loc,Object.keys(i).forEach(function(n){var o=i[n];o&&typeof o=="object"&&e.add(o)})});var r=t.loc;return r&&(delete r.startToken,delete r.endToken),t}function C_(t){var e=Tf(t);if(!$n.has(e)){var r=_n(t,{experimentalFragmentVariables:Ma});if(!r||r.kind!=="Document")throw new Error("Not a valid GraphQL document.");$n.set(e,T_(E_(r)))}return $n.get(e)}function Ra(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];typeof t=="string"&&(t=[t]);var i=t[0];return e.forEach(function(n,o){n&&n.kind==="Document"?i+=n.loc.source.body:i+=n,i+=t[o+1]}),C_(i)}function O_(){$n.clear(),Ia.clear()}function P_(){Ef=!1}function k_(){Ma=!0}function A_(){Ma=!1}var Te=Object.assign(Ra,{gql:Ra,default:Ra,resetCaches:O_,disableFragmentWarnings:P_,enableExperimentalFragmentVariables:k_,disableExperimentalFragmentVariables:A_});gc("log");var UN=Te.resetCaches,HN=Te.disableFragmentWarnings,KN=Te.enableExperimentalFragmentVariables,QN=Te.disableExperimentalFragmentVariables;var Cf=new WeakMap;function D_(t,e){let r=e;for(;r;){if(Cf.get(r)===t)return!0;r=Object.getPrototypeOf(r)}return!1}function Ue(t){return e=>{if(D_(t,e))return e;let r=t(e);return Cf.set(r,t),r}}function Of(t){return!!(t&&typeof t=="object"&&"kind"in t&&"definitions"in t)}function Gn(t){return{configurable:!0,enumerable:!0,get(){return this.hasAttribute(t)},set(e){e?this.setAttribute(t,""):this.removeAttribute(t)}}}function Wn(t){let{name:e,init:r,onSet:i}=t,n=`_${e}`;return{configurable:!0,enumerable:!0,get(){var o;return(o=this[n])!==null&&o!==void 0?o:r},set(o){this[n]=o,i.call(this,o)}}}function pr(){return{configurable:!0,enumerable:!0,get(){return this.document},set(t){this.document=t}}}function ge(t){return{configurable:!0,enumerable:!0,writable:!0,value:t}}function Pf(t){var e;return(e=t.replace)===null||e===void 0?void 0:e.call(t,/<!---->/g,"")}var kf='script[type="application/graphql"]';function N_(t){return`${t.substr(0,1).toUpperCase()}${t.substr(1)}`}var Yn=class extends CustomEvent{constructor(e,r){super(e,{bubbles:!0,composed:!0,detail:r})}};function I_(t){class e extends t{constructor(...i){var n;super(...i);this.client=(n=window.__APOLLO_CLIENT__)!==null&&n!==void 0?n:null,this._document=null,this._documentSetByJS=!1,this._variables=null,this._variablesSetByJS=!1}get document(){var i;return(i=this._document)!==null&&i!==void 0?i:this.getDOMGraphQLDocument()}set document(i){var n,o;if(this._documentSetByJS=!1,!i)this._document=null;else if(Of(i))this._document=i,this._documentSetByJS=!0,this.mo&&((o=this.documentChanged)===null||o===void 0||o.call(this,i));else throw new TypeError(`${N_((n=this.constructor.documentType)!==null&&n!==void 0?n:"document")} must be a gql-parsed DocumentNode`)}connectedCallback(){var i,n,o;(i=super.connectedCallback)===null||i===void 0||i.call(this),this.mo=new MutationObserver(this.onDOMMutation.bind(this)),this.mo.observe(this,{characterData:!0,childList:!0,subtree:!0}),this._document=(n=this._document)!==null&&n!==void 0?n:this.getDOMGraphQLDocument(),this._variables=(o=this._variables)!==null&&o!==void 0?o:this.getDOMVariables(),this.dispatchEvent(new Yn("apollo-element-connected",this))}disconnectedCallback(){var i,n;this.dispatchEvent(new Yn("apollo-element-disconnected",this)),window.dispatchEvent(new Yn("apollo-element-disconnected",this)),(i=this.mo)===null||i===void 0||i.disconnect(),(n=super.disconnectedCallback)===null||n===void 0||n.call(this)}onDOMMutation(i){var n;let o=s=>[...s==null?void 0:s.addedNodes].some(a=>a===this.querySelector(kf));this._documentSetByJS||(this._document=this.getDOMGraphQLDocument(),i.some(o)&&((n=this.documentChanged)===null||n===void 0||n.call(this,this.document))),this._variablesSetByJS||(this._variables=this.getDOMVariables())}getDOMGraphQLDocument(){let i=this.querySelector(kf),n=i==null?void 0:i.innerText;if(n)try{return Te(Pf(n))}catch(o){return this.error=o,null}else return null}getDOMVariables(){let i=this.querySelector('script[type="application/json"]');if(!i)return null;try{return JSON.parse(i.innerText)}catch{return null}}}return e.documentType="document",Object.defineProperties(e.prototype,{data:ge(null),error:ge(null),errors:ge(null),loading:ge(!1),variables:Wn({name:"variables",init:null,onSet(r){var i;this.mo&&((i=this.variablesChanged)===null||i===void 0||i.call(this,r))}})}),e}var it=Ue(I_);function M_(t){class e extends it(t){constructor(...i){super(...i);this.errorPolicy="none",this.__options=null,this.__networkStatus=M.ready}static get observedAttributes(){var i;return[...new Set([...(i=super.observedAttributes)!==null&&i!==void 0?i:[],"fetch-policy","next-fetch-policy"])]}get canAutoSubscribe(){return!!this.client&&!this.noAutoSubscribe&&this.shouldSubscribe()}attributeChangedCallback(i,n,o){var s,a,l,u;if((s=super.attributeChangedCallback)===null||s===void 0||s.call(this,i,n,o),!((u=(l=(a=super.constructor)===null||a===void 0?void 0:a.observedAttributes)===null||l===void 0?void 0:l.includes)===null||u===void 0?void 0:u.call(l,i)))switch(i){case"fetch-policy":this.fetchPolicy=o;break;case"next-fetch-policy":this.nextFetchPolicy=o;break}}connectedCallback(){super.connectedCallback(),this.documentChanged(this.query)}documentChanged(i){!i||this.canSubscribe({query:i})&&this.shouldSubscribe({query:i})&&this.subscribe({query:i})}variablesChanged(i){if(this.observableQuery)this.refetch(i);else if(this.canSubscribe({variables:i})&&this.shouldSubscribe({variables:i}))this.subscribe({variables:i});else return}async refetch(i){if(!this.observableQuery)throw new Error("Cannot refetch without an ObservableQuery");return this.observableQuery.refetch(i)}canSubscribe(i){var n;return!this.noAutoSubscribe&&!!this.client&&!!((n=i==null?void 0:i.query)!==null&&n!==void 0?n:this.document)}shouldSubscribe(i){return!0}subscribe(i){var n,o,s,a,l,u;let c={query:(n=i==null?void 0:i.query)!==null&&n!==void 0?n:this.query,context:(o=i==null?void 0:i.context)!==null&&o!==void 0?o:this.context,fetchPolicy:(s=i==null?void 0:i.fetchPolicy)!==null&&s!==void 0?s:this.fetchPolicy,variables:(l=(a=i==null?void 0:i.variables)!==null&&a!==void 0?a:this.variables)!==null&&l!==void 0?l:void 0};return this.observableQuery&&this.observableQuery.stopPolling(),this.observableQuery=this.watchQuery(c),this.loading=!0,(u=this.observableQuery)===null||u===void 0?void 0:u.subscribe({next:this.nextData.bind(this),error:this.nextError.bind(this)})}subscribeToMore(i){var n;return(n=this.observableQuery)===null||n===void 0?void 0:n.subscribeToMore(i)}async executeQuery(i){var n,o,s;if(!this.client)throw new TypeError("No Apollo client. See https://apolloelements.dev/guides/getting-started/apollo-client/");let{context:a,errorPolicy:l,fetchPolicy:u}=this,c={context:a,errorPolicy:l,fetchPolicy:u,...i,query:(n=i==null?void 0:i.query)!==null&&n!==void 0?n:this.query,variables:(s=(o=i==null?void 0:i.variables)!==null&&o!==void 0?o:this.variables)!==null&&s!==void 0?s:void 0};this.loading=!0;try{let p=await this.client.query(c);return this.nextData(p),p}catch(p){throw this.nextError(p),p}}fetchMore(i){var n,o,s,a,l,u;let c={query:(n=i==null?void 0:i.query)!==null&&n!==void 0?n:this.query,updateQuery:i==null?void 0:i.updateQuery,variables:(s=(o=i==null?void 0:i.variables)!==null&&o!==void 0?o:this.variables)!==null&&s!==void 0?s:void 0,context:(a=i==null?void 0:i.context)!==null&&a!==void 0?a:this.context};return this.loading=!0,(l=this.observableQuery)!==null&&l!==void 0||(this.observableQuery=this.watchQuery(c)),(u=this.observableQuery)===null||u===void 0?void 0:u.fetchMore(c).then(p=>(this.loading=!1,p))}watchQuery(i){var n,o,s;if(!this.client)throw new TypeError("No Apollo client. See https://apolloelements.dev/guides/getting-started/apollo-client/");let a={context:this.context,errorPolicy:this.errorPolicy,fetchPolicy:this.fetchPolicy,notifyOnNetworkStatusChange:this.notifyOnNetworkStatusChange,partialRefetch:this.partialRefetch,pollInterval:this.pollInterval,returnPartialData:this.returnPartialData,nextFetchPolicy:this.nextFetchPolicy,...i,query:(n=i==null?void 0:i.query)!==null&&n!==void 0?n:this.query,variables:(s=(o=i==null?void 0:i.variables)!==null&&o!==void 0?o:this.variables)!==null&&s!==void 0?s:void 0};return this.client.watchQuery(a)}nextData(i){var n,o,s;this.dispatchEvent(new CustomEvent("apollo-query-result",{detail:i})),this.data=i.data,this.error=(n=i.error)!==null&&n!==void 0?n:null,this.errors=(o=i.errors)!==null&&o!==void 0?o:null,this.loading=i.loading,this.networkStatus=i.networkStatus,this.partial=i.partial,(s=this.onData)===null||s===void 0||s.call(this,i)}nextError(i){var n;this.dispatchEvent(new CustomEvent("apollo-error",{detail:i})),this.error=i,this.loading=!1,(n=this.onError)===null||n===void 0||n.call(this,i)}}return e.documentType="query",Object.defineProperties(e.prototype,{query:pr(),networkStatus:ge(M.ready),noAutoSubscribe:Gn("no-auto-subscribe"),options:Wn({name:"options",init:null,onSet(r){var i;!r||(i=this.observableQuery)===null||i===void 0||i.setOptions(r)}})}),e}var Af=Ue(M_);var ja=class extends Af(HTMLElement){};var li=class extends it(HTMLElement){};function Fa(t,e){let r=`000000000${t}`;return r.substr(r.length-e)}var R_=Object.keys(window).length,j_=navigator.mimeTypes?navigator.mimeTypes.length:0,F_=Fa((j_+navigator.userAgent.length).toString(36)+R_.toString(36),4);function Jn(){return F_}var La;if(window.crypto){let t=Math.pow(2,32)-1;La=function(){return Math.abs(crypto.getRandomValues(new Uint32Array(1))[0]/t)}}else La=Math.random;var ui=0,Va=4,Xn=36,Df=Math.pow(Xn,Va);function Ba(){return Fa((La()*Df<<0).toString(Xn),Va)}function Nf(){return ui=ui<Df?ui:0,ui++,ui-1}function fr(){let t="c",e=new Date().getTime().toString(Xn),r=Fa(Nf().toString(Xn),Va),i=Jn(),n=Ba()+Ba();return t+e+r+i+n}fr.slug=function(){let e=new Date().getTime().toString(36),r=Nf().toString(36).slice(-4),i=Jn().slice(0,1)+Jn().slice(-1),n=Ba().slice(-2);return e.slice(-2)+r+i+n};fr.isCuid=function(e){return typeof e!="string"?!1:!!e.startsWith("c")};fr.isSlug=function(e){if(typeof e!="string")return!1;let r=e.length;return r>=7&&r<=10};fr.fingerprint=Jn;var L_=()=>{},qa=new WeakMap,If=new WeakMap,Ua=new WeakMap;function V_(t){return Ua.has(t)}function B_(t){return Ua.get(t)}function Mf(t){return If.get(t)}function q_(t){let e=["client","data","error","errors","loading","networkStatus"];qa.get(t)||(customElements.define(`apollo-elements-intermediate-element-${fr()}`,t),qa.set(t,new t));let{constructor:r,...i}={...Object.getOwnPropertyDescriptors(qa.get(t)),...Object.getOwnPropertyDescriptors(Object.getPrototypeOf(t.prototype))};return e.forEach(n=>delete i[n]),i}function Rf(t,e){let r=q_(e),i=Object.fromEntries(Object.entries(r).map(([n,o])=>typeof(o==null?void 0:o.value)=="function"?[n,{...o,value:o.value.bind(t)}]:[n,o]));return Object.defineProperties(t,i),i}function U_(t,e,r){t.constructor.documentType=r==="client"?"document":r,If.set(t,{...B_(t),...Rf(t,e)})}function H_(t,e){e(t),Ua.set(t,Rf(t,li))}function jf(t,e,r,i=L_){return(!V_(t)||e===li)&&H_(t,i),(!Mf(t)||e!==li)&&U_(t,e,r),Mf(t)}var ci={},K_={data:null,error:null,errors:null,loading:!1},Ct=class extends ne{constructor(e,r,i,n={}){super(e,r);this.id=e,this.state=r,this.document=i,this.options=n,this.reactiveProps=[],this.disconnected=!0}init(){this.defaults={...K_,...this.defaults},this.initListeners(),this.initHost(),this.initReactiveProps(),this.initMethods(),this.connect()}initListeners(){let e=()=>this.update(this.document,this.options);this.state.host.addEventListener(`apollo-${this.type}-result`,e),this.state.host.addEventListener("apollo-error",e)}initHost(){var e,r;jf(this.state.host,this.componentClass,this.type),Object.assign(this.state.host,{...this.defaults,...this.optionsToProperties(),client:(r=(e=this.options.client)!==null&&e!==void 0?e:window.__APOLLO_CLIENT__)!==null&&r!==void 0?r:null})}initMethods(){let e=!0,r=!1;Object.entries(this.optionsToOptionalMethods()).forEach(([i,n])=>{typeof n=="function"&&Object.defineProperty(this.state.host,i,{configurable:e,enumerable:r,value:n})})}initReactiveProps(){let{state:{host:e}}=this;["loading",...this.reactiveProps].forEach(i=>{var n,o;(n=ci[o=i])!==null&&n!==void 0||(ci[o]=new WeakMap),ci[i].set(e,this.defaults[i]),Object.defineProperty(e,i,{configurable:!0,enumerable:!0,get(){return ci[i].get(e)},set(s){ci[i].set(e,s),e._scheduler.update()}})})}connect(){var e,r;let{connectedCallback:i,disconnectedCallback:n}=this.componentClass.prototype;Object.assign(this.state.host,{connectedCallback:i,disconnectedCallback:n}),(r=(e=this.state.host).connectedCallback)===null||r===void 0||r.call(e),this.disconnected=!1}teardown(){var e,r;(r=(e=this.state.host).disconnectedCallback)===null||r===void 0||r.call(e),this.disconnected=!0}};var Ff=class extends Ct{constructor(e,r,i,n){super(e,r,i,n);this.type="query",this.componentClass=ja,this.defaults={networkStatus:M.ready},this.init()}optionsToProperties(){var e,r,i;let{onError:n,onCompleted:o,...s}=this.options,a=(e=this.document)!==null&&e!==void 0?e:s.query,l=(r=s.noAutoSubscribe)!==null&&r!==void 0?r:this.state.host.hasAttribute("no-auto-subscribe"),u=(i=s.errorPolicy)!==null&&i!==void 0?i:"none";return{...this.defaults,...s,noAutoSubscribe:l,errorPolicy:u,query:a}}optionsToOptionalMethods(){let{onCompleted:e,onError:r}=this.options;return{onCompleted:e,onError:r}}update(e=this.document,{variables:r=null}=this.options){this.disconnected&&this.connect();let{client:i,data:n,error:o,loading:s,networkStatus:a}=this.state.host,l=this.state.host.refetch.bind(this.state.host),u=this.state.host.fetchMore.bind(this.state.host),c=this.state.host.subscribeToMore.bind(this.state.host);return{called:!0,client:i,data:n,error:o,loading:s,networkStatus:a,variables:r,fetchMore:u,refetch:l,startPolling:d=>void(this.pollingInterval=window.setInterval(l,d)),stopPolling:()=>clearInterval(this.pollingInterval),subscribeToMore:c}}teardown(){this.pollingInterval!=null&&clearInterval(this.pollingInterval),super.teardown()}},TI=$(Ff);function Q_(t){class e extends it(t){constructor(...i){var n,o;super(...i);this.ignoreResults=!1,this.mostRecentMutationId=0,(n=this.variables)!==null&&n!==void 0||(this.variables=null),(o=this.loading)!==null&&o!==void 0||(this.loading=!1)}static get observedAttributes(){var i;return[...new Set([...(i=super.observedAttributes)!==null&&i!==void 0?i:[],"await-refetch-queries","fetch-policy","refetch-queries"])]}connectedCallback(){var i;(i=super.connectedCallback)===null||i===void 0||i.call(this)}attributeChangedCallback(i,n,o){var s,a,l,u;if((s=super.attributeChangedCallback)===null||s===void 0||s.call(this,i,n,o),!((u=(l=(a=super.constructor)===null||a===void 0?void 0:a.observedAttributes)===null||l===void 0?void 0:l.includes)===null||u===void 0?void 0:u.call(l,i)))switch(i){case"await-refetch-queries":this.awaitRefetchQueries=this.hasAttribute("await-refetch-queries");break;case"refetch-queries":this.refetchQueries=o?o.split(",").map(c=>c.trim()):null;break;case"fetch-policy":this.fetchPolicy=o;break}}async mutate(i){var n,o,s,a,l,u,c,p,f,h,d;if(!this.client)throw new TypeError("No Apollo client. See https://apolloelements.dev/guides/getting-started/apollo-client/");let m={mutation:(n=i==null?void 0:i.mutation)!==null&&n!==void 0?n:this.mutation,awaitRefetchQueries:(o=i==null?void 0:i.awaitRefetchQueries)!==null&&o!==void 0?o:this.awaitRefetchQueries,context:(s=i==null?void 0:i.context)!==null&&s!==void 0?s:this.context,errorPolicy:(a=i==null?void 0:i.errorPolicy)!==null&&a!==void 0?a:this.errorPolicy,fetchPolicy:(l=i==null?void 0:i.fetchPolicy)!==null&&l!==void 0?l:this.fetchPolicy,optimisticResponse:(u=i==null?void 0:i.optimisticResponse)!==null&&u!==void 0?u:this.optimisticResponse,refetchQueries:(p=(c=i==null?void 0:i.refetchQueries)!==null&&c!==void 0?c:this.refetchQueries)!==null&&p!==void 0?p:void 0,update:(f=i==null?void 0:i.update)!==null&&f!==void 0?f:this.updater,variables:(d=(h=i==null?void 0:i.variables)!==null&&h!==void 0?h:this.variables)!==null&&d!==void 0?d:void 0},y=this.generateMutationId();return this.loading=!0,this.error=null,this.data=null,this.called=!0,this.client.mutate(m).then(this.onCompletedMutation.bind(this,y)).catch(this.onMutationError.bind(this,y))}generateMutationId(){return this.mostRecentMutationId+=1,this.mostRecentMutationId}isMostRecentMutation(i){return this.mostRecentMutationId===i}onCompletedMutation(i,n){var o,s;let{data:a}=n;return this.dispatchEvent(new CustomEvent("apollo-mutation-result",{detail:n})),this.isMostRecentMutation(i)&&!this.ignoreResults&&(this.loading=!1,this.error=null,this.data=a??null,this.errors=(o=n.errors)!==null&&o!==void 0?o:null,a&&((s=this.onCompleted)===null||s===void 0||s.call(this,a))),n}onMutationError(i,n){var o;throw this.dispatchEvent(new CustomEvent("apollo-error",{detail:n})),this.isMostRecentMutation(i)&&(this.loading=!1,this.data=null,this.error=n),(o=this.onError)===null||o===void 0||o.call(this,n),n}}return e.documentType="mutation",Object.defineProperties(e.prototype,{called:ge(!1),mutation:pr(),optimisticResponse:ge(),refetchQueries:ge(null)}),e}var Lf=Ue(Q_);var Ha=class extends Lf(HTMLElement){};var Vf=class extends Ct{constructor(e,r,i,n){super(e,r,i,n);this.componentClass=Ha,this.type="mutation",this.reactiveProps=["called"],this.defaults={called:!1},this.init(),this.update()}optionsToProperties(){var e;let{onCompleted:r,onError:i,update:n,ignoreResults:o=!1,variables:s=null,refetchQueries:a=null,...l}=this.options;return{mutation:(e=this.document)!==null&&e!==void 0?e:l.mutation,ignoreResults:o,variables:s,refetchQueries:a,...l}}optionsToOptionalMethods(){let{options:{onCompleted:e,onError:r,update:i}}=this;return{onCompleted:e,onError:r,updater:i}}update(e=this.document,{variables:r}=this.options){this.disconnected&&this.connect();let{host:i}=this.state;i.variables=r??null;let{called:n,client:o,data:s,error:a,loading:l}=this.state.host;return[i.mutate.bind(i),{called:n,client:o,data:s,error:a,loading:l}]}},jI=$(Vf);function z_(t){class e extends it(t){constructor(...i){super(...i);this.notifyOnNetworkStatusChange=!1,this.shouldResubscribe=!1,this.skip=!1}get canAutoSubscribe(){return!!this.client&&!this.noAutoSubscribe&&this.shouldSubscribe()}connectedCallback(){var i;(i=super.connectedCallback)===null||i===void 0||i.call(this),!(!this.canSubscribe()||!this.shouldSubscribe())&&(this.initObservable(),this.subscribe())}disconnectedCallback(){var i;(i=super.disconnectedCallback)===null||i===void 0||i.call(this),this.cancel()}documentChanged(i){this.cancel();let n=i;this.canSubscribe({query:n})&&this.shouldSubscribe({query:n})&&this.subscribe()}variablesChanged(i){this.cancel(),this.canSubscribe({variables:i})&&this.shouldSubscribe({variables:i})&&this.subscribe()}subscribe(i){var n,o;this.initObservable(i),!(this.observableSubscription&&!((n=i==null?void 0:i.shouldResubscribe)!==null&&n!==void 0?n:this.shouldResubscribe))&&(this.loading=!0,this.observableSubscription=(o=this.observable)===null||o===void 0?void 0:o.subscribe({next:this.nextData.bind(this),error:this.nextError.bind(this),complete:this.onComplete.bind(this)}))}cancel(){this.endSubscription(),this.observableSubscription=void 0,this.observable=void 0}canSubscribe(i){var n;return!this.noAutoSubscribe&&!!this.client&&!!((n=i==null?void 0:i.query)!==null&&n!==void 0?n:this.document)}shouldSubscribe(i){return!0}initObservable(i){var n,o,s,a,l,u,c;let p=(n=i==null?void 0:i.shouldResubscribe)!==null&&n!==void 0?n:this.shouldResubscribe,f=(o=i==null?void 0:i.client)!==null&&o!==void 0?o:this.client,h=(s=i==null?void 0:i.skip)!==null&&s!==void 0?s:this.skip,d=(a=i==null?void 0:i.subscription)!==null&&a!==void 0?a:this.subscription,m=(u=(l=i==null?void 0:i.variables)!==null&&l!==void 0?l:this.variables)!==null&&u!==void 0?u:void 0,y=(c=i==null?void 0:i.fetchPolicy)!==null&&c!==void 0?c:this.fetchPolicy;if(!f)throw new TypeError("No Apollo client. See https://apolloelements.dev/guides/getting-started/apollo-client/");this.observable&&!p||h||(this.observable=f.subscribe({query:d,variables:m,fetchPolicy:y}))}nextData(i){var n,o;let s=(n=i.data)!==null&&n!==void 0?n:null,a=this.client,l=!1,u=null,p={client:a,subscriptionData:{data:s,loading:l,error:u}};this.dispatchEvent(new CustomEvent("apollo-subscription-result",{detail:p})),this.data=s,this.loading=l,this.error=u,(o=this.onSubscriptionData)===null||o===void 0||o.call(this,p)}nextError(i){var n;this.dispatchEvent(new CustomEvent("apollo-error",{detail:i})),this.error=i,this.loading=!1,(n=this.onError)===null||n===void 0||n.call(this,i)}onComplete(){var i;(i=this.onSubscriptionComplete)===null||i===void 0||i.call(this),this.endSubscription()}endSubscription(){this.observableSubscription&&(this.observableSubscription.unsubscribe(),this.observableSubscription=void 0)}}return e.documentType="subscription",Object.defineProperties(e.prototype,{subscription:pr(),noAutoSubscribe:Gn("no-auto-subscribe")}),e}var Bf=Ue(z_);var Ka=class extends Bf(HTMLElement){};var qf=class extends Ct{constructor(e,r,i,n){super(e,r,i,n);this.type="subscription",this.componentClass=Ka,this.defaults={notifyOnNetworkStatusChange:!1,shouldResubscribe:!1,skip:!1},this.init()}optionsToProperties(){var e,r;let{onSubscriptionComplete:i,onSubscriptionData:n,shouldSubscribe:o,...s}=this.options;return{...this.defaults,noAutoSubscribe:(e=s.noAutoSubscribe)!==null&&e!==void 0?e:this.state.host.hasAttribute("no-auto-subscribe"),skip:(r=s.skip)!==null&&r!==void 0?r:!1,subscription:this.document,variables:s.variables}}optionsToOptionalMethods(){let{onSubscriptionData:e,shouldSubscribe:r}=this.options;return{onSubscriptionData:e,shouldSubscribe:r}}update(){this.disconnected&&this.connect();let{data:e,error:r,loading:i}=this.state.host;return{data:e,error:r,loading:i}}},$I=$(qf);var tM=[1,3e4],rM=[1,20],iM=Te`
  query getProductByHandle($handle: String!) {
    productByHandle(handle: $handle) {
      id
      onlineStoreUrl
      availableForSale
      handle
      title
      totalInventory
      tags
      vendor
      productType
      variants(first: 2) {
        edges {
          node {
            id
            image {
              altText
              originalSrc
              transformedSrc(crop: CENTER, maxWidth: 600, maxHeight: 600)
            }
            priceV2 {
              amount
              currencyCode
            }
            quantityAvailable
            availableForSale
          }
        }
      }
    }
  }
`,$_=Te`
  query getProducts(
    $first: Int
    $after: String
    $query: String
    $reverse: Boolean
    $sortKey: ProductSortKeys
  ) {
    products(
      first: $first
      after: $after
      query: $query
      reverse: $reverse
      sortKey: $sortKey
    ) {
      edges {
        cursor
        node {
          id
          onlineStoreUrl
          handle
          title
          availableForSale
          productType
          vendor
          totalInventory
          images(first: 2) {
            edges {
              node {
                altText
                originalSrc
                transformedSrc(crop: CENTER, maxWidth: 340, maxHeight: 340)
              }
            }
          }
          priceRange {
            maxVariantPrice {
              amount
              currencyCode
            }
            minVariantPrice {
              amount
              currencyCode
            }
          }
          tags
          description
        }
      }
    }
  }
`,G_=({availableForSale:t,totalInventory:e,onlineStoreUrl:r,description:i,handle:n,images:o,priceRange:s,tags:a,title:l,vendor:u,productType:c})=>({availableForSale:t,inStock:e>0,totalInventory:e,title:l,handle:n,images:o?.edges?.map(({node:p})=>({imageAltText:p?.altText??null,imageOriginalSrc:p?.originalSrc??null,imageTransformedSrc:p?.transformedSrc??null}))??[],maxVariantPrice:Number(s?.maxVariantPrice?.amount),minVariantPrice:Number(s?.minVariantPrice?.amount),tags:a,description:i,vendor:u,productType:c,onlineStoreUrl:r}),nM=t=>document.createRange().createContextualFragment(t),Uf=t=>t.replace(/(<([^>]+)>)/gi,""),Qa=t=>`${t}`.replace(/([\\"'])/g,"\\$1").replace(/\0/g,"\\0"),oM=t=>t.split(/\s+/).length>1?`"${t}"`:t;var W_=({searchString:t="",productTypes:e=[]}={})=>{let r="",i=t.trim()===""?"*":t.trim().split(" ").length>1?`"${Qa(t.trim().split(" ").slice(0,-1).join(" "))}*"`:`${Qa(t.trim())}*`;t.trim()!==""&&(r=` AND (title:${i} OR description:${i} OR tags:${i})`);let n=`${e.map(o=>`product_type:"${Qa(o)}"`).join(" OR ")}`;return n!==""&&(n=` AND (${n})`),`available_for_sale:true${r}${n}`},Y_=({searchString:t="",productTypes:e=[]}={})=>{let r=[],i=n=>window.__APOLLO_CLIENT__.query({query:$_,variables:{first:250,query:`${W_({searchString:t,productTypes:e})}`,after:n?.data?.products?.edges?.slice(-1)?.[0]?.cursor??null,sortKey:"BEST_SELLING"}}).then(o=>(r=[...r,...o?.data?.products?.edges?.map(({node:s})=>s)??[]],(o?.data?.products?.edges?.length??0)<250?Promise.resolve(r):i(o)));return i},sM=async(t="")=>(await Y_({searchString:t})()).map(G_),aM=(t=[],e=[])=>{let[r,i]=t,[n,o]=e,s=Math.max(r,n);return Math.min(i,o)>=s};var lM=t=>(e,r)=>{switch(t.sortValue){case"TITLE_ASC":return e?.title?.localeCompare(r?.title,void 0,{base:!0});case"TITLE_DESC":return r?.title?.localeCompare(e?.title,void 0,{base:!0});case"PRICE_ASC":return e.minVariantPrice-r.maxVariantPrice;case"PRICE_DESC":return r.minVariantPrice-e.maxVariantPrice;default:return 0}},uM=t=>{switch(t){case"best-selling":return"BEST_SELLING_ASC";case"title-ascending":return"TITLE_ASC";case"title-descending":return"TITLE_DESC";case"price-ascending":return"PRICE_ASC";case"price-descending":return"PRICE_DESC";default:return"BEST_SELLING_ASC"}},cM=(t,e)=>[1,t,e-2,e-1,e,e+1,e+2].filter((i,n,o)=>o.indexOf(i)===n&&i>=1&&i<=t).sort((i,n)=>i-n).reduce((i,n,o)=>{let s=[...i];return o===0?s=[n]:n-i[i.length-1]>1?s=[...i,"...",n]:s=[...i,n],s},[]);var J_=ds(({classList:t=["collection-banner","d-flex","justify-content-between","align-items-center"],title:e})=>pe`<div class=${t.join(" ")}>
    <h2 class="banner-name dtm-banner-name">${e}</h2>
    <div class="parallelograms-group dtm-parallelograms-group">
      <span class="parallelograms parallelogram-lt dtm-parallelograms"> </span>
      <span class="parallelograms parallelogram-rt dtm-parallelograms"> </span>
      <span class="parallelograms parallelogram-br dtm-parallelograms"> </span>
    </div>
  </div>`),Hf=J_;var Od=dt(Cd());function Ub(){let t=({available:a,title:l,featured_image:u,vendor:c,description:p,tags:f,price:h,handle:d,first_available_variant_id:m})=>({availability:a?"INSTOCK":"OUTOFSTOCK",name:l,image:u,brand:c,description:Uf(p),handle:d,variantId:m,price:`$${(h/1e3).toFixed(2)}`,"cook-type":f?.filter(y=>y.includes("dtm_cook-type_"))?.map(y=>y?.replace("dtm_cook-type_",""))??[],"total-btu":f?.find(y=>y.includes("dtm_total-btu"))?.replace("dtm_total-btu_","")??"","cooking-temperature-range":f?.find(y=>y.includes("dtm_cooking-temperature-range"))?.replace("dtm_cooking-temperature-range_","")??"","total-grill-size":f?.find(y=>y.includes("dtm_total-grill-size"))?.replace("dtm_total-grill-size_","")??"","primary-cooking-space":f?.find(y=>y.includes("dtm_primary-cooking-space"))?.replace("dtm_primary-cooking-space_","")??"","number-of-racks":f?.find(y=>y.includes("dtm_number-of-racks"))?.replace("dtm_number-of-racks_","")??"","rear-rotisserie-burner":!!f?.includes("dtm_rear-rotisserie-burner"),"side-burner":!!f?.includes("dtm_side-burner"),"sear-functionality":!!f?.includes("dtm_sear-functionality")}),e=JSON.parse(localStorage.getItem("compare")??"{}"),[r,i]=us(window?.productsToCompare.map(a=>t(a))??[]),n=[{label:"Product Name & Image",key:"name_image"},{label:"Product Description",key:"description"},{label:"Brand",key:"brand"},{label:"Availability",key:"availability"},{label:"Cook Type",key:"cook-type"},{label:"Total BTU",key:"total-btu"},{label:"Cooking Temperature Range",key:"cooking-temperature-range"},{label:"Total Grill Size",key:"total-grill-size"},{label:"Primary Cooking Space",key:"primary-cooking-space"},{label:"Number of racks ",key:"number-of-racks"},{label:"Rear Rotisserie Burner",key:"rear-rotisserie-burner"},{label:"Side Burner ",key:"side-burner"},{label:"Sear Functionality",key:"sear-functionality"},{label:"Action",key:"action"}],o=a=>{let l=(0,Od.default)(e,u=>u!==a.handle);console.log("newCompareProducts",l),localStorage.setItem("compare",JSON.stringify(l)),i(u=>u.filter(c=>c.handle!==a.handle))},s=(a,l)=>{switch(a.key){case"name_image":return pe`<div
          class="name-image-price-wrapper w-100"
          style="position: relative;"
        >
          <img
            class="w-100"
            src=${l.image}
            style="max-width: 300px;display: block;margin:0 auto;"
          />
          <h3>${l.name}</h3>
          <h4>${l.price}</h4>
          <i
            class="fa fa-close"
            style="position: absolute; right: 0; top: 0; cursor: pointer;"
            @click=${()=>o(l)}
          ></i>
        </div>`;case"action":return pe`${l.variantId?pe`<a
              href=${`/cart/add?id=${l.variantId}&quantity=1`}
              class="btn btn-solid"
            >
              Add to cart >>
            </a>`:null}`;default:return l?.[a.key]??""}};return pe` <div class="modal-header">
      ${Hf({title:"Compare Products",classList:["d-flex","justify-content-between","align-items-center","w-100"]})}
    </div>
    ${r&&(r?.length??0)>0?pe`<div class="modal-body">
          <div class="table-wrapper">
            <table class="table table-responsive">
              <tbody id="table-compare">
                ${n.map(a=>pe`
                    <tr>
                      <th width="10%" class=${a.key}>${a.label}</th>
                      ${r.map(l=>pe`
                          <td
                            width="${90/r.length}%"
                            class=${`${l.handle}-${a.key}`}
                          >
                            ${s(a,l)}
                          </td>
                        `)}
                    </tr>
                  `)}
              </tbody>
            </table>
          </div>
        </div>`:pe`<div class="modal-body">
          <div class="table-wrapper">
            <table class="table table-responsive">
              <tbody id="table-compare">
                <div class="row cart-buttons compare-grid--empty-list">
                  <div class="col-12">
                    <div class="text-center">
                      <img
                        class=""
                        src="https://picsum.photos/200/300"
                        alt="Compare list loading"
                      />
                      <h5 class="title-font mb-3 empty-list--text ">
                        Your compare list is currently empty.
                      </h5>
                      <a href="/collections/Barbeques" class="btn btn-solid">
                        Start Shopping
                      </a>
                    </div>
                  </div>
                </div>
              </tbody>
            </table>
          </div>
        </div>`}
    <div class="modal-footer">
      <a
        href="javascript:void(0)"
        class="close-modal"
        @click=${()=>{window?.$(".compare_modal")?.hide()}}
      >
        <i class="fa fa-close"></i>
      </a>
    </div>`}var Hb={tagName:"compare-table",renderer:Ub,options:{observedAttributes:["empty-image"],useShadowDOM:!1}};window.JSCompiler_renameProperty=function(t,e){return t};var Kb=/(url\()([^)]*)(\))/g,Qb=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/,fo,fe;function kt(t,e){if(t&&Qb.test(t)||t==="//")return t;if(fo===void 0){fo=!1;try{let r=new URL("b","http://a");r.pathname="c%20d",fo=r.href==="http://a/c%20d"}catch(r){}}if(e||(e=document.baseURI||window.location.href),fo)try{return new URL(t,e).href}catch(r){return t}return fe||(fe=document.implementation.createHTMLDocument("temp"),fe.base=fe.createElement("base"),fe.head.appendChild(fe.base),fe.anchor=fe.createElement("a"),fe.body.appendChild(fe.anchor)),fe.base.href=e,fe.anchor.href=t,fe.anchor.href||t}function mi(t,e){return t.replace(Kb,function(r,i,n,o){return i+"'"+kt(n.replace(/["']/g,""),e)+"'"+o})}function _r(t){return t.substring(0,t.lastIndexOf("/")+1)}var cl=!window.ShadyDOM||!window.ShadyDOM.inUse,wM=Boolean(!window.ShadyCSS||window.ShadyCSS.nativeCss),SM=!window.customElements.polyfillWrapFlushCallback,Pd=cl&&"adoptedStyleSheets"in Document.prototype&&"replaceSync"in CSSStyleSheet.prototype&&(()=>{try{let t=new CSSStyleSheet;t.replaceSync("");let e=document.createElement("div");return e.attachShadow({mode:"open"}),e.shadowRoot.adoptedStyleSheets=[t],e.shadowRoot.adoptedStyleSheets[0]===t}catch(t){return!1}})(),kd=window.Polymer&&window.Polymer.rootPath||_r(document.baseURI||window.location.href);var yi=window.Polymer&&window.Polymer.sanitizeDOMValue||void 0;var Ad=window.Polymer&&window.Polymer.setPassiveTouchGestures||!1;var be=window.Polymer&&window.Polymer.strictTemplatePolicy||!1;var Dd=window.Polymer&&window.Polymer.allowTemplateFromDomModule||!1;var ze=window.Polymer&&window.Polymer.legacyOptimizations||!1;var ho=window.Polymer&&window.Polymer.legacyWarnings||!1;var Nd=window.Polymer&&window.Polymer.syncInitialRender||!1;var mo=window.Polymer&&window.Polymer.legacyUndefined||!1;var Id=window.Polymer&&window.Polymer.orderedComputed||!1;var pl=!0;var fl=window.Polymer&&window.Polymer.removeNestedTemplates||!1;var yo=window.Polymer&&window.Polymer.fastDomIf||!1;var vi=window.Polymer&&window.Polymer.suppressTemplateNotifications||!1;var _i=window.Polymer&&window.Polymer.legacyNoObservedAttributes||!1;var Md=window.Polymer&&window.Polymer.useAdoptedStyleSheetsWithBuiltCSS||!1;var zb=0;function Rd(){}Rd.prototype.__mixinApplications;Rd.prototype.__mixinSet;var V=function(t){let e=t.__mixinApplications;e||(e=new WeakMap,t.__mixinApplications=e);let r=zb++;function i(n){let o=n.__mixinSet;if(o&&o[r])return n;let s=e,a=s.get(n);if(!a){a=t(n),s.set(n,a);let l=Object.create(a.__mixinSet||o||null);l[r]=!0,a.__mixinSet=l}return a}return i};var dl={},jd={};function Fd(t,e){dl[t]=jd[t.toLowerCase()]=e}function Ld(t){return dl[t]||jd[t.toLowerCase()]}function $b(t){t.querySelector("style")&&console.warn("dom-module %s has style outside template",t.id)}var at=class extends HTMLElement{static get observedAttributes(){return["id"]}static import(e,r){if(e){let i=Ld(e);return i&&r?i.querySelector(r):i}return null}attributeChangedCallback(e,r,i,n){r!==i&&this.register()}get assetpath(){if(!this.__assetpath){let e=window.HTMLImports&&HTMLImports.importForElement?HTMLImports.importForElement(this)||document:this.ownerDocument,r=kt(this.getAttribute("assetpath")||"",e.baseURI);this.__assetpath=_r(r)}return this.__assetpath}register(e){if(e=e||this.id,e){if(be&&Ld(e)!==void 0)throw Fd(e,null),new Error(`strictTemplatePolicy: dom-module ${e} re-registered`);this.id=e,Fd(e,this),$b(this)}}};at.prototype.modules=dl;customElements.define("dom-module",at);var Gb="link[rel=import][type~=css]",Wb="include",Vd="shady-unscoped";function hl(t){return at.import(t)}function Bd(t){let e=t.body?t.body:t,r=mi(e.textContent,t.baseURI),i=document.createElement("style");return i.textContent=r,i}function Jb(t){let e=t.trim().split(/\s+/),r=[];for(let i=0;i<e.length;i++)r.push(...Yb(e[i]));return r}function Yb(t){let e=hl(t);if(!e)return console.warn("Could not find style data in module named",t),[];if(e._styles===void 0){let r=[];r.push(...ml(e));let i=e.querySelector("template");i&&r.push(...vo(i,e.assetpath)),e._styles=r}return e._styles}function vo(t,e){if(!t._styles){let r=[],i=t.content.querySelectorAll("style");for(let n=0;n<i.length;n++){let o=i[n],s=o.getAttribute(Wb);s&&r.push(...Jb(s).filter(function(a,l,u){return u.indexOf(a)===l})),e&&(o.textContent=mi(o.textContent,e)),r.push(o)}t._styles=r}return t._styles}function qd(t){let e=hl(t);return e?ml(e):[]}function ml(t){let e=[],r=t.querySelectorAll(Gb);for(let i=0;i<r.length;i++){let n=r[i];if(n.import){let o=n.import,s=n.hasAttribute(Vd);if(s&&!o._unscopedStyle){let a=Bd(o);a.setAttribute(Vd,""),o._unscopedStyle=a}else o._style||(o._style=Bd(o));e.push(s?o._unscopedStyle:o._style)}}return e}function Ud(t){let e=t.trim().split(/\s+/),r="";for(let i=0;i<e.length;i++)r+=Xb(e[i]);return r}function Xb(t){let e=hl(t);if(e&&e._cssText===void 0){let r=e0(e),i=e.querySelector("template");i&&(r+=Zb(i,e.assetpath)),e._cssText=r||null}return e||console.warn("Could not find style data in module named",t),e&&e._cssText||""}function Zb(t,e){let r="",i=vo(t,e);for(let n=0;n<i.length;n++){let o=i[n];o.parentNode&&o.parentNode.removeChild(o),r+=o.textContent}return r}function e0(t){let e="",r=ml(t);for(let i=0;i<r.length;i++)e+=r[i].textContent;return e}var b=window.ShadyDOM&&window.ShadyDOM.noPatch&&window.ShadyDOM.wrap?window.ShadyDOM.wrap:window.ShadyDOM?t=>ShadyDOM.patch(t):t=>t;function _o(t){return t.indexOf(".")>=0}function xe(t){let e=t.indexOf(".");return e===-1?t:t.slice(0,e)}function yl(t,e){return t.indexOf(e+".")===0}function gr(t,e){return e.indexOf(t+".")===0}function At(t,e,r){return e+r.slice(t.length)}function Hd(t,e){return t===e||yl(t,e)||gr(t,e)}function br(t){if(Array.isArray(t)){let e=[];for(let r=0;r<t.length;r++){let i=t[r].toString().split(".");for(let n=0;n<i.length;n++)e.push(i[n])}return e.join(".")}else return t}function Kd(t){return Array.isArray(t)?br(t).split("."):t.toString().split(".")}function Y(t,e,r){let i=t,n=Kd(e);for(let o=0;o<n.length;o++){if(!i)return;let s=n[o];i=i[s]}return r&&(r.path=n.join(".")),i}function vl(t,e,r){let i=t,n=Kd(e),o=n[n.length-1];if(n.length>1){for(let s=0;s<n.length-1;s++){let a=n[s];if(i=i[a],!i)return}i[o]=r}else i[e]=r;return n.join(".")}var go={},t0=/-[a-z]/g,r0=/([A-Z])/g;function xr(t){return go[t]||(go[t]=t.indexOf("-")<0?t:t.replace(t0,e=>e[1].toUpperCase()))}function wr(t){return go[t]||(go[t]=t.replace(r0,"-$1").toLowerCase())}var i0=0,Qd=0,Sr=[],n0=0,_l=!1,zd=document.createTextNode("");new window.MutationObserver(o0).observe(zd,{characterData:!0});function o0(){_l=!1;let t=Sr.length;for(let e=0;e<t;e++){let r=Sr[e];if(r)try{r()}catch(i){setTimeout(()=>{throw i})}}Sr.splice(0,t),Qd+=t}var lt={after(t){return{run(e){return window.setTimeout(e,t)},cancel(e){window.clearTimeout(e)}}},run(t,e){return window.setTimeout(t,e)},cancel(t){window.clearTimeout(t)}};var se={run(t){return _l||(_l=!0,zd.textContent=n0++),Sr.push(t),i0++},cancel(t){let e=t-Qd;if(e>=0){if(!Sr[e])throw new Error("invalid async handle: "+t);Sr[e]=null}}};var s0=se,bo=V(t=>{class e extends t{static createProperties(i){let n=this.prototype;for(let o in i)o in n||n._createPropertyAccessor(o)}static attributeNameForProperty(i){return i.toLowerCase()}static typeForProperty(i){}_createPropertyAccessor(i,n){this._addPropertyToAttributeMap(i),this.hasOwnProperty(JSCompiler_renameProperty("__dataHasAccessor",this))||(this.__dataHasAccessor=Object.assign({},this.__dataHasAccessor)),this.__dataHasAccessor[i]||(this.__dataHasAccessor[i]=!0,this._definePropertyAccessor(i,n))}_addPropertyToAttributeMap(i){this.hasOwnProperty(JSCompiler_renameProperty("__dataAttributes",this))||(this.__dataAttributes=Object.assign({},this.__dataAttributes));let n=this.__dataAttributes[i];return n||(n=this.constructor.attributeNameForProperty(i),this.__dataAttributes[n]=i),n}_definePropertyAccessor(i,n){Object.defineProperty(this,i,{get(){return this.__data[i]},set:n?function(){}:function(o){this._setPendingProperty(i,o,!0)&&this._invalidateProperties()}})}constructor(){super();this.__dataEnabled=!1,this.__dataReady=!1,this.__dataInvalid=!1,this.__data={},this.__dataPending=null,this.__dataOld=null,this.__dataInstanceProps=null,this.__dataCounter=0,this.__serializing=!1,this._initializeProperties()}ready(){this.__dataReady=!0,this._flushProperties()}_initializeProperties(){for(let i in this.__dataHasAccessor)this.hasOwnProperty(i)&&(this.__dataInstanceProps=this.__dataInstanceProps||{},this.__dataInstanceProps[i]=this[i],delete this[i])}_initializeInstanceProperties(i){Object.assign(this,i)}_setProperty(i,n){this._setPendingProperty(i,n)&&this._invalidateProperties()}_getProperty(i){return this.__data[i]}_setPendingProperty(i,n,o){let s=this.__data[i],a=this._shouldPropertyChange(i,n,s);return a&&(this.__dataPending||(this.__dataPending={},this.__dataOld={}),this.__dataOld&&!(i in this.__dataOld)&&(this.__dataOld[i]=s),this.__data[i]=n,this.__dataPending[i]=n),a}_isPropertyPending(i){return!!(this.__dataPending&&this.__dataPending.hasOwnProperty(i))}_invalidateProperties(){!this.__dataInvalid&&this.__dataReady&&(this.__dataInvalid=!0,s0.run(()=>{this.__dataInvalid&&(this.__dataInvalid=!1,this._flushProperties())}))}_enableProperties(){this.__dataEnabled||(this.__dataEnabled=!0,this.__dataInstanceProps&&(this._initializeInstanceProperties(this.__dataInstanceProps),this.__dataInstanceProps=null),this.ready())}_flushProperties(){this.__dataCounter++;let i=this.__data,n=this.__dataPending,o=this.__dataOld;this._shouldPropertiesChange(i,n,o)&&(this.__dataPending=null,this.__dataOld=null,this._propertiesChanged(i,n,o)),this.__dataCounter--}_shouldPropertiesChange(i,n,o){return Boolean(n)}_propertiesChanged(i,n,o){}_shouldPropertyChange(i,n,o){return o!==n&&(o===o||n===n)}attributeChangedCallback(i,n,o,s){n!==o&&this._attributeToProperty(i,o),super.attributeChangedCallback&&super.attributeChangedCallback(i,n,o,s)}_attributeToProperty(i,n,o){if(!this.__serializing){let s=this.__dataAttributes,a=s&&s[i]||i;this[a]=this._deserializeValue(n,o||this.constructor.typeForProperty(a))}}_propertyToAttribute(i,n,o){this.__serializing=!0,o=arguments.length<3?this[i]:o,this._valueToNodeAttribute(this,o,n||this.constructor.attributeNameForProperty(i)),this.__serializing=!1}_valueToNodeAttribute(i,n,o){let s=this._serializeValue(n);(o==="class"||o==="name"||o==="slot")&&(i=b(i)),s===void 0?i.removeAttribute(o):i.setAttribute(o,s)}_serializeValue(i){switch(typeof i){case"boolean":return i?"":void 0;default:return i!=null?i.toString():void 0}}_deserializeValue(i,n){switch(n){case Boolean:return i!==null;case Number:return Number(i);default:return i}}}return e});var $d={},xo=HTMLElement.prototype;for(;xo;){let t=Object.getOwnPropertyNames(xo);for(let e=0;e<t.length;e++)$d[t[e]]=!0;xo=Object.getPrototypeOf(xo)}function a0(t,e){if(!$d[e]){let r=t[e];r!==void 0&&(t.__data?t._setPendingProperty(e,r):(t.__dataProto?t.hasOwnProperty(JSCompiler_renameProperty("__dataProto",t))||(t.__dataProto=Object.create(t.__dataProto)):t.__dataProto={},t.__dataProto[e]=r))}}var wo=V(t=>{let e=bo(t);class r extends e{static createPropertiesForAttributes(){let n=this.observedAttributes;for(let o=0;o<n.length;o++)this.prototype._createPropertyAccessor(xr(n[o]))}static attributeNameForProperty(n){return wr(n)}_initializeProperties(){this.__dataProto&&(this._initializeProtoProperties(this.__dataProto),this.__dataProto=null),super._initializeProperties()}_initializeProtoProperties(n){for(let o in n)this._setProperty(o,n[o])}_ensureAttribute(n,o){let s=this;s.hasAttribute(n)||this._valueToNodeAttribute(s,o,n)}_serializeValue(n){switch(typeof n){case"object":if(n instanceof Date)return n.toString();if(n)try{return JSON.stringify(n)}catch(o){return""}default:return super._serializeValue(n)}}_deserializeValue(n,o){let s;switch(o){case Object:try{s=JSON.parse(n)}catch(a){s=n}break;case Array:try{s=JSON.parse(n)}catch(a){s=null,console.warn(`Polymer::Attributes: couldn't decode Array as JSON: ${n}`)}break;case Date:s=isNaN(n)?String(n):Number(n),s=new Date(s);break;default:s=super._deserializeValue(n,o);break}return s}_definePropertyAccessor(n,o){a0(this,n),super._definePropertyAccessor(n,o)}_hasAccessor(n){return this.__dataHasAccessor&&this.__dataHasAccessor[n]}_isPropertyPending(n){return Boolean(this.__dataPending&&n in this.__dataPending)}}return r});var l0={"dom-if":!0,"dom-repeat":!0},Gd=!1,Wd=!1;function u0(){if(!Gd){Gd=!0;let t=document.createElement("textarea");t.placeholder="a",Wd=t.placeholder===t.textContent}return Wd}function c0(t){u0()&&t.localName==="textarea"&&t.placeholder&&t.placeholder===t.textContent&&(t.textContent=null)}function p0(t){let e=t.getAttribute("is");if(e&&l0[e]){let r=t;for(r.removeAttribute("is"),t=r.ownerDocument.createElement(e),r.parentNode.replaceChild(t,r),t.appendChild(r);r.attributes.length;)t.setAttribute(r.attributes[0].name,r.attributes[0].value),r.removeAttribute(r.attributes[0].name)}return t}function Yd(t,e){let r=e.parentInfo&&Yd(t,e.parentInfo);if(r){for(let i=r.firstChild,n=0;i;i=i.nextSibling)if(e.parentIndex===n++)return i}else return t}function f0(t,e,r,i){i.id&&(e[i.id]=r)}function d0(t,e,r){if(r.events&&r.events.length)for(let i=0,n=r.events,o;i<n.length&&(o=n[i]);i++)t._addMethodEventListenerToNode(e,o.name,o.value,t)}function h0(t,e,r,i){r.templateInfo&&(e._templateInfo=r.templateInfo,e._parentTemplateInfo=i)}function m0(t,e,r){return t=t._methodHost||t,function(n){t[r]?t[r](n,n.detail):console.warn("listener method `"+r+"` not defined")}}var Jd=V(t=>{class e extends t{static _parseTemplate(i,n){if(!i._templateInfo){let o=i._templateInfo={};o.nodeInfoList=[],o.nestedTemplate=Boolean(n),o.stripWhiteSpace=n&&n.stripWhiteSpace||i.hasAttribute("strip-whitespace"),this._parseTemplateContent(i,o,{parent:null})}return i._templateInfo}static _parseTemplateContent(i,n,o){return this._parseTemplateNode(i.content,n,o)}static _parseTemplateNode(i,n,o){let s=!1,a=i;return a.localName=="template"&&!a.hasAttribute("preserve-content")?s=this._parseTemplateNestedTemplate(a,n,o)||s:a.localName==="slot"&&(n.hasInsertionPoint=!0),c0(a),a.firstChild&&this._parseTemplateChildNodes(a,n,o),a.hasAttributes&&a.hasAttributes()&&(s=this._parseTemplateNodeAttributes(a,n,o)||s),s||o.noted}static _parseTemplateChildNodes(i,n,o){if(!(i.localName==="script"||i.localName==="style"))for(let s=i.firstChild,a=0,l;s;s=l){if(s.localName=="template"&&(s=p0(s)),l=s.nextSibling,s.nodeType===Node.TEXT_NODE){let c=l;for(;c&&c.nodeType===Node.TEXT_NODE;)s.textContent+=c.textContent,l=c.nextSibling,i.removeChild(c),c=l;if(n.stripWhiteSpace&&!s.textContent.trim()){i.removeChild(s);continue}}let u={parentIndex:a,parentInfo:o};this._parseTemplateNode(s,n,u)&&(u.infoIndex=n.nodeInfoList.push(u)-1),s.parentNode&&a++}}static _parseTemplateNestedTemplate(i,n,o){let s=i,a=this._parseTemplate(s,n);return(a.content=s.content.ownerDocument.createDocumentFragment()).appendChild(s.content),o.templateInfo=a,!0}static _parseTemplateNodeAttributes(i,n,o){let s=!1,a=Array.from(i.attributes);for(let l=a.length-1,u;u=a[l];l--)s=this._parseTemplateNodeAttribute(i,n,o,u.name,u.value)||s;return s}static _parseTemplateNodeAttribute(i,n,o,s,a){return s.slice(0,3)==="on-"?(i.removeAttribute(s),o.events=o.events||[],o.events.push({name:s.slice(3),value:a}),!0):s==="id"?(o.id=a,!0):!1}static _contentForTemplate(i){let n=i._templateInfo;return n&&n.content||i.content}_stampTemplate(i,n){i&&!i.content&&window.HTMLTemplateElement&&HTMLTemplateElement.decorate&&HTMLTemplateElement.decorate(i),n=n||this.constructor._parseTemplate(i);let o=n.nodeInfoList,s=n.content||i.content,a=document.importNode(s,!0);a.__noInsertionPoint=!n.hasInsertionPoint;let l=a.nodeList=new Array(o.length);a.$={};for(let u=0,c=o.length,p;u<c&&(p=o[u]);u++){let f=l[u]=Yd(a,p);f0(this,a.$,f,p),h0(this,f,p,n),d0(this,f,p)}return a=a,a}_addMethodEventListenerToNode(i,n,o,s){s=s||i;let a=m0(s,n,o);return this._addEventListenerToNode(i,n,a),a}_addEventListenerToNode(i,n,o){i.addEventListener(n,o)}_removeEventListenerFromNode(i,n,o){i.removeEventListener(n,o)}}return e});var gi=0,bi=[],N={COMPUTE:"__computeEffects",REFLECT:"__reflectEffects",NOTIFY:"__notifyEffects",PROPAGATE:"__propagateEffects",OBSERVE:"__observeEffects",READ_ONLY:"__readOnly"},Xd="__computeInfo",y0=/[A-Z]/;function gl(t,e,r){let i=t[e];if(!i)i=t[e]={};else if(!t.hasOwnProperty(e)&&(i=t[e]=Object.create(t[e]),r))for(let n in i){let o=i[n],s=i[n]=Array(o.length);for(let a=0;a<o.length;a++)s[a]=o[a]}return i}function xi(t,e,r,i,n,o){if(e){let s=!1,a=gi++;for(let l in r){let u=n?xe(l):l,c=e[u];if(c)for(let p=0,f=c.length,h;p<f&&(h=c[p]);p++)(!h.info||h.info.lastRun!==a)&&(!n||bl(l,h.trigger))&&(h.info&&(h.info.lastRun=a),h.fn(t,l,r,i,h.info,n,o),s=!0)}return s}return!1}function v0(t,e,r,i,n,o,s,a){let l=!1,u=s?xe(i):i,c=e[u];if(c)for(let p=0,f=c.length,h;p<f&&(h=c[p]);p++)(!h.info||h.info.lastRun!==r)&&(!s||bl(i,h.trigger))&&(h.info&&(h.info.lastRun=r),h.fn(t,i,n,o,h.info,s,a),l=!0);return l}function bl(t,e){if(e){let r=e.name;return r==t||!!(e.structured&&yl(r,t))||!!(e.wildcard&&gr(r,t))}else return!0}function Zd(t,e,r,i,n){let o=typeof n.method=="string"?t[n.method]:n.method,s=n.property;o?o.call(t,t.__data[s],i[s]):n.dynamicFn||console.warn("observer method `"+n.method+"` not defined")}function g0(t,e,r,i,n){let o=t[N.NOTIFY],s,a=gi++;for(let u in e)e[u]&&(o&&v0(t,o,a,u,r,i,n)||n&&_0(t,u,r))&&(s=!0);let l;s&&(l=t.__dataHost)&&l._invalidateProperties&&l._invalidateProperties()}function _0(t,e,r){let i=xe(e);if(i!==e){let n=wr(i)+"-changed";return eh(t,n,r[e],e),!0}return!1}function eh(t,e,r,i){let n={value:r,queueProperty:!0};i&&(n.path=i),b(t).dispatchEvent(new CustomEvent(e,{detail:n}))}function b0(t,e,r,i,n,o){let a=(o?xe(e):e)!=e?e:null,l=a?Y(t,a):t.__data[e];a&&l===void 0&&(l=r[e]),eh(t,n.eventName,l,a)}function x0(t,e,r,i,n){let o,s=t.detail,a=s&&s.path;a?(i=At(r,i,a),o=s&&s.value):o=t.currentTarget[r],o=n?!o:o,(!e[N.READ_ONLY]||!e[N.READ_ONLY][i])&&e._setPendingPropertyOrPath(i,o,!0,Boolean(a))&&(!s||!s.queueProperty)&&e._invalidateProperties()}function w0(t,e,r,i,n){let o=t.__data[e];yi&&(o=yi(o,n.attrName,"attribute",t)),t._propertyToAttribute(e,n.attrName,o)}function E0(t,e,r,i){let n=t[N.COMPUTE];if(n)if(Id){gi++;let o=S0(t),s=[];for(let l in e)th(l,n,s,o,i);let a;for(;a=s.shift();)rh(t,"",e,r,a)&&th(a.methodInfo,n,s,o,i);Object.assign(r,t.__dataOld),Object.assign(e,t.__dataPending),t.__dataPending=null}else{let o=e;for(;xi(t,n,o,r,i);)Object.assign(r,t.__dataOld),Object.assign(e,t.__dataPending),o=t.__dataPending,t.__dataPending=null}}var T0=(t,e,r)=>{let i=0,n=e.length-1,o=-1;for(;i<=n;){let s=i+n>>1,a=r.get(e[s].methodInfo)-r.get(t.methodInfo);if(a<0)i=s+1;else if(a>0)n=s-1;else{o=s;break}}o<0&&(o=n+1),e.splice(o,0,t)},th=(t,e,r,i,n)=>{let o=n?xe(t):t,s=e[o];if(s)for(let a=0;a<s.length;a++){let l=s[a];l.info.lastRun!==gi&&(!n||bl(t,l.trigger))&&(l.info.lastRun=gi,T0(l.info,r,i))}};function S0(t){let e=t.constructor.__orderedComputedDeps;if(!e){e=new Map;let r=t[N.COMPUTE],{counts:i,ready:n,total:o}=C0(t),s;for(;s=n.shift();){e.set(s,e.size);let a=r[s];a&&a.forEach(l=>{let u=l.info.methodInfo;--o,--i[u]==0&&n.push(u)})}o!==0&&console.warn(`Computed graph for ${t.localName} incomplete; circular?`),t.constructor.__orderedComputedDeps=e}return e}function C0(t){let e=t[Xd],r={},i=t[N.COMPUTE],n=[],o=0;for(let s in e){let a=e[s];o+=r[s]=a.args.filter(l=>!l.literal).length+(a.dynamicFn?1:0)}for(let s in i)e[s]||n.push(s);return{counts:r,ready:n,total:o}}function rh(t,e,r,i,n){let o=xl(t,e,r,i,n);if(o===bi)return!1;let s=n.methodInfo;return t.__dataHasAccessor&&t.__dataHasAccessor[s]?t._setPendingProperty(s,o,!0):(t[s]=o,!1)}function O0(t,e,r){let i=t.__dataLinkedPaths;if(i){let n;for(let o in i){let s=i[o];gr(o,e)?(n=At(o,s,e),t._setPendingPropertyOrPath(n,r,!0,!0)):gr(s,e)&&(n=At(s,o,e),t._setPendingPropertyOrPath(n,r,!0,!0))}}}function wl(t,e,r,i,n,o,s){r.bindings=r.bindings||[];let a={kind:i,target:n,parts:o,literal:s,isCompound:o.length!==1};if(r.bindings.push(a),k0(a)){let{event:u,negate:c}=a.parts[0];a.listenerEvent=u||wr(n)+"-changed",a.listenerNegate=c}let l=e.nodeInfoList.length;for(let u=0;u<a.parts.length;u++){let c=a.parts[u];c.compoundIndex=u,P0(t,e,a,c,l)}}function P0(t,e,r,i,n){if(!i.literal)if(r.kind==="attribute"&&r.target[0]==="-")console.warn("Cannot set attribute "+r.target+' because "-" is not a valid attribute starting character');else{let o=i.dependencies,s={index:n,binding:r,part:i,evaluator:t};for(let a=0;a<o.length;a++){let l=o[a];typeof l=="string"&&(l=ih(l),l.wildcard=!0),t._addTemplatePropertyEffect(e,l.rootProperty,{fn:A0,info:s,trigger:l})}}}function A0(t,e,r,i,n,o,s){let a=s[n.index],l=n.binding,u=n.part;if(o&&u.source&&e.length>u.source.length&&l.kind=="property"&&!l.isCompound&&a.__isPropertyEffectsClient&&a.__dataHasAccessor&&a.__dataHasAccessor[l.target]){let c=r[e];e=At(u.source,l.target,e),a._setPendingPropertyOrPath(e,c,!1,!0)&&t._enqueueClient(a)}else{let c=n.evaluator._evaluateBinding(t,u,e,r,i,o);c!==bi&&D0(t,a,l,u,c)}}function D0(t,e,r,i,n){if(n=N0(e,n,r,i),yi&&(n=yi(n,r.target,r.kind,e)),r.kind=="attribute")t._valueToNodeAttribute(e,n,r.target);else{let o=r.target;e.__isPropertyEffectsClient&&e.__dataHasAccessor&&e.__dataHasAccessor[o]?(!e[N.READ_ONLY]||!e[N.READ_ONLY][o])&&e._setPendingProperty(o,n)&&t._enqueueClient(e):t._setUnmanagedPropertyToNode(e,o,n)}}function N0(t,e,r,i){if(r.isCompound){let n=t.__dataCompoundStorage[r.target];n[i.compoundIndex]=e,e=n.join("")}return r.kind!=="attribute"&&(r.target==="textContent"||r.target==="value"&&(t.localName==="input"||t.localName==="textarea"))&&(e=e??""),e}function k0(t){return Boolean(t.target)&&t.kind!="attribute"&&t.kind!="text"&&!t.isCompound&&t.parts[0].mode==="{"}function R0(t,e){let{nodeList:r,nodeInfoList:i}=e;if(i.length)for(let n=0;n<i.length;n++){let o=i[n],s=r[n],a=o.bindings;if(a)for(let l=0;l<a.length;l++){let u=a[l];I0(s,u),M0(s,t,u)}s.__dataHost=t}}function I0(t,e){if(e.isCompound){let r=t.__dataCompoundStorage||(t.__dataCompoundStorage={}),i=e.parts,n=new Array(i.length);for(let s=0;s<i.length;s++)n[s]=i[s].literal;let o=e.target;r[o]=n,e.literal&&e.kind=="property"&&(o==="className"&&(t=b(t)),t[o]=e.literal)}}function M0(t,e,r){if(r.listenerEvent){let i=r.parts[0];t.addEventListener(r.listenerEvent,function(n){x0(n,e,r.target,i.source,i.negate)})}}function nh(t,e,r,i,n,o){o=e.static||o&&(typeof o!="object"||o[e.methodName]);let s={methodName:e.methodName,args:e.args,methodInfo:n,dynamicFn:o};for(let a=0,l;a<e.args.length&&(l=e.args[a]);a++)l.literal||t._addPropertyEffect(l.rootProperty,r,{fn:i,info:s,trigger:l});return o&&t._addPropertyEffect(e.methodName,r,{fn:i,info:s}),s}function xl(t,e,r,i,n){let o=t._methodHost||t,s=o[n.methodName];if(s){let a=t._marshalArgs(n.args,e,r);return a===bi?bi:s.apply(o,a)}else n.dynamicFn||console.warn("method `"+n.methodName+"` not defined")}var j0=[],oh="(?:[a-zA-Z_$][\\w.:$\\-*]*)",F0="(?:[-+]?[0-9]*\\.?[0-9]+(?:[eE][-+]?[0-9]+)?)",L0="(?:'(?:[^'\\\\]|\\\\.)*')",V0='(?:"(?:[^"\\\\]|\\\\.)*")',B0="(?:"+L0+"|"+V0+")",sh="(?:("+oh+"|"+F0+"|"+B0+")\\s*)",q0="(?:"+sh+"(?:,\\s*"+sh+")*)",U0="(?:\\(\\s*(?:"+q0+"?)\\)\\s*)",H0="("+oh+"\\s*"+U0+"?)",K0="(\\[\\[|{{)\\s*",Q0="(?:]]|}})",z0="(?:(!)\\s*)?",$0=K0+z0+H0+Q0,ah=new RegExp($0,"g");function lh(t){let e="";for(let r=0;r<t.length;r++)e+=t[r].literal||"";return e}function Sl(t){let e=t.match(/([^\s]+?)\(([\s\S]*)\)/);if(e){let i={methodName:e[1],static:!0,args:j0};if(e[2].trim()){let n=e[2].replace(/\\,/g,"&comma;").split(",");return G0(n,i)}else return i}return null}function G0(t,e){return e.args=t.map(function(r){let i=ih(r);return i.literal||(e.static=!1),i},this),e}function ih(t){let e=t.trim().replace(/&comma;/g,",").replace(/\\(.)/g,"$1"),r={name:e,value:"",literal:!1},i=e[0];switch(i==="-"&&(i=e[1]),i>="0"&&i<="9"&&(i="#"),i){case"'":case'"':r.value=e.slice(1,-1),r.literal=!0;break;case"#":r.value=Number(e),r.literal=!0;break}return r.literal||(r.rootProperty=xe(e),r.structured=_o(e),r.structured&&(r.wildcard=e.slice(-2)==".*",r.wildcard&&(r.name=e.slice(0,-2)))),r}function uh(t,e,r){let i=Y(t,r);return i===void 0&&(i=e[r]),i}function ch(t,e,r,i){let n={indexSplices:i};mo&&!t._overrideLegacyUndefined&&(e.splices=n),t.notifyPath(r+".splices",n),t.notifyPath(r+".length",e.length),mo&&!t._overrideLegacyUndefined&&(n.indexSplices=[])}function wi(t,e,r,i,n,o){ch(t,e,r,[{index:i,addedCount:n,removed:o,object:e,type:"splice"}])}function W0(t){return t[0].toUpperCase()+t.substring(1)}var Dt=V(t=>{let e=Jd(wo(t));class r extends e{constructor(){super();this.__isPropertyEffectsClient=!0,this.__dataClientsReady,this.__dataPendingClients,this.__dataToNotify,this.__dataLinkedPaths,this.__dataHasPaths,this.__dataCompoundStorage,this.__dataHost,this.__dataTemp,this.__dataClientsInitialized,this.__data,this.__dataPending,this.__dataOld,this.__computeEffects,this.__computeInfo,this.__reflectEffects,this.__notifyEffects,this.__propagateEffects,this.__observeEffects,this.__readOnly,this.__templateInfo,this._overrideLegacyUndefined}get PROPERTY_EFFECT_TYPES(){return N}_initializeProperties(){super._initializeProperties(),this._registerHost(),this.__dataClientsReady=!1,this.__dataPendingClients=null,this.__dataToNotify=null,this.__dataLinkedPaths=null,this.__dataHasPaths=!1,this.__dataCompoundStorage=this.__dataCompoundStorage||null,this.__dataHost=this.__dataHost||null,this.__dataTemp={},this.__dataClientsInitialized=!1}_registerHost(){if(Si.length){let n=Si[Si.length-1];n._enqueueClient(this),this.__dataHost=n}}_initializeProtoProperties(n){this.__data=Object.create(n),this.__dataPending=Object.create(n),this.__dataOld={}}_initializeInstanceProperties(n){let o=this[N.READ_ONLY];for(let s in n)(!o||!o[s])&&(this.__dataPending=this.__dataPending||{},this.__dataOld=this.__dataOld||{},this.__data[s]=this.__dataPending[s]=n[s])}_addPropertyEffect(n,o,s){this._createPropertyAccessor(n,o==N.READ_ONLY);let a=gl(this,o,!0)[n];a||(a=this[o][n]=[]),a.push(s)}_removePropertyEffect(n,o,s){let a=gl(this,o,!0)[n],l=a.indexOf(s);l>=0&&a.splice(l,1)}_hasPropertyEffect(n,o){let s=this[o];return Boolean(s&&s[n])}_hasReadOnlyEffect(n){return this._hasPropertyEffect(n,N.READ_ONLY)}_hasNotifyEffect(n){return this._hasPropertyEffect(n,N.NOTIFY)}_hasReflectEffect(n){return this._hasPropertyEffect(n,N.REFLECT)}_hasComputedEffect(n){return this._hasPropertyEffect(n,N.COMPUTE)}_setPendingPropertyOrPath(n,o,s,a){if(a||xe(Array.isArray(n)?n[0]:n)!==n){if(!a){let l=Y(this,n);if(n=vl(this,n,o),!n||!super._shouldPropertyChange(n,o,l))return!1}if(this.__dataHasPaths=!0,this._setPendingProperty(n,o,s))return O0(this,n,o),!0}else{if(this.__dataHasAccessor&&this.__dataHasAccessor[n])return this._setPendingProperty(n,o,s);this[n]=o}return!1}_setUnmanagedPropertyToNode(n,o,s){(s!==n[o]||typeof s=="object")&&(o==="className"&&(n=b(n)),n[o]=s)}_setPendingProperty(n,o,s){let a=this.__dataHasPaths&&_o(n),l=a?this.__dataTemp:this.__data;return this._shouldPropertyChange(n,o,l[n])?(this.__dataPending||(this.__dataPending={},this.__dataOld={}),n in this.__dataOld||(this.__dataOld[n]=this.__data[n]),a?this.__dataTemp[n]=o:this.__data[n]=o,this.__dataPending[n]=o,(a||this[N.NOTIFY]&&this[N.NOTIFY][n])&&(this.__dataToNotify=this.__dataToNotify||{},this.__dataToNotify[n]=s),!0):!1}_setProperty(n,o){this._setPendingProperty(n,o,!0)&&this._invalidateProperties()}_invalidateProperties(){this.__dataReady&&this._flushProperties()}_enqueueClient(n){this.__dataPendingClients=this.__dataPendingClients||[],n!==this&&this.__dataPendingClients.push(n)}_flushClients(){this.__dataClientsReady?this.__enableOrFlushClients():(this.__dataClientsReady=!0,this._readyClients(),this.__dataReady=!0)}__enableOrFlushClients(){let n=this.__dataPendingClients;if(n){this.__dataPendingClients=null;for(let o=0;o<n.length;o++){let s=n[o];s.__dataEnabled?s.__dataPending&&s._flushProperties():s._enableProperties()}}}_readyClients(){this.__enableOrFlushClients()}setProperties(n,o){for(let s in n)(o||!this[N.READ_ONLY]||!this[N.READ_ONLY][s])&&this._setPendingPropertyOrPath(s,n[s],!0);this._invalidateProperties()}ready(){this._flushProperties(),this.__dataClientsReady||this._flushClients(),this.__dataPending&&this._flushProperties()}_propertiesChanged(n,o,s){let a=this.__dataHasPaths;this.__dataHasPaths=!1;let l;E0(this,o,s,a),l=this.__dataToNotify,this.__dataToNotify=null,this._propagatePropertyChanges(o,s,a),this._flushClients(),xi(this,this[N.REFLECT],o,s,a),xi(this,this[N.OBSERVE],o,s,a),l&&g0(this,l,o,s,a),this.__dataCounter==1&&(this.__dataTemp={})}_propagatePropertyChanges(n,o,s){this[N.PROPAGATE]&&xi(this,this[N.PROPAGATE],n,o,s),this.__templateInfo&&this._runEffectsForTemplate(this.__templateInfo,n,o,s)}_runEffectsForTemplate(n,o,s,a){let l=(u,c)=>{xi(this,n.propertyEffects,u,s,c,n.nodeList);for(let p=n.firstChild;p;p=p.nextSibling)this._runEffectsForTemplate(p,u,s,c)};n.runEffects?n.runEffects(l,o,a):l(o,a)}linkPaths(n,o){n=br(n),o=br(o),this.__dataLinkedPaths=this.__dataLinkedPaths||{},this.__dataLinkedPaths[n]=o}unlinkPaths(n){n=br(n),this.__dataLinkedPaths&&delete this.__dataLinkedPaths[n]}notifySplices(n,o){let s={path:""},a=Y(this,n,s);ch(this,a,s.path,o)}get(n,o){return Y(o||this,n)}set(n,o,s){s?vl(s,n,o):(!this[N.READ_ONLY]||!this[N.READ_ONLY][n])&&this._setPendingPropertyOrPath(n,o,!0)&&this._invalidateProperties()}push(n,...o){let s={path:""},a=Y(this,n,s),l=a.length,u=a.push(...o);return o.length&&wi(this,a,s.path,l,o.length,[]),u}pop(n){let o={path:""},s=Y(this,n,o),a=Boolean(s.length),l=s.pop();return a&&wi(this,s,o.path,s.length,0,[l]),l}splice(n,o,s,...a){let l={path:""},u=Y(this,n,l);o<0?o=u.length-Math.floor(-o):o&&(o=Math.floor(o));let c;return arguments.length===2?c=u.splice(o):c=u.splice(o,s,...a),(a.length||c.length)&&wi(this,u,l.path,o,a.length,c),c}shift(n){let o={path:""},s=Y(this,n,o),a=Boolean(s.length),l=s.shift();return a&&wi(this,s,o.path,0,0,[l]),l}unshift(n,...o){let s={path:""},a=Y(this,n,s),l=a.unshift(...o);return o.length&&wi(this,a,s.path,0,o.length,[]),l}notifyPath(n,o){let s;if(arguments.length==1){let a={path:""};o=Y(this,n,a),s=a.path}else Array.isArray(n)?s=br(n):s=n;this._setPendingPropertyOrPath(s,o,!0,!0)&&this._invalidateProperties()}_createReadOnlyProperty(n,o){this._addPropertyEffect(n,N.READ_ONLY),o&&(this["_set"+W0(n)]=function(s){this._setProperty(n,s)})}_createPropertyObserver(n,o,s){let a={property:n,method:o,dynamicFn:Boolean(s)};this._addPropertyEffect(n,N.OBSERVE,{fn:Zd,info:a,trigger:{name:n}}),s&&this._addPropertyEffect(o,N.OBSERVE,{fn:Zd,info:a,trigger:{name:o}})}_createMethodObserver(n,o){let s=Sl(n);if(!s)throw new Error("Malformed observer expression '"+n+"'");nh(this,s,N.OBSERVE,xl,null,o)}_createNotifyingProperty(n){this._addPropertyEffect(n,N.NOTIFY,{fn:b0,info:{eventName:wr(n)+"-changed",property:n}})}_createReflectedProperty(n){let o=this.constructor.attributeNameForProperty(n);o[0]==="-"?console.warn("Property "+n+" cannot be reflected to attribute "+o+' because "-" is not a valid starting attribute name. Use a lowercase first letter for the property instead.'):this._addPropertyEffect(n,N.REFLECT,{fn:w0,info:{attrName:o}})}_createComputedProperty(n,o,s){let a=Sl(o);if(!a)throw new Error("Malformed computed expression '"+o+"'");let l=nh(this,a,N.COMPUTE,rh,n,s);gl(this,Xd)[n]=l}_marshalArgs(n,o,s){let a=this.__data,l=[];for(let u=0,c=n.length;u<c;u++){let{name:p,structured:f,wildcard:h,value:d,literal:m}=n[u];if(!m)if(h){let y=gr(p,o),_=uh(a,s,y?o:p);d={path:y?o:p,value:_,base:y?Y(a,p):_}}else d=f?uh(a,s,p):a[p];if(mo&&!this._overrideLegacyUndefined&&d===void 0&&n.length>1)return bi;l[u]=d}return l}static addPropertyEffect(n,o,s){this.prototype._addPropertyEffect(n,o,s)}static createPropertyObserver(n,o,s){this.prototype._createPropertyObserver(n,o,s)}static createMethodObserver(n,o){this.prototype._createMethodObserver(n,o)}static createNotifyingProperty(n){this.prototype._createNotifyingProperty(n)}static createReadOnlyProperty(n,o){this.prototype._createReadOnlyProperty(n,o)}static createReflectedProperty(n){this.prototype._createReflectedProperty(n)}static createComputedProperty(n,o,s){this.prototype._createComputedProperty(n,o,s)}static bindTemplate(n){return this.prototype._bindTemplate(n)}_bindTemplate(n,o){let s=this.constructor._parseTemplate(n),a=this.__preBoundTemplateInfo==s;if(!a)for(let l in s.propertyEffects)this._createPropertyAccessor(l);if(o)if(s=Object.create(s),s.wasPreBound=a,!this.__templateInfo)this.__templateInfo=s;else{let l=n._parentTemplateInfo||this.__templateInfo,u=l.lastChild;s.parent=l,l.lastChild=s,s.previousSibling=u,u?u.nextSibling=s:l.firstChild=s}else this.__preBoundTemplateInfo=s;return s}static _addTemplatePropertyEffect(n,o,s){let a=n.hostProps=n.hostProps||{};a[o]=!0;let l=n.propertyEffects=n.propertyEffects||{};(l[o]=l[o]||[]).push(s)}_stampTemplate(n,o){o=o||this._bindTemplate(n,!0),Si.push(this);let s=super._stampTemplate(n,o);if(Si.pop(),o.nodeList=s.nodeList,!o.wasPreBound){let a=o.childNodes=[];for(let l=s.firstChild;l;l=l.nextSibling)a.push(l)}return s.templateInfo=o,R0(this,o),this.__dataClientsReady&&(this._runEffectsForTemplate(o,this.__data,null,!1),this._flushClients()),s}_removeBoundDom(n){let o=n.templateInfo,{previousSibling:s,nextSibling:a,parent:l}=o;s?s.nextSibling=a:l&&(l.firstChild=a),a?a.previousSibling=s:l&&(l.lastChild=s),o.nextSibling=o.previousSibling=null;let u=o.childNodes;for(let c=0;c<u.length;c++){let p=u[c];b(b(p).parentNode).removeChild(p)}}static _parseTemplateNode(n,o,s){let a=e._parseTemplateNode.call(this,n,o,s);if(n.nodeType===Node.TEXT_NODE){let l=this._parseBindings(n.textContent,o);l&&(n.textContent=lh(l)||" ",wl(this,o,s,"text","textContent",l),a=!0)}return a}static _parseTemplateNodeAttribute(n,o,s,a,l){let u=this._parseBindings(l,o);if(u){let c=a,p="property";y0.test(a)?p="attribute":a[a.length-1]=="$"&&(a=a.slice(0,-1),p="attribute");let f=lh(u);return f&&p=="attribute"&&(a=="class"&&n.hasAttribute("class")&&(f+=" "+n.getAttribute(a)),n.setAttribute(a,f)),p=="attribute"&&c=="disable-upgrade$"&&n.setAttribute(a,""),n.localName==="input"&&c==="value"&&n.setAttribute(c,""),n.removeAttribute(c),p==="property"&&(a=xr(a)),wl(this,o,s,p,a,u,f),!0}else return e._parseTemplateNodeAttribute.call(this,n,o,s,a,l)}static _parseTemplateNestedTemplate(n,o,s){let a=e._parseTemplateNestedTemplate.call(this,n,o,s),l=n.parentNode,u=s.templateInfo,c=l.localName==="dom-if",p=l.localName==="dom-repeat";fl&&(c||p)&&(l.removeChild(n),s=s.parentInfo,s.templateInfo=u,s.noted=!0,a=!1);let f=u.hostProps;if(yo&&c)f&&(o.hostProps=Object.assign(o.hostProps||{},f),fl||(s.parentInfo.noted=!0));else{let h="{";for(let d in f){let m=[{mode:h,source:d,dependencies:[d],hostProp:!0}];wl(this,o,s,"property","_host_"+d,m)}}return a}static _parseBindings(n,o){let s=[],a=0,l;for(;(l=ah.exec(n))!==null;){l.index>a&&s.push({literal:n.slice(a,l.index)});let u=l[1][0],c=Boolean(l[2]),p=l[3].trim(),f=!1,h="",d=-1;u=="{"&&(d=p.indexOf("::"))>0&&(h=p.substring(d+2),p=p.substring(0,d),f=!0);let m=Sl(p),y=[];if(m){let{args:_,methodName:w}=m;for(let C=0;C<_.length;C++){let E=_[C];E.literal||y.push(E)}let S=o.dynamicFns;(S&&S[w]||m.static)&&(y.push(w),m.dynamicFn=!0)}else y.push(p);s.push({source:p,mode:u,negate:c,customEvent:f,signature:m,dependencies:y,event:h}),a=ah.lastIndex}if(a&&a<n.length){let u=n.substring(a);u&&s.push({literal:u})}return s.length?s:null}static _evaluateBinding(n,o,s,a,l,u){let c;return o.signature?c=xl(n,s,a,l,o.signature):s!=o.source?c=Y(n,o.source):u&&_o(s)?c=Y(n,s):c=n.__data[s],o.negate&&(c=!c),c}}return r}),Si=[];var Y0=0;function ph(){Y0++}var J0=[];function So(t){J0.push(t)}function X0(t){let e={};for(let r in t){let i=t[r];e[r]=typeof i=="function"?{type:i}:i}return e}var fh=V(t=>{let e=bo(t);function r(o){let s=Object.getPrototypeOf(o);return s.prototype instanceof n?s:null}function i(o){if(!o.hasOwnProperty(JSCompiler_renameProperty("__ownProperties",o))){let s=null;if(o.hasOwnProperty(JSCompiler_renameProperty("properties",o))){let a=o.properties;a&&(s=X0(a))}o.__ownProperties=s}return o.__ownProperties}class n extends e{static get observedAttributes(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))){So(this.prototype);let s=this._properties;this.__observedAttributes=s?Object.keys(s).map(a=>this.prototype._addPropertyToAttributeMap(a)):[]}return this.__observedAttributes}static finalize(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__finalized",this))){let s=r(this);s&&s.finalize(),this.__finalized=!0,this._finalizeClass()}}static _finalizeClass(){let s=i(this);s&&this.createProperties(s)}static get _properties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("__properties",this))){let s=r(this);this.__properties=Object.assign({},s&&s._properties,i(this))}return this.__properties}static typeForProperty(s){let a=this._properties[s];return a&&a.type}_initializeProperties(){ph(),this.constructor.finalize(),super._initializeProperties()}connectedCallback(){super.connectedCallback&&super.connectedCallback(),this._enableProperties()}disconnectedCallback(){super.disconnectedCallback&&super.disconnectedCallback()}}return n});var dh="3.4.1",Eo=window.ShadyCSS&&window.ShadyCSS.cssBuild,ut=V(t=>{let e=fh(Dt(t));function r(l){if(!l.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",l))){l.__propertyDefaults=null;let u=l._properties;for(let c in u){let p=u[c];"value"in p&&(l.__propertyDefaults=l.__propertyDefaults||{},l.__propertyDefaults[c]=p)}}return l.__propertyDefaults}function i(l){return l.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",l))||(l.__ownObservers=l.hasOwnProperty(JSCompiler_renameProperty("observers",l))?l.observers:null),l.__ownObservers}function n(l,u,c,p){c.computed&&(c.readOnly=!0),c.computed&&(l._hasReadOnlyEffect(u)?console.warn(`Cannot redefine computed property '${u}'.`):l._createComputedProperty(u,c.computed,p)),c.readOnly&&!l._hasReadOnlyEffect(u)?l._createReadOnlyProperty(u,!c.computed):c.readOnly===!1&&l._hasReadOnlyEffect(u)&&console.warn(`Cannot make readOnly property '${u}' non-readOnly.`),c.reflectToAttribute&&!l._hasReflectEffect(u)?l._createReflectedProperty(u):c.reflectToAttribute===!1&&l._hasReflectEffect(u)&&console.warn(`Cannot make reflected property '${u}' non-reflected.`),c.notify&&!l._hasNotifyEffect(u)?l._createNotifyingProperty(u):c.notify===!1&&l._hasNotifyEffect(u)&&console.warn(`Cannot make notify property '${u}' non-notify.`),c.observer&&l._createPropertyObserver(u,c.observer,p[c.observer]),l._addPropertyToAttributeMap(u)}function o(l,u,c,p){if(!Eo){let f=u.content.querySelectorAll("style"),h=vo(u),d=qd(c),m=u.content.firstElementChild;for(let _=0;_<d.length;_++){let w=d[_];w.textContent=l._processStyleText(w.textContent,p),u.content.insertBefore(w,m)}let y=0;for(let _=0;_<h.length;_++){let w=h[_],S=f[y];S!==w?(w=w.cloneNode(!0),S.parentNode.insertBefore(w,S)):y++,w.textContent=l._processStyleText(w.textContent,p)}}if(window.ShadyCSS&&window.ShadyCSS.prepareTemplate(u,c),Md&&Eo&&Pd){let f=u.content.querySelectorAll("style");if(f){let h="";Array.from(f).forEach(d=>{h+=d.textContent,d.parentNode.removeChild(d)}),l._styleSheet=new CSSStyleSheet,l._styleSheet.replaceSync(h)}}}function s(l){let u=null;if(l&&(!be||Dd)&&(u=at.import(l,"template"),be&&!u))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${l}`);return u}class a extends e{static get polymerElementVersion(){return dh}static _finalizeClass(){e._finalizeClass.call(this);let u=i(this);u&&this.createObservers(u,this._properties),this._prepareTemplate()}static _prepareTemplate(){let u=this.template;u&&(typeof u=="string"?(console.error("template getter must return HTMLTemplateElement"),u=null):ze||(u=u.cloneNode(!0))),this.prototype._template=u}static createProperties(u){for(let c in u)n(this.prototype,c,u[c],u)}static createObservers(u,c){let p=this.prototype;for(let f=0;f<u.length;f++)p._createMethodObserver(u[f],c)}static get template(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_template",this))){let u=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:void 0;this._template=u!==void 0?u:this.hasOwnProperty(JSCompiler_renameProperty("is",this))&&s(this.is)||Object.getPrototypeOf(this.prototype).constructor.template}return this._template}static set template(u){this._template=u}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){let u=this.importMeta;if(u)this._importPath=_r(u.url);else{let c=at.import(this.is);this._importPath=c&&c.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super();this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=kd,this.importPath=this.constructor.importPath;let u=r(this.constructor);if(!!u)for(let c in u){let p=u[c];if(this._canApplyPropertyDefault(c)){let f=typeof p.value=="function"?p.value.call(this):p.value;this._hasAccessor(c)?this._setPendingProperty(c,f,!0):this[c]=f}}}_canApplyPropertyDefault(u){return!this.hasOwnProperty(u)}static _processStyleText(u,c){return mi(u,c)}static _finalizeTemplate(u){let c=this.prototype._template;if(c&&!c.__polymerFinalized){c.__polymerFinalized=!0;let p=this.importPath,f=p?kt(p):"";o(this,c,u,f),this.prototype._bindTemplate(c)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(u){let c=b(this);if(c.attachShadow)return u?(c.shadowRoot||(c.attachShadow({mode:"open",shadyUpgradeFragment:u}),c.shadowRoot.appendChild(u),this.constructor._styleSheet&&(c.shadowRoot.adoptedStyleSheets=[this.constructor._styleSheet])),Nd&&window.ShadyDOM&&window.ShadyDOM.flushInitial(c.shadowRoot),c.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(u){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,u)}resolveUrl(u,c){return!c&&this.importPath&&(c=kt(this.importPath)),kt(u,c)}static _parseTemplateContent(u,c,p){return c.dynamicFns=c.dynamicFns||this._properties,e._parseTemplateContent.call(this,u,c,p)}static _addTemplatePropertyEffect(u,c,p){return ho&&!(c in this._properties)&&!(p.info.part.signature&&p.info.part.signature.static)&&!p.info.part.hostProp&&!u.nestedTemplate&&console.warn(`Property '${c}' used in template but not declared in 'properties'; attribute will not be observed.`),e._addTemplatePropertyEffect.call(this,u,c,p)}}return a});var El=class{constructor(e){this.value=e.toString()}toString(){return this.value}};function Z0(t){if(t instanceof El)return t.value;throw new Error(`non-literal value passed to Polymer's htmlLiteral function: ${t}`)}function ex(t){if(t instanceof HTMLTemplateElement)return t.innerHTML;if(t instanceof El)return Z0(t);throw new Error(`non-template value passed to Polymer's html function: ${t}`)}var I=function(e,...r){let i=document.createElement("template");return i.innerHTML=r.reduce((n,o,s)=>n+ex(o)+e[s+1],e[0]),i};var he=ut(HTMLElement);var me=class{constructor(){this._asyncModule=null,this._callback=null,this._timer=null}setConfig(e,r){this._asyncModule=e,this._callback=r,this._timer=this._asyncModule.run(()=>{this._timer=null,Ei.delete(this),this._callback()})}cancel(){this.isActive()&&(this._cancelAsync(),Ei.delete(this))}_cancelAsync(){this.isActive()&&(this._asyncModule.cancel(this._timer),this._timer=null)}flush(){this.isActive()&&(this.cancel(),this._callback())}isActive(){return this._timer!=null}static debounce(e,r,i){return e instanceof me?e._cancelAsync():e=new me,e.setConfig(r,i),e}},Ei=new Set,Er=function(t){Ei.add(t)},hh=function(){let t=Boolean(Ei.size);return Ei.forEach(e=>{try{e.flush()}catch(r){setTimeout(()=>{throw r})}}),t};var Tl=typeof document.head.style.touchAction=="string",To="__polymerGestures",Co="__polymerGesturesHandled",Cl="__polymerGesturesTouchAction",mh=25,yh=5,tx=2,rx=2500,vh=["mousedown","mousemove","mouseup","click"],ix=[0,1,4,2],nx=function(){try{return new MouseEvent("test",{buttons:1}).buttons===1}catch(t){return!1}}();function Ol(t){return vh.indexOf(t)>-1}var Pl=!1;(function(){try{let t=Object.defineProperty({},"passive",{get(){Pl=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){}})();function _h(t){if(!(Ol(t)||t==="touchend")&&Tl&&Pl&&Ad)return{passive:!0}}var gh=navigator.userAgent.match(/iP(?:[oa]d|hone)|Android/),kl=[],ox={button:!0,input:!0,keygen:!0,meter:!0,output:!0,textarea:!0,progress:!0,select:!0},sx={button:!0,command:!0,fieldset:!0,input:!0,keygen:!0,optgroup:!0,option:!0,select:!0,textarea:!0};function ax(t){return ox[t.localName]||!1}function lx(t){let e=Array.prototype.slice.call(t.labels||[]);if(!e.length){e=[];let r=t.getRootNode();if(t.id){let i=r.querySelectorAll(`label[for = ${t.id}]`);for(let n=0;n<i.length;n++)e.push(i[n])}}return e}var bh=function(t){let e=t.sourceCapabilities;if(!(e&&!e.firesTouchEvents)&&(t[Co]={skip:!0},t.type==="click")){let r=!1,i=Oo(t);for(let n=0;n<i.length;n++){if(i[n].nodeType===Node.ELEMENT_NODE){if(i[n].localName==="label")kl.push(i[n]);else if(ax(i[n])){let o=lx(i[n]);for(let s=0;s<o.length;s++)r=r||kl.indexOf(o[s])>-1}}if(i[n]===X.mouse.target)return}if(r)return;t.preventDefault(),t.stopPropagation()}};function xh(t){let e=gh?["click"]:vh;for(let r=0,i;r<e.length;r++)i=e[r],t?(kl.length=0,document.addEventListener(i,bh,!0)):document.removeEventListener(i,bh,!0)}function ux(t){if(!pl)return;X.mouse.mouseIgnoreJob||xh(!0);let e=function(){xh(),X.mouse.target=null,X.mouse.mouseIgnoreJob=null};X.mouse.target=Oo(t)[0],X.mouse.mouseIgnoreJob=me.debounce(X.mouse.mouseIgnoreJob,lt.after(rx),e)}function Nt(t){let e=t.type;if(!Ol(e))return!1;if(e==="mousemove"){let r=t.buttons===void 0?1:t.buttons;return t instanceof window.MouseEvent&&!nx&&(r=ix[t.which]||0),Boolean(r&1)}else return(t.button===void 0?0:t.button)===0}function cx(t){if(t.type==="click"){if(t.detail===0)return!0;let e=ct(t);if(!e.nodeType||e.nodeType!==Node.ELEMENT_NODE)return!0;let r=e.getBoundingClientRect(),i=t.pageX,n=t.pageY;return!(i>=r.left&&i<=r.right&&n>=r.top&&n<=r.bottom)}return!1}var X={mouse:{target:null,mouseIgnoreJob:null},touch:{x:0,y:0,id:-1,scrollDecided:!1}};function px(t){let e="auto",r=Oo(t);for(let i=0,n;i<r.length;i++)if(n=r[i],n[Cl]){e=n[Cl];break}return e}function wh(t,e,r){t.movefn=e,t.upfn=r,document.addEventListener("mousemove",e),document.addEventListener("mouseup",r)}function Tr(t){document.removeEventListener("mousemove",t.movefn),document.removeEventListener("mouseup",t.upfn),t.movefn=null,t.upfn=null}pl&&document.addEventListener("touchend",ux,Pl?{passive:!0}:!1);var Oo=window.ShadyDOM&&window.ShadyDOM.noPatch?window.ShadyDOM.composedPath:t=>t.composedPath&&t.composedPath()||[],Ti={},It=[];function fx(t,e){let r=document.elementFromPoint(t,e),i=r;for(;i&&i.shadowRoot&&!window.ShadyDOM;){let n=i;if(i=i.shadowRoot.elementFromPoint(t,e),n===i)break;i&&(r=i)}return r}function ct(t){let e=Oo(t);return e.length>0?e[0]:t.target}function Sh(t){let e,r=t.type,n=t.currentTarget[To];if(!n)return;let o=n[r];if(!!o){if(!t[Co]&&(t[Co]={},r.slice(0,5)==="touch")){t=t;let s=t.changedTouches[0];if(r==="touchstart"&&t.touches.length===1&&(X.touch.id=s.identifier),X.touch.id!==s.identifier)return;Tl||(r==="touchstart"||r==="touchmove")&&dx(t)}if(e=t[Co],!e.skip){for(let s=0,a;s<It.length;s++)a=It[s],o[a.name]&&!e[a.name]&&a.flow&&a.flow.start.indexOf(t.type)>-1&&a.reset&&a.reset();for(let s=0,a;s<It.length;s++)a=It[s],o[a.name]&&!e[a.name]&&(e[a.name]=!0,a[r](t))}}}function dx(t){let e=t.changedTouches[0],r=t.type;if(r==="touchstart")X.touch.x=e.clientX,X.touch.y=e.clientY,X.touch.scrollDecided=!1;else if(r==="touchmove"){if(X.touch.scrollDecided)return;X.touch.scrollDecided=!0;let i=px(t),n=!1,o=Math.abs(X.touch.x-e.clientX),s=Math.abs(X.touch.y-e.clientY);t.cancelable&&(i==="none"?n=!0:i==="pan-x"?n=s>o:i==="pan-y"&&(n=o>s)),n?t.preventDefault():Po("track")}}function Eh(t,e,r){return Ti[e]?(hx(t,e,r),!0):!1}function Th(t,e,r){return Ti[e]?(mx(t,e,r),!0):!1}function hx(t,e,r){let i=Ti[e],n=i.deps,o=i.name,s=t[To];s||(t[To]=s={});for(let a=0,l,u;a<n.length;a++)l=n[a],!(gh&&Ol(l)&&l!=="click")&&(u=s[l],u||(s[l]=u={_count:0}),u._count===0&&t.addEventListener(l,Sh,_h(l)),u[o]=(u[o]||0)+1,u._count=(u._count||0)+1);t.addEventListener(e,r),i.touchAction&&Al(t,i.touchAction)}function mx(t,e,r){let i=Ti[e],n=i.deps,o=i.name,s=t[To];if(s)for(let a=0,l,u;a<n.length;a++)l=n[a],u=s[l],u&&u[o]&&(u[o]=(u[o]||1)-1,u._count=(u._count||1)-1,u._count===0&&t.removeEventListener(l,Sh,_h(l)));t.removeEventListener(e,r)}function Dl(t){It.push(t);for(let e=0;e<t.emits.length;e++)Ti[t.emits[e]]=t}function yx(t){for(let e=0,r;e<It.length;e++){r=It[e];for(let i=0,n;i<r.emits.length;i++)if(n=r.emits[i],n===t)return r}return null}function Al(t,e){Tl&&t instanceof HTMLElement&&se.run(()=>{t.style.touchAction=e}),t[Cl]=e}function Nl(t,e,r){let i=new Event(e,{bubbles:!0,cancelable:!0,composed:!0});if(i.detail=r,b(t).dispatchEvent(i),i.defaultPrevented){let n=r.preventer||r.sourceEvent;n&&n.preventDefault&&n.preventDefault()}}function Po(t){let e=yx(t);e.info&&(e.info.prevent=!0)}Dl({name:"downup",deps:["mousedown","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["down","up"],info:{movefn:null,upfn:null},reset:function(){Tr(this.info)},mousedown:function(t){if(!Nt(t))return;let e=ct(t),r=this,i=function(s){Nt(s)||(Ci("up",e,s),Tr(r.info))},n=function(s){Nt(s)&&Ci("up",e,s),Tr(r.info)};wh(this.info,i,n),Ci("down",e,t)},touchstart:function(t){Ci("down",ct(t),t.changedTouches[0],t)},touchend:function(t){Ci("up",ct(t),t.changedTouches[0],t)}});function Ci(t,e,r,i){!e||Nl(e,t,{x:r.clientX,y:r.clientY,sourceEvent:r,preventer:i,prevent:function(n){return Po(n)}})}Dl({name:"track",touchAction:"none",deps:["mousedown","touchstart","touchmove","touchend"],flow:{start:["mousedown","touchstart"],end:["mouseup","touchend"]},emits:["track"],info:{x:0,y:0,state:"start",started:!1,moves:[],addMove:function(t){this.moves.length>tx&&this.moves.shift(),this.moves.push(t)},movefn:null,upfn:null,prevent:!1},reset:function(){this.info.state="start",this.info.started=!1,this.info.moves=[],this.info.x=0,this.info.y=0,this.info.prevent=!1,Tr(this.info)},mousedown:function(t){if(!Nt(t))return;let e=ct(t),r=this,i=function(s){let a=s.clientX,l=s.clientY;Ch(r.info,a,l)&&(r.info.state=r.info.started?s.type==="mouseup"?"end":"track":"start",r.info.state==="start"&&Po("tap"),r.info.addMove({x:a,y:l}),Nt(s)||(r.info.state="end",Tr(r.info)),e&&Il(r.info,e,s),r.info.started=!0)},n=function(s){r.info.started&&i(s),Tr(r.info)};wh(this.info,i,n),this.info.x=t.clientX,this.info.y=t.clientY},touchstart:function(t){let e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchmove:function(t){let e=ct(t),r=t.changedTouches[0],i=r.clientX,n=r.clientY;Ch(this.info,i,n)&&(this.info.state==="start"&&Po("tap"),this.info.addMove({x:i,y:n}),Il(this.info,e,r),this.info.state="track",this.info.started=!0)},touchend:function(t){let e=ct(t),r=t.changedTouches[0];this.info.started&&(this.info.state="end",this.info.addMove({x:r.clientX,y:r.clientY}),Il(this.info,e,r))}});function Ch(t,e,r){if(t.prevent)return!1;if(t.started)return!0;let i=Math.abs(t.x-e),n=Math.abs(t.y-r);return i>=yh||n>=yh}function Il(t,e,r){if(!e)return;let i=t.moves[t.moves.length-2],n=t.moves[t.moves.length-1],o=n.x-t.x,s=n.y-t.y,a,l=0;i&&(a=n.x-i.x,l=n.y-i.y),Nl(e,"track",{state:t.state,x:r.clientX,y:r.clientY,dx:o,dy:s,ddx:a,ddy:l,sourceEvent:r,hover:function(){return fx(r.clientX,r.clientY)}})}Dl({name:"tap",deps:["mousedown","click","touchstart","touchend"],flow:{start:["mousedown","touchstart"],end:["click","touchend"]},emits:["tap"],info:{x:NaN,y:NaN,prevent:!1},reset:function(){this.info.x=NaN,this.info.y=NaN,this.info.prevent=!1},mousedown:function(t){Nt(t)&&(this.info.x=t.clientX,this.info.y=t.clientY)},click:function(t){Nt(t)&&Oh(this.info,t)},touchstart:function(t){let e=t.changedTouches[0];this.info.x=e.clientX,this.info.y=e.clientY},touchend:function(t){Oh(this.info,t.changedTouches[0],t)}});function Oh(t,e,r){let i=Math.abs(e.clientX-t.x),n=Math.abs(e.clientY-t.y),o=ct(r||e);!o||sx[o.localName]&&o.hasAttribute("disabled")||(isNaN(i)||isNaN(n)||i<=mh&&n<=mh||cx(e))&&(t.prevent||Nl(o,"tap",{x:e.clientX,y:e.clientY,sourceEvent:e,preventer:r}))}var Cr=V(t=>{class e extends t{_addEventListenerToNode(i,n,o){Eh(i,n,o)||super._addEventListenerToNode(i,n,o)}_removeEventListenerFromNode(i,n,o){Th(i,n,o)||super._removeEventListenerFromNode(i,n,o)}}return e});"use strict";var Mt=!(window.ShadyDOM&&window.ShadyDOM.inUse),ko;function Ph(t){t&&t.shimcssproperties?ko=!1:ko=Mt||Boolean(!navigator.userAgent.match(/AppleWebKit\/601|Edge\/15/)&&window.CSS&&CSS.supports&&CSS.supports("box-shadow","0 0 0 var(--foo)"))}var pt;window.ShadyCSS&&window.ShadyCSS.cssBuild!==void 0&&(pt=window.ShadyCSS.cssBuild);var Ao=Boolean(window.ShadyCSS&&window.ShadyCSS.disableRuntime);window.ShadyCSS&&window.ShadyCSS.nativeCss!==void 0?ko=window.ShadyCSS.nativeCss:window.ShadyCSS?(Ph(window.ShadyCSS),window.ShadyCSS=void 0):Ph(window.WebComponents&&window.WebComponents.flags);var Or=ko;"use strict";var Ml=class{constructor(){this.start=0,this.end=0,this.previous=null,this.parent=null,this.rules=null,this.parsedCssText="",this.cssText="",this.atRule=!1,this.type=0,this.keyframesName="",this.selector="",this.parsedSelector=""}};function Rl(t){return t=vx(t),kh(_x(t),t)}function vx(t){return t.replace($e.comments,"").replace($e.port,"")}function _x(t){let e=new Ml;e.start=0,e.end=t.length;let r=e;for(let i=0,n=t.length;i<n;i++)if(t[i]===Ah){r.rules||(r.rules=[]);let o=r,s=o.rules[o.rules.length-1]||null;r=new Ml,r.start=i+1,r.parent=o,r.previous=s,o.rules.push(r)}else t[i]===Dh&&(r.end=i+1,r=r.parent||e);return e}function kh(t,e){let r=e.substring(t.start,t.end-1);if(t.parsedCssText=t.cssText=r.trim(),t.parent){let n=t.previous?t.previous.end:t.parent.start;r=e.substring(n,t.start-1),r=gx(r),r=r.replace($e.multipleSpaces," "),r=r.substring(r.lastIndexOf(";")+1);let o=t.parsedSelector=t.selector=r.trim();t.atRule=o.indexOf(xx)===0,t.atRule?o.indexOf(bx)===0?t.type=Ge.MEDIA_RULE:o.match($e.keyframesRule)&&(t.type=Ge.KEYFRAMES_RULE,t.keyframesName=t.selector.split($e.multipleSpaces).pop()):o.indexOf(Nh)===0?t.type=Ge.MIXIN_RULE:t.type=Ge.STYLE_RULE}let i=t.rules;if(i)for(let n=0,o=i.length,s;n<o&&(s=i[n]);n++)kh(s,e);return t}function gx(t){return t.replace(/\\([0-9a-f]{1,6})\s/gi,function(){let e=arguments[1],r=6-e.length;for(;r--;)e="0"+e;return"\\"+e})}function jl(t,e,r=""){let i="";if(t.cssText||t.rules){let n=t.rules;if(n&&!wx(n))for(let o=0,s=n.length,a;o<s&&(a=n[o]);o++)i=jl(a,e,i);else i=e?t.cssText:Sx(t.cssText),i=i.trim(),i&&(i="  "+i+`
`)}return i&&(t.selector&&(r+=t.selector+" "+Ah+`
`),r+=i,t.selector&&(r+=Dh+`

`)),r}function wx(t){let e=t[0];return Boolean(e)&&Boolean(e.selector)&&e.selector.indexOf(Nh)===0}function Sx(t){return t=Ex(t),Tx(t)}function Ex(t){return t.replace($e.customProp,"").replace($e.mixinProp,"")}function Tx(t){return t.replace($e.mixinApply,"").replace($e.varApply,"")}var Ge={STYLE_RULE:1,KEYFRAMES_RULE:7,MEDIA_RULE:4,MIXIN_RULE:1e3},Ah="{",Dh="}",$e={comments:/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,port:/@import[^;]*;/gim,customProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?(?:[;\n]|$)/gim,mixinProp:/(?:^[^;\-\s}]+)?--[^;{}]*?:[^{};]*?{[^}]*?}(?:[;\n]|$)?/gim,mixinApply:/@apply\s*\(?[^);]*\)?\s*(?:[;\n]|$)?/gim,varApply:/[^;:]*?:[^;]*?var\([^;]*\)(?:[;\n]|$)?/gim,keyframesRule:/^@[^\s]*keyframes/,multipleSpaces:/\s+/g},Nh="--",bx="@media",xx="@";var Oi=/(?:^|[;\s{]\s*)(--[\w-]*?)\s*:\s*(?:((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};{])+)|\{([^}]*)\}(?:(?=[;\s}])|$))/gi,Pr=/(?:^|\W+)@apply\s*\(?([^);\n]*)\)?/gi;var Ih=/@media\s(.*)/;"use strict";var Mh=new Set,Cx="shady-unscoped";function Rh(t){let e=t.textContent;if(!Mh.has(e)){Mh.add(e);let r=document.createElement("style");r.setAttribute("shady-unscoped",""),r.textContent=e,document.head.appendChild(r)}}function jh(t){return t.hasAttribute(Cx)}"use strict";function Pi(t,e){return t?(typeof t=="string"&&(t=Rl(t)),e&&kr(t,e),jl(t,Or)):""}function Fl(t){return!t.__cssRules&&t.textContent&&(t.__cssRules=Rl(t.textContent)),t.__cssRules||null}function kr(t,e,r,i){if(!t)return;let n=!1,o=t.type;if(i&&o===Ge.MEDIA_RULE){let a=t.selector.match(Ih);a&&(window.matchMedia(a[1]).matches||(n=!0))}o===Ge.STYLE_RULE?e(t):r&&o===Ge.KEYFRAMES_RULE?r(t):o===Ge.MIXIN_RULE&&(n=!0);let s=t.rules;if(s&&!n)for(let a=0,l=s.length,u;a<l&&(u=s[a]);a++)kr(u,e,r,i)}function Ox(t,e){let r=0;for(let i=e,n=t.length;i<n;i++)if(t[i]==="(")r++;else if(t[i]===")"&&--r==0)return i;return-1}function Ll(t,e){let r=t.indexOf("var(");if(r===-1)return e(t,"","","");let i=Ox(t,r+3),n=t.substring(r+4,i),o=t.substring(0,r),s=Ll(t.substring(i+1),e),a=n.indexOf(",");if(a===-1)return e(o,n.trim(),"",s);let l=n.substring(0,a).trim(),u=n.substring(a+1).trim();return e(o,l,u,s)}var ZR=window.ShadyDOM&&window.ShadyDOM.wrap||(t=>t);function Fh(t){let e=t.localName,r="",i="";return e?e.indexOf("-")>-1?r=e:(i=e,r=t.getAttribute&&t.getAttribute("is")||""):(r=t.is,i=t.extends),{is:r,typeExtension:i}}function Lh(t){let e=[],r=t.querySelectorAll("style");for(let i=0;i<r.length;i++){let n=r[i];jh(n)?Mt||(Rh(n),n.parentNode.removeChild(n)):(e.push(n.textContent),n.parentNode.removeChild(n))}return e.join("").trim()}var Vh="css-build";function Ax(t){if(pt!==void 0)return pt;if(t.__cssBuild===void 0){let e=t.getAttribute(Vh);if(e)t.__cssBuild=e;else{let r=Px(t);r!==""&&kx(t),t.__cssBuild=r}}return t.__cssBuild||""}function Vl(t){return Ax(t)!==""}function Px(t){let e=t.localName==="template"?t.content.firstChild:t.firstChild;if(e instanceof Comment){let r=e.textContent.trim().split(":");if(r[0]===Vh)return r[1]}return""}function kx(t){let e=t.localName==="template"?t.content.firstChild:t.firstChild;e.parentNode.removeChild(e)}"use strict";function ki(t,e){for(let r in e)r===null?t.style.removeProperty(r):t.style.setProperty(r,e[r])}function Do(t,e){let r=window.getComputedStyle(t).getPropertyValue(e);return r?r.trim():""}function Bh(t){let e=Pr.test(t)||Oi.test(t);return Pr.lastIndex=0,Oi.lastIndex=0,e}"use strict";var Dx=/;\s*/m,Nx=/^\s*(initial)|(inherit)\s*$/,qh=/\s*!important/,Bl="_-_";var Uh=class{constructor(){this._map={}}set(e,r){e=e.trim(),this._map[e]={properties:r,dependants:{}}}get(e){return e=e.trim(),this._map[e]||null}},No=null,Z=class{constructor(){this._currentElement=null,this._measureElement=null,this._map=new Uh}detectMixin(e){return Bh(e)}gatherStyles(e){let r=Lh(e.content);if(r){let i=document.createElement("style");return i.textContent=r,e.content.insertBefore(i,e.content.firstChild),i}return null}transformTemplate(e,r){e._gatheredStyle===void 0&&(e._gatheredStyle=this.gatherStyles(e));let i=e._gatheredStyle;return i?this.transformStyle(i,r):null}transformStyle(e,r=""){let i=Fl(e);return this.transformRules(i,r),e.textContent=Pi(i),i}transformCustomStyle(e){let r=Fl(e);return kr(r,i=>{i.selector===":root"&&(i.selector="html"),this.transformRule(i)}),e.textContent=Pi(r),r}transformRules(e,r){this._currentElement=r,kr(e,i=>{this.transformRule(i)}),this._currentElement=null}transformRule(e){e.cssText=this.transformCssText(e.parsedCssText,e),e.selector===":root"&&(e.selector=":host > *")}transformCssText(e,r){return e=e.replace(Oi,(i,n,o,s)=>this._produceCssProperties(i,n,o,s,r)),this._consumeCssProperties(e,r)}_getInitialValueForProperty(e){return this._measureElement||(this._measureElement=document.createElement("meta"),this._measureElement.setAttribute("apply-shim-measure",""),this._measureElement.style.all="initial",document.head.appendChild(this._measureElement)),window.getComputedStyle(this._measureElement).getPropertyValue(e)}_fallbacksFromPreviousRules(e){let r=e;for(;r.parent;)r=r.parent;let i={},n=!1;return kr(r,o=>{n=n||o===e,!n&&o.selector===e.selector&&Object.assign(i,this._cssTextToMap(o.parsedCssText))}),i}_consumeCssProperties(e,r){let i=null;for(;i=Pr.exec(e);){let n=i[0],o=i[1],s=i.index,a=s+n.indexOf("@apply"),l=s+n.length,u=e.slice(0,a),c=e.slice(l),p=r?this._fallbacksFromPreviousRules(r):{};Object.assign(p,this._cssTextToMap(u));let f=this._atApplyToCssProperties(o,p);e=`${u}${f}${c}`,Pr.lastIndex=s+f.length}return e}_atApplyToCssProperties(e,r){e=e.replace(Dx,"");let i=[],n=this._map.get(e);if(n||(this._map.set(e,{}),n=this._map.get(e)),n){this._currentElement&&(n.dependants[this._currentElement]=!0);let o,s,a,l=n.properties;for(o in l)a=r&&r[o],s=[o,": var(",e,Bl,o],a&&s.push(",",a.replace(qh,"")),s.push(")"),qh.test(l[o])&&s.push(" !important"),i.push(s.join(""))}return i.join("; ")}_replaceInitialOrInherit(e,r){let i=Nx.exec(r);return i&&(i[1]?r=this._getInitialValueForProperty(e):r="apply-shim-inherit"),r}_cssTextToMap(e,r=!1){let i=e.split(";"),n,o,s={};for(let a=0,l,u;a<i.length;a++)l=i[a],l&&(u=l.split(":"),u.length>1&&(n=u[0].trim(),o=u.slice(1).join(":"),r&&(o=this._replaceInitialOrInherit(n,o)),s[n]=o));return s}_invalidateMixinEntry(e){if(!!No)for(let r in e.dependants)r!==this._currentElement&&No(r)}_produceCssProperties(e,r,i,n,o){if(i&&Ll(i,(y,_)=>{_&&this._map.get(_)&&(n=`@apply ${_};`)}),!n)return e;let s=this._consumeCssProperties(""+n,o),a=e.slice(0,e.indexOf("--")),l=this._cssTextToMap(s,!0),u=l,c=this._map.get(r),p=c&&c.properties;p?u=Object.assign(Object.create(p),l):this._map.set(r,u);let f=[],h,d,m=!1;for(h in u)d=l[h],d===void 0&&(d="initial"),p&&!(h in p)&&(m=!0),f.push(`${r}${Bl}${h}: ${d}`);return m&&this._invalidateMixinEntry(c),c&&(c.properties=u),i&&(a=`${e};${a}`),`${a}${f.join("; ")};`}};Z.prototype.detectMixin=Z.prototype.detectMixin;Z.prototype.transformStyle=Z.prototype.transformStyle;Z.prototype.transformCustomStyle=Z.prototype.transformCustomStyle;Z.prototype.transformRules=Z.prototype.transformRules;Z.prototype.transformRule=Z.prototype.transformRule;Z.prototype.transformTemplate=Z.prototype.transformTemplate;Z.prototype._separator=Bl;Object.defineProperty(Z.prototype,"invalidCallback",{get(){return No},set(t){No=t}});var Hh=Z;"use strict";var Ix={},Ai=Ix;"use strict";var Io="_applyShimCurrentVersion",Ar="_applyShimNextVersion",Mo="_applyShimValidatingVersion",Mx=Promise.resolve();function Kh(t){let e=Ai[t];e&&Rx(e)}function Rx(t){t[Io]=t[Io]||0,t[Mo]=t[Mo]||0,t[Ar]=(t[Ar]||0)+1}function ql(t){return t[Io]===t[Ar]}function Qh(t){return!ql(t)&&t[Mo]===t[Ar]}function zh(t){t[Mo]=t[Ar],t._validating||(t._validating=!0,Mx.then(function(){t[Io]=t[Ar],t._validating=!1}))}"use strict";var Ul=null,$h=window.HTMLImports&&window.HTMLImports.whenReady||null,Hl;function Ro(t){requestAnimationFrame(function(){$h?$h(t):(Ul||(Ul=new Promise(e=>{Hl=e}),document.readyState==="complete"?Hl():document.addEventListener("readystatechange",()=>{document.readyState==="complete"&&Hl()})),Ul.then(function(){t&&t()}))})}"use strict";var Gh="__seenByShadyCSS",jo="__shadyCSSCachedStyle",Fo=null,Di=null,Oe=class{constructor(){this.customStyles=[],this.enqueued=!1,Ro(()=>{window.ShadyCSS.flushCustomStyles&&window.ShadyCSS.flushCustomStyles()})}enqueueDocumentValidation(){this.enqueued||!Di||(this.enqueued=!0,Ro(Di))}addCustomStyle(e){e[Gh]||(e[Gh]=!0,this.customStyles.push(e),this.enqueueDocumentValidation())}getStyleForCustomStyle(e){if(e[jo])return e[jo];let r;return e.getStyle?r=e.getStyle():r=e,r}processStyles(){let e=this.customStyles;for(let r=0;r<e.length;r++){let i=e[r];if(i[jo])continue;let n=this.getStyleForCustomStyle(i);if(n){let o=n.__appliedElement||n;Fo&&Fo(o),i[jo]=o}}return e}},Wh=Oe;Oe.prototype.addCustomStyle=Oe.prototype.addCustomStyle;Oe.prototype.getStyleForCustomStyle=Oe.prototype.getStyleForCustomStyle;Oe.prototype.processStyles=Oe.prototype.processStyles;Object.defineProperties(Oe.prototype,{transformCallback:{get(){return Fo},set(t){Fo=t}},validateCallback:{get(){return Di},set(t){let e=!1;Di||(e=!0),Di=t,e&&this.enqueueDocumentValidation()}}});"use strict";var Ni=new Hh,Yh=class{constructor(){this.customStyleInterface=null,Ni.invalidCallback=Kh}ensure(){this.customStyleInterface||window.ShadyCSS.CustomStyleInterface&&(this.customStyleInterface=window.ShadyCSS.CustomStyleInterface,this.customStyleInterface.transformCallback=e=>{Ni.transformCustomStyle(e)},this.customStyleInterface.validateCallback=()=>{requestAnimationFrame(()=>{this.customStyleInterface.enqueued&&this.flushCustomStyles()})})}prepareTemplate(e,r){if(this.ensure(),Vl(e))return;Ai[r]=e;let i=Ni.transformTemplate(e,r);e._styleAst=i}flushCustomStyles(){if(this.ensure(),!this.customStyleInterface)return;let e=this.customStyleInterface.processStyles();if(!!this.customStyleInterface.enqueued){for(let r=0;r<e.length;r++){let i=e[r],n=this.customStyleInterface.getStyleForCustomStyle(i);n&&Ni.transformCustomStyle(n)}this.customStyleInterface.enqueued=!1}}styleSubtree(e,r){if(this.ensure(),r&&ki(e,r),e.shadowRoot){this.styleElement(e);let i=e.shadowRoot.children||e.shadowRoot.childNodes;for(let n=0;n<i.length;n++)this.styleSubtree(i[n])}else{let i=e.children||e.childNodes;for(let n=0;n<i.length;n++)this.styleSubtree(i[n])}}styleElement(e){this.ensure();let{is:r}=Fh(e),i=Ai[r];if(!(i&&Vl(i))&&i&&!ql(i)){Qh(i)||(this.prepareTemplate(i,r),zh(i));let n=e.shadowRoot;if(n){let o=n.querySelector("style");o&&(o.__cssRules=i._styleAst,o.textContent=Pi(i._styleAst))}}}styleDocument(e){this.ensure(),this.styleSubtree(document.body,e)}};if(!window.ShadyCSS||!window.ShadyCSS.ScopingShim){let t=new Yh,e=window.ShadyCSS&&window.ShadyCSS.CustomStyleInterface;window.ShadyCSS={prepareTemplate(r,i,n){t.flushCustomStyles(),t.prepareTemplate(r,i)},prepareTemplateStyles(r,i,n){window.ShadyCSS.prepareTemplate(r,i,n)},prepareTemplateDom(r,i){},styleSubtree(r,i){t.flushCustomStyles(),t.styleSubtree(r,i)},styleElement(r){t.flushCustomStyles(),t.styleElement(r)},styleDocument(r){t.flushCustomStyles(),t.styleDocument(r)},getComputedStyleValue(r,i){return Do(r,i)},flushCustomStyles(){t.flushCustomStyles()},nativeCss:Or,nativeShadow:Mt,cssBuild:pt,disableRuntime:Ao},e&&(window.ShadyCSS.CustomStyleInterface=e)}window.ShadyCSS.ApplyShim=Ni;var jx=/:host\(:dir\((ltr|rtl)\)\)/g,Fx=':host([dir="$1"])',Lx=/([\s\w-#\.\[\]\*]*):dir\((ltr|rtl)\)/g,Vx=':host([dir="$2"]) $1',Bx=/:dir\((?:ltr|rtl)\)/,Jh=Boolean(window.ShadyDOM&&window.ShadyDOM.inUse),Ii=[],Mi=null,Kl="";function Xh(){Kl=document.documentElement.getAttribute("dir")}function Zh(t){t.__autoDirOptOut||t.setAttribute("dir",Kl)}function em(){Xh(),Kl=document.documentElement.getAttribute("dir");for(let t=0;t<Ii.length;t++)Zh(Ii[t])}function qx(){Mi&&Mi.takeRecords().length&&em()}var tm=V(t=>{Jh||Mi||(Xh(),Mi=new MutationObserver(em),Mi.observe(document.documentElement,{attributes:!0,attributeFilter:["dir"]}));let e=wo(t);class r extends e{static _processStyleText(n,o){return n=e._processStyleText.call(this,n,o),!Jh&&Bx.test(n)&&(n=this._replaceDirInCssText(n),this.__activateDir=!0),n}static _replaceDirInCssText(n){let o=n;return o=o.replace(jx,Fx),o=o.replace(Lx,Vx),o}constructor(){super();this.__autoDirOptOut=!1}ready(){super.ready(),this.__autoDirOptOut=this.hasAttribute("dir")}connectedCallback(){e.prototype.connectedCallback&&super.connectedCallback(),this.constructor.__activateDir&&(qx(),Ii.push(this),Zh(this))}disconnectedCallback(){if(e.prototype.disconnectedCallback&&super.disconnectedCallback(),this.constructor.__activateDir){let n=Ii.indexOf(this);n>-1&&Ii.splice(n,1)}}}return r.__activateDir=!1,r});function rm(){document.body.removeAttribute("unresolved")}document.readyState==="interactive"||document.readyState==="complete"?rm():window.addEventListener("DOMContentLoaded",rm);function Ri(t,e,r){return{index:t,removed:e,addedCount:r}}var im=0,nm=1,Ql=2,zl=3;function Ux(t,e,r,i,n,o){let s=o-n+1,a=r-e+1,l=new Array(s);for(let u=0;u<s;u++)l[u]=new Array(a),l[u][0]=u;for(let u=0;u<a;u++)l[0][u]=u;for(let u=1;u<s;u++)for(let c=1;c<a;c++)if($l(t[e+c-1],i[n+u-1]))l[u][c]=l[u-1][c-1];else{let p=l[u-1][c]+1,f=l[u][c-1]+1;l[u][c]=p<f?p:f}return l}function Hx(t){let e=t.length-1,r=t[0].length-1,i=t[e][r],n=[];for(;e>0||r>0;){if(e==0){n.push(Ql),r--;continue}if(r==0){n.push(zl),e--;continue}let o=t[e-1][r-1],s=t[e-1][r],a=t[e][r-1],l;s<a?l=s<o?s:o:l=a<o?a:o,l==o?(o==i?n.push(im):(n.push(nm),i=o),e--,r--):l==s?(n.push(zl),e--,i=s):(n.push(Ql),r--,i=a)}return n.reverse(),n}function zx(t,e,r,i,n,o){let s=0,a=0,l,u=Math.min(r-e,o-n);if(e==0&&n==0&&(s=Kx(t,i,u)),r==t.length&&o==i.length&&(a=Qx(t,i,u-s)),e+=s,n+=s,r-=a,o-=a,r-e==0&&o-n==0)return[];if(e==r){for(l=Ri(e,[],0);n<o;)l.removed.push(i[n++]);return[l]}else if(n==o)return[Ri(e,[],r-e)];let c=Hx(Ux(t,e,r,i,n,o));l=void 0;let p=[],f=e,h=n;for(let d=0;d<c.length;d++)switch(c[d]){case im:l&&(p.push(l),l=void 0),f++,h++;break;case nm:l||(l=Ri(f,[],0)),l.addedCount++,f++,l.removed.push(i[h]),h++;break;case Ql:l||(l=Ri(f,[],0)),l.addedCount++,f++;break;case zl:l||(l=Ri(f,[],0)),l.removed.push(i[h]),h++;break}return l&&p.push(l),p}function Kx(t,e,r){for(let i=0;i<r;i++)if(!$l(t[i],e[i]))return i;return r}function Qx(t,e,r){let i=t.length,n=e.length,o=0;for(;o<r&&$l(t[--i],e[--n]);)o++;return o}function Lo(t,e){return zx(t,0,t.length,e,0,e.length)}function $l(t,e){return t===e}function Dr(t){return t.localName==="slot"}var Gl=class{static getFlattenedNodes(t){let e=b(t);return Dr(t)?(t=t,e.assignedNodes({flatten:!0})):Array.from(e.childNodes).map(r=>Dr(r)?(r=r,b(r).assignedNodes({flatten:!0})):[r]).reduce((r,i)=>r.concat(i),[])}constructor(t,e){this._shadyChildrenObserver=null,this._nativeChildrenObserver=null,this._connected=!1,this._target=t,this.callback=e,this._effectiveNodes=[],this._observer=null,this._scheduled=!1,this._boundSchedule=()=>{this._schedule()},this.connect(),this._schedule()}connect(){Dr(this._target)?this._listenSlots([this._target]):b(this._target).children&&(this._listenSlots(b(this._target).children),window.ShadyDOM?this._shadyChildrenObserver=window.ShadyDOM.observeChildren(this._target,t=>{this._processMutations(t)}):(this._nativeChildrenObserver=new MutationObserver(t=>{this._processMutations(t)}),this._nativeChildrenObserver.observe(this._target,{childList:!0}))),this._connected=!0}disconnect(){Dr(this._target)?this._unlistenSlots([this._target]):b(this._target).children&&(this._unlistenSlots(b(this._target).children),window.ShadyDOM&&this._shadyChildrenObserver?(window.ShadyDOM.unobserveChildren(this._shadyChildrenObserver),this._shadyChildrenObserver=null):this._nativeChildrenObserver&&(this._nativeChildrenObserver.disconnect(),this._nativeChildrenObserver=null)),this._connected=!1}_schedule(){this._scheduled||(this._scheduled=!0,se.run(()=>this.flush()))}_processMutations(t){this._processSlotMutations(t),this.flush()}_processSlotMutations(t){if(t)for(let e=0;e<t.length;e++){let r=t[e];r.addedNodes&&this._listenSlots(r.addedNodes),r.removedNodes&&this._unlistenSlots(r.removedNodes)}}flush(){if(!this._connected)return!1;window.ShadyDOM&&ShadyDOM.flush(),this._nativeChildrenObserver?this._processSlotMutations(this._nativeChildrenObserver.takeRecords()):this._shadyChildrenObserver&&this._processSlotMutations(this._shadyChildrenObserver.takeRecords()),this._scheduled=!1;let t={target:this._target,addedNodes:[],removedNodes:[]},e=this.constructor.getFlattenedNodes(this._target),r=Lo(e,this._effectiveNodes);for(let n=0,o;n<r.length&&(o=r[n]);n++)for(let s=0,a;s<o.removed.length&&(a=o.removed[s]);s++)t.removedNodes.push(a);for(let n=0,o;n<r.length&&(o=r[n]);n++)for(let s=o.index;s<o.index+o.addedCount;s++)t.addedNodes.push(e[s]);this._effectiveNodes=e;let i=!1;return(t.addedNodes.length||t.removedNodes.length)&&(i=!0,this.callback.call(this._target,t)),i}_listenSlots(t){for(let e=0;e<t.length;e++){let r=t[e];Dr(r)&&r.addEventListener("slotchange",this._boundSchedule)}}_unlistenSlots(t){for(let e=0;e<t.length;e++){let r=t[e];Dr(r)&&r.removeEventListener("slotchange",this._boundSchedule)}}};var ji=function(){let t,e;do t=window.ShadyDOM&&ShadyDOM.flush(),window.ShadyCSS&&window.ShadyCSS.ScopingShim&&window.ShadyCSS.ScopingShim.flush(),e=hh();while(t||e)};var Nr=Element.prototype,$x=Nr.matches||Nr.matchesSelector||Nr.mozMatchesSelector||Nr.msMatchesSelector||Nr.oMatchesSelector||Nr.webkitMatchesSelector,Wl=function(t,e){return $x.call(t,e)},R=class{constructor(e){window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.patch(e),this.node=e}observeNodes(e){return new Gl(this.node,e)}unobserveNodes(e){e.disconnect()}notifyObserver(){}deepContains(e){if(b(this.node).contains(e))return!0;let r=e,i=e.ownerDocument;for(;r&&r!==i&&r!==this.node;)r=b(r).parentNode||b(r).host;return r===this.node}getOwnerRoot(){return b(this.node).getRootNode()}getDistributedNodes(){return this.node.localName==="slot"?b(this.node).assignedNodes({flatten:!0}):[]}getDestinationInsertionPoints(){let e=[],r=b(this.node).assignedSlot;for(;r;)e.push(r),r=b(r).assignedSlot;return e}importNode(e,r){let i=this.node instanceof Document?this.node:this.node.ownerDocument;return b(i).importNode(e,r)}getEffectiveChildNodes(){return Gl.getFlattenedNodes(this.node)}queryDistributedElements(e){let r=this.getEffectiveChildNodes(),i=[];for(let n=0,o=r.length,s;n<o&&(s=r[n]);n++)s.nodeType===Node.ELEMENT_NODE&&Wl(s,e)&&i.push(s);return i}get activeElement(){let e=this.node;return e._activeElement!==void 0?e._activeElement:e.activeElement}};function Gx(t,e){for(let r=0;r<e.length;r++){let i=e[r];t[i]=function(){return this.node[i].apply(this.node,arguments)}}}function om(t,e){for(let r=0;r<e.length;r++){let i=e[r];Object.defineProperty(t,i,{get:function(){return this.node[i]},configurable:!0})}}function Wx(t,e){for(let r=0;r<e.length;r++){let i=e[r];Object.defineProperty(t,i,{get:function(){return this.node[i]},set:function(n){this.node[i]=n},configurable:!0})}}var Vo=class{constructor(e){this.event=e}get rootTarget(){return this.path[0]}get localTarget(){return this.event.target}get path(){return this.event.composedPath()}};R.prototype.cloneNode;R.prototype.appendChild;R.prototype.insertBefore;R.prototype.removeChild;R.prototype.replaceChild;R.prototype.setAttribute;R.prototype.removeAttribute;R.prototype.querySelector;R.prototype.querySelectorAll;R.prototype.parentNode;R.prototype.firstChild;R.prototype.lastChild;R.prototype.nextSibling;R.prototype.previousSibling;R.prototype.firstElementChild;R.prototype.lastElementChild;R.prototype.nextElementSibling;R.prototype.previousElementSibling;R.prototype.childNodes;R.prototype.children;R.prototype.classList;R.prototype.textContent;R.prototype.innerHTML;var Yl=R;if(window.ShadyDOM&&window.ShadyDOM.inUse&&window.ShadyDOM.noPatch&&window.ShadyDOM.Wrapper){class t extends window.ShadyDOM.Wrapper{}Object.getOwnPropertyNames(R.prototype).forEach(e=>{e!="activeElement"&&(t.prototype[e]=R.prototype[e])}),om(t.prototype,["classList"]),Yl=t,Object.defineProperties(Vo.prototype,{localTarget:{get(){let e=this.event.currentTarget,r=e&&j(e).getOwnerRoot(),i=this.path;for(let n=0;n<i.length;n++){let o=i[n];if(j(o).getOwnerRoot()===r)return o}},configurable:!0},path:{get(){return window.ShadyDOM.composedPath(this.event)},configurable:!0}})}else Gx(R.prototype,["cloneNode","appendChild","insertBefore","removeChild","replaceChild","setAttribute","removeAttribute","querySelector","querySelectorAll"]),om(R.prototype,["parentNode","firstChild","lastChild","nextSibling","previousSibling","firstElementChild","lastElementChild","nextElementSibling","previousElementSibling","childNodes","children","classList"]),Wx(R.prototype,["textContent","innerHTML","className"]);var j=function(t){if(t=t||document,t instanceof Yl||t instanceof Vo)return t;let e=t.__domApi;return e||(t instanceof Event?e=new Vo(t):e=new Yl(t),t.__domApi=e),e};var Jl=window.ShadyDOM,sm=window.ShadyCSS;function am(t,e){return b(t).getRootNode()===e}function lm(t,e=!1){if(!Jl||!sm||!Jl.handlesDynamicScoping)return null;let r=sm.ScopingShim;if(!r)return null;let i=r.scopeForNode(t),n=b(t).getRootNode(),o=s=>{if(!am(s,n))return;let a=Array.from(Jl.nativeMethods.querySelectorAll.call(s,"*"));a.push(s);for(let l=0;l<a.length;l++){let u=a[l];if(!am(u,n))continue;let c=r.currentScopeForNode(u);c!==i&&(c!==""&&r.unscopeNode(u,c),r.scopeNode(u,i))}};if(o(t),e){let s=new MutationObserver(a=>{for(let l=0;l<a.length;l++){let u=a[l];for(let c=0;c<u.addedNodes.length;c++){let p=u.addedNodes[c];p.nodeType===Node.ELEMENT_NODE&&o(p)}}});return s.observe(t,{childList:!0,subtree:!0}),s}else return null}var Xl="disable-upgrade",Zl=t=>{for(;t;){let e=Object.getOwnPropertyDescriptor(t,"observedAttributes");if(e)return e.get;t=Object.getPrototypeOf(t.prototype).constructor}return()=>[]},e1=V(t=>{let e=ut(t),r=Zl(e);class i extends e{constructor(){super();this.__isUpgradeDisabled}static get observedAttributes(){return r.call(this).concat(Xl)}_initializeProperties(){this.hasAttribute(Xl)?this.__isUpgradeDisabled=!0:super._initializeProperties()}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(o){return super._canApplyPropertyDefault(o)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(o))}attributeChangedCallback(o,s,a,l){o==Xl?this.__isUpgradeDisabled&&a==null&&(super._initializeProperties(),this.__isUpgradeDisabled=!1,b(this).isConnected&&super.connectedCallback()):super.attributeChangedCallback(o,s,a,l)}connectedCallback(){this.__isUpgradeDisabled||super.connectedCallback()}disconnectedCallback(){this.__isUpgradeDisabled||super.disconnectedCallback()}}return i});var Bo="disable-upgrade",Yx=window.ShadyCSS,Fi=V(t=>{let e=Cr(ut(t)),r=Eo?e:tm(e),i=Zl(r),n={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class o extends r{constructor(){super();this.isAttached,this.__boundListeners,this._debouncers,this.__isUpgradeDisabled,this.__needsAttributesAtConnected,this._legacyForceObservedAttributes}static get importMeta(){return this.prototype.importMeta}created(){}__attributeReaction(a,l,u){(this.__dataAttributes&&this.__dataAttributes[a]||a===Bo)&&this.attributeChangedCallback(a,l,u,null)}setAttribute(a,l){if(_i&&!this._legacyForceObservedAttributes){let u=this.getAttribute(a);super.setAttribute(a,l),this.__attributeReaction(a,u,String(l))}else super.setAttribute(a,l)}removeAttribute(a){if(_i&&!this._legacyForceObservedAttributes){let l=this.getAttribute(a);super.removeAttribute(a),this.__attributeReaction(a,l,null)}else super.removeAttribute(a)}static get observedAttributes(){return _i&&!this.prototype._legacyForceObservedAttributes?(this.hasOwnProperty(JSCompiler_renameProperty("__observedAttributes",this))||(this.__observedAttributes=[],So(this.prototype)),this.__observedAttributes):i.call(this).concat(Bo)}_enableProperties(){this.__isUpgradeDisabled||super._enableProperties()}_canApplyPropertyDefault(a){return super._canApplyPropertyDefault(a)&&!(this.__isUpgradeDisabled&&this._isPropertyPending(a))}connectedCallback(){this.__needsAttributesAtConnected&&this._takeAttributes(),this.__isUpgradeDisabled||(super.connectedCallback(),this.isAttached=!0,this.attached())}attached(){}disconnectedCallback(){this.__isUpgradeDisabled||(super.disconnectedCallback(),this.isAttached=!1,this.detached())}detached(){}attributeChangedCallback(a,l,u,c){l!==u&&(a==Bo?this.__isUpgradeDisabled&&u==null&&(this._initializeProperties(),this.__isUpgradeDisabled=!1,b(this).isConnected&&this.connectedCallback()):(super.attributeChangedCallback(a,l,u,c),this.attributeChanged(a,l,u)))}attributeChanged(a,l,u){}_initializeProperties(){if(ze&&this.hasAttribute(Bo))this.__isUpgradeDisabled=!0;else{let a=Object.getPrototypeOf(this);a.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",a))||(this._registered(),a.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),_i&&!this._legacyForceObservedAttributes&&(this.hasAttributes()?this._takeAttributes():this.parentNode||(this.__needsAttributesAtConnected=!0)),this._applyListeners()}}_takeAttributes(){let a=this.attributes;for(let l=0,u=a.length;l<u;l++){let c=a[l];this.__attributeReaction(c.name,null,c.value)}}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(a){return this._serializeValue(a)}deserialize(a,l){return this._deserializeValue(a,l)}reflectPropertyToAttribute(a,l,u){this._propertyToAttribute(a,l,u)}serializeValueToAttribute(a,l,u){this._valueToNodeAttribute(u||this,a,l)}extend(a,l){if(!(a&&l))return a||l;let u=Object.getOwnPropertyNames(l);for(let c=0,p;c<u.length&&(p=u[c]);c++){let f=Object.getOwnPropertyDescriptor(l,p);f&&Object.defineProperty(a,p,f)}return a}mixin(a,l){for(let u in l)a[u]=l[u];return a}chainObject(a,l){return a&&l&&a!==l&&(a.__proto__=l),a}instanceTemplate(a){let l=this.constructor._contentForTemplate(a);return document.importNode(l,!0)}fire(a,l,u){u=u||{},l=l??{};let c=new Event(a,{bubbles:u.bubbles===void 0?!0:u.bubbles,cancelable:Boolean(u.cancelable),composed:u.composed===void 0?!0:u.composed});c.detail=l;let p=u.node||this;return b(p).dispatchEvent(c),c}listen(a,l,u){a=a||this;let c=this.__boundListeners||(this.__boundListeners=new WeakMap),p=c.get(a);p||(p={},c.set(a,p));let f=l+u;p[f]||(p[f]=this._addMethodEventListenerToNode(a,l,u,this))}unlisten(a,l,u){a=a||this;let c=this.__boundListeners&&this.__boundListeners.get(a),p=l+u,f=c&&c[p];f&&(this._removeEventListenerFromNode(a,l,f),c[p]=null)}setScrollDirection(a,l){Al(l||this,n[a]||"auto")}$$(a){return this.root.querySelector(a)}get domHost(){let a=b(this).getRootNode();return a instanceof DocumentFragment?a.host:a}distributeContent(){let l=j(this);window.ShadyDOM&&l.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return j(this).getEffectiveChildNodes()}queryDistributedElements(a){return j(this).queryDistributedElements(a)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter(function(l){return l.nodeType===Node.ELEMENT_NODE})}getEffectiveTextContent(){let a=this.getEffectiveChildNodes(),l=[];for(let u=0,c;c=a[u];u++)c.nodeType!==Node.COMMENT_NODE&&l.push(c.textContent);return l.join("")}queryEffectiveChildren(a){let l=this.queryDistributedElements(a);return l&&l[0]}queryAllEffectiveChildren(a){return this.queryDistributedElements(a)}getContentChildNodes(a){let l=this.root.querySelector(a||"slot");return l?j(l).getDistributedNodes():[]}getContentChildren(a){return this.getContentChildNodes(a).filter(function(u){return u.nodeType===Node.ELEMENT_NODE})}isLightDescendant(a){let l=this;return l!==a&&b(l).contains(a)&&b(l).getRootNode()===b(a).getRootNode()}isLocalDescendant(a){return this.root===b(a).getRootNode()}scopeSubtree(a,l=!1){return lm(a,l)}getComputedStyleValue(a){return Yx.getComputedStyleValue(this,a)}debounce(a,l,u){return this._debouncers=this._debouncers||{},this._debouncers[a]=me.debounce(this._debouncers[a],u>0?lt.after(u):se,l.bind(this))}isDebouncerActive(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];return!!(l&&l.isActive())}flushDebouncer(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];l&&l.flush()}cancelDebouncer(a){this._debouncers=this._debouncers||{};let l=this._debouncers[a];l&&l.cancel()}async(a,l){return l>0?lt.run(a.bind(this),l):~se.run(a.bind(this))}cancelAsync(a){a<0?se.cancel(~a):lt.cancel(a)}create(a,l){let u=document.createElement(a);if(l)if(u.setProperties)u.setProperties(l);else for(let c in l)u[c]=l[c];return u}elementMatches(a,l){return Wl(l||this,a)}toggleAttribute(a,l){let u=this;return arguments.length===3&&(u=arguments[2]),arguments.length==1&&(l=!u.hasAttribute(a)),l?(b(u).setAttribute(a,""),!0):(b(u).removeAttribute(a),!1)}toggleClass(a,l,u){u=u||this,arguments.length==1&&(l=!u.classList.contains(a)),l?u.classList.add(a):u.classList.remove(a)}transform(a,l){l=l||this,l.style.webkitTransform=a,l.style.transform=a}translate3d(a,l,u,c){c=c||this,this.transform("translate3d("+a+","+l+","+u+")",c)}arrayDelete(a,l){let u;if(Array.isArray(a)){if(u=a.indexOf(l),u>=0)return a.splice(u,1)}else if(u=Y(this,a).indexOf(l),u>=0)return this.splice(a,u,1);return null}_logger(a,l){switch(Array.isArray(l)&&l.length===1&&Array.isArray(l[0])&&(l=l[0]),a){case"log":case"warn":case"error":console[a](...l)}}_log(...a){this._logger("log",a)}_warn(...a){this._logger("warn",a)}_error(...a){this._logger("error",a)}_logf(a,...l){return["[%s::%s]",this.is,a,...l]}}return o.prototype.is="",o});var Jx={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,listeners:!0,hostAttributes:!0},um={attached:!0,detached:!0,ready:!0,created:!0,beforeRegister:!0,registered:!0,attributeChanged:!0,behaviors:!0,_noAccessors:!0},Xx=Object.assign({listeners:!0,hostAttributes:!0,properties:!0,observers:!0},um);function Zx(t,e,r){let i=t._noAccessors,n=Object.getOwnPropertyNames(t);for(let o=0;o<n.length;o++){let s=n[o];if(!(s in r))if(i)e[s]=t[s];else{let a=Object.getOwnPropertyDescriptor(t,s);a&&(a.configurable=!0,Object.defineProperty(e,s,a))}}}function pm(t,e){return cm({},Fi(e),t)}function ew(t,e,r){for(let i=0;i<e.length;i++)fm(t,e[i],r,Xx)}function fm(t,e,r,i){Zx(e,t,i);for(let n in Jx)e[n]&&(r[n]=r[n]||[],r[n].push(e[n]))}function dm(t,e,r){e=e||[];for(let i=t.length-1;i>=0;i--){let n=t[i];n?Array.isArray(n)?dm(n,e):e.indexOf(n)<0&&(!r||r.indexOf(n)<0)&&e.unshift(n):console.warn("behavior is null, check for missing or 404 import")}return e}function hm(t,e){for(let r in e){let i=t[r],n=e[r];!("value"in n)&&i&&"value"in i?t[r]=Object.assign({value:i.value},n):t[r]=n}}var mm=Fi(HTMLElement);function cm(t,e,r){let i,n={};class o extends e{static _finalizeClass(){if(!this.hasOwnProperty(JSCompiler_renameProperty("generatedFrom",this)))e._finalizeClass.call(this);else{if(i)for(let l=0,u;l<i.length;l++)u=i[l],u.properties&&this.createProperties(u.properties),u.observers&&this.createObservers(u.observers,u.properties);t.properties&&this.createProperties(t.properties),t.observers&&this.createObservers(t.observers,t.properties),this._prepareTemplate()}}static get properties(){let l={};if(i)for(let u=0;u<i.length;u++)hm(l,i[u].properties);return hm(l,t.properties),l}static get observers(){let l=[];if(i)for(let u=0,c;u<i.length;u++)c=i[u],c.observers&&(l=l.concat(c.observers));return t.observers&&(l=l.concat(t.observers)),l}created(){super.created();let l=n.created;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}_registered(){let l=o.prototype;if(!l.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",l))){l.__hasRegisterFinished=!0,super._registered(),ze&&s(l);let u=Object.getPrototypeOf(this),c=n.beforeRegister;if(c)for(let p=0;p<c.length;p++)c[p].call(u);if(c=n.registered,c)for(let p=0;p<c.length;p++)c[p].call(u)}}_applyListeners(){super._applyListeners();let l=n.listeners;if(l)for(let u=0;u<l.length;u++){let c=l[u];if(c)for(let p in c)this._addMethodEventListenerToNode(this,p,c[p])}}_ensureAttributes(){let l=n.hostAttributes;if(l)for(let u=l.length-1;u>=0;u--){let c=l[u];for(let p in c)this._ensureAttribute(p,c[p])}super._ensureAttributes()}ready(){super.ready();let l=n.ready;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}attached(){super.attached();let l=n.attached;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}detached(){super.detached();let l=n.detached;if(l)for(let u=0;u<l.length;u++)l[u].call(this)}attributeChanged(l,u,c){super.attributeChanged();let p=n.attributeChanged;if(p)for(let f=0;f<p.length;f++)p[f].call(this,l,u,c)}}if(r){Array.isArray(r)||(r=[r]);let a=e.prototype.behaviors;i=dm(r,null,a),o.prototype.behaviors=a?a.concat(r):i}let s=a=>{i&&ew(a,i,n),fm(a,t,n,um)};return ze||s(o.prototype),o.generatedFrom=t,o}var ym=function(t,e){t||console.warn("Polymer.Class requires `info` argument");let r=e?e(mm):mm;return r=cm(t,r,t.behaviors),r.is=r.prototype.is=t.is,r};var K=function(t){let e;return typeof t=="function"?e=t:e=K.Class(t),t._legacyForceObservedAttributes&&(e.prototype._legacyForceObservedAttributes=t._legacyForceObservedAttributes),customElements.define(e.is,e),e};K.Class=ym;function eu(t,e,r,i,n){let o;n&&(o=typeof r=="object"&&r!==null,o&&(i=t.__dataTemp[e]));let s=i!==r&&(i===i||r===r);return o&&s&&(t.__dataTemp[e]=r),s}var Ir=V(t=>{class e extends t{_shouldPropertyChange(i,n,o){return eu(this,i,n,o,!0)}}return e}),qo=V(t=>{class e extends t{static get properties(){return{mutableData:Boolean}}_shouldPropertyChange(i,n,o){return eu(this,i,n,o,this.mutableData)}}return e});Ir._mutablePropertyChange=eu;var tu=null;function ru(){return tu}ru.prototype=Object.create(HTMLTemplateElement.prototype,{constructor:{value:ru,writable:!0}});var vm=Dt(ru),tw=Ir(vm);function rw(t,e){tu=t,Object.setPrototypeOf(t,e.prototype),new e,tu=null}var iw=Dt(class{});function iu(t,e){for(let r=0;r<e.length;r++){let i=e[r];if(Boolean(t)!=Boolean(i.__hideTemplateChildren__))if(i.nodeType===Node.TEXT_NODE)t?(i.__polymerTextContent__=i.textContent,i.textContent=""):i.textContent=i.__polymerTextContent__;else if(i.localName==="slot")if(t)i.__polymerReplaced__=document.createComment("hidden-slot"),b(b(i).parentNode).replaceChild(i.__polymerReplaced__,i);else{let n=i.__polymerReplaced__;n&&b(b(n).parentNode).replaceChild(i,n)}else i.style&&(t?(i.__polymerDisplay__=i.style.display,i.style.display="none"):i.style.display=i.__polymerDisplay__);i.__hideTemplateChildren__=t,i._showHideChildren&&i._showHideChildren(t)}}var We=class extends iw{constructor(e){super();this._configureProperties(e),this.root=this._stampTemplate(this.__dataHost);let r=[];this.children=r;for(let n=this.root.firstChild;n;n=n.nextSibling)r.push(n),n.__templatizeInstance=this;this.__templatizeOwner&&this.__templatizeOwner.__hideTemplateChildren__&&this._showHideChildren(!0);let i=this.__templatizeOptions;(e&&i.instanceProps||!i.instanceProps)&&this._enableProperties()}_configureProperties(e){if(this.__templatizeOptions.forwardHostProp)for(let i in this.__hostProps)this._setPendingProperty(i,this.__dataHost["_host_"+i]);for(let i in e)this._setPendingProperty(i,e[i])}forwardHostProp(e,r){this._setPendingPropertyOrPath(e,r,!1,!0)&&this.__dataHost._enqueueClient(this)}_addEventListenerToNode(e,r,i){if(this._methodHost&&this.__templatizeOptions.parentModel)this._methodHost._addEventListenerToNode(e,r,n=>{n.model=this,i(n)});else{let n=this.__dataHost.__dataHost;n&&n._addEventListenerToNode(e,r,i)}}_showHideChildren(e){iu(e,this.children)}_setUnmanagedPropertyToNode(e,r,i){e.__hideTemplateChildren__&&e.nodeType==Node.TEXT_NODE&&r=="textContent"?e.__polymerTextContent__=i:super._setUnmanagedPropertyToNode(e,r,i)}get parentModel(){let e=this.__parentModel;if(!e){let r;e=this;do e=e.__dataHost.__dataHost;while((r=e.__templatizeOptions)&&!r.parentModel);this.__parentModel=e}return e}dispatchEvent(e){return!0}};We.prototype.__dataHost;We.prototype.__templatizeOptions;We.prototype._methodHost;We.prototype.__templatizeOwner;We.prototype.__hostProps;var nw=Ir(We);function _m(t){let e=t.__dataHost;return e&&e._methodHost||e}function sw(t,e,r){let i=r.mutableData?nw:We;Rt.mixin&&(i=Rt.mixin(i));let n=class extends i{};return n.prototype.__templatizeOptions=r,n.prototype._bindTemplate(t),ow(n,t,e,r),n}function uw(t,e,r,i){let n=r.forwardHostProp;if(n&&e.hasHostProps){let o=t.localName=="template",s=e.templatizeTemplateClass;if(!s){if(o){let l=r.mutableData?tw:vm;class u extends l{}s=e.templatizeTemplateClass=u}else{let l=t.constructor;class u extends l{}s=e.templatizeTemplateClass=u}let a=e.hostProps;for(let l in a)s.prototype._addPropertyEffect("_host_"+l,s.prototype.PROPERTY_EFFECT_TYPES.PROPAGATE,{fn:aw(l,n)}),s.prototype._createNotifyingProperty("_host_"+l);ho&&i&&lw(e,r,i)}if(t.__dataProto&&Object.assign(t.__data,t.__dataProto),o)rw(t,s),t.__dataTemp={},t.__dataPending=null,t.__dataOld=null,t._enableProperties();else{Object.setPrototypeOf(t,s.prototype);let a=e.hostProps;for(let l in a)if(l="_host_"+l,l in t){let u=t[l];delete t[l],t.__data[l]=u}}}}function aw(t,e){return function(i,n,o){e.call(i.__templatizeOwner,n.substring("_host_".length),o[n])}}function ow(t,e,r,i){let n=r.hostProps||{};for(let o in i.instanceProps){delete n[o];let s=i.notifyInstanceProp;s&&t.prototype._addPropertyEffect(o,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:cw(o,s)})}if(i.forwardHostProp&&e.__dataHost)for(let o in n)r.hasHostProps||(r.hasHostProps=!0),t.prototype._addPropertyEffect(o,t.prototype.PROPERTY_EFFECT_TYPES.NOTIFY,{fn:pw()})}function cw(t,e){return function(i,n,o){e.call(i.__templatizeOwner,i,n,o[n])}}function pw(){return function(e,r,i){e.__dataHost._setPendingPropertyOrPath("_host_"+r,i[r],!0,!0)}}function Rt(t,e,r){if(be&&!_m(t))throw new Error("strictTemplatePolicy: template owner not trusted");if(r=r||{},t.__templatizeOwner)throw new Error("A <template> can only be templatized once");t.__templatizeOwner=e;let n=(e?e.constructor:We)._parseTemplate(t),o=n.templatizeInstanceClass;o||(o=sw(t,n,r),n.templatizeInstanceClass=o);let s=_m(t);uw(t,n,r,s);let a=class extends o{};return a.prototype._methodHost=s,a.prototype.__dataHost=t,a.prototype.__templatizeOwner=e,a.prototype.__hostProps=n.hostProps,a=a,a}function lw(t,e,r){let i=r.constructor._properties,{propertyEffects:n}=t,{instanceProps:o}=e;for(let s in n)if(!i[s]&&!(o&&o[s])){let a=n[s];for(let l=0;l<a.length;l++){let{part:u}=a[l].info;if(!(u.signature&&u.signature.static)){console.warn(`Property '${s}' used in template but not declared in 'properties'; attribute will not be observed.`);break}}}}function nu(t,e){let r;for(;e;)if(r=e.__dataHost?e:e.__templatizeInstance)if(r.__dataHost!=t)e=r.__dataHost;else return r;else e=b(e).parentNode;return null}var gm=!1;function Mr(){if(ze&&!cl){if(!gm){gm=!0;let t=document.createElement("style");t.textContent="dom-bind,dom-if,dom-repeat{display:none;}",document.head.appendChild(t)}return!0}return!1}var fw=Cr(qo(Dt(HTMLElement))),bm=class extends fw{static get observedAttributes(){return["mutable-data"]}constructor(){super();if(be)throw new Error("strictTemplatePolicy: dom-bind not allowed");this.root=null,this.$=null,this.__children=null}attributeChangedCallback(e,r,i,n){this.mutableData=!0}connectedCallback(){Mr()||(this.style.display="none"),this.render()}disconnectedCallback(){this.__removeChildren()}__insertChildren(){b(b(this).parentNode).insertBefore(this.root,this)}__removeChildren(){if(this.__children)for(let e=0;e<this.__children.length;e++)this.root.appendChild(this.__children[e])}render(){let e;if(!this.__children){if(e=e||this.querySelector("template"),!e){let r=new MutationObserver(()=>{if(e=this.querySelector("template"),e)r.disconnect(),this.render();else throw new Error("dom-bind requires a <template> child")});r.observe(this,{childList:!0});return}this.root=this._stampTemplate(e),this.$=this.root.$,this.__children=[];for(let r=this.root.firstChild;r;r=r.nextSibling)this.__children[this.__children.length]=r;this._enableProperties()}this.__insertChildren(),this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}};customElements.define("dom-bind",bm);var dw=qo(he),ou=class extends dw{static get is(){return"dom-repeat"}static get template(){return null}static get properties(){return{items:{type:Array},as:{type:String,value:"item"},indexAs:{type:String,value:"index"},itemsIndexAs:{type:String,value:"itemsIndex"},sort:{type:Function,observer:"__sortChanged"},filter:{type:Function,observer:"__filterChanged"},observe:{type:String,observer:"__observeChanged"},delay:Number,renderedItemCount:{type:Number,notify:!vi,readOnly:!0},initialCount:{type:Number},targetFramerate:{type:Number,value:20},_targetFrameTime:{type:Number,computed:"__computeFrameTime(targetFramerate)"},notifyDomChange:{type:Boolean},reuseChunkedInstances:{type:Boolean}}}static get observers(){return["__itemsChanged(items.*)"]}constructor(){super();this.__instances=[],this.__renderDebouncer=null,this.__itemsIdxToInstIdx={},this.__chunkCount=null,this.__renderStartTime=null,this.__itemsArrayChanged=!1,this.__shouldMeasureChunk=!1,this.__shouldContinueChunking=!1,this.__chunkingId=0,this.__sortFn=null,this.__filterFn=null,this.__observePaths=null,this.__ctor=null,this.__isDetached=!0,this.template=null,this._templateInfo}disconnectedCallback(){super.disconnectedCallback(),this.__isDetached=!0;for(let e=0;e<this.__instances.length;e++)this.__detachInstance(e)}connectedCallback(){if(super.connectedCallback(),Mr()||(this.style.display="none"),this.__isDetached){this.__isDetached=!1;let e=b(b(this).parentNode);for(let r=0;r<this.__instances.length;r++)this.__attachInstance(r,e)}}__ensureTemplatized(){if(!this.__ctor){let e=this,r=this.template=e._templateInfo?e:this.querySelector("template");if(!r){let n=new MutationObserver(()=>{if(this.querySelector("template"))n.disconnect(),this.__render();else throw new Error("dom-repeat requires a <template> child")});return n.observe(this,{childList:!0}),!1}let i={};i[this.as]=!0,i[this.indexAs]=!0,i[this.itemsIndexAs]=!0,this.__ctor=Rt(r,this,{mutableData:this.mutableData,parentModel:!0,instanceProps:i,forwardHostProp:function(n,o){let s=this.__instances;for(let a=0,l;a<s.length&&(l=s[a]);a++)l.forwardHostProp(n,o)},notifyInstanceProp:function(n,o,s){if(Hd(this.as,o)){let a=n[this.itemsIndexAs];o==this.as&&(this.items[a]=s);let l=At(this.as,`${JSCompiler_renameProperty("items",this)}.${a}`,o);this.notifyPath(l,s)}}})}return!0}__getMethodHost(){return this.__dataHost._methodHost||this.__dataHost}__functionFromPropertyValue(e){if(typeof e=="string"){let r=e,i=this.__getMethodHost();return function(){return i[r].apply(i,arguments)}}return e}__sortChanged(e){this.__sortFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__filterChanged(e){this.__filterFn=this.__functionFromPropertyValue(e),this.items&&this.__debounceRender(this.__render)}__computeFrameTime(e){return Math.ceil(1e3/e)}__observeChanged(){this.__observePaths=this.observe&&this.observe.replace(".*",".").split(" ")}__handleObservedPaths(e){if(this.__sortFn||this.__filterFn){if(!e)this.__debounceRender(this.__render,this.delay);else if(this.__observePaths){let r=this.__observePaths;for(let i=0;i<r.length;i++)e.indexOf(r[i])===0&&this.__debounceRender(this.__render,this.delay)}}}__itemsChanged(e){this.items&&!Array.isArray(this.items)&&console.warn("dom-repeat expected array for `items`, found",this.items),this.__handleItemPath(e.path,e.value)||(e.path==="items"&&(this.__itemsArrayChanged=!0),this.__debounceRender(this.__render))}__debounceRender(e,r=0){this.__renderDebouncer=me.debounce(this.__renderDebouncer,r>0?lt.after(r):se,e.bind(this)),Er(this.__renderDebouncer)}render(){this.__debounceRender(this.__render),ji()}__render(){if(!this.__ensureTemplatized())return;let e=this.items||[],r=this.__sortAndFilterItems(e),i=this.__calculateLimit(r.length);this.__updateInstances(e,i,r),this.initialCount&&(this.__shouldMeasureChunk||this.__shouldContinueChunking)&&(cancelAnimationFrame(this.__chunkingId),this.__chunkingId=requestAnimationFrame(()=>this.__continueChunking())),this._setRenderedItemCount(this.__instances.length),(!vi||this.notifyDomChange)&&this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0}))}__sortAndFilterItems(e){let r=new Array(e.length);for(let i=0;i<e.length;i++)r[i]=i;return this.__filterFn&&(r=r.filter((i,n,o)=>this.__filterFn(e[i],n,o))),this.__sortFn&&r.sort((i,n)=>this.__sortFn(e[i],e[n])),r}__calculateLimit(e){let r=e,i=this.__instances.length;if(this.initialCount){let n;!this.__chunkCount||this.__itemsArrayChanged&&!this.reuseChunkedInstances?(r=Math.min(e,this.initialCount),n=Math.max(r-i,0),this.__chunkCount=n||1):(n=Math.min(Math.max(e-i,0),this.__chunkCount),r=Math.min(i+n,e)),this.__shouldMeasureChunk=n===this.__chunkCount,this.__shouldContinueChunking=r<e,this.__renderStartTime=performance.now()}return this.__itemsArrayChanged=!1,r}__continueChunking(){if(this.__shouldMeasureChunk){let e=performance.now()-this.__renderStartTime,r=this._targetFrameTime/e;this.__chunkCount=Math.round(this.__chunkCount*r)||1}this.__shouldContinueChunking&&this.__debounceRender(this.__render)}__updateInstances(e,r,i){let n=this.__itemsIdxToInstIdx={},o;for(o=0;o<r;o++){let s=this.__instances[o],a=i[o],l=e[a];n[a]=o,s?(s._setPendingProperty(this.as,l),s._setPendingProperty(this.indexAs,o),s._setPendingProperty(this.itemsIndexAs,a),s._flushProperties()):this.__insertInstance(l,o,a)}for(let s=this.__instances.length-1;s>=o;s--)this.__detachAndRemoveInstance(s)}__detachInstance(e){let r=this.__instances[e],i=b(r.root);for(let n=0;n<r.children.length;n++){let o=r.children[n];i.appendChild(o)}return r}__attachInstance(e,r){let i=this.__instances[e];r.insertBefore(i.root,this)}__detachAndRemoveInstance(e){this.__detachInstance(e),this.__instances.splice(e,1)}__stampInstance(e,r,i){let n={};return n[this.as]=e,n[this.indexAs]=r,n[this.itemsIndexAs]=i,new this.__ctor(n)}__insertInstance(e,r,i){let n=this.__stampInstance(e,r,i),o=this.__instances[r+1],s=o?o.children[0]:this;return b(b(this).parentNode).insertBefore(n.root,s),this.__instances[r]=n,n}_showHideChildren(e){for(let r=0;r<this.__instances.length;r++)this.__instances[r]._showHideChildren(e)}__handleItemPath(e,r){let i=e.slice(6),n=i.indexOf("."),o=n<0?i:i.substring(0,n);if(o==parseInt(o,10)){let s=n<0?"":i.substring(n+1);this.__handleObservedPaths(s);let a=this.__itemsIdxToInstIdx[o],l=this.__instances[a];if(l){let u=this.as+(s?"."+s:"");l._setPendingPropertyOrPath(u,r,!1,!0),l._flushProperties()}return!0}}itemForElement(e){let r=this.modelForElement(e);return r&&r[this.as]}indexForElement(e){let r=this.modelForElement(e);return r&&r[this.indexAs]}modelForElement(e){return nu(this.template,e)}};customElements.define(ou.is,ou);var su=class extends he{static get is(){return"dom-if"}static get template(){return null}static get properties(){return{if:{type:Boolean,observer:"__debounceRender"},restamp:{type:Boolean,observer:"__debounceRender"},notifyDomChange:{type:Boolean}}}constructor(){super();this.__renderDebouncer=null,this._lastIf=!1,this.__hideTemplateChildren__=!1,this.__template,this._templateInfo}__debounceRender(){this.__renderDebouncer=me.debounce(this.__renderDebouncer,se,()=>this.__render()),Er(this.__renderDebouncer)}disconnectedCallback(){super.disconnectedCallback();let e=b(this).parentNode;(!e||e.nodeType==Node.DOCUMENT_FRAGMENT_NODE&&!b(e).host)&&this.__teardownInstance()}connectedCallback(){super.connectedCallback(),Mr()||(this.style.display="none"),this.if&&this.__debounceRender()}__ensureTemplate(){if(!this.__template){let e=this,r=e._templateInfo?e:b(e).querySelector("template");if(!r){let i=new MutationObserver(()=>{if(b(this).querySelector("template"))i.disconnect(),this.__render();else throw new Error("dom-if requires a <template> child")});return i.observe(this,{childList:!0}),!1}this.__template=r}return!0}__ensureInstance(){let e=b(this).parentNode;if(this.__hasInstance()){let r=this.__getInstanceNodes();if(r&&r.length&&b(this).previousSibling!==r[r.length-1])for(let n=0,o;n<r.length&&(o=r[n]);n++)b(e).insertBefore(o,this)}else{if(!e||!this.__ensureTemplate())return!1;this.__createAndInsertInstance(e)}return!0}render(){ji()}__render(){if(this.if){if(!this.__ensureInstance())return}else this.restamp&&this.__teardownInstance();this._showHideChildren(),(!vi||this.notifyDomChange)&&this.if!=this._lastIf&&(this.dispatchEvent(new CustomEvent("dom-change",{bubbles:!0,composed:!0})),this._lastIf=this.if)}__hasInstance(){}__getInstanceNodes(){}__createAndInsertInstance(e){}__teardownInstance(){}_showHideChildren(){}},xm=class extends su{constructor(){super();this.__instance=null,this.__syncInfo=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.templateInfo.childNodes}__createAndInsertInstance(e){let r=this.__dataHost||this;if(be&&!this.__dataHost)throw new Error("strictTemplatePolicy: template owner not trusted");let i=r._bindTemplate(this.__template,!0);i.runEffects=(n,o,s)=>{let a=this.__syncInfo;if(this.if)a&&(this.__syncInfo=null,this._showHideChildren(),o=Object.assign(a.changedProps,o)),n(o,s);else if(this.__instance)if(a||(a=this.__syncInfo={runEffects:n,changedProps:{}}),s)for(let l in o){let u=xe(l);a.changedProps[u]=this.__dataHost[u]}else Object.assign(a.changedProps,o)},this.__instance=r._stampTemplate(this.__template,i),b(e).insertBefore(this.__instance,this)}__syncHostProperties(){let e=this.__syncInfo;e&&(this.__syncInfo=null,e.runEffects(e.changedProps,!1))}__teardownInstance(){let e=this.__dataHost||this;this.__instance&&(e._removeBoundDom(this.__instance),this.__instance=null,this.__syncInfo=null)}_showHideChildren(){let e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,iu(e,this.__instance.templateInfo.childNodes)),e||this.__syncHostProperties()}},wm=class extends su{constructor(){super();this.__ctor=null,this.__instance=null,this.__invalidProps=null}__hasInstance(){return Boolean(this.__instance)}__getInstanceNodes(){return this.__instance.children}__createAndInsertInstance(e){this.__ctor||(this.__ctor=Rt(this.__template,this,{mutableData:!0,forwardHostProp:function(r,i){this.__instance&&(this.if?this.__instance.forwardHostProp(r,i):(this.__invalidProps=this.__invalidProps||Object.create(null),this.__invalidProps[xe(r)]=!0))}})),this.__instance=new this.__ctor,b(e).insertBefore(this.__instance.root,this)}__teardownInstance(){if(this.__instance){let e=this.__instance.children;if(e&&e.length){let r=b(e[0]).parentNode;if(r){r=b(r);for(let i=0,n;i<e.length&&(n=e[i]);i++)r.removeChild(n)}}this.__invalidProps=null,this.__instance=null}}__syncHostProperties(){let e=this.__invalidProps;if(e){this.__invalidProps=null;for(let r in e)this.__instance._setPendingProperty(r,this.__dataHost[r]);this.__instance._flushProperties()}}_showHideChildren(){let e=this.__hideTemplateChildren__||!this.if;this.__instance&&Boolean(this.__instance.__hidden)!==e&&(this.__instance.__hidden=e,this.__instance._showHideChildren(e)),e||this.__syncHostProperties()}},Sm=yo?xm:wm;customElements.define(Sm.is,Sm);var hw=V(t=>{let e=ut(t);class r extends e{static get properties(){return{items:{type:Array},multi:{type:Boolean,value:!1},selected:{type:Object,notify:!0},selectedItem:{type:Object,notify:!0},toggle:{type:Boolean,value:!1}}}static get observers(){return["__updateSelection(multi, items.*)"]}constructor(){super();this.__lastItems=null,this.__lastMulti=null,this.__selectedMap=null}__updateSelection(n,o){let s=o.path;if(s==JSCompiler_renameProperty("items",this)){let a=o.base||[],l=this.__lastItems,u=this.__lastMulti;if(n!==u&&this.clearSelection(),l){let c=Lo(a,l);this.__applySplices(c)}this.__lastItems=a,this.__lastMulti=n}else if(o.path==`${JSCompiler_renameProperty("items",this)}.splices`)this.__applySplices(o.value.indexSplices);else{let a=s.slice(`${JSCompiler_renameProperty("items",this)}.`.length),l=parseInt(a,10);a.indexOf(".")<0&&a==l&&this.__deselectChangedIdx(l)}}__applySplices(n){let o=this.__selectedMap;for(let a=0;a<n.length;a++){let l=n[a];o.forEach((u,c)=>{u<l.index||(u>=l.index+l.removed.length?o.set(c,u+l.addedCount-l.removed.length):o.set(c,-1))});for(let u=0;u<l.addedCount;u++){let c=l.index+u;o.has(this.items[c])&&o.set(this.items[c],c)}}this.__updateLinks();let s=0;o.forEach((a,l)=>{a<0?(this.multi?this.splice(JSCompiler_renameProperty("selected",this),s,1):this.selected=this.selectedItem=null,o.delete(l)):s++})}__updateLinks(){if(this.__dataLinkedPaths={},this.multi){let n=0;this.__selectedMap.forEach(o=>{o>=0&&this.linkPaths(`${JSCompiler_renameProperty("items",this)}.${o}`,`${JSCompiler_renameProperty("selected",this)}.${n++}`)})}else this.__selectedMap.forEach(n=>{this.linkPaths(JSCompiler_renameProperty("selected",this),`${JSCompiler_renameProperty("items",this)}.${n}`),this.linkPaths(JSCompiler_renameProperty("selectedItem",this),`${JSCompiler_renameProperty("items",this)}.${n}`)})}clearSelection(){this.__dataLinkedPaths={},this.__selectedMap=new Map,this.selected=this.multi?[]:null,this.selectedItem=null}isSelected(n){return this.__selectedMap.has(n)}isIndexSelected(n){return this.isSelected(this.items[n])}__deselectChangedIdx(n){let o=this.__selectedIndexForItemIndex(n);if(o>=0){let s=0;this.__selectedMap.forEach((a,l)=>{o==s++&&this.deselect(l)})}}__selectedIndexForItemIndex(n){let o=this.__dataLinkedPaths[`${JSCompiler_renameProperty("items",this)}.${n}`];if(o)return parseInt(o.slice(`${JSCompiler_renameProperty("selected",this)}.`.length),10)}deselect(n){let o=this.__selectedMap.get(n);if(o>=0){this.__selectedMap.delete(n);let s;this.multi&&(s=this.__selectedIndexForItemIndex(o)),this.__updateLinks(),this.multi?this.splice(JSCompiler_renameProperty("selected",this),s,1):this.selected=this.selectedItem=null}}deselectIndex(n){this.deselect(this.items[n])}select(n){this.selectIndex(this.items.indexOf(n))}selectIndex(n){let o=this.items[n];this.isSelected(o)?this.toggle&&this.deselectIndex(n):(this.multi||this.__selectedMap.clear(),this.__selectedMap.set(o,n),this.__updateLinks(),this.multi?this.push(JSCompiler_renameProperty("selected",this),o):this.selected=this.selectedItem=o)}}return r});var mw=hw(he),au=class extends mw{static get is(){return"array-selector"}static get template(){return null}};customElements.define(au.is,au);"use strict";var Uo=new Wh;window.ShadyCSS||(window.ShadyCSS={prepareTemplate(t,e,r){},prepareTemplateDom(t,e){},prepareTemplateStyles(t,e,r){},styleSubtree(t,e){Uo.processStyles(),ki(t,e)},styleElement(t){Uo.processStyles()},styleDocument(t){Uo.processStyles(),ki(document.body,t)},getComputedStyleValue(t,e){return Do(t,e)},flushCustomStyles(){},nativeCss:Or,nativeShadow:Mt,cssBuild:pt,disableRuntime:Ao});window.ShadyCSS.CustomStyleInterface=Uo;var Em="include",yw=window.ShadyCSS.CustomStyleInterface,Tm=class extends HTMLElement{constructor(){super();this._style=null,yw.addCustomStyle(this)}getStyle(){if(this._style)return this._style;let e=this.querySelector("style");if(!e)return null;this._style=e;let r=e.getAttribute(Em);return r&&(e.removeAttribute(Em),e.textContent=Ud(r)+e.textContent),this.ownerDocument!==window.document&&window.document.head.appendChild(this),this._style}};window.customElements.define("custom-style",Tm);var vw;(()=>{vw=Ir._mutablePropertyChange})();var VF=Fi(HTMLElement).prototype;var Cm={"U+0008":"backspace","U+0009":"tab","U+001B":"esc","U+0020":"space","U+007F":"del"},_w={8:"backspace",9:"tab",13:"enter",27:"esc",33:"pageup",34:"pagedown",35:"end",36:"home",32:"space",37:"left",38:"up",39:"right",40:"down",46:"del",106:"*"},Om={shift:"shiftKey",ctrl:"ctrlKey",alt:"altKey",meta:"metaKey"},gw=/[a-z0-9*]/,bw=/U\+/,xw=/^arrow/,ww=/^space(bar)?/,Sw=/^escape$/;function Pm(t,e){var r="";if(t){var i=t.toLowerCase();i===" "||ww.test(i)?r="space":Sw.test(i)?r="esc":i.length==1?(!e||gw.test(i))&&(r=i):xw.test(i)?r=i.replace("arrow",""):i=="multiply"?r="*":r=i}return r}function Ew(t){var e="";return t&&(t in Cm?e=Cm[t]:bw.test(t)?(t=parseInt(t.replace("U+","0x"),16),e=String.fromCharCode(t).toLowerCase()):e=t.toLowerCase()),e}function Tw(t){var e="";return Number(t)&&(t>=65&&t<=90?e=String.fromCharCode(32+t):t>=112&&t<=123?e="f"+(t-112+1):t>=48&&t<=57?e=String(t-48):t>=96&&t<=105?e=String(t-96):e=_w[t]),e}function Cw(t,e){return t.key?Pm(t.key,e):t.detail&&t.detail.key?Pm(t.detail.key,e):Ew(t.keyIdentifier)||Tw(t.keyCode)||""}function km(t,e){var r=Cw(e,t.hasModifiers);return r===t.key&&(!t.hasModifiers||!!e.shiftKey==!!t.shiftKey&&!!e.ctrlKey==!!t.ctrlKey&&!!e.altKey==!!t.altKey&&!!e.metaKey==!!t.metaKey)}function Ow(t){return t.length===1?{combo:t,key:t,event:"keydown"}:t.split("+").reduce(function(e,r){var i=r.split(":"),n=i[0],o=i[1];return n in Om?(e[Om[n]]=!0,e.hasModifiers=!0):(e.key=n,e.event=o||"keydown"),e},{combo:t.split(":").shift()})}function Am(t){return t.trim().split(" ").map(function(e){return Ow(e)})}var ft={properties:{keyEventTarget:{type:Object,value:function(){return this}},stopKeyboardEventPropagation:{type:Boolean,value:!1},_boundKeyHandlers:{type:Array,value:function(){return[]}},_imperativeKeyBindings:{type:Object,value:function(){return{}}}},observers:["_resetKeyEventListeners(keyEventTarget, _boundKeyHandlers)"],keyBindings:{},registered:function(){this._prepKeyBindings()},attached:function(){this._listenKeyEventListeners()},detached:function(){this._unlistenKeyEventListeners()},addOwnKeyBinding:function(t,e){this._imperativeKeyBindings[t]=e,this._prepKeyBindings(),this._resetKeyEventListeners()},removeOwnKeyBindings:function(){this._imperativeKeyBindings={},this._prepKeyBindings(),this._resetKeyEventListeners()},keyboardEventMatchesKeys:function(t,e){for(var r=Am(e),i=0;i<r.length;++i)if(km(r[i],t))return!0;return!1},_collectKeyBindings:function(){var t=this.behaviors.map(function(e){return e.keyBindings});return t.indexOf(this.keyBindings)===-1&&t.push(this.keyBindings),t},_prepKeyBindings:function(){this._keyBindings={},this._collectKeyBindings().forEach(function(r){for(var i in r)this._addKeyBinding(i,r[i])},this);for(var t in this._imperativeKeyBindings)this._addKeyBinding(t,this._imperativeKeyBindings[t]);for(var e in this._keyBindings)this._keyBindings[e].sort(function(r,i){var n=r[0].hasModifiers,o=i[0].hasModifiers;return n===o?0:n?-1:1})},_addKeyBinding:function(t,e){Am(t).forEach(function(r){this._keyBindings[r.event]=this._keyBindings[r.event]||[],this._keyBindings[r.event].push([r,e])},this)},_resetKeyEventListeners:function(){this._unlistenKeyEventListeners(),this.isAttached&&this._listenKeyEventListeners()},_listenKeyEventListeners:function(){!this.keyEventTarget||Object.keys(this._keyBindings).forEach(function(t){var e=this._keyBindings[t],r=this._onKeyBindingEvent.bind(this,e);this._boundKeyHandlers.push([this.keyEventTarget,t,r]),this.keyEventTarget.addEventListener(t,r)},this)},_unlistenKeyEventListeners:function(){for(var t,e,r,i;this._boundKeyHandlers.length;)t=this._boundKeyHandlers.pop(),e=t[0],r=t[1],i=t[2],e.removeEventListener(r,i)},_onKeyBindingEvent:function(t,e){if(this.stopKeyboardEventPropagation&&e.stopPropagation(),!e.defaultPrevented)for(var r=0;r<t.length;r++){var i=t[r][0],n=t[r][1];if(km(i,e)&&(this._triggerKeyHandler(i,n,e),e.defaultPrevented))return}},_triggerKeyHandler:function(t,e,r){var i=Object.create(t);i.keyboardEvent=r;var n=new CustomEvent(t.event,{detail:i,cancelable:!0});this[e].call(this,n),n.defaultPrevented&&r.preventDefault()}};var Ho={properties:{name:{type:String},value:{notify:!0,type:String},required:{type:Boolean,value:!1}},attached:function(){},detached:function(){}};var Li={properties:{focused:{type:Boolean,value:!1,notify:!0,readOnly:!0,reflectToAttribute:!0},disabled:{type:Boolean,value:!1,notify:!0,observer:"_disabledChanged",reflectToAttribute:!0},_oldTabIndex:{type:String},_boundFocusBlurHandler:{type:Function,value:function(){return this._focusBlurHandler.bind(this)}}},observers:["_changedControlState(focused, disabled)"],ready:function(){this.addEventListener("focus",this._boundFocusBlurHandler,!0),this.addEventListener("blur",this._boundFocusBlurHandler,!0)},_focusBlurHandler:function(t){this._setFocused(t.type==="focus")},_disabledChanged:function(t,e){this.setAttribute("aria-disabled",t?"true":"false"),this.style.pointerEvents=t?"none":"",t?(this._oldTabIndex=this.getAttribute("tabindex"),this._setFocused(!1),this.tabIndex=-1,this.blur()):this._oldTabIndex!==void 0&&(this._oldTabIndex===null?this.removeAttribute("tabindex"):this.setAttribute("tabindex",this._oldTabIndex))},_changedControlState:function(){this._controlStateChanged&&this._controlStateChanged()}};var lu={properties:{pressed:{type:Boolean,readOnly:!0,value:!1,reflectToAttribute:!0,observer:"_pressedChanged"},toggles:{type:Boolean,value:!1,reflectToAttribute:!0},active:{type:Boolean,value:!1,notify:!0,reflectToAttribute:!0},pointerDown:{type:Boolean,readOnly:!0,value:!1},receivedFocusFromKeyboard:{type:Boolean,readOnly:!0},ariaActiveAttribute:{type:String,value:"aria-pressed",observer:"_ariaActiveAttributeChanged"}},listeners:{down:"_downHandler",up:"_upHandler",tap:"_tapHandler"},observers:["_focusChanged(focused)","_activeChanged(active, ariaActiveAttribute)"],keyBindings:{"enter:keydown":"_asyncClick","space:keydown":"_spaceKeyDownHandler","space:keyup":"_spaceKeyUpHandler"},_mouseEventRe:/^mouse/,_tapHandler:function(){this.toggles?this._userActivate(!this.active):this.active=!1},_focusChanged:function(t){this._detectKeyboardFocus(t),t||this._setPressed(!1)},_detectKeyboardFocus:function(t){this._setReceivedFocusFromKeyboard(!this.pointerDown&&t)},_userActivate:function(t){this.active!==t&&(this.active=t,this.fire("change"))},_downHandler:function(t){this._setPointerDown(!0),this._setPressed(!0),this._setReceivedFocusFromKeyboard(!1)},_upHandler:function(){this._setPointerDown(!1),this._setPressed(!1)},_spaceKeyDownHandler:function(t){var e=t.detail.keyboardEvent,r=j(e).localTarget;this.isLightDescendant(r)||(e.preventDefault(),e.stopImmediatePropagation(),this._setPressed(!0))},_spaceKeyUpHandler:function(t){var e=t.detail.keyboardEvent,r=j(e).localTarget;this.isLightDescendant(r)||(this.pressed&&this._asyncClick(),this._setPressed(!1))},_asyncClick:function(){this.async(function(){this.click()},1)},_pressedChanged:function(t){this._changedButtonState()},_ariaActiveAttributeChanged:function(t,e){e&&e!=t&&this.hasAttribute(e)&&this.removeAttribute(e)},_activeChanged:function(t,e){this.toggles?this.setAttribute(this.ariaActiveAttribute,t?"true":"false"):this.removeAttribute(this.ariaActiveAttribute),this._changedButtonState()},_controlStateChanged:function(){this.disabled?this._setPressed(!1):this._changedButtonState()},_changedButtonState:function(){this._buttonStateChanged&&this._buttonStateChanged()}},Dm=[ft,lu];var Pe={distance:function(t,e,r,i){var n=t-r,o=e-i;return Math.sqrt(n*n+o*o)},now:window.performance&&window.performance.now?window.performance.now.bind(window.performance):Date.now};function Nm(t){this.element=t,this.width=this.boundingRect.width,this.height=this.boundingRect.height,this.size=Math.max(this.width,this.height)}Nm.prototype={get boundingRect(){return this.element.getBoundingClientRect()},furthestCornerDistanceFrom:function(t,e){var r=Pe.distance(t,e,0,0),i=Pe.distance(t,e,this.width,0),n=Pe.distance(t,e,0,this.height),o=Pe.distance(t,e,this.width,this.height);return Math.max(r,i,n,o)}};function jt(t){this.element=t,this.color=window.getComputedStyle(t).color,this.wave=document.createElement("div"),this.waveContainer=document.createElement("div"),this.wave.style.backgroundColor=this.color,this.wave.classList.add("wave"),this.waveContainer.classList.add("wave-container"),j(this.waveContainer).appendChild(this.wave),this.resetInteractionState()}jt.MAX_RADIUS=300;jt.prototype={get recenters(){return this.element.recenters},get center(){return this.element.center},get mouseDownElapsed(){var t;return this.mouseDownStart?(t=Pe.now()-this.mouseDownStart,this.mouseUpStart&&(t-=this.mouseUpElapsed),t):0},get mouseUpElapsed(){return this.mouseUpStart?Pe.now()-this.mouseUpStart:0},get mouseDownElapsedSeconds(){return this.mouseDownElapsed/1e3},get mouseUpElapsedSeconds(){return this.mouseUpElapsed/1e3},get mouseInteractionSeconds(){return this.mouseDownElapsedSeconds+this.mouseUpElapsedSeconds},get initialOpacity(){return this.element.initialOpacity},get opacityDecayVelocity(){return this.element.opacityDecayVelocity},get radius(){var t=this.containerMetrics.width*this.containerMetrics.width,e=this.containerMetrics.height*this.containerMetrics.height,r=Math.min(Math.sqrt(t+e),jt.MAX_RADIUS)*1.1+5,i=1.1-.2*(r/jt.MAX_RADIUS),n=this.mouseInteractionSeconds/i,o=r*(1-Math.pow(80,-n));return Math.abs(o)},get opacity(){return this.mouseUpStart?Math.max(0,this.initialOpacity-this.mouseUpElapsedSeconds*this.opacityDecayVelocity):this.initialOpacity},get outerOpacity(){var t=this.mouseUpElapsedSeconds*.3,e=this.opacity;return Math.max(0,Math.min(t,e))},get isOpacityFullyDecayed(){return this.opacity<.01&&this.radius>=Math.min(this.maxRadius,jt.MAX_RADIUS)},get isRestingAtMaxRadius(){return this.opacity>=this.initialOpacity&&this.radius>=Math.min(this.maxRadius,jt.MAX_RADIUS)},get isAnimationComplete(){return this.mouseUpStart?this.isOpacityFullyDecayed:this.isRestingAtMaxRadius},get translationFraction(){return Math.min(1,this.radius/this.containerMetrics.size*2/Math.sqrt(2))},get xNow(){return this.xEnd?this.xStart+this.translationFraction*(this.xEnd-this.xStart):this.xStart},get yNow(){return this.yEnd?this.yStart+this.translationFraction*(this.yEnd-this.yStart):this.yStart},get isMouseDown(){return this.mouseDownStart&&!this.mouseUpStart},resetInteractionState:function(){this.maxRadius=0,this.mouseDownStart=0,this.mouseUpStart=0,this.xStart=0,this.yStart=0,this.xEnd=0,this.yEnd=0,this.slideDistance=0,this.containerMetrics=new Nm(this.element)},draw:function(){var t,e,r;this.wave.style.opacity=this.opacity,t=this.radius/(this.containerMetrics.size/2),e=this.xNow-this.containerMetrics.width/2,r=this.yNow-this.containerMetrics.height/2,this.waveContainer.style.webkitTransform="translate("+e+"px, "+r+"px)",this.waveContainer.style.transform="translate3d("+e+"px, "+r+"px, 0)",this.wave.style.webkitTransform="scale("+t+","+t+")",this.wave.style.transform="scale3d("+t+","+t+",1)"},downAction:function(t){var e=this.containerMetrics.width/2,r=this.containerMetrics.height/2;this.resetInteractionState(),this.mouseDownStart=Pe.now(),this.center?(this.xStart=e,this.yStart=r,this.slideDistance=Pe.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)):(this.xStart=t?t.detail.x-this.containerMetrics.boundingRect.left:this.containerMetrics.width/2,this.yStart=t?t.detail.y-this.containerMetrics.boundingRect.top:this.containerMetrics.height/2),this.recenters&&(this.xEnd=e,this.yEnd=r,this.slideDistance=Pe.distance(this.xStart,this.yStart,this.xEnd,this.yEnd)),this.maxRadius=this.containerMetrics.furthestCornerDistanceFrom(this.xStart,this.yStart),this.waveContainer.style.top=(this.containerMetrics.height-this.containerMetrics.size)/2+"px",this.waveContainer.style.left=(this.containerMetrics.width-this.containerMetrics.size)/2+"px",this.waveContainer.style.width=this.containerMetrics.size+"px",this.waveContainer.style.height=this.containerMetrics.size+"px"},upAction:function(t){!this.isMouseDown||(this.mouseUpStart=Pe.now())},remove:function(){j(j(this.waveContainer).parentNode).removeChild(this.waveContainer)}};K({_template:I`
    <style>
      :host {
        display: block;
        position: absolute;
        border-radius: inherit;
        overflow: hidden;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;

        /* See PolymerElements/paper-behaviors/issues/34. On non-Chrome browsers,
         * creating a node (with a position:absolute) in the middle of an event
         * handler "interrupts" that event handler (which happens when the
         * ripple is created on demand) */
        pointer-events: none;
      }

      :host([animating]) {
        /* This resolves a rendering issue in Chrome (as of 40) where the
           ripple is not properly clipped by its parent (which may have
           rounded corners). See: http://jsbin.com/temexa/4

           Note: We only apply this style conditionally. Otherwise, the browser
           will create a new compositing layer for every ripple element on the
           page, and that would be bad. */
        -webkit-transform: translate(0, 0);
        transform: translate3d(0, 0, 0);
      }

      #background,
      #waves,
      .wave-container,
      .wave {
        pointer-events: none;
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }

      #background,
      .wave {
        opacity: 0;
      }

      #waves,
      .wave {
        overflow: hidden;
      }

      .wave-container,
      .wave {
        border-radius: 50%;
      }

      :host(.circle) #background,
      :host(.circle) #waves {
        border-radius: 50%;
      }

      :host(.circle) .wave-container {
        overflow: hidden;
      }
    </style>

    <div id="background"></div>
    <div id="waves"></div>
`,is:"paper-ripple",behaviors:[ft],properties:{initialOpacity:{type:Number,value:.25},opacityDecayVelocity:{type:Number,value:.8},recenters:{type:Boolean,value:!1},center:{type:Boolean,value:!1},ripples:{type:Array,value:function(){return[]}},animating:{type:Boolean,readOnly:!0,reflectToAttribute:!0,value:!1},holdDown:{type:Boolean,value:!1,observer:"_holdDownChanged"},noink:{type:Boolean,value:!1},_animating:{type:Boolean},_boundAnimate:{type:Function,value:function(){return this.animate.bind(this)}}},get target(){return this.keyEventTarget},keyBindings:{"enter:keydown":"_onEnterKeydown","space:keydown":"_onSpaceKeydown","space:keyup":"_onSpaceKeyup"},attached:function(){j(this).parentNode.nodeType==11?this.keyEventTarget=j(this).getOwnerRoot().host:this.keyEventTarget=j(this).parentNode;var t=this.keyEventTarget;this.listen(t,"up","uiUpAction"),this.listen(t,"down","uiDownAction")},detached:function(){this.unlisten(this.keyEventTarget,"up","uiUpAction"),this.unlisten(this.keyEventTarget,"down","uiDownAction"),this.keyEventTarget=null},get shouldKeepAnimating(){for(var t=0;t<this.ripples.length;++t)if(!this.ripples[t].isAnimationComplete)return!0;return!1},simulatedRipple:function(){this.downAction(null),this.async(function(){this.upAction()},1)},uiDownAction:function(t){this.noink||this.downAction(t)},downAction:function(t){if(!(this.holdDown&&this.ripples.length>0)){var e=this.addRipple();e.downAction(t),this._animating||(this._animating=!0,this.animate())}},uiUpAction:function(t){this.noink||this.upAction(t)},upAction:function(t){this.holdDown||(this.ripples.forEach(function(e){e.upAction(t)}),this._animating=!0,this.animate())},onAnimationComplete:function(){this._animating=!1,this.$.background.style.backgroundColor="",this.fire("transitionend")},addRipple:function(){var t=new jt(this);return j(this.$.waves).appendChild(t.waveContainer),this.$.background.style.backgroundColor=t.color,this.ripples.push(t),this._setAnimating(!0),t},removeRipple:function(t){var e=this.ripples.indexOf(t);e<0||(this.ripples.splice(e,1),t.remove(),this.ripples.length||this._setAnimating(!1))},animate:function(){if(!!this._animating){var t,e;for(t=0;t<this.ripples.length;++t)e=this.ripples[t],e.draw(),this.$.background.style.opacity=e.outerOpacity,e.isOpacityFullyDecayed&&!e.isRestingAtMaxRadius&&this.removeRipple(e);!this.shouldKeepAnimating&&this.ripples.length===0?this.onAnimationComplete():window.requestAnimationFrame(this._boundAnimate)}},animateRipple:function(){return this.animate()},_onEnterKeydown:function(){this.uiDownAction(),this.async(this.uiUpAction,1)},_onSpaceKeydown:function(){this.uiDownAction()},_onSpaceKeyup:function(){this.uiUpAction()},_holdDownChanged:function(t,e){e!==void 0&&(t?this.downAction():this.upAction())}});var uu={properties:{noink:{type:Boolean,observer:"_noinkChanged"},_rippleContainer:{type:Object}},_buttonStateChanged:function(){this.focused&&this.ensureRipple()},_downHandler:function(t){lu._downHandler.call(this,t),this.pressed&&this.ensureRipple(t)},ensureRipple:function(t){if(!this.hasRipple()){this._ripple=this._createRipple(),this._ripple.noink=this.noink;var e=this._rippleContainer||this.root;if(e&&j(e).appendChild(this._ripple),t){var r=j(this._rippleContainer||this),i=j(t).rootTarget;r.deepContains(i)&&this._ripple.uiDownAction(t)}}},getRipple:function(){return this.ensureRipple(),this._ripple},hasRipple:function(){return Boolean(this._ripple)},_createRipple:function(){var t=document.createElement("paper-ripple");return t},_noinkChanged:function(t){this.hasRipple()&&(this._ripple.noink=t)}};var Ko={observers:["_focusedChanged(receivedFocusFromKeyboard)"],_focusedChanged:function(t){t&&this.ensureRipple(),this.hasRipple()&&(this._ripple.holdDown=t)},_createRipple:function(){var t=uu._createRipple();return t.id="ink",t.setAttribute("center",""),t.classList.add("circle"),t}},Im=[Dm,Li,uu,Ko];var Qo={properties:{value:{type:Number,value:0,notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0},max:{type:Number,value:100,notify:!0},step:{type:Number,value:1,notify:!0},ratio:{type:Number,value:0,readOnly:!0,notify:!0}},observers:["_update(value, min, max, step)"],_calcRatio:function(t){return(this._clampValue(t)-this.min)/(this.max-this.min)},_clampValue:function(t){return Math.min(this.max,Math.max(this.min,this._calcStep(t)))},_calcStep:function(t){if(t=parseFloat(t),!this.step)return t;var e=Math.round((t-this.min)/this.step);return this.step<1?e/(1/this.step)+this.min:e*this.step+this.min},_validateValue:function(){var t=this._clampValue(this.value);return this.value=this.oldValue=isNaN(t)?this.oldValue:t,this.value!==t},_update:function(){this._validateValue(),this._setRatio(this._calcRatio(this.value)*100)}};var Mm=I`
<custom-style>
  <style is="custom-style">
    [hidden] {
      display: none !important;
    }
  </style>
</custom-style>
<custom-style>
  <style is="custom-style">
    html {

      --layout: {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
      };

      --layout-inline: {
        display: -ms-inline-flexbox;
        display: -webkit-inline-flex;
        display: inline-flex;
      };

      --layout-horizontal: {
        @apply --layout;

        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
      };

      --layout-horizontal-reverse: {
        @apply --layout;

        -ms-flex-direction: row-reverse;
        -webkit-flex-direction: row-reverse;
        flex-direction: row-reverse;
      };

      --layout-vertical: {
        @apply --layout;

        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;
      };

      --layout-vertical-reverse: {
        @apply --layout;

        -ms-flex-direction: column-reverse;
        -webkit-flex-direction: column-reverse;
        flex-direction: column-reverse;
      };

      --layout-wrap: {
        -ms-flex-wrap: wrap;
        -webkit-flex-wrap: wrap;
        flex-wrap: wrap;
      };

      --layout-wrap-reverse: {
        -ms-flex-wrap: wrap-reverse;
        -webkit-flex-wrap: wrap-reverse;
        flex-wrap: wrap-reverse;
      };

      --layout-flex-auto: {
        -ms-flex: 1 1 auto;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;
      };

      --layout-flex-none: {
        -ms-flex: none;
        -webkit-flex: none;
        flex: none;
      };

      --layout-flex: {
        -ms-flex: 1 1 0.000000001px;
        -webkit-flex: 1;
        flex: 1;
        -webkit-flex-basis: 0.000000001px;
        flex-basis: 0.000000001px;
      };

      --layout-flex-2: {
        -ms-flex: 2;
        -webkit-flex: 2;
        flex: 2;
      };

      --layout-flex-3: {
        -ms-flex: 3;
        -webkit-flex: 3;
        flex: 3;
      };

      --layout-flex-4: {
        -ms-flex: 4;
        -webkit-flex: 4;
        flex: 4;
      };

      --layout-flex-5: {
        -ms-flex: 5;
        -webkit-flex: 5;
        flex: 5;
      };

      --layout-flex-6: {
        -ms-flex: 6;
        -webkit-flex: 6;
        flex: 6;
      };

      --layout-flex-7: {
        -ms-flex: 7;
        -webkit-flex: 7;
        flex: 7;
      };

      --layout-flex-8: {
        -ms-flex: 8;
        -webkit-flex: 8;
        flex: 8;
      };

      --layout-flex-9: {
        -ms-flex: 9;
        -webkit-flex: 9;
        flex: 9;
      };

      --layout-flex-10: {
        -ms-flex: 10;
        -webkit-flex: 10;
        flex: 10;
      };

      --layout-flex-11: {
        -ms-flex: 11;
        -webkit-flex: 11;
        flex: 11;
      };

      --layout-flex-12: {
        -ms-flex: 12;
        -webkit-flex: 12;
        flex: 12;
      };

      /* alignment in cross axis */

      --layout-start: {
        -ms-flex-align: start;
        -webkit-align-items: flex-start;
        align-items: flex-start;
      };

      --layout-center: {
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
      };

      --layout-end: {
        -ms-flex-align: end;
        -webkit-align-items: flex-end;
        align-items: flex-end;
      };

      --layout-baseline: {
        -ms-flex-align: baseline;
        -webkit-align-items: baseline;
        align-items: baseline;
      };

      /* alignment in main axis */

      --layout-start-justified: {
        -ms-flex-pack: start;
        -webkit-justify-content: flex-start;
        justify-content: flex-start;
      };

      --layout-center-justified: {
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;
      };

      --layout-end-justified: {
        -ms-flex-pack: end;
        -webkit-justify-content: flex-end;
        justify-content: flex-end;
      };

      --layout-around-justified: {
        -ms-flex-pack: distribute;
        -webkit-justify-content: space-around;
        justify-content: space-around;
      };

      --layout-justified: {
        -ms-flex-pack: justify;
        -webkit-justify-content: space-between;
        justify-content: space-between;
      };

      --layout-center-center: {
        @apply --layout-center;
        @apply --layout-center-justified;
      };

      /* self alignment */

      --layout-self-start: {
        -ms-align-self: flex-start;
        -webkit-align-self: flex-start;
        align-self: flex-start;
      };

      --layout-self-center: {
        -ms-align-self: center;
        -webkit-align-self: center;
        align-self: center;
      };

      --layout-self-end: {
        -ms-align-self: flex-end;
        -webkit-align-self: flex-end;
        align-self: flex-end;
      };

      --layout-self-stretch: {
        -ms-align-self: stretch;
        -webkit-align-self: stretch;
        align-self: stretch;
      };

      --layout-self-baseline: {
        -ms-align-self: baseline;
        -webkit-align-self: baseline;
        align-self: baseline;
      };

      /* multi-line alignment in main axis */

      --layout-start-aligned: {
        -ms-flex-line-pack: start;  /* IE10 */
        -ms-align-content: flex-start;
        -webkit-align-content: flex-start;
        align-content: flex-start;
      };

      --layout-end-aligned: {
        -ms-flex-line-pack: end;  /* IE10 */
        -ms-align-content: flex-end;
        -webkit-align-content: flex-end;
        align-content: flex-end;
      };

      --layout-center-aligned: {
        -ms-flex-line-pack: center;  /* IE10 */
        -ms-align-content: center;
        -webkit-align-content: center;
        align-content: center;
      };

      --layout-between-aligned: {
        -ms-flex-line-pack: justify;  /* IE10 */
        -ms-align-content: space-between;
        -webkit-align-content: space-between;
        align-content: space-between;
      };

      --layout-around-aligned: {
        -ms-flex-line-pack: distribute;  /* IE10 */
        -ms-align-content: space-around;
        -webkit-align-content: space-around;
        align-content: space-around;
      };

      /*******************************
                Other Layout
      *******************************/

      --layout-block: {
        display: block;
      };

      --layout-invisible: {
        visibility: hidden !important;
      };

      --layout-relative: {
        position: relative;
      };

      --layout-fit: {
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-scroll: {
        -webkit-overflow-scrolling: touch;
        overflow: auto;
      };

      --layout-fullbleed: {
        margin: 0;
        height: 100vh;
      };

      /* fixed position */

      --layout-fixed-top: {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
      };

      --layout-fixed-right: {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
      };

      --layout-fixed-bottom: {
        position: fixed;
        right: 0;
        bottom: 0;
        left: 0;
      };

      --layout-fixed-left: {
        position: fixed;
        top: 0;
        bottom: 0;
        left: 0;
      };

    }
  </style>
</custom-style>`;Mm.setAttribute("style","display: none;");document.head.appendChild(Mm.content);var Rm=document.createElement("style");Rm.textContent="[hidden] { display: none !important; }";document.head.appendChild(Rm);var jm=I`
<custom-style>
  <style is="custom-style">
    html {

      /* Material Design color palette for Google products */

      --google-red-100: #f4c7c3;
      --google-red-300: #e67c73;
      --google-red-500: #db4437;
      --google-red-700: #c53929;

      --google-blue-100: #c6dafc;
      --google-blue-300: #7baaf7;
      --google-blue-500: #4285f4;
      --google-blue-700: #3367d6;

      --google-green-100: #b7e1cd;
      --google-green-300: #57bb8a;
      --google-green-500: #0f9d58;
      --google-green-700: #0b8043;

      --google-yellow-100: #fce8b2;
      --google-yellow-300: #f7cb4d;
      --google-yellow-500: #f4b400;
      --google-yellow-700: #f09300;

      --google-grey-100: #f5f5f5;
      --google-grey-300: #e0e0e0;
      --google-grey-500: #9e9e9e;
      --google-grey-700: #616161;

      /* Material Design color palette from online spec document */

      --paper-red-50: #ffebee;
      --paper-red-100: #ffcdd2;
      --paper-red-200: #ef9a9a;
      --paper-red-300: #e57373;
      --paper-red-400: #ef5350;
      --paper-red-500: #f44336;
      --paper-red-600: #e53935;
      --paper-red-700: #d32f2f;
      --paper-red-800: #c62828;
      --paper-red-900: #b71c1c;
      --paper-red-a100: #ff8a80;
      --paper-red-a200: #ff5252;
      --paper-red-a400: #ff1744;
      --paper-red-a700: #d50000;

      --paper-pink-50: #fce4ec;
      --paper-pink-100: #f8bbd0;
      --paper-pink-200: #f48fb1;
      --paper-pink-300: #f06292;
      --paper-pink-400: #ec407a;
      --paper-pink-500: #e91e63;
      --paper-pink-600: #d81b60;
      --paper-pink-700: #c2185b;
      --paper-pink-800: #ad1457;
      --paper-pink-900: #880e4f;
      --paper-pink-a100: #ff80ab;
      --paper-pink-a200: #ff4081;
      --paper-pink-a400: #f50057;
      --paper-pink-a700: #c51162;

      --paper-purple-50: #f3e5f5;
      --paper-purple-100: #e1bee7;
      --paper-purple-200: #ce93d8;
      --paper-purple-300: #ba68c8;
      --paper-purple-400: #ab47bc;
      --paper-purple-500: #9c27b0;
      --paper-purple-600: #8e24aa;
      --paper-purple-700: #7b1fa2;
      --paper-purple-800: #6a1b9a;
      --paper-purple-900: #4a148c;
      --paper-purple-a100: #ea80fc;
      --paper-purple-a200: #e040fb;
      --paper-purple-a400: #d500f9;
      --paper-purple-a700: #aa00ff;

      --paper-deep-purple-50: #ede7f6;
      --paper-deep-purple-100: #d1c4e9;
      --paper-deep-purple-200: #b39ddb;
      --paper-deep-purple-300: #9575cd;
      --paper-deep-purple-400: #7e57c2;
      --paper-deep-purple-500: #673ab7;
      --paper-deep-purple-600: #5e35b1;
      --paper-deep-purple-700: #512da8;
      --paper-deep-purple-800: #4527a0;
      --paper-deep-purple-900: #311b92;
      --paper-deep-purple-a100: #b388ff;
      --paper-deep-purple-a200: #7c4dff;
      --paper-deep-purple-a400: #651fff;
      --paper-deep-purple-a700: #6200ea;

      --paper-indigo-50: #e8eaf6;
      --paper-indigo-100: #c5cae9;
      --paper-indigo-200: #9fa8da;
      --paper-indigo-300: #7986cb;
      --paper-indigo-400: #5c6bc0;
      --paper-indigo-500: #3f51b5;
      --paper-indigo-600: #3949ab;
      --paper-indigo-700: #303f9f;
      --paper-indigo-800: #283593;
      --paper-indigo-900: #1a237e;
      --paper-indigo-a100: #8c9eff;
      --paper-indigo-a200: #536dfe;
      --paper-indigo-a400: #3d5afe;
      --paper-indigo-a700: #304ffe;

      --paper-blue-50: #e3f2fd;
      --paper-blue-100: #bbdefb;
      --paper-blue-200: #90caf9;
      --paper-blue-300: #64b5f6;
      --paper-blue-400: #42a5f5;
      --paper-blue-500: #2196f3;
      --paper-blue-600: #1e88e5;
      --paper-blue-700: #1976d2;
      --paper-blue-800: #1565c0;
      --paper-blue-900: #0d47a1;
      --paper-blue-a100: #82b1ff;
      --paper-blue-a200: #448aff;
      --paper-blue-a400: #2979ff;
      --paper-blue-a700: #2962ff;

      --paper-light-blue-50: #e1f5fe;
      --paper-light-blue-100: #b3e5fc;
      --paper-light-blue-200: #81d4fa;
      --paper-light-blue-300: #4fc3f7;
      --paper-light-blue-400: #29b6f6;
      --paper-light-blue-500: #03a9f4;
      --paper-light-blue-600: #039be5;
      --paper-light-blue-700: #0288d1;
      --paper-light-blue-800: #0277bd;
      --paper-light-blue-900: #01579b;
      --paper-light-blue-a100: #80d8ff;
      --paper-light-blue-a200: #40c4ff;
      --paper-light-blue-a400: #00b0ff;
      --paper-light-blue-a700: #0091ea;

      --paper-cyan-50: #e0f7fa;
      --paper-cyan-100: #b2ebf2;
      --paper-cyan-200: #80deea;
      --paper-cyan-300: #4dd0e1;
      --paper-cyan-400: #26c6da;
      --paper-cyan-500: #00bcd4;
      --paper-cyan-600: #00acc1;
      --paper-cyan-700: #0097a7;
      --paper-cyan-800: #00838f;
      --paper-cyan-900: #006064;
      --paper-cyan-a100: #84ffff;
      --paper-cyan-a200: #18ffff;
      --paper-cyan-a400: #00e5ff;
      --paper-cyan-a700: #00b8d4;

      --paper-teal-50: #e0f2f1;
      --paper-teal-100: #b2dfdb;
      --paper-teal-200: #80cbc4;
      --paper-teal-300: #4db6ac;
      --paper-teal-400: #26a69a;
      --paper-teal-500: #009688;
      --paper-teal-600: #00897b;
      --paper-teal-700: #00796b;
      --paper-teal-800: #00695c;
      --paper-teal-900: #004d40;
      --paper-teal-a100: #a7ffeb;
      --paper-teal-a200: #64ffda;
      --paper-teal-a400: #1de9b6;
      --paper-teal-a700: #00bfa5;

      --paper-green-50: #e8f5e9;
      --paper-green-100: #c8e6c9;
      --paper-green-200: #a5d6a7;
      --paper-green-300: #81c784;
      --paper-green-400: #66bb6a;
      --paper-green-500: #4caf50;
      --paper-green-600: #43a047;
      --paper-green-700: #388e3c;
      --paper-green-800: #2e7d32;
      --paper-green-900: #1b5e20;
      --paper-green-a100: #b9f6ca;
      --paper-green-a200: #69f0ae;
      --paper-green-a400: #00e676;
      --paper-green-a700: #00c853;

      --paper-light-green-50: #f1f8e9;
      --paper-light-green-100: #dcedc8;
      --paper-light-green-200: #c5e1a5;
      --paper-light-green-300: #aed581;
      --paper-light-green-400: #9ccc65;
      --paper-light-green-500: #8bc34a;
      --paper-light-green-600: #7cb342;
      --paper-light-green-700: #689f38;
      --paper-light-green-800: #558b2f;
      --paper-light-green-900: #33691e;
      --paper-light-green-a100: #ccff90;
      --paper-light-green-a200: #b2ff59;
      --paper-light-green-a400: #76ff03;
      --paper-light-green-a700: #64dd17;

      --paper-lime-50: #f9fbe7;
      --paper-lime-100: #f0f4c3;
      --paper-lime-200: #e6ee9c;
      --paper-lime-300: #dce775;
      --paper-lime-400: #d4e157;
      --paper-lime-500: #cddc39;
      --paper-lime-600: #c0ca33;
      --paper-lime-700: #afb42b;
      --paper-lime-800: #9e9d24;
      --paper-lime-900: #827717;
      --paper-lime-a100: #f4ff81;
      --paper-lime-a200: #eeff41;
      --paper-lime-a400: #c6ff00;
      --paper-lime-a700: #aeea00;

      --paper-yellow-50: #fffde7;
      --paper-yellow-100: #fff9c4;
      --paper-yellow-200: #fff59d;
      --paper-yellow-300: #fff176;
      --paper-yellow-400: #ffee58;
      --paper-yellow-500: #ffeb3b;
      --paper-yellow-600: #fdd835;
      --paper-yellow-700: #fbc02d;
      --paper-yellow-800: #f9a825;
      --paper-yellow-900: #f57f17;
      --paper-yellow-a100: #ffff8d;
      --paper-yellow-a200: #ffff00;
      --paper-yellow-a400: #ffea00;
      --paper-yellow-a700: #ffd600;

      --paper-amber-50: #fff8e1;
      --paper-amber-100: #ffecb3;
      --paper-amber-200: #ffe082;
      --paper-amber-300: #ffd54f;
      --paper-amber-400: #ffca28;
      --paper-amber-500: #ffc107;
      --paper-amber-600: #ffb300;
      --paper-amber-700: #ffa000;
      --paper-amber-800: #ff8f00;
      --paper-amber-900: #ff6f00;
      --paper-amber-a100: #ffe57f;
      --paper-amber-a200: #ffd740;
      --paper-amber-a400: #ffc400;
      --paper-amber-a700: #ffab00;

      --paper-orange-50: #fff3e0;
      --paper-orange-100: #ffe0b2;
      --paper-orange-200: #ffcc80;
      --paper-orange-300: #ffb74d;
      --paper-orange-400: #ffa726;
      --paper-orange-500: #ff9800;
      --paper-orange-600: #fb8c00;
      --paper-orange-700: #f57c00;
      --paper-orange-800: #ef6c00;
      --paper-orange-900: #e65100;
      --paper-orange-a100: #ffd180;
      --paper-orange-a200: #ffab40;
      --paper-orange-a400: #ff9100;
      --paper-orange-a700: #ff6500;

      --paper-deep-orange-50: #fbe9e7;
      --paper-deep-orange-100: #ffccbc;
      --paper-deep-orange-200: #ffab91;
      --paper-deep-orange-300: #ff8a65;
      --paper-deep-orange-400: #ff7043;
      --paper-deep-orange-500: #ff5722;
      --paper-deep-orange-600: #f4511e;
      --paper-deep-orange-700: #e64a19;
      --paper-deep-orange-800: #d84315;
      --paper-deep-orange-900: #bf360c;
      --paper-deep-orange-a100: #ff9e80;
      --paper-deep-orange-a200: #ff6e40;
      --paper-deep-orange-a400: #ff3d00;
      --paper-deep-orange-a700: #dd2c00;

      --paper-brown-50: #efebe9;
      --paper-brown-100: #d7ccc8;
      --paper-brown-200: #bcaaa4;
      --paper-brown-300: #a1887f;
      --paper-brown-400: #8d6e63;
      --paper-brown-500: #795548;
      --paper-brown-600: #6d4c41;
      --paper-brown-700: #5d4037;
      --paper-brown-800: #4e342e;
      --paper-brown-900: #3e2723;

      --paper-grey-50: #fafafa;
      --paper-grey-100: #f5f5f5;
      --paper-grey-200: #eeeeee;
      --paper-grey-300: #e0e0e0;
      --paper-grey-400: #bdbdbd;
      --paper-grey-500: #9e9e9e;
      --paper-grey-600: #757575;
      --paper-grey-700: #616161;
      --paper-grey-800: #424242;
      --paper-grey-900: #212121;

      --paper-blue-grey-50: #eceff1;
      --paper-blue-grey-100: #cfd8dc;
      --paper-blue-grey-200: #b0bec5;
      --paper-blue-grey-300: #90a4ae;
      --paper-blue-grey-400: #78909c;
      --paper-blue-grey-500: #607d8b;
      --paper-blue-grey-600: #546e7a;
      --paper-blue-grey-700: #455a64;
      --paper-blue-grey-800: #37474f;
      --paper-blue-grey-900: #263238;

      /* opacity for dark text on a light background */
      --dark-divider-opacity: 0.12;
      --dark-disabled-opacity: 0.38; /* or hint text or icon */
      --dark-secondary-opacity: 0.54;
      --dark-primary-opacity: 0.87;

      /* opacity for light text on a dark background */
      --light-divider-opacity: 0.12;
      --light-disabled-opacity: 0.3; /* or hint text or icon */
      --light-secondary-opacity: 0.7;
      --light-primary-opacity: 1.0;

    }

  </style>
</custom-style>
`;jm.setAttribute("style","display: none;");document.head.appendChild(jm.content);K({_template:I`
    <style>
      :host {
        display: block;
        width: 200px;
        position: relative;
        overflow: hidden;
      }

      :host([hidden]), [hidden] {
        display: none !important;
      }

      #progressContainer {
        @apply --paper-progress-container;
        position: relative;
      }

      #progressContainer,
      /* the stripe for the indeterminate animation*/
      .indeterminate::after {
        height: var(--paper-progress-height, 4px);
      }

      #primaryProgress,
      #secondaryProgress,
      .indeterminate::after {
        @apply --layout-fit;
      }

      #progressContainer,
      .indeterminate::after {
        background: var(--paper-progress-container-color, var(--google-grey-300));
      }

      :host(.transiting) #primaryProgress,
      :host(.transiting) #secondaryProgress {
        -webkit-transition-property: -webkit-transform;
        transition-property: transform;

        /* Duration */
        -webkit-transition-duration: var(--paper-progress-transition-duration, 0.08s);
        transition-duration: var(--paper-progress-transition-duration, 0.08s);

        /* Timing function */
        -webkit-transition-timing-function: var(--paper-progress-transition-timing-function, ease);
        transition-timing-function: var(--paper-progress-transition-timing-function, ease);

        /* Delay */
        -webkit-transition-delay: var(--paper-progress-transition-delay, 0s);
        transition-delay: var(--paper-progress-transition-delay, 0s);
      }

      #primaryProgress,
      #secondaryProgress {
        @apply --layout-fit;
        -webkit-transform-origin: left center;
        transform-origin: left center;
        -webkit-transform: scaleX(0);
        transform: scaleX(0);
        will-change: transform;
      }

      #primaryProgress {
        background: var(--paper-progress-active-color, var(--google-green-500));
      }

      #secondaryProgress {
        background: var(--paper-progress-secondary-color, var(--google-green-100));
      }

      :host([disabled]) #primaryProgress {
        background: var(--paper-progress-disabled-active-color, var(--google-grey-500));
      }

      :host([disabled]) #secondaryProgress {
        background: var(--paper-progress-disabled-secondary-color, var(--google-grey-300));
      }

      :host(:not([disabled])) #primaryProgress.indeterminate {
        -webkit-transform-origin: right center;
        transform-origin: right center;
        -webkit-animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-bar var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      :host(:not([disabled])) #primaryProgress.indeterminate::after {
        content: "";
        -webkit-transform-origin: center center;
        transform-origin: center center;

        -webkit-animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
        animation: indeterminate-splitter var(--paper-progress-indeterminate-cycle-duration, 2s) linear infinite;
      }

      @-webkit-keyframes indeterminate-bar {
        0% {
          -webkit-transform: scaleX(1) translateX(-100%);
        }
        50% {
          -webkit-transform: scaleX(1) translateX(0%);
        }
        75% {
          -webkit-transform: scaleX(1) translateX(0%);
          -webkit-animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          -webkit-transform: scaleX(0) translateX(0%);
        }
      }

      @-webkit-keyframes indeterminate-splitter {
        0% {
          -webkit-transform: scaleX(.75) translateX(-125%);
        }
        30% {
          -webkit-transform: scaleX(.75) translateX(-125%);
          -webkit-animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
        100% {
          -webkit-transform: scaleX(.75) translateX(125%);
        }
      }

      @keyframes indeterminate-bar {
        0% {
          transform: scaleX(1) translateX(-100%);
        }
        50% {
          transform: scaleX(1) translateX(0%);
        }
        75% {
          transform: scaleX(1) translateX(0%);
          animation-timing-function: cubic-bezier(.28,.62,.37,.91);
        }
        100% {
          transform: scaleX(0) translateX(0%);
        }
      }

      @keyframes indeterminate-splitter {
        0% {
          transform: scaleX(.75) translateX(-125%);
        }
        30% {
          transform: scaleX(.75) translateX(-125%);
          animation-timing-function: cubic-bezier(.42,0,.6,.8);
        }
        90% {
          transform: scaleX(.75) translateX(125%);
        }
        100% {
          transform: scaleX(.75) translateX(125%);
        }
      }
    </style>

    <div id="progressContainer">
      <div id="secondaryProgress" hidden\$="[[_hideSecondaryProgress(secondaryRatio)]]"></div>
      <div id="primaryProgress"></div>
    </div>
`,is:"paper-progress",behaviors:[Qo],properties:{secondaryProgress:{type:Number,value:0},secondaryRatio:{type:Number,value:0,readOnly:!0},indeterminate:{type:Boolean,value:!1,observer:"_toggleIndeterminate"},disabled:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_disabledChanged"}},observers:["_progressChanged(secondaryProgress, value, min, max, indeterminate)"],hostAttributes:{role:"progressbar"},_toggleIndeterminate:function(t){this.toggleClass("indeterminate",t,this.$.primaryProgress)},_transformProgress:function(t,e){var r="scaleX("+e/100+")";t.style.transform=t.style.webkitTransform=r},_mainRatioChanged:function(t){this._transformProgress(this.$.primaryProgress,t)},_progressChanged:function(t,e,r,i,n){t=this._clampValue(t),e=this._clampValue(e);var o=this._calcRatio(t)*100,s=this._calcRatio(e)*100;this._setSecondaryRatio(o),this._transformProgress(this.$.secondaryProgress,o),this._transformProgress(this.$.primaryProgress,s),this.secondaryProgress=t,n?this.removeAttribute("aria-valuenow"):this.setAttribute("aria-valuenow",e),this.setAttribute("aria-valuemin",r),this.setAttribute("aria-valuemax",i)},_disabledChanged:function(t){this.setAttribute("aria-disabled",t?"true":"false")},_hideSecondaryProgress:function(t){return t===0}});var ke=K({_template:I`
    <style>
      :host {
        display: inline-block;
        position: fixed;
        clip: rect(0px,0px,0px,0px);
      }
    </style>
    <div aria-live$="[[mode]]">[[_text]]</div>
`,is:"iron-a11y-announcer",properties:{mode:{type:String,value:"polite"},timeout:{type:Number,value:150},_text:{type:String,value:""}},created:function(){ke.instance||(ke.instance=this),document.addEventListener("iron-announce",this._onIronAnnounce.bind(this))},announce:function(t){this._text="",this.async(function(){this._text=t},this.timeout)},_onIronAnnounce:function(t){t.detail&&t.detail.text&&this.announce(t.detail.text)}});ke.instance=null;ke.requestAvailability=function(){ke.instance||(ke.instance=document.createElement("iron-a11y-announcer")),document.body?document.body.appendChild(ke.instance):document.addEventListener("load",function(){document.body.appendChild(ke.instance)})};var ie=class{constructor(e){ie[" "](e),this.type=e&&e.type||"default",this.key=e&&e.key,e&&"value"in e&&(this.value=e.value)}get value(){var e=this.type,r=this.key;if(e&&r)return ie.types[e]&&ie.types[e][r]}set value(e){var r=this.type,i=this.key;r&&i&&(r=ie.types[r]=ie.types[r]||{},e==null?delete r[i]:r[i]=e)}get list(){var e=this.type;if(e){var r=ie.types[this.type];return r?Object.keys(r).map(function(i){return Pw[this.type][i]},this):[]}}byKey(e){return this.key=e,this.value}};ie[" "]=function(){};ie.types={};var Pw=ie.types;K({is:"iron-meta",properties:{type:{type:String,value:"default"},key:{type:String},value:{type:String,notify:!0},self:{type:Boolean,observer:"_selfChanged"},__meta:{type:Boolean,computed:"__computeMeta(type, key, value)"}},hostAttributes:{hidden:!0},__computeMeta:function(t,e,r){var i=new ie({type:t,key:e});return r!==void 0&&r!==i.value?i.value=r:this.value!==i.value&&(this.value=i.value),i},get list(){return this.__meta&&this.__meta.list},_selfChanged:function(t){t&&(this.value=this)},byKey:function(t){return new ie({type:this.type,key:t}).value}});var cu=null,pu={properties:{validator:{type:String},invalid:{notify:!0,reflectToAttribute:!0,type:Boolean,value:!1,observer:"_invalidChanged"}},registered:function(){cu=new ie({type:"validator"})},_invalidChanged:function(){this.invalid?this.setAttribute("aria-invalid","true"):this.removeAttribute("aria-invalid")},get _validator(){return cu&&cu.byKey(this.validator)},hasValidator:function(){return this._validator!=null},validate:function(t){return t===void 0&&this.value!==void 0?this.invalid=!this._getValidity(this.value):this.invalid=!this._getValidity(t),!this.invalid},_getValidity:function(t){return this.hasValidator()?this._validator.validate(t):!0}};K({_template:I`
    <style>
      :host {
        display: inline-block;
      }
    </style>
    <slot id="content"></slot>
`,is:"iron-input",behaviors:[pu],properties:{bindValue:{type:String,value:""},value:{type:String,computed:"_computeValue(bindValue)"},allowedPattern:{type:String},autoValidate:{type:Boolean,value:!1},_inputElement:Object},observers:["_bindValueChanged(bindValue, _inputElement)"],listeners:{input:"_onInput",keypress:"_onKeypress"},created:function(){ke.requestAvailability(),this._previousValidInput="",this._patternAlreadyChecked=!1},attached:function(){this._observer=j(this).observeNodes(function(t){this._initSlottedInput()}.bind(this))},detached:function(){this._observer&&(j(this).unobserveNodes(this._observer),this._observer=null)},get inputElement(){return this._inputElement},_initSlottedInput:function(){this._inputElement=this.getEffectiveChildren()[0],this.inputElement&&this.inputElement.value&&(this.bindValue=this.inputElement.value),this.fire("iron-input-ready")},get _patternRegExp(){var t;if(this.allowedPattern)t=new RegExp(this.allowedPattern);else switch(this.inputElement.type){case"number":t=/[0-9.,e-]/;break}return t},_bindValueChanged:function(t,e){!e||(t===void 0?e.value=null:t!==e.value&&(this.inputElement.value=t),this.autoValidate&&this.validate(),this.fire("bind-value-changed",{value:t}))},_onInput:function(){if(this.allowedPattern&&!this._patternAlreadyChecked){var t=this._checkPatternValidity();t||(this._announceInvalidCharacter("Invalid string of characters not entered."),this.inputElement.value=this._previousValidInput)}this.bindValue=this._previousValidInput=this.inputElement.value,this._patternAlreadyChecked=!1},_isPrintable:function(t){var e=t.keyCode==8||t.keyCode==9||t.keyCode==13||t.keyCode==27,r=t.keyCode==19||t.keyCode==20||t.keyCode==45||t.keyCode==46||t.keyCode==144||t.keyCode==145||t.keyCode>32&&t.keyCode<41||t.keyCode>111&&t.keyCode<124;return!e&&!(t.charCode==0&&r)},_onKeypress:function(t){if(!(!this.allowedPattern&&this.inputElement.type!=="number")){var e=this._patternRegExp;if(!!e&&!(t.metaKey||t.ctrlKey||t.altKey)){this._patternAlreadyChecked=!0;var r=String.fromCharCode(t.charCode);this._isPrintable(t)&&!e.test(r)&&(t.preventDefault(),this._announceInvalidCharacter("Invalid character "+r+" not entered."))}}},_checkPatternValidity:function(){var t=this._patternRegExp;if(!t)return!0;for(var e=0;e<this.inputElement.value.length;e++)if(!t.test(this.inputElement.value[e]))return!1;return!0},validate:function(){if(!this.inputElement)return this.invalid=!1,!0;var t=this.inputElement.checkValidity();return t&&(this.required&&this.bindValue===""?t=!1:this.hasValidator()&&(t=pu.validate.call(this,this.bindValue))),this.invalid=!t,this.fire("iron-input-validate"),t},_announceInvalidCharacter:function(t){this.fire("iron-announce",{text:t})},_computeValue:function(t){return t}});if(!window.polymerSkipLoadingFontRoboto){let t=document.createElement("link");t.rel="stylesheet",t.type="text/css",t.crossOrigin="anonymous",t.href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,700|Roboto:400,300,300italic,400italic,500,500italic,700,700italic",document.head.appendChild(t)}var Fm=I`<custom-style>
  <style is="custom-style">
    html {

      /* Shared Styles */
      --paper-font-common-base: {
        font-family: 'Roboto', 'Noto', sans-serif;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-code: {
        font-family: 'Roboto Mono', 'Consolas', 'Menlo', monospace;
        -webkit-font-smoothing: antialiased;
      };

      --paper-font-common-expensive-kerning: {
        text-rendering: optimizeLegibility;
      };

      --paper-font-common-nowrap: {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      };

      /* Material Font Styles */

      --paper-font-display4: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 112px;
        font-weight: 300;
        letter-spacing: -.044em;
        line-height: 120px;
      };

      --paper-font-display3: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 56px;
        font-weight: 400;
        letter-spacing: -.026em;
        line-height: 60px;
      };

      --paper-font-display2: {
        @apply --paper-font-common-base;

        font-size: 45px;
        font-weight: 400;
        letter-spacing: -.018em;
        line-height: 48px;
      };

      --paper-font-display1: {
        @apply --paper-font-common-base;

        font-size: 34px;
        font-weight: 400;
        letter-spacing: -.01em;
        line-height: 40px;
      };

      --paper-font-headline: {
        @apply --paper-font-common-base;

        font-size: 24px;
        font-weight: 400;
        letter-spacing: -.012em;
        line-height: 32px;
      };

      --paper-font-title: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 20px;
        font-weight: 500;
        line-height: 28px;
      };

      --paper-font-subhead: {
        @apply --paper-font-common-base;

        font-size: 16px;
        font-weight: 400;
        line-height: 24px;
      };

      --paper-font-body2: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-body1: {
        @apply --paper-font-common-base;

        font-size: 14px;
        font-weight: 400;
        line-height: 20px;
      };

      --paper-font-caption: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 12px;
        font-weight: 400;
        letter-spacing: 0.011em;
        line-height: 20px;
      };

      --paper-font-menu: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 13px;
        font-weight: 500;
        line-height: 24px;
      };

      --paper-font-button: {
        @apply --paper-font-common-base;
        @apply --paper-font-common-nowrap;

        font-size: 14px;
        font-weight: 500;
        letter-spacing: 0.018em;
        line-height: 24px;
        text-transform: uppercase;
      };

      --paper-font-code2: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 700;
        line-height: 20px;
      };

      --paper-font-code1: {
        @apply --paper-font-common-code;

        font-size: 14px;
        font-weight: 500;
        line-height: 20px;
      };

    }

  </style>
</custom-style>`;Fm.setAttribute("style","display: none;");document.head.appendChild(Fm.content);var zo={attached:function(){this.fire("addon-attached")},update:function(t){}};K({_template:I`
    <style>
      :host {
        display: inline-block;
        float: right;

        @apply --paper-font-caption;
        @apply --paper-input-char-counter;
      }

      :host([hidden]) {
        display: none !important;
      }

      :host(:dir(rtl)) {
        float: left;
      }
    </style>

    <span>[[_charCounterStr]]</span>
`,is:"paper-input-char-counter",behaviors:[zo],properties:{_charCounterStr:{type:String,value:"0"}},update:function(t){if(!!t.inputElement){t.value=t.value||"";var e=t.value.toString().length.toString();t.inputElement.hasAttribute("maxlength")&&(e+="/"+t.inputElement.getAttribute("maxlength")),this._charCounterStr=e}}});var Lm=I`
<custom-style>
  <style is="custom-style">
    html {
      /*
       * You can use these generic variables in your elements for easy theming.
       * For example, if all your elements use \`--primary-text-color\` as its main
       * color, then switching from a light to a dark theme is just a matter of
       * changing the value of \`--primary-text-color\` in your application.
       */
      --primary-text-color: var(--light-theme-text-color);
      --primary-background-color: var(--light-theme-background-color);
      --secondary-text-color: var(--light-theme-secondary-color);
      --disabled-text-color: var(--light-theme-disabled-color);
      --divider-color: var(--light-theme-divider-color);
      --error-color: var(--paper-deep-orange-a700);

      /*
       * Primary and accent colors. Also see color.js for more colors.
       */
      --primary-color: var(--paper-indigo-500);
      --light-primary-color: var(--paper-indigo-100);
      --dark-primary-color: var(--paper-indigo-700);

      --accent-color: var(--paper-pink-a200);
      --light-accent-color: var(--paper-pink-a100);
      --dark-accent-color: var(--paper-pink-a400);


      /*
       * Material Design Light background theme
       */
      --light-theme-background-color: #ffffff;
      --light-theme-base-color: #000000;
      --light-theme-text-color: var(--paper-grey-900);
      --light-theme-secondary-color: #737373;  /* for secondary text and icons */
      --light-theme-disabled-color: #9b9b9b;  /* disabled/hint text */
      --light-theme-divider-color: #dbdbdb;

      /*
       * Material Design Dark background theme
       */
      --dark-theme-background-color: var(--paper-grey-900);
      --dark-theme-base-color: #ffffff;
      --dark-theme-text-color: #ffffff;
      --dark-theme-secondary-color: #bcbcbc;  /* for secondary text and icons */
      --dark-theme-disabled-color: #646464;  /* disabled/hint text */
      --dark-theme-divider-color: #3c3c3c;

      /*
       * Deprecated values because of their confusing names.
       */
      --text-primary-color: var(--dark-theme-text-color);
      --default-primary-color: var(--primary-color);
    }
  </style>
</custom-style>`;Lm.setAttribute("style","display: none;");document.head.appendChild(Lm.content);var Vm=I`
<custom-style>
  <style is="custom-style">
    html {
      --paper-input-container-shared-input-style: {
        position: relative; /* to make a stacking context */
        outline: none;
        box-shadow: none;
        padding: 0;
        margin: 0;
        width: 100%;
        max-width: 100%;
        background: transparent;
        border: none;
        color: var(--paper-input-container-input-color, var(--primary-text-color));
        -webkit-appearance: none;
        text-align: inherit;
        vertical-align: var(--paper-input-container-input-align, bottom);

        @apply --paper-font-subhead;
      };
    }
  </style>
</custom-style>
`;Vm.setAttribute("style","display: none;");document.head.appendChild(Vm.content);K({_template:I`
    <style>
      :host {
        display: block;
        padding: 8px 0;
        @apply --paper-input-container;
      }

      :host([inline]) {
        display: inline-block;
      }

      :host([disabled]) {
        pointer-events: none;
        opacity: 0.33;

        @apply --paper-input-container-disabled;
      }

      :host([hidden]) {
        display: none !important;
      }

      [hidden] {
        display: none !important;
      }

      .floated-label-placeholder {
        @apply --paper-font-caption;
      }

      .underline {
        height: 2px;
        position: relative;
      }

      .focused-line {
        @apply --layout-fit;
        border-bottom: 2px solid var(--paper-input-container-focus-color, var(--primary-color));

        -webkit-transform-origin: center center;
        transform-origin: center center;
        -webkit-transform: scale3d(0,1,1);
        transform: scale3d(0,1,1);

        @apply --paper-input-container-underline-focus;
      }

      .underline.is-highlighted .focused-line {
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply --paper-transition-easing;
      }

      .underline.is-invalid .focused-line {
        border-color: var(--paper-input-container-invalid-color, var(--error-color));
        -webkit-transform: none;
        transform: none;
        -webkit-transition: -webkit-transform 0.25s;
        transition: transform 0.25s;

        @apply --paper-transition-easing;
      }

      .unfocused-line {
        @apply --layout-fit;
        border-bottom: 1px solid var(--paper-input-container-color, var(--secondary-text-color));
        @apply --paper-input-container-underline;
      }

      :host([disabled]) .unfocused-line {
        border-bottom: 1px dashed;
        border-color: var(--paper-input-container-color, var(--secondary-text-color));
        @apply --paper-input-container-underline-disabled;
      }

      .input-wrapper {
        @apply --layout-horizontal;
        @apply --layout-center;
        position: relative;
      }

      .input-content {
        @apply --layout-flex-auto;
        @apply --layout-relative;
        max-width: 100%;
      }

      .input-content ::slotted(label),
      .input-content ::slotted(.paper-input-label) {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        font: inherit;
        color: var(--paper-input-container-color, var(--secondary-text-color));
        -webkit-transition: -webkit-transform 0.25s, width 0.25s;
        transition: transform 0.25s, width 0.25s;
        -webkit-transform-origin: left top;
        transform-origin: left top;
        /* Fix for safari not focusing 0-height date/time inputs with -webkit-apperance: none; */
        min-height: 1px;

        @apply --paper-font-common-nowrap;
        @apply --paper-font-subhead;
        @apply --paper-input-container-label;
        @apply --paper-transition-easing;
      }


      .input-content ::slotted(label):before,
      .input-content ::slotted(.paper-input-label):before {
        @apply --paper-input-container-label-before;
      }

      .input-content ::slotted(label):after,
      .input-content ::slotted(.paper-input-label):after {
        @apply --paper-input-container-label-after;
      }

      .input-content.label-is-floating ::slotted(label),
      .input-content.label-is-floating ::slotted(.paper-input-label) {
        -webkit-transform: translateY(-75%) scale(0.75);
        transform: translateY(-75%) scale(0.75);

        /* Since we scale to 75/100 of the size, we actually have 100/75 of the
        original space now available */
        width: 133%;

        @apply --paper-input-container-label-floating;
      }

      :host(:dir(rtl)) .input-content.label-is-floating ::slotted(label),
      :host(:dir(rtl)) .input-content.label-is-floating ::slotted(.paper-input-label) {
        right: 0;
        left: auto;
        -webkit-transform-origin: right top;
        transform-origin: right top;
      }

      .input-content.label-is-highlighted ::slotted(label),
      .input-content.label-is-highlighted ::slotted(.paper-input-label) {
        color: var(--paper-input-container-focus-color, var(--primary-color));

        @apply --paper-input-container-label-focus;
      }

      .input-content.is-invalid ::slotted(label),
      .input-content.is-invalid ::slotted(.paper-input-label) {
        color: var(--paper-input-container-invalid-color, var(--error-color));
      }

      .input-content.label-is-hidden ::slotted(label),
      .input-content.label-is-hidden ::slotted(.paper-input-label) {
        visibility: hidden;
      }

      .input-content ::slotted(input),
      .input-content ::slotted(iron-input),
      .input-content ::slotted(textarea),
      .input-content ::slotted(iron-autogrow-textarea),
      .input-content ::slotted(.paper-input-input) {
        @apply --paper-input-container-shared-input-style;
        /* The apply shim doesn't apply the nested color custom property,
          so we have to re-apply it here. */
        color: var(--paper-input-container-input-color, var(--primary-text-color));
        @apply --paper-input-container-input;
      }

      .input-content ::slotted(input)::-webkit-outer-spin-button,
      .input-content ::slotted(input)::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      .input-content.focused ::slotted(input),
      .input-content.focused ::slotted(iron-input),
      .input-content.focused ::slotted(textarea),
      .input-content.focused ::slotted(iron-autogrow-textarea),
      .input-content.focused ::slotted(.paper-input-input) {
        @apply --paper-input-container-input-focus;
      }

      .input-content.is-invalid ::slotted(input),
      .input-content.is-invalid ::slotted(iron-input),
      .input-content.is-invalid ::slotted(textarea),
      .input-content.is-invalid ::slotted(iron-autogrow-textarea),
      .input-content.is-invalid ::slotted(.paper-input-input) {
        @apply --paper-input-container-input-invalid;
      }

      .prefix ::slotted(*) {
        display: inline-block;
        @apply --paper-font-subhead;
        @apply --layout-flex-none;
        @apply --paper-input-prefix;
      }

      .suffix ::slotted(*) {
        display: inline-block;
        @apply --paper-font-subhead;
        @apply --layout-flex-none;

        @apply --paper-input-suffix;
      }

      /* Firefox sets a min-width on the input, which can cause layout issues */
      .input-content ::slotted(input) {
        min-width: 0;
      }

      .input-content ::slotted(textarea) {
        resize: none;
      }

      .add-on-content {
        position: relative;
      }

      .add-on-content.is-invalid ::slotted(*) {
        color: var(--paper-input-container-invalid-color, var(--error-color));
      }

      .add-on-content.is-highlighted ::slotted(*) {
        color: var(--paper-input-container-focus-color, var(--primary-color));
      }
    </style>

    <div class="floated-label-placeholder" aria-hidden="true" hidden="[[noLabelFloat]]">&nbsp;</div>

    <div class="input-wrapper">
      <span class="prefix"><slot name="prefix"></slot></span>

      <div class$="[[_computeInputContentClass(noLabelFloat,alwaysFloatLabel,focused,invalid,_inputHasContent)]]" id="labelAndInputContainer">
        <slot name="label"></slot>
        <slot name="input"></slot>
      </div>

      <span class="suffix"><slot name="suffix"></slot></span>
    </div>

    <div class$="[[_computeUnderlineClass(focused,invalid)]]">
      <div class="unfocused-line"></div>
      <div class="focused-line"></div>
    </div>

    <div class$="[[_computeAddOnContentClass(focused,invalid)]]">
      <slot name="add-on"></slot>
    </div>
`,is:"paper-input-container",properties:{noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},attrForValue:{type:String,value:"bind-value"},autoValidate:{type:Boolean,value:!1},invalid:{observer:"_invalidChanged",type:Boolean,value:!1},focused:{readOnly:!0,type:Boolean,value:!1,notify:!0},_addons:{type:Array},_inputHasContent:{type:Boolean,value:!1},_inputSelector:{type:String,value:"input,iron-input,textarea,.paper-input-input"},_boundOnFocus:{type:Function,value:function(){return this._onFocus.bind(this)}},_boundOnBlur:{type:Function,value:function(){return this._onBlur.bind(this)}},_boundOnInput:{type:Function,value:function(){return this._onInput.bind(this)}},_boundValueChanged:{type:Function,value:function(){return this._onValueChanged.bind(this)}}},listeners:{"addon-attached":"_onAddonAttached","iron-input-validate":"_onIronInputValidate"},get _valueChangedEvent(){return this.attrForValue+"-changed"},get _propertyForValue(){return xr(this.attrForValue)},get _inputElement(){return j(this).querySelector(this._inputSelector)},get _inputElementValue(){return this._inputElement[this._propertyForValue]||this._inputElement.value},ready:function(){this.__isFirstValueUpdate=!0,this._addons||(this._addons=[]),this.addEventListener("focus",this._boundOnFocus,!0),this.addEventListener("blur",this._boundOnBlur,!0)},attached:function(){this.attrForValue?this._inputElement.addEventListener(this._valueChangedEvent,this._boundValueChanged):this.addEventListener("input",this._onInput),this._inputElementValue&&this._inputElementValue!=""?this._handleValueAndAutoValidate(this._inputElement):this._handleValue(this._inputElement)},_onAddonAttached:function(t){this._addons||(this._addons=[]);var e=t.target;this._addons.indexOf(e)===-1&&(this._addons.push(e),this.isAttached&&this._handleValue(this._inputElement))},_onFocus:function(){this._setFocused(!0)},_onBlur:function(){this._setFocused(!1),this._handleValueAndAutoValidate(this._inputElement)},_onInput:function(t){this._handleValueAndAutoValidate(t.target)},_onValueChanged:function(t){var e=t.target;this.__isFirstValueUpdate&&(this.__isFirstValueUpdate=!1,e.value===void 0||e.value==="")||this._handleValueAndAutoValidate(t.target)},_handleValue:function(t){var e=this._inputElementValue;e||e===0||t.type==="number"&&!t.checkValidity()?this._inputHasContent=!0:this._inputHasContent=!1,this.updateAddons({inputElement:t,value:e,invalid:this.invalid})},_handleValueAndAutoValidate:function(t){if(this.autoValidate&&t){var e;t.validate?e=t.validate(this._inputElementValue):e=t.checkValidity(),this.invalid=!e}this._handleValue(t)},_onIronInputValidate:function(t){this.invalid=this._inputElement.invalid},_invalidChanged:function(){this._addons&&this.updateAddons({invalid:this.invalid})},updateAddons:function(t){for(var e,r=0;e=this._addons[r];r++)e.update(t)},_computeInputContentClass:function(t,e,r,i,n){var o="input-content";if(t)n&&(o+=" label-is-hidden"),i&&(o+=" is-invalid");else{var s=this.querySelector("label");e||n?(o+=" label-is-floating",this.$.labelAndInputContainer.style.position="static",i?o+=" is-invalid":r&&(o+=" label-is-highlighted")):(s&&(this.$.labelAndInputContainer.style.position="relative"),i&&(o+=" is-invalid"))}return r&&(o+=" focused"),o},_computeUnderlineClass:function(t,e){var r="underline";return e?r+=" is-invalid":t&&(r+=" is-highlighted"),r},_computeAddOnContentClass:function(t,e){var r="add-on-content";return e?r+=" is-invalid":t&&(r+=" is-highlighted"),r}});K({_template:I`
    <style>
      :host {
        display: inline-block;
        visibility: hidden;

        color: var(--paper-input-container-invalid-color, var(--error-color));

        @apply --paper-font-caption;
        @apply --paper-input-error;
        position: absolute;
        left:0;
        right:0;
      }

      :host([invalid]) {
        visibility: visible;
      }

      #a11yWrapper {
        visibility: hidden;
      }

      :host([invalid]) #a11yWrapper {
        visibility: visible;
      }
    </style>

    <!--
    If the paper-input-error element is directly referenced by an
    \`aria-describedby\` attribute, such as when used as a paper-input add-on,
    then applying \`visibility: hidden;\` to the paper-input-error element itself
    does not hide the error.

    For more information, see:
    https://www.w3.org/TR/accname-1.1/#mapping_additional_nd_description
    -->
    <div id="a11yWrapper">
      <slot></slot>
    </div>
`,is:"paper-input-error",behaviors:[zo],properties:{invalid:{readOnly:!0,reflectToAttribute:!0,type:Boolean}},update:function(t){this._setInvalid(t.invalid)}});var Rr={};Rr.NextLabelID=1;Rr.NextAddonID=1;Rr.NextInputID=1;var kw={properties:{label:{type:String},value:{notify:!0,type:String},disabled:{type:Boolean,value:!1},invalid:{type:Boolean,value:!1,notify:!0},allowedPattern:{type:String},type:{type:String},list:{type:String},pattern:{type:String},required:{type:Boolean,value:!1},errorMessage:{type:String},charCounter:{type:Boolean,value:!1},noLabelFloat:{type:Boolean,value:!1},alwaysFloatLabel:{type:Boolean,value:!1},autoValidate:{type:Boolean,value:!1},validator:{type:String},autocomplete:{type:String,value:"off"},autofocus:{type:Boolean,observer:"_autofocusChanged"},inputmode:{type:String},minlength:{type:Number},maxlength:{type:Number},min:{type:String},max:{type:String},step:{type:String},name:{type:String},placeholder:{type:String,value:""},readonly:{type:Boolean,value:!1},size:{type:Number},autocapitalize:{type:String,value:"none"},autocorrect:{type:String,value:"off"},autosave:{type:String},results:{type:Number},accept:{type:String},multiple:{type:Boolean},_ariaDescribedBy:{type:String,value:""},_ariaLabelledBy:{type:String,value:""},_inputId:{type:String,value:""}},listeners:{"addon-attached":"_onAddonAttached"},keyBindings:{"shift+tab:keydown":"_onShiftTabDown"},hostAttributes:{tabindex:0},get inputElement(){return this.$||(this.$={}),this.$.input||(this._generateInputId(),this.$.input=this.$$("#"+this._inputId)),this.$.input},get _focusableElement(){return this.inputElement},created:function(){this._typesThatHaveText=["date","datetime","datetime-local","month","time","week","file"]},attached:function(){this._updateAriaLabelledBy(),!he&&this.inputElement&&this._typesThatHaveText.indexOf(this.inputElement.type)!==-1&&(this.alwaysFloatLabel=!0)},_appendStringWithSpace:function(t,e){return t?t=t+" "+e:t=e,t},_onAddonAttached:function(t){var e=j(t).rootTarget;if(e.id)this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,e.id);else{var r="paper-input-add-on-"+Rr.NextAddonID++;e.id=r,this._ariaDescribedBy=this._appendStringWithSpace(this._ariaDescribedBy,r)}},validate:function(){return this.inputElement.validate()},_focusBlurHandler:function(t){Li._focusBlurHandler.call(this,t),this.focused&&!this._shiftTabPressed&&this._focusableElement&&this._focusableElement.focus()},_onShiftTabDown:function(t){var e=this.getAttribute("tabindex");this._shiftTabPressed=!0,this.setAttribute("tabindex","-1"),this.async(function(){this.setAttribute("tabindex",e),this._shiftTabPressed=!1},1)},_handleAutoValidate:function(){this.autoValidate&&this.validate()},updateValueAndPreserveCaret:function(t){try{var e=this.inputElement.selectionStart;this.value=t,this.inputElement.selectionStart=e,this.inputElement.selectionEnd=e}catch(r){this.value=t}},_computeAlwaysFloatLabel:function(t,e){return e||t},_updateAriaLabelledBy:function(){var t=j(this.root).querySelector("label");if(!t){this._ariaLabelledBy="";return}var e;t.id?e=t.id:(e="paper-input-label-"+Rr.NextLabelID++,t.id=e),this._ariaLabelledBy=e},_generateInputId:function(){(!this._inputId||this._inputId==="")&&(this._inputId="input-"+Rr.NextInputID++)},_onChange:function(t){this.shadowRoot&&this.fire(t.type,{sourceEvent:t},{node:this,bubbles:t.bubbles,cancelable:t.cancelable})},_autofocusChanged:function(){if(this.autofocus&&this._focusableElement){var t=document.activeElement,e=t instanceof HTMLElement,r=e&&t!==document.body&&t!==document.documentElement;r||this._focusableElement.focus()}}},Bm=[Li,ft,kw];K({is:"paper-input",_template:I`
    <style>
      :host {
        display: block;
      }

      :host([focused]) {
        outline: none;
      }

      :host([hidden]) {
        display: none !important;
      }

      input {
        /* Firefox sets a min-width on the input, which can cause layout issues */
        min-width: 0;
      }

      /* In 1.x, the <input> is distributed to paper-input-container, which styles it.
      In 2.x the <iron-input> is distributed to paper-input-container, which styles
      it, but in order for this to work correctly, we need to reset some
      of the native input's properties to inherit (from the iron-input) */
      iron-input > input {
        @apply --paper-input-container-shared-input-style;
        font-family: inherit;
        font-weight: inherit;
        font-size: inherit;
        letter-spacing: inherit;
        word-spacing: inherit;
        line-height: inherit;
        text-shadow: inherit;
        color: inherit;
        cursor: inherit;
      }

      input:disabled {
        @apply --paper-input-container-input-disabled;
      }

      input::-webkit-outer-spin-button,
      input::-webkit-inner-spin-button {
        @apply --paper-input-container-input-webkit-spinner;
      }

      input::-webkit-clear-button {
        @apply --paper-input-container-input-webkit-clear;
      }

      input::-webkit-calendar-picker-indicator {
        @apply --paper-input-container-input-webkit-calendar-picker-indicator;
      }

      input::-webkit-input-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input:-moz-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input::-moz-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      input::-ms-clear {
        @apply --paper-input-container-ms-clear;
      }

      input::-ms-reveal {
        @apply --paper-input-container-ms-reveal;
      }

      input:-ms-input-placeholder {
        color: var(--paper-input-container-color, var(--secondary-text-color));
      }

      label {
        pointer-events: none;
      }
    </style>

    <paper-input-container id="container" no-label-float="[[noLabelFloat]]" always-float-label="[[_computeAlwaysFloatLabel(alwaysFloatLabel,placeholder)]]" auto-validate$="[[autoValidate]]" disabled$="[[disabled]]" invalid="[[invalid]]">

      <slot name="prefix" slot="prefix"></slot>

      <label hidden$="[[!label]]" aria-hidden="true" for$="[[_inputId]]" slot="label">[[label]]</label>

      <!-- Need to bind maxlength so that the paper-input-char-counter works correctly -->
      <iron-input bind-value="{{value}}" slot="input" class="input-element" id$="[[_inputId]]" maxlength$="[[maxlength]]" allowed-pattern="[[allowedPattern]]" invalid="{{invalid}}" validator="[[validator]]">
        <input aria-labelledby$="[[_ariaLabelledBy]]" aria-describedby$="[[_ariaDescribedBy]]" disabled$="[[disabled]]" title$="[[title]]" type$="[[type]]" pattern$="[[pattern]]" required$="[[required]]" autocomplete$="[[autocomplete]]" autofocus$="[[autofocus]]" inputmode$="[[inputmode]]" minlength$="[[minlength]]" maxlength$="[[maxlength]]" min$="[[min]]" max$="[[max]]" step$="[[step]]" name$="[[name]]" placeholder$="[[placeholder]]" readonly$="[[readonly]]" list$="[[list]]" size$="[[size]]" autocapitalize$="[[autocapitalize]]" autocorrect$="[[autocorrect]]" on-change="_onChange" tabindex$="[[tabIndex]]" autosave$="[[autosave]]" results$="[[results]]" accept$="[[accept]]" multiple$="[[multiple]]" role$="[[inputRole]]" aria-haspopup$="[[inputAriaHaspopup]]">
      </iron-input>

      <slot name="suffix" slot="suffix"></slot>

      <template is="dom-if" if="[[errorMessage]]">
        <paper-input-error aria-live="assertive" slot="add-on">[[errorMessage]]</paper-input-error>
      </template>

      <template is="dom-if" if="[[charCounter]]">
        <paper-input-char-counter slot="add-on"></paper-input-char-counter>
      </template>

    </paper-input-container>
  `,behaviors:[Bm,Ho],properties:{value:{type:String},inputRole:{type:String,value:void 0},inputAriaHaspopup:{type:String,value:void 0}},get _focusableElement(){return this.inputElement._inputElement},listeners:{"iron-input-ready":"_onIronInputReady"},_onIronInputReady:function(){this.$.nativeInput||(this.$.nativeInput=this.$$("input")),this.inputElement&&this._typesThatHaveText.indexOf(this.$.nativeInput.type)!==-1&&(this.alwaysFloatLabel=!0),this.inputElement.bindValue&&this.$.container._handleValueAndAutoValidate(this.inputElement)}});var qm=class extends pm([ft,Ho,Im,Ko,Qo],he){static get template(){return I`
            <!--<template strip-whitespace> -->
                <style>
                  :host {
                    @apply --layout;
                    @apply --layout-justified;
                    @apply --layout-center;
                    width: 200px;
                    cursor: default;
                    -webkit-user-select: none;
                    -moz-user-select: none;
                    -ms-user-select: none;
                    user-select: none;
                    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
                    --paper-progress-active-color: var(--paper-single-range-slider-active-color, var(--google-blue-700));
                    --paper-progress-secondary-color: var(--paper-single-range-slider-secondary-color, var(--google-blue-300));
                    --paper-progress-disabled-active-color: var(--paper-single-range-slider-disabled-active-color, var(--paper-grey-400));
                    --paper-progress-disabled-secondary-color: var(--paper-single-range-slider-disabled-secondary-color, var(--paper-grey-400));
                    --calculated-paper-single-range-slider-height: var(--paper-single-range-slider-height, 2px);
                  }
            
                  /* focus shows the ripple */
                  :host(:focus) {
                    outline: none;
                  }
            
                  /** 
                   * NOTE(keanulee): Though :host-context is not universally supported, some pages
                   * still rely on paper-single-range-slider being flipped when dir="rtl" is set on body. For full
                   * compatability, dir="rtl" must be explicitly set on paper-single-range-slider.
                   */
                  :host-context([dir="rtl"]) #sliderContainer {
                    -webkit-transform: scaleX(-1);
                    transform: scaleX(-1);
                  }
            
                  /** 
                   * NOTE(keanulee): This is separate from the rule above because :host-context may
                   * not be recognized.
                   */
                  :host([dir="rtl"]) #sliderContainer {
                    -webkit-transform: scaleX(-1);
                    transform: scaleX(-1);
                  }
            
                  /** 
                   * NOTE(keanulee): Needed to override the :host-context rule (where supported)
                   * to support LTR sliders in RTL pages.
                   */
                  :host([dir="ltr"]) #sliderContainer {
                    -webkit-transform: scaleX(1);
                    transform: scaleX(1);
                  }
            
                  #sliderContainer {
                    position: relative;
                    width: 100%;
                    height: calc(30px + var(--calculated-paper-single-range-slider-height));
                    margin-left: calc(15px + var(--calculated-paper-single-range-slider-height)/2);
                    margin-right: calc(15px + var(--calculated-paper-single-range-slider-height)/2);
                  }
            
                  #sliderContainer:focus {
                    outline: 0;
                  }
            
                  #sliderContainer.editable {
                    margin-top: 12px;
                    margin-bottom: 12px;
                  }
            
                  .bar-container {
                    position: absolute;
                    top: 0;
                    bottom: 0;
                    left: 0;
                    right: 0;
                    overflow: hidden;
                  }
            
                  .ring > .bar-container {
                    left: calc(5px + var(--calculated-paper-single-range-slider-height)/2);
                    transition: left 0.18s ease;
                  }
            
                  .ring.expand.dragging > .bar-container {
                    transition: none;
                  }
            
                  .ring.expand:not(.pin) > .bar-container {
                    left: calc(8px + var(--calculated-paper-single-range-slider-height)/2);
                  }
            
                  #sliderBar {
                    padding: 15px 0;
                    width: 100%;
                    background-color: var(--paper-single-range-slider-bar-color, transparent);
                    --paper-progress-container-color: var(--paper-single-range-slider-container-color, var(--paper-grey-400));
                    --paper-progress-height: var(--calculated-paper-single-range-slider-height);
                  }
            
                  .slider-markers {
                    position: absolute;
                    top: calc(14px + var(--paper-single-range-slider-height,2px)/2);
                    height: var(--calculated-paper-single-range-slider-height);
                    left: 0;
                    right: -1px;
                    box-sizing: border-box;
                    pointer-events: none;
                    @apply --layout-horizontal;
                  }
            
                  .slider-marker {
                    @apply --layout-flex;
                  }
                  .slider-markers::after,
                  .slider-marker::after {
                    content: "";
                    display: block;
                    margin-left: -1px;
                    width: 2px;
                    height: var(--calculated-paper-single-range-slider-height);
                    border-radius: 50%;
                    background-color: var(--paper-single-range-slider-markers-color, #000);
                  }
            
                  .slider-knob {
                    position: absolute;
                    left: 0;
                    top: 0;
                    margin-left: calc(-15px - var(--calculated-paper-single-range-slider-height)/2);
                    width: calc(30px + var(--calculated-paper-single-range-slider-height));
                    height: calc(30px + var(--calculated-paper-single-range-slider-height));
                  }
            
                  .transiting > .slider-knob {
                    transition: left 0.08s ease;
                  }
            
                  .slider-knob:focus {
                    outline: none;
                  }
            
                  .slider-knob.dragging {
                    transition: none;
                  }
            
                  .snaps > .slider-knob.dragging {
                    transition: -webkit-transform 0.08s ease;
                    transition: transform 0.08s ease;
                  }
            
                  .slider-knob-inner {
                    margin: 10px;
                    width: calc(100% - 20px);
                    height: calc(100% - 20px);
                    background-color: var(--paper-single-range-slider-knob-color, var(--google-blue-700));
                    border: 2px solid var(--paper-single-range-slider-knob-color, var(--google-blue-700));
                    border-radius: 50%;
            
                    -moz-box-sizing: border-box;
                    box-sizing: border-box;
            
                    transition-property: -webkit-transform, background-color, border;
                    transition-property: transform, background-color, border;
                    transition-duration: 0.18s;
                    transition-timing-function: ease;
                  }
            
                  .expand:not(.pin) > .slider-knob > .slider-knob-inner {
                    -webkit-transform: scale(1.5);
                    transform: scale(1.5);
                  }
            
                  .ring > .slider-knob > .slider-knob-inner {
                    background-color: var(--paper-single-range-slider-knob-start-color, transparent);
                    border: 2px solid var(--paper-single-range-slider-knob-start-border-color, var(--paper-grey-400));
                  }
            
                  .slider-knob-inner::before {
                    background-color: var(--paper-single-range-slider-pin-color, var(--google-blue-700));
                  }
            
                  .pin > .slider-knob > .slider-knob-inner::before {
                    content: "";
                    position: absolute;
                    top: 0;
                    left: 50%;
                    margin-left: -13px;
                    width: 26px;
                    height: 26px;
                    border-radius: 50% 50% 50% 0;
            
                    -webkit-transform: rotate(-45deg) scale(0) translate(0);
                    transform: rotate(-45deg) scale(0) translate(0);
                  }
            
                  .slider-knob-inner::before,
                  .slider-knob-inner::after {
                    transition: -webkit-transform .18s ease, background-color .18s ease;
                    transition: transform .18s ease, background-color .18s ease;
                  }
            
                  .pin.ring > .slider-knob > .slider-knob-inner::before {
                    background-color: var(--paper-single-range-slider-pin-start-color, var(--paper-grey-400));
                  }
            
                  .pin.expand > .slider-knob > .slider-knob-inner::before {
                    -webkit-transform: rotate(-45deg) scale(1) translate(17px, -17px);
                    transform: rotate(-45deg) scale(1) translate(17px, -17px);
                  }
            
                  .pin > .slider-knob > .slider-knob-inner::after {
                    content: attr(value);
                    position: absolute;
                    top: 0;
                    left: 50%;
                    margin-left: -16px;
                    width: 32px;
                    height: 26px;
                    text-align: center;
                    color: var(--paper-single-range-slider-font-color, #fff);
                    font-size: 10px;
            
                    -webkit-transform: scale(0) translate(0);
                    transform: scale(0) translate(0);
                    @apply paper-single-range-slider-knob-inner-text;
                  }
            
                  .pin.expand > .slider-knob > .slider-knob-inner::after {
                    -webkit-transform: scale(1) translate(0, -17px);
                    transform: scale(1) translate(0, -17px);
                  }
            
                  /* paper-input */
                  .slider-input {
                    width: 50px;
                    overflow: hidden;
                    --paper-input-container-input: {
                      text-align: center;
                    };
                    @apply --paper-single-range-slider-input;
                  }
            
                  /* disabled state */
                  #sliderContainer.disabled {
                    pointer-events: none;
                  }
            
                  .disabled > .slider-knob > .slider-knob-inner {
                    background-color: var(--paper-single-range-slider-disabled-knob-color, var(--paper-grey-400));
                    border: 2px solid var(--paper-single-range-slider-disabled-knob-color, var(--paper-grey-400));
                    -webkit-transform: scale3d(0.75, 0.75, 1);
                    transform: scale3d(0.75, 0.75, 1);
                  }
            
                  .disabled.ring > .slider-knob > .slider-knob-inner {
                    background-color: var(--paper-single-range-slider-knob-start-color, transparent);
                    border: 2px solid var(--paper-single-range-slider-knob-start-border-color, var(--paper-grey-400));
                  }
            
                  paper-ripple {
                    color: var(--paper-single-range-slider-knob-color, var(--google-blue-700));
                  }
                </style>
            
                <div id="sliderContainer"
                  class$="[[_getClassNames(disabled, pin, snaps, immediateValue, min, expand, dragging, transiting, editable)]]">
                  <div class="bar-container">
                    <paper-progress
                      disabled$="[[disabled]]"
                      id="sliderBar"
                      aria-hidden="true"
                      min="[[min]]"
                      max="[[max]]"
                      step="[[step]]"
                      value="[[immediateValue]]"
                      secondary-progress="[[secondaryProgress]]"
                      on-down="_bardown"
                      on-up="_resetKnob"
                      on-track="_onTrack">
                    </paper-progress>
                  </div>
            
                  <template is="dom-if" if="[[snaps]]">
                    <div class="slider-markers">
                      <template is="dom-repeat" items="[[markers]]">
                        <div class="slider-marker"></div>
                      </template>
                    </div>
                  </template>
            
                  <div id="sliderKnob"
                    class="slider-knob"
                    on-down="_knobdown"
                    on-up="_resetKnob"
                    on-track="_onTrack"
                    on-transitionend="_knobTransitionEnd">
                      <div class="slider-knob-inner" value$="[[displayFunction(immediateValue)]]"></div>
                  </div>
                </div>
            
                <template is="dom-if" if="[[editable]]">
                  <paper-input
                    id="input"
                    type="number"
                    step="[[step]]"
                    min="[[min]]"
                    max="[[max]]"
                    class="slider-input"
                    disabled$="[[disabled]]"
                    value="[[immediateValue]]"
                    on-change="_changeValue"
                    on-keydown="_inputKeyDown"
                    no-label-float>
                  </paper-input>
                </template>
              </template>
        `}static get is(){return"paper-single-range-slider"}static get properties(){return{displayFunction:{type:Function,value:function(){return function(e){return e}}},snaps:{type:Boolean,value:!1,notify:!0},pin:{type:Boolean,value:!1,notify:!0},secondaryProgress:{type:Number,value:0,notify:!0,observer:"_secondaryProgressChanged"},editable:{type:Boolean,value:!1},immediateValue:{type:Number,value:0,readOnly:!0,notify:!0},maxMarkers:{type:Number,value:0,notify:!0},expand:{type:Boolean,value:!1,readOnly:!0},dragging:{type:Boolean,value:!1,readOnly:!0},transiting:{type:Boolean,value:!1,readOnly:!0},markers:{type:Array,readOnly:!0,value:function(){return[]}},keyBindings:{left:"_leftKey",right:"_rightKey","down pagedown home":"_decrementKey","up pageup end":"_incrementKey"}}}static get observers(){return["_updateKnob(value, min, max, snaps, step)","_valueChanged(value)","_immediateValueChanged(immediateValue)","_updateMarkers(maxMarkers, min, max, snaps)"]}constructor(){super();this._ensureAttribute("role","slider"),this._ensureAttribute("tabindex","0")}ready(){super.ready(),this.isReady=!0,this.sliderKnob=this.shadowRoot.querySelector("#sliderKnob")}increment(){this.value=this._clampValue(this.value+this.step)}decrement(){this.value=this._clampValue(this.value-this.step)}_updateKnob(e,r,i,n,o){this.setAttribute("aria-valuemin",r),this.setAttribute("aria-valuemax",i),this.setAttribute("aria-valuenow",e),this._positionKnob(this._calcRatio(e)*100)}_valueChanged(){this.fire("value-change",{composed:!0})}_immediateValueChanged(){this.dragging?this.fire("immediate-value-change",{composed:!0}):this.value=this.immediateValue}_secondaryProgressChanged(){this.secondaryProgress=this._clampValue(this.secondaryProgress)}_expandKnob(){this._setExpand(!0)}_resetKnob(){this.cancelDebouncer("expandKnob"),this._setExpand(!1)}_positionKnob(e){this._setImmediateValue(this._calcStep(this._calcKnobPosition(e))),this._setRatio(this._calcRatio(this.immediateValue)*100),this.sliderKnob=this.shadowRoot.querySelector("#sliderKnob"),this.sliderKnob.style.left=this.ratio+"%",this.dragging&&(this._knobstartx=this.ratio*this._w/100,this.translate3d(0,0,0,this.sliderKnob))}_calcKnobPosition(e){return(this.max-this.min)*e/100+this.min}_onTrack(e){switch(e.stopPropagation(),e.detail.state){case"start":this._trackStart(e);break;case"track":this._trackX(e);break;case"end":this._trackEnd();break}}_trackStart(e){this._setTransiting(!1),this._w=this.$.sliderBar.offsetWidth,this._x=this.ratio*this._w/100,this._startx=this._x,this._knobstartx=this._startx,this._minx=-this._startx,this._maxx=this._w-this._startx,this.sliderKnob=this.shadowRoot.querySelector("#sliderKnob"),this.sliderKnob.classList.add("dragging"),this._setDragging(!0)}_trackX(e){this.dragging||this._trackStart(e);var r=this._isRTL?-1:1,i=Math.min(this._maxx,Math.max(this._minx,e.detail.dx*r));this._x=this._startx+i;var n=this._calcStep(this._calcKnobPosition(this._x/this._w*100));this._setImmediateValue(n),this.sliderKnob=this.shadowRoot.querySelector("#sliderKnob");var o=this._calcRatio(this.immediateValue)*this._w-this._knobstartx;this.translate3d(o+"px",0,0,this.sliderKnob)}_trackEnd(){this.sliderKnob=this.shadowRoot.querySelector("#sliderKnob");var e=this.sliderKnob.style;this.sliderKnob.classList.remove("dragging"),this._setDragging(!1),this._resetKnob(),this.value=this.immediateValue,e.transform=e.webkitTransform="",this.fire("change",{composed:!0})}_knobdown(e){this._expandKnob(),e.preventDefault(),this.focus()}_bardown(e){this._w=this.$.sliderBar.offsetWidth;var r=this.$.sliderBar.getBoundingClientRect(),i=(e.detail.x-r.left)/this._w*100;this._isRTL&&(i=100-i);var n=this.ratio;this._setTransiting(!0),this._positionKnob(i),this.debounce("expandKnob",this._expandKnob,60),n===this.ratio&&this._setTransiting(!1),this.async(function(){this.fire("change",{composed:!0})}),e.preventDefault(),this.focus()}_knobTransitionEnd(e){this.sliderKnob=this.shadowRoot.querySelector("#sliderKnob"),e.target===this.sliderKnob&&this._setTransiting(!1)}_updateMarkers(e,r,i,n){n||this._setMarkers([]);var o=Math.round((i-r)/this.step);o>e&&(o=e),(o<0||!isFinite(o))&&(o=0),this._setMarkers(new Array(o))}_mergeClasses(e){return Object.keys(e).filter(function(r){return e[r]}).join(" ")}_getClassNames(){return this._mergeClasses({disabled:this.disabled,pin:this.pin,snaps:this.snaps,ring:this.immediateValue<=this.min,expand:this.expand,dragging:this.dragging,transiting:this.transiting,editable:this.editable})}get _isRTL(){return this.__isRTL===void 0&&(this.__isRTL=window.getComputedStyle(this).direction==="rtl"),this.__isRTL}_leftKey(e){this._isRTL?this._incrementKey(e):this._decrementKey(e)}_rightKey(e){this._isRTL?this._decrementKey(e):this._incrementKey(e)}_incrementKey(e){this.disabled||(e.detail.key==="end"?this.value=this.max:this.increment(),this.fire("change"),e.preventDefault())}_decrementKey(e){this.disabled||(e.detail.key==="home"?this.value=this.min:this.decrement(),this.fire("change"),e.preventDefault())}_changeValue(e){this.value=e.target.value,this.fire("change",{composed:!0})}_inputKeyDown(e){e.stopPropagation()}_createRipple(){return this.sliderKnob=this.shadowRoot.querySelector("#sliderKnob"),this._rippleContainer=this.sliderKnob,Ko._createRipple.call(this)}_focusedChanged(e){e&&this.ensureRipple(),this.hasRipple()&&(e?this._ripple.style.display="":this._ripple.style.display="none",this._ripple.holdDown=e)}getEle(e){return this.shadowRoot.querySelector(e)}};window.customElements.define("paper-single-range-slider",qm);var Um=class extends Cr(he){static get template(){return I`
        <style>
              /* local styles go here */
              :host {
                @apply --layout;
                @apply --layout-justified;
                @apply --layout-center;
  
                --paper-range-slider-width: 200px;
  
                --paper-range-slider-lower-color:             var(--paper-grey-400);
                --paper-range-slider-active-color:            var(--primary-color);
                --paper-range-slider-higher-color:            var(--paper-grey-400);
                --paper-range-slider-knob-color:              var(--primary-color);
                --paper-range-slider-pin-color:               var(--primary-color);
                --paper-range-slider-pin-start-color:         var(--paper-grey-400);
                --paper-range-slider-knob-start-color:        transparent;
                --paper-range-slider-knob-start-border-color: var(--paper-grey-400);
              }
  
              #sliderOuterDiv_0 {
                display: inline-block;
                width: var(--paper-range-slider-width);
              }
  
              #sliderOuterDiv_1 {
                position: relative;
                height: calc(30px + var(--paper-single-range-slider-height, 2px));
                margin-left: 0;
                margin-right: 0;
                margin-top: 0;
                margin-bottom: 0;
              }
  
              /* mimic the size of the #sliderKnob of paper-single-range-slider */
              .sliderKnobMinMax {
                position: absolute;
                left: 0;
                top: 0;
                margin-left: calc(-15px - var(--paper-single-range-slider-height, 2px)/2);
                width: calc(30px + var(--paper-single-range-slider-height, 2px));
                height: calc(30px + var(--paper-single-range-slider-height, 2px));
                /*background: #2196F3; opacity: 0.3;*/
              }
  
              .divSpanWidth {
                  position:absolute;
                  width:100%;
                  display:block;
                  top:0px;
              }
  
              #sliderMax {
                  line-height: normal;
                  --paper-single-range-slider-bar-color:               transparent;
                  --paper-single-range-slider-knob-color:              var(--paper-range-slider-knob-color);
                  --paper-single-range-slider-pin-color:               var(--paper-range-slider-pin-color);
                  --paper-single-range-slider-active-color:            var(--paper-range-slider-active-color);
                  --paper-single-range-slider-secondary-color:         var(--paper-range-slider-higher-color);
                  --paper-single-range-slider-pin-start-color:         var(--paper-range-slider-pin-start-color);
                  --paper-single-range-slider-knob-start-color:        var(--paper-range-slider-knob-start-color);
                  --paper-single-range-slider-knob-start-border-color: var(--paper-range-slider-knob-start-border-color);
              }
              #sliderMin {
                  line-height: normal;
                  --paper-single-range-slider-active-color:            var(--paper-range-slider-lower-color);
                  --paper-single-range-slider-secondary-color:         transparent;
                  --paper-single-range-slider-knob-color:              var(--paper-range-slider-knob-color);
                  --paper-single-range-slider-pin-color:               var(--paper-range-slider-pin-color);
                  --paper-single-range-slider-pin-start-color:         var(--paper-range-slider-pin-start-color);
                  --paper-single-range-slider-knob-start-color:        var(--paper-range-slider-knob-start-color);
                  --paper-single-range-slider-knob-start-border-color: var(--paper-range-slider-knob-start-border-color);
              }
          </style>
  
          <div id="sliderOuterDiv_0" style="[[mainDivStyle]]">
              <div id="sliderOuterDiv_1">
                <!-- style="background: #2196F3; opacity:0.2;" -->
                <div id='backDiv' class="divSpanWidth" on-down="_backDivDown" on-tap="_backDivTap"
                     on-up="_backDivUp" on-track="_backDivOnTrack" on-transitionend="_backDivTransEnd">
                    <!-- must have this in order to force width/height -->
                    <div id='backDivInner_0' style="line-height:200%;"><br></div>
                </div>
  
                <div class="divSpanWidth" style="pointer-events: none;">
                  <paper-single-range-slider id='sliderMax' display-function="[[displayFunction]]" disabled$="[[disabled]]" on-down="_sliderMaxDown"
                                on-up="_sliderMaxUp" step="[[step]]" min="[[min]]" max="[[max]]"
                                value="[[valueMax]]" secondary-progress='[[max]]' style="width:100%;">
                  </paper-single-range-slider>
                </div>
  
                <div class="divSpanWidth" style="pointer-events: none;">
                  <paper-single-range-slider id='sliderMin' display-function="[[displayFunction]]" disabled$="[[disabled]]" on-down="_sliderMinDown"
                                on-up="_sliderMinUp" noink step="[[step]]" min="[[min]]" max="[[max]]"
                                value="[[valueMin]]" style="width:100%;">
                  </paper-single-range-slider>
                </div>
  
                <!-- now add one real line -->
                <div id='backDivInner_1' style="line-height:100%;"><br></div>
              </div>
          </div>
      `}static get is(){return"paper-range-slider"}static get properties(){return{displayFunction:{type:Function,value:function(){return function(e){return e}}},sliderWidth:{type:String,value:"",notify:!0,reflectToAttribute:!0},mainDivStyle:{type:Object,value:function(){return{}},notify:!0,reflectToAttribute:!0},min:{type:Number,value:0,notify:!0,reflectToAttribute:!0},max:{type:Number,value:100,notify:!0,reflectToAttribute:!0},valueMin:{type:Number,value:0,notify:!1,reflectToAttribute:!0},valueMax:{type:Number,value:100,notify:!1,reflectToAttribute:!0},step:{type:Number,value:1,notify:!0,reflectToAttribute:!0},valueDiffMin:{type:Number,value:0,notify:!0,reflectToAttribute:!0},valueDiffMax:{type:Number,value:0,notify:!0,reflectToAttribute:!0},alwaysShowPin:{type:Boolean,value:!1,notify:!0},pin:{type:Boolean,value:!1,notify:!0},snaps:{type:Boolean,value:!1,notify:!0},disabled:{type:Boolean,value:!1,notify:!0},singleSlider:{type:Boolean,value:!1,notify:!0},transDuration:{type:Number,value:250},tapValueExtend:{type:Boolean,value:!0,notify:!0},tapValueReduce:{type:Boolean,value:!1,notify:!0},tapValueMove:{type:Boolean,value:!1,notify:!0}}}ready(){super.ready(),this.inInit=!0;var e=this,r=0,i=this.shadowRoot.querySelector("#sliderMin"),n=this.shadowRoot.querySelector("#sliderMax");function o(){i.isReady&&n.isReady?(e.init(),i.addEventListener("immediate-value-change",function(s){e._setValueMinMax(e._getValuesMinMax(this.immediateValue,null),"immediate-value-change")}),n.addEventListener("immediate-value-change",function(s){e._setValueMinMax(e._getValuesMinMax(null,this.immediateValue),"immediate-value-change")}),i.addEventListener("change",function(s){e._setValueMinMax(e._getValuesMinMax(this.immediateValue,null),"change"),e.alwaysShowPin&&e.$.sliderMin._expandKnob()}),n.addEventListener("change",function(s){e._setValueMinMax(e._getValuesMinMax(null,this.immediateValue),"change"),e.alwaysShowPin&&e.$.sliderMax._expandKnob()}),e.inInit=!1):(r<1e3?setTimeout(function(){o()},10):console.error("could not properly initialize the underlying paper-single-range-slider elements ..."),r++)}o()}init(){this.setSingleSlider(this.singleSlider),this.setDisabled(this.disabled),this.alwaysShowPin&&(this.pin=!0),this.shadowRoot.querySelector("#sliderMin").pin=this.pin,this.shadowRoot.querySelector("#sliderMax").pin=this.pin,this.shadowRoot.querySelector("#sliderMin").snaps=this.snaps,this.shadowRoot.querySelector("#sliderMax").snaps=this.snaps,this.sliderWidth!=""&&this.updateStyles({"--paper-range-slider-width":this.sliderWidth}),this.sliderBar=this.shadowRoot.querySelector("#sliderMin").getEle("#sliderBar"),this.sliderBar&&(this.progressContainer=this.sliderBar.shadowRoot.querySelector("#progressContainer"),this.progressContainer&&(this.progressContainer.style.background="transparent")),this._prevUpdateValues=[this.min,this.max],this._setValueDiff(),this._setValueMinMax(this._getValuesMinMax(this.valueMin,this.valueMax),"init"),this.alwaysShowPin&&(this.shadowRoot.querySelector("#sliderMin")._expandKnob(),this.shadowRoot.querySelector("#sliderMax")._expandKnob())}_setValueDiff(){this._valueDiffMax=Math.max(this.valueDiffMax,0),this._valueDiffMin=Math.max(this.valueDiffMin,0)}_getValuesMinMax(e,r){var i=e!=null&&e>=this.min&&e<=this.max,n=r!=null&&r>=this.min&&r<=this.max;if(!i&&!n)return[this.valueMin,this.valueMax];var o=i?e:this.valueMin,s=n?r:this.valueMax;o=Math.min(Math.max(o,this.min),this.max),s=Math.min(Math.max(s,this.min),this.max);var a=s-o;return i?a<this._valueDiffMin?(s=Math.min(this.max,o+this._valueDiffMin),a=s-o,a<this._valueDiffMin&&(o=s-this._valueDiffMin)):a>this._valueDiffMax&&this._valueDiffMax>0&&(s=o+this._valueDiffMax):a<this._valueDiffMin?(o=Math.max(this.min,s-this._valueDiffMin),a=s-o,a<this._valueDiffMin&&(s=o+this._valueDiffMin)):a>this._valueDiffMax&&this._valueDiffMax>0&&(o=s-this._valueDiffMax),[o,s]}_setValueMin(e){e=Math.max(e,this.min),this.shadowRoot.querySelector("#sliderMin").value=e,this.valueMin=e}_setValueMax(e){e=Math.min(e,this.max),this.shadowRoot.querySelector("#sliderMax").value=e,this.valueMax=e}_setValueMinMax(e,r){this._setValueMin(e[0]),this._setValueMax(e[1]),this.updateValues(r)}_setValuesNoTrans(e,r,i){e!=null&&(e<this.min||e>this.max)&&(e=null),r!=null&&(r<this.min||r>this.max)&&(r=null),e!=null&&r!=null&&(e=Math.min(e,r)),this._setValueMinMax(this._getValuesMinMax(e,r),i)}_setValuesTrans(e,r,i){this.shadowRoot.querySelector("#sliderMin")._setTransiting(!0),this.shadowRoot.querySelector("#sliderMax")._setTransiting(!0),this._setValuesNoTrans(e,r,i);var n=this;setTimeout(function(){n.$.sliderMin._setTransiting(!1),n.$.sliderMax._setTransiting(!1)},n.transDuration)}_backDivOnTrack(e){switch(e.stopPropagation(),e.detail.state){case"start":this._backDivTrackStart(e);break;case"track":this._backDivTrackDuring(e);break;case"end":this._backDivTrackEnd();break}}_backDivTrackStart(e){}_backDivTrackDuring(e){var r=this.shadowRoot.querySelector("#sliderMin"),i=this.shadowRoot.querySelector("#sliderMax");this._x1_Min=this._x0_Min+e.detail.dx;var n=r._calcStep(this._getRatioPos(r,this._x1_Min/this._xWidth));this._x1_Max=this._x0_Max+e.detail.dx;var o=i._calcStep(this._getRatioPos(i,this._x1_Max/this._xWidth));n>=this.min&&o<=this.max&&this._setValuesWithCurrentDiff(n,o,!1)}_setValuesWithCurrentDiff(e,r,i){var n=this._valueDiffMin,o=this._valueDiffMax;this._valueDiffMin=this.valueMax-this.valueMin,this._valueDiffMax=this.valueMax-this.valueMin,i?this._setValuesTrans(e,r,"_setValuesWithCurrentDiff"):this._setValuesNoTrans(e,r,"_setValuesWithCurrentDiff"),this._valueDiffMin=n,this._valueDiffMax=o}_backDivTrackEnd(){}_sliderMinDown(){this.shadowRoot.querySelector("#sliderMax")._expandKnob()}_sliderMaxDown(e){this.singleSlider?this._setValuesNoTrans(null,this._getEventValue(e),"_sliderMaxDown"):this.shadowRoot.querySelector("#sliderMin")._expandKnob()}_sliderMinUp(){this.alwaysShowPin?this.shadowRoot.querySelector("#sliderMin")._expandKnob():this.shadowRoot.querySelector("#sliderMax")._resetKnob()}_sliderMaxUp(){this.alwaysShowPin?this.shadowRoot.querySelector("#sliderMax")._expandKnob():(this.shadowRoot.querySelector("#sliderMin")._resetKnob(),this.singleSlider&&this.shadowRoot.querySelector("#sliderMax")._resetKnob())}_getEventValue(e){var r=this.shadowRoot.querySelector("#sliderMax").getEle("#sliderContainer").offsetWidth,i=this.shadowRoot.querySelector("#sliderMax").getEle("#sliderContainer").getBoundingClientRect(),n=(e.detail.x-i.left)/r,o=this.min+n*(this.max-this.min);return o}_backDivTap(e){this._setValueNow=function(n,o){this.tapValueMove?this._setValuesWithCurrentDiff(n,o,!0):this._setValuesTrans(n,o,"_backDivTap")};var r=this._getEventValue(e);if(r>this.valueMin&&r<this.valueMax){if(this.tapValueReduce){var i=r<this.valueMin+(this.valueMax-this.valueMin)/2;i?this._setValueNow(r,null):this._setValueNow(null,r)}}else(this.tapValueExtend||this.tapValueMove)&&(r<this.valueMin&&this._setValueNow(r,null),r>this.valueMax&&this._setValueNow(null,r))}_backDivDown(e){this._sliderMinDown(),this._sliderMaxDown(),this._xWidth=this.shadowRoot.querySelector("#sliderMin").getEle("#sliderBar").offsetWidth,this._x0_Min=this.shadowRoot.querySelector("#sliderMin").ratio/100*this._xWidth,this._x0_Max=this.shadowRoot.querySelector("#sliderMax").ratio/100*this._xWidth}_backDivUp(){this._sliderMinUp(),this._sliderMaxUp()}_backDivTransEnd(e){}_getRatioPos(e,r){return Math.max(e.min,Math.min(e.max,(e.max-e.min)*r+e.min))}_toBool(e){return e==="false"||e==="0"?!1:Boolean(e)}setValues(e,r,i){var n=i||"setValues";this._setValuesTrans(e,r,n)}updateValues(e){var r=this._prevUpdateValues[0]!==this.valueMin,i=this._prevUpdateValues[1]!==this.valueMax;(r||i)&&(this._prevUpdateValues=[this.valueMin,this.valueMax],this.inInit||(this.dispatchEvent(new CustomEvent("updateValues",{bubbles:!0,composed:!0,detail:{this:this,eventName:e}})),r&&this.dispatchEvent(new CustomEvent("value-min-changed",{bubbles:!0,composed:!0,detail:{this:this,value:this.valueMin,eventName:e}})),i&&this.dispatchEvent(new CustomEvent("value-max-changed",{bubbles:!0,composed:!0,detail:{this:this,value:this.valueMax,eventName:e}}))))}setMin(e){this.max<e&&(this.max=e),this.min=e,this._prevUpdateValues=[this.min,this.max],this.valueMin<this.min&&this._setValuesNoTrans(this.min,null,"setMin")}setMax(e){this.min>e&&(this.min=e),this.max=e,this._prevUpdateValues=[this.min,this.max],this.valueMax>this.max&&this._setValuesNoTrans(null,this.max,"setMax")}setStep(e){this.step=e}getRatio(){var e=this.shadowRoot.querySelector("#sliderMin").ratio/100,r=this.shadowRoot.querySelector("#sliderMax").ratio/100;return[e,r]}setValueDiffMin(e){this._valueDiffMin=e}setValueDiffMax(e){this._valueDiffMax=e}setTapValueExtend(e){this.tapValueExtend=this._toBool(e)}setTapValueReduce(e){this.tapValueReduce=this._toBool(e)}setTapValueMove(e){this.tapValueMove=this._toBool(e)}setDisabled(e){this.disabled=this._toBool(e);var r=this.disabled?"none":"auto";this.shadowRoot.querySelector("#sliderMax").getEle("#sliderKnob").style.pointerEvents=r,this.shadowRoot.querySelector("#sliderMin").getEle("#sliderKnob").style.pointerEvents=r,this.shadowRoot.querySelector("#sliderOuterDiv_1").style.pointerEvents=r}setSingleSlider(e){this.singleSlider=this._toBool(e);var r=this.shadowRoot.querySelector("#sliderMin"),i=this.shadowRoot.querySelector("#sliderMax"),n=this.shadowRoot.querySelector("#backDiv"),o=r.getEle("#sliderKnob"),s=i.getEle("#sliderKnob");e?(n.style.display="none",i.style.pointerEvents="auto",i.style.display="",r.style.display="none",n.style.cursor="default",s.style.cursor="default",o.style.cursor="default"):(n.style.display="block",i.style.pointerEvents="none",i.style.display="",r.style.display="",n.style.cursor="ew-resize",s.style.cursor="col-resize",o.style.cursor="col-resize"),i.getEle("#sliderContainer").style.pointerEvents=this.singleSlider?"auto":"none",r.getEle("#sliderContainer").style.pointerEvents="none"}};window.customElements.define("paper-range-slider",Um);var Aw=new Aa({uri:"https://luxe-bbq-dev.myshopify.com/api/2021-01/graphql.json",cache:new qn,headers:{"Content-Type":"application/graphql","X-Shopify-Storefront-Access-Token":"9056963bca32d153b6dde5e5a6d0640b"}});window.__APOLLO_CLIENT__=Aw;var Hm=()=>{let t=window.location.pathname;document.querySelector("#main-menu")?.querySelector(`[href*="${t}"]`)?.closest("#main-menu>li>a")?.classList?.add("active"),document.dispatchEvent(new CustomEvent("customElementsPrepared"))};/complete|interactive|loaded/.test(document.readyState)?(console.log(document.readyState),Hm()):document.addEventListener("DOMContentLoaded",Hm,!1);export{ue as a,dt as b,Go as c,Hi as d,Je as e,pe as f,ry as g,cs as h,us as i,iy as j,uy as k,cy as l,py as m,ds as n,TI as o,tM as p,rM as q,iM as r,$_ as s,G_ as t,nM as u,Qa as v,oM as w,W_ as x,Y_ as y,sM as z,aM as A,lM as B,uM as C,cM as D,Hf as E,Hb as F};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
/**
 * @fileoverview
 * @suppress {checkPrototypalTypes}
 * @license Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt The complete set of authors may be found
 * at http://polymer.github.io/AUTHORS.txt The complete set of contributors may
 * be found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by
 * Google as part of the polymer project is also subject to an additional IP
 * rights grant found at http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
 * @license
 * Copyright (c) 2018 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at
 * http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at
 * http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at
 * http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at
 * http://polymer.github.io/PATENTS.txt
 */
/**
@license
Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
/**
@license
Copyright (c) 2019 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL2NsaWVudC9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy90cy1pbnZhcmlhbnQvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZmFzdC1qc29uLXN0YWJsZS1zdHJpbmdpZnkvaW5kZXguanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy96ZW4tb2JzZXJ2YWJsZS9saWIvT2JzZXJ2YWJsZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL3plbi1vYnNlcnZhYmxlL2luZGV4LmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL25vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9ncmFwaHFsL2pzdXRpbHMvaW5zcGVjdC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9pbnZhcmlhbnQuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9ncmFwaHFsL2pzdXRpbHMvZGVmaW5lSW5zcGVjdC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvYXN0LmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS92aXNpdG9yLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC10YWcvbm9kZV9tb2R1bGVzL3RzbGliL3RzbGliLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvbG9kYXNoLnBpY2tieS9pbmRleC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9saWIvZGlyZWN0aXZlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2xpYi9kb20udHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvbGliL3BhcnQudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvbGliL3RlbXBsYXRlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2xpYi90ZW1wbGF0ZS1pbnN0YW5jZS50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9saWIvdGVtcGxhdGUtcmVzdWx0LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvbGl0LWh0bWwvc3JjL2xpYi9wYXJ0cy50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9saWIvZGVmYXVsdC10ZW1wbGF0ZS1wcm9jZXNzb3IudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvbGliL3RlbXBsYXRlLWZhY3RvcnkudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9saXQtaHRtbC9zcmMvbGliL3JlbmRlci50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2xpdC1odG1sL3NyYy9saXQtaHRtbC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2hhdW50ZWQvbGliL3N5bWJvbHMuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9oYXVudGVkL2xpYi9pbnRlcmZhY2UuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9oYXVudGVkL2xpYi9ob29rLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvaGF1bnRlZC9saWIvY3JlYXRlLWVmZmVjdC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2hhdW50ZWQvbGliL3VzZS1lZmZlY3QuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9oYXVudGVkL2xpYi91c2Utc3RhdGUuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9oYXVudGVkL2xpYi91c2UtcmVkdWNlci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2hhdW50ZWQvbGliL3N0YXRlLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvaGF1bnRlZC9saWIvc2NoZWR1bGVyLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvaGF1bnRlZC9saWIvY29tcG9uZW50LmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvaGF1bnRlZC9saWIvdXNlLWNvbnRleHQuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9oYXVudGVkL2xpYi9jcmVhdGUtY29udGV4dC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2hhdW50ZWQvbGliL3VzZS1tZW1vLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvaGF1bnRlZC9saWIvdXNlLWxheW91dC1lZmZlY3QuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9oYXVudGVkL2xpYi91c2UtcmVmLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvaGF1bnRlZC9saWIvY29yZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2hhdW50ZWQvbGliL3ZpcnR1YWwuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9oYXVudGVkL2xpYi9saXQtaGF1bnRlZC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vY2xpZW50L25vZGVfbW9kdWxlcy90c2xpYi9tb2R1bGVzL2luZGV4LmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvdHMtaW52YXJpYW50L25vZGVfbW9kdWxlcy90c2xpYi9tb2R1bGVzL2luZGV4LmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHVuZ2FwL2dsb2JhbC10aGlzL2VzbS9pbmRleC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL3RzLWludmFyaWFudC9zcmMvaW52YXJpYW50LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL2lzT2JqZWN0TGlrZS5tanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9ncmFwaHFsL3BvbHlmaWxscy9zeW1ib2xzLm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvbG9jYXRpb24ubWpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9wcmludExvY2F0aW9uLm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvZXJyb3IvR3JhcGhRTEVycm9yLm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvZXJyb3Ivc3ludGF4RXJyb3IubWpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9raW5kcy5tanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9ncmFwaHFsL2pzdXRpbHMvaW52YXJpYW50Lm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9ub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sLm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9kZWZpbmVJbnNwZWN0Lm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvYXN0Lm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvdG9rZW5LaW5kLm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9pbnNwZWN0Lm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvanN1dGlscy9kZXZBc3NlcnQubWpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9qc3V0aWxzL2luc3RhbmNlT2YubWpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9zb3VyY2UubWpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9kaXJlY3RpdmVMb2NhdGlvbi5tanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9ncmFwaHFsL2xhbmd1YWdlL2Jsb2NrU3RyaW5nLm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvbGV4ZXIubWpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS9wYXJzZXIubWpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC9sYW5ndWFnZS92aXNpdG9yLm1qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL2dyYXBocWwvbGFuZ3VhZ2UvcHJpbnRlci5tanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvZ3JhcGhxbC9kaXJlY3RpdmVzLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL2dyYXBocWwvZnJhZ21lbnRzLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL2dyYXBocWwvc3RvcmVVdGlscy50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9ncmFwaHFsL2dldEZyb21BU1QudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvY29tbW9uL2ZpbHRlckluUGxhY2UudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvZ3JhcGhxbC90cmFuc2Zvcm0udHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvY29tbW9uL21lcmdlRGVlcC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9vYnNlcnZhYmxlcy9PYnNlcnZhYmxlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvc3ltYm9sLW9ic2VydmFibGUvZXMvcG9ueWZpbGwuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9zeW1ib2wtb2JzZXJ2YWJsZS9lcy9pbmRleC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9jb21tb24vY2xvbmVEZWVwLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL2NvbW1vbi9tYXliZURlZXBGcmVlemUudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvb2JzZXJ2YWJsZXMvaXRlcmF0aW9uLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL29ic2VydmFibGVzL2FzeW5jTWFwLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL29ic2VydmFibGVzL3N1YmNsYXNzaW5nLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL29ic2VydmFibGVzL0NvbmNhc3QudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy91dGlsaXRpZXMvY29tbW9uL2FycmF5cy50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9jb21tb24vZXJyb3JIYW5kbGluZy50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL3V0aWxpdGllcy9jb21tb24vY2FuVXNlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvdXRpbGl0aWVzL2NvbW1vbi9jb21wYWN0LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay91dGlscy9mcm9tRXJyb3IudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL3V0aWxzL3Rocm93U2VydmVyRXJyb3IudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL3V0aWxzL3ZhbGlkYXRlT3BlcmF0aW9uLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay91dGlscy9jcmVhdGVPcGVyYXRpb24udHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL3V0aWxzL3RyYW5zZm9ybU9wZXJhdGlvbi50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2xpbmsvY29yZS9BcG9sbG9MaW5rLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay9jb3JlL2VtcHR5LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay9jb3JlL2Zyb20udHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2NvcmUvc3BsaXQudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2NvcmUvY29uY2F0LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay9jb3JlL2V4ZWN1dGUudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy92ZXJzaW9uLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay9odHRwL3BhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2UudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvbGluay9odHRwL2NoZWNrRmV0Y2hlci50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2xpbmsvaHR0cC9jcmVhdGVTaWduYWxJZlN1cHBvcnRlZC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2xpbmsvaHR0cC9zZWxlY3RVUkkudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvY3JlYXRlSHR0cExpbmsudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9saW5rL2h0dHAvcmV3cml0ZVVSSUZvckdFVC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2xpbmsvaHR0cC9IdHRwTGluay50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0B3cnkvZXF1YWxpdHkvc3JjL2VxdWFsaXR5LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvZXJyb3JzL2luZGV4LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY29yZS9uZXR3b3JrU3RhdHVzLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY29yZS9SZW9ic2VydmVyLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY29yZS9PYnNlcnZhYmxlUXVlcnkudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9Ad3J5L3RyaWUvc3JjL3RyaWUudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9Ad3J5L2NvbnRleHQvc3JjL3Nsb3QudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9Ad3J5L2NvbnRleHQvc3JjL2NvbnRleHQudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9vcHRpbWlzbS9zcmMvY2FjaGUudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9vcHRpbWlzbS9zcmMvY29udGV4dC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL29wdGltaXNtL3NyYy9oZWxwZXJzLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvb3B0aW1pc20vc3JjL2VudHJ5LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvb3B0aW1pc20vc3JjL2RlcC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL29wdGltaXNtL3NyYy9pbmRleC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2NhY2hlL2NvcmUvY2FjaGUudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jYWNoZS9jb3JlL3R5cGVzL0NhY2hlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY2FjaGUvY29yZS90eXBlcy9jb21tb24udHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jYWNoZS9pbm1lbW9yeS9oZWxwZXJzLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY2FjaGUvaW5tZW1vcnkvZW50aXR5U3RvcmUudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jYWNoZS9pbm1lbW9yeS9yZWFkRnJvbVN0b3JlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY2FjaGUvaW5tZW1vcnkvd3JpdGVUb1N0b3JlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY2FjaGUvaW5tZW1vcnkvcmVhY3RpdmVWYXJzLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY2FjaGUvaW5tZW1vcnkvcG9saWNpZXMudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jYWNoZS9pbm1lbW9yeS9pbk1lbW9yeUNhY2hlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY29yZS9Mb2NhbFN0YXRlLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby9zcmMvY29yZS9RdWVyeUluZm8udHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jb3JlL1F1ZXJ5TWFuYWdlci50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8vc3JjL2NvcmUvQXBvbGxvQ2xpZW50LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvZ3JhcGhxbC10YWcvbm9kZV9tb2R1bGVzL3RzbGliL21vZHVsZXMvaW5kZXguanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9ncmFwaHFsLXRhZy9zcmMvaW5kZXgudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvL3NyYy9jb3JlL2luZGV4LnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQG9wZW4td2MvZGVkdXBlLW1peGluL3NyYy9kZWR1cGVNaXhpbi5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8tZWxlbWVudHMvbGliL2lzLXZhbGlkLWdxbC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8tZWxlbWVudHMvbGliL2Rlc2NyaXB0b3JzLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby1lbGVtZW50cy9saWIvaGVscGVycy50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8tZWxlbWVudHMvbWl4aW5zL2Fwb2xsby1lbGVtZW50LW1peGluLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby1lbGVtZW50cy9taXhpbnMvYXBvbGxvLXF1ZXJ5LW1peGluLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby1lbGVtZW50cy9pbnRlcmZhY2VzL2Fwb2xsby1xdWVyeS50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8tZWxlbWVudHMvaW50ZXJmYWNlcy9hcG9sbG8tZWxlbWVudC50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8tZWxlbWVudHMvbGliL2N1aWQudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvLWVsZW1lbnRzL2xpYi9wcm90b3R5cGVzLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby1lbGVtZW50cy9oYXVudGVkL0Fwb2xsb0hvb2sudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvLWVsZW1lbnRzL2hhdW50ZWQvdXNlUXVlcnkudHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvLWVsZW1lbnRzL21peGlucy9hcG9sbG8tbXV0YXRpb24tbWl4aW4udHMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AYXBvbGxvLWVsZW1lbnRzL2ludGVyZmFjZXMvYXBvbGxvLW11dGF0aW9uLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby1lbGVtZW50cy9oYXVudGVkL3VzZU11dGF0aW9uLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby1lbGVtZW50cy9taXhpbnMvYXBvbGxvLXN1YnNjcmlwdGlvbi1taXhpbi50cyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0BhcG9sbG8tZWxlbWVudHMvaW50ZXJmYWNlcy9hcG9sbG8tc3Vic2NyaXB0aW9uLnRzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQGFwb2xsby1lbGVtZW50cy9oYXVudGVkL3VzZVN1YnNjcmlwdGlvbi50cyIsICIuLi9zcmMvc2hhcmVkL2hlbHBlcnMuanMiLCAiLi4vc3JjL2NvbXBvbmVudHMvY29tbW9uL1RpdGxlQmFubmVyLmpzIiwgIi4uL3NyYy9jb21wb25lbnRzL2NvbW1vbi9Db21wYXJlVGFibGUuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9ib290LmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvcmVzb2x2ZS11cmwuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9zZXR0aW5ncy5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL21peGluLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvZWxlbWVudHMvZG9tLW1vZHVsZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL3N0eWxlLWdhdGhlci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL3dyYXAuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9wYXRoLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvY2FzZS1tYXAuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9hc3luYy5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL21peGlucy9wcm9wZXJ0aWVzLWNoYW5nZWQuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9taXhpbnMvcHJvcGVydHktYWNjZXNzb3JzLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbWl4aW5zL3RlbXBsYXRlLXN0YW1wLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbWl4aW5zL3Byb3BlcnR5LWVmZmVjdHMuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy90ZWxlbWV0cnkuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9taXhpbnMvcHJvcGVydGllcy1taXhpbi5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL21peGlucy9lbGVtZW50LW1peGluLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWcuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL3BvbHltZXItZWxlbWVudC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2RlYm91bmNlLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvZ2VzdHVyZXMuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9taXhpbnMvZ2VzdHVyZS1ldmVudC1saXN0ZW5lcnMuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9Ad2ViY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvc3R5bGUtc2V0dGluZ3MuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9Ad2ViY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvY3NzLXBhcnNlLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3Mvc3JjL2NvbW1vbi1yZWdleC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy91bnNjb3BlZC1zdHlsZS1oYW5kbGVyLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3Mvc3JjL3N0eWxlLXV0aWwuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9Ad2ViY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvY29tbW9uLXV0aWxzLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3Mvc3JjL2FwcGx5LXNoaW0uanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9Ad2ViY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvdGVtcGxhdGUtbWFwLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3Mvc3JjL2FwcGx5LXNoaW0tdXRpbHMuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9Ad2ViY29tcG9uZW50cy9zaGFkeWNzcy9zcmMvZG9jdW1lbnQtd2FpdC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL3NyYy9jdXN0b20tc3R5bGUtaW50ZXJmYWNlLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3MvZW50cnlwb2ludHMvYXBwbHktc2hpbS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL21peGlucy9kaXItbWl4aW4uanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9yZW5kZXItc3RhdHVzLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvdW5yZXNvbHZlZC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2FycmF5LXNwbGljZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2ZsYXR0ZW5lZC1ub2Rlcy1vYnNlcnZlci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2ZsdXNoLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L3BvbHltZXIuZG9tLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvc2NvcGUtc3VidHJlZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL21peGlucy9kaXNhYmxlLXVwZ3JhZGUtbWl4aW4uanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvbGVnYWN5LWVsZW1lbnQtbWl4aW4uanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvY2xhc3MuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvcG9seW1lci1mbi5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL21peGlucy9tdXRhYmxlLWRhdGEuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy90ZW1wbGF0aXplLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L3RlbXBsYXRpemVyLWJlaGF2aW9yLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaGlkZS10ZW1wbGF0ZS1jb250cm9scy5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2RvbS1iaW5kLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcG9seW1lci9saWIvZWxlbWVudHMvZG9tLXJlcGVhdC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2RvbS1pZi5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2FycmF5LXNlbGVjdG9yLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHdlYmNvbXBvbmVudHMvc2hhZHljc3MvZW50cnlwb2ludHMvY3VzdG9tLXN0eWxlLWludGVyZmFjZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2N1c3RvbS1zdHlsZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9tdXRhYmxlLWRhdGEtYmVoYXZpb3IuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvaXJvbi1hMTF5LWtleXMtYmVoYXZpb3IvaXJvbi1hMTF5LWtleXMtYmVoYXZpb3IuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9pcm9uLWZvcm0tZWxlbWVudC1iZWhhdmlvci9pcm9uLWZvcm0tZWxlbWVudC1iZWhhdmlvci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL2lyb24tYmVoYXZpb3JzL2lyb24tY29udHJvbC1zdGF0ZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL2lyb24tYmVoYXZpb3JzL2lyb24tYnV0dG9uLXN0YXRlLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcGFwZXItcmlwcGxlL3BhcGVyLXJpcHBsZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BhcGVyLWJlaGF2aW9ycy9wYXBlci1yaXBwbGUtYmVoYXZpb3IuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wYXBlci1iZWhhdmlvcnMvcGFwZXItaW5reS1mb2N1cy1iZWhhdmlvci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL2lyb24tcmFuZ2UtYmVoYXZpb3IvaXJvbi1yYW5nZS1iZWhhdmlvci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL2lyb24tZmxleC1sYXlvdXQvaXJvbi1mbGV4LWxheW91dC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BhcGVyLXN0eWxlcy9jb2xvci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BhcGVyLXByb2dyZXNzL3BhcGVyLXByb2dyZXNzLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvaXJvbi1hMTF5LWFubm91bmNlci9pcm9uLWExMXktYW5ub3VuY2VyLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvaXJvbi1tZXRhL2lyb24tbWV0YS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL2lyb24tdmFsaWRhdGFibGUtYmVoYXZpb3IvaXJvbi12YWxpZGF0YWJsZS1iZWhhdmlvci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL2lyb24taW5wdXQvaXJvbi1pbnB1dC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL2ZvbnQtcm9ib3RvL3JvYm90by5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BhcGVyLXN0eWxlcy90eXBvZ3JhcGh5LmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcGFwZXItaW5wdXQvcGFwZXItaW5wdXQtYWRkb24tYmVoYXZpb3IuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wYXBlci1pbnB1dC9wYXBlci1pbnB1dC1jaGFyLWNvdW50ZXIuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wYXBlci1zdHlsZXMvZGVmYXVsdC10aGVtZS5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BhcGVyLWlucHV0L3BhcGVyLWlucHV0LWNvbnRhaW5lci5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL0Bwb2x5bWVyL3BhcGVyLWlucHV0L3BhcGVyLWlucHV0LWVycm9yLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvQHBvbHltZXIvcGFwZXItaW5wdXQvcGFwZXItaW5wdXQtYmVoYXZpb3IuanMiLCAiLi4vc3JjL25vZGVfbW9kdWxlcy9AcG9seW1lci9wYXBlci1pbnB1dC9wYXBlci1pbnB1dC5qcyIsICIuLi9zcmMvbm9kZV9tb2R1bGVzL3BhcGVyLXJhbmdlLXNsaWRlci9wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLmpzIiwgIi4uL3NyYy9ub2RlX21vZHVsZXMvcGFwZXItcmFuZ2Utc2xpZGVyL3BhcGVyLXJhbmdlLXNsaWRlci5qcyIsICIuLi9zcmMvc2hhcmVkL2Fwb2xsby1jbGllbnQuanMiLCAiLi4vc3JjL3NoYXJlZC9pbmRleC5qcyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuXHJcbi8qIGdsb2JhbCBnbG9iYWwsIGRlZmluZSwgU3lzdGVtLCBSZWZsZWN0LCBQcm9taXNlICovXHJcbnZhciBfX2V4dGVuZHM7XHJcbnZhciBfX2Fzc2lnbjtcclxudmFyIF9fcmVzdDtcclxudmFyIF9fZGVjb3JhdGU7XHJcbnZhciBfX3BhcmFtO1xyXG52YXIgX19tZXRhZGF0YTtcclxudmFyIF9fYXdhaXRlcjtcclxudmFyIF9fZ2VuZXJhdG9yO1xyXG52YXIgX19leHBvcnRTdGFyO1xyXG52YXIgX192YWx1ZXM7XHJcbnZhciBfX3JlYWQ7XHJcbnZhciBfX3NwcmVhZDtcclxudmFyIF9fc3ByZWFkQXJyYXlzO1xyXG52YXIgX19hd2FpdDtcclxudmFyIF9fYXN5bmNHZW5lcmF0b3I7XHJcbnZhciBfX2FzeW5jRGVsZWdhdG9yO1xyXG52YXIgX19hc3luY1ZhbHVlcztcclxudmFyIF9fbWFrZVRlbXBsYXRlT2JqZWN0O1xyXG52YXIgX19pbXBvcnRTdGFyO1xyXG52YXIgX19pbXBvcnREZWZhdWx0O1xyXG52YXIgX19jbGFzc1ByaXZhdGVGaWVsZEdldDtcclxudmFyIF9fY2xhc3NQcml2YXRlRmllbGRTZXQ7XHJcbnZhciBfX2NyZWF0ZUJpbmRpbmc7XHJcbihmdW5jdGlvbiAoZmFjdG9yeSkge1xyXG4gICAgdmFyIHJvb3QgPSB0eXBlb2YgZ2xvYmFsID09PSBcIm9iamVjdFwiID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgPT09IFwib2JqZWN0XCIgPyBzZWxmIDogdHlwZW9mIHRoaXMgPT09IFwib2JqZWN0XCIgPyB0aGlzIDoge307XHJcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcclxuICAgICAgICBkZWZpbmUoXCJ0c2xpYlwiLCBbXCJleHBvcnRzXCJdLCBmdW5jdGlvbiAoZXhwb3J0cykgeyBmYWN0b3J5KGNyZWF0ZUV4cG9ydGVyKHJvb3QsIGNyZWF0ZUV4cG9ydGVyKGV4cG9ydHMpKSk7IH0pO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICBmYWN0b3J5KGNyZWF0ZUV4cG9ydGVyKHJvb3QsIGNyZWF0ZUV4cG9ydGVyKG1vZHVsZS5leHBvcnRzKSkpO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgZmFjdG9yeShjcmVhdGVFeHBvcnRlcihyb290KSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBjcmVhdGVFeHBvcnRlcihleHBvcnRzLCBwcmV2aW91cykge1xyXG4gICAgICAgIGlmIChleHBvcnRzICE9PSByb290KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgT2JqZWN0LmNyZWF0ZSA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBleHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoaWQsIHYpIHsgcmV0dXJuIGV4cG9ydHNbaWRdID0gcHJldmlvdXMgPyBwcmV2aW91cyhpZCwgdikgOiB2OyB9O1xyXG4gICAgfVxyXG59KVxyXG4oZnVuY3Rpb24gKGV4cG9ydGVyKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuXHJcbiAgICBfX2V4dGVuZHMgPSBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX2Fzc2lnbiA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICBmb3IgKHZhciBzLCBpID0gMSwgbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBuOyBpKyspIHtcclxuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApKSB0W3BdID0gc1twXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fcmVzdCA9IGZ1bmN0aW9uIChzLCBlKSB7XHJcbiAgICAgICAgdmFyIHQgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIHMpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocywgcCkgJiYgZS5pbmRleE9mKHApIDwgMClcclxuICAgICAgICAgICAgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgcCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMocyk7IGkgPCBwLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5pbmRleE9mKHBbaV0pIDwgMCAmJiBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwocywgcFtpXSkpXHJcbiAgICAgICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH07XHJcblxyXG4gICAgX19kZWNvcmF0ZSA9IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xyXG4gICAgICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgICAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xyXG4gICAgICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fcGFyYW0gPSBmdW5jdGlvbiAocGFyYW1JbmRleCwgZGVjb3JhdG9yKSB7XHJcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICh0YXJnZXQsIGtleSkgeyBkZWNvcmF0b3IodGFyZ2V0LCBrZXksIHBhcmFtSW5kZXgpOyB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9fbWV0YWRhdGEgPSBmdW5jdGlvbiAobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgICAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QubWV0YWRhdGEgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIFJlZmxlY3QubWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX2F3YWl0ZXIgPSBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICAgICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgX19nZW5lcmF0b3IgPSBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xyXG4gICAgICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XHJcbiAgICAgICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICAgICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChvcCkge1xyXG4gICAgICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgICAgIHdoaWxlIChfKSB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfX2NyZWF0ZUJpbmRpbmcgPSBmdW5jdGlvbihvLCBtLCBrLCBrMikge1xyXG4gICAgICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICAgICAgb1trMl0gPSBtW2tdO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX2V4cG9ydFN0YXIgPSBmdW5jdGlvbiAobSwgZXhwb3J0cykge1xyXG4gICAgICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKHAgIT09IFwiZGVmYXVsdFwiICYmICFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxuICAgIH07XHJcblxyXG4gICAgX192YWx1ZXMgPSBmdW5jdGlvbiAobykge1xyXG4gICAgICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7XHJcbiAgICAgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICAgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSBcIm51bWJlclwiKSByZXR1cm4ge1xyXG4gICAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyBcIk9iamVjdCBpcyBub3QgaXRlcmFibGUuXCIgOiBcIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fcmVhZCA9IGZ1bmN0aW9uIChvLCBuKSB7XHJcbiAgICAgICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xyXG4gICAgICAgIGlmICghbSkgcmV0dXJuIG87XHJcbiAgICAgICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxyXG4gICAgICAgIGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcjtcclxuICAgIH07XHJcblxyXG4gICAgX19zcHJlYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZm9yICh2YXIgYXIgPSBbXSwgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspXHJcbiAgICAgICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fc3ByZWFkQXJyYXlzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIHMgPSAwLCBpID0gMCwgaWwgPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgaWw7IGkrKykgcyArPSBhcmd1bWVudHNbaV0ubGVuZ3RoO1xyXG4gICAgICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgICAgICByW2tdID0gYVtqXTtcclxuICAgICAgICByZXR1cm4gcjtcclxuICAgIH07XHJcblxyXG4gICAgX19hd2FpdCA9IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBfX2F3YWl0ID8gKHRoaXMudiA9IHYsIHRoaXMpIDogbmV3IF9fYXdhaXQodik7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fYXN5bmNHZW5lcmF0b3IgPSBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICAgICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgICAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaWYgKGdbbl0pIGlbbl0gPSBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKGEsIGIpIHsgcS5wdXNoKFtuLCB2LCBhLCBiXSkgPiAxIHx8IHJlc3VtZShuLCB2KTsgfSk7IH07IH1cclxuICAgICAgICBmdW5jdGlvbiByZXN1bWUobiwgdikgeyB0cnkgeyBzdGVwKGdbbl0odikpOyB9IGNhdGNoIChlKSB7IHNldHRsZShxWzBdWzNdLCBlKTsgfSB9XHJcbiAgICAgICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyAgfVxyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGwodmFsdWUpIHsgcmVzdW1lKFwibmV4dFwiLCB2YWx1ZSk7IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICAgICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfX2FzeW5jRGVsZWdhdG9yID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICB2YXIgaSwgcDtcclxuICAgICAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIsIGZ1bmN0aW9uIChlKSB7IHRocm93IGU7IH0pLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpO1xyXG4gICAgICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxuICAgIH07XHJcblxyXG4gICAgX19hc3luY1ZhbHVlcyA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgICAgICB2YXIgbSA9IG9bU3ltYm9sLmFzeW5jSXRlcmF0b3JdLCBpO1xyXG4gICAgICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgICAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICAgICAgZnVuY3Rpb24gc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgZCwgdikgeyBQcm9taXNlLnJlc29sdmUodikudGhlbihmdW5jdGlvbih2KSB7IHJlc29sdmUoeyB2YWx1ZTogdiwgZG9uZTogZCB9KTsgfSwgcmVqZWN0KTsgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfX21ha2VUZW1wbGF0ZU9iamVjdCA9IGZ1bmN0aW9uIChjb29rZWQsIHJhdykge1xyXG4gICAgICAgIGlmIChPYmplY3QuZGVmaW5lUHJvcGVydHkpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNvb2tlZCwgXCJyYXdcIiwgeyB2YWx1ZTogcmF3IH0pOyB9IGVsc2UgeyBjb29rZWQucmF3ID0gcmF3OyB9XHJcbiAgICAgICAgcmV0dXJuIGNvb2tlZDtcclxuICAgIH07XHJcblxyXG4gICAgX19pbXBvcnRTdGFyID0gZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XHJcbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xyXG4gICAgICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICAgICAgcmVzdWx0W1wiZGVmYXVsdFwiXSA9IG1vZDtcclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxuXHJcbiAgICBfX2ltcG9ydERlZmF1bHQgPSBmdW5jdGlvbiAobW9kKSB7XHJcbiAgICAgICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XHJcbiAgICB9O1xyXG5cclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQgPSBmdW5jdGlvbiAocmVjZWl2ZXIsIHByaXZhdGVNYXApIHtcclxuICAgICAgICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByaXZhdGVNYXAuZ2V0KHJlY2VpdmVyKTtcclxuICAgIH07XHJcblxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCA9IGZ1bmN0aW9uIChyZWNlaXZlciwgcHJpdmF0ZU1hcCwgdmFsdWUpIHtcclxuICAgICAgICBpZiAoIXByaXZhdGVNYXAuaGFzKHJlY2VpdmVyKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcHJpdmF0ZU1hcC5zZXQocmVjZWl2ZXIsIHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9O1xyXG5cclxuICAgIGV4cG9ydGVyKFwiX19leHRlbmRzXCIsIF9fZXh0ZW5kcyk7XHJcbiAgICBleHBvcnRlcihcIl9fYXNzaWduXCIsIF9fYXNzaWduKTtcclxuICAgIGV4cG9ydGVyKFwiX19yZXN0XCIsIF9fcmVzdCk7XHJcbiAgICBleHBvcnRlcihcIl9fZGVjb3JhdGVcIiwgX19kZWNvcmF0ZSk7XHJcbiAgICBleHBvcnRlcihcIl9fcGFyYW1cIiwgX19wYXJhbSk7XHJcbiAgICBleHBvcnRlcihcIl9fbWV0YWRhdGFcIiwgX19tZXRhZGF0YSk7XHJcbiAgICBleHBvcnRlcihcIl9fYXdhaXRlclwiLCBfX2F3YWl0ZXIpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2dlbmVyYXRvclwiLCBfX2dlbmVyYXRvcik7XHJcbiAgICBleHBvcnRlcihcIl9fZXhwb3J0U3RhclwiLCBfX2V4cG9ydFN0YXIpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2NyZWF0ZUJpbmRpbmdcIiwgX19jcmVhdGVCaW5kaW5nKTtcclxuICAgIGV4cG9ydGVyKFwiX192YWx1ZXNcIiwgX192YWx1ZXMpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX3JlYWRcIiwgX19yZWFkKTtcclxuICAgIGV4cG9ydGVyKFwiX19zcHJlYWRcIiwgX19zcHJlYWQpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX3NwcmVhZEFycmF5c1wiLCBfX3NwcmVhZEFycmF5cyk7XHJcbiAgICBleHBvcnRlcihcIl9fYXdhaXRcIiwgX19hd2FpdCk7XHJcbiAgICBleHBvcnRlcihcIl9fYXN5bmNHZW5lcmF0b3JcIiwgX19hc3luY0dlbmVyYXRvcik7XHJcbiAgICBleHBvcnRlcihcIl9fYXN5bmNEZWxlZ2F0b3JcIiwgX19hc3luY0RlbGVnYXRvcik7XHJcbiAgICBleHBvcnRlcihcIl9fYXN5bmNWYWx1ZXNcIiwgX19hc3luY1ZhbHVlcyk7XHJcbiAgICBleHBvcnRlcihcIl9fbWFrZVRlbXBsYXRlT2JqZWN0XCIsIF9fbWFrZVRlbXBsYXRlT2JqZWN0KTtcclxuICAgIGV4cG9ydGVyKFwiX19pbXBvcnRTdGFyXCIsIF9faW1wb3J0U3Rhcik7XHJcbiAgICBleHBvcnRlcihcIl9faW1wb3J0RGVmYXVsdFwiLCBfX2ltcG9ydERlZmF1bHQpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0XCIsIF9fY2xhc3NQcml2YXRlRmllbGRHZXQpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0XCIsIF9fY2xhc3NQcml2YXRlRmllbGRTZXQpO1xyXG59KTtcclxuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG4vKiBnbG9iYWwgZ2xvYmFsLCBkZWZpbmUsIFN5c3RlbSwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG52YXIgX19leHRlbmRzO1xyXG52YXIgX19hc3NpZ247XHJcbnZhciBfX3Jlc3Q7XHJcbnZhciBfX2RlY29yYXRlO1xyXG52YXIgX19wYXJhbTtcclxudmFyIF9fbWV0YWRhdGE7XHJcbnZhciBfX2F3YWl0ZXI7XHJcbnZhciBfX2dlbmVyYXRvcjtcclxudmFyIF9fZXhwb3J0U3RhcjtcclxudmFyIF9fdmFsdWVzO1xyXG52YXIgX19yZWFkO1xyXG52YXIgX19zcHJlYWQ7XHJcbnZhciBfX3NwcmVhZEFycmF5cztcclxudmFyIF9fYXdhaXQ7XHJcbnZhciBfX2FzeW5jR2VuZXJhdG9yO1xyXG52YXIgX19hc3luY0RlbGVnYXRvcjtcclxudmFyIF9fYXN5bmNWYWx1ZXM7XHJcbnZhciBfX21ha2VUZW1wbGF0ZU9iamVjdDtcclxudmFyIF9faW1wb3J0U3RhcjtcclxudmFyIF9faW1wb3J0RGVmYXVsdDtcclxudmFyIF9fY2xhc3NQcml2YXRlRmllbGRHZXQ7XHJcbnZhciBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0O1xyXG52YXIgX19jcmVhdGVCaW5kaW5nO1xyXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIHZhciByb290ID0gdHlwZW9mIGdsb2JhbCA9PT0gXCJvYmplY3RcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmID09PSBcIm9iamVjdFwiID8gc2VsZiA6IHR5cGVvZiB0aGlzID09PSBcIm9iamVjdFwiID8gdGhpcyA6IHt9O1xyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgZGVmaW5lKFwidHNsaWJcIiwgW1wiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKGV4cG9ydHMpIHsgZmFjdG9yeShjcmVhdGVFeHBvcnRlcihyb290LCBjcmVhdGVFeHBvcnRlcihleHBvcnRzKSkpOyB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgZmFjdG9yeShjcmVhdGVFeHBvcnRlcihyb290LCBjcmVhdGVFeHBvcnRlcihtb2R1bGUuZXhwb3J0cykpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZhY3RvcnkoY3JlYXRlRXhwb3J0ZXIocm9vdCkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRXhwb3J0ZXIoZXhwb3J0cywgcHJldmlvdXMpIHtcclxuICAgICAgICBpZiAoZXhwb3J0cyAhPT0gcm9vdCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlkLCB2KSB7IHJldHVybiBleHBvcnRzW2lkXSA9IHByZXZpb3VzID8gcHJldmlvdXMoaWQsIHYpIDogdjsgfTtcclxuICAgIH1cclxufSlcclxuKGZ1bmN0aW9uIChleHBvcnRlcikge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblxyXG4gICAgX19leHRlbmRzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcblxyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuXHJcbiAgICBfX3Jlc3QgPSBmdW5jdGlvbiAocywgZSkge1xyXG4gICAgICAgIHZhciB0ID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fZGVjb3JhdGUgPSBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgICAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICAgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgICAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX3BhcmFtID0gZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfX21ldGFkYXRhID0gZnVuY3Rpb24gKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxuICAgIH07XHJcblxyXG4gICAgX19hd2FpdGVyID0gZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fZ2VuZXJhdG9yID0gZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgICAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgX19jcmVhdGVCaW5kaW5nID0gZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgICAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgICAgIG9bazJdID0gbVtrXTtcclxuICAgIH07XHJcblxyXG4gICAgX19leHBvcnRTdGFyID0gZnVuY3Rpb24gKG0sIGV4cG9ydHMpIHtcclxuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbiAgICB9O1xyXG5cclxuICAgIF9fdmFsdWVzID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX3JlYWQgPSBmdW5jdGlvbiAobywgbikge1xyXG4gICAgICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgICAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fc3ByZWFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgICAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fYXdhaXQgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yID0gZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgICAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICAgICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgIH1cclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxuICAgIH07XHJcblxyXG4gICAgX19hc3luY0RlbGVnYXRvciA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgdmFyIGksIHA7XHJcbiAgICAgICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgICAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9fYXN5bmNWYWx1ZXMgPSBmdW5jdGlvbiAobykge1xyXG4gICAgICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgICAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICAgICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxuICAgIH07XHJcblxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3QgPSBmdW5jdGlvbiAoY29va2VkLCByYXcpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgICAgIHJldHVybiBjb29rZWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIF9faW1wb3J0U3RhciA9IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgICAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgICAgIHJlc3VsdFtcImRlZmF1bHRcIl0gPSBtb2Q7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcblxyXG4gICAgX19pbXBvcnREZWZhdWx0ID0gZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0ID0gZnVuY3Rpb24gKHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XHJcbiAgICAgICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQgPSBmdW5jdGlvbiAocmVjZWl2ZXIsIHByaXZhdGVNYXAsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnRlcihcIl9fZXh0ZW5kc1wiLCBfX2V4dGVuZHMpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2Fzc2lnblwiLCBfX2Fzc2lnbik7XHJcbiAgICBleHBvcnRlcihcIl9fcmVzdFwiLCBfX3Jlc3QpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2RlY29yYXRlXCIsIF9fZGVjb3JhdGUpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX3BhcmFtXCIsIF9fcGFyYW0pO1xyXG4gICAgZXhwb3J0ZXIoXCJfX21ldGFkYXRhXCIsIF9fbWV0YWRhdGEpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2F3YWl0ZXJcIiwgX19hd2FpdGVyKTtcclxuICAgIGV4cG9ydGVyKFwiX19nZW5lcmF0b3JcIiwgX19nZW5lcmF0b3IpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2V4cG9ydFN0YXJcIiwgX19leHBvcnRTdGFyKTtcclxuICAgIGV4cG9ydGVyKFwiX19jcmVhdGVCaW5kaW5nXCIsIF9fY3JlYXRlQmluZGluZyk7XHJcbiAgICBleHBvcnRlcihcIl9fdmFsdWVzXCIsIF9fdmFsdWVzKTtcclxuICAgIGV4cG9ydGVyKFwiX19yZWFkXCIsIF9fcmVhZCk7XHJcbiAgICBleHBvcnRlcihcIl9fc3ByZWFkXCIsIF9fc3ByZWFkKTtcclxuICAgIGV4cG9ydGVyKFwiX19zcHJlYWRBcnJheXNcIiwgX19zcHJlYWRBcnJheXMpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2F3YWl0XCIsIF9fYXdhaXQpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2FzeW5jR2VuZXJhdG9yXCIsIF9fYXN5bmNHZW5lcmF0b3IpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2FzeW5jRGVsZWdhdG9yXCIsIF9fYXN5bmNEZWxlZ2F0b3IpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2FzeW5jVmFsdWVzXCIsIF9fYXN5bmNWYWx1ZXMpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX21ha2VUZW1wbGF0ZU9iamVjdFwiLCBfX21ha2VUZW1wbGF0ZU9iamVjdCk7XHJcbiAgICBleHBvcnRlcihcIl9faW1wb3J0U3RhclwiLCBfX2ltcG9ydFN0YXIpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2ltcG9ydERlZmF1bHRcIiwgX19pbXBvcnREZWZhdWx0KTtcclxuICAgIGV4cG9ydGVyKFwiX19jbGFzc1ByaXZhdGVGaWVsZEdldFwiLCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KTtcclxuICAgIGV4cG9ydGVyKFwiX19jbGFzc1ByaXZhdGVGaWVsZFNldFwiLCBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KTtcclxufSk7XHJcbiIsICIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRhdGEsIG9wdHMpIHtcbiAgICBpZiAoIW9wdHMpIG9wdHMgPSB7fTtcbiAgICBpZiAodHlwZW9mIG9wdHMgPT09ICdmdW5jdGlvbicpIG9wdHMgPSB7IGNtcDogb3B0cyB9O1xuICAgIHZhciBjeWNsZXMgPSAodHlwZW9mIG9wdHMuY3ljbGVzID09PSAnYm9vbGVhbicpID8gb3B0cy5jeWNsZXMgOiBmYWxzZTtcblxuICAgIHZhciBjbXAgPSBvcHRzLmNtcCAmJiAoZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgICAgICB2YXIgYW9iaiA9IHsga2V5OiBhLCB2YWx1ZTogbm9kZVthXSB9O1xuICAgICAgICAgICAgICAgIHZhciBib2JqID0geyBrZXk6IGIsIHZhbHVlOiBub2RlW2JdIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIGYoYW9iaiwgYm9iaik7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgIH0pKG9wdHMuY21wKTtcblxuICAgIHZhciBzZWVuID0gW107XG4gICAgcmV0dXJuIChmdW5jdGlvbiBzdHJpbmdpZnkgKG5vZGUpIHtcbiAgICAgICAgaWYgKG5vZGUgJiYgbm9kZS50b0pTT04gJiYgdHlwZW9mIG5vZGUudG9KU09OID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBub2RlID0gbm9kZS50b0pTT04oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChub2RlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgICAgICAgaWYgKHR5cGVvZiBub2RlID09ICdudW1iZXInKSByZXR1cm4gaXNGaW5pdGUobm9kZSkgPyAnJyArIG5vZGUgOiAnbnVsbCc7XG4gICAgICAgIGlmICh0eXBlb2Ygbm9kZSAhPT0gJ29iamVjdCcpIHJldHVybiBKU09OLnN0cmluZ2lmeShub2RlKTtcblxuICAgICAgICB2YXIgaSwgb3V0O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShub2RlKSkge1xuICAgICAgICAgICAgb3V0ID0gJ1snO1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG5vZGUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoaSkgb3V0ICs9ICcsJztcbiAgICAgICAgICAgICAgICBvdXQgKz0gc3RyaW5naWZ5KG5vZGVbaV0pIHx8ICdudWxsJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBvdXQgKyAnXSc7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobm9kZSA9PT0gbnVsbCkgcmV0dXJuICdudWxsJztcblxuICAgICAgICBpZiAoc2Vlbi5pbmRleE9mKG5vZGUpICE9PSAtMSkge1xuICAgICAgICAgICAgaWYgKGN5Y2xlcykgcmV0dXJuIEpTT04uc3RyaW5naWZ5KCdfX2N5Y2xlX18nKTtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0NvbnZlcnRpbmcgY2lyY3VsYXIgc3RydWN0dXJlIHRvIEpTT04nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBzZWVuSW5kZXggPSBzZWVuLnB1c2gobm9kZSkgLSAxO1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG5vZGUpLnNvcnQoY21wICYmIGNtcChub2RlKSk7XG4gICAgICAgIG91dCA9ICcnO1xuICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSBzdHJpbmdpZnkobm9kZVtrZXldKTtcblxuICAgICAgICAgICAgaWYgKCF2YWx1ZSkgY29udGludWU7XG4gICAgICAgICAgICBpZiAob3V0KSBvdXQgKz0gJywnO1xuICAgICAgICAgICAgb3V0ICs9IEpTT04uc3RyaW5naWZ5KGtleSkgKyAnOicgKyB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICBzZWVuLnNwbGljZShzZWVuSW5kZXgsIDEpO1xuICAgICAgICByZXR1cm4gJ3snICsgb3V0ICsgJ30nO1xuICAgIH0pKGRhdGEpO1xufTtcbiIsICJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuT2JzZXJ2YWJsZSA9IHZvaWQgMDtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG4vLyA9PT0gU3ltYm9sIFN1cHBvcnQgPT09XG52YXIgaGFzU3ltYm9scyA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbic7XG59O1xuXG52YXIgaGFzU3ltYm9sID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIGhhc1N5bWJvbHMoKSAmJiBCb29sZWFuKFN5bWJvbFtuYW1lXSk7XG59O1xuXG52YXIgZ2V0U3ltYm9sID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgcmV0dXJuIGhhc1N5bWJvbChuYW1lKSA/IFN5bWJvbFtuYW1lXSA6ICdAQCcgKyBuYW1lO1xufTtcblxuaWYgKGhhc1N5bWJvbHMoKSAmJiAhaGFzU3ltYm9sKCdvYnNlcnZhYmxlJykpIHtcbiAgU3ltYm9sLm9ic2VydmFibGUgPSBTeW1ib2woJ29ic2VydmFibGUnKTtcbn1cblxudmFyIFN5bWJvbEl0ZXJhdG9yID0gZ2V0U3ltYm9sKCdpdGVyYXRvcicpO1xudmFyIFN5bWJvbE9ic2VydmFibGUgPSBnZXRTeW1ib2woJ29ic2VydmFibGUnKTtcbnZhciBTeW1ib2xTcGVjaWVzID0gZ2V0U3ltYm9sKCdzcGVjaWVzJyk7IC8vID09PSBBYnN0cmFjdCBPcGVyYXRpb25zID09PVxuXG5mdW5jdGlvbiBnZXRNZXRob2Qob2JqLCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gb2JqW2tleV07XG4gIGlmICh2YWx1ZSA9PSBudWxsKSByZXR1cm4gdW5kZWZpbmVkO1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKHZhbHVlICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGdldFNwZWNpZXMob2JqKSB7XG4gIHZhciBjdG9yID0gb2JqLmNvbnN0cnVjdG9yO1xuXG4gIGlmIChjdG9yICE9PSB1bmRlZmluZWQpIHtcbiAgICBjdG9yID0gY3RvcltTeW1ib2xTcGVjaWVzXTtcblxuICAgIGlmIChjdG9yID09PSBudWxsKSB7XG4gICAgICBjdG9yID0gdW5kZWZpbmVkO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBjdG9yICE9PSB1bmRlZmluZWQgPyBjdG9yIDogT2JzZXJ2YWJsZTtcbn1cblxuZnVuY3Rpb24gaXNPYnNlcnZhYmxlKHgpIHtcbiAgcmV0dXJuIHggaW5zdGFuY2VvZiBPYnNlcnZhYmxlOyAvLyBTUEVDOiBCcmFuZCBjaGVja1xufVxuXG5mdW5jdGlvbiBob3N0UmVwb3J0RXJyb3IoZSkge1xuICBpZiAoaG9zdFJlcG9ydEVycm9yLmxvZykge1xuICAgIGhvc3RSZXBvcnRFcnJvci5sb2coZSk7XG4gIH0gZWxzZSB7XG4gICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBlO1xuICAgIH0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIGVucXVldWUoZm4pIHtcbiAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgIGZuKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaG9zdFJlcG9ydEVycm9yKGUpO1xuICAgIH1cbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGNsZWFudXBTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKSB7XG4gIHZhciBjbGVhbnVwID0gc3Vic2NyaXB0aW9uLl9jbGVhbnVwO1xuICBpZiAoY2xlYW51cCA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gIHN1YnNjcmlwdGlvbi5fY2xlYW51cCA9IHVuZGVmaW5lZDtcblxuICBpZiAoIWNsZWFudXApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICB0cnkge1xuICAgIGlmICh0eXBlb2YgY2xlYW51cCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY2xlYW51cCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgdW5zdWJzY3JpYmUgPSBnZXRNZXRob2QoY2xlYW51cCwgJ3Vuc3Vic2NyaWJlJyk7XG5cbiAgICAgIGlmICh1bnN1YnNjcmliZSkge1xuICAgICAgICB1bnN1YnNjcmliZS5jYWxsKGNsZWFudXApO1xuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIGhvc3RSZXBvcnRFcnJvcihlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBjbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pIHtcbiAgc3Vic2NyaXB0aW9uLl9vYnNlcnZlciA9IHVuZGVmaW5lZDtcbiAgc3Vic2NyaXB0aW9uLl9xdWV1ZSA9IHVuZGVmaW5lZDtcbiAgc3Vic2NyaXB0aW9uLl9zdGF0ZSA9ICdjbG9zZWQnO1xufVxuXG5mdW5jdGlvbiBmbHVzaFN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pIHtcbiAgdmFyIHF1ZXVlID0gc3Vic2NyaXB0aW9uLl9xdWV1ZTtcblxuICBpZiAoIXF1ZXVlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgc3Vic2NyaXB0aW9uLl9xdWV1ZSA9IHVuZGVmaW5lZDtcbiAgc3Vic2NyaXB0aW9uLl9zdGF0ZSA9ICdyZWFkeSc7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7ICsraSkge1xuICAgIG5vdGlmeVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHF1ZXVlW2ldLnR5cGUsIHF1ZXVlW2ldLnZhbHVlKTtcbiAgICBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2Nsb3NlZCcpIGJyZWFrO1xuICB9XG59XG5cbmZ1bmN0aW9uIG5vdGlmeVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24sIHR5cGUsIHZhbHVlKSB7XG4gIHN1YnNjcmlwdGlvbi5fc3RhdGUgPSAncnVubmluZyc7XG4gIHZhciBvYnNlcnZlciA9IHN1YnNjcmlwdGlvbi5fb2JzZXJ2ZXI7XG5cbiAgdHJ5IHtcbiAgICB2YXIgbSA9IGdldE1ldGhvZChvYnNlcnZlciwgdHlwZSk7XG5cbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ25leHQnOlxuICAgICAgICBpZiAobSkgbS5jYWxsKG9ic2VydmVyLCB2YWx1ZSk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIGNsb3NlU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7XG4gICAgICAgIGlmIChtKSBtLmNhbGwob2JzZXJ2ZXIsIHZhbHVlKTtlbHNlIHRocm93IHZhbHVlO1xuICAgICAgICBicmVhaztcblxuICAgICAgY2FzZSAnY29tcGxldGUnOlxuICAgICAgICBjbG9zZVN1YnNjcmlwdGlvbihzdWJzY3JpcHRpb24pO1xuICAgICAgICBpZiAobSkgbS5jYWxsKG9ic2VydmVyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgaG9zdFJlcG9ydEVycm9yKGUpO1xuICB9XG5cbiAgaWYgKHN1YnNjcmlwdGlvbi5fc3RhdGUgPT09ICdjbG9zZWQnKSBjbGVhbnVwU3Vic2NyaXB0aW9uKHN1YnNjcmlwdGlvbik7ZWxzZSBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ3J1bm5pbmcnKSBzdWJzY3JpcHRpb24uX3N0YXRlID0gJ3JlYWR5Jztcbn1cblxuZnVuY3Rpb24gb25Ob3RpZnkoc3Vic2NyaXB0aW9uLCB0eXBlLCB2YWx1ZSkge1xuICBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2Nsb3NlZCcpIHJldHVybjtcblxuICBpZiAoc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2J1ZmZlcmluZycpIHtcbiAgICBzdWJzY3JpcHRpb24uX3F1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIHZhbHVlOiB2YWx1ZVxuICAgIH0pO1xuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgaWYgKHN1YnNjcmlwdGlvbi5fc3RhdGUgIT09ICdyZWFkeScpIHtcbiAgICBzdWJzY3JpcHRpb24uX3N0YXRlID0gJ2J1ZmZlcmluZyc7XG4gICAgc3Vic2NyaXB0aW9uLl9xdWV1ZSA9IFt7XG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgdmFsdWU6IHZhbHVlXG4gICAgfV07XG4gICAgZW5xdWV1ZShmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZmx1c2hTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uKTtcbiAgICB9KTtcbiAgICByZXR1cm47XG4gIH1cblxuICBub3RpZnlTdWJzY3JpcHRpb24oc3Vic2NyaXB0aW9uLCB0eXBlLCB2YWx1ZSk7XG59XG5cbnZhciBTdWJzY3JpcHRpb24gPVxuLyojX19QVVJFX18qL1xuZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTdWJzY3JpcHRpb24ob2JzZXJ2ZXIsIHN1YnNjcmliZXIpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3Vic2NyaXB0aW9uKTtcblxuICAgIC8vIEFTU0VSVDogb2JzZXJ2ZXIgaXMgYW4gb2JqZWN0XG4gICAgLy8gQVNTRVJUOiBzdWJzY3JpYmVyIGlzIGNhbGxhYmxlXG4gICAgdGhpcy5fY2xlYW51cCA9IHVuZGVmaW5lZDtcbiAgICB0aGlzLl9vYnNlcnZlciA9IG9ic2VydmVyO1xuICAgIHRoaXMuX3F1ZXVlID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX3N0YXRlID0gJ2luaXRpYWxpemluZyc7XG4gICAgdmFyIHN1YnNjcmlwdGlvbk9ic2VydmVyID0gbmV3IFN1YnNjcmlwdGlvbk9ic2VydmVyKHRoaXMpO1xuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuX2NsZWFudXAgPSBzdWJzY3JpYmVyLmNhbGwodW5kZWZpbmVkLCBzdWJzY3JpcHRpb25PYnNlcnZlcik7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgc3Vic2NyaXB0aW9uT2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuX3N0YXRlID09PSAnaW5pdGlhbGl6aW5nJykgdGhpcy5fc3RhdGUgPSAncmVhZHknO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKFN1YnNjcmlwdGlvbiwgW3tcbiAgICBrZXk6IFwidW5zdWJzY3JpYmVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdW5zdWJzY3JpYmUoKSB7XG4gICAgICBpZiAodGhpcy5fc3RhdGUgIT09ICdjbG9zZWQnKSB7XG4gICAgICAgIGNsb3NlU3Vic2NyaXB0aW9uKHRoaXMpO1xuICAgICAgICBjbGVhbnVwU3Vic2NyaXB0aW9uKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJjbG9zZWRcIixcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zdGF0ZSA9PT0gJ2Nsb3NlZCc7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN1YnNjcmlwdGlvbjtcbn0oKTtcblxudmFyIFN1YnNjcmlwdGlvbk9ic2VydmVyID1cbi8qI19fUFVSRV9fKi9cbmZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gU3Vic2NyaXB0aW9uT2JzZXJ2ZXIoc3Vic2NyaXB0aW9uKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN1YnNjcmlwdGlvbk9ic2VydmVyKTtcblxuICAgIHRoaXMuX3N1YnNjcmlwdGlvbiA9IHN1YnNjcmlwdGlvbjtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhTdWJzY3JpcHRpb25PYnNlcnZlciwgW3tcbiAgICBrZXk6IFwibmV4dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KHZhbHVlKSB7XG4gICAgICBvbk5vdGlmeSh0aGlzLl9zdWJzY3JpcHRpb24sICduZXh0JywgdmFsdWUpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJlcnJvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBlcnJvcih2YWx1ZSkge1xuICAgICAgb25Ob3RpZnkodGhpcy5fc3Vic2NyaXB0aW9uLCAnZXJyb3InLCB2YWx1ZSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImNvbXBsZXRlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbXBsZXRlKCkge1xuICAgICAgb25Ob3RpZnkodGhpcy5fc3Vic2NyaXB0aW9uLCAnY29tcGxldGUnKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY2xvc2VkXCIsXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3Vic2NyaXB0aW9uLl9zdGF0ZSA9PT0gJ2Nsb3NlZCc7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIFN1YnNjcmlwdGlvbk9ic2VydmVyO1xufSgpO1xuXG52YXIgT2JzZXJ2YWJsZSA9XG4vKiNfX1BVUkVfXyovXG5mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIE9ic2VydmFibGUoc3Vic2NyaWJlcikge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBPYnNlcnZhYmxlKTtcblxuICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBPYnNlcnZhYmxlKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignT2JzZXJ2YWJsZSBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24nKTtcbiAgICBpZiAodHlwZW9mIHN1YnNjcmliZXIgIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoJ09ic2VydmFibGUgaW5pdGlhbGl6ZXIgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XG4gICAgdGhpcy5fc3Vic2NyaWJlciA9IHN1YnNjcmliZXI7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoT2JzZXJ2YWJsZSwgW3tcbiAgICBrZXk6IFwic3Vic2NyaWJlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHN1YnNjcmliZShvYnNlcnZlcikge1xuICAgICAgaWYgKHR5cGVvZiBvYnNlcnZlciAhPT0gJ29iamVjdCcgfHwgb2JzZXJ2ZXIgPT09IG51bGwpIHtcbiAgICAgICAgb2JzZXJ2ZXIgPSB7XG4gICAgICAgICAgbmV4dDogb2JzZXJ2ZXIsXG4gICAgICAgICAgZXJyb3I6IGFyZ3VtZW50c1sxXSxcbiAgICAgICAgICBjb21wbGV0ZTogYXJndW1lbnRzWzJdXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKG9ic2VydmVyLCB0aGlzLl9zdWJzY3JpYmVyKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZm9yRWFjaFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmb3JFYWNoKGZuKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJykpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGRvbmUoKSB7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgcmVzb2x2ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZSh7XG4gICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBmbih2YWx1ZSwgZG9uZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHJlamVjdChlKTtcbiAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogcmVqZWN0LFxuICAgICAgICAgIGNvbXBsZXRlOiByZXNvbHZlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIm1hcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBtYXAoZm4pIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgICAgdmFyIEMgPSBnZXRTcGVjaWVzKHRoaXMpO1xuICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gX3RoaXMyLnN1YnNjcmliZSh7XG4gICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IGZuKHZhbHVlKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcImZpbHRlclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmaWx0ZXIoZm4pIHtcbiAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXG4gICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSB0aHJvdyBuZXcgVHlwZUVycm9yKGZuICsgJyBpcyBub3QgYSBmdW5jdGlvbicpO1xuICAgICAgdmFyIEMgPSBnZXRTcGVjaWVzKHRoaXMpO1xuICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gX3RoaXMzLnN1YnNjcmliZSh7XG4gICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBpZiAoIWZuKHZhbHVlKSkgcmV0dXJuO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICByZXR1cm4gb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQodmFsdWUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvcihlKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwicmVkdWNlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIHJlZHVjZShmbikge1xuICAgICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHRocm93IG5ldyBUeXBlRXJyb3IoZm4gKyAnIGlzIG5vdCBhIGZ1bmN0aW9uJyk7XG4gICAgICB2YXIgQyA9IGdldFNwZWNpZXModGhpcyk7XG4gICAgICB2YXIgaGFzU2VlZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxO1xuICAgICAgdmFyIGhhc1ZhbHVlID0gZmFsc2U7XG4gICAgICB2YXIgc2VlZCA9IGFyZ3VtZW50c1sxXTtcbiAgICAgIHZhciBhY2MgPSBzZWVkO1xuICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICByZXR1cm4gX3RoaXM0LnN1YnNjcmliZSh7XG4gICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICB2YXIgZmlyc3QgPSAhaGFzVmFsdWU7XG4gICAgICAgICAgICBoYXNWYWx1ZSA9IHRydWU7XG5cbiAgICAgICAgICAgIGlmICghZmlyc3QgfHwgaGFzU2VlZCkge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGFjYyA9IGZuKGFjYywgdmFsdWUpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhY2MgPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFoYXNWYWx1ZSAmJiAhaGFzU2VlZCkgcmV0dXJuIG9ic2VydmVyLmVycm9yKG5ldyBUeXBlRXJyb3IoJ0Nhbm5vdCByZWR1Y2UgYW4gZW1wdHkgc2VxdWVuY2UnKSk7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGFjYyk7XG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiY29uY2F0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIGNvbmNhdCgpIHtcbiAgICAgIHZhciBfdGhpczUgPSB0aGlzO1xuXG4gICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgc291cmNlcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICAgICAgc291cmNlc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICAgIH1cblxuICAgICAgdmFyIEMgPSBnZXRTcGVjaWVzKHRoaXMpO1xuICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICB2YXIgc3Vic2NyaXB0aW9uO1xuICAgICAgICB2YXIgaW5kZXggPSAwO1xuXG4gICAgICAgIGZ1bmN0aW9uIHN0YXJ0TmV4dChuZXh0KSB7XG4gICAgICAgICAgc3Vic2NyaXB0aW9uID0gbmV4dC5zdWJzY3JpYmUoe1xuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2KTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSBzb3VyY2VzLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN0YXJ0TmV4dChDLmZyb20oc291cmNlc1tpbmRleCsrXSkpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGFydE5leHQoX3RoaXM1KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbiA9IHVuZGVmaW5lZDtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9KTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiZmxhdE1hcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmbGF0TWFwKGZuKSB7XG4gICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgdGhyb3cgbmV3IFR5cGVFcnJvcihmbiArICcgaXMgbm90IGEgZnVuY3Rpb24nKTtcbiAgICAgIHZhciBDID0gZ2V0U3BlY2llcyh0aGlzKTtcbiAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgdmFyIHN1YnNjcmlwdGlvbnMgPSBbXTtcblxuICAgICAgICB2YXIgb3V0ZXIgPSBfdGhpczYuc3Vic2NyaWJlKHtcbiAgICAgICAgICBuZXh0OiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIGlmIChmbikge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZm4odmFsdWUpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBpbm5lciA9IEMuZnJvbSh2YWx1ZSkuc3Vic2NyaWJlKHtcbiAgICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh2YWx1ZSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBpID0gc3Vic2NyaXB0aW9ucy5pbmRleE9mKGlubmVyKTtcbiAgICAgICAgICAgICAgICBpZiAoaSA+PSAwKSBzdWJzY3JpcHRpb25zLnNwbGljZShpLCAxKTtcbiAgICAgICAgICAgICAgICBjb21wbGV0ZUlmRG9uZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHN1YnNjcmlwdGlvbnMucHVzaChpbm5lcik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGUpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbXBsZXRlSWZEb25lKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBjb21wbGV0ZUlmRG9uZSgpIHtcbiAgICAgICAgICBpZiAob3V0ZXIuY2xvc2VkICYmIHN1YnNjcmlwdGlvbnMubGVuZ3RoID09PSAwKSBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBzdWJzY3JpcHRpb25zLmZvckVhY2goZnVuY3Rpb24gKHMpIHtcbiAgICAgICAgICAgIHJldHVybiBzLnVuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgb3V0ZXIudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogU3ltYm9sT2JzZXJ2YWJsZSxcbiAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9XSwgW3tcbiAgICBrZXk6IFwiZnJvbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBmcm9tKHgpIHtcbiAgICAgIHZhciBDID0gdHlwZW9mIHRoaXMgPT09ICdmdW5jdGlvbicgPyB0aGlzIDogT2JzZXJ2YWJsZTtcbiAgICAgIGlmICh4ID09IG51bGwpIHRocm93IG5ldyBUeXBlRXJyb3IoeCArICcgaXMgbm90IGFuIG9iamVjdCcpO1xuICAgICAgdmFyIG1ldGhvZCA9IGdldE1ldGhvZCh4LCBTeW1ib2xPYnNlcnZhYmxlKTtcblxuICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICB2YXIgb2JzZXJ2YWJsZSA9IG1ldGhvZC5jYWxsKHgpO1xuICAgICAgICBpZiAoT2JqZWN0KG9ic2VydmFibGUpICE9PSBvYnNlcnZhYmxlKSB0aHJvdyBuZXcgVHlwZUVycm9yKG9ic2VydmFibGUgKyAnIGlzIG5vdCBhbiBvYmplY3QnKTtcbiAgICAgICAgaWYgKGlzT2JzZXJ2YWJsZShvYnNlcnZhYmxlKSAmJiBvYnNlcnZhYmxlLmNvbnN0cnVjdG9yID09PSBDKSByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgIHJldHVybiBvYnNlcnZhYmxlLnN1YnNjcmliZShvYnNlcnZlcik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoaGFzU3ltYm9sKCdpdGVyYXRvcicpKSB7XG4gICAgICAgIG1ldGhvZCA9IGdldE1ldGhvZCh4LCBTeW1ib2xJdGVyYXRvcik7XG5cbiAgICAgICAgaWYgKG1ldGhvZCkge1xuICAgICAgICAgIHJldHVybiBuZXcgQyhmdW5jdGlvbiAob2JzZXJ2ZXIpIHtcbiAgICAgICAgICAgIGVucXVldWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG4gICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZTtcbiAgICAgICAgICAgICAgdmFyIF9kaWRJdGVyYXRvckVycm9yID0gZmFsc2U7XG4gICAgICAgICAgICAgIHZhciBfaXRlcmF0b3JFcnJvciA9IHVuZGVmaW5lZDtcblxuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIF9pdGVyYXRvciA9IG1ldGhvZC5jYWxsKHgpW1N5bWJvbC5pdGVyYXRvcl0oKSwgX3N0ZXA7ICEoX2l0ZXJhdG9yTm9ybWFsQ29tcGxldGlvbiA9IChfc3RlcCA9IF9pdGVyYXRvci5uZXh0KCkpLmRvbmUpOyBfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uID0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgICAgdmFyIF9pdGVtID0gX3N0ZXAudmFsdWU7XG4gICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KF9pdGVtKTtcbiAgICAgICAgICAgICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIF9kaWRJdGVyYXRvckVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBfaXRlcmF0b3JFcnJvciA9IGVycjtcbiAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgaWYgKCFfaXRlcmF0b3JOb3JtYWxDb21wbGV0aW9uICYmIF9pdGVyYXRvci5yZXR1cm4gIT0gbnVsbCkge1xuICAgICAgICAgICAgICAgICAgICBfaXRlcmF0b3IucmV0dXJuKCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgIGlmIChfZGlkSXRlcmF0b3JFcnJvcikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBfaXRlcmF0b3JFcnJvcjtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoeCkpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICAgIGVucXVldWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG9ic2VydmVyLmNsb3NlZCkgcmV0dXJuO1xuXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHgubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh4W2ldKTtcbiAgICAgICAgICAgICAgaWYgKG9ic2VydmVyLmNsb3NlZCkgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcih4ICsgJyBpcyBub3Qgb2JzZXJ2YWJsZScpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJvZlwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBvZigpIHtcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgaXRlbXMgPSBuZXcgQXJyYXkoX2xlbjIpLCBfa2V5MiA9IDA7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHtcbiAgICAgICAgaXRlbXNbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgdmFyIEMgPSB0eXBlb2YgdGhpcyA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMgOiBPYnNlcnZhYmxlO1xuICAgICAgcmV0dXJuIG5ldyBDKGZ1bmN0aW9uIChvYnNlcnZlcikge1xuICAgICAgICBlbnF1ZXVlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAob2JzZXJ2ZXIuY2xvc2VkKSByZXR1cm47XG5cbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KGl0ZW1zW2ldKTtcbiAgICAgICAgICAgIGlmIChvYnNlcnZlci5jbG9zZWQpIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogU3ltYm9sU3BlY2llcyxcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBPYnNlcnZhYmxlO1xufSgpO1xuXG5leHBvcnRzLk9ic2VydmFibGUgPSBPYnNlcnZhYmxlO1xuXG5pZiAoaGFzU3ltYm9scygpKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShPYnNlcnZhYmxlLCBTeW1ib2woJ2V4dGVuc2lvbnMnKSwge1xuICAgIHZhbHVlOiB7XG4gICAgICBzeW1ib2w6IFN5bWJvbE9ic2VydmFibGUsXG4gICAgICBob3N0UmVwb3J0RXJyb3I6IGhvc3RSZXBvcnRFcnJvclxuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlXG4gIH0pO1xufSIsICJtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4vbGliL09ic2VydmFibGUuanMnKS5PYnNlcnZhYmxlO1xuIiwgIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gdm9pZCAwO1xuLy8gaXN0YW5idWwgaWdub3JlIG5leHQgKFNlZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2dyYXBocWwtanMvaXNzdWVzLzIzMTcnKVxudmFyIG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBTeW1ib2wuZm9yID09PSAnZnVuY3Rpb24nID8gU3ltYm9sLmZvcignbm9kZWpzLnV0aWwuaW5zcGVjdC5jdXN0b20nKSA6IHVuZGVmaW5lZDtcbnZhciBfZGVmYXVsdCA9IG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2w7XG5leHBvcnRzLmRlZmF1bHQgPSBfZGVmYXVsdDtcbiIsICJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IGluc3BlY3Q7XG5cbnZhciBfbm9kZWpzQ3VzdG9tSW5zcGVjdFN5bWJvbCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vbm9kZWpzQ3VzdG9tSW5zcGVjdFN5bWJvbC5qc1wiKSk7XG5cbmZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cbmZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxudmFyIE1BWF9BUlJBWV9MRU5HVEggPSAxMDtcbnZhciBNQVhfUkVDVVJTSVZFX0RFUFRIID0gMjtcbi8qKlxuICogVXNlZCB0byBwcmludCB2YWx1ZXMgaW4gZXJyb3IgbWVzc2FnZXMuXG4gKi9cblxuZnVuY3Rpb24gaW5zcGVjdCh2YWx1ZSkge1xuICByZXR1cm4gZm9ybWF0VmFsdWUodmFsdWUsIFtdKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsdWUsIHNlZW5WYWx1ZXMpIHtcbiAgc3dpdGNoIChfdHlwZW9mKHZhbHVlKSkge1xuICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuXG4gICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgcmV0dXJuIHZhbHVlLm5hbWUgPyBcIltmdW5jdGlvbiBcIi5jb25jYXQodmFsdWUubmFtZSwgXCJdXCIpIDogJ1tmdW5jdGlvbl0nO1xuXG4gICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gJ251bGwnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZm9ybWF0T2JqZWN0VmFsdWUodmFsdWUsIHNlZW5WYWx1ZXMpO1xuXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBTdHJpbmcodmFsdWUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGZvcm1hdE9iamVjdFZhbHVlKHZhbHVlLCBwcmV2aW91c2x5U2VlblZhbHVlcykge1xuICBpZiAocHJldmlvdXNseVNlZW5WYWx1ZXMuaW5kZXhPZih2YWx1ZSkgIT09IC0xKSB7XG4gICAgcmV0dXJuICdbQ2lyY3VsYXJdJztcbiAgfVxuXG4gIHZhciBzZWVuVmFsdWVzID0gW10uY29uY2F0KHByZXZpb3VzbHlTZWVuVmFsdWVzLCBbdmFsdWVdKTtcbiAgdmFyIGN1c3RvbUluc3BlY3RGbiA9IGdldEN1c3RvbUZuKHZhbHVlKTtcblxuICBpZiAoY3VzdG9tSW5zcGVjdEZuICE9PSB1bmRlZmluZWQpIHtcbiAgICB2YXIgY3VzdG9tVmFsdWUgPSBjdXN0b21JbnNwZWN0Rm4uY2FsbCh2YWx1ZSk7IC8vIGNoZWNrIGZvciBpbmZpbml0ZSByZWN1cnNpb25cblxuICAgIGlmIChjdXN0b21WYWx1ZSAhPT0gdmFsdWUpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgY3VzdG9tVmFsdWUgPT09ICdzdHJpbmcnID8gY3VzdG9tVmFsdWUgOiBmb3JtYXRWYWx1ZShjdXN0b21WYWx1ZSwgc2VlblZhbHVlcyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZvcm1hdEFycmF5KHZhbHVlLCBzZWVuVmFsdWVzKTtcbiAgfVxuXG4gIHJldHVybiBmb3JtYXRPYmplY3QodmFsdWUsIHNlZW5WYWx1ZXMpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRPYmplY3Qob2JqZWN0LCBzZWVuVmFsdWVzKSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICBpZiAoa2V5cy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ3t9JztcbiAgfVxuXG4gIGlmIChzZWVuVmFsdWVzLmxlbmd0aCA+IE1BWF9SRUNVUlNJVkVfREVQVEgpIHtcbiAgICByZXR1cm4gJ1snICsgZ2V0T2JqZWN0VGFnKG9iamVjdCkgKyAnXSc7XG4gIH1cblxuICB2YXIgcHJvcGVydGllcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgdmFsdWUgPSBmb3JtYXRWYWx1ZShvYmplY3Rba2V5XSwgc2VlblZhbHVlcyk7XG4gICAgcmV0dXJuIGtleSArICc6ICcgKyB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiAneyAnICsgcHJvcGVydGllcy5qb2luKCcsICcpICsgJyB9Jztcbn1cblxuZnVuY3Rpb24gZm9ybWF0QXJyYXkoYXJyYXksIHNlZW5WYWx1ZXMpIHtcbiAgaWYgKGFycmF5Lmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiAnW10nO1xuICB9XG5cbiAgaWYgKHNlZW5WYWx1ZXMubGVuZ3RoID4gTUFYX1JFQ1VSU0lWRV9ERVBUSCkge1xuICAgIHJldHVybiAnW0FycmF5XSc7XG4gIH1cblxuICB2YXIgbGVuID0gTWF0aC5taW4oTUFYX0FSUkFZX0xFTkdUSCwgYXJyYXkubGVuZ3RoKTtcbiAgdmFyIHJlbWFpbmluZyA9IGFycmF5Lmxlbmd0aCAtIGxlbjtcbiAgdmFyIGl0ZW1zID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47ICsraSkge1xuICAgIGl0ZW1zLnB1c2goZm9ybWF0VmFsdWUoYXJyYXlbaV0sIHNlZW5WYWx1ZXMpKTtcbiAgfVxuXG4gIGlmIChyZW1haW5pbmcgPT09IDEpIHtcbiAgICBpdGVtcy5wdXNoKCcuLi4gMSBtb3JlIGl0ZW0nKTtcbiAgfSBlbHNlIGlmIChyZW1haW5pbmcgPiAxKSB7XG4gICAgaXRlbXMucHVzaChcIi4uLiBcIi5jb25jYXQocmVtYWluaW5nLCBcIiBtb3JlIGl0ZW1zXCIpKTtcbiAgfVxuXG4gIHJldHVybiAnWycgKyBpdGVtcy5qb2luKCcsICcpICsgJ10nO1xufVxuXG5mdW5jdGlvbiBnZXRDdXN0b21GbihvYmplY3QpIHtcbiAgdmFyIGN1c3RvbUluc3BlY3RGbiA9IG9iamVjdFtTdHJpbmcoX25vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wuZGVmYXVsdCldO1xuXG4gIGlmICh0eXBlb2YgY3VzdG9tSW5zcGVjdEZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGN1c3RvbUluc3BlY3RGbjtcbiAgfVxuXG4gIGlmICh0eXBlb2Ygb2JqZWN0Lmluc3BlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gb2JqZWN0Lmluc3BlY3Q7XG4gIH1cbn1cblxuZnVuY3Rpb24gZ2V0T2JqZWN0VGFnKG9iamVjdCkge1xuICB2YXIgdGFnID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkucmVwbGFjZSgvXlxcW29iamVjdCAvLCAnJykucmVwbGFjZSgvXSQvLCAnJyk7XG5cbiAgaWYgKHRhZyA9PT0gJ09iamVjdCcgJiYgdHlwZW9mIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBuYW1lID0gb2JqZWN0LmNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICBpZiAodHlwZW9mIG5hbWUgPT09ICdzdHJpbmcnICYmIG5hbWUgIT09ICcnKSB7XG4gICAgICByZXR1cm4gbmFtZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdGFnO1xufVxuIiwgIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5kZWZhdWx0ID0gaW52YXJpYW50O1xuXG5mdW5jdGlvbiBpbnZhcmlhbnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gIHZhciBib29sZWFuQ29uZGl0aW9uID0gQm9vbGVhbihjb25kaXRpb24pOyAvLyBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAoU2VlIHRyYW5zZm9ybWF0aW9uIGRvbmUgaW4gJy4vcmVzb3VyY2VzL2lubGluZUludmFyaWFudC5qcycpXG5cbiAgaWYgKCFib29sZWFuQ29uZGl0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UgIT0gbnVsbCA/IG1lc3NhZ2UgOiAnVW5leHBlY3RlZCBpbnZhcmlhbnQgdHJpZ2dlcmVkLicpO1xuICB9XG59XG4iLCAiXCJ1c2Ugc3RyaWN0XCI7XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuICB2YWx1ZTogdHJ1ZVxufSk7XG5leHBvcnRzLmRlZmF1bHQgPSBkZWZpbmVJbnNwZWN0O1xuXG52YXIgX2ludmFyaWFudCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQocmVxdWlyZShcIi4vaW52YXJpYW50LmpzXCIpKTtcblxudmFyIF9ub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi9ub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sLmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBUaGUgYGRlZmluZUluc3BlY3QoKWAgZnVuY3Rpb24gZGVmaW5lcyBgaW5zcGVjdCgpYCBwcm90b3R5cGUgbWV0aG9kIGFzIGFsaWFzIG9mIGB0b0pTT05gXG4gKi9cbmZ1bmN0aW9uIGRlZmluZUluc3BlY3QoY2xhc3NPYmplY3QpIHtcbiAgdmFyIGZuID0gY2xhc3NPYmplY3QucHJvdG90eXBlLnRvSlNPTjtcbiAgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nIHx8ICgwLCBfaW52YXJpYW50LmRlZmF1bHQpKDApO1xuICBjbGFzc09iamVjdC5wcm90b3R5cGUuaW5zcGVjdCA9IGZuOyAvLyBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAoU2VlOiAnaHR0cHM6Ly9naXRodWIuY29tL2dyYXBocWwvZ3JhcGhxbC1qcy9pc3N1ZXMvMjMxNycpXG5cbiAgaWYgKF9ub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sLmRlZmF1bHQpIHtcbiAgICBjbGFzc09iamVjdC5wcm90b3R5cGVbX25vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wuZGVmYXVsdF0gPSBmbjtcbiAgfVxufVxuIiwgIlwidXNlIHN0cmljdFwiO1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcbiAgdmFsdWU6IHRydWVcbn0pO1xuZXhwb3J0cy5pc05vZGUgPSBpc05vZGU7XG5leHBvcnRzLlRva2VuID0gZXhwb3J0cy5Mb2NhdGlvbiA9IHZvaWQgMDtcblxudmFyIF9kZWZpbmVJbnNwZWN0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChyZXF1aXJlKFwiLi4vanN1dGlscy9kZWZpbmVJbnNwZWN0LmpzXCIpKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuLyoqXG4gKiBDb250YWlucyBhIHJhbmdlIG9mIFVURi04IGNoYXJhY3RlciBvZmZzZXRzIGFuZCB0b2tlbiByZWZlcmVuY2VzIHRoYXRcbiAqIGlkZW50aWZ5IHRoZSByZWdpb24gb2YgdGhlIHNvdXJjZSBmcm9tIHdoaWNoIHRoZSBBU1QgZGVyaXZlZC5cbiAqL1xudmFyIExvY2F0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIFRoZSBjaGFyYWN0ZXIgb2Zmc2V0IGF0IHdoaWNoIHRoaXMgTm9kZSBiZWdpbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGlzIE5vZGUgZW5kcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBUb2tlbiBhdCB3aGljaCB0aGlzIE5vZGUgYmVnaW5zLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFRva2VuIGF0IHdoaWNoIHRoaXMgTm9kZSBlbmRzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFNvdXJjZSBkb2N1bWVudCB0aGUgQVNUIHJlcHJlc2VudHMuXG4gICAqL1xuICBmdW5jdGlvbiBMb2NhdGlvbihzdGFydFRva2VuLCBlbmRUb2tlbiwgc291cmNlKSB7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0VG9rZW4uc3RhcnQ7XG4gICAgdGhpcy5lbmQgPSBlbmRUb2tlbi5lbmQ7XG4gICAgdGhpcy5zdGFydFRva2VuID0gc3RhcnRUb2tlbjtcbiAgICB0aGlzLmVuZFRva2VuID0gZW5kVG9rZW47XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTG9jYXRpb24ucHJvdG90eXBlO1xuXG4gIF9wcm90by50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0LFxuICAgICAgZW5kOiB0aGlzLmVuZFxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIExvY2F0aW9uO1xufSgpOyAvLyBQcmludCBhIHNpbXBsaWZpZWQgZm9ybSB3aGVuIGFwcGVhcmluZyBpbiBgaW5zcGVjdGAgYW5kIGB1dGlsLmluc3BlY3RgLlxuXG5cbmV4cG9ydHMuTG9jYXRpb24gPSBMb2NhdGlvbjtcbigwLCBfZGVmaW5lSW5zcGVjdC5kZWZhdWx0KShMb2NhdGlvbik7XG4vKipcbiAqIFJlcHJlc2VudHMgYSByYW5nZSBvZiBjaGFyYWN0ZXJzIHJlcHJlc2VudGVkIGJ5IGEgbGV4aWNhbCB0b2tlblxuICogd2l0aGluIGEgU291cmNlLlxuICovXG5cbnZhciBUb2tlbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiBUb2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjaGFyYWN0ZXIgb2Zmc2V0IGF0IHdoaWNoIHRoaXMgTm9kZSBiZWdpbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGlzIE5vZGUgZW5kcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSAxLWluZGV4ZWQgbGluZSBudW1iZXIgb24gd2hpY2ggdGhpcyBUb2tlbiBhcHBlYXJzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIDEtaW5kZXhlZCBjb2x1bW4gbnVtYmVyIGF0IHdoaWNoIHRoaXMgVG9rZW4gYmVnaW5zLlxuICAgKi9cblxuICAvKipcbiAgICogRm9yIG5vbi1wdW5jdHVhdGlvbiB0b2tlbnMsIHJlcHJlc2VudHMgdGhlIGludGVycHJldGVkIHZhbHVlIG9mIHRoZSB0b2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRva2VucyBleGlzdCBhcyBub2RlcyBpbiBhIGRvdWJsZS1saW5rZWQtbGlzdCBhbW9uZ3N0IGFsbCB0b2tlbnNcbiAgICogaW5jbHVkaW5nIGlnbm9yZWQgdG9rZW5zLiA8U09GPiBpcyBhbHdheXMgdGhlIGZpcnN0IG5vZGUgYW5kIDxFT0Y+XG4gICAqIHRoZSBsYXN0LlxuICAgKi9cbiAgZnVuY3Rpb24gVG9rZW4oa2luZCwgc3RhcnQsIGVuZCwgbGluZSwgY29sdW1uLCBwcmV2LCB2YWx1ZSkge1xuICAgIHRoaXMua2luZCA9IGtpbmQ7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMucHJldiA9IHByZXY7XG4gICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgfVxuXG4gIHZhciBfcHJvdG8yID0gVG9rZW4ucHJvdG90eXBlO1xuXG4gIF9wcm90bzIudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiB0aGlzLmtpbmQsXG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIGxpbmU6IHRoaXMubGluZSxcbiAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBUb2tlbjtcbn0oKTsgLy8gUHJpbnQgYSBzaW1wbGlmaWVkIGZvcm0gd2hlbiBhcHBlYXJpbmcgaW4gYGluc3BlY3RgIGFuZCBgdXRpbC5pbnNwZWN0YC5cblxuXG5leHBvcnRzLlRva2VuID0gVG9rZW47XG4oMCwgX2RlZmluZUluc3BlY3QuZGVmYXVsdCkoVG9rZW4pO1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5mdW5jdGlvbiBpc05vZGUobWF5YmVOb2RlKSB7XG4gIHJldHVybiBtYXliZU5vZGUgIT0gbnVsbCAmJiB0eXBlb2YgbWF5YmVOb2RlLmtpbmQgPT09ICdzdHJpbmcnO1xufVxuLyoqXG4gKiBUaGUgbGlzdCBvZiBhbGwgcG9zc2libGUgQVNUIG5vZGUgdHlwZXMuXG4gKi9cbiIsICJcInVzZSBzdHJpY3RcIjtcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMudmlzaXQgPSB2aXNpdDtcbmV4cG9ydHMudmlzaXRJblBhcmFsbGVsID0gdmlzaXRJblBhcmFsbGVsO1xuZXhwb3J0cy5nZXRWaXNpdEZuID0gZ2V0VmlzaXRGbjtcbmV4cG9ydHMuQlJFQUsgPSBleHBvcnRzLlF1ZXJ5RG9jdW1lbnRLZXlzID0gdm9pZCAwO1xuXG52YXIgX2luc3BlY3QgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KHJlcXVpcmUoXCIuLi9qc3V0aWxzL2luc3BlY3QuanNcIikpO1xuXG52YXIgX2FzdCA9IHJlcXVpcmUoXCIuL2FzdC5qc1wiKTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxudmFyIFF1ZXJ5RG9jdW1lbnRLZXlzID0ge1xuICBOYW1lOiBbXSxcbiAgRG9jdW1lbnQ6IFsnZGVmaW5pdGlvbnMnXSxcbiAgT3BlcmF0aW9uRGVmaW5pdGlvbjogWyduYW1lJywgJ3ZhcmlhYmxlRGVmaW5pdGlvbnMnLCAnZGlyZWN0aXZlcycsICdzZWxlY3Rpb25TZXQnXSxcbiAgVmFyaWFibGVEZWZpbml0aW9uOiBbJ3ZhcmlhYmxlJywgJ3R5cGUnLCAnZGVmYXVsdFZhbHVlJywgJ2RpcmVjdGl2ZXMnXSxcbiAgVmFyaWFibGU6IFsnbmFtZSddLFxuICBTZWxlY3Rpb25TZXQ6IFsnc2VsZWN0aW9ucyddLFxuICBGaWVsZDogWydhbGlhcycsICduYW1lJywgJ2FyZ3VtZW50cycsICdkaXJlY3RpdmVzJywgJ3NlbGVjdGlvblNldCddLFxuICBBcmd1bWVudDogWyduYW1lJywgJ3ZhbHVlJ10sXG4gIEZyYWdtZW50U3ByZWFkOiBbJ25hbWUnLCAnZGlyZWN0aXZlcyddLFxuICBJbmxpbmVGcmFnbWVudDogWyd0eXBlQ29uZGl0aW9uJywgJ2RpcmVjdGl2ZXMnLCAnc2VsZWN0aW9uU2V0J10sXG4gIEZyYWdtZW50RGVmaW5pdGlvbjogWyduYW1lJywgLy8gTm90ZTogZnJhZ21lbnQgdmFyaWFibGUgZGVmaW5pdGlvbnMgYXJlIGV4cGVyaW1lbnRhbCBhbmQgbWF5IGJlIGNoYW5nZWRcbiAgLy8gb3IgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLlxuICAndmFyaWFibGVEZWZpbml0aW9ucycsICd0eXBlQ29uZGl0aW9uJywgJ2RpcmVjdGl2ZXMnLCAnc2VsZWN0aW9uU2V0J10sXG4gIEludFZhbHVlOiBbXSxcbiAgRmxvYXRWYWx1ZTogW10sXG4gIFN0cmluZ1ZhbHVlOiBbXSxcbiAgQm9vbGVhblZhbHVlOiBbXSxcbiAgTnVsbFZhbHVlOiBbXSxcbiAgRW51bVZhbHVlOiBbXSxcbiAgTGlzdFZhbHVlOiBbJ3ZhbHVlcyddLFxuICBPYmplY3RWYWx1ZTogWydmaWVsZHMnXSxcbiAgT2JqZWN0RmllbGQ6IFsnbmFtZScsICd2YWx1ZSddLFxuICBEaXJlY3RpdmU6IFsnbmFtZScsICdhcmd1bWVudHMnXSxcbiAgTmFtZWRUeXBlOiBbJ25hbWUnXSxcbiAgTGlzdFR5cGU6IFsndHlwZSddLFxuICBOb25OdWxsVHlwZTogWyd0eXBlJ10sXG4gIFNjaGVtYURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnZGlyZWN0aXZlcycsICdvcGVyYXRpb25UeXBlcyddLFxuICBPcGVyYXRpb25UeXBlRGVmaW5pdGlvbjogWyd0eXBlJ10sXG4gIFNjYWxhclR5cGVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnZGlyZWN0aXZlcyddLFxuICBPYmplY3RUeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2ludGVyZmFjZXMnLCAnZGlyZWN0aXZlcycsICdmaWVsZHMnXSxcbiAgRmllbGREZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnYXJndW1lbnRzJywgJ3R5cGUnLCAnZGlyZWN0aXZlcyddLFxuICBJbnB1dFZhbHVlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ3R5cGUnLCAnZGVmYXVsdFZhbHVlJywgJ2RpcmVjdGl2ZXMnXSxcbiAgSW50ZXJmYWNlVHlwZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdpbnRlcmZhY2VzJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIFVuaW9uVHlwZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdkaXJlY3RpdmVzJywgJ3R5cGVzJ10sXG4gIEVudW1UeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnLCAndmFsdWVzJ10sXG4gIEVudW1WYWx1ZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIElucHV0T2JqZWN0VHlwZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdkaXJlY3RpdmVzJywgJ2ZpZWxkcyddLFxuICBEaXJlY3RpdmVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnYXJndW1lbnRzJywgJ2xvY2F0aW9ucyddLFxuICBTY2hlbWFFeHRlbnNpb246IFsnZGlyZWN0aXZlcycsICdvcGVyYXRpb25UeXBlcyddLFxuICBTY2FsYXJUeXBlRXh0ZW5zaW9uOiBbJ25hbWUnLCAnZGlyZWN0aXZlcyddLFxuICBPYmplY3RUeXBlRXh0ZW5zaW9uOiBbJ25hbWUnLCAnaW50ZXJmYWNlcycsICdkaXJlY3RpdmVzJywgJ2ZpZWxkcyddLFxuICBJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uOiBbJ25hbWUnLCAnaW50ZXJmYWNlcycsICdkaXJlY3RpdmVzJywgJ2ZpZWxkcyddLFxuICBVbmlvblR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJywgJ3R5cGVzJ10sXG4gIEVudW1UeXBlRXh0ZW5zaW9uOiBbJ25hbWUnLCAnZGlyZWN0aXZlcycsICd2YWx1ZXMnXSxcbiAgSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOiBbJ25hbWUnLCAnZGlyZWN0aXZlcycsICdmaWVsZHMnXVxufTtcbmV4cG9ydHMuUXVlcnlEb2N1bWVudEtleXMgPSBRdWVyeURvY3VtZW50S2V5cztcbnZhciBCUkVBSyA9IE9iamVjdC5mcmVlemUoe30pO1xuLyoqXG4gKiB2aXNpdCgpIHdpbGwgd2FsayB0aHJvdWdoIGFuIEFTVCB1c2luZyBhIGRlcHRoLWZpcnN0IHRyYXZlcnNhbCwgY2FsbGluZ1xuICogdGhlIHZpc2l0b3IncyBlbnRlciBmdW5jdGlvbiBhdCBlYWNoIG5vZGUgaW4gdGhlIHRyYXZlcnNhbCwgYW5kIGNhbGxpbmcgdGhlXG4gKiBsZWF2ZSBmdW5jdGlvbiBhZnRlciB2aXNpdGluZyB0aGF0IG5vZGUgYW5kIGFsbCBvZiBpdHMgY2hpbGQgbm9kZXMuXG4gKlxuICogQnkgcmV0dXJuaW5nIGRpZmZlcmVudCB2YWx1ZXMgZnJvbSB0aGUgZW50ZXIgYW5kIGxlYXZlIGZ1bmN0aW9ucywgdGhlXG4gKiBiZWhhdmlvciBvZiB0aGUgdmlzaXRvciBjYW4gYmUgYWx0ZXJlZCwgaW5jbHVkaW5nIHNraXBwaW5nIG92ZXIgYSBzdWItdHJlZSBvZlxuICogdGhlIEFTVCAoYnkgcmV0dXJuaW5nIGZhbHNlKSwgZWRpdGluZyB0aGUgQVNUIGJ5IHJldHVybmluZyBhIHZhbHVlIG9yIG51bGxcbiAqIHRvIHJlbW92ZSB0aGUgdmFsdWUsIG9yIHRvIHN0b3AgdGhlIHdob2xlIHRyYXZlcnNhbCBieSByZXR1cm5pbmcgQlJFQUsuXG4gKlxuICogV2hlbiB1c2luZyB2aXNpdCgpIHRvIGVkaXQgYW4gQVNULCB0aGUgb3JpZ2luYWwgQVNUIHdpbGwgbm90IGJlIG1vZGlmaWVkLCBhbmRcbiAqIGEgbmV3IHZlcnNpb24gb2YgdGhlIEFTVCB3aXRoIHRoZSBjaGFuZ2VzIGFwcGxpZWQgd2lsbCBiZSByZXR1cm5lZCBmcm9tIHRoZVxuICogdmlzaXQgZnVuY3Rpb24uXG4gKlxuICogICAgIGNvbnN0IGVkaXRlZEFTVCA9IHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXIobm9kZSwga2V5LCBwYXJlbnQsIHBhdGgsIGFuY2VzdG9ycykge1xuICogICAgICAgICAvLyBAcmV0dXJuXG4gKiAgICAgICAgIC8vICAgdW5kZWZpbmVkOiBubyBhY3Rpb25cbiAqICAgICAgICAgLy8gICBmYWxzZTogc2tpcCB2aXNpdGluZyB0aGlzIG5vZGVcbiAqICAgICAgICAgLy8gICB2aXNpdG9yLkJSRUFLOiBzdG9wIHZpc2l0aW5nIGFsdG9nZXRoZXJcbiAqICAgICAgICAgLy8gICBudWxsOiBkZWxldGUgdGhpcyBub2RlXG4gKiAgICAgICAgIC8vICAgYW55IHZhbHVlOiByZXBsYWNlIHRoaXMgbm9kZSB3aXRoIHRoZSByZXR1cm5lZCB2YWx1ZVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlKG5vZGUsIGtleSwgcGFyZW50LCBwYXRoLCBhbmNlc3RvcnMpIHtcbiAqICAgICAgICAgLy8gQHJldHVyblxuICogICAgICAgICAvLyAgIHVuZGVmaW5lZDogbm8gYWN0aW9uXG4gKiAgICAgICAgIC8vICAgZmFsc2U6IG5vIGFjdGlvblxuICogICAgICAgICAvLyAgIHZpc2l0b3IuQlJFQUs6IHN0b3AgdmlzaXRpbmcgYWx0b2dldGhlclxuICogICAgICAgICAvLyAgIG51bGw6IGRlbGV0ZSB0aGlzIG5vZGVcbiAqICAgICAgICAgLy8gICBhbnkgdmFsdWU6IHJlcGxhY2UgdGhpcyBub2RlIHdpdGggdGhlIHJldHVybmVkIHZhbHVlXG4gKiAgICAgICB9XG4gKiAgICAgfSk7XG4gKlxuICogQWx0ZXJuYXRpdmVseSB0byBwcm92aWRpbmcgZW50ZXIoKSBhbmQgbGVhdmUoKSBmdW5jdGlvbnMsIGEgdmlzaXRvciBjYW5cbiAqIGluc3RlYWQgcHJvdmlkZSBmdW5jdGlvbnMgbmFtZWQgdGhlIHNhbWUgYXMgdGhlIGtpbmRzIG9mIEFTVCBub2Rlcywgb3JcbiAqIGVudGVyL2xlYXZlIHZpc2l0b3JzIGF0IGEgbmFtZWQga2V5LCBsZWFkaW5nIHRvIGZvdXIgcGVybXV0YXRpb25zIG9mIHRoZVxuICogdmlzaXRvciBBUEk6XG4gKlxuICogMSkgTmFtZWQgdmlzaXRvcnMgdHJpZ2dlcmVkIHdoZW4gZW50ZXJpbmcgYSBub2RlIG9mIGEgc3BlY2lmaWMga2luZC5cbiAqXG4gKiAgICAgdmlzaXQoYXN0LCB7XG4gKiAgICAgICBLaW5kKG5vZGUpIHtcbiAqICAgICAgICAgLy8gZW50ZXIgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDIpIE5hbWVkIHZpc2l0b3JzIHRoYXQgdHJpZ2dlciB1cG9uIGVudGVyaW5nIGFuZCBsZWF2aW5nIGEgbm9kZSBvZlxuICogICAgYSBzcGVjaWZpYyBraW5kLlxuICpcbiAqICAgICB2aXNpdChhc3QsIHtcbiAqICAgICAgIEtpbmQ6IHtcbiAqICAgICAgICAgZW50ZXIobm9kZSkge1xuICogICAgICAgICAgIC8vIGVudGVyIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgICAgbGVhdmUobm9kZSkge1xuICogICAgICAgICAgIC8vIGxlYXZlIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDMpIEdlbmVyaWMgdmlzaXRvcnMgdGhhdCB0cmlnZ2VyIHVwb24gZW50ZXJpbmcgYW5kIGxlYXZpbmcgYW55IG5vZGUuXG4gKlxuICogICAgIHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXIobm9kZSkge1xuICogICAgICAgICAvLyBlbnRlciBhbnkgbm9kZVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlKG5vZGUpIHtcbiAqICAgICAgICAgLy8gbGVhdmUgYW55IG5vZGVcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDQpIFBhcmFsbGVsIHZpc2l0b3JzIGZvciBlbnRlcmluZyBhbmQgbGVhdmluZyBub2RlcyBvZiBhIHNwZWNpZmljIGtpbmQuXG4gKlxuICogICAgIHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXI6IHtcbiAqICAgICAgICAgS2luZChub2RlKSB7XG4gKiAgICAgICAgICAgLy8gZW50ZXIgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgICAgICAgfVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlOiB7XG4gKiAgICAgICAgIEtpbmQobm9kZSkge1xuICogICAgICAgICAgIC8vIGxlYXZlIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9KVxuICovXG5cbmV4cG9ydHMuQlJFQUsgPSBCUkVBSztcblxuZnVuY3Rpb24gdmlzaXQocm9vdCwgdmlzaXRvcikge1xuICB2YXIgdmlzaXRvcktleXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IFF1ZXJ5RG9jdW1lbnRLZXlzO1xuXG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXVuZGVmLWluaXQgKi9cbiAgdmFyIHN0YWNrID0gdW5kZWZpbmVkO1xuICB2YXIgaW5BcnJheSA9IEFycmF5LmlzQXJyYXkocm9vdCk7XG4gIHZhciBrZXlzID0gW3Jvb3RdO1xuICB2YXIgaW5kZXggPSAtMTtcbiAgdmFyIGVkaXRzID0gW107XG4gIHZhciBub2RlID0gdW5kZWZpbmVkO1xuICB2YXIga2V5ID0gdW5kZWZpbmVkO1xuICB2YXIgcGFyZW50ID0gdW5kZWZpbmVkO1xuICB2YXIgcGF0aCA9IFtdO1xuICB2YXIgYW5jZXN0b3JzID0gW107XG4gIHZhciBuZXdSb290ID0gcm9vdDtcbiAgLyogZXNsaW50LWVuYWJsZSBuby11bmRlZi1pbml0ICovXG5cbiAgZG8ge1xuICAgIGluZGV4Kys7XG4gICAgdmFyIGlzTGVhdmluZyA9IGluZGV4ID09PSBrZXlzLmxlbmd0aDtcbiAgICB2YXIgaXNFZGl0ZWQgPSBpc0xlYXZpbmcgJiYgZWRpdHMubGVuZ3RoICE9PSAwO1xuXG4gICAgaWYgKGlzTGVhdmluZykge1xuICAgICAga2V5ID0gYW5jZXN0b3JzLmxlbmd0aCA9PT0gMCA/IHVuZGVmaW5lZCA6IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcbiAgICAgIG5vZGUgPSBwYXJlbnQ7XG4gICAgICBwYXJlbnQgPSBhbmNlc3RvcnMucG9wKCk7XG5cbiAgICAgIGlmIChpc0VkaXRlZCkge1xuICAgICAgICBpZiAoaW5BcnJheSkge1xuICAgICAgICAgIG5vZGUgPSBub2RlLnNsaWNlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGNsb25lID0ge307XG5cbiAgICAgICAgICBmb3IgKHZhciBfaTIgPSAwLCBfT2JqZWN0JGtleXMyID0gT2JqZWN0LmtleXMobm9kZSk7IF9pMiA8IF9PYmplY3Qka2V5czIubGVuZ3RoOyBfaTIrKykge1xuICAgICAgICAgICAgdmFyIGsgPSBfT2JqZWN0JGtleXMyW19pMl07XG4gICAgICAgICAgICBjbG9uZVtrXSA9IG5vZGVba107XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbm9kZSA9IGNsb25lO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGVkaXRPZmZzZXQgPSAwO1xuXG4gICAgICAgIGZvciAodmFyIGlpID0gMDsgaWkgPCBlZGl0cy5sZW5ndGg7IGlpKyspIHtcbiAgICAgICAgICB2YXIgZWRpdEtleSA9IGVkaXRzW2lpXVswXTtcbiAgICAgICAgICB2YXIgZWRpdFZhbHVlID0gZWRpdHNbaWldWzFdO1xuXG4gICAgICAgICAgaWYgKGluQXJyYXkpIHtcbiAgICAgICAgICAgIGVkaXRLZXkgLT0gZWRpdE9mZnNldDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoaW5BcnJheSAmJiBlZGl0VmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICAgIG5vZGUuc3BsaWNlKGVkaXRLZXksIDEpO1xuICAgICAgICAgICAgZWRpdE9mZnNldCsrO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub2RlW2VkaXRLZXldID0gZWRpdFZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpbmRleCA9IHN0YWNrLmluZGV4O1xuICAgICAga2V5cyA9IHN0YWNrLmtleXM7XG4gICAgICBlZGl0cyA9IHN0YWNrLmVkaXRzO1xuICAgICAgaW5BcnJheSA9IHN0YWNrLmluQXJyYXk7XG4gICAgICBzdGFjayA9IHN0YWNrLnByZXY7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSA9IHBhcmVudCA/IGluQXJyYXkgPyBpbmRleCA6IGtleXNbaW5kZXhdIDogdW5kZWZpbmVkO1xuICAgICAgbm9kZSA9IHBhcmVudCA/IHBhcmVudFtrZXldIDogbmV3Um9vdDtcblxuICAgICAgaWYgKG5vZGUgPT09IG51bGwgfHwgbm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgIHBhdGgucHVzaChrZXkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciByZXN1bHQgPSB2b2lkIDA7XG5cbiAgICBpZiAoIUFycmF5LmlzQXJyYXkobm9kZSkpIHtcbiAgICAgIGlmICghKDAsIF9hc3QuaXNOb2RlKShub2RlKSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIEFTVCBOb2RlOiBcIi5jb25jYXQoKDAsIF9pbnNwZWN0LmRlZmF1bHQpKG5vZGUpLCBcIi5cIikpO1xuICAgICAgfVxuXG4gICAgICB2YXIgdmlzaXRGbiA9IGdldFZpc2l0Rm4odmlzaXRvciwgbm9kZS5raW5kLCBpc0xlYXZpbmcpO1xuXG4gICAgICBpZiAodmlzaXRGbikge1xuICAgICAgICByZXN1bHQgPSB2aXNpdEZuLmNhbGwodmlzaXRvciwgbm9kZSwga2V5LCBwYXJlbnQsIHBhdGgsIGFuY2VzdG9ycyk7XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gQlJFQUspIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChyZXN1bHQgPT09IGZhbHNlKSB7XG4gICAgICAgICAgaWYgKCFpc0xlYXZpbmcpIHtcbiAgICAgICAgICAgIHBhdGgucG9wKCk7XG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAocmVzdWx0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBlZGl0cy5wdXNoKFtrZXksIHJlc3VsdF0pO1xuXG4gICAgICAgICAgaWYgKCFpc0xlYXZpbmcpIHtcbiAgICAgICAgICAgIGlmICgoMCwgX2FzdC5pc05vZGUpKHJlc3VsdCkpIHtcbiAgICAgICAgICAgICAgbm9kZSA9IHJlc3VsdDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHBhdGgucG9wKCk7XG4gICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChyZXN1bHQgPT09IHVuZGVmaW5lZCAmJiBpc0VkaXRlZCkge1xuICAgICAgZWRpdHMucHVzaChba2V5LCBub2RlXSk7XG4gICAgfVxuXG4gICAgaWYgKGlzTGVhdmluZykge1xuICAgICAgcGF0aC5wb3AoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIF92aXNpdG9yS2V5cyRub2RlJGtpbjtcblxuICAgICAgc3RhY2sgPSB7XG4gICAgICAgIGluQXJyYXk6IGluQXJyYXksXG4gICAgICAgIGluZGV4OiBpbmRleCxcbiAgICAgICAga2V5czoga2V5cyxcbiAgICAgICAgZWRpdHM6IGVkaXRzLFxuICAgICAgICBwcmV2OiBzdGFja1xuICAgICAgfTtcbiAgICAgIGluQXJyYXkgPSBBcnJheS5pc0FycmF5KG5vZGUpO1xuICAgICAga2V5cyA9IGluQXJyYXkgPyBub2RlIDogKF92aXNpdG9yS2V5cyRub2RlJGtpbiA9IHZpc2l0b3JLZXlzW25vZGUua2luZF0pICE9PSBudWxsICYmIF92aXNpdG9yS2V5cyRub2RlJGtpbiAhPT0gdm9pZCAwID8gX3Zpc2l0b3JLZXlzJG5vZGUka2luIDogW107XG4gICAgICBpbmRleCA9IC0xO1xuICAgICAgZWRpdHMgPSBbXTtcblxuICAgICAgaWYgKHBhcmVudCkge1xuICAgICAgICBhbmNlc3RvcnMucHVzaChwYXJlbnQpO1xuICAgICAgfVxuXG4gICAgICBwYXJlbnQgPSBub2RlO1xuICAgIH1cbiAgfSB3aGlsZSAoc3RhY2sgIT09IHVuZGVmaW5lZCk7XG5cbiAgaWYgKGVkaXRzLmxlbmd0aCAhPT0gMCkge1xuICAgIG5ld1Jvb3QgPSBlZGl0c1tlZGl0cy5sZW5ndGggLSAxXVsxXTtcbiAgfVxuXG4gIHJldHVybiBuZXdSb290O1xufVxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHZpc2l0b3IgaW5zdGFuY2Ugd2hpY2ggZGVsZWdhdGVzIHRvIG1hbnkgdmlzaXRvcnMgdG8gcnVuIGluXG4gKiBwYXJhbGxlbC4gRWFjaCB2aXNpdG9yIHdpbGwgYmUgdmlzaXRlZCBmb3IgZWFjaCBub2RlIGJlZm9yZSBtb3Zpbmcgb24uXG4gKlxuICogSWYgYSBwcmlvciB2aXNpdG9yIGVkaXRzIGEgbm9kZSwgbm8gZm9sbG93aW5nIHZpc2l0b3JzIHdpbGwgc2VlIHRoYXQgbm9kZS5cbiAqL1xuXG5cbmZ1bmN0aW9uIHZpc2l0SW5QYXJhbGxlbCh2aXNpdG9ycykge1xuICB2YXIgc2tpcHBpbmcgPSBuZXcgQXJyYXkodmlzaXRvcnMubGVuZ3RoKTtcbiAgcmV0dXJuIHtcbiAgICBlbnRlcjogZnVuY3Rpb24gZW50ZXIobm9kZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aXNpdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2tpcHBpbmdbaV0gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmbiA9IGdldFZpc2l0Rm4odmlzaXRvcnNbaV0sIG5vZGUua2luZCxcbiAgICAgICAgICAvKiBpc0xlYXZpbmcgKi9cbiAgICAgICAgICBmYWxzZSk7XG5cbiAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbi5hcHBseSh2aXNpdG9yc1tpXSwgYXJndW1lbnRzKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgc2tpcHBpbmdbaV0gPSBub2RlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IEJSRUFLKSB7XG4gICAgICAgICAgICAgIHNraXBwaW5nW2ldID0gQlJFQUs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBsZWF2ZTogZnVuY3Rpb24gbGVhdmUobm9kZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aXNpdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2tpcHBpbmdbaV0gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmbiA9IGdldFZpc2l0Rm4odmlzaXRvcnNbaV0sIG5vZGUua2luZCxcbiAgICAgICAgICAvKiBpc0xlYXZpbmcgKi9cbiAgICAgICAgICB0cnVlKTtcblxuICAgICAgICAgIGlmIChmbikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZuLmFwcGx5KHZpc2l0b3JzW2ldLCBhcmd1bWVudHMpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBCUkVBSykge1xuICAgICAgICAgICAgICBza2lwcGluZ1tpXSA9IEJSRUFLO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNraXBwaW5nW2ldID09PSBub2RlKSB7XG4gICAgICAgICAgc2tpcHBpbmdbaV0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuLyoqXG4gKiBHaXZlbiBhIHZpc2l0b3IgaW5zdGFuY2UsIGlmIGl0IGlzIGxlYXZpbmcgb3Igbm90LCBhbmQgYSBub2RlIGtpbmQsIHJldHVyblxuICogdGhlIGZ1bmN0aW9uIHRoZSB2aXNpdG9yIHJ1bnRpbWUgc2hvdWxkIGNhbGwuXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRWaXNpdEZuKHZpc2l0b3IsIGtpbmQsIGlzTGVhdmluZykge1xuICB2YXIga2luZFZpc2l0b3IgPSB2aXNpdG9yW2tpbmRdO1xuXG4gIGlmIChraW5kVmlzaXRvcikge1xuICAgIGlmICghaXNMZWF2aW5nICYmIHR5cGVvZiBraW5kVmlzaXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8geyBLaW5kKCkge30gfVxuICAgICAgcmV0dXJuIGtpbmRWaXNpdG9yO1xuICAgIH1cblxuICAgIHZhciBraW5kU3BlY2lmaWNWaXNpdG9yID0gaXNMZWF2aW5nID8ga2luZFZpc2l0b3IubGVhdmUgOiBraW5kVmlzaXRvci5lbnRlcjtcblxuICAgIGlmICh0eXBlb2Yga2luZFNwZWNpZmljVmlzaXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgLy8geyBLaW5kOiB7IGVudGVyKCkge30sIGxlYXZlKCkge30gfSB9XG4gICAgICByZXR1cm4ga2luZFNwZWNpZmljVmlzaXRvcjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdmFyIHNwZWNpZmljVmlzaXRvciA9IGlzTGVhdmluZyA/IHZpc2l0b3IubGVhdmUgOiB2aXNpdG9yLmVudGVyO1xuXG4gICAgaWYgKHNwZWNpZmljVmlzaXRvcikge1xuICAgICAgaWYgKHR5cGVvZiBzcGVjaWZpY1Zpc2l0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgLy8geyBlbnRlcigpIHt9LCBsZWF2ZSgpIHt9IH1cbiAgICAgICAgcmV0dXJuIHNwZWNpZmljVmlzaXRvcjtcbiAgICAgIH1cblxuICAgICAgdmFyIHNwZWNpZmljS2luZFZpc2l0b3IgPSBzcGVjaWZpY1Zpc2l0b3Jba2luZF07XG5cbiAgICAgIGlmICh0eXBlb2Ygc3BlY2lmaWNLaW5kVmlzaXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyB7IGVudGVyOiB7IEtpbmQoKSB7fSB9LCBsZWF2ZTogeyBLaW5kKCkge30gfSB9XG4gICAgICAgIHJldHVybiBzcGVjaWZpY0tpbmRWaXNpdG9yO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwgIi8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcblxyXG4vKiBnbG9iYWwgZ2xvYmFsLCBkZWZpbmUsIFN5c3RlbSwgUmVmbGVjdCwgUHJvbWlzZSAqL1xyXG52YXIgX19leHRlbmRzO1xyXG52YXIgX19hc3NpZ247XHJcbnZhciBfX3Jlc3Q7XHJcbnZhciBfX2RlY29yYXRlO1xyXG52YXIgX19wYXJhbTtcclxudmFyIF9fbWV0YWRhdGE7XHJcbnZhciBfX2F3YWl0ZXI7XHJcbnZhciBfX2dlbmVyYXRvcjtcclxudmFyIF9fZXhwb3J0U3RhcjtcclxudmFyIF9fdmFsdWVzO1xyXG52YXIgX19yZWFkO1xyXG52YXIgX19zcHJlYWQ7XHJcbnZhciBfX3NwcmVhZEFycmF5cztcclxudmFyIF9fYXdhaXQ7XHJcbnZhciBfX2FzeW5jR2VuZXJhdG9yO1xyXG52YXIgX19hc3luY0RlbGVnYXRvcjtcclxudmFyIF9fYXN5bmNWYWx1ZXM7XHJcbnZhciBfX21ha2VUZW1wbGF0ZU9iamVjdDtcclxudmFyIF9faW1wb3J0U3RhcjtcclxudmFyIF9faW1wb3J0RGVmYXVsdDtcclxudmFyIF9fY2xhc3NQcml2YXRlRmllbGRHZXQ7XHJcbnZhciBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0O1xyXG52YXIgX19jcmVhdGVCaW5kaW5nO1xyXG4oZnVuY3Rpb24gKGZhY3RvcnkpIHtcclxuICAgIHZhciByb290ID0gdHlwZW9mIGdsb2JhbCA9PT0gXCJvYmplY3RcIiA/IGdsb2JhbCA6IHR5cGVvZiBzZWxmID09PSBcIm9iamVjdFwiID8gc2VsZiA6IHR5cGVvZiB0aGlzID09PSBcIm9iamVjdFwiID8gdGhpcyA6IHt9O1xyXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kKSB7XHJcbiAgICAgICAgZGVmaW5lKFwidHNsaWJcIiwgW1wiZXhwb3J0c1wiXSwgZnVuY3Rpb24gKGV4cG9ydHMpIHsgZmFjdG9yeShjcmVhdGVFeHBvcnRlcihyb290LCBjcmVhdGVFeHBvcnRlcihleHBvcnRzKSkpOyB9KTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgZmFjdG9yeShjcmVhdGVFeHBvcnRlcihyb290LCBjcmVhdGVFeHBvcnRlcihtb2R1bGUuZXhwb3J0cykpKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGZhY3RvcnkoY3JlYXRlRXhwb3J0ZXIocm9vdCkpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gY3JlYXRlRXhwb3J0ZXIoZXhwb3J0cywgcHJldmlvdXMpIHtcclxuICAgICAgICBpZiAoZXhwb3J0cyAhPT0gcm9vdCkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIE9iamVjdC5jcmVhdGUgPT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKGlkLCB2KSB7IHJldHVybiBleHBvcnRzW2lkXSA9IHByZXZpb3VzID8gcHJldmlvdXMoaWQsIHYpIDogdjsgfTtcclxuICAgIH1cclxufSlcclxuKGZ1bmN0aW9uIChleHBvcnRlcikge1xyXG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcclxuICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XHJcbiAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07XHJcblxyXG4gICAgX19leHRlbmRzID0gZnVuY3Rpb24gKGQsIGIpIHtcclxuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxyXG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcclxuICAgIH07XHJcblxyXG4gICAgX19hc3NpZ24gPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfTtcclxuXHJcbiAgICBfX3Jlc3QgPSBmdW5jdGlvbiAocywgZSkge1xyXG4gICAgICAgIHZhciB0ID0ge307XHJcbiAgICAgICAgZm9yICh2YXIgcCBpbiBzKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHMsIHApICYmIGUuaW5kZXhPZihwKSA8IDApXHJcbiAgICAgICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgICAgIGlmIChzICE9IG51bGwgJiYgdHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMgPT09IFwiZnVuY3Rpb25cIilcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIHAgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKHMpOyBpIDwgcC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgICAgIHRbcFtpXV0gPSBzW3BbaV1dO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHQ7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fZGVjb3JhdGUgPSBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcclxuICAgICAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XHJcbiAgICAgICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcclxuICAgICAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX3BhcmFtID0gZnVuY3Rpb24gKHBhcmFtSW5kZXgsIGRlY29yYXRvcikge1xyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG4gICAgfTtcclxuXHJcbiAgICBfX21ldGFkYXRhID0gZnVuY3Rpb24gKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxuICAgIH07XHJcblxyXG4gICAgX19hd2FpdGVyID0gZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xyXG4gICAgICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fZ2VuZXJhdG9yID0gZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcclxuICAgICAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgICAgICB3aGlsZSAoXykgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XHJcbiAgICAgICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgX19jcmVhdGVCaW5kaW5nID0gZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgICAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgICAgIG9bazJdID0gbVtrXTtcclxuICAgIH07XHJcblxyXG4gICAgX19leHBvcnRTdGFyID0gZnVuY3Rpb24gKG0sIGV4cG9ydHMpIHtcclxuICAgICAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbiAgICB9O1xyXG5cclxuICAgIF9fdmFsdWVzID0gZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xyXG4gICAgICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcclxuICAgICAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX3JlYWQgPSBmdW5jdGlvbiAobywgbikge1xyXG4gICAgICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcclxuICAgICAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXI7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fc3ByZWFkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICAgICAgcmV0dXJuIGFyO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgICAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgICAgIGZvciAodmFyIGEgPSBhcmd1bWVudHNbaV0sIGogPSAwLCBqbCA9IGEubGVuZ3RoOyBqIDwgamw7IGorKywgaysrKVxyXG4gICAgICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICAgICAgcmV0dXJuIHI7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fYXdhaXQgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG4gICAgfTtcclxuXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yID0gZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIGdlbmVyYXRvcikge1xyXG4gICAgICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgICAgICByZXR1cm4gaSA9IHt9LCB2ZXJiKFwibmV4dFwiKSwgdmVyYihcInRocm93XCIpLCB2ZXJiKFwicmV0dXJuXCIpLCBpW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICAgICAgZnVuY3Rpb24gdmVyYihuKSB7IGlmIChnW25dKSBpW25dID0gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhLCBiKSB7IHEucHVzaChbbiwgdiwgYSwgYl0pID4gMSB8fCByZXN1bWUobiwgdik7IH0pOyB9OyB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgIH1cclxuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHNldHRsZShmLCB2KSB7IGlmIChmKHYpLCBxLnNoaWZ0KCksIHEubGVuZ3RoKSByZXN1bWUocVswXVswXSwgcVswXVsxXSk7IH1cclxuICAgIH07XHJcblxyXG4gICAgX19hc3luY0RlbGVnYXRvciA9IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgdmFyIGksIHA7XHJcbiAgICAgICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgICAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBuID09PSBcInJldHVyblwiIH0gOiBmID8gZih2KSA6IHY7IH0gOiBmOyB9XHJcbiAgICB9O1xyXG5cclxuICAgIF9fYXN5bmNWYWx1ZXMgPSBmdW5jdGlvbiAobykge1xyXG4gICAgICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgICAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICAgICAgZnVuY3Rpb24gdmVyYihuKSB7IGlbbl0gPSBvW25dICYmIGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7IHYgPSBvW25dKHYpLCBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCB2LmRvbmUsIHYudmFsdWUpOyB9KTsgfTsgfVxyXG4gICAgICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxuICAgIH07XHJcblxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3QgPSBmdW5jdGlvbiAoY29va2VkLCByYXcpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgICAgIHJldHVybiBjb29rZWQ7XHJcbiAgICB9O1xyXG5cclxuICAgIF9faW1wb3J0U3RhciA9IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgICAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xyXG4gICAgICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgICAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoT2JqZWN0Lmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgcmVzdWx0W2tdID0gbW9kW2tdO1xyXG4gICAgICAgIHJlc3VsdFtcImRlZmF1bHRcIl0gPSBtb2Q7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH07XHJcblxyXG4gICAgX19pbXBvcnREZWZhdWx0ID0gZnVuY3Rpb24gKG1vZCkge1xyXG4gICAgICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG4gICAgfTtcclxuXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0ID0gZnVuY3Rpb24gKHJlY2VpdmVyLCBwcml2YXRlTWFwKSB7XHJcbiAgICAgICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBnZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbiAgICB9O1xyXG5cclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQgPSBmdW5jdGlvbiAocmVjZWl2ZXIsIHByaXZhdGVNYXAsIHZhbHVlKSB7XHJcbiAgICAgICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcImF0dGVtcHRlZCB0byBzZXQgcHJpdmF0ZSBmaWVsZCBvbiBub24taW5zdGFuY2VcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuXHJcbiAgICBleHBvcnRlcihcIl9fZXh0ZW5kc1wiLCBfX2V4dGVuZHMpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2Fzc2lnblwiLCBfX2Fzc2lnbik7XHJcbiAgICBleHBvcnRlcihcIl9fcmVzdFwiLCBfX3Jlc3QpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2RlY29yYXRlXCIsIF9fZGVjb3JhdGUpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX3BhcmFtXCIsIF9fcGFyYW0pO1xyXG4gICAgZXhwb3J0ZXIoXCJfX21ldGFkYXRhXCIsIF9fbWV0YWRhdGEpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2F3YWl0ZXJcIiwgX19hd2FpdGVyKTtcclxuICAgIGV4cG9ydGVyKFwiX19nZW5lcmF0b3JcIiwgX19nZW5lcmF0b3IpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2V4cG9ydFN0YXJcIiwgX19leHBvcnRTdGFyKTtcclxuICAgIGV4cG9ydGVyKFwiX19jcmVhdGVCaW5kaW5nXCIsIF9fY3JlYXRlQmluZGluZyk7XHJcbiAgICBleHBvcnRlcihcIl9fdmFsdWVzXCIsIF9fdmFsdWVzKTtcclxuICAgIGV4cG9ydGVyKFwiX19yZWFkXCIsIF9fcmVhZCk7XHJcbiAgICBleHBvcnRlcihcIl9fc3ByZWFkXCIsIF9fc3ByZWFkKTtcclxuICAgIGV4cG9ydGVyKFwiX19zcHJlYWRBcnJheXNcIiwgX19zcHJlYWRBcnJheXMpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2F3YWl0XCIsIF9fYXdhaXQpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2FzeW5jR2VuZXJhdG9yXCIsIF9fYXN5bmNHZW5lcmF0b3IpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2FzeW5jRGVsZWdhdG9yXCIsIF9fYXN5bmNEZWxlZ2F0b3IpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2FzeW5jVmFsdWVzXCIsIF9fYXN5bmNWYWx1ZXMpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX21ha2VUZW1wbGF0ZU9iamVjdFwiLCBfX21ha2VUZW1wbGF0ZU9iamVjdCk7XHJcbiAgICBleHBvcnRlcihcIl9faW1wb3J0U3RhclwiLCBfX2ltcG9ydFN0YXIpO1xyXG4gICAgZXhwb3J0ZXIoXCJfX2ltcG9ydERlZmF1bHRcIiwgX19pbXBvcnREZWZhdWx0KTtcclxuICAgIGV4cG9ydGVyKFwiX19jbGFzc1ByaXZhdGVGaWVsZEdldFwiLCBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0KTtcclxuICAgIGV4cG9ydGVyKFwiX19jbGFzc1ByaXZhdGVGaWVsZFNldFwiLCBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KTtcclxufSk7XHJcbiIsICIvKipcbiAqIGxvZGFzaCAoQ3VzdG9tIEJ1aWxkKSA8aHR0cHM6Ly9sb2Rhc2guY29tLz5cbiAqIEJ1aWxkOiBgbG9kYXNoIG1vZHVsYXJpemUgZXhwb3J0cz1cIm5wbVwiIC1vIC4vYFxuICogQ29weXJpZ2h0IGpRdWVyeSBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnMgPGh0dHBzOi8vanF1ZXJ5Lm9yZy8+XG4gKiBSZWxlYXNlZCB1bmRlciBNSVQgbGljZW5zZSA8aHR0cHM6Ly9sb2Rhc2guY29tL2xpY2Vuc2U+XG4gKiBCYXNlZCBvbiBVbmRlcnNjb3JlLmpzIDEuOC4zIDxodHRwOi8vdW5kZXJzY29yZWpzLm9yZy9MSUNFTlNFPlxuICogQ29weXJpZ2h0IEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzXG4gKi9cblxuLyoqIFVzZWQgYXMgdGhlIHNpemUgdG8gZW5hYmxlIGxhcmdlIGFycmF5IG9wdGltaXphdGlvbnMuICovXG52YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG4gICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwLFxuICAgIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIGdlblRhZyA9ICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXScsXG4gICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcHJvbWlzZVRhZyA9ICdbb2JqZWN0IFByb21pc2VdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJyxcbiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG4gICAgcmVJc1BsYWluUHJvcCA9IC9eXFx3KiQvLFxuICAgIHJlTGVhZGluZ0RvdCA9IC9eXFwuLyxcbiAgICByZVByb3BOYW1lID0gL1teLltcXF1dK3xcXFsoPzooLT9cXGQrKD86XFwuXFxkKyk/KXwoW1wiJ10pKCg/Oig/IVxcMilbXlxcXFxdfFxcXFwuKSo/KVxcMilcXF18KD89KD86XFwufFxcW1xcXSkoPzpcXC58XFxbXFxdfCQpKS9nO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcbiAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtcGF0dGVybnMpLlxuICovXG52YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXG4vKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cbnZhciByZUVzY2FwZUNoYXIgPSAvXFxcXChcXFxcKT8vZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cbnZhciByZUlzVWludCA9IC9eKD86MHxbMS05XVxcZCopJC87XG5cbi8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cbnZhciB0eXBlZEFycmF5VGFncyA9IHt9O1xudHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1tpbnQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50OFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG50eXBlZEFycmF5VGFnc1thcmdzVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2FycmF5VGFnXSA9XG50eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG50eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9XG50eXBlZEFycmF5VGFnc1tlcnJvclRhZ10gPSB0eXBlZEFycmF5VGFnc1tmdW5jVGFnXSA9XG50eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9XG50eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID0gdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9XG50eXBlZEFycmF5VGFnc1tzZXRUYWddID0gdHlwZWRBcnJheVRhZ3Nbc3RyaW5nVGFnXSA9XG50eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xudmFyIGZyZWVHbG9iYWwgPSB0eXBlb2YgZ2xvYmFsID09ICdvYmplY3QnICYmIGdsb2JhbCAmJiBnbG9iYWwuT2JqZWN0ID09PSBPYmplY3QgJiYgZ2xvYmFsO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gdHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZiAmJiBzZWxmLk9iamVjdCA9PT0gT2JqZWN0ICYmIHNlbGY7XG5cbi8qKiBVc2VkIGFzIGEgcmVmZXJlbmNlIHRvIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgZXhwb3J0c2AuICovXG52YXIgZnJlZUV4cG9ydHMgPSB0eXBlb2YgZXhwb3J0cyA9PSAnb2JqZWN0JyAmJiBleHBvcnRzICYmICFleHBvcnRzLm5vZGVUeXBlICYmIGV4cG9ydHM7XG5cbi8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgbW9kdWxlYC4gKi9cbnZhciBmcmVlTW9kdWxlID0gZnJlZUV4cG9ydHMgJiYgdHlwZW9mIG1vZHVsZSA9PSAnb2JqZWN0JyAmJiBtb2R1bGUgJiYgIW1vZHVsZS5ub2RlVHlwZSAmJiBtb2R1bGU7XG5cbi8qKiBEZXRlY3QgdGhlIHBvcHVsYXIgQ29tbW9uSlMgZXh0ZW5zaW9uIGBtb2R1bGUuZXhwb3J0c2AuICovXG52YXIgbW9kdWxlRXhwb3J0cyA9IGZyZWVNb2R1bGUgJiYgZnJlZU1vZHVsZS5leHBvcnRzID09PSBmcmVlRXhwb3J0cztcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBwcm9jZXNzYCBmcm9tIE5vZGUuanMuICovXG52YXIgZnJlZVByb2Nlc3MgPSBtb2R1bGVFeHBvcnRzICYmIGZyZWVHbG9iYWwucHJvY2VzcztcblxuLyoqIFVzZWQgdG8gYWNjZXNzIGZhc3RlciBOb2RlLmpzIGhlbHBlcnMuICovXG52YXIgbm9kZVV0aWwgPSAoZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIGZyZWVQcm9jZXNzICYmIGZyZWVQcm9jZXNzLmJpbmRpbmcoJ3V0aWwnKTtcbiAgfSBjYXRjaCAoZSkge31cbn0oKSk7XG5cbi8qIE5vZGUuanMgaGVscGVyIHJlZmVyZW5jZXMuICovXG52YXIgbm9kZUlzVHlwZWRBcnJheSA9IG5vZGVVdGlsICYmIG5vZGVVdGlsLmlzVHlwZWRBcnJheTtcblxuLyoqXG4gKiBBcHBlbmRzIHRoZSBlbGVtZW50cyBvZiBgdmFsdWVzYCB0byBgYXJyYXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtBcnJheX0gdmFsdWVzIFRoZSB2YWx1ZXMgdG8gYXBwZW5kLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIGBhcnJheWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5UHVzaChhcnJheSwgdmFsdWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gdmFsdWVzLmxlbmd0aCxcbiAgICAgIG9mZnNldCA9IGFycmF5Lmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIGFycmF5W29mZnNldCArIGluZGV4XSA9IHZhbHVlc1tpbmRleF07XG4gIH1cbiAgcmV0dXJuIGFycmF5O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAqIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5wcm9wZXJ0eWAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlUHJvcGVydHkoa2V5KSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzXG4gKiBvciBtYXggYXJyYXkgbGVuZ3RoIGNoZWNrcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtudW1iZXJ9IG4gVGhlIG51bWJlciBvZiB0aW1lcyB0byBpbnZva2UgYGl0ZXJhdGVlYC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGl0ZXJhdGVlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VUaW1lcyhuLCBpdGVyYXRlZSkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG4pO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbikge1xuICAgIHJlc3VsdFtpbmRleF0gPSBpdGVyYXRlZShpbmRleCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy51bmFyeWAgd2l0aG91dCBzdXBwb3J0IGZvciBzdG9yaW5nIG1ldGFkYXRhLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjYXAgYXJndW1lbnRzIGZvci5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGNhcHBlZCBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVVuYXJ5KGZ1bmMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuIGZ1bmModmFsdWUpO1xuICB9O1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHByb3BlcnR5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0IGluIElFIDwgOS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZSkge1xuICAvLyBNYW55IGhvc3Qgb2JqZWN0cyBhcmUgYE9iamVjdGAgb2JqZWN0cyB0aGF0IGNhbiBjb2VyY2UgdG8gc3RyaW5nc1xuICAvLyBkZXNwaXRlIGhhdmluZyBpbXByb3Blcmx5IGRlZmluZWQgYHRvU3RyaW5nYCBtZXRob2RzLlxuICB2YXIgcmVzdWx0ID0gZmFsc2U7XG4gIGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS50b1N0cmluZyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJlc3VsdCA9ICEhKHZhbHVlICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUga2V5LXZhbHVlIHBhaXJzLlxuICovXG5mdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KG1hcC5zaXplKTtcblxuICBtYXAuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwga2V5KSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gW2tleSwgdmFsdWVdO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgdW5hcnkgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIGl0cyBhcmd1bWVudCB0cmFuc2Zvcm1lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gd3JhcC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHRyYW5zZm9ybSBUaGUgYXJndW1lbnQgdHJhbnNmb3JtLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIG92ZXJBcmcoZnVuYywgdHJhbnNmb3JtKSB7XG4gIHJldHVybiBmdW5jdGlvbihhcmcpIHtcbiAgICByZXR1cm4gZnVuYyh0cmFuc2Zvcm0oYXJnKSk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgYHNldGAgdG8gYW4gYXJyYXkgb2YgaXRzIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IHNldCBUaGUgc2V0IHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cbiAqL1xuZnVuY3Rpb24gc2V0VG9BcnJheShzZXQpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShzZXQuc2l6ZSk7XG5cbiAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXN1bHRbKytpbmRleF0gPSB2YWx1ZTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLFxuICAgIGZ1bmNQcm90byA9IEZ1bmN0aW9uLnByb3RvdHlwZSxcbiAgICBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvdmVycmVhY2hpbmcgY29yZS1qcyBzaGltcy4gKi9cbnZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBtZXRob2RzIG1hc3F1ZXJhZGluZyBhcyBuYXRpdmUuICovXG52YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcbiAgdmFyIHVpZCA9IC9bXi5dKyQvLmV4ZWMoY29yZUpzRGF0YSAmJiBjb3JlSnNEYXRhLmtleXMgJiYgY29yZUpzRGF0YS5rZXlzLklFX1BST1RPIHx8ICcnKTtcbiAgcmV0dXJuIHVpZCA/ICgnU3ltYm9sKHNyYylfMS4nICsgdWlkKSA6ICcnO1xufSgpKTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IGZ1bmNQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFN5bWJvbCA9IHJvb3QuU3ltYm9sLFxuICAgIFVpbnQ4QXJyYXkgPSByb290LlVpbnQ4QXJyYXksXG4gICAgZ2V0UHJvdG90eXBlID0gb3ZlckFyZyhPYmplY3QuZ2V0UHJvdG90eXBlT2YsIE9iamVjdCksXG4gICAgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZSxcbiAgICBzcGxpY2UgPSBhcnJheVByb3RvLnNwbGljZTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUdldFN5bWJvbHMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLFxuICAgIG5hdGl2ZUtleXMgPSBvdmVyQXJnKE9iamVjdC5rZXlzLCBPYmplY3QpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgRGF0YVZpZXcgPSBnZXROYXRpdmUocm9vdCwgJ0RhdGFWaWV3JyksXG4gICAgTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdNYXAnKSxcbiAgICBQcm9taXNlID0gZ2V0TmF0aXZlKHJvb3QsICdQcm9taXNlJyksXG4gICAgU2V0ID0gZ2V0TmF0aXZlKHJvb3QsICdTZXQnKSxcbiAgICBXZWFrTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdXZWFrTWFwJyksXG4gICAgbmF0aXZlQ3JlYXRlID0gZ2V0TmF0aXZlKE9iamVjdCwgJ2NyZWF0ZScpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWFwcywgc2V0cywgYW5kIHdlYWttYXBzLiAqL1xudmFyIGRhdGFWaWV3Q3RvclN0cmluZyA9IHRvU291cmNlKERhdGFWaWV3KSxcbiAgICBtYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoTWFwKSxcbiAgICBwcm9taXNlQ3RvclN0cmluZyA9IHRvU291cmNlKFByb21pc2UpLFxuICAgIHNldEN0b3JTdHJpbmcgPSB0b1NvdXJjZShTZXQpLFxuICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoV2Vha01hcCk7XG5cbi8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xudmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcbiAgICBzeW1ib2xWYWx1ZU9mID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by52YWx1ZU9mIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIEhhc2hcbiAqL1xuZnVuY3Rpb24gaGFzaENsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmF0aXZlQ3JlYXRlID8gbmF0aXZlQ3JlYXRlKG51bGwpIDoge307XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoIFRoZSBoYXNoIHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkge1xuICByZXR1cm4gdGhpcy5oYXMoa2V5KSAmJiBkZWxldGUgdGhpcy5fX2RhdGFfX1trZXldO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIGhhc2ggdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gaGFzaEdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAobmF0aXZlQ3JlYXRlKSB7XG4gICAgdmFyIHJlc3VsdCA9IGRhdGFba2V5XTtcbiAgICByZXR1cm4gcmVzdWx0ID09PSBIQVNIX1VOREVGSU5FRCA/IHVuZGVmaW5lZCA6IHJlc3VsdDtcbiAgfVxuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpID8gZGF0YVtrZXldIDogdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIGhhc2ggdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgcmV0dXJuIG5hdGl2ZUNyZWF0ZSA/IGRhdGFba2V5XSAhPT0gdW5kZWZpbmVkIDogaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBkYXRhW2tleV0gPSAobmF0aXZlQ3JlYXRlICYmIHZhbHVlID09PSB1bmRlZmluZWQpID8gSEFTSF9VTkRFRklORUQgOiB2YWx1ZTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cbkhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuSGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcbkhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5IYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuSGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IFtdO1xufVxuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbGFzdEluZGV4ID0gZGF0YS5sZW5ndGggLSAxO1xuICBpZiAoaW5kZXggPT0gbGFzdEluZGV4KSB7XG4gICAgZGF0YS5wb3AoKTtcbiAgfSBlbHNlIHtcbiAgICBzcGxpY2UuY2FsbChkYXRhLCBpbmRleCwgMSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZUdldChrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICByZXR1cm4gaW5kZXggPCAwID8gdW5kZWZpbmVkIDogZGF0YVtpbmRleF1bMV07XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuICB9IGVsc2Uge1xuICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuTGlzdENhY2hlLnByb3RvdHlwZS5jbGVhciA9IGxpc3RDYWNoZUNsZWFyO1xuTGlzdENhY2hlLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBsaXN0Q2FjaGVEZWxldGU7XG5MaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcbkxpc3RDYWNoZS5wcm90b3R5cGUuaGFzID0gbGlzdENhY2hlSGFzO1xuTGlzdENhY2hlLnByb3RvdHlwZS5zZXQgPSBsaXN0Q2FjaGVTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhIG1hcCBjYWNoZSBvYmplY3QgdG8gc3RvcmUga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBNYXBDYWNoZShlbnRyaWVzKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLmNsZWFyKCk7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG4gICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIG1hcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0ge1xuICAgICdoYXNoJzogbmV3IEhhc2gsXG4gICAgJ21hcCc6IG5ldyAoTWFwIHx8IExpc3RDYWNoZSksXG4gICAgJ3N0cmluZyc6IG5ldyBIYXNoXG4gIH07XG59XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZURlbGV0ZShrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtYXAgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmdldChrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBhIG1hcCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmhhcyhrZXkpO1xufVxuXG4vKipcbiAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBtYXAgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLnNldChrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuXG5NYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IG1hcENhY2hlRGVsZXRlO1xuTWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcENhY2hlR2V0O1xuTWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcENhY2hlU2V0O1xuXG4vKipcbiAqXG4gKiBDcmVhdGVzIGFuIGFycmF5IGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGU7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGB2YWx1ZWAgdG8gdGhlIGFycmF5IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBhZGRcbiAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICogQGFsaWFzIHB1c2hcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNhY2hlLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlQWRkKHZhbHVlKSB7XG4gIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG4gIHJldHVybiB0aGlzO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlSGFzKHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuXG5TZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBzZXRDYWNoZUFkZDtcblNldENhY2hlLnByb3RvdHlwZS5oYXMgPSBzZXRDYWNoZUhhcztcblxuLyoqXG4gKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cbiAqL1xuZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuICB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZShlbnRyaWVzKTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBTdGFja1xuICovXG5mdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZTtcbn1cblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgc3RhY2suXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fWydkZWxldGUnXShrZXkpO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBzdGFja0dldChrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgc3RhY2sgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzdGFja0hhcyhrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uaGFzKGtleSk7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgc3RhY2sgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgc3RhY2sgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGNhY2hlID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKGNhY2hlIGluc3RhbmNlb2YgTGlzdENhY2hlKSB7XG4gICAgdmFyIHBhaXJzID0gY2FjaGUuX19kYXRhX187XG4gICAgaWYgKCFNYXAgfHwgKHBhaXJzLmxlbmd0aCA8IExBUkdFX0FSUkFZX1NJWkUgLSAxKSkge1xuICAgICAgcGFpcnMucHVzaChba2V5LCB2YWx1ZV0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGNhY2hlID0gdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZShwYWlycyk7XG4gIH1cbiAgY2FjaGUuc2V0KGtleSwgdmFsdWUpO1xuICByZXR1cm4gdGhpcztcbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYFN0YWNrYC5cblN0YWNrLnByb3RvdHlwZS5jbGVhciA9IHN0YWNrQ2xlYXI7XG5TdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gc3RhY2tEZWxldGU7XG5TdGFjay5wcm90b3R5cGUuZ2V0ID0gc3RhY2tHZXQ7XG5TdGFjay5wcm90b3R5cGUuaGFzID0gc3RhY2tIYXM7XG5TdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiB0aGUgYXJyYXktbGlrZSBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaW5oZXJpdGVkIFNwZWNpZnkgcmV0dXJuaW5nIGluaGVyaXRlZCBwcm9wZXJ0eSBuYW1lcy5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGFycmF5TGlrZUtleXModmFsdWUsIGluaGVyaXRlZCkge1xuICAvLyBTYWZhcmkgOC4xIG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICAvLyBTYWZhcmkgOSBtYWtlcyBgYXJndW1lbnRzLmxlbmd0aGAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cbiAgdmFyIHJlc3VsdCA9IChpc0FycmF5KHZhbHVlKSB8fCBpc0FyZ3VtZW50cyh2YWx1ZSkpXG4gICAgPyBiYXNlVGltZXModmFsdWUubGVuZ3RoLCBTdHJpbmcpXG4gICAgOiBbXTtcblxuICB2YXIgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aCxcbiAgICAgIHNraXBJbmRleGVzID0gISFsZW5ndGg7XG5cbiAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG4gICAgaWYgKChpbmhlcml0ZWQgfHwgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwga2V5KSkgJiZcbiAgICAgICAgIShza2lwSW5kZXhlcyAmJiAoa2V5ID09ICdsZW5ndGgnIHx8IGlzSW5kZXgoa2V5LCBsZW5ndGgpKSkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7Kn0ga2V5IFRoZSBrZXkgdG8gc2VhcmNoIGZvci5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGFzc29jSW5kZXhPZihhcnJheSwga2V5KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIGlmIChlcShhcnJheVtsZW5ndGhdWzBdLCBrZXkpKSB7XG4gICAgICByZXR1cm4gbGVuZ3RoO1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZ2V0YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZmF1bHQgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0KG9iamVjdCwgcGF0aCkge1xuICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXG4gIHZhciBpbmRleCA9IDAsXG4gICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICB3aGlsZSAob2JqZWN0ICE9IG51bGwgJiYgaW5kZXggPCBsZW5ndGgpIHtcbiAgICBvYmplY3QgPSBvYmplY3RbdG9LZXkocGF0aFtpbmRleCsrXSldO1xuICB9XG4gIHJldHVybiAoaW5kZXggJiYgaW5kZXggPT0gbGVuZ3RoKSA/IG9iamVjdCA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgZ2V0QWxsS2V5c2AgYW5kIGBnZXRBbGxLZXlzSW5gIHdoaWNoIHVzZXNcbiAqIGBrZXlzRnVuY2AgYW5kIGBzeW1ib2xzRnVuY2AgdG8gZ2V0IHRoZSBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIGFuZFxuICogc3ltYm9scyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtGdW5jdGlvbn0ga2V5c0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGdldCB0aGUga2V5cyBvZiBgb2JqZWN0YC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHN5bWJvbHNGdW5jIFRoZSBmdW5jdGlvbiB0byBnZXQgdGhlIHN5bWJvbHMgb2YgYG9iamVjdGAuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzLlxuICovXG5mdW5jdGlvbiBiYXNlR2V0QWxsS2V5cyhvYmplY3QsIGtleXNGdW5jLCBzeW1ib2xzRnVuYykge1xuICB2YXIgcmVzdWx0ID0ga2V5c0Z1bmMob2JqZWN0KTtcbiAgcmV0dXJuIGlzQXJyYXkob2JqZWN0KSA/IHJlc3VsdCA6IGFycmF5UHVzaChyZXN1bHQsIHN5bWJvbHNGdW5jKG9iamVjdCkpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBnZXRUYWdgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGJhc2VHZXRUYWcodmFsdWUpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmhhc0luYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSGFzSW4ob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGtleSBpbiBPYmplY3Qob2JqZWN0KTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zXG4gKiBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtib29sZWFufSBbYml0bWFza10gVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy5cbiAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcbiAqICAgICAxIC0gVW5vcmRlcmVkIGNvbXBhcmlzb25cbiAqICAgICAyIC0gUGFydGlhbCBjb21wYXJpc29uXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gIH1cbiAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG4gKiAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG4gICAgICBvdGhUYWcgPSBhcnJheVRhZztcblxuICBpZiAoIW9iaklzQXJyKSB7XG4gICAgb2JqVGFnID0gZ2V0VGFnKG9iamVjdCk7XG4gICAgb2JqVGFnID0gb2JqVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvYmpUYWc7XG4gIH1cbiAgaWYgKCFvdGhJc0Fycikge1xuICAgIG90aFRhZyA9IGdldFRhZyhvdGhlcik7XG4gICAgb3RoVGFnID0gb3RoVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvdGhUYWc7XG4gIH1cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG9iamVjdCksXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvdGhlciksXG4gICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG4gIGlmIChpc1NhbWVUYWcgJiYgIW9iaklzT2JqKSB7XG4gICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICByZXR1cm4gKG9iaklzQXJyIHx8IGlzVHlwZWRBcnJheShvYmplY3QpKVxuICAgICAgPyBlcXVhbEFycmF5cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKVxuICAgICAgOiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG4gIH1cbiAgaWYgKCEoYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHKSkge1xuICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcbiAgICAgIHZhciBvYmpVbndyYXBwZWQgPSBvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCxcbiAgICAgICAgICBvdGhVbndyYXBwZWQgPSBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXI7XG5cbiAgICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gICAgICByZXR1cm4gZXF1YWxGdW5jKG9ialVud3JhcHBlZCwgb3RoVW53cmFwcGVkLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gIHJldHVybiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG59XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcGFyYW0ge0FycmF5fSBtYXRjaERhdGEgVGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIHRvIG1hdGNoLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhLCBjdXN0b21pemVyKSB7XG4gIHZhciBpbmRleCA9IG1hdGNoRGF0YS5sZW5ndGgsXG4gICAgICBsZW5ndGggPSBpbmRleCxcbiAgICAgIG5vQ3VzdG9taXplciA9ICFjdXN0b21pemVyO1xuXG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybiAhbGVuZ3RoO1xuICB9XG4gIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICBpZiAoKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKVxuICAgICAgICAgID8gZGF0YVsxXSAhPT0gb2JqZWN0W2RhdGFbMF1dXG4gICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuICAgICAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICB2YXIga2V5ID0gZGF0YVswXSxcbiAgICAgICAgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXG4gICAgaWYgKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKSB7XG4gICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHN0YWNrID0gbmV3IFN0YWNrO1xuICAgICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlLCBzdGFjayk7XG4gICAgICB9XG4gICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIGN1c3RvbWl6ZXIsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRywgc3RhY2spXG4gICAgICAgICAgICA6IHJlc3VsdFxuICAgICAgICAgICkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBwYXR0ZXJuID0gKGlzRnVuY3Rpb24odmFsdWUpIHx8IGlzSG9zdE9iamVjdCh2YWx1ZSkpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3RvcjtcbiAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpO1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzVHlwZWRBcnJheWAgd2l0aG91dCBOb2RlLmpzIG9wdGltaXphdGlvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB0eXBlZCBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNUeXBlZEFycmF5KHZhbHVlKSB7XG4gIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmXG4gICAgaXNMZW5ndGgodmFsdWUubGVuZ3RoKSAmJiAhIXR5cGVkQXJyYXlUYWdzW29iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpXTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pdGVyYXRlZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gW3ZhbHVlPV8uaWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGFuIGl0ZXJhdGVlLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBpdGVyYXRlZS5cbiAqL1xuZnVuY3Rpb24gYmFzZUl0ZXJhdGVlKHZhbHVlKSB7XG4gIC8vIERvbid0IHN0b3JlIHRoZSBgdHlwZW9mYCByZXN1bHQgaW4gYSB2YXJpYWJsZSB0byBhdm9pZCBhIEpJVCBidWcgaW4gU2FmYXJpIDkuXG4gIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU2MDM0IGZvciBtb3JlIGRldGFpbHMuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiBpZGVudGl0eTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkodmFsdWUpXG4gICAgICA/IGJhc2VNYXRjaGVzUHJvcGVydHkodmFsdWVbMF0sIHZhbHVlWzFdKVxuICAgICAgOiBiYXNlTWF0Y2hlcyh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHByb3BlcnR5KHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzYCB3aGljaCBkb2Vzbid0IHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuICBpZiAoIWlzUHJvdG90eXBlKG9iamVjdCkpIHtcbiAgICByZXR1cm4gbmF0aXZlS2V5cyhvYmplY3QpO1xuICB9XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgZm9yICh2YXIga2V5IGluIE9iamVjdChvYmplY3QpKSB7XG4gICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpICYmIGtleSAhPSAnY29uc3RydWN0b3InKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNJbmAgd2hpY2ggZG9lc24ndCB0cmVhdCBzcGFyc2UgYXJyYXlzIGFzIGRlbnNlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICovXG5mdW5jdGlvbiBiYXNlS2V5c0luKG9iamVjdCkge1xuICBpZiAoIWlzT2JqZWN0KG9iamVjdCkpIHtcbiAgICByZXR1cm4gbmF0aXZlS2V5c0luKG9iamVjdCk7XG4gIH1cbiAgdmFyIGlzUHJvdG8gPSBpc1Byb3RvdHlwZShvYmplY3QpLFxuICAgICAgcmVzdWx0ID0gW107XG5cbiAgZm9yICh2YXIga2V5IGluIG9iamVjdCkge1xuICAgIGlmICghKGtleSA9PSAnY29uc3RydWN0b3InICYmIChpc1Byb3RvIHx8ICFoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwga2V5KSkpKSB7XG4gICAgICByZXN1bHQucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNvdXJjZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlTWF0Y2hlcyhzb3VyY2UpIHtcbiAgdmFyIG1hdGNoRGF0YSA9IGdldE1hdGNoRGF0YShzb3VyY2UpO1xuICBpZiAobWF0Y2hEYXRhLmxlbmd0aCA9PSAxICYmIG1hdGNoRGF0YVswXVsyXSkge1xuICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZShtYXRjaERhdGFbMF1bMF0sIG1hdGNoRGF0YVswXVsxXSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT09IHNvdXJjZSB8fCBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzUHJvcGVydHlgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNyY1ZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuICBpZiAoaXNLZXkocGF0aCkgJiYgaXNTdHJpY3RDb21wYXJhYmxlKHNyY1ZhbHVlKSkge1xuICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSh0b0tleShwYXRoKSwgc3JjVmFsdWUpO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIgb2JqVmFsdWUgPSBnZXQob2JqZWN0LCBwYXRoKTtcbiAgICByZXR1cm4gKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgb2JqVmFsdWUgPT09IHNyY1ZhbHVlKVxuICAgICAgPyBoYXNJbihvYmplY3QsIHBhdGgpXG4gICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgdW5kZWZpbmVkLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mICBgXy5waWNrQnlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgc291cmNlIG9iamVjdC5cbiAqIEBwYXJhbSB7c3RyaW5nW119IHByb3BzIFRoZSBwcm9wZXJ0eSBpZGVudGlmaWVycyB0byBwaWNrIGZyb20uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIHByb3BlcnR5LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbmV3IG9iamVjdC5cbiAqL1xuZnVuY3Rpb24gYmFzZVBpY2tCeShvYmplY3QsIHByb3BzLCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBwcm9wcy5sZW5ndGgsXG4gICAgICByZXN1bHQgPSB7fTtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBrZXkgPSBwcm9wc1tpbmRleF0sXG4gICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cbiAgICBpZiAocHJlZGljYXRlKHZhbHVlLCBrZXkpKSB7XG4gICAgICByZXN1bHRba2V5XSA9IHZhbHVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIGJhc2VHZXQob2JqZWN0LCBwYXRoKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcbiAqIHZhbHVlcyB0byBlbXB0eSBzdHJpbmdzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN5bWJvbFRvU3RyaW5nID8gc3ltYm9sVG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ2FzdHMgYHZhbHVlYCB0byBhIHBhdGggYXJyYXkgaWYgaXQncyBub3Qgb25lLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBpbnNwZWN0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjYXN0IHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbmZ1bmN0aW9uIGNhc3RQYXRoKHZhbHVlKSB7XG4gIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogc3RyaW5nVG9QYXRoKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGFycmF5cyB3aXRoIHN1cHBvcnQgZm9yXG4gKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgYXJyYXlgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEFycmF5cyhhcnJheSwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcbiAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIG90aExlbmd0aCA9IG90aGVyLmxlbmd0aDtcblxuICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzUGFydGlhbCAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQoYXJyYXkpO1xuICBpZiAoc3RhY2tlZCAmJiBzdGFjay5nZXQob3RoZXIpKSB7XG4gICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gIH1cbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSB0cnVlLFxuICAgICAgc2VlbiA9IChiaXRtYXNrICYgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRykgPyBuZXcgU2V0Q2FjaGUgOiB1bmRlZmluZWQ7XG5cbiAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7XG4gIHN0YWNrLnNldChvdGhlciwgYXJyYXkpO1xuXG4gIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cbiAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcbiAgICB2YXIgYXJyVmFsdWUgPSBhcnJheVtpbmRleF0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdO1xuXG4gICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIGFyclZhbHVlLCBpbmRleCwgb3RoZXIsIGFycmF5LCBzdGFjaylcbiAgICAgICAgOiBjdXN0b21pemVyKGFyclZhbHVlLCBvdGhWYWx1ZSwgaW5kZXgsIGFycmF5LCBvdGhlciwgc3RhY2spO1xuICAgIH1cbiAgICBpZiAoY29tcGFyZWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKGNvbXBhcmVkKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBhcnJheXMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICBpZiAoc2Vlbikge1xuICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlLCBvdGhJbmRleCkge1xuICAgICAgICAgICAgaWYgKCFzZWVuLmhhcyhvdGhJbmRleCkgJiZcbiAgICAgICAgICAgICAgICAoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSkpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHNlZW4uYWRkKG90aEluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KSkge1xuICAgICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICghKFxuICAgICAgICAgIGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fFxuICAgICAgICAgICAgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spXG4gICAgICAgICkpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIHN0YWNrWydkZWxldGUnXShhcnJheSk7XG4gIHN0YWNrWydkZWxldGUnXShvdGhlcik7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuICogdGhlIHNhbWUgYHRvU3RyaW5nVGFnYC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG4gKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcbiAqICBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgZGF0YVZpZXdUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgKG9iamVjdC5ieXRlT2Zmc2V0ICE9IG90aGVyLmJ5dGVPZmZzZXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIG9iamVjdCA9IG9iamVjdC5idWZmZXI7XG4gICAgICBvdGhlciA9IG90aGVyLmJ1ZmZlcjtcblxuICAgIGNhc2UgYXJyYXlCdWZmZXJUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICBjYXNlIG51bWJlclRhZzpcbiAgICAgIC8vIENvZXJjZSBib29sZWFucyB0byBgMWAgb3IgYDBgIGFuZCBkYXRlcyB0byBtaWxsaXNlY29uZHMuXG4gICAgICAvLyBJbnZhbGlkIGRhdGVzIGFyZSBjb2VyY2VkIHRvIGBOYU5gLlxuICAgICAgcmV0dXJuIGVxKCtvYmplY3QsICtvdGhlcik7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblxuICAgIGNhc2UgcmVnZXhwVGFnOlxuICAgIGNhc2Ugc3RyaW5nVGFnOlxuICAgICAgLy8gQ29lcmNlIHJlZ2V4ZXMgdG8gc3RyaW5ncyBhbmQgdHJlYXQgc3RyaW5ncywgcHJpbWl0aXZlcyBhbmQgb2JqZWN0cyxcbiAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcbiAgICAgIC8vIGZvciBtb3JlIGRldGFpbHMuXG4gICAgICByZXR1cm4gb2JqZWN0ID09IChvdGhlciArICcnKTtcblxuICAgIGNhc2UgbWFwVGFnOlxuICAgICAgdmFyIGNvbnZlcnQgPSBtYXBUb0FycmF5O1xuXG4gICAgY2FzZSBzZXRUYWc6XG4gICAgICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHO1xuICAgICAgY29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO1xuXG4gICAgICBpZiAob2JqZWN0LnNpemUgIT0gb3RoZXIuc2l6ZSAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gICAgICBpZiAoc3RhY2tlZCkge1xuICAgICAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgICAgIH1cbiAgICAgIGJpdG1hc2sgfD0gVU5PUkRFUkVEX0NPTVBBUkVfRkxBRztcblxuICAgICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG4gICAgICB2YXIgcmVzdWx0ID0gZXF1YWxBcnJheXMoY29udmVydChvYmplY3QpLCBjb252ZXJ0KG90aGVyKSwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG4gICAgICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG5cbiAgICBjYXNlIHN5bWJvbFRhZzpcbiAgICAgIGlmIChzeW1ib2xWYWx1ZU9mKSB7XG4gICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuICAgICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvdGhlciBUaGUgb3RoZXIgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjdXN0b21pemVyIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gc3RhY2sgVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGVxdWFsT2JqZWN0cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcsXG4gICAgICBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcbiAgICAgIG9iakxlbmd0aCA9IG9ialByb3BzLmxlbmd0aCxcbiAgICAgIG90aFByb3BzID0ga2V5cyhvdGhlciksXG4gICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cbiAgaWYgKG9iakxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIWlzUGFydGlhbCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgaW5kZXggPSBvYmpMZW5ndGg7XG4gIHdoaWxlIChpbmRleC0tKSB7XG4gICAgdmFyIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICBpZiAoIShpc1BhcnRpYWwgPyBrZXkgaW4gb3RoZXIgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCBrZXkpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG4gIGlmIChzdGFja2VkICYmIHN0YWNrLmdldChvdGhlcikpIHtcbiAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgfVxuICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgc3RhY2suc2V0KG9iamVjdCwgb3RoZXIpO1xuICBzdGFjay5zZXQob3RoZXIsIG9iamVjdCk7XG5cbiAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldO1xuXG4gICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIG9ialZhbHVlLCBrZXksIG90aGVyLCBvYmplY3QsIHN0YWNrKVxuICAgICAgICA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTtcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gKG9ialZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykpXG4gICAgICAgICAgOiBjb21wYXJlZFxuICAgICAgICApKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG4gICAgaWYgKG9iakN0b3IgIT0gb3RoQ3RvciAmJlxuICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcbiAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcbiAgc3RhY2tbJ2RlbGV0ZSddKG90aGVyKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIG93biBhbmQgaW5oZXJpdGVkIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgYW5kXG4gKiBzeW1ib2xzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzIGFuZCBzeW1ib2xzLlxuICovXG5mdW5jdGlvbiBnZXRBbGxLZXlzSW4ob2JqZWN0KSB7XG4gIHJldHVybiBiYXNlR2V0QWxsS2V5cyhvYmplY3QsIGtleXNJbiwgZ2V0U3ltYm9sc0luKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcmVmZXJlbmNlIGtleS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS5cbiAqL1xuZnVuY3Rpb24gZ2V0TWFwRGF0YShtYXAsIGtleSkge1xuICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXztcbiAgcmV0dXJuIGlzS2V5YWJsZShrZXkpXG4gICAgPyBkYXRhW3R5cGVvZiBrZXkgPT0gJ3N0cmluZycgPyAnc3RyaW5nJyA6ICdoYXNoJ11cbiAgICA6IGRhdGEubWFwO1xufVxuXG4vKipcbiAqIEdldHMgdGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIG9mIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIG1hdGNoIGRhdGEgb2YgYG9iamVjdGAuXG4gKi9cbmZ1bmN0aW9uIGdldE1hdGNoRGF0YShvYmplY3QpIHtcbiAgdmFyIHJlc3VsdCA9IGtleXMob2JqZWN0KSxcbiAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgd2hpbGUgKGxlbmd0aC0tKSB7XG4gICAgdmFyIGtleSA9IHJlc3VsdFtsZW5ndGhdLFxuICAgICAgICB2YWx1ZSA9IG9iamVjdFtrZXldO1xuXG4gICAgcmVzdWx0W2xlbmd0aF0gPSBba2V5LCB2YWx1ZSwgaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKV07XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBuYXRpdmUgZnVuY3Rpb24gYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBmdW5jdGlvbiBpZiBpdCdzIG5hdGl2ZSwgZWxzZSBgdW5kZWZpbmVkYC5cbiAqL1xuZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG4gIHZhciB2YWx1ZSA9IGdldFZhbHVlKG9iamVjdCwga2V5KTtcbiAgcmV0dXJuIGJhc2VJc05hdGl2ZSh2YWx1ZSkgPyB2YWx1ZSA6IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBzeW1ib2wgcHJvcGVydGllcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBzeW1ib2xzLlxuICovXG52YXIgZ2V0U3ltYm9scyA9IG5hdGl2ZUdldFN5bWJvbHMgPyBvdmVyQXJnKG5hdGl2ZUdldFN5bWJvbHMsIE9iamVjdCkgOiBzdHViQXJyYXk7XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGFuZCBpbmhlcml0ZWQgZW51bWVyYWJsZSBzeW1ib2wgcHJvcGVydGllc1xuICogb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2Ygc3ltYm9scy5cbiAqL1xudmFyIGdldFN5bWJvbHNJbiA9ICFuYXRpdmVHZXRTeW1ib2xzID8gc3R1YkFycmF5IDogZnVuY3Rpb24ob2JqZWN0KSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgd2hpbGUgKG9iamVjdCkge1xuICAgIGFycmF5UHVzaChyZXN1bHQsIGdldFN5bWJvbHMob2JqZWN0KSk7XG4gICAgb2JqZWN0ID0gZ2V0UHJvdG90eXBlKG9iamVjdCk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cbi8qKlxuICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbnZhciBnZXRUYWcgPSBiYXNlR2V0VGFnO1xuXG4vLyBGYWxsYmFjayBmb3IgZGF0YSB2aWV3cywgbWFwcywgc2V0cywgYW5kIHdlYWsgbWFwcyBpbiBJRSAxMSxcbi8vIGZvciBkYXRhIHZpZXdzIGluIEVkZ2UgPCAxNCwgYW5kIHByb21pc2VzIGluIE5vZGUuanMuXG5pZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG4gICAgKE1hcCAmJiBnZXRUYWcobmV3IE1hcCkgIT0gbWFwVGFnKSB8fFxuICAgIChQcm9taXNlICYmIGdldFRhZyhQcm9taXNlLnJlc29sdmUoKSkgIT0gcHJvbWlzZVRhZykgfHxcbiAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG4gICAgKFdlYWtNYXAgJiYgZ2V0VGFnKG5ldyBXZWFrTWFwKSAhPSB3ZWFrTWFwVGFnKSkge1xuICBnZXRUYWcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZXN1bHQgPSBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSxcbiAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWcgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3RvclN0cmluZyA9IEN0b3IgPyB0b1NvdXJjZShDdG9yKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChjdG9yU3RyaW5nKSB7XG4gICAgICBzd2l0Y2ggKGN0b3JTdHJpbmcpIHtcbiAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcbiAgICAgICAgY2FzZSBtYXBDdG9yU3RyaW5nOiByZXR1cm4gbWFwVGFnO1xuICAgICAgICBjYXNlIHByb21pc2VDdG9yU3RyaW5nOiByZXR1cm4gcHJvbWlzZVRhZztcbiAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuICAgICAgICBjYXNlIHdlYWtNYXBDdG9yU3RyaW5nOiByZXR1cm4gd2Vha01hcFRhZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHBhdGhgIGV4aXN0cyBvbiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYXNGdW5jIFRoZSBmdW5jdGlvbiB0byBjaGVjayBwcm9wZXJ0aWVzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzUGF0aChvYmplY3QsIHBhdGgsIGhhc0Z1bmMpIHtcbiAgcGF0aCA9IGlzS2V5KHBhdGgsIG9iamVjdCkgPyBbcGF0aF0gOiBjYXN0UGF0aChwYXRoKTtcblxuICB2YXIgcmVzdWx0LFxuICAgICAgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHBhdGgubGVuZ3RoO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdmFyIGtleSA9IHRvS2V5KHBhdGhbaW5kZXhdKTtcbiAgICBpZiAoIShyZXN1bHQgPSBvYmplY3QgIT0gbnVsbCAmJiBoYXNGdW5jKG9iamVjdCwga2V5KSkpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBvYmplY3QgPSBvYmplY3Rba2V5XTtcbiAgfVxuICBpZiAocmVzdWx0KSB7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IDA7XG4gIHJldHVybiAhIWxlbmd0aCAmJiBpc0xlbmd0aChsZW5ndGgpICYmIGlzSW5kZXgoa2V5LCBsZW5ndGgpICYmXG4gICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtudW1iZXJ9IFtsZW5ndGg9TUFYX1NBRkVfSU5URUdFUl0gVGhlIHVwcGVyIGJvdW5kcyBvZiBhIHZhbGlkIGluZGV4LlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0luZGV4KHZhbHVlLCBsZW5ndGgpIHtcbiAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuICByZXR1cm4gISFsZW5ndGggJiZcbiAgICAodHlwZW9mIHZhbHVlID09ICdudW1iZXInIHx8IHJlSXNVaW50LnRlc3QodmFsdWUpKSAmJlxuICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHByb3BlcnR5IG5hbWUgYW5kIG5vdCBhIHByb3BlcnR5IHBhdGguXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgaWYgKHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJyB8fFxuICAgICAgdmFsdWUgPT0gbnVsbCB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSB8fCAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpIHx8XG4gICAgKG9iamVjdCAhPSBudWxsICYmIHZhbHVlIGluIE9iamVjdChvYmplY3QpKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3IgdXNlIGFzIHVuaXF1ZSBvYmplY3Qga2V5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcbiAgICA/ICh2YWx1ZSAhPT0gJ19fcHJvdG9fXycpXG4gICAgOiAodmFsdWUgPT09IG51bGwpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgZnVuY2AgaGFzIGl0cyBzb3VyY2UgbWFza2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTWFza2VkKGZ1bmMpIHtcbiAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG4gIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblxuICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7XG59XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBtYXRjaGVzUHJvcGVydHlgIGZvciBzb3VyY2UgdmFsdWVzIHN1aXRhYmxlXG4gKiBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUoa2V5LCBzcmNWYWx1ZSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gc3JjVmFsdWUgJiZcbiAgICAgIChzcmNWYWx1ZSAhPT0gdW5kZWZpbmVkIHx8IChrZXkgaW4gT2JqZWN0KG9iamVjdCkpKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGxpa2VcbiAqIFtgT2JqZWN0LmtleXNgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1vYmplY3Qua2V5cylcbiAqIGV4Y2VwdCB0aGF0IGl0IGluY2x1ZGVzIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnRpZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIG5hdGl2ZUtleXNJbihvYmplY3QpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBpZiAob2JqZWN0ICE9IG51bGwpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gT2JqZWN0KG9iamVjdCkpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8qKlxuICogQ29udmVydHMgYHN0cmluZ2AgdG8gYSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqL1xudmFyIHN0cmluZ1RvUGF0aCA9IG1lbW9pemUoZnVuY3Rpb24oc3RyaW5nKSB7XG4gIHN0cmluZyA9IHRvU3RyaW5nKHN0cmluZyk7XG5cbiAgdmFyIHJlc3VsdCA9IFtdO1xuICBpZiAocmVMZWFkaW5nRG90LnRlc3Qoc3RyaW5nKSkge1xuICAgIHJlc3VsdC5wdXNoKCcnKTtcbiAgfVxuICBzdHJpbmcucmVwbGFjZShyZVByb3BOYW1lLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3RyaW5nKSB7XG4gICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0pO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcga2V5IGlmIGl0J3Mgbm90IGEgc3RyaW5nIG9yIHN5bWJvbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtzdHJpbmd8c3ltYm9sfSBSZXR1cm5zIHRoZSBrZXkuXG4gKi9cbmZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG4gIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG4gKi9cbmZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcbiAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuICAgIH0gY2F0Y2ggKGUpIHt9XG4gIH1cbiAgcmV0dXJuICcnO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG1lbW9pemVzIHRoZSByZXN1bHQgb2YgYGZ1bmNgLiBJZiBgcmVzb2x2ZXJgIGlzXG4gKiBwcm92aWRlZCwgaXQgZGV0ZXJtaW5lcyB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHQgYmFzZWQgb24gdGhlXG4gKiBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLiBCeSBkZWZhdWx0LCB0aGUgZmlyc3QgYXJndW1lbnRcbiAqIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSBtYXAgY2FjaGUga2V5LiBUaGUgYGZ1bmNgXG4gKiBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogVGhlIGNhY2hlIGlzIGV4cG9zZWQgYXMgdGhlIGBjYWNoZWAgcHJvcGVydHkgb24gdGhlIG1lbW9pemVkXG4gKiBmdW5jdGlvbi4gSXRzIGNyZWF0aW9uIG1heSBiZSBjdXN0b21pemVkIGJ5IHJlcGxhY2luZyB0aGUgYF8ubWVtb2l6ZS5DYWNoZWBcbiAqIGNvbnN0cnVjdG9yIHdpdGggb25lIHdob3NlIGluc3RhbmNlcyBpbXBsZW1lbnQgdGhlXG4gKiBbYE1hcGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXByb3BlcnRpZXMtb2YtdGhlLW1hcC1wcm90b3R5cGUtb2JqZWN0KVxuICogbWV0aG9kIGludGVyZmFjZSBvZiBgZGVsZXRlYCwgYGdldGAsIGBoYXNgLCBhbmQgYHNldGAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzb2x2ZXJdIFRoZSBmdW5jdGlvbiB0byByZXNvbHZlIHRoZSBjYWNoZSBrZXkuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXplZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6IDIgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2MnOiAzLCAnZCc6IDQgfTtcbiAqXG4gKiB2YXIgdmFsdWVzID0gXy5tZW1vaXplKF8udmFsdWVzKTtcbiAqIHZhbHVlcyhvYmplY3QpO1xuICogLy8gPT4gWzEsIDJdXG4gKlxuICogdmFsdWVzKG90aGVyKTtcbiAqIC8vID0+IFszLCA0XVxuICpcbiAqIG9iamVjdC5hID0gMjtcbiAqIHZhbHVlcyhvYmplY3QpO1xuICogLy8gPT4gWzEsIDJdXG4gKlxuICogLy8gTW9kaWZ5IHRoZSByZXN1bHQgY2FjaGUuXG4gKiB2YWx1ZXMuY2FjaGUuc2V0KG9iamVjdCwgWydhJywgJ2InXSk7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsnYScsICdiJ11cbiAqXG4gKiAvLyBSZXBsYWNlIGBfLm1lbW9pemUuQ2FjaGVgLlxuICogXy5tZW1vaXplLkNhY2hlID0gV2Vha01hcDtcbiAqL1xuZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJyB8fCAocmVzb2x2ZXIgJiYgdHlwZW9mIHJlc29sdmVyICE9ICdmdW5jdGlvbicpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHZhciBtZW1vaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBrZXkgPSByZXNvbHZlciA/IHJlc29sdmVyLmFwcGx5KHRoaXMsIGFyZ3MpIDogYXJnc1swXSxcbiAgICAgICAgY2FjaGUgPSBtZW1vaXplZC5jYWNoZTtcblxuICAgIGlmIChjYWNoZS5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIGNhY2hlLmdldChrZXkpO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICBtZW1vaXplZC5jYWNoZSA9IGNhY2hlLnNldChrZXksIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgbWVtb2l6ZWQuY2FjaGUgPSBuZXcgKG1lbW9pemUuQ2FjaGUgfHwgTWFwQ2FjaGUpO1xuICByZXR1cm4gbWVtb2l6ZWQ7XG59XG5cbi8vIEFzc2lnbiBjYWNoZSB0byBgXy5tZW1vaXplYC5cbm1lbW9pemUuQ2FjaGUgPSBNYXBDYWNoZTtcblxuLyoqXG4gKiBQZXJmb3JtcyBhXG4gKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKiB2YXIgb3RoZXIgPSB7ICdhJzogMSB9O1xuICpcbiAqIF8uZXEob2JqZWN0LCBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoJ2EnLCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEoJ2EnLCBPYmplY3QoJ2EnKSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoTmFOLCBOYU4pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBgYXJndW1lbnRzYCBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG4gIC8vIFNhZmFyaSA4LjEgbWFrZXMgYGFyZ3VtZW50cy5jYWxsZWVgIGVudW1lcmFibGUgaW4gc3RyaWN0IG1vZGUuXG4gIHJldHVybiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG4gICAgKCFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgfHwgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc1RhZyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhbiBgQXJyYXlgIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3NcbiAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3JcbiAqIGVxdWFsIHRvIGAwYCBhbmQgbGVzcyB0aGFuIG9yIGVxdWFsIHRvIGBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUmAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgXG4gKiBpcyBhbiBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSBgRnVuY3Rpb25gIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGZ1bmN0aW9uLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNGdW5jdGlvbihfKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oL2FiYy8pO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNGdW5jdGlvbih2YWx1ZSkge1xuICAvLyBUaGUgdXNlIG9mIGBPYmplY3QjdG9TdHJpbmdgIGF2b2lkcyBpc3N1ZXMgd2l0aCB0aGUgYHR5cGVvZmAgb3BlcmF0b3JcbiAgLy8gaW4gU2FmYXJpIDgtOSB3aGljaCByZXR1cm5zICdvYmplY3QnIGZvciB0eXBlZCBhcnJheSBhbmQgb3RoZXIgY29uc3RydWN0b3JzLlxuICB2YXIgdGFnID0gaXNPYmplY3QodmFsdWUpID8gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgcmV0dXJuIHRhZyA9PSBmdW5jVGFnIHx8IHRhZyA9PSBnZW5UYWc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzcuMC8jc2VjLXRvbGVuZ3RoKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGxlbmd0aCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzTGVuZ3RoKDMpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKCczJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdudW1iZXInICYmXG4gICAgdmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8PSBNQVhfU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHRoZVxuICogW2xhbmd1YWdlIHR5cGVdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi83LjAvI3NlYy1lY21hc2NyaXB0LWxhbmd1YWdlLXR5cGVzKVxuICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIG9iamVjdCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0KHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChfLm5vb3ApO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QobnVsbCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdCBgbnVsbGBcbiAqIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuICByZXR1cm4gISF2YWx1ZSAmJiB0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBzeW1ib2wsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNTeW1ib2woJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3ltYm9sJyB8fFxuICAgIChpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN5bWJvbFRhZyk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdHlwZWQgYXJyYXksIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KFtdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbnZhciBpc1R5cGVkQXJyYXkgPSBub2RlSXNUeXBlZEFycmF5ID8gYmFzZVVuYXJ5KG5vZGVJc1R5cGVkQXJyYXkpIDogYmFzZUlzVHlwZWRBcnJheTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9TdHJpbmcobnVsbCk7XG4gKiAvLyA9PiAnJ1xuICpcbiAqIF8udG9TdHJpbmcoLTApO1xuICogLy8gPT4gJy0wJ1xuICpcbiAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcbiAqIC8vID0+ICcxLDIsMydcbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG59XG5cbi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXNcbiAqIGB1bmRlZmluZWRgLCB0aGUgYGRlZmF1bHRWYWx1ZWAgaXMgcmV0dXJuZWQgaW4gaXRzIHBsYWNlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy43LjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBmb3IgYHVuZGVmaW5lZGAgcmVzb2x2ZWQgdmFsdWVzLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuICpcbiAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuICogLy8gPT4gJ2RlZmF1bHQnXG4gKi9cbmZ1bmN0aW9uIGdldChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG4gIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDaGVja3MgaWYgYHBhdGhgIGlzIGEgZGlyZWN0IG9yIGluaGVyaXRlZCBwcm9wZXJ0eSBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSBfLmNyZWF0ZSh7ICdhJzogXy5jcmVhdGUoeyAnYic6IDIgfSkgfSk7XG4gKlxuICogXy5oYXNJbihvYmplY3QsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5oYXNJbihvYmplY3QsICdhLmInKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgWydhJywgJ2InXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5oYXNJbihvYmplY3QsICdiJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBoYXNJbihvYmplY3QsIHBhdGgpIHtcbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBiYXNlSGFzSW4pO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgdGhlIG93biBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG4gKiBbRVMgc3BlY10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNy4wLyNzZWMtb2JqZWN0LmtleXMpXG4gKiBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5cyhuZXcgRm9vKTtcbiAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcbiAqXG4gKiBfLmtleXMoJ2hpJyk7XG4gKiAvLyA9PiBbJzAnLCAnMSddXG4gKi9cbmZ1bmN0aW9uIGtleXMob2JqZWN0KSB7XG4gIHJldHVybiBpc0FycmF5TGlrZShvYmplY3QpID8gYXJyYXlMaWtlS2V5cyhvYmplY3QpIDogYmFzZUtleXMob2JqZWN0KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gYW5kIGluaGVyaXRlZCBlbnVtZXJhYmxlIHByb3BlcnR5IG5hbWVzIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKiBAZXhhbXBsZVxuICpcbiAqIGZ1bmN0aW9uIEZvbygpIHtcbiAqICAgdGhpcy5hID0gMTtcbiAqICAgdGhpcy5iID0gMjtcbiAqIH1cbiAqXG4gKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuICpcbiAqIF8ua2V5c0luKG5ldyBGb28pO1xuICogLy8gPT4gWydhJywgJ2InLCAnYyddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKi9cbmZ1bmN0aW9uIGtleXNJbihvYmplY3QpIHtcbiAgcmV0dXJuIGlzQXJyYXlMaWtlKG9iamVjdCkgPyBhcnJheUxpa2VLZXlzKG9iamVjdCwgdHJ1ZSkgOiBiYXNlS2V5c0luKG9iamVjdCk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhbiBvYmplY3QgY29tcG9zZWQgb2YgdGhlIGBvYmplY3RgIHByb3BlcnRpZXMgYHByZWRpY2F0ZWAgcmV0dXJuc1xuICogdHJ1dGh5IGZvci4gVGhlIHByZWRpY2F0ZSBpcyBpbnZva2VkIHdpdGggdHdvIGFyZ3VtZW50czogKHZhbHVlLCBrZXkpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIHNvdXJjZSBvYmplY3QuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcHJlZGljYXRlPV8uaWRlbnRpdHldIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBwcm9wZXJ0eS5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG5ldyBvYmplY3QuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAnMicsICdjJzogMyB9O1xuICpcbiAqIF8ucGlja0J5KG9iamVjdCwgXy5pc051bWJlcik7XG4gKiAvLyA9PiB7ICdhJzogMSwgJ2MnOiAzIH1cbiAqL1xuZnVuY3Rpb24gcGlja0J5KG9iamVjdCwgcHJlZGljYXRlKSB7XG4gIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHt9IDogYmFzZVBpY2tCeShvYmplY3QsIGdldEFsbEtleXNJbihvYmplY3QpLCBiYXNlSXRlcmF0ZWUocHJlZGljYXRlKSk7XG59XG5cbi8qKlxuICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgaXQgcmVjZWl2ZXMuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IFV0aWxcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxIH07XG4gKlxuICogY29uc29sZS5sb2coXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGEgZ2l2ZW4gb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3RzID0gW1xuICogICB7ICdhJzogeyAnYic6IDIgfSB9LFxuICogICB7ICdhJzogeyAnYic6IDEgfSB9XG4gKiBdO1xuICpcbiAqIF8ubWFwKG9iamVjdHMsIF8ucHJvcGVydHkoJ2EuYicpKTtcbiAqIC8vID0+IFsyLCAxXVxuICpcbiAqIF8ubWFwKF8uc29ydEJ5KG9iamVjdHMsIF8ucHJvcGVydHkoWydhJywgJ2InXSkpLCAnYS5iJyk7XG4gKiAvLyA9PiBbMSwgMl1cbiAqL1xuZnVuY3Rpb24gcHJvcGVydHkocGF0aCkge1xuICByZXR1cm4gaXNLZXkocGF0aCkgPyBiYXNlUHJvcGVydHkodG9LZXkocGF0aCkpIDogYmFzZVByb3BlcnR5RGVlcChwYXRoKTtcbn1cblxuLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIGEgbmV3IGVtcHR5IGFycmF5LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4xMy4wXG4gKiBAY2F0ZWdvcnkgVXRpbFxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBuZXcgZW1wdHkgYXJyYXkuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBhcnJheXMgPSBfLnRpbWVzKDIsIF8uc3R1YkFycmF5KTtcbiAqXG4gKiBjb25zb2xlLmxvZyhhcnJheXMpO1xuICogLy8gPT4gW1tdLCBbXV1cbiAqXG4gKiBjb25zb2xlLmxvZyhhcnJheXNbMF0gPT09IGFycmF5c1sxXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBzdHViQXJyYXkoKSB7XG4gIHJldHVybiBbXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBwaWNrQnk7XG4iLCAiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuXG5pbXBvcnQge1BhcnR9IGZyb20gJy4vcGFydC5qcyc7XG5cbmNvbnN0IGRpcmVjdGl2ZXMgPSBuZXcgV2Vha01hcDxvYmplY3QsIHRydWU+KCk7XG5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5leHBvcnQgdHlwZSBEaXJlY3RpdmVGYWN0b3J5ID0gKC4uLmFyZ3M6IGFueVtdKSA9PiBvYmplY3Q7XG5cbmV4cG9ydCB0eXBlIERpcmVjdGl2ZUZuID0gKHBhcnQ6IFBhcnQpID0+IHZvaWQ7XG5cbi8qKlxuICogQnJhbmRzIGEgZnVuY3Rpb24gYXMgYSBkaXJlY3RpdmUgZmFjdG9yeSBmdW5jdGlvbiBzbyB0aGF0IGxpdC1odG1sIHdpbGwgY2FsbFxuICogdGhlIGZ1bmN0aW9uIGR1cmluZyB0ZW1wbGF0ZSByZW5kZXJpbmcsIHJhdGhlciB0aGFuIHBhc3NpbmcgYXMgYSB2YWx1ZS5cbiAqXG4gKiBBIF9kaXJlY3RpdmVfIGlzIGEgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIFBhcnQgYXMgYW4gYXJndW1lbnQuIEl0IGhhcyB0aGVcbiAqIHNpZ25hdHVyZTogYChwYXJ0OiBQYXJ0KSA9PiB2b2lkYC5cbiAqXG4gKiBBIGRpcmVjdGl2ZSBfZmFjdG9yeV8gaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIGFyZ3VtZW50cyBmb3IgZGF0YSBhbmRcbiAqIGNvbmZpZ3VyYXRpb24gYW5kIHJldHVybnMgYSBkaXJlY3RpdmUuIFVzZXJzIG9mIGRpcmVjdGl2ZSB1c3VhbGx5IHJlZmVyIHRvXG4gKiB0aGUgZGlyZWN0aXZlIGZhY3RvcnkgYXMgdGhlIGRpcmVjdGl2ZS4gRm9yIGV4YW1wbGUsIFwiVGhlIHJlcGVhdCBkaXJlY3RpdmVcIi5cbiAqXG4gKiBVc3VhbGx5IGEgdGVtcGxhdGUgYXV0aG9yIHdpbGwgaW52b2tlIGEgZGlyZWN0aXZlIGZhY3RvcnkgaW4gdGhlaXIgdGVtcGxhdGVcbiAqIHdpdGggcmVsZXZhbnQgYXJndW1lbnRzLCB3aGljaCB3aWxsIHRoZW4gcmV0dXJuIGEgZGlyZWN0aXZlIGZ1bmN0aW9uLlxuICpcbiAqIEhlcmUncyBhbiBleGFtcGxlIG9mIHVzaW5nIHRoZSBgcmVwZWF0KClgIGRpcmVjdGl2ZSBmYWN0b3J5IHRoYXQgdGFrZXMgYW5cbiAqIGFycmF5IGFuZCBhIGZ1bmN0aW9uIHRvIHJlbmRlciBhbiBpdGVtOlxuICpcbiAqIGBgYGpzXG4gKiBodG1sYDx1bD48JHtyZXBlYXQoaXRlbXMsIChpdGVtKSA9PiBodG1sYDxsaT4ke2l0ZW19PC9saT5gKX08L3VsPmBcbiAqIGBgYFxuICpcbiAqIFdoZW4gYHJlcGVhdGAgaXMgaW52b2tlZCwgaXQgcmV0dXJucyBhIGRpcmVjdGl2ZSBmdW5jdGlvbiB0aGF0IGNsb3NlcyBvdmVyXG4gKiBgaXRlbXNgIGFuZCB0aGUgdGVtcGxhdGUgZnVuY3Rpb24uIFdoZW4gdGhlIG91dGVyIHRlbXBsYXRlIGlzIHJlbmRlcmVkLCB0aGVcbiAqIHJldHVybiBkaXJlY3RpdmUgZnVuY3Rpb24gaXMgY2FsbGVkIHdpdGggdGhlIFBhcnQgZm9yIHRoZSBleHByZXNzaW9uLlxuICogYHJlcGVhdGAgdGhlbiBwZXJmb3JtcyBpdCdzIGN1c3RvbSBsb2dpYyB0byByZW5kZXIgbXVsdGlwbGUgaXRlbXMuXG4gKlxuICogQHBhcmFtIGYgVGhlIGRpcmVjdGl2ZSBmYWN0b3J5IGZ1bmN0aW9uLiBNdXN0IGJlIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGFcbiAqIGZ1bmN0aW9uIG9mIHRoZSBzaWduYXR1cmUgYChwYXJ0OiBQYXJ0KSA9PiB2b2lkYC4gVGhlIHJldHVybmVkIGZ1bmN0aW9uIHdpbGxcbiAqIGJlIGNhbGxlZCB3aXRoIHRoZSBwYXJ0IG9iamVjdC5cbiAqXG4gKiBAZXhhbXBsZVxuICpcbiAqIGltcG9ydCB7ZGlyZWN0aXZlLCBodG1sfSBmcm9tICdsaXQtaHRtbCc7XG4gKlxuICogY29uc3QgaW1tdXRhYmxlID0gZGlyZWN0aXZlKCh2KSA9PiAocGFydCkgPT4ge1xuICogICBpZiAocGFydC52YWx1ZSAhPT0gdikge1xuICogICAgIHBhcnQuc2V0VmFsdWUodilcbiAqICAgfVxuICogfSk7XG4gKi9cbmV4cG9ydCBjb25zdCBkaXJlY3RpdmUgPSA8RiBleHRlbmRzIERpcmVjdGl2ZUZhY3Rvcnk+KGY6IEYpOiBGID0+XG4gICAgKCguLi5hcmdzOiB1bmtub3duW10pID0+IHtcbiAgICAgIGNvbnN0IGQgPSBmKC4uLmFyZ3MpO1xuICAgICAgZGlyZWN0aXZlcy5zZXQoZCwgdHJ1ZSk7XG4gICAgICByZXR1cm4gZDtcbiAgICB9KSBhcyBGO1xuXG5leHBvcnQgY29uc3QgaXNEaXJlY3RpdmUgPSAobzogdW5rbm93bik6IG8gaXMgRGlyZWN0aXZlRm4gPT4ge1xuICByZXR1cm4gdHlwZW9mIG8gPT09ICdmdW5jdGlvbicgJiYgZGlyZWN0aXZlcy5oYXMobyk7XG59O1xuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cblxuaW50ZXJmYWNlIE1heWJlUG9seWZpbGxlZENlIGV4dGVuZHMgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5IHtcbiAgcmVhZG9ubHkgcG9seWZpbGxXcmFwRmx1c2hDYWxsYmFjaz86IG9iamVjdDtcbn1cblxuLyoqXG4gKiBUcnVlIGlmIHRoZSBjdXN0b20gZWxlbWVudHMgcG9seWZpbGwgaXMgaW4gdXNlLlxuICovXG5leHBvcnQgY29uc3QgaXNDRVBvbHlmaWxsID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB3aW5kb3cuY3VzdG9tRWxlbWVudHMgIT0gbnVsbCAmJlxuICAgICh3aW5kb3cuY3VzdG9tRWxlbWVudHMgYXMgTWF5YmVQb2x5ZmlsbGVkQ2UpLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2sgIT09XG4gICAgICAgIHVuZGVmaW5lZDtcblxuLyoqXG4gKiBSZXBhcmVudHMgbm9kZXMsIHN0YXJ0aW5nIGZyb20gYHN0YXJ0YCAoaW5jbHVzaXZlKSB0byBgZW5kYCAoZXhjbHVzaXZlKSxcbiAqIGludG8gYW5vdGhlciBjb250YWluZXIgKGNvdWxkIGJlIHRoZSBzYW1lIGNvbnRhaW5lciksIGJlZm9yZSBgYmVmb3JlYC4gSWZcbiAqIGBiZWZvcmVgIGlzIG51bGwsIGl0IGFwcGVuZHMgdGhlIG5vZGVzIHRvIHRoZSBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBjb25zdCByZXBhcmVudE5vZGVzID1cbiAgICAoY29udGFpbmVyOiBOb2RlLFxuICAgICBzdGFydDogTm9kZXxudWxsLFxuICAgICBlbmQ6IE5vZGV8bnVsbCA9IG51bGwsXG4gICAgIGJlZm9yZTogTm9kZXxudWxsID0gbnVsbCk6IHZvaWQgPT4ge1xuICAgICAgd2hpbGUgKHN0YXJ0ICE9PSBlbmQpIHtcbiAgICAgICAgY29uc3QgbiA9IHN0YXJ0IS5uZXh0U2libGluZztcbiAgICAgICAgY29udGFpbmVyLmluc2VydEJlZm9yZShzdGFydCEsIGJlZm9yZSk7XG4gICAgICAgIHN0YXJ0ID0gbjtcbiAgICAgIH1cbiAgICB9O1xuXG4vKipcbiAqIFJlbW92ZXMgbm9kZXMsIHN0YXJ0aW5nIGZyb20gYHN0YXJ0YCAoaW5jbHVzaXZlKSB0byBgZW5kYCAoZXhjbHVzaXZlKSwgZnJvbVxuICogYGNvbnRhaW5lcmAuXG4gKi9cbmV4cG9ydCBjb25zdCByZW1vdmVOb2RlcyA9XG4gICAgKGNvbnRhaW5lcjogTm9kZSwgc3RhcnQ6IE5vZGV8bnVsbCwgZW5kOiBOb2RlfG51bGwgPSBudWxsKTogdm9pZCA9PiB7XG4gICAgICB3aGlsZSAoc3RhcnQgIT09IGVuZCkge1xuICAgICAgICBjb25zdCBuID0gc3RhcnQhLm5leHRTaWJsaW5nO1xuICAgICAgICBjb250YWluZXIucmVtb3ZlQ2hpbGQoc3RhcnQhKTtcbiAgICAgICAgc3RhcnQgPSBuO1xuICAgICAgfVxuICAgIH07XG4iLCAiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE4IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuXG4vKipcbiAqIFRoZSBQYXJ0IGludGVyZmFjZSByZXByZXNlbnRzIGEgZHluYW1pYyBwYXJ0IG9mIGEgdGVtcGxhdGUgaW5zdGFuY2UgcmVuZGVyZWRcbiAqIGJ5IGxpdC1odG1sLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFBhcnQge1xuICByZWFkb25seSB2YWx1ZTogdW5rbm93bjtcblxuICAvKipcbiAgICogU2V0cyB0aGUgY3VycmVudCBwYXJ0IHZhbHVlLCBidXQgZG9lcyBub3Qgd3JpdGUgaXQgdG8gdGhlIERPTS5cbiAgICogQHBhcmFtIHZhbHVlIFRoZSB2YWx1ZSB0aGF0IHdpbGwgYmUgY29tbWl0dGVkLlxuICAgKi9cbiAgc2V0VmFsdWUodmFsdWU6IHVua25vd24pOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBDb21taXRzIHRoZSBjdXJyZW50IHBhcnQgdmFsdWUsIGNhdXNpbmcgaXQgdG8gYWN0dWFsbHkgYmUgd3JpdHRlbiB0byB0aGVcbiAgICogRE9NLlxuICAgKlxuICAgKiBEaXJlY3RpdmVzIGFyZSBydW4gYXQgdGhlIHN0YXJ0IG9mIGBjb21taXRgLCBzbyB0aGF0IGlmIHRoZXkgY2FsbFxuICAgKiBgcGFydC5zZXRWYWx1ZSguLi4pYCBzeW5jaHJvbm91c2x5IHRoYXQgdmFsdWUgd2lsbCBiZSB1c2VkIGluIHRoZSBjdXJyZW50XG4gICAqIGNvbW1pdCwgYW5kIHRoZXJlJ3Mgbm8gbmVlZCB0byBjYWxsIGBwYXJ0LmNvbW1pdCgpYCB3aXRoaW4gdGhlIGRpcmVjdGl2ZS5cbiAgICogSWYgZGlyZWN0aXZlcyBzZXQgYSBwYXJ0IHZhbHVlIGFzeW5jaHJvbm91c2x5LCB0aGVuIHRoZXkgbXVzdCBjYWxsXG4gICAqIGBwYXJ0LmNvbW1pdCgpYCBtYW51YWxseS5cbiAgICovXG4gIGNvbW1pdCgpOiB2b2lkO1xufVxuXG4vKipcbiAqIEEgc2VudGluZWwgdmFsdWUgdGhhdCBzaWduYWxzIHRoYXQgYSB2YWx1ZSB3YXMgaGFuZGxlZCBieSBhIGRpcmVjdGl2ZSBhbmRcbiAqIHNob3VsZCBub3QgYmUgd3JpdHRlbiB0byB0aGUgRE9NLlxuICovXG5leHBvcnQgY29uc3Qgbm9DaGFuZ2UgPSB7fTtcblxuLyoqXG4gKiBBIHNlbnRpbmVsIHZhbHVlIHRoYXQgc2lnbmFscyBhIE5vZGVQYXJ0IHRvIGZ1bGx5IGNsZWFyIGl0cyBjb250ZW50LlxuICovXG5leHBvcnQgY29uc3Qgbm90aGluZyA9IHt9O1xuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cblxuaW1wb3J0IHtUZW1wbGF0ZVJlc3VsdH0gZnJvbSAnLi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuXG4vKipcbiAqIEFuIGV4cHJlc3Npb24gbWFya2VyIHdpdGggZW1iZWRkZWQgdW5pcXVlIGtleSB0byBhdm9pZCBjb2xsaXNpb24gd2l0aFxuICogcG9zc2libGUgdGV4dCBpbiB0ZW1wbGF0ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBtYXJrZXIgPSBge3tsaXQtJHtTdHJpbmcoTWF0aC5yYW5kb20oKSkuc2xpY2UoMil9fX1gO1xuXG4vKipcbiAqIEFuIGV4cHJlc3Npb24gbWFya2VyIHVzZWQgdGV4dC1wb3NpdGlvbnMsIG11bHRpLWJpbmRpbmcgYXR0cmlidXRlcywgYW5kXG4gKiBhdHRyaWJ1dGVzIHdpdGggbWFya3VwLWxpa2UgdGV4dCB2YWx1ZXMuXG4gKi9cbmV4cG9ydCBjb25zdCBub2RlTWFya2VyID0gYDwhLS0ke21hcmtlcn0tLT5gO1xuXG5leHBvcnQgY29uc3QgbWFya2VyUmVnZXggPSBuZXcgUmVnRXhwKGAke21hcmtlcn18JHtub2RlTWFya2VyfWApO1xuXG4vKipcbiAqIFN1ZmZpeCBhcHBlbmRlZCB0byBhbGwgYm91bmQgYXR0cmlidXRlIG5hbWVzLlxuICovXG5leHBvcnQgY29uc3QgYm91bmRBdHRyaWJ1dGVTdWZmaXggPSAnJGxpdCQnO1xuXG4vKipcbiAqIEFuIHVwZGF0YWJsZSBUZW1wbGF0ZSB0aGF0IHRyYWNrcyB0aGUgbG9jYXRpb24gb2YgZHluYW1pYyBwYXJ0cy5cbiAqL1xuZXhwb3J0IGNsYXNzIFRlbXBsYXRlIHtcbiAgcmVhZG9ubHkgcGFydHM6IFRlbXBsYXRlUGFydFtdID0gW107XG4gIHJlYWRvbmx5IGVsZW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG5cbiAgY29uc3RydWN0b3IocmVzdWx0OiBUZW1wbGF0ZVJlc3VsdCwgZWxlbWVudDogSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG5cbiAgICBjb25zdCBub2Rlc1RvUmVtb3ZlOiBOb2RlW10gPSBbXTtcbiAgICBjb25zdCBzdGFjazogTm9kZVtdID0gW107XG4gICAgLy8gRWRnZSBuZWVkcyBhbGwgNCBwYXJhbWV0ZXJzIHByZXNlbnQ7IElFMTEgbmVlZHMgM3JkIHBhcmFtZXRlciB0byBiZSBudWxsXG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihcbiAgICAgICAgZWxlbWVudC5jb250ZW50LFxuICAgICAgICAxMzMgLyogTm9kZUZpbHRlci5TSE9XX3tFTEVNRU5UfENPTU1FTlR8VEVYVH0gKi8sXG4gICAgICAgIG51bGwsXG4gICAgICAgIGZhbHNlKTtcbiAgICAvLyBLZWVwcyB0cmFjayBvZiB0aGUgbGFzdCBpbmRleCBhc3NvY2lhdGVkIHdpdGggYSBwYXJ0LiBXZSB0cnkgdG8gZGVsZXRlXG4gICAgLy8gdW5uZWNlc3Nhcnkgbm9kZXMsIGJ1dCB3ZSBuZXZlciB3YW50IHRvIGFzc29jaWF0ZSB0d28gZGlmZmVyZW50IHBhcnRzXG4gICAgLy8gdG8gdGhlIHNhbWUgaW5kZXguIFRoZXkgbXVzdCBoYXZlIGEgY29uc3RhbnQgbm9kZSBiZXR3ZWVuLlxuICAgIGxldCBsYXN0UGFydEluZGV4ID0gMDtcbiAgICBsZXQgaW5kZXggPSAtMTtcbiAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICBjb25zdCB7c3RyaW5ncywgdmFsdWVzOiB7bGVuZ3RofX0gPSByZXN1bHQ7XG4gICAgd2hpbGUgKHBhcnRJbmRleCA8IGxlbmd0aCkge1xuICAgICAgY29uc3Qgbm9kZSA9IHdhbGtlci5uZXh0Tm9kZSgpIGFzIEVsZW1lbnQgfCBDb21tZW50IHwgVGV4dCB8IG51bGw7XG4gICAgICBpZiAobm9kZSA9PT0gbnVsbCkge1xuICAgICAgICAvLyBXZSd2ZSBleGhhdXN0ZWQgdGhlIGNvbnRlbnQgaW5zaWRlIGEgbmVzdGVkIHRlbXBsYXRlIGVsZW1lbnQuXG4gICAgICAgIC8vIEJlY2F1c2Ugd2Ugc3RpbGwgaGF2ZSBwYXJ0cyAodGhlIG91dGVyIGZvci1sb29wKSwgd2Uga25vdzpcbiAgICAgICAgLy8gLSBUaGVyZSBpcyBhIHRlbXBsYXRlIGluIHRoZSBzdGFja1xuICAgICAgICAvLyAtIFRoZSB3YWxrZXIgd2lsbCBmaW5kIGEgbmV4dE5vZGUgb3V0c2lkZSB0aGUgdGVtcGxhdGVcbiAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc3RhY2sucG9wKCkhO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGluZGV4Kys7XG5cbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSAxIC8qIE5vZGUuRUxFTUVOVF9OT0RFICovKSB7XG4gICAgICAgIGlmICgobm9kZSBhcyBFbGVtZW50KS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVzID0gKG5vZGUgYXMgRWxlbWVudCkuYXR0cmlidXRlcztcbiAgICAgICAgICBjb25zdCB7bGVuZ3RofSA9IGF0dHJpYnV0ZXM7XG4gICAgICAgICAgLy8gUGVyXG4gICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL05hbWVkTm9kZU1hcCxcbiAgICAgICAgICAvLyBhdHRyaWJ1dGVzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSByZXR1cm5lZCBpbiBkb2N1bWVudCBvcmRlci5cbiAgICAgICAgICAvLyBJbiBwYXJ0aWN1bGFyLCBFZGdlL0lFIGNhbiByZXR1cm4gdGhlbSBvdXQgb2Ygb3JkZXIsIHNvIHdlIGNhbm5vdFxuICAgICAgICAgIC8vIGFzc3VtZSBhIGNvcnJlc3BvbmRlbmNlIGJldHdlZW4gcGFydCBpbmRleCBhbmQgYXR0cmlidXRlIGluZGV4LlxuICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGVuZHNXaXRoKGF0dHJpYnV0ZXNbaV0ubmFtZSwgYm91bmRBdHRyaWJ1dGVTdWZmaXgpKSB7XG4gICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHdoaWxlIChjb3VudC0tID4gMCkge1xuICAgICAgICAgICAgLy8gR2V0IHRoZSB0ZW1wbGF0ZSBsaXRlcmFsIHNlY3Rpb24gbGVhZGluZyB1cCB0byB0aGUgZmlyc3RcbiAgICAgICAgICAgIC8vIGV4cHJlc3Npb24gaW4gdGhpcyBhdHRyaWJ1dGVcbiAgICAgICAgICAgIGNvbnN0IHN0cmluZ0ZvclBhcnQgPSBzdHJpbmdzW3BhcnRJbmRleF07XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgICAgICAgICAgY29uc3QgbmFtZSA9IGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXguZXhlYyhzdHJpbmdGb3JQYXJ0KSFbMl07XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBjb3JyZXNwb25kaW5nIGF0dHJpYnV0ZVxuICAgICAgICAgICAgLy8gQWxsIGJvdW5kIGF0dHJpYnV0ZXMgaGF2ZSBoYWQgYSBzdWZmaXggYWRkZWQgaW5cbiAgICAgICAgICAgIC8vIFRlbXBsYXRlUmVzdWx0I2dldEhUTUwgdG8gb3B0IG91dCBvZiBzcGVjaWFsIGF0dHJpYnV0ZVxuICAgICAgICAgICAgLy8gaGFuZGxpbmcuIFRvIGxvb2sgdXAgdGhlIGF0dHJpYnV0ZSB2YWx1ZSB3ZSBhbHNvIG5lZWQgdG8gYWRkXG4gICAgICAgICAgICAvLyB0aGUgc3VmZml4LlxuICAgICAgICAgICAgY29uc3QgYXR0cmlidXRlTG9va3VwTmFtZSA9XG4gICAgICAgICAgICAgICAgbmFtZS50b0xvd2VyQ2FzZSgpICsgYm91bmRBdHRyaWJ1dGVTdWZmaXg7XG4gICAgICAgICAgICBjb25zdCBhdHRyaWJ1dGVWYWx1ZSA9XG4gICAgICAgICAgICAgICAgKG5vZGUgYXMgRWxlbWVudCkuZ2V0QXR0cmlidXRlKGF0dHJpYnV0ZUxvb2t1cE5hbWUpITtcbiAgICAgICAgICAgIChub2RlIGFzIEVsZW1lbnQpLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGVMb29rdXBOYW1lKTtcbiAgICAgICAgICAgIGNvbnN0IHN0YXRpY3MgPSBhdHRyaWJ1dGVWYWx1ZS5zcGxpdChtYXJrZXJSZWdleCk7XG4gICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goe3R5cGU6ICdhdHRyaWJ1dGUnLCBpbmRleCwgbmFtZSwgc3RyaW5nczogc3RhdGljc30pO1xuICAgICAgICAgICAgcGFydEluZGV4ICs9IHN0YXRpY3MubGVuZ3RoIC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChub2RlIGFzIEVsZW1lbnQpLnRhZ05hbWUgPT09ICdURU1QTEFURScpIHtcbiAgICAgICAgICBzdGFjay5wdXNoKG5vZGUpO1xuICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IChub2RlIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQpLmNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAobm9kZS5ub2RlVHlwZSA9PT0gMyAvKiBOb2RlLlRFWFRfTk9ERSAqLykge1xuICAgICAgICBjb25zdCBkYXRhID0gKG5vZGUgYXMgVGV4dCkuZGF0YTtcbiAgICAgICAgaWYgKGRhdGEuaW5kZXhPZihtYXJrZXIpID49IDApIHtcbiAgICAgICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGUhO1xuICAgICAgICAgIGNvbnN0IHN0cmluZ3MgPSBkYXRhLnNwbGl0KG1hcmtlclJlZ2V4KTtcbiAgICAgICAgICBjb25zdCBsYXN0SW5kZXggPSBzdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgLy8gR2VuZXJhdGUgYSBuZXcgdGV4dCBub2RlIGZvciBlYWNoIGxpdGVyYWwgc2VjdGlvblxuICAgICAgICAgIC8vIFRoZXNlIG5vZGVzIGFyZSBhbHNvIHVzZWQgYXMgdGhlIG1hcmtlcnMgZm9yIG5vZGUgcGFydHNcbiAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxhc3RJbmRleDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgaW5zZXJ0OiBOb2RlO1xuICAgICAgICAgICAgbGV0IHMgPSBzdHJpbmdzW2ldO1xuICAgICAgICAgICAgaWYgKHMgPT09ICcnKSB7XG4gICAgICAgICAgICAgIGluc2VydCA9IGNyZWF0ZU1hcmtlcigpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMocyk7XG4gICAgICAgICAgICAgIGlmIChtYXRjaCAhPT0gbnVsbCAmJiBlbmRzV2l0aChtYXRjaFsyXSwgYm91bmRBdHRyaWJ1dGVTdWZmaXgpKSB7XG4gICAgICAgICAgICAgICAgcyA9IHMuc2xpY2UoMCwgbWF0Y2guaW5kZXgpICsgbWF0Y2hbMV0gK1xuICAgICAgICAgICAgICAgICAgICBtYXRjaFsyXS5zbGljZSgwLCAtYm91bmRBdHRyaWJ1dGVTdWZmaXgubGVuZ3RoKSArIG1hdGNoWzNdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGluc2VydCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShpbnNlcnQsIG5vZGUpO1xuICAgICAgICAgICAgdGhpcy5wYXJ0cy5wdXNoKHt0eXBlOiAnbm9kZScsIGluZGV4OiArK2luZGV4fSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIElmIHRoZXJlJ3Mgbm8gdGV4dCwgd2UgbXVzdCBpbnNlcnQgYSBjb21tZW50IHRvIG1hcmsgb3VyIHBsYWNlLlxuICAgICAgICAgIC8vIEVsc2UsIHdlIGNhbiB0cnVzdCBpdCB3aWxsIHN0aWNrIGFyb3VuZCBhZnRlciBjbG9uaW5nLlxuICAgICAgICAgIGlmIChzdHJpbmdzW2xhc3RJbmRleF0gPT09ICcnKSB7XG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNyZWF0ZU1hcmtlcigpLCBub2RlKTtcbiAgICAgICAgICAgIG5vZGVzVG9SZW1vdmUucHVzaChub2RlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgKG5vZGUgYXMgVGV4dCkuZGF0YSA9IHN0cmluZ3NbbGFzdEluZGV4XTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gV2UgaGF2ZSBhIHBhcnQgZm9yIGVhY2ggbWF0Y2ggZm91bmRcbiAgICAgICAgICBwYXJ0SW5kZXggKz0gbGFzdEluZGV4O1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKG5vZGUubm9kZVR5cGUgPT09IDggLyogTm9kZS5DT01NRU5UX05PREUgKi8pIHtcbiAgICAgICAgaWYgKChub2RlIGFzIENvbW1lbnQpLmRhdGEgPT09IG1hcmtlcikge1xuICAgICAgICAgIGNvbnN0IHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZSE7XG4gICAgICAgICAgLy8gQWRkIGEgbmV3IG1hcmtlciBub2RlIHRvIGJlIHRoZSBzdGFydE5vZGUgb2YgdGhlIFBhcnQgaWYgYW55IG9mXG4gICAgICAgICAgLy8gdGhlIGZvbGxvd2luZyBhcmUgdHJ1ZTpcbiAgICAgICAgICAvLyAgKiBXZSBkb24ndCBoYXZlIGEgcHJldmlvdXNTaWJsaW5nXG4gICAgICAgICAgLy8gICogVGhlIHByZXZpb3VzU2libGluZyBpcyBhbHJlYWR5IHRoZSBzdGFydCBvZiBhIHByZXZpb3VzIHBhcnRcbiAgICAgICAgICBpZiAobm9kZS5wcmV2aW91c1NpYmxpbmcgPT09IG51bGwgfHwgaW5kZXggPT09IGxhc3RQYXJ0SW5kZXgpIHtcbiAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGNyZWF0ZU1hcmtlcigpLCBub2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgbGFzdFBhcnRJbmRleCA9IGluZGV4O1xuICAgICAgICAgIHRoaXMucGFydHMucHVzaCh7dHlwZTogJ25vZGUnLCBpbmRleH0pO1xuICAgICAgICAgIC8vIElmIHdlIGRvbid0IGhhdmUgYSBuZXh0U2libGluZywga2VlcCB0aGlzIG5vZGUgc28gd2UgaGF2ZSBhbiBlbmQuXG4gICAgICAgICAgLy8gRWxzZSwgd2UgY2FuIHJlbW92ZSBpdCB0byBzYXZlIGZ1dHVyZSBjb3N0cy5cbiAgICAgICAgICBpZiAobm9kZS5uZXh0U2libGluZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgKG5vZGUgYXMgQ29tbWVudCkuZGF0YSA9ICcnO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBub2Rlc1RvUmVtb3ZlLnB1c2gobm9kZSk7XG4gICAgICAgICAgICBpbmRleC0tO1xuICAgICAgICAgIH1cbiAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsZXQgaSA9IC0xO1xuICAgICAgICAgIHdoaWxlICgoaSA9IChub2RlIGFzIENvbW1lbnQpLmRhdGEuaW5kZXhPZihtYXJrZXIsIGkgKyAxKSkgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBDb21tZW50IG5vZGUgaGFzIGEgYmluZGluZyBtYXJrZXIgaW5zaWRlLCBtYWtlIGFuIGluYWN0aXZlIHBhcnRcbiAgICAgICAgICAgIC8vIFRoZSBiaW5kaW5nIHdvbid0IHdvcmssIGJ1dCBzdWJzZXF1ZW50IGJpbmRpbmdzIHdpbGxcbiAgICAgICAgICAgIC8vIFRPRE8gKGp1c3RpbmZhZ25hbmkpOiBjb25zaWRlciB3aGV0aGVyIGl0J3MgZXZlbiB3b3J0aCBpdCB0b1xuICAgICAgICAgICAgLy8gbWFrZSBiaW5kaW5ncyBpbiBjb21tZW50cyB3b3JrXG4gICAgICAgICAgICB0aGlzLnBhcnRzLnB1c2goe3R5cGU6ICdub2RlJywgaW5kZXg6IC0xfSk7XG4gICAgICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgdGV4dCBiaW5kaW5nIG5vZGVzIGFmdGVyIHRoZSB3YWxrIHRvIG5vdCBkaXN0dXJiIHRoZSBUcmVlV2Fsa2VyXG4gICAgZm9yIChjb25zdCBuIG9mIG5vZGVzVG9SZW1vdmUpIHtcbiAgICAgIG4ucGFyZW50Tm9kZSEucmVtb3ZlQ2hpbGQobik7XG4gICAgfVxuICB9XG59XG5cbmNvbnN0IGVuZHNXaXRoID0gKHN0cjogc3RyaW5nLCBzdWZmaXg6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBpbmRleCA9IHN0ci5sZW5ndGggLSBzdWZmaXgubGVuZ3RoO1xuICByZXR1cm4gaW5kZXggPj0gMCAmJiBzdHIuc2xpY2UoaW5kZXgpID09PSBzdWZmaXg7XG59O1xuXG4vKipcbiAqIEEgcGxhY2Vob2xkZXIgZm9yIGEgZHluYW1pYyBleHByZXNzaW9uIGluIGFuIEhUTUwgdGVtcGxhdGUuXG4gKlxuICogVGhlcmUgYXJlIHR3byBidWlsdC1pbiBwYXJ0IHR5cGVzOiBBdHRyaWJ1dGVQYXJ0IGFuZCBOb2RlUGFydC4gTm9kZVBhcnRzXG4gKiBhbHdheXMgcmVwcmVzZW50IGEgc2luZ2xlIGR5bmFtaWMgZXhwcmVzc2lvbiwgd2hpbGUgQXR0cmlidXRlUGFydHMgbWF5XG4gKiByZXByZXNlbnQgYXMgbWFueSBleHByZXNzaW9ucyBhcmUgY29udGFpbmVkIGluIHRoZSBhdHRyaWJ1dGUuXG4gKlxuICogQSBUZW1wbGF0ZSdzIHBhcnRzIGFyZSBtdXRhYmxlLCBzbyBwYXJ0cyBjYW4gYmUgcmVwbGFjZWQgb3IgbW9kaWZpZWRcbiAqIChwb3NzaWJseSB0byBpbXBsZW1lbnQgZGlmZmVyZW50IHRlbXBsYXRlIHNlbWFudGljcykuIFRoZSBjb250cmFjdCBpcyB0aGF0XG4gKiBwYXJ0cyBjYW4gb25seSBiZSByZXBsYWNlZCwgbm90IHJlbW92ZWQsIGFkZGVkIG9yIHJlb3JkZXJlZCwgYW5kIHBhcnRzIG11c3RcbiAqIGFsd2F5cyBjb25zdW1lIHRoZSBjb3JyZWN0IG51bWJlciBvZiB2YWx1ZXMgaW4gdGhlaXIgYHVwZGF0ZSgpYCBtZXRob2QuXG4gKlxuICogVE9ETyhqdXN0aW5mYWduYW5pKTogVGhhdCByZXF1aXJlbWVudCBpcyBhIGxpdHRsZSBmcmFnaWxlLiBBXG4gKiBUZW1wbGF0ZUluc3RhbmNlIGNvdWxkIGluc3RlYWQgYmUgbW9yZSBjYXJlZnVsIGFib3V0IHdoaWNoIHZhbHVlcyBpdCBnaXZlc1xuICogdG8gUGFydC51cGRhdGUoKS5cbiAqL1xuZXhwb3J0IHR5cGUgVGVtcGxhdGVQYXJ0ID0ge1xuICByZWFkb25seSB0eXBlOiAnbm9kZSc7IGluZGV4OiBudW1iZXI7XG59fHtcbiAgcmVhZG9ubHkgdHlwZTogJ2F0dHJpYnV0ZSc7XG4gIGluZGV4OiBudW1iZXI7XG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbiAgcmVhZG9ubHkgc3RyaW5nczogUmVhZG9ubHlBcnJheTxzdHJpbmc+O1xufTtcblxuZXhwb3J0IGNvbnN0IGlzVGVtcGxhdGVQYXJ0QWN0aXZlID0gKHBhcnQ6IFRlbXBsYXRlUGFydCkgPT4gcGFydC5pbmRleCAhPT0gLTE7XG5cbi8vIEFsbG93cyBgZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJylgIHRvIGJlIHJlbmFtZWQgZm9yIGFcbi8vIHNtYWxsIG1hbnVhbCBzaXplLXNhdmluZ3MuXG5leHBvcnQgY29uc3QgY3JlYXRlTWFya2VyID0gKCkgPT4gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnJyk7XG5cbi8qKlxuICogVGhpcyByZWdleCBleHRyYWN0cyB0aGUgYXR0cmlidXRlIG5hbWUgcHJlY2VkaW5nIGFuIGF0dHJpYnV0ZS1wb3NpdGlvblxuICogZXhwcmVzc2lvbi4gSXQgZG9lcyB0aGlzIGJ5IG1hdGNoaW5nIHRoZSBzeW50YXggYWxsb3dlZCBmb3IgYXR0cmlidXRlc1xuICogYWdhaW5zdCB0aGUgc3RyaW5nIGxpdGVyYWwgZGlyZWN0bHkgcHJlY2VkaW5nIHRoZSBleHByZXNzaW9uLCBhc3N1bWluZyB0aGF0XG4gKiB0aGUgZXhwcmVzc2lvbiBpcyBpbiBhbiBhdHRyaWJ1dGUtdmFsdWUgcG9zaXRpb24uXG4gKlxuICogU2VlIGF0dHJpYnV0ZXMgaW4gdGhlIEhUTUwgc3BlYzpcbiAqIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9odG1sNS9zeW50YXguaHRtbCNlbGVtZW50cy1hdHRyaWJ1dGVzXG4gKlxuICogXCIgXFx4MDlcXHgwYVxceDBjXFx4MGRcIiBhcmUgSFRNTCBzcGFjZSBjaGFyYWN0ZXJzOlxuICogaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw1L2luZnJhc3RydWN0dXJlLmh0bWwjc3BhY2UtY2hhcmFjdGVyc1xuICpcbiAqIFwiXFwwLVxceDFGXFx4N0YtXFx4OUZcIiBhcmUgVW5pY29kZSBjb250cm9sIGNoYXJhY3RlcnMsIHdoaWNoIGluY2x1ZGVzIGV2ZXJ5XG4gKiBzcGFjZSBjaGFyYWN0ZXIgZXhjZXB0IFwiIFwiLlxuICpcbiAqIFNvIGFuIGF0dHJpYnV0ZSBpczpcbiAqICAqIFRoZSBuYW1lOiBhbnkgY2hhcmFjdGVyIGV4Y2VwdCBhIGNvbnRyb2wgY2hhcmFjdGVyLCBzcGFjZSBjaGFyYWN0ZXIsICgnKSxcbiAqICAgIChcIiksIFwiPlwiLCBcIj1cIiwgb3IgXCIvXCJcbiAqICAqIEZvbGxvd2VkIGJ5IHplcm8gb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzXG4gKiAgKiBGb2xsb3dlZCBieSBcIj1cIlxuICogICogRm9sbG93ZWQgYnkgemVybyBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnNcbiAqICAqIEZvbGxvd2VkIGJ5OlxuICogICAgKiBBbnkgY2hhcmFjdGVyIGV4Y2VwdCBzcGFjZSwgKCcpLCAoXCIpLCBcIjxcIiwgXCI+XCIsIFwiPVwiLCAoYCksIG9yXG4gKiAgICAqIChcIikgdGhlbiBhbnkgbm9uLShcIiksIG9yXG4gKiAgICAqICgnKSB0aGVuIGFueSBub24tKCcpXG4gKi9cbmV4cG9ydCBjb25zdCBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4ID1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIC8oWyBcXHgwOVxceDBhXFx4MGNcXHgwZF0pKFteXFwwLVxceDFGXFx4N0YtXFx4OUYgXCInPj0vXSspKFsgXFx4MDlcXHgwYVxceDBjXFx4MGRdKj1bIFxceDA5XFx4MGFcXHgwY1xceDBkXSooPzpbXiBcXHgwOVxceDBhXFx4MGNcXHgwZFwiJ2A8Pj1dKnxcIlteXCJdKnwnW14nXSopKSQvO1xuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cblxuaW1wb3J0IHtpc0NFUG9seWZpbGx9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7UGFydH0gZnJvbSAnLi9wYXJ0LmpzJztcbmltcG9ydCB7UmVuZGVyT3B0aW9uc30gZnJvbSAnLi9yZW5kZXItb3B0aW9ucy5qcyc7XG5pbXBvcnQge1RlbXBsYXRlUHJvY2Vzc29yfSBmcm9tICcuL3RlbXBsYXRlLXByb2Nlc3Nvci5qcyc7XG5pbXBvcnQge2lzVGVtcGxhdGVQYXJ0QWN0aXZlLCBUZW1wbGF0ZSwgVGVtcGxhdGVQYXJ0fSBmcm9tICcuL3RlbXBsYXRlLmpzJztcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiBhIGBUZW1wbGF0ZWAgdGhhdCBjYW4gYmUgYXR0YWNoZWQgdG8gdGhlIERPTSBhbmQgdXBkYXRlZFxuICogd2l0aCBuZXcgdmFsdWVzLlxuICovXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVJbnN0YW5jZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgX19wYXJ0czogQXJyYXk8UGFydHx1bmRlZmluZWQ+ID0gW107XG4gIHJlYWRvbmx5IHByb2Nlc3NvcjogVGVtcGxhdGVQcm9jZXNzb3I7XG4gIHJlYWRvbmx5IG9wdGlvbnM6IFJlbmRlck9wdGlvbnM7XG4gIHJlYWRvbmx5IHRlbXBsYXRlOiBUZW1wbGF0ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIHRlbXBsYXRlOiBUZW1wbGF0ZSwgcHJvY2Vzc29yOiBUZW1wbGF0ZVByb2Nlc3NvcixcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMpIHtcbiAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgdGhpcy5wcm9jZXNzb3IgPSBwcm9jZXNzb3I7XG4gICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgfVxuXG4gIHVwZGF0ZSh2YWx1ZXM6IHJlYWRvbmx5IHVua25vd25bXSkge1xuICAgIGxldCBpID0gMDtcbiAgICBmb3IgKGNvbnN0IHBhcnQgb2YgdGhpcy5fX3BhcnRzKSB7XG4gICAgICBpZiAocGFydCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHBhcnQuc2V0VmFsdWUodmFsdWVzW2ldKTtcbiAgICAgIH1cbiAgICAgIGkrKztcbiAgICB9XG4gICAgZm9yIChjb25zdCBwYXJ0IG9mIHRoaXMuX19wYXJ0cykge1xuICAgICAgaWYgKHBhcnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBwYXJ0LmNvbW1pdCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9jbG9uZSgpOiBEb2N1bWVudEZyYWdtZW50IHtcbiAgICAvLyBUaGVyZSBhcmUgYSBudW1iZXIgb2Ygc3RlcHMgaW4gdGhlIGxpZmVjeWNsZSBvZiBhIHRlbXBsYXRlIGluc3RhbmNlJ3NcbiAgICAvLyBET00gZnJhZ21lbnQ6XG4gICAgLy8gIDEuIENsb25lIC0gY3JlYXRlIHRoZSBpbnN0YW5jZSBmcmFnbWVudFxuICAgIC8vICAyLiBBZG9wdCAtIGFkb3B0IGludG8gdGhlIG1haW4gZG9jdW1lbnRcbiAgICAvLyAgMy4gUHJvY2VzcyAtIGZpbmQgcGFydCBtYXJrZXJzIGFuZCBjcmVhdGUgcGFydHNcbiAgICAvLyAgNC4gVXBncmFkZSAtIHVwZ3JhZGUgY3VzdG9tIGVsZW1lbnRzXG4gICAgLy8gIDUuIFVwZGF0ZSAtIHNldCBub2RlLCBhdHRyaWJ1dGUsIHByb3BlcnR5LCBldGMuLCB2YWx1ZXNcbiAgICAvLyAgNi4gQ29ubmVjdCAtIGNvbm5lY3QgdG8gdGhlIGRvY3VtZW50LiBPcHRpb25hbCBhbmQgb3V0c2lkZSBvZiB0aGlzXG4gICAgLy8gICAgIG1ldGhvZC5cbiAgICAvL1xuICAgIC8vIFdlIGhhdmUgYSBmZXcgY29uc3RyYWludHMgb24gdGhlIG9yZGVyaW5nIG9mIHRoZXNlIHN0ZXBzOlxuICAgIC8vICAqIFdlIG5lZWQgdG8gdXBncmFkZSBiZWZvcmUgdXBkYXRpbmcsIHNvIHRoYXQgcHJvcGVydHkgdmFsdWVzIHdpbGwgcGFzc1xuICAgIC8vICAgIHRocm91Z2ggYW55IHByb3BlcnR5IHNldHRlcnMuXG4gICAgLy8gICogV2Ugd291bGQgbGlrZSB0byBwcm9jZXNzIGJlZm9yZSB1cGdyYWRpbmcgc28gdGhhdCB3ZSdyZSBzdXJlIHRoYXQgdGhlXG4gICAgLy8gICAgY2xvbmVkIGZyYWdtZW50IGlzIGluZXJ0IGFuZCBub3QgZGlzdHVyYmVkIGJ5IHNlbGYtbW9kaWZ5aW5nIERPTS5cbiAgICAvLyAgKiBXZSB3YW50IGN1c3RvbSBlbGVtZW50cyB0byB1cGdyYWRlIGV2ZW4gaW4gZGlzY29ubmVjdGVkIGZyYWdtZW50cy5cbiAgICAvL1xuICAgIC8vIEdpdmVuIHRoZXNlIGNvbnN0cmFpbnRzLCB3aXRoIGZ1bGwgY3VzdG9tIGVsZW1lbnRzIHN1cHBvcnQgd2Ugd291bGRcbiAgICAvLyBwcmVmZXIgdGhlIG9yZGVyOiBDbG9uZSwgUHJvY2VzcywgQWRvcHQsIFVwZ3JhZGUsIFVwZGF0ZSwgQ29ubmVjdFxuICAgIC8vXG4gICAgLy8gQnV0IFNhZmFyaSBkb2VzIG5vdCBpbXBsZW1lbnQgQ3VzdG9tRWxlbWVudFJlZ2lzdHJ5I3VwZ3JhZGUsIHNvIHdlXG4gICAgLy8gY2FuIG5vdCBpbXBsZW1lbnQgdGhhdCBvcmRlciBhbmQgc3RpbGwgaGF2ZSB1cGdyYWRlLWJlZm9yZS11cGRhdGUgYW5kXG4gICAgLy8gdXBncmFkZSBkaXNjb25uZWN0ZWQgZnJhZ21lbnRzLiBTbyB3ZSBpbnN0ZWFkIHNhY3JpZmljZSB0aGVcbiAgICAvLyBwcm9jZXNzLWJlZm9yZS11cGdyYWRlIGNvbnN0cmFpbnQsIHNpbmNlIGluIEN1c3RvbSBFbGVtZW50cyB2MSBlbGVtZW50c1xuICAgIC8vIG11c3Qgbm90IG1vZGlmeSB0aGVpciBsaWdodCBET00gaW4gdGhlIGNvbnN0cnVjdG9yLiBXZSBzdGlsbCBoYXZlIGlzc3Vlc1xuICAgIC8vIHdoZW4gY28tZXhpc3Rpbmcgd2l0aCBDRXYwIGVsZW1lbnRzIGxpa2UgUG9seW1lciAxLCBhbmQgd2l0aCBwb2x5ZmlsbHNcbiAgICAvLyB0aGF0IGRvbid0IHN0cmljdGx5IGFkaGVyZSB0byB0aGUgbm8tbW9kaWZpY2F0aW9uIHJ1bGUgYmVjYXVzZSBzaGFkb3dcbiAgICAvLyBET00sIHdoaWNoIG1heSBiZSBjcmVhdGVkIGluIHRoZSBjb25zdHJ1Y3RvciwgaXMgZW11bGF0ZWQgYnkgYmVpbmcgcGxhY2VkXG4gICAgLy8gaW4gdGhlIGxpZ2h0IERPTS5cbiAgICAvL1xuICAgIC8vIFRoZSByZXN1bHRpbmcgb3JkZXIgaXMgb24gbmF0aXZlIGlzOiBDbG9uZSwgQWRvcHQsIFVwZ3JhZGUsIFByb2Nlc3MsXG4gICAgLy8gVXBkYXRlLCBDb25uZWN0LiBkb2N1bWVudC5pbXBvcnROb2RlKCkgcGVyZm9ybXMgQ2xvbmUsIEFkb3B0LCBhbmQgVXBncmFkZVxuICAgIC8vIGluIG9uZSBzdGVwLlxuICAgIC8vXG4gICAgLy8gVGhlIEN1c3RvbSBFbGVtZW50cyB2MSBwb2x5ZmlsbCBzdXBwb3J0cyB1cGdyYWRlKCksIHNvIHRoZSBvcmRlciB3aGVuXG4gICAgLy8gcG9seWZpbGxlZCBpcyB0aGUgbW9yZSBpZGVhbDogQ2xvbmUsIFByb2Nlc3MsIEFkb3B0LCBVcGdyYWRlLCBVcGRhdGUsXG4gICAgLy8gQ29ubmVjdC5cblxuICAgIGNvbnN0IGZyYWdtZW50ID0gaXNDRVBvbHlmaWxsID9cbiAgICAgICAgdGhpcy50ZW1wbGF0ZS5lbGVtZW50LmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpIGFzIERvY3VtZW50RnJhZ21lbnQgOlxuICAgICAgICBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGUuZWxlbWVudC5jb250ZW50LCB0cnVlKTtcblxuICAgIGNvbnN0IHN0YWNrOiBOb2RlW10gPSBbXTtcbiAgICBjb25zdCBwYXJ0cyA9IHRoaXMudGVtcGxhdGUucGFydHM7XG4gICAgLy8gRWRnZSBuZWVkcyBhbGwgNCBwYXJhbWV0ZXJzIHByZXNlbnQ7IElFMTEgbmVlZHMgM3JkIHBhcmFtZXRlciB0byBiZSBudWxsXG4gICAgY29uc3Qgd2Fsa2VyID0gZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcihcbiAgICAgICAgZnJhZ21lbnQsXG4gICAgICAgIDEzMyAvKiBOb2RlRmlsdGVyLlNIT1dfe0VMRU1FTlR8Q09NTUVOVHxURVhUfSAqLyxcbiAgICAgICAgbnVsbCxcbiAgICAgICAgZmFsc2UpO1xuICAgIGxldCBwYXJ0SW5kZXggPSAwO1xuICAgIGxldCBub2RlSW5kZXggPSAwO1xuICAgIGxldCBwYXJ0OiBUZW1wbGF0ZVBhcnQ7XG4gICAgbGV0IG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAvLyBMb29wIHRocm91Z2ggYWxsIHRoZSBub2RlcyBhbmQgcGFydHMgb2YgYSB0ZW1wbGF0ZVxuICAgIHdoaWxlIChwYXJ0SW5kZXggPCBwYXJ0cy5sZW5ndGgpIHtcbiAgICAgIHBhcnQgPSBwYXJ0c1twYXJ0SW5kZXhdO1xuICAgICAgaWYgKCFpc1RlbXBsYXRlUGFydEFjdGl2ZShwYXJ0KSkge1xuICAgICAgICB0aGlzLl9fcGFydHMucHVzaCh1bmRlZmluZWQpO1xuICAgICAgICBwYXJ0SW5kZXgrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFByb2dyZXNzIHRoZSB0cmVlIHdhbGtlciB1bnRpbCB3ZSBmaW5kIG91ciBuZXh0IHBhcnQncyBub2RlLlxuICAgICAgLy8gTm90ZSB0aGF0IG11bHRpcGxlIHBhcnRzIG1heSBzaGFyZSB0aGUgc2FtZSBub2RlIChhdHRyaWJ1dGUgcGFydHNcbiAgICAgIC8vIG9uIGEgc2luZ2xlIGVsZW1lbnQpLCBzbyB0aGlzIGxvb3AgbWF5IG5vdCBydW4gYXQgYWxsLlxuICAgICAgd2hpbGUgKG5vZGVJbmRleCA8IHBhcnQuaW5kZXgpIHtcbiAgICAgICAgbm9kZUluZGV4Kys7XG4gICAgICAgIGlmIChub2RlIS5ub2RlTmFtZSA9PT0gJ1RFTVBMQVRFJykge1xuICAgICAgICAgIHN0YWNrLnB1c2gobm9kZSEpO1xuICAgICAgICAgIHdhbGtlci5jdXJyZW50Tm9kZSA9IChub2RlIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQpLmNvbnRlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKChub2RlID0gd2Fsa2VyLm5leHROb2RlKCkpID09PSBudWxsKSB7XG4gICAgICAgICAgLy8gV2UndmUgZXhoYXVzdGVkIHRoZSBjb250ZW50IGluc2lkZSBhIG5lc3RlZCB0ZW1wbGF0ZSBlbGVtZW50LlxuICAgICAgICAgIC8vIEJlY2F1c2Ugd2Ugc3RpbGwgaGF2ZSBwYXJ0cyAodGhlIG91dGVyIGZvci1sb29wKSwgd2Uga25vdzpcbiAgICAgICAgICAvLyAtIFRoZXJlIGlzIGEgdGVtcGxhdGUgaW4gdGhlIHN0YWNrXG4gICAgICAgICAgLy8gLSBUaGUgd2Fsa2VyIHdpbGwgZmluZCBhIG5leHROb2RlIG91dHNpZGUgdGhlIHRlbXBsYXRlXG4gICAgICAgICAgd2Fsa2VyLmN1cnJlbnROb2RlID0gc3RhY2sucG9wKCkhO1xuICAgICAgICAgIG5vZGUgPSB3YWxrZXIubmV4dE5vZGUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBXZSd2ZSBhcnJpdmVkIGF0IG91ciBwYXJ0J3Mgbm9kZS5cbiAgICAgIGlmIChwYXJ0LnR5cGUgPT09ICdub2RlJykge1xuICAgICAgICBjb25zdCBwYXJ0ID0gdGhpcy5wcm9jZXNzb3IuaGFuZGxlVGV4dEV4cHJlc3Npb24odGhpcy5vcHRpb25zKTtcbiAgICAgICAgcGFydC5pbnNlcnRBZnRlck5vZGUobm9kZSEucHJldmlvdXNTaWJsaW5nISk7XG4gICAgICAgIHRoaXMuX19wYXJ0cy5wdXNoKHBhcnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fX3BhcnRzLnB1c2goLi4udGhpcy5wcm9jZXNzb3IuaGFuZGxlQXR0cmlidXRlRXhwcmVzc2lvbnMoXG4gICAgICAgICAgICBub2RlIGFzIEVsZW1lbnQsIHBhcnQubmFtZSwgcGFydC5zdHJpbmdzLCB0aGlzLm9wdGlvbnMpKTtcbiAgICAgIH1cbiAgICAgIHBhcnRJbmRleCsrO1xuICAgIH1cblxuICAgIGlmIChpc0NFUG9seWZpbGwpIHtcbiAgICAgIGRvY3VtZW50LmFkb3B0Tm9kZShmcmFnbWVudCk7XG4gICAgICBjdXN0b21FbGVtZW50cy51cGdyYWRlKGZyYWdtZW50KTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWdtZW50O1xuICB9XG59XG4iLCAiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuXG4vKipcbiAqIEBtb2R1bGUgbGl0LWh0bWxcbiAqL1xuXG5pbXBvcnQge3JlcGFyZW50Tm9kZXN9IGZyb20gJy4vZG9tLmpzJztcbmltcG9ydCB7VGVtcGxhdGVQcm9jZXNzb3J9IGZyb20gJy4vdGVtcGxhdGUtcHJvY2Vzc29yLmpzJztcbmltcG9ydCB7Ym91bmRBdHRyaWJ1dGVTdWZmaXgsIGxhc3RBdHRyaWJ1dGVOYW1lUmVnZXgsIG1hcmtlciwgbm9kZU1hcmtlcn0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5cbmRlY2xhcmUgY29uc3QgdHJ1c3RlZFR5cGVzOiB0eXBlb2Ygd2luZG93LnRydXN0ZWRUeXBlcztcbi8qKlxuICogT3VyIFRydXN0ZWRUeXBlUG9saWN5IGZvciBIVE1MIHdoaWNoIGlzIGRlY2xhcmVkIHVzaW5nIHRoZSBodG1sIHRlbXBsYXRlXG4gKiB0YWcgZnVuY3Rpb24uXG4gKlxuICogVGhhdCBIVE1MIGlzIGEgZGV2ZWxvcGVyLWF1dGhvcmVkIGNvbnN0YW50LCBhbmQgaXMgcGFyc2VkIHdpdGggaW5uZXJIVE1MXG4gKiBiZWZvcmUgYW55IHVudHJ1c3RlZCBleHByZXNzaW9ucyBoYXZlIGJlZW4gbWl4ZWQgaW4uIFRoZXJlZm9yIGl0IGlzXG4gKiBjb25zaWRlcmVkIHNhZmUgYnkgY29uc3RydWN0aW9uLlxuICovXG5jb25zdCBwb2xpY3kgPSB3aW5kb3cudHJ1c3RlZFR5cGVzICYmXG4gICAgdHJ1c3RlZFR5cGVzIS5jcmVhdGVQb2xpY3koJ2xpdC1odG1sJywge2NyZWF0ZUhUTUw6IChzKSA9PiBzfSk7XG5cbmNvbnN0IGNvbW1lbnRNYXJrZXIgPSBgICR7bWFya2VyfSBgO1xuXG4vKipcbiAqIFRoZSByZXR1cm4gdHlwZSBvZiBgaHRtbGAsIHdoaWNoIGhvbGRzIGEgVGVtcGxhdGUgYW5kIHRoZSB2YWx1ZXMgZnJvbVxuICogaW50ZXJwb2xhdGVkIGV4cHJlc3Npb25zLlxuICovXG5leHBvcnQgY2xhc3MgVGVtcGxhdGVSZXN1bHQge1xuICByZWFkb25seSBzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheTtcbiAgcmVhZG9ubHkgdmFsdWVzOiByZWFkb25seSB1bmtub3duW107XG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZztcbiAgcmVhZG9ubHkgcHJvY2Vzc29yOiBUZW1wbGF0ZVByb2Nlc3NvcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICAgIHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5LCB2YWx1ZXM6IHJlYWRvbmx5IHVua25vd25bXSwgdHlwZTogc3RyaW5nLFxuICAgICAgcHJvY2Vzc29yOiBUZW1wbGF0ZVByb2Nlc3Nvcikge1xuICAgIHRoaXMuc3RyaW5ncyA9IHN0cmluZ3M7XG4gICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXM7XG4gICAgdGhpcy50eXBlID0gdHlwZTtcbiAgICB0aGlzLnByb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIG9mIEhUTUwgdXNlZCB0byBjcmVhdGUgYSBgPHRlbXBsYXRlPmAgZWxlbWVudC5cbiAgICovXG4gIGdldEhUTUwoKTogc3RyaW5nIHtcbiAgICBjb25zdCBsID0gdGhpcy5zdHJpbmdzLmxlbmd0aCAtIDE7XG4gICAgbGV0IGh0bWwgPSAnJztcbiAgICBsZXQgaXNDb21tZW50QmluZGluZyA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIGNvbnN0IHMgPSB0aGlzLnN0cmluZ3NbaV07XG4gICAgICAvLyBGb3IgZWFjaCBiaW5kaW5nIHdlIHdhbnQgdG8gZGV0ZXJtaW5lIHRoZSBraW5kIG9mIG1hcmtlciB0byBpbnNlcnRcbiAgICAgIC8vIGludG8gdGhlIHRlbXBsYXRlIHNvdXJjZSBiZWZvcmUgaXQncyBwYXJzZWQgYnkgdGhlIGJyb3dzZXIncyBIVE1MXG4gICAgICAvLyBwYXJzZXIuIFRoZSBtYXJrZXIgdHlwZSBpcyBiYXNlZCBvbiB3aGV0aGVyIHRoZSBleHByZXNzaW9uIGlzIGluIGFuXG4gICAgICAvLyBhdHRyaWJ1dGUsIHRleHQsIG9yIGNvbW1lbnQgcG9zaXRpb24uXG4gICAgICAvLyAgICogRm9yIG5vZGUtcG9zaXRpb24gYmluZGluZ3Mgd2UgaW5zZXJ0IGEgY29tbWVudCB3aXRoIHRoZSBtYXJrZXJcbiAgICAgIC8vICAgICBzZW50aW5lbCBhcyBpdHMgdGV4dCBjb250ZW50LCBsaWtlIDwhLS17e2xpdC1ndWlkfX0tLT4uXG4gICAgICAvLyAgICogRm9yIGF0dHJpYnV0ZSBiaW5kaW5ncyB3ZSBpbnNlcnQganVzdCB0aGUgbWFya2VyIHNlbnRpbmVsIGZvciB0aGVcbiAgICAgIC8vICAgICBmaXJzdCBiaW5kaW5nLCBzbyB0aGF0IHdlIHN1cHBvcnQgdW5xdW90ZWQgYXR0cmlidXRlIGJpbmRpbmdzLlxuICAgICAgLy8gICAgIFN1YnNlcXVlbnQgYmluZGluZ3MgY2FuIHVzZSBhIGNvbW1lbnQgbWFya2VyIGJlY2F1c2UgbXVsdGktYmluZGluZ1xuICAgICAgLy8gICAgIGF0dHJpYnV0ZXMgbXVzdCBiZSBxdW90ZWQuXG4gICAgICAvLyAgICogRm9yIGNvbW1lbnQgYmluZGluZ3Mgd2UgaW5zZXJ0IGp1c3QgdGhlIG1hcmtlciBzZW50aW5lbCBzbyB3ZSBkb24ndFxuICAgICAgLy8gICAgIGNsb3NlIHRoZSBjb21tZW50LlxuICAgICAgLy9cbiAgICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBzY2FucyB0aGUgdGVtcGxhdGUgc291cmNlLCBidXQgaXMgKm5vdCogYW4gSFRNTFxuICAgICAgLy8gcGFyc2VyLiBXZSBkb24ndCBuZWVkIHRvIHRyYWNrIHRoZSB0cmVlIHN0cnVjdHVyZSBvZiB0aGUgSFRNTCwgb25seVxuICAgICAgLy8gd2hldGhlciBhIGJpbmRpbmcgaXMgaW5zaWRlIGEgY29tbWVudCwgYW5kIGlmIG5vdCwgaWYgaXQgYXBwZWFycyB0byBiZVxuICAgICAgLy8gdGhlIGZpcnN0IGJpbmRpbmcgaW4gYW4gYXR0cmlidXRlLlxuICAgICAgY29uc3QgY29tbWVudE9wZW4gPSBzLmxhc3RJbmRleE9mKCc8IS0tJyk7XG4gICAgICAvLyBXZSdyZSBpbiBjb21tZW50IHBvc2l0aW9uIGlmIHdlIGhhdmUgYSBjb21tZW50IG9wZW4gd2l0aCBubyBmb2xsb3dpbmdcbiAgICAgIC8vIGNvbW1lbnQgY2xvc2UuIEJlY2F1c2UgPC0tIGNhbiBhcHBlYXIgaW4gYW4gYXR0cmlidXRlIHZhbHVlIHRoZXJlIGNhblxuICAgICAgLy8gYmUgZmFsc2UgcG9zaXRpdmVzLlxuICAgICAgaXNDb21tZW50QmluZGluZyA9IChjb21tZW50T3BlbiA+IC0xIHx8IGlzQ29tbWVudEJpbmRpbmcpICYmXG4gICAgICAgICAgcy5pbmRleE9mKCctLT4nLCBjb21tZW50T3BlbiArIDEpID09PSAtMTtcbiAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGFuIGF0dHJpYnV0ZS1saWtlIHNlcXVlbmNlIHByZWNlZGluZyB0aGVcbiAgICAgIC8vIGV4cHJlc3Npb24uIFRoaXMgY2FuIG1hdGNoIFwibmFtZT12YWx1ZVwiIGxpa2Ugc3RydWN0dXJlcyBpbiB0ZXh0LFxuICAgICAgLy8gY29tbWVudHMsIGFuZCBhdHRyaWJ1dGUgdmFsdWVzLCBzbyB0aGVyZSBjYW4gYmUgZmFsc2UtcG9zaXRpdmVzLlxuICAgICAgY29uc3QgYXR0cmlidXRlTWF0Y2ggPSBsYXN0QXR0cmlidXRlTmFtZVJlZ2V4LmV4ZWMocyk7XG4gICAgICBpZiAoYXR0cmlidXRlTWF0Y2ggPT09IG51bGwpIHtcbiAgICAgICAgLy8gV2UncmUgb25seSBpbiB0aGlzIGJyYW5jaCBpZiB3ZSBkb24ndCBoYXZlIGEgYXR0cmlidXRlLWxpa2VcbiAgICAgICAgLy8gcHJlY2VkaW5nIHNlcXVlbmNlLiBGb3IgY29tbWVudHMsIHRoaXMgZ3VhcmRzIGFnYWluc3QgdW51c3VhbFxuICAgICAgICAvLyBhdHRyaWJ1dGUgdmFsdWVzIGxpa2UgPGRpdiBmb289XCI8IS0tJHsnYmFyJ31cIj4uIENhc2VzIGxpa2VcbiAgICAgICAgLy8gPCEtLSBmb289JHsnYmFyJ30tLT4gYXJlIGhhbmRsZWQgY29ycmVjdGx5IGluIHRoZSBhdHRyaWJ1dGUgYnJhbmNoXG4gICAgICAgIC8vIGJlbG93LlxuICAgICAgICBodG1sICs9IHMgKyAoaXNDb21tZW50QmluZGluZyA/IGNvbW1lbnRNYXJrZXIgOiBub2RlTWFya2VyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEZvciBhdHRyaWJ1dGVzIHdlIHVzZSBqdXN0IGEgbWFya2VyIHNlbnRpbmVsLCBhbmQgYWxzbyBhcHBlbmQgYVxuICAgICAgICAvLyAkbGl0JCBzdWZmaXggdG8gdGhlIG5hbWUgdG8gb3B0LW91dCBvZiBhdHRyaWJ1dGUtc3BlY2lmaWMgcGFyc2luZ1xuICAgICAgICAvLyB0aGF0IElFIGFuZCBFZGdlIGRvIGZvciBzdHlsZSBhbmQgY2VydGFpbiBTVkcgYXR0cmlidXRlcy5cbiAgICAgICAgaHRtbCArPSBzLnN1YnN0cigwLCBhdHRyaWJ1dGVNYXRjaC5pbmRleCkgKyBhdHRyaWJ1dGVNYXRjaFsxXSArXG4gICAgICAgICAgICBhdHRyaWJ1dGVNYXRjaFsyXSArIGJvdW5kQXR0cmlidXRlU3VmZml4ICsgYXR0cmlidXRlTWF0Y2hbM10gK1xuICAgICAgICAgICAgbWFya2VyO1xuICAgICAgfVxuICAgIH1cbiAgICBodG1sICs9IHRoaXMuc3RyaW5nc1tsXTtcbiAgICByZXR1cm4gaHRtbDtcbiAgfVxuXG4gIGdldFRlbXBsYXRlRWxlbWVudCgpOiBIVE1MVGVtcGxhdGVFbGVtZW50IHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgbGV0IHZhbHVlID0gdGhpcy5nZXRIVE1MKCk7XG4gICAgaWYgKHBvbGljeSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyB0aGlzIGlzIHNlY3VyZSBiZWNhdXNlIGB0aGlzLnN0cmluZ3NgIGlzIGEgVGVtcGxhdGVTdHJpbmdzQXJyYXkuXG4gICAgICAvLyBUT0RPOiB2YWxpZGF0ZSB0aGlzIHdoZW5cbiAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLWFycmF5LWlzLXRlbXBsYXRlLW9iamVjdCBpc1xuICAgICAgLy8gaW1wbGVtZW50ZWQuXG4gICAgICB2YWx1ZSA9IHBvbGljeS5jcmVhdGVIVE1MKHZhbHVlKSBhcyB1bmtub3duIGFzIHN0cmluZztcbiAgICB9XG4gICAgdGVtcGxhdGUuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9XG59XG5cbi8qKlxuICogQSBUZW1wbGF0ZVJlc3VsdCBmb3IgU1ZHIGZyYWdtZW50cy5cbiAqXG4gKiBUaGlzIGNsYXNzIHdyYXBzIEhUTUwgaW4gYW4gYDxzdmc+YCB0YWcgaW4gb3JkZXIgdG8gcGFyc2UgaXRzIGNvbnRlbnRzIGluIHRoZVxuICogU1ZHIG5hbWVzcGFjZSwgdGhlbiBtb2RpZmllcyB0aGUgdGVtcGxhdGUgdG8gcmVtb3ZlIHRoZSBgPHN2Zz5gIHRhZyBzbyB0aGF0XG4gKiBjbG9uZXMgb25seSBjb250YWluZXIgdGhlIG9yaWdpbmFsIGZyYWdtZW50LlxuICovXG5leHBvcnQgY2xhc3MgU1ZHVGVtcGxhdGVSZXN1bHQgZXh0ZW5kcyBUZW1wbGF0ZVJlc3VsdCB7XG4gIGdldEhUTUwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYDxzdmc+JHtzdXBlci5nZXRIVE1MKCl9PC9zdmc+YDtcbiAgfVxuXG4gIGdldFRlbXBsYXRlRWxlbWVudCgpOiBIVE1MVGVtcGxhdGVFbGVtZW50IHtcbiAgICBjb25zdCB0ZW1wbGF0ZSA9IHN1cGVyLmdldFRlbXBsYXRlRWxlbWVudCgpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0ZW1wbGF0ZS5jb250ZW50O1xuICAgIGNvbnN0IHN2Z0VsZW1lbnQgPSBjb250ZW50LmZpcnN0Q2hpbGQhO1xuICAgIGNvbnRlbnQucmVtb3ZlQ2hpbGQoc3ZnRWxlbWVudCk7XG4gICAgcmVwYXJlbnROb2Rlcyhjb250ZW50LCBzdmdFbGVtZW50LmZpcnN0Q2hpbGQpO1xuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxufVxuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cblxuaW1wb3J0IHtpc0RpcmVjdGl2ZX0gZnJvbSAnLi9kaXJlY3RpdmUuanMnO1xuaW1wb3J0IHtyZW1vdmVOb2Rlc30gZnJvbSAnLi9kb20uanMnO1xuaW1wb3J0IHtub0NoYW5nZSwgbm90aGluZywgUGFydH0gZnJvbSAnLi9wYXJ0LmpzJztcbmltcG9ydCB7UmVuZGVyT3B0aW9uc30gZnJvbSAnLi9yZW5kZXItb3B0aW9ucy5qcyc7XG5pbXBvcnQge1RlbXBsYXRlSW5zdGFuY2V9IGZyb20gJy4vdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuaW1wb3J0IHtUZW1wbGF0ZVJlc3VsdH0gZnJvbSAnLi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuaW1wb3J0IHtjcmVhdGVNYXJrZXJ9IGZyb20gJy4vdGVtcGxhdGUuanMnO1xuXG4vLyBodHRwczovL3RjMzkuZ2l0aHViLmlvL2VjbWEyNjIvI3NlYy10eXBlb2Ytb3BlcmF0b3JcbmV4cG9ydCB0eXBlIFByaW1pdGl2ZSA9IG51bGx8dW5kZWZpbmVkfGJvb2xlYW58bnVtYmVyfHN0cmluZ3xzeW1ib2x8YmlnaW50O1xuZXhwb3J0IGNvbnN0IGlzUHJpbWl0aXZlID0gKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgUHJpbWl0aXZlID0+IHtcbiAgcmV0dXJuIChcbiAgICAgIHZhbHVlID09PSBudWxsIHx8XG4gICAgICAhKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgfHwgdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSk7XG59O1xuZXhwb3J0IGNvbnN0IGlzSXRlcmFibGUgPSAodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBJdGVyYWJsZTx1bmtub3duPiA9PiB7XG4gIHJldHVybiBBcnJheS5pc0FycmF5KHZhbHVlKSB8fFxuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICEhKHZhbHVlICYmICh2YWx1ZSBhcyBhbnkpW1N5bWJvbC5pdGVyYXRvcl0pO1xufTtcblxuLyoqXG4gKiBXcml0ZXMgYXR0cmlidXRlIHZhbHVlcyB0byB0aGUgRE9NIGZvciBhIGdyb3VwIG9mIEF0dHJpYnV0ZVBhcnRzIGJvdW5kIHRvIGFcbiAqIHNpbmdsZSBhdHRyaWJ1dGUuIFRoZSB2YWx1ZSBpcyBvbmx5IHNldCBvbmNlIGV2ZW4gaWYgdGhlcmUgYXJlIG11bHRpcGxlIHBhcnRzXG4gKiBmb3IgYW4gYXR0cmlidXRlLlxuICovXG5leHBvcnQgY2xhc3MgQXR0cmlidXRlQ29tbWl0dGVyIHtcbiAgcmVhZG9ubHkgZWxlbWVudDogRWxlbWVudDtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSBzdHJpbmdzOiBSZWFkb25seUFycmF5PHN0cmluZz47XG4gIHJlYWRvbmx5IHBhcnRzOiBSZWFkb25seUFycmF5PEF0dHJpYnV0ZVBhcnQ+O1xuICBkaXJ0eSA9IHRydWU7XG5cbiAgY29uc3RydWN0b3IoZWxlbWVudDogRWxlbWVudCwgbmFtZTogc3RyaW5nLCBzdHJpbmdzOiBSZWFkb25seUFycmF5PHN0cmluZz4pIHtcbiAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5zdHJpbmdzID0gc3RyaW5ncztcbiAgICB0aGlzLnBhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHJpbmdzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgKHRoaXMucGFydHMgYXMgQXR0cmlidXRlUGFydFtdKVtpXSA9IHRoaXMuX2NyZWF0ZVBhcnQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIHNpbmdsZSBwYXJ0LiBPdmVycmlkZSB0aGlzIHRvIGNyZWF0ZSBhIGRpZmZlcm50IHR5cGUgb2YgcGFydC5cbiAgICovXG4gIHByb3RlY3RlZCBfY3JlYXRlUGFydCgpOiBBdHRyaWJ1dGVQYXJ0IHtcbiAgICByZXR1cm4gbmV3IEF0dHJpYnV0ZVBhcnQodGhpcyk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2dldFZhbHVlKCk6IHVua25vd24ge1xuICAgIGNvbnN0IHN0cmluZ3MgPSB0aGlzLnN0cmluZ3M7XG4gICAgY29uc3QgbCA9IHN0cmluZ3MubGVuZ3RoIC0gMTtcbiAgICBjb25zdCBwYXJ0cyA9IHRoaXMucGFydHM7XG5cbiAgICAvLyBJZiB3ZSdyZSBhc3NpZ25pbmcgYW4gYXR0cmlidXRlIHZpYSBzeW50YXggbGlrZTpcbiAgICAvLyAgICBhdHRyPVwiJHtmb299XCIgIG9yICBhdHRyPSR7Zm9vfVxuICAgIC8vIGJ1dCBub3RcbiAgICAvLyAgICBhdHRyPVwiJHtmb299ICR7YmFyfVwiIG9yIGF0dHI9XCIke2Zvb30gYmF6XCJcbiAgICAvLyB0aGVuIHdlIGRvbid0IHdhbnQgdG8gY29lcmNlIHRoZSBhdHRyaWJ1dGUgdmFsdWUgaW50byBvbmUgbG9uZ1xuICAgIC8vIHN0cmluZy4gSW5zdGVhZCB3ZSB3YW50IHRvIGp1c3QgcmV0dXJuIHRoZSB2YWx1ZSBpdHNlbGYgZGlyZWN0bHksXG4gICAgLy8gc28gdGhhdCBzYW5pdGl6ZURPTVZhbHVlIGNhbiBnZXQgdGhlIGFjdHVhbCB2YWx1ZSByYXRoZXIgdGhhblxuICAgIC8vIFN0cmluZyh2YWx1ZSlcbiAgICAvLyBUaGUgZXhjZXB0aW9uIGlzIGlmIHYgaXMgYW4gYXJyYXksIGluIHdoaWNoIGNhc2Ugd2UgZG8gd2FudCB0byBzbWFzaFxuICAgIC8vIGl0IHRvZ2V0aGVyIGludG8gYSBzdHJpbmcgd2l0aG91dCBjYWxsaW5nIFN0cmluZygpIG9uIHRoZSBhcnJheS5cbiAgICAvL1xuICAgIC8vIFRoaXMgYWxzbyBhbGxvd3MgdHJ1c3RlZCB2YWx1ZXMgKHdoZW4gdXNpbmcgVHJ1c3RlZFR5cGVzKSBiZWluZ1xuICAgIC8vIGFzc2lnbmVkIHRvIERPTSBzaW5rcyB3aXRob3V0IGJlaW5nIHN0cmluZ2lmaWVkIGluIHRoZSBwcm9jZXNzLlxuICAgIGlmIChsID09PSAxICYmIHN0cmluZ3NbMF0gPT09ICcnICYmIHN0cmluZ3NbMV0gPT09ICcnKSB7XG4gICAgICBjb25zdCB2ID0gcGFydHNbMF0udmFsdWU7XG4gICAgICBpZiAodHlwZW9mIHYgPT09ICdzeW1ib2wnKSB7XG4gICAgICAgIHJldHVybiBTdHJpbmcodik7XG4gICAgICB9XG4gICAgICBpZiAodHlwZW9mIHYgPT09ICdzdHJpbmcnIHx8ICFpc0l0ZXJhYmxlKHYpKSB7XG4gICAgICAgIHJldHVybiB2O1xuICAgICAgfVxuICAgIH1cbiAgICBsZXQgdGV4dCA9ICcnO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRleHQgKz0gc3RyaW5nc1tpXTtcbiAgICAgIGNvbnN0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgIGlmIChwYXJ0ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29uc3QgdiA9IHBhcnQudmFsdWU7XG4gICAgICAgIGlmIChpc1ByaW1pdGl2ZSh2KSB8fCAhaXNJdGVyYWJsZSh2KSkge1xuICAgICAgICAgIHRleHQgKz0gdHlwZW9mIHYgPT09ICdzdHJpbmcnID8gdiA6IFN0cmluZyh2KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygdikge1xuICAgICAgICAgICAgdGV4dCArPSB0eXBlb2YgdCA9PT0gJ3N0cmluZycgPyB0IDogU3RyaW5nKHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRleHQgKz0gc3RyaW5nc1tsXTtcbiAgICByZXR1cm4gdGV4dDtcbiAgfVxuXG4gIGNvbW1pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5kaXJ0eSkge1xuICAgICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsIHRoaXMuX2dldFZhbHVlKCkgYXMgc3RyaW5nKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBIFBhcnQgdGhhdCBjb250cm9scyBhbGwgb3IgcGFydCBvZiBhbiBhdHRyaWJ1dGUgdmFsdWUuXG4gKi9cbmV4cG9ydCBjbGFzcyBBdHRyaWJ1dGVQYXJ0IGltcGxlbWVudHMgUGFydCB7XG4gIHJlYWRvbmx5IGNvbW1pdHRlcjogQXR0cmlidXRlQ29tbWl0dGVyO1xuICB2YWx1ZTogdW5rbm93biA9IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3Rvcihjb21taXR0ZXI6IEF0dHJpYnV0ZUNvbW1pdHRlcikge1xuICAgIHRoaXMuY29tbWl0dGVyID0gY29tbWl0dGVyO1xuICB9XG5cbiAgc2V0VmFsdWUodmFsdWU6IHVua25vd24pOiB2b2lkIHtcbiAgICBpZiAodmFsdWUgIT09IG5vQ2hhbmdlICYmICghaXNQcmltaXRpdmUodmFsdWUpIHx8IHZhbHVlICE9PSB0aGlzLnZhbHVlKSkge1xuICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgLy8gSWYgdGhlIHZhbHVlIGlzIGEgbm90IGEgZGlyZWN0aXZlLCBkaXJ0eSB0aGUgY29tbWl0dGVyIHNvIHRoYXQgaXQnbGxcbiAgICAgIC8vIGNhbGwgc2V0QXR0cmlidXRlLiBJZiB0aGUgdmFsdWUgaXMgYSBkaXJlY3RpdmUsIGl0J2xsIGRpcnR5IHRoZVxuICAgICAgLy8gY29tbWl0dGVyIGlmIGl0IGNhbGxzIHNldFZhbHVlKCkuXG4gICAgICBpZiAoIWlzRGlyZWN0aXZlKHZhbHVlKSkge1xuICAgICAgICB0aGlzLmNvbW1pdHRlci5kaXJ0eSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgY29tbWl0KCkge1xuICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLnZhbHVlKSkge1xuICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy52YWx1ZTtcbiAgICAgIHRoaXMudmFsdWUgPSBub0NoYW5nZTtcbiAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICB9XG4gICAgaWYgKHRoaXMudmFsdWUgPT09IG5vQ2hhbmdlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY29tbWl0dGVyLmNvbW1pdCgpO1xuICB9XG59XG5cbi8qKlxuICogQSBQYXJ0IHRoYXQgY29udHJvbHMgYSBsb2NhdGlvbiB3aXRoaW4gYSBOb2RlIHRyZWUuIExpa2UgYSBSYW5nZSwgTm9kZVBhcnRcbiAqIGhhcyBzdGFydCBhbmQgZW5kIGxvY2F0aW9ucyBhbmQgY2FuIHNldCBhbmQgdXBkYXRlIHRoZSBOb2RlcyBiZXR3ZWVuIHRob3NlXG4gKiBsb2NhdGlvbnMuXG4gKlxuICogTm9kZVBhcnRzIHN1cHBvcnQgc2V2ZXJhbCB2YWx1ZSB0eXBlczogcHJpbWl0aXZlcywgTm9kZXMsIFRlbXBsYXRlUmVzdWx0cyxcbiAqIGFzIHdlbGwgYXMgYXJyYXlzIGFuZCBpdGVyYWJsZXMgb2YgdGhvc2UgdHlwZXMuXG4gKi9cbmV4cG9ydCBjbGFzcyBOb2RlUGFydCBpbXBsZW1lbnRzIFBhcnQge1xuICByZWFkb25seSBvcHRpb25zOiBSZW5kZXJPcHRpb25zO1xuICBzdGFydE5vZGUhOiBOb2RlO1xuICBlbmROb2RlITogTm9kZTtcbiAgdmFsdWU6IHVua25vd24gPSB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX19wZW5kaW5nVmFsdWU6IHVua25vd24gPSB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogUmVuZGVyT3B0aW9ucykge1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICAvKipcbiAgICogQXBwZW5kcyB0aGlzIHBhcnQgaW50byBhIGNvbnRhaW5lci5cbiAgICpcbiAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAqL1xuICBhcHBlbmRJbnRvKGNvbnRhaW5lcjogTm9kZSkge1xuICAgIHRoaXMuc3RhcnROb2RlID0gY29udGFpbmVyLmFwcGVuZENoaWxkKGNyZWF0ZU1hcmtlcigpKTtcbiAgICB0aGlzLmVuZE5vZGUgPSBjb250YWluZXIuYXBwZW5kQ2hpbGQoY3JlYXRlTWFya2VyKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluc2VydHMgdGhpcyBwYXJ0IGFmdGVyIHRoZSBgcmVmYCBub2RlIChiZXR3ZWVuIGByZWZgIGFuZCBgcmVmYCdzIG5leHRcbiAgICogc2libGluZykuIEJvdGggYHJlZmAgYW5kIGl0cyBuZXh0IHNpYmxpbmcgbXVzdCBiZSBzdGF0aWMsIHVuY2hhbmdpbmcgbm9kZXNcbiAgICogc3VjaCBhcyB0aG9zZSB0aGF0IGFwcGVhciBpbiBhIGxpdGVyYWwgc2VjdGlvbiBvZiBhIHRlbXBsYXRlLlxuICAgKlxuICAgKiBUaGlzIHBhcnQgbXVzdCBiZSBlbXB0eSwgYXMgaXRzIGNvbnRlbnRzIGFyZSBub3QgYXV0b21hdGljYWxseSBtb3ZlZC5cbiAgICovXG4gIGluc2VydEFmdGVyTm9kZShyZWY6IE5vZGUpIHtcbiAgICB0aGlzLnN0YXJ0Tm9kZSA9IHJlZjtcbiAgICB0aGlzLmVuZE5vZGUgPSByZWYubmV4dFNpYmxpbmchO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZHMgdGhpcyBwYXJ0IGludG8gYSBwYXJlbnQgcGFydC5cbiAgICpcbiAgICogVGhpcyBwYXJ0IG11c3QgYmUgZW1wdHksIGFzIGl0cyBjb250ZW50cyBhcmUgbm90IGF1dG9tYXRpY2FsbHkgbW92ZWQuXG4gICAqL1xuICBhcHBlbmRJbnRvUGFydChwYXJ0OiBOb2RlUGFydCkge1xuICAgIHBhcnQuX19pbnNlcnQodGhpcy5zdGFydE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgcGFydC5fX2luc2VydCh0aGlzLmVuZE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0cyB0aGlzIHBhcnQgYWZ0ZXIgdGhlIGByZWZgIHBhcnQuXG4gICAqXG4gICAqIFRoaXMgcGFydCBtdXN0IGJlIGVtcHR5LCBhcyBpdHMgY29udGVudHMgYXJlIG5vdCBhdXRvbWF0aWNhbGx5IG1vdmVkLlxuICAgKi9cbiAgaW5zZXJ0QWZ0ZXJQYXJ0KHJlZjogTm9kZVBhcnQpIHtcbiAgICByZWYuX19pbnNlcnQodGhpcy5zdGFydE5vZGUgPSBjcmVhdGVNYXJrZXIoKSk7XG4gICAgdGhpcy5lbmROb2RlID0gcmVmLmVuZE5vZGU7XG4gICAgcmVmLmVuZE5vZGUgPSB0aGlzLnN0YXJ0Tm9kZTtcbiAgfVxuXG4gIHNldFZhbHVlKHZhbHVlOiB1bmtub3duKTogdm9pZCB7XG4gICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgY29tbWl0KCkge1xuICAgIGlmICh0aGlzLnN0YXJ0Tm9kZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHdoaWxlIChpc0RpcmVjdGl2ZSh0aGlzLl9fcGVuZGluZ1ZhbHVlKSkge1xuICAgICAgY29uc3QgZGlyZWN0aXZlID0gdGhpcy5fX3BlbmRpbmdWYWx1ZTtcbiAgICAgIHRoaXMuX19wZW5kaW5nVmFsdWUgPSBub0NoYW5nZTtcbiAgICAgIGRpcmVjdGl2ZSh0aGlzKTtcbiAgICB9XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgIGlmICh2YWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGlzUHJpbWl0aXZlKHZhbHVlKSkge1xuICAgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlKSB7XG4gICAgICAgIHRoaXMuX19jb21taXRUZXh0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHZhbHVlIGluc3RhbmNlb2YgVGVtcGxhdGVSZXN1bHQpIHtcbiAgICAgIHRoaXMuX19jb21taXRUZW1wbGF0ZVJlc3VsdCh2YWx1ZSk7XG4gICAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIE5vZGUpIHtcbiAgICAgIHRoaXMuX19jb21taXROb2RlKHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKGlzSXRlcmFibGUodmFsdWUpKSB7XG4gICAgICB0aGlzLl9fY29tbWl0SXRlcmFibGUodmFsdWUpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgPT09IG5vdGhpbmcpIHtcbiAgICAgIHRoaXMudmFsdWUgPSBub3RoaW5nO1xuICAgICAgdGhpcy5jbGVhcigpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGYWxsYmFjaywgd2lsbCByZW5kZXIgdGhlIHN0cmluZyByZXByZXNlbnRhdGlvblxuICAgICAgdGhpcy5fX2NvbW1pdFRleHQodmFsdWUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgX19pbnNlcnQobm9kZTogTm9kZSkge1xuICAgIHRoaXMuZW5kTm9kZS5wYXJlbnROb2RlIS5pbnNlcnRCZWZvcmUobm9kZSwgdGhpcy5lbmROb2RlKTtcbiAgfVxuXG4gIHByaXZhdGUgX19jb21taXROb2RlKHZhbHVlOiBOb2RlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudmFsdWUgPT09IHZhbHVlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuY2xlYXIoKTtcbiAgICB0aGlzLl9faW5zZXJ0KHZhbHVlKTtcbiAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBwcml2YXRlIF9fY29tbWl0VGV4dCh2YWx1ZTogdW5rbm93bik6IHZvaWQge1xuICAgIGNvbnN0IG5vZGUgPSB0aGlzLnN0YXJ0Tm9kZS5uZXh0U2libGluZyE7XG4gICAgdmFsdWUgPSB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZTtcbiAgICAvLyBJZiBgdmFsdWVgIGlzbid0IGFscmVhZHkgYSBzdHJpbmcsIHdlIGV4cGxpY2l0bHkgY29udmVydCBpdCBoZXJlIGluIGNhc2VcbiAgICAvLyBpdCBjYW4ndCBiZSBpbXBsaWNpdGx5IGNvbnZlcnRlZCAtIGkuZS4gaXQncyBhIHN5bWJvbC5cbiAgICBjb25zdCB2YWx1ZUFzU3RyaW5nOiBzdHJpbmcgPVxuICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBTdHJpbmcodmFsdWUpO1xuICAgIGlmIChub2RlID09PSB0aGlzLmVuZE5vZGUucHJldmlvdXNTaWJsaW5nICYmXG4gICAgICAgIG5vZGUubm9kZVR5cGUgPT09IDMgLyogTm9kZS5URVhUX05PREUgKi8pIHtcbiAgICAgIC8vIElmIHdlIG9ubHkgaGF2ZSBhIHNpbmdsZSB0ZXh0IG5vZGUgYmV0d2VlbiB0aGUgbWFya2Vycywgd2UgY2FuIGp1c3RcbiAgICAgIC8vIHNldCBpdHMgdmFsdWUsIHJhdGhlciB0aGFuIHJlcGxhY2luZyBpdC5cbiAgICAgIC8vIFRPRE8oanVzdGluZmFnbmFuaSk6IENhbiB3ZSBqdXN0IGNoZWNrIGlmIHRoaXMudmFsdWUgaXMgcHJpbWl0aXZlP1xuICAgICAgKG5vZGUgYXMgVGV4dCkuZGF0YSA9IHZhbHVlQXNTdHJpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX19jb21taXROb2RlKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHZhbHVlQXNTdHJpbmcpKTtcbiAgICB9XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBfX2NvbW1pdFRlbXBsYXRlUmVzdWx0KHZhbHVlOiBUZW1wbGF0ZVJlc3VsdCk6IHZvaWQge1xuICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5vcHRpb25zLnRlbXBsYXRlRmFjdG9yeSh2YWx1ZSk7XG4gICAgaWYgKHRoaXMudmFsdWUgaW5zdGFuY2VvZiBUZW1wbGF0ZUluc3RhbmNlICYmXG4gICAgICAgIHRoaXMudmFsdWUudGVtcGxhdGUgPT09IHRlbXBsYXRlKSB7XG4gICAgICB0aGlzLnZhbHVlLnVwZGF0ZSh2YWx1ZS52YWx1ZXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNYWtlIHN1cmUgd2UgcHJvcGFnYXRlIHRoZSB0ZW1wbGF0ZSBwcm9jZXNzb3IgZnJvbSB0aGUgVGVtcGxhdGVSZXN1bHRcbiAgICAgIC8vIHNvIHRoYXQgd2UgdXNlIGl0cyBzeW50YXggZXh0ZW5zaW9uLCBldGMuIFRoZSB0ZW1wbGF0ZSBmYWN0b3J5IGNvbWVzXG4gICAgICAvLyBmcm9tIHRoZSByZW5kZXIgZnVuY3Rpb24gb3B0aW9ucyBzbyB0aGF0IGl0IGNhbiBjb250cm9sIHRlbXBsYXRlXG4gICAgICAvLyBjYWNoaW5nIGFuZCBwcmVwcm9jZXNzaW5nLlxuICAgICAgY29uc3QgaW5zdGFuY2UgPVxuICAgICAgICAgIG5ldyBUZW1wbGF0ZUluc3RhbmNlKHRlbXBsYXRlLCB2YWx1ZS5wcm9jZXNzb3IsIHRoaXMub3B0aW9ucyk7XG4gICAgICBjb25zdCBmcmFnbWVudCA9IGluc3RhbmNlLl9jbG9uZSgpO1xuICAgICAgaW5zdGFuY2UudXBkYXRlKHZhbHVlLnZhbHVlcyk7XG4gICAgICB0aGlzLl9fY29tbWl0Tm9kZShmcmFnbWVudCk7XG4gICAgICB0aGlzLnZhbHVlID0gaW5zdGFuY2U7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBfX2NvbW1pdEl0ZXJhYmxlKHZhbHVlOiBJdGVyYWJsZTx1bmtub3duPik6IHZvaWQge1xuICAgIC8vIEZvciBhbiBJdGVyYWJsZSwgd2UgY3JlYXRlIGEgbmV3IEluc3RhbmNlUGFydCBwZXIgaXRlbSwgdGhlbiBzZXQgaXRzXG4gICAgLy8gdmFsdWUgdG8gdGhlIGl0ZW0uIFRoaXMgaXMgYSBsaXR0bGUgYml0IG9mIG92ZXJoZWFkIGZvciBldmVyeSBpdGVtIGluXG4gICAgLy8gYW4gSXRlcmFibGUsIGJ1dCBpdCBsZXRzIHVzIHJlY3Vyc2UgZWFzaWx5IGFuZCBlZmZpY2llbnRseSB1cGRhdGUgQXJyYXlzXG4gICAgLy8gb2YgVGVtcGxhdGVSZXN1bHRzIHRoYXQgd2lsbCBiZSBjb21tb25seSByZXR1cm5lZCBmcm9tIGV4cHJlc3Npb25zIGxpa2U6XG4gICAgLy8gYXJyYXkubWFwKChpKSA9PiBodG1sYCR7aX1gKSwgYnkgcmV1c2luZyBleGlzdGluZyBUZW1wbGF0ZUluc3RhbmNlcy5cblxuICAgIC8vIElmIF92YWx1ZSBpcyBhbiBhcnJheSwgdGhlbiB0aGUgcHJldmlvdXMgcmVuZGVyIHdhcyBvZiBhblxuICAgIC8vIGl0ZXJhYmxlIGFuZCBfdmFsdWUgd2lsbCBjb250YWluIHRoZSBOb2RlUGFydHMgZnJvbSB0aGUgcHJldmlvdXNcbiAgICAvLyByZW5kZXIuIElmIF92YWx1ZSBpcyBub3QgYW4gYXJyYXksIGNsZWFyIHRoaXMgcGFydCBhbmQgbWFrZSBhIG5ld1xuICAgIC8vIGFycmF5IGZvciBOb2RlUGFydHMuXG4gICAgaWYgKCFBcnJheS5pc0FycmF5KHRoaXMudmFsdWUpKSB7XG4gICAgICB0aGlzLnZhbHVlID0gW107XG4gICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfVxuXG4gICAgLy8gTGV0cyB1cyBrZWVwIHRyYWNrIG9mIGhvdyBtYW55IGl0ZW1zIHdlIHN0YW1wZWQgc28gd2UgY2FuIGNsZWFyIGxlZnRvdmVyXG4gICAgLy8gaXRlbXMgZnJvbSBhIHByZXZpb3VzIHJlbmRlclxuICAgIGNvbnN0IGl0ZW1QYXJ0cyA9IHRoaXMudmFsdWUgYXMgTm9kZVBhcnRbXTtcbiAgICBsZXQgcGFydEluZGV4ID0gMDtcbiAgICBsZXQgaXRlbVBhcnQ6IE5vZGVQYXJ0fHVuZGVmaW5lZDtcblxuICAgIGZvciAoY29uc3QgaXRlbSBvZiB2YWx1ZSkge1xuICAgICAgLy8gVHJ5IHRvIHJldXNlIGFuIGV4aXN0aW5nIHBhcnRcbiAgICAgIGl0ZW1QYXJ0ID0gaXRlbVBhcnRzW3BhcnRJbmRleF07XG5cbiAgICAgIC8vIElmIG5vIGV4aXN0aW5nIHBhcnQsIGNyZWF0ZSBhIG5ldyBvbmVcbiAgICAgIGlmIChpdGVtUGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGl0ZW1QYXJ0ID0gbmV3IE5vZGVQYXJ0KHRoaXMub3B0aW9ucyk7XG4gICAgICAgIGl0ZW1QYXJ0cy5wdXNoKGl0ZW1QYXJ0KTtcbiAgICAgICAgaWYgKHBhcnRJbmRleCA9PT0gMCkge1xuICAgICAgICAgIGl0ZW1QYXJ0LmFwcGVuZEludG9QYXJ0KHRoaXMpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGl0ZW1QYXJ0Lmluc2VydEFmdGVyUGFydChpdGVtUGFydHNbcGFydEluZGV4IC0gMV0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpdGVtUGFydC5zZXRWYWx1ZShpdGVtKTtcbiAgICAgIGl0ZW1QYXJ0LmNvbW1pdCgpO1xuICAgICAgcGFydEluZGV4Kys7XG4gICAgfVxuXG4gICAgaWYgKHBhcnRJbmRleCA8IGl0ZW1QYXJ0cy5sZW5ndGgpIHtcbiAgICAgIC8vIFRydW5jYXRlIHRoZSBwYXJ0cyBhcnJheSBzbyBfdmFsdWUgcmVmbGVjdHMgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgIGl0ZW1QYXJ0cy5sZW5ndGggPSBwYXJ0SW5kZXg7XG4gICAgICB0aGlzLmNsZWFyKGl0ZW1QYXJ0ICYmIGl0ZW1QYXJ0LmVuZE5vZGUpO1xuICAgIH1cbiAgfVxuXG4gIGNsZWFyKHN0YXJ0Tm9kZTogTm9kZSA9IHRoaXMuc3RhcnROb2RlKSB7XG4gICAgcmVtb3ZlTm9kZXMoXG4gICAgICAgIHRoaXMuc3RhcnROb2RlLnBhcmVudE5vZGUhLCBzdGFydE5vZGUubmV4dFNpYmxpbmchLCB0aGlzLmVuZE5vZGUpO1xuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyBhIGJvb2xlYW4gYXR0cmlidXRlLCByb3VnaGx5IGFzIGRlZmluZWQgaW4gdGhlIEhUTUxcbiAqIHNwZWNpZmljYXRpb24uXG4gKlxuICogSWYgdGhlIHZhbHVlIGlzIHRydXRoeSwgdGhlbiB0aGUgYXR0cmlidXRlIGlzIHByZXNlbnQgd2l0aCBhIHZhbHVlIG9mXG4gKiAnJy4gSWYgdGhlIHZhbHVlIGlzIGZhbHNleSwgdGhlIGF0dHJpYnV0ZSBpcyByZW1vdmVkLlxuICovXG5leHBvcnQgY2xhc3MgQm9vbGVhbkF0dHJpYnV0ZVBhcnQgaW1wbGVtZW50cyBQYXJ0IHtcbiAgcmVhZG9ubHkgZWxlbWVudDogRWxlbWVudDtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSBzdHJpbmdzOiByZWFkb25seSBzdHJpbmdbXTtcbiAgdmFsdWU6IHVua25vd24gPSB1bmRlZmluZWQ7XG4gIHByaXZhdGUgX19wZW5kaW5nVmFsdWU6IHVua25vd24gPSB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoZWxlbWVudDogRWxlbWVudCwgbmFtZTogc3RyaW5nLCBzdHJpbmdzOiByZWFkb25seSBzdHJpbmdbXSkge1xuICAgIGlmIChzdHJpbmdzLmxlbmd0aCAhPT0gMiB8fCBzdHJpbmdzWzBdICE9PSAnJyB8fCBzdHJpbmdzWzFdICE9PSAnJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICdCb29sZWFuIGF0dHJpYnV0ZXMgY2FuIG9ubHkgY29udGFpbiBhIHNpbmdsZSBleHByZXNzaW9uJyk7XG4gICAgfVxuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLnN0cmluZ3MgPSBzdHJpbmdzO1xuICB9XG5cbiAgc2V0VmFsdWUodmFsdWU6IHVua25vd24pOiB2b2lkIHtcbiAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBjb21taXQoKSB7XG4gICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMuX19wZW5kaW5nVmFsdWUpKSB7XG4gICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fX3BlbmRpbmdWYWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdmFsdWUgPSAhIXRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgaWYgKHRoaXMudmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgdGhpcy5lbGVtZW50LnNldEF0dHJpYnV0ZSh0aGlzLm5hbWUsICcnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUodGhpcy5uYW1lKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICB9XG4gICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlO1xuICB9XG59XG5cbi8qKlxuICogU2V0cyBhdHRyaWJ1dGUgdmFsdWVzIGZvciBQcm9wZXJ0eVBhcnRzLCBzbyB0aGF0IHRoZSB2YWx1ZSBpcyBvbmx5IHNldCBvbmNlXG4gKiBldmVuIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSBwYXJ0cyBmb3IgYSBwcm9wZXJ0eS5cbiAqXG4gKiBJZiBhbiBleHByZXNzaW9uIGNvbnRyb2xzIHRoZSB3aG9sZSBwcm9wZXJ0eSB2YWx1ZSwgdGhlbiB0aGUgdmFsdWUgaXMgc2ltcGx5XG4gKiBhc3NpZ25lZCB0byB0aGUgcHJvcGVydHkgdW5kZXIgY29udHJvbC4gSWYgdGhlcmUgYXJlIHN0cmluZyBsaXRlcmFscyBvclxuICogbXVsdGlwbGUgZXhwcmVzc2lvbnMsIHRoZW4gdGhlIHN0cmluZ3MgYXJlIGV4cHJlc3Npb25zIGFyZSBpbnRlcnBvbGF0ZWQgaW50b1xuICogYSBzdHJpbmcgZmlyc3QuXG4gKi9cbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eUNvbW1pdHRlciBleHRlbmRzIEF0dHJpYnV0ZUNvbW1pdHRlciB7XG4gIHJlYWRvbmx5IHNpbmdsZTogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvcihlbGVtZW50OiBFbGVtZW50LCBuYW1lOiBzdHJpbmcsIHN0cmluZ3M6IFJlYWRvbmx5QXJyYXk8c3RyaW5nPikge1xuICAgIHN1cGVyKGVsZW1lbnQsIG5hbWUsIHN0cmluZ3MpO1xuICAgIHRoaXMuc2luZ2xlID1cbiAgICAgICAgKHN0cmluZ3MubGVuZ3RoID09PSAyICYmIHN0cmluZ3NbMF0gPT09ICcnICYmIHN0cmluZ3NbMV0gPT09ICcnKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfY3JlYXRlUGFydCgpOiBQcm9wZXJ0eVBhcnQge1xuICAgIHJldHVybiBuZXcgUHJvcGVydHlQYXJ0KHRoaXMpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9nZXRWYWx1ZSgpIHtcbiAgICBpZiAodGhpcy5zaW5nbGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcnRzWzBdLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gc3VwZXIuX2dldFZhbHVlKCk7XG4gIH1cblxuICBjb21taXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuZGlydHkpIHtcbiAgICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAodGhpcy5lbGVtZW50IGFzIGFueSlbdGhpcy5uYW1lXSA9IHRoaXMuX2dldFZhbHVlKCk7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBQcm9wZXJ0eVBhcnQgZXh0ZW5kcyBBdHRyaWJ1dGVQYXJ0IHt9XG5cbi8vIERldGVjdCBldmVudCBsaXN0ZW5lciBvcHRpb25zIHN1cHBvcnQuIElmIHRoZSBgY2FwdHVyZWAgcHJvcGVydHkgaXMgcmVhZFxuLy8gZnJvbSB0aGUgb3B0aW9ucyBvYmplY3QsIHRoZW4gb3B0aW9ucyBhcmUgc3VwcG9ydGVkLiBJZiBub3QsIHRoZW4gdGhlIHRoaXJkXG4vLyBhcmd1bWVudCB0byBhZGQvcmVtb3ZlRXZlbnRMaXN0ZW5lciBpcyBpbnRlcnByZXRlZCBhcyB0aGUgYm9vbGVhbiBjYXB0dXJlXG4vLyB2YWx1ZSBzbyB3ZSBzaG91bGQgb25seSBwYXNzIHRoZSBgY2FwdHVyZWAgcHJvcGVydHkuXG5sZXQgZXZlbnRPcHRpb25zU3VwcG9ydGVkID0gZmFsc2U7XG5cbi8vIFdyYXAgaW50byBhbiBJSUZFIGJlY2F1c2UgTVMgRWRnZSA8PSB2NDEgZG9lcyBub3Qgc3VwcG9ydCBoYXZpbmcgdHJ5L2NhdGNoXG4vLyBibG9ja3MgcmlnaHQgaW50byB0aGUgYm9keSBvZiBhIG1vZHVsZVxuKCgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgZ2V0IGNhcHR1cmUoKSB7XG4gICAgICAgIGV2ZW50T3B0aW9uc1N1cHBvcnRlZCA9IHRydWU7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBvcHRpb25zIGFzIGFueSwgb3B0aW9ucyk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdCcsIG9wdGlvbnMgYXMgYW55LCBvcHRpb25zKTtcbiAgfSBjYXRjaCAoX2UpIHtcbiAgICAvLyBldmVudCBvcHRpb25zIG5vdCBzdXBwb3J0ZWRcbiAgfVxufSkoKTtcblxudHlwZSBFdmVudEhhbmRsZXJXaXRoT3B0aW9ucyA9XG4gICAgRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCZQYXJ0aWFsPEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zPjtcbmV4cG9ydCBjbGFzcyBFdmVudFBhcnQgaW1wbGVtZW50cyBQYXJ0IHtcbiAgcmVhZG9ubHkgZWxlbWVudDogRWxlbWVudDtcbiAgcmVhZG9ubHkgZXZlbnROYW1lOiBzdHJpbmc7XG4gIHJlYWRvbmx5IGV2ZW50Q29udGV4dD86IEV2ZW50VGFyZ2V0O1xuICB2YWx1ZTogdW5kZWZpbmVkfEV2ZW50SGFuZGxlcldpdGhPcHRpb25zID0gdW5kZWZpbmVkO1xuICBwcml2YXRlIF9fb3B0aW9ucz86IEFkZEV2ZW50TGlzdGVuZXJPcHRpb25zO1xuICBwcml2YXRlIF9fcGVuZGluZ1ZhbHVlOiB1bmRlZmluZWR8RXZlbnRIYW5kbGVyV2l0aE9wdGlvbnMgPSB1bmRlZmluZWQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgX19ib3VuZEhhbmRsZUV2ZW50OiAoZXZlbnQ6IEV2ZW50KSA9PiB2b2lkO1xuXG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQ6IEVsZW1lbnQsIGV2ZW50TmFtZTogc3RyaW5nLCBldmVudENvbnRleHQ/OiBFdmVudFRhcmdldCkge1xuICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gICAgdGhpcy5ldmVudE5hbWUgPSBldmVudE5hbWU7XG4gICAgdGhpcy5ldmVudENvbnRleHQgPSBldmVudENvbnRleHQ7XG4gICAgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQgPSAoZSkgPT4gdGhpcy5oYW5kbGVFdmVudChlKTtcbiAgfVxuXG4gIHNldFZhbHVlKHZhbHVlOiB1bmRlZmluZWR8RXZlbnRIYW5kbGVyV2l0aE9wdGlvbnMpOiB2b2lkIHtcbiAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBjb21taXQoKSB7XG4gICAgd2hpbGUgKGlzRGlyZWN0aXZlKHRoaXMuX19wZW5kaW5nVmFsdWUpKSB7XG4gICAgICBjb25zdCBkaXJlY3RpdmUgPSB0aGlzLl9fcGVuZGluZ1ZhbHVlO1xuICAgICAgdGhpcy5fX3BlbmRpbmdWYWx1ZSA9IG5vQ2hhbmdlIGFzIEV2ZW50SGFuZGxlcldpdGhPcHRpb25zO1xuICAgICAgZGlyZWN0aXZlKHRoaXMpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fX3BlbmRpbmdWYWx1ZSA9PT0gbm9DaGFuZ2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBuZXdMaXN0ZW5lciA9IHRoaXMuX19wZW5kaW5nVmFsdWU7XG4gICAgY29uc3Qgb2xkTGlzdGVuZXIgPSB0aGlzLnZhbHVlO1xuICAgIGNvbnN0IHNob3VsZFJlbW92ZUxpc3RlbmVyID0gbmV3TGlzdGVuZXIgPT0gbnVsbCB8fFxuICAgICAgICBvbGRMaXN0ZW5lciAhPSBudWxsICYmXG4gICAgICAgICAgICAobmV3TGlzdGVuZXIuY2FwdHVyZSAhPT0gb2xkTGlzdGVuZXIuY2FwdHVyZSB8fFxuICAgICAgICAgICAgIG5ld0xpc3RlbmVyLm9uY2UgIT09IG9sZExpc3RlbmVyLm9uY2UgfHxcbiAgICAgICAgICAgICBuZXdMaXN0ZW5lci5wYXNzaXZlICE9PSBvbGRMaXN0ZW5lci5wYXNzaXZlKTtcbiAgICBjb25zdCBzaG91bGRBZGRMaXN0ZW5lciA9XG4gICAgICAgIG5ld0xpc3RlbmVyICE9IG51bGwgJiYgKG9sZExpc3RlbmVyID09IG51bGwgfHwgc2hvdWxkUmVtb3ZlTGlzdGVuZXIpO1xuXG4gICAgaWYgKHNob3VsZFJlbW92ZUxpc3RlbmVyKSB7XG4gICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcbiAgICAgICAgICB0aGlzLmV2ZW50TmFtZSwgdGhpcy5fX2JvdW5kSGFuZGxlRXZlbnQsIHRoaXMuX19vcHRpb25zKTtcbiAgICB9XG4gICAgaWYgKHNob3VsZEFkZExpc3RlbmVyKSB7XG4gICAgICB0aGlzLl9fb3B0aW9ucyA9IGdldE9wdGlvbnMobmV3TGlzdGVuZXIpO1xuICAgICAgdGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXG4gICAgICAgICAgdGhpcy5ldmVudE5hbWUsIHRoaXMuX19ib3VuZEhhbmRsZUV2ZW50LCB0aGlzLl9fb3B0aW9ucyk7XG4gICAgfVxuICAgIHRoaXMudmFsdWUgPSBuZXdMaXN0ZW5lcjtcbiAgICB0aGlzLl9fcGVuZGluZ1ZhbHVlID0gbm9DaGFuZ2UgYXMgRXZlbnRIYW5kbGVyV2l0aE9wdGlvbnM7XG4gIH1cblxuICBoYW5kbGVFdmVudChldmVudDogRXZlbnQpIHtcbiAgICBpZiAodHlwZW9mIHRoaXMudmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRoaXMudmFsdWUuY2FsbCh0aGlzLmV2ZW50Q29udGV4dCB8fCB0aGlzLmVsZW1lbnQsIGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgKHRoaXMudmFsdWUgYXMgRXZlbnRMaXN0ZW5lck9iamVjdCkuaGFuZGxlRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBXZSBjb3B5IG9wdGlvbnMgYmVjYXVzZSBvZiB0aGUgaW5jb25zaXN0ZW50IGJlaGF2aW9yIG9mIGJyb3dzZXJzIHdoZW4gcmVhZGluZ1xuLy8gdGhlIHRoaXJkIGFyZ3VtZW50IG9mIGFkZC9yZW1vdmVFdmVudExpc3RlbmVyLiBJRTExIGRvZXNuJ3Qgc3VwcG9ydCBvcHRpb25zXG4vLyBhdCBhbGwuIENocm9tZSA0MSBvbmx5IHJlYWRzIGBjYXB0dXJlYCBpZiB0aGUgYXJndW1lbnQgaXMgYW4gb2JqZWN0LlxuY29uc3QgZ2V0T3B0aW9ucyA9IChvOiBBZGRFdmVudExpc3RlbmVyT3B0aW9uc3x1bmRlZmluZWQpID0+IG8gJiZcbiAgICAoZXZlbnRPcHRpb25zU3VwcG9ydGVkID9cbiAgICAgICAgIHtjYXB0dXJlOiBvLmNhcHR1cmUsIHBhc3NpdmU6IG8ucGFzc2l2ZSwgb25jZTogby5vbmNlfSA6XG4gICAgICAgICBvLmNhcHR1cmUgYXMgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpO1xuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cblxuaW1wb3J0IHtQYXJ0fSBmcm9tICcuL3BhcnQuanMnO1xuaW1wb3J0IHtBdHRyaWJ1dGVDb21taXR0ZXIsIEJvb2xlYW5BdHRyaWJ1dGVQYXJ0LCBFdmVudFBhcnQsIE5vZGVQYXJ0LCBQcm9wZXJ0eUNvbW1pdHRlcn0gZnJvbSAnLi9wYXJ0cy5qcyc7XG5pbXBvcnQge1JlbmRlck9wdGlvbnN9IGZyb20gJy4vcmVuZGVyLW9wdGlvbnMuanMnO1xuaW1wb3J0IHtUZW1wbGF0ZVByb2Nlc3Nvcn0gZnJvbSAnLi90ZW1wbGF0ZS1wcm9jZXNzb3IuanMnO1xuXG4vKipcbiAqIENyZWF0ZXMgUGFydHMgd2hlbiBhIHRlbXBsYXRlIGlzIGluc3RhbnRpYXRlZC5cbiAqL1xuZXhwb3J0IGNsYXNzIERlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciBpbXBsZW1lbnRzIFRlbXBsYXRlUHJvY2Vzc29yIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBwYXJ0cyBmb3IgYW4gYXR0cmlidXRlLXBvc2l0aW9uIGJpbmRpbmcsIGdpdmVuIHRoZSBldmVudCwgYXR0cmlidXRlXG4gICAqIG5hbWUsIGFuZCBzdHJpbmcgbGl0ZXJhbHMuXG4gICAqXG4gICAqIEBwYXJhbSBlbGVtZW50IFRoZSBlbGVtZW50IGNvbnRhaW5pbmcgdGhlIGJpbmRpbmdcbiAgICogQHBhcmFtIG5hbWUgIFRoZSBhdHRyaWJ1dGUgbmFtZVxuICAgKiBAcGFyYW0gc3RyaW5ncyBUaGUgc3RyaW5nIGxpdGVyYWxzLiBUaGVyZSBhcmUgYWx3YXlzIGF0IGxlYXN0IHR3byBzdHJpbmdzLFxuICAgKiAgIGV2ZW50IGZvciBmdWxseS1jb250cm9sbGVkIGJpbmRpbmdzIHdpdGggYSBzaW5nbGUgZXhwcmVzc2lvbi5cbiAgICovXG4gIGhhbmRsZUF0dHJpYnV0ZUV4cHJlc3Npb25zKFxuICAgICAgZWxlbWVudDogRWxlbWVudCwgbmFtZTogc3RyaW5nLCBzdHJpbmdzOiBzdHJpbmdbXSxcbiAgICAgIG9wdGlvbnM6IFJlbmRlck9wdGlvbnMpOiBSZWFkb25seUFycmF5PFBhcnQ+IHtcbiAgICBjb25zdCBwcmVmaXggPSBuYW1lWzBdO1xuICAgIGlmIChwcmVmaXggPT09ICcuJykge1xuICAgICAgY29uc3QgY29tbWl0dGVyID0gbmV3IFByb3BlcnR5Q29tbWl0dGVyKGVsZW1lbnQsIG5hbWUuc2xpY2UoMSksIHN0cmluZ3MpO1xuICAgICAgcmV0dXJuIGNvbW1pdHRlci5wYXJ0cztcbiAgICB9XG4gICAgaWYgKHByZWZpeCA9PT0gJ0AnKSB7XG4gICAgICByZXR1cm4gW25ldyBFdmVudFBhcnQoZWxlbWVudCwgbmFtZS5zbGljZSgxKSwgb3B0aW9ucy5ldmVudENvbnRleHQpXTtcbiAgICB9XG4gICAgaWYgKHByZWZpeCA9PT0gJz8nKSB7XG4gICAgICByZXR1cm4gW25ldyBCb29sZWFuQXR0cmlidXRlUGFydChlbGVtZW50LCBuYW1lLnNsaWNlKDEpLCBzdHJpbmdzKV07XG4gICAgfVxuICAgIGNvbnN0IGNvbW1pdHRlciA9IG5ldyBBdHRyaWJ1dGVDb21taXR0ZXIoZWxlbWVudCwgbmFtZSwgc3RyaW5ncyk7XG4gICAgcmV0dXJuIGNvbW1pdHRlci5wYXJ0cztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlIHBhcnRzIGZvciBhIHRleHQtcG9zaXRpb24gYmluZGluZy5cbiAgICogQHBhcmFtIHRlbXBsYXRlRmFjdG9yeVxuICAgKi9cbiAgaGFuZGxlVGV4dEV4cHJlc3Npb24ob3B0aW9uczogUmVuZGVyT3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgTm9kZVBhcnQob3B0aW9ucyk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciA9IG5ldyBEZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3IoKTtcbiIsICIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5cbmltcG9ydCB7VGVtcGxhdGVSZXN1bHR9IGZyb20gJy4vdGVtcGxhdGUtcmVzdWx0LmpzJztcbmltcG9ydCB7bWFya2VyLCBUZW1wbGF0ZX0gZnJvbSAnLi90ZW1wbGF0ZS5qcyc7XG5cbi8qKlxuICogQSBmdW5jdGlvbiB0eXBlIHRoYXQgY3JlYXRlcyBhIFRlbXBsYXRlIGZyb20gYSBUZW1wbGF0ZVJlc3VsdC5cbiAqXG4gKiBUaGlzIGlzIGEgaG9vayBpbnRvIHRoZSB0ZW1wbGF0ZS1jcmVhdGlvbiBwcm9jZXNzIGZvciByZW5kZXJpbmcgdGhhdFxuICogcmVxdWlyZXMgc29tZSBtb2RpZmljYXRpb24gb2YgdGVtcGxhdGVzIGJlZm9yZSB0aGV5J3JlIHVzZWQsIGxpa2UgU2hhZHlDU1MsXG4gKiB3aGljaCBtdXN0IGFkZCBjbGFzc2VzIHRvIGVsZW1lbnRzIGFuZCByZW1vdmUgc3R5bGVzLlxuICpcbiAqIFRlbXBsYXRlcyBzaG91bGQgYmUgY2FjaGVkIGFzIGFnZ3Jlc3NpdmVseSBhcyBwb3NzaWJsZSwgc28gdGhhdCBtYW55XG4gKiBUZW1wbGF0ZVJlc3VsdHMgcHJvZHVjZWQgZnJvbSB0aGUgc2FtZSBleHByZXNzaW9uIG9ubHkgZG8gdGhlIHdvcmsgb2ZcbiAqIGNyZWF0aW5nIHRoZSBUZW1wbGF0ZSB0aGUgZmlyc3QgdGltZS5cbiAqXG4gKiBUZW1wbGF0ZXMgYXJlIHVzdWFsbHkgY2FjaGVkIGJ5IFRlbXBsYXRlUmVzdWx0LnN0cmluZ3MgYW5kXG4gKiBUZW1wbGF0ZVJlc3VsdC50eXBlLCBidXQgbWF5IGJlIGNhY2hlZCBieSBvdGhlciBrZXlzIGlmIHRoaXMgZnVuY3Rpb25cbiAqIG1vZGlmaWVzIHRoZSB0ZW1wbGF0ZS5cbiAqXG4gKiBOb3RlIHRoYXQgY3VycmVudGx5IFRlbXBsYXRlRmFjdG9yaWVzIG11c3Qgbm90IGFkZCwgcmVtb3ZlLCBvciByZW9yZGVyXG4gKiBleHByZXNzaW9ucywgYmVjYXVzZSB0aGVyZSBpcyBubyB3YXkgdG8gZGVzY3JpYmUgc3VjaCBhIG1vZGlmaWNhdGlvblxuICogdG8gcmVuZGVyKCkgc28gdGhhdCB2YWx1ZXMgYXJlIGludGVycG9sYXRlZCB0byB0aGUgY29ycmVjdCBwbGFjZSBpbiB0aGVcbiAqIHRlbXBsYXRlIGluc3RhbmNlcy5cbiAqL1xuZXhwb3J0IHR5cGUgVGVtcGxhdGVGYWN0b3J5ID0gKHJlc3VsdDogVGVtcGxhdGVSZXN1bHQpID0+IFRlbXBsYXRlO1xuXG4vKipcbiAqIFRoZSBkZWZhdWx0IFRlbXBsYXRlRmFjdG9yeSB3aGljaCBjYWNoZXMgVGVtcGxhdGVzIGtleWVkIG9uXG4gKiByZXN1bHQudHlwZSBhbmQgcmVzdWx0LnN0cmluZ3MuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUZhY3RvcnkocmVzdWx0OiBUZW1wbGF0ZVJlc3VsdCkge1xuICBsZXQgdGVtcGxhdGVDYWNoZSA9IHRlbXBsYXRlQ2FjaGVzLmdldChyZXN1bHQudHlwZSk7XG4gIGlmICh0ZW1wbGF0ZUNhY2hlID09PSB1bmRlZmluZWQpIHtcbiAgICB0ZW1wbGF0ZUNhY2hlID0ge1xuICAgICAgc3RyaW5nc0FycmF5OiBuZXcgV2Vha01hcDxUZW1wbGF0ZVN0cmluZ3NBcnJheSwgVGVtcGxhdGU+KCksXG4gICAgICBrZXlTdHJpbmc6IG5ldyBNYXA8c3RyaW5nLCBUZW1wbGF0ZT4oKVxuICAgIH07XG4gICAgdGVtcGxhdGVDYWNoZXMuc2V0KHJlc3VsdC50eXBlLCB0ZW1wbGF0ZUNhY2hlKTtcbiAgfVxuXG4gIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUuc3RyaW5nc0FycmF5LmdldChyZXN1bHQuc3RyaW5ncyk7XG4gIGlmICh0ZW1wbGF0ZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlO1xuICB9XG5cbiAgLy8gSWYgdGhlIFRlbXBsYXRlU3RyaW5nc0FycmF5IGlzIG5ldywgZ2VuZXJhdGUgYSBrZXkgZnJvbSB0aGUgc3RyaW5nc1xuICAvLyBUaGlzIGtleSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgdGVtcGxhdGVzIHdpdGggaWRlbnRpY2FsIGNvbnRlbnRcbiAgY29uc3Qga2V5ID0gcmVzdWx0LnN0cmluZ3Muam9pbihtYXJrZXIpO1xuXG4gIC8vIENoZWNrIGlmIHdlIGFscmVhZHkgaGF2ZSBhIFRlbXBsYXRlIGZvciB0aGlzIGtleVxuICB0ZW1wbGF0ZSA9IHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLmdldChrZXkpO1xuICBpZiAodGVtcGxhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgIC8vIElmIHdlIGhhdmUgbm90IHNlZW4gdGhpcyBrZXkgYmVmb3JlLCBjcmVhdGUgYSBuZXcgVGVtcGxhdGVcbiAgICB0ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZShyZXN1bHQsIHJlc3VsdC5nZXRUZW1wbGF0ZUVsZW1lbnQoKSk7XG4gICAgLy8gQ2FjaGUgdGhlIFRlbXBsYXRlIGZvciB0aGlzIGtleVxuICAgIHRlbXBsYXRlQ2FjaGUua2V5U3RyaW5nLnNldChrZXksIHRlbXBsYXRlKTtcbiAgfVxuXG4gIC8vIENhY2hlIGFsbCBmdXR1cmUgcXVlcmllcyBmb3IgdGhpcyBUZW1wbGF0ZVN0cmluZ3NBcnJheVxuICB0ZW1wbGF0ZUNhY2hlLnN0cmluZ3NBcnJheS5zZXQocmVzdWx0LnN0cmluZ3MsIHRlbXBsYXRlKTtcbiAgcmV0dXJuIHRlbXBsYXRlO1xufVxuXG4vKipcbiAqIFRoZSBmaXJzdCBhcmd1bWVudCB0byBKUyB0ZW1wbGF0ZSB0YWdzIHJldGFpbiBpZGVudGl0eSBhY3Jvc3MgbXVsdGlwbGVcbiAqIGNhbGxzIHRvIGEgdGFnIGZvciB0aGUgc2FtZSBsaXRlcmFsLCBzbyB3ZSBjYW4gY2FjaGUgd29yayBkb25lIHBlciBsaXRlcmFsXG4gKiBpbiBhIE1hcC5cbiAqXG4gKiBTYWZhcmkgY3VycmVudGx5IGhhcyBhIGJ1ZyB3aGljaCBvY2Nhc2lvbmFsbHkgYnJlYWtzIHRoaXMgYmVoYXZpb3IsIHNvIHdlXG4gKiBuZWVkIHRvIGNhY2hlIHRoZSBUZW1wbGF0ZSBhdCB0d28gbGV2ZWxzLiBXZSBmaXJzdCBjYWNoZSB0aGVcbiAqIFRlbXBsYXRlU3RyaW5nc0FycmF5LCBhbmQgaWYgdGhhdCBmYWlscywgd2UgY2FjaGUgYSBrZXkgY29uc3RydWN0ZWQgYnlcbiAqIGpvaW5pbmcgdGhlIHN0cmluZ3MgYXJyYXkuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVGVtcGxhdGVDYWNoZSB7XG4gIHJlYWRvbmx5IHN0cmluZ3NBcnJheTogV2Vha01hcDxUZW1wbGF0ZVN0cmluZ3NBcnJheSwgVGVtcGxhdGU+O1xuICByZWFkb25seSBrZXlTdHJpbmc6IE1hcDxzdHJpbmcsIFRlbXBsYXRlPjtcbn1cblxuZXhwb3J0IGNvbnN0IHRlbXBsYXRlQ2FjaGVzID0gbmV3IE1hcDxzdHJpbmcsIFRlbXBsYXRlQ2FjaGU+KCk7XG4iLCAiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuXG5pbXBvcnQge3JlbW92ZU5vZGVzfSBmcm9tICcuL2RvbS5qcyc7XG5pbXBvcnQge05vZGVQYXJ0fSBmcm9tICcuL3BhcnRzLmpzJztcbmltcG9ydCB7UmVuZGVyT3B0aW9uc30gZnJvbSAnLi9yZW5kZXItb3B0aW9ucy5qcyc7XG5pbXBvcnQge3RlbXBsYXRlRmFjdG9yeX0gZnJvbSAnLi90ZW1wbGF0ZS1mYWN0b3J5LmpzJztcblxuZXhwb3J0IGNvbnN0IHBhcnRzID0gbmV3IFdlYWtNYXA8Tm9kZSwgTm9kZVBhcnQ+KCk7XG5cbi8qKlxuICogUmVuZGVycyBhIHRlbXBsYXRlIHJlc3VsdCBvciBvdGhlciB2YWx1ZSB0byBhIGNvbnRhaW5lci5cbiAqXG4gKiBUbyB1cGRhdGUgYSBjb250YWluZXIgd2l0aCBuZXcgdmFsdWVzLCByZWV2YWx1YXRlIHRoZSB0ZW1wbGF0ZSBsaXRlcmFsIGFuZFxuICogY2FsbCBgcmVuZGVyYCB3aXRoIHRoZSBuZXcgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSByZXN1bHQgQW55IHZhbHVlIHJlbmRlcmFibGUgYnkgTm9kZVBhcnQgLSB0eXBpY2FsbHkgYSBUZW1wbGF0ZVJlc3VsdFxuICogICAgIGNyZWF0ZWQgYnkgZXZhbHVhdGluZyBhIHRlbXBsYXRlIHRhZyBsaWtlIGBodG1sYCBvciBgc3ZnYC5cbiAqIEBwYXJhbSBjb250YWluZXIgQSBET00gcGFyZW50IHRvIHJlbmRlciB0by4gVGhlIGVudGlyZSBjb250ZW50cyBhcmUgZWl0aGVyXG4gKiAgICAgcmVwbGFjZWQsIG9yIGVmZmljaWVudGx5IHVwZGF0ZWQgaWYgdGhlIHNhbWUgcmVzdWx0IHR5cGUgd2FzIHByZXZpb3VzXG4gKiAgICAgcmVuZGVyZWQgdGhlcmUuXG4gKiBAcGFyYW0gb3B0aW9ucyBSZW5kZXJPcHRpb25zIGZvciB0aGUgZW50aXJlIHJlbmRlciB0cmVlIHJlbmRlcmVkIHRvIHRoaXNcbiAqICAgICBjb250YWluZXIuIFJlbmRlciBvcHRpb25zIG11c3QgKm5vdCogY2hhbmdlIGJldHdlZW4gcmVuZGVycyB0byB0aGUgc2FtZVxuICogICAgIGNvbnRhaW5lciwgYXMgdGhvc2UgY2hhbmdlcyB3aWxsIG5vdCBlZmZlY3QgcHJldmlvdXNseSByZW5kZXJlZCBET00uXG4gKi9cbmV4cG9ydCBjb25zdCByZW5kZXIgPVxuICAgIChyZXN1bHQ6IHVua25vd24sXG4gICAgIGNvbnRhaW5lcjogRWxlbWVudHxEb2N1bWVudEZyYWdtZW50LFxuICAgICBvcHRpb25zPzogUGFydGlhbDxSZW5kZXJPcHRpb25zPikgPT4ge1xuICAgICAgbGV0IHBhcnQgPSBwYXJ0cy5nZXQoY29udGFpbmVyKTtcbiAgICAgIGlmIChwYXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmVtb3ZlTm9kZXMoY29udGFpbmVyLCBjb250YWluZXIuZmlyc3RDaGlsZCk7XG4gICAgICAgIHBhcnRzLnNldChjb250YWluZXIsIHBhcnQgPSBuZXcgTm9kZVBhcnQoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlRmFjdG9yeSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgIHBhcnQuYXBwZW5kSW50byhjb250YWluZXIpO1xuICAgICAgfVxuICAgICAgcGFydC5zZXRWYWx1ZShyZXN1bHQpO1xuICAgICAgcGFydC5jb21taXQoKTtcbiAgICB9O1xuIiwgIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG4gKiBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuICogc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cblxuLyoqXG4gKlxuICogTWFpbiBsaXQtaHRtbCBtb2R1bGUuXG4gKlxuICogTWFpbiBleHBvcnRzOlxuICpcbiAqIC0gIFtbaHRtbF1dXG4gKiAtICBbW3N2Z11dXG4gKiAtICBbW3JlbmRlcl1dXG4gKlxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXG4gKi9cblxuLyoqXG4gKiBEbyBub3QgcmVtb3ZlIHRoaXMgY29tbWVudDsgaXQga2VlcHMgdHlwZWRvYyBmcm9tIG1pc3BsYWNpbmcgdGhlIG1vZHVsZVxuICogZG9jcy5cbiAqL1xuaW1wb3J0IHtkZWZhdWx0VGVtcGxhdGVQcm9jZXNzb3J9IGZyb20gJy4vbGliL2RlZmF1bHQtdGVtcGxhdGUtcHJvY2Vzc29yLmpzJztcbmltcG9ydCB7U1ZHVGVtcGxhdGVSZXN1bHQsIFRlbXBsYXRlUmVzdWx0fSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuXG5leHBvcnQge0RlZmF1bHRUZW1wbGF0ZVByb2Nlc3NvciwgZGVmYXVsdFRlbXBsYXRlUHJvY2Vzc29yfSBmcm9tICcuL2xpYi9kZWZhdWx0LXRlbXBsYXRlLXByb2Nlc3Nvci5qcyc7XG5leHBvcnQge2RpcmVjdGl2ZSwgRGlyZWN0aXZlRm4sIGlzRGlyZWN0aXZlfSBmcm9tICcuL2xpYi9kaXJlY3RpdmUuanMnO1xuLy8gVE9ETyhqdXN0aW5mYWduYW5pKTogcmVtb3ZlIGxpbmUgd2hlbiB3ZSBnZXQgTm9kZVBhcnQgbW92aW5nIG1ldGhvZHNcbmV4cG9ydCB7cmVtb3ZlTm9kZXMsIHJlcGFyZW50Tm9kZXN9IGZyb20gJy4vbGliL2RvbS5qcyc7XG5leHBvcnQge25vQ2hhbmdlLCBub3RoaW5nLCBQYXJ0fSBmcm9tICcuL2xpYi9wYXJ0LmpzJztcbmV4cG9ydCB7QXR0cmlidXRlQ29tbWl0dGVyLCBBdHRyaWJ1dGVQYXJ0LCBCb29sZWFuQXR0cmlidXRlUGFydCwgRXZlbnRQYXJ0LCBpc0l0ZXJhYmxlLCBpc1ByaW1pdGl2ZSwgTm9kZVBhcnQsIFByb3BlcnR5Q29tbWl0dGVyLCBQcm9wZXJ0eVBhcnR9IGZyb20gJy4vbGliL3BhcnRzLmpzJztcbmV4cG9ydCB7UmVuZGVyT3B0aW9uc30gZnJvbSAnLi9saWIvcmVuZGVyLW9wdGlvbnMuanMnO1xuZXhwb3J0IHtwYXJ0cywgcmVuZGVyfSBmcm9tICcuL2xpYi9yZW5kZXIuanMnO1xuZXhwb3J0IHt0ZW1wbGF0ZUNhY2hlcywgdGVtcGxhdGVGYWN0b3J5fSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1mYWN0b3J5LmpzJztcbmV4cG9ydCB7VGVtcGxhdGVJbnN0YW5jZX0gZnJvbSAnLi9saWIvdGVtcGxhdGUtaW5zdGFuY2UuanMnO1xuZXhwb3J0IHtUZW1wbGF0ZVByb2Nlc3Nvcn0gZnJvbSAnLi9saWIvdGVtcGxhdGUtcHJvY2Vzc29yLmpzJztcbmV4cG9ydCB7U1ZHVGVtcGxhdGVSZXN1bHQsIFRlbXBsYXRlUmVzdWx0fSBmcm9tICcuL2xpYi90ZW1wbGF0ZS1yZXN1bHQuanMnO1xuZXhwb3J0IHtjcmVhdGVNYXJrZXIsIGlzVGVtcGxhdGVQYXJ0QWN0aXZlLCBUZW1wbGF0ZX0gZnJvbSAnLi9saWIvdGVtcGxhdGUuanMnO1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIGxpdEh0bWxWZXJzaW9uczogc3RyaW5nW107XG4gIH1cbn1cblxuLy8gSU1QT1JUQU5UOiBkbyBub3QgY2hhbmdlIHRoZSBwcm9wZXJ0eSBuYW1lIG9yIHRoZSBhc3NpZ25tZW50IGV4cHJlc3Npb24uXG4vLyBUaGlzIGxpbmUgd2lsbCBiZSB1c2VkIGluIHJlZ2V4ZXMgdG8gc2VhcmNoIGZvciBsaXQtaHRtbCB1c2FnZS5cbi8vIFRPRE8oanVzdGluZmFnbmFuaSk6IGluamVjdCB2ZXJzaW9uIG51bWJlciBhdCBidWlsZCB0aW1lXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgKHdpbmRvd1snbGl0SHRtbFZlcnNpb25zJ10gfHwgKHdpbmRvd1snbGl0SHRtbFZlcnNpb25zJ10gPSBbXSkpLnB1c2goJzEuMy4wJyk7XG59XG5cbi8qKlxuICogSW50ZXJwcmV0cyBhIHRlbXBsYXRlIGxpdGVyYWwgYXMgYW4gSFRNTCB0ZW1wbGF0ZSB0aGF0IGNhbiBlZmZpY2llbnRseVxuICogcmVuZGVyIHRvIGFuZCB1cGRhdGUgYSBjb250YWluZXIuXG4gKi9cbmV4cG9ydCBjb25zdCBodG1sID0gKHN0cmluZ3M6IFRlbXBsYXRlU3RyaW5nc0FycmF5LCAuLi52YWx1ZXM6IHVua25vd25bXSkgPT5cbiAgICBuZXcgVGVtcGxhdGVSZXN1bHQoc3RyaW5ncywgdmFsdWVzLCAnaHRtbCcsIGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3Nvcik7XG5cbi8qKlxuICogSW50ZXJwcmV0cyBhIHRlbXBsYXRlIGxpdGVyYWwgYXMgYW4gU1ZHIHRlbXBsYXRlIHRoYXQgY2FuIGVmZmljaWVudGx5XG4gKiByZW5kZXIgdG8gYW5kIHVwZGF0ZSBhIGNvbnRhaW5lci5cbiAqL1xuZXhwb3J0IGNvbnN0IHN2ZyA9IChzdHJpbmdzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheSwgLi4udmFsdWVzOiB1bmtub3duW10pID0+XG4gICAgbmV3IFNWR1RlbXBsYXRlUmVzdWx0KHN0cmluZ3MsIHZhbHVlcywgJ3N2ZycsIGRlZmF1bHRUZW1wbGF0ZVByb2Nlc3Nvcik7XG4iLCAiY29uc3QgcGhhc2VTeW1ib2wgPSBTeW1ib2woJ2hhdW50ZWQucGhhc2UnKTtcbmNvbnN0IGhvb2tTeW1ib2wgPSBTeW1ib2woJ2hhdW50ZWQuaG9vaycpO1xuY29uc3QgdXBkYXRlU3ltYm9sID0gU3ltYm9sKCdoYXVudGVkLnVwZGF0ZScpO1xuY29uc3QgY29tbWl0U3ltYm9sID0gU3ltYm9sKCdoYXVudGVkLmNvbW1pdCcpO1xuY29uc3QgZWZmZWN0c1N5bWJvbCA9IFN5bWJvbCgnaGF1bnRlZC5lZmZlY3RzJyk7XG5jb25zdCBsYXlvdXRFZmZlY3RzU3ltYm9sID0gU3ltYm9sKCdoYXVudGVkLmxheW91dEVmZmVjdHMnKTtcbmNvbnN0IGNvbnRleHRFdmVudCA9ICdoYXVudGVkLmNvbnRleHQnO1xuZXhwb3J0IHsgcGhhc2VTeW1ib2wsIGhvb2tTeW1ib2wsIHVwZGF0ZVN5bWJvbCwgY29tbWl0U3ltYm9sLCBlZmZlY3RzU3ltYm9sLCBsYXlvdXRFZmZlY3RzU3ltYm9sLCBjb250ZXh0RXZlbnQsIH07XG4iLCAibGV0IGN1cnJlbnQ7XG5sZXQgY3VycmVudElkID0gMDtcbmZ1bmN0aW9uIHNldEN1cnJlbnQoc3RhdGUpIHtcbiAgICBjdXJyZW50ID0gc3RhdGU7XG59XG5mdW5jdGlvbiBjbGVhcigpIHtcbiAgICBjdXJyZW50ID0gbnVsbDtcbiAgICBjdXJyZW50SWQgPSAwO1xufVxuZnVuY3Rpb24gbm90aWZ5KCkge1xuICAgIHJldHVybiBjdXJyZW50SWQrKztcbn1cbmV4cG9ydCB7IGNsZWFyLCBjdXJyZW50LCBzZXRDdXJyZW50LCBub3RpZnkgfTtcbiIsICJpbXBvcnQgeyBjdXJyZW50LCBub3RpZnkgfSBmcm9tICcuL2ludGVyZmFjZSc7XG5pbXBvcnQgeyBob29rU3ltYm9sIH0gZnJvbSAnLi9zeW1ib2xzJztcbmNsYXNzIEhvb2sge1xuICAgIGNvbnN0cnVjdG9yKGlkLCBzdGF0ZSkge1xuICAgICAgICB0aGlzLmlkID0gaWQ7XG4gICAgICAgIHRoaXMuc3RhdGUgPSBzdGF0ZTtcbiAgICB9XG59XG5mdW5jdGlvbiB1c2UoSG9vaywgLi4uYXJncykge1xuICAgIGxldCBpZCA9IG5vdGlmeSgpO1xuICAgIGxldCBob29rcyA9IGN1cnJlbnRbaG9va1N5bWJvbF07XG4gICAgbGV0IGhvb2sgPSBob29rcy5nZXQoaWQpO1xuICAgIGlmICghaG9vaykge1xuICAgICAgICBob29rID0gbmV3IEhvb2soaWQsIGN1cnJlbnQsIC4uLmFyZ3MpO1xuICAgICAgICBob29rcy5zZXQoaWQsIGhvb2spO1xuICAgIH1cbiAgICByZXR1cm4gaG9vay51cGRhdGUoLi4uYXJncyk7XG59XG5mdW5jdGlvbiBob29rKEhvb2spIHtcbiAgICByZXR1cm4gdXNlLmJpbmQobnVsbCwgSG9vayk7XG59XG5leHBvcnQgeyBob29rLCBIb29rIH07XG4iLCAiaW1wb3J0IHsgSG9vaywgaG9vayB9IGZyb20gJy4vaG9vayc7XG5mdW5jdGlvbiBjcmVhdGVFZmZlY3Qoc2V0RWZmZWN0cykge1xuICAgIHJldHVybiBob29rKGNsYXNzIGV4dGVuZHMgSG9vayB7XG4gICAgICAgIGNvbnN0cnVjdG9yKGlkLCBzdGF0ZSwgaWdub3JlZDEsIGlnbm9yZWQyKSB7XG4gICAgICAgICAgICBzdXBlcihpZCwgc3RhdGUpO1xuICAgICAgICAgICAgc2V0RWZmZWN0cyhzdGF0ZSwgdGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdXBkYXRlKGNhbGxiYWNrLCB2YWx1ZXMpIHtcbiAgICAgICAgICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgICAgIHRoaXMudmFsdWVzID0gdmFsdWVzO1xuICAgICAgICB9XG4gICAgICAgIGNhbGwoKSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMudmFsdWVzIHx8IHRoaXMuaGFzQ2hhbmdlZCgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMubGFzdFZhbHVlcyA9IHRoaXMudmFsdWVzO1xuICAgICAgICB9XG4gICAgICAgIHJ1bigpIHtcbiAgICAgICAgICAgIHRoaXMudGVhcmRvd24oKTtcbiAgICAgICAgICAgIHRoaXMuX3RlYXJkb3duID0gdGhpcy5jYWxsYmFjay5jYWxsKHRoaXMuc3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIHRlYXJkb3duKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLl90ZWFyZG93biA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIHRoaXMuX3RlYXJkb3duKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaGFzQ2hhbmdlZCgpIHtcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5sYXN0VmFsdWVzIHx8IHRoaXMudmFsdWVzLnNvbWUoKHZhbHVlLCBpKSA9PiB0aGlzLmxhc3RWYWx1ZXNbaV0gIT09IHZhbHVlKTtcbiAgICAgICAgfVxuICAgIH0pO1xufVxuZXhwb3J0IHsgY3JlYXRlRWZmZWN0IH07XG4iLCAiaW1wb3J0IHsgZWZmZWN0c1N5bWJvbCB9IGZyb20gJy4vc3ltYm9scyc7XG5pbXBvcnQgeyBjcmVhdGVFZmZlY3QgfSBmcm9tICcuL2NyZWF0ZS1lZmZlY3QnO1xuZnVuY3Rpb24gc2V0RWZmZWN0cyhzdGF0ZSwgY2IpIHtcbiAgICBzdGF0ZVtlZmZlY3RzU3ltYm9sXS5wdXNoKGNiKTtcbn1cbmNvbnN0IHVzZUVmZmVjdCA9IGNyZWF0ZUVmZmVjdChzZXRFZmZlY3RzKTtcbmV4cG9ydCB7IHNldEVmZmVjdHMsIHVzZUVmZmVjdCB9O1xuIiwgImltcG9ydCB7IGhvb2ssIEhvb2sgfSBmcm9tICcuL2hvb2snO1xuY29uc3QgdXNlU3RhdGUgPSBob29rKGNsYXNzIGV4dGVuZHMgSG9vayB7XG4gICAgY29uc3RydWN0b3IoaWQsIHN0YXRlLCBpbml0aWFsVmFsdWUpIHtcbiAgICAgICAgc3VwZXIoaWQsIHN0YXRlKTtcbiAgICAgICAgdGhpcy51cGRhdGVyID0gdGhpcy51cGRhdGVyLmJpbmQodGhpcyk7XG4gICAgICAgIGlmICh0eXBlb2YgaW5pdGlhbFZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBpbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1ha2VBcmdzKGluaXRpYWxWYWx1ZSk7XG4gICAgfVxuICAgIHVwZGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXJncztcbiAgICB9XG4gICAgdXBkYXRlcih2YWx1ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjb25zdCB1cGRhdGVyRm4gPSB2YWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IFtwcmV2aW91c1ZhbHVlXSA9IHRoaXMuYXJncztcbiAgICAgICAgICAgIHZhbHVlID0gdXBkYXRlckZuKHByZXZpb3VzVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWFrZUFyZ3ModmFsdWUpO1xuICAgICAgICB0aGlzLnN0YXRlLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBtYWtlQXJncyh2YWx1ZSkge1xuICAgICAgICB0aGlzLmFyZ3MgPSBPYmplY3QuZnJlZXplKFt2YWx1ZSwgdGhpcy51cGRhdGVyXSk7XG4gICAgfVxufSk7XG5leHBvcnQgeyB1c2VTdGF0ZSB9O1xuIiwgImltcG9ydCB7IGhvb2ssIEhvb2sgfSBmcm9tICcuL2hvb2snO1xuY29uc3QgdXNlUmVkdWNlciA9IGhvb2soY2xhc3MgZXh0ZW5kcyBIb29rIHtcbiAgICBjb25zdHJ1Y3RvcihpZCwgc3RhdGUsIF8sIGluaXRpYWxTdGF0ZSwgaW5pdCkge1xuICAgICAgICBzdXBlcihpZCwgc3RhdGUpO1xuICAgICAgICB0aGlzLmRpc3BhdGNoID0gdGhpcy5kaXNwYXRjaC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IGluaXQgIT09IHVuZGVmaW5lZCA/IGluaXQoaW5pdGlhbFN0YXRlKSA6IGluaXRpYWxTdGF0ZTtcbiAgICB9XG4gICAgdXBkYXRlKHJlZHVjZXIpIHtcbiAgICAgICAgdGhpcy5yZWR1Y2VyID0gcmVkdWNlcjtcbiAgICAgICAgcmV0dXJuIFt0aGlzLmN1cnJlbnRTdGF0ZSwgdGhpcy5kaXNwYXRjaF07XG4gICAgfVxuICAgIGRpc3BhdGNoKGFjdGlvbikge1xuICAgICAgICB0aGlzLmN1cnJlbnRTdGF0ZSA9IHRoaXMucmVkdWNlcih0aGlzLmN1cnJlbnRTdGF0ZSwgYWN0aW9uKTtcbiAgICAgICAgdGhpcy5zdGF0ZS51cGRhdGUoKTtcbiAgICB9XG59KTtcbmV4cG9ydCB7IHVzZVJlZHVjZXIgfTtcbiIsICJpbXBvcnQgeyBzZXRDdXJyZW50LCBjbGVhciB9IGZyb20gJy4vaW50ZXJmYWNlJztcbmltcG9ydCB7IGhvb2tTeW1ib2wsIGVmZmVjdHNTeW1ib2wsIGxheW91dEVmZmVjdHNTeW1ib2wgfSBmcm9tICcuL3N5bWJvbHMnO1xuY2xhc3MgU3RhdGUge1xuICAgIGNvbnN0cnVjdG9yKHVwZGF0ZSwgaG9zdCkge1xuICAgICAgICB0aGlzLnVwZGF0ZSA9IHVwZGF0ZTtcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpc1tob29rU3ltYm9sXSA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpc1tlZmZlY3RzU3ltYm9sXSA9IFtdO1xuICAgICAgICB0aGlzW2xheW91dEVmZmVjdHNTeW1ib2xdID0gW107XG4gICAgfVxuICAgIHJ1bihjYikge1xuICAgICAgICBzZXRDdXJyZW50KHRoaXMpO1xuICAgICAgICBsZXQgcmVzID0gY2IoKTtcbiAgICAgICAgY2xlYXIoKTtcbiAgICAgICAgcmV0dXJuIHJlcztcbiAgICB9XG4gICAgX3J1bkVmZmVjdHMocGhhc2UpIHtcbiAgICAgICAgbGV0IGVmZmVjdHMgPSB0aGlzW3BoYXNlXTtcbiAgICAgICAgc2V0Q3VycmVudCh0aGlzKTtcbiAgICAgICAgZm9yIChsZXQgZWZmZWN0IG9mIGVmZmVjdHMpIHtcbiAgICAgICAgICAgIGVmZmVjdC5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICAgIGNsZWFyKCk7XG4gICAgfVxuICAgIHJ1bkVmZmVjdHMoKSB7XG4gICAgICAgIHRoaXMuX3J1bkVmZmVjdHMoZWZmZWN0c1N5bWJvbCk7XG4gICAgfVxuICAgIHJ1bkxheW91dEVmZmVjdHMoKSB7XG4gICAgICAgIHRoaXMuX3J1bkVmZmVjdHMobGF5b3V0RWZmZWN0c1N5bWJvbCk7XG4gICAgfVxuICAgIHRlYXJkb3duKCkge1xuICAgICAgICBsZXQgaG9va3MgPSB0aGlzW2hvb2tTeW1ib2xdO1xuICAgICAgICBob29rcy5mb3JFYWNoKGhvb2sgPT4ge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBob29rLnRlYXJkb3duID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgaG9vay50ZWFyZG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59XG5leHBvcnQgeyBTdGF0ZSB9O1xuIiwgImltcG9ydCB7IFN0YXRlIH0gZnJvbSAnLi9zdGF0ZSc7XG5pbXBvcnQgeyBjb21taXRTeW1ib2wsIHBoYXNlU3ltYm9sLCB1cGRhdGVTeW1ib2wsIGVmZmVjdHNTeW1ib2wsIGxheW91dEVmZmVjdHNTeW1ib2wgfSBmcm9tICcuL3N5bWJvbHMnO1xuY29uc3QgZGVmZXIgPSBQcm9taXNlLnJlc29sdmUoKS50aGVuLmJpbmQoUHJvbWlzZS5yZXNvbHZlKCkpO1xuZnVuY3Rpb24gcnVubmVyKCkge1xuICAgIGxldCB0YXNrcyA9IFtdO1xuICAgIGxldCBpZDtcbiAgICBmdW5jdGlvbiBydW5UYXNrcygpIHtcbiAgICAgICAgaWQgPSBudWxsO1xuICAgICAgICBsZXQgdCA9IHRhc2tzO1xuICAgICAgICB0YXNrcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdC5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICAgICAgdFtpXSgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmdW5jdGlvbiAodGFzaykge1xuICAgICAgICB0YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICBpZiAoaWQgPT0gbnVsbCkge1xuICAgICAgICAgICAgaWQgPSBkZWZlcihydW5UYXNrcyk7XG4gICAgICAgIH1cbiAgICB9O1xufVxuY29uc3QgcmVhZCA9IHJ1bm5lcigpO1xuY29uc3Qgd3JpdGUgPSBydW5uZXIoKTtcbmNsYXNzIEJhc2VTY2hlZHVsZXIge1xuICAgIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBob3N0KSB7XG4gICAgICAgIHRoaXMucmVuZGVyZXIgPSByZW5kZXJlcjtcbiAgICAgICAgdGhpcy5ob3N0ID0gaG9zdDtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IG5ldyBTdGF0ZSh0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpLCBob3N0KTtcbiAgICAgICAgdGhpc1twaGFzZVN5bWJvbF0gPSBudWxsO1xuICAgICAgICB0aGlzLl91cGRhdGVRdWV1ZWQgPSBmYWxzZTtcbiAgICB9XG4gICAgdXBkYXRlKCkge1xuICAgICAgICBpZiAodGhpcy5fdXBkYXRlUXVldWVkKVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICByZWFkKCgpID0+IHtcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmhhbmRsZVBoYXNlKHVwZGF0ZVN5bWJvbCk7XG4gICAgICAgICAgICB3cml0ZSgoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVQaGFzZShjb21taXRTeW1ib2wsIHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgd3JpdGUoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZVBoYXNlKGVmZmVjdHNTeW1ib2wpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVRdWV1ZWQgPSBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVF1ZXVlZCA9IHRydWU7XG4gICAgfVxuICAgIGhhbmRsZVBoYXNlKHBoYXNlLCBhcmcpIHtcbiAgICAgICAgdGhpc1twaGFzZVN5bWJvbF0gPSBwaGFzZTtcbiAgICAgICAgc3dpdGNoIChwaGFzZSkge1xuICAgICAgICAgICAgY2FzZSBjb21taXRTeW1ib2w6XG4gICAgICAgICAgICAgICAgdGhpcy5jb21taXQoYXJnKTtcbiAgICAgICAgICAgICAgICB0aGlzLnJ1bkVmZmVjdHMobGF5b3V0RWZmZWN0c1N5bWJvbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgY2FzZSB1cGRhdGVTeW1ib2w6IHJldHVybiB0aGlzLnJlbmRlcigpO1xuICAgICAgICAgICAgY2FzZSBlZmZlY3RzU3ltYm9sOiByZXR1cm4gdGhpcy5ydW5FZmZlY3RzKGVmZmVjdHNTeW1ib2wpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXNbcGhhc2VTeW1ib2xdID0gbnVsbDtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zdGF0ZS5ydW4oKCkgPT4gdGhpcy5yZW5kZXJlci5jYWxsKHRoaXMuaG9zdCwgdGhpcy5ob3N0KSk7XG4gICAgfVxuICAgIHJ1bkVmZmVjdHMocGhhc2UpIHtcbiAgICAgICAgdGhpcy5zdGF0ZS5fcnVuRWZmZWN0cyhwaGFzZSk7XG4gICAgfVxuICAgIHRlYXJkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXRlLnRlYXJkb3duKCk7XG4gICAgfVxufVxuZXhwb3J0IHsgQmFzZVNjaGVkdWxlciB9O1xuIiwgImltcG9ydCB7IEJhc2VTY2hlZHVsZXIgfSBmcm9tICcuL3NjaGVkdWxlcic7XG5jb25zdCB0b0NhbWVsQ2FzZSA9ICh2YWwgPSAnJykgPT4gdmFsLnJlcGxhY2UoLy0rKFthLXpdKT8vZywgKF8sIGNoYXIpID0+IGNoYXIgPyBjaGFyLnRvVXBwZXJDYXNlKCkgOiAnJyk7XG5mdW5jdGlvbiBtYWtlQ29tcG9uZW50KHJlbmRlcikge1xuICAgIGNsYXNzIFNjaGVkdWxlciBleHRlbmRzIEJhc2VTY2hlZHVsZXIge1xuICAgICAgICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgZnJhZywgaG9zdCkge1xuICAgICAgICAgICAgc3VwZXIocmVuZGVyZXIsIGhvc3QgfHwgZnJhZyk7XG4gICAgICAgICAgICB0aGlzLmZyYWcgPSBmcmFnO1xuICAgICAgICB9XG4gICAgICAgIGNvbW1pdChyZXN1bHQpIHtcbiAgICAgICAgICAgIHJlbmRlcihyZXN1bHQsIHRoaXMuZnJhZyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZnVuY3Rpb24gY29tcG9uZW50KHJlbmRlcmVyLCBiYXNlRWxlbWVudE9yT3B0aW9ucywgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBCYXNlRWxlbWVudCA9IChvcHRpb25zIHx8IGJhc2VFbGVtZW50T3JPcHRpb25zIHx8IHt9KS5iYXNlRWxlbWVudCB8fCBIVE1MRWxlbWVudDtcbiAgICAgICAgY29uc3QgeyBvYnNlcnZlZEF0dHJpYnV0ZXMgPSBbXSwgdXNlU2hhZG93RE9NID0gdHJ1ZSwgc2hhZG93Um9vdEluaXQgPSB7fSB9ID0gb3B0aW9ucyB8fCBiYXNlRWxlbWVudE9yT3B0aW9ucyB8fCB7fTtcbiAgICAgICAgY2xhc3MgRWxlbWVudCBleHRlbmRzIEJhc2VFbGVtZW50IHtcbiAgICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgICAgIHN1cGVyKCk7XG4gICAgICAgICAgICAgICAgaWYgKHVzZVNoYWRvd0RPTSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2NoZWR1bGVyID0gbmV3IFNjaGVkdWxlcihyZW5kZXJlciwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmF0dGFjaFNoYWRvdyh7IG1vZGU6ICdvcGVuJywgLi4uc2hhZG93Um9vdEluaXQgfSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlciA9IG5ldyBTY2hlZHVsZXIocmVuZGVyZXIsIHRoaXMuc2hhZG93Um9vdCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcmVyLm9ic2VydmVkQXR0cmlidXRlcyB8fCBvYnNlcnZlZEF0dHJpYnV0ZXMgfHwgW107XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZXIudXBkYXRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICB0aGlzLl9zY2hlZHVsZXIudGVhcmRvd24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGRWYWx1ZSwgbmV3VmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAob2xkVmFsdWUgPT09IG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbGV0IHZhbCA9IG5ld1ZhbHVlID09PSAnJyA/IHRydWUgOiBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgICBSZWZsZWN0LnNldCh0aGlzLCB0b0NhbWVsQ2FzZShuYW1lKSwgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICA7XG4gICAgICAgIGZ1bmN0aW9uIHJlZmxlY3RpdmVQcm9wKGluaXRpYWxWYWx1ZSkge1xuICAgICAgICAgICAgbGV0IHZhbHVlID0gaW5pdGlhbFZhbHVlO1xuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5mcmVlemUoe1xuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldCgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc2V0KG5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NjaGVkdWxlci51cGRhdGUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBwcm90byA9IG5ldyBQcm94eShCYXNlRWxlbWVudC5wcm90b3R5cGUsIHtcbiAgICAgICAgICAgIGdldFByb3RvdHlwZU9mKHRhcmdldCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0KHRhcmdldCwga2V5LCB2YWx1ZSwgcmVjZWl2ZXIpIHtcbiAgICAgICAgICAgICAgICBsZXQgZGVzYztcbiAgICAgICAgICAgICAgICBpZiAoa2V5IGluIHRhcmdldCkge1xuICAgICAgICAgICAgICAgICAgICBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXNjICYmIGRlc2Muc2V0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjLnNldC5jYWxsKHJlY2VpdmVyLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBSZWZsZWN0LnNldCh0YXJnZXQsIGtleSwgdmFsdWUsIHJlY2VpdmVyKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3ltYm9sJyB8fCBrZXlbMF0gPT09ICdfJykge1xuICAgICAgICAgICAgICAgICAgICBkZXNjID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGRlc2MgPSByZWZsZWN0aXZlUHJvcCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShyZWNlaXZlciwga2V5LCBkZXNjKTtcbiAgICAgICAgICAgICAgICBpZiAoZGVzYy5zZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZGVzYy5zZXQuY2FsbChyZWNlaXZlciwgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZihFbGVtZW50LnByb3RvdHlwZSwgcHJvdG8pO1xuICAgICAgICByZXR1cm4gRWxlbWVudDtcbiAgICB9XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbn1cbmV4cG9ydCB7IG1ha2VDb21wb25lbnQgfTtcbiIsICJpbXBvcnQgeyBob29rLCBIb29rIH0gZnJvbSAnLi9ob29rJztcbmltcG9ydCB7IGNvbnRleHRFdmVudCB9IGZyb20gJy4vc3ltYm9scyc7XG5pbXBvcnQgeyBzZXRFZmZlY3RzIH0gZnJvbSAnLi91c2UtZWZmZWN0JztcbmNvbnN0IHVzZUNvbnRleHQgPSBob29rKGNsYXNzIGV4dGVuZHMgSG9vayB7XG4gICAgY29uc3RydWN0b3IoaWQsIHN0YXRlLCBfKSB7XG4gICAgICAgIHN1cGVyKGlkLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMuX3VwZGF0ZXIgPSB0aGlzLl91cGRhdGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX3JhbkVmZmVjdCA9IGZhbHNlO1xuICAgICAgICB0aGlzLl91bnN1YnNjcmliZSA9IG51bGw7XG4gICAgICAgIHNldEVmZmVjdHMoc3RhdGUsIHRoaXMpO1xuICAgIH1cbiAgICB1cGRhdGUoQ29udGV4dCkge1xuICAgICAgICBpZiAodGhpcy5zdGF0ZS52aXJ0dWFsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NhblxcJ3QgYmUgdXNlZCB3aXRoIHZpcnR1YWwgY29tcG9uZW50cycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLkNvbnRleHQgIT09IENvbnRleHQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YnNjcmliZShDb250ZXh0KTtcbiAgICAgICAgICAgIHRoaXMuQ29udGV4dCA9IENvbnRleHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgfVxuICAgIGNhbGwoKSB7XG4gICAgICAgIGlmICghdGhpcy5fcmFuRWZmZWN0KSB7XG4gICAgICAgICAgICB0aGlzLl9yYW5FZmZlY3QgPSB0cnVlO1xuICAgICAgICAgICAgaWYgKHRoaXMuX3Vuc3Vic2NyaWJlKVxuICAgICAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlKCk7XG4gICAgICAgICAgICB0aGlzLl9zdWJzY3JpYmUodGhpcy5Db250ZXh0KTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudXBkYXRlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgX3VwZGF0ZXIodmFsdWUpIHtcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnN0YXRlLnVwZGF0ZSgpO1xuICAgIH1cbiAgICBfc3Vic2NyaWJlKENvbnRleHQpIHtcbiAgICAgICAgY29uc3QgZGV0YWlsID0geyBDb250ZXh0LCBjYWxsYmFjazogdGhpcy5fdXBkYXRlciB9O1xuICAgICAgICB0aGlzLnN0YXRlLmhvc3QuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoY29udGV4dEV2ZW50LCB7XG4gICAgICAgICAgICBkZXRhaWwsXG4gICAgICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgY2FuY2VsYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNvbXBvc2VkOiB0cnVlLFxuICAgICAgICB9KSk7XG4gICAgICAgIGNvbnN0IHsgdW5zdWJzY3JpYmUsIHZhbHVlIH0gPSBkZXRhaWw7XG4gICAgICAgIHRoaXMudmFsdWUgPSB1bnN1YnNjcmliZSA/IHZhbHVlIDogQ29udGV4dC5kZWZhdWx0VmFsdWU7XG4gICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlID0gdW5zdWJzY3JpYmU7XG4gICAgfVxuICAgIHRlYXJkb3duKCkge1xuICAgICAgICBpZiAodGhpcy5fdW5zdWJzY3JpYmUpIHtcbiAgICAgICAgICAgIHRoaXMuX3Vuc3Vic2NyaWJlKCk7XG4gICAgICAgIH1cbiAgICB9XG59KTtcbmV4cG9ydCB7IHVzZUNvbnRleHQgfTtcbiIsICJpbXBvcnQgeyBjb250ZXh0RXZlbnQgfSBmcm9tICcuL3N5bWJvbHMnO1xuaW1wb3J0IHsgdXNlQ29udGV4dCB9IGZyb20gJy4vdXNlLWNvbnRleHQnO1xuZnVuY3Rpb24gbWFrZUNvbnRleHQoY29tcG9uZW50KSB7XG4gICAgcmV0dXJuIChkZWZhdWx0VmFsdWUpID0+IHtcbiAgICAgICAgY29uc3QgQ29udGV4dCA9IHtcbiAgICAgICAgICAgIFByb3ZpZGVyOiBjbGFzcyBleHRlbmRzIEhUTUxFbGVtZW50IHtcbiAgICAgICAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgICAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSBuZXcgU2V0KCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihjb250ZXh0RXZlbnQsIHRoaXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGNvbnRleHRFdmVudCwgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGhhbmRsZUV2ZW50KGV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGV0YWlsIH0gPSBldmVudDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRldGFpbC5Db250ZXh0ID09PSBDb250ZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZXRhaWwudmFsdWUgPSB0aGlzLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlsLnVuc3Vic2NyaWJlID0gdGhpcy51bnN1YnNjcmliZS5iaW5kKHRoaXMsIGRldGFpbC5jYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpc3RlbmVycy5hZGQoZGV0YWlsLmNhbGxiYWNrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVuc3Vic2NyaWJlKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLmRlbGV0ZShjYWxsYmFjayk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldCB2YWx1ZSh2YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBjYWxsYmFjayBvZiB0aGlzLmxpc3RlbmVycykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGdldCB2YWx1ZSgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZhbHVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBDb25zdW1lcjogY29tcG9uZW50KGZ1bmN0aW9uICh7IHJlbmRlciB9KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgY29udGV4dCA9IHVzZUNvbnRleHQoQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlbmRlcihjb250ZXh0KTtcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gQ29udGV4dDtcbiAgICB9O1xufVxuZXhwb3J0IHsgbWFrZUNvbnRleHQgfTtcbiIsICJpbXBvcnQgeyBob29rLCBIb29rIH0gZnJvbSAnLi9ob29rJztcbmNvbnN0IHVzZU1lbW8gPSBob29rKGNsYXNzIGV4dGVuZHMgSG9vayB7XG4gICAgY29uc3RydWN0b3IoaWQsIHN0YXRlLCBmbiwgdmFsdWVzKSB7XG4gICAgICAgIHN1cGVyKGlkLCBzdGF0ZSk7XG4gICAgICAgIHRoaXMudmFsdWUgPSBmbigpO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICB9XG4gICAgdXBkYXRlKGZuLCB2YWx1ZXMpIHtcbiAgICAgICAgaWYgKHRoaXMuaGFzQ2hhbmdlZCh2YWx1ZXMpKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlcztcbiAgICAgICAgICAgIHRoaXMudmFsdWUgPSBmbigpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICAgIH1cbiAgICBoYXNDaGFuZ2VkKHZhbHVlcyA9IFtdKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZXMuc29tZSgodmFsdWUsIGkpID0+IHRoaXMudmFsdWVzW2ldICE9PSB2YWx1ZSk7XG4gICAgfVxufSk7XG5leHBvcnQgeyB1c2VNZW1vIH07XG4iLCAiaW1wb3J0IHsgbGF5b3V0RWZmZWN0c1N5bWJvbCB9IGZyb20gJy4vc3ltYm9scyc7XG5pbXBvcnQgeyBjcmVhdGVFZmZlY3QgfSBmcm9tICcuL2NyZWF0ZS1lZmZlY3QnO1xuZnVuY3Rpb24gc2V0TGF5b3V0RWZmZWN0cyhzdGF0ZSwgY2IpIHtcbiAgICBzdGF0ZVtsYXlvdXRFZmZlY3RzU3ltYm9sXS5wdXNoKGNiKTtcbn1cbmNvbnN0IHVzZUxheW91dEVmZmVjdCA9IGNyZWF0ZUVmZmVjdChzZXRMYXlvdXRFZmZlY3RzKTtcbmV4cG9ydCB7IHVzZUxheW91dEVmZmVjdCB9O1xuIiwgImltcG9ydCB7IHVzZU1lbW8gfSBmcm9tICcuL3VzZS1tZW1vJztcbmNvbnN0IHVzZVJlZiA9IChpbml0aWFsVmFsdWUpID0+IHVzZU1lbW8oKCkgPT4gKHtcbiAgICBjdXJyZW50OiBpbml0aWFsVmFsdWVcbn0pLCBbXSk7XG5leHBvcnQgeyB1c2VSZWYgfTtcbiIsICJpbXBvcnQgeyBtYWtlQ29tcG9uZW50IH0gZnJvbSAnLi9jb21wb25lbnQnO1xuaW1wb3J0IHsgbWFrZUNvbnRleHQgfSBmcm9tICcuL2NyZWF0ZS1jb250ZXh0JztcbmZ1bmN0aW9uIGhhdW50ZWQoeyByZW5kZXIgfSkge1xuICAgIGNvbnN0IGNvbXBvbmVudCA9IG1ha2VDb21wb25lbnQocmVuZGVyKTtcbiAgICBjb25zdCBjcmVhdGVDb250ZXh0ID0gbWFrZUNvbnRleHQoY29tcG9uZW50KTtcbiAgICByZXR1cm4geyBjb21wb25lbnQsIGNyZWF0ZUNvbnRleHQgfTtcbn1cbmV4cG9ydCB7IGhhdW50ZWQgYXMgZGVmYXVsdCB9O1xuZXhwb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICcuL3VzZS1jYWxsYmFjayc7XG5leHBvcnQgeyB1c2VFZmZlY3QgfSBmcm9tICcuL3VzZS1lZmZlY3QnO1xuZXhwb3J0IHsgdXNlTGF5b3V0RWZmZWN0IH0gZnJvbSAnLi91c2UtbGF5b3V0LWVmZmVjdCc7XG5leHBvcnQgeyB1c2VTdGF0ZSB9IGZyb20gJy4vdXNlLXN0YXRlJztcbmV4cG9ydCB7IHVzZVJlZHVjZXIgfSBmcm9tICcuL3VzZS1yZWR1Y2VyJztcbmV4cG9ydCB7IHVzZU1lbW8gfSBmcm9tICcuL3VzZS1tZW1vJztcbmV4cG9ydCB7IHVzZUNvbnRleHQgfSBmcm9tICcuL3VzZS1jb250ZXh0JztcbmV4cG9ydCB7IHVzZVJlZiB9IGZyb20gJy4vdXNlLXJlZic7XG5leHBvcnQgeyBob29rLCBIb29rIH0gZnJvbSAnLi9ob29rJztcbmV4cG9ydCB7IEJhc2VTY2hlZHVsZXIgfSBmcm9tICcuL3NjaGVkdWxlcic7XG5leHBvcnQgeyBTdGF0ZSB9IGZyb20gJy4vc3RhdGUnO1xuIiwgImltcG9ydCB7IGRpcmVjdGl2ZSB9IGZyb20gJ2xpdC1odG1sJztcbmltcG9ydCB7IEJhc2VTY2hlZHVsZXIgfSBmcm9tICcuL3NjaGVkdWxlcic7XG5jb25zdCBpbmNsdWRlcyA9IEFycmF5LnByb3RvdHlwZS5pbmNsdWRlcztcbmZ1bmN0aW9uIG1ha2VWaXJ0dWFsKCkge1xuICAgIGNvbnN0IHBhcnRUb1NjaGVkdWxlciA9IG5ldyBXZWFrTWFwKCk7XG4gICAgY29uc3Qgc2NoZWR1bGVyVG9QYXJ0ID0gbmV3IFdlYWtNYXAoKTtcbiAgICBjbGFzcyBTY2hlZHVsZXIgZXh0ZW5kcyBCYXNlU2NoZWR1bGVyIHtcbiAgICAgICAgY29uc3RydWN0b3IocmVuZGVyZXIsIHBhcnQpIHtcbiAgICAgICAgICAgIHN1cGVyKHJlbmRlcmVyLCBwYXJ0KTtcbiAgICAgICAgICAgIHRoaXMuc3RhdGUudmlydHVhbCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmVuZGVyKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUucnVuKCgpID0+IHRoaXMucmVuZGVyZXIuYXBwbHkodGhpcy5ob3N0LCB0aGlzLmFyZ3MpKTtcbiAgICAgICAgfVxuICAgICAgICBjb21taXQocmVzdWx0KSB7XG4gICAgICAgICAgICB0aGlzLmhvc3Quc2V0VmFsdWUocmVzdWx0KTtcbiAgICAgICAgICAgIHRoaXMuaG9zdC5jb21taXQoKTtcbiAgICAgICAgfVxuICAgICAgICB0ZWFyZG93bigpIHtcbiAgICAgICAgICAgIHN1cGVyLnRlYXJkb3duKCk7XG4gICAgICAgICAgICBsZXQgcGFydCA9IHNjaGVkdWxlclRvUGFydC5nZXQodGhpcyk7XG4gICAgICAgICAgICBwYXJ0VG9TY2hlZHVsZXIuZGVsZXRlKHBhcnQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGZ1bmN0aW9uIHZpcnR1YWwocmVuZGVyZXIpIHtcbiAgICAgICAgZnVuY3Rpb24gZmFjdG9yeSguLi5hcmdzKSB7XG4gICAgICAgICAgICByZXR1cm4gKHBhcnQpID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgY29udCA9IHBhcnRUb1NjaGVkdWxlci5nZXQocGFydCk7XG4gICAgICAgICAgICAgICAgaWYgKCFjb250KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnQgPSBuZXcgU2NoZWR1bGVyKHJlbmRlcmVyLCBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgcGFydFRvU2NoZWR1bGVyLnNldChwYXJ0LCBjb250KTtcbiAgICAgICAgICAgICAgICAgICAgc2NoZWR1bGVyVG9QYXJ0LnNldChjb250LCBwYXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgdGVhcmRvd25PblJlbW92ZShjb250LCBwYXJ0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29udC5hcmdzID0gYXJncztcbiAgICAgICAgICAgICAgICBjb250LnVwZGF0ZSgpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGlyZWN0aXZlKGZhY3RvcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdmlydHVhbDtcbn1cbmZ1bmN0aW9uIHRlYXJkb3duT25SZW1vdmUoY29udCwgcGFydCwgbm9kZSA9IHBhcnQuc3RhcnROb2RlKSB7XG4gICAgbGV0IGZyYWcgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgbGV0IG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobXV0YXRpb25zID0+IHtcbiAgICAgICAgZm9yIChsZXQgbXV0YXRpb24gb2YgbXV0YXRpb25zKSB7XG4gICAgICAgICAgICBpZiAoaW5jbHVkZXMuY2FsbChtdXRhdGlvbi5yZW1vdmVkTm9kZXMsIG5vZGUpKSB7XG4gICAgICAgICAgICAgICAgbW8uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgICAgIGlmIChub2RlLnBhcmVudE5vZGUgaW5zdGFuY2VvZiBTaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgICAgIHRlYXJkb3duT25SZW1vdmUoY29udCwgcGFydCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb250LnRlYXJkb3duKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoaW5jbHVkZXMuY2FsbChtdXRhdGlvbi5hZGRlZE5vZGVzLCBub2RlLm5leHRTaWJsaW5nKSkge1xuICAgICAgICAgICAgICAgIG1vLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB0ZWFyZG93bk9uUmVtb3ZlKGNvbnQsIHBhcnQsIG5vZGUubmV4dFNpYmxpbmcgfHwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIG1vLm9ic2VydmUoZnJhZywgeyBjaGlsZExpc3Q6IHRydWUgfSk7XG59XG5leHBvcnQgeyBtYWtlVmlydHVhbCB9O1xuIiwgImltcG9ydCB7IGh0bWwsIHJlbmRlciB9IGZyb20gJ2xpdC1odG1sJztcbmltcG9ydCBoYXVudGVkIGZyb20gJy4vY29yZSc7XG5pbXBvcnQgeyBtYWtlVmlydHVhbCB9IGZyb20gJy4vdmlydHVhbCc7XG5jb25zdCB7IGNvbXBvbmVudCwgY3JlYXRlQ29udGV4dCB9ID0gaGF1bnRlZCh7IHJlbmRlciB9KTtcbmNvbnN0IHZpcnR1YWwgPSBtYWtlVmlydHVhbCgpO1xuZXhwb3J0IHsgY29tcG9uZW50LCBjcmVhdGVDb250ZXh0LCB2aXJ0dWFsLCBodG1sLCByZW5kZXIgfTtcbiIsICJpbXBvcnQgdHNsaWIgZnJvbSAnLi4vdHNsaWIuanMnO1xyXG5jb25zdCB7XHJcbiAgICBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbixcclxuICAgIF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtLFxyXG4gICAgX19tZXRhZGF0YSxcclxuICAgIF9fYXdhaXRlcixcclxuICAgIF9fZ2VuZXJhdG9yLFxyXG4gICAgX19leHBvcnRTdGFyLFxyXG4gICAgX19jcmVhdGVCaW5kaW5nLFxyXG4gICAgX192YWx1ZXMsXHJcbiAgICBfX3JlYWQsXHJcbiAgICBfX3NwcmVhZCxcclxuICAgIF9fc3ByZWFkQXJyYXlzLFxyXG4gICAgX19hd2FpdCxcclxuICAgIF9fYXN5bmNHZW5lcmF0b3IsXHJcbiAgICBfX2FzeW5jRGVsZWdhdG9yLFxyXG4gICAgX19hc3luY1ZhbHVlcyxcclxuICAgIF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxyXG4gICAgX19pbXBvcnRTdGFyLFxyXG4gICAgX19pbXBvcnREZWZhdWx0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXHJcbn0gPSB0c2xpYjtcclxuZXhwb3J0IHtcclxuICAgIF9fZXh0ZW5kcyxcclxuICAgIF9fYXNzaWduLFxyXG4gICAgX19yZXN0LFxyXG4gICAgX19kZWNvcmF0ZSxcclxuICAgIF9fcGFyYW0sXHJcbiAgICBfX21ldGFkYXRhLFxyXG4gICAgX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3IsXHJcbiAgICBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZCxcclxuICAgIF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXMsXHJcbiAgICBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCxcclxufTtcclxuIiwgImltcG9ydCB0c2xpYiBmcm9tICcuLi90c2xpYi5qcyc7XHJcbmNvbnN0IHtcclxuICAgIF9fZXh0ZW5kcyxcclxuICAgIF9fYXNzaWduLFxyXG4gICAgX19yZXN0LFxyXG4gICAgX19kZWNvcmF0ZSxcclxuICAgIF9fcGFyYW0sXHJcbiAgICBfX21ldGFkYXRhLFxyXG4gICAgX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3IsXHJcbiAgICBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZCxcclxuICAgIF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXMsXHJcbiAgICBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCxcclxufSA9IHRzbGliO1xyXG5leHBvcnQge1xyXG4gICAgX19leHRlbmRzLFxyXG4gICAgX19hc3NpZ24sXHJcbiAgICBfX3Jlc3QsXHJcbiAgICBfX2RlY29yYXRlLFxyXG4gICAgX19wYXJhbSxcclxuICAgIF9fbWV0YWRhdGEsXHJcbiAgICBfX2F3YWl0ZXIsXHJcbiAgICBfX2dlbmVyYXRvcixcclxuICAgIF9fZXhwb3J0U3RhcixcclxuICAgIF9fY3JlYXRlQmluZGluZyxcclxuICAgIF9fdmFsdWVzLFxyXG4gICAgX19yZWFkLFxyXG4gICAgX19zcHJlYWQsXHJcbiAgICBfX3NwcmVhZEFycmF5cyxcclxuICAgIF9fYXdhaXQsXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yLFxyXG4gICAgX19hc3luY0RlbGVnYXRvcixcclxuICAgIF9fYXN5bmNWYWx1ZXMsXHJcbiAgICBfX21ha2VUZW1wbGF0ZU9iamVjdCxcclxuICAgIF9faW1wb3J0U3RhcixcclxuICAgIF9faW1wb3J0RGVmYXVsdCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRHZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0LFxyXG59O1xyXG4iLCAiKGZ1bmN0aW9uIChPYmplY3QpIHtcbiAgdHlwZW9mIGdsb2JhbFRoaXMgIT09ICdvYmplY3QnICYmIChcbiAgICB0aGlzID9cbiAgICAgIGdldCgpIDpcbiAgICAgIChPYmplY3QuZGVmaW5lUHJvcGVydHkoT2JqZWN0LnByb3RvdHlwZSwgJ19UXycsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBnZXQ6IGdldFxuICAgICAgfSksIF9UXylcbiAgKTtcbiAgZnVuY3Rpb24gZ2V0KCkge1xuICAgIHZhciBnbG9iYWwgPSB0aGlzIHx8IHNlbGY7XG4gICAgZ2xvYmFsLmdsb2JhbFRoaXMgPSBnbG9iYWw7XG4gICAgZGVsZXRlIE9iamVjdC5wcm90b3R5cGUuX1RfO1xuICB9XG59KE9iamVjdCkpO1xuZXhwb3J0IGRlZmF1bHQgZ2xvYmFsVGhpcztcbiIsICJpbXBvcnQgZ2xvYmFsVGhpcyBmcm9tIFwiQHVuZ2FwL2dsb2JhbC10aGlzXCI7XG5jb25zdCBnbG9iYWwgPSBnbG9iYWxUaGlzIGFzIGFueTtcbmNvbnN0IGNvbnNvbGUgPSBnbG9iYWwuY29uc29sZTtcblxuY29uc3QgZ2VuZXJpY01lc3NhZ2UgPSBcIkludmFyaWFudCBWaW9sYXRpb25cIjtcbmNvbnN0IHtcbiAgc2V0UHJvdG90eXBlT2YgPSBmdW5jdGlvbiAob2JqOiBhbnksIHByb3RvOiBhbnkpIHtcbiAgICBvYmouX19wcm90b19fID0gcHJvdG87XG4gICAgcmV0dXJuIG9iajtcbiAgfSxcbn0gPSBPYmplY3QgYXMgYW55O1xuXG5leHBvcnQgY2xhc3MgSW52YXJpYW50RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGZyYW1lc1RvUG9wID0gMTtcbiAgbmFtZSA9IGdlbmVyaWNNZXNzYWdlO1xuICBjb25zdHJ1Y3RvcihtZXNzYWdlOiBzdHJpbmcgfCBudW1iZXIgPSBnZW5lcmljTWVzc2FnZSkge1xuICAgIHN1cGVyKFxuICAgICAgdHlwZW9mIG1lc3NhZ2UgPT09IFwibnVtYmVyXCJcbiAgICAgICAgPyBgJHtnZW5lcmljTWVzc2FnZX06ICR7bWVzc2FnZX0gKHNlZSBodHRwczovL2dpdGh1Yi5jb20vYXBvbGxvZ3JhcGhxbC9pbnZhcmlhbnQtcGFja2FnZXMpYFxuICAgICAgICA6IG1lc3NhZ2VcbiAgICApO1xuICAgIHNldFByb3RvdHlwZU9mKHRoaXMsIEludmFyaWFudEVycm9yLnByb3RvdHlwZSk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGludmFyaWFudChcbiAgY29uZGl0aW9uOiBhbnksXG4gIG1lc3NhZ2U/OiBzdHJpbmcgfCBudW1iZXIsXG4pOiBhc3NlcnRzIGNvbmRpdGlvbiB7XG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKG1lc3NhZ2UpO1xuICB9XG59XG5cbmNvbnN0IHZlcmJvc2l0eUxldmVscyA9IFtcImxvZ1wiLCBcIndhcm5cIiwgXCJlcnJvclwiLCBcInNpbGVudFwiXSBhcyBjb25zdDtcbnR5cGUgVmVyYm9zaXR5TGV2ZWwgPSAodHlwZW9mIHZlcmJvc2l0eUxldmVscylbbnVtYmVyXTtcbnR5cGUgQ29uc29sZU1ldGhvZE5hbWUgPSBFeGNsdWRlPFZlcmJvc2l0eUxldmVsLCBcInNpbGVudFwiPjtcbmxldCB2ZXJib3NpdHlMZXZlbCA9IHZlcmJvc2l0eUxldmVscy5pbmRleE9mKFwibG9nXCIpO1xuXG5mdW5jdGlvbiB3cmFwQ29uc29sZU1ldGhvZDxNIGV4dGVuZHMgQ29uc29sZU1ldGhvZE5hbWU+KG1ldGhvZDogTSkge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGlmICh2ZXJib3NpdHlMZXZlbHMuaW5kZXhPZihtZXRob2QpID49IHZlcmJvc2l0eUxldmVsKSB7XG4gICAgICByZXR1cm4gY29uc29sZVttZXRob2RdLmFwcGx5KGNvbnNvbGUsIGFyZ3VtZW50cyBhcyBhbnkpO1xuICAgIH1cbiAgfSBhcyAodHlwZW9mIGNvbnNvbGUpW01dO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIGludmFyaWFudCB7XG4gIGV4cG9ydCBjb25zdCBsb2cgPSB3cmFwQ29uc29sZU1ldGhvZChcImxvZ1wiKTtcbiAgZXhwb3J0IGNvbnN0IHdhcm4gPSB3cmFwQ29uc29sZU1ldGhvZChcIndhcm5cIik7XG4gIGV4cG9ydCBjb25zdCBlcnJvciA9IHdyYXBDb25zb2xlTWV0aG9kKFwiZXJyb3JcIik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRWZXJib3NpdHkobGV2ZWw6IFZlcmJvc2l0eUxldmVsKTogVmVyYm9zaXR5TGV2ZWwge1xuICBjb25zdCBvbGQgPSB2ZXJib3NpdHlMZXZlbHNbdmVyYm9zaXR5TGV2ZWxdO1xuICB2ZXJib3NpdHlMZXZlbCA9IE1hdGgubWF4KDAsIHZlcmJvc2l0eUxldmVscy5pbmRleE9mKGxldmVsKSk7XG4gIHJldHVybiBvbGQ7XG59XG5cbi8vIENvZGUgdGhhdCB1c2VzIHRzLWludmFyaWFudCB3aXRoIHJvbGx1cC1wbHVnaW4taW52YXJpYW50IG1heSB3YW50IHRvXG4vLyBpbXBvcnQgdGhpcyBwcm9jZXNzIHN0dWIgdG8gYXZvaWQgZXJyb3JzIGV2YWx1YXRpbmcgcHJvY2Vzcy5lbnYuTk9ERV9FTlYuXG4vLyBIb3dldmVyLCBiZWNhdXNlIG1vc3QgRVNNLXRvLUNKUyBjb21waWxlcnMgd2lsbCByZXdyaXRlIHRoZSBwcm9jZXNzIGltcG9ydFxuLy8gYXMgdHNJbnZhcmlhbnQucHJvY2Vzcywgd2hpY2ggcHJldmVudHMgcHJvcGVyIHJlcGxhY2VtZW50IGJ5IG1pbmlmaWVycywgd2Vcbi8vIGFsc28gYXR0ZW1wdCB0byBkZWZpbmUgdGhlIHN0dWIgZ2xvYmFsbHkgd2hlbiBpdCBpcyBub3QgYWxyZWFkeSBkZWZpbmVkLlxuY29uc3QgcHJvY2Vzc1N0dWIgPSBnbG9iYWwucHJvY2VzcyB8fCB7IGVudjoge30gfTtcbmV4cG9ydCB7IHByb2Nlc3NTdHViIGFzIHByb2Nlc3MgfTtcbmlmICghZ2xvYmFsLnByb2Nlc3MpIHRyeSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShnbG9iYWxUaGlzLCBcInByb2Nlc3NcIiwge1xuICAgIHZhbHVlOiBwcm9jZXNzU3R1YixcbiAgfSk7XG59IGNhdGNoIHtcbiAgLy8gSWYgdGhpcyBmYWlscywgaXQgaXNuJ3QgdGhlIGVuZCBvZiB0aGUgd29ybGQuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGludmFyaWFudDtcbiIsICJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbi8qKlxuICogUmV0dXJuIHRydWUgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZS4gQSB2YWx1ZSBpcyBvYmplY3QtbGlrZSBpZiBpdCdzIG5vdFxuICogYG51bGxgIGFuZCBoYXMgYSBgdHlwZW9mYCByZXN1bHQgb2YgXCJvYmplY3RcIi5cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiBfdHlwZW9mKHZhbHVlKSA9PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbDtcbn1cbiIsICIvLyBJbiBFUzIwMTUgKG9yIGEgcG9seWZpbGxlZCkgZW52aXJvbm1lbnQsIHRoaXMgd2lsbCBiZSBTeW1ib2wuaXRlcmF0b3Jcbi8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0IChTZWU6ICdodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhxbC9ncmFwaHFsLWpzL2lzc3Vlcy8yMzE3JylcbmV4cG9ydCB2YXIgU1lNQk9MX0lURVJBVE9SID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiBTeW1ib2wuaXRlcmF0b3IgIT0gbnVsbCA/IFN5bWJvbC5pdGVyYXRvciA6ICdAQGl0ZXJhdG9yJzsgLy8gSW4gRVMyMDE3IChvciBhIHBvbHlmaWxsZWQpIGVudmlyb25tZW50LCB0aGlzIHdpbGwgYmUgU3ltYm9sLmFzeW5jSXRlcmF0b3Jcbi8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0IChTZWU6ICdodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhxbC9ncmFwaHFsLWpzL2lzc3Vlcy8yMzE3JylcblxuZXhwb3J0IHZhciBTWU1CT0xfQVNZTkNfSVRFUkFUT1IgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC5hc3luY0l0ZXJhdG9yICE9IG51bGwgPyBTeW1ib2wuYXN5bmNJdGVyYXRvciA6ICdAQGFzeW5jSXRlcmF0b3InOyAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAoU2VlOiAnaHR0cHM6Ly9naXRodWIuY29tL2dyYXBocWwvZ3JhcGhxbC1qcy9pc3N1ZXMvMjMxNycpXG5cbmV4cG9ydCB2YXIgU1lNQk9MX1RPX1NUUklOR19UQUcgPSB0eXBlb2YgU3ltYm9sID09PSAnZnVuY3Rpb24nICYmIFN5bWJvbC50b1N0cmluZ1RhZyAhPSBudWxsID8gU3ltYm9sLnRvU3RyaW5nVGFnIDogJ0BAdG9TdHJpbmdUYWcnO1xuIiwgIi8qKlxuICogUmVwcmVzZW50cyBhIGxvY2F0aW9uIGluIGEgU291cmNlLlxuICovXG5cbi8qKlxuICogVGFrZXMgYSBTb3VyY2UgYW5kIGEgVVRGLTggY2hhcmFjdGVyIG9mZnNldCwgYW5kIHJldHVybnMgdGhlIGNvcnJlc3BvbmRpbmdcbiAqIGxpbmUgYW5kIGNvbHVtbiBhcyBhIFNvdXJjZUxvY2F0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0TG9jYXRpb24oc291cmNlLCBwb3NpdGlvbikge1xuICB2YXIgbGluZVJlZ2V4cCA9IC9cXHJcXG58W1xcblxccl0vZztcbiAgdmFyIGxpbmUgPSAxO1xuICB2YXIgY29sdW1uID0gcG9zaXRpb24gKyAxO1xuICB2YXIgbWF0Y2g7XG5cbiAgd2hpbGUgKChtYXRjaCA9IGxpbmVSZWdleHAuZXhlYyhzb3VyY2UuYm9keSkpICYmIG1hdGNoLmluZGV4IDwgcG9zaXRpb24pIHtcbiAgICBsaW5lICs9IDE7XG4gICAgY29sdW1uID0gcG9zaXRpb24gKyAxIC0gKG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbGluZTogbGluZSxcbiAgICBjb2x1bW46IGNvbHVtblxuICB9O1xufVxuIiwgImltcG9ydCB7IGdldExvY2F0aW9uIH0gZnJvbSBcIi4vbG9jYXRpb24ubWpzXCI7XG4vKipcbiAqIFJlbmRlciBhIGhlbHBmdWwgZGVzY3JpcHRpb24gb2YgdGhlIGxvY2F0aW9uIGluIHRoZSBHcmFwaFFMIFNvdXJjZSBkb2N1bWVudC5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcHJpbnRMb2NhdGlvbihsb2NhdGlvbikge1xuICByZXR1cm4gcHJpbnRTb3VyY2VMb2NhdGlvbihsb2NhdGlvbi5zb3VyY2UsIGdldExvY2F0aW9uKGxvY2F0aW9uLnNvdXJjZSwgbG9jYXRpb24uc3RhcnQpKTtcbn1cbi8qKlxuICogUmVuZGVyIGEgaGVscGZ1bCBkZXNjcmlwdGlvbiBvZiB0aGUgbG9jYXRpb24gaW4gdGhlIEdyYXBoUUwgU291cmNlIGRvY3VtZW50LlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludFNvdXJjZUxvY2F0aW9uKHNvdXJjZSwgc291cmNlTG9jYXRpb24pIHtcbiAgdmFyIGZpcnN0TGluZUNvbHVtbk9mZnNldCA9IHNvdXJjZS5sb2NhdGlvbk9mZnNldC5jb2x1bW4gLSAxO1xuICB2YXIgYm9keSA9IHdoaXRlc3BhY2UoZmlyc3RMaW5lQ29sdW1uT2Zmc2V0KSArIHNvdXJjZS5ib2R5O1xuICB2YXIgbGluZUluZGV4ID0gc291cmNlTG9jYXRpb24ubGluZSAtIDE7XG4gIHZhciBsaW5lT2Zmc2V0ID0gc291cmNlLmxvY2F0aW9uT2Zmc2V0LmxpbmUgLSAxO1xuICB2YXIgbGluZU51bSA9IHNvdXJjZUxvY2F0aW9uLmxpbmUgKyBsaW5lT2Zmc2V0O1xuICB2YXIgY29sdW1uT2Zmc2V0ID0gc291cmNlTG9jYXRpb24ubGluZSA9PT0gMSA/IGZpcnN0TGluZUNvbHVtbk9mZnNldCA6IDA7XG4gIHZhciBjb2x1bW5OdW0gPSBzb3VyY2VMb2NhdGlvbi5jb2x1bW4gKyBjb2x1bW5PZmZzZXQ7XG4gIHZhciBsb2NhdGlvblN0ciA9IFwiXCIuY29uY2F0KHNvdXJjZS5uYW1lLCBcIjpcIikuY29uY2F0KGxpbmVOdW0sIFwiOlwiKS5jb25jYXQoY29sdW1uTnVtLCBcIlxcblwiKTtcbiAgdmFyIGxpbmVzID0gYm9keS5zcGxpdCgvXFxyXFxufFtcXG5cXHJdL2cpO1xuICB2YXIgbG9jYXRpb25MaW5lID0gbGluZXNbbGluZUluZGV4XTsgLy8gU3BlY2lhbCBjYXNlIGZvciBtaW5pZmllZCBkb2N1bWVudHNcblxuICBpZiAobG9jYXRpb25MaW5lLmxlbmd0aCA+IDEyMCkge1xuICAgIHZhciBzdWJMaW5lSW5kZXggPSBNYXRoLmZsb29yKGNvbHVtbk51bSAvIDgwKTtcbiAgICB2YXIgc3ViTGluZUNvbHVtbk51bSA9IGNvbHVtbk51bSAlIDgwO1xuICAgIHZhciBzdWJMaW5lcyA9IFtdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsb2NhdGlvbkxpbmUubGVuZ3RoOyBpICs9IDgwKSB7XG4gICAgICBzdWJMaW5lcy5wdXNoKGxvY2F0aW9uTGluZS5zbGljZShpLCBpICsgODApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbG9jYXRpb25TdHIgKyBwcmludFByZWZpeGVkTGluZXMoW1tcIlwiLmNvbmNhdChsaW5lTnVtKSwgc3ViTGluZXNbMF1dXS5jb25jYXQoc3ViTGluZXMuc2xpY2UoMSwgc3ViTGluZUluZGV4ICsgMSkubWFwKGZ1bmN0aW9uIChzdWJMaW5lKSB7XG4gICAgICByZXR1cm4gWycnLCBzdWJMaW5lXTtcbiAgICB9KSwgW1snICcsIHdoaXRlc3BhY2Uoc3ViTGluZUNvbHVtbk51bSAtIDEpICsgJ14nXSwgWycnLCBzdWJMaW5lc1tzdWJMaW5lSW5kZXggKyAxXV1dKSk7XG4gIH1cblxuICByZXR1cm4gbG9jYXRpb25TdHIgKyBwcmludFByZWZpeGVkTGluZXMoWy8vIExpbmVzIHNwZWNpZmllZCBsaWtlIHRoaXM6IFtcInByZWZpeFwiLCBcInN0cmluZ1wiXSxcbiAgW1wiXCIuY29uY2F0KGxpbmVOdW0gLSAxKSwgbGluZXNbbGluZUluZGV4IC0gMV1dLCBbXCJcIi5jb25jYXQobGluZU51bSksIGxvY2F0aW9uTGluZV0sIFsnJywgd2hpdGVzcGFjZShjb2x1bW5OdW0gLSAxKSArICdeJ10sIFtcIlwiLmNvbmNhdChsaW5lTnVtICsgMSksIGxpbmVzW2xpbmVJbmRleCArIDFdXV0pO1xufVxuXG5mdW5jdGlvbiBwcmludFByZWZpeGVkTGluZXMobGluZXMpIHtcbiAgdmFyIGV4aXN0aW5nTGluZXMgPSBsaW5lcy5maWx0ZXIoZnVuY3Rpb24gKF9yZWYpIHtcbiAgICB2YXIgXyA9IF9yZWZbMF0sXG4gICAgICAgIGxpbmUgPSBfcmVmWzFdO1xuICAgIHJldHVybiBsaW5lICE9PSB1bmRlZmluZWQ7XG4gIH0pO1xuICB2YXIgcGFkTGVuID0gTWF0aC5tYXguYXBwbHkoTWF0aCwgZXhpc3RpbmdMaW5lcy5tYXAoZnVuY3Rpb24gKF9yZWYyKSB7XG4gICAgdmFyIHByZWZpeCA9IF9yZWYyWzBdO1xuICAgIHJldHVybiBwcmVmaXgubGVuZ3RoO1xuICB9KSk7XG4gIHJldHVybiBleGlzdGluZ0xpbmVzLm1hcChmdW5jdGlvbiAoX3JlZjMpIHtcbiAgICB2YXIgcHJlZml4ID0gX3JlZjNbMF0sXG4gICAgICAgIGxpbmUgPSBfcmVmM1sxXTtcbiAgICByZXR1cm4gbGVmdFBhZChwYWRMZW4sIHByZWZpeCkgKyAobGluZSA/ICcgfCAnICsgbGluZSA6ICcgfCcpO1xuICB9KS5qb2luKCdcXG4nKTtcbn1cblxuZnVuY3Rpb24gd2hpdGVzcGFjZShsZW4pIHtcbiAgcmV0dXJuIEFycmF5KGxlbiArIDEpLmpvaW4oJyAnKTtcbn1cblxuZnVuY3Rpb24gbGVmdFBhZChsZW4sIHN0cikge1xuICByZXR1cm4gd2hpdGVzcGFjZShsZW4gLSBzdHIubGVuZ3RoKSArIHN0cjtcbn1cbiIsICJmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyBcIkBiYWJlbC9oZWxwZXJzIC0gdHlwZW9mXCI7IGlmICh0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIikgeyBfdHlwZW9mID0gZnVuY3Rpb24gX3R5cGVvZihvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH07IH0gZWxzZSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gb2JqICYmIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvYmouY29uc3RydWN0b3IgPT09IFN5bWJvbCAmJiBvYmogIT09IFN5bWJvbC5wcm90b3R5cGUgPyBcInN5bWJvbFwiIDogdHlwZW9mIG9iajsgfTsgfSByZXR1cm4gX3R5cGVvZihvYmopOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIF9zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcyk7IH1cblxuZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH1cblxuZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoY2FsbCAmJiAoX3R5cGVvZihjYWxsKSA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSkgeyByZXR1cm4gY2FsbDsgfSByZXR1cm4gX2Fzc2VydFRoaXNJbml0aWFsaXplZChzZWxmKTsgfVxuXG5mdW5jdGlvbiBfYXNzZXJ0VGhpc0luaXRpYWxpemVkKHNlbGYpIHsgaWYgKHNlbGYgPT09IHZvaWQgMCkgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIHNlbGY7IH1cblxuZnVuY3Rpb24gX3dyYXBOYXRpdmVTdXBlcihDbGFzcykgeyB2YXIgX2NhY2hlID0gdHlwZW9mIE1hcCA9PT0gXCJmdW5jdGlvblwiID8gbmV3IE1hcCgpIDogdW5kZWZpbmVkOyBfd3JhcE5hdGl2ZVN1cGVyID0gZnVuY3Rpb24gX3dyYXBOYXRpdmVTdXBlcihDbGFzcykgeyBpZiAoQ2xhc3MgPT09IG51bGwgfHwgIV9pc05hdGl2ZUZ1bmN0aW9uKENsYXNzKSkgcmV0dXJuIENsYXNzOyBpZiAodHlwZW9mIENsYXNzICE9PSBcImZ1bmN0aW9uXCIpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uXCIpOyB9IGlmICh0eXBlb2YgX2NhY2hlICE9PSBcInVuZGVmaW5lZFwiKSB7IGlmIChfY2FjaGUuaGFzKENsYXNzKSkgcmV0dXJuIF9jYWNoZS5nZXQoQ2xhc3MpOyBfY2FjaGUuc2V0KENsYXNzLCBXcmFwcGVyKTsgfSBmdW5jdGlvbiBXcmFwcGVyKCkgeyByZXR1cm4gX2NvbnN0cnVjdChDbGFzcywgYXJndW1lbnRzLCBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3IpOyB9IFdyYXBwZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IFdyYXBwZXIsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IHJldHVybiBfc2V0UHJvdG90eXBlT2YoV3JhcHBlciwgQ2xhc3MpOyB9OyByZXR1cm4gX3dyYXBOYXRpdmVTdXBlcihDbGFzcyk7IH1cblxuZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7IGlmIChfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkpIHsgX2NvbnN0cnVjdCA9IFJlZmxlY3QuY29uc3RydWN0OyB9IGVsc2UgeyBfY29uc3RydWN0ID0gZnVuY3Rpb24gX2NvbnN0cnVjdChQYXJlbnQsIGFyZ3MsIENsYXNzKSB7IHZhciBhID0gW251bGxdOyBhLnB1c2guYXBwbHkoYSwgYXJncyk7IHZhciBDb25zdHJ1Y3RvciA9IEZ1bmN0aW9uLmJpbmQuYXBwbHkoUGFyZW50LCBhKTsgdmFyIGluc3RhbmNlID0gbmV3IENvbnN0cnVjdG9yKCk7IGlmIChDbGFzcykgX3NldFByb3RvdHlwZU9mKGluc3RhbmNlLCBDbGFzcy5wcm90b3R5cGUpOyByZXR1cm4gaW5zdGFuY2U7IH07IH0gcmV0dXJuIF9jb25zdHJ1Y3QuYXBwbHkobnVsbCwgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwidW5kZWZpbmVkXCIgfHwgIVJlZmxlY3QuY29uc3RydWN0KSByZXR1cm4gZmFsc2U7IGlmIChSZWZsZWN0LmNvbnN0cnVjdC5zaGFtKSByZXR1cm4gZmFsc2U7IGlmICh0eXBlb2YgUHJveHkgPT09IFwiZnVuY3Rpb25cIikgcmV0dXJuIHRydWU7IHRyeSB7IERhdGUucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUmVmbGVjdC5jb25zdHJ1Y3QoRGF0ZSwgW10sIGZ1bmN0aW9uICgpIHt9KSk7IHJldHVybiB0cnVlOyB9IGNhdGNoIChlKSB7IHJldHVybiBmYWxzZTsgfSB9XG5cbmZ1bmN0aW9uIF9pc05hdGl2ZUZ1bmN0aW9uKGZuKSB7IHJldHVybiBGdW5jdGlvbi50b1N0cmluZy5jYWxsKGZuKS5pbmRleE9mKFwiW25hdGl2ZSBjb2RlXVwiKSAhPT0gLTE7IH1cblxuZnVuY3Rpb24gX3NldFByb3RvdHlwZU9mKG8sIHApIHsgX3NldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8IGZ1bmN0aW9uIF9zZXRQcm90b3R5cGVPZihvLCBwKSB7IG8uX19wcm90b19fID0gcDsgcmV0dXJuIG87IH07IHJldHVybiBfc2V0UHJvdG90eXBlT2YobywgcCk7IH1cblxuZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgX2dldFByb3RvdHlwZU9mID0gT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LmdldFByb3RvdHlwZU9mIDogZnVuY3Rpb24gX2dldFByb3RvdHlwZU9mKG8pIHsgcmV0dXJuIG8uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihvKTsgfTsgcmV0dXJuIF9nZXRQcm90b3R5cGVPZihvKTsgfVxuXG4vLyBGSVhNRTpcbi8vIGZsb3dsaW50IHVuaW5pdGlhbGl6ZWQtaW5zdGFuY2UtcHJvcGVydHk6b2ZmXG5pbXBvcnQgaXNPYmplY3RMaWtlIGZyb20gXCIuLi9qc3V0aWxzL2lzT2JqZWN0TGlrZS5tanNcIjtcbmltcG9ydCB7IFNZTUJPTF9UT19TVFJJTkdfVEFHIH0gZnJvbSBcIi4uL3BvbHlmaWxscy9zeW1ib2xzLm1qc1wiO1xuaW1wb3J0IHsgZ2V0TG9jYXRpb24gfSBmcm9tIFwiLi4vbGFuZ3VhZ2UvbG9jYXRpb24ubWpzXCI7XG5pbXBvcnQgeyBwcmludExvY2F0aW9uLCBwcmludFNvdXJjZUxvY2F0aW9uIH0gZnJvbSBcIi4uL2xhbmd1YWdlL3ByaW50TG9jYXRpb24ubWpzXCI7XG4vKipcbiAqIEEgR3JhcGhRTEVycm9yIGRlc2NyaWJlcyBhbiBFcnJvciBmb3VuZCBkdXJpbmcgdGhlIHBhcnNlLCB2YWxpZGF0ZSwgb3JcbiAqIGV4ZWN1dGUgcGhhc2VzIG9mIHBlcmZvcm1pbmcgYSBHcmFwaFFMIG9wZXJhdGlvbi4gSW4gYWRkaXRpb24gdG8gYSBtZXNzYWdlXG4gKiBhbmQgc3RhY2sgdHJhY2UsIGl0IGFsc28gaW5jbHVkZXMgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGxvY2F0aW9ucyBpbiBhXG4gKiBHcmFwaFFMIGRvY3VtZW50IGFuZC9vciBleGVjdXRpb24gcmVzdWx0IHRoYXQgY29ycmVzcG9uZCB0byB0aGUgRXJyb3IuXG4gKi9cblxuZXhwb3J0IHZhciBHcmFwaFFMRXJyb3IgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9FcnJvcikge1xuICBfaW5oZXJpdHMoR3JhcGhRTEVycm9yLCBfRXJyb3IpO1xuXG4gIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoR3JhcGhRTEVycm9yKTtcblxuICAvKipcbiAgICogQSBtZXNzYWdlIGRlc2NyaWJpbmcgdGhlIEVycm9yIGZvciBkZWJ1Z2dpbmcgcHVycG9zZXMuXG4gICAqXG4gICAqIEVudW1lcmFibGUsIGFuZCBhcHBlYXJzIGluIHRoZSByZXN1bHQgb2YgSlNPTi5zdHJpbmdpZnkoKS5cbiAgICpcbiAgICogTm90ZTogc2hvdWxkIGJlIHRyZWF0ZWQgYXMgcmVhZG9ubHksIGRlc3BpdGUgaW52YXJpYW50IHVzYWdlLlxuICAgKi9cblxuICAvKipcbiAgICogQW4gYXJyYXkgb2YgeyBsaW5lLCBjb2x1bW4gfSBsb2NhdGlvbnMgd2l0aGluIHRoZSBzb3VyY2UgR3JhcGhRTCBkb2N1bWVudFxuICAgKiB3aGljaCBjb3JyZXNwb25kIHRvIHRoaXMgZXJyb3IuXG4gICAqXG4gICAqIEVycm9ycyBkdXJpbmcgdmFsaWRhdGlvbiBvZnRlbiBjb250YWluIG11bHRpcGxlIGxvY2F0aW9ucywgZm9yIGV4YW1wbGUgdG9cbiAgICogcG9pbnQgb3V0IHR3byB0aGluZ3Mgd2l0aCB0aGUgc2FtZSBuYW1lLiBFcnJvcnMgZHVyaW5nIGV4ZWN1dGlvbiBpbmNsdWRlIGFcbiAgICogc2luZ2xlIGxvY2F0aW9uLCB0aGUgZmllbGQgd2hpY2ggcHJvZHVjZWQgdGhlIGVycm9yLlxuICAgKlxuICAgKiBFbnVtZXJhYmxlLCBhbmQgYXBwZWFycyBpbiB0aGUgcmVzdWx0IG9mIEpTT04uc3RyaW5naWZ5KCkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBkZXNjcmliaW5nIHRoZSBKU09OLXBhdGggaW50byB0aGUgZXhlY3V0aW9uIHJlc3BvbnNlIHdoaWNoXG4gICAqIGNvcnJlc3BvbmRzIHRvIHRoaXMgZXJyb3IuIE9ubHkgaW5jbHVkZWQgZm9yIGVycm9ycyBkdXJpbmcgZXhlY3V0aW9uLlxuICAgKlxuICAgKiBFbnVtZXJhYmxlLCBhbmQgYXBwZWFycyBpbiB0aGUgcmVzdWx0IG9mIEpTT04uc3RyaW5naWZ5KCkuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbiBhcnJheSBvZiBHcmFwaFFMIEFTVCBOb2RlcyBjb3JyZXNwb25kaW5nIHRvIHRoaXMgZXJyb3IuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgc291cmNlIEdyYXBoUUwgZG9jdW1lbnQgZm9yIHRoZSBmaXJzdCBsb2NhdGlvbiBvZiB0aGlzIGVycm9yLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgdGhpcyBFcnJvciByZXByZXNlbnRzIG1vcmUgdGhhbiBvbmUgbm9kZSwgdGhlIHNvdXJjZSBtYXkgbm90XG4gICAqIHJlcHJlc2VudCBub2RlcyBhZnRlciB0aGUgZmlyc3Qgbm9kZS5cbiAgICovXG5cbiAgLyoqXG4gICAqIEFuIGFycmF5IG9mIGNoYXJhY3RlciBvZmZzZXRzIHdpdGhpbiB0aGUgc291cmNlIEdyYXBoUUwgZG9jdW1lbnRcbiAgICogd2hpY2ggY29ycmVzcG9uZCB0byB0aGlzIGVycm9yLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIG9yaWdpbmFsIGVycm9yIHRocm93biBmcm9tIGEgZmllbGQgcmVzb2x2ZXIgZHVyaW5nIGV4ZWN1dGlvbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIEV4dGVuc2lvbiBmaWVsZHMgdG8gYWRkIHRvIHRoZSBmb3JtYXR0ZWQgZXJyb3IuXG4gICAqL1xuICBmdW5jdGlvbiBHcmFwaFFMRXJyb3IobWVzc2FnZSwgbm9kZXMsIHNvdXJjZSwgcG9zaXRpb25zLCBwYXRoLCBvcmlnaW5hbEVycm9yLCBleHRlbnNpb25zKSB7XG4gICAgdmFyIF9sb2NhdGlvbnMyLCBfc291cmNlMiwgX3Bvc2l0aW9uczIsIF9leHRlbnNpb25zMjtcblxuICAgIHZhciBfdGhpcztcblxuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBHcmFwaFFMRXJyb3IpO1xuXG4gICAgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKTsgLy8gQ29tcHV0ZSBsaXN0IG9mIGJsYW1lIG5vZGVzLlxuXG4gICAgdmFyIF9ub2RlcyA9IEFycmF5LmlzQXJyYXkobm9kZXMpID8gbm9kZXMubGVuZ3RoICE9PSAwID8gbm9kZXMgOiB1bmRlZmluZWQgOiBub2RlcyA/IFtub2Rlc10gOiB1bmRlZmluZWQ7IC8vIENvbXB1dGUgbG9jYXRpb25zIGluIHRoZSBzb3VyY2UgZm9yIHRoZSBnaXZlbiBub2Rlcy9wb3NpdGlvbnMuXG5cblxuICAgIHZhciBfc291cmNlID0gc291cmNlO1xuXG4gICAgaWYgKCFfc291cmNlICYmIF9ub2Rlcykge1xuICAgICAgdmFyIF9ub2RlcyQwJGxvYztcblxuICAgICAgX3NvdXJjZSA9IChfbm9kZXMkMCRsb2MgPSBfbm9kZXNbMF0ubG9jKSA9PT0gbnVsbCB8fCBfbm9kZXMkMCRsb2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ub2RlcyQwJGxvYy5zb3VyY2U7XG4gICAgfVxuXG4gICAgdmFyIF9wb3NpdGlvbnMgPSBwb3NpdGlvbnM7XG5cbiAgICBpZiAoIV9wb3NpdGlvbnMgJiYgX25vZGVzKSB7XG4gICAgICBfcG9zaXRpb25zID0gX25vZGVzLnJlZHVjZShmdW5jdGlvbiAobGlzdCwgbm9kZSkge1xuICAgICAgICBpZiAobm9kZS5sb2MpIHtcbiAgICAgICAgICBsaXN0LnB1c2gobm9kZS5sb2Muc3RhcnQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICB9LCBbXSk7XG4gICAgfVxuXG4gICAgaWYgKF9wb3NpdGlvbnMgJiYgX3Bvc2l0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIF9wb3NpdGlvbnMgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgdmFyIF9sb2NhdGlvbnM7XG5cbiAgICBpZiAocG9zaXRpb25zICYmIHNvdXJjZSkge1xuICAgICAgX2xvY2F0aW9ucyA9IHBvc2l0aW9ucy5tYXAoZnVuY3Rpb24gKHBvcykge1xuICAgICAgICByZXR1cm4gZ2V0TG9jYXRpb24oc291cmNlLCBwb3MpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChfbm9kZXMpIHtcbiAgICAgIF9sb2NhdGlvbnMgPSBfbm9kZXMucmVkdWNlKGZ1bmN0aW9uIChsaXN0LCBub2RlKSB7XG4gICAgICAgIGlmIChub2RlLmxvYykge1xuICAgICAgICAgIGxpc3QucHVzaChnZXRMb2NhdGlvbihub2RlLmxvYy5zb3VyY2UsIG5vZGUubG9jLnN0YXJ0KSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gbGlzdDtcbiAgICAgIH0sIFtdKTtcbiAgICB9XG5cbiAgICB2YXIgX2V4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuXG4gICAgaWYgKF9leHRlbnNpb25zID09IG51bGwgJiYgb3JpZ2luYWxFcnJvciAhPSBudWxsKSB7XG4gICAgICB2YXIgb3JpZ2luYWxFeHRlbnNpb25zID0gb3JpZ2luYWxFcnJvci5leHRlbnNpb25zO1xuXG4gICAgICBpZiAoaXNPYmplY3RMaWtlKG9yaWdpbmFsRXh0ZW5zaW9ucykpIHtcbiAgICAgICAgX2V4dGVuc2lvbnMgPSBvcmlnaW5hbEV4dGVuc2lvbnM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIHtcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgdmFsdWU6ICdHcmFwaFFMRXJyb3InXG4gICAgICB9LFxuICAgICAgbWVzc2FnZToge1xuICAgICAgICB2YWx1ZTogbWVzc2FnZSxcbiAgICAgICAgLy8gQnkgYmVpbmcgZW51bWVyYWJsZSwgSlNPTi5zdHJpbmdpZnkgd2lsbCBpbmNsdWRlIGBtZXNzYWdlYCBpbiB0aGVcbiAgICAgICAgLy8gcmVzdWx0aW5nIG91dHB1dC4gVGhpcyBlbnN1cmVzIHRoYXQgdGhlIHNpbXBsZXN0IHBvc3NpYmxlIEdyYXBoUUxcbiAgICAgICAgLy8gc2VydmljZSBhZGhlcmVzIHRvIHRoZSBzcGVjLlxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZVxuICAgICAgfSxcbiAgICAgIGxvY2F0aW9uczoge1xuICAgICAgICAvLyBDb2VyY2luZyBmYWxzeSB2YWx1ZXMgdG8gdW5kZWZpbmVkIGVuc3VyZXMgdGhleSB3aWxsIG5vdCBiZSBpbmNsdWRlZFxuICAgICAgICAvLyBpbiBKU09OLnN0cmluZ2lmeSgpIHdoZW4gbm90IHByb3ZpZGVkLlxuICAgICAgICB2YWx1ZTogKF9sb2NhdGlvbnMyID0gX2xvY2F0aW9ucykgIT09IG51bGwgJiYgX2xvY2F0aW9uczIgIT09IHZvaWQgMCA/IF9sb2NhdGlvbnMyIDogdW5kZWZpbmVkLFxuICAgICAgICAvLyBCeSBiZWluZyBlbnVtZXJhYmxlLCBKU09OLnN0cmluZ2lmeSB3aWxsIGluY2x1ZGUgYGxvY2F0aW9uc2AgaW4gdGhlXG4gICAgICAgIC8vIHJlc3VsdGluZyBvdXRwdXQuIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBzaW1wbGVzdCBwb3NzaWJsZSBHcmFwaFFMXG4gICAgICAgIC8vIHNlcnZpY2UgYWRoZXJlcyB0byB0aGUgc3BlYy5cbiAgICAgICAgZW51bWVyYWJsZTogX2xvY2F0aW9ucyAhPSBudWxsXG4gICAgICB9LFxuICAgICAgcGF0aDoge1xuICAgICAgICAvLyBDb2VyY2luZyBmYWxzeSB2YWx1ZXMgdG8gdW5kZWZpbmVkIGVuc3VyZXMgdGhleSB3aWxsIG5vdCBiZSBpbmNsdWRlZFxuICAgICAgICAvLyBpbiBKU09OLnN0cmluZ2lmeSgpIHdoZW4gbm90IHByb3ZpZGVkLlxuICAgICAgICB2YWx1ZTogcGF0aCAhPT0gbnVsbCAmJiBwYXRoICE9PSB2b2lkIDAgPyBwYXRoIDogdW5kZWZpbmVkLFxuICAgICAgICAvLyBCeSBiZWluZyBlbnVtZXJhYmxlLCBKU09OLnN0cmluZ2lmeSB3aWxsIGluY2x1ZGUgYHBhdGhgIGluIHRoZVxuICAgICAgICAvLyByZXN1bHRpbmcgb3V0cHV0LiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUgc2ltcGxlc3QgcG9zc2libGUgR3JhcGhRTFxuICAgICAgICAvLyBzZXJ2aWNlIGFkaGVyZXMgdG8gdGhlIHNwZWMuXG4gICAgICAgIGVudW1lcmFibGU6IHBhdGggIT0gbnVsbFxuICAgICAgfSxcbiAgICAgIG5vZGVzOiB7XG4gICAgICAgIHZhbHVlOiBfbm9kZXMgIT09IG51bGwgJiYgX25vZGVzICE9PSB2b2lkIDAgPyBfbm9kZXMgOiB1bmRlZmluZWRcbiAgICAgIH0sXG4gICAgICBzb3VyY2U6IHtcbiAgICAgICAgdmFsdWU6IChfc291cmNlMiA9IF9zb3VyY2UpICE9PSBudWxsICYmIF9zb3VyY2UyICE9PSB2b2lkIDAgPyBfc291cmNlMiA6IHVuZGVmaW5lZFxuICAgICAgfSxcbiAgICAgIHBvc2l0aW9uczoge1xuICAgICAgICB2YWx1ZTogKF9wb3NpdGlvbnMyID0gX3Bvc2l0aW9ucykgIT09IG51bGwgJiYgX3Bvc2l0aW9uczIgIT09IHZvaWQgMCA/IF9wb3NpdGlvbnMyIDogdW5kZWZpbmVkXG4gICAgICB9LFxuICAgICAgb3JpZ2luYWxFcnJvcjoge1xuICAgICAgICB2YWx1ZTogb3JpZ2luYWxFcnJvclxuICAgICAgfSxcbiAgICAgIGV4dGVuc2lvbnM6IHtcbiAgICAgICAgLy8gQ29lcmNpbmcgZmFsc3kgdmFsdWVzIHRvIHVuZGVmaW5lZCBlbnN1cmVzIHRoZXkgd2lsbCBub3QgYmUgaW5jbHVkZWRcbiAgICAgICAgLy8gaW4gSlNPTi5zdHJpbmdpZnkoKSB3aGVuIG5vdCBwcm92aWRlZC5cbiAgICAgICAgdmFsdWU6IChfZXh0ZW5zaW9uczIgPSBfZXh0ZW5zaW9ucykgIT09IG51bGwgJiYgX2V4dGVuc2lvbnMyICE9PSB2b2lkIDAgPyBfZXh0ZW5zaW9uczIgOiB1bmRlZmluZWQsXG4gICAgICAgIC8vIEJ5IGJlaW5nIGVudW1lcmFibGUsIEpTT04uc3RyaW5naWZ5IHdpbGwgaW5jbHVkZSBgcGF0aGAgaW4gdGhlXG4gICAgICAgIC8vIHJlc3VsdGluZyBvdXRwdXQuIFRoaXMgZW5zdXJlcyB0aGF0IHRoZSBzaW1wbGVzdCBwb3NzaWJsZSBHcmFwaFFMXG4gICAgICAgIC8vIHNlcnZpY2UgYWRoZXJlcyB0byB0aGUgc3BlYy5cbiAgICAgICAgZW51bWVyYWJsZTogX2V4dGVuc2lvbnMgIT0gbnVsbFxuICAgICAgfVxuICAgIH0pOyAvLyBJbmNsdWRlIChub24tZW51bWVyYWJsZSkgc3RhY2sgdHJhY2UuXG5cbiAgICBpZiAob3JpZ2luYWxFcnJvciAhPT0gbnVsbCAmJiBvcmlnaW5hbEVycm9yICE9PSB2b2lkIDAgJiYgb3JpZ2luYWxFcnJvci5zdGFjaykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9hc3NlcnRUaGlzSW5pdGlhbGl6ZWQoX3RoaXMpLCAnc3RhY2snLCB7XG4gICAgICAgIHZhbHVlOiBvcmlnaW5hbEVycm9yLnN0YWNrLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpcyk7XG4gICAgfSAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAoU2VlOiAnaHR0cHM6Ly9naXRodWIuY29tL2dyYXBocWwvZ3JhcGhxbC1qcy9pc3N1ZXMvMjMxNycpXG5cblxuICAgIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UoX2Fzc2VydFRoaXNJbml0aWFsaXplZChfdGhpcyksIEdyYXBoUUxFcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfYXNzZXJ0VGhpc0luaXRpYWxpemVkKF90aGlzKSwgJ3N0YWNrJywge1xuICAgICAgICB2YWx1ZTogRXJyb3IoKS5zdGFjayxcbiAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIF90aGlzO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKEdyYXBoUUxFcnJvciwgW3tcbiAgICBrZXk6IFwidG9TdHJpbmdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoKSB7XG4gICAgICByZXR1cm4gcHJpbnRFcnJvcih0aGlzKTtcbiAgICB9IC8vIEZJWE1FOiB3b3JrYXJvdW5kIHRvIG5vdCBicmVhayBjaGFpIGNvbXBhcmlzb25zLCBzaG91bGQgYmUgcmVtb3ZlIGluIHYxNlxuICAgIC8vICRGbG93Rml4TWVbdW5zdXBwb3J0ZWQtc3ludGF4XSBGbG93IGRvZXNuJ3Qgc3VwcG9ydCBjb21wdXRlZCBwcm9wZXJ0aWVzIHlldFxuXG4gIH0sIHtcbiAgICBrZXk6IFNZTUJPTF9UT19TVFJJTkdfVEFHLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuICdPYmplY3QnO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBHcmFwaFFMRXJyb3I7XG59KCAvKiNfX1BVUkVfXyovX3dyYXBOYXRpdmVTdXBlcihFcnJvcikpO1xuLyoqXG4gKiBQcmludHMgYSBHcmFwaFFMRXJyb3IgdG8gYSBzdHJpbmcsIHJlcHJlc2VudGluZyB1c2VmdWwgbG9jYXRpb24gaW5mb3JtYXRpb25cbiAqIGFib3V0IHRoZSBlcnJvcidzIHBvc2l0aW9uIGluIHRoZSBzb3VyY2UuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHByaW50RXJyb3IoZXJyb3IpIHtcbiAgdmFyIG91dHB1dCA9IGVycm9yLm1lc3NhZ2U7XG5cbiAgaWYgKGVycm9yLm5vZGVzKSB7XG4gICAgZm9yICh2YXIgX2kyID0gMCwgX2Vycm9yJG5vZGVzMiA9IGVycm9yLm5vZGVzOyBfaTIgPCBfZXJyb3Ikbm9kZXMyLmxlbmd0aDsgX2kyKyspIHtcbiAgICAgIHZhciBub2RlID0gX2Vycm9yJG5vZGVzMltfaTJdO1xuXG4gICAgICBpZiAobm9kZS5sb2MpIHtcbiAgICAgICAgb3V0cHV0ICs9ICdcXG5cXG4nICsgcHJpbnRMb2NhdGlvbihub2RlLmxvYyk7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGVycm9yLnNvdXJjZSAmJiBlcnJvci5sb2NhdGlvbnMpIHtcbiAgICBmb3IgKHZhciBfaTQgPSAwLCBfZXJyb3IkbG9jYXRpb25zMiA9IGVycm9yLmxvY2F0aW9uczsgX2k0IDwgX2Vycm9yJGxvY2F0aW9uczIubGVuZ3RoOyBfaTQrKykge1xuICAgICAgdmFyIGxvY2F0aW9uID0gX2Vycm9yJGxvY2F0aW9uczJbX2k0XTtcbiAgICAgIG91dHB1dCArPSAnXFxuXFxuJyArIHByaW50U291cmNlTG9jYXRpb24oZXJyb3Iuc291cmNlLCBsb2NhdGlvbik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG91dHB1dDtcbn1cbiIsICJpbXBvcnQgeyBHcmFwaFFMRXJyb3IgfSBmcm9tIFwiLi9HcmFwaFFMRXJyb3IubWpzXCI7XG4vKipcbiAqIFByb2R1Y2VzIGEgR3JhcGhRTEVycm9yIHJlcHJlc2VudGluZyBhIHN5bnRheCBlcnJvciwgY29udGFpbmluZyB1c2VmdWxcbiAqIGRlc2NyaXB0aXZlIGluZm9ybWF0aW9uIGFib3V0IHRoZSBzeW50YXggZXJyb3IncyBwb3NpdGlvbiBpbiB0aGUgc291cmNlLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBzeW50YXhFcnJvcihzb3VyY2UsIHBvc2l0aW9uLCBkZXNjcmlwdGlvbikge1xuICByZXR1cm4gbmV3IEdyYXBoUUxFcnJvcihcIlN5bnRheCBFcnJvcjogXCIuY29uY2F0KGRlc2NyaXB0aW9uKSwgdW5kZWZpbmVkLCBzb3VyY2UsIFtwb3NpdGlvbl0pO1xufVxuIiwgIi8qKlxuICogVGhlIHNldCBvZiBhbGxvd2VkIGtpbmQgdmFsdWVzIGZvciBBU1Qgbm9kZXMuXG4gKi9cbmV4cG9ydCB2YXIgS2luZCA9IE9iamVjdC5mcmVlemUoe1xuICAvLyBOYW1lXG4gIE5BTUU6ICdOYW1lJyxcbiAgLy8gRG9jdW1lbnRcbiAgRE9DVU1FTlQ6ICdEb2N1bWVudCcsXG4gIE9QRVJBVElPTl9ERUZJTklUSU9OOiAnT3BlcmF0aW9uRGVmaW5pdGlvbicsXG4gIFZBUklBQkxFX0RFRklOSVRJT046ICdWYXJpYWJsZURlZmluaXRpb24nLFxuICBTRUxFQ1RJT05fU0VUOiAnU2VsZWN0aW9uU2V0JyxcbiAgRklFTEQ6ICdGaWVsZCcsXG4gIEFSR1VNRU5UOiAnQXJndW1lbnQnLFxuICAvLyBGcmFnbWVudHNcbiAgRlJBR01FTlRfU1BSRUFEOiAnRnJhZ21lbnRTcHJlYWQnLFxuICBJTkxJTkVfRlJBR01FTlQ6ICdJbmxpbmVGcmFnbWVudCcsXG4gIEZSQUdNRU5UX0RFRklOSVRJT046ICdGcmFnbWVudERlZmluaXRpb24nLFxuICAvLyBWYWx1ZXNcbiAgVkFSSUFCTEU6ICdWYXJpYWJsZScsXG4gIElOVDogJ0ludFZhbHVlJyxcbiAgRkxPQVQ6ICdGbG9hdFZhbHVlJyxcbiAgU1RSSU5HOiAnU3RyaW5nVmFsdWUnLFxuICBCT09MRUFOOiAnQm9vbGVhblZhbHVlJyxcbiAgTlVMTDogJ051bGxWYWx1ZScsXG4gIEVOVU06ICdFbnVtVmFsdWUnLFxuICBMSVNUOiAnTGlzdFZhbHVlJyxcbiAgT0JKRUNUOiAnT2JqZWN0VmFsdWUnLFxuICBPQkpFQ1RfRklFTEQ6ICdPYmplY3RGaWVsZCcsXG4gIC8vIERpcmVjdGl2ZXNcbiAgRElSRUNUSVZFOiAnRGlyZWN0aXZlJyxcbiAgLy8gVHlwZXNcbiAgTkFNRURfVFlQRTogJ05hbWVkVHlwZScsXG4gIExJU1RfVFlQRTogJ0xpc3RUeXBlJyxcbiAgTk9OX05VTExfVFlQRTogJ05vbk51bGxUeXBlJyxcbiAgLy8gVHlwZSBTeXN0ZW0gRGVmaW5pdGlvbnNcbiAgU0NIRU1BX0RFRklOSVRJT046ICdTY2hlbWFEZWZpbml0aW9uJyxcbiAgT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTjogJ09wZXJhdGlvblR5cGVEZWZpbml0aW9uJyxcbiAgLy8gVHlwZSBEZWZpbml0aW9uc1xuICBTQ0FMQVJfVFlQRV9ERUZJTklUSU9OOiAnU2NhbGFyVHlwZURlZmluaXRpb24nLFxuICBPQkpFQ1RfVFlQRV9ERUZJTklUSU9OOiAnT2JqZWN0VHlwZURlZmluaXRpb24nLFxuICBGSUVMRF9ERUZJTklUSU9OOiAnRmllbGREZWZpbml0aW9uJyxcbiAgSU5QVVRfVkFMVUVfREVGSU5JVElPTjogJ0lucHV0VmFsdWVEZWZpbml0aW9uJyxcbiAgSU5URVJGQUNFX1RZUEVfREVGSU5JVElPTjogJ0ludGVyZmFjZVR5cGVEZWZpbml0aW9uJyxcbiAgVU5JT05fVFlQRV9ERUZJTklUSU9OOiAnVW5pb25UeXBlRGVmaW5pdGlvbicsXG4gIEVOVU1fVFlQRV9ERUZJTklUSU9OOiAnRW51bVR5cGVEZWZpbml0aW9uJyxcbiAgRU5VTV9WQUxVRV9ERUZJTklUSU9OOiAnRW51bVZhbHVlRGVmaW5pdGlvbicsXG4gIElOUFVUX09CSkVDVF9UWVBFX0RFRklOSVRJT046ICdJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uJyxcbiAgLy8gRGlyZWN0aXZlIERlZmluaXRpb25zXG4gIERJUkVDVElWRV9ERUZJTklUSU9OOiAnRGlyZWN0aXZlRGVmaW5pdGlvbicsXG4gIC8vIFR5cGUgU3lzdGVtIEV4dGVuc2lvbnNcbiAgU0NIRU1BX0VYVEVOU0lPTjogJ1NjaGVtYUV4dGVuc2lvbicsXG4gIC8vIFR5cGUgRXh0ZW5zaW9uc1xuICBTQ0FMQVJfVFlQRV9FWFRFTlNJT046ICdTY2FsYXJUeXBlRXh0ZW5zaW9uJyxcbiAgT0JKRUNUX1RZUEVfRVhURU5TSU9OOiAnT2JqZWN0VHlwZUV4dGVuc2lvbicsXG4gIElOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTjogJ0ludGVyZmFjZVR5cGVFeHRlbnNpb24nLFxuICBVTklPTl9UWVBFX0VYVEVOU0lPTjogJ1VuaW9uVHlwZUV4dGVuc2lvbicsXG4gIEVOVU1fVFlQRV9FWFRFTlNJT046ICdFbnVtVHlwZUV4dGVuc2lvbicsXG4gIElOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTjogJ0lucHV0T2JqZWN0VHlwZUV4dGVuc2lvbidcbn0pO1xuLyoqXG4gKiBUaGUgZW51bSB0eXBlIHJlcHJlc2VudGluZyB0aGUgcG9zc2libGUga2luZCB2YWx1ZXMgb2YgQVNUIG5vZGVzLlxuICovXG4iLCAiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW52YXJpYW50KGNvbmRpdGlvbiwgbWVzc2FnZSkge1xuICB2YXIgYm9vbGVhbkNvbmRpdGlvbiA9IEJvb2xlYW4oY29uZGl0aW9uKTsgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UgKFNlZSB0cmFuc2Zvcm1hdGlvbiBkb25lIGluICcuL3Jlc291cmNlcy9pbmxpbmVJbnZhcmlhbnQuanMnKVxuXG4gIGlmICghYm9vbGVhbkNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihtZXNzYWdlICE9IG51bGwgPyBtZXNzYWdlIDogJ1VuZXhwZWN0ZWQgaW52YXJpYW50IHRyaWdnZXJlZC4nKTtcbiAgfVxufVxuIiwgIi8vIGlzdGFuYnVsIGlnbm9yZSBuZXh0IChTZWU6ICdodHRwczovL2dpdGh1Yi5jb20vZ3JhcGhxbC9ncmFwaHFsLWpzL2lzc3Vlcy8yMzE3JylcbnZhciBub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sID0gdHlwZW9mIFN5bWJvbCA9PT0gJ2Z1bmN0aW9uJyAmJiB0eXBlb2YgU3ltYm9sLmZvciA9PT0gJ2Z1bmN0aW9uJyA/IFN5bWJvbC5mb3IoJ25vZGVqcy51dGlsLmluc3BlY3QuY3VzdG9tJykgOiB1bmRlZmluZWQ7XG5leHBvcnQgZGVmYXVsdCBub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sO1xuIiwgImltcG9ydCBpbnZhcmlhbnQgZnJvbSBcIi4vaW52YXJpYW50Lm1qc1wiO1xuaW1wb3J0IG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wgZnJvbSBcIi4vbm9kZWpzQ3VzdG9tSW5zcGVjdFN5bWJvbC5tanNcIjtcbi8qKlxuICogVGhlIGBkZWZpbmVJbnNwZWN0KClgIGZ1bmN0aW9uIGRlZmluZXMgYGluc3BlY3QoKWAgcHJvdG90eXBlIG1ldGhvZCBhcyBhbGlhcyBvZiBgdG9KU09OYFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRlZmluZUluc3BlY3QoY2xhc3NPYmplY3QpIHtcbiAgdmFyIGZuID0gY2xhc3NPYmplY3QucHJvdG90eXBlLnRvSlNPTjtcbiAgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nIHx8IGludmFyaWFudCgwKTtcbiAgY2xhc3NPYmplY3QucHJvdG90eXBlLmluc3BlY3QgPSBmbjsgLy8gaXN0YW5idWwgaWdub3JlIGVsc2UgKFNlZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2dyYXBocWwtanMvaXNzdWVzLzIzMTcnKVxuXG4gIGlmIChub2RlanNDdXN0b21JbnNwZWN0U3ltYm9sKSB7XG4gICAgY2xhc3NPYmplY3QucHJvdG90eXBlW25vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2xdID0gZm47XG4gIH1cbn1cbiIsICJpbXBvcnQgZGVmaW5lSW5zcGVjdCBmcm9tIFwiLi4vanN1dGlscy9kZWZpbmVJbnNwZWN0Lm1qc1wiO1xuXG4vKipcbiAqIENvbnRhaW5zIGEgcmFuZ2Ugb2YgVVRGLTggY2hhcmFjdGVyIG9mZnNldHMgYW5kIHRva2VuIHJlZmVyZW5jZXMgdGhhdFxuICogaWRlbnRpZnkgdGhlIHJlZ2lvbiBvZiB0aGUgc291cmNlIGZyb20gd2hpY2ggdGhlIEFTVCBkZXJpdmVkLlxuICovXG5leHBvcnQgdmFyIExvY2F0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHtcbiAgLyoqXG4gICAqIFRoZSBjaGFyYWN0ZXIgb2Zmc2V0IGF0IHdoaWNoIHRoaXMgTm9kZSBiZWdpbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGlzIE5vZGUgZW5kcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBUb2tlbiBhdCB3aGljaCB0aGlzIE5vZGUgYmVnaW5zLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFRva2VuIGF0IHdoaWNoIHRoaXMgTm9kZSBlbmRzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIFNvdXJjZSBkb2N1bWVudCB0aGUgQVNUIHJlcHJlc2VudHMuXG4gICAqL1xuICBmdW5jdGlvbiBMb2NhdGlvbihzdGFydFRva2VuLCBlbmRUb2tlbiwgc291cmNlKSB7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0VG9rZW4uc3RhcnQ7XG4gICAgdGhpcy5lbmQgPSBlbmRUb2tlbi5lbmQ7XG4gICAgdGhpcy5zdGFydFRva2VuID0gc3RhcnRUb2tlbjtcbiAgICB0aGlzLmVuZFRva2VuID0gZW5kVG9rZW47XG4gICAgdGhpcy5zb3VyY2UgPSBzb3VyY2U7XG4gIH1cblxuICB2YXIgX3Byb3RvID0gTG9jYXRpb24ucHJvdG90eXBlO1xuXG4gIF9wcm90by50b0pTT04gPSBmdW5jdGlvbiB0b0pTT04oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0YXJ0OiB0aGlzLnN0YXJ0LFxuICAgICAgZW5kOiB0aGlzLmVuZFxuICAgIH07XG4gIH07XG5cbiAgcmV0dXJuIExvY2F0aW9uO1xufSgpOyAvLyBQcmludCBhIHNpbXBsaWZpZWQgZm9ybSB3aGVuIGFwcGVhcmluZyBpbiBgaW5zcGVjdGAgYW5kIGB1dGlsLmluc3BlY3RgLlxuXG5kZWZpbmVJbnNwZWN0KExvY2F0aW9uKTtcbi8qKlxuICogUmVwcmVzZW50cyBhIHJhbmdlIG9mIGNoYXJhY3RlcnMgcmVwcmVzZW50ZWQgYnkgYSBsZXhpY2FsIHRva2VuXG4gKiB3aXRoaW4gYSBTb3VyY2UuXG4gKi9cblxuZXhwb3J0IHZhciBUb2tlbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBUaGUga2luZCBvZiBUb2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjaGFyYWN0ZXIgb2Zmc2V0IGF0IHdoaWNoIHRoaXMgTm9kZSBiZWdpbnMuXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGlzIE5vZGUgZW5kcy5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSAxLWluZGV4ZWQgbGluZSBudW1iZXIgb24gd2hpY2ggdGhpcyBUb2tlbiBhcHBlYXJzLlxuICAgKi9cblxuICAvKipcbiAgICogVGhlIDEtaW5kZXhlZCBjb2x1bW4gbnVtYmVyIGF0IHdoaWNoIHRoaXMgVG9rZW4gYmVnaW5zLlxuICAgKi9cblxuICAvKipcbiAgICogRm9yIG5vbi1wdW5jdHVhdGlvbiB0b2tlbnMsIHJlcHJlc2VudHMgdGhlIGludGVycHJldGVkIHZhbHVlIG9mIHRoZSB0b2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRva2VucyBleGlzdCBhcyBub2RlcyBpbiBhIGRvdWJsZS1saW5rZWQtbGlzdCBhbW9uZ3N0IGFsbCB0b2tlbnNcbiAgICogaW5jbHVkaW5nIGlnbm9yZWQgdG9rZW5zLiA8U09GPiBpcyBhbHdheXMgdGhlIGZpcnN0IG5vZGUgYW5kIDxFT0Y+XG4gICAqIHRoZSBsYXN0LlxuICAgKi9cbiAgZnVuY3Rpb24gVG9rZW4oa2luZCwgc3RhcnQsIGVuZCwgbGluZSwgY29sdW1uLCBwcmV2LCB2YWx1ZSkge1xuICAgIHRoaXMua2luZCA9IGtpbmQ7XG4gICAgdGhpcy5zdGFydCA9IHN0YXJ0O1xuICAgIHRoaXMuZW5kID0gZW5kO1xuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgdGhpcy5jb2x1bW4gPSBjb2x1bW47XG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICAgIHRoaXMucHJldiA9IHByZXY7XG4gICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgfVxuXG4gIHZhciBfcHJvdG8yID0gVG9rZW4ucHJvdG90eXBlO1xuXG4gIF9wcm90bzIudG9KU09OID0gZnVuY3Rpb24gdG9KU09OKCkge1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiB0aGlzLmtpbmQsXG4gICAgICB2YWx1ZTogdGhpcy52YWx1ZSxcbiAgICAgIGxpbmU6IHRoaXMubGluZSxcbiAgICAgIGNvbHVtbjogdGhpcy5jb2x1bW5cbiAgICB9O1xuICB9O1xuXG4gIHJldHVybiBUb2tlbjtcbn0oKTsgLy8gUHJpbnQgYSBzaW1wbGlmaWVkIGZvcm0gd2hlbiBhcHBlYXJpbmcgaW4gYGluc3BlY3RgIGFuZCBgdXRpbC5pbnNwZWN0YC5cblxuZGVmaW5lSW5zcGVjdChUb2tlbik7XG4vKipcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBpc05vZGUobWF5YmVOb2RlKSB7XG4gIHJldHVybiBtYXliZU5vZGUgIT0gbnVsbCAmJiB0eXBlb2YgbWF5YmVOb2RlLmtpbmQgPT09ICdzdHJpbmcnO1xufVxuLyoqXG4gKiBUaGUgbGlzdCBvZiBhbGwgcG9zc2libGUgQVNUIG5vZGUgdHlwZXMuXG4gKi9cbiIsICIvKipcbiAqIEFuIGV4cG9ydGVkIGVudW0gZGVzY3JpYmluZyB0aGUgZGlmZmVyZW50IGtpbmRzIG9mIHRva2VucyB0aGF0IHRoZVxuICogbGV4ZXIgZW1pdHMuXG4gKi9cbmV4cG9ydCB2YXIgVG9rZW5LaW5kID0gT2JqZWN0LmZyZWV6ZSh7XG4gIFNPRjogJzxTT0Y+JyxcbiAgRU9GOiAnPEVPRj4nLFxuICBCQU5HOiAnIScsXG4gIERPTExBUjogJyQnLFxuICBBTVA6ICcmJyxcbiAgUEFSRU5fTDogJygnLFxuICBQQVJFTl9SOiAnKScsXG4gIFNQUkVBRDogJy4uLicsXG4gIENPTE9OOiAnOicsXG4gIEVRVUFMUzogJz0nLFxuICBBVDogJ0AnLFxuICBCUkFDS0VUX0w6ICdbJyxcbiAgQlJBQ0tFVF9SOiAnXScsXG4gIEJSQUNFX0w6ICd7JyxcbiAgUElQRTogJ3wnLFxuICBCUkFDRV9SOiAnfScsXG4gIE5BTUU6ICdOYW1lJyxcbiAgSU5UOiAnSW50JyxcbiAgRkxPQVQ6ICdGbG9hdCcsXG4gIFNUUklORzogJ1N0cmluZycsXG4gIEJMT0NLX1NUUklORzogJ0Jsb2NrU3RyaW5nJyxcbiAgQ09NTUVOVDogJ0NvbW1lbnQnXG59KTtcbi8qKlxuICogVGhlIGVudW0gdHlwZSByZXByZXNlbnRpbmcgdGhlIHRva2VuIGtpbmRzIHZhbHVlcy5cbiAqL1xuIiwgImZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IFwiQGJhYmVsL2hlbHBlcnMgLSB0eXBlb2ZcIjsgaWYgKHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiKSB7IF90eXBlb2YgPSBmdW5jdGlvbiBfdHlwZW9mKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfTsgfSBlbHNlIHsgX3R5cGVvZiA9IGZ1bmN0aW9uIF90eXBlb2Yob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9OyB9IHJldHVybiBfdHlwZW9mKG9iaik7IH1cblxuLyogZXNsaW50LWRpc2FibGUgZmxvd3R5cGUvbm8td2Vhay10eXBlcyAqL1xuaW1wb3J0IG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wgZnJvbSBcIi4vbm9kZWpzQ3VzdG9tSW5zcGVjdFN5bWJvbC5tanNcIjtcbnZhciBNQVhfQVJSQVlfTEVOR1RIID0gMTA7XG52YXIgTUFYX1JFQ1VSU0lWRV9ERVBUSCA9IDI7XG4vKipcbiAqIFVzZWQgdG8gcHJpbnQgdmFsdWVzIGluIGVycm9yIG1lc3NhZ2VzLlxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGluc3BlY3QodmFsdWUpIHtcbiAgcmV0dXJuIGZvcm1hdFZhbHVlKHZhbHVlLCBbXSk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbHVlLCBzZWVuVmFsdWVzKSB7XG4gIHN3aXRjaCAoX3R5cGVvZih2YWx1ZSkpIHtcbiAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcblxuICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgIHJldHVybiB2YWx1ZS5uYW1lID8gXCJbZnVuY3Rpb24gXCIuY29uY2F0KHZhbHVlLm5hbWUsIFwiXVwiKSA6ICdbZnVuY3Rpb25dJztcblxuICAgIGNhc2UgJ29iamVjdCc6XG4gICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICdudWxsJztcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZvcm1hdE9iamVjdFZhbHVlKHZhbHVlLCBzZWVuVmFsdWVzKTtcblxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gU3RyaW5nKHZhbHVlKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmb3JtYXRPYmplY3RWYWx1ZSh2YWx1ZSwgcHJldmlvdXNseVNlZW5WYWx1ZXMpIHtcbiAgaWYgKHByZXZpb3VzbHlTZWVuVmFsdWVzLmluZGV4T2YodmFsdWUpICE9PSAtMSkge1xuICAgIHJldHVybiAnW0NpcmN1bGFyXSc7XG4gIH1cblxuICB2YXIgc2VlblZhbHVlcyA9IFtdLmNvbmNhdChwcmV2aW91c2x5U2VlblZhbHVlcywgW3ZhbHVlXSk7XG4gIHZhciBjdXN0b21JbnNwZWN0Rm4gPSBnZXRDdXN0b21Gbih2YWx1ZSk7XG5cbiAgaWYgKGN1c3RvbUluc3BlY3RGbiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgdmFyIGN1c3RvbVZhbHVlID0gY3VzdG9tSW5zcGVjdEZuLmNhbGwodmFsdWUpOyAvLyBjaGVjayBmb3IgaW5maW5pdGUgcmVjdXJzaW9uXG5cbiAgICBpZiAoY3VzdG9tVmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICByZXR1cm4gdHlwZW9mIGN1c3RvbVZhbHVlID09PSAnc3RyaW5nJyA/IGN1c3RvbVZhbHVlIDogZm9ybWF0VmFsdWUoY3VzdG9tVmFsdWUsIHNlZW5WYWx1ZXMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIHJldHVybiBmb3JtYXRBcnJheSh2YWx1ZSwgc2VlblZhbHVlcyk7XG4gIH1cblxuICByZXR1cm4gZm9ybWF0T2JqZWN0KHZhbHVlLCBzZWVuVmFsdWVzKTtcbn1cblxuZnVuY3Rpb24gZm9ybWF0T2JqZWN0KG9iamVjdCwgc2VlblZhbHVlcykge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iamVjdCk7XG5cbiAgaWYgKGtleXMubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuICd7fSc7XG4gIH1cblxuICBpZiAoc2VlblZhbHVlcy5sZW5ndGggPiBNQVhfUkVDVVJTSVZFX0RFUFRIKSB7XG4gICAgcmV0dXJuICdbJyArIGdldE9iamVjdFRhZyhvYmplY3QpICsgJ10nO1xuICB9XG5cbiAgdmFyIHByb3BlcnRpZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHZhbHVlID0gZm9ybWF0VmFsdWUob2JqZWN0W2tleV0sIHNlZW5WYWx1ZXMpO1xuICAgIHJldHVybiBrZXkgKyAnOiAnICsgdmFsdWU7XG4gIH0pO1xuICByZXR1cm4gJ3sgJyArIHByb3BlcnRpZXMuam9pbignLCAnKSArICcgfSc7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdEFycmF5KGFycmF5LCBzZWVuVmFsdWVzKSB7XG4gIGlmIChhcnJheS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJ1tdJztcbiAgfVxuXG4gIGlmIChzZWVuVmFsdWVzLmxlbmd0aCA+IE1BWF9SRUNVUlNJVkVfREVQVEgpIHtcbiAgICByZXR1cm4gJ1tBcnJheV0nO1xuICB9XG5cbiAgdmFyIGxlbiA9IE1hdGgubWluKE1BWF9BUlJBWV9MRU5HVEgsIGFycmF5Lmxlbmd0aCk7XG4gIHZhciByZW1haW5pbmcgPSBhcnJheS5sZW5ndGggLSBsZW47XG4gIHZhciBpdGVtcyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpdGVtcy5wdXNoKGZvcm1hdFZhbHVlKGFycmF5W2ldLCBzZWVuVmFsdWVzKSk7XG4gIH1cblxuICBpZiAocmVtYWluaW5nID09PSAxKSB7XG4gICAgaXRlbXMucHVzaCgnLi4uIDEgbW9yZSBpdGVtJyk7XG4gIH0gZWxzZSBpZiAocmVtYWluaW5nID4gMSkge1xuICAgIGl0ZW1zLnB1c2goXCIuLi4gXCIuY29uY2F0KHJlbWFpbmluZywgXCIgbW9yZSBpdGVtc1wiKSk7XG4gIH1cblxuICByZXR1cm4gJ1snICsgaXRlbXMuam9pbignLCAnKSArICddJztcbn1cblxuZnVuY3Rpb24gZ2V0Q3VzdG9tRm4ob2JqZWN0KSB7XG4gIHZhciBjdXN0b21JbnNwZWN0Rm4gPSBvYmplY3RbU3RyaW5nKG5vZGVqc0N1c3RvbUluc3BlY3RTeW1ib2wpXTtcblxuICBpZiAodHlwZW9mIGN1c3RvbUluc3BlY3RGbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBjdXN0b21JbnNwZWN0Rm47XG4gIH1cblxuICBpZiAodHlwZW9mIG9iamVjdC5pbnNwZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIG9iamVjdC5pbnNwZWN0O1xuICB9XG59XG5cbmZ1bmN0aW9uIGdldE9iamVjdFRhZyhvYmplY3QpIHtcbiAgdmFyIHRhZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpLnJlcGxhY2UoL15cXFtvYmplY3QgLywgJycpLnJlcGxhY2UoL10kLywgJycpO1xuXG4gIGlmICh0YWcgPT09ICdPYmplY3QnICYmIHR5cGVvZiBvYmplY3QuY29uc3RydWN0b3IgPT09ICdmdW5jdGlvbicpIHtcbiAgICB2YXIgbmFtZSA9IG9iamVjdC5jb25zdHJ1Y3Rvci5uYW1lO1xuXG4gICAgaWYgKHR5cGVvZiBuYW1lID09PSAnc3RyaW5nJyAmJiBuYW1lICE9PSAnJykge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhZztcbn1cbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBkZXZBc3NlcnQoY29uZGl0aW9uLCBtZXNzYWdlKSB7XG4gIHZhciBib29sZWFuQ29uZGl0aW9uID0gQm9vbGVhbihjb25kaXRpb24pOyAvLyBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAoU2VlIHRyYW5zZm9ybWF0aW9uIGRvbmUgaW4gJy4vcmVzb3VyY2VzL2lubGluZUludmFyaWFudC5qcycpXG5cbiAgaWYgKCFib29sZWFuQ29uZGl0aW9uKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xuICB9XG59XG4iLCAiLyoqXG4gKiBBIHJlcGxhY2VtZW50IGZvciBpbnN0YW5jZW9mIHdoaWNoIGluY2x1ZGVzIGFuIGVycm9yIHdhcm5pbmcgd2hlbiBtdWx0aS1yZWFsbVxuICogY29uc3RydWN0b3JzIGFyZSBkZXRlY3RlZC5cbiAqL1xuLy8gU2VlOiBodHRwczovL2V4cHJlc3Nqcy5jb20vZW4vYWR2YW5jZWQvYmVzdC1wcmFjdGljZS1wZXJmb3JtYW5jZS5odG1sI3NldC1ub2RlX2Vudi10by1wcm9kdWN0aW9uXG4vLyBTZWU6IGh0dHBzOi8vd2VicGFjay5qcy5vcmcvZ3VpZGVzL3Byb2R1Y3Rpb24vXG5leHBvcnQgZGVmYXVsdCBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gLy8gaXN0YW5idWwgaWdub3JlIG5leHQgKFNlZTogJ2h0dHBzOi8vZ2l0aHViLmNvbS9ncmFwaHFsL2dyYXBocWwtanMvaXNzdWVzLzIzMTcnKVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuZnVuY3Rpb24gaW5zdGFuY2VPZih2YWx1ZSwgY29uc3RydWN0b3IpIHtcbiAgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgY29uc3RydWN0b3I7XG59IDogLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXNoYWRvd1xuZnVuY3Rpb24gaW5zdGFuY2VPZih2YWx1ZSwgY29uc3RydWN0b3IpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgY29uc3RydWN0b3IpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICh2YWx1ZSkge1xuICAgIHZhciB2YWx1ZUNsYXNzID0gdmFsdWUuY29uc3RydWN0b3I7XG4gICAgdmFyIGNsYXNzTmFtZSA9IGNvbnN0cnVjdG9yLm5hbWU7XG5cbiAgICBpZiAoY2xhc3NOYW1lICYmIHZhbHVlQ2xhc3MgJiYgdmFsdWVDbGFzcy5uYW1lID09PSBjbGFzc05hbWUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkNhbm5vdCB1c2UgXCIuY29uY2F0KGNsYXNzTmFtZSwgXCIgXFxcIlwiKS5jb25jYXQodmFsdWUsIFwiXFxcIiBmcm9tIGFub3RoZXIgbW9kdWxlIG9yIHJlYWxtLlxcblxcbkVuc3VyZSB0aGF0IHRoZXJlIGlzIG9ubHkgb25lIGluc3RhbmNlIG9mIFxcXCJncmFwaHFsXFxcIiBpbiB0aGUgbm9kZV9tb2R1bGVzXFxuZGlyZWN0b3J5LiBJZiBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgXFxcImdyYXBocWxcXFwiIGFyZSB0aGUgZGVwZW5kZW5jaWVzIG9mIG90aGVyXFxucmVsaWVkIG9uIG1vZHVsZXMsIHVzZSBcXFwicmVzb2x1dGlvbnNcXFwiIHRvIGVuc3VyZSBvbmx5IG9uZSB2ZXJzaW9uIGlzIGluc3RhbGxlZC5cXG5cXG5odHRwczovL3lhcm5wa2cuY29tL2VuL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnNcXG5cXG5EdXBsaWNhdGUgXFxcImdyYXBocWxcXFwiIG1vZHVsZXMgY2Fubm90IGJlIHVzZWQgYXQgdGhlIHNhbWUgdGltZSBzaW5jZSBkaWZmZXJlbnRcXG52ZXJzaW9ucyBtYXkgaGF2ZSBkaWZmZXJlbnQgY2FwYWJpbGl0aWVzIGFuZCBiZWhhdmlvci4gVGhlIGRhdGEgZnJvbSBvbmVcXG52ZXJzaW9uIHVzZWQgaW4gdGhlIGZ1bmN0aW9uIGZyb20gYW5vdGhlciBjb3VsZCBwcm9kdWNlIGNvbmZ1c2luZyBhbmRcXG5zcHVyaW91cyByZXN1bHRzLlwiKSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufTtcbiIsICJmdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmltcG9ydCB7IFNZTUJPTF9UT19TVFJJTkdfVEFHIH0gZnJvbSBcIi4uL3BvbHlmaWxscy9zeW1ib2xzLm1qc1wiO1xuaW1wb3J0IGluc3BlY3QgZnJvbSBcIi4uL2pzdXRpbHMvaW5zcGVjdC5tanNcIjtcbmltcG9ydCBkZXZBc3NlcnQgZnJvbSBcIi4uL2pzdXRpbHMvZGV2QXNzZXJ0Lm1qc1wiO1xuaW1wb3J0IGluc3RhbmNlT2YgZnJvbSBcIi4uL2pzdXRpbHMvaW5zdGFuY2VPZi5tanNcIjtcblxuLyoqXG4gKiBBIHJlcHJlc2VudGF0aW9uIG9mIHNvdXJjZSBpbnB1dCB0byBHcmFwaFFMLiBUaGUgYG5hbWVgIGFuZCBgbG9jYXRpb25PZmZzZXRgIHBhcmFtZXRlcnMgYXJlXG4gKiBvcHRpb25hbCwgYnV0IHRoZXkgYXJlIHVzZWZ1bCBmb3IgY2xpZW50cyB3aG8gc3RvcmUgR3JhcGhRTCBkb2N1bWVudHMgaW4gc291cmNlIGZpbGVzLlxuICogRm9yIGV4YW1wbGUsIGlmIHRoZSBHcmFwaFFMIGlucHV0IHN0YXJ0cyBhdCBsaW5lIDQwIGluIGEgZmlsZSBuYW1lZCBgRm9vLmdyYXBocWxgLCBpdCBtaWdodFxuICogYmUgdXNlZnVsIGZvciBgbmFtZWAgdG8gYmUgYFwiRm9vLmdyYXBocWxcImAgYW5kIGxvY2F0aW9uIHRvIGJlIGB7IGxpbmU6IDQwLCBjb2x1bW46IDEgfWAuXG4gKiBUaGUgYGxpbmVgIGFuZCBgY29sdW1uYCBwcm9wZXJ0aWVzIGluIGBsb2NhdGlvbk9mZnNldGAgYXJlIDEtaW5kZXhlZC5cbiAqL1xuZXhwb3J0IHZhciBTb3VyY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBTb3VyY2UoYm9keSkge1xuICAgIHZhciBuYW1lID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAnR3JhcGhRTCByZXF1ZXN0JztcbiAgICB2YXIgbG9jYXRpb25PZmZzZXQgPSBhcmd1bWVudHMubGVuZ3RoID4gMiAmJiBhcmd1bWVudHNbMl0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1syXSA6IHtcbiAgICAgIGxpbmU6IDEsXG4gICAgICBjb2x1bW46IDFcbiAgICB9O1xuICAgIHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJyB8fCBkZXZBc3NlcnQoMCwgXCJCb2R5IG11c3QgYmUgYSBzdHJpbmcuIFJlY2VpdmVkOiBcIi5jb25jYXQoaW5zcGVjdChib2R5KSwgXCIuXCIpKTtcbiAgICB0aGlzLmJvZHkgPSBib2R5O1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgdGhpcy5sb2NhdGlvbk9mZnNldCA9IGxvY2F0aW9uT2Zmc2V0O1xuICAgIHRoaXMubG9jYXRpb25PZmZzZXQubGluZSA+IDAgfHwgZGV2QXNzZXJ0KDAsICdsaW5lIGluIGxvY2F0aW9uT2Zmc2V0IGlzIDEtaW5kZXhlZCBhbmQgbXVzdCBiZSBwb3NpdGl2ZS4nKTtcbiAgICB0aGlzLmxvY2F0aW9uT2Zmc2V0LmNvbHVtbiA+IDAgfHwgZGV2QXNzZXJ0KDAsICdjb2x1bW4gaW4gbG9jYXRpb25PZmZzZXQgaXMgMS1pbmRleGVkIGFuZCBtdXN0IGJlIHBvc2l0aXZlLicpO1xuICB9IC8vICRGbG93Rml4TWVbdW5zdXBwb3J0ZWQtc3ludGF4XSBGbG93IGRvZXNuJ3Qgc3VwcG9ydCBjb21wdXRlZCBwcm9wZXJ0aWVzIHlldFxuXG5cbiAgX2NyZWF0ZUNsYXNzKFNvdXJjZSwgW3tcbiAgICBrZXk6IFNZTUJPTF9UT19TVFJJTkdfVEFHLFxuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuICdTb3VyY2UnO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBTb3VyY2U7XG59KCk7XG4vKipcbiAqIFRlc3QgaWYgdGhlIGdpdmVuIHZhbHVlIGlzIGEgU291cmNlIG9iamVjdC5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcmVkZWNsYXJlXG5leHBvcnQgZnVuY3Rpb24gaXNTb3VyY2Uoc291cmNlKSB7XG4gIHJldHVybiBpbnN0YW5jZU9mKHNvdXJjZSwgU291cmNlKTtcbn1cbiIsICIvKipcbiAqIFRoZSBzZXQgb2YgYWxsb3dlZCBkaXJlY3RpdmUgbG9jYXRpb24gdmFsdWVzLlxuICovXG5leHBvcnQgdmFyIERpcmVjdGl2ZUxvY2F0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIC8vIFJlcXVlc3QgRGVmaW5pdGlvbnNcbiAgUVVFUlk6ICdRVUVSWScsXG4gIE1VVEFUSU9OOiAnTVVUQVRJT04nLFxuICBTVUJTQ1JJUFRJT046ICdTVUJTQ1JJUFRJT04nLFxuICBGSUVMRDogJ0ZJRUxEJyxcbiAgRlJBR01FTlRfREVGSU5JVElPTjogJ0ZSQUdNRU5UX0RFRklOSVRJT04nLFxuICBGUkFHTUVOVF9TUFJFQUQ6ICdGUkFHTUVOVF9TUFJFQUQnLFxuICBJTkxJTkVfRlJBR01FTlQ6ICdJTkxJTkVfRlJBR01FTlQnLFxuICBWQVJJQUJMRV9ERUZJTklUSU9OOiAnVkFSSUFCTEVfREVGSU5JVElPTicsXG4gIC8vIFR5cGUgU3lzdGVtIERlZmluaXRpb25zXG4gIFNDSEVNQTogJ1NDSEVNQScsXG4gIFNDQUxBUjogJ1NDQUxBUicsXG4gIE9CSkVDVDogJ09CSkVDVCcsXG4gIEZJRUxEX0RFRklOSVRJT046ICdGSUVMRF9ERUZJTklUSU9OJyxcbiAgQVJHVU1FTlRfREVGSU5JVElPTjogJ0FSR1VNRU5UX0RFRklOSVRJT04nLFxuICBJTlRFUkZBQ0U6ICdJTlRFUkZBQ0UnLFxuICBVTklPTjogJ1VOSU9OJyxcbiAgRU5VTTogJ0VOVU0nLFxuICBFTlVNX1ZBTFVFOiAnRU5VTV9WQUxVRScsXG4gIElOUFVUX09CSkVDVDogJ0lOUFVUX09CSkVDVCcsXG4gIElOUFVUX0ZJRUxEX0RFRklOSVRJT046ICdJTlBVVF9GSUVMRF9ERUZJTklUSU9OJ1xufSk7XG4vKipcbiAqIFRoZSBlbnVtIHR5cGUgcmVwcmVzZW50aW5nIHRoZSBkaXJlY3RpdmUgbG9jYXRpb24gdmFsdWVzLlxuICovXG4iLCAiLyoqXG4gKiBQcm9kdWNlcyB0aGUgdmFsdWUgb2YgYSBibG9jayBzdHJpbmcgZnJvbSBpdHMgcGFyc2VkIHJhdyB2YWx1ZSwgc2ltaWxhciB0b1xuICogQ29mZmVlU2NyaXB0J3MgYmxvY2sgc3RyaW5nLCBQeXRob24ncyBkb2NzdHJpbmcgdHJpbSBvciBSdWJ5J3Mgc3RyaXBfaGVyZWRvYy5cbiAqXG4gKiBUaGlzIGltcGxlbWVudHMgdGhlIEdyYXBoUUwgc3BlYydzIEJsb2NrU3RyaW5nVmFsdWUoKSBzdGF0aWMgYWxnb3JpdGhtLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVkZW50QmxvY2tTdHJpbmdWYWx1ZShyYXdTdHJpbmcpIHtcbiAgLy8gRXhwYW5kIGEgYmxvY2sgc3RyaW5nJ3MgcmF3IHZhbHVlIGludG8gaW5kZXBlbmRlbnQgbGluZXMuXG4gIHZhciBsaW5lcyA9IHJhd1N0cmluZy5zcGxpdCgvXFxyXFxufFtcXG5cXHJdL2cpOyAvLyBSZW1vdmUgY29tbW9uIGluZGVudGF0aW9uIGZyb20gYWxsIGxpbmVzIGJ1dCBmaXJzdC5cblxuICB2YXIgY29tbW9uSW5kZW50ID0gZ2V0QmxvY2tTdHJpbmdJbmRlbnRhdGlvbihyYXdTdHJpbmcpO1xuXG4gIGlmIChjb21tb25JbmRlbnQgIT09IDApIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBsaW5lc1tpXSA9IGxpbmVzW2ldLnNsaWNlKGNvbW1vbkluZGVudCk7XG4gICAgfVxuICB9IC8vIFJlbW92ZSBsZWFkaW5nIGFuZCB0cmFpbGluZyBibGFuayBsaW5lcy5cblxuXG4gIHZhciBzdGFydExpbmUgPSAwO1xuXG4gIHdoaWxlIChzdGFydExpbmUgPCBsaW5lcy5sZW5ndGggJiYgaXNCbGFuayhsaW5lc1tzdGFydExpbmVdKSkge1xuICAgICsrc3RhcnRMaW5lO1xuICB9XG5cbiAgdmFyIGVuZExpbmUgPSBsaW5lcy5sZW5ndGg7XG5cbiAgd2hpbGUgKGVuZExpbmUgPiBzdGFydExpbmUgJiYgaXNCbGFuayhsaW5lc1tlbmRMaW5lIC0gMV0pKSB7XG4gICAgLS1lbmRMaW5lO1xuICB9IC8vIFJldHVybiBhIHN0cmluZyBvZiB0aGUgbGluZXMgam9pbmVkIHdpdGggVSswMDBBLlxuXG5cbiAgcmV0dXJuIGxpbmVzLnNsaWNlKHN0YXJ0TGluZSwgZW5kTGluZSkuam9pbignXFxuJyk7XG59XG5cbmZ1bmN0aW9uIGlzQmxhbmsoc3RyKSB7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKHN0cltpXSAhPT0gJyAnICYmIHN0cltpXSAhPT0gJ1xcdCcpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cbi8qKlxuICogQGludGVybmFsXG4gKi9cblxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0QmxvY2tTdHJpbmdJbmRlbnRhdGlvbih2YWx1ZSkge1xuICB2YXIgX2NvbW1vbkluZGVudDtcblxuICB2YXIgaXNGaXJzdExpbmUgPSB0cnVlO1xuICB2YXIgaXNFbXB0eUxpbmUgPSB0cnVlO1xuICB2YXIgaW5kZW50ID0gMDtcbiAgdmFyIGNvbW1vbkluZGVudCA9IG51bGw7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZS5sZW5ndGg7ICsraSkge1xuICAgIHN3aXRjaCAodmFsdWUuY2hhckNvZGVBdChpKSkge1xuICAgICAgY2FzZSAxMzpcbiAgICAgICAgLy8gIFxcclxuICAgICAgICBpZiAodmFsdWUuY2hhckNvZGVBdChpICsgMSkgPT09IDEwKSB7XG4gICAgICAgICAgKytpOyAvLyBza2lwIFxcclxcbiBhcyBvbmUgc3ltYm9sXG4gICAgICAgIH1cblxuICAgICAgLy8gZmFsbHMgdGhyb3VnaFxuXG4gICAgICBjYXNlIDEwOlxuICAgICAgICAvLyAgXFxuXG4gICAgICAgIGlzRmlyc3RMaW5lID0gZmFsc2U7XG4gICAgICAgIGlzRW1wdHlMaW5lID0gdHJ1ZTtcbiAgICAgICAgaW5kZW50ID0gMDtcbiAgICAgICAgYnJlYWs7XG5cbiAgICAgIGNhc2UgOTogLy8gICBcXHRcblxuICAgICAgY2FzZSAzMjpcbiAgICAgICAgLy8gIDxzcGFjZT5cbiAgICAgICAgKytpbmRlbnQ7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBpZiAoaXNFbXB0eUxpbmUgJiYgIWlzRmlyc3RMaW5lICYmIChjb21tb25JbmRlbnQgPT09IG51bGwgfHwgaW5kZW50IDwgY29tbW9uSW5kZW50KSkge1xuICAgICAgICAgIGNvbW1vbkluZGVudCA9IGluZGVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlzRW1wdHlMaW5lID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIChfY29tbW9uSW5kZW50ID0gY29tbW9uSW5kZW50KSAhPT0gbnVsbCAmJiBfY29tbW9uSW5kZW50ICE9PSB2b2lkIDAgPyBfY29tbW9uSW5kZW50IDogMDtcbn1cbi8qKlxuICogUHJpbnQgYSBibG9jayBzdHJpbmcgaW4gdGhlIGluZGVudGVkIGJsb2NrIGZvcm0gYnkgYWRkaW5nIGEgbGVhZGluZyBhbmRcbiAqIHRyYWlsaW5nIGJsYW5rIGxpbmUuIEhvd2V2ZXIsIGlmIGEgYmxvY2sgc3RyaW5nIHN0YXJ0cyB3aXRoIHdoaXRlc3BhY2UgYW5kIGlzXG4gKiBhIHNpbmdsZS1saW5lLCBhZGRpbmcgYSBsZWFkaW5nIGJsYW5rIGxpbmUgd291bGQgc3RyaXAgdGhhdCB3aGl0ZXNwYWNlLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludEJsb2NrU3RyaW5nKHZhbHVlKSB7XG4gIHZhciBpbmRlbnRhdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogJyc7XG4gIHZhciBwcmVmZXJNdWx0aXBsZUxpbmVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBmYWxzZTtcbiAgdmFyIGlzU2luZ2xlTGluZSA9IHZhbHVlLmluZGV4T2YoJ1xcbicpID09PSAtMTtcbiAgdmFyIGhhc0xlYWRpbmdTcGFjZSA9IHZhbHVlWzBdID09PSAnICcgfHwgdmFsdWVbMF0gPT09ICdcXHQnO1xuICB2YXIgaGFzVHJhaWxpbmdRdW90ZSA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdID09PSAnXCInO1xuICB2YXIgaGFzVHJhaWxpbmdTbGFzaCA9IHZhbHVlW3ZhbHVlLmxlbmd0aCAtIDFdID09PSAnXFxcXCc7XG4gIHZhciBwcmludEFzTXVsdGlwbGVMaW5lcyA9ICFpc1NpbmdsZUxpbmUgfHwgaGFzVHJhaWxpbmdRdW90ZSB8fCBoYXNUcmFpbGluZ1NsYXNoIHx8IHByZWZlck11bHRpcGxlTGluZXM7XG4gIHZhciByZXN1bHQgPSAnJzsgLy8gRm9ybWF0IGEgbXVsdGktbGluZSBibG9jayBxdW90ZSB0byBhY2NvdW50IGZvciBsZWFkaW5nIHNwYWNlLlxuXG4gIGlmIChwcmludEFzTXVsdGlwbGVMaW5lcyAmJiAhKGlzU2luZ2xlTGluZSAmJiBoYXNMZWFkaW5nU3BhY2UpKSB7XG4gICAgcmVzdWx0ICs9ICdcXG4nICsgaW5kZW50YXRpb247XG4gIH1cblxuICByZXN1bHQgKz0gaW5kZW50YXRpb24gPyB2YWx1ZS5yZXBsYWNlKC9cXG4vZywgJ1xcbicgKyBpbmRlbnRhdGlvbikgOiB2YWx1ZTtcblxuICBpZiAocHJpbnRBc011bHRpcGxlTGluZXMpIHtcbiAgICByZXN1bHQgKz0gJ1xcbic7XG4gIH1cblxuICByZXR1cm4gJ1wiXCJcIicgKyByZXN1bHQucmVwbGFjZSgvXCJcIlwiL2csICdcXFxcXCJcIlwiJykgKyAnXCJcIlwiJztcbn1cbiIsICJpbXBvcnQgeyBzeW50YXhFcnJvciB9IGZyb20gXCIuLi9lcnJvci9zeW50YXhFcnJvci5tanNcIjtcbmltcG9ydCB7IFRva2VuIH0gZnJvbSBcIi4vYXN0Lm1qc1wiO1xuaW1wb3J0IHsgVG9rZW5LaW5kIH0gZnJvbSBcIi4vdG9rZW5LaW5kLm1qc1wiO1xuaW1wb3J0IHsgZGVkZW50QmxvY2tTdHJpbmdWYWx1ZSB9IGZyb20gXCIuL2Jsb2NrU3RyaW5nLm1qc1wiO1xuLyoqXG4gKiBHaXZlbiBhIFNvdXJjZSBvYmplY3QsIGNyZWF0ZXMgYSBMZXhlciBmb3IgdGhhdCBzb3VyY2UuXG4gKiBBIExleGVyIGlzIGEgc3RhdGVmdWwgc3RyZWFtIGdlbmVyYXRvciBpbiB0aGF0IGV2ZXJ5IHRpbWVcbiAqIGl0IGlzIGFkdmFuY2VkLCBpdCByZXR1cm5zIHRoZSBuZXh0IHRva2VuIGluIHRoZSBTb3VyY2UuIEFzc3VtaW5nIHRoZVxuICogc291cmNlIGxleGVzLCB0aGUgZmluYWwgVG9rZW4gZW1pdHRlZCBieSB0aGUgbGV4ZXIgd2lsbCBiZSBvZiBraW5kXG4gKiBFT0YsIGFmdGVyIHdoaWNoIHRoZSBsZXhlciB3aWxsIHJlcGVhdGVkbHkgcmV0dXJuIHRoZSBzYW1lIEVPRiB0b2tlblxuICogd2hlbmV2ZXIgY2FsbGVkLlxuICovXG5cbmV4cG9ydCB2YXIgTGV4ZXIgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogVGhlIHByZXZpb3VzbHkgZm9jdXNlZCBub24taWdub3JlZCB0b2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSBjdXJyZW50bHkgZm9jdXNlZCBub24taWdub3JlZCB0b2tlbi5cbiAgICovXG5cbiAgLyoqXG4gICAqIFRoZSAoMS1pbmRleGVkKSBsaW5lIGNvbnRhaW5pbmcgdGhlIGN1cnJlbnQgdG9rZW4uXG4gICAqL1xuXG4gIC8qKlxuICAgKiBUaGUgY2hhcmFjdGVyIG9mZnNldCBhdCB3aGljaCB0aGUgY3VycmVudCBsaW5lIGJlZ2lucy5cbiAgICovXG4gIGZ1bmN0aW9uIExleGVyKHNvdXJjZSkge1xuICAgIHZhciBzdGFydE9mRmlsZVRva2VuID0gbmV3IFRva2VuKFRva2VuS2luZC5TT0YsIDAsIDAsIDAsIDAsIG51bGwpO1xuICAgIHRoaXMuc291cmNlID0gc291cmNlO1xuICAgIHRoaXMubGFzdFRva2VuID0gc3RhcnRPZkZpbGVUb2tlbjtcbiAgICB0aGlzLnRva2VuID0gc3RhcnRPZkZpbGVUb2tlbjtcbiAgICB0aGlzLmxpbmUgPSAxO1xuICAgIHRoaXMubGluZVN0YXJ0ID0gMDtcbiAgfVxuICAvKipcbiAgICogQWR2YW5jZXMgdGhlIHRva2VuIHN0cmVhbSB0byB0aGUgbmV4dCBub24taWdub3JlZCB0b2tlbi5cbiAgICovXG5cblxuICB2YXIgX3Byb3RvID0gTGV4ZXIucHJvdG90eXBlO1xuXG4gIF9wcm90by5hZHZhbmNlID0gZnVuY3Rpb24gYWR2YW5jZSgpIHtcbiAgICB0aGlzLmxhc3RUb2tlbiA9IHRoaXMudG9rZW47XG4gICAgdmFyIHRva2VuID0gdGhpcy50b2tlbiA9IHRoaXMubG9va2FoZWFkKCk7XG4gICAgcmV0dXJuIHRva2VuO1xuICB9XG4gIC8qKlxuICAgKiBMb29rcyBhaGVhZCBhbmQgcmV0dXJucyB0aGUgbmV4dCBub24taWdub3JlZCB0b2tlbiwgYnV0IGRvZXMgbm90IGNoYW5nZVxuICAgKiB0aGUgc3RhdGUgb2YgTGV4ZXIuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmxvb2thaGVhZCA9IGZ1bmN0aW9uIGxvb2thaGVhZCgpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLnRva2VuO1xuXG4gICAgaWYgKHRva2VuLmtpbmQgIT09IFRva2VuS2luZC5FT0YpIHtcbiAgICAgIGRvIHtcbiAgICAgICAgdmFyIF90b2tlbiRuZXh0O1xuXG4gICAgICAgIC8vIE5vdGU6IG5leHQgaXMgb25seSBtdXRhYmxlIGR1cmluZyBwYXJzaW5nLCBzbyB3ZSBjYXN0IHRvIGFsbG93IHRoaXMuXG4gICAgICAgIHRva2VuID0gKF90b2tlbiRuZXh0ID0gdG9rZW4ubmV4dCkgIT09IG51bGwgJiYgX3Rva2VuJG5leHQgIT09IHZvaWQgMCA/IF90b2tlbiRuZXh0IDogdG9rZW4ubmV4dCA9IHJlYWRUb2tlbih0aGlzLCB0b2tlbik7XG4gICAgICB9IHdoaWxlICh0b2tlbi5raW5kID09PSBUb2tlbktpbmQuQ09NTUVOVCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VuO1xuICB9O1xuXG4gIHJldHVybiBMZXhlcjtcbn0oKTtcbi8qKlxuICogQGludGVybmFsXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGlzUHVuY3R1YXRvclRva2VuS2luZChraW5kKSB7XG4gIHJldHVybiBraW5kID09PSBUb2tlbktpbmQuQkFORyB8fCBraW5kID09PSBUb2tlbktpbmQuRE9MTEFSIHx8IGtpbmQgPT09IFRva2VuS2luZC5BTVAgfHwga2luZCA9PT0gVG9rZW5LaW5kLlBBUkVOX0wgfHwga2luZCA9PT0gVG9rZW5LaW5kLlBBUkVOX1IgfHwga2luZCA9PT0gVG9rZW5LaW5kLlNQUkVBRCB8fCBraW5kID09PSBUb2tlbktpbmQuQ09MT04gfHwga2luZCA9PT0gVG9rZW5LaW5kLkVRVUFMUyB8fCBraW5kID09PSBUb2tlbktpbmQuQVQgfHwga2luZCA9PT0gVG9rZW5LaW5kLkJSQUNLRVRfTCB8fCBraW5kID09PSBUb2tlbktpbmQuQlJBQ0tFVF9SIHx8IGtpbmQgPT09IFRva2VuS2luZC5CUkFDRV9MIHx8IGtpbmQgPT09IFRva2VuS2luZC5QSVBFIHx8IGtpbmQgPT09IFRva2VuS2luZC5CUkFDRV9SO1xufVxuXG5mdW5jdGlvbiBwcmludENoYXJDb2RlKGNvZGUpIHtcbiAgcmV0dXJuICgvLyBOYU4vdW5kZWZpbmVkIHJlcHJlc2VudHMgYWNjZXNzIGJleW9uZCB0aGUgZW5kIG9mIHRoZSBmaWxlLlxuICAgIGlzTmFOKGNvZGUpID8gVG9rZW5LaW5kLkVPRiA6IC8vIFRydXN0IEpTT04gZm9yIEFTQ0lJLlxuICAgIGNvZGUgPCAweDAwN2YgPyBKU09OLnN0cmluZ2lmeShTdHJpbmcuZnJvbUNoYXJDb2RlKGNvZGUpKSA6IC8vIE90aGVyd2lzZSBwcmludCB0aGUgZXNjYXBlZCBmb3JtLlxuICAgIFwiXFxcIlxcXFx1XCIuY29uY2F0KCgnMDAnICsgY29kZS50b1N0cmluZygxNikudG9VcHBlckNhc2UoKSkuc2xpY2UoLTQpLCBcIlxcXCJcIilcbiAgKTtcbn1cbi8qKlxuICogR2V0cyB0aGUgbmV4dCB0b2tlbiBmcm9tIHRoZSBzb3VyY2Ugc3RhcnRpbmcgYXQgdGhlIGdpdmVuIHBvc2l0aW9uLlxuICpcbiAqIFRoaXMgc2tpcHMgb3ZlciB3aGl0ZXNwYWNlIHVudGlsIGl0IGZpbmRzIHRoZSBuZXh0IGxleGFibGUgdG9rZW4sIHRoZW4gbGV4ZXNcbiAqIHB1bmN0dWF0b3JzIGltbWVkaWF0ZWx5IG9yIGNhbGxzIHRoZSBhcHByb3ByaWF0ZSBoZWxwZXIgZnVuY3Rpb24gZm9yIG1vcmVcbiAqIGNvbXBsaWNhdGVkIHRva2Vucy5cbiAqL1xuXG5cbmZ1bmN0aW9uIHJlYWRUb2tlbihsZXhlciwgcHJldikge1xuICB2YXIgc291cmNlID0gbGV4ZXIuc291cmNlO1xuICB2YXIgYm9keSA9IHNvdXJjZS5ib2R5O1xuICB2YXIgYm9keUxlbmd0aCA9IGJvZHkubGVuZ3RoO1xuICB2YXIgcG9zID0gcHJldi5lbmQ7XG5cbiAgd2hpbGUgKHBvcyA8IGJvZHlMZW5ndGgpIHtcbiAgICB2YXIgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3MpO1xuICAgIHZhciBfbGluZSA9IGxleGVyLmxpbmU7XG5cbiAgICB2YXIgX2NvbCA9IDEgKyBwb3MgLSBsZXhlci5saW5lU3RhcnQ7IC8vIFNvdXJjZUNoYXJhY3RlclxuXG5cbiAgICBzd2l0Y2ggKGNvZGUpIHtcbiAgICAgIGNhc2UgMHhmZWZmOiAvLyA8Qk9NPlxuXG4gICAgICBjYXNlIDk6IC8vICAgXFx0XG5cbiAgICAgIGNhc2UgMzI6IC8vICA8c3BhY2U+XG5cbiAgICAgIGNhc2UgNDQ6XG4gICAgICAgIC8vICAsXG4gICAgICAgICsrcG9zO1xuICAgICAgICBjb250aW51ZTtcblxuICAgICAgY2FzZSAxMDpcbiAgICAgICAgLy8gIFxcblxuICAgICAgICArK3BvcztcbiAgICAgICAgKytsZXhlci5saW5lO1xuICAgICAgICBsZXhlci5saW5lU3RhcnQgPSBwb3M7XG4gICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICBjYXNlIDEzOlxuICAgICAgICAvLyAgXFxyXG4gICAgICAgIGlmIChib2R5LmNoYXJDb2RlQXQocG9zICsgMSkgPT09IDEwKSB7XG4gICAgICAgICAgcG9zICs9IDI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgKytwb3M7XG4gICAgICAgIH1cblxuICAgICAgICArK2xleGVyLmxpbmU7XG4gICAgICAgIGxleGVyLmxpbmVTdGFydCA9IHBvcztcbiAgICAgICAgY29udGludWU7XG5cbiAgICAgIGNhc2UgMzM6XG4gICAgICAgIC8vICAhXG4gICAgICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW5LaW5kLkJBTkcsIHBvcywgcG9zICsgMSwgX2xpbmUsIF9jb2wsIHByZXYpO1xuXG4gICAgICBjYXNlIDM1OlxuICAgICAgICAvLyAgI1xuICAgICAgICByZXR1cm4gcmVhZENvbW1lbnQoc291cmNlLCBwb3MsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSAzNjpcbiAgICAgICAgLy8gICRcbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbktpbmQuRE9MTEFSLCBwb3MsIHBvcyArIDEsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSAzODpcbiAgICAgICAgLy8gICZcbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbktpbmQuQU1QLCBwb3MsIHBvcyArIDEsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSA0MDpcbiAgICAgICAgLy8gIChcbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbktpbmQuUEFSRU5fTCwgcG9zLCBwb3MgKyAxLCBfbGluZSwgX2NvbCwgcHJldik7XG5cbiAgICAgIGNhc2UgNDE6XG4gICAgICAgIC8vICApXG4gICAgICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW5LaW5kLlBBUkVOX1IsIHBvcywgcG9zICsgMSwgX2xpbmUsIF9jb2wsIHByZXYpO1xuXG4gICAgICBjYXNlIDQ2OlxuICAgICAgICAvLyAgLlxuICAgICAgICBpZiAoYm9keS5jaGFyQ29kZUF0KHBvcyArIDEpID09PSA0NiAmJiBib2R5LmNoYXJDb2RlQXQocG9zICsgMikgPT09IDQ2KSB7XG4gICAgICAgICAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbktpbmQuU1BSRUFELCBwb3MsIHBvcyArIDMsIF9saW5lLCBfY29sLCBwcmV2KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBjYXNlIDU4OlxuICAgICAgICAvLyAgOlxuICAgICAgICByZXR1cm4gbmV3IFRva2VuKFRva2VuS2luZC5DT0xPTiwgcG9zLCBwb3MgKyAxLCBfbGluZSwgX2NvbCwgcHJldik7XG5cbiAgICAgIGNhc2UgNjE6XG4gICAgICAgIC8vICA9XG4gICAgICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW5LaW5kLkVRVUFMUywgcG9zLCBwb3MgKyAxLCBfbGluZSwgX2NvbCwgcHJldik7XG5cbiAgICAgIGNhc2UgNjQ6XG4gICAgICAgIC8vICBAXG4gICAgICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW5LaW5kLkFULCBwb3MsIHBvcyArIDEsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSA5MTpcbiAgICAgICAgLy8gIFtcbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbktpbmQuQlJBQ0tFVF9MLCBwb3MsIHBvcyArIDEsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSA5MzpcbiAgICAgICAgLy8gIF1cbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbktpbmQuQlJBQ0tFVF9SLCBwb3MsIHBvcyArIDEsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSAxMjM6XG4gICAgICAgIC8vIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbktpbmQuQlJBQ0VfTCwgcG9zLCBwb3MgKyAxLCBfbGluZSwgX2NvbCwgcHJldik7XG5cbiAgICAgIGNhc2UgMTI0OlxuICAgICAgICAvLyB8XG4gICAgICAgIHJldHVybiBuZXcgVG9rZW4oVG9rZW5LaW5kLlBJUEUsIHBvcywgcG9zICsgMSwgX2xpbmUsIF9jb2wsIHByZXYpO1xuXG4gICAgICBjYXNlIDEyNTpcbiAgICAgICAgLy8gfVxuICAgICAgICByZXR1cm4gbmV3IFRva2VuKFRva2VuS2luZC5CUkFDRV9SLCBwb3MsIHBvcyArIDEsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSAzNDpcbiAgICAgICAgLy8gIFwiXG4gICAgICAgIGlmIChib2R5LmNoYXJDb2RlQXQocG9zICsgMSkgPT09IDM0ICYmIGJvZHkuY2hhckNvZGVBdChwb3MgKyAyKSA9PT0gMzQpIHtcbiAgICAgICAgICByZXR1cm4gcmVhZEJsb2NrU3RyaW5nKHNvdXJjZSwgcG9zLCBfbGluZSwgX2NvbCwgcHJldiwgbGV4ZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlYWRTdHJpbmcoc291cmNlLCBwb3MsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSA0NTogLy8gIC1cblxuICAgICAgY2FzZSA0ODogLy8gIDBcblxuICAgICAgY2FzZSA0OTogLy8gIDFcblxuICAgICAgY2FzZSA1MDogLy8gIDJcblxuICAgICAgY2FzZSA1MTogLy8gIDNcblxuICAgICAgY2FzZSA1MjogLy8gIDRcblxuICAgICAgY2FzZSA1MzogLy8gIDVcblxuICAgICAgY2FzZSA1NDogLy8gIDZcblxuICAgICAgY2FzZSA1NTogLy8gIDdcblxuICAgICAgY2FzZSA1NjogLy8gIDhcblxuICAgICAgY2FzZSA1NzpcbiAgICAgICAgLy8gIDlcbiAgICAgICAgcmV0dXJuIHJlYWROdW1iZXIoc291cmNlLCBwb3MsIGNvZGUsIF9saW5lLCBfY29sLCBwcmV2KTtcblxuICAgICAgY2FzZSA2NTogLy8gIEFcblxuICAgICAgY2FzZSA2NjogLy8gIEJcblxuICAgICAgY2FzZSA2NzogLy8gIENcblxuICAgICAgY2FzZSA2ODogLy8gIERcblxuICAgICAgY2FzZSA2OTogLy8gIEVcblxuICAgICAgY2FzZSA3MDogLy8gIEZcblxuICAgICAgY2FzZSA3MTogLy8gIEdcblxuICAgICAgY2FzZSA3MjogLy8gIEhcblxuICAgICAgY2FzZSA3MzogLy8gIElcblxuICAgICAgY2FzZSA3NDogLy8gIEpcblxuICAgICAgY2FzZSA3NTogLy8gIEtcblxuICAgICAgY2FzZSA3NjogLy8gIExcblxuICAgICAgY2FzZSA3NzogLy8gIE1cblxuICAgICAgY2FzZSA3ODogLy8gIE5cblxuICAgICAgY2FzZSA3OTogLy8gIE9cblxuICAgICAgY2FzZSA4MDogLy8gIFBcblxuICAgICAgY2FzZSA4MTogLy8gIFFcblxuICAgICAgY2FzZSA4MjogLy8gIFJcblxuICAgICAgY2FzZSA4MzogLy8gIFNcblxuICAgICAgY2FzZSA4NDogLy8gIFRcblxuICAgICAgY2FzZSA4NTogLy8gIFVcblxuICAgICAgY2FzZSA4NjogLy8gIFZcblxuICAgICAgY2FzZSA4NzogLy8gIFdcblxuICAgICAgY2FzZSA4ODogLy8gIFhcblxuICAgICAgY2FzZSA4OTogLy8gIFlcblxuICAgICAgY2FzZSA5MDogLy8gIFpcblxuICAgICAgY2FzZSA5NTogLy8gIF9cblxuICAgICAgY2FzZSA5NzogLy8gIGFcblxuICAgICAgY2FzZSA5ODogLy8gIGJcblxuICAgICAgY2FzZSA5OTogLy8gIGNcblxuICAgICAgY2FzZSAxMDA6IC8vIGRcblxuICAgICAgY2FzZSAxMDE6IC8vIGVcblxuICAgICAgY2FzZSAxMDI6IC8vIGZcblxuICAgICAgY2FzZSAxMDM6IC8vIGdcblxuICAgICAgY2FzZSAxMDQ6IC8vIGhcblxuICAgICAgY2FzZSAxMDU6IC8vIGlcblxuICAgICAgY2FzZSAxMDY6IC8vIGpcblxuICAgICAgY2FzZSAxMDc6IC8vIGtcblxuICAgICAgY2FzZSAxMDg6IC8vIGxcblxuICAgICAgY2FzZSAxMDk6IC8vIG1cblxuICAgICAgY2FzZSAxMTA6IC8vIG5cblxuICAgICAgY2FzZSAxMTE6IC8vIG9cblxuICAgICAgY2FzZSAxMTI6IC8vIHBcblxuICAgICAgY2FzZSAxMTM6IC8vIHFcblxuICAgICAgY2FzZSAxMTQ6IC8vIHJcblxuICAgICAgY2FzZSAxMTU6IC8vIHNcblxuICAgICAgY2FzZSAxMTY6IC8vIHRcblxuICAgICAgY2FzZSAxMTc6IC8vIHVcblxuICAgICAgY2FzZSAxMTg6IC8vIHZcblxuICAgICAgY2FzZSAxMTk6IC8vIHdcblxuICAgICAgY2FzZSAxMjA6IC8vIHhcblxuICAgICAgY2FzZSAxMjE6IC8vIHlcblxuICAgICAgY2FzZSAxMjI6XG4gICAgICAgIC8vIHpcbiAgICAgICAgcmV0dXJuIHJlYWROYW1lKHNvdXJjZSwgcG9zLCBfbGluZSwgX2NvbCwgcHJldik7XG4gICAgfVxuXG4gICAgdGhyb3cgc3ludGF4RXJyb3Ioc291cmNlLCBwb3MsIHVuZXhwZWN0ZWRDaGFyYWN0ZXJNZXNzYWdlKGNvZGUpKTtcbiAgfVxuXG4gIHZhciBsaW5lID0gbGV4ZXIubGluZTtcbiAgdmFyIGNvbCA9IDEgKyBwb3MgLSBsZXhlci5saW5lU3RhcnQ7XG4gIHJldHVybiBuZXcgVG9rZW4oVG9rZW5LaW5kLkVPRiwgYm9keUxlbmd0aCwgYm9keUxlbmd0aCwgbGluZSwgY29sLCBwcmV2KTtcbn1cbi8qKlxuICogUmVwb3J0IGEgbWVzc2FnZSB0aGF0IGFuIHVuZXhwZWN0ZWQgY2hhcmFjdGVyIHdhcyBlbmNvdW50ZXJlZC5cbiAqL1xuXG5cbmZ1bmN0aW9uIHVuZXhwZWN0ZWRDaGFyYWN0ZXJNZXNzYWdlKGNvZGUpIHtcbiAgaWYgKGNvZGUgPCAweDAwMjAgJiYgY29kZSAhPT0gMHgwMDA5ICYmIGNvZGUgIT09IDB4MDAwYSAmJiBjb2RlICE9PSAweDAwMGQpIHtcbiAgICByZXR1cm4gXCJDYW5ub3QgY29udGFpbiB0aGUgaW52YWxpZCBjaGFyYWN0ZXIgXCIuY29uY2F0KHByaW50Q2hhckNvZGUoY29kZSksIFwiLlwiKTtcbiAgfVxuXG4gIGlmIChjb2RlID09PSAzOSkge1xuICAgIC8vICdcbiAgICByZXR1cm4gJ1VuZXhwZWN0ZWQgc2luZ2xlIHF1b3RlIGNoYXJhY3RlciAoXFwnKSwgZGlkIHlvdSBtZWFuIHRvIHVzZSBhIGRvdWJsZSBxdW90ZSAoXCIpPyc7XG4gIH1cblxuICByZXR1cm4gXCJDYW5ub3QgcGFyc2UgdGhlIHVuZXhwZWN0ZWQgY2hhcmFjdGVyIFwiLmNvbmNhdChwcmludENoYXJDb2RlKGNvZGUpLCBcIi5cIik7XG59XG4vKipcbiAqIFJlYWRzIGEgY29tbWVudCB0b2tlbiBmcm9tIHRoZSBzb3VyY2UgZmlsZS5cbiAqXG4gKiAjW1xcdTAwMDlcXHUwMDIwLVxcdUZGRkZdKlxuICovXG5cblxuZnVuY3Rpb24gcmVhZENvbW1lbnQoc291cmNlLCBzdGFydCwgbGluZSwgY29sLCBwcmV2KSB7XG4gIHZhciBib2R5ID0gc291cmNlLmJvZHk7XG4gIHZhciBjb2RlO1xuICB2YXIgcG9zaXRpb24gPSBzdGFydDtcblxuICBkbyB7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTtcbiAgfSB3aGlsZSAoIWlzTmFOKGNvZGUpICYmICggLy8gU291cmNlQ2hhcmFjdGVyIGJ1dCBub3QgTGluZVRlcm1pbmF0b3JcbiAgY29kZSA+IDB4MDAxZiB8fCBjb2RlID09PSAweDAwMDkpKTtcblxuICByZXR1cm4gbmV3IFRva2VuKFRva2VuS2luZC5DT01NRU5ULCBzdGFydCwgcG9zaXRpb24sIGxpbmUsIGNvbCwgcHJldiwgYm9keS5zbGljZShzdGFydCArIDEsIHBvc2l0aW9uKSk7XG59XG4vKipcbiAqIFJlYWRzIGEgbnVtYmVyIHRva2VuIGZyb20gdGhlIHNvdXJjZSBmaWxlLCBlaXRoZXIgYSBmbG9hdFxuICogb3IgYW4gaW50IGRlcGVuZGluZyBvbiB3aGV0aGVyIGEgZGVjaW1hbCBwb2ludCBhcHBlYXJzLlxuICpcbiAqIEludDogICAtPygwfFsxLTldWzAtOV0qKVxuICogRmxvYXQ6IC0/KDB8WzEtOV1bMC05XSopKFxcLlswLTldKyk/KChFfGUpKCt8LSk/WzAtOV0rKT9cbiAqL1xuXG5cbmZ1bmN0aW9uIHJlYWROdW1iZXIoc291cmNlLCBzdGFydCwgZmlyc3RDb2RlLCBsaW5lLCBjb2wsIHByZXYpIHtcbiAgdmFyIGJvZHkgPSBzb3VyY2UuYm9keTtcbiAgdmFyIGNvZGUgPSBmaXJzdENvZGU7XG4gIHZhciBwb3NpdGlvbiA9IHN0YXJ0O1xuICB2YXIgaXNGbG9hdCA9IGZhbHNlO1xuXG4gIGlmIChjb2RlID09PSA0NSkge1xuICAgIC8vIC1cbiAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KCsrcG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKGNvZGUgPT09IDQ4KSB7XG4gICAgLy8gMFxuICAgIGNvZGUgPSBib2R5LmNoYXJDb2RlQXQoKytwb3NpdGlvbik7XG5cbiAgICBpZiAoY29kZSA+PSA0OCAmJiBjb2RlIDw9IDU3KSB7XG4gICAgICB0aHJvdyBzeW50YXhFcnJvcihzb3VyY2UsIHBvc2l0aW9uLCBcIkludmFsaWQgbnVtYmVyLCB1bmV4cGVjdGVkIGRpZ2l0IGFmdGVyIDA6IFwiLmNvbmNhdChwcmludENoYXJDb2RlKGNvZGUpLCBcIi5cIikpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwb3NpdGlvbiA9IHJlYWREaWdpdHMoc291cmNlLCBwb3NpdGlvbiwgY29kZSk7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbik7XG4gIH1cblxuICBpZiAoY29kZSA9PT0gNDYpIHtcbiAgICAvLyAuXG4gICAgaXNGbG9hdCA9IHRydWU7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTtcbiAgICBwb3NpdGlvbiA9IHJlYWREaWdpdHMoc291cmNlLCBwb3NpdGlvbiwgY29kZSk7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbik7XG4gIH1cblxuICBpZiAoY29kZSA9PT0gNjkgfHwgY29kZSA9PT0gMTAxKSB7XG4gICAgLy8gRSBlXG4gICAgaXNGbG9hdCA9IHRydWU7XG4gICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTtcblxuICAgIGlmIChjb2RlID09PSA0MyB8fCBjb2RlID09PSA0NSkge1xuICAgICAgLy8gKyAtXG4gICAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KCsrcG9zaXRpb24pO1xuICAgIH1cblxuICAgIHBvc2l0aW9uID0gcmVhZERpZ2l0cyhzb3VyY2UsIHBvc2l0aW9uLCBjb2RlKTtcbiAgICBjb2RlID0gYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uKTtcbiAgfSAvLyBOdW1iZXJzIGNhbm5vdCBiZSBmb2xsb3dlZCBieSAuIG9yIE5hbWVTdGFydFxuXG5cbiAgaWYgKGNvZGUgPT09IDQ2IHx8IGlzTmFtZVN0YXJ0KGNvZGUpKSB7XG4gICAgdGhyb3cgc3ludGF4RXJyb3Ioc291cmNlLCBwb3NpdGlvbiwgXCJJbnZhbGlkIG51bWJlciwgZXhwZWN0ZWQgZGlnaXQgYnV0IGdvdDogXCIuY29uY2F0KHByaW50Q2hhckNvZGUoY29kZSksIFwiLlwiKSk7XG4gIH1cblxuICByZXR1cm4gbmV3IFRva2VuKGlzRmxvYXQgPyBUb2tlbktpbmQuRkxPQVQgOiBUb2tlbktpbmQuSU5ULCBzdGFydCwgcG9zaXRpb24sIGxpbmUsIGNvbCwgcHJldiwgYm9keS5zbGljZShzdGFydCwgcG9zaXRpb24pKTtcbn1cbi8qKlxuICogUmV0dXJucyB0aGUgbmV3IHBvc2l0aW9uIGluIHRoZSBzb3VyY2UgYWZ0ZXIgcmVhZGluZyBkaWdpdHMuXG4gKi9cblxuXG5mdW5jdGlvbiByZWFkRGlnaXRzKHNvdXJjZSwgc3RhcnQsIGZpcnN0Q29kZSkge1xuICB2YXIgYm9keSA9IHNvdXJjZS5ib2R5O1xuICB2YXIgcG9zaXRpb24gPSBzdGFydDtcbiAgdmFyIGNvZGUgPSBmaXJzdENvZGU7XG5cbiAgaWYgKGNvZGUgPj0gNDggJiYgY29kZSA8PSA1Nykge1xuICAgIC8vIDAgLSA5XG4gICAgZG8ge1xuICAgICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdCgrK3Bvc2l0aW9uKTtcbiAgICB9IHdoaWxlIChjb2RlID49IDQ4ICYmIGNvZGUgPD0gNTcpOyAvLyAwIC0gOVxuXG5cbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cblxuICB0aHJvdyBzeW50YXhFcnJvcihzb3VyY2UsIHBvc2l0aW9uLCBcIkludmFsaWQgbnVtYmVyLCBleHBlY3RlZCBkaWdpdCBidXQgZ290OiBcIi5jb25jYXQocHJpbnRDaGFyQ29kZShjb2RlKSwgXCIuXCIpKTtcbn1cbi8qKlxuICogUmVhZHMgYSBzdHJpbmcgdG9rZW4gZnJvbSB0aGUgc291cmNlIGZpbGUuXG4gKlxuICogXCIoW15cIlxcXFxcXHUwMDBBXFx1MDAwRF18KFxcXFwodVswLTlhLWZBLUZdezR9fFtcIlxcXFwvYmZucnRdKSkpKlwiXG4gKi9cblxuXG5mdW5jdGlvbiByZWFkU3RyaW5nKHNvdXJjZSwgc3RhcnQsIGxpbmUsIGNvbCwgcHJldikge1xuICB2YXIgYm9keSA9IHNvdXJjZS5ib2R5O1xuICB2YXIgcG9zaXRpb24gPSBzdGFydCArIDE7XG4gIHZhciBjaHVua1N0YXJ0ID0gcG9zaXRpb247XG4gIHZhciBjb2RlID0gMDtcbiAgdmFyIHZhbHVlID0gJyc7XG5cbiAgd2hpbGUgKHBvc2l0aW9uIDwgYm9keS5sZW5ndGggJiYgIWlzTmFOKGNvZGUgPSBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24pKSAmJiAvLyBub3QgTGluZVRlcm1pbmF0b3JcbiAgY29kZSAhPT0gMHgwMDBhICYmIGNvZGUgIT09IDB4MDAwZCkge1xuICAgIC8vIENsb3NpbmcgUXVvdGUgKFwiKVxuICAgIGlmIChjb2RlID09PSAzNCkge1xuICAgICAgdmFsdWUgKz0gYm9keS5zbGljZShjaHVua1N0YXJ0LCBwb3NpdGlvbik7XG4gICAgICByZXR1cm4gbmV3IFRva2VuKFRva2VuS2luZC5TVFJJTkcsIHN0YXJ0LCBwb3NpdGlvbiArIDEsIGxpbmUsIGNvbCwgcHJldiwgdmFsdWUpO1xuICAgIH0gLy8gU291cmNlQ2hhcmFjdGVyXG5cblxuICAgIGlmIChjb2RlIDwgMHgwMDIwICYmIGNvZGUgIT09IDB4MDAwOSkge1xuICAgICAgdGhyb3cgc3ludGF4RXJyb3Ioc291cmNlLCBwb3NpdGlvbiwgXCJJbnZhbGlkIGNoYXJhY3RlciB3aXRoaW4gU3RyaW5nOiBcIi5jb25jYXQocHJpbnRDaGFyQ29kZShjb2RlKSwgXCIuXCIpKTtcbiAgICB9XG5cbiAgICArK3Bvc2l0aW9uO1xuXG4gICAgaWYgKGNvZGUgPT09IDkyKSB7XG4gICAgICAvLyBcXFxuICAgICAgdmFsdWUgKz0gYm9keS5zbGljZShjaHVua1N0YXJ0LCBwb3NpdGlvbiAtIDEpO1xuICAgICAgY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbik7XG5cbiAgICAgIHN3aXRjaCAoY29kZSkge1xuICAgICAgICBjYXNlIDM0OlxuICAgICAgICAgIHZhbHVlICs9ICdcIic7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA0NzpcbiAgICAgICAgICB2YWx1ZSArPSAnLyc7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA5MjpcbiAgICAgICAgICB2YWx1ZSArPSAnXFxcXCc7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSA5ODpcbiAgICAgICAgICB2YWx1ZSArPSAnXFxiJztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDEwMjpcbiAgICAgICAgICB2YWx1ZSArPSAnXFxmJztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDExMDpcbiAgICAgICAgICB2YWx1ZSArPSAnXFxuJztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDExNDpcbiAgICAgICAgICB2YWx1ZSArPSAnXFxyJztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDExNjpcbiAgICAgICAgICB2YWx1ZSArPSAnXFx0JztcbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIDExNzpcbiAgICAgICAgICB7XG4gICAgICAgICAgICAvLyB1WFhYWFxuICAgICAgICAgICAgdmFyIGNoYXJDb2RlID0gdW5pQ2hhckNvZGUoYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSksIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDIpLCBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAzKSwgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgNCkpO1xuXG4gICAgICAgICAgICBpZiAoY2hhckNvZGUgPCAwKSB7XG4gICAgICAgICAgICAgIHZhciBpbnZhbGlkU2VxdWVuY2UgPSBib2R5LnNsaWNlKHBvc2l0aW9uICsgMSwgcG9zaXRpb24gKyA1KTtcbiAgICAgICAgICAgICAgdGhyb3cgc3ludGF4RXJyb3Ioc291cmNlLCBwb3NpdGlvbiwgXCJJbnZhbGlkIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2U6IFxcXFx1XCIuY29uY2F0KGludmFsaWRTZXF1ZW5jZSwgXCIuXCIpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjaGFyQ29kZSk7XG4gICAgICAgICAgICBwb3NpdGlvbiArPSA0O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgdGhyb3cgc3ludGF4RXJyb3Ioc291cmNlLCBwb3NpdGlvbiwgXCJJbnZhbGlkIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2U6IFxcXFxcIi5jb25jYXQoU3RyaW5nLmZyb21DaGFyQ29kZShjb2RlKSwgXCIuXCIpKTtcbiAgICAgIH1cblxuICAgICAgKytwb3NpdGlvbjtcbiAgICAgIGNodW5rU3RhcnQgPSBwb3NpdGlvbjtcbiAgICB9XG4gIH1cblxuICB0aHJvdyBzeW50YXhFcnJvcihzb3VyY2UsIHBvc2l0aW9uLCAnVW50ZXJtaW5hdGVkIHN0cmluZy4nKTtcbn1cbi8qKlxuICogUmVhZHMgYSBibG9jayBzdHJpbmcgdG9rZW4gZnJvbSB0aGUgc291cmNlIGZpbGUuXG4gKlxuICogXCJcIlwiKFwiP1wiPyhcXFxcXCJcIlwifFxcXFwoPyE9XCJcIlwiKXxbXlwiXFxcXF0pKSpcIlwiXCJcbiAqL1xuXG5cbmZ1bmN0aW9uIHJlYWRCbG9ja1N0cmluZyhzb3VyY2UsIHN0YXJ0LCBsaW5lLCBjb2wsIHByZXYsIGxleGVyKSB7XG4gIHZhciBib2R5ID0gc291cmNlLmJvZHk7XG4gIHZhciBwb3NpdGlvbiA9IHN0YXJ0ICsgMztcbiAgdmFyIGNodW5rU3RhcnQgPSBwb3NpdGlvbjtcbiAgdmFyIGNvZGUgPSAwO1xuICB2YXIgcmF3VmFsdWUgPSAnJztcblxuICB3aGlsZSAocG9zaXRpb24gPCBib2R5Lmxlbmd0aCAmJiAhaXNOYU4oY29kZSA9IGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbikpKSB7XG4gICAgLy8gQ2xvc2luZyBUcmlwbGUtUXVvdGUgKFwiXCJcIilcbiAgICBpZiAoY29kZSA9PT0gMzQgJiYgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMSkgPT09IDM0ICYmIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDIpID09PSAzNCkge1xuICAgICAgcmF3VmFsdWUgKz0gYm9keS5zbGljZShjaHVua1N0YXJ0LCBwb3NpdGlvbik7XG4gICAgICByZXR1cm4gbmV3IFRva2VuKFRva2VuS2luZC5CTE9DS19TVFJJTkcsIHN0YXJ0LCBwb3NpdGlvbiArIDMsIGxpbmUsIGNvbCwgcHJldiwgZGVkZW50QmxvY2tTdHJpbmdWYWx1ZShyYXdWYWx1ZSkpO1xuICAgIH0gLy8gU291cmNlQ2hhcmFjdGVyXG5cblxuICAgIGlmIChjb2RlIDwgMHgwMDIwICYmIGNvZGUgIT09IDB4MDAwOSAmJiBjb2RlICE9PSAweDAwMGEgJiYgY29kZSAhPT0gMHgwMDBkKSB7XG4gICAgICB0aHJvdyBzeW50YXhFcnJvcihzb3VyY2UsIHBvc2l0aW9uLCBcIkludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6IFwiLmNvbmNhdChwcmludENoYXJDb2RlKGNvZGUpLCBcIi5cIikpO1xuICAgIH1cblxuICAgIGlmIChjb2RlID09PSAxMCkge1xuICAgICAgLy8gbmV3IGxpbmVcbiAgICAgICsrcG9zaXRpb247XG4gICAgICArK2xleGVyLmxpbmU7XG4gICAgICBsZXhlci5saW5lU3RhcnQgPSBwb3NpdGlvbjtcbiAgICB9IGVsc2UgaWYgKGNvZGUgPT09IDEzKSB7XG4gICAgICAvLyBjYXJyaWFnZSByZXR1cm5cbiAgICAgIGlmIChib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAxKSA9PT0gMTApIHtcbiAgICAgICAgcG9zaXRpb24gKz0gMjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICsrcG9zaXRpb247XG4gICAgICB9XG5cbiAgICAgICsrbGV4ZXIubGluZTtcbiAgICAgIGxleGVyLmxpbmVTdGFydCA9IHBvc2l0aW9uO1xuICAgIH0gZWxzZSBpZiAoIC8vIEVzY2FwZSBUcmlwbGUtUXVvdGUgKFxcXCJcIlwiKVxuICAgIGNvZGUgPT09IDkyICYmIGJvZHkuY2hhckNvZGVBdChwb3NpdGlvbiArIDEpID09PSAzNCAmJiBib2R5LmNoYXJDb2RlQXQocG9zaXRpb24gKyAyKSA9PT0gMzQgJiYgYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uICsgMykgPT09IDM0KSB7XG4gICAgICByYXdWYWx1ZSArPSBib2R5LnNsaWNlKGNodW5rU3RhcnQsIHBvc2l0aW9uKSArICdcIlwiXCInO1xuICAgICAgcG9zaXRpb24gKz0gNDtcbiAgICAgIGNodW5rU3RhcnQgPSBwb3NpdGlvbjtcbiAgICB9IGVsc2Uge1xuICAgICAgKytwb3NpdGlvbjtcbiAgICB9XG4gIH1cblxuICB0aHJvdyBzeW50YXhFcnJvcihzb3VyY2UsIHBvc2l0aW9uLCAnVW50ZXJtaW5hdGVkIHN0cmluZy4nKTtcbn1cbi8qKlxuICogQ29udmVydHMgZm91ciBoZXhhZGVjaW1hbCBjaGFycyB0byB0aGUgaW50ZWdlciB0aGF0IHRoZVxuICogc3RyaW5nIHJlcHJlc2VudHMuIEZvciBleGFtcGxlLCB1bmlDaGFyQ29kZSgnMCcsJzAnLCcwJywnZicpXG4gKiB3aWxsIHJldHVybiAxNSwgYW5kIHVuaUNoYXJDb2RlKCcwJywnMCcsJ2YnLCdmJykgcmV0dXJucyAyNTUuXG4gKlxuICogUmV0dXJucyBhIG5lZ2F0aXZlIG51bWJlciBvbiBlcnJvciwgaWYgYSBjaGFyIHdhcyBpbnZhbGlkLlxuICpcbiAqIFRoaXMgaXMgaW1wbGVtZW50ZWQgYnkgbm90aW5nIHRoYXQgY2hhcjJoZXgoKSByZXR1cm5zIC0xIG9uIGVycm9yLFxuICogd2hpY2ggbWVhbnMgdGhlIHJlc3VsdCBvZiBPUmluZyB0aGUgY2hhcjJoZXgoKSB3aWxsIGFsc28gYmUgbmVnYXRpdmUuXG4gKi9cblxuXG5mdW5jdGlvbiB1bmlDaGFyQ29kZShhLCBiLCBjLCBkKSB7XG4gIHJldHVybiBjaGFyMmhleChhKSA8PCAxMiB8IGNoYXIyaGV4KGIpIDw8IDggfCBjaGFyMmhleChjKSA8PCA0IHwgY2hhcjJoZXgoZCk7XG59XG4vKipcbiAqIENvbnZlcnRzIGEgaGV4IGNoYXJhY3RlciB0byBpdHMgaW50ZWdlciB2YWx1ZS5cbiAqICcwJyBiZWNvbWVzIDAsICc5JyBiZWNvbWVzIDlcbiAqICdBJyBiZWNvbWVzIDEwLCAnRicgYmVjb21lcyAxNVxuICogJ2EnIGJlY29tZXMgMTAsICdmJyBiZWNvbWVzIDE1XG4gKlxuICogUmV0dXJucyAtMSBvbiBlcnJvci5cbiAqL1xuXG5cbmZ1bmN0aW9uIGNoYXIyaGV4KGEpIHtcbiAgcmV0dXJuIGEgPj0gNDggJiYgYSA8PSA1NyA/IGEgLSA0OCAvLyAwLTlcbiAgOiBhID49IDY1ICYmIGEgPD0gNzAgPyBhIC0gNTUgLy8gQS1GXG4gIDogYSA+PSA5NyAmJiBhIDw9IDEwMiA/IGEgLSA4NyAvLyBhLWZcbiAgOiAtMTtcbn1cbi8qKlxuICogUmVhZHMgYW4gYWxwaGFudW1lcmljICsgdW5kZXJzY29yZSBuYW1lIGZyb20gdGhlIHNvdXJjZS5cbiAqXG4gKiBbX0EtWmEtel1bXzAtOUEtWmEtel0qXG4gKi9cblxuXG5mdW5jdGlvbiByZWFkTmFtZShzb3VyY2UsIHN0YXJ0LCBsaW5lLCBjb2wsIHByZXYpIHtcbiAgdmFyIGJvZHkgPSBzb3VyY2UuYm9keTtcbiAgdmFyIGJvZHlMZW5ndGggPSBib2R5Lmxlbmd0aDtcbiAgdmFyIHBvc2l0aW9uID0gc3RhcnQgKyAxO1xuICB2YXIgY29kZSA9IDA7XG5cbiAgd2hpbGUgKHBvc2l0aW9uICE9PSBib2R5TGVuZ3RoICYmICFpc05hTihjb2RlID0gYm9keS5jaGFyQ29kZUF0KHBvc2l0aW9uKSkgJiYgKGNvZGUgPT09IDk1IHx8IC8vIF9cbiAgY29kZSA+PSA0OCAmJiBjb2RlIDw9IDU3IHx8IC8vIDAtOVxuICBjb2RlID49IDY1ICYmIGNvZGUgPD0gOTAgfHwgLy8gQS1aXG4gIGNvZGUgPj0gOTcgJiYgY29kZSA8PSAxMjIpIC8vIGEtelxuICApIHtcbiAgICArK3Bvc2l0aW9uO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBUb2tlbihUb2tlbktpbmQuTkFNRSwgc3RhcnQsIHBvc2l0aW9uLCBsaW5lLCBjb2wsIHByZXYsIGJvZHkuc2xpY2Uoc3RhcnQsIHBvc2l0aW9uKSk7XG59IC8vIF8gQS1aIGEtelxuXG5cbmZ1bmN0aW9uIGlzTmFtZVN0YXJ0KGNvZGUpIHtcbiAgcmV0dXJuIGNvZGUgPT09IDk1IHx8IGNvZGUgPj0gNjUgJiYgY29kZSA8PSA5MCB8fCBjb2RlID49IDk3ICYmIGNvZGUgPD0gMTIyO1xufVxuIiwgImltcG9ydCB7IHN5bnRheEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yL3N5bnRheEVycm9yLm1qc1wiO1xuaW1wb3J0IHsgS2luZCB9IGZyb20gXCIuL2tpbmRzLm1qc1wiO1xuaW1wb3J0IHsgTG9jYXRpb24gfSBmcm9tIFwiLi9hc3QubWpzXCI7XG5pbXBvcnQgeyBUb2tlbktpbmQgfSBmcm9tIFwiLi90b2tlbktpbmQubWpzXCI7XG5pbXBvcnQgeyBTb3VyY2UsIGlzU291cmNlIH0gZnJvbSBcIi4vc291cmNlLm1qc1wiO1xuaW1wb3J0IHsgRGlyZWN0aXZlTG9jYXRpb24gfSBmcm9tIFwiLi9kaXJlY3RpdmVMb2NhdGlvbi5tanNcIjtcbmltcG9ydCB7IExleGVyLCBpc1B1bmN0dWF0b3JUb2tlbktpbmQgfSBmcm9tIFwiLi9sZXhlci5tanNcIjtcbi8qKlxuICogQ29uZmlndXJhdGlvbiBvcHRpb25zIHRvIGNvbnRyb2wgcGFyc2VyIGJlaGF2aW9yXG4gKi9cblxuLyoqXG4gKiBHaXZlbiBhIEdyYXBoUUwgc291cmNlLCBwYXJzZXMgaXQgaW50byBhIERvY3VtZW50LlxuICogVGhyb3dzIEdyYXBoUUxFcnJvciBpZiBhIHN5bnRheCBlcnJvciBpcyBlbmNvdW50ZXJlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKHNvdXJjZSwgb3B0aW9ucykge1xuICB2YXIgcGFyc2VyID0gbmV3IFBhcnNlcihzb3VyY2UsIG9wdGlvbnMpO1xuICByZXR1cm4gcGFyc2VyLnBhcnNlRG9jdW1lbnQoKTtcbn1cbi8qKlxuICogR2l2ZW4gYSBzdHJpbmcgY29udGFpbmluZyBhIEdyYXBoUUwgdmFsdWUgKGV4LiBgWzQyXWApLCBwYXJzZSB0aGUgQVNUIGZvclxuICogdGhhdCB2YWx1ZS5cbiAqIFRocm93cyBHcmFwaFFMRXJyb3IgaWYgYSBzeW50YXggZXJyb3IgaXMgZW5jb3VudGVyZWQuXG4gKlxuICogVGhpcyBpcyB1c2VmdWwgd2l0aGluIHRvb2xzIHRoYXQgb3BlcmF0ZSB1cG9uIEdyYXBoUUwgVmFsdWVzIGRpcmVjdGx5IGFuZFxuICogaW4gaXNvbGF0aW9uIG9mIGNvbXBsZXRlIEdyYXBoUUwgZG9jdW1lbnRzLlxuICpcbiAqIENvbnNpZGVyIHByb3ZpZGluZyB0aGUgcmVzdWx0cyB0byB0aGUgdXRpbGl0eSBmdW5jdGlvbjogdmFsdWVGcm9tQVNUKCkuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlVmFsdWUoc291cmNlLCBvcHRpb25zKSB7XG4gIHZhciBwYXJzZXIgPSBuZXcgUGFyc2VyKHNvdXJjZSwgb3B0aW9ucyk7XG4gIHBhcnNlci5leHBlY3RUb2tlbihUb2tlbktpbmQuU09GKTtcbiAgdmFyIHZhbHVlID0gcGFyc2VyLnBhcnNlVmFsdWVMaXRlcmFsKGZhbHNlKTtcbiAgcGFyc2VyLmV4cGVjdFRva2VuKFRva2VuS2luZC5FT0YpO1xuICByZXR1cm4gdmFsdWU7XG59XG4vKipcbiAqIEdpdmVuIGEgc3RyaW5nIGNvbnRhaW5pbmcgYSBHcmFwaFFMIFR5cGUgKGV4LiBgW0ludCFdYCksIHBhcnNlIHRoZSBBU1QgZm9yXG4gKiB0aGF0IHR5cGUuXG4gKiBUaHJvd3MgR3JhcGhRTEVycm9yIGlmIGEgc3ludGF4IGVycm9yIGlzIGVuY291bnRlcmVkLlxuICpcbiAqIFRoaXMgaXMgdXNlZnVsIHdpdGhpbiB0b29scyB0aGF0IG9wZXJhdGUgdXBvbiBHcmFwaFFMIFR5cGVzIGRpcmVjdGx5IGFuZFxuICogaW4gaXNvbGF0aW9uIG9mIGNvbXBsZXRlIEdyYXBoUUwgZG9jdW1lbnRzLlxuICpcbiAqIENvbnNpZGVyIHByb3ZpZGluZyB0aGUgcmVzdWx0cyB0byB0aGUgdXRpbGl0eSBmdW5jdGlvbjogdHlwZUZyb21BU1QoKS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VUeXBlKHNvdXJjZSwgb3B0aW9ucykge1xuICB2YXIgcGFyc2VyID0gbmV3IFBhcnNlcihzb3VyY2UsIG9wdGlvbnMpO1xuICBwYXJzZXIuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLlNPRik7XG4gIHZhciB0eXBlID0gcGFyc2VyLnBhcnNlVHlwZVJlZmVyZW5jZSgpO1xuICBwYXJzZXIuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkVPRik7XG4gIHJldHVybiB0eXBlO1xufVxuLyoqXG4gKiBUaGlzIGNsYXNzIGlzIGV4cG9ydGVkIG9ubHkgdG8gYXNzaXN0IHBlb3BsZSBpbiBpbXBsZW1lbnRpbmcgdGhlaXIgb3duIHBhcnNlcnNcbiAqIHdpdGhvdXQgZHVwbGljYXRpbmcgdG9vIG11Y2ggY29kZSBhbmQgc2hvdWxkIGJlIHVzZWQgb25seSBhcyBsYXN0IHJlc29ydCBmb3IgY2FzZXNcbiAqIHN1Y2ggYXMgZXhwZXJpbWVudGFsIHN5bnRheCBvciBpZiBjZXJ0YWluIGZlYXR1cmVzIGNvdWxkIG5vdCBiZSBjb250cmlidXRlZCB1cHN0cmVhbS5cbiAqXG4gKiBJdCBpcyBzdGlsbCBwYXJ0IG9mIHRoZSBpbnRlcm5hbCBBUEkgYW5kIGlzIHZlcnNpb25lZCwgc28gYW55IGNoYW5nZXMgdG8gaXQgYXJlIG5ldmVyXG4gKiBjb25zaWRlcmVkIGJyZWFraW5nIGNoYW5nZXMuIElmIHlvdSBzdGlsbCBuZWVkIHRvIHN1cHBvcnQgbXVsdGlwbGUgdmVyc2lvbnMgb2YgdGhlXG4gKiBsaWJyYXJ5LCBwbGVhc2UgdXNlIHRoZSBgdmVyc2lvbkluZm9gIHZhcmlhYmxlIGZvciB2ZXJzaW9uIGRldGVjdGlvbi5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqL1xuXG5leHBvcnQgdmFyIFBhcnNlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIFBhcnNlcihzb3VyY2UsIG9wdGlvbnMpIHtcbiAgICB2YXIgc291cmNlT2JqID0gaXNTb3VyY2Uoc291cmNlKSA/IHNvdXJjZSA6IG5ldyBTb3VyY2Uoc291cmNlKTtcbiAgICB0aGlzLl9sZXhlciA9IG5ldyBMZXhlcihzb3VyY2VPYmopO1xuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuICB9XG4gIC8qKlxuICAgKiBDb252ZXJ0cyBhIG5hbWUgbGV4IHRva2VuIGludG8gYSBuYW1lIHBhcnNlIG5vZGUuXG4gICAqL1xuXG5cbiAgdmFyIF9wcm90byA9IFBhcnNlci5wcm90b3R5cGU7XG5cbiAgX3Byb3RvLnBhcnNlTmFtZSA9IGZ1bmN0aW9uIHBhcnNlTmFtZSgpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5OQU1FKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5OQU1FLFxuICAgICAgdmFsdWU6IHRva2VuLnZhbHVlLFxuICAgICAgbG9jOiB0aGlzLmxvYyh0b2tlbilcbiAgICB9O1xuICB9IC8vIEltcGxlbWVudHMgdGhlIHBhcnNpbmcgcnVsZXMgaW4gdGhlIERvY3VtZW50IHNlY3Rpb24uXG5cbiAgLyoqXG4gICAqIERvY3VtZW50IDogRGVmaW5pdGlvbitcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VEb2N1bWVudCA9IGZ1bmN0aW9uIHBhcnNlRG9jdW1lbnQoKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuRE9DVU1FTlQsXG4gICAgICBkZWZpbml0aW9uczogdGhpcy5tYW55KFRva2VuS2luZC5TT0YsIHRoaXMucGFyc2VEZWZpbml0aW9uLCBUb2tlbktpbmQuRU9GKSxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogRGVmaW5pdGlvbiA6XG4gICAqICAgLSBFeGVjdXRhYmxlRGVmaW5pdGlvblxuICAgKiAgIC0gVHlwZVN5c3RlbURlZmluaXRpb25cbiAgICogICAtIFR5cGVTeXN0ZW1FeHRlbnNpb25cbiAgICpcbiAgICogRXhlY3V0YWJsZURlZmluaXRpb24gOlxuICAgKiAgIC0gT3BlcmF0aW9uRGVmaW5pdGlvblxuICAgKiAgIC0gRnJhZ21lbnREZWZpbml0aW9uXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIHBhcnNlRGVmaW5pdGlvbigpIHtcbiAgICBpZiAodGhpcy5wZWVrKFRva2VuS2luZC5OQU1FKSkge1xuICAgICAgc3dpdGNoICh0aGlzLl9sZXhlci50b2tlbi52YWx1ZSkge1xuICAgICAgICBjYXNlICdxdWVyeSc6XG4gICAgICAgIGNhc2UgJ211dGF0aW9uJzpcbiAgICAgICAgY2FzZSAnc3Vic2NyaXB0aW9uJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZU9wZXJhdGlvbkRlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdmcmFnbWVudCc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VGcmFnbWVudERlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdzY2hlbWEnOlxuICAgICAgICBjYXNlICdzY2FsYXInOlxuICAgICAgICBjYXNlICd0eXBlJzpcbiAgICAgICAgY2FzZSAnaW50ZXJmYWNlJzpcbiAgICAgICAgY2FzZSAndW5pb24nOlxuICAgICAgICBjYXNlICdlbnVtJzpcbiAgICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICBjYXNlICdkaXJlY3RpdmUnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVHlwZVN5c3RlbURlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdleHRlbmQnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5wZWVrKFRva2VuS2luZC5CUkFDRV9MKSkge1xuICAgICAgcmV0dXJuIHRoaXMucGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLnBlZWtEZXNjcmlwdGlvbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJzZVR5cGVTeXN0ZW1EZWZpbml0aW9uKCk7XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7XG4gIH0gLy8gSW1wbGVtZW50cyB0aGUgcGFyc2luZyBydWxlcyBpbiB0aGUgT3BlcmF0aW9ucyBzZWN0aW9uLlxuXG4gIC8qKlxuICAgKiBPcGVyYXRpb25EZWZpbml0aW9uIDpcbiAgICogIC0gU2VsZWN0aW9uU2V0XG4gICAqICAtIE9wZXJhdGlvblR5cGUgTmFtZT8gVmFyaWFibGVEZWZpbml0aW9ucz8gRGlyZWN0aXZlcz8gU2VsZWN0aW9uU2V0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIHBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIGlmICh0aGlzLnBlZWsoVG9rZW5LaW5kLkJSQUNFX0wpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiBLaW5kLk9QRVJBVElPTl9ERUZJTklUSU9OLFxuICAgICAgICBvcGVyYXRpb246ICdxdWVyeScsXG4gICAgICAgIG5hbWU6IHVuZGVmaW5lZCxcbiAgICAgICAgdmFyaWFibGVEZWZpbml0aW9uczogW10sXG4gICAgICAgIGRpcmVjdGl2ZXM6IFtdLFxuICAgICAgICBzZWxlY3Rpb25TZXQ6IHRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKSxcbiAgICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIG9wZXJhdGlvbiA9IHRoaXMucGFyc2VPcGVyYXRpb25UeXBlKCk7XG4gICAgdmFyIG5hbWU7XG5cbiAgICBpZiAodGhpcy5wZWVrKFRva2VuS2luZC5OQU1FKSkge1xuICAgICAgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuT1BFUkFUSU9OX0RFRklOSVRJT04sXG4gICAgICBvcGVyYXRpb246IG9wZXJhdGlvbixcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICB2YXJpYWJsZURlZmluaXRpb25zOiB0aGlzLnBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpLFxuICAgICAgZGlyZWN0aXZlczogdGhpcy5wYXJzZURpcmVjdGl2ZXMoZmFsc2UpLFxuICAgICAgc2VsZWN0aW9uU2V0OiB0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCksXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIE9wZXJhdGlvblR5cGUgOiBvbmUgb2YgcXVlcnkgbXV0YXRpb24gc3Vic2NyaXB0aW9uXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlT3BlcmF0aW9uVHlwZSA9IGZ1bmN0aW9uIHBhcnNlT3BlcmF0aW9uVHlwZSgpIHtcbiAgICB2YXIgb3BlcmF0aW9uVG9rZW4gPSB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5OQU1FKTtcblxuICAgIHN3aXRjaCAob3BlcmF0aW9uVG9rZW4udmFsdWUpIHtcbiAgICAgIGNhc2UgJ3F1ZXJ5JzpcbiAgICAgICAgcmV0dXJuICdxdWVyeSc7XG5cbiAgICAgIGNhc2UgJ211dGF0aW9uJzpcbiAgICAgICAgcmV0dXJuICdtdXRhdGlvbic7XG5cbiAgICAgIGNhc2UgJ3N1YnNjcmlwdGlvbic6XG4gICAgICAgIHJldHVybiAnc3Vic2NyaXB0aW9uJztcbiAgICB9XG5cbiAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQob3BlcmF0aW9uVG9rZW4pO1xuICB9XG4gIC8qKlxuICAgKiBWYXJpYWJsZURlZmluaXRpb25zIDogKCBWYXJpYWJsZURlZmluaXRpb24rIClcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VWYXJpYWJsZURlZmluaXRpb25zID0gZnVuY3Rpb24gcGFyc2VWYXJpYWJsZURlZmluaXRpb25zKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsTWFueShUb2tlbktpbmQuUEFSRU5fTCwgdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbiwgVG9rZW5LaW5kLlBBUkVOX1IpO1xuICB9XG4gIC8qKlxuICAgKiBWYXJpYWJsZURlZmluaXRpb24gOiBWYXJpYWJsZSA6IFR5cGUgRGVmYXVsdFZhbHVlPyBEaXJlY3RpdmVzW0NvbnN0XT9cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VWYXJpYWJsZURlZmluaXRpb24gPSBmdW5jdGlvbiBwYXJzZVZhcmlhYmxlRGVmaW5pdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5WQVJJQUJMRV9ERUZJTklUSU9OLFxuICAgICAgdmFyaWFibGU6IHRoaXMucGFyc2VWYXJpYWJsZSgpLFxuICAgICAgdHlwZTogKHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkNPTE9OKSwgdGhpcy5wYXJzZVR5cGVSZWZlcmVuY2UoKSksXG4gICAgICBkZWZhdWx0VmFsdWU6IHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihUb2tlbktpbmQuRVFVQUxTKSA/IHRoaXMucGFyc2VWYWx1ZUxpdGVyYWwodHJ1ZSkgOiB1bmRlZmluZWQsXG4gICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyh0cnVlKSxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogVmFyaWFibGUgOiAkIE5hbWVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VWYXJpYWJsZSA9IGZ1bmN0aW9uIHBhcnNlVmFyaWFibGUoKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuRE9MTEFSKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5WQVJJQUJMRSxcbiAgICAgIG5hbWU6IHRoaXMucGFyc2VOYW1lKCksXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIFNlbGVjdGlvblNldCA6IHsgU2VsZWN0aW9uKyB9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlU2VsZWN0aW9uU2V0ID0gZnVuY3Rpb24gcGFyc2VTZWxlY3Rpb25TZXQoKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuU0VMRUNUSU9OX1NFVCxcbiAgICAgIHNlbGVjdGlvbnM6IHRoaXMubWFueShUb2tlbktpbmQuQlJBQ0VfTCwgdGhpcy5wYXJzZVNlbGVjdGlvbiwgVG9rZW5LaW5kLkJSQUNFX1IpLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBTZWxlY3Rpb24gOlxuICAgKiAgIC0gRmllbGRcbiAgICogICAtIEZyYWdtZW50U3ByZWFkXG4gICAqICAgLSBJbmxpbmVGcmFnbWVudFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZVNlbGVjdGlvbiA9IGZ1bmN0aW9uIHBhcnNlU2VsZWN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnBlZWsoVG9rZW5LaW5kLlNQUkVBRCkgPyB0aGlzLnBhcnNlRnJhZ21lbnQoKSA6IHRoaXMucGFyc2VGaWVsZCgpO1xuICB9XG4gIC8qKlxuICAgKiBGaWVsZCA6IEFsaWFzPyBOYW1lIEFyZ3VtZW50cz8gRGlyZWN0aXZlcz8gU2VsZWN0aW9uU2V0P1xuICAgKlxuICAgKiBBbGlhcyA6IE5hbWUgOlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZUZpZWxkID0gZnVuY3Rpb24gcGFyc2VGaWVsZCgpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB2YXIgbmFtZU9yQWxpYXMgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHZhciBhbGlhcztcbiAgICB2YXIgbmFtZTtcblxuICAgIGlmICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkNPTE9OKSkge1xuICAgICAgYWxpYXMgPSBuYW1lT3JBbGlhcztcbiAgICAgIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBuYW1lID0gbmFtZU9yQWxpYXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuRklFTEQsXG4gICAgICBhbGlhczogYWxpYXMsXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgYXJndW1lbnRzOiB0aGlzLnBhcnNlQXJndW1lbnRzKGZhbHNlKSxcbiAgICAgIGRpcmVjdGl2ZXM6IHRoaXMucGFyc2VEaXJlY3RpdmVzKGZhbHNlKSxcbiAgICAgIHNlbGVjdGlvblNldDogdGhpcy5wZWVrKFRva2VuS2luZC5CUkFDRV9MKSA/IHRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKSA6IHVuZGVmaW5lZCxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogQXJndW1lbnRzW0NvbnN0XSA6ICggQXJndW1lbnRbP0NvbnN0XSsgKVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZUFyZ3VtZW50cyA9IGZ1bmN0aW9uIHBhcnNlQXJndW1lbnRzKGlzQ29uc3QpIHtcbiAgICB2YXIgaXRlbSA9IGlzQ29uc3QgPyB0aGlzLnBhcnNlQ29uc3RBcmd1bWVudCA6IHRoaXMucGFyc2VBcmd1bWVudDtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoVG9rZW5LaW5kLlBBUkVOX0wsIGl0ZW0sIFRva2VuS2luZC5QQVJFTl9SKTtcbiAgfVxuICAvKipcbiAgICogQXJndW1lbnRbQ29uc3RdIDogTmFtZSA6IFZhbHVlWz9Db25zdF1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VBcmd1bWVudCA9IGZ1bmN0aW9uIHBhcnNlQXJndW1lbnQoKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkNPTE9OKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5BUkdVTUVOVCxcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICB2YWx1ZTogdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbChmYWxzZSksXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH07XG5cbiAgX3Byb3RvLnBhcnNlQ29uc3RBcmd1bWVudCA9IGZ1bmN0aW9uIHBhcnNlQ29uc3RBcmd1bWVudCgpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5BUkdVTUVOVCxcbiAgICAgIG5hbWU6IHRoaXMucGFyc2VOYW1lKCksXG4gICAgICB2YWx1ZTogKHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkNPTE9OKSwgdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCh0cnVlKSksXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH0gLy8gSW1wbGVtZW50cyB0aGUgcGFyc2luZyBydWxlcyBpbiB0aGUgRnJhZ21lbnRzIHNlY3Rpb24uXG5cbiAgLyoqXG4gICAqIENvcnJlc3BvbmRzIHRvIGJvdGggRnJhZ21lbnRTcHJlYWQgYW5kIElubGluZUZyYWdtZW50IGluIHRoZSBzcGVjLlxuICAgKlxuICAgKiBGcmFnbWVudFNwcmVhZCA6IC4uLiBGcmFnbWVudE5hbWUgRGlyZWN0aXZlcz9cbiAgICpcbiAgICogSW5saW5lRnJhZ21lbnQgOiAuLi4gVHlwZUNvbmRpdGlvbj8gRGlyZWN0aXZlcz8gU2VsZWN0aW9uU2V0XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlRnJhZ21lbnQgPSBmdW5jdGlvbiBwYXJzZUZyYWdtZW50KCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLlNQUkVBRCk7XG4gICAgdmFyIGhhc1R5cGVDb25kaXRpb24gPSB0aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgnb24nKTtcblxuICAgIGlmICghaGFzVHlwZUNvbmRpdGlvbiAmJiB0aGlzLnBlZWsoVG9rZW5LaW5kLk5BTUUpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiBLaW5kLkZSQUdNRU5UX1NQUkVBRCxcbiAgICAgICAgbmFtZTogdGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLFxuICAgICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyhmYWxzZSksXG4gICAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLklOTElORV9GUkFHTUVOVCxcbiAgICAgIHR5cGVDb25kaXRpb246IGhhc1R5cGVDb25kaXRpb24gPyB0aGlzLnBhcnNlTmFtZWRUeXBlKCkgOiB1bmRlZmluZWQsXG4gICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyhmYWxzZSksXG4gICAgICBzZWxlY3Rpb25TZXQ6IHRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKSxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogRnJhZ21lbnREZWZpbml0aW9uIDpcbiAgICogICAtIGZyYWdtZW50IEZyYWdtZW50TmFtZSBvbiBUeXBlQ29uZGl0aW9uIERpcmVjdGl2ZXM/IFNlbGVjdGlvblNldFxuICAgKlxuICAgKiBUeXBlQ29uZGl0aW9uIDogTmFtZWRUeXBlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlRnJhZ21lbnREZWZpbml0aW9uID0gZnVuY3Rpb24gcGFyc2VGcmFnbWVudERlZmluaXRpb24oKSB7XG4gICAgdmFyIF90aGlzJF9vcHRpb25zO1xuXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdmcmFnbWVudCcpOyAvLyBFeHBlcmltZW50YWwgc3VwcG9ydCBmb3IgZGVmaW5pbmcgdmFyaWFibGVzIHdpdGhpbiBmcmFnbWVudHMgY2hhbmdlc1xuICAgIC8vIHRoZSBncmFtbWFyIG9mIEZyYWdtZW50RGVmaW5pdGlvbjpcbiAgICAvLyAgIC0gZnJhZ21lbnQgRnJhZ21lbnROYW1lIFZhcmlhYmxlRGVmaW5pdGlvbnM/IG9uIFR5cGVDb25kaXRpb24gRGlyZWN0aXZlcz8gU2VsZWN0aW9uU2V0XG5cbiAgICBpZiAoKChfdGhpcyRfb3B0aW9ucyA9IHRoaXMuX29wdGlvbnMpID09PSBudWxsIHx8IF90aGlzJF9vcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRfb3B0aW9ucy5leHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcykgPT09IHRydWUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtpbmQ6IEtpbmQuRlJBR01FTlRfREVGSU5JVElPTixcbiAgICAgICAgbmFtZTogdGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLFxuICAgICAgICB2YXJpYWJsZURlZmluaXRpb25zOiB0aGlzLnBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpLFxuICAgICAgICB0eXBlQ29uZGl0aW9uOiAodGhpcy5leHBlY3RLZXl3b3JkKCdvbicpLCB0aGlzLnBhcnNlTmFtZWRUeXBlKCkpLFxuICAgICAgICBkaXJlY3RpdmVzOiB0aGlzLnBhcnNlRGlyZWN0aXZlcyhmYWxzZSksXG4gICAgICAgIHNlbGVjdGlvblNldDogdGhpcy5wYXJzZVNlbGVjdGlvblNldCgpLFxuICAgICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5GUkFHTUVOVF9ERUZJTklUSU9OLFxuICAgICAgbmFtZTogdGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLFxuICAgICAgdHlwZUNvbmRpdGlvbjogKHRoaXMuZXhwZWN0S2V5d29yZCgnb24nKSwgdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxcbiAgICAgIGRpcmVjdGl2ZXM6IHRoaXMucGFyc2VEaXJlY3RpdmVzKGZhbHNlKSxcbiAgICAgIHNlbGVjdGlvblNldDogdGhpcy5wYXJzZVNlbGVjdGlvblNldCgpLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBGcmFnbWVudE5hbWUgOiBOYW1lIGJ1dCBub3QgYG9uYFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZUZyYWdtZW50TmFtZSA9IGZ1bmN0aW9uIHBhcnNlRnJhZ21lbnROYW1lKCkge1xuICAgIGlmICh0aGlzLl9sZXhlci50b2tlbi52YWx1ZSA9PT0gJ29uJykge1xuICAgICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucGFyc2VOYW1lKCk7XG4gIH0gLy8gSW1wbGVtZW50cyB0aGUgcGFyc2luZyBydWxlcyBpbiB0aGUgVmFsdWVzIHNlY3Rpb24uXG5cbiAgLyoqXG4gICAqIFZhbHVlW0NvbnN0XSA6XG4gICAqICAgLSBbfkNvbnN0XSBWYXJpYWJsZVxuICAgKiAgIC0gSW50VmFsdWVcbiAgICogICAtIEZsb2F0VmFsdWVcbiAgICogICAtIFN0cmluZ1ZhbHVlXG4gICAqICAgLSBCb29sZWFuVmFsdWVcbiAgICogICAtIE51bGxWYWx1ZVxuICAgKiAgIC0gRW51bVZhbHVlXG4gICAqICAgLSBMaXN0VmFsdWVbP0NvbnN0XVxuICAgKiAgIC0gT2JqZWN0VmFsdWVbP0NvbnN0XVxuICAgKlxuICAgKiBCb29sZWFuVmFsdWUgOiBvbmUgb2YgYHRydWVgIGBmYWxzZWBcbiAgICpcbiAgICogTnVsbFZhbHVlIDogYG51bGxgXG4gICAqXG4gICAqIEVudW1WYWx1ZSA6IE5hbWUgYnV0IG5vdCBgdHJ1ZWAsIGBmYWxzZWAgb3IgYG51bGxgXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlVmFsdWVMaXRlcmFsID0gZnVuY3Rpb24gcGFyc2VWYWx1ZUxpdGVyYWwoaXNDb25zdCkge1xuICAgIHZhciB0b2tlbiA9IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgc3dpdGNoICh0b2tlbi5raW5kKSB7XG4gICAgICBjYXNlIFRva2VuS2luZC5CUkFDS0VUX0w6XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlTGlzdChpc0NvbnN0KTtcblxuICAgICAgY2FzZSBUb2tlbktpbmQuQlJBQ0VfTDpcbiAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VPYmplY3QoaXNDb25zdCk7XG5cbiAgICAgIGNhc2UgVG9rZW5LaW5kLklOVDpcbiAgICAgICAgdGhpcy5fbGV4ZXIuYWR2YW5jZSgpO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAga2luZDogS2luZC5JTlQsXG4gICAgICAgICAgdmFsdWU6IHRva2VuLnZhbHVlLFxuICAgICAgICAgIGxvYzogdGhpcy5sb2ModG9rZW4pXG4gICAgICAgIH07XG5cbiAgICAgIGNhc2UgVG9rZW5LaW5kLkZMT0FUOlxuICAgICAgICB0aGlzLl9sZXhlci5hZHZhbmNlKCk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBraW5kOiBLaW5kLkZMT0FULFxuICAgICAgICAgIHZhbHVlOiB0b2tlbi52YWx1ZSxcbiAgICAgICAgICBsb2M6IHRoaXMubG9jKHRva2VuKVxuICAgICAgICB9O1xuXG4gICAgICBjYXNlIFRva2VuS2luZC5TVFJJTkc6XG4gICAgICBjYXNlIFRva2VuS2luZC5CTE9DS19TVFJJTkc6XG4gICAgICAgIHJldHVybiB0aGlzLnBhcnNlU3RyaW5nTGl0ZXJhbCgpO1xuXG4gICAgICBjYXNlIFRva2VuS2luZC5OQU1FOlxuICAgICAgICB0aGlzLl9sZXhlci5hZHZhbmNlKCk7XG5cbiAgICAgICAgc3dpdGNoICh0b2tlbi52YWx1ZSkge1xuICAgICAgICAgIGNhc2UgJ3RydWUnOlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAga2luZDogS2luZC5CT09MRUFOLFxuICAgICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgICAgICAgbG9jOiB0aGlzLmxvYyh0b2tlbilcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICBjYXNlICdmYWxzZSc6XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICBraW5kOiBLaW5kLkJPT0xFQU4sXG4gICAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgbG9jOiB0aGlzLmxvYyh0b2tlbilcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICBjYXNlICdudWxsJzpcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGtpbmQ6IEtpbmQuTlVMTCxcbiAgICAgICAgICAgICAgbG9jOiB0aGlzLmxvYyh0b2tlbilcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAga2luZDogS2luZC5FTlVNLFxuICAgICAgICAgICAgICB2YWx1ZTogdG9rZW4udmFsdWUsXG4gICAgICAgICAgICAgIGxvYzogdGhpcy5sb2ModG9rZW4pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG5cbiAgICAgIGNhc2UgVG9rZW5LaW5kLkRPTExBUjpcbiAgICAgICAgaWYgKCFpc0NvbnN0KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VWYXJpYWJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7XG4gIH07XG5cbiAgX3Byb3RvLnBhcnNlU3RyaW5nTGl0ZXJhbCA9IGZ1bmN0aW9uIHBhcnNlU3RyaW5nTGl0ZXJhbCgpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIHRoaXMuX2xleGVyLmFkdmFuY2UoKTtcblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLlNUUklORyxcbiAgICAgIHZhbHVlOiB0b2tlbi52YWx1ZSxcbiAgICAgIGJsb2NrOiB0b2tlbi5raW5kID09PSBUb2tlbktpbmQuQkxPQ0tfU1RSSU5HLFxuICAgICAgbG9jOiB0aGlzLmxvYyh0b2tlbilcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBMaXN0VmFsdWVbQ29uc3RdIDpcbiAgICogICAtIFsgXVxuICAgKiAgIC0gWyBWYWx1ZVs/Q29uc3RdKyBdXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlTGlzdCA9IGZ1bmN0aW9uIHBhcnNlTGlzdChpc0NvbnN0KSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgdmFyIGl0ZW0gPSBmdW5jdGlvbiBpdGVtKCkge1xuICAgICAgcmV0dXJuIF90aGlzLnBhcnNlVmFsdWVMaXRlcmFsKGlzQ29uc3QpO1xuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5MSVNULFxuICAgICAgdmFsdWVzOiB0aGlzLmFueShUb2tlbktpbmQuQlJBQ0tFVF9MLCBpdGVtLCBUb2tlbktpbmQuQlJBQ0tFVF9SKSxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogT2JqZWN0VmFsdWVbQ29uc3RdIDpcbiAgICogICAtIHsgfVxuICAgKiAgIC0geyBPYmplY3RGaWVsZFs/Q29uc3RdKyB9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlT2JqZWN0ID0gZnVuY3Rpb24gcGFyc2VPYmplY3QoaXNDb25zdCkge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG5cbiAgICB2YXIgaXRlbSA9IGZ1bmN0aW9uIGl0ZW0oKSB7XG4gICAgICByZXR1cm4gX3RoaXMyLnBhcnNlT2JqZWN0RmllbGQoaXNDb25zdCk7XG4gICAgfTtcblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLk9CSkVDVCxcbiAgICAgIGZpZWxkczogdGhpcy5hbnkoVG9rZW5LaW5kLkJSQUNFX0wsIGl0ZW0sIFRva2VuS2luZC5CUkFDRV9SKSxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogT2JqZWN0RmllbGRbQ29uc3RdIDogTmFtZSA6IFZhbHVlWz9Db25zdF1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VPYmplY3RGaWVsZCA9IGZ1bmN0aW9uIHBhcnNlT2JqZWN0RmllbGQoaXNDb25zdCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHZhciBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5DT0xPTik7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuT0JKRUNUX0ZJRUxELFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIHZhbHVlOiB0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKGlzQ29uc3QpLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9IC8vIEltcGxlbWVudHMgdGhlIHBhcnNpbmcgcnVsZXMgaW4gdGhlIERpcmVjdGl2ZXMgc2VjdGlvbi5cblxuICAvKipcbiAgICogRGlyZWN0aXZlc1tDb25zdF0gOiBEaXJlY3RpdmVbP0NvbnN0XStcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VEaXJlY3RpdmVzID0gZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmVzKGlzQ29uc3QpIHtcbiAgICB2YXIgZGlyZWN0aXZlcyA9IFtdO1xuXG4gICAgd2hpbGUgKHRoaXMucGVlayhUb2tlbktpbmQuQVQpKSB7XG4gICAgICBkaXJlY3RpdmVzLnB1c2godGhpcy5wYXJzZURpcmVjdGl2ZShpc0NvbnN0KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGRpcmVjdGl2ZXM7XG4gIH1cbiAgLyoqXG4gICAqIERpcmVjdGl2ZVtDb25zdF0gOiBAIE5hbWUgQXJndW1lbnRzWz9Db25zdF0/XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlRGlyZWN0aXZlID0gZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUoaXNDb25zdCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkFUKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5ESVJFQ1RJVkUsXG4gICAgICBuYW1lOiB0aGlzLnBhcnNlTmFtZSgpLFxuICAgICAgYXJndW1lbnRzOiB0aGlzLnBhcnNlQXJndW1lbnRzKGlzQ29uc3QpLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9IC8vIEltcGxlbWVudHMgdGhlIHBhcnNpbmcgcnVsZXMgaW4gdGhlIFR5cGVzIHNlY3Rpb24uXG5cbiAgLyoqXG4gICAqIFR5cGUgOlxuICAgKiAgIC0gTmFtZWRUeXBlXG4gICAqICAgLSBMaXN0VHlwZVxuICAgKiAgIC0gTm9uTnVsbFR5cGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VUeXBlUmVmZXJlbmNlID0gZnVuY3Rpb24gcGFyc2VUeXBlUmVmZXJlbmNlKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHZhciB0eXBlO1xuXG4gICAgaWYgKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihUb2tlbktpbmQuQlJBQ0tFVF9MKSkge1xuICAgICAgdHlwZSA9IHRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7XG4gICAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5CUkFDS0VUX1IpO1xuICAgICAgdHlwZSA9IHtcbiAgICAgICAga2luZDogS2luZC5MSVNUX1RZUEUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB0eXBlID0gdGhpcy5wYXJzZU5hbWVkVHlwZSgpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkJBTkcpKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBraW5kOiBLaW5kLk5PTl9OVUxMX1RZUEUsXG4gICAgICAgIHR5cGU6IHR5cGUsXG4gICAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiB0eXBlO1xuICB9XG4gIC8qKlxuICAgKiBOYW1lZFR5cGUgOiBOYW1lXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlTmFtZWRUeXBlID0gZnVuY3Rpb24gcGFyc2VOYW1lZFR5cGUoKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuTkFNRURfVFlQRSxcbiAgICAgIG5hbWU6IHRoaXMucGFyc2VOYW1lKCksXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH0gLy8gSW1wbGVtZW50cyB0aGUgcGFyc2luZyBydWxlcyBpbiB0aGUgVHlwZSBEZWZpbml0aW9uIHNlY3Rpb24uXG5cbiAgLyoqXG4gICAqIFR5cGVTeXN0ZW1EZWZpbml0aW9uIDpcbiAgICogICAtIFNjaGVtYURlZmluaXRpb25cbiAgICogICAtIFR5cGVEZWZpbml0aW9uXG4gICAqICAgLSBEaXJlY3RpdmVEZWZpbml0aW9uXG4gICAqXG4gICAqIFR5cGVEZWZpbml0aW9uIDpcbiAgICogICAtIFNjYWxhclR5cGVEZWZpbml0aW9uXG4gICAqICAgLSBPYmplY3RUeXBlRGVmaW5pdGlvblxuICAgKiAgIC0gSW50ZXJmYWNlVHlwZURlZmluaXRpb25cbiAgICogICAtIFVuaW9uVHlwZURlZmluaXRpb25cbiAgICogICAtIEVudW1UeXBlRGVmaW5pdGlvblxuICAgKiAgIC0gSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvblxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZVR5cGVTeXN0ZW1EZWZpbml0aW9uID0gZnVuY3Rpb24gcGFyc2VUeXBlU3lzdGVtRGVmaW5pdGlvbigpIHtcbiAgICAvLyBNYW55IGRlZmluaXRpb25zIGJlZ2luIHdpdGggYSBkZXNjcmlwdGlvbiBhbmQgcmVxdWlyZSBhIGxvb2thaGVhZC5cbiAgICB2YXIga2V5d29yZFRva2VuID0gdGhpcy5wZWVrRGVzY3JpcHRpb24oKSA/IHRoaXMuX2xleGVyLmxvb2thaGVhZCgpIDogdGhpcy5fbGV4ZXIudG9rZW47XG5cbiAgICBpZiAoa2V5d29yZFRva2VuLmtpbmQgPT09IFRva2VuS2luZC5OQU1FKSB7XG4gICAgICBzd2l0Y2ggKGtleXdvcmRUb2tlbi52YWx1ZSkge1xuICAgICAgICBjYXNlICdzY2hlbWEnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlU2NoZW1hRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGNhc2UgJ3NjYWxhcic6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTY2FsYXJUeXBlRGVmaW5pdGlvbigpO1xuXG4gICAgICAgIGNhc2UgJ3R5cGUnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdpbnRlcmZhY2UnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICd1bmlvbic6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VVbmlvblR5cGVEZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAnZW51bSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VFbnVtVHlwZURlZmluaXRpb24oKTtcblxuICAgICAgICBjYXNlICdpbnB1dCc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uKCk7XG5cbiAgICAgICAgY2FzZSAnZGlyZWN0aXZlJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZURpcmVjdGl2ZURlZmluaXRpb24oKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoa2V5d29yZFRva2VuKTtcbiAgfTtcblxuICBfcHJvdG8ucGVla0Rlc2NyaXB0aW9uID0gZnVuY3Rpb24gcGVla0Rlc2NyaXB0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLnBlZWsoVG9rZW5LaW5kLlNUUklORykgfHwgdGhpcy5wZWVrKFRva2VuS2luZC5CTE9DS19TVFJJTkcpO1xuICB9XG4gIC8qKlxuICAgKiBEZXNjcmlwdGlvbiA6IFN0cmluZ1ZhbHVlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlRGVzY3JpcHRpb24gPSBmdW5jdGlvbiBwYXJzZURlc2NyaXB0aW9uKCkge1xuICAgIGlmICh0aGlzLnBlZWtEZXNjcmlwdGlvbigpKSB7XG4gICAgICByZXR1cm4gdGhpcy5wYXJzZVN0cmluZ0xpdGVyYWwoKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIFNjaGVtYURlZmluaXRpb24gOiBEZXNjcmlwdGlvbj8gc2NoZW1hIERpcmVjdGl2ZXNbQ29uc3RdPyB7IE9wZXJhdGlvblR5cGVEZWZpbml0aW9uKyB9XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlU2NoZW1hRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIHBhcnNlU2NoZW1hRGVmaW5pdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB2YXIgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ3NjaGVtYScpO1xuICAgIHZhciBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZURpcmVjdGl2ZXModHJ1ZSk7XG4gICAgdmFyIG9wZXJhdGlvblR5cGVzID0gdGhpcy5tYW55KFRva2VuS2luZC5CUkFDRV9MLCB0aGlzLnBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24sIFRva2VuS2luZC5CUkFDRV9SKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5TQ0hFTUFfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgICBvcGVyYXRpb25UeXBlczogb3BlcmF0aW9uVHlwZXMsXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIE9wZXJhdGlvblR5cGVEZWZpbml0aW9uIDogT3BlcmF0aW9uVHlwZSA6IE5hbWVkVHlwZVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uID0gZnVuY3Rpb24gcGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB2YXIgb3BlcmF0aW9uID0gdGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTtcbiAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5DT0xPTik7XG4gICAgdmFyIHR5cGUgPSB0aGlzLnBhcnNlTmFtZWRUeXBlKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTixcbiAgICAgIG9wZXJhdGlvbjogb3BlcmF0aW9uLFxuICAgICAgdHlwZTogdHlwZSxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogU2NhbGFyVHlwZURlZmluaXRpb24gOiBEZXNjcmlwdGlvbj8gc2NhbGFyIE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/XG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlU2NhbGFyVHlwZURlZmluaXRpb24gPSBmdW5jdGlvbiBwYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHZhciBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnc2NhbGFyJyk7XG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHZhciBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZURpcmVjdGl2ZXModHJ1ZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuU0NBTEFSX1RZUEVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBPYmplY3RUeXBlRGVmaW5pdGlvbiA6XG4gICAqICAgRGVzY3JpcHRpb24/XG4gICAqICAgdHlwZSBOYW1lIEltcGxlbWVudHNJbnRlcmZhY2VzPyBEaXJlY3RpdmVzW0NvbnN0XT8gRmllbGRzRGVmaW5pdGlvbj9cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VPYmplY3RUeXBlRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIHBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdmFyIGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCd0eXBlJyk7XG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHZhciBpbnRlcmZhY2VzID0gdGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCk7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlcyh0cnVlKTtcbiAgICB2YXIgZmllbGRzID0gdGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5PQkpFQ1RfVFlQRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGludGVyZmFjZXM6IGludGVyZmFjZXMsXG4gICAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgICAgZmllbGRzOiBmaWVsZHMsXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIEltcGxlbWVudHNJbnRlcmZhY2VzIDpcbiAgICogICAtIGltcGxlbWVudHMgYCZgPyBOYW1lZFR5cGVcbiAgICogICAtIEltcGxlbWVudHNJbnRlcmZhY2VzICYgTmFtZWRUeXBlXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMgPSBmdW5jdGlvbiBwYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCkge1xuICAgIHZhciBfdGhpcyRfb3B0aW9uczI7XG5cbiAgICBpZiAoIXRoaXMuZXhwZWN0T3B0aW9uYWxLZXl3b3JkKCdpbXBsZW1lbnRzJykpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBpZiAoKChfdGhpcyRfb3B0aW9uczIgPSB0aGlzLl9vcHRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRfb3B0aW9uczIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJF9vcHRpb25zMi5hbGxvd0xlZ2FjeVNETEltcGxlbWVudHNJbnRlcmZhY2VzKSA9PT0gdHJ1ZSkge1xuICAgICAgdmFyIHR5cGVzID0gW107IC8vIE9wdGlvbmFsIGxlYWRpbmcgYW1wZXJzYW5kXG5cbiAgICAgIHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihUb2tlbktpbmQuQU1QKTtcblxuICAgICAgZG8ge1xuICAgICAgICB0eXBlcy5wdXNoKHRoaXMucGFyc2VOYW1lZFR5cGUoKSk7XG4gICAgICB9IHdoaWxlICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkFNUCkgfHwgdGhpcy5wZWVrKFRva2VuS2luZC5OQU1FKSk7XG5cbiAgICAgIHJldHVybiB0eXBlcztcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5kZWxpbWl0ZWRNYW55KFRva2VuS2luZC5BTVAsIHRoaXMucGFyc2VOYW1lZFR5cGUpO1xuICB9XG4gIC8qKlxuICAgKiBGaWVsZHNEZWZpbml0aW9uIDogeyBGaWVsZERlZmluaXRpb24rIH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VGaWVsZHNEZWZpbml0aW9uID0gZnVuY3Rpb24gcGFyc2VGaWVsZHNEZWZpbml0aW9uKCkge1xuICAgIHZhciBfdGhpcyRfb3B0aW9uczM7XG5cbiAgICAvLyBMZWdhY3kgc3VwcG9ydCBmb3IgdGhlIFNETD9cbiAgICBpZiAoKChfdGhpcyRfb3B0aW9uczMgPSB0aGlzLl9vcHRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRfb3B0aW9uczMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJF9vcHRpb25zMy5hbGxvd0xlZ2FjeVNETEVtcHR5RmllbGRzKSA9PT0gdHJ1ZSAmJiB0aGlzLnBlZWsoVG9rZW5LaW5kLkJSQUNFX0wpICYmIHRoaXMuX2xleGVyLmxvb2thaGVhZCgpLmtpbmQgPT09IFRva2VuS2luZC5CUkFDRV9SKSB7XG4gICAgICB0aGlzLl9sZXhlci5hZHZhbmNlKCk7XG5cbiAgICAgIHRoaXMuX2xleGVyLmFkdmFuY2UoKTtcblxuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm9wdGlvbmFsTWFueShUb2tlbktpbmQuQlJBQ0VfTCwgdGhpcy5wYXJzZUZpZWxkRGVmaW5pdGlvbiwgVG9rZW5LaW5kLkJSQUNFX1IpO1xuICB9XG4gIC8qKlxuICAgKiBGaWVsZERlZmluaXRpb24gOlxuICAgKiAgIC0gRGVzY3JpcHRpb24/IE5hbWUgQXJndW1lbnRzRGVmaW5pdGlvbj8gOiBUeXBlIERpcmVjdGl2ZXNbQ29uc3RdP1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZUZpZWxkRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIHBhcnNlRmllbGREZWZpbml0aW9uKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHZhciBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHZhciBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB2YXIgYXJncyA9IHRoaXMucGFyc2VBcmd1bWVudERlZnMoKTtcbiAgICB0aGlzLmV4cGVjdFRva2VuKFRva2VuS2luZC5DT0xPTik7XG4gICAgdmFyIHR5cGUgPSB0aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpO1xuICAgIHZhciBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZURpcmVjdGl2ZXModHJ1ZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuRklFTERfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBhcmd1bWVudHM6IGFyZ3MsXG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogQXJndW1lbnRzRGVmaW5pdGlvbiA6ICggSW5wdXRWYWx1ZURlZmluaXRpb24rIClcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VBcmd1bWVudERlZnMgPSBmdW5jdGlvbiBwYXJzZUFyZ3VtZW50RGVmcygpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoVG9rZW5LaW5kLlBBUkVOX0wsIHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLCBUb2tlbktpbmQuUEFSRU5fUik7XG4gIH1cbiAgLyoqXG4gICAqIElucHV0VmFsdWVEZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyBOYW1lIDogVHlwZSBEZWZhdWx0VmFsdWU/IERpcmVjdGl2ZXNbQ29uc3RdP1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZUlucHV0VmFsdWVEZWYgPSBmdW5jdGlvbiBwYXJzZUlucHV0VmFsdWVEZWYoKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdmFyIGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHRoaXMuZXhwZWN0VG9rZW4oVG9rZW5LaW5kLkNPTE9OKTtcbiAgICB2YXIgdHlwZSA9IHRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7XG4gICAgdmFyIGRlZmF1bHRWYWx1ZTtcblxuICAgIGlmICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkVRVUFMUykpIHtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IHRoaXMucGFyc2VWYWx1ZUxpdGVyYWwodHJ1ZSk7XG4gICAgfVxuXG4gICAgdmFyIGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlcyh0cnVlKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5JTlBVVF9WQUxVRV9ERUZJTklUSU9OLFxuICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIHR5cGU6IHR5cGUsXG4gICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZSxcbiAgICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIEludGVyZmFjZVR5cGVEZWZpbml0aW9uIDpcbiAgICogICAtIERlc2NyaXB0aW9uPyBpbnRlcmZhY2UgTmFtZSBEaXJlY3RpdmVzW0NvbnN0XT8gRmllbGRzRGVmaW5pdGlvbj9cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIHBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdmFyIGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdpbnRlcmZhY2UnKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgdmFyIGludGVyZmFjZXMgPSB0aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKTtcbiAgICB2YXIgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VEaXJlY3RpdmVzKHRydWUpO1xuICAgIHZhciBmaWVsZHMgPSB0aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLklOVEVSRkFDRV9UWVBFX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgaW50ZXJmYWNlczogaW50ZXJmYWNlcyxcbiAgICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgICBmaWVsZHM6IGZpZWxkcyxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogVW5pb25UeXBlRGVmaW5pdGlvbiA6XG4gICAqICAgLSBEZXNjcmlwdGlvbj8gdW5pb24gTmFtZSBEaXJlY3RpdmVzW0NvbnN0XT8gVW5pb25NZW1iZXJUeXBlcz9cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VVbmlvblR5cGVEZWZpbml0aW9uID0gZnVuY3Rpb24gcGFyc2VVbmlvblR5cGVEZWZpbml0aW9uKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHZhciBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgndW5pb24nKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlcyh0cnVlKTtcbiAgICB2YXIgdHlwZXMgPSB0aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO1xuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLlVOSU9OX1RZUEVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgICAgdHlwZXM6IHR5cGVzLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBVbmlvbk1lbWJlclR5cGVzIDpcbiAgICogICAtID0gYHxgPyBOYW1lZFR5cGVcbiAgICogICAtIFVuaW9uTWVtYmVyVHlwZXMgfCBOYW1lZFR5cGVcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VVbmlvbk1lbWJlclR5cGVzID0gZnVuY3Rpb24gcGFyc2VVbmlvbk1lbWJlclR5cGVzKCkge1xuICAgIHJldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oVG9rZW5LaW5kLkVRVUFMUykgPyB0aGlzLmRlbGltaXRlZE1hbnkoVG9rZW5LaW5kLlBJUEUsIHRoaXMucGFyc2VOYW1lZFR5cGUpIDogW107XG4gIH1cbiAgLyoqXG4gICAqIEVudW1UeXBlRGVmaW5pdGlvbiA6XG4gICAqICAgLSBEZXNjcmlwdGlvbj8gZW51bSBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdPyBFbnVtVmFsdWVzRGVmaW5pdGlvbj9cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VFbnVtVHlwZURlZmluaXRpb24gPSBmdW5jdGlvbiBwYXJzZUVudW1UeXBlRGVmaW5pdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB2YXIgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2VudW0nKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlcyh0cnVlKTtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuRU5VTV9UWVBFX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBFbnVtVmFsdWVzRGVmaW5pdGlvbiA6IHsgRW51bVZhbHVlRGVmaW5pdGlvbisgfVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uID0gZnVuY3Rpb24gcGFyc2VFbnVtVmFsdWVzRGVmaW5pdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoVG9rZW5LaW5kLkJSQUNFX0wsIHRoaXMucGFyc2VFbnVtVmFsdWVEZWZpbml0aW9uLCBUb2tlbktpbmQuQlJBQ0VfUik7XG4gIH1cbiAgLyoqXG4gICAqIEVudW1WYWx1ZURlZmluaXRpb24gOiBEZXNjcmlwdGlvbj8gRW51bVZhbHVlIERpcmVjdGl2ZXNbQ29uc3RdP1xuICAgKlxuICAgKiBFbnVtVmFsdWUgOiBOYW1lXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbiA9IGZ1bmN0aW9uIHBhcnNlRW51bVZhbHVlRGVmaW5pdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB2YXIgZGVzY3JpcHRpb24gPSB0aGlzLnBhcnNlRGVzY3JpcHRpb24oKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlcyh0cnVlKTtcbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5FTlVNX1ZBTFVFX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbiA6XG4gICAqICAgLSBEZXNjcmlwdGlvbj8gaW5wdXQgTmFtZSBEaXJlY3RpdmVzW0NvbnN0XT8gSW5wdXRGaWVsZHNEZWZpbml0aW9uP1xuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24gPSBmdW5jdGlvbiBwYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdmFyIGRlc2NyaXB0aW9uID0gdGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdpbnB1dCcpO1xuICAgIHZhciBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB2YXIgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VEaXJlY3RpdmVzKHRydWUpO1xuICAgIHZhciBmaWVsZHMgPSB0aGlzLnBhcnNlSW5wdXRGaWVsZHNEZWZpbml0aW9uKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuSU5QVVRfT0JKRUNUX1RZUEVfREVGSU5JVElPTixcbiAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbixcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgICAgZmllbGRzOiBmaWVsZHMsXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIElucHV0RmllbGRzRGVmaW5pdGlvbiA6IHsgSW5wdXRWYWx1ZURlZmluaXRpb24rIH1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24gPSBmdW5jdGlvbiBwYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vcHRpb25hbE1hbnkoVG9rZW5LaW5kLkJSQUNFX0wsIHRoaXMucGFyc2VJbnB1dFZhbHVlRGVmLCBUb2tlbktpbmQuQlJBQ0VfUik7XG4gIH1cbiAgLyoqXG4gICAqIFR5cGVTeXN0ZW1FeHRlbnNpb24gOlxuICAgKiAgIC0gU2NoZW1hRXh0ZW5zaW9uXG4gICAqICAgLSBUeXBlRXh0ZW5zaW9uXG4gICAqXG4gICAqIFR5cGVFeHRlbnNpb24gOlxuICAgKiAgIC0gU2NhbGFyVHlwZUV4dGVuc2lvblxuICAgKiAgIC0gT2JqZWN0VHlwZUV4dGVuc2lvblxuICAgKiAgIC0gSW50ZXJmYWNlVHlwZUV4dGVuc2lvblxuICAgKiAgIC0gVW5pb25UeXBlRXh0ZW5zaW9uXG4gICAqICAgLSBFbnVtVHlwZUV4dGVuc2lvblxuICAgKiAgIC0gSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvblxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZVR5cGVTeXN0ZW1FeHRlbnNpb24gPSBmdW5jdGlvbiBwYXJzZVR5cGVTeXN0ZW1FeHRlbnNpb24oKSB7XG4gICAgdmFyIGtleXdvcmRUb2tlbiA9IHRoaXMuX2xleGVyLmxvb2thaGVhZCgpO1xuXG4gICAgaWYgKGtleXdvcmRUb2tlbi5raW5kID09PSBUb2tlbktpbmQuTkFNRSkge1xuICAgICAgc3dpdGNoIChrZXl3b3JkVG9rZW4udmFsdWUpIHtcbiAgICAgICAgY2FzZSAnc2NoZW1hJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZVNjaGVtYUV4dGVuc2lvbigpO1xuXG4gICAgICAgIGNhc2UgJ3NjYWxhcic6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VTY2FsYXJUeXBlRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgY2FzZSAndHlwZSc6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VPYmplY3RUeXBlRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgY2FzZSAnaW50ZXJmYWNlJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUludGVyZmFjZVR5cGVFeHRlbnNpb24oKTtcblxuICAgICAgICBjYXNlICd1bmlvbic6XG4gICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKTtcblxuICAgICAgICBjYXNlICdlbnVtJzpcbiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZUVudW1UeXBlRXh0ZW5zaW9uKCk7XG5cbiAgICAgICAgY2FzZSAnaW5wdXQnOlxuICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKGtleXdvcmRUb2tlbik7XG4gIH1cbiAgLyoqXG4gICAqIFNjaGVtYUV4dGVuc2lvbiA6XG4gICAqICAtIGV4dGVuZCBzY2hlbWEgRGlyZWN0aXZlc1tDb25zdF0/IHsgT3BlcmF0aW9uVHlwZURlZmluaXRpb24rIH1cbiAgICogIC0gZXh0ZW5kIHNjaGVtYSBEaXJlY3RpdmVzW0NvbnN0XVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZVNjaGVtYUV4dGVuc2lvbiA9IGZ1bmN0aW9uIHBhcnNlU2NoZW1hRXh0ZW5zaW9uKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdzY2hlbWEnKTtcbiAgICB2YXIgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VEaXJlY3RpdmVzKHRydWUpO1xuICAgIHZhciBvcGVyYXRpb25UeXBlcyA9IHRoaXMub3B0aW9uYWxNYW55KFRva2VuS2luZC5CUkFDRV9MLCB0aGlzLnBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24sIFRva2VuS2luZC5CUkFDRV9SKTtcblxuICAgIGlmIChkaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCAmJiBvcGVyYXRpb25UeXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLlNDSEVNQV9FWFRFTlNJT04sXG4gICAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgICAgb3BlcmF0aW9uVHlwZXM6IG9wZXJhdGlvblR5cGVzLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBTY2FsYXJUeXBlRXh0ZW5zaW9uIDpcbiAgICogICAtIGV4dGVuZCBzY2FsYXIgTmFtZSBEaXJlY3RpdmVzW0NvbnN0XVxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZVNjYWxhclR5cGVFeHRlbnNpb24gPSBmdW5jdGlvbiBwYXJzZVNjYWxhclR5cGVFeHRlbnNpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdleHRlbmQnKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ3NjYWxhcicpO1xuICAgIHZhciBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB2YXIgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VEaXJlY3RpdmVzKHRydWUpO1xuXG4gICAgaWYgKGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5TQ0FMQVJfVFlQRV9FWFRFTlNJT04sXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogT2JqZWN0VHlwZUV4dGVuc2lvbiA6XG4gICAqICAtIGV4dGVuZCB0eXBlIE5hbWUgSW1wbGVtZW50c0ludGVyZmFjZXM/IERpcmVjdGl2ZXNbQ29uc3RdPyBGaWVsZHNEZWZpbml0aW9uXG4gICAqICAtIGV4dGVuZCB0eXBlIE5hbWUgSW1wbGVtZW50c0ludGVyZmFjZXM/IERpcmVjdGl2ZXNbQ29uc3RdXG4gICAqICAtIGV4dGVuZCB0eXBlIE5hbWUgSW1wbGVtZW50c0ludGVyZmFjZXNcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VPYmplY3RUeXBlRXh0ZW5zaW9uID0gZnVuY3Rpb24gcGFyc2VPYmplY3RUeXBlRXh0ZW5zaW9uKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCd0eXBlJyk7XG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHZhciBpbnRlcmZhY2VzID0gdGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCk7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlcyh0cnVlKTtcbiAgICB2YXIgZmllbGRzID0gdGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtcblxuICAgIGlmIChpbnRlcmZhY2VzLmxlbmd0aCA9PT0gMCAmJiBkaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCAmJiBmaWVsZHMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAga2luZDogS2luZC5PQkpFQ1RfVFlQRV9FWFRFTlNJT04sXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgaW50ZXJmYWNlczogaW50ZXJmYWNlcyxcbiAgICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgICBmaWVsZHM6IGZpZWxkcyxcbiAgICAgIGxvYzogdGhpcy5sb2Moc3RhcnQpXG4gICAgfTtcbiAgfVxuICAvKipcbiAgICogSW50ZXJmYWNlVHlwZUV4dGVuc2lvbiA6XG4gICAqICAtIGV4dGVuZCBpbnRlcmZhY2UgTmFtZSBJbXBsZW1lbnRzSW50ZXJmYWNlcz8gRGlyZWN0aXZlc1tDb25zdF0/IEZpZWxkc0RlZmluaXRpb25cbiAgICogIC0gZXh0ZW5kIGludGVyZmFjZSBOYW1lIEltcGxlbWVudHNJbnRlcmZhY2VzPyBEaXJlY3RpdmVzW0NvbnN0XVxuICAgKiAgLSBleHRlbmQgaW50ZXJmYWNlIE5hbWUgSW1wbGVtZW50c0ludGVyZmFjZXNcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uID0gZnVuY3Rpb24gcGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdpbnRlcmZhY2UnKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgdmFyIGludGVyZmFjZXMgPSB0aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKTtcbiAgICB2YXIgZGlyZWN0aXZlcyA9IHRoaXMucGFyc2VEaXJlY3RpdmVzKHRydWUpO1xuICAgIHZhciBmaWVsZHMgPSB0aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO1xuXG4gICAgaWYgKGludGVyZmFjZXMubGVuZ3RoID09PSAwICYmIGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwICYmIGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTixcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBpbnRlcmZhY2VzOiBpbnRlcmZhY2VzLFxuICAgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICAgIGZpZWxkczogZmllbGRzLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBVbmlvblR5cGVFeHRlbnNpb24gOlxuICAgKiAgIC0gZXh0ZW5kIHVuaW9uIE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/IFVuaW9uTWVtYmVyVHlwZXNcbiAgICogICAtIGV4dGVuZCB1bmlvbiBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlVW5pb25UeXBlRXh0ZW5zaW9uID0gZnVuY3Rpb24gcGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKSB7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5fbGV4ZXIudG9rZW47XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdleHRlbmQnKTtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ3VuaW9uJyk7XG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHZhciBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZURpcmVjdGl2ZXModHJ1ZSk7XG4gICAgdmFyIHR5cGVzID0gdGhpcy5wYXJzZVVuaW9uTWVtYmVyVHlwZXMoKTtcblxuICAgIGlmIChkaXJlY3RpdmVzLmxlbmd0aCA9PT0gMCAmJiB0eXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLlVOSU9OX1RZUEVfRVhURU5TSU9OLFxuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgICB0eXBlczogdHlwZXMsXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIEVudW1UeXBlRXh0ZW5zaW9uIDpcbiAgICogICAtIGV4dGVuZCBlbnVtIE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/IEVudW1WYWx1ZXNEZWZpbml0aW9uXG4gICAqICAgLSBleHRlbmQgZW51bSBOYW1lIERpcmVjdGl2ZXNbQ29uc3RdXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLnBhcnNlRW51bVR5cGVFeHRlbnNpb24gPSBmdW5jdGlvbiBwYXJzZUVudW1UeXBlRXh0ZW5zaW9uKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZXh0ZW5kJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdlbnVtJyk7XG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcnNlTmFtZSgpO1xuICAgIHZhciBkaXJlY3RpdmVzID0gdGhpcy5wYXJzZURpcmVjdGl2ZXModHJ1ZSk7XG4gICAgdmFyIHZhbHVlcyA9IHRoaXMucGFyc2VFbnVtVmFsdWVzRGVmaW5pdGlvbigpO1xuXG4gICAgaWYgKGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwICYmIHZhbHVlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLkVOVU1fVFlQRV9FWFRFTlNJT04sXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICAgIHZhbHVlczogdmFsdWVzLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24gOlxuICAgKiAgIC0gZXh0ZW5kIGlucHV0IE5hbWUgRGlyZWN0aXZlc1tDb25zdF0/IElucHV0RmllbGRzRGVmaW5pdGlvblxuICAgKiAgIC0gZXh0ZW5kIGlucHV0IE5hbWUgRGlyZWN0aXZlc1tDb25zdF1cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24gPSBmdW5jdGlvbiBwYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB0aGlzLmV4cGVjdEtleXdvcmQoJ2V4dGVuZCcpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnaW5wdXQnKTtcbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG4gICAgdmFyIGRpcmVjdGl2ZXMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlcyh0cnVlKTtcbiAgICB2YXIgZmllbGRzID0gdGhpcy5wYXJzZUlucHV0RmllbGRzRGVmaW5pdGlvbigpO1xuXG4gICAgaWYgKGRpcmVjdGl2ZXMubGVuZ3RoID09PSAwICYmIGZpZWxkcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IHRoaXMudW5leHBlY3RlZCgpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBraW5kOiBLaW5kLklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTixcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuICAgICAgZmllbGRzOiBmaWVsZHMsXG4gICAgICBsb2M6IHRoaXMubG9jKHN0YXJ0KVxuICAgIH07XG4gIH1cbiAgLyoqXG4gICAqIERpcmVjdGl2ZURlZmluaXRpb24gOlxuICAgKiAgIC0gRGVzY3JpcHRpb24/IGRpcmVjdGl2ZSBAIE5hbWUgQXJndW1lbnRzRGVmaW5pdGlvbj8gYHJlcGVhdGFibGVgPyBvbiBEaXJlY3RpdmVMb2NhdGlvbnNcbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uID0gZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmVEZWZpbml0aW9uKCkge1xuICAgIHZhciBzdGFydCA9IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHZhciBkZXNjcmlwdGlvbiA9IHRoaXMucGFyc2VEZXNjcmlwdGlvbigpO1xuICAgIHRoaXMuZXhwZWN0S2V5d29yZCgnZGlyZWN0aXZlJyk7XG4gICAgdGhpcy5leHBlY3RUb2tlbihUb2tlbktpbmQuQVQpO1xuICAgIHZhciBuYW1lID0gdGhpcy5wYXJzZU5hbWUoKTtcbiAgICB2YXIgYXJncyA9IHRoaXMucGFyc2VBcmd1bWVudERlZnMoKTtcbiAgICB2YXIgcmVwZWF0YWJsZSA9IHRoaXMuZXhwZWN0T3B0aW9uYWxLZXl3b3JkKCdyZXBlYXRhYmxlJyk7XG4gICAgdGhpcy5leHBlY3RLZXl3b3JkKCdvbicpO1xuICAgIHZhciBsb2NhdGlvbnMgPSB0aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb25zKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGtpbmQ6IEtpbmQuRElSRUNUSVZFX0RFRklOSVRJT04sXG4gICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24sXG4gICAgICBuYW1lOiBuYW1lLFxuICAgICAgYXJndW1lbnRzOiBhcmdzLFxuICAgICAgcmVwZWF0YWJsZTogcmVwZWF0YWJsZSxcbiAgICAgIGxvY2F0aW9uczogbG9jYXRpb25zLFxuICAgICAgbG9jOiB0aGlzLmxvYyhzdGFydClcbiAgICB9O1xuICB9XG4gIC8qKlxuICAgKiBEaXJlY3RpdmVMb2NhdGlvbnMgOlxuICAgKiAgIC0gYHxgPyBEaXJlY3RpdmVMb2NhdGlvblxuICAgKiAgIC0gRGlyZWN0aXZlTG9jYXRpb25zIHwgRGlyZWN0aXZlTG9jYXRpb25cbiAgICovXG4gIDtcblxuICBfcHJvdG8ucGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMgPSBmdW5jdGlvbiBwYXJzZURpcmVjdGl2ZUxvY2F0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5kZWxpbWl0ZWRNYW55KFRva2VuS2luZC5QSVBFLCB0aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb24pO1xuICB9XG4gIC8qXG4gICAqIERpcmVjdGl2ZUxvY2F0aW9uIDpcbiAgICogICAtIEV4ZWN1dGFibGVEaXJlY3RpdmVMb2NhdGlvblxuICAgKiAgIC0gVHlwZVN5c3RlbURpcmVjdGl2ZUxvY2F0aW9uXG4gICAqXG4gICAqIEV4ZWN1dGFibGVEaXJlY3RpdmVMb2NhdGlvbiA6IG9uZSBvZlxuICAgKiAgIGBRVUVSWWBcbiAgICogICBgTVVUQVRJT05gXG4gICAqICAgYFNVQlNDUklQVElPTmBcbiAgICogICBgRklFTERgXG4gICAqICAgYEZSQUdNRU5UX0RFRklOSVRJT05gXG4gICAqICAgYEZSQUdNRU5UX1NQUkVBRGBcbiAgICogICBgSU5MSU5FX0ZSQUdNRU5UYFxuICAgKlxuICAgKiBUeXBlU3lzdGVtRGlyZWN0aXZlTG9jYXRpb24gOiBvbmUgb2ZcbiAgICogICBgU0NIRU1BYFxuICAgKiAgIGBTQ0FMQVJgXG4gICAqICAgYE9CSkVDVGBcbiAgICogICBgRklFTERfREVGSU5JVElPTmBcbiAgICogICBgQVJHVU1FTlRfREVGSU5JVElPTmBcbiAgICogICBgSU5URVJGQUNFYFxuICAgKiAgIGBVTklPTmBcbiAgICogICBgRU5VTWBcbiAgICogICBgRU5VTV9WQUxVRWBcbiAgICogICBgSU5QVVRfT0JKRUNUYFxuICAgKiAgIGBJTlBVVF9GSUVMRF9ERUZJTklUSU9OYFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wYXJzZURpcmVjdGl2ZUxvY2F0aW9uID0gZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmVMb2NhdGlvbigpIHtcbiAgICB2YXIgc3RhcnQgPSB0aGlzLl9sZXhlci50b2tlbjtcbiAgICB2YXIgbmFtZSA9IHRoaXMucGFyc2VOYW1lKCk7XG5cbiAgICBpZiAoRGlyZWN0aXZlTG9jYXRpb25bbmFtZS52YWx1ZV0gIT09IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIG5hbWU7XG4gICAgfVxuXG4gICAgdGhyb3cgdGhpcy51bmV4cGVjdGVkKHN0YXJ0KTtcbiAgfSAvLyBDb3JlIHBhcnNpbmcgdXRpbGl0eSBmdW5jdGlvbnNcblxuICAvKipcbiAgICogUmV0dXJucyBhIGxvY2F0aW9uIG9iamVjdCwgdXNlZCB0byBpZGVudGlmeSB0aGUgcGxhY2UgaW4gdGhlIHNvdXJjZSB0aGF0IGNyZWF0ZWQgYSBnaXZlbiBwYXJzZWQgb2JqZWN0LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5sb2MgPSBmdW5jdGlvbiBsb2Moc3RhcnRUb2tlbikge1xuICAgIHZhciBfdGhpcyRfb3B0aW9uczQ7XG5cbiAgICBpZiAoKChfdGhpcyRfb3B0aW9uczQgPSB0aGlzLl9vcHRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRfb3B0aW9uczQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJF9vcHRpb25zNC5ub0xvY2F0aW9uKSAhPT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIG5ldyBMb2NhdGlvbihzdGFydFRva2VuLCB0aGlzLl9sZXhlci5sYXN0VG9rZW4sIHRoaXMuX2xleGVyLnNvdXJjZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBuZXh0IHRva2VuIGlzIG9mIGEgZ2l2ZW4ga2luZFxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5wZWVrID0gZnVuY3Rpb24gcGVlayhraW5kKSB7XG4gICAgcmV0dXJuIHRoaXMuX2xleGVyLnRva2VuLmtpbmQgPT09IGtpbmQ7XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoZSBuZXh0IHRva2VuIGlzIG9mIHRoZSBnaXZlbiBraW5kLCByZXR1cm4gdGhhdCB0b2tlbiBhZnRlciBhZHZhbmNpbmcgdGhlIGxleGVyLlxuICAgKiBPdGhlcndpc2UsIGRvIG5vdCBjaGFuZ2UgdGhlIHBhcnNlciBzdGF0ZSBhbmQgdGhyb3cgYW4gZXJyb3IuXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLmV4cGVjdFRva2VuID0gZnVuY3Rpb24gZXhwZWN0VG9rZW4oa2luZCkge1xuICAgIHZhciB0b2tlbiA9IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgaWYgKHRva2VuLmtpbmQgPT09IGtpbmQpIHtcbiAgICAgIHRoaXMuX2xleGVyLmFkdmFuY2UoKTtcblxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH1cblxuICAgIHRocm93IHN5bnRheEVycm9yKHRoaXMuX2xleGVyLnNvdXJjZSwgdG9rZW4uc3RhcnQsIFwiRXhwZWN0ZWQgXCIuY29uY2F0KGdldFRva2VuS2luZERlc2Moa2luZCksIFwiLCBmb3VuZCBcIikuY29uY2F0KGdldFRva2VuRGVzYyh0b2tlbiksIFwiLlwiKSk7XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoZSBuZXh0IHRva2VuIGlzIG9mIHRoZSBnaXZlbiBraW5kLCByZXR1cm4gdGhhdCB0b2tlbiBhZnRlciBhZHZhbmNpbmcgdGhlIGxleGVyLlxuICAgKiBPdGhlcndpc2UsIGRvIG5vdCBjaGFuZ2UgdGhlIHBhcnNlciBzdGF0ZSBhbmQgcmV0dXJuIHVuZGVmaW5lZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZXhwZWN0T3B0aW9uYWxUb2tlbiA9IGZ1bmN0aW9uIGV4cGVjdE9wdGlvbmFsVG9rZW4oa2luZCkge1xuICAgIHZhciB0b2tlbiA9IHRoaXMuX2xleGVyLnRva2VuO1xuXG4gICAgaWYgKHRva2VuLmtpbmQgPT09IGtpbmQpIHtcbiAgICAgIHRoaXMuX2xleGVyLmFkdmFuY2UoKTtcblxuICAgICAgcmV0dXJuIHRva2VuO1xuICAgIH1cblxuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoZSBuZXh0IHRva2VuIGlzIGEgZ2l2ZW4ga2V5d29yZCwgYWR2YW5jZSB0aGUgbGV4ZXIuXG4gICAqIE90aGVyd2lzZSwgZG8gbm90IGNoYW5nZSB0aGUgcGFyc2VyIHN0YXRlIGFuZCB0aHJvdyBhbiBlcnJvci5cbiAgICovXG4gIDtcblxuICBfcHJvdG8uZXhwZWN0S2V5d29yZCA9IGZ1bmN0aW9uIGV4cGVjdEtleXdvcmQodmFsdWUpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIGlmICh0b2tlbi5raW5kID09PSBUb2tlbktpbmQuTkFNRSAmJiB0b2tlbi52YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuX2xleGVyLmFkdmFuY2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgc3ludGF4RXJyb3IodGhpcy5fbGV4ZXIuc291cmNlLCB0b2tlbi5zdGFydCwgXCJFeHBlY3RlZCBcXFwiXCIuY29uY2F0KHZhbHVlLCBcIlxcXCIsIGZvdW5kIFwiKS5jb25jYXQoZ2V0VG9rZW5EZXNjKHRva2VuKSwgXCIuXCIpKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIElmIHRoZSBuZXh0IHRva2VuIGlzIGEgZ2l2ZW4ga2V5d29yZCwgcmV0dXJuIFwidHJ1ZVwiIGFmdGVyIGFkdmFuY2luZyB0aGUgbGV4ZXIuXG4gICAqIE90aGVyd2lzZSwgZG8gbm90IGNoYW5nZSB0aGUgcGFyc2VyIHN0YXRlIGFuZCByZXR1cm4gXCJmYWxzZVwiLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5leHBlY3RPcHRpb25hbEtleXdvcmQgPSBmdW5jdGlvbiBleHBlY3RPcHRpb25hbEtleXdvcmQodmFsdWUpIHtcbiAgICB2YXIgdG9rZW4gPSB0aGlzLl9sZXhlci50b2tlbjtcblxuICAgIGlmICh0b2tlbi5raW5kID09PSBUb2tlbktpbmQuTkFNRSAmJiB0b2tlbi52YWx1ZSA9PT0gdmFsdWUpIHtcbiAgICAgIHRoaXMuX2xleGVyLmFkdmFuY2UoKTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGFuIGVycm9yIHdoZW4gYW4gdW5leHBlY3RlZCBsZXhlZCB0b2tlbiBpcyBlbmNvdW50ZXJlZC5cbiAgICovXG4gIDtcblxuICBfcHJvdG8udW5leHBlY3RlZCA9IGZ1bmN0aW9uIHVuZXhwZWN0ZWQoYXRUb2tlbikge1xuICAgIHZhciB0b2tlbiA9IGF0VG9rZW4gIT09IG51bGwgJiYgYXRUb2tlbiAhPT0gdm9pZCAwID8gYXRUb2tlbiA6IHRoaXMuX2xleGVyLnRva2VuO1xuICAgIHJldHVybiBzeW50YXhFcnJvcih0aGlzLl9sZXhlci5zb3VyY2UsIHRva2VuLnN0YXJ0LCBcIlVuZXhwZWN0ZWQgXCIuY29uY2F0KGdldFRva2VuRGVzYyh0b2tlbiksIFwiLlwiKSk7XG4gIH1cbiAgLyoqXG4gICAqIFJldHVybnMgYSBwb3NzaWJseSBlbXB0eSBsaXN0IG9mIHBhcnNlIG5vZGVzLCBkZXRlcm1pbmVkIGJ5IHRoZSBwYXJzZUZuLlxuICAgKiBUaGlzIGxpc3QgYmVnaW5zIHdpdGggYSBsZXggdG9rZW4gb2Ygb3BlbktpbmQgYW5kIGVuZHMgd2l0aCBhIGxleCB0b2tlbiBvZiBjbG9zZUtpbmQuXG4gICAqIEFkdmFuY2VzIHRoZSBwYXJzZXIgdG8gdGhlIG5leHQgbGV4IHRva2VuIGFmdGVyIHRoZSBjbG9zaW5nIHRva2VuLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5hbnkgPSBmdW5jdGlvbiBhbnkob3BlbktpbmQsIHBhcnNlRm4sIGNsb3NlS2luZCkge1xuICAgIHRoaXMuZXhwZWN0VG9rZW4ob3BlbktpbmQpO1xuICAgIHZhciBub2RlcyA9IFtdO1xuXG4gICAgd2hpbGUgKCF0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oY2xvc2VLaW5kKSkge1xuICAgICAgbm9kZXMucHVzaChwYXJzZUZuLmNhbGwodGhpcykpO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlcztcbiAgfVxuICAvKipcbiAgICogUmV0dXJucyBhIGxpc3Qgb2YgcGFyc2Ugbm9kZXMsIGRldGVybWluZWQgYnkgdGhlIHBhcnNlRm4uXG4gICAqIEl0IGNhbiBiZSBlbXB0eSBvbmx5IGlmIG9wZW4gdG9rZW4gaXMgbWlzc2luZyBvdGhlcndpc2UgaXQgd2lsbCBhbHdheXMgcmV0dXJuIG5vbi1lbXB0eSBsaXN0XG4gICAqIHRoYXQgYmVnaW5zIHdpdGggYSBsZXggdG9rZW4gb2Ygb3BlbktpbmQgYW5kIGVuZHMgd2l0aCBhIGxleCB0b2tlbiBvZiBjbG9zZUtpbmQuXG4gICAqIEFkdmFuY2VzIHRoZSBwYXJzZXIgdG8gdGhlIG5leHQgbGV4IHRva2VuIGFmdGVyIHRoZSBjbG9zaW5nIHRva2VuLlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5vcHRpb25hbE1hbnkgPSBmdW5jdGlvbiBvcHRpb25hbE1hbnkob3BlbktpbmQsIHBhcnNlRm4sIGNsb3NlS2luZCkge1xuICAgIGlmICh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4ob3BlbktpbmQpKSB7XG4gICAgICB2YXIgbm9kZXMgPSBbXTtcblxuICAgICAgZG8ge1xuICAgICAgICBub2Rlcy5wdXNoKHBhcnNlRm4uY2FsbCh0aGlzKSk7XG4gICAgICB9IHdoaWxlICghdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGNsb3NlS2luZCkpO1xuXG4gICAgICByZXR1cm4gbm9kZXM7XG4gICAgfVxuXG4gICAgcmV0dXJuIFtdO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbm9uLWVtcHR5IGxpc3Qgb2YgcGFyc2Ugbm9kZXMsIGRldGVybWluZWQgYnkgdGhlIHBhcnNlRm4uXG4gICAqIFRoaXMgbGlzdCBiZWdpbnMgd2l0aCBhIGxleCB0b2tlbiBvZiBvcGVuS2luZCBhbmQgZW5kcyB3aXRoIGEgbGV4IHRva2VuIG9mIGNsb3NlS2luZC5cbiAgICogQWR2YW5jZXMgdGhlIHBhcnNlciB0byB0aGUgbmV4dCBsZXggdG9rZW4gYWZ0ZXIgdGhlIGNsb3NpbmcgdG9rZW4uXG4gICAqL1xuICA7XG5cbiAgX3Byb3RvLm1hbnkgPSBmdW5jdGlvbiBtYW55KG9wZW5LaW5kLCBwYXJzZUZuLCBjbG9zZUtpbmQpIHtcbiAgICB0aGlzLmV4cGVjdFRva2VuKG9wZW5LaW5kKTtcbiAgICB2YXIgbm9kZXMgPSBbXTtcblxuICAgIGRvIHtcbiAgICAgIG5vZGVzLnB1c2gocGFyc2VGbi5jYWxsKHRoaXMpKTtcbiAgICB9IHdoaWxlICghdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGNsb3NlS2luZCkpO1xuXG4gICAgcmV0dXJuIG5vZGVzO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbm9uLWVtcHR5IGxpc3Qgb2YgcGFyc2Ugbm9kZXMsIGRldGVybWluZWQgYnkgdGhlIHBhcnNlRm4uXG4gICAqIFRoaXMgbGlzdCBtYXkgYmVnaW4gd2l0aCBhIGxleCB0b2tlbiBvZiBkZWxpbWl0ZXJLaW5kIGZvbGxvd2VkIGJ5IGl0ZW1zIHNlcGFyYXRlZCBieSBsZXggdG9rZW5zIG9mIHRva2VuS2luZC5cbiAgICogQWR2YW5jZXMgdGhlIHBhcnNlciB0byB0aGUgbmV4dCBsZXggdG9rZW4gYWZ0ZXIgbGFzdCBpdGVtIGluIHRoZSBsaXN0LlxuICAgKi9cbiAgO1xuXG4gIF9wcm90by5kZWxpbWl0ZWRNYW55ID0gZnVuY3Rpb24gZGVsaW1pdGVkTWFueShkZWxpbWl0ZXJLaW5kLCBwYXJzZUZuKSB7XG4gICAgdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKGRlbGltaXRlcktpbmQpO1xuICAgIHZhciBub2RlcyA9IFtdO1xuXG4gICAgZG8ge1xuICAgICAgbm9kZXMucHVzaChwYXJzZUZuLmNhbGwodGhpcykpO1xuICAgIH0gd2hpbGUgKHRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihkZWxpbWl0ZXJLaW5kKSk7XG5cbiAgICByZXR1cm4gbm9kZXM7XG4gIH07XG5cbiAgcmV0dXJuIFBhcnNlcjtcbn0oKTtcbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gZGVzY3JpYmUgYSB0b2tlbiBhcyBhIHN0cmluZyBmb3IgZGVidWdnaW5nLlxuICovXG5cbmZ1bmN0aW9uIGdldFRva2VuRGVzYyh0b2tlbikge1xuICB2YXIgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgcmV0dXJuIGdldFRva2VuS2luZERlc2ModG9rZW4ua2luZCkgKyAodmFsdWUgIT0gbnVsbCA/IFwiIFxcXCJcIi5jb25jYXQodmFsdWUsIFwiXFxcIlwiKSA6ICcnKTtcbn1cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gdG8gZGVzY3JpYmUgYSB0b2tlbiBraW5kIGFzIGEgc3RyaW5nIGZvciBkZWJ1Z2dpbmcuXG4gKi9cblxuXG5mdW5jdGlvbiBnZXRUb2tlbktpbmREZXNjKGtpbmQpIHtcbiAgcmV0dXJuIGlzUHVuY3R1YXRvclRva2VuS2luZChraW5kKSA/IFwiXFxcIlwiLmNvbmNhdChraW5kLCBcIlxcXCJcIikgOiBraW5kO1xufVxuIiwgImltcG9ydCBpbnNwZWN0IGZyb20gXCIuLi9qc3V0aWxzL2luc3BlY3QubWpzXCI7XG5pbXBvcnQgeyBpc05vZGUgfSBmcm9tIFwiLi9hc3QubWpzXCI7XG4vKipcbiAqIEEgdmlzaXRvciBpcyBwcm92aWRlZCB0byB2aXNpdCwgaXQgY29udGFpbnMgdGhlIGNvbGxlY3Rpb24gb2ZcbiAqIHJlbGV2YW50IGZ1bmN0aW9ucyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZSB2aXNpdG9yJ3MgdHJhdmVyc2FsLlxuICovXG5cbmV4cG9ydCB2YXIgUXVlcnlEb2N1bWVudEtleXMgPSB7XG4gIE5hbWU6IFtdLFxuICBEb2N1bWVudDogWydkZWZpbml0aW9ucyddLFxuICBPcGVyYXRpb25EZWZpbml0aW9uOiBbJ25hbWUnLCAndmFyaWFibGVEZWZpbml0aW9ucycsICdkaXJlY3RpdmVzJywgJ3NlbGVjdGlvblNldCddLFxuICBWYXJpYWJsZURlZmluaXRpb246IFsndmFyaWFibGUnLCAndHlwZScsICdkZWZhdWx0VmFsdWUnLCAnZGlyZWN0aXZlcyddLFxuICBWYXJpYWJsZTogWyduYW1lJ10sXG4gIFNlbGVjdGlvblNldDogWydzZWxlY3Rpb25zJ10sXG4gIEZpZWxkOiBbJ2FsaWFzJywgJ25hbWUnLCAnYXJndW1lbnRzJywgJ2RpcmVjdGl2ZXMnLCAnc2VsZWN0aW9uU2V0J10sXG4gIEFyZ3VtZW50OiBbJ25hbWUnLCAndmFsdWUnXSxcbiAgRnJhZ21lbnRTcHJlYWQ6IFsnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIElubGluZUZyYWdtZW50OiBbJ3R5cGVDb25kaXRpb24nLCAnZGlyZWN0aXZlcycsICdzZWxlY3Rpb25TZXQnXSxcbiAgRnJhZ21lbnREZWZpbml0aW9uOiBbJ25hbWUnLCAvLyBOb3RlOiBmcmFnbWVudCB2YXJpYWJsZSBkZWZpbml0aW9ucyBhcmUgZXhwZXJpbWVudGFsIGFuZCBtYXkgYmUgY2hhbmdlZFxuICAvLyBvciByZW1vdmVkIGluIHRoZSBmdXR1cmUuXG4gICd2YXJpYWJsZURlZmluaXRpb25zJywgJ3R5cGVDb25kaXRpb24nLCAnZGlyZWN0aXZlcycsICdzZWxlY3Rpb25TZXQnXSxcbiAgSW50VmFsdWU6IFtdLFxuICBGbG9hdFZhbHVlOiBbXSxcbiAgU3RyaW5nVmFsdWU6IFtdLFxuICBCb29sZWFuVmFsdWU6IFtdLFxuICBOdWxsVmFsdWU6IFtdLFxuICBFbnVtVmFsdWU6IFtdLFxuICBMaXN0VmFsdWU6IFsndmFsdWVzJ10sXG4gIE9iamVjdFZhbHVlOiBbJ2ZpZWxkcyddLFxuICBPYmplY3RGaWVsZDogWyduYW1lJywgJ3ZhbHVlJ10sXG4gIERpcmVjdGl2ZTogWyduYW1lJywgJ2FyZ3VtZW50cyddLFxuICBOYW1lZFR5cGU6IFsnbmFtZSddLFxuICBMaXN0VHlwZTogWyd0eXBlJ10sXG4gIE5vbk51bGxUeXBlOiBbJ3R5cGUnXSxcbiAgU2NoZW1hRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICdkaXJlY3RpdmVzJywgJ29wZXJhdGlvblR5cGVzJ10sXG4gIE9wZXJhdGlvblR5cGVEZWZpbml0aW9uOiBbJ3R5cGUnXSxcbiAgU2NhbGFyVHlwZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIE9iamVjdFR5cGVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnaW50ZXJmYWNlcycsICdkaXJlY3RpdmVzJywgJ2ZpZWxkcyddLFxuICBGaWVsZERlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdhcmd1bWVudHMnLCAndHlwZScsICdkaXJlY3RpdmVzJ10sXG4gIElucHV0VmFsdWVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAndHlwZScsICdkZWZhdWx0VmFsdWUnLCAnZGlyZWN0aXZlcyddLFxuICBJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2ludGVyZmFjZXMnLCAnZGlyZWN0aXZlcycsICdmaWVsZHMnXSxcbiAgVW5pb25UeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnLCAndHlwZXMnXSxcbiAgRW51bVR5cGVEZWZpbml0aW9uOiBbJ2Rlc2NyaXB0aW9uJywgJ25hbWUnLCAnZGlyZWN0aXZlcycsICd2YWx1ZXMnXSxcbiAgRW51bVZhbHVlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnXSxcbiAgSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbjogWydkZXNjcmlwdGlvbicsICduYW1lJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIERpcmVjdGl2ZURlZmluaXRpb246IFsnZGVzY3JpcHRpb24nLCAnbmFtZScsICdhcmd1bWVudHMnLCAnbG9jYXRpb25zJ10sXG4gIFNjaGVtYUV4dGVuc2lvbjogWydkaXJlY3RpdmVzJywgJ29wZXJhdGlvblR5cGVzJ10sXG4gIFNjYWxhclR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJ10sXG4gIE9iamVjdFR5cGVFeHRlbnNpb246IFsnbmFtZScsICdpbnRlcmZhY2VzJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIEludGVyZmFjZVR5cGVFeHRlbnNpb246IFsnbmFtZScsICdpbnRlcmZhY2VzJywgJ2RpcmVjdGl2ZXMnLCAnZmllbGRzJ10sXG4gIFVuaW9uVHlwZUV4dGVuc2lvbjogWyduYW1lJywgJ2RpcmVjdGl2ZXMnLCAndHlwZXMnXSxcbiAgRW51bVR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJywgJ3ZhbHVlcyddLFxuICBJbnB1dE9iamVjdFR5cGVFeHRlbnNpb246IFsnbmFtZScsICdkaXJlY3RpdmVzJywgJ2ZpZWxkcyddXG59O1xuZXhwb3J0IHZhciBCUkVBSyA9IE9iamVjdC5mcmVlemUoe30pO1xuLyoqXG4gKiB2aXNpdCgpIHdpbGwgd2FsayB0aHJvdWdoIGFuIEFTVCB1c2luZyBhIGRlcHRoLWZpcnN0IHRyYXZlcnNhbCwgY2FsbGluZ1xuICogdGhlIHZpc2l0b3IncyBlbnRlciBmdW5jdGlvbiBhdCBlYWNoIG5vZGUgaW4gdGhlIHRyYXZlcnNhbCwgYW5kIGNhbGxpbmcgdGhlXG4gKiBsZWF2ZSBmdW5jdGlvbiBhZnRlciB2aXNpdGluZyB0aGF0IG5vZGUgYW5kIGFsbCBvZiBpdHMgY2hpbGQgbm9kZXMuXG4gKlxuICogQnkgcmV0dXJuaW5nIGRpZmZlcmVudCB2YWx1ZXMgZnJvbSB0aGUgZW50ZXIgYW5kIGxlYXZlIGZ1bmN0aW9ucywgdGhlXG4gKiBiZWhhdmlvciBvZiB0aGUgdmlzaXRvciBjYW4gYmUgYWx0ZXJlZCwgaW5jbHVkaW5nIHNraXBwaW5nIG92ZXIgYSBzdWItdHJlZSBvZlxuICogdGhlIEFTVCAoYnkgcmV0dXJuaW5nIGZhbHNlKSwgZWRpdGluZyB0aGUgQVNUIGJ5IHJldHVybmluZyBhIHZhbHVlIG9yIG51bGxcbiAqIHRvIHJlbW92ZSB0aGUgdmFsdWUsIG9yIHRvIHN0b3AgdGhlIHdob2xlIHRyYXZlcnNhbCBieSByZXR1cm5pbmcgQlJFQUsuXG4gKlxuICogV2hlbiB1c2luZyB2aXNpdCgpIHRvIGVkaXQgYW4gQVNULCB0aGUgb3JpZ2luYWwgQVNUIHdpbGwgbm90IGJlIG1vZGlmaWVkLCBhbmRcbiAqIGEgbmV3IHZlcnNpb24gb2YgdGhlIEFTVCB3aXRoIHRoZSBjaGFuZ2VzIGFwcGxpZWQgd2lsbCBiZSByZXR1cm5lZCBmcm9tIHRoZVxuICogdmlzaXQgZnVuY3Rpb24uXG4gKlxuICogICAgIGNvbnN0IGVkaXRlZEFTVCA9IHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXIobm9kZSwga2V5LCBwYXJlbnQsIHBhdGgsIGFuY2VzdG9ycykge1xuICogICAgICAgICAvLyBAcmV0dXJuXG4gKiAgICAgICAgIC8vICAgdW5kZWZpbmVkOiBubyBhY3Rpb25cbiAqICAgICAgICAgLy8gICBmYWxzZTogc2tpcCB2aXNpdGluZyB0aGlzIG5vZGVcbiAqICAgICAgICAgLy8gICB2aXNpdG9yLkJSRUFLOiBzdG9wIHZpc2l0aW5nIGFsdG9nZXRoZXJcbiAqICAgICAgICAgLy8gICBudWxsOiBkZWxldGUgdGhpcyBub2RlXG4gKiAgICAgICAgIC8vICAgYW55IHZhbHVlOiByZXBsYWNlIHRoaXMgbm9kZSB3aXRoIHRoZSByZXR1cm5lZCB2YWx1ZVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlKG5vZGUsIGtleSwgcGFyZW50LCBwYXRoLCBhbmNlc3RvcnMpIHtcbiAqICAgICAgICAgLy8gQHJldHVyblxuICogICAgICAgICAvLyAgIHVuZGVmaW5lZDogbm8gYWN0aW9uXG4gKiAgICAgICAgIC8vICAgZmFsc2U6IG5vIGFjdGlvblxuICogICAgICAgICAvLyAgIHZpc2l0b3IuQlJFQUs6IHN0b3AgdmlzaXRpbmcgYWx0b2dldGhlclxuICogICAgICAgICAvLyAgIG51bGw6IGRlbGV0ZSB0aGlzIG5vZGVcbiAqICAgICAgICAgLy8gICBhbnkgdmFsdWU6IHJlcGxhY2UgdGhpcyBub2RlIHdpdGggdGhlIHJldHVybmVkIHZhbHVlXG4gKiAgICAgICB9XG4gKiAgICAgfSk7XG4gKlxuICogQWx0ZXJuYXRpdmVseSB0byBwcm92aWRpbmcgZW50ZXIoKSBhbmQgbGVhdmUoKSBmdW5jdGlvbnMsIGEgdmlzaXRvciBjYW5cbiAqIGluc3RlYWQgcHJvdmlkZSBmdW5jdGlvbnMgbmFtZWQgdGhlIHNhbWUgYXMgdGhlIGtpbmRzIG9mIEFTVCBub2Rlcywgb3JcbiAqIGVudGVyL2xlYXZlIHZpc2l0b3JzIGF0IGEgbmFtZWQga2V5LCBsZWFkaW5nIHRvIGZvdXIgcGVybXV0YXRpb25zIG9mIHRoZVxuICogdmlzaXRvciBBUEk6XG4gKlxuICogMSkgTmFtZWQgdmlzaXRvcnMgdHJpZ2dlcmVkIHdoZW4gZW50ZXJpbmcgYSBub2RlIG9mIGEgc3BlY2lmaWMga2luZC5cbiAqXG4gKiAgICAgdmlzaXQoYXN0LCB7XG4gKiAgICAgICBLaW5kKG5vZGUpIHtcbiAqICAgICAgICAgLy8gZW50ZXIgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDIpIE5hbWVkIHZpc2l0b3JzIHRoYXQgdHJpZ2dlciB1cG9uIGVudGVyaW5nIGFuZCBsZWF2aW5nIGEgbm9kZSBvZlxuICogICAgYSBzcGVjaWZpYyBraW5kLlxuICpcbiAqICAgICB2aXNpdChhc3QsIHtcbiAqICAgICAgIEtpbmQ6IHtcbiAqICAgICAgICAgZW50ZXIobm9kZSkge1xuICogICAgICAgICAgIC8vIGVudGVyIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgICAgbGVhdmUobm9kZSkge1xuICogICAgICAgICAgIC8vIGxlYXZlIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDMpIEdlbmVyaWMgdmlzaXRvcnMgdGhhdCB0cmlnZ2VyIHVwb24gZW50ZXJpbmcgYW5kIGxlYXZpbmcgYW55IG5vZGUuXG4gKlxuICogICAgIHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXIobm9kZSkge1xuICogICAgICAgICAvLyBlbnRlciBhbnkgbm9kZVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlKG5vZGUpIHtcbiAqICAgICAgICAgLy8gbGVhdmUgYW55IG5vZGVcbiAqICAgICAgIH1cbiAqICAgICB9KVxuICpcbiAqIDQpIFBhcmFsbGVsIHZpc2l0b3JzIGZvciBlbnRlcmluZyBhbmQgbGVhdmluZyBub2RlcyBvZiBhIHNwZWNpZmljIGtpbmQuXG4gKlxuICogICAgIHZpc2l0KGFzdCwge1xuICogICAgICAgZW50ZXI6IHtcbiAqICAgICAgICAgS2luZChub2RlKSB7XG4gKiAgICAgICAgICAgLy8gZW50ZXIgdGhlIFwiS2luZFwiIG5vZGVcbiAqICAgICAgICAgfVxuICogICAgICAgfSxcbiAqICAgICAgIGxlYXZlOiB7XG4gKiAgICAgICAgIEtpbmQobm9kZSkge1xuICogICAgICAgICAgIC8vIGxlYXZlIHRoZSBcIktpbmRcIiBub2RlXG4gKiAgICAgICAgIH1cbiAqICAgICAgIH1cbiAqICAgICB9KVxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiB2aXNpdChyb290LCB2aXNpdG9yKSB7XG4gIHZhciB2aXNpdG9yS2V5cyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogUXVlcnlEb2N1bWVudEtleXM7XG5cbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW5kZWYtaW5pdCAqL1xuICB2YXIgc3RhY2sgPSB1bmRlZmluZWQ7XG4gIHZhciBpbkFycmF5ID0gQXJyYXkuaXNBcnJheShyb290KTtcbiAgdmFyIGtleXMgPSBbcm9vdF07XG4gIHZhciBpbmRleCA9IC0xO1xuICB2YXIgZWRpdHMgPSBbXTtcbiAgdmFyIG5vZGUgPSB1bmRlZmluZWQ7XG4gIHZhciBrZXkgPSB1bmRlZmluZWQ7XG4gIHZhciBwYXJlbnQgPSB1bmRlZmluZWQ7XG4gIHZhciBwYXRoID0gW107XG4gIHZhciBhbmNlc3RvcnMgPSBbXTtcbiAgdmFyIG5ld1Jvb3QgPSByb290O1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVuZGVmLWluaXQgKi9cblxuICBkbyB7XG4gICAgaW5kZXgrKztcbiAgICB2YXIgaXNMZWF2aW5nID0gaW5kZXggPT09IGtleXMubGVuZ3RoO1xuICAgIHZhciBpc0VkaXRlZCA9IGlzTGVhdmluZyAmJiBlZGl0cy5sZW5ndGggIT09IDA7XG5cbiAgICBpZiAoaXNMZWF2aW5nKSB7XG4gICAgICBrZXkgPSBhbmNlc3RvcnMubGVuZ3RoID09PSAwID8gdW5kZWZpbmVkIDogcGF0aFtwYXRoLmxlbmd0aCAtIDFdO1xuICAgICAgbm9kZSA9IHBhcmVudDtcbiAgICAgIHBhcmVudCA9IGFuY2VzdG9ycy5wb3AoKTtcblxuICAgICAgaWYgKGlzRWRpdGVkKSB7XG4gICAgICAgIGlmIChpbkFycmF5KSB7XG4gICAgICAgICAgbm9kZSA9IG5vZGUuc2xpY2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgY2xvbmUgPSB7fTtcblxuICAgICAgICAgIGZvciAodmFyIF9pMiA9IDAsIF9PYmplY3Qka2V5czIgPSBPYmplY3Qua2V5cyhub2RlKTsgX2kyIDwgX09iamVjdCRrZXlzMi5sZW5ndGg7IF9pMisrKSB7XG4gICAgICAgICAgICB2YXIgayA9IF9PYmplY3Qka2V5czJbX2kyXTtcbiAgICAgICAgICAgIGNsb25lW2tdID0gbm9kZVtrXTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBub2RlID0gY2xvbmU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZWRpdE9mZnNldCA9IDA7XG5cbiAgICAgICAgZm9yICh2YXIgaWkgPSAwOyBpaSA8IGVkaXRzLmxlbmd0aDsgaWkrKykge1xuICAgICAgICAgIHZhciBlZGl0S2V5ID0gZWRpdHNbaWldWzBdO1xuICAgICAgICAgIHZhciBlZGl0VmFsdWUgPSBlZGl0c1tpaV1bMV07XG5cbiAgICAgICAgICBpZiAoaW5BcnJheSkge1xuICAgICAgICAgICAgZWRpdEtleSAtPSBlZGl0T2Zmc2V0O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChpbkFycmF5ICYmIGVkaXRWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgbm9kZS5zcGxpY2UoZWRpdEtleSwgMSk7XG4gICAgICAgICAgICBlZGl0T2Zmc2V0Kys7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGVbZWRpdEtleV0gPSBlZGl0VmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGluZGV4ID0gc3RhY2suaW5kZXg7XG4gICAgICBrZXlzID0gc3RhY2sua2V5cztcbiAgICAgIGVkaXRzID0gc3RhY2suZWRpdHM7XG4gICAgICBpbkFycmF5ID0gc3RhY2suaW5BcnJheTtcbiAgICAgIHN0YWNrID0gc3RhY2sucHJldjtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ID0gcGFyZW50ID8gaW5BcnJheSA/IGluZGV4IDoga2V5c1tpbmRleF0gOiB1bmRlZmluZWQ7XG4gICAgICBub2RlID0gcGFyZW50ID8gcGFyZW50W2tleV0gOiBuZXdSb290O1xuXG4gICAgICBpZiAobm9kZSA9PT0gbnVsbCB8fCBub2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGF0aC5wdXNoKGtleSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIHJlc3VsdCA9IHZvaWQgMDtcblxuICAgIGlmICghQXJyYXkuaXNBcnJheShub2RlKSkge1xuICAgICAgaWYgKCFpc05vZGUobm9kZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBBU1QgTm9kZTogXCIuY29uY2F0KGluc3BlY3Qobm9kZSksIFwiLlwiKSk7XG4gICAgICB9XG5cbiAgICAgIHZhciB2aXNpdEZuID0gZ2V0VmlzaXRGbih2aXNpdG9yLCBub2RlLmtpbmQsIGlzTGVhdmluZyk7XG5cbiAgICAgIGlmICh2aXNpdEZuKSB7XG4gICAgICAgIHJlc3VsdCA9IHZpc2l0Rm4uY2FsbCh2aXNpdG9yLCBub2RlLCBrZXksIHBhcmVudCwgcGF0aCwgYW5jZXN0b3JzKTtcblxuICAgICAgICBpZiAocmVzdWx0ID09PSBCUkVBSykge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICBpZiAoIWlzTGVhdmluZykge1xuICAgICAgICAgICAgcGF0aC5wb3AoKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGVkaXRzLnB1c2goW2tleSwgcmVzdWx0XSk7XG5cbiAgICAgICAgICBpZiAoIWlzTGVhdmluZykge1xuICAgICAgICAgICAgaWYgKGlzTm9kZShyZXN1bHQpKSB7XG4gICAgICAgICAgICAgIG5vZGUgPSByZXN1bHQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBwYXRoLnBvcCgpO1xuICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAocmVzdWx0ID09PSB1bmRlZmluZWQgJiYgaXNFZGl0ZWQpIHtcbiAgICAgIGVkaXRzLnB1c2goW2tleSwgbm9kZV0pO1xuICAgIH1cblxuICAgIGlmIChpc0xlYXZpbmcpIHtcbiAgICAgIHBhdGgucG9wKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBfdmlzaXRvcktleXMkbm9kZSRraW47XG5cbiAgICAgIHN0YWNrID0ge1xuICAgICAgICBpbkFycmF5OiBpbkFycmF5LFxuICAgICAgICBpbmRleDogaW5kZXgsXG4gICAgICAgIGtleXM6IGtleXMsXG4gICAgICAgIGVkaXRzOiBlZGl0cyxcbiAgICAgICAgcHJldjogc3RhY2tcbiAgICAgIH07XG4gICAgICBpbkFycmF5ID0gQXJyYXkuaXNBcnJheShub2RlKTtcbiAgICAgIGtleXMgPSBpbkFycmF5ID8gbm9kZSA6IChfdmlzaXRvcktleXMkbm9kZSRraW4gPSB2aXNpdG9yS2V5c1tub2RlLmtpbmRdKSAhPT0gbnVsbCAmJiBfdmlzaXRvcktleXMkbm9kZSRraW4gIT09IHZvaWQgMCA/IF92aXNpdG9yS2V5cyRub2RlJGtpbiA6IFtdO1xuICAgICAgaW5kZXggPSAtMTtcbiAgICAgIGVkaXRzID0gW107XG5cbiAgICAgIGlmIChwYXJlbnQpIHtcbiAgICAgICAgYW5jZXN0b3JzLnB1c2gocGFyZW50KTtcbiAgICAgIH1cblxuICAgICAgcGFyZW50ID0gbm9kZTtcbiAgICB9XG4gIH0gd2hpbGUgKHN0YWNrICE9PSB1bmRlZmluZWQpO1xuXG4gIGlmIChlZGl0cy5sZW5ndGggIT09IDApIHtcbiAgICBuZXdSb290ID0gZWRpdHNbZWRpdHMubGVuZ3RoIC0gMV1bMV07XG4gIH1cblxuICByZXR1cm4gbmV3Um9vdDtcbn1cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB2aXNpdG9yIGluc3RhbmNlIHdoaWNoIGRlbGVnYXRlcyB0byBtYW55IHZpc2l0b3JzIHRvIHJ1biBpblxuICogcGFyYWxsZWwuIEVhY2ggdmlzaXRvciB3aWxsIGJlIHZpc2l0ZWQgZm9yIGVhY2ggbm9kZSBiZWZvcmUgbW92aW5nIG9uLlxuICpcbiAqIElmIGEgcHJpb3IgdmlzaXRvciBlZGl0cyBhIG5vZGUsIG5vIGZvbGxvd2luZyB2aXNpdG9ycyB3aWxsIHNlZSB0aGF0IG5vZGUuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHZpc2l0SW5QYXJhbGxlbCh2aXNpdG9ycykge1xuICB2YXIgc2tpcHBpbmcgPSBuZXcgQXJyYXkodmlzaXRvcnMubGVuZ3RoKTtcbiAgcmV0dXJuIHtcbiAgICBlbnRlcjogZnVuY3Rpb24gZW50ZXIobm9kZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aXNpdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2tpcHBpbmdbaV0gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmbiA9IGdldFZpc2l0Rm4odmlzaXRvcnNbaV0sIG5vZGUua2luZCxcbiAgICAgICAgICAvKiBpc0xlYXZpbmcgKi9cbiAgICAgICAgICBmYWxzZSk7XG5cbiAgICAgICAgICBpZiAoZm4pIHtcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBmbi5hcHBseSh2aXNpdG9yc1tpXSwgYXJndW1lbnRzKTtcblxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgc2tpcHBpbmdbaV0gPSBub2RlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgPT09IEJSRUFLKSB7XG4gICAgICAgICAgICAgIHNraXBwaW5nW2ldID0gQlJFQUs7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSxcbiAgICBsZWF2ZTogZnVuY3Rpb24gbGVhdmUobm9kZSkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2aXNpdG9ycy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoc2tpcHBpbmdbaV0gPT0gbnVsbCkge1xuICAgICAgICAgIHZhciBmbiA9IGdldFZpc2l0Rm4odmlzaXRvcnNbaV0sIG5vZGUua2luZCxcbiAgICAgICAgICAvKiBpc0xlYXZpbmcgKi9cbiAgICAgICAgICB0cnVlKTtcblxuICAgICAgICAgIGlmIChmbikge1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGZuLmFwcGx5KHZpc2l0b3JzW2ldLCBhcmd1bWVudHMpO1xuXG4gICAgICAgICAgICBpZiAocmVzdWx0ID09PSBCUkVBSykge1xuICAgICAgICAgICAgICBza2lwcGluZ1tpXSA9IEJSRUFLO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IHVuZGVmaW5lZCAmJiByZXN1bHQgIT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHNraXBwaW5nW2ldID09PSBub2RlKSB7XG4gICAgICAgICAgc2tpcHBpbmdbaV0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuLyoqXG4gKiBHaXZlbiBhIHZpc2l0b3IgaW5zdGFuY2UsIGlmIGl0IGlzIGxlYXZpbmcgb3Igbm90LCBhbmQgYSBub2RlIGtpbmQsIHJldHVyblxuICogdGhlIGZ1bmN0aW9uIHRoZSB2aXNpdG9yIHJ1bnRpbWUgc2hvdWxkIGNhbGwuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFZpc2l0Rm4odmlzaXRvciwga2luZCwgaXNMZWF2aW5nKSB7XG4gIHZhciBraW5kVmlzaXRvciA9IHZpc2l0b3Jba2luZF07XG5cbiAgaWYgKGtpbmRWaXNpdG9yKSB7XG4gICAgaWYgKCFpc0xlYXZpbmcgJiYgdHlwZW9mIGtpbmRWaXNpdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyB7IEtpbmQoKSB7fSB9XG4gICAgICByZXR1cm4ga2luZFZpc2l0b3I7XG4gICAgfVxuXG4gICAgdmFyIGtpbmRTcGVjaWZpY1Zpc2l0b3IgPSBpc0xlYXZpbmcgPyBraW5kVmlzaXRvci5sZWF2ZSA6IGtpbmRWaXNpdG9yLmVudGVyO1xuXG4gICAgaWYgKHR5cGVvZiBraW5kU3BlY2lmaWNWaXNpdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAvLyB7IEtpbmQ6IHsgZW50ZXIoKSB7fSwgbGVhdmUoKSB7fSB9IH1cbiAgICAgIHJldHVybiBraW5kU3BlY2lmaWNWaXNpdG9yO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB2YXIgc3BlY2lmaWNWaXNpdG9yID0gaXNMZWF2aW5nID8gdmlzaXRvci5sZWF2ZSA6IHZpc2l0b3IuZW50ZXI7XG5cbiAgICBpZiAoc3BlY2lmaWNWaXNpdG9yKSB7XG4gICAgICBpZiAodHlwZW9mIHNwZWNpZmljVmlzaXRvciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAvLyB7IGVudGVyKCkge30sIGxlYXZlKCkge30gfVxuICAgICAgICByZXR1cm4gc3BlY2lmaWNWaXNpdG9yO1xuICAgICAgfVxuXG4gICAgICB2YXIgc3BlY2lmaWNLaW5kVmlzaXRvciA9IHNwZWNpZmljVmlzaXRvcltraW5kXTtcblxuICAgICAgaWYgKHR5cGVvZiBzcGVjaWZpY0tpbmRWaXNpdG9yID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIC8vIHsgZW50ZXI6IHsgS2luZCgpIHt9IH0sIGxlYXZlOiB7IEtpbmQoKSB7fSB9IH1cbiAgICAgICAgcmV0dXJuIHNwZWNpZmljS2luZFZpc2l0b3I7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iLCAiaW1wb3J0IHsgdmlzaXQgfSBmcm9tIFwiLi92aXNpdG9yLm1qc1wiO1xuaW1wb3J0IHsgcHJpbnRCbG9ja1N0cmluZyB9IGZyb20gXCIuL2Jsb2NrU3RyaW5nLm1qc1wiO1xuLyoqXG4gKiBDb252ZXJ0cyBhbiBBU1QgaW50byBhIHN0cmluZywgdXNpbmcgb25lIHNldCBvZiByZWFzb25hYmxlXG4gKiBmb3JtYXR0aW5nIHJ1bGVzLlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBwcmludChhc3QpIHtcbiAgcmV0dXJuIHZpc2l0KGFzdCwge1xuICAgIGxlYXZlOiBwcmludERvY0FTVFJlZHVjZXJcbiAgfSk7XG59XG52YXIgTUFYX0xJTkVfTEVOR1RIID0gODA7IC8vIFRPRE86IHByb3ZpZGUgYmV0dGVyIHR5cGUgY292ZXJhZ2UgaW4gZnV0dXJlXG5cbnZhciBwcmludERvY0FTVFJlZHVjZXIgPSB7XG4gIE5hbWU6IGZ1bmN0aW9uIE5hbWUobm9kZSkge1xuICAgIHJldHVybiBub2RlLnZhbHVlO1xuICB9LFxuICBWYXJpYWJsZTogZnVuY3Rpb24gVmFyaWFibGUobm9kZSkge1xuICAgIHJldHVybiAnJCcgKyBub2RlLm5hbWU7XG4gIH0sXG4gIC8vIERvY3VtZW50XG4gIERvY3VtZW50OiBmdW5jdGlvbiBEb2N1bWVudChub2RlKSB7XG4gICAgcmV0dXJuIGpvaW4obm9kZS5kZWZpbml0aW9ucywgJ1xcblxcbicpICsgJ1xcbic7XG4gIH0sXG4gIE9wZXJhdGlvbkRlZmluaXRpb246IGZ1bmN0aW9uIE9wZXJhdGlvbkRlZmluaXRpb24obm9kZSkge1xuICAgIHZhciBvcCA9IG5vZGUub3BlcmF0aW9uO1xuICAgIHZhciBuYW1lID0gbm9kZS5uYW1lO1xuICAgIHZhciB2YXJEZWZzID0gd3JhcCgnKCcsIGpvaW4obm9kZS52YXJpYWJsZURlZmluaXRpb25zLCAnLCAnKSwgJyknKTtcbiAgICB2YXIgZGlyZWN0aXZlcyA9IGpvaW4obm9kZS5kaXJlY3RpdmVzLCAnICcpO1xuICAgIHZhciBzZWxlY3Rpb25TZXQgPSBub2RlLnNlbGVjdGlvblNldDsgLy8gQW5vbnltb3VzIHF1ZXJpZXMgd2l0aCBubyBkaXJlY3RpdmVzIG9yIHZhcmlhYmxlIGRlZmluaXRpb25zIGNhbiB1c2VcbiAgICAvLyB0aGUgcXVlcnkgc2hvcnQgZm9ybS5cblxuICAgIHJldHVybiAhbmFtZSAmJiAhZGlyZWN0aXZlcyAmJiAhdmFyRGVmcyAmJiBvcCA9PT0gJ3F1ZXJ5JyA/IHNlbGVjdGlvblNldCA6IGpvaW4oW29wLCBqb2luKFtuYW1lLCB2YXJEZWZzXSksIGRpcmVjdGl2ZXMsIHNlbGVjdGlvblNldF0sICcgJyk7XG4gIH0sXG4gIFZhcmlhYmxlRGVmaW5pdGlvbjogZnVuY3Rpb24gVmFyaWFibGVEZWZpbml0aW9uKF9yZWYpIHtcbiAgICB2YXIgdmFyaWFibGUgPSBfcmVmLnZhcmlhYmxlLFxuICAgICAgICB0eXBlID0gX3JlZi50eXBlLFxuICAgICAgICBkZWZhdWx0VmFsdWUgPSBfcmVmLmRlZmF1bHRWYWx1ZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYuZGlyZWN0aXZlcztcbiAgICByZXR1cm4gdmFyaWFibGUgKyAnOiAnICsgdHlwZSArIHdyYXAoJyA9ICcsIGRlZmF1bHRWYWx1ZSkgKyB3cmFwKCcgJywgam9pbihkaXJlY3RpdmVzLCAnICcpKTtcbiAgfSxcbiAgU2VsZWN0aW9uU2V0OiBmdW5jdGlvbiBTZWxlY3Rpb25TZXQoX3JlZjIpIHtcbiAgICB2YXIgc2VsZWN0aW9ucyA9IF9yZWYyLnNlbGVjdGlvbnM7XG4gICAgcmV0dXJuIGJsb2NrKHNlbGVjdGlvbnMpO1xuICB9LFxuICBGaWVsZDogZnVuY3Rpb24gRmllbGQoX3JlZjMpIHtcbiAgICB2YXIgYWxpYXMgPSBfcmVmMy5hbGlhcyxcbiAgICAgICAgbmFtZSA9IF9yZWYzLm5hbWUsXG4gICAgICAgIGFyZ3MgPSBfcmVmMy5hcmd1bWVudHMsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMy5kaXJlY3RpdmVzLFxuICAgICAgICBzZWxlY3Rpb25TZXQgPSBfcmVmMy5zZWxlY3Rpb25TZXQ7XG4gICAgdmFyIHByZWZpeCA9IHdyYXAoJycsIGFsaWFzLCAnOiAnKSArIG5hbWU7XG4gICAgdmFyIGFyZ3NMaW5lID0gcHJlZml4ICsgd3JhcCgnKCcsIGpvaW4oYXJncywgJywgJyksICcpJyk7XG5cbiAgICBpZiAoYXJnc0xpbmUubGVuZ3RoID4gTUFYX0xJTkVfTEVOR1RIKSB7XG4gICAgICBhcmdzTGluZSA9IHByZWZpeCArIHdyYXAoJyhcXG4nLCBpbmRlbnQoam9pbihhcmdzLCAnXFxuJykpLCAnXFxuKScpO1xuICAgIH1cblxuICAgIHJldHVybiBqb2luKFthcmdzTGluZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBzZWxlY3Rpb25TZXRdLCAnICcpO1xuICB9LFxuICBBcmd1bWVudDogZnVuY3Rpb24gQXJndW1lbnQoX3JlZjQpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWY0Lm5hbWUsXG4gICAgICAgIHZhbHVlID0gX3JlZjQudmFsdWU7XG4gICAgcmV0dXJuIG5hbWUgKyAnOiAnICsgdmFsdWU7XG4gIH0sXG4gIC8vIEZyYWdtZW50c1xuICBGcmFnbWVudFNwcmVhZDogZnVuY3Rpb24gRnJhZ21lbnRTcHJlYWQoX3JlZjUpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWY1Lm5hbWUsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmNS5kaXJlY3RpdmVzO1xuICAgIHJldHVybiAnLi4uJyArIG5hbWUgKyB3cmFwKCcgJywgam9pbihkaXJlY3RpdmVzLCAnICcpKTtcbiAgfSxcbiAgSW5saW5lRnJhZ21lbnQ6IGZ1bmN0aW9uIElubGluZUZyYWdtZW50KF9yZWY2KSB7XG4gICAgdmFyIHR5cGVDb25kaXRpb24gPSBfcmVmNi50eXBlQ29uZGl0aW9uLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjYuZGlyZWN0aXZlcyxcbiAgICAgICAgc2VsZWN0aW9uU2V0ID0gX3JlZjYuc2VsZWN0aW9uU2V0O1xuICAgIHJldHVybiBqb2luKFsnLi4uJywgd3JhcCgnb24gJywgdHlwZUNvbmRpdGlvbiksIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgc2VsZWN0aW9uU2V0XSwgJyAnKTtcbiAgfSxcbiAgRnJhZ21lbnREZWZpbml0aW9uOiBmdW5jdGlvbiBGcmFnbWVudERlZmluaXRpb24oX3JlZjcpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWY3Lm5hbWUsXG4gICAgICAgIHR5cGVDb25kaXRpb24gPSBfcmVmNy50eXBlQ29uZGl0aW9uLFxuICAgICAgICB2YXJpYWJsZURlZmluaXRpb25zID0gX3JlZjcudmFyaWFibGVEZWZpbml0aW9ucyxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWY3LmRpcmVjdGl2ZXMsXG4gICAgICAgIHNlbGVjdGlvblNldCA9IF9yZWY3LnNlbGVjdGlvblNldDtcbiAgICByZXR1cm4gKC8vIE5vdGU6IGZyYWdtZW50IHZhcmlhYmxlIGRlZmluaXRpb25zIGFyZSBleHBlcmltZW50YWwgYW5kIG1heSBiZSBjaGFuZ2VkXG4gICAgICAvLyBvciByZW1vdmVkIGluIHRoZSBmdXR1cmUuXG4gICAgICBcImZyYWdtZW50IFwiLmNvbmNhdChuYW1lKS5jb25jYXQod3JhcCgnKCcsIGpvaW4odmFyaWFibGVEZWZpbml0aW9ucywgJywgJyksICcpJyksIFwiIFwiKSArIFwib24gXCIuY29uY2F0KHR5cGVDb25kaXRpb24sIFwiIFwiKS5jb25jYXQod3JhcCgnJywgam9pbihkaXJlY3RpdmVzLCAnICcpLCAnICcpKSArIHNlbGVjdGlvblNldFxuICAgICk7XG4gIH0sXG4gIC8vIFZhbHVlXG4gIEludFZhbHVlOiBmdW5jdGlvbiBJbnRWYWx1ZShfcmVmOCkge1xuICAgIHZhciB2YWx1ZSA9IF9yZWY4LnZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgRmxvYXRWYWx1ZTogZnVuY3Rpb24gRmxvYXRWYWx1ZShfcmVmOSkge1xuICAgIHZhciB2YWx1ZSA9IF9yZWY5LnZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcbiAgU3RyaW5nVmFsdWU6IGZ1bmN0aW9uIFN0cmluZ1ZhbHVlKF9yZWYxMCwga2V5KSB7XG4gICAgdmFyIHZhbHVlID0gX3JlZjEwLnZhbHVlLFxuICAgICAgICBpc0Jsb2NrU3RyaW5nID0gX3JlZjEwLmJsb2NrO1xuICAgIHJldHVybiBpc0Jsb2NrU3RyaW5nID8gcHJpbnRCbG9ja1N0cmluZyh2YWx1ZSwga2V5ID09PSAnZGVzY3JpcHRpb24nID8gJycgOiAnICAnKSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcbiAgfSxcbiAgQm9vbGVhblZhbHVlOiBmdW5jdGlvbiBCb29sZWFuVmFsdWUoX3JlZjExKSB7XG4gICAgdmFyIHZhbHVlID0gX3JlZjExLnZhbHVlO1xuICAgIHJldHVybiB2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZSc7XG4gIH0sXG4gIE51bGxWYWx1ZTogZnVuY3Rpb24gTnVsbFZhbHVlKCkge1xuICAgIHJldHVybiAnbnVsbCc7XG4gIH0sXG4gIEVudW1WYWx1ZTogZnVuY3Rpb24gRW51bVZhbHVlKF9yZWYxMikge1xuICAgIHZhciB2YWx1ZSA9IF9yZWYxMi52YWx1ZTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0sXG4gIExpc3RWYWx1ZTogZnVuY3Rpb24gTGlzdFZhbHVlKF9yZWYxMykge1xuICAgIHZhciB2YWx1ZXMgPSBfcmVmMTMudmFsdWVzO1xuICAgIHJldHVybiAnWycgKyBqb2luKHZhbHVlcywgJywgJykgKyAnXSc7XG4gIH0sXG4gIE9iamVjdFZhbHVlOiBmdW5jdGlvbiBPYmplY3RWYWx1ZShfcmVmMTQpIHtcbiAgICB2YXIgZmllbGRzID0gX3JlZjE0LmZpZWxkcztcbiAgICByZXR1cm4gJ3snICsgam9pbihmaWVsZHMsICcsICcpICsgJ30nO1xuICB9LFxuICBPYmplY3RGaWVsZDogZnVuY3Rpb24gT2JqZWN0RmllbGQoX3JlZjE1KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMTUubmFtZSxcbiAgICAgICAgdmFsdWUgPSBfcmVmMTUudmFsdWU7XG4gICAgcmV0dXJuIG5hbWUgKyAnOiAnICsgdmFsdWU7XG4gIH0sXG4gIC8vIERpcmVjdGl2ZVxuICBEaXJlY3RpdmU6IGZ1bmN0aW9uIERpcmVjdGl2ZShfcmVmMTYpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYxNi5uYW1lLFxuICAgICAgICBhcmdzID0gX3JlZjE2LmFyZ3VtZW50cztcbiAgICByZXR1cm4gJ0AnICsgbmFtZSArIHdyYXAoJygnLCBqb2luKGFyZ3MsICcsICcpLCAnKScpO1xuICB9LFxuICAvLyBUeXBlXG4gIE5hbWVkVHlwZTogZnVuY3Rpb24gTmFtZWRUeXBlKF9yZWYxNykge1xuICAgIHZhciBuYW1lID0gX3JlZjE3Lm5hbWU7XG4gICAgcmV0dXJuIG5hbWU7XG4gIH0sXG4gIExpc3RUeXBlOiBmdW5jdGlvbiBMaXN0VHlwZShfcmVmMTgpIHtcbiAgICB2YXIgdHlwZSA9IF9yZWYxOC50eXBlO1xuICAgIHJldHVybiAnWycgKyB0eXBlICsgJ10nO1xuICB9LFxuICBOb25OdWxsVHlwZTogZnVuY3Rpb24gTm9uTnVsbFR5cGUoX3JlZjE5KSB7XG4gICAgdmFyIHR5cGUgPSBfcmVmMTkudHlwZTtcbiAgICByZXR1cm4gdHlwZSArICchJztcbiAgfSxcbiAgLy8gVHlwZSBTeXN0ZW0gRGVmaW5pdGlvbnNcbiAgU2NoZW1hRGVmaW5pdGlvbjogYWRkRGVzY3JpcHRpb24oZnVuY3Rpb24gKF9yZWYyMCkge1xuICAgIHZhciBkaXJlY3RpdmVzID0gX3JlZjIwLmRpcmVjdGl2ZXMsXG4gICAgICAgIG9wZXJhdGlvblR5cGVzID0gX3JlZjIwLm9wZXJhdGlvblR5cGVzO1xuICAgIHJldHVybiBqb2luKFsnc2NoZW1hJywgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhvcGVyYXRpb25UeXBlcyldLCAnICcpO1xuICB9KSxcbiAgT3BlcmF0aW9uVHlwZURlZmluaXRpb246IGZ1bmN0aW9uIE9wZXJhdGlvblR5cGVEZWZpbml0aW9uKF9yZWYyMSkge1xuICAgIHZhciBvcGVyYXRpb24gPSBfcmVmMjEub3BlcmF0aW9uLFxuICAgICAgICB0eXBlID0gX3JlZjIxLnR5cGU7XG4gICAgcmV0dXJuIG9wZXJhdGlvbiArICc6ICcgKyB0eXBlO1xuICB9LFxuICBTY2FsYXJUeXBlRGVmaW5pdGlvbjogYWRkRGVzY3JpcHRpb24oZnVuY3Rpb24gKF9yZWYyMikge1xuICAgIHZhciBuYW1lID0gX3JlZjIyLm5hbWUsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMjIuZGlyZWN0aXZlcztcbiAgICByZXR1cm4gam9pbihbJ3NjYWxhcicsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKV0sICcgJyk7XG4gIH0pLFxuICBPYmplY3RUeXBlRGVmaW5pdGlvbjogYWRkRGVzY3JpcHRpb24oZnVuY3Rpb24gKF9yZWYyMykge1xuICAgIHZhciBuYW1lID0gX3JlZjIzLm5hbWUsXG4gICAgICAgIGludGVyZmFjZXMgPSBfcmVmMjMuaW50ZXJmYWNlcyxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYyMy5kaXJlY3RpdmVzLFxuICAgICAgICBmaWVsZHMgPSBfcmVmMjMuZmllbGRzO1xuICAgIHJldHVybiBqb2luKFsndHlwZScsIG5hbWUsIHdyYXAoJ2ltcGxlbWVudHMgJywgam9pbihpbnRlcmZhY2VzLCAnICYgJykpLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIGJsb2NrKGZpZWxkcyldLCAnICcpO1xuICB9KSxcbiAgRmllbGREZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjI0KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMjQubmFtZSxcbiAgICAgICAgYXJncyA9IF9yZWYyNC5hcmd1bWVudHMsXG4gICAgICAgIHR5cGUgPSBfcmVmMjQudHlwZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYyNC5kaXJlY3RpdmVzO1xuICAgIHJldHVybiBuYW1lICsgKGhhc011bHRpbGluZUl0ZW1zKGFyZ3MpID8gd3JhcCgnKFxcbicsIGluZGVudChqb2luKGFyZ3MsICdcXG4nKSksICdcXG4pJykgOiB3cmFwKCcoJywgam9pbihhcmdzLCAnLCAnKSwgJyknKSkgKyAnOiAnICsgdHlwZSArIHdyYXAoJyAnLCBqb2luKGRpcmVjdGl2ZXMsICcgJykpO1xuICB9KSxcbiAgSW5wdXRWYWx1ZURlZmluaXRpb246IGFkZERlc2NyaXB0aW9uKGZ1bmN0aW9uIChfcmVmMjUpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYyNS5uYW1lLFxuICAgICAgICB0eXBlID0gX3JlZjI1LnR5cGUsXG4gICAgICAgIGRlZmF1bHRWYWx1ZSA9IF9yZWYyNS5kZWZhdWx0VmFsdWUsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMjUuZGlyZWN0aXZlcztcbiAgICByZXR1cm4gam9pbihbbmFtZSArICc6ICcgKyB0eXBlLCB3cmFwKCc9ICcsIGRlZmF1bHRWYWx1ZSksIGpvaW4oZGlyZWN0aXZlcywgJyAnKV0sICcgJyk7XG4gIH0pLFxuICBJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbjogYWRkRGVzY3JpcHRpb24oZnVuY3Rpb24gKF9yZWYyNikge1xuICAgIHZhciBuYW1lID0gX3JlZjI2Lm5hbWUsXG4gICAgICAgIGludGVyZmFjZXMgPSBfcmVmMjYuaW50ZXJmYWNlcyxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYyNi5kaXJlY3RpdmVzLFxuICAgICAgICBmaWVsZHMgPSBfcmVmMjYuZmllbGRzO1xuICAgIHJldHVybiBqb2luKFsnaW50ZXJmYWNlJywgbmFtZSwgd3JhcCgnaW1wbGVtZW50cyAnLCBqb2luKGludGVyZmFjZXMsICcgJiAnKSksIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2soZmllbGRzKV0sICcgJyk7XG4gIH0pLFxuICBVbmlvblR5cGVEZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjI3KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMjcubmFtZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYyNy5kaXJlY3RpdmVzLFxuICAgICAgICB0eXBlcyA9IF9yZWYyNy50eXBlcztcbiAgICByZXR1cm4gam9pbihbJ3VuaW9uJywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCB0eXBlcyAmJiB0eXBlcy5sZW5ndGggIT09IDAgPyAnPSAnICsgam9pbih0eXBlcywgJyB8ICcpIDogJyddLCAnICcpO1xuICB9KSxcbiAgRW51bVR5cGVEZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjI4KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMjgubmFtZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYyOC5kaXJlY3RpdmVzLFxuICAgICAgICB2YWx1ZXMgPSBfcmVmMjgudmFsdWVzO1xuICAgIHJldHVybiBqb2luKFsnZW51bScsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2sodmFsdWVzKV0sICcgJyk7XG4gIH0pLFxuICBFbnVtVmFsdWVEZWZpbml0aW9uOiBhZGREZXNjcmlwdGlvbihmdW5jdGlvbiAoX3JlZjI5KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMjkubmFtZSxcbiAgICAgICAgZGlyZWN0aXZlcyA9IF9yZWYyOS5kaXJlY3RpdmVzO1xuICAgIHJldHVybiBqb2luKFtuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyldLCAnICcpO1xuICB9KSxcbiAgSW5wdXRPYmplY3RUeXBlRGVmaW5pdGlvbjogYWRkRGVzY3JpcHRpb24oZnVuY3Rpb24gKF9yZWYzMCkge1xuICAgIHZhciBuYW1lID0gX3JlZjMwLm5hbWUsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMzAuZGlyZWN0aXZlcyxcbiAgICAgICAgZmllbGRzID0gX3JlZjMwLmZpZWxkcztcbiAgICByZXR1cm4gam9pbihbJ2lucHV0JywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpLCBibG9jayhmaWVsZHMpXSwgJyAnKTtcbiAgfSksXG4gIERpcmVjdGl2ZURlZmluaXRpb246IGFkZERlc2NyaXB0aW9uKGZ1bmN0aW9uIChfcmVmMzEpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYzMS5uYW1lLFxuICAgICAgICBhcmdzID0gX3JlZjMxLmFyZ3VtZW50cyxcbiAgICAgICAgcmVwZWF0YWJsZSA9IF9yZWYzMS5yZXBlYXRhYmxlLFxuICAgICAgICBsb2NhdGlvbnMgPSBfcmVmMzEubG9jYXRpb25zO1xuICAgIHJldHVybiAnZGlyZWN0aXZlIEAnICsgbmFtZSArIChoYXNNdWx0aWxpbmVJdGVtcyhhcmdzKSA/IHdyYXAoJyhcXG4nLCBpbmRlbnQoam9pbihhcmdzLCAnXFxuJykpLCAnXFxuKScpIDogd3JhcCgnKCcsIGpvaW4oYXJncywgJywgJyksICcpJykpICsgKHJlcGVhdGFibGUgPyAnIHJlcGVhdGFibGUnIDogJycpICsgJyBvbiAnICsgam9pbihsb2NhdGlvbnMsICcgfCAnKTtcbiAgfSksXG4gIFNjaGVtYUV4dGVuc2lvbjogZnVuY3Rpb24gU2NoZW1hRXh0ZW5zaW9uKF9yZWYzMikge1xuICAgIHZhciBkaXJlY3RpdmVzID0gX3JlZjMyLmRpcmVjdGl2ZXMsXG4gICAgICAgIG9wZXJhdGlvblR5cGVzID0gX3JlZjMyLm9wZXJhdGlvblR5cGVzO1xuICAgIHJldHVybiBqb2luKFsnZXh0ZW5kIHNjaGVtYScsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2sob3BlcmF0aW9uVHlwZXMpXSwgJyAnKTtcbiAgfSxcbiAgU2NhbGFyVHlwZUV4dGVuc2lvbjogZnVuY3Rpb24gU2NhbGFyVHlwZUV4dGVuc2lvbihfcmVmMzMpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYzMy5uYW1lLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjMzLmRpcmVjdGl2ZXM7XG4gICAgcmV0dXJuIGpvaW4oWydleHRlbmQgc2NhbGFyJywgbmFtZSwgam9pbihkaXJlY3RpdmVzLCAnICcpXSwgJyAnKTtcbiAgfSxcbiAgT2JqZWN0VHlwZUV4dGVuc2lvbjogZnVuY3Rpb24gT2JqZWN0VHlwZUV4dGVuc2lvbihfcmVmMzQpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYzNC5uYW1lLFxuICAgICAgICBpbnRlcmZhY2VzID0gX3JlZjM0LmludGVyZmFjZXMsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMzQuZGlyZWN0aXZlcyxcbiAgICAgICAgZmllbGRzID0gX3JlZjM0LmZpZWxkcztcbiAgICByZXR1cm4gam9pbihbJ2V4dGVuZCB0eXBlJywgbmFtZSwgd3JhcCgnaW1wbGVtZW50cyAnLCBqb2luKGludGVyZmFjZXMsICcgJiAnKSksIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2soZmllbGRzKV0sICcgJyk7XG4gIH0sXG4gIEludGVyZmFjZVR5cGVFeHRlbnNpb246IGZ1bmN0aW9uIEludGVyZmFjZVR5cGVFeHRlbnNpb24oX3JlZjM1KSB7XG4gICAgdmFyIG5hbWUgPSBfcmVmMzUubmFtZSxcbiAgICAgICAgaW50ZXJmYWNlcyA9IF9yZWYzNS5pbnRlcmZhY2VzLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjM1LmRpcmVjdGl2ZXMsXG4gICAgICAgIGZpZWxkcyA9IF9yZWYzNS5maWVsZHM7XG4gICAgcmV0dXJuIGpvaW4oWydleHRlbmQgaW50ZXJmYWNlJywgbmFtZSwgd3JhcCgnaW1wbGVtZW50cyAnLCBqb2luKGludGVyZmFjZXMsICcgJiAnKSksIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2soZmllbGRzKV0sICcgJyk7XG4gIH0sXG4gIFVuaW9uVHlwZUV4dGVuc2lvbjogZnVuY3Rpb24gVW5pb25UeXBlRXh0ZW5zaW9uKF9yZWYzNikge1xuICAgIHZhciBuYW1lID0gX3JlZjM2Lm5hbWUsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMzYuZGlyZWN0aXZlcyxcbiAgICAgICAgdHlwZXMgPSBfcmVmMzYudHlwZXM7XG4gICAgcmV0dXJuIGpvaW4oWydleHRlbmQgdW5pb24nLCBuYW1lLCBqb2luKGRpcmVjdGl2ZXMsICcgJyksIHR5cGVzICYmIHR5cGVzLmxlbmd0aCAhPT0gMCA/ICc9ICcgKyBqb2luKHR5cGVzLCAnIHwgJykgOiAnJ10sICcgJyk7XG4gIH0sXG4gIEVudW1UeXBlRXh0ZW5zaW9uOiBmdW5jdGlvbiBFbnVtVHlwZUV4dGVuc2lvbihfcmVmMzcpIHtcbiAgICB2YXIgbmFtZSA9IF9yZWYzNy5uYW1lLFxuICAgICAgICBkaXJlY3RpdmVzID0gX3JlZjM3LmRpcmVjdGl2ZXMsXG4gICAgICAgIHZhbHVlcyA9IF9yZWYzNy52YWx1ZXM7XG4gICAgcmV0dXJuIGpvaW4oWydleHRlbmQgZW51bScsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2sodmFsdWVzKV0sICcgJyk7XG4gIH0sXG4gIElucHV0T2JqZWN0VHlwZUV4dGVuc2lvbjogZnVuY3Rpb24gSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uKF9yZWYzOCkge1xuICAgIHZhciBuYW1lID0gX3JlZjM4Lm5hbWUsXG4gICAgICAgIGRpcmVjdGl2ZXMgPSBfcmVmMzguZGlyZWN0aXZlcyxcbiAgICAgICAgZmllbGRzID0gX3JlZjM4LmZpZWxkcztcbiAgICByZXR1cm4gam9pbihbJ2V4dGVuZCBpbnB1dCcsIG5hbWUsIGpvaW4oZGlyZWN0aXZlcywgJyAnKSwgYmxvY2soZmllbGRzKV0sICcgJyk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGFkZERlc2NyaXB0aW9uKGNiKSB7XG4gIHJldHVybiBmdW5jdGlvbiAobm9kZSkge1xuICAgIHJldHVybiBqb2luKFtub2RlLmRlc2NyaXB0aW9uLCBjYihub2RlKV0sICdcXG4nKTtcbiAgfTtcbn1cbi8qKlxuICogR2l2ZW4gbWF5YmVBcnJheSwgcHJpbnQgYW4gZW1wdHkgc3RyaW5nIGlmIGl0IGlzIG51bGwgb3IgZW1wdHksIG90aGVyd2lzZVxuICogcHJpbnQgYWxsIGl0ZW1zIHRvZ2V0aGVyIHNlcGFyYXRlZCBieSBzZXBhcmF0b3IgaWYgcHJvdmlkZWRcbiAqL1xuXG5cbmZ1bmN0aW9uIGpvaW4obWF5YmVBcnJheSkge1xuICB2YXIgX21heWJlQXJyYXkkZmlsdGVyJGpvO1xuXG4gIHZhciBzZXBhcmF0b3IgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICcnO1xuICByZXR1cm4gKF9tYXliZUFycmF5JGZpbHRlciRqbyA9IG1heWJlQXJyYXkgPT09IG51bGwgfHwgbWF5YmVBcnJheSA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF5YmVBcnJheS5maWx0ZXIoZnVuY3Rpb24gKHgpIHtcbiAgICByZXR1cm4geDtcbiAgfSkuam9pbihzZXBhcmF0b3IpKSAhPT0gbnVsbCAmJiBfbWF5YmVBcnJheSRmaWx0ZXIkam8gIT09IHZvaWQgMCA/IF9tYXliZUFycmF5JGZpbHRlciRqbyA6ICcnO1xufVxuLyoqXG4gKiBHaXZlbiBhcnJheSwgcHJpbnQgZWFjaCBpdGVtIG9uIGl0cyBvd24gbGluZSwgd3JhcHBlZCBpbiBhblxuICogaW5kZW50ZWQgXCJ7IH1cIiBibG9jay5cbiAqL1xuXG5cbmZ1bmN0aW9uIGJsb2NrKGFycmF5KSB7XG4gIHJldHVybiB3cmFwKCd7XFxuJywgaW5kZW50KGpvaW4oYXJyYXksICdcXG4nKSksICdcXG59Jyk7XG59XG4vKipcbiAqIElmIG1heWJlU3RyaW5nIGlzIG5vdCBudWxsIG9yIGVtcHR5LCB0aGVuIHdyYXAgd2l0aCBzdGFydCBhbmQgZW5kLCBvdGhlcndpc2UgcHJpbnQgYW4gZW1wdHkgc3RyaW5nLlxuICovXG5cblxuZnVuY3Rpb24gd3JhcChzdGFydCwgbWF5YmVTdHJpbmcpIHtcbiAgdmFyIGVuZCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJyc7XG4gIHJldHVybiBtYXliZVN0cmluZyAhPSBudWxsICYmIG1heWJlU3RyaW5nICE9PSAnJyA/IHN0YXJ0ICsgbWF5YmVTdHJpbmcgKyBlbmQgOiAnJztcbn1cblxuZnVuY3Rpb24gaW5kZW50KHN0cikge1xuICByZXR1cm4gd3JhcCgnICAnLCBzdHIucmVwbGFjZSgvXFxuL2csICdcXG4gICcpKTtcbn1cblxuZnVuY3Rpb24gaXNNdWx0aWxpbmUoc3RyKSB7XG4gIHJldHVybiBzdHIuaW5kZXhPZignXFxuJykgIT09IC0xO1xufVxuXG5mdW5jdGlvbiBoYXNNdWx0aWxpbmVJdGVtcyhtYXliZUFycmF5KSB7XG4gIHJldHVybiBtYXliZUFycmF5ICE9IG51bGwgJiYgbWF5YmVBcnJheS5zb21lKGlzTXVsdGlsaW5lKTtcbn1cbiIsICIvLyBQcm92aWRlcyB0aGUgbWV0aG9kcyB0aGF0IGFsbG93IFF1ZXJ5TWFuYWdlciB0byBoYW5kbGUgdGhlIGBza2lwYCBhbmRcbi8vIGBpbmNsdWRlYCBkaXJlY3RpdmVzIHdpdGhpbiBHcmFwaFFMLlxuaW1wb3J0IHtcbiAgU2VsZWN0aW9uTm9kZSxcbiAgVmFyaWFibGVOb2RlLFxuICBCb29sZWFuVmFsdWVOb2RlLFxuICBEaXJlY3RpdmVOb2RlLFxuICBEb2N1bWVudE5vZGUsXG4gIEFyZ3VtZW50Tm9kZSxcbiAgVmFsdWVOb2RlLFxuICBBU1ROb2RlLFxuICB2aXNpdCxcbn0gZnJvbSAnZ3JhcGhxbCc7XG5cbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbmV4cG9ydCB0eXBlIERpcmVjdGl2ZUluZm8gPSB7XG4gIFtmaWVsZE5hbWU6IHN0cmluZ106IHsgW2FyZ05hbWU6IHN0cmluZ106IGFueSB9O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZEluY2x1ZGUoXG4gIHsgZGlyZWN0aXZlcyB9OiBTZWxlY3Rpb25Ob2RlLFxuICB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuKTogYm9vbGVhbiB7XG4gIGlmICghZGlyZWN0aXZlcyB8fCAhZGlyZWN0aXZlcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZ2V0SW5jbHVzaW9uRGlyZWN0aXZlcyhcbiAgICBkaXJlY3RpdmVzXG4gICkuZXZlcnkoKHsgZGlyZWN0aXZlLCBpZkFyZ3VtZW50IH0pID0+IHtcbiAgICBsZXQgZXZhbGVkVmFsdWU6IGJvb2xlYW4gPSBmYWxzZTtcbiAgICBpZiAoaWZBcmd1bWVudC52YWx1ZS5raW5kID09PSAnVmFyaWFibGUnKSB7XG4gICAgICBldmFsZWRWYWx1ZSA9IHZhcmlhYmxlcyAmJiB2YXJpYWJsZXNbKGlmQXJndW1lbnQudmFsdWUgYXMgVmFyaWFibGVOb2RlKS5uYW1lLnZhbHVlXTtcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgZXZhbGVkVmFsdWUgIT09IHZvaWQgMCxcbiAgICAgICAgYEludmFsaWQgdmFyaWFibGUgcmVmZXJlbmNlZCBpbiBAJHtkaXJlY3RpdmUubmFtZS52YWx1ZX0gZGlyZWN0aXZlLmAsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBldmFsZWRWYWx1ZSA9IChpZkFyZ3VtZW50LnZhbHVlIGFzIEJvb2xlYW5WYWx1ZU5vZGUpLnZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gZGlyZWN0aXZlLm5hbWUudmFsdWUgPT09ICdza2lwJyA/ICFldmFsZWRWYWx1ZSA6IGV2YWxlZFZhbHVlO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERpcmVjdGl2ZU5hbWVzKHJvb3Q6IEFTVE5vZGUpIHtcbiAgY29uc3QgbmFtZXM6IHN0cmluZ1tdID0gW107XG5cbiAgdmlzaXQocm9vdCwge1xuICAgIERpcmVjdGl2ZShub2RlOiBEaXJlY3RpdmVOb2RlKSB7XG4gICAgICBuYW1lcy5wdXNoKG5vZGUubmFtZS52YWx1ZSk7XG4gICAgfSxcbiAgfSk7XG5cbiAgcmV0dXJuIG5hbWVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzRGlyZWN0aXZlcyhuYW1lczogc3RyaW5nW10sIHJvb3Q6IEFTVE5vZGUpIHtcbiAgcmV0dXJuIGdldERpcmVjdGl2ZU5hbWVzKHJvb3QpLnNvbWUoXG4gICAgKG5hbWU6IHN0cmluZykgPT4gbmFtZXMuaW5kZXhPZihuYW1lKSA+IC0xLFxuICApO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaGFzQ2xpZW50RXhwb3J0cyhkb2N1bWVudDogRG9jdW1lbnROb2RlKSB7XG4gIHJldHVybiAoXG4gICAgZG9jdW1lbnQgJiZcbiAgICBoYXNEaXJlY3RpdmVzKFsnY2xpZW50J10sIGRvY3VtZW50KSAmJlxuICAgIGhhc0RpcmVjdGl2ZXMoWydleHBvcnQnXSwgZG9jdW1lbnQpXG4gICk7XG59XG5cbmV4cG9ydCB0eXBlIEluY2x1c2lvbkRpcmVjdGl2ZXMgPSBBcnJheTx7XG4gIGRpcmVjdGl2ZTogRGlyZWN0aXZlTm9kZTtcbiAgaWZBcmd1bWVudDogQXJndW1lbnROb2RlO1xufT47XG5cbmZ1bmN0aW9uIGlzSW5jbHVzaW9uRGlyZWN0aXZlKHsgbmFtZTogeyB2YWx1ZSB9IH06IERpcmVjdGl2ZU5vZGUpOiBib29sZWFuIHtcbiAgcmV0dXJuIHZhbHVlID09PSAnc2tpcCcgfHwgdmFsdWUgPT09ICdpbmNsdWRlJztcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEluY2x1c2lvbkRpcmVjdGl2ZXMoXG4gIGRpcmVjdGl2ZXM6IFJlYWRvbmx5QXJyYXk8RGlyZWN0aXZlTm9kZT4sXG4pOiBJbmNsdXNpb25EaXJlY3RpdmVzIHtcbiAgY29uc3QgcmVzdWx0OiBJbmNsdXNpb25EaXJlY3RpdmVzID0gW107XG5cbiAgaWYgKGRpcmVjdGl2ZXMgJiYgZGlyZWN0aXZlcy5sZW5ndGgpIHtcbiAgICBkaXJlY3RpdmVzLmZvckVhY2goZGlyZWN0aXZlID0+IHtcbiAgICAgIGlmICghaXNJbmNsdXNpb25EaXJlY3RpdmUoZGlyZWN0aXZlKSkgcmV0dXJuO1xuXG4gICAgICBjb25zdCBkaXJlY3RpdmVBcmd1bWVudHMgPSBkaXJlY3RpdmUuYXJndW1lbnRzO1xuICAgICAgY29uc3QgZGlyZWN0aXZlTmFtZSA9IGRpcmVjdGl2ZS5uYW1lLnZhbHVlO1xuXG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIGRpcmVjdGl2ZUFyZ3VtZW50cyAmJiBkaXJlY3RpdmVBcmd1bWVudHMubGVuZ3RoID09PSAxLFxuICAgICAgICBgSW5jb3JyZWN0IG51bWJlciBvZiBhcmd1bWVudHMgZm9yIHRoZSBAJHtkaXJlY3RpdmVOYW1lfSBkaXJlY3RpdmUuYCxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGlmQXJndW1lbnQgPSBkaXJlY3RpdmVBcmd1bWVudHMhWzBdO1xuICAgICAgaW52YXJpYW50KFxuICAgICAgICBpZkFyZ3VtZW50Lm5hbWUgJiYgaWZBcmd1bWVudC5uYW1lLnZhbHVlID09PSAnaWYnLFxuICAgICAgICBgSW52YWxpZCBhcmd1bWVudCBmb3IgdGhlIEAke2RpcmVjdGl2ZU5hbWV9IGRpcmVjdGl2ZS5gLFxuICAgICAgKTtcblxuICAgICAgY29uc3QgaWZWYWx1ZTogVmFsdWVOb2RlID0gaWZBcmd1bWVudC52YWx1ZTtcblxuICAgICAgLy8gbWVhbnMgaXQgaGFzIHRvIGJlIGEgdmFyaWFibGUgdmFsdWUgaWYgdGhpcyBpcyBhIHZhbGlkIEBza2lwIG9yIEBpbmNsdWRlIGRpcmVjdGl2ZVxuICAgICAgaW52YXJpYW50KFxuICAgICAgICBpZlZhbHVlICYmXG4gICAgICAgICAgKGlmVmFsdWUua2luZCA9PT0gJ1ZhcmlhYmxlJyB8fCBpZlZhbHVlLmtpbmQgPT09ICdCb29sZWFuVmFsdWUnKSxcbiAgICAgICAgYEFyZ3VtZW50IGZvciB0aGUgQCR7ZGlyZWN0aXZlTmFtZX0gZGlyZWN0aXZlIG11c3QgYmUgYSB2YXJpYWJsZSBvciBhIGJvb2xlYW4gdmFsdWUuYCxcbiAgICAgICk7XG5cbiAgICAgIHJlc3VsdC5wdXNoKHsgZGlyZWN0aXZlLCBpZkFyZ3VtZW50IH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuIiwgImltcG9ydCB7XG4gIERvY3VtZW50Tm9kZSxcbiAgRnJhZ21lbnREZWZpbml0aW9uTm9kZSxcbiAgSW5saW5lRnJhZ21lbnROb2RlLFxuICBTZWxlY3Rpb25Ob2RlXG59IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgaW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbi8qKlxuICogUmV0dXJucyBhIHF1ZXJ5IGRvY3VtZW50IHdoaWNoIGFkZHMgYSBzaW5nbGUgcXVlcnkgb3BlcmF0aW9uIHRoYXQgb25seVxuICogc3ByZWFkcyB0aGUgdGFyZ2V0IGZyYWdtZW50IGluc2lkZSBvZiBpdC5cbiAqXG4gKiBTbyBmb3IgZXhhbXBsZSBhIGRvY3VtZW50IG9mOlxuICpcbiAqIGBgYGdyYXBocWxcbiAqIGZyYWdtZW50IGZvbyBvbiBGb28geyBhIGIgYyB9XG4gKiBgYGBcbiAqXG4gKiBUdXJucyBpbnRvOlxuICpcbiAqIGBgYGdyYXBocWxcbiAqIHsgLi4uZm9vIH1cbiAqXG4gKiBmcmFnbWVudCBmb28gb24gRm9vIHsgYSBiIGMgfVxuICogYGBgXG4gKlxuICogVGhlIHRhcmdldCBmcmFnbWVudCB3aWxsIGVpdGhlciBiZSB0aGUgb25seSBmcmFnbWVudCBpbiB0aGUgZG9jdW1lbnQsIG9yIGFcbiAqIGZyYWdtZW50IHNwZWNpZmllZCBieSB0aGUgcHJvdmlkZWQgYGZyYWdtZW50TmFtZWAuIElmIHRoZXJlIGlzIG1vcmUgdGhhbiBvbmVcbiAqIGZyYWdtZW50LCBidXQgYSBgZnJhZ21lbnROYW1lYCB3YXMgbm90IGRlZmluZWQgdGhlbiBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50UXVlcnlEb2N1bWVudChcbiAgZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSxcbiAgZnJhZ21lbnROYW1lPzogc3RyaW5nLFxuKTogRG9jdW1lbnROb2RlIHtcbiAgbGV0IGFjdHVhbEZyYWdtZW50TmFtZSA9IGZyYWdtZW50TmFtZTtcblxuICAvLyBCdWlsZCBhbiBhcnJheSBvZiBhbGwgb3VyIGZyYWdtZW50IGRlZmluaXRpb25zIHRoYXQgd2lsbCBiZSB1c2VkIGZvclxuICAvLyB2YWxpZGF0aW9ucy4gV2UgYWxzbyBkbyBzb21lIHZhbGlkYXRpb25zIG9uIHRoZSBvdGhlciBkZWZpbml0aW9ucyBpbiB0aGVcbiAgLy8gZG9jdW1lbnQgd2hpbGUgYnVpbGRpbmcgdGhpcyBsaXN0LlxuICBjb25zdCBmcmFnbWVudHM6IEFycmF5PEZyYWdtZW50RGVmaW5pdGlvbk5vZGU+ID0gW107XG4gIGRvY3VtZW50LmRlZmluaXRpb25zLmZvckVhY2goZGVmaW5pdGlvbiA9PiB7XG4gICAgLy8gVGhyb3cgYW4gZXJyb3IgaWYgd2UgZW5jb3VudGVyIGFuIG9wZXJhdGlvbiBkZWZpbml0aW9uIGJlY2F1c2Ugd2Ugd2lsbFxuICAgIC8vIGRlZmluZSBvdXIgb3duIG9wZXJhdGlvbiBkZWZpbml0aW9uIGxhdGVyIG9uLlxuICAgIGlmIChkZWZpbml0aW9uLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKFxuICAgICAgICBgRm91bmQgYSAke2RlZmluaXRpb24ub3BlcmF0aW9ufSBvcGVyYXRpb24ke1xuICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA/IGAgbmFtZWQgJyR7ZGVmaW5pdGlvbi5uYW1lLnZhbHVlfSdgIDogJydcbiAgICAgICAgfS4gYCArXG4gICAgICAgICAgJ05vIG9wZXJhdGlvbnMgYXJlIGFsbG93ZWQgd2hlbiB1c2luZyBhIGZyYWdtZW50IGFzIGEgcXVlcnkuIE9ubHkgZnJhZ21lbnRzIGFyZSBhbGxvd2VkLicsXG4gICAgICApO1xuICAgIH1cbiAgICAvLyBBZGQgb3VyIGRlZmluaXRpb24gdG8gdGhlIGZyYWdtZW50cyBhcnJheSBpZiBpdCBpcyBhIGZyYWdtZW50XG4gICAgLy8gZGVmaW5pdGlvbi5cbiAgICBpZiAoZGVmaW5pdGlvbi5raW5kID09PSAnRnJhZ21lbnREZWZpbml0aW9uJykge1xuICAgICAgZnJhZ21lbnRzLnB1c2goZGVmaW5pdGlvbik7XG4gICAgfVxuICB9KTtcblxuICAvLyBJZiB0aGUgdXNlciBkaWQgbm90IGdpdmUgdXMgYSBmcmFnbWVudCBuYW1lIHRoZW4gbGV0IHVzIHRyeSB0byBnZXQgYVxuICAvLyBuYW1lIGZyb20gYSBzaW5nbGUgZnJhZ21lbnQgaW4gdGhlIGRlZmluaXRpb24uXG4gIGlmICh0eXBlb2YgYWN0dWFsRnJhZ21lbnROYW1lID09PSAndW5kZWZpbmVkJykge1xuICAgIGludmFyaWFudChcbiAgICAgIGZyYWdtZW50cy5sZW5ndGggPT09IDEsXG4gICAgICBgRm91bmQgJHtcbiAgICAgICAgZnJhZ21lbnRzLmxlbmd0aFxuICAgICAgfSBmcmFnbWVudHMuIFxcYGZyYWdtZW50TmFtZVxcYCBtdXN0IGJlIHByb3ZpZGVkIHdoZW4gdGhlcmUgaXMgbm90IGV4YWN0bHkgMSBmcmFnbWVudC5gLFxuICAgICk7XG4gICAgYWN0dWFsRnJhZ21lbnROYW1lID0gZnJhZ21lbnRzWzBdLm5hbWUudmFsdWU7XG4gIH1cblxuICAvLyBHZW5lcmF0ZSBhIHF1ZXJ5IGRvY3VtZW50IHdpdGggYW4gb3BlcmF0aW9uIHRoYXQgc2ltcGx5IHNwcmVhZHMgdGhlXG4gIC8vIGZyYWdtZW50IGluc2lkZSBvZiBpdC5cbiAgY29uc3QgcXVlcnk6IERvY3VtZW50Tm9kZSA9IHtcbiAgICAuLi5kb2N1bWVudCxcbiAgICBkZWZpbml0aW9uczogW1xuICAgICAge1xuICAgICAgICBraW5kOiAnT3BlcmF0aW9uRGVmaW5pdGlvbicsXG4gICAgICAgIG9wZXJhdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgc2VsZWN0aW9uU2V0OiB7XG4gICAgICAgICAga2luZDogJ1NlbGVjdGlvblNldCcsXG4gICAgICAgICAgc2VsZWN0aW9uczogW1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBraW5kOiAnRnJhZ21lbnRTcHJlYWQnLFxuICAgICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgICAga2luZDogJ05hbWUnLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBhY3R1YWxGcmFnbWVudE5hbWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgLi4uZG9jdW1lbnQuZGVmaW5pdGlvbnMsXG4gICAgXSxcbiAgfTtcblxuICByZXR1cm4gcXVlcnk7XG59XG5cbi8qKlxuICogVGhpcyBpcyBhbiBpbnRlcmZhY2UgdGhhdCBkZXNjcmliZXMgYSBtYXAgZnJvbSBmcmFnbWVudCBuYW1lcyB0byBmcmFnbWVudCBkZWZpbml0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGcmFnbWVudE1hcCB7XG4gIFtmcmFnbWVudE5hbWU6IHN0cmluZ106IEZyYWdtZW50RGVmaW5pdGlvbk5vZGU7XG59XG5cbi8vIFV0aWxpdHkgZnVuY3Rpb24gdGhhdCB0YWtlcyBhIGxpc3Qgb2YgZnJhZ21lbnQgZGVmaW5pdGlvbnMgYW5kIG1ha2VzIGEgaGFzaCBvdXQgb2YgdGhlbVxuLy8gdGhhdCBtYXBzIHRoZSBuYW1lIG9mIHRoZSBmcmFnbWVudCB0byB0aGUgZnJhZ21lbnQgZGVmaW5pdGlvbi5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVGcmFnbWVudE1hcChcbiAgZnJhZ21lbnRzOiBGcmFnbWVudERlZmluaXRpb25Ob2RlW10gPSBbXSxcbik6IEZyYWdtZW50TWFwIHtcbiAgY29uc3Qgc3ltVGFibGU6IEZyYWdtZW50TWFwID0ge307XG4gIGZyYWdtZW50cy5mb3JFYWNoKGZyYWdtZW50ID0+IHtcbiAgICBzeW1UYWJsZVtmcmFnbWVudC5uYW1lLnZhbHVlXSA9IGZyYWdtZW50O1xuICB9KTtcbiAgcmV0dXJuIHN5bVRhYmxlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uKFxuICBzZWxlY3Rpb246IFNlbGVjdGlvbk5vZGUsXG4gIGZyYWdtZW50TWFwPzogRnJhZ21lbnRNYXAsXG4pOiBJbmxpbmVGcmFnbWVudE5vZGUgfCBGcmFnbWVudERlZmluaXRpb25Ob2RlIHwgbnVsbCB7XG4gIHN3aXRjaCAoc2VsZWN0aW9uLmtpbmQpIHtcbiAgICBjYXNlICdJbmxpbmVGcmFnbWVudCc6XG4gICAgICByZXR1cm4gc2VsZWN0aW9uO1xuICAgIGNhc2UgJ0ZyYWdtZW50U3ByZWFkJzoge1xuICAgICAgY29uc3QgZnJhZ21lbnQgPSBmcmFnbWVudE1hcCAmJiBmcmFnbWVudE1hcFtzZWxlY3Rpb24ubmFtZS52YWx1ZV07XG4gICAgICBpbnZhcmlhbnQoZnJhZ21lbnQsIGBObyBmcmFnbWVudCBuYW1lZCAke3NlbGVjdGlvbi5uYW1lLnZhbHVlfS5gKTtcbiAgICAgIHJldHVybiBmcmFnbWVudCE7XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuIiwgImltcG9ydCB7XG4gIERpcmVjdGl2ZU5vZGUsXG4gIEZpZWxkTm9kZSxcbiAgSW50VmFsdWVOb2RlLFxuICBGbG9hdFZhbHVlTm9kZSxcbiAgU3RyaW5nVmFsdWVOb2RlLFxuICBCb29sZWFuVmFsdWVOb2RlLFxuICBPYmplY3RWYWx1ZU5vZGUsXG4gIExpc3RWYWx1ZU5vZGUsXG4gIEVudW1WYWx1ZU5vZGUsXG4gIE51bGxWYWx1ZU5vZGUsXG4gIFZhcmlhYmxlTm9kZSxcbiAgSW5saW5lRnJhZ21lbnROb2RlLFxuICBWYWx1ZU5vZGUsXG4gIFNlbGVjdGlvbk5vZGUsXG4gIE5hbWVOb2RlLFxuICBTZWxlY3Rpb25TZXROb2RlLFxufSBmcm9tICdncmFwaHFsJztcblxuaW1wb3J0IHN0cmluZ2lmeSBmcm9tICdmYXN0LWpzb24tc3RhYmxlLXN0cmluZ2lmeSc7XG5pbXBvcnQgeyBJbnZhcmlhbnRFcnJvciB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5pbXBvcnQgeyBGcmFnbWVudE1hcCwgZ2V0RnJhZ21lbnRGcm9tU2VsZWN0aW9uIH0gZnJvbSAnLi9mcmFnbWVudHMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIFJlZmVyZW5jZSB7XG4gIHJlYWRvbmx5IF9fcmVmOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYWtlUmVmZXJlbmNlKGlkOiBzdHJpbmcpOiBSZWZlcmVuY2Uge1xuICByZXR1cm4geyBfX3JlZjogU3RyaW5nKGlkKSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNSZWZlcmVuY2Uob2JqOiBhbnkpOiBvYmogaXMgUmVmZXJlbmNlIHtcbiAgcmV0dXJuIEJvb2xlYW4ob2JqICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmIHR5cGVvZiBvYmouX19yZWYgPT09ICdzdHJpbmcnKTtcbn1cblxuZXhwb3J0IHR5cGUgU3RvcmVWYWx1ZSA9XG4gIHwgbnVtYmVyXG4gIHwgc3RyaW5nXG4gIHwgc3RyaW5nW11cbiAgfCBSZWZlcmVuY2VcbiAgfCBSZWZlcmVuY2VbXVxuICB8IG51bGxcbiAgfCB1bmRlZmluZWRcbiAgfCB2b2lkXG4gIHwgT2JqZWN0O1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlT2JqZWN0IHtcbiAgX190eXBlbmFtZT86IHN0cmluZztcbiAgW3N0b3JlRmllbGROYW1lOiBzdHJpbmddOiBTdG9yZVZhbHVlO1xufVxuXG5mdW5jdGlvbiBpc1N0cmluZ1ZhbHVlKHZhbHVlOiBWYWx1ZU5vZGUpOiB2YWx1ZSBpcyBTdHJpbmdWYWx1ZU5vZGUge1xuICByZXR1cm4gdmFsdWUua2luZCA9PT0gJ1N0cmluZ1ZhbHVlJztcbn1cblxuZnVuY3Rpb24gaXNCb29sZWFuVmFsdWUodmFsdWU6IFZhbHVlTm9kZSk6IHZhbHVlIGlzIEJvb2xlYW5WYWx1ZU5vZGUge1xuICByZXR1cm4gdmFsdWUua2luZCA9PT0gJ0Jvb2xlYW5WYWx1ZSc7XG59XG5cbmZ1bmN0aW9uIGlzSW50VmFsdWUodmFsdWU6IFZhbHVlTm9kZSk6IHZhbHVlIGlzIEludFZhbHVlTm9kZSB7XG4gIHJldHVybiB2YWx1ZS5raW5kID09PSAnSW50VmFsdWUnO1xufVxuXG5mdW5jdGlvbiBpc0Zsb2F0VmFsdWUodmFsdWU6IFZhbHVlTm9kZSk6IHZhbHVlIGlzIEZsb2F0VmFsdWVOb2RlIHtcbiAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdGbG9hdFZhbHVlJztcbn1cblxuZnVuY3Rpb24gaXNWYXJpYWJsZSh2YWx1ZTogVmFsdWVOb2RlKTogdmFsdWUgaXMgVmFyaWFibGVOb2RlIHtcbiAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdWYXJpYWJsZSc7XG59XG5cbmZ1bmN0aW9uIGlzT2JqZWN0VmFsdWUodmFsdWU6IFZhbHVlTm9kZSk6IHZhbHVlIGlzIE9iamVjdFZhbHVlTm9kZSB7XG4gIHJldHVybiB2YWx1ZS5raW5kID09PSAnT2JqZWN0VmFsdWUnO1xufVxuXG5mdW5jdGlvbiBpc0xpc3RWYWx1ZSh2YWx1ZTogVmFsdWVOb2RlKTogdmFsdWUgaXMgTGlzdFZhbHVlTm9kZSB7XG4gIHJldHVybiB2YWx1ZS5raW5kID09PSAnTGlzdFZhbHVlJztcbn1cblxuZnVuY3Rpb24gaXNFbnVtVmFsdWUodmFsdWU6IFZhbHVlTm9kZSk6IHZhbHVlIGlzIEVudW1WYWx1ZU5vZGUge1xuICByZXR1cm4gdmFsdWUua2luZCA9PT0gJ0VudW1WYWx1ZSc7XG59XG5cbmZ1bmN0aW9uIGlzTnVsbFZhbHVlKHZhbHVlOiBWYWx1ZU5vZGUpOiB2YWx1ZSBpcyBOdWxsVmFsdWVOb2RlIHtcbiAgcmV0dXJuIHZhbHVlLmtpbmQgPT09ICdOdWxsVmFsdWUnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKFxuICBhcmdPYmo6IGFueSxcbiAgbmFtZTogTmFtZU5vZGUsXG4gIHZhbHVlOiBWYWx1ZU5vZGUsXG4gIHZhcmlhYmxlcz86IE9iamVjdCxcbikge1xuICBpZiAoaXNJbnRWYWx1ZSh2YWx1ZSkgfHwgaXNGbG9hdFZhbHVlKHZhbHVlKSkge1xuICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IE51bWJlcih2YWx1ZS52YWx1ZSk7XG4gIH0gZWxzZSBpZiAoaXNCb29sZWFuVmFsdWUodmFsdWUpIHx8IGlzU3RyaW5nVmFsdWUodmFsdWUpKSB7XG4gICAgYXJnT2JqW25hbWUudmFsdWVdID0gdmFsdWUudmFsdWU7XG4gIH0gZWxzZSBpZiAoaXNPYmplY3RWYWx1ZSh2YWx1ZSkpIHtcbiAgICBjb25zdCBuZXN0ZWRBcmdPYmogPSB7fTtcbiAgICB2YWx1ZS5maWVsZHMubWFwKG9iaiA9PlxuICAgICAgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKG5lc3RlZEFyZ09iaiwgb2JqLm5hbWUsIG9iai52YWx1ZSwgdmFyaWFibGVzKSxcbiAgICApO1xuICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IG5lc3RlZEFyZ09iajtcbiAgfSBlbHNlIGlmIChpc1ZhcmlhYmxlKHZhbHVlKSkge1xuICAgIGNvbnN0IHZhcmlhYmxlVmFsdWUgPSAodmFyaWFibGVzIHx8ICh7fSBhcyBhbnkpKVt2YWx1ZS5uYW1lLnZhbHVlXTtcbiAgICBhcmdPYmpbbmFtZS52YWx1ZV0gPSB2YXJpYWJsZVZhbHVlO1xuICB9IGVsc2UgaWYgKGlzTGlzdFZhbHVlKHZhbHVlKSkge1xuICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IHZhbHVlLnZhbHVlcy5tYXAobGlzdFZhbHVlID0+IHtcbiAgICAgIGNvbnN0IG5lc3RlZEFyZ0FycmF5T2JqID0ge307XG4gICAgICB2YWx1ZVRvT2JqZWN0UmVwcmVzZW50YXRpb24oXG4gICAgICAgIG5lc3RlZEFyZ0FycmF5T2JqLFxuICAgICAgICBuYW1lLFxuICAgICAgICBsaXN0VmFsdWUsXG4gICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICk7XG4gICAgICByZXR1cm4gKG5lc3RlZEFyZ0FycmF5T2JqIGFzIGFueSlbbmFtZS52YWx1ZV07XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAoaXNFbnVtVmFsdWUodmFsdWUpKSB7XG4gICAgYXJnT2JqW25hbWUudmFsdWVdID0gKHZhbHVlIGFzIEVudW1WYWx1ZU5vZGUpLnZhbHVlO1xuICB9IGVsc2UgaWYgKGlzTnVsbFZhbHVlKHZhbHVlKSkge1xuICAgIGFyZ09ialtuYW1lLnZhbHVlXSA9IG51bGw7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKFxuICAgICAgYFRoZSBpbmxpbmUgYXJndW1lbnQgXCIke25hbWUudmFsdWV9XCIgb2Yga2luZCBcIiR7KHZhbHVlIGFzIGFueSkua2luZH1cImAgK1xuICAgICAgICAnaXMgbm90IHN1cHBvcnRlZC4gVXNlIHZhcmlhYmxlcyBpbnN0ZWFkIG9mIGlubGluZSBhcmd1bWVudHMgdG8gJyArXG4gICAgICAgICdvdmVyY29tZSB0aGlzIGxpbWl0YXRpb24uJyxcbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzdG9yZUtleU5hbWVGcm9tRmllbGQoXG4gIGZpZWxkOiBGaWVsZE5vZGUsXG4gIHZhcmlhYmxlcz86IE9iamVjdCxcbik6IHN0cmluZyB7XG4gIGxldCBkaXJlY3RpdmVzT2JqOiBhbnkgPSBudWxsO1xuICBpZiAoZmllbGQuZGlyZWN0aXZlcykge1xuICAgIGRpcmVjdGl2ZXNPYmogPSB7fTtcbiAgICBmaWVsZC5kaXJlY3RpdmVzLmZvckVhY2goZGlyZWN0aXZlID0+IHtcbiAgICAgIGRpcmVjdGl2ZXNPYmpbZGlyZWN0aXZlLm5hbWUudmFsdWVdID0ge307XG5cbiAgICAgIGlmIChkaXJlY3RpdmUuYXJndW1lbnRzKSB7XG4gICAgICAgIGRpcmVjdGl2ZS5hcmd1bWVudHMuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSB9KSA9PlxuICAgICAgICAgIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihcbiAgICAgICAgICAgIGRpcmVjdGl2ZXNPYmpbZGlyZWN0aXZlLm5hbWUudmFsdWVdLFxuICAgICAgICAgICAgbmFtZSxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICAgICksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICBsZXQgYXJnT2JqOiBhbnkgPSBudWxsO1xuICBpZiAoZmllbGQuYXJndW1lbnRzICYmIGZpZWxkLmFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICBhcmdPYmogPSB7fTtcbiAgICBmaWVsZC5hcmd1bWVudHMuZm9yRWFjaCgoeyBuYW1lLCB2YWx1ZSB9KSA9PlxuICAgICAgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKGFyZ09iaiwgbmFtZSwgdmFsdWUsIHZhcmlhYmxlcyksXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiBnZXRTdG9yZUtleU5hbWUoZmllbGQubmFtZS52YWx1ZSwgYXJnT2JqLCBkaXJlY3RpdmVzT2JqKTtcbn1cblxuZXhwb3J0IHR5cGUgRGlyZWN0aXZlcyA9IHtcbiAgW2RpcmVjdGl2ZU5hbWU6IHN0cmluZ106IHtcbiAgICBbYXJnTmFtZTogc3RyaW5nXTogYW55O1xuICB9O1xufTtcblxuY29uc3QgS05PV05fRElSRUNUSVZFUzogc3RyaW5nW10gPSBbXG4gICdjb25uZWN0aW9uJyxcbiAgJ2luY2x1ZGUnLFxuICAnc2tpcCcsXG4gICdjbGllbnQnLFxuICAncmVzdCcsXG4gICdleHBvcnQnLFxuXTtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN0b3JlS2V5TmFtZShcbiAgZmllbGROYW1lOiBzdHJpbmcsXG4gIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgbnVsbCxcbiAgZGlyZWN0aXZlcz86IERpcmVjdGl2ZXMsXG4pOiBzdHJpbmcge1xuICBpZiAoXG4gICAgYXJncyAmJlxuICAgIGRpcmVjdGl2ZXMgJiZcbiAgICBkaXJlY3RpdmVzWydjb25uZWN0aW9uJ10gJiZcbiAgICBkaXJlY3RpdmVzWydjb25uZWN0aW9uJ11bJ2tleSddXG4gICkge1xuICAgIGlmIChcbiAgICAgIGRpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsnZmlsdGVyJ10gJiZcbiAgICAgIChkaXJlY3RpdmVzWydjb25uZWN0aW9uJ11bJ2ZpbHRlciddIGFzIHN0cmluZ1tdKS5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICBjb25zdCBmaWx0ZXJLZXlzID0gZGlyZWN0aXZlc1snY29ubmVjdGlvbiddWydmaWx0ZXInXVxuICAgICAgICA/IChkaXJlY3RpdmVzWydjb25uZWN0aW9uJ11bJ2ZpbHRlciddIGFzIHN0cmluZ1tdKVxuICAgICAgICA6IFtdO1xuICAgICAgZmlsdGVyS2V5cy5zb3J0KCk7XG5cbiAgICAgIGNvbnN0IGZpbHRlcmVkQXJncyA9IHt9IGFzIHsgW2tleTogc3RyaW5nXTogYW55IH07XG4gICAgICBmaWx0ZXJLZXlzLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgZmlsdGVyZWRBcmdzW2tleV0gPSBhcmdzW2tleV07XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGAke2RpcmVjdGl2ZXNbJ2Nvbm5lY3Rpb24nXVsna2V5J119KCR7SlNPTi5zdHJpbmdpZnkoXG4gICAgICAgIGZpbHRlcmVkQXJncyxcbiAgICAgICl9KWA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBkaXJlY3RpdmVzWydjb25uZWN0aW9uJ11bJ2tleSddO1xuICAgIH1cbiAgfVxuXG4gIGxldCBjb21wbGV0ZUZpZWxkTmFtZTogc3RyaW5nID0gZmllbGROYW1lO1xuXG4gIGlmIChhcmdzKSB7XG4gICAgLy8gV2UgY2FuJ3QgdXNlIGBKU09OLnN0cmluZ2lmeWAgaGVyZSBzaW5jZSBpdCdzIG5vbi1kZXRlcm1pbmlzdGljLFxuICAgIC8vIGFuZCBjYW4gbGVhZCB0byBkaWZmZXJlbnQgc3RvcmUga2V5IG5hbWVzIGJlaW5nIGNyZWF0ZWQgZXZlbiB0aG91Z2hcbiAgICAvLyB0aGUgYGFyZ3NgIG9iamVjdCB1c2VkIGR1cmluZyBjcmVhdGlvbiBoYXMgdGhlIHNhbWUgcHJvcGVydGllcy92YWx1ZXMuXG4gICAgY29uc3Qgc3RyaW5naWZpZWRBcmdzOiBzdHJpbmcgPSBzdHJpbmdpZnkoYXJncyk7XG4gICAgY29tcGxldGVGaWVsZE5hbWUgKz0gYCgke3N0cmluZ2lmaWVkQXJnc30pYDtcbiAgfVxuXG4gIGlmIChkaXJlY3RpdmVzKSB7XG4gICAgT2JqZWN0LmtleXMoZGlyZWN0aXZlcykuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgaWYgKEtOT1dOX0RJUkVDVElWRVMuaW5kZXhPZihrZXkpICE9PSAtMSkgcmV0dXJuO1xuICAgICAgaWYgKGRpcmVjdGl2ZXNba2V5XSAmJiBPYmplY3Qua2V5cyhkaXJlY3RpdmVzW2tleV0pLmxlbmd0aCkge1xuICAgICAgICBjb21wbGV0ZUZpZWxkTmFtZSArPSBgQCR7a2V5fSgke0pTT04uc3RyaW5naWZ5KGRpcmVjdGl2ZXNba2V5XSl9KWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wbGV0ZUZpZWxkTmFtZSArPSBgQCR7a2V5fWA7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gY29tcGxldGVGaWVsZE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQoXG4gIGZpZWxkOiBGaWVsZE5vZGUgfCBEaXJlY3RpdmVOb2RlLFxuICB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuKTogT2JqZWN0IHwgbnVsbCB7XG4gIGlmIChmaWVsZC5hcmd1bWVudHMgJiYgZmllbGQuYXJndW1lbnRzLmxlbmd0aCkge1xuICAgIGNvbnN0IGFyZ09iajogT2JqZWN0ID0ge307XG4gICAgZmllbGQuYXJndW1lbnRzLmZvckVhY2goKHsgbmFtZSwgdmFsdWUgfSkgPT5cbiAgICAgIHZhbHVlVG9PYmplY3RSZXByZXNlbnRhdGlvbihhcmdPYmosIG5hbWUsIHZhbHVlLCB2YXJpYWJsZXMpLFxuICAgICk7XG4gICAgcmV0dXJuIGFyZ09iajtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc3VsdEtleU5hbWVGcm9tRmllbGQoZmllbGQ6IEZpZWxkTm9kZSk6IHN0cmluZyB7XG4gIHJldHVybiBmaWVsZC5hbGlhcyA/IGZpZWxkLmFsaWFzLnZhbHVlIDogZmllbGQubmFtZS52YWx1ZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFR5cGVuYW1lRnJvbVJlc3VsdChcbiAgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGUsXG4gIGZyYWdtZW50TWFwPzogRnJhZ21lbnRNYXAsXG4pOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBpZiAodHlwZW9mIHJlc3VsdC5fX3R5cGVuYW1lID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiByZXN1bHQuX190eXBlbmFtZTtcbiAgfVxuXG4gIGZvciAoY29uc3Qgc2VsZWN0aW9uIG9mIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zKSB7XG4gICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgaWYgKHNlbGVjdGlvbi5uYW1lLnZhbHVlID09PSAnX190eXBlbmFtZScpIHtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFtyZXN1bHRLZXlOYW1lRnJvbUZpZWxkKHNlbGVjdGlvbildO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB0eXBlbmFtZSA9IGdldFR5cGVuYW1lRnJvbVJlc3VsdChcbiAgICAgICAgcmVzdWx0LFxuICAgICAgICBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24oc2VsZWN0aW9uLCBmcmFnbWVudE1hcCkhLnNlbGVjdGlvblNldCxcbiAgICAgICAgZnJhZ21lbnRNYXAsXG4gICAgICApO1xuICAgICAgaWYgKHR5cGVvZiB0eXBlbmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIHR5cGVuYW1lO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNGaWVsZChzZWxlY3Rpb246IFNlbGVjdGlvbk5vZGUpOiBzZWxlY3Rpb24gaXMgRmllbGROb2RlIHtcbiAgcmV0dXJuIHNlbGVjdGlvbi5raW5kID09PSAnRmllbGQnO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNJbmxpbmVGcmFnbWVudChcbiAgc2VsZWN0aW9uOiBTZWxlY3Rpb25Ob2RlLFxuKTogc2VsZWN0aW9uIGlzIElubGluZUZyYWdtZW50Tm9kZSB7XG4gIHJldHVybiBzZWxlY3Rpb24ua2luZCA9PT0gJ0lubGluZUZyYWdtZW50Jztcbn1cblxuZXhwb3J0IHR5cGUgVmFyaWFibGVWYWx1ZSA9IChub2RlOiBWYXJpYWJsZU5vZGUpID0+IGFueTtcbiIsICJpbXBvcnQge1xuICBEb2N1bWVudE5vZGUsXG4gIE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlLFxuICBGcmFnbWVudERlZmluaXRpb25Ob2RlLFxuICBWYWx1ZU5vZGUsXG59IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuaW1wb3J0IHsgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uIH0gZnJvbSAnLi9zdG9yZVV0aWxzJztcblxuLy8gQ2hlY2tzIHRoZSBkb2N1bWVudCBmb3IgZXJyb3JzIGFuZCB0aHJvd3MgYW4gZXhjZXB0aW9uIGlmIHRoZXJlIGlzIGFuIGVycm9yLlxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrRG9jdW1lbnQoZG9jOiBEb2N1bWVudE5vZGUpIHtcbiAgaW52YXJpYW50KFxuICAgIGRvYyAmJiBkb2Mua2luZCA9PT0gJ0RvY3VtZW50JyxcbiAgICBgRXhwZWN0aW5nIGEgcGFyc2VkIEdyYXBoUUwgZG9jdW1lbnQuIFBlcmhhcHMgeW91IG5lZWQgdG8gd3JhcCB0aGUgcXVlcnkgXFxcbnN0cmluZyBpbiBhIFwiZ3FsXCIgdGFnPyBodHRwOi8vZG9jcy5hcG9sbG9zdGFjay5jb20vYXBvbGxvLWNsaWVudC9jb3JlLmh0bWwjZ3FsYCxcbiAgKTtcblxuICBjb25zdCBvcGVyYXRpb25zID0gZG9jLmRlZmluaXRpb25zXG4gICAgLmZpbHRlcihkID0+IGQua2luZCAhPT0gJ0ZyYWdtZW50RGVmaW5pdGlvbicpXG4gICAgLm1hcChkZWZpbml0aW9uID0+IHtcbiAgICAgIGlmIChkZWZpbml0aW9uLmtpbmQgIT09ICdPcGVyYXRpb25EZWZpbml0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgICAgICAgYFNjaGVtYSB0eXBlIGRlZmluaXRpb25zIG5vdCBhbGxvd2VkIGluIHF1ZXJpZXMuIEZvdW5kOiBcIiR7XG4gICAgICAgICAgICBkZWZpbml0aW9uLmtpbmRcbiAgICAgICAgICB9XCJgLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgfSk7XG5cbiAgaW52YXJpYW50KFxuICAgIG9wZXJhdGlvbnMubGVuZ3RoIDw9IDEsXG4gICAgYEFtYmlndW91cyBHcmFwaFFMIGRvY3VtZW50OiBjb250YWlucyAke29wZXJhdGlvbnMubGVuZ3RofSBvcGVyYXRpb25zYCxcbiAgKTtcblxuICByZXR1cm4gZG9jO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihcbiAgZG9jOiBEb2N1bWVudE5vZGUsXG4pOiBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSB8IHVuZGVmaW5lZCB7XG4gIGNoZWNrRG9jdW1lbnQoZG9jKTtcbiAgcmV0dXJuIGRvYy5kZWZpbml0aW9ucy5maWx0ZXIoXG4gICAgZGVmaW5pdGlvbiA9PiBkZWZpbml0aW9uLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJyxcbiAgKVswXSBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldE9wZXJhdGlvbk5hbWUoZG9jOiBEb2N1bWVudE5vZGUpOiBzdHJpbmcgfCBudWxsIHtcbiAgcmV0dXJuIChcbiAgICBkb2MuZGVmaW5pdGlvbnNcbiAgICAgIC5maWx0ZXIoXG4gICAgICAgIGRlZmluaXRpb24gPT5cbiAgICAgICAgICBkZWZpbml0aW9uLmtpbmQgPT09ICdPcGVyYXRpb25EZWZpbml0aW9uJyAmJiBkZWZpbml0aW9uLm5hbWUsXG4gICAgICApXG4gICAgICAubWFwKCh4OiBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSkgPT4geCEubmFtZSEudmFsdWUpWzBdIHx8IG51bGxcbiAgKTtcbn1cblxuLy8gUmV0dXJucyB0aGUgRnJhZ21lbnREZWZpbml0aW9ucyBmcm9tIGEgcGFydGljdWxhciBkb2N1bWVudCBhcyBhbiBhcnJheVxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbnMoXG4gIGRvYzogRG9jdW1lbnROb2RlLFxuKTogRnJhZ21lbnREZWZpbml0aW9uTm9kZVtdIHtcbiAgcmV0dXJuIGRvYy5kZWZpbml0aW9ucy5maWx0ZXIoXG4gICAgZGVmaW5pdGlvbiA9PiBkZWZpbml0aW9uLmtpbmQgPT09ICdGcmFnbWVudERlZmluaXRpb24nLFxuICApIGFzIEZyYWdtZW50RGVmaW5pdGlvbk5vZGVbXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFF1ZXJ5RGVmaW5pdGlvbihkb2M6IERvY3VtZW50Tm9kZSk6IE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlIHtcbiAgY29uc3QgcXVlcnlEZWYgPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvYykgYXMgT3BlcmF0aW9uRGVmaW5pdGlvbk5vZGU7XG5cbiAgaW52YXJpYW50KFxuICAgIHF1ZXJ5RGVmICYmIHF1ZXJ5RGVmLm9wZXJhdGlvbiA9PT0gJ3F1ZXJ5JyxcbiAgICAnTXVzdCBjb250YWluIGEgcXVlcnkgZGVmaW5pdGlvbi4nLFxuICApO1xuXG4gIHJldHVybiBxdWVyeURlZjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEZyYWdtZW50RGVmaW5pdGlvbihcbiAgZG9jOiBEb2N1bWVudE5vZGUsXG4pOiBGcmFnbWVudERlZmluaXRpb25Ob2RlIHtcbiAgaW52YXJpYW50KFxuICAgIGRvYy5raW5kID09PSAnRG9jdW1lbnQnLFxuICAgIGBFeHBlY3RpbmcgYSBwYXJzZWQgR3JhcGhRTCBkb2N1bWVudC4gUGVyaGFwcyB5b3UgbmVlZCB0byB3cmFwIHRoZSBxdWVyeSBcXFxuc3RyaW5nIGluIGEgXCJncWxcIiB0YWc/IGh0dHA6Ly9kb2NzLmFwb2xsb3N0YWNrLmNvbS9hcG9sbG8tY2xpZW50L2NvcmUuaHRtbCNncWxgLFxuICApO1xuXG4gIGludmFyaWFudChcbiAgICBkb2MuZGVmaW5pdGlvbnMubGVuZ3RoIDw9IDEsXG4gICAgJ0ZyYWdtZW50IG11c3QgaGF2ZSBleGFjdGx5IG9uZSBkZWZpbml0aW9uLicsXG4gICk7XG5cbiAgY29uc3QgZnJhZ21lbnREZWYgPSBkb2MuZGVmaW5pdGlvbnNbMF0gYXMgRnJhZ21lbnREZWZpbml0aW9uTm9kZTtcblxuICBpbnZhcmlhbnQoXG4gICAgZnJhZ21lbnREZWYua2luZCA9PT0gJ0ZyYWdtZW50RGVmaW5pdGlvbicsXG4gICAgJ011c3QgYmUgYSBmcmFnbWVudCBkZWZpbml0aW9uLicsXG4gICk7XG5cbiAgcmV0dXJuIGZyYWdtZW50RGVmIGFzIEZyYWdtZW50RGVmaW5pdGlvbk5vZGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgZmlyc3Qgb3BlcmF0aW9uIGRlZmluaXRpb24gZm91bmQgaW4gdGhpcyBkb2N1bWVudC5cbiAqIElmIG5vIG9wZXJhdGlvbiBkZWZpbml0aW9uIGlzIGZvdW5kLCB0aGUgZmlyc3QgZnJhZ21lbnQgZGVmaW5pdGlvbiB3aWxsIGJlIHJldHVybmVkLlxuICogSWYgbm8gZGVmaW5pdGlvbnMgYXJlIGZvdW5kLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldE1haW5EZWZpbml0aW9uKFxuICBxdWVyeURvYzogRG9jdW1lbnROb2RlLFxuKTogT3BlcmF0aW9uRGVmaW5pdGlvbk5vZGUgfCBGcmFnbWVudERlZmluaXRpb25Ob2RlIHtcbiAgY2hlY2tEb2N1bWVudChxdWVyeURvYyk7XG5cbiAgbGV0IGZyYWdtZW50RGVmaW5pdGlvbjtcblxuICBmb3IgKGxldCBkZWZpbml0aW9uIG9mIHF1ZXJ5RG9jLmRlZmluaXRpb25zKSB7XG4gICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nKSB7XG4gICAgICBjb25zdCBvcGVyYXRpb24gPSAoZGVmaW5pdGlvbiBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSkub3BlcmF0aW9uO1xuICAgICAgaWYgKFxuICAgICAgICBvcGVyYXRpb24gPT09ICdxdWVyeScgfHxcbiAgICAgICAgb3BlcmF0aW9uID09PSAnbXV0YXRpb24nIHx8XG4gICAgICAgIG9wZXJhdGlvbiA9PT0gJ3N1YnNjcmlwdGlvbidcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbiBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGRlZmluaXRpb24ua2luZCA9PT0gJ0ZyYWdtZW50RGVmaW5pdGlvbicgJiYgIWZyYWdtZW50RGVmaW5pdGlvbikge1xuICAgICAgLy8gd2UgZG8gdGhpcyBiZWNhdXNlIHdlIHdhbnQgdG8gYWxsb3cgbXVsdGlwbGUgZnJhZ21lbnQgZGVmaW5pdGlvbnNcbiAgICAgIC8vIHRvIHByZWNlZGUgYW4gb3BlcmF0aW9uIGRlZmluaXRpb24uXG4gICAgICBmcmFnbWVudERlZmluaXRpb24gPSBkZWZpbml0aW9uIGFzIEZyYWdtZW50RGVmaW5pdGlvbk5vZGU7XG4gICAgfVxuICB9XG5cbiAgaWYgKGZyYWdtZW50RGVmaW5pdGlvbikge1xuICAgIHJldHVybiBmcmFnbWVudERlZmluaXRpb247XG4gIH1cblxuICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgJ0V4cGVjdGVkIGEgcGFyc2VkIEdyYXBoUUwgcXVlcnkgd2l0aCBhIHF1ZXJ5LCBtdXRhdGlvbiwgc3Vic2NyaXB0aW9uLCBvciBhIGZyYWdtZW50LicsXG4gICk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXREZWZhdWx0VmFsdWVzKFxuICBkZWZpbml0aW9uOiBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSB8IHVuZGVmaW5lZCxcbik6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICBjb25zdCBkZWZhdWx0VmFsdWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgY29uc3QgZGVmcyA9IGRlZmluaXRpb24gJiYgZGVmaW5pdGlvbi52YXJpYWJsZURlZmluaXRpb25zO1xuICBpZiAoZGVmcyAmJiBkZWZzLmxlbmd0aCkge1xuICAgIGRlZnMuZm9yRWFjaChkZWYgPT4ge1xuICAgICAgaWYgKGRlZi5kZWZhdWx0VmFsdWUpIHtcbiAgICAgICAgdmFsdWVUb09iamVjdFJlcHJlc2VudGF0aW9uKFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZXMsXG4gICAgICAgICAgZGVmLnZhcmlhYmxlLm5hbWUsXG4gICAgICAgICAgZGVmLmRlZmF1bHRWYWx1ZSBhcyBWYWx1ZU5vZGUsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGRlZmF1bHRWYWx1ZXM7XG59XG4iLCAiZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckluUGxhY2U8VD4oXG4gIGFycmF5OiBUW10sXG4gIHRlc3Q6IChlbGVtOiBUKSA9PiBib29sZWFuLFxuICBjb250ZXh0PzogYW55LFxuKTogVFtdIHtcbiAgbGV0IHRhcmdldCA9IDA7XG4gIGFycmF5LmZvckVhY2goZnVuY3Rpb24gKGVsZW0sIGkpIHtcbiAgICBpZiAodGVzdC5jYWxsKHRoaXMsIGVsZW0sIGksIGFycmF5KSkge1xuICAgICAgYXJyYXlbdGFyZ2V0KytdID0gZWxlbTtcbiAgICB9XG4gIH0sIGNvbnRleHQpO1xuICBhcnJheS5sZW5ndGggPSB0YXJnZXQ7XG4gIHJldHVybiBhcnJheTtcbn1cbiIsICJpbXBvcnQge1xuICBEb2N1bWVudE5vZGUsXG4gIFNlbGVjdGlvbk5vZGUsXG4gIFNlbGVjdGlvblNldE5vZGUsXG4gIE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlLFxuICBGaWVsZE5vZGUsXG4gIERpcmVjdGl2ZU5vZGUsXG4gIEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gIEFyZ3VtZW50Tm9kZSxcbiAgRnJhZ21lbnRTcHJlYWROb2RlLFxuICBWYXJpYWJsZURlZmluaXRpb25Ob2RlLFxuICBWYXJpYWJsZU5vZGUsXG4gIHZpc2l0LFxufSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbmltcG9ydCB7XG4gIGNoZWNrRG9jdW1lbnQsXG4gIGdldE9wZXJhdGlvbkRlZmluaXRpb24sXG4gIGdldEZyYWdtZW50RGVmaW5pdGlvbixcbiAgZ2V0RnJhZ21lbnREZWZpbml0aW9ucyxcbiAgZ2V0TWFpbkRlZmluaXRpb24sXG59IGZyb20gJy4vZ2V0RnJvbUFTVCc7XG5pbXBvcnQgeyBmaWx0ZXJJblBsYWNlIH0gZnJvbSAnLi4vY29tbW9uL2ZpbHRlckluUGxhY2UnO1xuaW1wb3J0IHsgaXNGaWVsZCwgaXNJbmxpbmVGcmFnbWVudCB9IGZyb20gJy4vc3RvcmVVdGlscyc7XG5pbXBvcnQge1xuICBjcmVhdGVGcmFnbWVudE1hcCxcbiAgRnJhZ21lbnRNYXAsXG59IGZyb20gJy4vZnJhZ21lbnRzJztcblxuZXhwb3J0IHR5cGUgUmVtb3ZlTm9kZUNvbmZpZzxOPiA9IHtcbiAgbmFtZT86IHN0cmluZztcbiAgdGVzdD86IChub2RlOiBOKSA9PiBib29sZWFuO1xuICByZW1vdmU/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgR2V0Tm9kZUNvbmZpZzxOPiA9IHtcbiAgbmFtZT86IHN0cmluZztcbiAgdGVzdD86IChub2RlOiBOKSA9PiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgUmVtb3ZlRGlyZWN0aXZlQ29uZmlnID0gUmVtb3ZlTm9kZUNvbmZpZzxEaXJlY3RpdmVOb2RlPjtcbmV4cG9ydCB0eXBlIEdldERpcmVjdGl2ZUNvbmZpZyA9IEdldE5vZGVDb25maWc8RGlyZWN0aXZlTm9kZT47XG5leHBvcnQgdHlwZSBSZW1vdmVBcmd1bWVudHNDb25maWcgPSBSZW1vdmVOb2RlQ29uZmlnPEFyZ3VtZW50Tm9kZT47XG5leHBvcnQgdHlwZSBHZXRGcmFnbWVudFNwcmVhZENvbmZpZyA9IEdldE5vZGVDb25maWc8RnJhZ21lbnRTcHJlYWROb2RlPjtcbmV4cG9ydCB0eXBlIFJlbW92ZUZyYWdtZW50U3ByZWFkQ29uZmlnID0gUmVtb3ZlTm9kZUNvbmZpZzxGcmFnbWVudFNwcmVhZE5vZGU+O1xuZXhwb3J0IHR5cGUgUmVtb3ZlRnJhZ21lbnREZWZpbml0aW9uQ29uZmlnID0gUmVtb3ZlTm9kZUNvbmZpZzxcbiAgRnJhZ21lbnREZWZpbml0aW9uTm9kZVxuPjtcbmV4cG9ydCB0eXBlIFJlbW92ZVZhcmlhYmxlRGVmaW5pdGlvbkNvbmZpZyA9IFJlbW92ZU5vZGVDb25maWc8XG4gIFZhcmlhYmxlRGVmaW5pdGlvbk5vZGVcbj47XG5cbmNvbnN0IFRZUEVOQU1FX0ZJRUxEOiBGaWVsZE5vZGUgPSB7XG4gIGtpbmQ6ICdGaWVsZCcsXG4gIG5hbWU6IHtcbiAgICBraW5kOiAnTmFtZScsXG4gICAgdmFsdWU6ICdfX3R5cGVuYW1lJyxcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIGlzRW1wdHkoXG4gIG9wOiBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSB8IEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gIGZyYWdtZW50czogRnJhZ21lbnRNYXAsXG4pOiBib29sZWFuIHtcbiAgcmV0dXJuIG9wLnNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmV2ZXJ5KFxuICAgIHNlbGVjdGlvbiA9PlxuICAgICAgc2VsZWN0aW9uLmtpbmQgPT09ICdGcmFnbWVudFNwcmVhZCcgJiZcbiAgICAgIGlzRW1wdHkoZnJhZ21lbnRzW3NlbGVjdGlvbi5uYW1lLnZhbHVlXSwgZnJhZ21lbnRzKSxcbiAgKTtcbn1cblxuZnVuY3Rpb24gbnVsbElmRG9jSXNFbXB0eShkb2M6IERvY3VtZW50Tm9kZSkge1xuICByZXR1cm4gaXNFbXB0eShcbiAgICBnZXRPcGVyYXRpb25EZWZpbml0aW9uKGRvYykgfHwgZ2V0RnJhZ21lbnREZWZpbml0aW9uKGRvYyksXG4gICAgY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhkb2MpKSxcbiAgKVxuICAgID8gbnVsbFxuICAgIDogZG9jO1xufVxuXG5mdW5jdGlvbiBnZXREaXJlY3RpdmVNYXRjaGVyKFxuICBkaXJlY3RpdmVzOiAoUmVtb3ZlRGlyZWN0aXZlQ29uZmlnIHwgR2V0RGlyZWN0aXZlQ29uZmlnKVtdLFxuKSB7XG4gIHJldHVybiBmdW5jdGlvbiBkaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZTogRGlyZWN0aXZlTm9kZSkge1xuICAgIHJldHVybiBkaXJlY3RpdmVzLnNvbWUoXG4gICAgICBkaXIgPT5cbiAgICAgICAgKGRpci5uYW1lICYmIGRpci5uYW1lID09PSBkaXJlY3RpdmUubmFtZS52YWx1ZSkgfHxcbiAgICAgICAgKGRpci50ZXN0ICYmIGRpci50ZXN0KGRpcmVjdGl2ZSkpLFxuICAgICk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVEaXJlY3RpdmVzRnJvbURvY3VtZW50KFxuICBkaXJlY3RpdmVzOiBSZW1vdmVEaXJlY3RpdmVDb25maWdbXSxcbiAgZG9jOiBEb2N1bWVudE5vZGUsXG4pOiBEb2N1bWVudE5vZGUgfCBudWxsIHtcbiAgY29uc3QgdmFyaWFibGVzSW5Vc2U6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgbGV0IHZhcmlhYmxlc1RvUmVtb3ZlOiBSZW1vdmVBcmd1bWVudHNDb25maWdbXSA9IFtdO1xuXG4gIGNvbnN0IGZyYWdtZW50U3ByZWFkc0luVXNlOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBmcmFnbWVudFNwcmVhZHNUb1JlbW92ZTogUmVtb3ZlRnJhZ21lbnRTcHJlYWRDb25maWdbXSA9IFtdO1xuXG4gIGxldCBtb2RpZmllZERvYyA9IG51bGxJZkRvY0lzRW1wdHkoXG4gICAgdmlzaXQoZG9jLCB7XG4gICAgICBWYXJpYWJsZToge1xuICAgICAgICBlbnRlcihub2RlLCBfa2V5LCBwYXJlbnQpIHtcbiAgICAgICAgICAvLyBTdG9yZSBlYWNoIHZhcmlhYmxlIHRoYXQncyByZWZlcmVuY2VkIGFzIHBhcnQgb2YgYW4gYXJndW1lbnRcbiAgICAgICAgICAvLyAoZXhjbHVkaW5nIG9wZXJhdGlvbiBkZWZpbml0aW9uIHZhcmlhYmxlcyksIHNvIHdlIGtub3cgd2hpY2hcbiAgICAgICAgICAvLyB2YXJpYWJsZXMgYXJlIGJlaW5nIHVzZWQuIElmIHdlIGxhdGVyIHdhbnQgdG8gcmVtb3ZlIGEgdmFyaWFibGVcbiAgICAgICAgICAvLyB3ZSdsbCBmaXJzdCBjaGVjayB0byBzZWUgaWYgaXQncyBiZWluZyB1c2VkLCBiZWZvcmUgY29udGludWluZyB3aXRoXG4gICAgICAgICAgLy8gdGhlIHJlbW92YWwuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgKHBhcmVudCBhcyBWYXJpYWJsZURlZmluaXRpb25Ob2RlKS5raW5kICE9PSAnVmFyaWFibGVEZWZpbml0aW9uJ1xuICAgICAgICAgICkge1xuICAgICAgICAgICAgdmFyaWFibGVzSW5Vc2Vbbm9kZS5uYW1lLnZhbHVlXSA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcblxuICAgICAgRmllbGQ6IHtcbiAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgIGlmIChkaXJlY3RpdmVzICYmIG5vZGUuZGlyZWN0aXZlcykge1xuICAgICAgICAgICAgLy8gSWYgYHJlbW92ZWAgaXMgc2V0IHRvIHRydWUgZm9yIGEgZGlyZWN0aXZlLCBhbmQgYSBkaXJlY3RpdmUgbWF0Y2hcbiAgICAgICAgICAgIC8vIGlzIGZvdW5kIGZvciBhIGZpZWxkLCByZW1vdmUgdGhlIGZpZWxkIGFzIHdlbGwuXG4gICAgICAgICAgICBjb25zdCBzaG91bGRSZW1vdmVGaWVsZCA9IGRpcmVjdGl2ZXMuc29tZShcbiAgICAgICAgICAgICAgZGlyZWN0aXZlID0+IGRpcmVjdGl2ZS5yZW1vdmUsXG4gICAgICAgICAgICApO1xuXG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHNob3VsZFJlbW92ZUZpZWxkICYmXG4gICAgICAgICAgICAgIG5vZGUuZGlyZWN0aXZlcyAmJlxuICAgICAgICAgICAgICBub2RlLmRpcmVjdGl2ZXMuc29tZShnZXREaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZXMpKVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgIGlmIChub2RlLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgICAgIC8vIFN0b3JlIGZpZWxkIGFyZ3VtZW50IHZhcmlhYmxlcyBzbyB0aGV5IGNhbiBiZSByZW1vdmVkXG4gICAgICAgICAgICAgICAgLy8gZnJvbSB0aGUgb3BlcmF0aW9uIGRlZmluaXRpb24uXG4gICAgICAgICAgICAgICAgbm9kZS5hcmd1bWVudHMuZm9yRWFjaChhcmcgPT4ge1xuICAgICAgICAgICAgICAgICAgaWYgKGFyZy52YWx1ZS5raW5kID09PSAnVmFyaWFibGUnKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhcmlhYmxlc1RvUmVtb3ZlLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IChhcmcudmFsdWUgYXMgVmFyaWFibGVOb2RlKS5uYW1lLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGlmIChub2RlLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgICAgICAgIC8vIFN0b3JlIGZyYWdtZW50IHNwcmVhZCBuYW1lcyBzbyB0aGV5IGNhbiBiZSByZW1vdmVkIGZyb20gdGhlXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgZ2V0QWxsRnJhZ21lbnRTcHJlYWRzRnJvbVNlbGVjdGlvblNldChub2RlLnNlbGVjdGlvblNldCkuZm9yRWFjaChcbiAgICAgICAgICAgICAgICAgIGZyYWcgPT4ge1xuICAgICAgICAgICAgICAgICAgICBmcmFnbWVudFNwcmVhZHNUb1JlbW92ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmcmFnLm5hbWUudmFsdWUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBmaWVsZC5cbiAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcblxuICAgICAgRnJhZ21lbnRTcHJlYWQ6IHtcbiAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgIC8vIEtlZXAgdHJhY2sgb2YgcmVmZXJlbmNlZCBmcmFnbWVudCBzcHJlYWRzLiBUaGlzIGlzIHVzZWQgdG9cbiAgICAgICAgICAvLyBkZXRlcm1pbmUgaWYgdG9wIGxldmVsIGZyYWdtZW50IGRlZmluaXRpb25zIHNob3VsZCBiZSByZW1vdmVkLlxuICAgICAgICAgIGZyYWdtZW50U3ByZWFkc0luVXNlW25vZGUubmFtZS52YWx1ZV0gPSB0cnVlO1xuICAgICAgICB9LFxuICAgICAgfSxcblxuICAgICAgRGlyZWN0aXZlOiB7XG4gICAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgICAvLyBJZiBhIG1hdGNoaW5nIGRpcmVjdGl2ZSBpcyBmb3VuZCwgcmVtb3ZlIGl0LlxuICAgICAgICAgIGlmIChnZXREaXJlY3RpdmVNYXRjaGVyKGRpcmVjdGl2ZXMpKG5vZGUpKSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pLFxuICApO1xuXG4gIC8vIElmIHdlJ3ZlIHJlbW92ZWQgZmllbGRzIHdpdGggYXJndW1lbnRzLCBtYWtlIHN1cmUgdGhlIGFzc29jaWF0ZWRcbiAgLy8gdmFyaWFibGVzIGFyZSBhbHNvIHJlbW92ZWQgZnJvbSB0aGUgcmVzdCBvZiB0aGUgZG9jdW1lbnQsIGFzIGxvbmcgYXMgdGhleVxuICAvLyBhcmVuJ3QgYmVpbmcgdXNlZCBlbHNld2hlcmUuXG4gIGlmIChcbiAgICBtb2RpZmllZERvYyAmJlxuICAgIGZpbHRlckluUGxhY2UodmFyaWFibGVzVG9SZW1vdmUsIHYgPT4gISF2Lm5hbWUgJiYgIXZhcmlhYmxlc0luVXNlW3YubmFtZV0pLmxlbmd0aFxuICApIHtcbiAgICBtb2RpZmllZERvYyA9IHJlbW92ZUFyZ3VtZW50c0Zyb21Eb2N1bWVudCh2YXJpYWJsZXNUb1JlbW92ZSwgbW9kaWZpZWREb2MpO1xuICB9XG5cbiAgLy8gSWYgd2UndmUgcmVtb3ZlZCBzZWxlY3Rpb24gc2V0cyB3aXRoIGZyYWdtZW50IHNwcmVhZHMsIG1ha2Ugc3VyZSB0aGVcbiAgLy8gYXNzb2NpYXRlZCBmcmFnbWVudCBkZWZpbml0aW9ucyBhcmUgYWxzbyByZW1vdmVkIGZyb20gdGhlIHJlc3Qgb2YgdGhlXG4gIC8vIGRvY3VtZW50LCBhcyBsb25nIGFzIHRoZXkgYXJlbid0IGJlaW5nIHVzZWQgZWxzZXdoZXJlLlxuICBpZiAoXG4gICAgbW9kaWZpZWREb2MgJiZcbiAgICBmaWx0ZXJJblBsYWNlKGZyYWdtZW50U3ByZWFkc1RvUmVtb3ZlLCBmcyA9PiAhIWZzLm5hbWUgJiYgIWZyYWdtZW50U3ByZWFkc0luVXNlW2ZzLm5hbWVdKVxuICAgICAgLmxlbmd0aFxuICApIHtcbiAgICBtb2RpZmllZERvYyA9IHJlbW92ZUZyYWdtZW50U3ByZWFkRnJvbURvY3VtZW50KFxuICAgICAgZnJhZ21lbnRTcHJlYWRzVG9SZW1vdmUsXG4gICAgICBtb2RpZmllZERvYyxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIG1vZGlmaWVkRG9jO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkVHlwZW5hbWVUb0RvY3VtZW50KGRvYzogRG9jdW1lbnROb2RlKTogRG9jdW1lbnROb2RlIHtcbiAgcmV0dXJuIHZpc2l0KGNoZWNrRG9jdW1lbnQoZG9jKSwge1xuICAgIFNlbGVjdGlvblNldDoge1xuICAgICAgZW50ZXIobm9kZSwgX2tleSwgcGFyZW50KSB7XG4gICAgICAgIC8vIERvbid0IGFkZCBfX3R5cGVuYW1lIHRvIE9wZXJhdGlvbkRlZmluaXRpb25zLlxuICAgICAgICBpZiAoXG4gICAgICAgICAgcGFyZW50ICYmXG4gICAgICAgICAgKHBhcmVudCBhcyBPcGVyYXRpb25EZWZpbml0aW9uTm9kZSkua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nXG4gICAgICAgICkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE5vIGNoYW5nZXMgaWYgbm8gc2VsZWN0aW9ucy5cbiAgICAgICAgY29uc3QgeyBzZWxlY3Rpb25zIH0gPSBub2RlO1xuICAgICAgICBpZiAoIXNlbGVjdGlvbnMpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBzZWxlY3Rpb25zIGFscmVhZHkgaGF2ZSBhIF9fdHlwZW5hbWUsIG9yIGFyZSBwYXJ0IG9mIGFuXG4gICAgICAgIC8vIGludHJvc3BlY3Rpb24gcXVlcnksIGRvIG5vdGhpbmcuXG4gICAgICAgIGNvbnN0IHNraXAgPSBzZWxlY3Rpb25zLnNvbWUoc2VsZWN0aW9uID0+IHtcbiAgICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgaXNGaWVsZChzZWxlY3Rpb24pICYmXG4gICAgICAgICAgICAoc2VsZWN0aW9uLm5hbWUudmFsdWUgPT09ICdfX3R5cGVuYW1lJyB8fFxuICAgICAgICAgICAgICBzZWxlY3Rpb24ubmFtZS52YWx1ZS5sYXN0SW5kZXhPZignX18nLCAwKSA9PT0gMClcbiAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKHNraXApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiB0aGlzIFNlbGVjdGlvblNldCBpcyBAZXhwb3J0LWVkIGFzIGFuIGlucHV0IHZhcmlhYmxlLCBpdCBzaG91bGRcbiAgICAgICAgLy8gbm90IGhhdmUgYSBfX3R5cGVuYW1lIGZpZWxkIChzZWUgaXNzdWUgIzQ2OTEpLlxuICAgICAgICBjb25zdCBmaWVsZCA9IHBhcmVudCBhcyBGaWVsZE5vZGU7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBpc0ZpZWxkKGZpZWxkKSAmJlxuICAgICAgICAgIGZpZWxkLmRpcmVjdGl2ZXMgJiZcbiAgICAgICAgICBmaWVsZC5kaXJlY3RpdmVzLnNvbWUoZCA9PiBkLm5hbWUudmFsdWUgPT09ICdleHBvcnQnKVxuICAgICAgICApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgYW5kIHJldHVybiBhIG5ldyBTZWxlY3Rpb25TZXQgd2l0aCBhIF9fdHlwZW5hbWUgRmllbGQuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4ubm9kZSxcbiAgICAgICAgICBzZWxlY3Rpb25zOiBbLi4uc2VsZWN0aW9ucywgVFlQRU5BTUVfRklFTERdLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICB9KTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBhZGRUeXBlbmFtZVRvRG9jdW1lbnQge1xuICBhZGRlZChmaWVsZDogRmllbGROb2RlKTogYm9vbGVhbjtcbn1cbmFkZFR5cGVuYW1lVG9Eb2N1bWVudC5hZGRlZCA9IGZ1bmN0aW9uIChmaWVsZDogRmllbGROb2RlKSB7XG4gIHJldHVybiBmaWVsZCA9PT0gVFlQRU5BTUVfRklFTEQ7XG59O1xuXG5jb25zdCBjb25uZWN0aW9uUmVtb3ZlQ29uZmlnID0ge1xuICB0ZXN0OiAoZGlyZWN0aXZlOiBEaXJlY3RpdmVOb2RlKSA9PiB7XG4gICAgY29uc3Qgd2lsbFJlbW92ZSA9IGRpcmVjdGl2ZS5uYW1lLnZhbHVlID09PSAnY29ubmVjdGlvbic7XG4gICAgaWYgKHdpbGxSZW1vdmUpIHtcbiAgICAgIGlmIChcbiAgICAgICAgIWRpcmVjdGl2ZS5hcmd1bWVudHMgfHxcbiAgICAgICAgIWRpcmVjdGl2ZS5hcmd1bWVudHMuc29tZShhcmcgPT4gYXJnLm5hbWUudmFsdWUgPT09ICdrZXknKVxuICAgICAgKSB7XG4gICAgICAgIGludmFyaWFudC53YXJuKFxuICAgICAgICAgICdSZW1vdmluZyBhbiBAY29ubmVjdGlvbiBkaXJlY3RpdmUgZXZlbiB0aG91Z2ggaXQgZG9lcyBub3QgaGF2ZSBhIGtleS4gJyArXG4gICAgICAgICAgICAnWW91IG1heSB3YW50IHRvIHVzZSB0aGUga2V5IHBhcmFtZXRlciB0byBzcGVjaWZ5IGEgc3RvcmUga2V5LicsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHdpbGxSZW1vdmU7XG4gIH0sXG59O1xuXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlQ29ubmVjdGlvbkRpcmVjdGl2ZUZyb21Eb2N1bWVudChkb2M6IERvY3VtZW50Tm9kZSkge1xuICByZXR1cm4gcmVtb3ZlRGlyZWN0aXZlc0Zyb21Eb2N1bWVudChcbiAgICBbY29ubmVjdGlvblJlbW92ZUNvbmZpZ10sXG4gICAgY2hlY2tEb2N1bWVudChkb2MpLFxuICApO1xufVxuXG5mdW5jdGlvbiBoYXNEaXJlY3RpdmVzSW5TZWxlY3Rpb25TZXQoXG4gIGRpcmVjdGl2ZXM6IEdldERpcmVjdGl2ZUNvbmZpZ1tdLFxuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGUgfCB1bmRlZmluZWQsXG4gIG5lc3RlZENoZWNrID0gdHJ1ZSxcbik6IGJvb2xlYW4ge1xuICByZXR1cm4gKFxuICAgICEhc2VsZWN0aW9uU2V0ICYmXG4gICAgc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMgJiZcbiAgICBzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5zb21lKHNlbGVjdGlvbiA9PlxuICAgICAgaGFzRGlyZWN0aXZlc0luU2VsZWN0aW9uKGRpcmVjdGl2ZXMsIHNlbGVjdGlvbiwgbmVzdGVkQ2hlY2spLFxuICAgIClcbiAgKTtcbn1cblxuZnVuY3Rpb24gaGFzRGlyZWN0aXZlc0luU2VsZWN0aW9uKFxuICBkaXJlY3RpdmVzOiBHZXREaXJlY3RpdmVDb25maWdbXSxcbiAgc2VsZWN0aW9uOiBTZWxlY3Rpb25Ob2RlLFxuICBuZXN0ZWRDaGVjayA9IHRydWUsXG4pOiBib29sZWFuIHtcbiAgaWYgKCFpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIGlmICghc2VsZWN0aW9uLmRpcmVjdGl2ZXMpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIHNlbGVjdGlvbi5kaXJlY3RpdmVzLnNvbWUoZ2V0RGlyZWN0aXZlTWF0Y2hlcihkaXJlY3RpdmVzKSkgfHxcbiAgICAobmVzdGVkQ2hlY2sgJiZcbiAgICAgIGhhc0RpcmVjdGl2ZXNJblNlbGVjdGlvblNldChcbiAgICAgICAgZGlyZWN0aXZlcyxcbiAgICAgICAgc2VsZWN0aW9uLnNlbGVjdGlvblNldCxcbiAgICAgICAgbmVzdGVkQ2hlY2ssXG4gICAgICApKVxuICApO1xufVxuXG5mdW5jdGlvbiBnZXRBcmd1bWVudE1hdGNoZXIoY29uZmlnOiBSZW1vdmVBcmd1bWVudHNDb25maWdbXSkge1xuICByZXR1cm4gZnVuY3Rpb24gYXJndW1lbnRNYXRjaGVyKGFyZ3VtZW50OiBBcmd1bWVudE5vZGUpIHtcbiAgICByZXR1cm4gY29uZmlnLnNvbWUoXG4gICAgICAoYUNvbmZpZzogUmVtb3ZlQXJndW1lbnRzQ29uZmlnKSA9PlxuICAgICAgICBhcmd1bWVudC52YWx1ZSAmJlxuICAgICAgICBhcmd1bWVudC52YWx1ZS5raW5kID09PSAnVmFyaWFibGUnICYmXG4gICAgICAgIGFyZ3VtZW50LnZhbHVlLm5hbWUgJiZcbiAgICAgICAgKGFDb25maWcubmFtZSA9PT0gYXJndW1lbnQudmFsdWUubmFtZS52YWx1ZSB8fFxuICAgICAgICAgIChhQ29uZmlnLnRlc3QgJiYgYUNvbmZpZy50ZXN0KGFyZ3VtZW50KSkpLFxuICAgICk7XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVBcmd1bWVudHNGcm9tRG9jdW1lbnQoXG4gIGNvbmZpZzogUmVtb3ZlQXJndW1lbnRzQ29uZmlnW10sXG4gIGRvYzogRG9jdW1lbnROb2RlLFxuKTogRG9jdW1lbnROb2RlIHwgbnVsbCB7XG4gIGNvbnN0IGFyZ01hdGNoZXIgPSBnZXRBcmd1bWVudE1hdGNoZXIoY29uZmlnKTtcblxuICByZXR1cm4gbnVsbElmRG9jSXNFbXB0eShcbiAgICB2aXNpdChkb2MsIHtcbiAgICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgICAgZW50ZXIobm9kZSkge1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgICAgLy8gUmVtb3ZlIG1hdGNoaW5nIHRvcCBsZXZlbCB2YXJpYWJsZXMgZGVmaW5pdGlvbnMuXG4gICAgICAgICAgICB2YXJpYWJsZURlZmluaXRpb25zOiBub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMgPyBub2RlLnZhcmlhYmxlRGVmaW5pdGlvbnMuZmlsdGVyKFxuICAgICAgICAgICAgICB2YXJEZWYgPT5cbiAgICAgICAgICAgICAgICAhY29uZmlnLnNvbWUoYXJnID0+IGFyZy5uYW1lID09PSB2YXJEZWYudmFyaWFibGUubmFtZS52YWx1ZSksXG4gICAgICAgICAgICApIDogW10sXG4gICAgICAgICAgfTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG5cbiAgICAgIEZpZWxkOiB7XG4gICAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgICAvLyBJZiBgcmVtb3ZlYCBpcyBzZXQgdG8gdHJ1ZSBmb3IgYW4gYXJndW1lbnQsIGFuZCBhbiBhcmd1bWVudCBtYXRjaFxuICAgICAgICAgIC8vIGlzIGZvdW5kIGZvciBhIGZpZWxkLCByZW1vdmUgdGhlIGZpZWxkIGFzIHdlbGwuXG4gICAgICAgICAgY29uc3Qgc2hvdWxkUmVtb3ZlRmllbGQgPSBjb25maWcuc29tZShhcmdDb25maWcgPT4gYXJnQ29uZmlnLnJlbW92ZSk7XG5cbiAgICAgICAgICBpZiAoc2hvdWxkUmVtb3ZlRmllbGQpIHtcbiAgICAgICAgICAgIGxldCBhcmdNYXRjaENvdW50ID0gMDtcbiAgICAgICAgICAgIGlmIChub2RlLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgICBub2RlLmFyZ3VtZW50cy5mb3JFYWNoKGFyZyA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKGFyZ01hdGNoZXIoYXJnKSkge1xuICAgICAgICAgICAgICAgICAgYXJnTWF0Y2hDb3VudCArPSAxO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChhcmdNYXRjaENvdW50ID09PSAxKSB7XG4gICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgIH0sXG5cbiAgICAgIEFyZ3VtZW50OiB7XG4gICAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgICAvLyBSZW1vdmUgYWxsIG1hdGNoaW5nIGFyZ3VtZW50cy5cbiAgICAgICAgICBpZiAoYXJnTWF0Y2hlcihub2RlKSkge1xuICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KSxcbiAgKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUZyYWdtZW50U3ByZWFkRnJvbURvY3VtZW50KFxuICBjb25maWc6IFJlbW92ZUZyYWdtZW50U3ByZWFkQ29uZmlnW10sXG4gIGRvYzogRG9jdW1lbnROb2RlLFxuKTogRG9jdW1lbnROb2RlIHwgbnVsbCB7XG4gIGZ1bmN0aW9uIGVudGVyKFxuICAgIG5vZGU6IEZyYWdtZW50U3ByZWFkTm9kZSB8IEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gICk6IG51bGwgfCB2b2lkIHtcbiAgICBpZiAoY29uZmlnLnNvbWUoZGVmID0+IGRlZi5uYW1lID09PSBub2RlLm5hbWUudmFsdWUpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gbnVsbElmRG9jSXNFbXB0eShcbiAgICB2aXNpdChkb2MsIHtcbiAgICAgIEZyYWdtZW50U3ByZWFkOiB7IGVudGVyIH0sXG4gICAgICBGcmFnbWVudERlZmluaXRpb246IHsgZW50ZXIgfSxcbiAgICB9KSxcbiAgKTtcbn1cblxuZnVuY3Rpb24gZ2V0QWxsRnJhZ21lbnRTcHJlYWRzRnJvbVNlbGVjdGlvblNldChcbiAgc2VsZWN0aW9uU2V0OiBTZWxlY3Rpb25TZXROb2RlLFxuKTogRnJhZ21lbnRTcHJlYWROb2RlW10ge1xuICBjb25zdCBhbGxGcmFnbWVudHM6IEZyYWdtZW50U3ByZWFkTm9kZVtdID0gW107XG5cbiAgc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZm9yRWFjaChzZWxlY3Rpb24gPT4ge1xuICAgIGlmIChcbiAgICAgIChpc0ZpZWxkKHNlbGVjdGlvbikgfHwgaXNJbmxpbmVGcmFnbWVudChzZWxlY3Rpb24pKSAmJlxuICAgICAgc2VsZWN0aW9uLnNlbGVjdGlvblNldFxuICAgICkge1xuICAgICAgZ2V0QWxsRnJhZ21lbnRTcHJlYWRzRnJvbVNlbGVjdGlvblNldChzZWxlY3Rpb24uc2VsZWN0aW9uU2V0KS5mb3JFYWNoKFxuICAgICAgICBmcmFnID0+IGFsbEZyYWdtZW50cy5wdXNoKGZyYWcpLFxuICAgICAgKTtcbiAgICB9IGVsc2UgaWYgKHNlbGVjdGlvbi5raW5kID09PSAnRnJhZ21lbnRTcHJlYWQnKSB7XG4gICAgICBhbGxGcmFnbWVudHMucHVzaChzZWxlY3Rpb24pO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIGFsbEZyYWdtZW50cztcbn1cblxuLy8gSWYgdGhlIGluY29taW5nIGRvY3VtZW50IGlzIGEgcXVlcnksIHJldHVybiBpdCBhcyBpcy4gT3RoZXJ3aXNlLCBidWlsZCBhXG4vLyBuZXcgZG9jdW1lbnQgY29udGFpbmluZyBhIHF1ZXJ5IG9wZXJhdGlvbiBiYXNlZCBvbiB0aGUgc2VsZWN0aW9uIHNldFxuLy8gb2YgdGhlIHByZXZpb3VzIG1haW4gb3BlcmF0aW9uLlxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUXVlcnlGcm9tU2VsZWN0aW9uU2V0KFxuICBkb2N1bWVudDogRG9jdW1lbnROb2RlLFxuKTogRG9jdW1lbnROb2RlIHtcbiAgY29uc3QgZGVmaW5pdGlvbiA9IGdldE1haW5EZWZpbml0aW9uKGRvY3VtZW50KTtcbiAgY29uc3QgZGVmaW5pdGlvbk9wZXJhdGlvbiA9ICg8T3BlcmF0aW9uRGVmaW5pdGlvbk5vZGU+ZGVmaW5pdGlvbikub3BlcmF0aW9uO1xuXG4gIGlmIChkZWZpbml0aW9uT3BlcmF0aW9uID09PSAncXVlcnknKSB7XG4gICAgLy8gQWxyZWFkeSBhIHF1ZXJ5LCBzbyByZXR1cm4gdGhlIGV4aXN0aW5nIGRvY3VtZW50LlxuICAgIHJldHVybiBkb2N1bWVudDtcbiAgfVxuXG4gIC8vIEJ1aWxkIGEgbmV3IHF1ZXJ5IHVzaW5nIHRoZSBzZWxlY3Rpb24gc2V0IG9mIHRoZSBtYWluIG9wZXJhdGlvbi5cbiAgY29uc3QgbW9kaWZpZWREb2MgPSB2aXNpdChkb2N1bWVudCwge1xuICAgIE9wZXJhdGlvbkRlZmluaXRpb246IHtcbiAgICAgIGVudGVyKG5vZGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi5ub2RlLFxuICAgICAgICAgIG9wZXJhdGlvbjogJ3F1ZXJ5JyxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG4gIHJldHVybiBtb2RpZmllZERvYztcbn1cblxuLy8gUmVtb3ZlIGZpZWxkcyAvIHNlbGVjdGlvbiBzZXRzIHRoYXQgaW5jbHVkZSBhbiBAY2xpZW50IGRpcmVjdGl2ZS5cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVDbGllbnRTZXRzRnJvbURvY3VtZW50KFxuICBkb2N1bWVudDogRG9jdW1lbnROb2RlLFxuKTogRG9jdW1lbnROb2RlIHwgbnVsbCB7XG4gIGNoZWNrRG9jdW1lbnQoZG9jdW1lbnQpO1xuXG4gIGxldCBtb2RpZmllZERvYyA9IHJlbW92ZURpcmVjdGl2ZXNGcm9tRG9jdW1lbnQoXG4gICAgW1xuICAgICAge1xuICAgICAgICB0ZXN0OiAoZGlyZWN0aXZlOiBEaXJlY3RpdmVOb2RlKSA9PiBkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gJ2NsaWVudCcsXG4gICAgICAgIHJlbW92ZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgXSxcbiAgICBkb2N1bWVudCxcbiAgKTtcblxuICAvLyBBZnRlciBhIGZyYWdtZW50IGRlZmluaXRpb24gaGFzIGhhZCBpdHMgQGNsaWVudCByZWxhdGVkIGRvY3VtZW50XG4gIC8vIHNldHMgcmVtb3ZlZCwgaWYgdGhlIG9ubHkgZmllbGQgaXQgaGFzIGxlZnQgaXMgYSBfX3R5cGVuYW1lIGZpZWxkLFxuICAvLyByZW1vdmUgdGhlIGVudGlyZSBmcmFnbWVudCBvcGVyYXRpb24gdG8gcHJldmVudCBpdCBmcm9tIGJlaW5nIGZpcmVkXG4gIC8vIG9uIHRoZSBzZXJ2ZXIuXG4gIGlmIChtb2RpZmllZERvYykge1xuICAgIG1vZGlmaWVkRG9jID0gdmlzaXQobW9kaWZpZWREb2MsIHtcbiAgICAgIEZyYWdtZW50RGVmaW5pdGlvbjoge1xuICAgICAgICBlbnRlcihub2RlKSB7XG4gICAgICAgICAgaWYgKG5vZGUuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgICBjb25zdCBpc1R5cGVuYW1lT25seSA9IG5vZGUuc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZXZlcnkoXG4gICAgICAgICAgICAgIHNlbGVjdGlvbiA9PlxuICAgICAgICAgICAgICAgIGlzRmllbGQoc2VsZWN0aW9uKSAmJiBzZWxlY3Rpb24ubmFtZS52YWx1ZSA9PT0gJ19fdHlwZW5hbWUnLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChpc1R5cGVuYW1lT25seSkge1xuICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIG1vZGlmaWVkRG9jO1xufVxuIiwgImNvbnN0IHsgaGFzT3duUHJvcGVydHkgfSA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8vIFRoZXNlIG1lcmdlRGVlcCBhbmQgbWVyZ2VEZWVwQXJyYXkgdXRpbGl0aWVzIG1lcmdlIGFueSBudW1iZXIgb2Ygb2JqZWN0c1xuLy8gdG9nZXRoZXIsIHNoYXJpbmcgYXMgbXVjaCBtZW1vcnkgYXMgcG9zc2libGUgd2l0aCB0aGUgc291cmNlIG9iamVjdHMsIHdoaWxlXG4vLyByZW1haW5pbmcgY2FyZWZ1bCB0byBhdm9pZCBtb2RpZnlpbmcgYW55IHNvdXJjZSBvYmplY3RzLlxuXG4vLyBMb2dpY2FsbHksIHRoZSByZXR1cm4gdHlwZSBvZiBtZXJnZURlZXAgc2hvdWxkIGJlIHRoZSBpbnRlcnNlY3Rpb24gb2Zcbi8vIGFsbCB0aGUgYXJndW1lbnQgdHlwZXMuIFRoZSBiaW5hcnkgY2FsbCBzaWduYXR1cmUgaXMgYnkgZmFyIHRoZSBtb3N0XG4vLyBjb21tb24sIGJ1dCB3ZSBzdXBwb3J0IDAtIHRocm91Z2ggNS1hcnkgYXMgd2VsbC4gQWZ0ZXIgdGhhdCwgdGhlXG4vLyByZXN1bHRpbmcgdHlwZSBpcyBqdXN0IHRoZSBpbmZlcnJlZCBhcnJheSBlbGVtZW50IHR5cGUuIE5vdGUgdG8gbmVyZHM6XG4vLyB0aGVyZSBpcyBhIG1vcmUgY2xldmVyIHdheSBvZiBkb2luZyB0aGlzIHRoYXQgY29udmVydHMgdGhlIHR1cGxlIHR5cGVcbi8vIGZpcnN0IHRvIGEgdW5pb24gdHlwZSAoZWFzeSBlbm91Z2g6IFRbbnVtYmVyXSkgYW5kIHRoZW4gY29udmVydHMgdGhlXG4vLyB1bmlvbiB0byBhbiBpbnRlcnNlY3Rpb24gdHlwZSB1c2luZyBkaXN0cmlidXRpdmUgY29uZGl0aW9uYWwgdHlwZVxuLy8gaW5mZXJlbmNlLCBidXQgdGhhdCBhcHByb2FjaCBoYXMgc2V2ZXJhbCBmYXRhbCBmbGF3cyAoYm9vbGVhbiBiZWNvbWVzXG4vLyB0cnVlICYgZmFsc2UsIGFuZCB0aGUgaW5mZXJyZWQgdHlwZSBlbmRzIHVwIGFzIHVua25vd24gaW4gbWFueSBjYXNlcyksXG4vLyBpbiBhZGRpdGlvbiB0byBiZWluZyBuZWFybHkgaW1wb3NzaWJsZSB0byBleHBsYWluL3VuZGVyc3RhbmQuXG5leHBvcnQgdHlwZSBUdXBsZVRvSW50ZXJzZWN0aW9uPFQgZXh0ZW5kcyBhbnlbXT4gPVxuICBUIGV4dGVuZHMgW2luZmVyIEFdID8gQSA6XG4gIFQgZXh0ZW5kcyBbaW5mZXIgQSwgaW5mZXIgQl0gPyBBICYgQiA6XG4gIFQgZXh0ZW5kcyBbaW5mZXIgQSwgaW5mZXIgQiwgaW5mZXIgQ10gPyBBICYgQiAmIEMgOlxuICBUIGV4dGVuZHMgW2luZmVyIEEsIGluZmVyIEIsIGluZmVyIEMsIGluZmVyIERdID8gQSAmIEIgJiBDICYgRCA6XG4gIFQgZXh0ZW5kcyBbaW5mZXIgQSwgaW5mZXIgQiwgaW5mZXIgQywgaW5mZXIgRCwgaW5mZXIgRV0gPyBBICYgQiAmIEMgJiBEICYgRSA6XG4gIFQgZXh0ZW5kcyAoaW5mZXIgVSlbXSA/IFUgOiBhbnk7XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlZXA8VCBleHRlbmRzIGFueVtdPihcbiAgLi4uc291cmNlczogVFxuKTogVHVwbGVUb0ludGVyc2VjdGlvbjxUPiB7XG4gIHJldHVybiBtZXJnZURlZXBBcnJheShzb3VyY2VzKTtcbn1cblxuLy8gSW4gYWxtb3N0IGFueSBzaXR1YXRpb24gd2hlcmUgeW91IGNvdWxkIHN1Y2NlZWQgaW4gZ2V0dGluZyB0aGVcbi8vIFR5cGVTY3JpcHQgY29tcGlsZXIgdG8gaW5mZXIgYSB0dXBsZSB0eXBlIGZvciB0aGUgc291cmNlcyBhcnJheSwgeW91XG4vLyBjb3VsZCBqdXN0IHVzZSBtZXJnZURlZXAgaW5zdGVhZCBvZiBtZXJnZURlZXBBcnJheSwgc28gaW5zdGVhZCBvZlxuLy8gdHJ5aW5nIHRvIGNvbnZlcnQgVFtdIHRvIGFuIGludGVyc2VjdGlvbiB0eXBlIHdlIGp1c3QgaW5mZXIgdGhlIGFycmF5XG4vLyBlbGVtZW50IHR5cGUsIHdoaWNoIHdvcmtzIHBlcmZlY3RseSB3aGVuIHRoZSBzb3VyY2VzIGFycmF5IGhhcyBhXG4vLyBjb25zaXN0ZW50IGVsZW1lbnQgdHlwZS5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZURlZXBBcnJheTxUPihzb3VyY2VzOiBUW10pOiBUIHtcbiAgbGV0IHRhcmdldCA9IHNvdXJjZXNbMF0gfHwgKHt9IGFzIFQpO1xuICBjb25zdCBjb3VudCA9IHNvdXJjZXMubGVuZ3RoO1xuICBpZiAoY291bnQgPiAxKSB7XG4gICAgY29uc3QgbWVyZ2VyID0gbmV3IERlZXBNZXJnZXIoKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAgIHRhcmdldCA9IG1lcmdlci5tZXJnZSh0YXJnZXQsIHNvdXJjZXNbaV0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGFyZ2V0O1xufVxuXG5mdW5jdGlvbiBpc09iamVjdChvYmo6IGFueSk6IG9iaiBpcyBSZWNvcmQ8c3RyaW5nIHwgbnVtYmVyLCBhbnk+IHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jztcbn1cblxuZXhwb3J0IHR5cGUgUmVjb25jaWxlckZ1bmN0aW9uPFRDb250ZXh0QXJncyBleHRlbmRzIGFueVtdPiA9IChcbiAgdGhpczogRGVlcE1lcmdlcjxUQ29udGV4dEFyZ3M+LFxuICB0YXJnZXQ6IFJlY29yZDxzdHJpbmcgfCBudW1iZXIsIGFueT4sXG4gIHNvdXJjZTogUmVjb3JkPHN0cmluZyB8IG51bWJlciwgYW55PixcbiAgcHJvcGVydHk6IHN0cmluZyB8IG51bWJlcixcbiAgLi4uY29udGV4dDogVENvbnRleHRBcmdzXG4pID0+IGFueTtcblxuY29uc3QgZGVmYXVsdFJlY29uY2lsZXI6IFJlY29uY2lsZXJGdW5jdGlvbjxhbnlbXT4gPVxuICBmdW5jdGlvbiAodGFyZ2V0LCBzb3VyY2UsIHByb3BlcnR5KSB7XG4gICAgcmV0dXJuIHRoaXMubWVyZ2UodGFyZ2V0W3Byb3BlcnR5XSwgc291cmNlW3Byb3BlcnR5XSk7XG4gIH07XG5cbmV4cG9ydCBjbGFzcyBEZWVwTWVyZ2VyPFRDb250ZXh0QXJncyBleHRlbmRzIGFueVtdPiB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVjb25jaWxlcjogUmVjb25jaWxlckZ1bmN0aW9uPFRDb250ZXh0QXJncz4gPSBkZWZhdWx0UmVjb25jaWxlcixcbiAgKSB7fVxuXG4gIHB1YmxpYyBtZXJnZSh0YXJnZXQ6IGFueSwgc291cmNlOiBhbnksIC4uLmNvbnRleHQ6IFRDb250ZXh0QXJncyk6IGFueSB7XG4gICAgaWYgKGlzT2JqZWN0KHNvdXJjZSkgJiYgaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgT2JqZWN0LmtleXMoc291cmNlKS5mb3JFYWNoKHNvdXJjZUtleSA9PiB7XG4gICAgICAgIGlmIChoYXNPd25Qcm9wZXJ0eS5jYWxsKHRhcmdldCwgc291cmNlS2V5KSkge1xuICAgICAgICAgIGNvbnN0IHRhcmdldFZhbHVlID0gdGFyZ2V0W3NvdXJjZUtleV07XG4gICAgICAgICAgaWYgKHNvdXJjZVtzb3VyY2VLZXldICE9PSB0YXJnZXRWYWx1ZSkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5yZWNvbmNpbGVyKHRhcmdldCwgc291cmNlLCBzb3VyY2VLZXksIC4uLmNvbnRleHQpO1xuICAgICAgICAgICAgLy8gQSB3ZWxsLWltcGxlbWVudGVkIHJlY29uY2lsZXIgbWF5IHJldHVybiB0YXJnZXRWYWx1ZSB0byBpbmRpY2F0ZVxuICAgICAgICAgICAgLy8gdGhlIG1lcmdlIGNoYW5nZWQgbm90aGluZyBhYm91dCB0aGUgc3RydWN0dXJlIG9mIHRoZSB0YXJnZXQuXG4gICAgICAgICAgICBpZiAocmVzdWx0ICE9PSB0YXJnZXRWYWx1ZSkge1xuICAgICAgICAgICAgICB0YXJnZXQgPSB0aGlzLnNoYWxsb3dDb3B5Rm9yTWVyZ2UodGFyZ2V0KTtcbiAgICAgICAgICAgICAgdGFyZ2V0W3NvdXJjZUtleV0gPSByZXN1bHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGNvbGxpc2lvbiwgdGhlIHRhcmdldCBjYW4gc2FmZWx5IHNoYXJlIG1lbW9yeSB3aXRoXG4gICAgICAgICAgLy8gdGhlIHNvdXJjZSwgYW5kIHRoZSByZWN1cnNpb24gY2FuIHRlcm1pbmF0ZSBoZXJlLlxuICAgICAgICAgIHRhcmdldCA9IHRoaXMuc2hhbGxvd0NvcHlGb3JNZXJnZSh0YXJnZXQpO1xuICAgICAgICAgIHRhcmdldFtzb3VyY2VLZXldID0gc291cmNlW3NvdXJjZUtleV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIC8vIElmIHNvdXJjZSAob3IgdGFyZ2V0KSBpcyBub3QgYW4gb2JqZWN0LCBsZXQgc291cmNlIHJlcGxhY2UgdGFyZ2V0LlxuICAgIHJldHVybiBzb3VyY2U7XG4gIH1cblxuICBwdWJsaWMgaXNPYmplY3QgPSBpc09iamVjdDtcblxuICBwcml2YXRlIHBhc3RDb3BpZXMgPSBuZXcgU2V0PGFueT4oKTtcblxuICBwdWJsaWMgc2hhbGxvd0NvcHlGb3JNZXJnZTxUPih2YWx1ZTogVCk6IFQge1xuICAgIGlmIChpc09iamVjdCh2YWx1ZSkgJiYgIXRoaXMucGFzdENvcGllcy5oYXModmFsdWUpKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSAodmFsdWUgYXMgYW55KS5zbGljZSgwKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0ge1xuICAgICAgICAgIF9fcHJvdG9fXzogT2JqZWN0LmdldFByb3RvdHlwZU9mKHZhbHVlKSxcbiAgICAgICAgICAuLi52YWx1ZSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFzdENvcGllcy5hZGQodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cbiIsICJpbXBvcnQgT2JzZXJ2YWJsZSBmcm9tICd6ZW4tb2JzZXJ2YWJsZSc7XG5cbi8vIFRoaXMgc2ltcGxpZmllZCBwb2x5ZmlsbCBhdHRlbXB0cyB0byBmb2xsb3cgdGhlIEVDTUFTY3JpcHQgT2JzZXJ2YWJsZVxuLy8gcHJvcG9zYWwgKGh0dHBzOi8vZ2l0aHViLmNvbS96ZW5wYXJzaW5nL2VzLW9ic2VydmFibGUpXG5pbXBvcnQgJ3N5bWJvbC1vYnNlcnZhYmxlJztcblxuZXhwb3J0IHR5cGUgT2JzZXJ2YWJsZVN1YnNjcmlwdGlvbiA9IFplbk9ic2VydmFibGUuU3Vic2NyaXB0aW9uO1xuZXhwb3J0IHR5cGUgT2JzZXJ2ZXI8VD4gPSBaZW5PYnNlcnZhYmxlLk9ic2VydmVyPFQ+O1xuZXhwb3J0IHR5cGUgU3Vic2NyaWJlcjxUPiA9IFplbk9ic2VydmFibGUuU3Vic2NyaWJlcjxUPjtcblxuLy8gVXNlIGdsb2JhbCBtb2R1bGUgYXVnbWVudGF0aW9uIHRvIGFkZCBSeEpTIGludGVyb3AgZnVuY3Rpb25hbGl0eS4gQnlcbi8vIHVzaW5nIHRoaXMgYXBwcm9hY2ggKGluc3RlYWQgb2Ygc3ViY2xhc3NpbmcgYE9ic2VydmFibGVgIGFuZCBhZGRpbmcgYW5cbi8vIFsnQEBvYnNlcnZhYmxlJ10oKSBtZXRob2QpLCB3ZSBlbnN1cmUgdGhlIGV4cG9ydGVkIGBPYnNlcnZhYmxlYCByZXRhaW5zIGFsbFxuLy8gZXhpc3RpbmcgdHlwZSBkZWNsYXJhdGlvbnMgZnJvbSBgQHR5cGVzL3plbi1vYnNlcnZhYmxlYCAod2hpY2ggaXMgaW1wb3J0YW50XG4vLyBmb3IgcHJvamVjdHMgbGlrZSBgYXBvbGxvLWxpbmtgKS5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIE9ic2VydmFibGU8VD4ge1xuICAgIFsnQEBvYnNlcnZhYmxlJ10oKTogT2JzZXJ2YWJsZTxUPjtcbiAgfVxufVxuKE9ic2VydmFibGUucHJvdG90eXBlIGFzIGFueSlbJ0BAb2JzZXJ2YWJsZSddID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfTtcbmV4cG9ydCB7IE9ic2VydmFibGUgfTtcbiIsICJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzeW1ib2xPYnNlcnZhYmxlUG9ueWZpbGwocm9vdCkge1xuXHR2YXIgcmVzdWx0O1xuXHR2YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cblx0aWYgKHR5cGVvZiBTeW1ib2wgPT09ICdmdW5jdGlvbicpIHtcblx0XHRpZiAoU3ltYm9sLm9ic2VydmFibGUpIHtcblx0XHRcdHJlc3VsdCA9IFN5bWJvbC5vYnNlcnZhYmxlO1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIFRoaXMganVzdCBuZWVkcyB0byBiZSBzb21ldGhpbmcgdGhhdCB3b24ndCB0cmFtcGxlIG90aGVyIHVzZXIncyBTeW1ib2wuZm9yIHVzZVxuXHRcdFx0Ly8gSXQgYWxzbyB3aWxsIGd1aWRlIHBlb3BsZSB0byB0aGUgc291cmNlIG9mIHRoZWlyIGlzc3VlcywgaWYgdGhpcyBpcyBwcm9ibGVtYXRpYy5cblx0XHRcdC8vIE1FVEE6IEl0J3MgYSByZXNvdXJjZSBsb2NhdG9yIVxuXHRcdFx0cmVzdWx0ID0gU3ltYm9sLmZvcignaHR0cHM6Ly9naXRodWIuY29tL2Jlbmxlc2gvc3ltYm9sLW9ic2VydmFibGUnKTtcblx0XHRcdHRyeSB7XG5cdFx0XHRcdFN5bWJvbC5vYnNlcnZhYmxlID0gcmVzdWx0O1xuXHRcdFx0fSBjYXRjaCAoZXJyKSB7XG5cdFx0XHRcdC8vIERvIG5vdGhpbmcuIEluIHNvbWUgZW52aXJvbm1lbnRzLCB1c2VycyBoYXZlIGZyb3plbiBgU3ltYm9sYCBmb3Igc2VjdXJpdHkgcmVhc29ucyxcblx0XHRcdFx0Ly8gaWYgaXQgaXMgZnJvemVuIGFzc2lnbmluZyB0byBpdCB3aWxsIHRocm93LiBJbiB0aGlzIGNhc2UsIHdlIGRvbid0IGNhcmUsIGJlY2F1c2Vcblx0XHRcdFx0Ly8gdGhleSB3aWxsIG5lZWQgdG8gdXNlIHRoZSByZXR1cm5lZCB2YWx1ZSBmcm9tIHRoZSBwb255ZmlsbC5cblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSB7XG5cdFx0cmVzdWx0ID0gJ0BAb2JzZXJ2YWJsZSc7XG5cdH1cblxuXHRyZXR1cm4gcmVzdWx0O1xufTtcbiIsICIvKiBnbG9iYWwgd2luZG93ICovXG5pbXBvcnQgcG9ueWZpbGwgZnJvbSAnLi9wb255ZmlsbC5qcyc7XG5cbnZhciByb290O1xuXG5pZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gIHJvb3QgPSBzZWxmO1xufSBlbHNlIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gd2luZG93O1xufSBlbHNlIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gZ2xvYmFsO1xufSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykge1xuICByb290ID0gbW9kdWxlO1xufSBlbHNlIHtcbiAgcm9vdCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG59XG5cbnZhciByZXN1bHQgPSBwb255ZmlsbChyb290KTtcbmV4cG9ydCBkZWZhdWx0IHJlc3VsdDtcbiIsICJjb25zdCB7IHRvU3RyaW5nIH0gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIERlZXBseSBjbG9uZXMgYSB2YWx1ZSB0byBjcmVhdGUgYSBuZXcgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbG9uZURlZXA8VD4odmFsdWU6IFQpOiBUIHtcbiAgcmV0dXJuIGNsb25lRGVlcEhlbHBlcih2YWx1ZSk7XG59XG5cbmZ1bmN0aW9uIGNsb25lRGVlcEhlbHBlcjxUPih2YWw6IFQsIHNlZW4/OiBNYXA8YW55LCBhbnk+KTogVCB7XG4gIHN3aXRjaCAodG9TdHJpbmcuY2FsbCh2YWwpKSB7XG4gIGNhc2UgXCJbb2JqZWN0IEFycmF5XVwiOiB7XG4gICAgc2VlbiA9IHNlZW4gfHwgbmV3IE1hcDtcbiAgICBpZiAoc2Vlbi5oYXModmFsKSkgcmV0dXJuIHNlZW4uZ2V0KHZhbCk7XG4gICAgY29uc3QgY29weTogVCAmIGFueVtdID0gKHZhbCBhcyBhbnkpLnNsaWNlKDApO1xuICAgIHNlZW4uc2V0KHZhbCwgY29weSk7XG4gICAgY29weS5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCwgaSkge1xuICAgICAgY29weVtpXSA9IGNsb25lRGVlcEhlbHBlcihjaGlsZCwgc2Vlbik7XG4gICAgfSk7XG4gICAgcmV0dXJuIGNvcHk7XG4gIH1cblxuICBjYXNlIFwiW29iamVjdCBPYmplY3RdXCI6IHtcbiAgICBzZWVuID0gc2VlbiB8fCBuZXcgTWFwO1xuICAgIGlmIChzZWVuLmhhcyh2YWwpKSByZXR1cm4gc2Vlbi5nZXQodmFsKTtcbiAgICAvLyBIaWdoIGZpZGVsaXR5IHBvbHlmaWxscyBvZiBPYmplY3QuY3JlYXRlIGFuZCBPYmplY3QuZ2V0UHJvdG90eXBlT2YgYXJlXG4gICAgLy8gcG9zc2libGUgaW4gYWxsIEpTIGVudmlyb25tZW50cywgc28gd2Ugd2lsbCBhc3N1bWUgdGhleSBleGlzdC93b3JrLlxuICAgIGNvbnN0IGNvcHkgPSBPYmplY3QuY3JlYXRlKE9iamVjdC5nZXRQcm90b3R5cGVPZih2YWwpKTtcbiAgICBzZWVuLnNldCh2YWwsIGNvcHkpO1xuICAgIE9iamVjdC5rZXlzKHZhbCkuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29weVtrZXldID0gY2xvbmVEZWVwSGVscGVyKCh2YWwgYXMgYW55KVtrZXldLCBzZWVuKTtcbiAgICB9KTtcbiAgICByZXR1cm4gY29weTtcbiAgfVxuXG4gIGRlZmF1bHQ6XG4gICAgcmV0dXJuIHZhbDtcbiAgfVxufVxuIiwgImltcG9ydCB7IGlzRGV2ZWxvcG1lbnQsIGlzVGVzdCB9IGZyb20gJy4vZW52aXJvbm1lbnQnO1xuXG5mdW5jdGlvbiBpc09iamVjdCh2YWx1ZTogYW55KSB7XG4gIHJldHVybiB2YWx1ZSAhPT0gbnVsbCAmJiB0eXBlb2YgdmFsdWUgPT09IFwib2JqZWN0XCI7XG59XG5cbmZ1bmN0aW9uIGRlZXBGcmVlemUodmFsdWU6IGFueSkge1xuICBjb25zdCB3b3JrU2V0ID0gbmV3IFNldChbdmFsdWVdKTtcbiAgd29ya1NldC5mb3JFYWNoKG9iaiA9PiB7XG4gICAgaWYgKGlzT2JqZWN0KG9iaikpIHtcbiAgICAgIGlmICghT2JqZWN0LmlzRnJvemVuKG9iaikpIE9iamVjdC5mcmVlemUob2JqKTtcbiAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG9iaikuZm9yRWFjaChuYW1lID0+IHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KG9ialtuYW1lXSkpIHdvcmtTZXQuYWRkKG9ialtuYW1lXSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gdmFsdWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtYXliZURlZXBGcmVlemU8VD4ob2JqOiBUKTogVCB7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgJiYgKGlzRGV2ZWxvcG1lbnQoKSB8fCBpc1Rlc3QoKSkpIHtcbiAgICBkZWVwRnJlZXplKG9iaik7XG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cbiIsICJpbXBvcnQgeyBPYnNlcnZlciB9IGZyb20gXCIuL09ic2VydmFibGVcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHk8RSwgQT4oXG4gIG9ic2VydmVyczogU2V0PE9ic2VydmVyPEU+PixcbiAgbWV0aG9kOiBrZXlvZiBPYnNlcnZlcjxFPixcbiAgYXJndW1lbnQ/OiBBLFxuKSB7XG4gIC8vIEluIGNhc2Ugb2JzZXJ2ZXJzIGlzIG1vZGlmaWVkIGR1cmluZyBpdGVyYXRpb24sIHdlIG5lZWQgdG8gY29tbWl0IHRvIHRoZVxuICAvLyBvcmlnaW5hbCBlbGVtZW50cywgd2hpY2ggYWxzbyBwcm92aWRlcyBhbiBvcHBvcnR1bml0eSB0byBmaWx0ZXIgdGhlbSBkb3duXG4gIC8vIHRvIGp1c3QgdGhlIG9ic2VydmVycyB3aXRoIHRoZSBnaXZlbiBtZXRob2QuXG4gIGNvbnN0IG9ic2VydmVyc1dpdGhNZXRob2Q6IE9ic2VydmVyPEU+W10gPSBbXTtcbiAgb2JzZXJ2ZXJzLmZvckVhY2gob2JzID0+IG9ic1ttZXRob2RdICYmIG9ic2VydmVyc1dpdGhNZXRob2QucHVzaChvYnMpKTtcbiAgb2JzZXJ2ZXJzV2l0aE1ldGhvZC5mb3JFYWNoKG9icyA9PiAob2JzIGFzIGFueSlbbWV0aG9kXShhcmd1bWVudCkpO1xufVxuIiwgImltcG9ydCB7IE9ic2VydmFibGUsIE9ic2VydmVyIH0gZnJvbSBcIi4vT2JzZXJ2YWJsZVwiO1xuXG4vLyBMaWtlIE9ic2VydmFibGUucHJvdG90eXBlLm1hcCwgZXhjZXB0IHRoYXQgdGhlIG1hcHBpbmcgZnVuY3Rpb24gY2FuXG4vLyBvcHRpb25hbGx5IHJldHVybiBhIFByb21pc2UgKG9yIGJlIGFzeW5jKS5cbmV4cG9ydCBmdW5jdGlvbiBhc3luY01hcDxWLCBSPihcbiAgb2JzZXJ2YWJsZTogT2JzZXJ2YWJsZTxWPixcbiAgbWFwRm46ICh2YWx1ZTogVikgPT4gUiB8IFByb21pc2VMaWtlPFI+LFxuICBjYXRjaEZuPzogKGVycm9yOiBhbnkpID0+IFIgfCBQcm9taXNlTGlrZTxSPixcbik6IE9ic2VydmFibGU8Uj4ge1xuICByZXR1cm4gbmV3IE9ic2VydmFibGU8Uj4ob2JzZXJ2ZXIgPT4ge1xuICAgIGNvbnN0IHsgbmV4dCwgZXJyb3IsIGNvbXBsZXRlIH0gPSBvYnNlcnZlcjtcbiAgICBsZXQgYWN0aXZlQ2FsbGJhY2tDb3VudCA9IDA7XG4gICAgbGV0IGNvbXBsZXRlZCA9IGZhbHNlO1xuXG4gICAgZnVuY3Rpb24gbWFrZUNhbGxiYWNrKFxuICAgICAgZXhhbWluZXI6IHR5cGVvZiBtYXBGbiB8IHR5cGVvZiBjYXRjaEZuLFxuICAgICAgZGVsZWdhdGU6IHR5cGVvZiBuZXh0IHwgdHlwZW9mIGVycm9yLFxuICAgICk6IChhcmc6IGFueSkgPT4gdm9pZCB7XG4gICAgICBpZiAoZXhhbWluZXIpIHtcbiAgICAgICAgcmV0dXJuIGFyZyA9PiB7XG4gICAgICAgICAgKythY3RpdmVDYWxsYmFja0NvdW50O1xuICAgICAgICAgIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gcmVzb2x2ZShleGFtaW5lcihhcmcpKSkudGhlbihcbiAgICAgICAgICAgIHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgIC0tYWN0aXZlQ2FsbGJhY2tDb3VudDtcbiAgICAgICAgICAgICAgbmV4dCAmJiBuZXh0LmNhbGwob2JzZXJ2ZXIsIHJlc3VsdCk7XG4gICAgICAgICAgICAgIGlmIChjb21wbGV0ZWQpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVyLmNvbXBsZXRlISgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZSA9PiB7XG4gICAgICAgICAgICAgIC0tYWN0aXZlQ2FsbGJhY2tDb3VudDtcbiAgICAgICAgICAgICAgZXJyb3IgJiYgZXJyb3IuY2FsbChvYnNlcnZlciwgZSk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICk7XG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gYXJnID0+IGRlbGVnYXRlICYmIGRlbGVnYXRlLmNhbGwob2JzZXJ2ZXIsIGFyZyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgaGFuZGxlcjogT2JzZXJ2ZXI8Vj4gPSB7XG4gICAgICBuZXh0OiBtYWtlQ2FsbGJhY2sobWFwRm4sIG5leHQpLFxuICAgICAgZXJyb3I6IG1ha2VDYWxsYmFjayhjYXRjaEZuLCBlcnJvciksXG4gICAgICBjb21wbGV0ZSgpIHtcbiAgICAgICAgY29tcGxldGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKCFhY3RpdmVDYWxsYmFja0NvdW50KSB7XG4gICAgICAgICAgY29tcGxldGUgJiYgY29tcGxldGUuY2FsbChvYnNlcnZlcik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGNvbnN0IHN1YiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKGhhbmRsZXIpO1xuICAgIHJldHVybiAoKSA9PiBzdWIudW5zdWJzY3JpYmUoKTtcbiAgfSk7XG59XG4iLCAiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCIuL09ic2VydmFibGVcIjtcblxuLy8gR2VuZXJpYyBpbXBsZW1lbnRhdGlvbnMgb2YgT2JzZXJ2YWJsZS5wcm90b3R5cGUgbWV0aG9kcyBsaWtlIG1hcCBhbmRcbi8vIGZpbHRlciBuZWVkIHRvIGtub3cgaG93IHRvIGNyZWF0ZSBhIG5ldyBPYnNlcnZhYmxlIGZyb20gYW4gT2JzZXJ2YWJsZVxuLy8gc3ViY2xhc3MgKGxpa2UgQ29uY2FzdCBvciBPYnNlcnZhYmxlUXVlcnkpLiBUaG9zZSBtZXRob2RzIGFzc3VtZVxuLy8gKHBlcmhhcHMgdW53aXNlbHk/KSB0aGF0IHRoZXkgY2FuIGNhbGwgdGhlIHN1YnR5cGUncyBjb25zdHJ1Y3RvciB3aXRoIGFcbi8vIFN1YnNjcmliZXIgZnVuY3Rpb24sIGV2ZW4gdGhvdWdoIHRoZSBzdWJjbGFzcyBjb25zdHJ1Y3RvciBtaWdodCBleHBlY3Rcbi8vIGRpZmZlcmVudCBwYXJhbWV0ZXJzLiBEZWZpbmluZyB0aGlzIHN0YXRpYyBTeW1ib2wuc3BlY2llcyBwcm9wZXJ0eSBvblxuLy8gdGhlIHN1YmNsYXNzIGlzIGEgaGludCB0byBnZW5lcmljIE9ic2VydmFibGUgY29kZSB0byB1c2UgdGhlIGRlZmF1bHRcbi8vIGNvbnN0cnVjdG9yIGluc3RlYWQgb2YgdHJ5aW5nIHRvIGRvIGBuZXcgU3ViY2xhc3Mob2JzZXJ2ZXIgPT4gLi4uKWAuXG5leHBvcnQgZnVuY3Rpb24gZml4T2JzZXJ2YWJsZVN1YmNsYXNzPFxuICBTIGV4dGVuZHMgbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gT2JzZXJ2YWJsZTxhbnk+LFxuPihzdWJjbGFzczogUyk6IFMge1xuICBmdW5jdGlvbiBzZXQoa2V5OiBzeW1ib2wgfCBzdHJpbmcpIHtcbiAgICAvLyBPYmplY3QuZGVmaW5lUHJvcGVydHkgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgdGhlIFN5bWJvbC5zcGVjaWVzXG4gICAgLy8gcHJvcGVydHkgaXMgYSBnZXR0ZXIgYnkgZGVmYXVsdCBpbiBtb2Rlcm4gSlMgZW52aXJvbm1lbnRzLCBzbyB3ZVxuICAgIC8vIGNhbid0IGFzc2lnbiB0byBpdCB3aXRoIGEgbm9ybWFsIGFzc2lnbm1lbnQgZXhwcmVzc2lvbi5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc3ViY2xhc3MsIGtleSwgeyB2YWx1ZTogT2JzZXJ2YWJsZSB9KTtcbiAgfVxuICBpZiAodHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIFN5bWJvbC5zcGVjaWVzKSB7XG4gICAgc2V0KFN5bWJvbC5zcGVjaWVzKTtcbiAgfVxuICAvLyBUaGUgXCJAQHNwZWNpZXNcIiBzdHJpbmcgaXMgdXNlZCBhcyBhIGZha2UgU3ltYm9sLnNwZWNpZXMgdmFsdWUgaW4gc29tZVxuICAvLyBwb2x5ZmlsbCBzeXN0ZW1zIChpbmNsdWRpbmcgdGhlIFN5bWJvbFNwZWNpZXMgdmFyaWFibGUgdXNlZCBieVxuICAvLyB6ZW4tb2JzZXJ2YWJsZSksIHNvIHdlIHNob3VsZCBzZXQgaXQgYXMgd2VsbCwgdG8gYmUgc2FmZS5cbiAgc2V0KFwiQEBzcGVjaWVzXCIpO1xuICByZXR1cm4gc3ViY2xhc3M7XG59XG4iLCAiaW1wb3J0IHsgT2JzZXJ2YWJsZSwgT2JzZXJ2ZXIsIE9ic2VydmFibGVTdWJzY3JpcHRpb24sIFN1YnNjcmliZXIgfSBmcm9tIFwiLi9PYnNlcnZhYmxlXCI7XG5pbXBvcnQgeyBpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5IH0gZnJvbSBcIi4vaXRlcmF0aW9uXCI7XG5pbXBvcnQgeyBmaXhPYnNlcnZhYmxlU3ViY2xhc3MgfSBmcm9tIFwiLi9zdWJjbGFzc2luZ1wiO1xuXG50eXBlIE1heWJlQXN5bmM8VD4gPSBUIHwgUHJvbWlzZUxpa2U8VD47XG5cbmZ1bmN0aW9uIGlzUHJvbWlzZUxpa2U8VD4odmFsdWU6IE1heWJlQXN5bmM8VD4pOiB2YWx1ZSBpcyBQcm9taXNlTGlrZTxUPiB7XG4gIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgKHZhbHVlIGFzIGFueSkudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vLyBBbnkgaW5kaXZpZHVhbCBTb3VyY2U8VD4gY2FuIGJlIGFuIE9ic2VydmFibGU8VD4gb3IgYSBwcm9taXNlIGZvciBvbmUuXG50eXBlIFNvdXJjZTxUPiA9IE1heWJlQXN5bmM8T2JzZXJ2YWJsZTxUPj47XG5cbmV4cG9ydCB0eXBlIENvbmNhc3RTb3VyY2VzSXRlcmFibGU8VD4gPSBJdGVyYWJsZTxTb3VyY2U8VD4+O1xuXG4vLyBBIENvbmNhc3Q8VD4gb2JzZXJ2YWJsZSBjb25jYXRlbmF0ZXMgdGhlIGdpdmVuIHNvdXJjZXMgaW50byBhIHNpbmdsZVxuLy8gbm9uLW92ZXJsYXBwaW5nIHNlcXVlbmNlIG9mIFRzLCBhdXRvbWF0aWNhbGx5IHVud3JhcHBpbmcgYW55IHByb21pc2VzLFxuLy8gYW5kIGJyb2FkY2FzdHMgdGhlIFQgZWxlbWVudHMgb2YgdGhhdCBzZXF1ZW5jZSB0byBhbnkgbnVtYmVyIG9mXG4vLyBzdWJzY3JpYmVycywgYWxsIHdpdGhvdXQgY3JlYXRpbmcgYSBidW5jaCBvZiBpbnRlcm1lZGlhcnkgT2JzZXJ2YWJsZVxuLy8gd3JhcHBlciBvYmplY3RzLlxuLy9cbi8vIEV2ZW4gdGhvdWdoIGFueSBudW1iZXIgb2Ygb2JzZXJ2ZXJzIGNhbiBzdWJzY3JpYmUgdG8gdGhlIENvbmNhc3QsIGVhY2hcbi8vIHNvdXJjZSBvYnNlcnZhYmxlIGlzIGd1YXJhbnRlZWQgdG8gcmVjZWl2ZSBhdCBtb3N0IG9uZSBzdWJzY3JpYmUgY2FsbCxcbi8vIGFuZCB0aGUgcmVzdWx0cyBhcmUgbXVsdGljYXN0IHRvIGFsbCBvYnNlcnZlcnMuXG4vL1xuLy8gSW4gYWRkaXRpb24gdG8gYnJvYWRjYXN0aW5nIGV2ZXJ5IG5leHQvZXJyb3IgbWVzc2FnZSB0byB0aGlzLm9ic2VydmVycyxcbi8vIHRoZSBDb25jYXN0IHN0b3JlcyB0aGUgbW9zdCByZWNlbnQgbWVzc2FnZSB1c2luZyB0aGlzLmxhdGVzdCwgc28gYW55XG4vLyBuZXcgb2JzZXJ2ZXJzIGNhbiBpbW1lZGlhdGVseSByZWNlaXZlIHRoZSBsYXRlc3QgbWVzc2FnZSwgZXZlbiBpZiBpdFxuLy8gd2FzIG9yaWdpbmFsbHkgZGVsaXZlcmVkIGluIHRoZSBwYXN0LiBUaGlzIGJlaGF2aW9yIG1lYW5zIHdlIGNhbiBhc3N1bWVcbi8vIGV2ZXJ5IGFjdGl2ZSBvYnNlcnZlciBpbiB0aGlzLm9ic2VydmVycyBoYXMgcmVjZWl2ZWQgdGhlIHNhbWUgbW9zdFxuLy8gcmVjZW50IG1lc3NhZ2UuXG4vL1xuLy8gV2l0aCB0aGUgZXhjZXB0aW9uIG9mIHRoaXMubGF0ZXN0IHJlcGxheSwgYSBDb25jYXN0IGlzIGEgXCJob3RcIlxuLy8gb2JzZXJ2YWJsZSBpbiB0aGUgc2Vuc2UgdGhhdCBpdCBkb2VzIG5vdCByZXBsYXkgcGFzdCByZXN1bHRzIGZyb20gdGhlXG4vLyBiZWdpbm5pbmcgb2YgdGltZSBmb3IgZWFjaCBuZXcgb2JzZXJ2ZXIuXG4vL1xuLy8gQ291bGQgd2UgaGF2ZSB1c2VkIHNvbWUgZXhpc3RpbmcgUnhKUyBjbGFzcyBpbnN0ZWFkPyBDb25jYXN0PFQ+IGlzXG4vLyBzaW1pbGFyIHRvIGEgQmVoYXZpb3JTdWJqZWN0PFQ+LCBiZWNhdXNlIGl0IGlzIG11bHRpY2FzdCBhbmQgcmVkZWxpdmVyc1xuLy8gdGhlIGxhdGVzdCBuZXh0L2Vycm9yIG1lc3NhZ2UgdG8gbmV3IHN1YnNjcmliZXJzLiBVbmxpa2UgU3ViamVjdDxUPixcbi8vIENvbmNhc3Q8VD4gZG9lcyBub3QgZXhwb3NlIGFuIE9ic2VydmVyPFQ+IGludGVyZmFjZSAodGhpcy5oYW5kbGVycyBpc1xuLy8gaW50ZW50aW9uYWxseSBwcml2YXRlKSwgc2luY2UgQ29uY2FzdDxUPiBnZXRzIGl0cyBpbnB1dHMgZnJvbSB0aGVcbi8vIGNvbmNhdGVuYXRlZCBzb3VyY2VzLiBJZiB3ZSBldmVyIHN3aXRjaCB0byBSeEpTLCB0aGVyZSBtYXkgYmUgc29tZVxuLy8gdmFsdWUgaW4gcmV1c2luZyB0aGVpciBjb2RlLCBidXQgZm9yIG5vdyB3ZSB1c2UgemVuLW9ic2VydmFibGUsIHdoaWNoXG4vLyBkb2VzIG5vdCBjb250YWluIGFueSBTdWJqZWN0IGltcGxlbWVudGF0aW9ucy5cbmV4cG9ydCBjbGFzcyBDb25jYXN0PFQ+IGV4dGVuZHMgT2JzZXJ2YWJsZTxUPiB7XG4gIC8vIEFjdGl2ZSBvYnNlcnZlcnMgcmVjZWl2aW5nIGJyb2FkY2FzdCBtZXNzYWdlcy4gVGhhbmtzIHRvIHRoaXMubGF0ZXN0LFxuICAvLyB3ZSBjYW4gYXNzdW1lIGFsbCBvYnNlcnZlcnMgaW4gdGhpcyBTZXQgaGF2ZSByZWNlaXZlZCB0aGUgc2FtZSBtb3N0XG4gIC8vIHJlY2VudCBtZXNzYWdlLCB0aG91Z2ggcG9zc2libHkgYXQgZGlmZmVyZW50IHRpbWVzIGluIHRoZSBwYXN0LlxuICBwcml2YXRlIG9ic2VydmVycyA9IG5ldyBTZXQ8T2JzZXJ2ZXI8VD4+KCk7XG5cbiAgLy8gVGhpcyBwcm9wZXJ0eSBzdGFydHMgb2ZmIHVuZGVmaW5lZCB0byBpbmRpY2F0ZSB0aGUgaW5pdGlhbFxuICAvLyBzdWJzY3JpcHRpb24gaGFzIG5vdCB5ZXQgYmVndW4sIHRoZW4gcG9pbnRzIHRvIGVhY2ggc291cmNlXG4gIC8vIHN1YnNjcmlwdGlvbiBpbiB0dXJuLCBhbmQgZmluYWxseSBiZWNvbWVzIG51bGwgYWZ0ZXIgdGhlIHNvdXJjZXMgaGF2ZVxuICAvLyBiZWVuIGV4aGF1c3RlZC4gQWZ0ZXIgdGhhdCwgaXQgc3RheXMgbnVsbC5cbiAgcHJpdmF0ZSBzdWI/OiBPYnNlcnZhYmxlU3Vic2NyaXB0aW9uIHwgbnVsbDtcblxuICAvLyBOb3Qgb25seSBjYW4gdGhlIGluZGl2aWR1YWwgZWxlbWVudHMgb2YgdGhlIGl0ZXJhYmxlIGJlIHByb21pc2VzLCBidXRcbiAgLy8gYWxzbyB0aGUgaXRlcmFibGUgaXRzZWxmIGNhbiBiZSB3cmFwcGVkIGluIGEgcHJvbWlzZS5cbiAgY29uc3RydWN0b3Ioc291cmNlczogTWF5YmVBc3luYzxDb25jYXN0U291cmNlc0l0ZXJhYmxlPFQ+PiB8IFN1YnNjcmliZXI8VD4pIHtcbiAgICBzdXBlcihvYnNlcnZlciA9PiB7XG4gICAgICB0aGlzLmFkZE9ic2VydmVyKG9ic2VydmVyKTtcbiAgICAgIHJldHVybiAoKSA9PiB0aGlzLnJlbW92ZU9ic2VydmVyKG9ic2VydmVyKTtcbiAgICB9KTtcblxuICAgIC8vIFN1cHByZXNzIHJlamVjdGlvbiB3YXJuaW5ncyBmb3IgdGhpcy5wcm9taXNlLCBzaW5jZSBpdCdzIHBlcmZlY3RseVxuICAgIC8vIGFjY2VwdGFibGUgdG8gcGF5IG5vIGF0dGVudGlvbiB0byB0aGlzLnByb21pc2UgaWYgeW91J3JlIGNvbnN1bWluZ1xuICAgIC8vIHRoZSByZXN1bHRzIHRocm91Z2ggdGhlIG5vcm1hbCBvYnNlcnZhYmxlIEFQSS5cbiAgICB0aGlzLnByb21pc2UuY2F0Y2goXyA9PiB7fSk7XG5cbiAgICAvLyBJZiBzb21lb25lIGFjY2lkZW50YWxseSB0cmllcyB0byBjcmVhdGUgYSBDb25jYXN0IHVzaW5nIGEgc3Vic2NyaWJlclxuICAgIC8vIGZ1bmN0aW9uLCByZWNvdmVyIGJ5IGNyZWF0aW5nIGFuIE9ic2VydmFibGUgZnJvbSB0aGF0IHN1YnNjcmliZXIgYW5kXG4gICAgLy8gdXNpbmcgaXQgYXMgdGhlIHNvdXJjZS5cbiAgICBpZiAodHlwZW9mIHNvdXJjZXMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgc291cmNlcyA9IFtuZXcgT2JzZXJ2YWJsZShzb3VyY2VzKV07XG4gICAgfVxuXG4gICAgaWYgKGlzUHJvbWlzZUxpa2Uoc291cmNlcykpIHtcbiAgICAgIHNvdXJjZXMudGhlbihcbiAgICAgICAgaXRlcmFibGUgPT4gdGhpcy5zdGFydChpdGVyYWJsZSksXG4gICAgICAgIHRoaXMuaGFuZGxlcnMuZXJyb3IsXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN0YXJ0KHNvdXJjZXMpO1xuICAgIH1cbiAgfVxuXG4gIC8vIEEgY29uc3VtYWJsZSBhcnJheSBvZiBzb3VyY2Ugb2JzZXJ2YWJsZXMsIGluY3JlbWVudGFsbHkgY29uc3VtZWRcbiAgLy8gZWFjaCB0aW1lIHRoaXMuaGFuZGxlcnMuY29tcGxldGUgaXMgY2FsbGVkLlxuICBwcml2YXRlIHNvdXJjZXM6IFNvdXJjZTxUPltdO1xuXG4gIHByaXZhdGUgc3RhcnQoc291cmNlczogQ29uY2FzdFNvdXJjZXNJdGVyYWJsZTxUPikge1xuICAgIGlmICh0aGlzLnN1YiAhPT0gdm9pZCAwKSByZXR1cm47XG5cbiAgICAvLyBJbiBwcmFjdGljZSwgc291cmNlcyBpcyBtb3N0IG9mdGVuIHNpbXBseSBhbiBBcnJheSBvZiBvYnNlcnZhYmxlcy5cbiAgICAvLyBUT0RPIENvbnNpZGVyIHVzaW5nIHNvdXJjZXNbU3ltYm9sLml0ZXJhdG9yXSgpIHRvIHRha2UgYWR2YW50YWdlXG4gICAgLy8gb2YgdGhlIGxhemluZXNzIG9mIG5vbi1BcnJheSBpdGVyYWJsZXMuXG4gICAgdGhpcy5zb3VyY2VzID0gQXJyYXkuZnJvbShzb3VyY2VzKTtcblxuICAgIC8vIENhbGxpbmcgdGhpcy5oYW5kbGVycy5jb21wbGV0ZSgpIGtpY2tzIG9mZiBjb25zdW1wdGlvbiBvZiB0aGUgZmlyc3RcbiAgICAvLyBzb3VyY2Ugb2JzZXJ2YWJsZS4gSXQncyB0ZW1wdGluZyB0byBkbyB0aGlzIHN0ZXAgbGF6aWx5IGluXG4gICAgLy8gYWRkT2JzZXJ2ZXIsIGJ1dCB0aGlzLnByb21pc2UgY2FuIGJlIGFjY2Vzc2VkIHdpdGhvdXQgY2FsbGluZ1xuICAgIC8vIGFkZE9ic2VydmVyLCBzbyBjb25zdW1wdGlvbiBuZWVkcyB0byBiZWdpbiBlYWdlcmx5LlxuICAgIHRoaXMuaGFuZGxlcnMuY29tcGxldGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVsaXZlckxhc3RNZXNzYWdlKG9ic2VydmVyOiBPYnNlcnZlcjxUPikge1xuICAgIGlmICh0aGlzLmxhdGVzdCkge1xuICAgICAgY29uc3QgbmV4dE9yRXJyb3IgPSB0aGlzLmxhdGVzdFswXTtcbiAgICAgIGNvbnN0IG1ldGhvZCA9IG9ic2VydmVyW25leHRPckVycm9yXTtcbiAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgbWV0aG9kLmNhbGwob2JzZXJ2ZXIsIHRoaXMubGF0ZXN0WzFdKTtcbiAgICAgIH1cbiAgICAgIC8vIElmIHRoZSBzdWJzY3JpcHRpb24gaXMgYWxyZWFkeSBjbG9zZWQsIGFuZCB0aGUgbGFzdCBtZXNzYWdlIHdhc1xuICAgICAgLy8gYSAnbmV4dCcgbWVzc2FnZSwgc2ltdWxhdGUgZGVsaXZlcnkgb2YgdGhlIGZpbmFsICdjb21wbGV0ZSdcbiAgICAgIC8vIG1lc3NhZ2UgYWdhaW4uXG4gICAgICBpZiAodGhpcy5zdWIgPT09IG51bGwgJiZcbiAgICAgICAgICBuZXh0T3JFcnJvciA9PT0gXCJuZXh0XCIgJiZcbiAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSkge1xuICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIE5vdGU6IGNsZWFudXAgb2JzZXJ2ZXJzIGRvIG5vdCBjb3VudCB0b3dhcmRzIHRoaXMgdG90YWwuXG4gIHByaXZhdGUgYWRkQ291bnQgPSAwO1xuXG4gIHB1YmxpYyBhZGRPYnNlcnZlcihvYnNlcnZlcjogT2JzZXJ2ZXI8VD4pIHtcbiAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzLmhhcyhvYnNlcnZlcikpIHtcbiAgICAgIC8vIEltbWVkaWF0ZWx5IGRlbGl2ZXIgdGhlIG1vc3QgcmVjZW50IG1lc3NhZ2UsIHNvIHdlIGNhbiBhbHdheXNcbiAgICAgIC8vIGJlIHN1cmUgYWxsIG9ic2VydmVycyBoYXZlIHRoZSBsYXRlc3QgaW5mb3JtYXRpb24uXG4gICAgICB0aGlzLmRlbGl2ZXJMYXN0TWVzc2FnZShvYnNlcnZlcik7XG4gICAgICB0aGlzLm9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuICAgICAgKyt0aGlzLmFkZENvdW50O1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyByZW1vdmVPYnNlcnZlcihcbiAgICBvYnNlcnZlcjogT2JzZXJ2ZXI8VD4sXG4gICAgcXVpZXRseT86IGJvb2xlYW4sXG4gICkge1xuICAgIGlmICh0aGlzLm9ic2VydmVycy5kZWxldGUob2JzZXJ2ZXIpICYmXG4gICAgICAgIC0tdGhpcy5hZGRDb3VudCA8IDEgJiZcbiAgICAgICAgIXF1aWV0bHkpIHtcbiAgICAgIC8vIEluIGNhc2UgdGhlcmUgYXJlIHN0aWxsIGFueSBjbGVhbnVwIG9ic2VydmVycyBpbiB0aGlzLm9ic2VydmVycyxcbiAgICAgIC8vIGFuZCBubyBlcnJvciBvciBjb21wbGV0aW9uIGhhcyBiZWVuIGJyb2FkY2FzdCB5ZXQsIG1ha2Ugc3VyZVxuICAgICAgLy8gdGhvc2Ugb2JzZXJ2ZXJzIHJlY2VpdmUgYW4gZXJyb3IgdGhhdCB0ZXJtaW5hdGVzIHRoZW0uXG4gICAgICB0aGlzLmhhbmRsZXJzLmVycm9yKG5ldyBFcnJvcihcIk9ic2VydmFibGUgY2FuY2VsbGVkIHByZW1hdHVyZWx5XCIpKTtcbiAgICB9XG4gIH1cblxuICAvLyBBbnkgQ29uY2FzdCBvYmplY3QgY2FuIGJlIHRyaXZpYWxseSBjb252ZXJ0ZWQgdG8gYSBQcm9taXNlLCB3aXRob3V0XG4gIC8vIGhhdmluZyB0byBjcmVhdGUgYSBuZXcgd3JhcHBlciBPYnNlcnZhYmxlLiBUaGlzIHByb21pc2UgcHJvdmlkZXMgYW5cbiAgLy8gZWFzeSB3YXkgdG8gb2JzZXJ2ZSB0aGUgZmluYWwgc3RhdGUgb2YgdGhlIENvbmNhc3QuXG4gIHByaXZhdGUgcmVzb2x2ZTogKHJlc3VsdD86IFQgfCBQcm9taXNlTGlrZTxUPikgPT4gdm9pZDtcbiAgcHJpdmF0ZSByZWplY3Q6IChyZWFzb246IGFueSkgPT4gdm9pZDtcbiAgcHVibGljIHJlYWRvbmx5IHByb21pc2UgPSBuZXcgUHJvbWlzZTxUPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgdGhpcy5yZXNvbHZlID0gcmVzb2x2ZTtcbiAgICB0aGlzLnJlamVjdCA9IHJlamVjdDtcbiAgfSk7XG5cbiAgLy8gTmFtZSBhbmQgYXJndW1lbnQgb2YgdGhlIG1vc3QgcmVjZW50bHkgaW52b2tlZCBvYnNlcnZlciBtZXRob2QsIHVzZWRcbiAgLy8gdG8gZGVsaXZlciBsYXRlc3QgcmVzdWx0cyBpbW1lZGlhdGVseSB0byBuZXcgb2JzZXJ2ZXJzLlxuICBwcml2YXRlIGxhdGVzdD86IFtcIm5leHRcIiB8IFwiZXJyb3JcIiwgYW55XTtcblxuICAvLyBCb3VuZCBoYW5kbGVyIGZ1bmN0aW9ucyB0aGF0IGNhbiBiZSByZXVzZWQgZm9yIGV2ZXJ5IGludGVybmFsXG4gIC8vIHN1YnNjcmlwdGlvbi5cbiAgcHJpdmF0ZSBoYW5kbGVycyA9IHtcbiAgICBuZXh0OiAocmVzdWx0OiBUKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdWIgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5sYXRlc3QgPSBbXCJuZXh0XCIsIHJlc3VsdF07XG4gICAgICAgIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkodGhpcy5vYnNlcnZlcnMsIFwibmV4dFwiLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlcnJvcjogKGVycm9yOiBhbnkpID0+IHtcbiAgICAgIGNvbnN0IHsgc3ViIH0gPSB0aGlzO1xuICAgICAgaWYgKHN1YiAhPT0gbnVsbCkge1xuICAgICAgICAvLyBEZWxheSB1bnN1YnNjcmliaW5nIGZyb20gdGhlIHVuZGVybHlpbmcgc3Vic2NyaXB0aW9uIHNsaWdodGx5LFxuICAgICAgICAvLyBzbyB0aGF0IGltbWVkaWF0ZWx5IHN1YnNjcmliaW5nIGFub3RoZXIgb2JzZXJ2ZXIgY2FuIGtlZXAgdGhlXG4gICAgICAgIC8vIHN1YnNjcmlwdGlvbiBhY3RpdmUuXG4gICAgICAgIGlmIChzdWIpIFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gc3ViLnVuc3Vic2NyaWJlKCkpO1xuICAgICAgICB0aGlzLnN1YiA9IG51bGw7XG4gICAgICAgIHRoaXMubGF0ZXN0ID0gW1wiZXJyb3JcIiwgZXJyb3JdO1xuICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XG4gICAgICAgIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHkodGhpcy5vYnNlcnZlcnMsIFwiZXJyb3JcIiwgZXJyb3IpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBjb21wbGV0ZTogKCkgPT4ge1xuICAgICAgaWYgKHRoaXMuc3ViICE9PSBudWxsKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5zb3VyY2VzLnNoaWZ0KCk7XG4gICAgICAgIGlmICghdmFsdWUpIHtcbiAgICAgICAgICB0aGlzLnN1YiA9IG51bGw7XG4gICAgICAgICAgaWYgKHRoaXMubGF0ZXN0ICYmXG4gICAgICAgICAgICAgIHRoaXMubGF0ZXN0WzBdID09PSBcIm5leHRcIikge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHRoaXMubGF0ZXN0WzFdKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIFdlIGRvIG5vdCBzdG9yZSB0aGlzLmxhdGVzdCA9IFtcImNvbXBsZXRlXCJdLCBiZWNhdXNlIGRvaW5nIHNvXG4gICAgICAgICAgLy8gZGlzY2FyZHMgdXNlZnVsIGluZm9ybWF0aW9uIGFib3V0IHRoZSBwcmV2aW91cyBuZXh0IChvclxuICAgICAgICAgIC8vIGVycm9yKSBtZXNzYWdlLiBJbnN0ZWFkLCBpZiBuZXcgb2JzZXJ2ZXJzIHN1YnNjcmliZSBhZnRlclxuICAgICAgICAgIC8vIHRoaXMgQ29uY2FzdCBoYXMgY29tcGxldGVkLCB0aGV5IHdpbGwgcmVjZWl2ZSB0aGUgZmluYWxcbiAgICAgICAgICAvLyAnbmV4dCcgbWVzc2FnZSAodW5sZXNzIHRoZXJlIHdhcyBhbiBlcnJvcikgaW1tZWRpYXRlbHlcbiAgICAgICAgICAvLyBmb2xsb3dlZCBieSBhICdjb21wbGV0ZScgbWVzc2FnZSAoc2VlIGFkZE9ic2VydmVyKS5cbiAgICAgICAgICBpdGVyYXRlT2JzZXJ2ZXJzU2FmZWx5KHRoaXMub2JzZXJ2ZXJzLCBcImNvbXBsZXRlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZUxpa2UodmFsdWUpKSB7XG4gICAgICAgICAgdmFsdWUudGhlbihvYnMgPT4gdGhpcy5zdWIgPSBvYnMuc3Vic2NyaWJlKHRoaXMuaGFuZGxlcnMpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnN1YiA9IHZhbHVlLnN1YnNjcmliZSh0aGlzLmhhbmRsZXJzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG4gIH07XG5cbiAgcHVibGljIGNsZWFudXAoY2FsbGJhY2s6ICgpID0+IGFueSkge1xuICAgIGxldCBjYWxsZWQgPSBmYWxzZTtcbiAgICBjb25zdCBvbmNlID0gKCkgPT4ge1xuICAgICAgaWYgKCFjYWxsZWQpIHtcbiAgICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gUmVtb3ZpbmcgYSBjbGVhbnVwIG9ic2VydmVyIHNob3VsZCBub3QgdW5zdWJzY3JpYmUgZnJvbSB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBPYnNlcnZhYmxlLCBzbyB0aGUgb25seSByZW1vdmVPYnNlcnZlciBiZWhhdmlvciB3ZVxuICAgICAgICAvLyBuZWVkIGhlcmUgaXMgdG8gZGVsZXRlIG9ic2VydmVyIGZyb20gdGhpcy5vYnNlcnZlcnMuXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLmRlbGV0ZShvYnNlcnZlcik7XG4gICAgICAgIGNhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGNvbnN0IG9ic2VydmVyID0ge1xuICAgICAgbmV4dDogb25jZSxcbiAgICAgIGVycm9yOiBvbmNlLFxuICAgICAgY29tcGxldGU6IG9uY2UsXG4gICAgfTtcbiAgICBjb25zdCBjb3VudCA9IHRoaXMuYWRkQ291bnQ7XG4gICAgdGhpcy5hZGRPYnNlcnZlcihvYnNlcnZlcik7XG4gICAgLy8gTm9ybWFsbHkgYWRkT2JzZXJ2ZXIgaW5jcmVtZW50cyB0aGlzLmFkZENvdW50LCBidXQgd2UgY2FuIFwiaGlkZVwiXG4gICAgLy8gY2xlYW51cCBvYnNlcnZlcnMgYnkgcmVzdG9yaW5nIHRoaXMuYWRkQ291bnQgdG8gaXRzIHByZXZpb3VzIHZhbHVlXG4gICAgLy8gYWZ0ZXIgYWRkaW5nIGFueSBjbGVhbnVwIG9ic2VydmVyLlxuICAgIHRoaXMuYWRkQ291bnQgPSBjb3VudDtcbiAgfVxuXG4gIC8vIEEgcHVibGljIHdheSB0byBhYm9ydCBvYnNlcnZhdGlvbiBhbmQgYnJvYWRjYXN0LlxuICBwdWJsaWMgY2FuY2VsID0gKHJlYXNvbjogYW55KSA9PiB7XG4gICAgdGhpcy5yZWplY3QocmVhc29uKTtcbiAgICB0aGlzLnNvdXJjZXMgPSBbXTtcbiAgICB0aGlzLmhhbmRsZXJzLmNvbXBsZXRlKCk7XG4gIH1cbn1cblxuLy8gTmVjZXNzYXJ5IGJlY2F1c2UgdGhlIENvbmNhc3QgY29uc3RydWN0b3IgaGFzIGEgZGlmZmVyZW50IHNpZ25hdHVyZVxuLy8gdGhhbiB0aGUgT2JzZXJ2YWJsZSBjb25zdHJ1Y3Rvci5cbmZpeE9ic2VydmFibGVTdWJjbGFzcyhDb25jYXN0KTtcbiIsICJleHBvcnQgZnVuY3Rpb24gaXNOb25FbXB0eUFycmF5PFQ+KHZhbHVlPzogQXJyYXlMaWtlPFQ+KTogdmFsdWUgaXMgQXJyYXk8VD4ge1xuICByZXR1cm4gQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiYgdmFsdWUubGVuZ3RoID4gMDtcbn1cbiIsICJpbXBvcnQgeyBFeGVjdXRpb25SZXN1bHQgfSBmcm9tICdncmFwaHFsJztcblxuZXhwb3J0IGZ1bmN0aW9uIGdyYXBoUUxSZXN1bHRIYXNFcnJvcihyZXN1bHQ6IEV4ZWN1dGlvblJlc3VsdCk6IGJvb2xlYW4ge1xuICByZXR1cm4gKHJlc3VsdC5lcnJvcnMgJiYgcmVzdWx0LmVycm9ycy5sZW5ndGggPiAwKSB8fCBmYWxzZTtcbn1cbiIsICJleHBvcnQgY29uc3QgY2FuVXNlV2Vha01hcCA9IHR5cGVvZiBXZWFrTWFwID09PSAnZnVuY3Rpb24nICYmICEoXG4gIHR5cGVvZiBuYXZpZ2F0b3IgPT09ICdvYmplY3QnICYmXG4gIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnXG4pO1xuIiwgImltcG9ydCB7IFR1cGxlVG9JbnRlcnNlY3Rpb24gfSBmcm9tICcuL21lcmdlRGVlcCc7XG5cbi8qKlxuICogTWVyZ2VzIHRoZSBwcm92aWRlZCBvYmplY3RzIHNoYWxsb3dseSBhbmQgcmVtb3Zlc1xuICogYWxsIHByb3BlcnRpZXMgd2l0aCBhbiBgdW5kZWZpbmVkYCB2YWx1ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY29tcGFjdDxUQXJncyBleHRlbmRzIGFueVtdPihcbiAgLi4ub2JqZWN0czogVEFyZ3Ncbik6IFR1cGxlVG9JbnRlcnNlY3Rpb248VEFyZ3M+IHtcbiAgY29uc3QgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBvYmplY3RzLmZvckVhY2gob2JqID0+IHtcbiAgICBpZiAoIW9iaikgcmV0dXJuO1xuICAgIE9iamVjdC5rZXlzKG9iaikuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgdmFsdWUgPSAob2JqIGFzIGFueSlba2V5XTtcbiAgICAgIGlmICh2YWx1ZSAhPT0gdm9pZCAwKSB7XG4gICAgICAgIHJlc3VsdFtrZXldID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSk7XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG4iLCAiaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBmcm9tRXJyb3I8VD4oZXJyb3JWYWx1ZTogYW55KTogT2JzZXJ2YWJsZTxUPiB7XG4gIHJldHVybiBuZXcgT2JzZXJ2YWJsZTxUPihvYnNlcnZlciA9PiB7XG4gICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3JWYWx1ZSk7XG4gIH0pO1xufVxuIiwgImV4cG9ydCB0eXBlIFNlcnZlckVycm9yID0gRXJyb3IgJiB7XG4gIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgcmVzdWx0OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBzdGF0dXNDb2RlOiBudW1iZXI7XG59O1xuXG5leHBvcnQgY29uc3QgdGhyb3dTZXJ2ZXJFcnJvciA9IChcbiAgcmVzcG9uc2U6IFJlc3BvbnNlLFxuICByZXN1bHQ6IGFueSxcbiAgbWVzc2FnZTogc3RyaW5nXG4pID0+IHtcbiAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IobWVzc2FnZSkgYXMgU2VydmVyRXJyb3I7XG4gIGVycm9yLm5hbWUgPSAnU2VydmVyRXJyb3InO1xuICBlcnJvci5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICBlcnJvci5zdGF0dXNDb2RlID0gcmVzcG9uc2Uuc3RhdHVzO1xuICBlcnJvci5yZXN1bHQgPSByZXN1bHQ7XG4gIHRocm93IGVycm9yO1xufTtcbiIsICJpbXBvcnQgeyBJbnZhcmlhbnRFcnJvciB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbmltcG9ydCB7IEdyYXBoUUxSZXF1ZXN0IH0gZnJvbSAnLi4vY29yZSc7XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0ZU9wZXJhdGlvbihvcGVyYXRpb246IEdyYXBoUUxSZXF1ZXN0KTogR3JhcGhRTFJlcXVlc3Qge1xuICBjb25zdCBPUEVSQVRJT05fRklFTERTID0gW1xuICAgICdxdWVyeScsXG4gICAgJ29wZXJhdGlvbk5hbWUnLFxuICAgICd2YXJpYWJsZXMnLFxuICAgICdleHRlbnNpb25zJyxcbiAgICAnY29udGV4dCcsXG4gIF07XG4gIGZvciAobGV0IGtleSBvZiBPYmplY3Qua2V5cyhvcGVyYXRpb24pKSB7XG4gICAgaWYgKE9QRVJBVElPTl9GSUVMRFMuaW5kZXhPZihrZXkpIDwgMCkge1xuICAgICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKGBpbGxlZ2FsIGFyZ3VtZW50OiAke2tleX1gKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gb3BlcmF0aW9uO1xufVxuIiwgImltcG9ydCB7IEdyYXBoUUxSZXF1ZXN0LCBPcGVyYXRpb24gfSBmcm9tICcuLi9jb3JlJztcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU9wZXJhdGlvbihcbiAgc3RhcnRpbmc6IGFueSxcbiAgb3BlcmF0aW9uOiBHcmFwaFFMUmVxdWVzdCxcbik6IE9wZXJhdGlvbiB7XG4gIGxldCBjb250ZXh0ID0geyAuLi5zdGFydGluZyB9O1xuICBjb25zdCBzZXRDb250ZXh0ID0gKG5leHQ6IGFueSkgPT4ge1xuICAgIGlmICh0eXBlb2YgbmV4dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgY29udGV4dCA9IHsgLi4uY29udGV4dCwgLi4ubmV4dChjb250ZXh0KSB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBjb250ZXh0ID0geyAuLi5jb250ZXh0LCAuLi5uZXh0IH07XG4gICAgfVxuICB9O1xuICBjb25zdCBnZXRDb250ZXh0ID0gKCkgPT4gKHsgLi4uY29udGV4dCB9KTtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3BlcmF0aW9uLCAnc2V0Q29udGV4dCcsIHtcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB2YWx1ZTogc2V0Q29udGV4dCxcbiAgfSk7XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9wZXJhdGlvbiwgJ2dldENvbnRleHQnLCB7XG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgdmFsdWU6IGdldENvbnRleHQsXG4gIH0pO1xuXG4gIHJldHVybiBvcGVyYXRpb24gYXMgT3BlcmF0aW9uO1xufVxuIiwgImltcG9ydCB7IEdyYXBoUUxSZXF1ZXN0LCBPcGVyYXRpb24gfSBmcm9tICcuLi9jb3JlJztcbmltcG9ydCB7IGdldE9wZXJhdGlvbk5hbWUgfSBmcm9tICcuLi8uLi91dGlsaXRpZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNmb3JtT3BlcmF0aW9uKG9wZXJhdGlvbjogR3JhcGhRTFJlcXVlc3QpOiBHcmFwaFFMUmVxdWVzdCB7XG4gIGNvbnN0IHRyYW5zZm9ybWVkT3BlcmF0aW9uOiBHcmFwaFFMUmVxdWVzdCA9IHtcbiAgICB2YXJpYWJsZXM6IG9wZXJhdGlvbi52YXJpYWJsZXMgfHwge30sXG4gICAgZXh0ZW5zaW9uczogb3BlcmF0aW9uLmV4dGVuc2lvbnMgfHwge30sXG4gICAgb3BlcmF0aW9uTmFtZTogb3BlcmF0aW9uLm9wZXJhdGlvbk5hbWUsXG4gICAgcXVlcnk6IG9wZXJhdGlvbi5xdWVyeSxcbiAgfTtcblxuICAvLyBCZXN0IGd1ZXNzIGF0IGFuIG9wZXJhdGlvbiBuYW1lXG4gIGlmICghdHJhbnNmb3JtZWRPcGVyYXRpb24ub3BlcmF0aW9uTmFtZSkge1xuICAgIHRyYW5zZm9ybWVkT3BlcmF0aW9uLm9wZXJhdGlvbk5hbWUgPVxuICAgICAgdHlwZW9mIHRyYW5zZm9ybWVkT3BlcmF0aW9uLnF1ZXJ5ICE9PSAnc3RyaW5nJ1xuICAgICAgICA/IGdldE9wZXJhdGlvbk5hbWUodHJhbnNmb3JtZWRPcGVyYXRpb24ucXVlcnkpIHx8IHVuZGVmaW5lZFxuICAgICAgICA6ICcnO1xuICB9XG5cbiAgcmV0dXJuIHRyYW5zZm9ybWVkT3BlcmF0aW9uIGFzIE9wZXJhdGlvbjtcbn1cbiIsICJpbXBvcnQgeyBJbnZhcmlhbnRFcnJvciwgaW52YXJpYW50IH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5pbXBvcnQge1xuICBOZXh0TGluayxcbiAgT3BlcmF0aW9uLFxuICBSZXF1ZXN0SGFuZGxlcixcbiAgRmV0Y2hSZXN1bHQsXG4gIEdyYXBoUUxSZXF1ZXN0XG59IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgdmFsaWRhdGVPcGVyYXRpb24sXG4gIGNyZWF0ZU9wZXJhdGlvbixcbiAgdHJhbnNmb3JtT3BlcmF0aW9uLFxufSBmcm9tICcuLi91dGlscyc7XG5cbmZ1bmN0aW9uIHBhc3N0aHJvdWdoKG9wOiBPcGVyYXRpb24sIGZvcndhcmQ6IE5leHRMaW5rKSB7XG4gIHJldHVybiAoZm9yd2FyZCA/IGZvcndhcmQob3ApIDogT2JzZXJ2YWJsZS5vZigpKSBhcyBPYnNlcnZhYmxlPEZldGNoUmVzdWx0Pjtcbn1cblxuZnVuY3Rpb24gdG9MaW5rKGhhbmRsZXI6IFJlcXVlc3RIYW5kbGVyIHwgQXBvbGxvTGluaykge1xuICByZXR1cm4gdHlwZW9mIGhhbmRsZXIgPT09ICdmdW5jdGlvbicgPyBuZXcgQXBvbGxvTGluayhoYW5kbGVyKSA6IGhhbmRsZXI7XG59XG5cbmZ1bmN0aW9uIGlzVGVybWluYXRpbmcobGluazogQXBvbGxvTGluayk6IGJvb2xlYW4ge1xuICByZXR1cm4gbGluay5yZXF1ZXN0Lmxlbmd0aCA8PSAxO1xufVxuXG5jbGFzcyBMaW5rRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHB1YmxpYyBsaW5rPzogQXBvbGxvTGluaztcbiAgY29uc3RydWN0b3IobWVzc2FnZT86IHN0cmluZywgbGluaz86IEFwb2xsb0xpbmspIHtcbiAgICBzdXBlcihtZXNzYWdlKTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBcG9sbG9MaW5rIHtcbiAgcHVibGljIHN0YXRpYyBlbXB0eSgpOiBBcG9sbG9MaW5rIHtcbiAgICByZXR1cm4gbmV3IEFwb2xsb0xpbmsoKCkgPT4gT2JzZXJ2YWJsZS5vZigpKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZnJvbShsaW5rczogKEFwb2xsb0xpbmsgfCBSZXF1ZXN0SGFuZGxlcilbXSk6IEFwb2xsb0xpbmsge1xuICAgIGlmIChsaW5rcy5sZW5ndGggPT09IDApIHJldHVybiBBcG9sbG9MaW5rLmVtcHR5KCk7XG4gICAgcmV0dXJuIGxpbmtzLm1hcCh0b0xpbmspLnJlZHVjZSgoeCwgeSkgPT4geC5jb25jYXQoeSkpIGFzIEFwb2xsb0xpbms7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHNwbGl0KFxuICAgIHRlc3Q6IChvcDogT3BlcmF0aW9uKSA9PiBib29sZWFuLFxuICAgIGxlZnQ6IEFwb2xsb0xpbmsgfCBSZXF1ZXN0SGFuZGxlcixcbiAgICByaWdodD86IEFwb2xsb0xpbmsgfCBSZXF1ZXN0SGFuZGxlcixcbiAgKTogQXBvbGxvTGluayB7XG4gICAgY29uc3QgbGVmdExpbmsgPSB0b0xpbmsobGVmdCk7XG4gICAgY29uc3QgcmlnaHRMaW5rID0gdG9MaW5rKHJpZ2h0IHx8IG5ldyBBcG9sbG9MaW5rKHBhc3N0aHJvdWdoKSk7XG5cbiAgICBpZiAoaXNUZXJtaW5hdGluZyhsZWZ0TGluaykgJiYgaXNUZXJtaW5hdGluZyhyaWdodExpbmspKSB7XG4gICAgICByZXR1cm4gbmV3IEFwb2xsb0xpbmsob3BlcmF0aW9uID0+IHtcbiAgICAgICAgcmV0dXJuIHRlc3Qob3BlcmF0aW9uKVxuICAgICAgICAgID8gbGVmdExpbmsucmVxdWVzdChvcGVyYXRpb24pIHx8IE9ic2VydmFibGUub2YoKVxuICAgICAgICAgIDogcmlnaHRMaW5rLnJlcXVlc3Qob3BlcmF0aW9uKSB8fCBPYnNlcnZhYmxlLm9mKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBBcG9sbG9MaW5rKChvcGVyYXRpb24sIGZvcndhcmQpID0+IHtcbiAgICAgICAgcmV0dXJuIHRlc3Qob3BlcmF0aW9uKVxuICAgICAgICAgID8gbGVmdExpbmsucmVxdWVzdChvcGVyYXRpb24sIGZvcndhcmQpIHx8IE9ic2VydmFibGUub2YoKVxuICAgICAgICAgIDogcmlnaHRMaW5rLnJlcXVlc3Qob3BlcmF0aW9uLCBmb3J3YXJkKSB8fCBPYnNlcnZhYmxlLm9mKCk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGV4ZWN1dGUoXG4gICAgbGluazogQXBvbGxvTGluayxcbiAgICBvcGVyYXRpb246IEdyYXBoUUxSZXF1ZXN0LFxuICApOiBPYnNlcnZhYmxlPEZldGNoUmVzdWx0PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIGxpbmsucmVxdWVzdChcbiAgICAgICAgY3JlYXRlT3BlcmF0aW9uKFxuICAgICAgICAgIG9wZXJhdGlvbi5jb250ZXh0LFxuICAgICAgICAgIHRyYW5zZm9ybU9wZXJhdGlvbih2YWxpZGF0ZU9wZXJhdGlvbihvcGVyYXRpb24pKSxcbiAgICAgICAgKSxcbiAgICAgICkgfHwgT2JzZXJ2YWJsZS5vZigpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgY29uY2F0KFxuICAgIGZpcnN0OiBBcG9sbG9MaW5rIHwgUmVxdWVzdEhhbmRsZXIsXG4gICAgc2Vjb25kOiBBcG9sbG9MaW5rIHwgUmVxdWVzdEhhbmRsZXIsXG4gICkge1xuICAgIGNvbnN0IGZpcnN0TGluayA9IHRvTGluayhmaXJzdCk7XG4gICAgaWYgKGlzVGVybWluYXRpbmcoZmlyc3RMaW5rKSkge1xuICAgICAgaW52YXJpYW50Lndhcm4oXG4gICAgICAgIG5ldyBMaW5rRXJyb3IoXG4gICAgICAgICAgYFlvdSBhcmUgY2FsbGluZyBjb25jYXQgb24gYSB0ZXJtaW5hdGluZyBsaW5rLCB3aGljaCB3aWxsIGhhdmUgbm8gZWZmZWN0YCxcbiAgICAgICAgICBmaXJzdExpbmssXG4gICAgICAgICksXG4gICAgICApO1xuICAgICAgcmV0dXJuIGZpcnN0TGluaztcbiAgICB9XG4gICAgY29uc3QgbmV4dExpbmsgPSB0b0xpbmsoc2Vjb25kKTtcblxuICAgIGlmIChpc1Rlcm1pbmF0aW5nKG5leHRMaW5rKSkge1xuICAgICAgcmV0dXJuIG5ldyBBcG9sbG9MaW5rKFxuICAgICAgICBvcGVyYXRpb24gPT5cbiAgICAgICAgICBmaXJzdExpbmsucmVxdWVzdChcbiAgICAgICAgICAgIG9wZXJhdGlvbixcbiAgICAgICAgICAgIG9wID0+IG5leHRMaW5rLnJlcXVlc3Qob3ApIHx8IE9ic2VydmFibGUub2YoKSxcbiAgICAgICAgICApIHx8IE9ic2VydmFibGUub2YoKSxcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgQXBvbGxvTGluaygob3BlcmF0aW9uLCBmb3J3YXJkKSA9PiB7XG4gICAgICAgIHJldHVybiAoXG4gICAgICAgICAgZmlyc3RMaW5rLnJlcXVlc3Qob3BlcmF0aW9uLCBvcCA9PiB7XG4gICAgICAgICAgICByZXR1cm4gbmV4dExpbmsucmVxdWVzdChvcCwgZm9yd2FyZCkgfHwgT2JzZXJ2YWJsZS5vZigpO1xuICAgICAgICAgIH0pIHx8IE9ic2VydmFibGUub2YoKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29uc3RydWN0b3IocmVxdWVzdD86IFJlcXVlc3RIYW5kbGVyKSB7XG4gICAgaWYgKHJlcXVlc3QpIHRoaXMucmVxdWVzdCA9IHJlcXVlc3Q7XG4gIH1cblxuICBwdWJsaWMgc3BsaXQoXG4gICAgdGVzdDogKG9wOiBPcGVyYXRpb24pID0+IGJvb2xlYW4sXG4gICAgbGVmdDogQXBvbGxvTGluayB8IFJlcXVlc3RIYW5kbGVyLFxuICAgIHJpZ2h0PzogQXBvbGxvTGluayB8IFJlcXVlc3RIYW5kbGVyLFxuICApOiBBcG9sbG9MaW5rIHtcbiAgICByZXR1cm4gdGhpcy5jb25jYXQoXG4gICAgICBBcG9sbG9MaW5rLnNwbGl0KHRlc3QsIGxlZnQsIHJpZ2h0IHx8IG5ldyBBcG9sbG9MaW5rKHBhc3N0aHJvdWdoKSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGNvbmNhdChuZXh0OiBBcG9sbG9MaW5rIHwgUmVxdWVzdEhhbmRsZXIpOiBBcG9sbG9MaW5rIHtcbiAgICByZXR1cm4gQXBvbGxvTGluay5jb25jYXQodGhpcywgbmV4dCk7XG4gIH1cblxuICBwdWJsaWMgcmVxdWVzdChcbiAgICBvcGVyYXRpb246IE9wZXJhdGlvbixcbiAgICBmb3J3YXJkPzogTmV4dExpbmssXG4gICk6IE9ic2VydmFibGU8RmV0Y2hSZXN1bHQ+IHwgbnVsbCB7XG4gICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKCdyZXF1ZXN0IGlzIG5vdCBpbXBsZW1lbnRlZCcpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9uRXJyb3IoXG4gICAgZXJyb3I6IGFueSxcbiAgICBvYnNlcnZlcj86IFplbk9ic2VydmFibGUuT2JzZXJ2ZXI8RmV0Y2hSZXN1bHQ+LFxuICApOiBmYWxzZSB8IHZvaWQge1xuICAgIGlmIChvYnNlcnZlciAmJiBvYnNlcnZlci5lcnJvcikge1xuICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuaW5nIGZhbHNlIGluZGljYXRlcyB0aGF0IG9ic2VydmVyLmVycm9yIGRvZXMgbm90IG5lZWQgdG8gYmVcbiAgICAgIC8vIGNhbGxlZCBhZ2Fpbiwgc2luY2UgaXQgd2FzIGFscmVhZHkgY2FsbGVkIChvbiB0aGUgcHJldmlvdXMgbGluZSkuXG4gICAgICAvLyBDYWxsaW5nIG9ic2VydmVyLmVycm9yIGFnYWluIHdvdWxkIG5vdCBjYXVzZSBhbnkgcmVhbCBwcm9ibGVtcyxcbiAgICAgIC8vIHNpbmNlIG9ubHkgdGhlIGZpcnN0IGNhbGwgbWF0dGVycywgYnV0IGN1c3RvbSBvbkVycm9yIGZ1bmN0aW9uc1xuICAgICAgLy8gbWlnaHQgaGF2ZSBvdGhlciByZWFzb25zIGZvciB3YW50aW5nIHRvIHByZXZlbnQgdGhlIGRlZmF1bHRcbiAgICAgIC8vIGJlaGF2aW9yIGJ5IHJldHVybmluZyBmYWxzZS5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gVGhyb3cgZXJyb3JzIHdpbGwgYmUgcGFzc2VkIHRvIG9ic2VydmVyLmVycm9yLlxuICAgIHRocm93IGVycm9yO1xuICB9XG5cbiAgcHVibGljIHNldE9uRXJyb3IoZm46IEFwb2xsb0xpbmtbXCJvbkVycm9yXCJdKTogdGhpcyB7XG4gICAgdGhpcy5vbkVycm9yID0gZm47XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBBcG9sbG9MaW5rIH0gZnJvbSAnLi9BcG9sbG9MaW5rJztcblxuZXhwb3J0IGNvbnN0IGVtcHR5ID0gQXBvbGxvTGluay5lbXB0eTtcbiIsICJpbXBvcnQgeyBBcG9sbG9MaW5rIH0gZnJvbSAnLi9BcG9sbG9MaW5rJztcblxuZXhwb3J0IGNvbnN0IGZyb20gPSBBcG9sbG9MaW5rLmZyb207XG4iLCAiaW1wb3J0IHsgQXBvbGxvTGluayB9IGZyb20gJy4vQXBvbGxvTGluayc7XG5cbmV4cG9ydCBjb25zdCBzcGxpdCA9IEFwb2xsb0xpbmsuc3BsaXQ7XG4iLCAiaW1wb3J0IHsgQXBvbGxvTGluayB9IGZyb20gJy4vQXBvbGxvTGluayc7XG5cbmV4cG9ydCBjb25zdCBjb25jYXQgPSBBcG9sbG9MaW5rLmNvbmNhdDtcbiIsICJpbXBvcnQgeyBBcG9sbG9MaW5rIH0gZnJvbSAnLi9BcG9sbG9MaW5rJztcblxuZXhwb3J0IGNvbnN0IGV4ZWN1dGUgPSBBcG9sbG9MaW5rLmV4ZWN1dGU7XG4iLCAiZXhwb3J0IGNvbnN0IHZlcnNpb24gPSAnbG9jYWwnO1xuIiwgImltcG9ydCB7IE9wZXJhdGlvbiB9IGZyb20gJy4uL2NvcmUnO1xuaW1wb3J0IHsgdGhyb3dTZXJ2ZXJFcnJvciB9IGZyb20gJy4uL3V0aWxzJztcblxuY29uc3QgeyBoYXNPd25Qcm9wZXJ0eSB9ID0gT2JqZWN0LnByb3RvdHlwZTtcblxuZXhwb3J0IHR5cGUgU2VydmVyUGFyc2VFcnJvciA9IEVycm9yICYge1xuICByZXNwb25zZTogUmVzcG9uc2U7XG4gIHN0YXR1c0NvZGU6IG51bWJlcjtcbiAgYm9keVRleHQ6IHN0cmluZztcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUFuZENoZWNrSHR0cFJlc3BvbnNlKFxuICBvcGVyYXRpb25zOiBPcGVyYXRpb24gfCBPcGVyYXRpb25bXSxcbikge1xuICByZXR1cm4gKHJlc3BvbnNlOiBSZXNwb25zZSkgPT4gcmVzcG9uc2VcbiAgICAudGV4dCgpXG4gICAgLnRoZW4oYm9keVRleHQgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoYm9keVRleHQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlRXJyb3IgPSBlcnIgYXMgU2VydmVyUGFyc2VFcnJvcjtcbiAgICAgICAgcGFyc2VFcnJvci5uYW1lID0gJ1NlcnZlclBhcnNlRXJyb3InO1xuICAgICAgICBwYXJzZUVycm9yLnJlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgICAgIHBhcnNlRXJyb3Iuc3RhdHVzQ29kZSA9IHJlc3BvbnNlLnN0YXR1cztcbiAgICAgICAgcGFyc2VFcnJvci5ib2R5VGV4dCA9IGJvZHlUZXh0O1xuICAgICAgICB0aHJvdyBwYXJzZUVycm9yO1xuICAgICAgfVxuICAgIH0pXG4gICAgLnRoZW4oKHJlc3VsdDogYW55KSA9PiB7XG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDMwMCkge1xuICAgICAgICAvLyBOZXR3b3JrIGVycm9yXG4gICAgICAgIHRocm93U2VydmVyRXJyb3IoXG4gICAgICAgICAgcmVzcG9uc2UsXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIGBSZXNwb25zZSBub3Qgc3VjY2Vzc2Z1bDogUmVjZWl2ZWQgc3RhdHVzIGNvZGUgJHtyZXNwb25zZS5zdGF0dXN9YCxcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgaWYgKFxuICAgICAgICAhQXJyYXkuaXNBcnJheShyZXN1bHQpICYmXG4gICAgICAgICFoYXNPd25Qcm9wZXJ0eS5jYWxsKHJlc3VsdCwgJ2RhdGEnKSAmJlxuICAgICAgICAhaGFzT3duUHJvcGVydHkuY2FsbChyZXN1bHQsICdlcnJvcnMnKVxuICAgICAgKSB7XG4gICAgICAgIC8vIERhdGEgZXJyb3JcbiAgICAgICAgdGhyb3dTZXJ2ZXJFcnJvcihcbiAgICAgICAgICByZXNwb25zZSxcbiAgICAgICAgICByZXN1bHQsXG4gICAgICAgICAgYFNlcnZlciByZXNwb25zZSB3YXMgbWlzc2luZyBmb3IgcXVlcnkgJyR7XG4gICAgICAgICAgICBBcnJheS5pc0FycmF5KG9wZXJhdGlvbnMpXG4gICAgICAgICAgICAgID8gb3BlcmF0aW9ucy5tYXAob3AgPT4gb3Aub3BlcmF0aW9uTmFtZSlcbiAgICAgICAgICAgICAgOiBvcGVyYXRpb25zLm9wZXJhdGlvbk5hbWVcbiAgICAgICAgICB9Jy5gLFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbn1cbiIsICJpbXBvcnQgeyBJbnZhcmlhbnRFcnJvciB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbmV4cG9ydCB0eXBlIENsaWVudFBhcnNlRXJyb3IgPSBJbnZhcmlhbnRFcnJvciAmIHtcbiAgcGFyc2VFcnJvcjogRXJyb3I7XG59O1xuXG5leHBvcnQgY29uc3Qgc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIgPSAocDogYW55LCBsYWJlbDogc3RyaW5nKSA9PiB7XG4gIGxldCBzZXJpYWxpemVkO1xuICB0cnkge1xuICAgIHNlcmlhbGl6ZWQgPSBKU09OLnN0cmluZ2lmeShwKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnN0IHBhcnNlRXJyb3IgPSBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgICBgTmV0d29yayByZXF1ZXN0IGZhaWxlZC4gJHtsYWJlbH0gaXMgbm90IHNlcmlhbGl6YWJsZTogJHtlLm1lc3NhZ2V9YCxcbiAgICApIGFzIENsaWVudFBhcnNlRXJyb3I7XG4gICAgcGFyc2VFcnJvci5wYXJzZUVycm9yID0gZTtcbiAgICB0aHJvdyBwYXJzZUVycm9yO1xuICB9XG4gIHJldHVybiBzZXJpYWxpemVkO1xufTtcbiIsICJpbXBvcnQgeyBwcmludCB9IGZyb20gJ2dyYXBocWwnO1xuXG5pbXBvcnQgeyBPcGVyYXRpb24gfSBmcm9tICcuLi9jb3JlJztcblxuZXhwb3J0IGludGVyZmFjZSBVcmlGdW5jdGlvbiB7XG4gIChvcGVyYXRpb246IE9wZXJhdGlvbik6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCb2R5IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIG9wZXJhdGlvbk5hbWU/OiBzdHJpbmc7XG4gIHZhcmlhYmxlcz86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIGV4dGVuc2lvbnM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEh0dHBPcHRpb25zIHtcbiAgLyoqXG4gICAqIFRoZSBVUkkgdG8gdXNlIHdoZW4gZmV0Y2hpbmcgb3BlcmF0aW9ucy5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gJy9ncmFwaHFsJy5cbiAgICovXG4gIHVyaT86IHN0cmluZyB8IFVyaUZ1bmN0aW9uO1xuXG4gIC8qKlxuICAgKiBQYXNzZXMgdGhlIGV4dGVuc2lvbnMgZmllbGQgdG8geW91ciBncmFwaHFsIHNlcnZlci5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAqL1xuICBpbmNsdWRlRXh0ZW5zaW9ucz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEEgYGZldGNoYC1jb21wYXRpYmxlIEFQSSB0byB1c2Ugd2hlbiBtYWtpbmcgcmVxdWVzdHMuXG4gICAqL1xuICBmZXRjaD86IFdpbmRvd09yV29ya2VyR2xvYmFsU2NvcGVbJ2ZldGNoJ107XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCByZXByZXNlbnRpbmcgdmFsdWVzIHRvIGJlIHNlbnQgYXMgaGVhZGVycyBvbiB0aGUgcmVxdWVzdC5cbiAgICovXG4gIGhlYWRlcnM/OiBhbnk7XG5cbiAgLyoqXG4gICAqIFRoZSBjcmVkZW50aWFscyBwb2xpY3kgeW91IHdhbnQgdG8gdXNlIGZvciB0aGUgZmV0Y2ggY2FsbC5cbiAgICovXG4gIGNyZWRlbnRpYWxzPzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBbnkgb3ZlcnJpZGVzIG9mIHRoZSBmZXRjaCBvcHRpb25zIGFyZ3VtZW50IHRvIHBhc3MgdG8gdGhlIGZldGNoIGNhbGwuXG4gICAqL1xuICBmZXRjaE9wdGlvbnM/OiBhbnk7XG5cbiAgLyoqXG4gICAqIElmIHNldCB0byB0cnVlLCB1c2UgdGhlIEhUVFAgR0VUIG1ldGhvZCBmb3IgcXVlcnkgb3BlcmF0aW9ucy4gTXV0YXRpb25zXG4gICAqIHdpbGwgc3RpbGwgdXNlIHRoZSBtZXRob2Qgc3BlY2lmaWVkIGluIGZldGNoT3B0aW9ucy5tZXRob2QgKHdoaWNoIGRlZmF1bHRzXG4gICAqIHRvIFBPU1QpLlxuICAgKi9cbiAgdXNlR0VURm9yUXVlcmllcz86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIElmIHNldCB0byB0cnVlLCB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiBzdHJpcHBpbmcgdW51c2VkIHZhcmlhYmxlc1xuICAgKiBmcm9tIHRoZSByZXF1ZXN0IHdpbGwgYmUgZGlzYWJsZWQuXG4gICAqXG4gICAqIFVudXNlZCB2YXJpYWJsZXMgYXJlIGxpa2VseSB0byB0cmlnZ2VyIHNlcnZlci1zaWRlIHZhbGlkYXRpb24gZXJyb3JzLFxuICAgKiBwZXIgaHR0cHM6Ly9zcGVjLmdyYXBocWwub3JnL2RyYWZ0LyNzZWMtQWxsLVZhcmlhYmxlcy1Vc2VkLCBidXQgdGhpc1xuICAgKiBpbmNsdWRlVW51c2VkVmFyaWFibGVzIG9wdGlvbiBjYW4gYmUgdXNlZnVsIGlmIHlvdXIgc2VydmVyIGRldmlhdGVzXG4gICAqIGZyb20gdGhlIEdyYXBoUUwgc3BlY2lmaWNhdGlvbiBieSBub3Qgc3RyaWN0bHkgZW5mb3JjaW5nIHRoYXQgcnVsZS5cbiAgICovXG4gIGluY2x1ZGVVbnVzZWRWYXJpYWJsZXM/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEh0dHBRdWVyeU9wdGlvbnMge1xuICBpbmNsdWRlUXVlcnk/OiBib29sZWFuO1xuICBpbmNsdWRlRXh0ZW5zaW9ucz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSHR0cENvbmZpZyB7XG4gIGh0dHA/OiBIdHRwUXVlcnlPcHRpb25zO1xuICBvcHRpb25zPzogYW55O1xuICBoZWFkZXJzPzogYW55O1xuICBjcmVkZW50aWFscz86IGFueTtcbn1cblxuY29uc3QgZGVmYXVsdEh0dHBPcHRpb25zOiBIdHRwUXVlcnlPcHRpb25zID0ge1xuICBpbmNsdWRlUXVlcnk6IHRydWUsXG4gIGluY2x1ZGVFeHRlbnNpb25zOiBmYWxzZSxcbn07XG5cbmNvbnN0IGRlZmF1bHRIZWFkZXJzID0ge1xuICAvLyBoZWFkZXJzIGFyZSBjYXNlIGluc2Vuc2l0aXZlIChodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTI1OTAwNClcbiAgYWNjZXB0OiAnKi8qJyxcbiAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbn07XG5cbmNvbnN0IGRlZmF1bHRPcHRpb25zID0ge1xuICBtZXRob2Q6ICdQT1NUJyxcbn07XG5cbmV4cG9ydCBjb25zdCBmYWxsYmFja0h0dHBDb25maWcgPSB7XG4gIGh0dHA6IGRlZmF1bHRIdHRwT3B0aW9ucyxcbiAgaGVhZGVyczogZGVmYXVsdEhlYWRlcnMsXG4gIG9wdGlvbnM6IGRlZmF1bHRPcHRpb25zLFxufTtcblxuZXhwb3J0IGNvbnN0IHNlbGVjdEh0dHBPcHRpb25zQW5kQm9keSA9IChcbiAgb3BlcmF0aW9uOiBPcGVyYXRpb24sXG4gIGZhbGxiYWNrQ29uZmlnOiBIdHRwQ29uZmlnLFxuICAuLi5jb25maWdzOiBBcnJheTxIdHRwQ29uZmlnPlxuKSA9PiB7XG4gIGxldCBvcHRpb25zOiBIdHRwQ29uZmlnICYgUmVjb3JkPHN0cmluZywgYW55PiA9IHtcbiAgICAuLi5mYWxsYmFja0NvbmZpZy5vcHRpb25zLFxuICAgIGhlYWRlcnM6IGZhbGxiYWNrQ29uZmlnLmhlYWRlcnMsXG4gICAgY3JlZGVudGlhbHM6IGZhbGxiYWNrQ29uZmlnLmNyZWRlbnRpYWxzLFxuICB9O1xuICBsZXQgaHR0cDogSHR0cFF1ZXJ5T3B0aW9ucyA9IGZhbGxiYWNrQ29uZmlnLmh0dHAgfHwge307XG5cbiAgLypcbiAgICogdXNlIHRoZSByZXN0IG9mIHRoZSBjb25maWdzIHRvIHBvcHVsYXRlIHRoZSBvcHRpb25zXG4gICAqIGNvbmZpZ3MgbGF0ZXIgaW4gdGhlIGxpc3Qgd2lsbCBvdmVyd3JpdGUgZWFybGllciBmaWVsZHNcbiAgICovXG4gIGNvbmZpZ3MuZm9yRWFjaChjb25maWcgPT4ge1xuICAgIG9wdGlvbnMgPSB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgLi4uY29uZmlnLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIC4uLm9wdGlvbnMuaGVhZGVycyxcbiAgICAgICAgLi4uY29uZmlnLmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH07XG4gICAgaWYgKGNvbmZpZy5jcmVkZW50aWFscykgb3B0aW9ucy5jcmVkZW50aWFscyA9IGNvbmZpZy5jcmVkZW50aWFscztcblxuICAgIGh0dHAgPSB7XG4gICAgICAuLi5odHRwLFxuICAgICAgLi4uY29uZmlnLmh0dHAsXG4gICAgfTtcbiAgfSk7XG5cbiAgLy9UaGUgYm9keSBkZXBlbmRzIG9uIHRoZSBodHRwIG9wdGlvbnNcbiAgY29uc3QgeyBvcGVyYXRpb25OYW1lLCBleHRlbnNpb25zLCB2YXJpYWJsZXMsIHF1ZXJ5IH0gPSBvcGVyYXRpb247XG4gIGNvbnN0IGJvZHk6IEJvZHkgPSB7IG9wZXJhdGlvbk5hbWUsIHZhcmlhYmxlcyB9O1xuXG4gIGlmIChodHRwLmluY2x1ZGVFeHRlbnNpb25zKSAoYm9keSBhcyBhbnkpLmV4dGVuc2lvbnMgPSBleHRlbnNpb25zO1xuXG4gIC8vIG5vdCBzZW5kaW5nIHRoZSBxdWVyeSAoaS5lIHBlcnNpc3RlZCBxdWVyaWVzKVxuICBpZiAoaHR0cC5pbmNsdWRlUXVlcnkpIChib2R5IGFzIGFueSkucXVlcnkgPSBwcmludChxdWVyeSk7XG5cbiAgcmV0dXJuIHtcbiAgICBvcHRpb25zLFxuICAgIGJvZHksXG4gIH07XG59O1xuIiwgImltcG9ydCB7IEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuZXhwb3J0IGNvbnN0IGNoZWNrRmV0Y2hlciA9IChmZXRjaGVyOiBXaW5kb3dPcldvcmtlckdsb2JhbFNjb3BlWydmZXRjaCddIHwgdW5kZWZpbmVkKSA9PiB7XG4gIGlmICghZmV0Y2hlciAmJiB0eXBlb2YgZmV0Y2ggPT09ICd1bmRlZmluZWQnKSB7XG4gICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKGBcblwiZmV0Y2hcIiBoYXMgbm90IGJlZW4gZm91bmQgZ2xvYmFsbHkgYW5kIG5vIGZldGNoZXIgaGFzIGJlZW4gXFxcbmNvbmZpZ3VyZWQuIFRvIGZpeCB0aGlzLCBpbnN0YWxsIGEgZmV0Y2ggcGFja2FnZSAobGlrZSBcXFxuaHR0cHM6Ly93d3cubnBtanMuY29tL3BhY2thZ2UvY3Jvc3MtZmV0Y2gpLCBpbnN0YW50aWF0ZSB0aGUgXFxcbmZldGNoZXIsIGFuZCBwYXNzIGl0IGludG8geW91ciBIdHRwTGluayBjb25zdHJ1Y3Rvci4gRm9yIGV4YW1wbGU6XG5cbmltcG9ydCBmZXRjaCBmcm9tICdjcm9zcy1mZXRjaCc7XG5pbXBvcnQgeyBBcG9sbG9DbGllbnQsIEh0dHBMaW5rIH0gZnJvbSAnQGFwb2xsby9jbGllbnQnO1xuY29uc3QgY2xpZW50ID0gbmV3IEFwb2xsb0NsaWVudCh7XG4gIGxpbms6IG5ldyBIdHRwTGluayh7IHVyaTogJy9ncmFwaHFsJywgZmV0Y2ggfSlcbn0pO1xuICAgIGApO1xuICB9XG59O1xuIiwgImV4cG9ydCBjb25zdCBjcmVhdGVTaWduYWxJZlN1cHBvcnRlZCA9ICgpID0+IHtcbiAgaWYgKHR5cGVvZiBBYm9ydENvbnRyb2xsZXIgPT09ICd1bmRlZmluZWQnKVxuICAgIHJldHVybiB7IGNvbnRyb2xsZXI6IGZhbHNlLCBzaWduYWw6IGZhbHNlIH07XG5cbiAgY29uc3QgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgY29uc3Qgc2lnbmFsID0gY29udHJvbGxlci5zaWduYWw7XG4gIHJldHVybiB7IGNvbnRyb2xsZXIsIHNpZ25hbCB9O1xufTtcbiIsICJpbXBvcnQgeyBPcGVyYXRpb24gfSBmcm9tICcuLi9jb3JlJztcblxuZXhwb3J0IGNvbnN0IHNlbGVjdFVSSSA9IChcbiAgb3BlcmF0aW9uOiBPcGVyYXRpb24sXG4gIGZhbGxiYWNrVVJJPzogc3RyaW5nIHwgKChvcGVyYXRpb246IE9wZXJhdGlvbikgPT4gc3RyaW5nKSxcbikgPT4ge1xuICBjb25zdCBjb250ZXh0ID0gb3BlcmF0aW9uLmdldENvbnRleHQoKTtcbiAgY29uc3QgY29udGV4dFVSSSA9IGNvbnRleHQudXJpO1xuXG4gIGlmIChjb250ZXh0VVJJKSB7XG4gICAgcmV0dXJuIGNvbnRleHRVUkk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGZhbGxiYWNrVVJJID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGZhbGxiYWNrVVJJKG9wZXJhdGlvbik7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIChmYWxsYmFja1VSSSBhcyBzdHJpbmcpIHx8ICcvZ3JhcGhxbCc7XG4gIH1cbn07XG4iLCAiaW1wb3J0IHsgRGVmaW5pdGlvbk5vZGUsIFZhcmlhYmxlRGVmaW5pdGlvbk5vZGUgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IHZpc2l0IH0gZnJvbSAnZ3JhcGhxbC9sYW5ndWFnZS92aXNpdG9yJztcblxuaW1wb3J0IHsgQXBvbGxvTGluayB9IGZyb20gJy4uL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5pbXBvcnQgeyBzZXJpYWxpemVGZXRjaFBhcmFtZXRlciB9IGZyb20gJy4vc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXInO1xuaW1wb3J0IHsgc2VsZWN0VVJJIH0gZnJvbSAnLi9zZWxlY3RVUkknO1xuaW1wb3J0IHsgcGFyc2VBbmRDaGVja0h0dHBSZXNwb25zZSB9IGZyb20gJy4vcGFyc2VBbmRDaGVja0h0dHBSZXNwb25zZSc7XG5pbXBvcnQgeyBjaGVja0ZldGNoZXIgfSBmcm9tICcuL2NoZWNrRmV0Y2hlcic7XG5pbXBvcnQge1xuICBzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHksXG4gIGZhbGxiYWNrSHR0cENvbmZpZyxcbiAgSHR0cE9wdGlvbnNcbn0gZnJvbSAnLi9zZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHknO1xuaW1wb3J0IHsgY3JlYXRlU2lnbmFsSWZTdXBwb3J0ZWQgfSBmcm9tICcuL2NyZWF0ZVNpZ25hbElmU3VwcG9ydGVkJztcbmltcG9ydCB7IHJld3JpdGVVUklGb3JHRVQgfSBmcm9tICcuL3Jld3JpdGVVUklGb3JHRVQnO1xuaW1wb3J0IHsgZnJvbUVycm9yIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5leHBvcnQgY29uc3QgY3JlYXRlSHR0cExpbmsgPSAobGlua09wdGlvbnM6IEh0dHBPcHRpb25zID0ge30pID0+IHtcbiAgbGV0IHtcbiAgICB1cmkgPSAnL2dyYXBocWwnLFxuICAgIC8vIHVzZSBkZWZhdWx0IGdsb2JhbCBmZXRjaCBpZiBub3RoaW5nIHBhc3NlZCBpblxuICAgIGZldGNoOiBmZXRjaGVyLFxuICAgIGluY2x1ZGVFeHRlbnNpb25zLFxuICAgIHVzZUdFVEZvclF1ZXJpZXMsXG4gICAgaW5jbHVkZVVudXNlZFZhcmlhYmxlcyA9IGZhbHNlLFxuICAgIC4uLnJlcXVlc3RPcHRpb25zXG4gIH0gPSBsaW5rT3B0aW9ucztcblxuICAvLyBkZXYgd2FybmluZ3MgdG8gZW5zdXJlIGZldGNoIGlzIHByZXNlbnRcbiAgY2hlY2tGZXRjaGVyKGZldGNoZXIpO1xuXG4gIC8vZmV0Y2hlciBpcyBzZXQgaGVyZSByYXRoZXIgdGhhbiB0aGUgZGVzdHJ1Y3R1cmluZyB0byBlbnN1cmUgZmV0Y2ggaXNcbiAgLy9kZWNsYXJlZCBiZWZvcmUgcmVmZXJlbmNpbmcgaXQuIFJlZmVyZW5jZSBpbiB0aGUgZGVzdHJ1Y3R1cmluZyB3b3VsZCBjYXVzZVxuICAvL2EgUmVmZXJlbmNlRXJyb3JcbiAgaWYgKCFmZXRjaGVyKSB7XG4gICAgZmV0Y2hlciA9IGZldGNoO1xuICB9XG5cbiAgY29uc3QgbGlua0NvbmZpZyA9IHtcbiAgICBodHRwOiB7IGluY2x1ZGVFeHRlbnNpb25zIH0sXG4gICAgb3B0aW9uczogcmVxdWVzdE9wdGlvbnMuZmV0Y2hPcHRpb25zLFxuICAgIGNyZWRlbnRpYWxzOiByZXF1ZXN0T3B0aW9ucy5jcmVkZW50aWFscyxcbiAgICBoZWFkZXJzOiByZXF1ZXN0T3B0aW9ucy5oZWFkZXJzLFxuICB9O1xuXG4gIHJldHVybiBuZXcgQXBvbGxvTGluayhvcGVyYXRpb24gPT4ge1xuICAgIGxldCBjaG9zZW5VUkkgPSBzZWxlY3RVUkkob3BlcmF0aW9uLCB1cmkpO1xuXG4gICAgY29uc3QgY29udGV4dCA9IG9wZXJhdGlvbi5nZXRDb250ZXh0KCk7XG5cbiAgICAvLyBgYXBvbGxvZ3JhcGhxbC1jbGllbnQtKmAgaGVhZGVycyBhcmUgYXV0b21hdGljYWxseSBzZXQgaWYgYVxuICAgIC8vIGBjbGllbnRBd2FyZW5lc3NgIG9iamVjdCBpcyBmb3VuZCBpbiB0aGUgY29udGV4dC4gVGhlc2UgaGVhZGVycyBhcmVcbiAgICAvLyBzZXQgZmlyc3QsIGZvbGxvd2VkIGJ5IHRoZSByZXN0IG9mIHRoZSBoZWFkZXJzIHB1bGxlZCBmcm9tXG4gICAgLy8gYGNvbnRleHQuaGVhZGVyc2AuIElmIGRlc2lyZWQsIGBhcG9sbG9ncmFwaHFsLWNsaWVudC0qYCBoZWFkZXJzIHNldCBieVxuICAgIC8vIHRoZSBgY2xpZW50QXdhcmVuZXNzYCBvYmplY3QgY2FuIGJlIG92ZXJyaWRkZW4gYnlcbiAgICAvLyBgYXBvbGxvZ3JhcGhxbC1jbGllbnQtKmAgaGVhZGVycyBzZXQgaW4gYGNvbnRleHQuaGVhZGVyc2AuXG4gICAgY29uc3QgY2xpZW50QXdhcmVuZXNzSGVhZGVyczoge1xuICAgICAgJ2Fwb2xsb2dyYXBocWwtY2xpZW50LW5hbWUnPzogc3RyaW5nO1xuICAgICAgJ2Fwb2xsb2dyYXBocWwtY2xpZW50LXZlcnNpb24nPzogc3RyaW5nO1xuICAgIH0gPSB7fTtcblxuICAgIGlmIChjb250ZXh0LmNsaWVudEF3YXJlbmVzcykge1xuICAgICAgY29uc3QgeyBuYW1lLCB2ZXJzaW9uIH0gPSBjb250ZXh0LmNsaWVudEF3YXJlbmVzcztcbiAgICAgIGlmIChuYW1lKSB7XG4gICAgICAgIGNsaWVudEF3YXJlbmVzc0hlYWRlcnNbJ2Fwb2xsb2dyYXBocWwtY2xpZW50LW5hbWUnXSA9IG5hbWU7XG4gICAgICB9XG4gICAgICBpZiAodmVyc2lvbikge1xuICAgICAgICBjbGllbnRBd2FyZW5lc3NIZWFkZXJzWydhcG9sbG9ncmFwaHFsLWNsaWVudC12ZXJzaW9uJ10gPSB2ZXJzaW9uO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGNvbnRleHRIZWFkZXJzID0geyAuLi5jbGllbnRBd2FyZW5lc3NIZWFkZXJzLCAuLi5jb250ZXh0LmhlYWRlcnMgfTtcblxuICAgIGNvbnN0IGNvbnRleHRDb25maWcgPSB7XG4gICAgICBodHRwOiBjb250ZXh0Lmh0dHAsXG4gICAgICBvcHRpb25zOiBjb250ZXh0LmZldGNoT3B0aW9ucyxcbiAgICAgIGNyZWRlbnRpYWxzOiBjb250ZXh0LmNyZWRlbnRpYWxzLFxuICAgICAgaGVhZGVyczogY29udGV4dEhlYWRlcnMsXG4gICAgfTtcblxuICAgIC8vdXNlcyBmYWxsYmFjaywgbGluaywgYW5kIHRoZW4gY29udGV4dCB0byBidWlsZCBvcHRpb25zXG4gICAgY29uc3QgeyBvcHRpb25zLCBib2R5IH0gPSBzZWxlY3RIdHRwT3B0aW9uc0FuZEJvZHkoXG4gICAgICBvcGVyYXRpb24sXG4gICAgICBmYWxsYmFja0h0dHBDb25maWcsXG4gICAgICBsaW5rQ29uZmlnLFxuICAgICAgY29udGV4dENvbmZpZyxcbiAgICApO1xuXG4gICAgaWYgKGJvZHkudmFyaWFibGVzICYmICFpbmNsdWRlVW51c2VkVmFyaWFibGVzKSB7XG4gICAgICBjb25zdCB1bnVzZWROYW1lcyA9IG5ldyBTZXQoT2JqZWN0LmtleXMoYm9keS52YXJpYWJsZXMpKTtcbiAgICAgIHZpc2l0KG9wZXJhdGlvbi5xdWVyeSwge1xuICAgICAgICBWYXJpYWJsZShub2RlLCBfa2V5LCBwYXJlbnQpIHtcbiAgICAgICAgICAvLyBBIHZhcmlhYmxlIHR5cGUgZGVmaW5pdGlvbiBhdCB0aGUgdG9wIGxldmVsIG9mIGEgcXVlcnkgaXMgbm90XG4gICAgICAgICAgLy8gZW5vdWdoIHRvIHNpbGVuY2Ugc2VydmVyLXNpZGUgZXJyb3JzIGFib3V0IHRoZSB2YXJpYWJsZSBiZWluZ1xuICAgICAgICAgIC8vIHVudXNlZCwgc28gdmFyaWFibGUgZGVmaW5pdGlvbnMgZG8gbm90IGNvdW50IGFzIHVzYWdlLlxuICAgICAgICAgIC8vIGh0dHBzOi8vc3BlYy5ncmFwaHFsLm9yZy9kcmFmdC8jc2VjLUFsbC1WYXJpYWJsZXMtVXNlZFxuICAgICAgICAgIGlmIChwYXJlbnQgJiYgKHBhcmVudCBhcyBWYXJpYWJsZURlZmluaXRpb25Ob2RlKS5raW5kICE9PSAnVmFyaWFibGVEZWZpbml0aW9uJykge1xuICAgICAgICAgICAgdW51c2VkTmFtZXMuZGVsZXRlKG5vZGUubmFtZS52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBpZiAodW51c2VkTmFtZXMuc2l6ZSkge1xuICAgICAgICAvLyBNYWtlIGEgc2hhbGxvdyBjb3B5IG9mIGJvZHkudmFyaWFibGVzICh3aXRoIGtleXMgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gb3JkZXIpIGFuZCB0aGVuIGRlbGV0ZSB1bnVzZWQgdmFyaWFibGVzIGZyb20gdGhlIGNvcHkuXG4gICAgICAgIGJvZHkudmFyaWFibGVzID0geyAuLi5ib2R5LnZhcmlhYmxlcyB9O1xuICAgICAgICB1bnVzZWROYW1lcy5mb3JFYWNoKG5hbWUgPT4ge1xuICAgICAgICAgIGRlbGV0ZSBib2R5LnZhcmlhYmxlcyFbbmFtZV07XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxldCBjb250cm9sbGVyOiBhbnk7XG4gICAgaWYgKCEob3B0aW9ucyBhcyBhbnkpLnNpZ25hbCkge1xuICAgICAgY29uc3QgeyBjb250cm9sbGVyOiBfY29udHJvbGxlciwgc2lnbmFsIH0gPSBjcmVhdGVTaWduYWxJZlN1cHBvcnRlZCgpO1xuICAgICAgY29udHJvbGxlciA9IF9jb250cm9sbGVyO1xuICAgICAgaWYgKGNvbnRyb2xsZXIpIChvcHRpb25zIGFzIGFueSkuc2lnbmFsID0gc2lnbmFsO1xuICAgIH1cblxuICAgIC8vIElmIHJlcXVlc3RlZCwgc2V0IG1ldGhvZCB0byBHRVQgaWYgdGhlcmUgYXJlIG5vIG11dGF0aW9ucy5cbiAgICBjb25zdCBkZWZpbml0aW9uSXNNdXRhdGlvbiA9IChkOiBEZWZpbml0aW9uTm9kZSkgPT4ge1xuICAgICAgcmV0dXJuIGQua2luZCA9PT0gJ09wZXJhdGlvbkRlZmluaXRpb24nICYmIGQub3BlcmF0aW9uID09PSAnbXV0YXRpb24nO1xuICAgIH07XG4gICAgaWYgKFxuICAgICAgdXNlR0VURm9yUXVlcmllcyAmJlxuICAgICAgIW9wZXJhdGlvbi5xdWVyeS5kZWZpbml0aW9ucy5zb21lKGRlZmluaXRpb25Jc011dGF0aW9uKVxuICAgICkge1xuICAgICAgb3B0aW9ucy5tZXRob2QgPSAnR0VUJztcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5tZXRob2QgPT09ICdHRVQnKSB7XG4gICAgICBjb25zdCB7IG5ld1VSSSwgcGFyc2VFcnJvciB9ID0gcmV3cml0ZVVSSUZvckdFVChjaG9zZW5VUkksIGJvZHkpO1xuICAgICAgaWYgKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGZyb21FcnJvcihwYXJzZUVycm9yKTtcbiAgICAgIH1cbiAgICAgIGNob3NlblVSSSA9IG5ld1VSSTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJ5IHtcbiAgICAgICAgKG9wdGlvbnMgYXMgYW55KS5ib2R5ID0gc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIoYm9keSwgJ1BheWxvYWQnKTtcbiAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgICAgcmV0dXJuIGZyb21FcnJvcihwYXJzZUVycm9yKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IE9ic2VydmFibGUob2JzZXJ2ZXIgPT4ge1xuICAgICAgZmV0Y2hlciEoY2hvc2VuVVJJLCBvcHRpb25zKVxuICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgb3BlcmF0aW9uLnNldENvbnRleHQoeyByZXNwb25zZSB9KTtcbiAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKHBhcnNlQW5kQ2hlY2tIdHRwUmVzcG9uc2Uob3BlcmF0aW9uKSlcbiAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAvLyB3ZSBoYXZlIGRhdGEgYW5kIGNhbiBzZW5kIGl0IHRvIGJhY2sgdXAgdGhlIGxpbmsgY2hhaW5cbiAgICAgICAgICBvYnNlcnZlci5uZXh0KHJlc3VsdCk7XG4gICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KVxuICAgICAgICAuY2F0Y2goZXJyID0+IHtcbiAgICAgICAgICAvLyBmZXRjaCB3YXMgY2FuY2VsbGVkIHNvIGl0J3MgYWxyZWFkeSBiZWVuIGNsZWFuZWQgdXAgaW4gdGhlIHVuc3Vic2NyaWJlXG4gICAgICAgICAgaWYgKGVyci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHJldHVybjtcbiAgICAgICAgICAvLyBpZiBpdCBpcyBhIG5ldHdvcmsgZXJyb3IsIEJVVCB0aGVyZSBpcyBncmFwaHFsIHJlc3VsdCBpbmZvXG4gICAgICAgICAgLy8gZmlyZSB0aGUgbmV4dCBvYnNlcnZlciBiZWZvcmUgY2FsbGluZyBlcnJvclxuICAgICAgICAgIC8vIHRoaXMgZ2l2ZXMgYXBvbGxvLWNsaWVudCAoYW5kIHJlYWN0LWFwb2xsbykgdGhlIGBncmFwaHFsRXJyb3JzYCBhbmQgYG5ldHdvckVycm9yc2BcbiAgICAgICAgICAvLyB0byBwYXNzIHRvIFVJXG4gICAgICAgICAgLy8gdGhpcyBzaG91bGQgb25seSBoYXBwZW4gaWYgd2UgKmFsc28qIGhhdmUgZGF0YSBhcyBwYXJ0IG9mIHRoZSByZXNwb25zZSBrZXkgcGVyXG4gICAgICAgICAgLy8gdGhlIHNwZWNcbiAgICAgICAgICBpZiAoZXJyLnJlc3VsdCAmJiBlcnIucmVzdWx0LmVycm9ycyAmJiBlcnIucmVzdWx0LmRhdGEpIHtcbiAgICAgICAgICAgIC8vIGlmIHdlIGRvbid0IGNhbGwgbmV4dCwgdGhlIFVJIGNhbiBvbmx5IHNob3cgbmV0d29ya0Vycm9yIGJlY2F1c2UgQUMgZGlkbid0XG4gICAgICAgICAgICAvLyBnZXQgYW55IGdyYXBocWxFcnJvcnNcbiAgICAgICAgICAgIC8vIHRoaXMgaXMgZ3JhcGhxbCBleGVjdXRpb24gcmVzdWx0IGluZm8gKGkuZSBlcnJvcnMgYW5kIHBvc3NpYmx5IGRhdGEpXG4gICAgICAgICAgICAvLyB0aGlzIGlzIGJlY2F1c2UgdGhlcmUgaXMgbm8gZm9ybWFsIHNwZWMgaG93IGVycm9ycyBzaG91bGQgdHJhbnNsYXRlIHRvXG4gICAgICAgICAgICAvLyBodHRwIHN0YXR1cyBjb2Rlcy4gU28gYW4gYXV0aCBlcnJvciAoNDAxKSBjb3VsZCBoYXZlIGJvdGggZGF0YVxuICAgICAgICAgICAgLy8gZnJvbSBhIHB1YmxpYyBmaWVsZCwgZXJyb3JzIGZyb20gYSBwcml2YXRlIGZpZWxkLCBhbmQgYSBzdGF0dXMgb2YgNDAxXG4gICAgICAgICAgICAvLyB7XG4gICAgICAgICAgICAvLyAgdXNlciB7IC8vIHRoaXMgd2lsbCBoYXZlIGVycm9yc1xuICAgICAgICAgICAgLy8gICAgZmlyc3ROYW1lXG4gICAgICAgICAgICAvLyAgfVxuICAgICAgICAgICAgLy8gIHByb2R1Y3RzIHsgLy8gdGhpcyBpcyBwdWJsaWMgc28gd2lsbCBoYXZlIGRhdGFcbiAgICAgICAgICAgIC8vICAgIGNvc3RcbiAgICAgICAgICAgIC8vICB9XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAvL1xuICAgICAgICAgICAgLy8gdGhlIHJlc3VsdCBvZiBhYm92ZSAqY291bGQqIGxvb2sgbGlrZSB0aGlzOlxuICAgICAgICAgICAgLy8ge1xuICAgICAgICAgICAgLy8gICBkYXRhOiB7IHByb2R1Y3RzOiBbeyBjb3N0OiBcIiQxMFwiIH1dIH0sXG4gICAgICAgICAgICAvLyAgIGVycm9yczogW3tcbiAgICAgICAgICAgIC8vICAgICAgbWVzc2FnZTogJ3lvdXIgc2Vzc2lvbiBoYXMgdGltZWQgb3V0JyxcbiAgICAgICAgICAgIC8vICAgICAgcGF0aDogW11cbiAgICAgICAgICAgIC8vICAgfV1cbiAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgIC8vIHN0YXR1cyBjb2RlIG9mIGFib3ZlIHdvdWxkIGJlIGEgNDAxXG4gICAgICAgICAgICAvLyBpbiB0aGUgVUkgeW91IHdhbnQgdG8gc2hvdyBkYXRhIHdoZXJlIHlvdSBjYW4sIGVycm9ycyBhcyBkYXRhIHdoZXJlIHlvdSBjYW5cbiAgICAgICAgICAgIC8vIGFuZCB1c2UgY29ycmVjdCBodHRwIHN0YXR1cyBjb2Rlc1xuICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChlcnIucmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIC8vIFhYWCBzdXBwb3J0IGNhbmNlbGluZyB0aGlzIHJlcXVlc3RcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vd2ViL3VwZGF0ZXMvMjAxNy8wOS9hYm9ydGFibGUtZmV0Y2hcbiAgICAgICAgaWYgKGNvbnRyb2xsZXIpIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIH07XG4gICAgfSk7XG4gIH0pO1xufTtcbiIsICJpbXBvcnQgeyBzZXJpYWxpemVGZXRjaFBhcmFtZXRlciB9IGZyb20gJy4vc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXInO1xuaW1wb3J0IHsgQm9keSB9IGZyb20gJy4vc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5JztcblxuLy8gRm9yIEdFVCBvcGVyYXRpb25zLCByZXR1cm5zIHRoZSBnaXZlbiBVUkkgcmV3cml0dGVuIHdpdGggcGFyYW1ldGVycywgb3IgYVxuLy8gcGFyc2UgZXJyb3IuXG5leHBvcnQgZnVuY3Rpb24gcmV3cml0ZVVSSUZvckdFVChjaG9zZW5VUkk6IHN0cmluZywgYm9keTogQm9keSkge1xuICAvLyBJbXBsZW1lbnQgdGhlIHN0YW5kYXJkIEhUVFAgR0VUIHNlcmlhbGl6YXRpb24sIHBsdXMgJ2V4dGVuc2lvbnMnLiBOb3RlXG4gIC8vIHRoZSBleHRyYSBsZXZlbCBvZiBKU09OIHNlcmlhbGl6YXRpb24hXG4gIGNvbnN0IHF1ZXJ5UGFyYW1zOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBhZGRRdWVyeVBhcmFtID0gKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgcXVlcnlQYXJhbXMucHVzaChgJHtrZXl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gKTtcbiAgfTtcblxuICBpZiAoJ3F1ZXJ5JyBpbiBib2R5KSB7XG4gICAgYWRkUXVlcnlQYXJhbSgncXVlcnknLCBib2R5LnF1ZXJ5ISk7XG4gIH1cbiAgaWYgKGJvZHkub3BlcmF0aW9uTmFtZSkge1xuICAgIGFkZFF1ZXJ5UGFyYW0oJ29wZXJhdGlvbk5hbWUnLCBib2R5Lm9wZXJhdGlvbk5hbWUpO1xuICB9XG4gIGlmIChib2R5LnZhcmlhYmxlcykge1xuICAgIGxldCBzZXJpYWxpemVkVmFyaWFibGVzO1xuICAgIHRyeSB7XG4gICAgICBzZXJpYWxpemVkVmFyaWFibGVzID0gc2VyaWFsaXplRmV0Y2hQYXJhbWV0ZXIoXG4gICAgICAgIGJvZHkudmFyaWFibGVzLFxuICAgICAgICAnVmFyaWFibGVzIG1hcCcsXG4gICAgICApO1xuICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcbiAgICAgIHJldHVybiB7IHBhcnNlRXJyb3IgfTtcbiAgICB9XG4gICAgYWRkUXVlcnlQYXJhbSgndmFyaWFibGVzJywgc2VyaWFsaXplZFZhcmlhYmxlcyk7XG4gIH1cbiAgaWYgKGJvZHkuZXh0ZW5zaW9ucykge1xuICAgIGxldCBzZXJpYWxpemVkRXh0ZW5zaW9ucztcbiAgICB0cnkge1xuICAgICAgc2VyaWFsaXplZEV4dGVuc2lvbnMgPSBzZXJpYWxpemVGZXRjaFBhcmFtZXRlcihcbiAgICAgICAgYm9keS5leHRlbnNpb25zLFxuICAgICAgICAnRXh0ZW5zaW9ucyBtYXAnLFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XG4gICAgICByZXR1cm4geyBwYXJzZUVycm9yIH07XG4gICAgfVxuICAgIGFkZFF1ZXJ5UGFyYW0oJ2V4dGVuc2lvbnMnLCBzZXJpYWxpemVkRXh0ZW5zaW9ucyk7XG4gIH1cblxuICAvLyBSZWNvbnN0cnVjdCB0aGUgVVJJIHdpdGggYWRkZWQgcXVlcnkgcGFyYW1zLlxuICAvLyBYWFggVGhpcyBhc3N1bWVzIHRoYXQgdGhlIFVSSSBpcyB3ZWxsLWZvcm1lZCBhbmQgdGhhdCBpdCBkb2Vzbid0XG4gIC8vICAgICBhbHJlYWR5IGNvbnRhaW4gYW55IG9mIHRoZXNlIHF1ZXJ5IHBhcmFtcy4gV2UgY291bGQgaW5zdGVhZCB1c2UgdGhlXG4gIC8vICAgICBVUkwgQVBJIGFuZCB0YWtlIGEgcG9seWZpbGwgKHdoYXR3Zy11cmxANikgZm9yIG9sZGVyIGJyb3dzZXJzIHRoYXRcbiAgLy8gICAgIGRvbid0IHN1cHBvcnQgVVJMU2VhcmNoUGFyYW1zLiBOb3RlIHRoYXQgc29tZSBicm93c2VycyAoYW5kXG4gIC8vICAgICB2ZXJzaW9ucyBvZiB3aGF0d2ctdXJsKSBzdXBwb3J0IFVSTCBidXQgbm90IFVSTFNlYXJjaFBhcmFtcyFcbiAgbGV0IGZyYWdtZW50ID0gJycsXG4gICAgcHJlRnJhZ21lbnQgPSBjaG9zZW5VUkk7XG4gIGNvbnN0IGZyYWdtZW50U3RhcnQgPSBjaG9zZW5VUkkuaW5kZXhPZignIycpO1xuICBpZiAoZnJhZ21lbnRTdGFydCAhPT0gLTEpIHtcbiAgICBmcmFnbWVudCA9IGNob3NlblVSSS5zdWJzdHIoZnJhZ21lbnRTdGFydCk7XG4gICAgcHJlRnJhZ21lbnQgPSBjaG9zZW5VUkkuc3Vic3RyKDAsIGZyYWdtZW50U3RhcnQpO1xuICB9XG4gIGNvbnN0IHF1ZXJ5UGFyYW1zUHJlZml4ID0gcHJlRnJhZ21lbnQuaW5kZXhPZignPycpID09PSAtMSA/ICc/JyA6ICcmJztcbiAgY29uc3QgbmV3VVJJID1cbiAgICBwcmVGcmFnbWVudCArIHF1ZXJ5UGFyYW1zUHJlZml4ICsgcXVlcnlQYXJhbXMuam9pbignJicpICsgZnJhZ21lbnQ7XG4gIHJldHVybiB7IG5ld1VSSSB9O1xufVxuIiwgImltcG9ydCB7IEFwb2xsb0xpbmssIFJlcXVlc3RIYW5kbGVyIH0gZnJvbSAnLi4vY29yZSc7XG5pbXBvcnQgeyBIdHRwT3B0aW9ucyB9IGZyb20gJy4vc2VsZWN0SHR0cE9wdGlvbnNBbmRCb2R5JztcbmltcG9ydCB7IGNyZWF0ZUh0dHBMaW5rIH0gZnJvbSAnLi9jcmVhdGVIdHRwTGluayc7XG5cbmV4cG9ydCBjbGFzcyBIdHRwTGluayBleHRlbmRzIEFwb2xsb0xpbmsge1xuICBwdWJsaWMgcmVxdWVzdGVyOiBSZXF1ZXN0SGFuZGxlcjtcbiAgY29uc3RydWN0b3IocHVibGljIG9wdGlvbnM6IEh0dHBPcHRpb25zID0ge30pIHtcbiAgICBzdXBlcihjcmVhdGVIdHRwTGluayhvcHRpb25zKS5yZXF1ZXN0KTtcbiAgfVxufVxuIiwgImNvbnN0IHsgdG9TdHJpbmcsIGhhc093blByb3BlcnR5IH0gPSBPYmplY3QucHJvdG90eXBlO1xuY29uc3QgZm5Ub1N0ciA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcbmNvbnN0IHByZXZpb3VzQ29tcGFyaXNvbnMgPSBuZXcgTWFwPG9iamVjdCwgU2V0PG9iamVjdD4+KCk7XG5cbi8qKlxuICogUGVyZm9ybXMgYSBkZWVwIGVxdWFsaXR5IGNoZWNrIG9uIHR3byBKYXZhU2NyaXB0IHZhbHVlcywgdG9sZXJhdGluZyBjeWNsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlcXVhbChhOiBhbnksIGI6IGFueSk6IGJvb2xlYW4ge1xuICB0cnkge1xuICAgIHJldHVybiBjaGVjayhhLCBiKTtcbiAgfSBmaW5hbGx5IHtcbiAgICBwcmV2aW91c0NvbXBhcmlzb25zLmNsZWFyKCk7XG4gIH1cbn1cblxuLy8gQWxsb3cgZGVmYXVsdCBpbXBvcnRzIGFzIHdlbGwuXG5leHBvcnQgZGVmYXVsdCBlcXVhbDtcblxuZnVuY3Rpb24gY2hlY2soYTogYW55LCBiOiBhbnkpOiBib29sZWFuIHtcbiAgLy8gSWYgdGhlIHR3byB2YWx1ZXMgYXJlIHN0cmljdGx5IGVxdWFsLCBvdXIgam9iIGlzIGVhc3kuXG4gIGlmIChhID09PSBiKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nIHJldHVybnMgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgcnVudGltZSB0eXBlIG9mXG4gIC8vIHRoZSBnaXZlbiB2YWx1ZSB0aGF0IGlzIGNvbnNpZGVyYWJseSBtb3JlIHByZWNpc2UgdGhhbiB0eXBlb2YuXG4gIGNvbnN0IGFUYWcgPSB0b1N0cmluZy5jYWxsKGEpO1xuICBjb25zdCBiVGFnID0gdG9TdHJpbmcuY2FsbChiKTtcblxuICAvLyBJZiB0aGUgcnVudGltZSB0eXBlcyBvZiBhIGFuZCBiIGFyZSBkaWZmZXJlbnQsIHRoZXkgY291bGQgbWF5YmUgYmUgZXF1YWxcbiAgLy8gdW5kZXIgc29tZSBpbnRlcnByZXRhdGlvbiBvZiBlcXVhbGl0eSwgYnV0IGZvciBzaW1wbGljaXR5IGFuZCBwZXJmb3JtYW5jZVxuICAvLyB3ZSBqdXN0IHJldHVybiBmYWxzZSBpbnN0ZWFkLlxuICBpZiAoYVRhZyAhPT0gYlRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN3aXRjaCAoYVRhZykge1xuICAgIGNhc2UgJ1tvYmplY3QgQXJyYXldJzpcbiAgICAgIC8vIEFycmF5cyBhcmUgYSBsb3QgbGlrZSBvdGhlciBvYmplY3RzLCBidXQgd2UgY2FuIGNoZWFwbHkgY29tcGFyZSB0aGVpclxuICAgICAgLy8gbGVuZ3RocyBhcyBhIHNob3J0LWN1dCBiZWZvcmUgY29tcGFyaW5nIHRoZWlyIGVsZW1lbnRzLlxuICAgICAgaWYgKGEubGVuZ3RoICE9PSBiLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIG9iamVjdCBjYXNlLi4uXG4gICAgY2FzZSAnW29iamVjdCBPYmplY3RdJzoge1xuICAgICAgaWYgKHByZXZpb3VzbHlDb21wYXJlZChhLCBiKSkgcmV0dXJuIHRydWU7XG5cbiAgICAgIGNvbnN0IGFLZXlzID0gZGVmaW5lZEtleXMoYSk7XG4gICAgICBjb25zdCBiS2V5cyA9IGRlZmluZWRLZXlzKGIpO1xuXG4gICAgICAvLyBJZiBgYWAgYW5kIGBiYCBoYXZlIGEgZGlmZmVyZW50IG51bWJlciBvZiBlbnVtZXJhYmxlIGtleXMsIHRoZXlcbiAgICAgIC8vIG11c3QgYmUgZGlmZmVyZW50LlxuICAgICAgY29uc3Qga2V5Q291bnQgPSBhS2V5cy5sZW5ndGg7XG4gICAgICBpZiAoa2V5Q291bnQgIT09IGJLZXlzLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAvLyBOb3cgbWFrZSBzdXJlIHRoZXkgaGF2ZSB0aGUgc2FtZSBrZXlzLlxuICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBrZXlDb3VudDsgKytrKSB7XG4gICAgICAgIGlmICghaGFzT3duUHJvcGVydHkuY2FsbChiLCBhS2V5c1trXSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gRmluYWxseSwgY2hlY2sgZGVlcCBlcXVhbGl0eSBvZiBhbGwgY2hpbGQgcHJvcGVydGllcy5cbiAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwga2V5Q291bnQ7ICsraykge1xuICAgICAgICBjb25zdCBrZXkgPSBhS2V5c1trXTtcbiAgICAgICAgaWYgKCFjaGVjayhhW2tleV0sIGJba2V5XSkpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY2FzZSAnW29iamVjdCBFcnJvcl0nOlxuICAgICAgcmV0dXJuIGEubmFtZSA9PT0gYi5uYW1lICYmIGEubWVzc2FnZSA9PT0gYi5tZXNzYWdlO1xuXG4gICAgY2FzZSAnW29iamVjdCBOdW1iZXJdJzpcbiAgICAgIC8vIEhhbmRsZSBOYU4sIHdoaWNoIGlzICE9PSBpdHNlbGYuXG4gICAgICBpZiAoYSAhPT0gYSkgcmV0dXJuIGIgIT09IGI7XG4gICAgICAvLyBGYWxsIHRocm91Z2ggdG8gc2hhcmVkICthID09PSArYiBjYXNlLi4uXG4gICAgY2FzZSAnW29iamVjdCBCb29sZWFuXSc6XG4gICAgY2FzZSAnW29iamVjdCBEYXRlXSc6XG4gICAgICByZXR1cm4gK2EgPT09ICtiO1xuXG4gICAgY2FzZSAnW29iamVjdCBSZWdFeHBdJzpcbiAgICBjYXNlICdbb2JqZWN0IFN0cmluZ10nOlxuICAgICAgcmV0dXJuIGEgPT0gYCR7Yn1gO1xuXG4gICAgY2FzZSAnW29iamVjdCBNYXBdJzpcbiAgICBjYXNlICdbb2JqZWN0IFNldF0nOiB7XG4gICAgICBpZiAoYS5zaXplICE9PSBiLnNpemUpIHJldHVybiBmYWxzZTtcbiAgICAgIGlmIChwcmV2aW91c2x5Q29tcGFyZWQoYSwgYikpIHJldHVybiB0cnVlO1xuXG4gICAgICBjb25zdCBhSXRlcmF0b3IgPSBhLmVudHJpZXMoKTtcbiAgICAgIGNvbnN0IGlzTWFwID0gYVRhZyA9PT0gJ1tvYmplY3QgTWFwXSc7XG5cbiAgICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGNvbnN0IGluZm8gPSBhSXRlcmF0b3IubmV4dCgpO1xuICAgICAgICBpZiAoaW5mby5kb25lKSBicmVhaztcblxuICAgICAgICAvLyBJZiBhIGluc3RhbmNlb2YgU2V0LCBhVmFsdWUgPT09IGFLZXkuXG4gICAgICAgIGNvbnN0IFthS2V5LCBhVmFsdWVdID0gaW5mby52YWx1ZTtcblxuICAgICAgICAvLyBTbyB0aGlzIHdvcmtzIHRoZSBzYW1lIHdheSBmb3IgYm90aCBTZXQgYW5kIE1hcC5cbiAgICAgICAgaWYgKCFiLmhhcyhhS2V5KSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhvd2V2ZXIsIHdlIGNhcmUgYWJvdXQgZGVlcCBlcXVhbGl0eSBvZiB2YWx1ZXMgb25seSB3aGVuIGRlYWxpbmdcbiAgICAgICAgLy8gd2l0aCBNYXAgc3RydWN0dXJlcy5cbiAgICAgICAgaWYgKGlzTWFwICYmICFjaGVjayhhVmFsdWUsIGIuZ2V0KGFLZXkpKSkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBjYXNlICdbb2JqZWN0IEFzeW5jRnVuY3Rpb25dJzpcbiAgICBjYXNlICdbb2JqZWN0IEdlbmVyYXRvckZ1bmN0aW9uXSc6XG4gICAgY2FzZSAnW29iamVjdCBBc3luY0dlbmVyYXRvckZ1bmN0aW9uXSc6XG4gICAgY2FzZSAnW29iamVjdCBGdW5jdGlvbl0nOiB7XG4gICAgICBjb25zdCBhQ29kZSA9IGZuVG9TdHIuY2FsbChhKTtcbiAgICAgIGlmIChhQ29kZSAhPT0gZm5Ub1N0ci5jYWxsKGIpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLy8gV2UgY29uc2lkZXIgbm9uLW5hdGl2ZSBmdW5jdGlvbnMgZXF1YWwgaWYgdGhleSBoYXZlIHRoZSBzYW1lIGNvZGVcbiAgICAgIC8vIChuYXRpdmUgZnVuY3Rpb25zIHJlcXVpcmUgPT09IGJlY2F1c2UgdGhlaXIgY29kZSBpcyBjZW5zb3JlZCkuXG4gICAgICAvLyBOb3RlIHRoYXQgdGhpcyBiZWhhdmlvciBpcyBub3QgZW50aXJlbHkgc291bmQsIHNpbmNlICE9PSBmdW5jdGlvblxuICAgICAgLy8gb2JqZWN0cyB3aXRoIHRoZSBzYW1lIGNvZGUgY2FuIGJlaGF2ZSBkaWZmZXJlbnRseSBkZXBlbmRpbmcgb25cbiAgICAgIC8vIHRoZWlyIGNsb3N1cmUgc2NvcGUuIEhvd2V2ZXIsIGFueSBmdW5jdGlvbiBjYW4gYmVoYXZlIGRpZmZlcmVudGx5XG4gICAgICAvLyBkZXBlbmRpbmcgb24gdGhlIHZhbHVlcyBvZiBpdHMgaW5wdXQgYXJndW1lbnRzIChpbmNsdWRpbmcgdGhpcylcbiAgICAgIC8vIGFuZCBpdHMgY2FsbGluZyBjb250ZXh0IChpbmNsdWRpbmcgaXRzIGNsb3N1cmUgc2NvcGUpLCBldmVuXG4gICAgICAvLyB0aG91Z2ggdGhlIGZ1bmN0aW9uIG9iamVjdCBpcyA9PT0gdG8gaXRzZWxmOyBhbmQgaXQgaXMgZW50aXJlbHlcbiAgICAgIC8vIHBvc3NpYmxlIGZvciBmdW5jdGlvbnMgdGhhdCBhcmUgbm90ID09PSB0byBiZWhhdmUgZXhhY3RseSB0aGVcbiAgICAgIC8vIHNhbWUgdW5kZXIgYWxsIGNvbmNlaXZhYmxlIGNpcmN1bXN0YW5jZXMuIEJlY2F1c2Ugbm9uZSBvZiB0aGVzZVxuICAgICAgLy8gZmFjdG9ycyBhcmUgc3RhdGljYWxseSBkZWNpZGFibGUgaW4gSmF2YVNjcmlwdCwgSlMgZnVuY3Rpb25cbiAgICAgIC8vIGVxdWFsaXR5IGlzIG5vdCB3ZWxsLWRlZmluZWQuIFRoaXMgYW1iaWd1aXR5IGFsbG93cyB1cyB0b1xuICAgICAgLy8gY29uc2lkZXIgdGhlIGJlc3QgcG9zc2libGUgaGV1cmlzdGljIGFtb25nIHZhcmlvdXMgaW1wZXJmZWN0XG4gICAgICAvLyBvcHRpb25zLCBhbmQgZXF1YXRpbmcgbm9uLW5hdGl2ZSBmdW5jdGlvbnMgdGhhdCBoYXZlIHRoZSBzYW1lXG4gICAgICAvLyBjb2RlIGhhcyBlbm9ybW91cyBwcmFjdGljYWwgYmVuZWZpdHMsIHN1Y2ggYXMgd2hlbiBjb21wYXJpbmdcbiAgICAgIC8vIGZ1bmN0aW9ucyB0aGF0IGFyZSByZXBlYXRlZGx5IHBhc3NlZCBhcyBmcmVzaCBmdW5jdGlvblxuICAgICAgLy8gZXhwcmVzc2lvbnMgd2l0aGluIG9iamVjdHMgdGhhdCBhcmUgb3RoZXJ3aXNlIGRlZXBseSBlcXVhbC4gU2luY2VcbiAgICAgIC8vIGFueSBmdW5jdGlvbiBjcmVhdGVkIGZyb20gdGhlIHNhbWUgc3ludGFjdGljIGV4cHJlc3Npb24gKGluIHRoZVxuICAgICAgLy8gc2FtZSBjb2RlIGxvY2F0aW9uKSB3aWxsIGFsd2F5cyBzdHJpbmdpZnkgdG8gdGhlIHNhbWUgY29kZVxuICAgICAgLy8gYWNjb3JkaW5nIHRvIGZuVG9TdHIuY2FsbCwgd2UgY2FuIHJlYXNvbmFibHkgZXhwZWN0IHRoZXNlXG4gICAgICAvLyByZXBlYXRlZGx5IHBhc3NlZCBmdW5jdGlvbiBleHByZXNzaW9ucyB0byBoYXZlIHRoZSBzYW1lIGNvZGUsIGFuZFxuICAgICAgLy8gdGh1cyBiZWhhdmUgXCJ0aGUgc2FtZVwiICh3aXRoIGFsbCB0aGUgY2F2ZWF0cyBtZW50aW9uZWQgYWJvdmUpLFxuICAgICAgLy8gZXZlbiB0aG91Z2ggdGhlIHJ1bnRpbWUgZnVuY3Rpb24gb2JqZWN0cyBhcmUgIT09IHRvIG9uZSBhbm90aGVyLlxuICAgICAgcmV0dXJuICFlbmRzV2l0aChhQ29kZSwgbmF0aXZlQ29kZVN1ZmZpeCk7XG4gICAgfVxuICB9XG5cbiAgLy8gT3RoZXJ3aXNlIHRoZSB2YWx1ZXMgYXJlIG5vdCBlcXVhbC5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBkZWZpbmVkS2V5czxUT2JqZWN0IGV4dGVuZHMgb2JqZWN0PihvYmo6IFRPYmplY3QpIHtcbiAgLy8gUmVtZW1iZXIgdGhhdCB0aGUgc2Vjb25kIGFyZ3VtZW50IHRvIEFycmF5LnByb3RvdHlwZS5maWx0ZXIgd2lsbCBiZVxuICAvLyB1c2VkIGFzIGB0aGlzYCB3aXRoaW4gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uLlxuICByZXR1cm4gT2JqZWN0LmtleXMob2JqKS5maWx0ZXIoaXNEZWZpbmVkS2V5LCBvYmopO1xufVxuZnVuY3Rpb24gaXNEZWZpbmVkS2V5PFRPYmplY3QgZXh0ZW5kcyBvYmplY3Q+KFxuICB0aGlzOiBUT2JqZWN0LFxuICBrZXk6IGtleW9mIFRPYmplY3QsXG4pIHtcbiAgcmV0dXJuIHRoaXNba2V5XSAhPT0gdm9pZCAwO1xufVxuXG5jb25zdCBuYXRpdmVDb2RlU3VmZml4ID0gXCJ7IFtuYXRpdmUgY29kZV0gfVwiO1xuXG5mdW5jdGlvbiBlbmRzV2l0aChmdWxsOiBzdHJpbmcsIHN1ZmZpeDogc3RyaW5nKSB7XG4gIGNvbnN0IGZyb21JbmRleCA9IGZ1bGwubGVuZ3RoIC0gc3VmZml4Lmxlbmd0aDtcbiAgcmV0dXJuIGZyb21JbmRleCA+PSAwICYmXG4gICAgZnVsbC5pbmRleE9mKHN1ZmZpeCwgZnJvbUluZGV4KSA9PT0gZnJvbUluZGV4O1xufVxuXG5mdW5jdGlvbiBwcmV2aW91c2x5Q29tcGFyZWQoYTogb2JqZWN0LCBiOiBvYmplY3QpOiBib29sZWFuIHtcbiAgLy8gVGhvdWdoIGN5Y2xpYyByZWZlcmVuY2VzIGNhbiBtYWtlIGFuIG9iamVjdCBncmFwaCBhcHBlYXIgaW5maW5pdGUgZnJvbSB0aGVcbiAgLy8gcGVyc3BlY3RpdmUgb2YgYSBkZXB0aC1maXJzdCB0cmF2ZXJzYWwsIHRoZSBncmFwaCBzdGlsbCBjb250YWlucyBhIGZpbml0ZVxuICAvLyBudW1iZXIgb2YgZGlzdGluY3Qgb2JqZWN0IHJlZmVyZW5jZXMuIFdlIHVzZSB0aGUgcHJldmlvdXNDb21wYXJpc29ucyBjYWNoZVxuICAvLyB0byBhdm9pZCBjb21wYXJpbmcgdGhlIHNhbWUgcGFpciBvZiBvYmplY3QgcmVmZXJlbmNlcyBtb3JlIHRoYW4gb25jZSwgd2hpY2hcbiAgLy8gZ3VhcmFudGVlcyB0ZXJtaW5hdGlvbiAoZXZlbiBpZiB3ZSBlbmQgdXAgY29tcGFyaW5nIGV2ZXJ5IG9iamVjdCBpbiBvbmVcbiAgLy8gZ3JhcGggdG8gZXZlcnkgb2JqZWN0IGluIHRoZSBvdGhlciBncmFwaCwgd2hpY2ggaXMgZXh0cmVtZWx5IHVubGlrZWx5KSxcbiAgLy8gd2hpbGUgc3RpbGwgYWxsb3dpbmcgd2VpcmQgaXNvbW9ycGhpYyBzdHJ1Y3R1cmVzIChsaWtlIHJpbmdzIHdpdGggZGlmZmVyZW50XG4gIC8vIGxlbmd0aHMpIGEgY2hhbmNlIHRvIHBhc3MgdGhlIGVxdWFsaXR5IHRlc3QuXG4gIGxldCBiU2V0ID0gcHJldmlvdXNDb21wYXJpc29ucy5nZXQoYSk7XG4gIGlmIChiU2V0KSB7XG4gICAgLy8gUmV0dXJuIHRydWUgaGVyZSBiZWNhdXNlIHdlIGNhbiBiZSBzdXJlIGZhbHNlIHdpbGwgYmUgcmV0dXJuZWQgc29tZXdoZXJlXG4gICAgLy8gZWxzZSBpZiB0aGUgb2JqZWN0cyBhcmUgbm90IGVxdWl2YWxlbnQuXG4gICAgaWYgKGJTZXQuaGFzKGIpKSByZXR1cm4gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICBwcmV2aW91c0NvbXBhcmlzb25zLnNldChhLCBiU2V0ID0gbmV3IFNldCk7XG4gIH1cbiAgYlNldC5hZGQoYik7XG4gIHJldHVybiBmYWxzZTtcbn1cbiIsICJpbXBvcnQgeyBHcmFwaFFMRXJyb3IgfSBmcm9tICdncmFwaHFsJztcblxuaW1wb3J0IHsgaXNOb25FbXB0eUFycmF5IH0gZnJvbSAnLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IFNlcnZlclBhcnNlRXJyb3IgfSBmcm9tICcuLi9saW5rL2h0dHAnO1xuaW1wb3J0IHsgU2VydmVyRXJyb3IgfSBmcm9tICcuLi9saW5rL3V0aWxzJztcblxuZXhwb3J0IGZ1bmN0aW9uIGlzQXBvbGxvRXJyb3IoZXJyOiBFcnJvcik6IGVyciBpcyBBcG9sbG9FcnJvciB7XG4gIHJldHVybiBlcnIuaGFzT3duUHJvcGVydHkoJ2dyYXBoUUxFcnJvcnMnKTtcbn1cblxuLy8gU2V0cyB0aGUgZXJyb3IgbWVzc2FnZSBvbiB0aGlzIGVycm9yIGFjY29yZGluZyB0byB0aGVcbi8vIHRoZSBHcmFwaFFMIGFuZCBuZXR3b3JrIGVycm9ycyB0aGF0IGFyZSBwcmVzZW50LlxuLy8gSWYgdGhlIGVycm9yIG1lc3NhZ2UgaGFzIGFscmVhZHkgYmVlbiBzZXQgdGhyb3VnaCB0aGVcbi8vIGNvbnN0cnVjdG9yIG9yIG90aGVyd2lzZSwgdGhpcyBmdW5jdGlvbiBpcyBhIG5vcC5cbmNvbnN0IGdlbmVyYXRlRXJyb3JNZXNzYWdlID0gKGVycjogQXBvbGxvRXJyb3IpID0+IHtcbiAgbGV0IG1lc3NhZ2UgPSAnJztcbiAgLy8gSWYgd2UgaGF2ZSBHcmFwaFFMIGVycm9ycyBwcmVzZW50LCBhZGQgdGhhdCB0byB0aGUgZXJyb3IgbWVzc2FnZS5cbiAgaWYgKGlzTm9uRW1wdHlBcnJheShlcnIuZ3JhcGhRTEVycm9ycykpIHtcbiAgICBlcnIuZ3JhcGhRTEVycm9ycy5mb3JFYWNoKChncmFwaFFMRXJyb3I6IEdyYXBoUUxFcnJvcikgPT4ge1xuICAgICAgY29uc3QgZXJyb3JNZXNzYWdlID0gZ3JhcGhRTEVycm9yXG4gICAgICAgID8gZ3JhcGhRTEVycm9yLm1lc3NhZ2VcbiAgICAgICAgOiAnRXJyb3IgbWVzc2FnZSBub3QgZm91bmQuJztcbiAgICAgIG1lc3NhZ2UgKz0gYCR7ZXJyb3JNZXNzYWdlfVxcbmA7XG4gICAgfSk7XG4gIH1cblxuICBpZiAoZXJyLm5ldHdvcmtFcnJvcikge1xuICAgIG1lc3NhZ2UgKz0gYCR7ZXJyLm5ldHdvcmtFcnJvci5tZXNzYWdlfVxcbmA7XG4gIH1cblxuICAvLyBzdHJpcCBuZXdsaW5lIGZyb20gdGhlIGVuZCBvZiB0aGUgbWVzc2FnZVxuICBtZXNzYWdlID0gbWVzc2FnZS5yZXBsYWNlKC9cXG4kLywgJycpO1xuICByZXR1cm4gbWVzc2FnZTtcbn07XG5cbmV4cG9ydCBjbGFzcyBBcG9sbG9FcnJvciBleHRlbmRzIEVycm9yIHtcbiAgcHVibGljIG1lc3NhZ2U6IHN0cmluZztcbiAgcHVibGljIGdyYXBoUUxFcnJvcnM6IFJlYWRvbmx5QXJyYXk8R3JhcGhRTEVycm9yPjtcbiAgcHVibGljIG5ldHdvcmtFcnJvcjogRXJyb3IgfCBTZXJ2ZXJQYXJzZUVycm9yIHwgU2VydmVyRXJyb3IgfCBudWxsO1xuXG4gIC8vIEFuIG9iamVjdCB0aGF0IGNhbiBiZSB1c2VkIHRvIHByb3ZpZGUgc29tZSBhZGRpdGlvbmFsIGluZm9ybWF0aW9uXG4gIC8vIGFib3V0IGFuIGVycm9yLCBlLmcuIHNwZWNpZnlpbmcgdGhlIHR5cGUgb2YgZXJyb3IgdGhpcyBpcy4gVXNlZFxuICAvLyBpbnRlcm5hbGx5IHdpdGhpbiBBcG9sbG8gQ2xpZW50LlxuICBwdWJsaWMgZXh0cmFJbmZvOiBhbnk7XG5cbiAgLy8gQ29uc3RydWN0cyBhbiBpbnN0YW5jZSBvZiBBcG9sbG9FcnJvciBnaXZlbiBhIEdyYXBoUUxFcnJvclxuICAvLyBvciBhIG5ldHdvcmsgZXJyb3IuIE5vdGUgdGhhdCBvbmUgb2YgdGhlc2UgaGFzIHRvIGJlIGEgdmFsaWRcbiAgLy8gdmFsdWUgb3IgdGhlIGNvbnN0cnVjdGVkIGVycm9yIHdpbGwgYmUgbWVhbmluZ2xlc3MuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBncmFwaFFMRXJyb3JzLFxuICAgIG5ldHdvcmtFcnJvcixcbiAgICBlcnJvck1lc3NhZ2UsXG4gICAgZXh0cmFJbmZvLFxuICB9OiB7XG4gICAgZ3JhcGhRTEVycm9ycz86IFJlYWRvbmx5QXJyYXk8R3JhcGhRTEVycm9yPjtcbiAgICBuZXR3b3JrRXJyb3I/OiBFcnJvciB8IFNlcnZlclBhcnNlRXJyb3IgfCBTZXJ2ZXJFcnJvciB8IG51bGw7XG4gICAgZXJyb3JNZXNzYWdlPzogc3RyaW5nO1xuICAgIGV4dHJhSW5mbz86IGFueTtcbiAgfSkge1xuICAgIHN1cGVyKGVycm9yTWVzc2FnZSk7XG4gICAgdGhpcy5ncmFwaFFMRXJyb3JzID0gZ3JhcGhRTEVycm9ycyB8fCBbXTtcbiAgICB0aGlzLm5ldHdvcmtFcnJvciA9IG5ldHdvcmtFcnJvciB8fCBudWxsO1xuICAgIHRoaXMubWVzc2FnZSA9IGVycm9yTWVzc2FnZSB8fCBnZW5lcmF0ZUVycm9yTWVzc2FnZSh0aGlzKTtcbiAgICB0aGlzLmV4dHJhSW5mbyA9IGV4dHJhSW5mbztcblxuICAgIC8vIFdlJ3JlIG5vdCB1c2luZyBgT2JqZWN0LnNldFByb3RvdHlwZU9mYCBoZXJlIGFzIGl0IGlzbid0IGZ1bGx5XG4gICAgLy8gc3VwcG9ydGVkIG9uIEFuZHJvaWQgKHNlZSBpc3N1ZSAjMzIzNikuXG4gICAgKHRoaXMgYXMgYW55KS5fX3Byb3RvX18gPSBBcG9sbG9FcnJvci5wcm90b3R5cGU7XG4gIH1cbn1cbiIsICIvKipcbiAqIFRoZSBjdXJyZW50IHN0YXR1cyBvZiBhIHF1ZXJ5XHUyMDE5cyBleGVjdXRpb24gaW4gb3VyIHN5c3RlbS5cbiAqL1xuZXhwb3J0IGVudW0gTmV0d29ya1N0YXR1cyB7XG4gIC8qKlxuICAgKiBUaGUgcXVlcnkgaGFzIG5ldmVyIGJlZW4gcnVuIGJlZm9yZSBhbmQgdGhlIHF1ZXJ5IGlzIG5vdyBjdXJyZW50bHkgcnVubmluZy4gQSBxdWVyeSB3aWxsIHN0aWxsXG4gICAqIGhhdmUgdGhpcyBuZXR3b3JrIHN0YXR1cyBldmVuIGlmIGEgcGFydGlhbCBkYXRhIHJlc3VsdCB3YXMgcmV0dXJuZWQgZnJvbSB0aGUgY2FjaGUsIGJ1dCBhXG4gICAqIHF1ZXJ5IHdhcyBkaXNwYXRjaGVkIGFueXdheS5cbiAgICovXG4gIGxvYWRpbmcgPSAxLFxuXG4gIC8qKlxuICAgKiBJZiBgc2V0VmFyaWFibGVzYCB3YXMgY2FsbGVkIGFuZCBhIHF1ZXJ5IHdhcyBmaXJlZCBiZWNhdXNlIG9mIHRoYXQgdGhlbiB0aGUgbmV0d29yayBzdGF0dXNcbiAgICogd2lsbCBiZSBgc2V0VmFyaWFibGVzYCB1bnRpbCB0aGUgcmVzdWx0IG9mIHRoYXQgcXVlcnkgY29tZXMgYmFjay5cbiAgICovXG4gIHNldFZhcmlhYmxlcyA9IDIsXG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyB0aGF0IGBmZXRjaE1vcmVgIHdhcyBjYWxsZWQgb24gdGhpcyBxdWVyeSBhbmQgdGhhdCB0aGUgcXVlcnkgY3JlYXRlZCBpcyBjdXJyZW50bHkgaW5cbiAgICogZmxpZ2h0LlxuICAgKi9cbiAgZmV0Y2hNb3JlID0gMyxcblxuICAvKipcbiAgICogU2ltaWxhciB0byB0aGUgYHNldFZhcmlhYmxlc2AgbmV0d29yayBzdGF0dXMuIEl0IG1lYW5zIHRoYXQgYHJlZmV0Y2hgIHdhcyBjYWxsZWQgb24gYSBxdWVyeVxuICAgKiBhbmQgdGhlIHJlZmV0Y2ggcmVxdWVzdCBpcyBjdXJyZW50bHkgaW4gZmxpZ2h0LlxuICAgKi9cbiAgcmVmZXRjaCA9IDQsXG5cbiAgLyoqXG4gICAqIEluZGljYXRlcyB0aGF0IGEgcG9sbGluZyBxdWVyeSBpcyBjdXJyZW50bHkgaW4gZmxpZ2h0LiBTbyBmb3IgZXhhbXBsZSBpZiB5b3UgYXJlIHBvbGxpbmcgYVxuICAgKiBxdWVyeSBldmVyeSAxMCBzZWNvbmRzIHRoZW4gdGhlIG5ldHdvcmsgc3RhdHVzIHdpbGwgc3dpdGNoIHRvIGBwb2xsYCBldmVyeSAxMCBzZWNvbmRzIHdoZW5ldmVyXG4gICAqIGEgcG9sbCByZXF1ZXN0IGhhcyBiZWVuIHNlbnQgYnV0IG5vdCByZXNvbHZlZC5cbiAgICovXG4gIHBvbGwgPSA2LFxuXG4gIC8qKlxuICAgKiBObyByZXF1ZXN0IGlzIGluIGZsaWdodCBmb3IgdGhpcyBxdWVyeSwgYW5kIG5vIGVycm9ycyBoYXBwZW5lZC4gRXZlcnl0aGluZyBpcyBPSy5cbiAgICovXG4gIHJlYWR5ID0gNyxcblxuICAvKipcbiAgICogTm8gcmVxdWVzdCBpcyBpbiBmbGlnaHQgZm9yIHRoaXMgcXVlcnksIGJ1dCBvbmUgb3IgbW9yZSBlcnJvcnMgd2VyZSBkZXRlY3RlZC5cbiAgICovXG4gIGVycm9yID0gOCxcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlcmUgaXMgY3VycmVudGx5IGEgbmV0d29yayByZXF1ZXN0IGluIGZsaWdodCBhY2NvcmRpbmcgdG8gYSBnaXZlbiBuZXR3b3JrXG4gKiBzdGF0dXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQoXG4gIG5ldHdvcmtTdGF0dXM/OiBOZXR3b3JrU3RhdHVzLFxuKTogYm9vbGVhbiB7XG4gIHJldHVybiBuZXR3b3JrU3RhdHVzID8gbmV0d29ya1N0YXR1cyA8IDcgOiBmYWxzZTtcbn1cbiIsICJpbXBvcnQgeyBXYXRjaFF1ZXJ5T3B0aW9ucyB9IGZyb20gJy4vd2F0Y2hRdWVyeU9wdGlvbnMnO1xuaW1wb3J0IHsgTmV0d29ya1N0YXR1cyB9IGZyb20gJy4vbmV0d29ya1N0YXR1cyc7XG5pbXBvcnQgeyBBcG9sbG9RdWVyeVJlc3VsdCB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgT2JzZXJ2ZXIsIENvbmNhc3QsIGNvbXBhY3QgfSBmcm9tICcuLi91dGlsaXRpZXMnO1xuaW1wb3J0IHsgaW52YXJpYW50IH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuLy8gR2l2ZW4gdGhhdCBRdWVyeU1hbmFnZXIjZmV0Y2hRdWVyeU9ic2VydmFibGUgcmV0dXJucyBvbmx5IGEgc2luZ2xlXG4vLyBxdWVyeSdzIHdvcnRoIG9mIHJlc3VsdHMsIG90aGVyIGNvZGUgbXVzdCBiZSByZXNwb25zaWJsZSBmb3IgcmVwZWF0ZWRseVxuLy8gY2FsbGluZyBmZXRjaFF1ZXJ5T2JzZXJ2YWJsZSwgd2hpbGUgZW5zdXJpbmcgdGhhdCB0aGUgT2JzZXJ2YWJsZVF1ZXJ5XG4vLyBjb25zdW1pbmcgdGhvc2UgcmVzdWx0cyByZW1haW5zIHN1YnNjcmliZWQgdG8gdGhlIGNvbmNhdGVuYXRpb24gb2YgYWxsXG4vLyB0aGUgb2JzZXJ2YWJsZXMgcmV0dXJuZWQgYnkgZmV0Y2hRdWVyeU9ic2VydmFibGUuIFRoYXQgcmVzcG9uc2liaWxpdHlcbi8vIGZhbGxzIHRvIHRoaXMgUmVvYnNlcnZlciBjbGFzcy4gQXMgYSBib251cywgdGhlIFJlb2JzZXJ2ZXIgY2xhc3MgaXNcbi8vIHBlcmZlY3RseSBwb2lzZWQgdG8gaGFuZGxlIHBvbGxpbmcgbG9naWMsIHNpbmNlIHBvbGxpbmcgaXMgZXNzZW50aWFsbHlcbi8vIHJlcGVhdGVkIHJlb2JzZXJ2YXRpb24uIEluIHByaW5jaXBsZSwgdGhpcyBjb2RlIGNvdWxkIGhhdmUgcmVtYWluZWQgaW5cbi8vIHRoZSBPYnNlcnZhYmxlUXVlcnkgY2xhc3MsIGJ1dCBJIGZlbHQgaXQgd291bGQgYmUgZWFzaWVyIHRvIGV4cGxhaW4gYW5kXG4vLyB1bmRlcnN0YW5kIHJlb2JzZXJ2YXRpb24gaWYgaXQgd2FzIGNvbmZpbmVkIHRvIGEgc2VwYXJhdGUgY2xhc3MuXG5leHBvcnQgY2xhc3MgUmVvYnNlcnZlcjxURGF0YSwgVFZhcnM+IHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBvYnNlcnZlcjogT2JzZXJ2ZXI8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PixcbiAgICBwcml2YXRlIG9wdGlvbnM6IFdhdGNoUXVlcnlPcHRpb25zPFRWYXJzLCBURGF0YT4sXG4gICAgLy8gQWxtb3N0IGNlcnRhaW5seSBqdXN0IGEgd3JhcHBlciBmdW5jdGlvbiBhcm91bmRcbiAgICAvLyBRdWVyeU1hbmFnZXIjZmV0Y2hRdWVyeU9ic2VydmFibGUsIGJ1dCB0aGlzIHNtYWxsIGRvc2Ugb2ZcbiAgICAvLyBpbmRpcmVjdGlvbiBtZWFucyB0aGUgUmVvYnNlcnZlciBkb2Vzbid0IGhhdmUgdG8ga25vdy9hc3N1bWVcbiAgICAvLyBhbnl0aGluZyBhYm91dCB0aGUgUXVlcnlNYW5hZ2VyIGNsYXNzLlxuICAgIHByaXZhdGUgZmV0Y2g6IChcbiAgICAgIG9wdGlvbnM6IFdhdGNoUXVlcnlPcHRpb25zPFRWYXJzLCBURGF0YT4sXG4gICAgICBuZXdOZXR3b3JrU3RhdHVzPzogTmV0d29ya1N0YXR1cyxcbiAgICApID0+IENvbmNhc3Q8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PixcbiAgICAvLyBJZiB3ZSdyZSBwb2xsaW5nLCB0aGVyZSBtYXkgYmUgdGltZXMgd2hlbiB3ZSBzaG91bGQgYXZvaWQgZmV0Y2hpbmcsXG4gICAgLy8gc3VjaCBhcyB3aGVuIHRoZSBxdWVyeSBpcyBhbHJlYWR5IGluIGZsaWdodCwgb3IgcG9sbGluZyBoYXMgYmVlblxuICAgIC8vIGNvbXBsZXRlbHkgZGlzYWJsZWQgZm9yIHNlcnZlci1zaWRlIHJlbmRlcmluZy4gUGFzc2luZyBmYWxzZSBmb3JcbiAgICAvLyB0aGlzIHBhcmFtZXRlciBkaXNhYmxlcyBwb2xsaW5nIGNvbXBsZXRlbHksIGFuZCBwYXNzaW5nIGEgYm9vbGVhblxuICAgIC8vIGZ1bmN0aW9uIGFsbG93cyBkZXRlcm1pbmluZyBmZXRjaCBzYWZldHkgZHluYW1pY2FsbHkuXG4gICAgcHJpdmF0ZSBzaG91bGRGZXRjaDogZmFsc2UgfCAoKCkgPT4gYm9vbGVhbiksXG4gICkge31cblxuICBwcml2YXRlIGNvbmNhc3Q/OiBDb25jYXN0PEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj47XG5cbiAgcHVibGljIHJlb2JzZXJ2ZShcbiAgICBuZXdPcHRpb25zPzogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxUVmFycywgVERhdGE+PixcbiAgICBuZXdOZXR3b3JrU3RhdHVzPzogTmV0d29ya1N0YXR1cyxcbiAgKTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+IHtcbiAgICBpZiAobmV3T3B0aW9ucykge1xuICAgICAgdGhpcy51cGRhdGVPcHRpb25zKG5ld09wdGlvbnMpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBXaGVuIHdlIGNhbGwgdGhpcy51cGRhdGVPcHRpb25zKG5ld09wdGlvbnMpIGluIHRoZSBicmFuY2ggYWJvdmUsXG4gICAgICAvLyBpdCB0YWtlcyBjYXJlIG9mIGNhbGxpbmcgdGhpcy51cGRhdGVQb2xsaW5nKCkuIEluIHRoaXMgYnJhbmNoLCB3ZVxuICAgICAgLy8gc3RpbGwgbmVlZCB0byB1cGRhdGUgcG9sbGluZywgZXZlbiBpZiB0aGVyZSB3ZXJlIG5vIG5ld09wdGlvbnMuXG4gICAgICB0aGlzLnVwZGF0ZVBvbGxpbmcoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb25jYXN0ID0gdGhpcy5mZXRjaCh0aGlzLm9wdGlvbnMsIG5ld05ldHdvcmtTdGF0dXMpO1xuXG4gICAgaWYgKHRoaXMuY29uY2FzdCkge1xuICAgICAgLy8gV2UgdXNlIHRoZSB7YWRkLHJlbW92ZX1PYnNlcnZlciBtZXRob2RzIGRpcmVjdGx5IHRvIGF2b2lkXG4gICAgICAvLyB3cmFwcGluZyBvYnNlcnZlciB3aXRoIGFuIHVubmVjZXNzYXJ5IFN1YnNjcmlwdGlvbk9ic2VydmVyXG4gICAgICAvLyBvYmplY3QsIGluIHBhcnQgc28gdGhhdCB3ZSBjYW4gcmVtb3ZlIGl0IGhlcmUgd2l0aG91dCB0cmlnZ2VyaW5nXG4gICAgICAvLyBhbnkgdW5zdWJzY3JpcHRpb25zLCBiZWNhdXNlIHdlIGp1c3Qgd2FudCB0byBpZ25vcmUgdGhlIG9sZFxuICAgICAgLy8gb2JzZXJ2YWJsZSwgbm90IHByZW1hdHVyZWx5IHNodXQgaXQgZG93biwgc2luY2Ugb3RoZXIgY29uc3VtZXJzXG4gICAgICAvLyBtYXkgYmUgYXdhaXRpbmcgdGhpcy5jb25jYXN0LnByb21pc2UuXG4gICAgICB0aGlzLmNvbmNhc3QucmVtb3ZlT2JzZXJ2ZXIodGhpcy5vYnNlcnZlciwgdHJ1ZSk7XG4gICAgfVxuXG4gICAgY29uY2FzdC5hZGRPYnNlcnZlcih0aGlzLm9ic2VydmVyKTtcblxuICAgIHJldHVybiAodGhpcy5jb25jYXN0ID0gY29uY2FzdCkucHJvbWlzZTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVPcHRpb25zKG5ld09wdGlvbnM6IFBhcnRpYWw8V2F0Y2hRdWVyeU9wdGlvbnM8VFZhcnMsIFREYXRhPj4pIHtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMub3B0aW9ucywgY29tcGFjdChuZXdPcHRpb25zKSk7XG4gICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBwdWJsaWMgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5jb25jYXN0KSB7XG4gICAgICB0aGlzLmNvbmNhc3QucmVtb3ZlT2JzZXJ2ZXIodGhpcy5vYnNlcnZlcik7XG4gICAgICBkZWxldGUgdGhpcy5jb25jYXN0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBvbGxpbmdJbmZvKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wb2xsaW5nSW5mby50aW1lb3V0KTtcbiAgICAgIHRoaXMub3B0aW9ucy5wb2xsSW50ZXJ2YWwgPSAwO1xuICAgICAgdGhpcy51cGRhdGVQb2xsaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBwb2xsaW5nSW5mbz86IHtcbiAgICBpbnRlcnZhbDogbnVtYmVyO1xuICAgIHRpbWVvdXQ6IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xuICB9O1xuXG4gIC8vIFR1cm5zIHBvbGxpbmcgb24gb3Igb2ZmIGJhc2VkIG9uIHRoaXMub3B0aW9ucy5wb2xsSW50ZXJ2YWwuXG4gIHByaXZhdGUgdXBkYXRlUG9sbGluZygpIHtcbiAgICBjb25zdCB7XG4gICAgICBwb2xsaW5nSW5mbyxcbiAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgcG9sbEludGVydmFsLFxuICAgICAgfSxcbiAgICB9ID0gdGhpcztcblxuICAgIGlmICghcG9sbEludGVydmFsKSB7XG4gICAgICBpZiAocG9sbGluZ0luZm8pIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHBvbGxpbmdJbmZvLnRpbWVvdXQpO1xuICAgICAgICBkZWxldGUgdGhpcy5wb2xsaW5nSW5mbztcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAocG9sbGluZ0luZm8gJiZcbiAgICAgICAgcG9sbGluZ0luZm8uaW50ZXJ2YWwgPT09IHBvbGxJbnRlcnZhbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGludmFyaWFudChcbiAgICAgIHBvbGxJbnRlcnZhbCxcbiAgICAgICdBdHRlbXB0ZWQgdG8gc3RhcnQgYSBwb2xsaW5nIHF1ZXJ5IHdpdGhvdXQgYSBwb2xsaW5nIGludGVydmFsLicsXG4gICAgKTtcblxuICAgIC8vIEdvIG5vIGZ1cnRoZXIgaWYgcG9sbGluZyBpcyBkaXNhYmxlZC5cbiAgICBpZiAodGhpcy5zaG91bGRGZXRjaCA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBpbmZvID0gcG9sbGluZ0luZm8gfHwgKFxuICAgICAgdGhpcy5wb2xsaW5nSW5mbyA9IHt9IGFzIFJlb2JzZXJ2ZXI8VERhdGEsIFRWYXJzPltcInBvbGxpbmdJbmZvXCJdXG4gICAgKSE7XG5cbiAgICBpbmZvLmludGVydmFsID0gcG9sbEludGVydmFsO1xuXG4gICAgY29uc3QgbWF5YmVGZXRjaCA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLnBvbGxpbmdJbmZvKSB7XG4gICAgICAgIGlmICh0aGlzLnNob3VsZEZldGNoICYmIHRoaXMuc2hvdWxkRmV0Y2goKSkge1xuICAgICAgICAgIHRoaXMucmVvYnNlcnZlKHtcbiAgICAgICAgICAgIGZldGNoUG9saWN5OiBcIm5ldHdvcmstb25seVwiLFxuICAgICAgICAgICAgbmV4dEZldGNoUG9saWN5OiB0aGlzLm9wdGlvbnMuZmV0Y2hQb2xpY3kgfHwgXCJjYWNoZS1maXJzdFwiLFxuICAgICAgICAgIH0sIE5ldHdvcmtTdGF0dXMucG9sbCkudGhlbihwb2xsLCBwb2xsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwb2xsKCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfTtcblxuICAgIGNvbnN0IHBvbGwgPSAoKSA9PiB7XG4gICAgICBjb25zdCBpbmZvID0gdGhpcy5wb2xsaW5nSW5mbztcbiAgICAgIGlmIChpbmZvKSB7XG4gICAgICAgIGNsZWFyVGltZW91dChpbmZvLnRpbWVvdXQpO1xuICAgICAgICBpbmZvLnRpbWVvdXQgPSBzZXRUaW1lb3V0KG1heWJlRmV0Y2gsIGluZm8uaW50ZXJ2YWwpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBwb2xsKCk7XG4gIH1cbn1cbiIsICJpbXBvcnQgeyBpbnZhcmlhbnQgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuaW1wb3J0IHsgZXF1YWwgfSBmcm9tICdAd3J5L2VxdWFsaXR5JztcblxuaW1wb3J0IHsgTmV0d29ya1N0YXR1cywgaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0IH0gZnJvbSAnLi9uZXR3b3JrU3RhdHVzJztcbmltcG9ydCB7XG4gIGNsb25lRGVlcCxcbiAgZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbixcbiAgT2JzZXJ2YWJsZSxcbiAgT2JzZXJ2ZXIsXG4gIE9ic2VydmFibGVTdWJzY3JpcHRpb24sXG4gIGl0ZXJhdGVPYnNlcnZlcnNTYWZlbHksXG4gIGlzTm9uRW1wdHlBcnJheSxcbiAgZml4T2JzZXJ2YWJsZVN1YmNsYXNzLFxufSBmcm9tICcuLi91dGlsaXRpZXMnO1xuaW1wb3J0IHsgQXBvbGxvRXJyb3IgfSBmcm9tICcuLi9lcnJvcnMnO1xuaW1wb3J0IHsgUXVlcnlNYW5hZ2VyIH0gZnJvbSAnLi9RdWVyeU1hbmFnZXInO1xuaW1wb3J0IHsgQXBvbGxvUXVlcnlSZXN1bHQsIE9wZXJhdGlvblZhcmlhYmxlcyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtcbiAgV2F0Y2hRdWVyeU9wdGlvbnMsXG4gIEZldGNoTW9yZVF1ZXJ5T3B0aW9ucyxcbiAgU3Vic2NyaWJlVG9Nb3JlT3B0aW9ucyxcbn0gZnJvbSAnLi93YXRjaFF1ZXJ5T3B0aW9ucyc7XG5pbXBvcnQgeyBSZW9ic2VydmVyIH0gZnJvbSAnLi9SZW9ic2VydmVyJztcbmltcG9ydCB7IFF1ZXJ5SW5mbyB9IGZyb20gJy4vUXVlcnlJbmZvJztcblxuZXhwb3J0IGludGVyZmFjZSBGZXRjaE1vcmVPcHRpb25zPFxuICBURGF0YSA9IGFueSxcbiAgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlc1xuPiB7XG4gIHVwZGF0ZVF1ZXJ5PzogKFxuICAgIHByZXZpb3VzUXVlcnlSZXN1bHQ6IFREYXRhLFxuICAgIG9wdGlvbnM6IHtcbiAgICAgIGZldGNoTW9yZVJlc3VsdD86IFREYXRhO1xuICAgICAgdmFyaWFibGVzPzogVFZhcmlhYmxlcztcbiAgICB9LFxuICApID0+IFREYXRhO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVwZGF0ZVF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzPiB7XG4gIHZhcmlhYmxlcz86IFRWYXJpYWJsZXM7XG59XG5cbmxldCB3YXJuZWRBYm91dFVwZGF0ZVF1ZXJ5ID0gZmFsc2U7XG5cbmV4cG9ydCBjbGFzcyBPYnNlcnZhYmxlUXVlcnk8XG4gIFREYXRhID0gYW55LFxuICBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzXG4+IGV4dGVuZHMgT2JzZXJ2YWJsZTxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+IHtcbiAgcHVibGljIHJlYWRvbmx5IG9wdGlvbnM6IFdhdGNoUXVlcnlPcHRpb25zPFRWYXJpYWJsZXMsIFREYXRhPjtcbiAgcHVibGljIHJlYWRvbmx5IHF1ZXJ5SWQ6IHN0cmluZztcbiAgcHVibGljIHJlYWRvbmx5IHF1ZXJ5TmFtZT86IHN0cmluZztcblxuICAvLyBDb21wdXRlZCBzaG9ydGhhbmQgZm9yIHRoaXMub3B0aW9ucy52YXJpYWJsZXMsIHByZXNlcnZlZCBmb3JcbiAgLy8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkuXG4gIHB1YmxpYyBnZXQgdmFyaWFibGVzKCk6IFRWYXJpYWJsZXMgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLm9wdGlvbnMudmFyaWFibGVzO1xuICB9XG5cbiAgcHJpdmF0ZSBpc1Rvcm5Eb3duOiBib29sZWFuO1xuICBwcml2YXRlIHF1ZXJ5TWFuYWdlcjogUXVlcnlNYW5hZ2VyPGFueT47XG4gIHByaXZhdGUgb2JzZXJ2ZXJzID0gbmV3IFNldDxPYnNlcnZlcjxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+PigpO1xuICBwcml2YXRlIHN1YnNjcmlwdGlvbnMgPSBuZXcgU2V0PE9ic2VydmFibGVTdWJzY3JpcHRpb24+KCk7XG5cbiAgcHJpdmF0ZSBsYXN0UmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT47XG4gIHByaXZhdGUgbGFzdFJlc3VsdFNuYXBzaG90OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT47XG4gIHByaXZhdGUgbGFzdEVycm9yOiBBcG9sbG9FcnJvcjtcbiAgcHJpdmF0ZSBxdWVyeUluZm86IFF1ZXJ5SW5mbztcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgcXVlcnlNYW5hZ2VyLFxuICAgIHF1ZXJ5SW5mbyxcbiAgICBvcHRpb25zLFxuICB9OiB7XG4gICAgcXVlcnlNYW5hZ2VyOiBRdWVyeU1hbmFnZXI8YW55PjtcbiAgICBxdWVyeUluZm86IFF1ZXJ5SW5mbztcbiAgICBvcHRpb25zOiBXYXRjaFF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBURGF0YT47XG4gIH0pIHtcbiAgICBzdXBlcigob2JzZXJ2ZXI6IE9ic2VydmVyPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4pID0+XG4gICAgICB0aGlzLm9uU3Vic2NyaWJlKG9ic2VydmVyKSxcbiAgICApO1xuXG4gICAgLy8gYWN0aXZlIHN0YXRlXG4gICAgdGhpcy5pc1Rvcm5Eb3duID0gZmFsc2U7XG5cbiAgICAvLyBxdWVyeSBpbmZvcm1hdGlvblxuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5xdWVyeUlkID0gcXVlcnlNYW5hZ2VyLmdlbmVyYXRlUXVlcnlJZCgpO1xuXG4gICAgY29uc3Qgb3BEZWYgPSBnZXRPcGVyYXRpb25EZWZpbml0aW9uKG9wdGlvbnMucXVlcnkpO1xuICAgIHRoaXMucXVlcnlOYW1lID0gb3BEZWYgJiYgb3BEZWYubmFtZSAmJiBvcERlZi5uYW1lLnZhbHVlO1xuXG4gICAgLy8gcmVsYXRlZCBjbGFzc2VzXG4gICAgdGhpcy5xdWVyeU1hbmFnZXIgPSBxdWVyeU1hbmFnZXI7XG5cbiAgICB0aGlzLnF1ZXJ5SW5mbyA9IHF1ZXJ5SW5mbztcbiAgfVxuXG4gIHB1YmxpYyByZXN1bHQoKTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3Qgb2JzZXJ2ZXI6IE9ic2VydmVyPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4gPSB7XG4gICAgICAgIG5leHQ6IChyZXN1bHQ6IEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPikgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcblxuICAgICAgICAgIC8vIFN0b3AgdGhlIHF1ZXJ5IHdpdGhpbiB0aGUgUXVlcnlNYW5hZ2VyIGlmIHdlIGNhbiBiZWZvcmVcbiAgICAgICAgICAvLyB0aGlzIGZ1bmN0aW9uIHJldHVybnMuXG4gICAgICAgICAgLy9cbiAgICAgICAgICAvLyBXZSBkbyB0aGlzIGluIG9yZGVyIHRvIHByZXZlbnQgb2JzZXJ2ZXJzIHBpbGluZyB1cCB3aXRoaW5cbiAgICAgICAgICAvLyB0aGUgUXVlcnlNYW5hZ2VyLiBOb3RpY2UgdGhhdCB3ZSBvbmx5IGZ1bGx5IHVuc3Vic2NyaWJlXG4gICAgICAgICAgLy8gZnJvbSB0aGUgc3Vic2NyaXB0aW9uIGluIGEgc2V0VGltZW91dCguLi4sIDApICBjYWxsLiBUaGlzIGNhbGwgY2FuXG4gICAgICAgICAgLy8gYWN0dWFsbHkgYmUgaGFuZGxlZCBieSB0aGUgYnJvd3NlciBhdCBhIG11Y2ggbGF0ZXIgdGltZS4gSWYgcXVlcmllc1xuICAgICAgICAgIC8vIGFyZSBmaXJlZCBpbiB0aGUgbWVhbnRpbWUsIG9ic2VydmVycyB0aGF0IHNob3VsZCBoYXZlIGJlZW4gcmVtb3ZlZFxuICAgICAgICAgIC8vIGZyb20gdGhlIFF1ZXJ5TWFuYWdlciB3aWxsIGNvbnRpbnVlIHRvIGZpcmUsIGNhdXNpbmcgYW4gdW5uZWNlc3NhcnlcbiAgICAgICAgICAvLyBwZXJmb3JtYW5jZSBoaXQuXG4gICAgICAgICAgdGhpcy5vYnNlcnZlcnMuZGVsZXRlKG9ic2VydmVyKTtcbiAgICAgICAgICBpZiAoIXRoaXMub2JzZXJ2ZXJzLnNpemUpIHtcbiAgICAgICAgICAgIHRoaXMucXVlcnlNYW5hZ2VyLnJlbW92ZVF1ZXJ5KHRoaXMucXVlcnlJZCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IHJlamVjdCxcbiAgICAgIH07XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb24gPSB0aGlzLnN1YnNjcmliZShvYnNlcnZlcik7XG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q3VycmVudFJlc3VsdChzYXZlQXNMYXN0UmVzdWx0ID0gdHJ1ZSk6IEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPiB7XG4gICAgY29uc3QgeyBsYXN0UmVzdWx0IH0gPSB0aGlzO1xuXG4gICAgY29uc3QgbmV0d29ya1N0YXR1cyA9XG4gICAgICB0aGlzLnF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzIHx8XG4gICAgICAobGFzdFJlc3VsdCAmJiBsYXN0UmVzdWx0Lm5ldHdvcmtTdGF0dXMpIHx8XG4gICAgICBOZXR3b3JrU3RhdHVzLnJlYWR5O1xuXG4gICAgY29uc3QgcmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4gPSB7XG4gICAgICAuLi5sYXN0UmVzdWx0LFxuICAgICAgbG9hZGluZzogaXNOZXR3b3JrUmVxdWVzdEluRmxpZ2h0KG5ldHdvcmtTdGF0dXMpLFxuICAgICAgbmV0d29ya1N0YXR1cyxcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuaXNUb3JuRG93bikge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG5cbiAgICBjb25zdCB7IGZldGNoUG9saWN5ID0gJ2NhY2hlLWZpcnN0JyB9ID0gdGhpcy5vcHRpb25zO1xuICAgIGlmIChmZXRjaFBvbGljeSA9PT0gJ25vLWNhY2hlJyB8fFxuICAgICAgICBmZXRjaFBvbGljeSA9PT0gJ25ldHdvcmstb25seScpIHtcbiAgICAgIC8vIFNpbWlsYXIgdG8gc2V0dGluZyByZXN1bHQucGFydGlhbCB0byBmYWxzZSwgYnV0IHRha2luZyBhZHZhbnRhZ2VcbiAgICAgIC8vIG9mIHRoZSBmYWxzaW5lc3Mgb2YgbWlzc2luZyBmaWVsZHMuXG4gICAgICBkZWxldGUgcmVzdWx0LnBhcnRpYWw7XG4gICAgfSBlbHNlIGlmIChcbiAgICAgICFyZXN1bHQuZGF0YSB8fFxuICAgICAgLy8gSWYgdGhpcy5vcHRpb25zLnF1ZXJ5IGhhcyBAY2xpZW50KGFsd2F5czogdHJ1ZSkgZmllbGRzLCB3ZSBjYW5ub3RcbiAgICAgIC8vIHRydXN0IHJlc3VsdC5kYXRhLCBzaW5jZSBpdCB3YXMgcmVhZCBmcm9tIHRoZSBjYWNoZSB3aXRob3V0XG4gICAgICAvLyBydW5uaW5nIGxvY2FsIHJlc29sdmVycyAoYW5kIGl0J3MgdG9vIGxhdGUgdG8gcnVuIHJlc29sdmVycyBub3csXG4gICAgICAvLyBzaW5jZSB3ZSBtdXN0IHJldHVybiBhIHJlc3VsdCBzeW5jaHJvbm91c2x5KS4gVE9ETyBJbiB0aGUgZnV0dXJlXG4gICAgICAvLyAoYWZ0ZXIgQXBvbGxvIENsaWVudCAzLjApLCB3ZSBzaG91bGQgZmluZCBhIHdheSB0byB0cnVzdFxuICAgICAgLy8gdGhpcy5sYXN0UmVzdWx0IGluIG1vcmUgY2FzZXMsIGFuZCByZWFkIGZyb20gdGhlIGNhY2hlIG9ubHkgaW5cbiAgICAgIC8vIGNhc2VzIHdoZW4gbm8gcmVzdWx0IGhhcyBiZWVuIHJlY2VpdmVkIHlldC5cbiAgICAgICF0aGlzLnF1ZXJ5TWFuYWdlci50cmFuc2Zvcm0odGhpcy5vcHRpb25zLnF1ZXJ5KS5oYXNGb3JjZWRSZXNvbHZlcnNcbiAgICApIHtcbiAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLnF1ZXJ5SW5mby5nZXREaWZmKCk7XG4gICAgICByZXN1bHQuZGF0YSA9IChcbiAgICAgICAgZGlmZi5jb21wbGV0ZSB8fFxuICAgICAgICB0aGlzLm9wdGlvbnMucmV0dXJuUGFydGlhbERhdGFcbiAgICAgICkgPyBkaWZmLnJlc3VsdCA6IHZvaWQgMDtcbiAgICAgIGlmIChkaWZmLmNvbXBsZXRlKSB7XG4gICAgICAgIC8vIElmIHRoZSBkaWZmIGlzIGNvbXBsZXRlLCBhbmQgd2UncmUgdXNpbmcgYSBGZXRjaFBvbGljeSB0aGF0XG4gICAgICAgIC8vIHRlcm1pbmF0ZXMgYWZ0ZXIgYSBjb21wbGV0ZSBjYWNoZSByZWFkLCB3ZSBjYW4gYXNzdW1lIHRoZSBuZXh0XG4gICAgICAgIC8vIHJlc3VsdCB3ZSByZWNlaXZlIHdpbGwgaGF2ZSBOZXR3b3JrU3RhdHVzLnJlYWR5IGFuZCAhbG9hZGluZy5cbiAgICAgICAgaWYgKHJlc3VsdC5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmxvYWRpbmcgJiZcbiAgICAgICAgICAgIChmZXRjaFBvbGljeSA9PT0gJ2NhY2hlLWZpcnN0JyB8fFxuICAgICAgICAgICAgIGZldGNoUG9saWN5ID09PSAnY2FjaGUtb25seScpKSB7XG4gICAgICAgICAgcmVzdWx0Lm5ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLnJlYWR5O1xuICAgICAgICAgIHJlc3VsdC5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgZGVsZXRlIHJlc3VsdC5wYXJ0aWFsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0LnBhcnRpYWwgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzYXZlQXNMYXN0UmVzdWx0KSB7XG4gICAgICB0aGlzLnVwZGF0ZUxhc3RSZXN1bHQocmVzdWx0KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLy8gQ29tcGFyZXMgbmV3UmVzdWx0IHRvIHRoZSBzbmFwc2hvdCB3ZSB0b29rIG9mIHRoaXMubGFzdFJlc3VsdCB3aGVuIGl0IHdhc1xuICAvLyBmaXJzdCByZWNlaXZlZC5cbiAgcHVibGljIGlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQobmV3UmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4pIHtcbiAgICByZXR1cm4gIWVxdWFsKHRoaXMubGFzdFJlc3VsdFNuYXBzaG90LCBuZXdSZXN1bHQpO1xuICB9XG5cbiAgLy8gUmV0dXJucyB0aGUgbGFzdCByZXN1bHQgdGhhdCBvYnNlcnZlci5uZXh0IHdhcyBjYWxsZWQgd2l0aC4gVGhpcyBpcyBub3QgdGhlIHNhbWUgYXNcbiAgLy8gZ2V0Q3VycmVudFJlc3VsdCEgSWYgeW91J3JlIG5vdCBzdXJlIHdoaWNoIHlvdSBuZWVkLCB0aGVuIHlvdSBwcm9iYWJseSBuZWVkIGdldEN1cnJlbnRSZXN1bHQuXG4gIHB1YmxpYyBnZXRMYXN0UmVzdWx0KCk6IEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPiB7XG4gICAgcmV0dXJuIHRoaXMubGFzdFJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRMYXN0RXJyb3IoKTogQXBvbGxvRXJyb3Ige1xuICAgIHJldHVybiB0aGlzLmxhc3RFcnJvcjtcbiAgfVxuXG4gIHB1YmxpYyByZXNldExhc3RSZXN1bHRzKCk6IHZvaWQge1xuICAgIGRlbGV0ZSB0aGlzLmxhc3RSZXN1bHQ7XG4gICAgZGVsZXRlIHRoaXMubGFzdFJlc3VsdFNuYXBzaG90O1xuICAgIGRlbGV0ZSB0aGlzLmxhc3RFcnJvcjtcbiAgICB0aGlzLmlzVG9ybkRvd24gPSBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyByZXNldFF1ZXJ5U3RvcmVFcnJvcnMoKSB7XG4gICAgdGhpcy5xdWVyeU1hbmFnZXIucmVzZXRFcnJvcnModGhpcy5xdWVyeUlkKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHZhcmlhYmxlcyBvZiB0aGlzIG9ic2VydmFibGUgcXVlcnksIGFuZCBmZXRjaCB0aGUgbmV3IHJlc3VsdHMuXG4gICAqIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBwcmVmZXJyZWQgb3ZlciBgc2V0VmFyaWFibGVzYCBpbiBtb3N0IHVzZSBjYXNlcy5cbiAgICpcbiAgICogQHBhcmFtIHZhcmlhYmxlczogVGhlIG5ldyBzZXQgb2YgdmFyaWFibGVzLiBJZiB0aGVyZSBhcmUgbWlzc2luZyB2YXJpYWJsZXMsXG4gICAqIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgdGhvc2UgdmFyaWFibGVzIHdpbGwgYmUgdXNlZC5cbiAgICovXG4gIHB1YmxpYyByZWZldGNoKHZhcmlhYmxlcz86IFBhcnRpYWw8VFZhcmlhYmxlcz4pOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4ge1xuICAgIGNvbnN0IHJlb2JzZXJ2ZU9wdGlvbnM6IFBhcnRpYWw8V2F0Y2hRdWVyeU9wdGlvbnM8VFZhcmlhYmxlcywgVERhdGE+PiA9IHtcbiAgICAgIC8vIEFsd2F5cyBkaXNhYmxlIHBvbGxpbmcgZm9yIHJlZmV0Y2hlcy5cbiAgICAgIHBvbGxJbnRlcnZhbDogMCxcbiAgICB9O1xuXG4gICAgLy8gVW5sZXNzIHRoZSBwcm92aWRlZCBmZXRjaFBvbGljeSBhbHdheXMgY29uc3VsdHMgdGhlIG5ldHdvcmtcbiAgICAvLyAobm8tY2FjaGUsIG5ldHdvcmstb25seSwgb3IgY2FjaGUtYW5kLW5ldHdvcmspLCBvdmVycmlkZSBpdCB3aXRoXG4gICAgLy8gbmV0d29yay1vbmx5IHRvIGZvcmNlIHRoZSByZWZldGNoIGZvciB0aGlzIGZldGNoUXVlcnkgY2FsbC5cbiAgICBjb25zdCB7IGZldGNoUG9saWN5IH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgaWYgKGZldGNoUG9saWN5ICE9PSAnbm8tY2FjaGUnICYmXG4gICAgICAgIGZldGNoUG9saWN5ICE9PSAnY2FjaGUtYW5kLW5ldHdvcmsnKSB7XG4gICAgICByZW9ic2VydmVPcHRpb25zLmZldGNoUG9saWN5ID0gJ25ldHdvcmstb25seSc7XG4gICAgICAvLyBHbyBiYWNrIHRvIHRoZSBvcmlnaW5hbCBvcHRpb25zLmZldGNoUG9saWN5IGFmdGVyIHRoaXMgcmVmZXRjaC5cbiAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMubmV4dEZldGNoUG9saWN5ID0gZmV0Y2hQb2xpY3kgfHwgXCJjYWNoZS1maXJzdFwiO1xuICAgIH1cblxuICAgIGlmICh2YXJpYWJsZXMgJiYgIWVxdWFsKHRoaXMub3B0aW9ucy52YXJpYWJsZXMsIHZhcmlhYmxlcykpIHtcbiAgICAgIC8vIFVwZGF0ZSB0aGUgZXhpc3Rpbmcgb3B0aW9ucyB3aXRoIG5ldyB2YXJpYWJsZXNcbiAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMudmFyaWFibGVzID0gdGhpcy5vcHRpb25zLnZhcmlhYmxlcyA9IHtcbiAgICAgICAgLi4udGhpcy5vcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgLi4udmFyaWFibGVzLFxuICAgICAgfSBhcyBUVmFyaWFibGVzO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLm5ld1Jlb2JzZXJ2ZXIoZmFsc2UpLnJlb2JzZXJ2ZShcbiAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMsXG4gICAgICBOZXR3b3JrU3RhdHVzLnJlZmV0Y2gsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBmZXRjaE1vcmU8SyBleHRlbmRzIGtleW9mIFRWYXJpYWJsZXM+KFxuICAgIGZldGNoTW9yZU9wdGlvbnM6IEZldGNoTW9yZVF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBLLCBURGF0YT4gJlxuICAgICAgRmV0Y2hNb3JlT3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz4sXG4gICk6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PiB7XG4gICAgY29uc3QgY29tYmluZWRPcHRpb25zID0ge1xuICAgICAgLi4uKGZldGNoTW9yZU9wdGlvbnMucXVlcnkgPyBmZXRjaE1vcmVPcHRpb25zIDoge1xuICAgICAgICAuLi50aGlzLm9wdGlvbnMsXG4gICAgICAgIC4uLmZldGNoTW9yZU9wdGlvbnMsXG4gICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgIC4uLnRoaXMub3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgLi4uZmV0Y2hNb3JlT3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgIH0sXG4gICAgICB9KSxcbiAgICAgIC8vIFRoZSBmZXRjaE1vcmUgcmVxdWVzdCBnb2VzIGltbWVkaWF0ZWx5IHRvIHRoZSBuZXR3b3JrIGFuZCBkb2VzXG4gICAgICAvLyBub3QgYXV0b21hdGljYWxseSB3cml0ZSBpdHMgcmVzdWx0IHRvIHRoZSBjYWNoZSAoaGVuY2Ugbm8tY2FjaGVcbiAgICAgIC8vIGluc3RlYWQgb2YgbmV0d29yay1vbmx5KSwgYmVjYXVzZSB3ZSBhbGxvdyB0aGUgY2FsbGVyIG9mXG4gICAgICAvLyBmZXRjaE1vcmUgdG8gcHJvdmlkZSBhbiB1cGRhdGVRdWVyeSBjYWxsYmFjayB0aGF0IGRldGVybWluZXMgaG93XG4gICAgICAvLyB0aGUgZGF0YSBnZXRzIHdyaXR0ZW4gdG8gdGhlIGNhY2hlLlxuICAgICAgZmV0Y2hQb2xpY3k6IFwibm8tY2FjaGVcIixcbiAgICB9IGFzIFdhdGNoUXVlcnlPcHRpb25zO1xuXG4gICAgY29uc3QgcWlkID0gdGhpcy5xdWVyeU1hbmFnZXIuZ2VuZXJhdGVRdWVyeUlkKCk7XG5cbiAgICAvLyBTaW11bGF0ZSBhIGxvYWRpbmcgcmVzdWx0IGZvciB0aGUgb3JpZ2luYWwgcXVlcnkgd2l0aFxuICAgIC8vIHJlc3VsdC5uZXR3b3JrU3RhdHVzID09PSBOZXR3b3JrU3RhdHVzLmZldGNoTW9yZS5cbiAgICBpZiAoY29tYmluZWRPcHRpb25zLm5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSkge1xuICAgICAgdGhpcy5xdWVyeUluZm8ubmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMuZmV0Y2hNb3JlO1xuICAgICAgdGhpcy5vYnNlcnZlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLmZldGNoUXVlcnkoXG4gICAgICBxaWQsXG4gICAgICBjb21iaW5lZE9wdGlvbnMsXG4gICAgICBOZXR3b3JrU3RhdHVzLmZldGNoTW9yZSxcbiAgICApLnRoZW4oZmV0Y2hNb3JlUmVzdWx0ID0+IHtcbiAgICAgIGNvbnN0IGRhdGEgPSBmZXRjaE1vcmVSZXN1bHQuZGF0YSBhcyBURGF0YTtcbiAgICAgIGNvbnN0IHsgdXBkYXRlUXVlcnkgfSA9IGZldGNoTW9yZU9wdGlvbnM7XG5cbiAgICAgIGlmICh1cGRhdGVRdWVyeSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiICYmXG4gICAgICAgICAgICAhd2FybmVkQWJvdXRVcGRhdGVRdWVyeSkge1xuICAgICAgICAgIGludmFyaWFudC53YXJuKFxuYFRoZSB1cGRhdGVRdWVyeSBjYWxsYmFjayBmb3IgZmV0Y2hNb3JlIGlzIGRlcHJlY2F0ZWQsIGFuZCB3aWxsIGJlIHJlbW92ZWRcbmluIHRoZSBuZXh0IG1ham9yIHZlcnNpb24gb2YgQXBvbGxvIENsaWVudC5cblxuUGxlYXNlIGNvbnZlcnQgdXBkYXRlUXVlcnkgZnVuY3Rpb25zIHRvIGZpZWxkIHBvbGljaWVzIHdpdGggYXBwcm9wcmlhdGVcbnJlYWQgYW5kIG1lcmdlIGZ1bmN0aW9ucywgb3IgdXNlL2FkYXB0IGEgaGVscGVyIGZ1bmN0aW9uIChzdWNoIGFzXG5jb25jYXRQYWdpbmF0aW9uLCBvZmZzZXRMaW1pdFBhZ2luYXRpb24sIG9yIHJlbGF5U3R5bGVQYWdpbmF0aW9uKSBmcm9tXG5AYXBvbGxvL2NsaWVudC91dGlsaXRpZXMuXG5cblRoZSBmaWVsZCBwb2xpY3kgc3lzdGVtIGhhbmRsZXMgcGFnaW5hdGlvbiBtb3JlIGVmZmVjdGl2ZWx5IHRoYW4gYVxuaGFuZC13cml0dGVuIHVwZGF0ZVF1ZXJ5IGZ1bmN0aW9uLCBhbmQgeW91IG9ubHkgbmVlZCB0byBkZWZpbmUgdGhlIHBvbGljeVxub25jZSwgcmF0aGVyIHRoYW4gZXZlcnkgdGltZSB5b3UgY2FsbCBmZXRjaE1vcmUuYCk7XG4gICAgICAgICAgd2FybmVkQWJvdXRVcGRhdGVRdWVyeSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy51cGRhdGVRdWVyeShwcmV2aW91cyA9PiB1cGRhdGVRdWVyeShwcmV2aW91cywge1xuICAgICAgICAgIGZldGNoTW9yZVJlc3VsdDogZGF0YSxcbiAgICAgICAgICB2YXJpYWJsZXM6IGNvbWJpbmVkT3B0aW9ucy52YXJpYWJsZXMgYXMgVFZhcmlhYmxlcyxcbiAgICAgICAgfSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgd2UncmUgdXNpbmcgYSBmaWVsZCBwb2xpY3kgaW5zdGVhZCBvZiB1cGRhdGVRdWVyeSwgdGhlIG9ubHlcbiAgICAgICAgLy8gdGhpbmcgd2UgbmVlZCB0byBkbyBpcyB3cml0ZSB0aGUgbmV3IGRhdGEgdG8gdGhlIGNhY2hlIHVzaW5nXG4gICAgICAgIC8vIGNvbWJpbmVkT3B0aW9ucy52YXJpYWJsZXMgKGluc3RlYWQgb2YgdGhpcy52YXJpYWJsZXMsIHdoaWNoIGlzXG4gICAgICAgIC8vIHdoYXQgdGhpcy51cGRhdGVRdWVyeSB1c2VzLCBiZWNhdXNlIGl0IHdvcmtzIGJ5IGFidXNpbmcgdGhlXG4gICAgICAgIC8vIG9yaWdpbmFsIGZpZWxkIHZhbHVlLCBrZXllZCBieSB0aGUgb3JpZ2luYWwgdmFyaWFibGVzKS5cbiAgICAgICAgdGhpcy5xdWVyeU1hbmFnZXIuY2FjaGUud3JpdGVRdWVyeSh7XG4gICAgICAgICAgcXVlcnk6IGNvbWJpbmVkT3B0aW9ucy5xdWVyeSxcbiAgICAgICAgICB2YXJpYWJsZXM6IGNvbWJpbmVkT3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgZGF0YSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmZXRjaE1vcmVSZXN1bHQgYXMgQXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+O1xuXG4gICAgfSkuZmluYWxseSgoKSA9PiB7XG4gICAgICB0aGlzLnF1ZXJ5TWFuYWdlci5zdG9wUXVlcnkocWlkKTtcbiAgICAgIHRoaXMucmVvYnNlcnZlKCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBYWFggdGhlIHN1YnNjcmlwdGlvbiB2YXJpYWJsZXMgYXJlIHNlcGFyYXRlIGZyb20gdGhlIHF1ZXJ5IHZhcmlhYmxlcy5cbiAgLy8gaWYgeW91IHdhbnQgdG8gdXBkYXRlIHN1YnNjcmlwdGlvbiB2YXJpYWJsZXMsIHJpZ2h0IG5vdyB5b3UgaGF2ZSB0byBkbyB0aGF0IHNlcGFyYXRlbHksXG4gIC8vIGFuZCB5b3UgY2FuIG9ubHkgZG8gaXQgYnkgc3RvcHBpbmcgdGhlIHN1YnNjcmlwdGlvbiBhbmQgdGhlbiBzdWJzY3JpYmluZyBhZ2FpbiB3aXRoIG5ldyB2YXJpYWJsZXMuXG4gIHB1YmxpYyBzdWJzY3JpYmVUb01vcmU8XG4gICAgVFN1YnNjcmlwdGlvbkRhdGEgPSBURGF0YSxcbiAgICBUU3Vic2NyaXB0aW9uVmFyaWFibGVzID0gVFZhcmlhYmxlc1xuICA+KFxuICAgIG9wdGlvbnM6IFN1YnNjcmliZVRvTW9yZU9wdGlvbnM8XG4gICAgICBURGF0YSxcbiAgICAgIFRTdWJzY3JpcHRpb25WYXJpYWJsZXMsXG4gICAgICBUU3Vic2NyaXB0aW9uRGF0YVxuICAgID4sXG4gICkge1xuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHRoaXMucXVlcnlNYW5hZ2VyXG4gICAgICAuc3RhcnRHcmFwaFFMU3Vic2NyaXB0aW9uKHtcbiAgICAgICAgcXVlcnk6IG9wdGlvbnMuZG9jdW1lbnQsXG4gICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgIGNvbnRleHQ6IG9wdGlvbnMuY29udGV4dCxcbiAgICAgIH0pXG4gICAgICAuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dDogKHN1YnNjcmlwdGlvbkRhdGE6IHsgZGF0YTogVFN1YnNjcmlwdGlvbkRhdGEgfSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdXBkYXRlUXVlcnkgfSA9IG9wdGlvbnM7XG4gICAgICAgICAgaWYgKHVwZGF0ZVF1ZXJ5KSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVF1ZXJ5PFRTdWJzY3JpcHRpb25WYXJpYWJsZXM+KFxuICAgICAgICAgICAgICAocHJldmlvdXMsIHsgdmFyaWFibGVzIH0pID0+XG4gICAgICAgICAgICAgICAgdXBkYXRlUXVlcnkocHJldmlvdXMsIHtcbiAgICAgICAgICAgICAgICAgIHN1YnNjcmlwdGlvbkRhdGEsXG4gICAgICAgICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IChlcnI6IGFueSkgPT4ge1xuICAgICAgICAgIGlmIChvcHRpb25zLm9uRXJyb3IpIHtcbiAgICAgICAgICAgIG9wdGlvbnMub25FcnJvcihlcnIpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbnZhcmlhbnQuZXJyb3IoJ1VuaGFuZGxlZCBHcmFwaFFMIHN1YnNjcmlwdGlvbiBlcnJvcicsIGVycik7XG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5hZGQoc3Vic2NyaXB0aW9uKTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5zdWJzY3JpcHRpb25zLmRlbGV0ZShzdWJzY3JpcHRpb24pKSB7XG4gICAgICAgIHN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgc2V0T3B0aW9ucyhcbiAgICBuZXdPcHRpb25zOiBQYXJ0aWFsPFdhdGNoUXVlcnlPcHRpb25zPFRWYXJpYWJsZXMsIFREYXRhPj4sXG4gICk6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PiB7XG4gICAgcmV0dXJuIHRoaXMucmVvYnNlcnZlKG5ld09wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgZm9yICppbnRlcm5hbCogdXNlIG9ubHkuIE1vc3QgdXNlcnMgc2hvdWxkIGluc3RlYWQgdXNlIGByZWZldGNoYFxuICAgKiBpbiBvcmRlciB0byBiZSBwcm9wZXJseSBub3RpZmllZCBvZiByZXN1bHRzIGV2ZW4gd2hlbiB0aGV5IGNvbWUgZnJvbSBjYWNoZS5cbiAgICpcbiAgICogVXBkYXRlIHRoZSB2YXJpYWJsZXMgb2YgdGhpcyBvYnNlcnZhYmxlIHF1ZXJ5LCBhbmQgZmV0Y2ggdGhlIG5ldyByZXN1bHRzXG4gICAqIGlmIHRoZXkndmUgY2hhbmdlZC4gSWYgeW91IHdhbnQgdG8gZm9yY2UgbmV3IHJlc3VsdHMsIHVzZSBgcmVmZXRjaGAuXG4gICAqXG4gICAqIE5vdGU6IHRoZSBgbmV4dGAgY2FsbGJhY2sgd2lsbCAqbm90KiBmaXJlIGlmIHRoZSB2YXJpYWJsZXMgaGF2ZSBub3QgY2hhbmdlZFxuICAgKiBvciBpZiB0aGUgcmVzdWx0IGlzIGNvbWluZyBmcm9tIGNhY2hlLlxuICAgKlxuICAgKiBOb3RlOiB0aGUgcHJvbWlzZSB3aWxsIHJldHVybiB0aGUgb2xkIHJlc3VsdHMgaW1tZWRpYXRlbHkgaWYgdGhlIHZhcmlhYmxlc1xuICAgKiBoYXZlIG5vdCBjaGFuZ2VkLlxuICAgKlxuICAgKiBOb3RlOiB0aGUgcHJvbWlzZSB3aWxsIHJldHVybiBudWxsIGltbWVkaWF0ZWx5IGlmIHRoZSBxdWVyeSBpcyBub3QgYWN0aXZlXG4gICAqICh0aGVyZSBhcmUgbm8gc3Vic2NyaWJlcnMpLlxuICAgKlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAcGFyYW0gdmFyaWFibGVzOiBUaGUgbmV3IHNldCBvZiB2YXJpYWJsZXMuIElmIHRoZXJlIGFyZSBtaXNzaW5nIHZhcmlhYmxlcyxcbiAgICogdGhlIHByZXZpb3VzIHZhbHVlcyBvZiB0aG9zZSB2YXJpYWJsZXMgd2lsbCBiZSB1c2VkLlxuICAgKlxuICAgKiBAcGFyYW0gdHJ5RmV0Y2g6IFRyeSBhbmQgZmV0Y2ggbmV3IHJlc3VsdHMgZXZlbiBpZiB0aGUgdmFyaWFibGVzIGhhdmVuJ3RcbiAgICogY2hhbmdlZCAod2UgbWF5IHN0aWxsIGp1c3QgaGl0IHRoZSBzdG9yZSwgYnV0IGlmIHRoZXJlJ3Mgbm90aGluZyBpbiB0aGVyZVxuICAgKiB0aGlzIHdpbGwgcmVmZXRjaClcbiAgICovXG4gIHB1YmxpYyBzZXRWYXJpYWJsZXMoXG4gICAgdmFyaWFibGVzOiBUVmFyaWFibGVzLFxuICApOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPiB8IHZvaWQ+IHtcbiAgICBpZiAoZXF1YWwodGhpcy52YXJpYWJsZXMsIHZhcmlhYmxlcykpIHtcbiAgICAgIC8vIElmIHdlIGhhdmUgbm8gb2JzZXJ2ZXJzLCB0aGVuIHdlIGRvbid0IGFjdHVhbGx5IHdhbnQgdG8gbWFrZSBhIG5ldHdvcmtcbiAgICAgIC8vIHJlcXVlc3QuIEFzIHNvb24gYXMgc29tZW9uZSBvYnNlcnZlcyB0aGUgcXVlcnksIHRoZSByZXF1ZXN0IHdpbGwga2lja1xuICAgICAgLy8gb2ZmLiBGb3Igbm93LCB3ZSBqdXN0IHN0b3JlIGFueSBjaGFuZ2VzLiAoU2VlICMxMDc3KVxuICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXJzLnNpemVcbiAgICAgICAgPyB0aGlzLnJlc3VsdCgpXG4gICAgICAgIDogUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgdGhpcy5vcHRpb25zLnZhcmlhYmxlcyA9IHZhcmlhYmxlcztcblxuICAgIC8vIFNlZSBjb21tZW50IGFib3ZlXG4gICAgaWYgKCF0aGlzLm9ic2VydmVycy5zaXplKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuXG4gICAgbGV0IHsgZmV0Y2hQb2xpY3kgPSAnY2FjaGUtZmlyc3QnIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgY29uc3QgcmVvYnNlcnZlT3B0aW9uczogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBURGF0YT4+ID0ge1xuICAgICAgZmV0Y2hQb2xpY3ksXG4gICAgICB2YXJpYWJsZXMsXG4gICAgfTtcblxuICAgIGlmIChmZXRjaFBvbGljeSAhPT0gJ2NhY2hlLWZpcnN0JyAmJlxuICAgICAgICBmZXRjaFBvbGljeSAhPT0gJ25vLWNhY2hlJyAmJlxuICAgICAgICBmZXRjaFBvbGljeSAhPT0gJ25ldHdvcmstb25seScpIHtcbiAgICAgIHJlb2JzZXJ2ZU9wdGlvbnMuZmV0Y2hQb2xpY3kgPSAnY2FjaGUtYW5kLW5ldHdvcmsnO1xuICAgICAgcmVvYnNlcnZlT3B0aW9ucy5uZXh0RmV0Y2hQb2xpY3kgPSBmZXRjaFBvbGljeTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yZW9ic2VydmUoXG4gICAgICByZW9ic2VydmVPcHRpb25zLFxuICAgICAgTmV0d29ya1N0YXR1cy5zZXRWYXJpYWJsZXMsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVRdWVyeTxUVmFycyA9IFRWYXJpYWJsZXM+KFxuICAgIG1hcEZuOiAoXG4gICAgICBwcmV2aW91c1F1ZXJ5UmVzdWx0OiBURGF0YSxcbiAgICAgIG9wdGlvbnM6IFBpY2s8V2F0Y2hRdWVyeU9wdGlvbnM8VFZhcnMsIFREYXRhPiwgXCJ2YXJpYWJsZXNcIj4sXG4gICAgKSA9PiBURGF0YSxcbiAgKTogdm9pZCB7XG4gICAgY29uc3QgeyBxdWVyeU1hbmFnZXIgfSA9IHRoaXM7XG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHF1ZXJ5TWFuYWdlci5jYWNoZS5kaWZmPFREYXRhPih7XG4gICAgICBxdWVyeTogdGhpcy5vcHRpb25zLnF1ZXJ5LFxuICAgICAgdmFyaWFibGVzOiB0aGlzLnZhcmlhYmxlcyxcbiAgICAgIHByZXZpb3VzUmVzdWx0OiB0aGlzLmxhc3RSZXN1bHQ/LmRhdGEsXG4gICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgIG9wdGltaXN0aWM6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgY29uc3QgbmV3UmVzdWx0ID0gbWFwRm4ocmVzdWx0ISwge1xuICAgICAgdmFyaWFibGVzOiAodGhpcyBhcyBhbnkpLnZhcmlhYmxlcyxcbiAgICB9KTtcblxuICAgIGlmIChuZXdSZXN1bHQpIHtcbiAgICAgIHF1ZXJ5TWFuYWdlci5jYWNoZS53cml0ZVF1ZXJ5KHtcbiAgICAgICAgcXVlcnk6IHRoaXMub3B0aW9ucy5xdWVyeSxcbiAgICAgICAgZGF0YTogbmV3UmVzdWx0LFxuICAgICAgICB2YXJpYWJsZXM6IHRoaXMudmFyaWFibGVzLFxuICAgICAgfSk7XG5cbiAgICAgIHF1ZXJ5TWFuYWdlci5icm9hZGNhc3RRdWVyaWVzKCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXJ0UG9sbGluZyhwb2xsSW50ZXJ2YWw6IG51bWJlcikge1xuICAgIHRoaXMuZ2V0UmVvYnNlcnZlcigpLnVwZGF0ZU9wdGlvbnMoeyBwb2xsSW50ZXJ2YWwgfSk7XG4gIH1cblxuICBwdWJsaWMgc3RvcFBvbGxpbmcoKSB7XG4gICAgaWYgKHRoaXMucmVvYnNlcnZlcikge1xuICAgICAgdGhpcy5yZW9ic2VydmVyLnVwZGF0ZU9wdGlvbnMoeyBwb2xsSW50ZXJ2YWw6IDAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVMYXN0UmVzdWx0KG5ld1Jlc3VsdDogQXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+KSB7XG4gICAgY29uc3QgcHJldmlvdXNSZXN1bHQgPSB0aGlzLmxhc3RSZXN1bHQ7XG4gICAgdGhpcy5sYXN0UmVzdWx0ID0gbmV3UmVzdWx0O1xuICAgIHRoaXMubGFzdFJlc3VsdFNuYXBzaG90ID0gdGhpcy5xdWVyeU1hbmFnZXIuYXNzdW1lSW1tdXRhYmxlUmVzdWx0c1xuICAgICAgPyBuZXdSZXN1bHRcbiAgICAgIDogY2xvbmVEZWVwKG5ld1Jlc3VsdCk7XG4gICAgaWYgKCFpc05vbkVtcHR5QXJyYXkobmV3UmVzdWx0LmVycm9ycykpIHtcbiAgICAgIGRlbGV0ZSB0aGlzLmxhc3RFcnJvcjtcbiAgICB9XG4gICAgcmV0dXJuIHByZXZpb3VzUmVzdWx0O1xuICB9XG5cbiAgcHJpdmF0ZSBvblN1YnNjcmliZShvYnNlcnZlcjogT2JzZXJ2ZXI8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+Pikge1xuICAgIC8vIFN1YnNjcmliaW5nIHVzaW5nIHRoaXMub2JzZXJ2ZXIgd2lsbCBjcmVhdGUgYW4gaW5maW5pdGUgbm90aWZpY2Fpb25cbiAgICAvLyBsb29wLCBidXQgdGhlIGludGVudCBvZiBicm9hZGNhc3RpbmcgcmVzdWx0cyB0byBhbGwgdGhlIG90aGVyXG4gICAgLy8gdGhpcy5vYnNlcnZlcnMgY2FuIGJlIHNhdGlzZmllZCB3aXRob3V0IGRvaW5nIGFueXRoaW5nLCB3aGljaCBpc1xuICAgIC8vIHdoeSB3ZSBkbyBub3QgYm90aGVyIHRocm93aW5nIGFuIGVycm9yIGhlcmUuXG4gICAgaWYgKG9ic2VydmVyID09PSB0aGlzLm9ic2VydmVyKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge307XG4gICAgfVxuXG4gICAgLy8gWmVuIE9ic2VydmFibGUgaGFzIGl0cyBvd24gZXJyb3IgZnVuY3Rpb24sIHNvIGluIG9yZGVyIHRvIGxvZyBjb3JyZWN0bHlcbiAgICAvLyB3ZSBuZWVkIHRvIHByb3ZpZGUgYSBjdXN0b20gZXJyb3IgY2FsbGJhY2suXG4gICAgdHJ5IHtcbiAgICAgIHZhciBzdWJPYnNlcnZlciA9IChvYnNlcnZlciBhcyBhbnkpLl9zdWJzY3JpcHRpb24uX29ic2VydmVyO1xuICAgICAgaWYgKHN1Yk9ic2VydmVyICYmICFzdWJPYnNlcnZlci5lcnJvcikge1xuICAgICAgICBzdWJPYnNlcnZlci5lcnJvciA9IGRlZmF1bHRTdWJzY3JpcHRpb25PYnNlcnZlckVycm9yQ2FsbGJhY2s7XG4gICAgICB9XG4gICAgfSBjYXRjaCB7fVxuXG4gICAgY29uc3QgZmlyc3QgPSAhdGhpcy5vYnNlcnZlcnMuc2l6ZTtcbiAgICB0aGlzLm9ic2VydmVycy5hZGQob2JzZXJ2ZXIpO1xuXG4gICAgLy8gRGVsaXZlciBtb3N0IHJlY2VudCBlcnJvciBvciByZXN1bHQuXG4gICAgaWYgKHRoaXMubGFzdEVycm9yKSB7XG4gICAgICBvYnNlcnZlci5lcnJvciAmJiBvYnNlcnZlci5lcnJvcih0aGlzLmxhc3RFcnJvcik7XG4gICAgfSBlbHNlIGlmICh0aGlzLmxhc3RSZXN1bHQpIHtcbiAgICAgIG9ic2VydmVyLm5leHQgJiYgb2JzZXJ2ZXIubmV4dCh0aGlzLmxhc3RSZXN1bHQpO1xuICAgIH1cblxuICAgIC8vIEluaXRpYXRlIG9ic2VydmF0aW9uIG9mIHRoaXMgcXVlcnkgaWYgaXQgaGFzbid0IGJlZW4gcmVwb3J0ZWQgdG9cbiAgICAvLyB0aGUgUXVlcnlNYW5hZ2VyIHlldC5cbiAgICBpZiAoZmlyc3QpIHtcbiAgICAgIHRoaXMucmVvYnNlcnZlKCkuY2F0Y2goXyA9PiB7XG4gICAgICAgIC8vIEJsaW5kbHkgY2F0Y2hpbmcgaGVyZSBwcmV2ZW50cyB1bmhhbmRsZWQgcHJvbWlzZSByZWplY3Rpb25zLFxuICAgICAgICAvLyBhbmQgaXMgc2FmZSBiZWNhdXNlIHRoZSBPYnNlcnZhYmxlUXVlcnkgaGFuZGxlcyB0aGlzIGVycm9yIHdpdGhcbiAgICAgICAgLy8gdGhpcy5vYnNlcnZlci5lcnJvciwgc28gd2UncmUgbm90IGp1c3Qgc3dhbGxvd2luZyB0aGUgZXJyb3IgYnlcbiAgICAgICAgLy8gaWdub3JpbmcgaXQgaGVyZS5cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBpZiAodGhpcy5vYnNlcnZlcnMuZGVsZXRlKG9ic2VydmVyKSAmJiAhdGhpcy5vYnNlcnZlcnMuc2l6ZSkge1xuICAgICAgICB0aGlzLnRlYXJEb3duUXVlcnkoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSByZW9ic2VydmVyPzogUmVvYnNlcnZlcjxURGF0YSwgVFZhcmlhYmxlcz47XG5cbiAgcHJpdmF0ZSBnZXRSZW9ic2VydmVyKCk6IFJlb2JzZXJ2ZXI8VERhdGEsIFRWYXJpYWJsZXM+IHtcbiAgICByZXR1cm4gdGhpcy5yZW9ic2VydmVyIHx8ICh0aGlzLnJlb2JzZXJ2ZXIgPSB0aGlzLm5ld1Jlb2JzZXJ2ZXIodHJ1ZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBuZXdSZW9ic2VydmVyKHNoYXJlT3B0aW9uczogYm9vbGVhbikge1xuICAgIGNvbnN0IHsgcXVlcnlNYW5hZ2VyLCBxdWVyeUlkIH0gPSB0aGlzO1xuICAgIHF1ZXJ5TWFuYWdlci5zZXRPYnNlcnZhYmxlUXVlcnkodGhpcyk7XG4gICAgcmV0dXJuIG5ldyBSZW9ic2VydmVyPFREYXRhLCBUVmFyaWFibGVzPihcbiAgICAgIHRoaXMub2JzZXJ2ZXIsXG4gICAgICAvLyBTaGFyaW5nIG9wdGlvbnMgYWxsb3dzIHRoaXMucmVvYnNlcnZlci5vcHRpb25zIHRvIGJlID09PVxuICAgICAgLy8gdGhpcy5vcHRpb25zLCBzbyB3ZSBkb24ndCBoYXZlIHRvIHdvcnJ5IGFib3V0IHN5bmNocm9uaXppbmcgdGhlXG4gICAgICAvLyBwcm9wZXJ0aWVzIG9mIHR3byBkaXN0aW5jdCBvYmplY3RzLlxuICAgICAgc2hhcmVPcHRpb25zID8gdGhpcy5vcHRpb25zIDogeyAuLi50aGlzLm9wdGlvbnMgfSxcbiAgICAgIChjdXJyZW50T3B0aW9ucywgbmV3TmV0d29ya1N0YXR1cykgPT4ge1xuICAgICAgICBxdWVyeU1hbmFnZXIuc2V0T2JzZXJ2YWJsZVF1ZXJ5KHRoaXMpO1xuICAgICAgICByZXR1cm4gcXVlcnlNYW5hZ2VyLmZldGNoUXVlcnlPYnNlcnZhYmxlKFxuICAgICAgICAgIHF1ZXJ5SWQsXG4gICAgICAgICAgY3VycmVudE9wdGlvbnMsXG4gICAgICAgICAgbmV3TmV0d29ya1N0YXR1cyxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgICAvLyBBdm9pZCBwb2xsaW5nIGR1cmluZyBTU1IgYW5kIHdoZW4gdGhlIHF1ZXJ5IGlzIGFscmVhZHkgaW4gZmxpZ2h0LlxuICAgICAgIXF1ZXJ5TWFuYWdlci5zc3JNb2RlICYmIChcbiAgICAgICAgKCkgPT4gIWlzTmV0d29ya1JlcXVlc3RJbkZsaWdodCh0aGlzLnF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzKSlcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHJlb2JzZXJ2ZShcbiAgICBuZXdPcHRpb25zPzogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxUVmFyaWFibGVzLCBURGF0YT4+LFxuICAgIG5ld05ldHdvcmtTdGF0dXM/OiBOZXR3b3JrU3RhdHVzLFxuICApOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4ge1xuICAgIHRoaXMuaXNUb3JuRG93biA9IGZhbHNlO1xuICAgIHJldHVybiB0aGlzLmdldFJlb2JzZXJ2ZXIoKS5yZW9ic2VydmUobmV3T3B0aW9ucywgbmV3TmV0d29ya1N0YXR1cyk7XG4gIH1cblxuICAvLyBQYXNzIHRoZSBjdXJyZW50IHJlc3VsdCB0byB0aGlzLm9ic2VydmVyLm5leHQgd2l0aG91dCBhcHBseWluZyBhbnlcbiAgLy8gZmV0Y2ggcG9saWNpZXMsIGJ5cGFzc2luZyB0aGUgUmVvYnNlcnZlci5cbiAgcHJpdmF0ZSBvYnNlcnZlKCkge1xuICAgIC8vIFBhc3NpbmcgZmFsc2UgaXMgaW1wb3J0YW50IHNvIHRoYXQgdGhpcy5nZXRDdXJyZW50UmVzdWx0IGRvZXNuJ3RcbiAgICAvLyBzYXZlIHRoZSBmZXRjaE1vcmUgcmVzdWx0IGFzIHRoaXMubGFzdFJlc3VsdCwgY2F1c2luZyBpdCB0byBiZVxuICAgIC8vIGlnbm9yZWQgZHVlIHRvIHRoZSB0aGlzLmlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQgY2hlY2sgaW5cbiAgICAvLyB0aGlzLm9ic2VydmVyLm5leHQuXG4gICAgdGhpcy5vYnNlcnZlci5uZXh0KHRoaXMuZ2V0Q3VycmVudFJlc3VsdChmYWxzZSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBvYnNlcnZlciA9IHtcbiAgICBuZXh0OiAocmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4pID0+IHtcbiAgICAgIGlmICh0aGlzLmxhc3RFcnJvciB8fCB0aGlzLmlzRGlmZmVyZW50RnJvbUxhc3RSZXN1bHQocmVzdWx0KSkge1xuICAgICAgICB0aGlzLnVwZGF0ZUxhc3RSZXN1bHQocmVzdWx0KTtcbiAgICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseSh0aGlzLm9ic2VydmVycywgJ25leHQnLCByZXN1bHQpO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBlcnJvcjogKGVycm9yOiBBcG9sbG9FcnJvcikgPT4ge1xuICAgICAgLy8gU2luY2Ugd2UgZG9uJ3QgZ2V0IHRoZSBjdXJyZW50IHJlc3VsdCBvbiBlcnJvcnMsIG9ubHkgdGhlIGVycm9yLCB3ZVxuICAgICAgLy8gbXVzdCBtaXJyb3IgdGhlIHVwZGF0ZXMgdGhhdCBvY2N1ciBpbiBRdWVyeVN0b3JlLm1hcmtRdWVyeUVycm9yIGhlcmVcbiAgICAgIHRoaXMudXBkYXRlTGFzdFJlc3VsdCh7XG4gICAgICAgIC4uLnRoaXMubGFzdFJlc3VsdCxcbiAgICAgICAgZXJyb3IsXG4gICAgICAgIGVycm9yczogZXJyb3IuZ3JhcGhRTEVycm9ycyxcbiAgICAgICAgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5lcnJvcixcbiAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICB9KTtcblxuICAgICAgaXRlcmF0ZU9ic2VydmVyc1NhZmVseSh0aGlzLm9ic2VydmVycywgJ2Vycm9yJywgdGhpcy5sYXN0RXJyb3IgPSBlcnJvcik7XG4gICAgfSxcbiAgfTtcblxuICBwdWJsaWMgaGFzT2JzZXJ2ZXJzKCkge1xuICAgIHJldHVybiB0aGlzLm9ic2VydmVycy5zaXplID4gMDtcbiAgfVxuXG4gIHByaXZhdGUgdGVhckRvd25RdWVyeSgpIHtcbiAgICBpZiAodGhpcy5pc1Rvcm5Eb3duKSByZXR1cm47XG5cbiAgICBpZiAodGhpcy5yZW9ic2VydmVyKSB7XG4gICAgICB0aGlzLnJlb2JzZXJ2ZXIuc3RvcCgpO1xuICAgICAgZGVsZXRlIHRoaXMucmVvYnNlcnZlcjtcbiAgICB9XG5cbiAgICAvLyBzdG9wIGFsbCBhY3RpdmUgR3JhcGhRTCBzdWJzY3JpcHRpb25zXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmZvckVhY2goc3ViID0+IHN1Yi51bnN1YnNjcmliZSgpKTtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuY2xlYXIoKTtcblxuICAgIHRoaXMucXVlcnlNYW5hZ2VyLnN0b3BRdWVyeSh0aGlzLnF1ZXJ5SWQpO1xuXG4gICAgdGhpcy5vYnNlcnZlcnMuY2xlYXIoKTtcblxuICAgIHRoaXMuaXNUb3JuRG93biA9IHRydWU7XG4gIH1cbn1cblxuLy8gTmVjZXNzYXJ5IGJlY2F1c2UgdGhlIE9ic2VydmFibGVRdWVyeSBjb25zdHJ1Y3RvciBoYXMgYSBkaWZmZXJlbnRcbi8vIHNpZ25hdHVyZSB0aGFuIHRoZSBPYnNlcnZhYmxlIGNvbnN0cnVjdG9yLlxuZml4T2JzZXJ2YWJsZVN1YmNsYXNzKE9ic2VydmFibGVRdWVyeSk7XG5cbmZ1bmN0aW9uIGRlZmF1bHRTdWJzY3JpcHRpb25PYnNlcnZlckVycm9yQ2FsbGJhY2soZXJyb3I6IEFwb2xsb0Vycm9yKSB7XG4gIGludmFyaWFudC5lcnJvcignVW5oYW5kbGVkIGVycm9yJywgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2spO1xufVxuIiwgIi8vIEEgW3RyaWVdKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1RyaWUpIGRhdGEgc3RydWN0dXJlIHRoYXQgaG9sZHNcbi8vIG9iamVjdCBrZXlzIHdlYWtseSwgeWV0IGNhbiBhbHNvIGhvbGQgbm9uLW9iamVjdCBrZXlzLCB1bmxpa2UgdGhlXG4vLyBuYXRpdmUgYFdlYWtNYXBgLlxuXG4vLyBJZiBubyBtYWtlRGF0YSBmdW5jdGlvbiBpcyBzdXBwbGllZCwgdGhlIGxvb2tlZC11cCBkYXRhIHdpbGwgYmUgYW4gZW1wdHksXG4vLyBudWxsLXByb3RvdHlwZSBPYmplY3QuXG5jb25zdCBkZWZhdWx0TWFrZURhdGEgPSAoKSA9PiBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4vLyBVc2VmdWwgZm9yIHByb2Nlc3NpbmcgYXJndW1lbnRzIG9iamVjdHMgYXMgd2VsbCBhcyBhcnJheXMuXG5jb25zdCB7IGZvckVhY2gsIHNsaWNlIH0gPSBBcnJheS5wcm90b3R5cGU7XG5cbmV4cG9ydCBjbGFzcyBUcmllPERhdGE+IHtcbiAgLy8gU2luY2UgYSBgV2Vha01hcGAgY2Fubm90IGhvbGQgcHJpbWl0aXZlIHZhbHVlcyBhcyBrZXlzLCB3ZSBuZWVkIGFcbiAgLy8gYmFja3VwIGBNYXBgIGluc3RhbmNlIHRvIGhvbGQgcHJpbWl0aXZlIGtleXMuIEJvdGggYHRoaXMuX3dlYWtNYXBgXG4gIC8vIGFuZCBgdGhpcy5fc3Ryb25nTWFwYCBhcmUgbGF6aWx5IGluaXRpYWxpemVkLlxuICBwcml2YXRlIHdlYWs/OiBXZWFrTWFwPGFueSwgVHJpZTxEYXRhPj47XG4gIHByaXZhdGUgc3Ryb25nPzogTWFwPGFueSwgVHJpZTxEYXRhPj47XG4gIHByaXZhdGUgZGF0YT86IERhdGE7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB3ZWFrbmVzcyA9IHRydWUsXG4gICAgcHJpdmF0ZSBtYWtlRGF0YTogKGFycmF5OiBhbnlbXSkgPT4gRGF0YSA9IGRlZmF1bHRNYWtlRGF0YSxcbiAgKSB7fVxuXG4gIHB1YmxpYyBsb29rdXA8VCBleHRlbmRzIGFueVtdPiguLi5hcnJheTogVCk6IERhdGEge1xuICAgIHJldHVybiB0aGlzLmxvb2t1cEFycmF5KGFycmF5KTtcbiAgfVxuXG4gIHB1YmxpYyBsb29rdXBBcnJheTxUIGV4dGVuZHMgSUFyZ3VtZW50cyB8IGFueVtdPihhcnJheTogVCk6IERhdGEge1xuICAgIGxldCBub2RlOiBUcmllPERhdGE+ID0gdGhpcztcbiAgICBmb3JFYWNoLmNhbGwoYXJyYXksIGtleSA9PiBub2RlID0gbm9kZS5nZXRDaGlsZFRyaWUoa2V5KSk7XG4gICAgcmV0dXJuIG5vZGUuZGF0YSB8fCAobm9kZS5kYXRhID0gdGhpcy5tYWtlRGF0YShzbGljZS5jYWxsKGFycmF5KSkpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRDaGlsZFRyaWUoa2V5OiBhbnkpIHtcbiAgICBjb25zdCBtYXAgPSB0aGlzLndlYWtuZXNzICYmIGlzT2JqUmVmKGtleSlcbiAgICAgID8gdGhpcy53ZWFrIHx8ICh0aGlzLndlYWsgPSBuZXcgV2Vha01hcDxhbnksIFRyaWU8RGF0YT4+KCkpXG4gICAgICA6IHRoaXMuc3Ryb25nIHx8ICh0aGlzLnN0cm9uZyA9IG5ldyBNYXA8YW55LCBUcmllPERhdGE+PigpKTtcbiAgICBsZXQgY2hpbGQgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKCFjaGlsZCkgbWFwLnNldChrZXksIGNoaWxkID0gbmV3IFRyaWU8RGF0YT4odGhpcy53ZWFrbmVzcywgdGhpcy5tYWtlRGF0YSkpO1xuICAgIHJldHVybiBjaGlsZDtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc09ialJlZih2YWx1ZTogYW55KSB7XG4gIHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG4gIGNhc2UgXCJvYmplY3RcIjpcbiAgICBpZiAodmFsdWUgPT09IG51bGwpIGJyZWFrO1xuICAgIC8vIEZhbGwgdGhyb3VnaCB0byByZXR1cm4gdHJ1ZS4uLlxuICBjYXNlIFwiZnVuY3Rpb25cIjpcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4iLCAidHlwZSBDb250ZXh0ID0ge1xuICBwYXJlbnQ6IENvbnRleHQgfCBudWxsO1xuICBzbG90czogeyBbc2xvdElkOiBzdHJpbmddOiBhbnkgfTtcbn1cblxuLy8gVGhpcyBjdXJyZW50Q29udGV4dCB2YXJpYWJsZSB3aWxsIG9ubHkgYmUgdXNlZCBpZiB0aGUgbWFrZVNsb3RDbGFzc1xuLy8gZnVuY3Rpb24gaXMgY2FsbGVkLCB3aGljaCBoYXBwZW5zIG9ubHkgaWYgdGhpcyBpcyB0aGUgZmlyc3QgY29weSBvZiB0aGVcbi8vIEB3cnkvY29udGV4dCBwYWNrYWdlIHRvIGJlIGltcG9ydGVkLlxubGV0IGN1cnJlbnRDb250ZXh0OiBDb250ZXh0IHwgbnVsbCA9IG51bGw7XG5cbi8vIFRoaXMgdW5pcXVlIGludGVybmFsIG9iamVjdCBpcyB1c2VkIHRvIGRlbm90ZSB0aGUgYWJzZW5jZSBvZiBhIHZhbHVlXG4vLyBmb3IgYSBnaXZlbiBTbG90LCBhbmQgaXMgbmV2ZXIgZXhwb3NlZCB0byBvdXRzaWRlIGNvZGUuXG5jb25zdCBNSVNTSU5HX1ZBTFVFOiBhbnkgPSB7fTtcblxubGV0IGlkQ291bnRlciA9IDE7XG5cbi8vIEFsdGhvdWdoIHdlIGNhbid0IGRvIGFueXRoaW5nIGFib3V0IHRoZSBjb3N0IG9mIGR1cGxpY2F0ZWQgY29kZSBmcm9tXG4vLyBhY2NpZGVudGFsbHkgYnVuZGxpbmcgbXVsdGlwbGUgY29waWVzIG9mIHRoZSBAd3J5L2NvbnRleHQgcGFja2FnZSwgd2UgY2FuXG4vLyBhdm9pZCBjcmVhdGluZyB0aGUgU2xvdCBjbGFzcyBtb3JlIHRoYW4gb25jZSB1c2luZyBtYWtlU2xvdENsYXNzLlxuY29uc3QgbWFrZVNsb3RDbGFzcyA9ICgpID0+IGNsYXNzIFNsb3Q8VFZhbHVlPiB7XG4gIC8vIElmIHlvdSBoYXZlIGEgU2xvdCBvYmplY3QsIHlvdSBjYW4gZmluZCBvdXQgaXRzIHNsb3QuaWQsIGJ1dCB5b3UgY2Fubm90XG4gIC8vIGd1ZXNzIHRoZSBzbG90LmlkIG9mIGEgU2xvdCB5b3UgZG9uJ3QgaGF2ZSBhY2Nlc3MgdG8sIHRoYW5rcyB0byB0aGVcbiAgLy8gcmFuZG9taXplZCBzdWZmaXguXG4gIHB1YmxpYyByZWFkb25seSBpZCA9IFtcbiAgICBcInNsb3RcIixcbiAgICBpZENvdW50ZXIrKyxcbiAgICBEYXRlLm5vdygpLFxuICAgIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNsaWNlKDIpLFxuICBdLmpvaW4oXCI6XCIpO1xuXG4gIHB1YmxpYyBoYXNWYWx1ZSgpIHtcbiAgICBmb3IgKGxldCBjb250ZXh0ID0gY3VycmVudENvbnRleHQ7IGNvbnRleHQ7IGNvbnRleHQgPSBjb250ZXh0LnBhcmVudCkge1xuICAgICAgLy8gV2UgdXNlIHRoZSBTbG90IG9iamVjdCBpc2VsZiBhcyBhIGtleSB0byBpdHMgdmFsdWUsIHdoaWNoIG1lYW5zIHRoZVxuICAgICAgLy8gdmFsdWUgY2Fubm90IGJlIG9idGFpbmVkIHdpdGhvdXQgYSByZWZlcmVuY2UgdG8gdGhlIFNsb3Qgb2JqZWN0LlxuICAgICAgaWYgKHRoaXMuaWQgaW4gY29udGV4dC5zbG90cykge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IGNvbnRleHQuc2xvdHNbdGhpcy5pZF07XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gTUlTU0lOR19WQUxVRSkgYnJlYWs7XG4gICAgICAgIGlmIChjb250ZXh0ICE9PSBjdXJyZW50Q29udGV4dCkge1xuICAgICAgICAgIC8vIENhY2hlIHRoZSB2YWx1ZSBpbiBjdXJyZW50Q29udGV4dC5zbG90cyBzbyB0aGUgbmV4dCBsb29rdXAgd2lsbFxuICAgICAgICAgIC8vIGJlIGZhc3Rlci4gVGhpcyBjYWNoaW5nIGlzIHNhZmUgYmVjYXVzZSB0aGUgdHJlZSBvZiBjb250ZXh0cyBhbmRcbiAgICAgICAgICAvLyB0aGUgdmFsdWVzIG9mIHRoZSBzbG90cyBhcmUgbG9naWNhbGx5IGltbXV0YWJsZS5cbiAgICAgICAgICBjdXJyZW50Q29udGV4dCEuc2xvdHNbdGhpcy5pZF0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKGN1cnJlbnRDb250ZXh0KSB7XG4gICAgICAvLyBJZiBhIHZhbHVlIHdhcyBub3QgZm91bmQgZm9yIHRoaXMgU2xvdCwgaXQncyBuZXZlciBnb2luZyB0byBiZSBmb3VuZFxuICAgICAgLy8gbm8gbWF0dGVyIGhvdyBtYW55IHRpbWVzIHdlIGxvb2sgaXQgdXAsIHNvIHdlIG1pZ2h0IGFzIHdlbGwgY2FjaGVcbiAgICAgIC8vIHRoZSBhYnNlbmNlIG9mIHRoZSB2YWx1ZSwgdG9vLlxuICAgICAgY3VycmVudENvbnRleHQuc2xvdHNbdGhpcy5pZF0gPSBNSVNTSU5HX1ZBTFVFO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0VmFsdWUoKTogVFZhbHVlIHwgdW5kZWZpbmVkIHtcbiAgICBpZiAodGhpcy5oYXNWYWx1ZSgpKSB7XG4gICAgICByZXR1cm4gY3VycmVudENvbnRleHQhLnNsb3RzW3RoaXMuaWRdIGFzIFRWYWx1ZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgd2l0aFZhbHVlPFRSZXN1bHQsIFRBcmdzIGV4dGVuZHMgYW55W10sIFRUaGlzID0gYW55PihcbiAgICB2YWx1ZTogVFZhbHVlLFxuICAgIGNhbGxiYWNrOiAodGhpczogVFRoaXMsIC4uLmFyZ3M6IFRBcmdzKSA9PiBUUmVzdWx0LFxuICAgIC8vIEdpdmVuIHRoZSBwcmV2YWxlbmNlIG9mIGFycm93IGZ1bmN0aW9ucywgc3BlY2lmeWluZyBhcmd1bWVudHMgaXMgbGlrZWx5XG4gICAgLy8gdG8gYmUgbXVjaCBtb3JlIGNvbW1vbiB0aGFuIHNwZWNpZnlpbmcgYHRoaXNgLCBoZW5jZSB0aGlzIG9yZGVyaW5nOlxuICAgIGFyZ3M/OiBUQXJncyxcbiAgICB0aGlzQXJnPzogVFRoaXMsXG4gICk6IFRSZXN1bHQge1xuICAgIGNvbnN0IHNsb3RzID0ge1xuICAgICAgX19wcm90b19fOiBudWxsLFxuICAgICAgW3RoaXMuaWRdOiB2YWx1ZSxcbiAgICB9O1xuICAgIGNvbnN0IHBhcmVudCA9IGN1cnJlbnRDb250ZXh0O1xuICAgIGN1cnJlbnRDb250ZXh0ID0geyBwYXJlbnQsIHNsb3RzIH07XG4gICAgdHJ5IHtcbiAgICAgIC8vIEZ1bmN0aW9uLnByb3RvdHlwZS5hcHBseSBhbGxvd3MgdGhlIGFyZ3VtZW50cyBhcnJheSBhcmd1bWVudCB0byBiZVxuICAgICAgLy8gb21pdHRlZCBvciB1bmRlZmluZWQsIHNvIGFyZ3MhIGlzIGZpbmUgaGVyZS5cbiAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzQXJnISwgYXJncyEpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBjdXJyZW50Q29udGV4dCA9IHBhcmVudDtcbiAgICB9XG4gIH1cblxuICAvLyBDYXB0dXJlIHRoZSBjdXJyZW50IGNvbnRleHQgYW5kIHdyYXAgYSBjYWxsYmFjayBmdW5jdGlvbiBzbyB0aGF0IGl0XG4gIC8vIHJlZXN0YWJsaXNoZXMgdGhlIGNhcHR1cmVkIGNvbnRleHQgd2hlbiBjYWxsZWQuXG4gIHN0YXRpYyBiaW5kPFRBcmdzIGV4dGVuZHMgYW55W10sIFRSZXN1bHQ+KFxuICAgIGNhbGxiYWNrOiAoLi4uYXJnczogVEFyZ3MpID0+IFRSZXN1bHQsXG4gICkge1xuICAgIGNvbnN0IGNvbnRleHQgPSBjdXJyZW50Q29udGV4dDtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHRoaXM6IGFueSkge1xuICAgICAgY29uc3Qgc2F2ZWQgPSBjdXJyZW50Q29udGV4dDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGN1cnJlbnRDb250ZXh0ID0gY29udGV4dDtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyBhcyBhbnkpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY3VycmVudENvbnRleHQgPSBzYXZlZDtcbiAgICAgIH1cbiAgICB9IGFzIHR5cGVvZiBjYWxsYmFjaztcbiAgfVxuXG4gIC8vIEltbWVkaWF0ZWx5IHJ1biBhIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGhvdXQgYW55IGNhcHR1cmVkIGNvbnRleHQuXG4gIHN0YXRpYyBub0NvbnRleHQ8VFJlc3VsdCwgVEFyZ3MgZXh0ZW5kcyBhbnlbXSwgVFRoaXMgPSBhbnk+KFxuICAgIGNhbGxiYWNrOiAodGhpczogVFRoaXMsIC4uLmFyZ3M6IFRBcmdzKSA9PiBUUmVzdWx0LFxuICAgIC8vIEdpdmVuIHRoZSBwcmV2YWxlbmNlIG9mIGFycm93IGZ1bmN0aW9ucywgc3BlY2lmeWluZyBhcmd1bWVudHMgaXMgbGlrZWx5XG4gICAgLy8gdG8gYmUgbXVjaCBtb3JlIGNvbW1vbiB0aGFuIHNwZWNpZnlpbmcgYHRoaXNgLCBoZW5jZSB0aGlzIG9yZGVyaW5nOlxuICAgIGFyZ3M/OiBUQXJncyxcbiAgICB0aGlzQXJnPzogVFRoaXMsXG4gICkge1xuICAgIGlmIChjdXJyZW50Q29udGV4dCkge1xuICAgICAgY29uc3Qgc2F2ZWQgPSBjdXJyZW50Q29udGV4dDtcbiAgICAgIHRyeSB7XG4gICAgICAgIGN1cnJlbnRDb250ZXh0ID0gbnVsbDtcbiAgICAgICAgLy8gRnVuY3Rpb24ucHJvdG90eXBlLmFwcGx5IGFsbG93cyB0aGUgYXJndW1lbnRzIGFycmF5IGFyZ3VtZW50IHRvIGJlXG4gICAgICAgIC8vIG9taXR0ZWQgb3IgdW5kZWZpbmVkLCBzbyBhcmdzISBpcyBmaW5lIGhlcmUuXG4gICAgICAgIHJldHVybiBjYWxsYmFjay5hcHBseSh0aGlzQXJnISwgYXJncyEpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgY3VycmVudENvbnRleHQgPSBzYXZlZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGNhbGxiYWNrLmFwcGx5KHRoaXNBcmchLCBhcmdzISk7XG4gICAgfVxuICB9XG59O1xuXG4vLyBXZSBzdG9yZSBhIHNpbmdsZSBnbG9iYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNsb3QgY2xhc3MgYXMgYSBwZXJtYW5lbnRcbi8vIG5vbi1lbnVtZXJhYmxlIHN5bWJvbCBwcm9wZXJ0eSBvZiB0aGUgQXJyYXkgY29uc3RydWN0b3IuIFRoaXMgb2JmdXNjYXRpb25cbi8vIGRvZXMgbm90aGluZyB0byBwcmV2ZW50IGFjY2VzcyB0byB0aGUgU2xvdCBjbGFzcywgYnV0IGF0IGxlYXN0IGl0IGVuc3VyZXNcbi8vIHRoZSBpbXBsZW1lbnRhdGlvbiAoaS5lLiBjdXJyZW50Q29udGV4dCkgY2Fubm90IGJlIHRhbXBlcmVkIHdpdGgsIGFuZCBhbGxcbi8vIGNvcGllcyBvZiB0aGUgQHdyeS9jb250ZXh0IHBhY2thZ2UgKGhvcGVmdWxseSBqdXN0IG9uZSkgd2lsbCBzaGFyZSB0aGVcbi8vIHNhbWUgU2xvdCBpbXBsZW1lbnRhdGlvbi4gU2luY2UgdGhlIGZpcnN0IGNvcHkgb2YgdGhlIEB3cnkvY29udGV4dCBwYWNrYWdlXG4vLyB0byBiZSBpbXBvcnRlZCB3aW5zLCB0aGlzIHRlY2huaXF1ZSBpbXBvc2VzIGEgdmVyeSBoaWdoIGNvc3QgZm9yIGFueVxuLy8gZnV0dXJlIGJyZWFraW5nIGNoYW5nZXMgdG8gdGhlIFNsb3QgY2xhc3MuXG5jb25zdCBnbG9iYWxLZXkgPSBcIkB3cnkvY29udGV4dDpTbG90XCI7XG5jb25zdCBob3N0ID0gQXJyYXkgYXMgYW55O1xuXG5leHBvcnQgY29uc3QgU2xvdDogUmV0dXJuVHlwZTx0eXBlb2YgbWFrZVNsb3RDbGFzcz4gPSBob3N0W2dsb2JhbEtleV0gfHwgZnVuY3Rpb24gKCkge1xuICBjb25zdCBTbG90ID0gbWFrZVNsb3RDbGFzcygpO1xuICB0cnkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShob3N0LCBnbG9iYWxLZXksIHtcbiAgICAgIHZhbHVlOiBob3N0W2dsb2JhbEtleV0gPSBTbG90LFxuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB3cml0YWJsZTogZmFsc2UsXG4gICAgICBjb25maWd1cmFibGU6IGZhbHNlLFxuICAgIH0pO1xuICB9IGZpbmFsbHkge1xuICAgIHJldHVybiBTbG90O1xuICB9XG59KCk7XG4iLCAiaW1wb3J0IHsgU2xvdCB9IGZyb20gXCIuL3Nsb3RcIjtcbmV4cG9ydCB7IFNsb3QgfVxuZXhwb3J0IGNvbnN0IHsgYmluZCwgbm9Db250ZXh0IH0gPSBTbG90O1xuXG4vLyBSZWx5aW5nIG9uIHRoZSBAdHlwZXMvbm9kZSBkZWNsYXJhdGlvbiBvZiBnbG9iYWwuc2V0VGltZW91dCBjYW4gbWFrZVxuLy8gdGhpbmdzIHRyaWNreSBmb3IgZG93c3RyZWFtIHByb2plY3RzIChzZWUgUFIgIzcpLlxuZGVjbGFyZSBmdW5jdGlvbiBzZXRUaW1lb3V0KFxuICBjYWxsYmFjazogKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnksXG4gIG1zPzogbnVtYmVyLFxuICAuLi5hcmdzOiBhbnlbXVxuKTogYW55O1xuXG4vLyBMaWtlIGdsb2JhbC5zZXRUaW1lb3V0LCBleGNlcHQgdGhlIGNhbGxiYWNrIHJ1bnMgd2l0aCBjYXB0dXJlZCBjb250ZXh0LlxuZXhwb3J0IHsgc2V0VGltZW91dFdpdGhDb250ZXh0IGFzIHNldFRpbWVvdXQgfTtcbmZ1bmN0aW9uIHNldFRpbWVvdXRXaXRoQ29udGV4dChjYWxsYmFjazogKCkgPT4gYW55LCBkZWxheTogbnVtYmVyKSB7XG4gIHJldHVybiBzZXRUaW1lb3V0KGJpbmQoY2FsbGJhY2spLCBkZWxheSk7XG59XG5cbi8vIFR1cm4gYW55IGdlbmVyYXRvciBmdW5jdGlvbiBpbnRvIGFuIGFzeW5jIGZ1bmN0aW9uICh1c2luZyB5aWVsZCBpbnN0ZWFkXG4vLyBvZiBhd2FpdCksIHdpdGggY29udGV4dCBhdXRvbWF0aWNhbGx5IHByZXNlcnZlZCBhY3Jvc3MgeWllbGRzLlxuZXhwb3J0IGZ1bmN0aW9uIGFzeW5jRnJvbUdlbjxUQXJncyBleHRlbmRzIGFueVtdPihcbiAgZ2VuRm46ICguLi5hcmdzOiBUQXJncykgPT4gYW55XG4pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh0aGlzOiBhbnkpIHtcbiAgICBjb25zdCBnZW4gPSBnZW5Gbi5hcHBseSh0aGlzLCBhcmd1bWVudHMgYXMgYW55KTtcbiAgICBjb25zdCBib3VuZE5leHQgPSBiaW5kKGdlbi5uZXh0KTtcbiAgICBjb25zdCBib3VuZFRocm93ID0gYmluZChnZW4udGhyb3chKTtcbiAgICB0eXBlIE1ldGhvZCA9IHR5cGVvZiBib3VuZE5leHQgfCB0eXBlb2YgYm91bmRUaHJvdztcblxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBmdW5jdGlvbiBpbnZva2UobWV0aG9kOiBNZXRob2QsIGFyZ3VtZW50OiBhbnkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB2YXIgcmVzdWx0OiBhbnkgPSBtZXRob2QuY2FsbChnZW4sIGFyZ3VtZW50KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBuZXh0ID0gcmVzdWx0LmRvbmUgPyByZXNvbHZlIDogaW52b2tlTmV4dDtcbiAgICAgICAgaWYgKGlzUHJvbWlzZUxpa2UocmVzdWx0LnZhbHVlKSkge1xuICAgICAgICAgIHJlc3VsdC52YWx1ZS50aGVuKG5leHQsIHJlc3VsdC5kb25lID8gcmVqZWN0IDogaW52b2tlVGhyb3cpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5leHQocmVzdWx0LnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgaW52b2tlTmV4dCA9ICh2YWx1ZT86IGFueSkgPT4gaW52b2tlKGJvdW5kTmV4dCwgdmFsdWUpO1xuICAgICAgY29uc3QgaW52b2tlVGhyb3cgPSAoZXJyb3I6IGFueSkgPT4gaW52b2tlKGJvdW5kVGhyb3csIGVycm9yKTtcbiAgICAgIGludm9rZU5leHQoKTtcbiAgICB9KTtcbiAgfSBhcyAoLi4uYXJnczogVEFyZ3MpID0+IFByb21pc2U8YW55Pjtcbn1cblxuZnVuY3Rpb24gaXNQcm9taXNlTGlrZSh2YWx1ZTogYW55KTogdmFsdWUgaXMgUHJvbWlzZUxpa2U8YW55PiB7XG4gIHJldHVybiB2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gXCJmdW5jdGlvblwiO1xufVxuXG4vLyBJZiB5b3UgdXNlIHRoZSBmaWJlcnMgbnBtIHBhY2thZ2UgdG8gaW1wbGVtZW50IGNvcm91dGluZXMgaW4gTm9kZS5qcyxcbi8vIHlvdSBzaG91bGQgY2FsbCB0aGlzIGZ1bmN0aW9uIGF0IGxlYXN0IG9uY2UgdG8gZW5zdXJlIGNvbnRleHQgbWFuYWdlbWVudFxuLy8gcmVtYWlucyBjb2hlcmVudCBhY3Jvc3MgYW55IHlpZWxkcy5cbmNvbnN0IHdyYXBwZWRGaWJlcnM6IEZ1bmN0aW9uW10gPSBbXTtcbmV4cG9ydCBmdW5jdGlvbiB3cmFwWWllbGRpbmdGaWJlck1ldGhvZHM8RiBleHRlbmRzIEZ1bmN0aW9uPihGaWJlcjogRik6IEYge1xuICAvLyBUaGVyZSBjYW4gYmUgb25seSBvbmUgaW1wbGVtZW50YXRpb24gb2YgRmliZXIgcGVyIHByb2Nlc3MsIHNvIHRoaXMgYXJyYXlcbiAgLy8gc2hvdWxkIG5ldmVyIGdyb3cgbG9uZ2VyIHRoYW4gb25lIGVsZW1lbnQuXG4gIGlmICh3cmFwcGVkRmliZXJzLmluZGV4T2YoRmliZXIpIDwgMCkge1xuICAgIGNvbnN0IHdyYXAgPSAob2JqOiBhbnksIG1ldGhvZDogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBmbiA9IG9ialttZXRob2RdO1xuICAgICAgb2JqW21ldGhvZF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBub0NvbnRleHQoZm4sIGFyZ3VtZW50cyBhcyBhbnksIHRoaXMpO1xuICAgICAgfTtcbiAgICB9XG4gICAgLy8gVGhlc2UgbWV0aG9kcyBjYW4geWllbGQsIGFjY29yZGluZyB0b1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9sYXZlcmRldC9ub2RlLWZpYmVycy9ibG9iL2RkZWJlZDliOGFlMzg4M2U1N2Y4MjJlMjEwOGU2OTQzZTVjOGQyYTgvZmliZXJzLmpzI0w5Ny1MMTAwXG4gICAgd3JhcChGaWJlciwgXCJ5aWVsZFwiKTtcbiAgICB3cmFwKEZpYmVyLnByb3RvdHlwZSwgXCJydW5cIik7XG4gICAgd3JhcChGaWJlci5wcm90b3R5cGUsIFwidGhyb3dJbnRvXCIpO1xuICAgIHdyYXBwZWRGaWJlcnMucHVzaChGaWJlcik7XG4gIH1cbiAgcmV0dXJuIEZpYmVyO1xufVxuIiwgImludGVyZmFjZSBOb2RlPEssIFY+IHtcbiAga2V5OiBLO1xuICB2YWx1ZTogVjtcbiAgbmV3ZXI6IE5vZGU8SywgVj4gfCBudWxsO1xuICBvbGRlcjogTm9kZTxLLCBWPiB8IG51bGw7XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHREaXNwb3NlKCkge31cblxuZXhwb3J0IGNsYXNzIENhY2hlPEsgPSBhbnksIFYgPSBhbnk+IHtcbiAgcHJpdmF0ZSBtYXAgPSBuZXcgTWFwPEssIE5vZGU8SywgVj4+KCk7XG4gIHByaXZhdGUgbmV3ZXN0OiBOb2RlPEssIFY+IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgb2xkZXN0OiBOb2RlPEssIFY+IHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBtYXggPSBJbmZpbml0eSxcbiAgICBwdWJsaWMgZGlzcG9zZTogKHZhbHVlOiBWLCBrZXk6IEspID0+IHZvaWQgPSBkZWZhdWx0RGlzcG9zZSxcbiAgKSB7fVxuXG4gIHB1YmxpYyBoYXMoa2V5OiBLKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhcyhrZXkpO1xuICB9XG5cbiAgcHVibGljIGdldChrZXk6IEspOiBWIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBlbnRyeSA9IHRoaXMuZ2V0RW50cnkoa2V5KTtcbiAgICByZXR1cm4gZW50cnkgJiYgZW50cnkudmFsdWU7XG4gIH1cblxuICBwcml2YXRlIGdldEVudHJ5KGtleTogSyk6IE5vZGU8SywgVj4gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYXAuZ2V0KGtleSk7XG5cbiAgICBpZiAoZW50cnkgJiYgZW50cnkgIT09IHRoaXMubmV3ZXN0KSB7XG4gICAgICBjb25zdCB7IG9sZGVyLCBuZXdlciB9ID0gZW50cnk7XG5cbiAgICAgIGlmIChuZXdlcikge1xuICAgICAgICBuZXdlci5vbGRlciA9IG9sZGVyO1xuICAgICAgfVxuXG4gICAgICBpZiAob2xkZXIpIHtcbiAgICAgICAgb2xkZXIubmV3ZXIgPSBuZXdlcjtcbiAgICAgIH1cblxuICAgICAgZW50cnkub2xkZXIgPSB0aGlzLm5ld2VzdDtcbiAgICAgIGVudHJ5Lm9sZGVyIS5uZXdlciA9IGVudHJ5O1xuXG4gICAgICBlbnRyeS5uZXdlciA9IG51bGw7XG4gICAgICB0aGlzLm5ld2VzdCA9IGVudHJ5O1xuXG4gICAgICBpZiAoZW50cnkgPT09IHRoaXMub2xkZXN0KSB7XG4gICAgICAgIHRoaXMub2xkZXN0ID0gbmV3ZXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIGVudHJ5O1xuICB9XG5cbiAgcHVibGljIHNldChrZXk6IEssIHZhbHVlOiBWKTogViB7XG4gICAgbGV0IGVudHJ5ID0gdGhpcy5nZXRFbnRyeShrZXkpO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlID0gdmFsdWU7XG4gICAgfVxuXG4gICAgZW50cnkgPSB7XG4gICAgICBrZXk6IGtleSxcbiAgICAgIHZhbHVlOiB2YWx1ZSxcbiAgICAgIG5ld2VyOiBudWxsLFxuICAgICAgb2xkZXI6IHRoaXMubmV3ZXN0XG4gICAgfTtcblxuICAgIGlmICh0aGlzLm5ld2VzdCkge1xuICAgICAgdGhpcy5uZXdlc3QubmV3ZXIgPSBlbnRyeTtcbiAgICB9XG5cbiAgICB0aGlzLm5ld2VzdCA9IGVudHJ5O1xuICAgIHRoaXMub2xkZXN0ID0gdGhpcy5vbGRlc3QgfHwgZW50cnk7XG5cbiAgICB0aGlzLm1hcC5zZXQoa2V5LCBlbnRyeSk7XG5cbiAgICByZXR1cm4gZW50cnkudmFsdWU7XG4gIH1cblxuICBwdWJsaWMgY2xlYW4oKSB7XG4gICAgd2hpbGUgKHRoaXMub2xkZXN0ICYmIHRoaXMubWFwLnNpemUgPiB0aGlzLm1heCkge1xuICAgICAgdGhpcy5kZWxldGUodGhpcy5vbGRlc3Qua2V5KTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGVsZXRlKGtleTogSyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGVudHJ5ID0gdGhpcy5tYXAuZ2V0KGtleSk7XG4gICAgaWYgKGVudHJ5KSB7XG4gICAgICBpZiAoZW50cnkgPT09IHRoaXMubmV3ZXN0KSB7XG4gICAgICAgIHRoaXMubmV3ZXN0ID0gZW50cnkub2xkZXI7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbnRyeSA9PT0gdGhpcy5vbGRlc3QpIHtcbiAgICAgICAgdGhpcy5vbGRlc3QgPSBlbnRyeS5uZXdlcjtcbiAgICAgIH1cblxuICAgICAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7XG4gICAgICB9XG5cbiAgICAgIGlmIChlbnRyeS5vbGRlcikge1xuICAgICAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hcC5kZWxldGUoa2V5KTtcbiAgICAgIHRoaXMuZGlzcG9zZShlbnRyeS52YWx1ZSwga2V5KTtcblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgQW55RW50cnkgfSBmcm9tIFwiLi9lbnRyeVwiO1xuaW1wb3J0IHsgU2xvdCB9IGZyb20gXCJAd3J5L2NvbnRleHRcIjtcblxuZXhwb3J0IGNvbnN0IHBhcmVudEVudHJ5U2xvdCA9IG5ldyBTbG90PEFueUVudHJ5PigpO1xuXG5leHBvcnQge1xuICBiaW5kIGFzIGJpbmRDb250ZXh0LFxuICBub0NvbnRleHQsXG4gIHNldFRpbWVvdXQsXG4gIGFzeW5jRnJvbUdlbixcbn0gZnJvbSBcIkB3cnkvY29udGV4dFwiO1xuIiwgImV4cG9ydCB0eXBlIFVuc3Vic2NyaWJhYmxlID0ge1xuICB1bnN1YnNjcmliZT86IHZvaWQgfCAoKCkgPT4gYW55KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1heWJlVW5zdWJzY3JpYmUoZW50cnlPckRlcDogVW5zdWJzY3JpYmFibGUpIHtcbiAgY29uc3QgeyB1bnN1YnNjcmliZSB9ID0gZW50cnlPckRlcDtcbiAgaWYgKHR5cGVvZiB1bnN1YnNjcmliZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgZW50cnlPckRlcC51bnN1YnNjcmliZSA9IHZvaWQgMDtcbiAgICB1bnN1YnNjcmliZSgpO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgcGFyZW50RW50cnlTbG90IH0gZnJvbSBcIi4vY29udGV4dFwiO1xuaW1wb3J0IHsgT3B0aW1pc3RpY1dyYXBPcHRpb25zIH0gZnJvbSBcIi4vaW5kZXhcIjtcbmltcG9ydCB7IERlcCB9IGZyb20gXCIuL2RlcFwiO1xuaW1wb3J0IHsgbWF5YmVVbnN1YnNjcmliZSwgVW5zdWJzY3JpYmFibGUgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbmNvbnN0IGVtcHR5U2V0UG9vbDogU2V0PGFueT5bXSA9IFtdO1xuY29uc3QgUE9PTF9UQVJHRVRfU0laRSA9IDEwMDtcblxuLy8gU2luY2UgdGhpcyBwYWNrYWdlIG1pZ2h0IGJlIHVzZWQgYnJvd3NlcnMsIHdlIHNob3VsZCBhdm9pZCB1c2luZyB0aGVcbi8vIE5vZGUgYnVpbHQtaW4gYXNzZXJ0IG1vZHVsZS5cbmZ1bmN0aW9uIGFzc2VydChjb25kaXRpb246IGFueSwgb3B0aW9uYWxNZXNzYWdlPzogc3RyaW5nKSB7XG4gIGlmICghIGNvbmRpdGlvbikge1xuICAgIHRocm93IG5ldyBFcnJvcihvcHRpb25hbE1lc3NhZ2UgfHwgXCJhc3NlcnRpb24gZmFpbHVyZVwiKTtcbiAgfVxufVxuXG4vLyBTaW5jZSBleGNlcHRpb25zIGFyZSBjYWNoZWQganVzdCBsaWtlIG5vcm1hbCB2YWx1ZXMsIHdlIG5lZWQgYW4gZWZmaWNpZW50XG4vLyB3YXkgb2YgcmVwcmVzZW50aW5nIHVua25vd24sIG9yZGluYXJ5LCBhbmQgZXhjZXB0aW9uYWwgdmFsdWVzLlxudHlwZSBWYWx1ZTxUPiA9XG4gIHwgW10gICAgICAgICAgIC8vIHVua25vd25cbiAgfCBbVF0gICAgICAgICAgLy8ga25vd24gdmFsdWVcbiAgfCBbdm9pZCwgYW55XTsgLy8ga25vd24gZXhjZXB0aW9uXG5cbmZ1bmN0aW9uIHZhbHVlSXMoYTogVmFsdWU8YW55PiwgYjogVmFsdWU8YW55Pikge1xuICBjb25zdCBsZW4gPSBhLmxlbmd0aDtcbiAgcmV0dXJuIChcbiAgICAvLyBVbmtub3duIHZhbHVlcyBhcmUgbm90IGVxdWFsIHRvIGVhY2ggb3RoZXIuXG4gICAgbGVuID4gMCAmJlxuICAgIC8vIEJvdGggdmFsdWVzIG11c3QgYmUgb3JkaW5hcnkgKG9yIGJvdGggZXhjZXB0aW9uYWwpIHRvIGJlIGVxdWFsLlxuICAgIGxlbiA9PT0gYi5sZW5ndGggJiZcbiAgICAvLyBUaGUgdW5kZXJseWluZyB2YWx1ZSBvciBleGNlcHRpb24gbXVzdCBiZSB0aGUgc2FtZS5cbiAgICBhW2xlbiAtIDFdID09PSBiW2xlbiAtIDFdXG4gICk7XG59XG5cbmZ1bmN0aW9uIHZhbHVlR2V0PFQ+KHZhbHVlOiBWYWx1ZTxUPik6IFQge1xuICBzd2l0Y2ggKHZhbHVlLmxlbmd0aCkge1xuICAgIGNhc2UgMDogdGhyb3cgbmV3IEVycm9yKFwidW5rbm93biB2YWx1ZVwiKTtcbiAgICBjYXNlIDE6IHJldHVybiB2YWx1ZVswXTtcbiAgICBjYXNlIDI6IHRocm93IHZhbHVlWzFdO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbHVlQ29weTxUPih2YWx1ZTogVmFsdWU8VD4pOiBWYWx1ZTxUPiB7XG4gIHJldHVybiB2YWx1ZS5zbGljZSgwKSBhcyBWYWx1ZTxUPjtcbn1cblxuZXhwb3J0IHR5cGUgQW55RW50cnkgPSBFbnRyeTxhbnksIGFueT47XG5cbmV4cG9ydCBjbGFzcyBFbnRyeTxUQXJncyBleHRlbmRzIGFueVtdLCBUVmFsdWU+IHtcbiAgcHVibGljIHN0YXRpYyBjb3VudCA9IDA7XG5cbiAgcHVibGljIHN1YnNjcmliZTogT3B0aW1pc3RpY1dyYXBPcHRpb25zPFRBcmdzPltcInN1YnNjcmliZVwiXTtcbiAgcHVibGljIHVuc3Vic2NyaWJlOiBVbnN1YnNjcmliYWJsZVtcInVuc3Vic2NyaWJlXCJdO1xuXG4gIHB1YmxpYyByZWFkb25seSBwYXJlbnRzID0gbmV3IFNldDxBbnlFbnRyeT4oKTtcbiAgcHVibGljIHJlYWRvbmx5IGNoaWxkVmFsdWVzID0gbmV3IE1hcDxBbnlFbnRyeSwgVmFsdWU8YW55Pj4oKTtcblxuICAvLyBXaGVuIHRoaXMgRW50cnkgaGFzIGNoaWxkcmVuIHRoYXQgYXJlIGRpcnR5LCB0aGlzIHByb3BlcnR5IGJlY29tZXNcbiAgLy8gYSBTZXQgY29udGFpbmluZyBvdGhlciBFbnRyeSBvYmplY3RzLCBib3Jyb3dlZCBmcm9tIGVtcHR5U2V0UG9vbC5cbiAgLy8gV2hlbiB0aGUgc2V0IGJlY29tZXMgZW1wdHksIGl0IGdldHMgcmVjeWNsZWQgYmFjayB0byBlbXB0eVNldFBvb2wuXG4gIHB1YmxpYyBkaXJ0eUNoaWxkcmVuOiBTZXQ8QW55RW50cnk+IHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIGRpcnR5ID0gdHJ1ZTtcbiAgcHVibGljIHJlY29tcHV0aW5nID0gZmFsc2U7XG4gIHB1YmxpYyByZWFkb25seSB2YWx1ZTogVmFsdWU8VFZhbHVlPiA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBmbjogKC4uLmFyZ3M6IFRBcmdzKSA9PiBUVmFsdWUsXG4gICkge1xuICAgICsrRW50cnkuY291bnQ7XG4gIH1cblxuICBwdWJsaWMgcGVlaygpOiBUVmFsdWUgfCB1bmRlZmluZWQge1xuICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMSAmJiAhbWlnaHRCZURpcnR5KHRoaXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy52YWx1ZVswXTtcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGlzIHRoZSBtb3N0IGltcG9ydGFudCBtZXRob2Qgb2YgdGhlIEVudHJ5IEFQSSwgYmVjYXVzZSBpdFxuICAvLyBkZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGNhY2hlZCB0aGlzLnZhbHVlIGNhbiBiZSByZXR1cm5lZCBpbW1lZGlhdGVseSxcbiAgLy8gb3IgbXVzdCBiZSByZWNvbXB1dGVkLiBUaGUgb3ZlcmFsbCBwZXJmb3JtYW5jZSBvZiB0aGUgY2FjaGluZyBzeXN0ZW1cbiAgLy8gZGVwZW5kcyBvbiB0aGUgdHJ1dGggb2YgdGhlIGZvbGxvd2luZyBvYnNlcnZhdGlvbnM6ICgxKSB0aGlzLmRpcnR5IGlzXG4gIC8vIHVzdWFsbHkgZmFsc2UsICgyKSB0aGlzLmRpcnR5Q2hpbGRyZW4gaXMgdXN1YWxseSBudWxsL2VtcHR5LCBhbmQgdGh1c1xuICAvLyAoMykgdmFsdWVHZXQodGhpcy52YWx1ZSkgaXMgdXN1YWxseSByZXR1cm5lZCB3aXRob3V0IHJlY29tcHV0YXRpb24uXG4gIHB1YmxpYyByZWNvbXB1dGUoYXJnczogVEFyZ3MpOiBUVmFsdWUge1xuICAgIGFzc2VydCghIHRoaXMucmVjb21wdXRpbmcsIFwiYWxyZWFkeSByZWNvbXB1dGluZ1wiKTtcbiAgICByZW1lbWJlclBhcmVudCh0aGlzKTtcbiAgICByZXR1cm4gbWlnaHRCZURpcnR5KHRoaXMpXG4gICAgICA/IHJlYWxseVJlY29tcHV0ZSh0aGlzLCBhcmdzKVxuICAgICAgOiB2YWx1ZUdldCh0aGlzLnZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXREaXJ0eSgpIHtcbiAgICBpZiAodGhpcy5kaXJ0eSkgcmV0dXJuO1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgIHRoaXMudmFsdWUubGVuZ3RoID0gMDtcbiAgICByZXBvcnREaXJ0eSh0aGlzKTtcbiAgICBmb3JnZXRDaGlsZHJlbih0aGlzKTtcbiAgICAvLyBXZSBjYW4gZ28gYWhlYWQgYW5kIHVuc3Vic2NyaWJlIGhlcmUsIHNpbmNlIGFueSBmdXJ0aGVyIGRpcnR5XG4gICAgLy8gbm90aWZpY2F0aW9ucyB3ZSByZWNlaXZlIHdpbGwgYmUgcmVkdW5kYW50LCBhbmQgdW5zdWJzY3JpYmluZyBtYXlcbiAgICAvLyBmcmVlIHVwIHNvbWUgcmVzb3VyY2VzLCBlLmcuIGZpbGUgd2F0Y2hlcnMuXG4gICAgbWF5YmVVbnN1YnNjcmliZSh0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCkge1xuICAgIGZvcmdldENoaWxkcmVuKHRoaXMpO1xuICAgIG1heWJlVW5zdWJzY3JpYmUodGhpcyk7XG5cbiAgICAvLyBCZWNhdXNlIHRoaXMgZW50cnkgaGFzIGJlZW4ga2lja2VkIG91dCBvZiB0aGUgY2FjaGUgKGluIGluZGV4LmpzKSxcbiAgICAvLyB3ZSd2ZSBsb3N0IHRoZSBhYmlsaXR5IHRvIGZpbmQgb3V0IGlmL3doZW4gdGhpcyBlbnRyeSBiZWNvbWVzIGRpcnR5LFxuICAgIC8vIHdoZXRoZXIgdGhhdCBoYXBwZW5zIHRocm91Z2ggYSBzdWJzY3JpcHRpb24sIGJlY2F1c2Ugb2YgYSBkaXJlY3QgY2FsbFxuICAgIC8vIHRvIGVudHJ5LnNldERpcnR5KCksIG9yIGJlY2F1c2Ugb25lIG9mIGl0cyBjaGlsZHJlbiBiZWNvbWVzIGRpcnR5LlxuICAgIC8vIEJlY2F1c2Ugb2YgdGhpcyBsb3NzIG9mIGZ1dHVyZSBpbmZvcm1hdGlvbiwgd2UgaGF2ZSB0byBhc3N1bWUgdGhlXG4gICAgLy8gd29yc3QgKHRoYXQgdGhpcyBlbnRyeSBtaWdodCBoYXZlIGJlY29tZSBkaXJ0eSB2ZXJ5IHNvb24pLCBzbyB3ZSBtdXN0XG4gICAgLy8gaW1tZWRpYXRlbHkgbWFyayB0aGlzIGVudHJ5J3MgcGFyZW50cyBhcyBkaXJ0eS4gTm9ybWFsbHkgd2UgY291bGRcbiAgICAvLyBqdXN0IGNhbGwgZW50cnkuc2V0RGlydHkoKSByYXRoZXIgdGhhbiBjYWxsaW5nIHBhcmVudC5zZXREaXJ0eSgpIGZvclxuICAgIC8vIGVhY2ggcGFyZW50LCBidXQgdGhhdCB3b3VsZCBsZWF2ZSB0aGlzIGVudHJ5IGluIHBhcmVudC5jaGlsZFZhbHVlc1xuICAgIC8vIGFuZCBwYXJlbnQuZGlydHlDaGlsZHJlbiwgd2hpY2ggd291bGQgcHJldmVudCB0aGUgY2hpbGQgZnJvbSBiZWluZ1xuICAgIC8vIHRydWx5IGZvcmdvdHRlbi5cbiAgICB0aGlzLnBhcmVudHMuZm9yRWFjaChwYXJlbnQgPT4ge1xuICAgICAgcGFyZW50LnNldERpcnR5KCk7XG4gICAgICBmb3JnZXRDaGlsZChwYXJlbnQsIHRoaXMpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBkZXBzOiBTZXQ8RGVwPGFueT4+IHwgbnVsbCA9IG51bGw7XG5cbiAgcHVibGljIGRlcGVuZE9uKGRlcDogRGVwPGFueT4pIHtcbiAgICBkZXAuYWRkKHRoaXMpO1xuICAgIGlmICghIHRoaXMuZGVwcykge1xuICAgICAgdGhpcy5kZXBzID0gZW1wdHlTZXRQb29sLnBvcCgpIHx8IG5ldyBTZXQ8U2V0PEFueUVudHJ5Pj4oKTtcbiAgICB9XG4gICAgdGhpcy5kZXBzLmFkZChkZXApO1xuICB9XG5cbiAgcHVibGljIGZvcmdldERlcHMoKSB7XG4gICAgaWYgKHRoaXMuZGVwcykge1xuICAgICAgdGhpcy5kZXBzLmZvckVhY2goZGVwID0+IGRlcC5kZWxldGUodGhpcykpO1xuICAgICAgdGhpcy5kZXBzLmNsZWFyKCk7XG4gICAgICBlbXB0eVNldFBvb2wucHVzaCh0aGlzLmRlcHMpO1xuICAgICAgdGhpcy5kZXBzID0gbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gcmVtZW1iZXJQYXJlbnQoY2hpbGQ6IEFueUVudHJ5KSB7XG4gIGNvbnN0IHBhcmVudCA9IHBhcmVudEVudHJ5U2xvdC5nZXRWYWx1ZSgpO1xuICBpZiAocGFyZW50KSB7XG4gICAgY2hpbGQucGFyZW50cy5hZGQocGFyZW50KTtcblxuICAgIGlmICghIHBhcmVudC5jaGlsZFZhbHVlcy5oYXMoY2hpbGQpKSB7XG4gICAgICBwYXJlbnQuY2hpbGRWYWx1ZXMuc2V0KGNoaWxkLCBbXSk7XG4gICAgfVxuXG4gICAgaWYgKG1pZ2h0QmVEaXJ0eShjaGlsZCkpIHtcbiAgICAgIHJlcG9ydERpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcG9ydENsZWFuQ2hpbGQocGFyZW50LCBjaGlsZCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHBhcmVudDtcbiAgfVxufVxuXG5mdW5jdGlvbiByZWFsbHlSZWNvbXB1dGUoZW50cnk6IEFueUVudHJ5LCBhcmdzOiBhbnlbXSkge1xuICBmb3JnZXRDaGlsZHJlbihlbnRyeSk7XG5cbiAgLy8gU2V0IGVudHJ5IGFzIHRoZSBwYXJlbnQgZW50cnkgd2hpbGUgY2FsbGluZyByZWNvbXB1dGVOZXdWYWx1ZShlbnRyeSkuXG4gIHBhcmVudEVudHJ5U2xvdC53aXRoVmFsdWUoZW50cnksIHJlY29tcHV0ZU5ld1ZhbHVlLCBbZW50cnksIGFyZ3NdKTtcblxuICBpZiAobWF5YmVTdWJzY3JpYmUoZW50cnksIGFyZ3MpKSB7XG4gICAgLy8gSWYgd2Ugc3VjY2Vzc2Z1bGx5IHJlY29tcHV0ZWQgZW50cnkudmFsdWUgYW5kIGRpZCBub3QgZmFpbCB0b1xuICAgIC8vIChyZSlzdWJzY3JpYmUsIHRoZW4gdGhpcyBFbnRyeSBpcyBubyBsb25nZXIgZXhwbGljaXRseSBkaXJ0eS5cbiAgICBzZXRDbGVhbihlbnRyeSk7XG4gIH1cblxuICByZXR1cm4gdmFsdWVHZXQoZW50cnkudmFsdWUpO1xufVxuXG5mdW5jdGlvbiByZWNvbXB1dGVOZXdWYWx1ZShlbnRyeTogQW55RW50cnksIGFyZ3M6IGFueVtdKSB7XG4gIGVudHJ5LnJlY29tcHV0aW5nID0gdHJ1ZTtcbiAgLy8gU2V0IGVudHJ5LnZhbHVlIGFzIHVua25vd24uXG4gIGVudHJ5LnZhbHVlLmxlbmd0aCA9IDA7XG4gIHRyeSB7XG4gICAgLy8gSWYgZW50cnkuZm4gc3VjY2VlZHMsIGVudHJ5LnZhbHVlIHdpbGwgYmVjb21lIGEgbm9ybWFsIFZhbHVlLlxuICAgIGVudHJ5LnZhbHVlWzBdID0gZW50cnkuZm4uYXBwbHkobnVsbCwgYXJncyk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICAvLyBJZiBlbnRyeS5mbiB0aHJvd3MsIGVudHJ5LnZhbHVlIHdpbGwgYmVjb21lIGV4Y2VwdGlvbmFsLlxuICAgIGVudHJ5LnZhbHVlWzFdID0gZTtcbiAgfVxuICAvLyBFaXRoZXIgd2F5LCB0aGlzIGxpbmUgaXMgYWx3YXlzIHJlYWNoZWQuXG4gIGVudHJ5LnJlY29tcHV0aW5nID0gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIG1pZ2h0QmVEaXJ0eShlbnRyeTogQW55RW50cnkpIHtcbiAgcmV0dXJuIGVudHJ5LmRpcnR5IHx8ICEhKGVudHJ5LmRpcnR5Q2hpbGRyZW4gJiYgZW50cnkuZGlydHlDaGlsZHJlbi5zaXplKTtcbn1cblxuZnVuY3Rpb24gc2V0Q2xlYW4oZW50cnk6IEFueUVudHJ5KSB7XG4gIGVudHJ5LmRpcnR5ID0gZmFsc2U7XG5cbiAgaWYgKG1pZ2h0QmVEaXJ0eShlbnRyeSkpIHtcbiAgICAvLyBUaGlzIEVudHJ5IG1heSBzdGlsbCBoYXZlIGRpcnR5IGNoaWxkcmVuLCBpbiB3aGljaCBjYXNlIHdlIGNhbid0XG4gICAgLy8gbGV0IG91ciBwYXJlbnRzIGtub3cgd2UncmUgY2xlYW4ganVzdCB5ZXQuXG4gICAgcmV0dXJuO1xuICB9XG5cbiAgcmVwb3J0Q2xlYW4oZW50cnkpO1xufVxuXG5mdW5jdGlvbiByZXBvcnREaXJ0eShjaGlsZDogQW55RW50cnkpIHtcbiAgY2hpbGQucGFyZW50cy5mb3JFYWNoKHBhcmVudCA9PiByZXBvcnREaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpKTtcbn1cblxuZnVuY3Rpb24gcmVwb3J0Q2xlYW4oY2hpbGQ6IEFueUVudHJ5KSB7XG4gIGNoaWxkLnBhcmVudHMuZm9yRWFjaChwYXJlbnQgPT4gcmVwb3J0Q2xlYW5DaGlsZChwYXJlbnQsIGNoaWxkKSk7XG59XG5cbi8vIExldCBhIHBhcmVudCBFbnRyeSBrbm93IHRoYXQgb25lIG9mIGl0cyBjaGlsZHJlbiBtYXkgYmUgZGlydHkuXG5mdW5jdGlvbiByZXBvcnREaXJ0eUNoaWxkKHBhcmVudDogQW55RW50cnksIGNoaWxkOiBBbnlFbnRyeSkge1xuICAvLyBNdXN0IGhhdmUgY2FsbGVkIHJlbWVtYmVyUGFyZW50KGNoaWxkKSBiZWZvcmUgY2FsbGluZ1xuICAvLyByZXBvcnREaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpLlxuICBhc3NlcnQocGFyZW50LmNoaWxkVmFsdWVzLmhhcyhjaGlsZCkpO1xuICBhc3NlcnQobWlnaHRCZURpcnR5KGNoaWxkKSk7XG5cbiAgaWYgKCEgcGFyZW50LmRpcnR5Q2hpbGRyZW4pIHtcbiAgICBwYXJlbnQuZGlydHlDaGlsZHJlbiA9IGVtcHR5U2V0UG9vbC5wb3AoKSB8fCBuZXcgU2V0O1xuXG4gIH0gZWxzZSBpZiAocGFyZW50LmRpcnR5Q2hpbGRyZW4uaGFzKGNoaWxkKSkge1xuICAgIC8vIElmIHdlIGFscmVhZHkga25vdyB0aGlzIGNoaWxkIGlzIGRpcnR5LCB0aGVuIHdlIG11c3QgaGF2ZSBhbHJlYWR5XG4gICAgLy8gaW5mb3JtZWQgb3VyIG93biBwYXJlbnRzIHRoYXQgd2UgYXJlIGRpcnR5LCBzbyB3ZSBjYW4gdGVybWluYXRlXG4gICAgLy8gdGhlIHJlY3Vyc2lvbiBlYXJseS5cbiAgICByZXR1cm47XG4gIH1cblxuICBwYXJlbnQuZGlydHlDaGlsZHJlbi5hZGQoY2hpbGQpO1xuICByZXBvcnREaXJ0eShwYXJlbnQpO1xufVxuXG4vLyBMZXQgYSBwYXJlbnQgRW50cnkga25vdyB0aGF0IG9uZSBvZiBpdHMgY2hpbGRyZW4gaXMgbm8gbG9uZ2VyIGRpcnR5LlxuZnVuY3Rpb24gcmVwb3J0Q2xlYW5DaGlsZChwYXJlbnQ6IEFueUVudHJ5LCBjaGlsZDogQW55RW50cnkpIHtcbiAgLy8gTXVzdCBoYXZlIGNhbGxlZCByZW1lbWJlckNoaWxkKGNoaWxkKSBiZWZvcmUgY2FsbGluZ1xuICAvLyByZXBvcnRDbGVhbkNoaWxkKHBhcmVudCwgY2hpbGQpLlxuICBhc3NlcnQocGFyZW50LmNoaWxkVmFsdWVzLmhhcyhjaGlsZCkpO1xuICBhc3NlcnQoISBtaWdodEJlRGlydHkoY2hpbGQpKTtcblxuICBjb25zdCBjaGlsZFZhbHVlID0gcGFyZW50LmNoaWxkVmFsdWVzLmdldChjaGlsZCkhO1xuICBpZiAoY2hpbGRWYWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICBwYXJlbnQuY2hpbGRWYWx1ZXMuc2V0KGNoaWxkLCB2YWx1ZUNvcHkoY2hpbGQudmFsdWUpKTtcbiAgfSBlbHNlIGlmICghIHZhbHVlSXMoY2hpbGRWYWx1ZSwgY2hpbGQudmFsdWUpKSB7XG4gICAgcGFyZW50LnNldERpcnR5KCk7XG4gIH1cblxuICByZW1vdmVEaXJ0eUNoaWxkKHBhcmVudCwgY2hpbGQpO1xuXG4gIGlmIChtaWdodEJlRGlydHkocGFyZW50KSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJlcG9ydENsZWFuKHBhcmVudCk7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZURpcnR5Q2hpbGQocGFyZW50OiBBbnlFbnRyeSwgY2hpbGQ6IEFueUVudHJ5KSB7XG4gIGNvbnN0IGRjID0gcGFyZW50LmRpcnR5Q2hpbGRyZW47XG4gIGlmIChkYykge1xuICAgIGRjLmRlbGV0ZShjaGlsZCk7XG4gICAgaWYgKGRjLnNpemUgPT09IDApIHtcbiAgICAgIGlmIChlbXB0eVNldFBvb2wubGVuZ3RoIDwgUE9PTF9UQVJHRVRfU0laRSkge1xuICAgICAgICBlbXB0eVNldFBvb2wucHVzaChkYyk7XG4gICAgICB9XG4gICAgICBwYXJlbnQuZGlydHlDaGlsZHJlbiA9IG51bGw7XG4gICAgfVxuICB9XG59XG5cbi8vIFJlbW92ZXMgYWxsIGNoaWxkcmVuIGZyb20gdGhpcyBlbnRyeSBhbmQgcmV0dXJucyBhbiBhcnJheSBvZiB0aGVcbi8vIHJlbW92ZWQgY2hpbGRyZW4uXG5mdW5jdGlvbiBmb3JnZXRDaGlsZHJlbihwYXJlbnQ6IEFueUVudHJ5KSB7XG4gIGlmIChwYXJlbnQuY2hpbGRWYWx1ZXMuc2l6ZSA+IDApIHtcbiAgICBwYXJlbnQuY2hpbGRWYWx1ZXMuZm9yRWFjaCgoX3ZhbHVlLCBjaGlsZCkgPT4ge1xuICAgICAgZm9yZ2V0Q2hpbGQocGFyZW50LCBjaGlsZCk7XG4gICAgfSk7XG4gIH1cblxuICAvLyBSZW1vdmUgdGhpcyBwYXJlbnQgRW50cnkgZnJvbSBhbnkgc2V0cyB0byB3aGljaCBpdCB3YXMgYWRkZWQgYnkgdGhlXG4gIC8vIGFkZFRvU2V0IG1ldGhvZC5cbiAgcGFyZW50LmZvcmdldERlcHMoKTtcblxuICAvLyBBZnRlciB3ZSBmb3JnZXQgYWxsIG91ciBjaGlsZHJlbiwgdGhpcy5kaXJ0eUNoaWxkcmVuIG11c3QgYmUgZW1wdHlcbiAgLy8gYW5kIHRoZXJlZm9yZSBtdXN0IGhhdmUgYmVlbiByZXNldCB0byBudWxsLlxuICBhc3NlcnQocGFyZW50LmRpcnR5Q2hpbGRyZW4gPT09IG51bGwpO1xufVxuXG5mdW5jdGlvbiBmb3JnZXRDaGlsZChwYXJlbnQ6IEFueUVudHJ5LCBjaGlsZDogQW55RW50cnkpIHtcbiAgY2hpbGQucGFyZW50cy5kZWxldGUocGFyZW50KTtcbiAgcGFyZW50LmNoaWxkVmFsdWVzLmRlbGV0ZShjaGlsZCk7XG4gIHJlbW92ZURpcnR5Q2hpbGQocGFyZW50LCBjaGlsZCk7XG59XG5cbmZ1bmN0aW9uIG1heWJlU3Vic2NyaWJlKGVudHJ5OiBBbnlFbnRyeSwgYXJnczogYW55W10pIHtcbiAgaWYgKHR5cGVvZiBlbnRyeS5zdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHRyeSB7XG4gICAgICBtYXliZVVuc3Vic2NyaWJlKGVudHJ5KTsgLy8gUHJldmVudCBkb3VibGUgc3Vic2NyaXB0aW9ucy5cbiAgICAgIGVudHJ5LnVuc3Vic2NyaWJlID0gZW50cnkuc3Vic2NyaWJlLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIElmIHRoaXMgRW50cnkgaGFzIGEgc3Vic2NyaWJlIGZ1bmN0aW9uIGFuZCBpdCB0aHJldyBhbiBleGNlcHRpb25cbiAgICAgIC8vIChvciBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiBpdCBwcmV2aW91c2x5IHJldHVybmVkIG5vdyB0aHJvd3MpLFxuICAgICAgLy8gcmV0dXJuIGZhbHNlIHRvIGluZGljYXRlIHRoYXQgd2Ugd2VyZSBub3QgYWJsZSB0byBzdWJzY3JpYmUgKG9yXG4gICAgICAvLyB1bnN1YnNjcmliZSksIGFuZCB0aGlzIEVudHJ5IHNob3VsZCByZW1haW4gZGlydHkuXG4gICAgICBlbnRyeS5zZXREaXJ0eSgpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJldHVybmluZyB0cnVlIGluZGljYXRlcyBlaXRoZXIgdGhhdCB0aGVyZSB3YXMgbm8gZW50cnkuc3Vic2NyaWJlXG4gIC8vIGZ1bmN0aW9uIG9yIHRoYXQgaXQgc3VjY2VlZGVkLlxuICByZXR1cm4gdHJ1ZTtcbn1cbiIsICJpbXBvcnQgeyBBbnlFbnRyeSB9IGZyb20gXCIuL2VudHJ5XCI7XG5pbXBvcnQgeyBPcHRpbWlzdGljV3JhcE9wdGlvbnMgfSBmcm9tIFwiLi9pbmRleFwiO1xuaW1wb3J0IHsgcGFyZW50RW50cnlTbG90IH0gZnJvbSBcIi4vY29udGV4dFwiO1xuaW1wb3J0IHsgVW5zdWJzY3JpYmFibGUsIG1heWJlVW5zdWJzY3JpYmUgfSBmcm9tIFwiLi9oZWxwZXJzXCI7XG5cbmV4cG9ydCB0eXBlIE9wdGltaXN0aWNEZXBlbmRlbmN5RnVuY3Rpb248VEtleT4gPVxuICAoKGtleTogVEtleSkgPT4gdm9pZCkgJiB7XG4gICAgZGlydHk6IChrZXk6IFRLZXkpID0+IHZvaWQ7XG4gIH07XG5cbmV4cG9ydCB0eXBlIERlcDxUS2V5PiA9IFNldDxBbnlFbnRyeT4gJiB7XG4gIHN1YnNjcmliZTogT3B0aW1pc3RpY1dyYXBPcHRpb25zPFtUS2V5XT5bXCJzdWJzY3JpYmVcIl07XG59ICYgVW5zdWJzY3JpYmFibGU7XG5cbmV4cG9ydCBmdW5jdGlvbiBkZXA8VEtleT4ob3B0aW9ucz86IHtcbiAgc3Vic2NyaWJlOiBEZXA8VEtleT5bXCJzdWJzY3JpYmVcIl07XG59KSB7XG4gIGNvbnN0IGRlcHNCeUtleSA9IG5ldyBNYXA8VEtleSwgRGVwPFRLZXk+PigpO1xuICBjb25zdCBzdWJzY3JpYmUgPSBvcHRpb25zICYmIG9wdGlvbnMuc3Vic2NyaWJlO1xuXG4gIGZ1bmN0aW9uIGRlcGVuZChrZXk6IFRLZXkpIHtcbiAgICBjb25zdCBwYXJlbnQgPSBwYXJlbnRFbnRyeVNsb3QuZ2V0VmFsdWUoKTtcbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBsZXQgZGVwID0gZGVwc0J5S2V5LmdldChrZXkpO1xuICAgICAgaWYgKCFkZXApIHtcbiAgICAgICAgZGVwc0J5S2V5LnNldChrZXksIGRlcCA9IG5ldyBTZXQgYXMgRGVwPFRLZXk+KTtcbiAgICAgIH1cbiAgICAgIHBhcmVudC5kZXBlbmRPbihkZXApO1xuICAgICAgaWYgKHR5cGVvZiBzdWJzY3JpYmUgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICBtYXliZVVuc3Vic2NyaWJlKGRlcCk7XG4gICAgICAgIGRlcC51bnN1YnNjcmliZSA9IHN1YnNjcmliZShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGRlcGVuZC5kaXJ0eSA9IGZ1bmN0aW9uIGRpcnR5KGtleTogVEtleSkge1xuICAgIGNvbnN0IGRlcCA9IGRlcHNCeUtleS5nZXQoa2V5KTtcbiAgICBpZiAoZGVwKSB7XG4gICAgICBkZXAuZm9yRWFjaChlbnRyeSA9PiBlbnRyeS5zZXREaXJ0eSgpKTtcbiAgICAgIGRlcHNCeUtleS5kZWxldGUoa2V5KTtcbiAgICAgIG1heWJlVW5zdWJzY3JpYmUoZGVwKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGRlcGVuZCBhcyBPcHRpbWlzdGljRGVwZW5kZW5jeUZ1bmN0aW9uPFRLZXk+O1xufVxuIiwgImltcG9ydCB7IFRyaWUgfSBmcm9tIFwiQHdyeS90cmllXCI7XG5cbmltcG9ydCB7IENhY2hlIH0gZnJvbSBcIi4vY2FjaGVcIjtcbmltcG9ydCB7IEVudHJ5LCBBbnlFbnRyeSB9IGZyb20gXCIuL2VudHJ5XCI7XG5pbXBvcnQgeyBwYXJlbnRFbnRyeVNsb3QgfSBmcm9tIFwiLi9jb250ZXh0XCI7XG5cbi8vIFRoZXNlIGhlbHBlciBmdW5jdGlvbnMgYXJlIGltcG9ydGFudCBmb3IgbWFraW5nIG9wdGltaXNtIHdvcmsgd2l0aFxuLy8gYXN5bmNocm9ub3VzIGNvZGUuIEluIG9yZGVyIHRvIHJlZ2lzdGVyIHBhcmVudC1jaGlsZCBkZXBlbmRlbmNpZXMsXG4vLyBvcHRpbWlzbSBuZWVkcyB0byBrbm93IGFib3V0IGFueSBjdXJyZW50bHkgYWN0aXZlIHBhcmVudCBjb21wdXRhdGlvbnMuXG4vLyBJbiBvcmRpbmFyeSBzeW5jaHJvbm91cyBjb2RlLCB0aGUgcGFyZW50IGNvbnRleHQgaXMgaW1wbGljaXQgaW4gdGhlXG4vLyBleGVjdXRpb24gc3RhY2ssIGJ1dCBhc3luY2hyb25vdXMgY29kZSByZXF1aXJlcyBzb21lIGV4dHJhIGd1aWRhbmNlIGluXG4vLyBvcmRlciB0byBwcm9wYWdhdGUgY29udGV4dCBmcm9tIG9uZSBhc3luYyB0YXNrIHNlZ21lbnQgdG8gdGhlIG5leHQuXG5leHBvcnQge1xuICBiaW5kQ29udGV4dCxcbiAgbm9Db250ZXh0LFxuICBzZXRUaW1lb3V0LFxuICBhc3luY0Zyb21HZW4sXG59IGZyb20gXCIuL2NvbnRleHRcIjtcblxuLy8gQSBsaWdodGVyLXdlaWdodCBkZXBlbmRlbmN5LCBzaW1pbGFyIHRvIE9wdGltaXN0aWNXcmFwcGVyRnVuY3Rpb24sIGV4Y2VwdFxuLy8gd2l0aCBvbmx5IG9uZSBhcmd1bWVudCwgbm8gbWFrZUNhY2hlS2V5LCBubyB3cmFwcGVkIGZ1bmN0aW9uIHRvIHJlY29tcHV0ZSxcbi8vIGFuZCBubyByZXN1bHQgdmFsdWUuIFVzZWZ1bCBmb3IgcmVwcmVzZW50aW5nIGRlcGVuZGVuY3kgbGVhdmVzIGluIHRoZSBncmFwaFxuLy8gb2YgY29tcHV0YXRpb24uIFN1YnNjcmlwdGlvbnMgYXJlIHN1cHBvcnRlZC5cbmV4cG9ydCB7IGRlcCwgT3B0aW1pc3RpY0RlcGVuZGVuY3lGdW5jdGlvbiB9IGZyb20gXCIuL2RlcFwiO1xuXG4vLyBTaW5jZSB0aGUgQ2FjaGUgdXNlcyBhIE1hcCBpbnRlcm5hbGx5LCBhbnkgdmFsdWUgb3Igb2JqZWN0IHJlZmVyZW5jZSBjYW5cbi8vIGJlIHNhZmVseSB1c2VkIGFzIGEga2V5LCB0aG91Z2ggY29tbW9uIHR5cGVzIGluY2x1ZGUgb2JqZWN0IGFuZCBzdHJpbmcuXG5leHBvcnQgdHlwZSBUQ2FjaGVLZXkgPSBhbnk7XG5cbi8vIFRoZSBkZWZhdWx0TWFrZUNhY2hlS2V5IGZ1bmN0aW9uIGlzIHJlbWFya2FibHkgcG93ZXJmdWwsIGJlY2F1c2UgaXQgZ2l2ZXNcbi8vIGEgdW5pcXVlIG9iamVjdCBmb3IgYW55IHNoYWxsb3ctaWRlbnRpY2FsIGxpc3Qgb2YgYXJndW1lbnRzLiBJZiB5b3UgbmVlZFxuLy8gdG8gaW1wbGVtZW50IGEgY3VzdG9tIG1ha2VDYWNoZUtleSBmdW5jdGlvbiwgeW91IG1heSBmaW5kIGl0IGhlbHBmdWwgdG9cbi8vIGRlbGVnYXRlIHRoZSBmaW5hbCB3b3JrIHRvIGRlZmF1bHRNYWtlQ2FjaGVLZXksIHdoaWNoIGlzIHdoeSB3ZSBleHBvcnQgaXRcbi8vIGhlcmUuIEhvd2V2ZXIsIHlvdSBtYXkgd2FudCB0byBhdm9pZCBkZWZhdWx0TWFrZUNhY2hlS2V5IGlmIHlvdXIgcnVudGltZVxuLy8gZG9lcyBub3Qgc3VwcG9ydCBXZWFrTWFwLCBvciB5b3UgaGF2ZSB0aGUgYWJpbGl0eSB0byByZXR1cm4gYSBzdHJpbmcga2V5LlxuLy8gSW4gdGhvc2UgY2FzZXMsIGp1c3Qgd3JpdGUgeW91ciBvd24gY3VzdG9tIG1ha2VDYWNoZUtleSBmdW5jdGlvbnMuXG5jb25zdCBrZXlUcmllID0gbmV3IFRyaWU8VENhY2hlS2V5Pih0eXBlb2YgV2Vha01hcCA9PT0gXCJmdW5jdGlvblwiKTtcbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0TWFrZUNhY2hlS2V5KC4uLmFyZ3M6IGFueVtdKSB7XG4gIHJldHVybiBrZXlUcmllLmxvb2t1cEFycmF5KGFyZ3MpO1xufVxuXG4vLyBJZiB5b3UncmUgcGFyYW5vaWQgYWJvdXQgbWVtb3J5IGxlYWtzLCBvciB5b3Ugd2FudCB0byBhdm9pZCB1c2luZyBXZWFrTWFwXG4vLyB1bmRlciB0aGUgaG9vZCwgYnV0IHlvdSBzdGlsbCBuZWVkIHRoZSBiZWhhdmlvciBvZiBkZWZhdWx0TWFrZUNhY2hlS2V5LFxuLy8gaW1wb3J0IHRoaXMgY29uc3RydWN0b3IgdG8gY3JlYXRlIHlvdXIgb3duIHRyaWVzLlxuZXhwb3J0IHsgVHJpZSBhcyBLZXlUcmllIH1cblxuZXhwb3J0IHR5cGUgT3B0aW1pc3RpY1dyYXBwZXJGdW5jdGlvbjxcbiAgVEFyZ3MgZXh0ZW5kcyBhbnlbXSxcbiAgVFJlc3VsdCxcbiAgVEtleUFyZ3MgZXh0ZW5kcyBhbnlbXSA9IFRBcmdzLFxuPiA9ICgoLi4uYXJnczogVEFyZ3MpID0+IFRSZXN1bHQpICYge1xuICAvLyBUaGUgLmRpcnR5KC4uLikgbWV0aG9kIG9mIGFuIG9wdGltaXN0aWMgZnVuY3Rpb24gdGFrZXMgZXhhY3RseSB0aGVcbiAgLy8gc2FtZSBwYXJhbWV0ZXIgdHlwZXMgYXMgdGhlIG9yaWdpbmFsIGZ1bmN0aW9uLlxuICBkaXJ0eTogKC4uLmFyZ3M6IFRLZXlBcmdzKSA9PiB2b2lkO1xuICAvLyBFeGFtaW5lIHRoZSBjdXJyZW50IHZhbHVlIHdpdGhvdXQgcmVjb21wdXRpbmcgaXQuXG4gIHBlZWs6ICguLi5hcmdzOiBUS2V5QXJncykgPT4gVFJlc3VsdCB8IHVuZGVmaW5lZDtcbiAgLy8gUmVtb3ZlIHRoZSBlbnRyeSBmcm9tIHRoZSBjYWNoZSwgZGlydHlpbmcgYW55IHBhcmVudCBlbnRyaWVzLlxuICBmb3JnZXQ6ICguLi5hcmdzOiBUS2V5QXJncykgPT4gYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIE9wdGltaXN0aWNXcmFwT3B0aW9uczxcbiAgVEFyZ3MgZXh0ZW5kcyBhbnlbXSxcbiAgVEtleUFyZ3MgZXh0ZW5kcyBhbnlbXSA9IFRBcmdzLFxuPiA9IHtcbiAgLy8gVGhlIG1heGltdW0gbnVtYmVyIG9mIGNhY2hlIGVudHJpZXMgdGhhdCBzaG91bGQgYmUgcmV0YWluZWQgYmVmb3JlIHRoZVxuICAvLyBjYWNoZSBiZWdpbnMgZXZpY3RpbmcgdGhlIG9sZGVzdCBvbmVzLlxuICBtYXg/OiBudW1iZXI7XG4gIC8vIFRyYW5zZm9ybSB0aGUgcmF3IGFyZ3VtZW50cyB0byBzb21lIG90aGVyIHR5cGUgb2YgYXJyYXksIHdoaWNoIHdpbGwgdGhlblxuICAvLyBiZSBwYXNzZWQgdG8gbWFrZUNhY2hlS2V5LlxuICBrZXlBcmdzPzogKC4uLmFyZ3M6IFRBcmdzKSA9PiBUS2V5QXJncztcbiAgLy8gVGhlIG1ha2VDYWNoZUtleSBmdW5jdGlvbiB0YWtlcyB0aGUgc2FtZSBhcmd1bWVudHMgdGhhdCB3ZXJlIHBhc3NlZCB0b1xuICAvLyB0aGUgd3JhcHBlciBmdW5jdGlvbiBhbmQgcmV0dXJucyBhIHNpbmdsZSB2YWx1ZSB0aGF0IGNhbiBiZSB1c2VkIGFzIGEga2V5XG4gIC8vIGluIGEgTWFwIHRvIGlkZW50aWZ5IHRoZSBjYWNoZWQgcmVzdWx0LlxuICBtYWtlQ2FjaGVLZXk/OiAoLi4uYXJnczogVEtleUFyZ3MpID0+IFRDYWNoZUtleTtcbiAgLy8gSWYgcHJvdmlkZWQsIHRoZSBzdWJzY3JpYmUgZnVuY3Rpb24gc2hvdWxkIGVpdGhlciByZXR1cm4gYW4gdW5zdWJzY3JpYmVcbiAgLy8gZnVuY3Rpb24gb3IgcmV0dXJuIG5vdGhpbmcuXG4gIHN1YnNjcmliZT86ICguLi5hcmdzOiBUQXJncykgPT4gdm9pZCB8ICgoKSA9PiBhbnkpO1xufTtcblxuY29uc3QgY2FjaGVzID0gbmV3IFNldDxDYWNoZTxUQ2FjaGVLZXksIEFueUVudHJ5Pj4oKTtcblxuZXhwb3J0IGZ1bmN0aW9uIHdyYXA8XG4gIFRBcmdzIGV4dGVuZHMgYW55W10sXG4gIFRSZXN1bHQsXG4gIFRLZXlBcmdzIGV4dGVuZHMgYW55W10gPSBUQXJncyxcbj4oXG4gIG9yaWdpbmFsRnVuY3Rpb246ICguLi5hcmdzOiBUQXJncykgPT4gVFJlc3VsdCxcbiAgb3B0aW9uczogT3B0aW1pc3RpY1dyYXBPcHRpb25zPFRBcmdzLCBUS2V5QXJncz4gPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuKSB7XG4gIGNvbnN0IGNhY2hlID0gbmV3IENhY2hlPFRDYWNoZUtleSwgRW50cnk8VEFyZ3MsIFRSZXN1bHQ+PihcbiAgICBvcHRpb25zLm1heCB8fCBNYXRoLnBvdygyLCAxNiksXG4gICAgZW50cnkgPT4gZW50cnkuZGlzcG9zZSgpLFxuICApO1xuXG4gIGNvbnN0IGtleUFyZ3MgPSBvcHRpb25zLmtleUFyZ3MgfHwgKCguLi5hcmdzOiBUQXJncyk6IFRLZXlBcmdzID0+IGFyZ3MgYXMgYW55KTtcbiAgY29uc3QgbWFrZUNhY2hlS2V5ID0gb3B0aW9ucy5tYWtlQ2FjaGVLZXkgfHwgZGVmYXVsdE1ha2VDYWNoZUtleTtcblxuICBmdW5jdGlvbiBvcHRpbWlzdGljKCk6IFRSZXN1bHQge1xuICAgIGNvbnN0IGtleSA9IG1ha2VDYWNoZUtleS5hcHBseShudWxsLCBrZXlBcmdzLmFwcGx5KG51bGwsIGFyZ3VtZW50cyBhcyBhbnkpKTtcbiAgICBpZiAoa2V5ID09PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBvcmlnaW5hbEZ1bmN0aW9uLmFwcGx5KG51bGwsIGFyZ3VtZW50cyBhcyBhbnkpO1xuICAgIH1cblxuICAgIGxldCBlbnRyeSA9IGNhY2hlLmdldChrZXkpITtcbiAgICBpZiAoIWVudHJ5KSB7XG4gICAgICBjYWNoZS5zZXQoa2V5LCBlbnRyeSA9IG5ldyBFbnRyeShvcmlnaW5hbEZ1bmN0aW9uKSk7XG4gICAgICBlbnRyeS5zdWJzY3JpYmUgPSBvcHRpb25zLnN1YnNjcmliZTtcbiAgICB9XG5cbiAgICBjb25zdCB2YWx1ZSA9IGVudHJ5LnJlY29tcHV0ZShcbiAgICAgIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cykgYXMgVEFyZ3MsXG4gICAgKTtcblxuICAgIC8vIE1vdmUgdGhpcyBlbnRyeSB0byB0aGUgZnJvbnQgb2YgdGhlIGxlYXN0LXJlY2VudGx5IHVzZWQgcXVldWUsXG4gICAgLy8gc2luY2Ugd2UganVzdCBmaW5pc2hlZCBjb21wdXRpbmcgaXRzIHZhbHVlLlxuICAgIGNhY2hlLnNldChrZXksIGVudHJ5KTtcblxuICAgIGNhY2hlcy5hZGQoY2FjaGUpO1xuXG4gICAgLy8gQ2xlYW4gdXAgYW55IGV4Y2VzcyBlbnRyaWVzIGluIHRoZSBjYWNoZSwgYnV0IG9ubHkgaWYgdGhlcmUgaXMgbm9cbiAgICAvLyBhY3RpdmUgcGFyZW50IGVudHJ5LCBtZWFuaW5nIHdlJ3JlIG5vdCBpbiB0aGUgbWlkZGxlIG9mIGEgbGFyZ2VyXG4gICAgLy8gY29tcHV0YXRpb24gdGhhdCBtaWdodCBiZSBmbHVtbW94ZWQgYnkgdGhlIGNsZWFuaW5nLlxuICAgIGlmICghIHBhcmVudEVudHJ5U2xvdC5oYXNWYWx1ZSgpKSB7XG4gICAgICBjYWNoZXMuZm9yRWFjaChjYWNoZSA9PiBjYWNoZS5jbGVhbigpKTtcbiAgICAgIGNhY2hlcy5jbGVhcigpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxvb2t1cCgpOiBFbnRyeTxUQXJncywgVFJlc3VsdD4gfCB1bmRlZmluZWQge1xuICAgIGNvbnN0IGtleSA9IG1ha2VDYWNoZUtleS5hcHBseShudWxsLCBhcmd1bWVudHMgYXMgYW55KTtcbiAgICBpZiAoa2V5ICE9PSB2b2lkIDApIHtcbiAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTtcbiAgICB9XG4gIH1cblxuICBvcHRpbWlzdGljLmRpcnR5ID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGVudHJ5ID0gbG9va3VwLmFwcGx5KG51bGwsIGFyZ3VtZW50cyBhcyBhbnkpO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgZW50cnkuc2V0RGlydHkoKTtcbiAgICB9XG4gIH07XG5cbiAgb3B0aW1pc3RpYy5wZWVrID0gZnVuY3Rpb24gKCkge1xuICAgIGNvbnN0IGVudHJ5ID0gbG9va3VwLmFwcGx5KG51bGwsIGFyZ3VtZW50cyBhcyBhbnkpO1xuICAgIGlmIChlbnRyeSkge1xuICAgICAgcmV0dXJuIGVudHJ5LnBlZWsoKTtcbiAgICB9XG4gIH07XG5cbiAgb3B0aW1pc3RpYy5mb3JnZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3Qga2V5ID0gbWFrZUNhY2hlS2V5LmFwcGx5KG51bGwsIGFyZ3VtZW50cyBhcyBhbnkpO1xuICAgIHJldHVybiBrZXkgIT09IHZvaWQgMCAmJiBjYWNoZS5kZWxldGUoa2V5KTtcbiAgfTtcblxuICByZXR1cm4gb3B0aW1pc3RpYyBhcyBPcHRpbWlzdGljV3JhcHBlckZ1bmN0aW9uPFRBcmdzLCBUUmVzdWx0LCBUS2V5QXJncz47XG59XG4iLCAiaW1wb3J0IHsgRG9jdW1lbnROb2RlIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnb3B0aW1pc20nO1xuXG5pbXBvcnQge1xuICBTdG9yZU9iamVjdCxcbiAgUmVmZXJlbmNlLFxuICBnZXRGcmFnbWVudFF1ZXJ5RG9jdW1lbnQsXG59IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5pbXBvcnQgeyBEYXRhUHJveHkgfSBmcm9tICcuL3R5cGVzL0RhdGFQcm94eSc7XG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gJy4vdHlwZXMvQ2FjaGUnO1xuXG5leHBvcnQgdHlwZSBUcmFuc2FjdGlvbjxUPiA9IChjOiBBcG9sbG9DYWNoZTxUPikgPT4gdm9pZDtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFwb2xsb0NhY2hlPFRTZXJpYWxpemVkPiBpbXBsZW1lbnRzIERhdGFQcm94eSB7XG4gIC8vIHJlcXVpcmVkIHRvIGltcGxlbWVudFxuICAvLyBjb3JlIEFQSVxuICBwdWJsaWMgYWJzdHJhY3QgcmVhZDxULCBUVmFyaWFibGVzID0gYW55PihcbiAgICBxdWVyeTogQ2FjaGUuUmVhZE9wdGlvbnM8VFZhcmlhYmxlcywgVD4sXG4gICk6IFQgfCBudWxsO1xuICBwdWJsaWMgYWJzdHJhY3Qgd3JpdGU8VFJlc3VsdCA9IGFueSwgVFZhcmlhYmxlcyA9IGFueT4oXG4gICAgd3JpdGU6IENhY2hlLldyaXRlT3B0aW9uczxUUmVzdWx0LCBUVmFyaWFibGVzPixcbiAgKTogUmVmZXJlbmNlIHwgdW5kZWZpbmVkO1xuICBwdWJsaWMgYWJzdHJhY3QgZGlmZjxUPihxdWVyeTogQ2FjaGUuRGlmZk9wdGlvbnMpOiBDYWNoZS5EaWZmUmVzdWx0PFQ+O1xuICBwdWJsaWMgYWJzdHJhY3Qgd2F0Y2god2F0Y2g6IENhY2hlLldhdGNoT3B0aW9ucyk6ICgpID0+IHZvaWQ7XG4gIHB1YmxpYyBhYnN0cmFjdCByZXNldCgpOiBQcm9taXNlPHZvaWQ+O1xuXG4gIC8vIFJlbW92ZSB3aG9sZSBvYmplY3RzIGZyb20gdGhlIGNhY2hlIGJ5IHBhc3NpbmcganVzdCBvcHRpb25zLmlkLCBvclxuICAvLyBzcGVjaWZpYyBmaWVsZHMgYnkgcGFzc2luZyBvcHRpb25zLmZpZWxkIGFuZC9vciBvcHRpb25zLmFyZ3MuIElmIG5vXG4gIC8vIG9wdGlvbnMuYXJncyBhcmUgcHJvdmlkZWQsIGFsbCBmaWVsZHMgbWF0Y2hpbmcgb3B0aW9ucy5maWVsZCAoZXZlblxuICAvLyB0aG9zZSB3aXRoIGFyZ3VtZW50cykgd2lsbCBiZSByZW1vdmVkLiBSZXR1cm5zIHRydWUgaWZmIGFueSBkYXRhIHdhc1xuICAvLyByZW1vdmVkIGZyb20gdGhlIGNhY2hlLlxuICBwdWJsaWMgYWJzdHJhY3QgZXZpY3Qob3B0aW9uczogQ2FjaGUuRXZpY3RPcHRpb25zKTogYm9vbGVhbjtcblxuICAvLyBpbnRpYWxpemVyIC8gb2ZmbGluZSAvIHNzciBBUElcbiAgLyoqXG4gICAqIFJlcGxhY2VzIGV4aXN0aW5nIHN0YXRlIGluIHRoZSBjYWNoZSAoaWYgYW55KSB3aXRoIHRoZSB2YWx1ZXMgZXhwcmVzc2VkIGJ5XG4gICAqIGBzZXJpYWxpemVkU3RhdGVgLlxuICAgKlxuICAgKiBDYWxsZWQgd2hlbiBoeWRyYXRpbmcgYSBjYWNoZSAoc2VydmVyIHNpZGUgcmVuZGVyaW5nLCBvciBvZmZsaW5lIHN0b3JhZ2UpLFxuICAgKiBhbmQgYWxzbyAocG90ZW50aWFsbHkpIGR1cmluZyBob3QgcmVsb2Fkcy5cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCByZXN0b3JlKFxuICAgIHNlcmlhbGl6ZWRTdGF0ZTogVFNlcmlhbGl6ZWQsXG4gICk6IEFwb2xsb0NhY2hlPFRTZXJpYWxpemVkPjtcblxuICAvKipcbiAgICogRXhwb3NlcyB0aGUgY2FjaGUncyBjb21wbGV0ZSBzdGF0ZSwgaW4gYSBzZXJpYWxpemFibGUgZm9ybWF0IGZvciBsYXRlciByZXN0b3JhdGlvbi5cbiAgICovXG4gIHB1YmxpYyBhYnN0cmFjdCBleHRyYWN0KG9wdGltaXN0aWM/OiBib29sZWFuKTogVFNlcmlhbGl6ZWQ7XG5cbiAgLy8gT3B0aW1pc3RpYyBBUElcblxuICBwdWJsaWMgYWJzdHJhY3QgcmVtb3ZlT3B0aW1pc3RpYyhpZDogc3RyaW5nKTogdm9pZDtcblxuICAvLyBUcmFuc2FjdGlvbmFsIEFQSVxuXG4gIHB1YmxpYyBhYnN0cmFjdCBwZXJmb3JtVHJhbnNhY3Rpb24oXG4gICAgdHJhbnNhY3Rpb246IFRyYW5zYWN0aW9uPFRTZXJpYWxpemVkPixcbiAgICAvLyBBbHRob3VnaCBzdWJjbGFzc2VzIG1heSBpbXBsZW1lbnQgcmVjb3JkT3B0aW1pc3RpY1RyYW5zYWN0aW9uXG4gICAgLy8gaG93ZXZlciB0aGV5IGNob29zZSwgdGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gc2ltcGx5IGNhbGxzXG4gICAgLy8gcGVyZm9ybVRyYW5zYWN0aW9uIHdpdGggYSBzdHJpbmcgYXMgdGhlIHNlY29uZCBhcmd1bWVudCwgYWxsb3dpbmdcbiAgICAvLyBwZXJmb3JtVHJhbnNhY3Rpb24gdG8gaGFuZGxlIGJvdGggb3B0aW1pc3RpYyBhbmQgbm9uLW9wdGltaXN0aWNcbiAgICAvLyAoYnJvYWRjYXN0LWJhdGNoaW5nKSB0cmFuc2FjdGlvbnMuIFBhc3NpbmcgbnVsbCBmb3Igb3B0aW1pc3RpY0lkIGlzXG4gICAgLy8gYWxzbyBhbGxvd2VkLCBhbmQgaW5kaWNhdGVzIHRoYXQgcGVyZm9ybVRyYW5zYWN0aW9uIHNob3VsZCBhcHBseVxuICAgIC8vIHRoZSB0cmFuc2FjdGlvbiBub24tb3B0aW1pc3RpY2FsbHkgKGlnbm9yaW5nIG9wdGltaXN0aWMgZGF0YSkuXG4gICAgb3B0aW1pc3RpY0lkPzogc3RyaW5nIHwgbnVsbCxcbiAgKTogdm9pZDtcblxuICBwdWJsaWMgcmVjb3JkT3B0aW1pc3RpY1RyYW5zYWN0aW9uKFxuICAgIHRyYW5zYWN0aW9uOiBUcmFuc2FjdGlvbjxUU2VyaWFsaXplZD4sXG4gICAgb3B0aW1pc3RpY0lkOiBzdHJpbmcsXG4gICkge1xuICAgIHRoaXMucGVyZm9ybVRyYW5zYWN0aW9uKHRyYW5zYWN0aW9uLCBvcHRpbWlzdGljSWQpO1xuICB9XG5cbiAgLy8gT3B0aW9uYWwgQVBJXG5cbiAgcHVibGljIHRyYW5zZm9ybURvY3VtZW50KGRvY3VtZW50OiBEb2N1bWVudE5vZGUpOiBEb2N1bWVudE5vZGUge1xuICAgIHJldHVybiBkb2N1bWVudDtcbiAgfVxuXG4gIHB1YmxpYyBpZGVudGlmeShvYmplY3Q6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBwdWJsaWMgZ2MoKTogc3RyaW5nW10ge1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIHB1YmxpYyBtb2RpZnkob3B0aW9uczogQ2FjaGUuTW9kaWZ5T3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8vIEV4cGVyaW1lbnRhbCBBUElcblxuICBwdWJsaWMgdHJhbnNmb3JtRm9yTGluayhkb2N1bWVudDogRG9jdW1lbnROb2RlKTogRG9jdW1lbnROb2RlIHtcbiAgICByZXR1cm4gZG9jdW1lbnQ7XG4gIH1cblxuICAvLyBEYXRhUHJveHkgQVBJXG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gb3B0aW9uc1xuICAgKiBAcGFyYW0gb3B0aW1pc3RpY1xuICAgKi9cbiAgcHVibGljIHJlYWRRdWVyeTxRdWVyeVR5cGUsIFRWYXJpYWJsZXMgPSBhbnk+KFxuICAgIG9wdGlvbnM6IENhY2hlLlJlYWRRdWVyeU9wdGlvbnM8UXVlcnlUeXBlLCBUVmFyaWFibGVzPixcbiAgICBvcHRpbWlzdGljID0gISFvcHRpb25zLm9wdGltaXN0aWMsXG4gICk6IFF1ZXJ5VHlwZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnJlYWQoe1xuICAgICAgcm9vdElkOiBvcHRpb25zLmlkIHx8ICdST09UX1FVRVJZJyxcbiAgICAgIHF1ZXJ5OiBvcHRpb25zLnF1ZXJ5LFxuICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgIHJldHVyblBhcnRpYWxEYXRhOiBvcHRpb25zLnJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgb3B0aW1pc3RpYyxcbiAgICB9KTtcbiAgfVxuXG4gIC8vIE1ha2Ugc3VyZSB3ZSBjb21wdXRlIHRoZSBzYW1lICg9PT0pIGZyYWdtZW50IHF1ZXJ5IGRvY3VtZW50IGV2ZXJ5XG4gIC8vIHRpbWUgd2UgcmVjZWl2ZSB0aGUgc2FtZSBmcmFnbWVudCBpbiByZWFkRnJhZ21lbnQuXG4gIHByaXZhdGUgZ2V0RnJhZ21lbnREb2MgPSB3cmFwKGdldEZyYWdtZW50UXVlcnlEb2N1bWVudCk7XG5cbiAgcHVibGljIHJlYWRGcmFnbWVudDxGcmFnbWVudFR5cGUsIFRWYXJpYWJsZXMgPSBhbnk+KFxuICAgIG9wdGlvbnM6IENhY2hlLlJlYWRGcmFnbWVudE9wdGlvbnM8RnJhZ21lbnRUeXBlLCBUVmFyaWFibGVzPixcbiAgICBvcHRpbWlzdGljID0gISFvcHRpb25zLm9wdGltaXN0aWMsXG4gICk6IEZyYWdtZW50VHlwZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLnJlYWQoe1xuICAgICAgcXVlcnk6IHRoaXMuZ2V0RnJhZ21lbnREb2Mob3B0aW9ucy5mcmFnbWVudCwgb3B0aW9ucy5mcmFnbWVudE5hbWUpLFxuICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgIHJvb3RJZDogb3B0aW9ucy5pZCxcbiAgICAgIHJldHVyblBhcnRpYWxEYXRhOiBvcHRpb25zLnJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgb3B0aW1pc3RpYyxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB3cml0ZVF1ZXJ5PFREYXRhID0gYW55LCBUVmFyaWFibGVzID0gYW55PihcbiAgICBvcHRpb25zOiBDYWNoZS5Xcml0ZVF1ZXJ5T3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz4sXG4gICk6IFJlZmVyZW5jZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMud3JpdGUoe1xuICAgICAgZGF0YUlkOiBvcHRpb25zLmlkIHx8ICdST09UX1FVRVJZJyxcbiAgICAgIHJlc3VsdDogb3B0aW9ucy5kYXRhLFxuICAgICAgcXVlcnk6IG9wdGlvbnMucXVlcnksXG4gICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgYnJvYWRjYXN0OiBvcHRpb25zLmJyb2FkY2FzdCxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB3cml0ZUZyYWdtZW50PFREYXRhID0gYW55LCBUVmFyaWFibGVzID0gYW55PihcbiAgICBvcHRpb25zOiBDYWNoZS5Xcml0ZUZyYWdtZW50T3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz4sXG4gICk6IFJlZmVyZW5jZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMud3JpdGUoe1xuICAgICAgZGF0YUlkOiBvcHRpb25zLmlkLFxuICAgICAgcmVzdWx0OiBvcHRpb25zLmRhdGEsXG4gICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgcXVlcnk6IHRoaXMuZ2V0RnJhZ21lbnREb2Mob3B0aW9ucy5mcmFnbWVudCwgb3B0aW9ucy5mcmFnbWVudE5hbWUpLFxuICAgICAgYnJvYWRjYXN0OiBvcHRpb25zLmJyb2FkY2FzdCxcbiAgICB9KTtcbiAgfVxufVxuIiwgImltcG9ydCB7IERhdGFQcm94eSB9IGZyb20gJy4vRGF0YVByb3h5JztcbmltcG9ydCB7IE1vZGlmaWVyLCBNb2RpZmllcnMgfSBmcm9tICcuL2NvbW1vbic7XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ2FjaGUge1xuICBleHBvcnQgdHlwZSBXYXRjaENhbGxiYWNrID0gKGRpZmY6IENhY2hlLkRpZmZSZXN1bHQ8YW55PikgPT4gdm9pZDtcblxuICBleHBvcnQgaW50ZXJmYWNlIFJlYWRPcHRpb25zPFRWYXJpYWJsZXMgPSBhbnksIFREYXRhID0gYW55PlxuICAgIGV4dGVuZHMgRGF0YVByb3h5LlF1ZXJ5PFRWYXJpYWJsZXMsIFREYXRhPiB7XG4gICAgcm9vdElkPzogc3RyaW5nO1xuICAgIHByZXZpb3VzUmVzdWx0PzogYW55O1xuICAgIG9wdGltaXN0aWM6IGJvb2xlYW47XG4gICAgcmV0dXJuUGFydGlhbERhdGE/OiBib29sZWFuO1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBXcml0ZU9wdGlvbnM8VFJlc3VsdCA9IGFueSwgVFZhcmlhYmxlcyA9IGFueT5cbiAgICBleHRlbmRzIERhdGFQcm94eS5RdWVyeTxUVmFyaWFibGVzLCBUUmVzdWx0PiB7XG4gICAgZGF0YUlkPzogc3RyaW5nO1xuICAgIHJlc3VsdDogVFJlc3VsdDtcbiAgICBicm9hZGNhc3Q/OiBib29sZWFuO1xuICB9XG5cbiAgZXhwb3J0IGludGVyZmFjZSBEaWZmT3B0aW9ucyBleHRlbmRzIFJlYWRPcHRpb25zIHtcbiAgICAvLyBUaGUgRGlmZk9wdGlvbnMgaW50ZXJmYWNlIGlzIGN1cnJlbnRseSBqdXN0IGFuIGFsaWFzIGZvclxuICAgIC8vIFJlYWRPcHRpb25zLCB0aG91Z2ggRGlmZk9wdGlvbnMgdXNlZCB0byBiZSByZXNwb25zaWJsZSBmb3JcbiAgICAvLyBkZWNsYXJpbmcgdGhlIHJldHVyblBhcnRpYWxEYXRhIG9wdGlvbi5cbiAgfVxuXG4gIGV4cG9ydCBpbnRlcmZhY2UgV2F0Y2hPcHRpb25zIGV4dGVuZHMgUmVhZE9wdGlvbnMge1xuICAgIGltbWVkaWF0ZT86IGJvb2xlYW47XG4gICAgY2FsbGJhY2s6IFdhdGNoQ2FsbGJhY2s7XG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIEV2aWN0T3B0aW9ucyB7XG4gICAgaWQ/OiBzdHJpbmc7XG4gICAgZmllbGROYW1lPzogc3RyaW5nO1xuICAgIGFyZ3M/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIGJyb2FkY2FzdD86IGJvb2xlYW47XG4gIH1cblxuICBleHBvcnQgaW50ZXJmYWNlIE1vZGlmeU9wdGlvbnMge1xuICAgIGlkPzogc3RyaW5nO1xuICAgIGZpZWxkczogTW9kaWZpZXJzIHwgTW9kaWZpZXI8YW55PjtcbiAgICBvcHRpbWlzdGljPzogYm9vbGVhbjtcbiAgICBicm9hZGNhc3Q/OiBib29sZWFuO1xuICB9XG5cbiAgZXhwb3J0IGltcG9ydCBEaWZmUmVzdWx0ID0gRGF0YVByb3h5LkRpZmZSZXN1bHQ7XG4gIGV4cG9ydCBpbXBvcnQgUmVhZFF1ZXJ5T3B0aW9ucyA9IERhdGFQcm94eS5SZWFkUXVlcnlPcHRpb25zO1xuICBleHBvcnQgaW1wb3J0IFJlYWRGcmFnbWVudE9wdGlvbnMgPSBEYXRhUHJveHkuUmVhZEZyYWdtZW50T3B0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBXcml0ZVF1ZXJ5T3B0aW9ucyA9IERhdGFQcm94eS5Xcml0ZVF1ZXJ5T3B0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBXcml0ZUZyYWdtZW50T3B0aW9ucyA9IERhdGFQcm94eS5Xcml0ZUZyYWdtZW50T3B0aW9ucztcbiAgZXhwb3J0IGltcG9ydCBGcmFnbWVudCA9IERhdGFQcm94eS5GcmFnbWVudDtcbn1cbiIsICJpbXBvcnQgeyBGaWVsZE5vZGUgfSBmcm9tICdncmFwaHFsJztcblxuaW1wb3J0IHtcbiAgUmVmZXJlbmNlLFxuICBTdG9yZU9iamVjdCxcbiAgU3RvcmVWYWx1ZSxcbiAgaXNSZWZlcmVuY2UsXG59IGZyb20gJy4uLy4uLy4uL3V0aWxpdGllcyc7XG5cbmltcG9ydCB7IFN0b3JhZ2VUeXBlIH0gZnJvbSAnLi4vLi4vaW5tZW1vcnkvcG9saWNpZXMnO1xuXG4vLyBUaGUgUmVhZG9ubHk8VD4gdHlwZSBvbmx5IHJlYWxseSB3b3JrcyBmb3Igb2JqZWN0IHR5cGVzLCBzaW5jZSBpdCBtYXJrc1xuLy8gYWxsIG9mIHRoZSBvYmplY3QncyBwcm9wZXJ0aWVzIGFzIHJlYWRvbmx5LCBidXQgdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlblxuLy8gYSBnZW5lcmljIHR5cGUgcGFyYW1ldGVyIGxpa2UgVEV4aXN0aW5nIG1pZ2h0IGJlIGEgc3RyaW5nIG9yIHNvbWUgb3RoZXJcbi8vIHByaW1pdGl2ZSB0eXBlLCBpbiB3aGljaCBjYXNlIHdlIG5lZWQgdG8gYXZvaWQgd3JhcHBpbmcgaXQgd2l0aCBSZWFkb25seS5cbi8vIFNhZmVSZWFkb25seTxzdHJpbmc+IGNvbGxhcHNlcyB0byBqdXN0IHN0cmluZywgd2hpY2ggbWFrZXMgc3RyaW5nXG4vLyBhc3NpZ25hYmxlIHRvIFNhZmVSZWFkb25seTxhbnk+LCB3aGVyZWFzIHN0cmluZyBpcyBub3QgYXNzaWduYWJsZSB0b1xuLy8gUmVhZG9ubHk8YW55Piwgc29tZXdoYXQgc3VycHJpc2luZ2x5LlxuZXhwb3J0IHR5cGUgU2FmZVJlYWRvbmx5PFQ+ID0gVCBleHRlbmRzIG9iamVjdCA/IFJlYWRvbmx5PFQ+IDogVDtcblxuZXhwb3J0IGNsYXNzIE1pc3NpbmdGaWVsZEVycm9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IG1lc3NhZ2U6IHN0cmluZyxcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGF0aDogKHN0cmluZyB8IG51bWJlcilbXSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgcXVlcnk6IGltcG9ydCgnZ3JhcGhxbCcpLkRvY3VtZW50Tm9kZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgY2xpZW50T25seTogYm9vbGVhbixcbiAgICBwdWJsaWMgcmVhZG9ubHkgdmFyaWFibGVzPzogUmVjb3JkPHN0cmluZywgYW55PixcbiAgKSB7fVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEZpZWxkU3BlY2lmaWVyIHtcbiAgdHlwZW5hbWU/OiBzdHJpbmc7XG4gIGZpZWxkTmFtZTogc3RyaW5nO1xuICBmaWVsZD86IEZpZWxkTm9kZTtcbiAgYXJncz86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHZhcmlhYmxlcz86IFJlY29yZDxzdHJpbmcsIGFueT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVhZEZpZWxkT3B0aW9ucyBleHRlbmRzIEZpZWxkU3BlY2lmaWVyIHtcbiAgZnJvbT86IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlYWRGaWVsZEZ1bmN0aW9uIHtcbiAgPFYgPSBTdG9yZVZhbHVlPihvcHRpb25zOiBSZWFkRmllbGRPcHRpb25zKTogU2FmZVJlYWRvbmx5PFY+IHwgdW5kZWZpbmVkO1xuICA8ViA9IFN0b3JlVmFsdWU+KFxuICAgIGZpZWxkTmFtZTogc3RyaW5nLFxuICAgIGZyb20/OiBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSxcbiAgKTogU2FmZVJlYWRvbmx5PFY+IHwgdW5kZWZpbmVkO1xufVxuXG5leHBvcnQgdHlwZSBUb1JlZmVyZW5jZUZ1bmN0aW9uID0gKFxuICBvYmpPcklkT3JSZWY6IFN0b3JlT2JqZWN0IHwgc3RyaW5nIHwgUmVmZXJlbmNlLFxuICBtZXJnZUludG9TdG9yZT86IGJvb2xlYW4sXG4pID0+IFJlZmVyZW5jZSB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IHR5cGUgQ2FuUmVhZEZ1bmN0aW9uID0gKHZhbHVlOiBTdG9yZVZhbHVlKSA9PiBib29sZWFuO1xuXG5leHBvcnQgdHlwZSBNb2RpZmllcjxUPiA9ICh2YWx1ZTogVCwgZGV0YWlsczoge1xuICBERUxFVEU6IGFueTtcbiAgSU5WQUxJREFURTogYW55O1xuICBmaWVsZE5hbWU6IHN0cmluZztcbiAgc3RvcmVGaWVsZE5hbWU6IHN0cmluZztcbiAgcmVhZEZpZWxkOiBSZWFkRmllbGRGdW5jdGlvbjtcbiAgY2FuUmVhZDogQ2FuUmVhZEZ1bmN0aW9uO1xuICBpc1JlZmVyZW5jZTogdHlwZW9mIGlzUmVmZXJlbmNlO1xuICB0b1JlZmVyZW5jZTogVG9SZWZlcmVuY2VGdW5jdGlvbjtcbiAgc3RvcmFnZTogU3RvcmFnZVR5cGU7XG59KSA9PiBUO1xuXG5leHBvcnQgdHlwZSBNb2RpZmllcnMgPSB7XG4gIFtmaWVsZE5hbWU6IHN0cmluZ106IE1vZGlmaWVyPGFueT47XG59O1xuIiwgImltcG9ydCB7IFNlbGVjdGlvblNldE5vZGUgfSBmcm9tICdncmFwaHFsJztcblxuaW1wb3J0IHsgTm9ybWFsaXplZENhY2hlIH0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQge1xuICBSZWZlcmVuY2UsXG4gIGlzUmVmZXJlbmNlLFxuICBTdG9yZVZhbHVlLFxuICBTdG9yZU9iamVjdCxcbiAgaXNGaWVsZCxcbiAgRGVlcE1lcmdlcixcbiAgcmVzdWx0S2V5TmFtZUZyb21GaWVsZCxcbiAgc2hvdWxkSW5jbHVkZSxcbn0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzJztcblxuZXhwb3J0IGNvbnN0IGhhc093biA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRUeXBlbmFtZUZyb21TdG9yZU9iamVjdChcbiAgc3RvcmU6IE5vcm1hbGl6ZWRDYWNoZSxcbiAgb2JqZWN0T3JSZWZlcmVuY2U6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlLFxuKTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKVxuICAgID8gc3RvcmUuZ2V0KG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmLCBcIl9fdHlwZW5hbWVcIikgYXMgc3RyaW5nXG4gICAgOiBvYmplY3RPclJlZmVyZW5jZSAmJiBvYmplY3RPclJlZmVyZW5jZS5fX3R5cGVuYW1lO1xufVxuXG5leHBvcnQgY29uc3QgVHlwZU9yRmllbGROYW1lUmVnRXhwID0gL15bX2Etel1bXzAtOWEtel0qL2k7XG5cbmV4cG9ydCBmdW5jdGlvbiBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lOiBzdHJpbmcpOiBzdHJpbmcge1xuICBjb25zdCBtYXRjaCA9IHN0b3JlRmllbGROYW1lLm1hdGNoKFR5cGVPckZpZWxkTmFtZVJlZ0V4cCk7XG4gIHJldHVybiBtYXRjaCA/IG1hdGNoWzBdIDogc3RvcmVGaWVsZE5hbWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0KFxuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGUsXG4gIHJlc3VsdDogUmVjb3JkPHN0cmluZywgYW55PixcbiAgdmFyaWFibGVzPzogUmVjb3JkPHN0cmluZywgYW55Pixcbik6IGJvb2xlYW4ge1xuICBpZiAocmVzdWx0ICYmIHR5cGVvZiByZXN1bHQgPT09IFwib2JqZWN0XCIpIHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShyZXN1bHQpXG4gICAgICA/IHJlc3VsdC5ldmVyeShpdGVtID0+IHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQoc2VsZWN0aW9uU2V0LCBpdGVtLCB2YXJpYWJsZXMpKVxuICAgICAgOiBzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5ldmVyeShmaWVsZCA9PiB7XG4gICAgICAgIGlmIChpc0ZpZWxkKGZpZWxkKSAmJiBzaG91bGRJbmNsdWRlKGZpZWxkLCB2YXJpYWJsZXMpKSB7XG4gICAgICAgICAgY29uc3Qga2V5ID0gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZCk7XG4gICAgICAgICAgcmV0dXJuIGhhc093bi5jYWxsKHJlc3VsdCwga2V5KSAmJlxuICAgICAgICAgICAgKCFmaWVsZC5zZWxlY3Rpb25TZXQgfHxcbiAgICAgICAgICAgICBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0KGZpZWxkLnNlbGVjdGlvblNldCwgcmVzdWx0W2tleV0sIHZhcmlhYmxlcykpO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZSBzZWxlY3Rpb24gaGFzIGJlZW4gc2tpcHBlZCB3aXRoIEBza2lwKHRydWUpIG9yXG4gICAgICAgIC8vIEBpbmNsdWRlKGZhbHNlKSwgaXQgc2hvdWxkIG5vdCBjb3VudCBhZ2FpbnN0IHRoZSBtYXRjaGluZy4gSWZcbiAgICAgICAgLy8gdGhlIHNlbGVjdGlvbiBpcyBub3QgYSBmaWVsZCwgaXQgbXVzdCBiZSBhIGZyYWdtZW50IChpbmxpbmUgb3JcbiAgICAgICAgLy8gbmFtZWQpLiBXZSB3aWxsIGRldGVybWluZSBpZiBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0IGZvciB0aGF0XG4gICAgICAgIC8vIGZyYWdtZW50IHdoZW4gd2UgZ2V0IHRvIGl0LCBzbyBmb3Igbm93IHdlIHJldHVybiB0cnVlLlxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0pO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KFxuICB2YWx1ZTogU3RvcmVWYWx1ZSxcbik6IHZhbHVlIGlzIFN0b3JlT2JqZWN0IHtcbiAgcmV0dXJuIHZhbHVlICE9PSBudWxsICYmXG4gICAgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiICYmXG4gICAgIWlzUmVmZXJlbmNlKHZhbHVlKSAmJlxuICAgICFBcnJheS5pc0FycmF5KHZhbHVlKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VQcm9jZXNzZWRGaWVsZHNNZXJnZXIoKSB7XG4gIHJldHVybiBuZXcgRGVlcE1lcmdlcjtcbn1cbiIsICJpbXBvcnQgeyBkZXAsIE9wdGltaXN0aWNEZXBlbmRlbmN5RnVuY3Rpb24sIEtleVRyaWUgfSBmcm9tICdvcHRpbWlzbSc7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gJ0B3cnkvZXF1YWxpdHknO1xuXG5pbXBvcnQge1xuICBpc1JlZmVyZW5jZSxcbiAgU3RvcmVWYWx1ZSxcbiAgU3RvcmVPYmplY3QsXG4gIFJlZmVyZW5jZSxcbiAgbWFrZVJlZmVyZW5jZSxcbiAgRGVlcE1lcmdlcixcbiAgbWF5YmVEZWVwRnJlZXplLFxuICBjYW5Vc2VXZWFrTWFwLFxufSBmcm9tICcuLi8uLi91dGlsaXRpZXMnO1xuaW1wb3J0IHsgTm9ybWFsaXplZENhY2hlLCBOb3JtYWxpemVkQ2FjaGVPYmplY3QgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IGhhc093biwgZmllbGROYW1lRnJvbVN0b3JlTmFtZSB9IGZyb20gJy4vaGVscGVycyc7XG5pbXBvcnQgeyBQb2xpY2llcywgU3RvcmFnZVR5cGUgfSBmcm9tICcuL3BvbGljaWVzJztcbmltcG9ydCB7IENhY2hlIH0gZnJvbSAnLi4vY29yZS90eXBlcy9DYWNoZSc7XG5pbXBvcnQge1xuICBTYWZlUmVhZG9ubHksXG4gIE1vZGlmaWVyLFxuICBNb2RpZmllcnMsXG4gIFJlYWRGaWVsZE9wdGlvbnMsXG4gIFRvUmVmZXJlbmNlRnVuY3Rpb24sXG4gIENhblJlYWRGdW5jdGlvbixcbn0gZnJvbSAnLi4vY29yZS90eXBlcy9jb21tb24nO1xuXG5jb25zdCBERUxFVEU6IGFueSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5jb25zdCBkZWxNb2RpZmllcjogTW9kaWZpZXI8YW55PiA9ICgpID0+IERFTEVURTtcbmNvbnN0IElOVkFMSURBVEU6IGFueSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBFbnRpdHlTdG9yZSBpbXBsZW1lbnRzIE5vcm1hbGl6ZWRDYWNoZSB7XG4gIHByb3RlY3RlZCBkYXRhOiBOb3JtYWxpemVkQ2FjaGVPYmplY3QgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyByZWFkb25seSBwb2xpY2llczogUG9saWNpZXMsXG4gICAgcHVibGljIHJlYWRvbmx5IGdyb3VwOiBDYWNoZUdyb3VwLFxuICApIHt9XG5cbiAgcHVibGljIGFic3RyYWN0IGFkZExheWVyKFxuICAgIGxheWVySWQ6IHN0cmluZyxcbiAgICByZXBsYXk6IChsYXllcjogRW50aXR5U3RvcmUpID0+IGFueSxcbiAgKTogTGF5ZXI7XG5cbiAgcHVibGljIGFic3RyYWN0IHJlbW92ZUxheWVyKGxheWVySWQ6IHN0cmluZyk6IEVudGl0eVN0b3JlO1xuXG4gIC8vIEFsdGhvdWdoIHRoZSBFbnRpdHlTdG9yZSBjbGFzcyBpcyBhYnN0cmFjdCwgaXQgY29udGFpbnMgY29uY3JldGVcbiAgLy8gaW1wbGVtZW50YXRpb25zIG9mIHRoZSB2YXJpb3VzIE5vcm1hbGl6ZWRDYWNoZSBpbnRlcmZhY2UgbWV0aG9kcyB0aGF0XG4gIC8vIGFyZSBpbmhlcml0ZWQgYnkgdGhlIFJvb3QgYW5kIExheWVyIHN1YmNsYXNzZXMuXG5cbiAgcHVibGljIHRvT2JqZWN0KCk6IE5vcm1hbGl6ZWRDYWNoZU9iamVjdCB7XG4gICAgcmV0dXJuIHsgLi4udGhpcy5kYXRhIH07XG4gIH1cblxuICBwdWJsaWMgaGFzKGRhdGFJZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubG9va3VwKGRhdGFJZCwgdHJ1ZSkgIT09IHZvaWQgMDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQoZGF0YUlkOiBzdHJpbmcsIGZpZWxkTmFtZTogc3RyaW5nKTogU3RvcmVWYWx1ZSB7XG4gICAgdGhpcy5ncm91cC5kZXBlbmQoZGF0YUlkLCBmaWVsZE5hbWUpO1xuICAgIGlmIChoYXNPd24uY2FsbCh0aGlzLmRhdGEsIGRhdGFJZCkpIHtcbiAgICAgIGNvbnN0IHN0b3JlT2JqZWN0ID0gdGhpcy5kYXRhW2RhdGFJZF07XG4gICAgICBpZiAoc3RvcmVPYmplY3QgJiYgaGFzT3duLmNhbGwoc3RvcmVPYmplY3QsIGZpZWxkTmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JlT2JqZWN0W2ZpZWxkTmFtZV07XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmaWVsZE5hbWUgPT09IFwiX190eXBlbmFtZVwiICYmXG4gICAgICAgIGhhc093bi5jYWxsKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWQsIGRhdGFJZCkpIHtcbiAgICAgIHJldHVybiB0aGlzLnBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW2RhdGFJZF07XG4gICAgfVxuICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXQoZGF0YUlkLCBmaWVsZE5hbWUpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBsb29rdXAoZGF0YUlkOiBzdHJpbmcsIGRlcGVuZE9uRXhpc3RlbmNlPzogYm9vbGVhbik6IFN0b3JlT2JqZWN0IHwgdW5kZWZpbmVkIHtcbiAgICAvLyBUaGUgaGFzIG1ldGhvZCAoYWJvdmUpIGNhbGxzIGxvb2t1cCB3aXRoIGRlcGVuZE9uRXhpc3RlbmNlID0gdHJ1ZSwgc29cbiAgICAvLyB0aGF0IGl0IGNhbiBsYXRlciBiZSBpbnZhbGlkYXRlZCB3aGVuIHdlIGFkZCBvciByZW1vdmUgYSBTdG9yZU9iamVjdCBmb3JcbiAgICAvLyB0aGlzIGRhdGFJZC4gQW55IGNvbnN1bWVyIHdobyBjYXJlcyBhYm91dCB0aGUgY29udGVudHMgb2YgdGhlIFN0b3JlT2JqZWN0XG4gICAgLy8gc2hvdWxkIG5vdCByZWx5IG9uIHRoaXMgZGVwZW5kZW5jeSwgc2luY2UgdGhlIGNvbnRlbnRzIGNvdWxkIGNoYW5nZVxuICAgIC8vIHdpdGhvdXQgdGhlIG9iamVjdCBiZWluZyBhZGRlZCBvciByZW1vdmVkLlxuICAgIGlmIChkZXBlbmRPbkV4aXN0ZW5jZSkgdGhpcy5ncm91cC5kZXBlbmQoZGF0YUlkLCBcIl9fZXhpc3RzXCIpO1xuXG4gICAgaWYgKGhhc093bi5jYWxsKHRoaXMuZGF0YSwgZGF0YUlkKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGF0YVtkYXRhSWRdO1xuICAgIH1cblxuICAgIGlmICh0aGlzIGluc3RhbmNlb2YgTGF5ZXIpIHtcbiAgICAgIHJldHVybiB0aGlzLnBhcmVudC5sb29rdXAoZGF0YUlkLCBkZXBlbmRPbkV4aXN0ZW5jZSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbZGF0YUlkXSkge1xuICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1lcmdlKGRhdGFJZDogc3RyaW5nLCBpbmNvbWluZzogU3RvcmVPYmplY3QpOiB2b2lkIHtcbiAgICBjb25zdCBleGlzdGluZyA9IHRoaXMubG9va3VwKGRhdGFJZCk7XG4gICAgY29uc3QgbWVyZ2VkOiBTdG9yZU9iamVjdCA9XG4gICAgICBuZXcgRGVlcE1lcmdlcihzdG9yZU9iamVjdFJlY29uY2lsZXIpLm1lcmdlKGV4aXN0aW5nLCBpbmNvbWluZyk7XG4gICAgLy8gRXZlbiBpZiBtZXJnZWQgPT09IGV4aXN0aW5nLCBleGlzdGluZyBtYXkgaGF2ZSBjb21lIGZyb20gYSBsb3dlclxuICAgIC8vIGxheWVyLCBzbyB3ZSBhbHdheXMgbmVlZCB0byBzZXQgdGhpcy5kYXRhW2RhdGFJZF0gb24gdGhpcyBsZXZlbC5cbiAgICB0aGlzLmRhdGFbZGF0YUlkXSA9IG1lcmdlZDtcbiAgICBpZiAobWVyZ2VkICE9PSBleGlzdGluZykge1xuICAgICAgZGVsZXRlIHRoaXMucmVmc1tkYXRhSWRdO1xuICAgICAgaWYgKHRoaXMuZ3JvdXAuY2FjaGluZykge1xuICAgICAgICBjb25zdCBmaWVsZHNUb0RpcnR5OiBSZWNvcmQ8c3RyaW5nLCAxPiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAgICAgLy8gSWYgd2UgYWRkZWQgYSBuZXcgU3RvcmVPYmplY3Qgd2hlcmUgdGhlcmUgd2FzIHByZXZpb3VzbHkgbm9uZSwgZGlydHlcbiAgICAgICAgLy8gYW55dGhpbmcgdGhhdCBkZXBlbmRlZCBvbiB0aGUgZXhpc3RlbmNlIG9mIHRoaXMgZGF0YUlkLCBzdWNoIGFzIHRoZVxuICAgICAgICAvLyBFbnRpdHlTdG9yZSNoYXMgbWV0aG9kLlxuICAgICAgICBpZiAoIWV4aXN0aW5nKSBmaWVsZHNUb0RpcnR5Ll9fZXhpc3RzID0gMTtcblxuICAgICAgICAvLyBOb3cgaW52YWxpZGF0ZSBkZXBlbmRlbnRzIHdobyBjYWxsZWQgZ2V0RmllbGRWYWx1ZSBmb3IgYW55IGZpZWxkc1xuICAgICAgICAvLyB0aGF0IGFyZSBjaGFuZ2luZyBhcyBhIHJlc3VsdCBvZiB0aGlzIG1lcmdlLlxuICAgICAgICBPYmplY3Qua2V5cyhpbmNvbWluZykuZm9yRWFjaChzdG9yZUZpZWxkTmFtZSA9PiB7XG4gICAgICAgICAgaWYgKCFleGlzdGluZyB8fCBleGlzdGluZ1tzdG9yZUZpZWxkTmFtZV0gIT09IG1lcmdlZFtzdG9yZUZpZWxkTmFtZV0pIHtcbiAgICAgICAgICAgIC8vIEFsd2F5cyBkaXJ0eSB0aGUgZnVsbCBzdG9yZUZpZWxkTmFtZSwgd2hpY2ggbWF5IGluY2x1ZGVcbiAgICAgICAgICAgIC8vIHNlcmlhbGl6ZWQgYXJndW1lbnRzIGZvbGxvd2luZyB0aGUgZmllbGROYW1lIHByZWZpeC5cbiAgICAgICAgICAgIGZpZWxkc1RvRGlydHlbc3RvcmVGaWVsZE5hbWVdID0gMTtcblxuICAgICAgICAgICAgLy8gQWxzbyBkaXJ0eSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKSBpZiBpdCdzXG4gICAgICAgICAgICAvLyBkaWZmZXJlbnQgZnJvbSBzdG9yZUZpZWxkTmFtZSBhbmQgdGhpcyBmaWVsZCBkb2VzIG5vdCBoYXZlXG4gICAgICAgICAgICAvLyBrZXlBcmdzIGNvbmZpZ3VyZWQsIGJlY2F1c2UgdGhhdCBtZWFucyB0aGUgY2FjaGUgY2FuJ3QgbWFrZVxuICAgICAgICAgICAgLy8gYW55IGFzc3VtcHRpb25zIGFib3V0IGhvdyBmaWVsZCB2YWx1ZXMgd2l0aCB0aGUgc2FtZSBmaWVsZFxuICAgICAgICAgICAgLy8gbmFtZSBidXQgZGlmZmVyZW50IGFyZ3VtZW50cyBtaWdodCBiZSBpbnRlcnJlbGF0ZWQsIHNvIGl0XG4gICAgICAgICAgICAvLyBtdXN0IGVyciBvbiB0aGUgc2lkZSBvZiBpbnZhbGlkYXRpbmcgYWxsIGZpZWxkIHZhbHVlcyB0aGF0XG4gICAgICAgICAgICAvLyBzaGFyZSB0aGUgc2FtZSBzaG9ydCBmaWVsZE5hbWUsIHJlZ2FyZGxlc3Mgb2YgYXJndW1lbnRzLlxuICAgICAgICAgICAgY29uc3QgZmllbGROYW1lID0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgICBpZiAoZmllbGROYW1lICE9PSBzdG9yZUZpZWxkTmFtZSAmJlxuICAgICAgICAgICAgICAgICF0aGlzLnBvbGljaWVzLmhhc0tleUFyZ3MobWVyZ2VkLl9fdHlwZW5hbWUsIGZpZWxkTmFtZSkpIHtcbiAgICAgICAgICAgICAgZmllbGRzVG9EaXJ0eVtmaWVsZE5hbWVdID0gMTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSWYgbWVyZ2VkW3N0b3JlRmllbGROYW1lXSBoYXMgYmVjb21lIHVuZGVmaW5lZCwgYW5kIHRoaXMgaXMgdGhlXG4gICAgICAgICAgICAvLyBSb290IGxheWVyLCBhY3R1YWxseSBkZWxldGUgdGhlIHByb3BlcnR5IGZyb20gdGhlIG1lcmdlZCBvYmplY3QsXG4gICAgICAgICAgICAvLyB3aGljaCBpcyBndWFyYW50ZWVkIHRvIGhhdmUgYmVlbiBjcmVhdGVkIGZyZXNoIGluIHRoaXMgbWV0aG9kLlxuICAgICAgICAgICAgaWYgKG1lcmdlZFtzdG9yZUZpZWxkTmFtZV0gPT09IHZvaWQgMCAmJiAhKHRoaXMgaW5zdGFuY2VvZiBMYXllcikpIHtcbiAgICAgICAgICAgICAgZGVsZXRlIG1lcmdlZFtzdG9yZUZpZWxkTmFtZV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBPYmplY3Qua2V5cyhmaWVsZHNUb0RpcnR5KS5mb3JFYWNoKFxuICAgICAgICAgIGZpZWxkTmFtZSA9PiB0aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgZmllbGROYW1lKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIG1vZGlmeShcbiAgICBkYXRhSWQ6IHN0cmluZyxcbiAgICBmaWVsZHM6IE1vZGlmaWVyPGFueT4gfCBNb2RpZmllcnMsXG4gICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHN0b3JlT2JqZWN0ID0gdGhpcy5sb29rdXAoZGF0YUlkKTtcblxuICAgIGlmIChzdG9yZU9iamVjdCkge1xuICAgICAgY29uc3QgY2hhbmdlZEZpZWxkczogUmVjb3JkPHN0cmluZywgYW55PiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgICBsZXQgbmVlZFRvTWVyZ2UgPSBmYWxzZTtcbiAgICAgIGxldCBhbGxEZWxldGVkID0gdHJ1ZTtcblxuICAgICAgY29uc3Qgc2hhcmVkRGV0YWlscyA9IHtcbiAgICAgICAgREVMRVRFLFxuICAgICAgICBJTlZBTElEQVRFLFxuICAgICAgICBpc1JlZmVyZW5jZSxcbiAgICAgICAgdG9SZWZlcmVuY2U6IHRoaXMudG9SZWZlcmVuY2UsXG4gICAgICAgIGNhblJlYWQ6IHRoaXMuY2FuUmVhZCxcbiAgICAgICAgcmVhZEZpZWxkOiA8ViA9IFN0b3JlVmFsdWU+KFxuICAgICAgICAgIGZpZWxkTmFtZU9yT3B0aW9uczogc3RyaW5nIHwgUmVhZEZpZWxkT3B0aW9ucyxcbiAgICAgICAgICBmcm9tPzogU3RvcmVPYmplY3QgfCBSZWZlcmVuY2UsXG4gICAgICAgICkgPT4gdGhpcy5wb2xpY2llcy5yZWFkRmllbGQ8Vj4oXG4gICAgICAgICAgdHlwZW9mIGZpZWxkTmFtZU9yT3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/IHtcbiAgICAgICAgICAgIGZpZWxkTmFtZTogZmllbGROYW1lT3JPcHRpb25zLFxuICAgICAgICAgICAgZnJvbTogZnJvbSB8fCBtYWtlUmVmZXJlbmNlKGRhdGFJZCksXG4gICAgICAgICAgfSA6IGZpZWxkTmFtZU9yT3B0aW9ucyxcbiAgICAgICAgICB7IHN0b3JlOiB0aGlzIH0sXG4gICAgICAgICksXG4gICAgICB9O1xuXG4gICAgICBPYmplY3Qua2V5cyhzdG9yZU9iamVjdCkuZm9yRWFjaChzdG9yZUZpZWxkTmFtZSA9PiB7XG4gICAgICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICBsZXQgZmllbGRWYWx1ZSA9IHN0b3JlT2JqZWN0W3N0b3JlRmllbGROYW1lXTtcbiAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHZvaWQgMCkgcmV0dXJuO1xuICAgICAgICBjb25zdCBtb2RpZnk6IE1vZGlmaWVyPFN0b3JlVmFsdWU+ID0gdHlwZW9mIGZpZWxkcyA9PT0gXCJmdW5jdGlvblwiXG4gICAgICAgICAgPyBmaWVsZHNcbiAgICAgICAgICA6IGZpZWxkc1tzdG9yZUZpZWxkTmFtZV0gfHwgZmllbGRzW2ZpZWxkTmFtZV07XG4gICAgICAgIGlmIChtb2RpZnkpIHtcbiAgICAgICAgICBsZXQgbmV3VmFsdWUgPSBtb2RpZnkgPT09IGRlbE1vZGlmaWVyID8gREVMRVRFIDpcbiAgICAgICAgICAgIG1vZGlmeShtYXliZURlZXBGcmVlemUoZmllbGRWYWx1ZSksIHtcbiAgICAgICAgICAgICAgLi4uc2hhcmVkRGV0YWlscyxcbiAgICAgICAgICAgICAgZmllbGROYW1lLFxuICAgICAgICAgICAgICBzdG9yZUZpZWxkTmFtZSxcbiAgICAgICAgICAgICAgc3RvcmFnZTogdGhpcy5nZXRTdG9yYWdlKGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKG5ld1ZhbHVlID09PSBJTlZBTElEQVRFKSB7XG4gICAgICAgICAgICB0aGlzLmdyb3VwLmRpcnR5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgPT09IERFTEVURSkgbmV3VmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgIT09IGZpZWxkVmFsdWUpIHtcbiAgICAgICAgICAgICAgY2hhbmdlZEZpZWxkc1tzdG9yZUZpZWxkTmFtZV0gPSBuZXdWYWx1ZTtcbiAgICAgICAgICAgICAgbmVlZFRvTWVyZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICBmaWVsZFZhbHVlID0gbmV3VmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChmaWVsZFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBhbGxEZWxldGVkID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAobmVlZFRvTWVyZ2UpIHtcbiAgICAgICAgdGhpcy5tZXJnZShkYXRhSWQsIGNoYW5nZWRGaWVsZHMpO1xuXG4gICAgICAgIGlmIChhbGxEZWxldGVkKSB7XG4gICAgICAgICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgICAgICAgdGhpcy5kYXRhW2RhdGFJZF0gPSB2b2lkIDA7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmRhdGFbZGF0YUlkXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5ncm91cC5kaXJ0eShkYXRhSWQsIFwiX19leGlzdHNcIik7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvLyBJZiBjYWxsZWQgd2l0aCBvbmx5IG9uZSBhcmd1bWVudCwgcmVtb3ZlcyB0aGUgZW50aXJlIGVudGl0eVxuICAvLyBpZGVudGlmaWVkIGJ5IGRhdGFJZC4gSWYgY2FsbGVkIHdpdGggYSBmaWVsZE5hbWUgYXMgd2VsbCwgcmVtb3ZlcyBhbGxcbiAgLy8gZmllbGRzIG9mIHRoYXQgZW50aXR5IHdob3NlIG5hbWVzIG1hdGNoIGZpZWxkTmFtZSBhY2NvcmRpbmcgdG8gdGhlXG4gIC8vIGZpZWxkTmFtZUZyb21TdG9yZU5hbWUgaGVscGVyIGZ1bmN0aW9uLiBJZiBjYWxsZWQgd2l0aCBhIGZpZWxkTmFtZVxuICAvLyBhbmQgdmFyaWFibGVzLCByZW1vdmVzIGFsbCBmaWVsZHMgb2YgdGhhdCBlbnRpdHkgd2hvc2UgbmFtZXMgbWF0Y2ggZmllbGROYW1lXG4gIC8vIGFuZCB3aG9zZSBhcmd1bWVudHMgd2hlbiBjYWNoZWQgZXhhY3RseSBtYXRjaCB0aGUgdmFyaWFibGVzIHBhc3NlZC5cbiAgcHVibGljIGRlbGV0ZShcbiAgICBkYXRhSWQ6IHN0cmluZyxcbiAgICBmaWVsZE5hbWU/OiBzdHJpbmcsXG4gICAgYXJncz86IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gICkge1xuICAgIGNvbnN0IHN0b3JlT2JqZWN0ID0gdGhpcy5sb29rdXAoZGF0YUlkKTtcbiAgICBpZiAoc3RvcmVPYmplY3QpIHtcbiAgICAgIGNvbnN0IHR5cGVuYW1lID0gdGhpcy5nZXRGaWVsZFZhbHVlPHN0cmluZz4oc3RvcmVPYmplY3QsIFwiX190eXBlbmFtZVwiKTtcbiAgICAgIGNvbnN0IHN0b3JlRmllbGROYW1lID0gZmllbGROYW1lICYmIGFyZ3NcbiAgICAgICAgPyB0aGlzLnBvbGljaWVzLmdldFN0b3JlRmllbGROYW1lKHsgdHlwZW5hbWUsIGZpZWxkTmFtZSwgYXJncyB9KVxuICAgICAgICA6IGZpZWxkTmFtZTtcbiAgICAgIHJldHVybiB0aGlzLm1vZGlmeShkYXRhSWQsIHN0b3JlRmllbGROYW1lID8ge1xuICAgICAgICBbc3RvcmVGaWVsZE5hbWVdOiBkZWxNb2RpZmllcixcbiAgICAgIH0gOiBkZWxNb2RpZmllcik7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHB1YmxpYyBldmljdChvcHRpb25zOiBDYWNoZS5FdmljdE9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBsZXQgZXZpY3RlZCA9IGZhbHNlO1xuICAgIGlmIChvcHRpb25zLmlkKSB7XG4gICAgICBpZiAoaGFzT3duLmNhbGwodGhpcy5kYXRhLCBvcHRpb25zLmlkKSkge1xuICAgICAgICBldmljdGVkID0gdGhpcy5kZWxldGUob3B0aW9ucy5pZCwgb3B0aW9ucy5maWVsZE5hbWUsIG9wdGlvbnMuYXJncyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcyBpbnN0YW5jZW9mIExheWVyKSB7XG4gICAgICAgIGV2aWN0ZWQgPSB0aGlzLnBhcmVudC5ldmljdChvcHRpb25zKSB8fCBldmljdGVkO1xuICAgICAgfVxuICAgICAgLy8gQWx3YXlzIGludmFsaWRhdGUgdGhlIGZpZWxkIHRvIHRyaWdnZXIgcmVyZWFkaW5nIG9mIHdhdGNoZWRcbiAgICAgIC8vIHF1ZXJpZXMsIGV2ZW4gaWYgbm8gY2FjaGUgZGF0YSB3YXMgbW9kaWZpZWQgYnkgdGhlIGV2aWN0aW9uLFxuICAgICAgLy8gYmVjYXVzZSBxdWVyaWVzIG1heSBkZXBlbmQgb24gY29tcHV0ZWQgZmllbGRzIHdpdGggY3VzdG9tIHJlYWRcbiAgICAgIC8vIGZ1bmN0aW9ucywgd2hvc2UgdmFsdWVzIGFyZSBub3Qgc3RvcmVkIGluIHRoZSBFbnRpdHlTdG9yZS5cbiAgICAgIGlmIChvcHRpb25zLmZpZWxkTmFtZSB8fCBldmljdGVkKSB7XG4gICAgICAgIHRoaXMuZ3JvdXAuZGlydHkob3B0aW9ucy5pZCwgb3B0aW9ucy5maWVsZE5hbWUgfHwgXCJfX2V4aXN0c1wiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGV2aWN0ZWQ7XG4gIH1cblxuICBwdWJsaWMgY2xlYXIoKTogdm9pZCB7XG4gICAgdGhpcy5yZXBsYWNlKG51bGwpO1xuICB9XG5cbiAgcHVibGljIGV4dHJhY3QoKTogTm9ybWFsaXplZENhY2hlT2JqZWN0IHtcbiAgICBjb25zdCBvYmogPSB0aGlzLnRvT2JqZWN0KCk7XG4gICAgY29uc3QgZXh0cmFSb290SWRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIHRoaXMuZ2V0Um9vdElkU2V0KCkuZm9yRWFjaChpZCA9PiB7XG4gICAgICBpZiAoIWhhc093bi5jYWxsKHRoaXMucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWQsIGlkKSkge1xuICAgICAgICBleHRyYVJvb3RJZHMucHVzaChpZCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaWYgKGV4dHJhUm9vdElkcy5sZW5ndGgpIHtcbiAgICAgIG9iai5fX01FVEEgPSB7IGV4dHJhUm9vdElkczogZXh0cmFSb290SWRzLnNvcnQoKSB9O1xuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9XG5cbiAgcHVibGljIHJlcGxhY2UobmV3RGF0YTogTm9ybWFsaXplZENhY2hlT2JqZWN0IHwgbnVsbCk6IHZvaWQge1xuICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuZm9yRWFjaChkYXRhSWQgPT4ge1xuICAgICAgaWYgKCEobmV3RGF0YSAmJiBoYXNPd24uY2FsbChuZXdEYXRhLCBkYXRhSWQpKSkge1xuICAgICAgICB0aGlzLmRlbGV0ZShkYXRhSWQpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGlmIChuZXdEYXRhKSB7XG4gICAgICBjb25zdCB7IF9fTUVUQSwgLi4ucmVzdCB9ID0gbmV3RGF0YTtcbiAgICAgIE9iamVjdC5rZXlzKHJlc3QpLmZvckVhY2goZGF0YUlkID0+IHtcbiAgICAgICAgdGhpcy5tZXJnZShkYXRhSWQsIHJlc3RbZGF0YUlkXSBhcyBTdG9yZU9iamVjdCk7XG4gICAgICB9KTtcbiAgICAgIGlmIChfX01FVEEpIHtcbiAgICAgICAgX19NRVRBLmV4dHJhUm9vdElkcy5mb3JFYWNoKHRoaXMucmV0YWluLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgYWJzdHJhY3QgZ2V0U3RvcmFnZShcbiAgICBpZE9yT2JqOiBzdHJpbmcgfCBTdG9yZU9iamVjdCxcbiAgICAuLi5zdG9yZUZpZWxkTmFtZXM6IChzdHJpbmcgfCBudW1iZXIpW11cbiAgKTogU3RvcmFnZVR5cGU7XG5cbiAgLy8gTWFwcyByb290IGVudGl0eSBJRHMgdG8gdGhlIG51bWJlciBvZiB0aW1lcyB0aGV5IGhhdmUgYmVlbiByZXRhaW5lZCwgbWludXNcbiAgLy8gdGhlIG51bWJlciBvZiB0aW1lcyB0aGV5IGhhdmUgYmVlbiByZWxlYXNlZC4gUmV0YWluZWQgZW50aXRpZXMga2VlcCBvdGhlclxuICAvLyBlbnRpdGllcyB0aGV5IHJlZmVyZW5jZSAoZXZlbiBpbmRpcmVjdGx5KSBmcm9tIGJlaW5nIGdhcmJhZ2UgY29sbGVjdGVkLlxuICBwcml2YXRlIHJvb3RJZHM6IHtcbiAgICBbcm9vdElkOiBzdHJpbmddOiBudW1iZXI7XG4gIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIHB1YmxpYyByZXRhaW4ocm9vdElkOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnJvb3RJZHNbcm9vdElkXSA9ICh0aGlzLnJvb3RJZHNbcm9vdElkXSB8fCAwKSArIDE7XG4gIH1cblxuICBwdWJsaWMgcmVsZWFzZShyb290SWQ6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKHRoaXMucm9vdElkc1tyb290SWRdID4gMCkge1xuICAgICAgY29uc3QgY291bnQgPSAtLXRoaXMucm9vdElkc1tyb290SWRdO1xuICAgICAgaWYgKCFjb3VudCkgZGVsZXRlIHRoaXMucm9vdElkc1tyb290SWRdO1xuICAgICAgcmV0dXJuIGNvdW50O1xuICAgIH1cbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIC8vIFJldHVybiBhIFNldDxzdHJpbmc+IG9mIGFsbCB0aGUgSUQgc3RyaW5ncyB0aGF0IGhhdmUgYmVlbiByZXRhaW5lZCBieVxuICAvLyB0aGlzIGxheWVyL3Jvb3QgKmFuZCogYW55IGxheWVycy9yb290cyBiZW5lYXRoIGl0LlxuICBwdWJsaWMgZ2V0Um9vdElkU2V0KGlkcyA9IG5ldyBTZXQ8c3RyaW5nPigpKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5yb290SWRzKS5mb3JFYWNoKGlkcy5hZGQsIGlkcyk7XG4gICAgaWYgKHRoaXMgaW5zdGFuY2VvZiBMYXllcikge1xuICAgICAgdGhpcy5wYXJlbnQuZ2V0Um9vdElkU2V0KGlkcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE9mZmljaWFsIHNpbmdsZXRvbiBJRHMgbGlrZSBST09UX1FVRVJZIGFuZCBST09UX01VVEFUSU9OIGFyZVxuICAgICAgLy8gYWx3YXlzIGNvbnNpZGVyZWQgcm9vdHMgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiwgcmVnYXJkbGVzcyBvZlxuICAgICAgLy8gdGhlaXIgcmV0YWlubWVudCBjb3VudHMgaW4gdGhpcy5yb290SWRzLlxuICAgICAgT2JqZWN0LmtleXModGhpcy5wb2xpY2llcy5yb290VHlwZW5hbWVzQnlJZCkuZm9yRWFjaChpZHMuYWRkLCBpZHMpO1xuICAgIH1cbiAgICByZXR1cm4gaWRzO1xuICB9XG5cbiAgLy8gVGhlIGdvYWwgb2YgZ2FyYmFnZSBjb2xsZWN0aW9uIGlzIHRvIHJlbW92ZSBJRHMgZnJvbSB0aGUgUm9vdCBsYXllciBvZiB0aGVcbiAgLy8gc3RvcmUgdGhhdCBhcmUgbm8gbG9uZ2VyIHJlYWNoYWJsZSBzdGFydGluZyBmcm9tIGFueSBJRHMgdGhhdCBoYXZlIGJlZW5cbiAgLy8gZXhwbGljaXRseSByZXRhaW5lZCAoc2VlIHJldGFpbiBhbmQgcmVsZWFzZSwgYWJvdmUpLiBSZXR1cm5zIGFuIGFycmF5IG9mXG4gIC8vIGRhdGFJZCBzdHJpbmdzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhlIHN0b3JlLlxuICBwdWJsaWMgZ2MoKSB7XG4gICAgY29uc3QgaWRzID0gdGhpcy5nZXRSb290SWRTZXQoKTtcbiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMudG9PYmplY3QoKTtcbiAgICBpZHMuZm9yRWFjaChpZCA9PiB7XG4gICAgICBpZiAoaGFzT3duLmNhbGwoc25hcHNob3QsIGlkKSkge1xuICAgICAgICAvLyBCZWNhdXNlIHdlIGFyZSBpdGVyYXRpbmcgb3ZlciBhbiBFQ01BU2NyaXB0IFNldCwgdGhlIElEcyB3ZSBhZGQgaGVyZVxuICAgICAgICAvLyB3aWxsIGJlIHZpc2l0ZWQgaW4gbGF0ZXIgaXRlcmF0aW9ucyBvZiB0aGUgZm9yRWFjaCBsb29wIG9ubHkgaWYgdGhleVxuICAgICAgICAvLyB3ZXJlIG5vdCBwcmV2aW91c2x5IGNvbnRhaW5lZCBieSB0aGUgU2V0LlxuICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmZpbmRDaGlsZFJlZklkcyhpZCkpLmZvckVhY2goaWRzLmFkZCwgaWRzKTtcbiAgICAgICAgLy8gQnkgcmVtb3ZpbmcgSURzIGZyb20gdGhlIHNuYXBzaG90IG9iamVjdCBoZXJlLCB3ZSBwcm90ZWN0IHRoZW0gZnJvbVxuICAgICAgICAvLyBnZXR0aW5nIHJlbW92ZWQgZnJvbSB0aGUgcm9vdCBzdG9yZSBsYXllciBiZWxvdy5cbiAgICAgICAgZGVsZXRlIHNuYXBzaG90W2lkXTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBjb25zdCBpZHNUb1JlbW92ZSA9IE9iamVjdC5rZXlzKHNuYXBzaG90KTtcbiAgICBpZiAoaWRzVG9SZW1vdmUubGVuZ3RoKSB7XG4gICAgICBsZXQgcm9vdDogRW50aXR5U3RvcmUgPSB0aGlzO1xuICAgICAgd2hpbGUgKHJvb3QgaW5zdGFuY2VvZiBMYXllcikgcm9vdCA9IHJvb3QucGFyZW50O1xuICAgICAgaWRzVG9SZW1vdmUuZm9yRWFjaChpZCA9PiByb290LmRlbGV0ZShpZCkpO1xuICAgIH1cbiAgICByZXR1cm4gaWRzVG9SZW1vdmU7XG4gIH1cblxuICAvLyBMYXppbHkgdHJhY2tzIHsgX19yZWY6IDxkYXRhSWQ+IH0gc3RyaW5ncyBjb250YWluZWQgYnkgdGhpcy5kYXRhW2RhdGFJZF0uXG4gIHByaXZhdGUgcmVmczoge1xuICAgIFtkYXRhSWQ6IHN0cmluZ106IFJlY29yZDxzdHJpbmcsIHRydWU+O1xuICB9ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBwdWJsaWMgZmluZENoaWxkUmVmSWRzKGRhdGFJZDogc3RyaW5nKTogUmVjb3JkPHN0cmluZywgdHJ1ZT4ge1xuICAgIGlmICghaGFzT3duLmNhbGwodGhpcy5yZWZzLCBkYXRhSWQpKSB7XG4gICAgICBjb25zdCBmb3VuZCA9IHRoaXMucmVmc1tkYXRhSWRdID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgIGNvbnN0IHdvcmtTZXQgPSBuZXcgU2V0KFt0aGlzLmRhdGFbZGF0YUlkXV0pO1xuICAgICAgLy8gV2l0aGluIHRoZSBzdG9yZSwgb25seSBhcnJheXMgYW5kIG9iamVjdHMgY2FuIGNvbnRhaW4gY2hpbGQgZW50aXR5XG4gICAgICAvLyByZWZlcmVuY2VzLCBzbyB3ZSBjYW4gcHJ1bmUgdGhlIHRyYXZlcnNhbCB1c2luZyB0aGlzIHByZWRpY2F0ZTpcbiAgICAgIGNvbnN0IGNhblRyYXZlcnNlID0gKG9iajogYW55KSA9PiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG4gICAgICB3b3JrU2V0LmZvckVhY2gob2JqID0+IHtcbiAgICAgICAgaWYgKGlzUmVmZXJlbmNlKG9iaikpIHtcbiAgICAgICAgICBmb3VuZFtvYmouX19yZWZdID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIGlmIChjYW5UcmF2ZXJzZShvYmopKSB7XG4gICAgICAgICAgT2JqZWN0LnZhbHVlcyhvYmohKVxuICAgICAgICAgICAgLy8gTm8gbmVlZCB0byBhZGQgcHJpbWl0aXZlIHZhbHVlcyB0byB0aGUgd29ya1NldCwgc2luY2UgdGhleSBjYW5ub3RcbiAgICAgICAgICAgIC8vIGNvbnRhaW4gcmVmZXJlbmNlIG9iamVjdHMuXG4gICAgICAgICAgICAuZmlsdGVyKGNhblRyYXZlcnNlKVxuICAgICAgICAgICAgLmZvckVhY2god29ya1NldC5hZGQsIHdvcmtTZXQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVmc1tkYXRhSWRdO1xuICB9XG5cbiAgLy8gVXNlZCB0byBjb21wdXRlIGNhY2hlIGtleXMgc3BlY2lmaWMgdG8gdGhpcy5ncm91cC5cbiAgcHVibGljIG1ha2VDYWNoZUtleSguLi5hcmdzOiBhbnlbXSkge1xuICAgIHJldHVybiB0aGlzLmdyb3VwLmtleU1ha2VyLmxvb2t1cEFycmF5KGFyZ3MpO1xuICB9XG5cbiAgLy8gQm91bmQgZnVuY3Rpb24gdGhhdCBjYW4gYmUgcGFzc2VkIGFyb3VuZCB0byBwcm92aWRlIGVhc3kgYWNjZXNzIHRvIGZpZWxkc1xuICAvLyBvZiBSZWZlcmVuY2Ugb2JqZWN0cyBhcyB3ZWxsIGFzIG9yZGluYXJ5IG9iamVjdHMuXG4gIHB1YmxpYyBnZXRGaWVsZFZhbHVlID0gPFQgPSBTdG9yZVZhbHVlPihcbiAgICBvYmplY3RPclJlZmVyZW5jZTogU3RvcmVPYmplY3QgfCBSZWZlcmVuY2UgfCB1bmRlZmluZWQsXG4gICAgc3RvcmVGaWVsZE5hbWU6IHN0cmluZyxcbiAgKSA9PiBtYXliZURlZXBGcmVlemUoXG4gICAgaXNSZWZlcmVuY2Uob2JqZWN0T3JSZWZlcmVuY2UpXG4gICAgICA/IHRoaXMuZ2V0KG9iamVjdE9yUmVmZXJlbmNlLl9fcmVmLCBzdG9yZUZpZWxkTmFtZSlcbiAgICAgIDogb2JqZWN0T3JSZWZlcmVuY2UgJiYgb2JqZWN0T3JSZWZlcmVuY2Vbc3RvcmVGaWVsZE5hbWVdXG4gICkgYXMgU2FmZVJlYWRvbmx5PFQ+O1xuXG4gIC8vIFJldHVybnMgdHJ1ZSBmb3Igbm9uLW5vcm1hbGl6ZWQgU3RvcmVPYmplY3RzIGFuZCBub24tZGFuZ2xpbmdcbiAgLy8gUmVmZXJlbmNlcywgaW5kaWNhdGluZyB0aGF0IHJlYWRGaWVsZChuYW1lLCBvYmpPclJlZikgaGFzIGEgY2hhbmNlIG9mXG4gIC8vIHdvcmtpbmcuIFVzZWZ1bCBmb3IgZmlsdGVyaW5nIG91dCBkYW5nbGluZyByZWZlcmVuY2VzIGZyb20gbGlzdHMuXG4gIHB1YmxpYyBjYW5SZWFkOiBDYW5SZWFkRnVuY3Rpb24gPSBvYmpPclJlZiA9PiB7XG4gICAgcmV0dXJuIGlzUmVmZXJlbmNlKG9iak9yUmVmKVxuICAgICAgPyB0aGlzLmhhcyhvYmpPclJlZi5fX3JlZilcbiAgICAgIDogdHlwZW9mIG9iak9yUmVmID09PSBcIm9iamVjdFwiO1xuICB9O1xuXG4gIC8vIEJvdW5kIGZ1bmN0aW9uIHRoYXQgY29udmVydHMgYW4gaWQgb3IgYW4gb2JqZWN0IHdpdGggYSBfX3R5cGVuYW1lIGFuZFxuICAvLyBwcmltYXJ5IGtleSBmaWVsZHMgdG8gYSBSZWZlcmVuY2Ugb2JqZWN0LiBJZiBjYWxsZWQgd2l0aCBhIFJlZmVyZW5jZSBvYmplY3QsXG4gIC8vIHRoYXQgc2FtZSBSZWZlcmVuY2Ugb2JqZWN0IGlzIHJldHVybmVkLiBQYXNzIHRydWUgZm9yIG1lcmdlSW50b1N0b3JlIHRvIHBlcnNpc3RcbiAgLy8gYW4gb2JqZWN0IGludG8gdGhlIHN0b3JlLlxuICBwdWJsaWMgdG9SZWZlcmVuY2U6IFRvUmVmZXJlbmNlRnVuY3Rpb24gPSAoXG4gICAgb2JqT3JJZE9yUmVmLFxuICAgIG1lcmdlSW50b1N0b3JlLFxuICApID0+IHtcbiAgICBpZiAodHlwZW9mIG9iak9ySWRPclJlZiA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgcmV0dXJuIG1ha2VSZWZlcmVuY2Uob2JqT3JJZE9yUmVmKTtcbiAgICB9XG5cbiAgICBpZiAoaXNSZWZlcmVuY2Uob2JqT3JJZE9yUmVmKSkge1xuICAgICAgcmV0dXJuIG9iak9ySWRPclJlZjtcbiAgICB9XG5cbiAgICBjb25zdCBbaWRdID0gdGhpcy5wb2xpY2llcy5pZGVudGlmeShvYmpPcklkT3JSZWYpO1xuXG4gICAgaWYgKGlkKSB7XG4gICAgICBjb25zdCByZWYgPSBtYWtlUmVmZXJlbmNlKGlkKTtcbiAgICAgIGlmIChtZXJnZUludG9TdG9yZSkge1xuICAgICAgICB0aGlzLm1lcmdlKGlkLCBvYmpPcklkT3JSZWYpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlZjtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCB0eXBlIEZpZWxkVmFsdWVHZXR0ZXIgPSBFbnRpdHlTdG9yZVtcImdldEZpZWxkVmFsdWVcIl07XG5cbi8vIEEgc2luZ2xlIENhY2hlR3JvdXAgcmVwcmVzZW50cyBhIHNldCBvZiBvbmUgb3IgbW9yZSBFbnRpdHlTdG9yZSBvYmplY3RzLFxuLy8gdHlwaWNhbGx5IHRoZSBSb290IHN0b3JlIGluIGEgQ2FjaGVHcm91cCBieSBpdHNlbGYsIGFuZCBhbGwgYWN0aXZlIExheWVyXG4vLyBzdG9yZXMgaW4gYSBncm91cCB0b2dldGhlci4gQSBzaW5nbGUgRW50aXR5U3RvcmUgb2JqZWN0IGJlbG9uZ3MgdG8gb25seVxuLy8gb25lIENhY2hlR3JvdXAsIHN0b3JlLmdyb3VwLiBUaGUgQ2FjaGVHcm91cCBpcyByZXNwb25zaWJsZSBmb3IgdHJhY2tpbmdcbi8vIGRlcGVuZGVuY2llcywgc28gc3RvcmUuZ3JvdXAgaXMgaGVscGZ1bCBmb3IgZ2VuZXJhdGluZyB1bmlxdWUga2V5cyBmb3Jcbi8vIGNhY2hlZCByZXN1bHRzIHRoYXQgbmVlZCB0byBiZSBpbnZhbGlkYXRlZCB3aGVuL2lmIHRob3NlIGRlcGVuZGVuY2llc1xuLy8gY2hhbmdlLiBJZiB3ZSB1c2VkIHRoZSBFbnRpdHlTdG9yZSBvYmplY3RzIHRoZW1zZWx2ZXMgYXMgY2FjaGUga2V5cyAodGhhdFxuLy8gaXMsIHN0b3JlIHJhdGhlciB0aGFuIHN0b3JlLmdyb3VwKSwgdGhlIGNhY2hlIHdvdWxkIGJlY29tZSB1bm5lY2Vzc2FyaWx5XG4vLyBmcmFnbWVudGVkIGJ5IGFsbCB0aGUgZGlmZmVyZW50IExheWVyIG9iamVjdHMuIEluc3RlYWQsIHRoZSBDYWNoZUdyb3VwXG4vLyBhcHByb2FjaCBhbGxvd3MgYWxsIG9wdGltaXN0aWMgTGF5ZXIgb2JqZWN0cyBpbiB0aGUgc2FtZSBsaW5rZWQgbGlzdCB0b1xuLy8gYmVsb25nIHRvIG9uZSBDYWNoZUdyb3VwLCB3aXRoIHRoZSBub24tb3B0aW1pc3RpYyBSb290IG9iamVjdCBiZWxvbmdpbmdcbi8vIHRvIGFub3RoZXIgQ2FjaGVHcm91cCwgYWxsb3dpbmcgcmVzdWx0Q2FjaGluZyBkZXBlbmRlbmNpZXMgdG8gYmUgdHJhY2tlZFxuLy8gc2VwYXJhdGVseSBmb3Igb3B0aW1pc3RpYyBhbmQgbm9uLW9wdGltaXN0aWMgZW50aXR5IGRhdGEuXG5jbGFzcyBDYWNoZUdyb3VwIHtcbiAgcHJpdmF0ZSBkOiBPcHRpbWlzdGljRGVwZW5kZW5jeUZ1bmN0aW9uPHN0cmluZz4gfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihwdWJsaWMgcmVhZG9ubHkgY2FjaGluZzogYm9vbGVhbikge1xuICAgIHRoaXMuZCA9IGNhY2hpbmcgPyBkZXA8c3RyaW5nPigpIDogbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBkZXBlbmQoZGF0YUlkOiBzdHJpbmcsIHN0b3JlRmllbGROYW1lOiBzdHJpbmcpIHtcbiAgICBpZiAodGhpcy5kKSB7XG4gICAgICB0aGlzLmQobWFrZURlcEtleShkYXRhSWQsIHN0b3JlRmllbGROYW1lKSk7XG4gICAgICBjb25zdCBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgICAgIGlmIChmaWVsZE5hbWUgIT09IHN0b3JlRmllbGROYW1lKSB7XG4gICAgICAgIC8vIEZpZWxkcyB3aXRoIGFyZ3VtZW50cyB0aGF0IGNvbnRyaWJ1dGUgZXh0cmEgaWRlbnRpZnlpbmdcbiAgICAgICAgLy8gaW5mb3JtYXRpb24gdG8gdGhlIGZpZWxkTmFtZSAodGh1cyBmb3JtaW5nIHRoZSBzdG9yZUZpZWxkTmFtZSlcbiAgICAgICAgLy8gZGVwZW5kIG5vdCBvbmx5IG9uIHRoZSBmdWxsIHN0b3JlRmllbGROYW1lIGJ1dCBhbHNvIG9uIHRoZVxuICAgICAgICAvLyBzaG9ydCBmaWVsZE5hbWUsIHNvIHRoZSBmaWVsZCBjYW4gYmUgaW52YWxpZGF0ZWQgdXNpbmcgZWl0aGVyXG4gICAgICAgIC8vIGxldmVsIG9mIHNwZWNpZmljaXR5LlxuICAgICAgICB0aGlzLmQobWFrZURlcEtleShkYXRhSWQsIGZpZWxkTmFtZSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBkaXJ0eShkYXRhSWQ6IHN0cmluZywgc3RvcmVGaWVsZE5hbWU6IHN0cmluZykge1xuICAgIGlmICh0aGlzLmQpIHtcbiAgICAgIHRoaXMuZC5kaXJ0eShtYWtlRGVwS2V5KGRhdGFJZCwgc3RvcmVGaWVsZE5hbWUpKTtcbiAgICB9XG4gIH1cblxuICAvLyBVc2VkIGJ5IHRoZSBFbnRpdHlTdG9yZSNtYWtlQ2FjaGVLZXkgbWV0aG9kIHRvIGNvbXB1dGUgY2FjaGUga2V5c1xuICAvLyBzcGVjaWZpYyB0byB0aGlzIENhY2hlR3JvdXAuXG4gIHB1YmxpYyByZWFkb25seSBrZXlNYWtlciA9IG5ldyBLZXlUcmllPG9iamVjdD4oY2FuVXNlV2Vha01hcCk7XG59XG5cbmZ1bmN0aW9uIG1ha2VEZXBLZXkoZGF0YUlkOiBzdHJpbmcsIHN0b3JlRmllbGROYW1lOiBzdHJpbmcpIHtcbiAgLy8gU2luY2UgZmllbGQgbmFtZXMgY2Fubm90IGhhdmUgJyMnIGNoYXJhY3RlcnMgaW4gdGhlbSwgdGhpcyBtZXRob2RcbiAgLy8gb2Ygam9pbmluZyB0aGUgZmllbGQgbmFtZSBhbmQgdGhlIElEIHNob3VsZCBiZSB1bmFtYmlndW91cywgYW5kIG11Y2hcbiAgLy8gY2hlYXBlciB0aGFuIEpTT04uc3RyaW5naWZ5KFtkYXRhSWQsIGZpZWxkTmFtZV0pLlxuICByZXR1cm4gc3RvcmVGaWVsZE5hbWUgKyAnIycgKyBkYXRhSWQ7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgRW50aXR5U3RvcmUge1xuICAvLyBSZWZlciB0byB0aGlzIGNsYXNzIGFzIEVudGl0eVN0b3JlLlJvb3Qgb3V0c2lkZSB0aGlzIG5hbWVzcGFjZS5cbiAgZXhwb3J0IGNsYXNzIFJvb3QgZXh0ZW5kcyBFbnRpdHlTdG9yZSB7XG4gICAgLy8gQWx0aG91Z2ggZWFjaCBSb290IGluc3RhbmNlIGdldHMgaXRzIG93biB1bmlxdWUgQ2FjaGVHcm91cCBvYmplY3QsXG4gICAgLy8gYW55IExheWVyIGluc3RhbmNlcyBjcmVhdGVkIGJ5IGNhbGxpbmcgYWRkTGF5ZXIgbmVlZCB0byBzaGFyZSBhXG4gICAgLy8gc2luZ2xlIGRpc3RpbmN0IENhY2hlR3JvdXAgb2JqZWN0LiBTaW5jZSB0aGlzIHNoYXJlZCBvYmplY3QgbXVzdFxuICAgIC8vIG91dGxhc3QgdGhlIExheWVyIGluc3RhbmNlcyB0aGVtc2VsdmVzLCBpdCBuZWVkcyB0byBiZSBjcmVhdGVkIGFuZFxuICAgIC8vIG93bmVkIGJ5IHRoZSBSb290IGluc3RhbmNlLlxuICAgIHByaXZhdGUgc2hhcmVkTGF5ZXJHcm91cDogQ2FjaGVHcm91cDtcblxuICAgIGNvbnN0cnVjdG9yKHtcbiAgICAgIHBvbGljaWVzLFxuICAgICAgcmVzdWx0Q2FjaGluZyA9IHRydWUsXG4gICAgICBzZWVkLFxuICAgIH06IHtcbiAgICAgIHBvbGljaWVzOiBQb2xpY2llcztcbiAgICAgIHJlc3VsdENhY2hpbmc/OiBib29sZWFuO1xuICAgICAgc2VlZD86IE5vcm1hbGl6ZWRDYWNoZU9iamVjdDtcbiAgICB9KSB7XG4gICAgICBzdXBlcihwb2xpY2llcywgbmV3IENhY2hlR3JvdXAocmVzdWx0Q2FjaGluZykpO1xuICAgICAgdGhpcy5zaGFyZWRMYXllckdyb3VwID0gbmV3IENhY2hlR3JvdXAocmVzdWx0Q2FjaGluZyk7XG4gICAgICBpZiAoc2VlZCkgdGhpcy5yZXBsYWNlKHNlZWQpO1xuICAgIH1cblxuICAgIHB1YmxpYyBhZGRMYXllcihcbiAgICAgIGxheWVySWQ6IHN0cmluZyxcbiAgICAgIHJlcGxheTogKGxheWVyOiBFbnRpdHlTdG9yZSkgPT4gYW55LFxuICAgICk6IExheWVyIHtcbiAgICAgIC8vIFRoZSByZXBsYXkgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgaW4gdGhlIExheWVyIGNvbnN0cnVjdG9yLlxuICAgICAgcmV0dXJuIG5ldyBMYXllcihsYXllcklkLCB0aGlzLCByZXBsYXksIHRoaXMuc2hhcmVkTGF5ZXJHcm91cCk7XG4gICAgfVxuXG4gICAgcHVibGljIHJlbW92ZUxheWVyKCk6IFJvb3Qge1xuICAgICAgLy8gTmV2ZXIgcmVtb3ZlIHRoZSByb290IGxheWVyLlxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgcHVibGljIHJlYWRvbmx5IHN0b3JhZ2VUcmllID0gbmV3IEtleVRyaWU8U3RvcmFnZVR5cGU+KGNhblVzZVdlYWtNYXApO1xuICAgIHB1YmxpYyBnZXRTdG9yYWdlKCk6IFN0b3JhZ2VUeXBlIHtcbiAgICAgIHJldHVybiB0aGlzLnN0b3JhZ2VUcmllLmxvb2t1cEFycmF5KGFyZ3VtZW50cyk7XG4gICAgfVxuICB9XG59XG5cbi8vIE5vdCBleHBvcnRlZCwgc2luY2UgYWxsIExheWVyIGluc3RhbmNlcyBhcmUgY3JlYXRlZCBieSB0aGUgYWRkTGF5ZXIgbWV0aG9kXG4vLyBvZiB0aGUgRW50aXR5U3RvcmUuUm9vdCBjbGFzcy5cbmNsYXNzIExheWVyIGV4dGVuZHMgRW50aXR5U3RvcmUge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgaWQ6IHN0cmluZyxcbiAgICBwdWJsaWMgcmVhZG9ubHkgcGFyZW50OiBFbnRpdHlTdG9yZSxcbiAgICBwdWJsaWMgcmVhZG9ubHkgcmVwbGF5OiAobGF5ZXI6IEVudGl0eVN0b3JlKSA9PiBhbnksXG4gICAgcHVibGljIHJlYWRvbmx5IGdyb3VwOiBDYWNoZUdyb3VwLFxuICApIHtcbiAgICBzdXBlcihwYXJlbnQucG9saWNpZXMsIGdyb3VwKTtcbiAgICByZXBsYXkodGhpcyk7XG4gIH1cblxuICBwdWJsaWMgYWRkTGF5ZXIoXG4gICAgbGF5ZXJJZDogc3RyaW5nLFxuICAgIHJlcGxheTogKGxheWVyOiBFbnRpdHlTdG9yZSkgPT4gYW55LFxuICApOiBMYXllciB7XG4gICAgcmV0dXJuIG5ldyBMYXllcihsYXllcklkLCB0aGlzLCByZXBsYXksIHRoaXMuZ3JvdXApO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZUxheWVyKGxheWVySWQ6IHN0cmluZyk6IEVudGl0eVN0b3JlIHtcbiAgICAvLyBSZW1vdmUgYWxsIGluc3RhbmNlcyBvZiB0aGUgZ2l2ZW4gaWQsIG5vdCBqdXN0IHRoZSBmaXJzdCBvbmUuXG4gICAgY29uc3QgcGFyZW50ID0gdGhpcy5wYXJlbnQucmVtb3ZlTGF5ZXIobGF5ZXJJZCk7XG5cbiAgICBpZiAobGF5ZXJJZCA9PT0gdGhpcy5pZCkge1xuICAgICAgLy8gRGlydHkgZXZlcnkgSUQgd2UncmUgcmVtb3ZpbmcuXG4gICAgICBpZiAodGhpcy5ncm91cC5jYWNoaW5nKSB7XG4gICAgICAgIE9iamVjdC5rZXlzKHRoaXMuZGF0YSkuZm9yRWFjaChkYXRhSWQgPT4ge1xuICAgICAgICAgIC8vIElmIHRoaXMuZGF0YVtkYXRhSWRdIGNvbnRhaW5zIG5vdGhpbmcgZGlmZmVyZW50IGZyb20gd2hhdFxuICAgICAgICAgIC8vIGxpZXMgYmVuZWF0aCwgd2UgY2FuIGF2b2lkIGRpcnR5aW5nIHRoaXMgZGF0YUlkIGFuZCBhbGwgb2ZcbiAgICAgICAgICAvLyBpdHMgZmllbGRzLCBhbmQgc2ltcGx5IGRpc2NhcmQgdGhpcyBMYXllci4gVGhlIG9ubHkgcmVhc29uIHdlXG4gICAgICAgICAgLy8gY2FsbCB0aGlzLmRlbGV0ZSBoZXJlIGlzIHRvIGRpcnR5IHRoZSByZW1vdmVkIGZpZWxkcy5cbiAgICAgICAgICBpZiAodGhpcy5kYXRhW2RhdGFJZF0gIT09IChwYXJlbnQgYXMgTGF5ZXIpLmxvb2t1cChkYXRhSWQpKSB7XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZShkYXRhSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcGFyZW50O1xuICAgIH1cblxuICAgIC8vIE5vIGNoYW5nZXMgYXJlIG5lY2Vzc2FyeSBpZiB0aGUgcGFyZW50IGNoYWluIHJlbWFpbnMgaWRlbnRpY2FsLlxuICAgIGlmIChwYXJlbnQgPT09IHRoaXMucGFyZW50KSByZXR1cm4gdGhpcztcblxuICAgIC8vIFJlY3JlYXRlIHRoaXMgbGF5ZXIgb24gdG9wIG9mIHRoZSBuZXcgcGFyZW50LlxuICAgIHJldHVybiBwYXJlbnQuYWRkTGF5ZXIodGhpcy5pZCwgdGhpcy5yZXBsYXkpO1xuICB9XG5cbiAgcHVibGljIHRvT2JqZWN0KCk6IE5vcm1hbGl6ZWRDYWNoZU9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMucGFyZW50LnRvT2JqZWN0KCksXG4gICAgICAuLi50aGlzLmRhdGEsXG4gICAgfTtcbiAgfVxuXG4gIHB1YmxpYyBmaW5kQ2hpbGRSZWZJZHMoZGF0YUlkOiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCB0cnVlPiB7XG4gICAgY29uc3QgZnJvbVBhcmVudCA9IHRoaXMucGFyZW50LmZpbmRDaGlsZFJlZklkcyhkYXRhSWQpO1xuICAgIHJldHVybiBoYXNPd24uY2FsbCh0aGlzLmRhdGEsIGRhdGFJZCkgPyB7XG4gICAgICAuLi5mcm9tUGFyZW50LFxuICAgICAgLi4uc3VwZXIuZmluZENoaWxkUmVmSWRzKGRhdGFJZCksXG4gICAgfSA6IGZyb21QYXJlbnQ7XG4gIH1cblxuICBwdWJsaWMgZ2V0U3RvcmFnZSgpOiBTdG9yYWdlVHlwZSB7XG4gICAgbGV0IHA6IEVudGl0eVN0b3JlID0gdGhpcy5wYXJlbnQ7XG4gICAgd2hpbGUgKChwIGFzIExheWVyKS5wYXJlbnQpIHAgPSAocCBhcyBMYXllcikucGFyZW50O1xuICAgIHJldHVybiBwLmdldFN0b3JhZ2UuYXBwbHkocCwgYXJndW1lbnRzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBzdG9yZU9iamVjdFJlY29uY2lsZXIoXG4gIGV4aXN0aW5nT2JqZWN0OiBTdG9yZU9iamVjdCxcbiAgaW5jb21pbmdPYmplY3Q6IFN0b3JlT2JqZWN0LFxuICBwcm9wZXJ0eTogc3RyaW5nLFxuKTogU3RvcmVWYWx1ZSB7XG4gIGNvbnN0IGV4aXN0aW5nVmFsdWUgPSBleGlzdGluZ09iamVjdFtwcm9wZXJ0eV07XG4gIGNvbnN0IGluY29taW5nVmFsdWUgPSBpbmNvbWluZ09iamVjdFtwcm9wZXJ0eV07XG4gIC8vIFdoZXJldmVyIHRoZXJlIGlzIGEga2V5IGNvbGxpc2lvbiwgcHJlZmVyIHRoZSBpbmNvbWluZyB2YWx1ZSwgdW5sZXNzXG4gIC8vIGl0IGlzIGRlZXBseSBlcXVhbCB0byB0aGUgZXhpc3RpbmcgdmFsdWUuIEl0J3Mgd29ydGggY2hlY2tpbmcgZGVlcFxuICAvLyBlcXVhbGl0eSBoZXJlIChldmVuIHRob3VnaCBibGluZGx5IHJldHVybmluZyBpbmNvbWluZyB3b3VsZCBiZVxuICAvLyBsb2dpY2FsbHkgY29ycmVjdCkgYmVjYXVzZSBwcmVzZXJ2aW5nIHRoZSByZWZlcmVudGlhbCBpZGVudGl0eSBvZlxuICAvLyBleGlzdGluZyBkYXRhIGNhbiBwcmV2ZW50IG5lZWRsZXNzIHJlcmVhZGluZyBhbmQgcmVyZW5kZXJpbmcuXG4gIHJldHVybiBlcXVhbChleGlzdGluZ1ZhbHVlLCBpbmNvbWluZ1ZhbHVlKSA/IGV4aXN0aW5nVmFsdWUgOiBpbmNvbWluZ1ZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc3VwcG9ydHNSZXN1bHRDYWNoaW5nKHN0b3JlOiBhbnkpOiBzdG9yZSBpcyBFbnRpdHlTdG9yZSB7XG4gIC8vIFdoZW4gcmVzdWx0IGNhY2hpbmcgaXMgZGlzYWJsZWQsIHN0b3JlLmRlcGVuZCB3aWxsIGJlIG51bGwuXG4gIHJldHVybiAhIShzdG9yZSBpbnN0YW5jZW9mIEVudGl0eVN0b3JlICYmIHN0b3JlLmdyb3VwLmNhY2hpbmcpO1xufVxuIiwgImltcG9ydCB7XG4gIERvY3VtZW50Tm9kZSxcbiAgRmllbGROb2RlLFxuICBTZWxlY3Rpb25TZXROb2RlLFxufSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IHdyYXAsIE9wdGltaXN0aWNXcmFwcGVyRnVuY3Rpb24gfSBmcm9tICdvcHRpbWlzbSc7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuaW1wb3J0IHtcbiAgaXNGaWVsZCxcbiAgcmVzdWx0S2V5TmFtZUZyb21GaWVsZCxcbiAgUmVmZXJlbmNlLFxuICBpc1JlZmVyZW5jZSxcbiAgbWFrZVJlZmVyZW5jZSxcbiAgU3RvcmVPYmplY3QsXG4gIGNyZWF0ZUZyYWdtZW50TWFwLFxuICBGcmFnbWVudE1hcCxcbiAgc2hvdWxkSW5jbHVkZSxcbiAgYWRkVHlwZW5hbWVUb0RvY3VtZW50LFxuICBnZXREZWZhdWx0VmFsdWVzLFxuICBnZXRGcmFnbWVudERlZmluaXRpb25zLFxuICBnZXRNYWluRGVmaW5pdGlvbixcbiAgZ2V0UXVlcnlEZWZpbml0aW9uLFxuICBtYXliZURlZXBGcmVlemUsXG4gIG1lcmdlRGVlcEFycmF5LFxuICBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24sXG59IGZyb20gJy4uLy4uL3V0aWxpdGllcyc7XG5pbXBvcnQgeyBDYWNoZSB9IGZyb20gJy4uL2NvcmUvdHlwZXMvQ2FjaGUnO1xuaW1wb3J0IHtcbiAgRGlmZlF1ZXJ5QWdhaW5zdFN0b3JlT3B0aW9ucyxcbiAgTm9ybWFsaXplZENhY2hlLFxuICBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0LFxufSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IHN1cHBvcnRzUmVzdWx0Q2FjaGluZyB9IGZyb20gJy4vZW50aXR5U3RvcmUnO1xuaW1wb3J0IHsgZ2V0VHlwZW5hbWVGcm9tU3RvcmVPYmplY3QgfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgUG9saWNpZXMgfSBmcm9tICcuL3BvbGljaWVzJztcbmltcG9ydCB7IEluTWVtb3J5Q2FjaGUgfSBmcm9tICcuL2luTWVtb3J5Q2FjaGUnO1xuaW1wb3J0IHsgTWlzc2luZ0ZpZWxkRXJyb3IgfSBmcm9tICcuLi9jb3JlL3R5cGVzL2NvbW1vbic7XG5cbmV4cG9ydCB0eXBlIFZhcmlhYmxlTWFwID0geyBbbmFtZTogc3RyaW5nXTogYW55IH07XG5cbmludGVyZmFjZSBSZWFkQ29udGV4dCBleHRlbmRzIFJlYWRNZXJnZU1vZGlmeUNvbnRleHQge1xuICBxdWVyeTogRG9jdW1lbnROb2RlO1xuICBwb2xpY2llczogUG9saWNpZXM7XG4gIGZyYWdtZW50TWFwOiBGcmFnbWVudE1hcDtcbiAgcGF0aDogKHN0cmluZyB8IG51bWJlcilbXTtcbiAgY2xpZW50T25seTogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIEV4ZWNSZXN1bHQ8UiA9IGFueT4gPSB7XG4gIHJlc3VsdDogUjtcbiAgbWlzc2luZz86IE1pc3NpbmdGaWVsZEVycm9yW107XG59O1xuXG5mdW5jdGlvbiBtaXNzaW5nRnJvbUludmFyaWFudChcbiAgZXJyOiBJbnZhcmlhbnRFcnJvcixcbiAgY29udGV4dDogUmVhZENvbnRleHQsXG4pIHtcbiAgcmV0dXJuIG5ldyBNaXNzaW5nRmllbGRFcnJvcihcbiAgICBlcnIubWVzc2FnZSxcbiAgICBjb250ZXh0LnBhdGguc2xpY2UoKSxcbiAgICBjb250ZXh0LnF1ZXJ5LFxuICAgIGNvbnRleHQuY2xpZW50T25seSxcbiAgICBjb250ZXh0LnZhcmlhYmxlcyxcbiAgKTtcbn1cblxudHlwZSBFeGVjU2VsZWN0aW9uU2V0T3B0aW9ucyA9IHtcbiAgc2VsZWN0aW9uU2V0OiBTZWxlY3Rpb25TZXROb2RlO1xuICBvYmplY3RPclJlZmVyZW5jZTogU3RvcmVPYmplY3QgfCBSZWZlcmVuY2U7XG4gIGNvbnRleHQ6IFJlYWRDb250ZXh0O1xufTtcblxudHlwZSBFeGVjU3ViU2VsZWN0ZWRBcnJheU9wdGlvbnMgPSB7XG4gIGZpZWxkOiBGaWVsZE5vZGU7XG4gIGFycmF5OiBhbnlbXTtcbiAgY29udGV4dDogUmVhZENvbnRleHQ7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlUmVhZGVyQ29uZmlnIHtcbiAgY2FjaGU6IEluTWVtb3J5Q2FjaGUsXG4gIGFkZFR5cGVuYW1lPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIFN0b3JlUmVhZGVyIHtcbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IFN0b3JlUmVhZGVyQ29uZmlnKSB7XG4gICAgdGhpcy5jb25maWcgPSB7IGFkZFR5cGVuYW1lOiB0cnVlLCAuLi5jb25maWcgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiBhIHN0b3JlIGFuZCBhIHF1ZXJ5LCByZXR1cm4gYXMgbXVjaCBvZiB0aGUgcmVzdWx0IGFzIHBvc3NpYmxlIGFuZFxuICAgKiBpZGVudGlmeSBpZiBhbnkgZGF0YSB3YXMgbWlzc2luZyBmcm9tIHRoZSBzdG9yZS5cbiAgICogQHBhcmFtICB7RG9jdW1lbnROb2RlfSBxdWVyeSBBIHBhcnNlZCBHcmFwaFFMIHF1ZXJ5IGRvY3VtZW50XG4gICAqIEBwYXJhbSAge1N0b3JlfSBzdG9yZSBUaGUgQXBvbGxvIENsaWVudCBzdG9yZSBvYmplY3RcbiAgICogQHJldHVybiB7cmVzdWx0OiBPYmplY3QsIGNvbXBsZXRlOiBbYm9vbGVhbl19XG4gICAqL1xuICBwdWJsaWMgZGlmZlF1ZXJ5QWdhaW5zdFN0b3JlPFQ+KHtcbiAgICBzdG9yZSxcbiAgICBxdWVyeSxcbiAgICByb290SWQgPSAnUk9PVF9RVUVSWScsXG4gICAgdmFyaWFibGVzLFxuICAgIHJldHVyblBhcnRpYWxEYXRhID0gdHJ1ZSxcbiAgfTogRGlmZlF1ZXJ5QWdhaW5zdFN0b3JlT3B0aW9ucyk6IENhY2hlLkRpZmZSZXN1bHQ8VD4ge1xuICAgIGNvbnN0IHBvbGljaWVzID0gdGhpcy5jb25maWcuY2FjaGUucG9saWNpZXM7XG5cbiAgICB2YXJpYWJsZXMgPSB7XG4gICAgICAuLi5nZXREZWZhdWx0VmFsdWVzKGdldFF1ZXJ5RGVmaW5pdGlvbihxdWVyeSkpLFxuICAgICAgLi4udmFyaWFibGVzLFxuICAgIH07XG5cbiAgICBjb25zdCBleGVjUmVzdWx0ID0gdGhpcy5leGVjdXRlU2VsZWN0aW9uU2V0KHtcbiAgICAgIHNlbGVjdGlvblNldDogZ2V0TWFpbkRlZmluaXRpb24ocXVlcnkpLnNlbGVjdGlvblNldCxcbiAgICAgIG9iamVjdE9yUmVmZXJlbmNlOiBtYWtlUmVmZXJlbmNlKHJvb3RJZCksXG4gICAgICBjb250ZXh0OiB7XG4gICAgICAgIHN0b3JlLFxuICAgICAgICBxdWVyeSxcbiAgICAgICAgcG9saWNpZXMsXG4gICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgdmFyU3RyaW5nOiBKU09OLnN0cmluZ2lmeSh2YXJpYWJsZXMpLFxuICAgICAgICBmcmFnbWVudE1hcDogY3JlYXRlRnJhZ21lbnRNYXAoZ2V0RnJhZ21lbnREZWZpbml0aW9ucyhxdWVyeSkpLFxuICAgICAgICBwYXRoOiBbXSxcbiAgICAgICAgY2xpZW50T25seTogZmFsc2UsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgaGFzTWlzc2luZ0ZpZWxkcyA9XG4gICAgICBleGVjUmVzdWx0Lm1pc3NpbmcgJiYgZXhlY1Jlc3VsdC5taXNzaW5nLmxlbmd0aCA+IDA7XG4gICAgaWYgKGhhc01pc3NpbmdGaWVsZHMgJiYgIXJldHVyblBhcnRpYWxEYXRhKSB7XG4gICAgICB0aHJvdyBleGVjUmVzdWx0Lm1pc3NpbmchWzBdO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICByZXN1bHQ6IGV4ZWNSZXN1bHQucmVzdWx0LFxuICAgICAgbWlzc2luZzogZXhlY1Jlc3VsdC5taXNzaW5nLFxuICAgICAgY29tcGxldGU6ICFoYXNNaXNzaW5nRmllbGRzLFxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgaXNGcmVzaChcbiAgICByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gICAgcGFyZW50OiBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSxcbiAgICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGUsXG4gICAgY29udGV4dDogUmVhZE1lcmdlTW9kaWZ5Q29udGV4dCxcbiAgKTogYm9vbGVhbiB7XG4gICAgaWYgKHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhjb250ZXh0LnN0b3JlKSAmJlxuICAgICAgICB0aGlzLmtub3duUmVzdWx0cy5nZXQocmVzdWx0KSA9PT0gc2VsZWN0aW9uU2V0KSB7XG4gICAgICBjb25zdCBsYXRlc3QgPSB0aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQucGVlayhzZWxlY3Rpb25TZXQsIHBhcmVudCwgY29udGV4dCk7XG4gICAgICBpZiAobGF0ZXN0ICYmIHJlc3VsdCA9PT0gbGF0ZXN0LnJlc3VsdCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gQ2FjaGVkIHZlcnNpb24gb2YgZXhlY1NlbGVjdGlvblNldEltcGwuXG4gIHByaXZhdGUgZXhlY3V0ZVNlbGVjdGlvblNldDogT3B0aW1pc3RpY1dyYXBwZXJGdW5jdGlvbjxcbiAgICBbRXhlY1NlbGVjdGlvblNldE9wdGlvbnNdLCAvLyBBY3R1YWwgYXJndW1lbnRzIHR1cGxlIHR5cGUuXG4gICAgRXhlY1Jlc3VsdCwgLy8gQWN0dWFsIHJldHVybiB0eXBlLlxuICAgIC8vIEFyZ3VtZW50cyB0eXBlIGFmdGVyIGtleUFyZ3MgdHJhbnNsYXRpb24uXG4gICAgW1NlbGVjdGlvblNldE5vZGUsIFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlLCBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0XVxuICA+ID0gd3JhcChvcHRpb25zID0+IHRoaXMuZXhlY1NlbGVjdGlvblNldEltcGwob3B0aW9ucyksIHtcbiAgICBrZXlBcmdzKG9wdGlvbnMpIHtcbiAgICAgIHJldHVybiBbXG4gICAgICAgIG9wdGlvbnMuc2VsZWN0aW9uU2V0LFxuICAgICAgICBvcHRpb25zLm9iamVjdE9yUmVmZXJlbmNlLFxuICAgICAgICBvcHRpb25zLmNvbnRleHQsXG4gICAgICBdO1xuICAgIH0sXG4gICAgLy8gTm90ZSB0aGF0IHRoZSBwYXJhbWV0ZXJzIG9mIG1ha2VDYWNoZUtleSBhcmUgZGV0ZXJtaW5lZCBieSB0aGVcbiAgICAvLyBhcnJheSByZXR1cm5lZCBieSBrZXlBcmdzLlxuICAgIG1ha2VDYWNoZUtleShzZWxlY3Rpb25TZXQsIHBhcmVudCwgY29udGV4dCkge1xuICAgICAgaWYgKHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhjb250ZXh0LnN0b3JlKSkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5zdG9yZS5tYWtlQ2FjaGVLZXkoXG4gICAgICAgICAgc2VsZWN0aW9uU2V0LFxuICAgICAgICAgIGlzUmVmZXJlbmNlKHBhcmVudCkgPyBwYXJlbnQuX19yZWYgOiBwYXJlbnQsXG4gICAgICAgICAgY29udGV4dC52YXJTdHJpbmcsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBVbmNhY2hlZCB2ZXJzaW9uIG9mIGV4ZWN1dGVTZWxlY3Rpb25TZXQuXG4gIHByaXZhdGUgZXhlY1NlbGVjdGlvblNldEltcGwoe1xuICAgIHNlbGVjdGlvblNldCxcbiAgICBvYmplY3RPclJlZmVyZW5jZSxcbiAgICBjb250ZXh0LFxuICB9OiBFeGVjU2VsZWN0aW9uU2V0T3B0aW9ucyk6IEV4ZWNSZXN1bHQge1xuICAgIGlmIChpc1JlZmVyZW5jZShvYmplY3RPclJlZmVyZW5jZSkgJiZcbiAgICAgICAgIWNvbnRleHQucG9saWNpZXMucm9vdFR5cGVuYW1lc0J5SWRbb2JqZWN0T3JSZWZlcmVuY2UuX19yZWZdICYmXG4gICAgICAgICFjb250ZXh0LnN0b3JlLmhhcyhvYmplY3RPclJlZmVyZW5jZS5fX3JlZikpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHJlc3VsdDoge30sXG4gICAgICAgIG1pc3Npbmc6IFttaXNzaW5nRnJvbUludmFyaWFudChcbiAgICAgICAgICBuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgICAgICAgICBgRGFuZ2xpbmcgcmVmZXJlbmNlIHRvIG1pc3NpbmcgJHtvYmplY3RPclJlZmVyZW5jZS5fX3JlZn0gb2JqZWN0YFxuICAgICAgICAgICksXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgKV0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IHsgdmFyaWFibGVzLCBwb2xpY2llcywgc3RvcmUgfSA9IGNvbnRleHQ7XG4gICAgY29uc3Qgb2JqZWN0c1RvTWVyZ2U6IHsgW2tleTogc3RyaW5nXTogYW55IH1bXSA9IFtdO1xuICAgIGNvbnN0IGZpbmFsUmVzdWx0OiBFeGVjUmVzdWx0ID0geyByZXN1bHQ6IG51bGwgfTtcbiAgICBjb25zdCB0eXBlbmFtZSA9IHN0b3JlLmdldEZpZWxkVmFsdWU8c3RyaW5nPihvYmplY3RPclJlZmVyZW5jZSwgXCJfX3R5cGVuYW1lXCIpO1xuXG4gICAgaWYgKHRoaXMuY29uZmlnLmFkZFR5cGVuYW1lICYmXG4gICAgICAgIHR5cGVvZiB0eXBlbmFtZSA9PT0gXCJzdHJpbmdcIiAmJlxuICAgICAgICAhcG9saWNpZXMucm9vdElkc0J5VHlwZW5hbWVbdHlwZW5hbWVdKSB7XG4gICAgICAvLyBFbnN1cmUgd2UgYWx3YXlzIGluY2x1ZGUgYSBkZWZhdWx0IHZhbHVlIGZvciB0aGUgX190eXBlbmFtZVxuICAgICAgLy8gZmllbGQsIGlmIHdlIGhhdmUgb25lLCBhbmQgdGhpcy5jb25maWcuYWRkVHlwZW5hbWUgaXMgdHJ1ZS4gTm90ZVxuICAgICAgLy8gdGhhdCB0aGlzIGZpZWxkIGNhbiBiZSBvdmVycmlkZGVuIGJ5IG90aGVyIG1lcmdlZCBvYmplY3RzLlxuICAgICAgb2JqZWN0c1RvTWVyZ2UucHVzaCh7IF9fdHlwZW5hbWU6IHR5cGVuYW1lIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGdldE1pc3NpbmcoKSB7XG4gICAgICByZXR1cm4gZmluYWxSZXN1bHQubWlzc2luZyB8fCAoZmluYWxSZXN1bHQubWlzc2luZyA9IFtdKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVNaXNzaW5nPFQ+KHJlc3VsdDogRXhlY1Jlc3VsdDxUPik6IFQge1xuICAgICAgaWYgKHJlc3VsdC5taXNzaW5nKSBnZXRNaXNzaW5nKCkucHVzaCguLi5yZXN1bHQubWlzc2luZyk7XG4gICAgICByZXR1cm4gcmVzdWx0LnJlc3VsdDtcbiAgICB9XG5cbiAgICBjb25zdCB3b3JrU2V0ID0gbmV3IFNldChzZWxlY3Rpb25TZXQuc2VsZWN0aW9ucyk7XG5cbiAgICB3b3JrU2V0LmZvckVhY2goc2VsZWN0aW9uID0+IHtcbiAgICAgIC8vIE9taXQgZmllbGRzIHdpdGggZGlyZWN0aXZlcyBAc2tpcChpZjogPHRydXRoeSB2YWx1ZT4pIG9yXG4gICAgICAvLyBAaW5jbHVkZShpZjogPGZhbHN5IHZhbHVlPikuXG4gICAgICBpZiAoIXNob3VsZEluY2x1ZGUoc2VsZWN0aW9uLCB2YXJpYWJsZXMpKSByZXR1cm47XG5cbiAgICAgIGlmIChpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgbGV0IGZpZWxkVmFsdWUgPSBwb2xpY2llcy5yZWFkRmllbGQoe1xuICAgICAgICAgIGZpZWxkTmFtZTogc2VsZWN0aW9uLm5hbWUudmFsdWUsXG4gICAgICAgICAgZmllbGQ6IHNlbGVjdGlvbixcbiAgICAgICAgICB2YXJpYWJsZXM6IGNvbnRleHQudmFyaWFibGVzLFxuICAgICAgICAgIGZyb206IG9iamVjdE9yUmVmZXJlbmNlLFxuICAgICAgICB9LCBjb250ZXh0KTtcblxuICAgICAgICBjb25zdCByZXN1bHROYW1lID0gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChzZWxlY3Rpb24pO1xuICAgICAgICBjb250ZXh0LnBhdGgucHVzaChyZXN1bHROYW1lKTtcblxuICAgICAgICAvLyBJZiB0aGlzIGZpZWxkIGhhcyBhbiBAY2xpZW50IGRpcmVjdGl2ZSwgdGhlbiB0aGUgZmllbGQgYW5kXG4gICAgICAgIC8vIGV2ZXJ5dGhpbmcgYmVuZWF0aCBpdCBpcyBjbGllbnQtb25seSwgbWVhbmluZyBpdCB3aWxsIG5ldmVyIGJlXG4gICAgICAgIC8vIHNlbnQgdG8gdGhlIHNlcnZlci5cbiAgICAgICAgY29uc3Qgd2FzQ2xpZW50T25seSA9IGNvbnRleHQuY2xpZW50T25seTtcbiAgICAgICAgLy8gT25jZSB3ZSBlbnRlciBhIGNsaWVudC1vbmx5IHN1YnRyZWUgb2YgdGhlIHF1ZXJ5LCB3ZSBjYW4gYXZvaWRcbiAgICAgICAgLy8gcmVwZWF0ZWRseSBjaGVja2luZyBzZWxlY3Rpb24uZGlyZWN0aXZlcy5cbiAgICAgICAgY29udGV4dC5jbGllbnRPbmx5ID0gd2FzQ2xpZW50T25seSB8fCAhIShcbiAgICAgICAgICAvLyBXZSBkb24ndCB1c2UgdGhlIGhhc0RpcmVjdGl2ZXMgaGVscGVyIGhlcmUsIGJlY2F1c2UgaXQgbG9va3NcbiAgICAgICAgICAvLyBmb3IgZGlyZWN0aXZlcyBhbnl3aGVyZSBpbnNpZGUgdGhlIEFTVCBub2RlLCB3aGVyZWFzIHdlIG9ubHlcbiAgICAgICAgICAvLyBjYXJlIGFib3V0IGRpcmVjdGl2ZXMgZGlyZWN0bHkgYXR0YWNoZWQgdG8gdGhpcyBmaWVsZC5cbiAgICAgICAgICBzZWxlY3Rpb24uZGlyZWN0aXZlcyAmJlxuICAgICAgICAgIHNlbGVjdGlvbi5kaXJlY3RpdmVzLnNvbWUoZCA9PiBkLm5hbWUudmFsdWUgPT09IFwiY2xpZW50XCIpXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGZpZWxkVmFsdWUgPT09IHZvaWQgMCkge1xuICAgICAgICAgIGlmICghYWRkVHlwZW5hbWVUb0RvY3VtZW50LmFkZGVkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgICAgIGdldE1pc3NpbmcoKS5wdXNoKFxuICAgICAgICAgICAgICBtaXNzaW5nRnJvbUludmFyaWFudChcbiAgICAgICAgICAgICAgICBuZXcgSW52YXJpYW50RXJyb3IoYENhbid0IGZpbmQgZmllbGQgJyR7XG4gICAgICAgICAgICAgICAgICBzZWxlY3Rpb24ubmFtZS52YWx1ZVxuICAgICAgICAgICAgICAgIH0nIG9uICR7XG4gICAgICAgICAgICAgICAgICBpc1JlZmVyZW5jZShvYmplY3RPclJlZmVyZW5jZSlcbiAgICAgICAgICAgICAgICAgICAgPyBvYmplY3RPclJlZmVyZW5jZS5fX3JlZiArIFwiIG9iamVjdFwiXG4gICAgICAgICAgICAgICAgICAgIDogXCJvYmplY3QgXCIgKyBKU09OLnN0cmluZ2lmeShvYmplY3RPclJlZmVyZW5jZSwgbnVsbCwgMilcbiAgICAgICAgICAgICAgICB9YCksXG4gICAgICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICAgICAgKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShmaWVsZFZhbHVlKSkge1xuICAgICAgICAgIGZpZWxkVmFsdWUgPSBoYW5kbGVNaXNzaW5nKHRoaXMuZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXkoe1xuICAgICAgICAgICAgZmllbGQ6IHNlbGVjdGlvbixcbiAgICAgICAgICAgIGFycmF5OiBmaWVsZFZhbHVlLFxuICAgICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICB9KSk7XG5cbiAgICAgICAgfSBlbHNlIGlmICghc2VsZWN0aW9uLnNlbGVjdGlvblNldCkge1xuICAgICAgICAgIC8vIElmIHRoZSBmaWVsZCBkb2VzIG5vdCBoYXZlIGEgc2VsZWN0aW9uIHNldCwgdGhlbiB3ZSBoYW5kbGUgaXRcbiAgICAgICAgICAvLyBhcyBhIHNjYWxhciB2YWx1ZS4gSG93ZXZlciwgdGhhdCB2YWx1ZSBzaG91bGQgbm90IGNvbnRhaW4gYW55XG4gICAgICAgICAgLy8gUmVmZXJlbmNlIG9iamVjdHMsIGFuZCBzaG91bGQgYmUgZnJvemVuIGluIGRldmVsb3BtZW50LCBpZiBpdFxuICAgICAgICAgIC8vIGhhcHBlbnMgdG8gYmUgYW4gb2JqZWN0IHRoYXQgaXMgbXV0YWJsZS5cbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgICAgYXNzZXJ0U2VsZWN0aW9uU2V0Rm9ySWRWYWx1ZShcbiAgICAgICAgICAgICAgY29udGV4dC5zdG9yZSxcbiAgICAgICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICAgICAgICBmaWVsZFZhbHVlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIG1heWJlRGVlcEZyZWV6ZShmaWVsZFZhbHVlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChmaWVsZFZhbHVlICE9IG51bGwpIHtcbiAgICAgICAgICAvLyBJbiB0aGlzIGNhc2UsIGJlY2F1c2Ugd2Uga25vdyB0aGUgZmllbGQgaGFzIGEgc2VsZWN0aW9uIHNldCxcbiAgICAgICAgICAvLyBpdCBtdXN0IGJlIHRyeWluZyB0byBxdWVyeSBhIEdyYXBoUUxPYmplY3RUeXBlLCB3aGljaCBpcyB3aHlcbiAgICAgICAgICAvLyBmaWVsZFZhbHVlIG11c3QgYmUgIT0gbnVsbC5cbiAgICAgICAgICBmaWVsZFZhbHVlID0gaGFuZGxlTWlzc2luZyh0aGlzLmV4ZWN1dGVTZWxlY3Rpb25TZXQoe1xuICAgICAgICAgICAgc2VsZWN0aW9uU2V0OiBzZWxlY3Rpb24uc2VsZWN0aW9uU2V0LFxuICAgICAgICAgICAgb2JqZWN0T3JSZWZlcmVuY2U6IGZpZWxkVmFsdWUgYXMgU3RvcmVPYmplY3QgfCBSZWZlcmVuY2UsXG4gICAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmaWVsZFZhbHVlICE9PSB2b2lkIDApIHtcbiAgICAgICAgICBvYmplY3RzVG9NZXJnZS5wdXNoKHsgW3Jlc3VsdE5hbWVdOiBmaWVsZFZhbHVlIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgY29udGV4dC5jbGllbnRPbmx5ID0gd2FzQ2xpZW50T25seTtcblxuICAgICAgICBpbnZhcmlhbnQoY29udGV4dC5wYXRoLnBvcCgpID09PSByZXN1bHROYW1lKTtcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24oXG4gICAgICAgICAgc2VsZWN0aW9uLFxuICAgICAgICAgIGNvbnRleHQuZnJhZ21lbnRNYXAsXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGZyYWdtZW50ICYmIHBvbGljaWVzLmZyYWdtZW50TWF0Y2hlcyhmcmFnbWVudCwgdHlwZW5hbWUpKSB7XG4gICAgICAgICAgZnJhZ21lbnQuc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMuZm9yRWFjaCh3b3JrU2V0LmFkZCwgd29ya1NldCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFBlcmZvcm0gYSBzaW5nbGUgbWVyZ2UgYXQgdGhlIGVuZCBzbyB0aGF0IHdlIGNhbiBhdm9pZCBtYWtpbmcgbW9yZVxuICAgIC8vIGRlZmVuc2l2ZSBzaGFsbG93IGNvcGllcyB0aGFuIG5lY2Vzc2FyeS5cbiAgICBmaW5hbFJlc3VsdC5yZXN1bHQgPSBtZXJnZURlZXBBcnJheShvYmplY3RzVG9NZXJnZSk7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgT2JqZWN0LmZyZWV6ZShmaW5hbFJlc3VsdC5yZXN1bHQpO1xuICAgIH1cblxuICAgIC8vIFN0b3JlIHRoaXMgcmVzdWx0IHdpdGggaXRzIHNlbGVjdGlvbiBzZXQgc28gdGhhdCB3ZSBjYW4gcXVpY2tseVxuICAgIC8vIHJlY29nbml6ZSBpdCBhZ2FpbiBpbiB0aGUgU3RvcmVSZWFkZXIjaXNGcmVzaCBtZXRob2QuXG4gICAgdGhpcy5rbm93blJlc3VsdHMuc2V0KGZpbmFsUmVzdWx0LnJlc3VsdCwgc2VsZWN0aW9uU2V0KTtcblxuICAgIHJldHVybiBmaW5hbFJlc3VsdDtcbiAgfVxuXG4gIHByaXZhdGUga25vd25SZXN1bHRzID0gbmV3IFdlYWtNYXA8UmVjb3JkPHN0cmluZywgYW55PiwgU2VsZWN0aW9uU2V0Tm9kZT4oKTtcblxuICAvLyBDYWNoZWQgdmVyc2lvbiBvZiBleGVjU3ViU2VsZWN0ZWRBcnJheUltcGwuXG4gIHByaXZhdGUgZXhlY3V0ZVN1YlNlbGVjdGVkQXJyYXkgPSB3cmFwKChvcHRpb25zOiBFeGVjU3ViU2VsZWN0ZWRBcnJheU9wdGlvbnMpID0+IHtcbiAgICByZXR1cm4gdGhpcy5leGVjU3ViU2VsZWN0ZWRBcnJheUltcGwob3B0aW9ucyk7XG4gIH0sIHtcbiAgICBtYWtlQ2FjaGVLZXkoeyBmaWVsZCwgYXJyYXksIGNvbnRleHQgfSkge1xuICAgICAgaWYgKHN1cHBvcnRzUmVzdWx0Q2FjaGluZyhjb250ZXh0LnN0b3JlKSkge1xuICAgICAgICByZXR1cm4gY29udGV4dC5zdG9yZS5tYWtlQ2FjaGVLZXkoXG4gICAgICAgICAgZmllbGQsXG4gICAgICAgICAgYXJyYXksXG4gICAgICAgICAgY29udGV4dC52YXJTdHJpbmcsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvLyBVbmNhY2hlZCB2ZXJzaW9uIG9mIGV4ZWN1dGVTdWJTZWxlY3RlZEFycmF5LlxuICBwcml2YXRlIGV4ZWNTdWJTZWxlY3RlZEFycmF5SW1wbCh7XG4gICAgZmllbGQsXG4gICAgYXJyYXksXG4gICAgY29udGV4dCxcbiAgfTogRXhlY1N1YlNlbGVjdGVkQXJyYXlPcHRpb25zKTogRXhlY1Jlc3VsdCB7XG4gICAgbGV0IG1pc3Npbmc6IE1pc3NpbmdGaWVsZEVycm9yW10gfCB1bmRlZmluZWQ7XG5cbiAgICBmdW5jdGlvbiBoYW5kbGVNaXNzaW5nPFQ+KGNoaWxkUmVzdWx0OiBFeGVjUmVzdWx0PFQ+LCBpOiBudW1iZXIpOiBUIHtcbiAgICAgIGlmIChjaGlsZFJlc3VsdC5taXNzaW5nKSB7XG4gICAgICAgIG1pc3NpbmcgPSBtaXNzaW5nIHx8IFtdO1xuICAgICAgICBtaXNzaW5nLnB1c2goLi4uY2hpbGRSZXN1bHQubWlzc2luZyk7XG4gICAgICB9XG5cbiAgICAgIGludmFyaWFudChjb250ZXh0LnBhdGgucG9wKCkgPT09IGkpO1xuXG4gICAgICByZXR1cm4gY2hpbGRSZXN1bHQucmVzdWx0O1xuICAgIH1cblxuICAgIGlmIChmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgIGFycmF5ID0gYXJyYXkuZmlsdGVyKGNvbnRleHQuc3RvcmUuY2FuUmVhZCk7XG4gICAgfVxuXG4gICAgYXJyYXkgPSBhcnJheS5tYXAoKGl0ZW0sIGkpID0+IHtcbiAgICAgIC8vIG51bGwgdmFsdWUgaW4gYXJyYXlcbiAgICAgIGlmIChpdGVtID09PSBudWxsKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0LnBhdGgucHVzaChpKTtcblxuICAgICAgLy8gVGhpcyBpcyBhIG5lc3RlZCBhcnJheSwgcmVjdXJzZVxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaXRlbSkpIHtcbiAgICAgICAgcmV0dXJuIGhhbmRsZU1pc3NpbmcodGhpcy5leGVjdXRlU3ViU2VsZWN0ZWRBcnJheSh7XG4gICAgICAgICAgZmllbGQsXG4gICAgICAgICAgYXJyYXk6IGl0ZW0sXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgfSksIGkpO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGlzIGlzIGFuIG9iamVjdCwgcnVuIHRoZSBzZWxlY3Rpb24gc2V0IG9uIGl0XG4gICAgICBpZiAoZmllbGQuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgIHJldHVybiBoYW5kbGVNaXNzaW5nKHRoaXMuZXhlY3V0ZVNlbGVjdGlvblNldCh7XG4gICAgICAgICAgc2VsZWN0aW9uU2V0OiBmaWVsZC5zZWxlY3Rpb25TZXQsXG4gICAgICAgICAgb2JqZWN0T3JSZWZlcmVuY2U6IGl0ZW0sXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgfSksIGkpO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICBhc3NlcnRTZWxlY3Rpb25TZXRGb3JJZFZhbHVlKGNvbnRleHQuc3RvcmUsIGZpZWxkLCBpdGVtKTtcbiAgICAgIH1cblxuICAgICAgaW52YXJpYW50KGNvbnRleHQucGF0aC5wb3AoKSA9PT0gaSk7XG5cbiAgICAgIHJldHVybiBpdGVtO1xuICAgIH0pO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIE9iamVjdC5mcmVlemUoYXJyYXkpO1xuICAgIH1cblxuICAgIHJldHVybiB7IHJlc3VsdDogYXJyYXksIG1pc3NpbmcgfTtcbiAgfVxufVxuXG5mdW5jdGlvbiBhc3NlcnRTZWxlY3Rpb25TZXRGb3JJZFZhbHVlKFxuICBzdG9yZTogTm9ybWFsaXplZENhY2hlLFxuICBmaWVsZDogRmllbGROb2RlLFxuICBmaWVsZFZhbHVlOiBhbnksXG4pIHtcbiAgaWYgKCFmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICBjb25zdCB3b3JrU2V0ID0gbmV3IFNldChbZmllbGRWYWx1ZV0pO1xuICAgIHdvcmtTZXQuZm9yRWFjaCh2YWx1ZSA9PiB7XG4gICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgIGludmFyaWFudChcbiAgICAgICAgICAhaXNSZWZlcmVuY2UodmFsdWUpLFxuICAgICAgICAgIGBNaXNzaW5nIHNlbGVjdGlvbiBzZXQgZm9yIG9iamVjdCBvZiB0eXBlICR7XG4gICAgICAgICAgICBnZXRUeXBlbmFtZUZyb21TdG9yZU9iamVjdChzdG9yZSwgdmFsdWUpXG4gICAgICAgICAgfSByZXR1cm5lZCBmb3IgcXVlcnkgZmllbGQgJHtmaWVsZC5uYW1lLnZhbHVlfWAsXG4gICAgICAgICk7XG4gICAgICAgIE9iamVjdC52YWx1ZXModmFsdWUpLmZvckVhY2god29ya1NldC5hZGQsIHdvcmtTZXQpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iLCAiaW1wb3J0IHsgU2VsZWN0aW9uU2V0Tm9kZSwgRmllbGROb2RlLCBEb2N1bWVudE5vZGUgfSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IGludmFyaWFudCwgSW52YXJpYW50RXJyb3IgfSBmcm9tICd0cy1pbnZhcmlhbnQnO1xuaW1wb3J0IHsgZXF1YWwgfSBmcm9tICdAd3J5L2VxdWFsaXR5JztcblxuaW1wb3J0IHtcbiAgY3JlYXRlRnJhZ21lbnRNYXAsXG4gIEZyYWdtZW50TWFwLFxuICBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24sXG4gIGdldERlZmF1bHRWYWx1ZXMsXG4gIGdldEZyYWdtZW50RGVmaW5pdGlvbnMsXG4gIGdldE9wZXJhdGlvbkRlZmluaXRpb24sXG4gIGdldFR5cGVuYW1lRnJvbVJlc3VsdCxcbiAgbWFrZVJlZmVyZW5jZSxcbiAgaXNGaWVsZCxcbiAgcmVzdWx0S2V5TmFtZUZyb21GaWVsZCxcbiAgU3RvcmVWYWx1ZSxcbiAgU3RvcmVPYmplY3QsXG4gIFJlZmVyZW5jZSxcbiAgaXNSZWZlcmVuY2UsXG4gIHNob3VsZEluY2x1ZGUsXG4gIGhhc0RpcmVjdGl2ZXMsXG4gIGNsb25lRGVlcCxcbn0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzJztcblxuaW1wb3J0IHsgTm9ybWFsaXplZENhY2hlLCBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0LCBNZXJnZVRyZWUgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IG1ha2VQcm9jZXNzZWRGaWVsZHNNZXJnZXIsIGZpZWxkTmFtZUZyb21TdG9yZU5hbWUsIHN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0IH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCB7IFN0b3JlUmVhZGVyIH0gZnJvbSAnLi9yZWFkRnJvbVN0b3JlJztcbmltcG9ydCB7IEluTWVtb3J5Q2FjaGUgfSBmcm9tICcuL2luTWVtb3J5Q2FjaGUnO1xuaW1wb3J0IHsgRW50aXR5U3RvcmUgfSBmcm9tICcuL2VudGl0eVN0b3JlJztcblxuZXhwb3J0IGludGVyZmFjZSBXcml0ZUNvbnRleHQgZXh0ZW5kcyBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0IHtcbiAgcmVhZG9ubHkgd3JpdHRlbjoge1xuICAgIFtkYXRhSWQ6IHN0cmluZ106IFNlbGVjdGlvblNldE5vZGVbXTtcbiAgfTtcbiAgcmVhZG9ubHkgZnJhZ21lbnRNYXA/OiBGcmFnbWVudE1hcDtcbiAgLy8gR2VuZXJhbC1wdXJwb3NlIGRlZXAtbWVyZ2UgZnVuY3Rpb24gZm9yIHVzZSBkdXJpbmcgd3JpdGVzLlxuICBtZXJnZTxUPihleGlzdGluZzogVCwgaW5jb21pbmc6IFQpOiBUO1xufTtcblxuaW50ZXJmYWNlIFByb2Nlc3NTZWxlY3Rpb25TZXRPcHRpb25zIHtcbiAgZGF0YUlkPzogc3RyaW5nLFxuICByZXN1bHQ6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIHNlbGVjdGlvblNldDogU2VsZWN0aW9uU2V0Tm9kZTtcbiAgY29udGV4dDogV3JpdGVDb250ZXh0O1xuICBtZXJnZVRyZWU6IE1lcmdlVHJlZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBXcml0ZVRvU3RvcmVPcHRpb25zIHtcbiAgcXVlcnk6IERvY3VtZW50Tm9kZTtcbiAgcmVzdWx0OiBPYmplY3Q7XG4gIGRhdGFJZD86IHN0cmluZztcbiAgc3RvcmU6IE5vcm1hbGl6ZWRDYWNoZTtcbiAgdmFyaWFibGVzPzogT2JqZWN0O1xufVxuXG5leHBvcnQgY2xhc3MgU3RvcmVXcml0ZXIge1xuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgcmVhZG9ubHkgY2FjaGU6IEluTWVtb3J5Q2FjaGUsXG4gICAgcHJpdmF0ZSByZWFkZXI/OiBTdG9yZVJlYWRlcixcbiAgKSB7fVxuXG4gIC8qKlxuICAgKiBXcml0ZXMgdGhlIHJlc3VsdCBvZiBhIHF1ZXJ5IHRvIHRoZSBzdG9yZS5cbiAgICpcbiAgICogQHBhcmFtIHJlc3VsdCBUaGUgcmVzdWx0IG9iamVjdCByZXR1cm5lZCBmb3IgdGhlIHF1ZXJ5IGRvY3VtZW50LlxuICAgKlxuICAgKiBAcGFyYW0gcXVlcnkgVGhlIHF1ZXJ5IGRvY3VtZW50IHdob3NlIHJlc3VsdCB3ZSBhcmUgd3JpdGluZyB0byB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEBwYXJhbSBzdG9yZSBUaGUge0BsaW5rIE5vcm1hbGl6ZWRDYWNoZX0gdXNlZCBieSBBcG9sbG8gZm9yIHRoZSBgZGF0YWAgcG9ydGlvbiBvZiB0aGUgc3RvcmUuXG4gICAqXG4gICAqIEBwYXJhbSB2YXJpYWJsZXMgQSBtYXAgZnJvbSB0aGUgbmFtZSBvZiBhIHZhcmlhYmxlIHRvIGl0cyB2YWx1ZS4gVGhlc2UgdmFyaWFibGVzIGNhbiBiZVxuICAgKiByZWZlcmVuY2VkIGJ5IHRoZSBxdWVyeSBkb2N1bWVudC5cbiAgICpcbiAgICogQHJldHVybiBBIGBSZWZlcmVuY2VgIHRvIHRoZSB3cml0dGVuIG9iamVjdC5cbiAgICovXG4gIHB1YmxpYyB3cml0ZVRvU3RvcmUoe1xuICAgIHF1ZXJ5LFxuICAgIHJlc3VsdCxcbiAgICBkYXRhSWQsXG4gICAgc3RvcmUsXG4gICAgdmFyaWFibGVzLFxuICB9OiBXcml0ZVRvU3RvcmVPcHRpb25zKTogUmVmZXJlbmNlIHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBvcGVyYXRpb25EZWZpbml0aW9uID0gZ2V0T3BlcmF0aW9uRGVmaW5pdGlvbihxdWVyeSkhO1xuICAgIGNvbnN0IG1lcmdlciA9IG1ha2VQcm9jZXNzZWRGaWVsZHNNZXJnZXIoKTtcblxuICAgIHZhcmlhYmxlcyA9IHtcbiAgICAgIC4uLmdldERlZmF1bHRWYWx1ZXMob3BlcmF0aW9uRGVmaW5pdGlvbiksXG4gICAgICAuLi52YXJpYWJsZXMsXG4gICAgfTtcblxuICAgIGNvbnN0IHJlZiA9IHRoaXMucHJvY2Vzc1NlbGVjdGlvblNldCh7XG4gICAgICByZXN1bHQ6IHJlc3VsdCB8fCBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAgZGF0YUlkLFxuICAgICAgc2VsZWN0aW9uU2V0OiBvcGVyYXRpb25EZWZpbml0aW9uLnNlbGVjdGlvblNldCxcbiAgICAgIG1lcmdlVHJlZTogeyBtYXA6IG5ldyBNYXAgfSxcbiAgICAgIGNvbnRleHQ6IHtcbiAgICAgICAgc3RvcmUsXG4gICAgICAgIHdyaXR0ZW46IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICAgIG1lcmdlPFQ+KGV4aXN0aW5nOiBULCBpbmNvbWluZzogVCkge1xuICAgICAgICAgIHJldHVybiBtZXJnZXIubWVyZ2UoZXhpc3RpbmcsIGluY29taW5nKSBhcyBUO1xuICAgICAgICB9LFxuICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIHZhclN0cmluZzogSlNPTi5zdHJpbmdpZnkodmFyaWFibGVzKSxcbiAgICAgICAgZnJhZ21lbnRNYXA6IGNyZWF0ZUZyYWdtZW50TWFwKGdldEZyYWdtZW50RGVmaW5pdGlvbnMocXVlcnkpKSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIWlzUmVmZXJlbmNlKHJlZikpIHtcbiAgICAgIHRocm93IG5ldyBJbnZhcmlhbnRFcnJvcihgQ291bGQgbm90IGlkZW50aWZ5IG9iamVjdCAke0pTT04uc3RyaW5naWZ5KHJlc3VsdCl9YCk7XG4gICAgfVxuXG4gICAgLy8gQW55IElEcyB3cml0dGVuIGV4cGxpY2l0bHkgdG8gdGhlIGNhY2hlIHdpbGwgYmUgcmV0YWluZWQgYXNcbiAgICAvLyByZWFjaGFibGUgcm9vdCBJRHMgZm9yIGdhcmJhZ2UgY29sbGVjdGlvbiBwdXJwb3Nlcy4gQWx0aG91Z2ggdGhpc1xuICAgIC8vIGxvZ2ljIGluY2x1ZGVzIHJvb3QgSURzIGxpa2UgUk9PVF9RVUVSWSBhbmQgUk9PVF9NVVRBVElPTiwgdGhlaXJcbiAgICAvLyByZXRhaW5tZW50IGNvdW50cyBhcmUgZWZmZWN0aXZlbHkgaWdub3JlZCBiZWNhdXNlIGNhY2hlLmdjKCkgYWx3YXlzXG4gICAgLy8gaW5jbHVkZXMgdGhlbSBpbiBpdHMgcm9vdCBJRCBzZXQuXG4gICAgc3RvcmUucmV0YWluKHJlZi5fX3JlZik7XG5cbiAgICByZXR1cm4gcmVmO1xuICB9XG5cbiAgcHJpdmF0ZSBwcm9jZXNzU2VsZWN0aW9uU2V0KHtcbiAgICBkYXRhSWQsXG4gICAgcmVzdWx0LFxuICAgIHNlbGVjdGlvblNldCxcbiAgICBjb250ZXh0LFxuICAgIC8vIFRoaXMgb2JqZWN0IGFsbG93cyBwcm9jZXNzU2VsZWN0aW9uU2V0IHRvIHJlcG9ydCB1c2VmdWwgaW5mb3JtYXRpb25cbiAgICAvLyB0byBpdHMgY2FsbGVycyB3aXRob3V0IGV4cGxpY2l0bHkgcmV0dXJuaW5nIHRoYXQgaW5mb3JtYXRpb24uXG4gICAgbWVyZ2VUcmVlLFxuICB9OiBQcm9jZXNzU2VsZWN0aW9uU2V0T3B0aW9ucyk6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlIHtcbiAgICBjb25zdCB7IHBvbGljaWVzIH0gPSB0aGlzLmNhY2hlO1xuXG4gICAgLy8gSWRlbnRpZnkgdGhlIHJlc3VsdCBvYmplY3QsIGV2ZW4gaWYgZGF0YUlkIHdhcyBhbHJlYWR5IHByb3ZpZGVkLFxuICAgIC8vIHNpbmNlIHdlIGFsd2F5cyBuZWVkIGtleU9iamVjdCBiZWxvdy5cbiAgICBjb25zdCBbaWQsIGtleU9iamVjdF0gPSBwb2xpY2llcy5pZGVudGlmeShcbiAgICAgIHJlc3VsdCwgc2VsZWN0aW9uU2V0LCBjb250ZXh0LmZyYWdtZW50TWFwKTtcblxuICAgIC8vIElmIGRhdGFJZCB3YXMgbm90IHByb3ZpZGVkLCBmYWxsIGJhY2sgdG8gdGhlIGlkIGp1c3QgZ2VuZXJhdGVkIGJ5XG4gICAgLy8gcG9saWNpZXMuaWRlbnRpZnkuXG4gICAgZGF0YUlkID0gZGF0YUlkIHx8IGlkO1xuXG4gICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiBkYXRhSWQpIHtcbiAgICAgIC8vIEF2b2lkIHByb2Nlc3NpbmcgdGhlIHNhbWUgZW50aXR5IG9iamVjdCB1c2luZyB0aGUgc2FtZSBzZWxlY3Rpb25cbiAgICAgIC8vIHNldCBtb3JlIHRoYW4gb25jZS4gV2UgdXNlIGFuIGFycmF5IGluc3RlYWQgb2YgYSBTZXQgc2luY2UgbW9zdFxuICAgICAgLy8gZW50aXR5IElEcyB3aWxsIGJlIHdyaXR0ZW4gdXNpbmcgb25seSBvbmUgc2VsZWN0aW9uIHNldCwgc28gdGhlXG4gICAgICAvLyBzaXplIG9mIHRoaXMgYXJyYXkgaXMgbGlrZWx5IHRvIGJlIHZlcnkgc21hbGwsIG1lYW5pbmcgaW5kZXhPZiBpc1xuICAgICAgLy8gbGlrZWx5IHRvIGJlIGZhc3RlciB0aGFuIFNldC5wcm90b3R5cGUuaGFzLlxuICAgICAgY29uc3Qgc2V0cyA9IGNvbnRleHQud3JpdHRlbltkYXRhSWRdIHx8IChjb250ZXh0LndyaXR0ZW5bZGF0YUlkXSA9IFtdKTtcbiAgICAgIGNvbnN0IHJlZiA9IG1ha2VSZWZlcmVuY2UoZGF0YUlkKTtcbiAgICAgIGlmIChzZXRzLmluZGV4T2Yoc2VsZWN0aW9uU2V0KSA+PSAwKSByZXR1cm4gcmVmO1xuICAgICAgc2V0cy5wdXNoKHNlbGVjdGlvblNldCk7XG5cbiAgICAgIC8vIElmIHdlJ3JlIGFib3V0IHRvIHdyaXRlIGEgcmVzdWx0IG9iamVjdCBpbnRvIHRoZSBzdG9yZSwgYnV0IHdlXG4gICAgICAvLyBoYXBwZW4gdG8ga25vdyB0aGF0IHRoZSBleGFjdCBzYW1lICg9PT0pIHJlc3VsdCBvYmplY3Qgd291bGQgYmVcbiAgICAgIC8vIHJldHVybmVkIGlmIHdlIHdlcmUgdG8gcmVyZWFkIHRoZSByZXN1bHQgd2l0aCB0aGUgc2FtZSBpbnB1dHMsXG4gICAgICAvLyB0aGVuIHdlIGNhbiBza2lwIHRoZSByZXN0IG9mIHRoZSBwcm9jZXNzU2VsZWN0aW9uU2V0IHdvcmsgZm9yXG4gICAgICAvLyB0aGlzIG9iamVjdCwgYW5kIGltbWVkaWF0ZWx5IHJldHVybiBhIFJlZmVyZW5jZSB0byBpdC5cbiAgICAgIGlmICh0aGlzLnJlYWRlciAmJiB0aGlzLnJlYWRlci5pc0ZyZXNoKFxuICAgICAgICByZXN1bHQsXG4gICAgICAgIHJlZixcbiAgICAgICAgc2VsZWN0aW9uU2V0LFxuICAgICAgICBjb250ZXh0LFxuICAgICAgKSkge1xuICAgICAgICByZXR1cm4gcmVmO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoaXMgdmFyaWFibGUgd2lsbCBiZSByZXBlYXRlZGx5IHVwZGF0ZWQgdXNpbmcgY29udGV4dC5tZXJnZSB0b1xuICAgIC8vIGFjY3VtdWxhdGUgYWxsIGZpZWxkcyB0aGF0IG5lZWQgdG8gYmUgd3JpdHRlbiBpbnRvIHRoZSBzdG9yZS5cbiAgICBsZXQgaW5jb21pbmdGaWVsZHM6IFN0b3JlT2JqZWN0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8vIFdyaXRlIGFueSBrZXkgZmllbGRzIHRoYXQgd2VyZSB1c2VkIGR1cmluZyBpZGVudGlmaWNhdGlvbiwgZXZlbiBpZlxuICAgIC8vIHRoZXkgd2VyZSBub3QgbWVudGlvbmVkIGluIHRoZSBvcmlnaW5hbCBxdWVyeS5cbiAgICBpZiAoa2V5T2JqZWN0KSB7XG4gICAgICBpbmNvbWluZ0ZpZWxkcyA9IGNvbnRleHQubWVyZ2UoaW5jb21pbmdGaWVsZHMsIGtleU9iamVjdCk7XG4gICAgfVxuXG4gICAgLy8gSWYgdHlwZW5hbWUgd2FzIG5vdCBwYXNzZWQgaW4sIGluZmVyIGl0LiBOb3RlIHRoYXQgdHlwZW5hbWUgaXNcbiAgICAvLyBhbHdheXMgcGFzc2VkIGluIGZvciB0cmlja3ktdG8taW5mZXIgY2FzZXMgc3VjaCBhcyBcIlF1ZXJ5XCIgZm9yXG4gICAgLy8gUk9PVF9RVUVSWS5cbiAgICBjb25zdCB0eXBlbmFtZSA9XG4gICAgICAoZGF0YUlkICYmIHBvbGljaWVzLnJvb3RUeXBlbmFtZXNCeUlkW2RhdGFJZF0pIHx8XG4gICAgICBnZXRUeXBlbmFtZUZyb21SZXN1bHQocmVzdWx0LCBzZWxlY3Rpb25TZXQsIGNvbnRleHQuZnJhZ21lbnRNYXApIHx8XG4gICAgICAoZGF0YUlkICYmIGNvbnRleHQuc3RvcmUuZ2V0KGRhdGFJZCwgXCJfX3R5cGVuYW1lXCIpIGFzIHN0cmluZyk7XG5cbiAgICBpZiAoXCJzdHJpbmdcIiA9PT0gdHlwZW9mIHR5cGVuYW1lKSB7XG4gICAgICBpbmNvbWluZ0ZpZWxkcy5fX3R5cGVuYW1lID0gdHlwZW5hbWU7XG4gICAgfVxuXG4gICAgY29uc3Qgd29ya1NldCA9IG5ldyBTZXQoc2VsZWN0aW9uU2V0LnNlbGVjdGlvbnMpO1xuXG4gICAgd29ya1NldC5mb3JFYWNoKHNlbGVjdGlvbiA9PiB7XG4gICAgICBpZiAoIXNob3VsZEluY2x1ZGUoc2VsZWN0aW9uLCBjb250ZXh0LnZhcmlhYmxlcykpIHJldHVybjtcblxuICAgICAgaWYgKGlzRmllbGQoc2VsZWN0aW9uKSkge1xuICAgICAgICBjb25zdCByZXN1bHRGaWVsZEtleSA9IHJlc3VsdEtleU5hbWVGcm9tRmllbGQoc2VsZWN0aW9uKTtcbiAgICAgICAgY29uc3QgdmFsdWUgPSByZXN1bHRbcmVzdWx0RmllbGRLZXldO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgY29uc3Qgc3RvcmVGaWVsZE5hbWUgPSBwb2xpY2llcy5nZXRTdG9yZUZpZWxkTmFtZSh7XG4gICAgICAgICAgICB0eXBlbmFtZSxcbiAgICAgICAgICAgIGZpZWxkTmFtZTogc2VsZWN0aW9uLm5hbWUudmFsdWUsXG4gICAgICAgICAgICBmaWVsZDogc2VsZWN0aW9uLFxuICAgICAgICAgICAgdmFyaWFibGVzOiBjb250ZXh0LnZhcmlhYmxlcyxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IGNoaWxkVHJlZSA9IGdldENoaWxkTWVyZ2VUcmVlKG1lcmdlVHJlZSwgc3RvcmVGaWVsZE5hbWUpO1xuXG4gICAgICAgICAgbGV0IGluY29taW5nVmFsdWUgPVxuICAgICAgICAgICAgdGhpcy5wcm9jZXNzRmllbGRWYWx1ZSh2YWx1ZSwgc2VsZWN0aW9uLCBjb250ZXh0LCBjaGlsZFRyZWUpO1xuXG4gICAgICAgICAgY29uc3QgY2hpbGRUeXBlbmFtZSA9IHNlbGVjdGlvbi5zZWxlY3Rpb25TZXRcbiAgICAgICAgICAgICYmIGNvbnRleHQuc3RvcmUuZ2V0RmllbGRWYWx1ZTxzdHJpbmc+KGluY29taW5nVmFsdWUgYXMgU3RvcmVPYmplY3QsIFwiX190eXBlbmFtZVwiKVxuICAgICAgICAgICAgfHwgdm9pZCAwO1xuXG4gICAgICAgICAgY29uc3QgbWVyZ2UgPSBwb2xpY2llcy5nZXRNZXJnZUZ1bmN0aW9uKFxuICAgICAgICAgICAgdHlwZW5hbWUsXG4gICAgICAgICAgICBzZWxlY3Rpb24ubmFtZS52YWx1ZSxcbiAgICAgICAgICAgIGNoaWxkVHlwZW5hbWUsXG4gICAgICAgICAgKTtcblxuICAgICAgICAgIGlmIChtZXJnZSkge1xuICAgICAgICAgICAgY2hpbGRUcmVlLmluZm8gPSB7XG4gICAgICAgICAgICAgIC8vIFRPRE8gQ2hlY2sgY29tcGF0aWJpbGl0eSBhZ2FpbnN0IGFueSBleGlzdGluZ1xuICAgICAgICAgICAgICAvLyBjaGlsZFRyZWUuZmllbGQ/XG4gICAgICAgICAgICAgIGZpZWxkOiBzZWxlY3Rpb24sXG4gICAgICAgICAgICAgIHR5cGVuYW1lLFxuICAgICAgICAgICAgICBtZXJnZSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG1heWJlUmVjeWNsZUNoaWxkTWVyZ2VUcmVlKG1lcmdlVHJlZSwgc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGluY29taW5nRmllbGRzID0gY29udGV4dC5tZXJnZShpbmNvbWluZ0ZpZWxkcywge1xuICAgICAgICAgICAgW3N0b3JlRmllbGROYW1lXTogaW5jb21pbmdWYWx1ZSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICB9IGVsc2UgaWYgKFxuICAgICAgICAgIHBvbGljaWVzLnVzaW5nUG9zc2libGVUeXBlcyAmJlxuICAgICAgICAgICFoYXNEaXJlY3RpdmVzKFtcImRlZmVyXCIsIFwiY2xpZW50XCJdLCBzZWxlY3Rpb24pXG4gICAgICAgICkge1xuICAgICAgICAgIHRocm93IG5ldyBJbnZhcmlhbnRFcnJvcihcbiAgICAgICAgICAgIGBNaXNzaW5nIGZpZWxkICcke3Jlc3VsdEZpZWxkS2V5fScgaW4gJHtKU09OLnN0cmluZ2lmeShcbiAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICBudWxsLFxuICAgICAgICAgICAgICAyLFxuICAgICAgICAgICAgKS5zdWJzdHJpbmcoMCwgMTAwKX1gLFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgaXMgbm90IGEgZmllbGQsIHNvIGl0IG11c3QgYmUgYSBmcmFnbWVudCwgZWl0aGVyIGlubGluZSBvciBuYW1lZFxuICAgICAgICBjb25zdCBmcmFnbWVudCA9IGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbihcbiAgICAgICAgICBzZWxlY3Rpb24sXG4gICAgICAgICAgY29udGV4dC5mcmFnbWVudE1hcCxcbiAgICAgICAgKTtcblxuICAgICAgICBpZiAoZnJhZ21lbnQgJiZcbiAgICAgICAgICAgIC8vIEJ5IHBhc3NpbmcgcmVzdWx0IGFuZCBjb250ZXh0LnZhcmlhYmxlcywgd2UgZW5hYmxlXG4gICAgICAgICAgICAvLyBwb2xpY2llcy5mcmFnbWVudE1hdGNoZXMgdG8gYmVuZCB0aGUgcnVsZXMgd2hlbiB0eXBlbmFtZSBpc1xuICAgICAgICAgICAgLy8gbm90IGEga25vd24gc3VidHlwZSBvZiB0aGUgZnJhZ21lbnQgdHlwZSBjb25kaXRpb24sIGJ1dCB0aGVcbiAgICAgICAgICAgIC8vIHJlc3VsdCBvYmplY3QgY29udGFpbnMgYWxsIHRoZSBrZXlzIHJlcXVlc3RlZCBieSB0aGVcbiAgICAgICAgICAgIC8vIGZyYWdtZW50LCB3aGljaCBzdHJvbmdseSBzdWdnZXN0cyB0aGUgZnJhZ21lbnQgcHJvYmFibHlcbiAgICAgICAgICAgIC8vIG1hdGNoZWQuIFRoaXMgZnV6enkgbWF0Y2hpbmcgYmVoYXZpb3IgbXVzdCBiZSBlbmFibGVkIGJ5XG4gICAgICAgICAgICAvLyBpbmNsdWRpbmcgYSByZWd1bGFyIGV4cHJlc3Npb24gc3RyaW5nIChzdWNoIGFzIFwiLipcIiBvclxuICAgICAgICAgICAgLy8gXCJQcmVmaXguKlwiIG9yIFwiLipTdWZmaXhcIikgaW4gdGhlIHBvc3NpYmxlVHlwZXMgYXJyYXkgZm9yXG4gICAgICAgICAgICAvLyBzcGVjaWZpYyBzdXBlcnR5cGVzOyBvdGhlcndpc2UsIGFsbCBtYXRjaGluZyByZW1haW5zIGV4YWN0LlxuICAgICAgICAgICAgLy8gRnV6enkgbWF0Y2hlcyBhcmUgcmVtZW1iZXJlZCBieSB0aGUgUG9saWNpZXMgb2JqZWN0IGFuZFxuICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB3aGVuIHJlYWRpbmcgZnJvbSB0aGUgY2FjaGUuIFNpbmNlIHRoZXJlIGlzIG5vXG4gICAgICAgICAgICAvLyBpbmNvbWluZyByZXN1bHQgb2JqZWN0IHRvIGNoZWNrIHdoZW4gcmVhZGluZywgcmVhZGluZyBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW52b2x2ZSB0aGUgc2FtZSBmdXp6eSBpbmZlcmVuY2UsIHNvIHRoZSBTdG9yZVJlYWRlclxuICAgICAgICAgICAgLy8gY2xhc3MgY2FsbHMgcG9saWNpZXMuZnJhZ21lbnRNYXRjaGVzIHdpdGhvdXQgcGFzc2luZyByZXN1bHRcbiAgICAgICAgICAgIC8vIG9yIGNvbnRleHQudmFyaWFibGVzLiBUaGUgZmxleGliaWxpdHkgb2YgZnV6enkgbWF0Y2hpbmdcbiAgICAgICAgICAgIC8vIGFsbG93cyBleGlzdGluZyBjbGllbnRzIHRvIGFjY29tbW9kYXRlIHByZXZpb3VzbHkgdW5rbm93blxuICAgICAgICAgICAgLy8gX190eXBlbmFtZSBzdHJpbmdzIHByb2R1Y2VkIGJ5IHNlcnZlci9zY2hlbWEgY2hhbmdlcywgd2hpY2hcbiAgICAgICAgICAgIC8vIHdvdWxkIG90aGVyd2lzZSBiZSBicmVha2luZyBjaGFuZ2VzLlxuICAgICAgICAgICAgcG9saWNpZXMuZnJhZ21lbnRNYXRjaGVzKGZyYWdtZW50LCB0eXBlbmFtZSwgcmVzdWx0LCBjb250ZXh0LnZhcmlhYmxlcykpIHtcbiAgICAgICAgICBmcmFnbWVudC5zZWxlY3Rpb25TZXQuc2VsZWN0aW9ucy5mb3JFYWNoKHdvcmtTZXQuYWRkLCB3b3JrU2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKFwic3RyaW5nXCIgPT09IHR5cGVvZiBkYXRhSWQpIHtcbiAgICAgIGNvbnN0IGVudGl0eVJlZiA9IG1ha2VSZWZlcmVuY2UoZGF0YUlkKTtcblxuICAgICAgaWYgKG1lcmdlVHJlZS5tYXAuc2l6ZSkge1xuICAgICAgICBpbmNvbWluZ0ZpZWxkcyA9IHRoaXMuYXBwbHlNZXJnZXMobWVyZ2VUcmVlLCBlbnRpdHlSZWYsIGluY29taW5nRmllbGRzLCBjb250ZXh0KTtcbiAgICAgIH1cblxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIikge1xuICAgICAgICBjb25zdCBoYXNTZWxlY3Rpb25TZXQgPSAoc3RvcmVGaWVsZE5hbWU6IHN0cmluZykgPT5cbiAgICAgICAgICBmaWVsZHNXaXRoU2VsZWN0aW9uU2V0cy5oYXMoZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSkpO1xuICAgICAgICBjb25zdCBmaWVsZHNXaXRoU2VsZWN0aW9uU2V0cyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgICAgICB3b3JrU2V0LmZvckVhY2goc2VsZWN0aW9uID0+IHtcbiAgICAgICAgICBpZiAoaXNGaWVsZChzZWxlY3Rpb24pICYmIHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICAgIGZpZWxkc1dpdGhTZWxlY3Rpb25TZXRzLmFkZChzZWxlY3Rpb24ubmFtZS52YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICBjb25zdCBoYXNNZXJnZUZ1bmN0aW9uID0gKHN0b3JlRmllbGROYW1lOiBzdHJpbmcpID0+IHtcbiAgICAgICAgICBjb25zdCBjaGlsZFRyZWUgPSBtZXJnZVRyZWUubWFwLmdldChzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgICAgcmV0dXJuIEJvb2xlYW4oY2hpbGRUcmVlICYmIGNoaWxkVHJlZS5pbmZvICYmIGNoaWxkVHJlZS5pbmZvLm1lcmdlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBPYmplY3Qua2V5cyhpbmNvbWluZ0ZpZWxkcykuZm9yRWFjaChzdG9yZUZpZWxkTmFtZSA9PiB7XG4gICAgICAgICAgLy8gSWYgYSBtZXJnZSBmdW5jdGlvbiB3YXMgZGVmaW5lZCBmb3IgdGhpcyBmaWVsZCwgdHJ1c3QgdGhhdCBpdFxuICAgICAgICAgIC8vIGRpZCB0aGUgcmlnaHQgdGhpbmcgYWJvdXQgKG5vdCkgY2xvYmJlcmluZyBkYXRhLiBJZiB0aGUgZmllbGRcbiAgICAgICAgICAvLyBoYXMgbm8gc2VsZWN0aW9uIHNldCwgaXQncyBhIHNjYWxhciBmaWVsZCwgc28gaXQgZG9lc24ndCBuZWVkXG4gICAgICAgICAgLy8gYSBtZXJnZSBmdW5jdGlvbiAoZXZlbiBpZiBpdCdzIGFuIG9iamVjdCwgbGlrZSBKU09OIGRhdGEpLlxuICAgICAgICAgIGlmIChoYXNTZWxlY3Rpb25TZXQoc3RvcmVGaWVsZE5hbWUpICYmXG4gICAgICAgICAgICAgICFoYXNNZXJnZUZ1bmN0aW9uKHN0b3JlRmllbGROYW1lKSkge1xuICAgICAgICAgICAgd2FybkFib3V0RGF0YUxvc3MoXG4gICAgICAgICAgICAgIGVudGl0eVJlZixcbiAgICAgICAgICAgICAgaW5jb21pbmdGaWVsZHMsXG4gICAgICAgICAgICAgIHN0b3JlRmllbGROYW1lLFxuICAgICAgICAgICAgICBjb250ZXh0LnN0b3JlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb250ZXh0LnN0b3JlLm1lcmdlKGRhdGFJZCwgaW5jb21pbmdGaWVsZHMpO1xuXG4gICAgICByZXR1cm4gZW50aXR5UmVmO1xuICAgIH1cblxuICAgIHJldHVybiBpbmNvbWluZ0ZpZWxkcztcbiAgfVxuXG4gIHByaXZhdGUgcHJvY2Vzc0ZpZWxkVmFsdWUoXG4gICAgdmFsdWU6IGFueSxcbiAgICBmaWVsZDogRmllbGROb2RlLFxuICAgIGNvbnRleHQ6IFdyaXRlQ29udGV4dCxcbiAgICBtZXJnZVRyZWU6IE1lcmdlVHJlZSxcbiAgKTogU3RvcmVWYWx1ZSB7XG4gICAgaWYgKCFmaWVsZC5zZWxlY3Rpb25TZXQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgIC8vIEluIGRldmVsb3BtZW50LCB3ZSBuZWVkIHRvIGNsb25lIHNjYWxhciB2YWx1ZXMgc28gdGhhdCB0aGV5IGNhbiBiZVxuICAgICAgLy8gc2FmZWx5IGZyb3plbiB3aXRoIG1heWJlRGVlcEZyZWV6ZSBpbiByZWFkRnJvbVN0b3JlLnRzLiBJbiBwcm9kdWN0aW9uLFxuICAgICAgLy8gaXQncyBjaGVhcGVyIHRvIHN0b3JlIHRoZSBzY2FsYXIgdmFsdWVzIGRpcmVjdGx5IGluIHRoZSBjYWNoZS5cbiAgICAgIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nID8gdmFsdWUgOiBjbG9uZURlZXAodmFsdWUpO1xuICAgIH1cblxuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgcmV0dXJuIHZhbHVlLm1hcCgoaXRlbSwgaSkgPT4ge1xuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMucHJvY2Vzc0ZpZWxkVmFsdWUoXG4gICAgICAgICAgaXRlbSwgZmllbGQsIGNvbnRleHQsIGdldENoaWxkTWVyZ2VUcmVlKG1lcmdlVHJlZSwgaSkpO1xuICAgICAgICBtYXliZVJlY3ljbGVDaGlsZE1lcmdlVHJlZShtZXJnZVRyZWUsIGkpO1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5wcm9jZXNzU2VsZWN0aW9uU2V0KHtcbiAgICAgIHJlc3VsdDogdmFsdWUsXG4gICAgICBzZWxlY3Rpb25TZXQ6IGZpZWxkLnNlbGVjdGlvblNldCxcbiAgICAgIGNvbnRleHQsXG4gICAgICBtZXJnZVRyZWUsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5TWVyZ2VzPFQgZXh0ZW5kcyBTdG9yZVZhbHVlPihcbiAgICBtZXJnZVRyZWU6IE1lcmdlVHJlZSxcbiAgICBleGlzdGluZzogU3RvcmVWYWx1ZSxcbiAgICBpbmNvbWluZzogVCxcbiAgICBjb250ZXh0OiBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0LFxuICAgIGdldFN0b3JhZ2VBcmdzPzogUGFyYW1ldGVyczxFbnRpdHlTdG9yZVtcImdldFN0b3JhZ2VcIl0+LFxuICApOiBUIHtcbiAgICBpZiAobWVyZ2VUcmVlLm1hcC5zaXplICYmICFpc1JlZmVyZW5jZShpbmNvbWluZykpIHtcbiAgICAgIGNvbnN0IGU6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlIHwgdW5kZWZpbmVkID0gKFxuICAgICAgICAvLyBJdGVtcyBpbiB0aGUgc2FtZSBwb3NpdGlvbiBpbiBkaWZmZXJlbnQgYXJyYXlzIGFyZSBub3RcbiAgICAgICAgLy8gbmVjZXNzYXJpbHkgcmVsYXRlZCB0byBlYWNoIG90aGVyLCBzbyB3aGVuIGluY29taW5nIGlzIGFuIGFycmF5XG4gICAgICAgIC8vIHdlIHByb2Nlc3MgaXRzIGVsZW1lbnRzIGFzIGlmIHRoZXJlIHdhcyBubyBleGlzdGluZyBkYXRhLlxuICAgICAgICAhQXJyYXkuaXNBcnJheShpbmNvbWluZykgJiZcbiAgICAgICAgLy8gTGlrZXdpc2UsIGV4aXN0aW5nIG11c3QgYmUgZWl0aGVyIGEgUmVmZXJlbmNlIG9yIGEgU3RvcmVPYmplY3RcbiAgICAgICAgLy8gaW4gb3JkZXIgZm9yIGl0cyBmaWVsZHMgdG8gYmUgc2FmZSB0byBtZXJnZSB3aXRoIHRoZSBmaWVsZHMgb2ZcbiAgICAgICAgLy8gdGhlIGluY29taW5nIG9iamVjdC5cbiAgICAgICAgKGlzUmVmZXJlbmNlKGV4aXN0aW5nKSB8fCBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdChleGlzdGluZykpXG4gICAgICApID8gZXhpc3RpbmcgOiB2b2lkIDA7XG5cbiAgICAgIC8vIFRoaXMgbmFycm93aW5nIGlzIGltcGxpZWQgYnkgbWVyZ2VUcmVlLm1hcC5zaXplID4gMCBhbmRcbiAgICAgIC8vICFpc1JlZmVyZW5jZShpbmNvbWluZyksIHRob3VnaCBUeXBlU2NyaXB0IHVuZGVyc3RhbmRhYmx5IGNhbm5vdFxuICAgICAgLy8gaG9wZSB0byBpbmZlciB0aGlzIHR5cGUuXG4gICAgICBjb25zdCBpID0gaW5jb21pbmcgYXMgU3RvcmVPYmplY3QgfCBTdG9yZVZhbHVlW107XG5cbiAgICAgIC8vIFRoZSBvcHRpb25zLnN0b3JhZ2Ugb2JqZWN0cyBwcm92aWRlZCB0byByZWFkIGFuZCBtZXJnZSBmdW5jdGlvbnNcbiAgICAgIC8vIGFyZSBkZXJpdmVkIGZyb20gdGhlIGlkZW50aXR5IG9mIHRoZSBwYXJlbnQgb2JqZWN0IHBsdXMgYVxuICAgICAgLy8gc2VxdWVuY2Ugb2Ygc3RvcmVGaWVsZE5hbWUgc3RyaW5ncy9udW1iZXJzIGlkZW50aWZ5aW5nIHRoZSBuZXN0ZWRcbiAgICAgIC8vIGZpZWxkIG5hbWUgcGF0aCBvZiBlYWNoIGZpZWxkIHZhbHVlIHRvIGJlIG1lcmdlZC5cbiAgICAgIGlmIChlICYmICFnZXRTdG9yYWdlQXJncykge1xuICAgICAgICBnZXRTdG9yYWdlQXJncyA9IFtpc1JlZmVyZW5jZShlKSA/IGUuX19yZWYgOiBlXTtcbiAgICAgIH1cblxuICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IGFwcGx5aW5nIG1lcmdlIGZ1bmN0aW9ucyB0byB0aGlzIHN1YnRyZWUgd2lsbFxuICAgICAgLy8gbm90IGNoYW5nZSB0aGUgaW5jb21pbmcgZGF0YSwgc28gdGhpcyB2YXJpYWJsZSB0cmFja3MgdGhlIGZpZWxkc1xuICAgICAgLy8gdGhhdCBkaWQgY2hhbmdlLCBzbyB3ZSBjYW4gY3JlYXRlIGEgbmV3IGluY29taW5nIG9iamVjdCB3aGVuIChhbmRcbiAgICAgIC8vIG9ubHkgd2hlbikgYXQgbGVhc3Qgb25lIGluY29taW5nIGZpZWxkIGhhcyBjaGFuZ2VkLiBXZSB1c2UgYSBNYXBcbiAgICAgIC8vIHRvIHByZXNlcnZlIHRoZSB0eXBlIG9mIG51bWVyaWMga2V5cy5cbiAgICAgIGxldCBjaGFuZ2VkRmllbGRzOiBNYXA8c3RyaW5nIHwgbnVtYmVyLCBTdG9yZVZhbHVlPiB8IHVuZGVmaW5lZDtcblxuICAgICAgY29uc3QgZ2V0VmFsdWUgPSAoXG4gICAgICAgIGZyb206IHR5cGVvZiBlIHwgdHlwZW9mIGksXG4gICAgICAgIG5hbWU6IHN0cmluZyB8IG51bWJlcixcbiAgICAgICk6IFN0b3JlVmFsdWUgPT4ge1xuICAgICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShmcm9tKVxuICAgICAgICAgID8gKHR5cGVvZiBuYW1lID09PSBcIm51bWJlclwiID8gZnJvbVtuYW1lXSA6IHZvaWQgMClcbiAgICAgICAgICA6IGNvbnRleHQuc3RvcmUuZ2V0RmllbGRWYWx1ZShmcm9tLCBTdHJpbmcobmFtZSkpXG4gICAgICB9O1xuXG4gICAgICBtZXJnZVRyZWUubWFwLmZvckVhY2goKGNoaWxkVHJlZSwgc3RvcmVGaWVsZE5hbWUpID0+IHtcbiAgICAgICAgaWYgKGdldFN0b3JhZ2VBcmdzKSB7XG4gICAgICAgICAgZ2V0U3RvcmFnZUFyZ3MucHVzaChzdG9yZUZpZWxkTmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZVZhbCA9IGdldFZhbHVlKGUsIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgY29uc3QgaVZhbCA9IGdldFZhbHVlKGksIHN0b3JlRmllbGROYW1lKTtcbiAgICAgICAgY29uc3QgYVZhbCA9IHRoaXMuYXBwbHlNZXJnZXMoXG4gICAgICAgICAgY2hpbGRUcmVlLFxuICAgICAgICAgIGVWYWwsXG4gICAgICAgICAgaVZhbCxcbiAgICAgICAgICBjb250ZXh0LFxuICAgICAgICAgIGdldFN0b3JhZ2VBcmdzLFxuICAgICAgICApO1xuICAgICAgICBpZiAoYVZhbCAhPT0gaVZhbCkge1xuICAgICAgICAgIGNoYW5nZWRGaWVsZHMgPSBjaGFuZ2VkRmllbGRzIHx8IG5ldyBNYXA7XG4gICAgICAgICAgY2hhbmdlZEZpZWxkcy5zZXQoc3RvcmVGaWVsZE5hbWUsIGFWYWwpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChnZXRTdG9yYWdlQXJncykge1xuICAgICAgICAgIGludmFyaWFudChnZXRTdG9yYWdlQXJncy5wb3AoKSA9PT0gc3RvcmVGaWVsZE5hbWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgaWYgKGNoYW5nZWRGaWVsZHMpIHtcbiAgICAgICAgLy8gU2hhbGxvdyBjbG9uZSBpIHNvIHdlIGNhbiBhZGQgY2hhbmdlZCBmaWVsZHMgdG8gaXQuXG4gICAgICAgIGluY29taW5nID0gKEFycmF5LmlzQXJyYXkoaSkgPyBpLnNsaWNlKDApIDogeyAuLi5pIH0pIGFzIFQ7XG4gICAgICAgIGNoYW5nZWRGaWVsZHMuZm9yRWFjaCgodmFsdWUsIG5hbWUpID0+IHtcbiAgICAgICAgICAoaW5jb21pbmcgYXMgYW55KVtuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAobWVyZ2VUcmVlLmluZm8pIHtcbiAgICAgIHJldHVybiB0aGlzLmNhY2hlLnBvbGljaWVzLnJ1bk1lcmdlRnVuY3Rpb24oXG4gICAgICAgIGV4aXN0aW5nLFxuICAgICAgICBpbmNvbWluZyxcbiAgICAgICAgbWVyZ2VUcmVlLmluZm8sXG4gICAgICAgIGNvbnRleHQsXG4gICAgICAgIGdldFN0b3JhZ2VBcmdzICYmIGNvbnRleHQuc3RvcmUuZ2V0U3RvcmFnZSguLi5nZXRTdG9yYWdlQXJncyksXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBpbmNvbWluZztcbiAgfVxufVxuXG5jb25zdCBlbXB0eU1lcmdlVHJlZVBvb2w6IE1lcmdlVHJlZVtdID0gW107XG5cbmZ1bmN0aW9uIGdldENoaWxkTWVyZ2VUcmVlKFxuICB7IG1hcCB9OiBNZXJnZVRyZWUsXG4gIG5hbWU6IHN0cmluZyB8IG51bWJlcixcbik6IE1lcmdlVHJlZSB7XG4gIGlmICghbWFwLmhhcyhuYW1lKSkge1xuICAgIG1hcC5zZXQobmFtZSwgZW1wdHlNZXJnZVRyZWVQb29sLnBvcCgpIHx8IHsgbWFwOiBuZXcgTWFwIH0pO1xuICB9XG4gIHJldHVybiBtYXAuZ2V0KG5hbWUpITtcbn1cblxuZnVuY3Rpb24gbWF5YmVSZWN5Y2xlQ2hpbGRNZXJnZVRyZWUoXG4gIHsgbWFwIH06IE1lcmdlVHJlZSxcbiAgbmFtZTogc3RyaW5nIHwgbnVtYmVyLFxuKSB7XG4gIGNvbnN0IGNoaWxkVHJlZSA9IG1hcC5nZXQobmFtZSk7XG4gIGlmIChjaGlsZFRyZWUgJiZcbiAgICAgICFjaGlsZFRyZWUuaW5mbyAmJlxuICAgICAgIWNoaWxkVHJlZS5tYXAuc2l6ZSkge1xuICAgIGVtcHR5TWVyZ2VUcmVlUG9vbC5wdXNoKGNoaWxkVHJlZSk7XG4gICAgbWFwLmRlbGV0ZShuYW1lKTtcbiAgfVxufVxuXG5jb25zdCB3YXJuaW5ncyA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuXG4vLyBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBpcyB1bnVzZWQgaW4gcHJvZHVjdGlvbiwgYW5kIHRodXMgc2hvdWxkIGJlXG4vLyBwcnVuZWQgYnkgYW55IHdlbGwtY29uZmlndXJlZCBtaW5pZmllci5cbmZ1bmN0aW9uIHdhcm5BYm91dERhdGFMb3NzKFxuICBleGlzdGluZ1JlZjogUmVmZXJlbmNlLFxuICBpbmNvbWluZ09iajogU3RvcmVPYmplY3QsXG4gIHN0b3JlRmllbGROYW1lOiBzdHJpbmcsXG4gIHN0b3JlOiBOb3JtYWxpemVkQ2FjaGUsXG4pIHtcbiAgY29uc3QgZ2V0Q2hpbGQgPSAob2JqT3JSZWY6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlKTogU3RvcmVPYmplY3QgfCBmYWxzZSA9PiB7XG4gICAgY29uc3QgY2hpbGQgPSBzdG9yZS5nZXRGaWVsZFZhbHVlPFN0b3JlT2JqZWN0PihvYmpPclJlZiwgc3RvcmVGaWVsZE5hbWUpO1xuICAgIHJldHVybiB0eXBlb2YgY2hpbGQgPT09IFwib2JqZWN0XCIgJiYgY2hpbGQ7XG4gIH07XG5cbiAgY29uc3QgZXhpc3RpbmcgPSBnZXRDaGlsZChleGlzdGluZ1JlZik7XG4gIGlmICghZXhpc3RpbmcpIHJldHVybjtcblxuICBjb25zdCBpbmNvbWluZyA9IGdldENoaWxkKGluY29taW5nT2JqKTtcbiAgaWYgKCFpbmNvbWluZykgcmV0dXJuO1xuXG4gIC8vIEl0J3MgYWx3YXlzIHNhZmUgdG8gcmVwbGFjZSBhIHJlZmVyZW5jZSwgc2luY2UgaXQgcmVmZXJzIHRvIGRhdGFcbiAgLy8gc2FmZWx5IHN0b3JlZCBlbHNld2hlcmUuXG4gIGlmIChpc1JlZmVyZW5jZShleGlzdGluZykpIHJldHVybjtcblxuICAvLyBJZiB0aGUgdmFsdWVzIGFyZSBzdHJ1Y3R1cmFsbHkgZXF1aXZhbGVudCwgd2UgZG8gbm90IG5lZWQgdG8gd29ycnlcbiAgLy8gYWJvdXQgaW5jb21pbmcgcmVwbGFjaW5nIGV4aXN0aW5nLlxuICBpZiAoZXF1YWwoZXhpc3RpbmcsIGluY29taW5nKSkgcmV0dXJuO1xuXG4gIC8vIElmIHdlJ3JlIHJlcGxhY2luZyBldmVyeSBrZXkgb2YgdGhlIGV4aXN0aW5nIG9iamVjdCwgdGhlbiB0aGVcbiAgLy8gZXhpc3RpbmcgZGF0YSB3b3VsZCBiZSBvdmVyd3JpdHRlbiBldmVuIGlmIHRoZSBvYmplY3RzIHdlcmVcbiAgLy8gbm9ybWFsaXplZCwgc28gd2FybmluZyB3b3VsZCBub3QgYmUgaGVscGZ1bCBoZXJlLlxuICBpZiAoT2JqZWN0LmtleXMoZXhpc3RpbmcpLmV2ZXJ5KFxuICAgIGtleSA9PiBzdG9yZS5nZXRGaWVsZFZhbHVlKGluY29taW5nLCBrZXkpICE9PSB2b2lkIDApKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgcGFyZW50VHlwZSA9XG4gICAgc3RvcmUuZ2V0RmllbGRWYWx1ZTxzdHJpbmc+KGV4aXN0aW5nUmVmLCBcIl9fdHlwZW5hbWVcIikgfHxcbiAgICBzdG9yZS5nZXRGaWVsZFZhbHVlPHN0cmluZz4oaW5jb21pbmdPYmosIFwiX190eXBlbmFtZVwiKTtcbiAgY29uc3QgZmllbGROYW1lID0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSk7XG4gIGNvbnN0IHR5cGVEb3ROYW1lID0gYCR7cGFyZW50VHlwZX0uJHtmaWVsZE5hbWV9YDtcbiAgLy8gQXZvaWQgd2FybmluZyBtb3JlIHRoYW4gb25jZSBmb3IgdGhlIHNhbWUgdHlwZSBhbmQgZmllbGQgbmFtZS5cbiAgaWYgKHdhcm5pbmdzLmhhcyh0eXBlRG90TmFtZSkpIHJldHVybjtcbiAgd2FybmluZ3MuYWRkKHR5cGVEb3ROYW1lKTtcblxuICBjb25zdCBjaGlsZFR5cGVuYW1lczogc3RyaW5nW10gPSBbXTtcbiAgLy8gQXJyYXlzIGRvIG5vdCBoYXZlIF9fdHlwZW5hbWUgZmllbGRzLCBhbmQgYWx3YXlzIG5lZWQgYSBjdXN0b20gbWVyZ2VcbiAgLy8gZnVuY3Rpb24sIGV2ZW4gaWYgdGhlaXIgZWxlbWVudHMgYXJlIG5vcm1hbGl6ZWQgZW50aXRpZXMuXG4gIGlmICghQXJyYXkuaXNBcnJheShleGlzdGluZykgJiZcbiAgICAgICFBcnJheS5pc0FycmF5KGluY29taW5nKSkge1xuICAgIFtleGlzdGluZywgaW5jb21pbmddLmZvckVhY2goY2hpbGQgPT4ge1xuICAgICAgY29uc3QgdHlwZW5hbWUgPSBzdG9yZS5nZXRGaWVsZFZhbHVlKGNoaWxkLCBcIl9fdHlwZW5hbWVcIik7XG4gICAgICBpZiAodHlwZW9mIHR5cGVuYW1lID09PSBcInN0cmluZ1wiICYmXG4gICAgICAgICAgIWNoaWxkVHlwZW5hbWVzLmluY2x1ZGVzKHR5cGVuYW1lKSkge1xuICAgICAgICBjaGlsZFR5cGVuYW1lcy5wdXNoKHR5cGVuYW1lKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGludmFyaWFudC53YXJuKFxuYENhY2hlIGRhdGEgbWF5IGJlIGxvc3Qgd2hlbiByZXBsYWNpbmcgdGhlICR7ZmllbGROYW1lfSBmaWVsZCBvZiBhICR7cGFyZW50VHlwZX0gb2JqZWN0LlxuXG5UbyBhZGRyZXNzIHRoaXMgcHJvYmxlbSAod2hpY2ggaXMgbm90IGEgYnVnIGluIEFwb2xsbyBDbGllbnQpLCAke1xuICBjaGlsZFR5cGVuYW1lcy5sZW5ndGhcbiAgICA/IFwiZWl0aGVyIGVuc3VyZSBhbGwgb2JqZWN0cyBvZiB0eXBlIFwiICtcbiAgICAgICAgY2hpbGRUeXBlbmFtZXMuam9pbihcIiBhbmQgXCIpICsgXCIgaGF2ZSBhbiBJRCBvciBhIGN1c3RvbSBtZXJnZSBmdW5jdGlvbiwgb3IgXCJcbiAgICA6IFwiXCJcbn1kZWZpbmUgYSBjdXN0b20gbWVyZ2UgZnVuY3Rpb24gZm9yIHRoZSAke1xuICB0eXBlRG90TmFtZVxufSBmaWVsZCwgc28gSW5NZW1vcnlDYWNoZSBjYW4gc2FmZWx5IG1lcmdlIHRoZXNlIG9iamVjdHM6XG5cbiAgZXhpc3Rpbmc6ICR7SlNPTi5zdHJpbmdpZnkoZXhpc3RpbmcpLnNsaWNlKDAsIDEwMDApfVxuICBpbmNvbWluZzogJHtKU09OLnN0cmluZ2lmeShpbmNvbWluZykuc2xpY2UoMCwgMTAwMCl9XG5cbkZvciBtb3JlIGluZm9ybWF0aW9uIGFib3V0IHRoZXNlIG9wdGlvbnMsIHBsZWFzZSByZWZlciB0byB0aGUgZG9jdW1lbnRhdGlvbjpcblxuICAqIEVuc3VyaW5nIGVudGl0eSBvYmplY3RzIGhhdmUgSURzOiBodHRwczovL2dvLmFwb2xsby5kZXYvYy9nZW5lcmF0aW5nLXVuaXF1ZS1pZGVudGlmaWVyc1xuICAqIERlZmluaW5nIGN1c3RvbSBtZXJnZSBmdW5jdGlvbnM6IGh0dHBzOi8vZ28uYXBvbGxvLmRldi9jL21lcmdpbmctbm9uLW5vcm1hbGl6ZWQtb2JqZWN0c1xuYCk7XG59XG4iLCAiaW1wb3J0IHsgZGVwLCBPcHRpbWlzdGljRGVwZW5kZW5jeUZ1bmN0aW9uIH0gZnJvbSBcIm9wdGltaXNtXCI7XG5pbXBvcnQgeyBTbG90IH0gZnJvbSBcIkB3cnkvY29udGV4dFwiO1xuaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gXCIuL2luTWVtb3J5Q2FjaGVcIjtcbmltcG9ydCB7IEFwb2xsb0NhY2hlIH0gZnJvbSAnLi4vLi4vY29yZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmVhY3RpdmVWYXI8VD4ge1xuICAobmV3VmFsdWU/OiBUKTogVDtcbiAgb25OZXh0Q2hhbmdlKGxpc3RlbmVyOiBSZWFjdGl2ZUxpc3RlbmVyPFQ+KTogKCkgPT4gdm9pZDtcbiAgYXR0YWNoQ2FjaGUoY2FjaGU6IEFwb2xsb0NhY2hlPGFueT4pOiB0aGlzO1xuICBmb3JnZXRDYWNoZShjYWNoZTogQXBvbGxvQ2FjaGU8YW55Pik6IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIFJlYWN0aXZlTGlzdGVuZXI8VD4gPSAodmFsdWU6IFQpID0+IGFueTtcblxuLy8gQ29udGV4dHVhbCBTbG90IHRoYXQgYWNxdWlyZXMgaXRzIHZhbHVlIHdoZW4gY3VzdG9tIHJlYWQgZnVuY3Rpb25zIGFyZVxuLy8gY2FsbGVkIGluIFBvbGljaWVzI3JlYWRGaWVsZC5cbmV4cG9ydCBjb25zdCBjYWNoZVNsb3QgPSBuZXcgU2xvdDxBcG9sbG9DYWNoZTxhbnk+PigpO1xuXG4vLyBBIGxpc3RlbmVyIGZ1bmN0aW9uIGNvdWxkIGluIHRoZW9yeSBjYXVzZSBhbm90aGVyIGxpc3RlbmVyIHRvIGJlIGFkZGVkXG4vLyB0byB0aGUgc2V0IHdoaWxlIHdlJ3JlIGl0ZXJhdGluZyBvdmVyIGl0LCBzbyBpdCdzIGltcG9ydGFudCB0byBjb21taXRcbi8vIHRvIHRoZSBvcmlnaW5hbCBlbGVtZW50cyBvZiB0aGUgc2V0IGJlZm9yZSB3ZSBiZWdpbiBpdGVyYXRpbmcuIFNlZVxuLy8gaXRlcmF0ZU9ic2VydmVyc1NhZmVseSBmb3IgYW5vdGhlciBleGFtcGxlIG9mIHRoaXMgcGF0dGVybi5cbmZ1bmN0aW9uIGNvbnN1bWVBbmRJdGVyYXRlPFQ+KHNldDogU2V0PFQ+LCBjYWxsYmFjazogKGl0ZW06IFQpID0+IGFueSkge1xuICBpZiAoc2V0LnNpemUpIHtcbiAgICBjb25zdCBpdGVtczogVFtdID0gW107XG4gICAgc2V0LmZvckVhY2goaXRlbSA9PiBpdGVtcy5wdXNoKGl0ZW0pKTtcbiAgICBzZXQuY2xlYXIoKTtcbiAgICBpdGVtcy5mb3JFYWNoKGNhbGxiYWNrKTtcbiAgfVxufVxuXG5jb25zdCBjYWNoZUluZm9NYXAgPSBuZXcgV2Vha01hcDxBcG9sbG9DYWNoZTxhbnk+LCB7XG4gIHZhcnM6IFNldDxSZWFjdGl2ZVZhcjxhbnk+PjtcbiAgZGVwOiBPcHRpbWlzdGljRGVwZW5kZW5jeUZ1bmN0aW9uPFJlYWN0aXZlVmFyPGFueT4+O1xufT4oKTtcblxuZnVuY3Rpb24gZ2V0Q2FjaGVJbmZvKGNhY2hlOiBBcG9sbG9DYWNoZTxhbnk+KSB7XG4gIGxldCBpbmZvID0gY2FjaGVJbmZvTWFwLmdldChjYWNoZSkhO1xuICBpZiAoIWluZm8pIHtcbiAgICBjYWNoZUluZm9NYXAuc2V0KGNhY2hlLCBpbmZvID0ge1xuICAgICAgdmFyczogbmV3IFNldCxcbiAgICAgIGRlcDogZGVwKCksXG4gICAgfSk7XG4gIH1cbiAgcmV0dXJuIGluZm87XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JnZXRDYWNoZShjYWNoZTogQXBvbGxvQ2FjaGU8YW55Pikge1xuICBnZXRDYWNoZUluZm8oY2FjaGUpLnZhcnMuZm9yRWFjaChydiA9PiBydi5mb3JnZXRDYWNoZShjYWNoZSkpO1xufVxuXG4vLyBDYWxsaW5nIGZvcmdldENhY2hlKGNhY2hlKSBzZXJ2ZXMgdG8gc2lsZW5jZSBicm9hZGNhc3RzIGFuZCBhbGxvd3MgdGhlXG4vLyBjYWNoZSB0byBiZSBnYXJiYWdlIGNvbGxlY3RlZC4gSG93ZXZlciwgdGhlIHZhcnNCeUNhY2hlIFdlYWtNYXBcbi8vIHByZXNlcnZlcyB0aGUgc2V0IG9mIHJlYWN0aXZlIHZhcmlhYmxlcyB0aGF0IHdlcmUgcHJldmlvdXNseSBhc3NvY2lhdGVkXG4vLyB3aXRoIHRoaXMgY2FjaGUsIHdoaWNoIG1ha2VzIGl0IHBvc3NpYmxlIHRvIFwicmVjYWxsXCIgdGhlIGNhY2hlIGF0IGFcbi8vIGxhdGVyIHRpbWUsIGJ5IHJlYXR0YWNoaW5nIGl0IHRvIHRob3NlIHZhcmlhYmxlcy4gSWYgdGhlIGNhY2hlIGhhcyBiZWVuXG4vLyBnYXJiYWdlIGNvbGxlY3RlZCBpbiB0aGUgbWVhbnRpbWUsIGJlY2F1c2UgaXQgaXMgbm8gbG9uZ2VyIHJlYWNoYWJsZSxcbi8vIHlvdSB3b24ndCBiZSBhYmxlIHRvIGNhbGwgcmVjYWxsQ2FjaGUoY2FjaGUpLCBhbmQgdGhlIGNhY2hlIHdpbGxcbi8vIGF1dG9tYXRpY2FsbHkgZGlzYXBwZWFyIGZyb20gdGhlIHZhcnNCeUNhY2hlIFdlYWtNYXAuXG5leHBvcnQgZnVuY3Rpb24gcmVjYWxsQ2FjaGUoY2FjaGU6IEFwb2xsb0NhY2hlPGFueT4pIHtcbiAgZ2V0Q2FjaGVJbmZvKGNhY2hlKS52YXJzLmZvckVhY2gocnYgPT4gcnYuYXR0YWNoQ2FjaGUoY2FjaGUpKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIG1ha2VWYXI8VD4odmFsdWU6IFQpOiBSZWFjdGl2ZVZhcjxUPiB7XG4gIGNvbnN0IGNhY2hlcyA9IG5ldyBTZXQ8QXBvbGxvQ2FjaGU8YW55Pj4oKTtcbiAgY29uc3QgbGlzdGVuZXJzID0gbmV3IFNldDxSZWFjdGl2ZUxpc3RlbmVyPFQ+PigpO1xuXG4gIGNvbnN0IHJ2OiBSZWFjdGl2ZVZhcjxUPiA9IGZ1bmN0aW9uIChuZXdWYWx1ZSkge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgaWYgKHZhbHVlICE9PSBuZXdWYWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IG5ld1ZhbHVlITtcbiAgICAgICAgY2FjaGVzLmZvckVhY2goY2FjaGUgPT4ge1xuICAgICAgICAgIC8vIEludmFsaWRhdGUgYW55IGZpZWxkcyB3aXRoIGN1c3RvbSByZWFkIGZ1bmN0aW9ucyB0aGF0XG4gICAgICAgICAgLy8gY29uc3VtZWQgdGhpcyB2YXJpYWJsZSwgc28gcXVlcnkgcmVzdWx0cyBpbnZvbHZpbmcgdGhvc2VcbiAgICAgICAgICAvLyBmaWVsZHMgd2lsbCBiZSByZWNvbXB1dGVkIHRoZSBuZXh0IHRpbWUgd2UgcmVhZCB0aGVtLlxuICAgICAgICAgIGdldENhY2hlSW5mbyhjYWNoZSkuZGVwLmRpcnR5KHJ2KTtcbiAgICAgICAgICAvLyBCcm9hZGNhc3QgY2hhbmdlcyB0byBhbnkgY2FjaGVzIHRoYXQgaGF2ZSBwcmV2aW91c2x5IHJlYWRcbiAgICAgICAgICAvLyBmcm9tIHRoaXMgdmFyaWFibGUuXG4gICAgICAgICAgYnJvYWRjYXN0KGNhY2hlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEZpbmFsbHksIG5vdGlmeSBhbnkgbGlzdGVuZXJzIGFkZGVkIHZpYSBydi5vbk5leHRDaGFuZ2UuXG4gICAgICAgIGNvbnN1bWVBbmRJdGVyYXRlKGxpc3RlbmVycywgbGlzdGVuZXIgPT4gbGlzdGVuZXIodmFsdWUpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gV2hlbiByZWFkaW5nIGZyb20gdGhlIHZhcmlhYmxlLCBvYnRhaW4gdGhlIGN1cnJlbnQgY2FjaGUgZnJvbVxuICAgICAgLy8gY29udGV4dCB2aWEgY2FjaGVTbG90LiBUaGlzIGlzbid0IGVudGlyZWx5IGZvb2xwcm9vZiwgYnV0IGl0J3NcbiAgICAgIC8vIHRoZSBzYW1lIHN5c3RlbSB0aGF0IHBvd2VycyB2YXJEZXAuXG4gICAgICBjb25zdCBjYWNoZSA9IGNhY2hlU2xvdC5nZXRWYWx1ZSgpO1xuICAgICAgaWYgKGNhY2hlKSB7XG4gICAgICAgIGF0dGFjaChjYWNoZSk7XG4gICAgICAgIGdldENhY2hlSW5mbyhjYWNoZSkuZGVwKHJ2KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWU7XG4gIH07XG5cbiAgcnYub25OZXh0Q2hhbmdlID0gbGlzdGVuZXIgPT4ge1xuICAgIGxpc3RlbmVycy5hZGQobGlzdGVuZXIpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBsaXN0ZW5lcnMuZGVsZXRlKGxpc3RlbmVyKTtcbiAgICB9O1xuICB9O1xuXG4gIGNvbnN0IGF0dGFjaCA9IHJ2LmF0dGFjaENhY2hlID0gY2FjaGUgPT4ge1xuICAgIGNhY2hlcy5hZGQoY2FjaGUpO1xuICAgIGdldENhY2hlSW5mbyhjYWNoZSkudmFycy5hZGQocnYpO1xuICAgIHJldHVybiBydjtcbiAgfTtcblxuICBydi5mb3JnZXRDYWNoZSA9IGNhY2hlID0+IGNhY2hlcy5kZWxldGUoY2FjaGUpO1xuXG4gIHJldHVybiBydjtcbn1cblxudHlwZSBCcm9hZGNhc3RhYmxlID0gQXBvbGxvQ2FjaGU8YW55PiAmIHtcbiAgLy8gVGhpcyBtZXRob2QgaXMgcHJvdGVjdGVkIGluIEluTWVtb3J5Q2FjaGUsIHdoaWNoIHdlIGFyZSBpZ25vcmluZywgYnV0XG4gIC8vIHdlIHN0aWxsIHdhbnQgc29tZSBzZW1ibGFuY2Ugb2YgdHlwZSBzYWZldHkgd2hlbiB3ZSBjYWxsIGl0LlxuICBicm9hZGNhc3RXYXRjaGVzPzogSW5NZW1vcnlDYWNoZVtcImJyb2FkY2FzdFdhdGNoZXNcIl07XG59O1xuXG5mdW5jdGlvbiBicm9hZGNhc3QoY2FjaGU6IEJyb2FkY2FzdGFibGUpIHtcbiAgaWYgKGNhY2hlLmJyb2FkY2FzdFdhdGNoZXMpIHtcbiAgICBjYWNoZS5icm9hZGNhc3RXYXRjaGVzKCk7XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBJbmxpbmVGcmFnbWVudE5vZGUsXG4gIEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gIFNlbGVjdGlvblNldE5vZGUsXG4gIEZpZWxkTm9kZSxcbn0gZnJvbSAnZ3JhcGhxbCc7XG5cbmltcG9ydCB7IEtleVRyaWUgfSBmcm9tICdvcHRpbWlzbSc7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuaW1wb3J0IHtcbiAgRnJhZ21lbnRNYXAsXG4gIGdldEZyYWdtZW50RnJvbVNlbGVjdGlvbixcbiAgaXNGaWVsZCxcbiAgZ2V0VHlwZW5hbWVGcm9tUmVzdWx0LFxuICBzdG9yZUtleU5hbWVGcm9tRmllbGQsXG4gIFN0b3JlVmFsdWUsXG4gIFN0b3JlT2JqZWN0LFxuICBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQsXG4gIFJlZmVyZW5jZSxcbiAgaXNSZWZlcmVuY2UsXG4gIGdldFN0b3JlS2V5TmFtZSxcbiAgY2FuVXNlV2Vha01hcCxcbiAgY29tcGFjdCxcbn0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IElkR2V0dGVyLCBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0LCBNZXJnZUluZm8gfSBmcm9tIFwiLi90eXBlc1wiO1xuaW1wb3J0IHtcbiAgaGFzT3duLFxuICBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lLFxuICBzdG9yZVZhbHVlSXNTdG9yZU9iamVjdCxcbiAgc2VsZWN0aW9uU2V0TWF0Y2hlc1Jlc3VsdCxcbiAgVHlwZU9yRmllbGROYW1lUmVnRXhwLFxufSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IHsgY2FjaGVTbG90IH0gZnJvbSAnLi9yZWFjdGl2ZVZhcnMnO1xuaW1wb3J0IHsgSW5NZW1vcnlDYWNoZSB9IGZyb20gJy4vaW5NZW1vcnlDYWNoZSc7XG5pbXBvcnQge1xuICBTYWZlUmVhZG9ubHksXG4gIEZpZWxkU3BlY2lmaWVyLFxuICBUb1JlZmVyZW5jZUZ1bmN0aW9uLFxuICBSZWFkRmllbGRGdW5jdGlvbixcbiAgUmVhZEZpZWxkT3B0aW9ucyxcbiAgQ2FuUmVhZEZ1bmN0aW9uLFxufSBmcm9tICcuLi9jb3JlL3R5cGVzL2NvbW1vbic7XG5pbXBvcnQgeyBGaWVsZFZhbHVlR2V0dGVyIH0gZnJvbSAnLi9lbnRpdHlTdG9yZSc7XG5cbmV4cG9ydCB0eXBlIFR5cGVQb2xpY2llcyA9IHtcbiAgW19fdHlwZW5hbWU6IHN0cmluZ106IFR5cGVQb2xpY3k7XG59XG5cbi8vIFR5cGVTY3JpcHQgMy43IHdpbGwgYWxsb3cgcmVjdXJzaXZlIHR5cGUgYWxpYXNlcywgc28gdGhpcyBzaG91bGQgd29yazpcbi8vIHR5cGUgS2V5U3BlY2lmaWVyID0gKHN0cmluZyB8IEtleVNwZWNpZmllcilbXVxudHlwZSBLZXlTcGVjaWZpZXIgPSAoc3RyaW5nIHwgYW55W10pW107XG5cbnR5cGUgS2V5RmllbGRzQ29udGV4dCA9IHtcbiAgdHlwZW5hbWU/OiBzdHJpbmc7XG4gIHNlbGVjdGlvblNldD86IFNlbGVjdGlvblNldE5vZGU7XG4gIGZyYWdtZW50TWFwPzogRnJhZ21lbnRNYXA7XG4gIC8vIE1heSBiZSBzZXQgYnkgdGhlIEtleUZpZWxkc0Z1bmN0aW9uIHRvIHJlcG9ydCBmaWVsZHMgdGhhdCB3ZXJlIGludm9sdmVkXG4gIC8vIGluIGNvbXB1dGluZyB0aGUgSUQuIE5ldmVyIHBhc3NlZCBpbiBieSB0aGUgY2FsbGVyLlxuICBrZXlPYmplY3Q/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xufTtcblxuZXhwb3J0IHR5cGUgS2V5RmllbGRzRnVuY3Rpb24gPSAoXG4gIG9iamVjdDogUmVhZG9ubHk8U3RvcmVPYmplY3Q+LFxuICBjb250ZXh0OiBLZXlGaWVsZHNDb250ZXh0LFxuKSA9PiBLZXlTcGVjaWZpZXIgfCBSZXR1cm5UeXBlPElkR2V0dGVyPjtcblxuLy8gVE9ETyBTaG91bGQgVHlwZVBvbGljeSBiZSBhIGdlbmVyaWMgdHlwZSwgd2l0aCBhIFRPYmplY3Qgb3IgVEVudGl0eVxuLy8gdHlwZSBwYXJhbWV0ZXI/XG5leHBvcnQgdHlwZSBUeXBlUG9saWN5ID0ge1xuICAvLyBBbGxvd3MgZGVmaW5pbmcgdGhlIHByaW1hcnkga2V5IGZpZWxkcyBmb3IgdGhpcyB0eXBlLCBlaXRoZXIgdXNpbmcgYW5cbiAgLy8gYXJyYXkgb2YgZmllbGQgbmFtZXMgb3IgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYW4gYXJiaXRyYXJ5IHN0cmluZy5cbiAga2V5RmllbGRzPzogS2V5U3BlY2lmaWVyIHwgS2V5RmllbGRzRnVuY3Rpb24gfCBmYWxzZTtcblxuICAvLyBBbGxvd3MgZGVmaW5pbmcgYSBtZXJnZSBmdW5jdGlvbiAob3IgbWVyZ2U6dHJ1ZS9mYWxzZSBzaG9ydGhhbmQpIHRvXG4gIC8vIGJlIHVzZWQgZm9yIG1lcmdpbmcgb2JqZWN0cyBvZiB0aGlzIHR5cGUgd2hlcmV2ZXIgdGhleSBhcHBlYXIsIHVubGVzc1xuICAvLyB0aGUgcGFyZW50IGZpZWxkIGFsc28gZGVmaW5lcyBhIG1lcmdlIGZ1bmN0aW9uL2Jvb2xlYW4gKHRoYXQgaXMsXG4gIC8vIHBhcmVudCBmaWVsZCBtZXJnZSBmdW5jdGlvbnMgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdHlwZSBwb2xpY3kgbWVyZ2VcbiAgLy8gZnVuY3Rpb25zKS4gSW4gbWFueSBjYXNlcywgZGVmaW5pbmcgbWVyZ2U6dHJ1ZSBmb3IgYSBnaXZlbiB0eXBlXG4gIC8vIHBvbGljeSBjYW4gc2F2ZSB5b3UgZnJvbSBzcGVjaWZ5aW5nIG1lcmdlOnRydWUgZm9yIGFsbCB0aGUgZmllbGRcbiAgLy8gcG9saWNpZXMgd2hlcmUgdGhhdCB0eXBlIG1pZ2h0IGJlIGVuY291bnRlcmVkLlxuICBtZXJnZT86IEZpZWxkTWVyZ2VGdW5jdGlvbiB8IGJvb2xlYW47XG5cbiAgLy8gSW4gdGhlIHJhcmUgZXZlbnQgdGhhdCB5b3VyIHNjaGVtYSBoYXBwZW5zIHRvIHVzZSBhIGRpZmZlcmVudFxuICAvLyBfX3R5cGVuYW1lIGZvciB0aGUgcm9vdCBRdWVyeSwgTXV0YXRpb24sIGFuZC9vciBTY2hlbWEgdHlwZXMsIHlvdSBjYW5cbiAgLy8gZXhwcmVzcyB5b3VyIGRldmlhbnQgcHJlZmVyZW5jZXMgYnkgZW5hYmxpbmcgb25lIG9mIHRoZXNlIG9wdGlvbnMuXG4gIHF1ZXJ5VHlwZT86IHRydWUsXG4gIG11dGF0aW9uVHlwZT86IHRydWUsXG4gIHN1YnNjcmlwdGlvblR5cGU/OiB0cnVlLFxuXG4gIGZpZWxkcz86IHtcbiAgICBbZmllbGROYW1lOiBzdHJpbmddOlxuICAgICAgfCBGaWVsZFBvbGljeTxhbnk+XG4gICAgICB8IEZpZWxkUmVhZEZ1bmN0aW9uPGFueT47XG4gIH1cbn07XG5cbmV4cG9ydCB0eXBlIEtleUFyZ3NGdW5jdGlvbiA9IChcbiAgYXJnczogUmVjb3JkPHN0cmluZywgYW55PiB8IG51bGwsXG4gIGNvbnRleHQ6IHtcbiAgICB0eXBlbmFtZTogc3RyaW5nO1xuICAgIGZpZWxkTmFtZTogc3RyaW5nO1xuICAgIGZpZWxkOiBGaWVsZE5vZGUgfCBudWxsO1xuICAgIHZhcmlhYmxlcz86IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIH0sXG4pID0+IEtleVNwZWNpZmllciB8IFJldHVyblR5cGU8SWRHZXR0ZXI+O1xuXG5leHBvcnQgdHlwZSBGaWVsZFBvbGljeTxcbiAgLy8gVGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uIHVzZWQgdG8gc3RvcmUgdGhlIGZpZWxkJ3MgZGF0YSBpbiB0aGVcbiAgLy8gY2FjaGUuIE11c3QgYmUgSlNPTi1zZXJpYWxpemFibGUgaWYgeW91IHBsYW4gdG8gc2VyaWFsaXplIHRoZSByZXN1bHRcbiAgLy8gb2YgY2FjaGUuZXh0cmFjdCgpIHVzaW5nIEpTT04uXG4gIFRFeGlzdGluZyA9IGFueSxcbiAgLy8gVGhlIHR5cGUgb2YgdGhlIGluY29taW5nIHBhcmFtZXRlciBwYXNzZWQgdG8gdGhlIG1lcmdlIGZ1bmN0aW9uLFxuICAvLyB0eXBpY2FsbHkgbWF0Y2hpbmcgdGhlIEdyYXBoUUwgcmVzcG9uc2UgZm9ybWF0LCBidXQgd2l0aCBSZWZlcmVuY2VcbiAgLy8gb2JqZWN0cyBzdWJzdGl0dXRlZCBmb3IgYW55IGlkZW50aWZpYWJsZSBjaGlsZCBvYmplY3RzLiBPZnRlbiB0aGVcbiAgLy8gc2FtZSBhcyBURXhpc3RpbmcsIGJ1dCBub3QgbmVjZXNzYXJpbHkuXG4gIFRJbmNvbWluZyA9IFRFeGlzdGluZyxcbiAgLy8gVGhlIHR5cGUgdGhhdCB0aGUgcmVhZCBmdW5jdGlvbiBhY3R1YWxseSByZXR1cm5zLCB1c2luZyBURXhpc3RpbmdcbiAgLy8gZGF0YSBhbmQgb3B0aW9ucy5hcmdzIGFzIGlucHV0LiBVc3VhbGx5IHRoZSBzYW1lIGFzIFRJbmNvbWluZy5cbiAgVFJlYWRSZXN1bHQgPSBUSW5jb21pbmcsXG4+ID0ge1xuICBrZXlBcmdzPzogS2V5U3BlY2lmaWVyIHwgS2V5QXJnc0Z1bmN0aW9uIHwgZmFsc2U7XG4gIHJlYWQ/OiBGaWVsZFJlYWRGdW5jdGlvbjxURXhpc3RpbmcsIFRSZWFkUmVzdWx0PjtcbiAgbWVyZ2U/OiBGaWVsZE1lcmdlRnVuY3Rpb248VEV4aXN0aW5nLCBUSW5jb21pbmc+IHwgYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIFN0b3JhZ2VUeXBlID0gUmVjb3JkPHN0cmluZywgYW55PjtcblxuZnVuY3Rpb24gYXJnc0Zyb21GaWVsZFNwZWNpZmllcihzcGVjOiBGaWVsZFNwZWNpZmllcikge1xuICByZXR1cm4gc3BlYy5hcmdzICE9PSB2b2lkIDAgPyBzcGVjLmFyZ3MgOlxuICAgIHNwZWMuZmllbGQgPyBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQoc3BlYy5maWVsZCwgc3BlYy52YXJpYWJsZXMpIDogbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBGaWVsZEZ1bmN0aW9uT3B0aW9uczxcbiAgVEFyZ3MgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICBUVmFycyA9IFJlY29yZDxzdHJpbmcsIGFueT4sXG4+IHtcbiAgYXJnczogVEFyZ3MgfCBudWxsO1xuXG4gIC8vIFRoZSBuYW1lIG9mIHRoZSBmaWVsZCwgZXF1YWwgdG8gb3B0aW9ucy5maWVsZC5uYW1lLnZhbHVlIHdoZW5cbiAgLy8gb3B0aW9ucy5maWVsZCBpcyBhdmFpbGFibGUuIFVzZWZ1bCBpZiB5b3UgcmV1c2UgdGhlIHNhbWUgZnVuY3Rpb24gZm9yXG4gIC8vIG11bHRpcGxlIGZpZWxkcywgYW5kIHlvdSBuZWVkIHRvIGtub3cgd2hpY2ggZmllbGQgeW91J3JlIGN1cnJlbnRseVxuICAvLyBwcm9jZXNzaW5nLiBBbHdheXMgYSBzdHJpbmcsIGV2ZW4gd2hlbiBvcHRpb25zLmZpZWxkIGlzIG51bGwuXG4gIGZpZWxkTmFtZTogc3RyaW5nO1xuXG4gIC8vIFRoZSBmdWxsIGZpZWxkIGtleSB1c2VkIGludGVybmFsbHksIGluY2x1ZGluZyBzZXJpYWxpemVkIGtleSBhcmd1bWVudHMuXG4gIHN0b3JlRmllbGROYW1lOiBzdHJpbmc7XG5cbiAgLy8gVGhlIEZpZWxkTm9kZSBvYmplY3QgdXNlZCB0byByZWFkIHRoaXMgZmllbGQuIFVzZWZ1bCBpZiB5b3UgbmVlZCB0b1xuICAvLyBrbm93IGFib3V0IG90aGVyIGF0dHJpYnV0ZXMgb2YgdGhlIGZpZWxkLCBzdWNoIGFzIGl0cyBkaXJlY3RpdmVzLiBUaGlzXG4gIC8vIG9wdGlvbiB3aWxsIGJlIG51bGwgd2hlbiBhIHN0cmluZyB3YXMgcGFzc2VkIHRvIG9wdGlvbnMucmVhZEZpZWxkLlxuICBmaWVsZDogRmllbGROb2RlIHwgbnVsbDtcblxuICB2YXJpYWJsZXM/OiBUVmFycztcblxuICAvLyBVdGlsaXRpZXMgZm9yIGRlYWxpbmcgd2l0aCB7IF9fcmVmIH0gb2JqZWN0cy5cbiAgaXNSZWZlcmVuY2U6IHR5cGVvZiBpc1JlZmVyZW5jZTtcbiAgdG9SZWZlcmVuY2U6IFRvUmVmZXJlbmNlRnVuY3Rpb247XG5cbiAgLy8gQSBoYW5keSBwbGFjZSB0byBwdXQgZmllbGQtc3BlY2lmaWMgZGF0YSB0aGF0IHlvdSB3YW50IHRvIHN1cnZpdmVcbiAgLy8gYWNyb3NzIG11bHRpcGxlIHJlYWQgZnVuY3Rpb24gY2FsbHMuIFVzZWZ1bCBmb3IgZmllbGQtbGV2ZWwgY2FjaGluZyxcbiAgLy8gaWYgeW91ciByZWFkIGZ1bmN0aW9uIGRvZXMgYW55IGV4cGVuc2l2ZSB3b3JrLlxuICBzdG9yYWdlOiBTdG9yYWdlVHlwZTtcblxuICBjYWNoZTogSW5NZW1vcnlDYWNoZTtcblxuICAvLyBIZWxwZXIgZnVuY3Rpb24gZm9yIHJlYWRpbmcgb3RoZXIgZmllbGRzIHdpdGhpbiB0aGUgY3VycmVudCBvYmplY3QuXG4gIC8vIElmIGEgZm9yZWlnbiBvYmplY3Qgb3IgcmVmZXJlbmNlIGlzIHByb3ZpZGVkLCB0aGUgZmllbGQgd2lsbCBiZSByZWFkXG4gIC8vIGZyb20gdGhhdCBvYmplY3QgaW5zdGVhZCBvZiB0aGUgY3VycmVudCBvYmplY3QsIHNvIHRoaXMgZnVuY3Rpb24gY2FuXG4gIC8vIGJlIHVzZWQgKHRvZ2V0aGVyIHdpdGggaXNSZWZlcmVuY2UpIHRvIGV4YW1pbmUgdGhlIGNhY2hlIG91dHNpZGUgdGhlXG4gIC8vIGN1cnJlbnQgb2JqZWN0LiBJZiBhIEZpZWxkTm9kZSBpcyBwYXNzZWQgaW5zdGVhZCBvZiBhIHN0cmluZywgYW5kXG4gIC8vIHRoYXQgRmllbGROb2RlIGhhcyBhcmd1bWVudHMsIHRoZSBzYW1lIG9wdGlvbnMudmFyaWFibGVzIHdpbGwgYmUgdXNlZFxuICAvLyB0byBjb21wdXRlIHRoZSBhcmd1bWVudCB2YWx1ZXMuIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIHdpbGwgaW52b2tlXG4gIC8vIGN1c3RvbSByZWFkIGZ1bmN0aW9ucyBmb3Igb3RoZXIgZmllbGRzLCBpZiBkZWZpbmVkLiBBbHdheXMgcmV0dXJuc1xuICAvLyBpbW11dGFibGUgZGF0YSAoZW5mb3JjZWQgd2l0aCBPYmplY3QuZnJlZXplIGluIGRldmVsb3BtZW50KS5cbiAgcmVhZEZpZWxkOiBSZWFkRmllbGRGdW5jdGlvbjtcblxuICAvLyBSZXR1cm5zIHRydWUgZm9yIG5vbi1ub3JtYWxpemVkIFN0b3JlT2JqZWN0cyBhbmQgbm9uLWRhbmdsaW5nXG4gIC8vIFJlZmVyZW5jZXMsIGluZGljYXRpbmcgdGhhdCByZWFkRmllbGQobmFtZSwgb2JqT3JSZWYpIGhhcyBhIGNoYW5jZSBvZlxuICAvLyB3b3JraW5nLiBVc2VmdWwgZm9yIGZpbHRlcmluZyBvdXQgZGFuZ2xpbmcgcmVmZXJlbmNlcyBmcm9tIGxpc3RzLlxuICBjYW5SZWFkOiBDYW5SZWFkRnVuY3Rpb247XG5cbiAgLy8gSW5zdGVhZCBvZiBqdXN0IG1lcmdpbmcgb2JqZWN0cyB3aXRoIHsgLi4uZXhpc3RpbmcsIC4uLmluY29taW5nIH0sIHRoaXNcbiAgLy8gaGVscGVyIGZ1bmN0aW9uIGNhbiBiZSB1c2VkIHRvIG1lcmdlIG9iamVjdHMgaW4gYSB3YXkgdGhhdCByZXNwZWN0cyBhbnlcbiAgLy8gY3VzdG9tIG1lcmdlIGZ1bmN0aW9ucyBkZWZpbmVkIGZvciB0aGVpciBmaWVsZHMuXG4gIG1lcmdlT2JqZWN0czogTWVyZ2VPYmplY3RzRnVuY3Rpb247XG59XG5cbnR5cGUgTWVyZ2VPYmplY3RzRnVuY3Rpb24gPSA8VCBleHRlbmRzIFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlPihcbiAgZXhpc3Rpbmc6IFQsXG4gIGluY29taW5nOiBULFxuKSA9PiBUO1xuXG5leHBvcnQgdHlwZSBGaWVsZFJlYWRGdW5jdGlvbjxURXhpc3RpbmcgPSBhbnksIFRSZWFkUmVzdWx0ID0gVEV4aXN0aW5nPiA9IChcbiAgLy8gV2hlbiByZWFkaW5nIGEgZmllbGQsIG9uZSBvZnRlbiBuZWVkcyB0byBrbm93IGFib3V0IGFueSBleGlzdGluZ1xuICAvLyB2YWx1ZSBzdG9yZWQgZm9yIHRoYXQgZmllbGQuIElmIHRoZSBmaWVsZCBpcyByZWFkIGJlZm9yZSBhbnkgdmFsdWVcbiAgLy8gaGFzIGJlZW4gd3JpdHRlbiB0byB0aGUgY2FjaGUsIHRoaXMgZXhpc3RpbmcgcGFyYW1ldGVyIHdpbGwgYmVcbiAgLy8gdW5kZWZpbmVkLCB3aGljaCBtYWtlcyBpdCBlYXN5IHRvIHVzZSBhIGRlZmF1bHQgcGFyYW1ldGVyIGV4cHJlc3Npb25cbiAgLy8gdG8gc3VwcGx5IHRoZSBpbml0aWFsIHZhbHVlLiBUaGlzIHBhcmFtZXRlciBpcyBwb3NpdGlvbmFsIChyYXRoZXJcbiAgLy8gdGhhbiBvbmUgb2YgdGhlIG5hbWVkIG9wdGlvbnMpIGJlY2F1c2UgdGhhdCBtYWtlcyBpdCBwb3NzaWJsZSBmb3IgdGhlXG4gIC8vIGRldmVsb3BlciB0byBhbm5vdGF0ZSBpdCB3aXRoIGEgdHlwZSwgd2l0aG91dCBhbHNvIGhhdmluZyB0byBwcm92aWRlXG4gIC8vIGEgd2hvbGUgbmV3IHR5cGUgZm9yIHRoZSBvcHRpb25zIG9iamVjdC5cbiAgZXhpc3Rpbmc6IFNhZmVSZWFkb25seTxURXhpc3Rpbmc+IHwgdW5kZWZpbmVkLFxuICBvcHRpb25zOiBGaWVsZEZ1bmN0aW9uT3B0aW9ucyxcbikgPT4gVFJlYWRSZXN1bHQgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCB0eXBlIEZpZWxkTWVyZ2VGdW5jdGlvbjxURXhpc3RpbmcgPSBhbnksIFRJbmNvbWluZyA9IFRFeGlzdGluZz4gPSAoXG4gIGV4aXN0aW5nOiBTYWZlUmVhZG9ubHk8VEV4aXN0aW5nPiB8IHVuZGVmaW5lZCxcbiAgLy8gVGhlIGluY29taW5nIHBhcmFtZXRlciBuZWVkcyB0byBiZSBwb3NpdGlvbmFsIGFzIHdlbGwsIGZvciB0aGUgc2FtZVxuICAvLyByZWFzb25zIGRpc2N1c3NlZCBpbiBGaWVsZFJlYWRGdW5jdGlvbiBhYm92ZS5cbiAgaW5jb21pbmc6IFNhZmVSZWFkb25seTxUSW5jb21pbmc+LFxuICBvcHRpb25zOiBGaWVsZEZ1bmN0aW9uT3B0aW9ucyxcbikgPT4gU2FmZVJlYWRvbmx5PFRFeGlzdGluZz47XG5cbmV4cG9ydCBjb25zdCBkZWZhdWx0RGF0YUlkRnJvbU9iamVjdCA9IChcbiAgeyBfX3R5cGVuYW1lLCBpZCwgX2lkIH06IFJlYWRvbmx5PFN0b3JlT2JqZWN0PixcbiAgY29udGV4dD86IEtleUZpZWxkc0NvbnRleHQsXG4pID0+IHtcbiAgaWYgKHR5cGVvZiBfX3R5cGVuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGNvbnRleHQpIHtcbiAgICAgIGNvbnRleHQua2V5T2JqZWN0ID1cbiAgICAgICAgIGlkICE9PSB2b2lkIDAgPyB7ICBpZCB9IDpcbiAgICAgICAgX2lkICE9PSB2b2lkIDAgPyB7IF9pZCB9IDpcbiAgICAgICAgdm9pZCAwO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBubyBvYmplY3QuaWQsIGZhbGwgYmFjayB0byBvYmplY3QuX2lkLlxuICAgIGlmIChpZCA9PT0gdm9pZCAwKSBpZCA9IF9pZDtcbiAgICBpZiAoaWQgIT09IHZvaWQgMCkge1xuICAgICAgcmV0dXJuIGAke19fdHlwZW5hbWV9OiR7KFxuICAgICAgICB0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIgfHxcbiAgICAgICAgdHlwZW9mIGlkID09PSBcInN0cmluZ1wiXG4gICAgICApID8gaWQgOiBKU09OLnN0cmluZ2lmeShpZCl9YDtcbiAgICB9XG4gIH1cbn07XG5cbmNvbnN0IG51bGxLZXlGaWVsZHNGbjogS2V5RmllbGRzRnVuY3Rpb24gPSAoKSA9PiB2b2lkIDA7XG5jb25zdCBzaW1wbGVLZXlBcmdzRm46IEtleUFyZ3NGdW5jdGlvbiA9IChfYXJncywgY29udGV4dCkgPT4gY29udGV4dC5maWVsZE5hbWU7XG5cbi8vIFRoZXNlIG1lcmdlIGZ1bmN0aW9ucyBjYW4gYmUgc2VsZWN0ZWQgYnkgc3BlY2lmeWluZyBtZXJnZTp0cnVlIG9yXG4vLyBtZXJnZTpmYWxzZSBpbiBhIGZpZWxkIHBvbGljeS5cbmNvbnN0IG1lcmdlVHJ1ZUZuOiBGaWVsZE1lcmdlRnVuY3Rpb248YW55PiA9XG4gIChleGlzdGluZywgaW5jb21pbmcsIHsgbWVyZ2VPYmplY3RzIH0pID0+IG1lcmdlT2JqZWN0cyhleGlzdGluZywgaW5jb21pbmcpO1xuY29uc3QgbWVyZ2VGYWxzZUZuOiBGaWVsZE1lcmdlRnVuY3Rpb248YW55PiA9IChfLCBpbmNvbWluZykgPT4gaW5jb21pbmc7XG5cbmV4cG9ydCB0eXBlIFBvc3NpYmxlVHlwZXNNYXAgPSB7XG4gIFtzdXBlcnR5cGU6IHN0cmluZ106IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IGNsYXNzIFBvbGljaWVzIHtcbiAgcHJpdmF0ZSB0eXBlUG9saWNpZXM6IHtcbiAgICBbX190eXBlbmFtZTogc3RyaW5nXToge1xuICAgICAga2V5Rm4/OiBLZXlGaWVsZHNGdW5jdGlvbjtcbiAgICAgIG1lcmdlPzogRmllbGRNZXJnZUZ1bmN0aW9uPGFueT47XG4gICAgICBmaWVsZHM6IHtcbiAgICAgICAgW2ZpZWxkTmFtZTogc3RyaW5nXToge1xuICAgICAgICAgIGtleUZuPzogS2V5QXJnc0Z1bmN0aW9uO1xuICAgICAgICAgIHJlYWQ/OiBGaWVsZFJlYWRGdW5jdGlvbjxhbnk+O1xuICAgICAgICAgIG1lcmdlPzogRmllbGRNZXJnZUZ1bmN0aW9uPGFueT47XG4gICAgICAgIH07XG4gICAgICB9O1xuICAgIH07XG4gIH0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4gIHByaXZhdGUgdG9CZUFkZGVkOiB7XG4gICAgW19fdHlwZW5hbWU6IHN0cmluZ106IFR5cGVQb2xpY3lbXTtcbiAgfSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLy8gTWFwIGZyb20gc3VidHlwZSBuYW1lcyB0byBzZXRzIG9mIHN1cGVydHlwZSBuYW1lcy4gTm90ZSB0aGF0IHRoaXNcbiAgLy8gcmVwcmVzZW50YXRpb24gaW52ZXJ0cyB0aGUgc3RydWN0dXJlIG9mIHBvc3NpYmxlVHlwZXMgKHdob3NlIGtleXMgYXJlXG4gIC8vIHN1cGVydHlwZXMgYW5kIHdob3NlIHZhbHVlcyBhcmUgYXJyYXlzIG9mIHN1YnR5cGVzKSBiZWNhdXNlIGl0IHRlbmRzXG4gIC8vIHRvIGJlIG11Y2ggbW9yZSBlZmZpY2llbnQgdG8gc2VhcmNoIHVwd2FyZHMgdGhhbiBkb3dud2FyZHMuXG4gIHByaXZhdGUgc3VwZXJ0eXBlTWFwID0gbmV3IE1hcDxzdHJpbmcsIFNldDxzdHJpbmc+PigpO1xuXG4gIC8vIEFueSBmdXp6eSBzdWJ0eXBlcyBzcGVjaWZpZWQgYnkgcG9zc2libGVUeXBlcyB3aWxsIGJlIGNvbnZlcnRlZCB0b1xuICAvLyBSZWdFeHAgb2JqZWN0cyBhbmQgcmVjb3JkZWQgaGVyZS4gRXZlcnkga2V5IG9mIHRoaXMgbWFwIGNhbiBhbHNvIGJlXG4gIC8vIGZvdW5kIGluIHN1cGVydHlwZU1hcC4gSW4gbWFueSBjYXNlcyB0aGlzIE1hcCB3aWxsIGJlIGVtcHR5LCB3aGljaFxuICAvLyBtZWFucyBubyBmdXp6eSBzdWJ0eXBlIGNoZWNraW5nIHdpbGwgaGFwcGVuIGluIGZyYWdtZW50TWF0Y2hlcy5cbiAgcHJpdmF0ZSBmdXp6eVN1YnR5cGVzID0gbmV3IE1hcDxzdHJpbmcsIFJlZ0V4cD4oKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgY2FjaGU6IEluTWVtb3J5Q2FjaGU7XG5cbiAgcHVibGljIHJlYWRvbmx5IHJvb3RJZHNCeVR5cGVuYW1lOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgcHVibGljIHJlYWRvbmx5IHJvb3RUeXBlbmFtZXNCeUlkOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICBwdWJsaWMgcmVhZG9ubHkgdXNpbmdQb3NzaWJsZVR5cGVzID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjb25maWc6IHtcbiAgICBjYWNoZTogSW5NZW1vcnlDYWNoZTtcbiAgICBkYXRhSWRGcm9tT2JqZWN0PzogS2V5RmllbGRzRnVuY3Rpb247XG4gICAgcG9zc2libGVUeXBlcz86IFBvc3NpYmxlVHlwZXNNYXA7XG4gICAgdHlwZVBvbGljaWVzPzogVHlwZVBvbGljaWVzO1xuICB9KSB7XG4gICAgdGhpcy5jb25maWcgPSB7XG4gICAgICBkYXRhSWRGcm9tT2JqZWN0OiBkZWZhdWx0RGF0YUlkRnJvbU9iamVjdCxcbiAgICAgIC4uLmNvbmZpZyxcbiAgICB9O1xuXG4gICAgdGhpcy5jYWNoZSA9IHRoaXMuY29uZmlnLmNhY2hlO1xuXG4gICAgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJRdWVyeVwiKTtcbiAgICB0aGlzLnNldFJvb3RUeXBlbmFtZShcIk11dGF0aW9uXCIpO1xuICAgIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiU3Vic2NyaXB0aW9uXCIpO1xuXG4gICAgaWYgKGNvbmZpZy5wb3NzaWJsZVR5cGVzKSB7XG4gICAgICB0aGlzLmFkZFBvc3NpYmxlVHlwZXMoY29uZmlnLnBvc3NpYmxlVHlwZXMpO1xuICAgIH1cblxuICAgIGlmIChjb25maWcudHlwZVBvbGljaWVzKSB7XG4gICAgICB0aGlzLmFkZFR5cGVQb2xpY2llcyhjb25maWcudHlwZVBvbGljaWVzKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaWRlbnRpZnkoXG4gICAgb2JqZWN0OiBTdG9yZU9iamVjdCxcbiAgICBzZWxlY3Rpb25TZXQ/OiBTZWxlY3Rpb25TZXROb2RlLFxuICAgIGZyYWdtZW50TWFwPzogRnJhZ21lbnRNYXAsXG4gICk6IFtzdHJpbmc/LCBTdG9yZU9iamVjdD9dIHtcbiAgICAvLyBUT0RPIFVzZSBhbiBBbGlhc01hcCBoZXJlP1xuICAgIGNvbnN0IHR5cGVuYW1lID0gc2VsZWN0aW9uU2V0ICYmIGZyYWdtZW50TWFwXG4gICAgICA/IGdldFR5cGVuYW1lRnJvbVJlc3VsdChvYmplY3QsIHNlbGVjdGlvblNldCwgZnJhZ21lbnRNYXApXG4gICAgICA6IG9iamVjdC5fX3R5cGVuYW1lO1xuXG4gICAgLy8gSXQgc2hvdWxkIGJlIHBvc3NpYmxlIHRvIHdyaXRlIHJvb3QgUXVlcnkgZmllbGRzIHdpdGhcbiAgICAvLyB3cml0ZUZyYWdtZW50LCB1c2luZyB7IF9fdHlwZW5hbWU6IFwiUXVlcnlcIiwgLi4uIH0gYXMgdGhlIGRhdGEsIGJ1dFxuICAgIC8vIGl0IGRvZXMgbm90IG1ha2Ugc2Vuc2UgdG8gYWxsb3cgdGhlIHNhbWUgaWRlbnRpZmljYXRpb24gYmVoYXZpb3JcbiAgICAvLyBmb3IgdGhlIE11dGF0aW9uIGFuZCBTdWJzY3JpcHRpb24gdHlwZXMsIHNpbmNlIGFwcGxpY2F0aW9uIGNvZGVcbiAgICAvLyBzaG91bGQgbmV2ZXIgYmUgd3JpdGluZyBkaXJlY3RseSB0byAob3IgcmVhZGluZyBkaXJlY3RseSBmcm9tKVxuICAgIC8vIHRob3NlIHJvb3Qgb2JqZWN0cy5cbiAgICBpZiAodHlwZW5hbWUgPT09IHRoaXMucm9vdFR5cGVuYW1lc0J5SWQuUk9PVF9RVUVSWSkge1xuICAgICAgcmV0dXJuIFtcIlJPT1RfUVVFUllcIl07XG4gICAgfVxuXG4gICAgY29uc3QgY29udGV4dDogS2V5RmllbGRzQ29udGV4dCA9IHtcbiAgICAgIHR5cGVuYW1lLFxuICAgICAgc2VsZWN0aW9uU2V0LFxuICAgICAgZnJhZ21lbnRNYXAsXG4gICAgfTtcblxuICAgIGxldCBpZDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgY29uc3QgcG9saWN5ID0gdHlwZW5hbWUgJiYgdGhpcy5nZXRUeXBlUG9saWN5KHR5cGVuYW1lKTtcbiAgICBsZXQga2V5Rm4gPSBwb2xpY3kgJiYgcG9saWN5LmtleUZuIHx8IHRoaXMuY29uZmlnLmRhdGFJZEZyb21PYmplY3Q7XG4gICAgd2hpbGUgKGtleUZuKSB7XG4gICAgICBjb25zdCBzcGVjaWZpZXJPcklkID0ga2V5Rm4ob2JqZWN0LCBjb250ZXh0KTtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHNwZWNpZmllck9ySWQpKSB7XG4gICAgICAgIGtleUZuID0ga2V5RmllbGRzRm5Gcm9tU3BlY2lmaWVyKHNwZWNpZmllck9ySWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWQgPSBzcGVjaWZpZXJPcklkO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZCA9IGlkICYmIFN0cmluZyhpZCk7XG5cbiAgICByZXR1cm4gY29udGV4dC5rZXlPYmplY3QgPyBbaWQsIGNvbnRleHQua2V5T2JqZWN0XSA6IFtpZF07XG4gIH1cblxuICBwdWJsaWMgYWRkVHlwZVBvbGljaWVzKHR5cGVQb2xpY2llczogVHlwZVBvbGljaWVzKSB7XG4gICAgT2JqZWN0LmtleXModHlwZVBvbGljaWVzKS5mb3JFYWNoKHR5cGVuYW1lID0+IHtcbiAgICAgIGNvbnN0IHtcbiAgICAgICAgcXVlcnlUeXBlLFxuICAgICAgICBtdXRhdGlvblR5cGUsXG4gICAgICAgIHN1YnNjcmlwdGlvblR5cGUsXG4gICAgICAgIC4uLmluY29taW5nXG4gICAgICB9ID0gdHlwZVBvbGljaWVzW3R5cGVuYW1lXTtcblxuICAgICAgLy8gVGhvdWdoIHtxdWVyeSxtdXRhdGlvbixzdWJzY3JpcHRpb259VHlwZSBjb25maWd1cmF0aW9ucyBhcmUgcmFyZSxcbiAgICAgIC8vIGl0J3MgaW1wb3J0YW50IHRvIGNhbGwgc2V0Um9vdFR5cGVuYW1lIGFzIGVhcmx5IGFzIHBvc3NpYmxlLFxuICAgICAgLy8gc2luY2UgdGhlc2UgY29uZmlndXJhdGlvbnMgc2hvdWxkIGFwcGx5IGNvbnNpc3RlbnRseSBmb3IgdGhlXG4gICAgICAvLyBlbnRpcmUgbGlmZXRpbWUgb2YgdGhlIGNhY2hlLiBBbHNvLCBzaW5jZSBvbmx5IG9uZSBfX3R5cGVuYW1lIGNhblxuICAgICAgLy8gcXVhbGlmeSBhcyBvbmUgb2YgdGhlc2Ugcm9vdCB0eXBlcywgdGhlc2UgdGhyZWUgcHJvcGVydGllcyBjYW5ub3RcbiAgICAgIC8vIGJlIGluaGVyaXRlZCwgdW5saWtlIHRoZSByZXN0IG9mIHRoZSBpbmNvbWluZyBwcm9wZXJ0aWVzLiBUaGF0XG4gICAgICAvLyByZXN0cmljdGlvbiBpcyBjb252ZW5pZW50LCBiZWNhdXNlIHRoZSBwdXJwb3NlIG9mIHRoaXMudG9CZUFkZGVkXG4gICAgICAvLyBpcyB0byBkZWxheSB0aGUgcHJvY2Vzc2luZyBvZiB0eXBlL2ZpZWxkIHBvbGljaWVzIHVudGlsIHRoZSBmaXJzdFxuICAgICAgLy8gdGltZSB0aGV5J3JlIHVzZWQsIGFsbG93aW5nIHBvbGljaWVzIHRvIGJlIGFkZGVkIGluIGFueSBvcmRlciBhc1xuICAgICAgLy8gbG9uZyBhcyBhbGwgcmVsZXZhbnQgcG9saWNpZXMgKGluY2x1ZGluZyBwb2xpY2llcyBmb3Igc3VwZXJ0eXBlcylcbiAgICAgIC8vIGhhdmUgYmVlbiBhZGRlZCBieSB0aGUgdGltZSBhIGdpdmVuIHBvbGljeSBpcyB1c2VkIGZvciB0aGUgZmlyc3RcbiAgICAgIC8vIHRpbWUuIEluIG90aGVyIHdvcmRzLCBzaW5jZSBpbmhlcml0YW5jZSBkb2Vzbid0IG1hdHRlciBmb3IgdGhlc2VcbiAgICAgIC8vIHByb3BlcnRpZXMsIHRoZXJlJ3MgYWxzbyBubyBuZWVkIHRvIGRlbGF5IHRoZWlyIHByb2Nlc3NpbmcgdXNpbmdcbiAgICAgIC8vIHRoZSB0aGlzLnRvQmVBZGRlZCBxdWV1ZS5cbiAgICAgIGlmIChxdWVyeVR5cGUpIHRoaXMuc2V0Um9vdFR5cGVuYW1lKFwiUXVlcnlcIiwgdHlwZW5hbWUpO1xuICAgICAgaWYgKG11dGF0aW9uVHlwZSkgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJNdXRhdGlvblwiLCB0eXBlbmFtZSk7XG4gICAgICBpZiAoc3Vic2NyaXB0aW9uVHlwZSkgdGhpcy5zZXRSb290VHlwZW5hbWUoXCJTdWJzY3JpcHRpb25cIiwgdHlwZW5hbWUpO1xuXG4gICAgICBpZiAoaGFzT3duLmNhbGwodGhpcy50b0JlQWRkZWQsIHR5cGVuYW1lKSkge1xuICAgICAgICB0aGlzLnRvQmVBZGRlZFt0eXBlbmFtZV0ucHVzaChpbmNvbWluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnRvQmVBZGRlZFt0eXBlbmFtZV0gPSBbaW5jb21pbmddO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUeXBlUG9saWN5KHR5cGVuYW1lOiBzdHJpbmcsIGluY29taW5nOiBUeXBlUG9saWN5KSB7XG4gICAgY29uc3QgZXhpc3RpbmcgPSB0aGlzLmdldFR5cGVQb2xpY3kodHlwZW5hbWUpO1xuICAgIGNvbnN0IHsga2V5RmllbGRzLCBmaWVsZHMgfSA9IGluY29taW5nO1xuXG4gICAgZnVuY3Rpb24gc2V0TWVyZ2UoXG4gICAgICBleGlzdGluZzogeyBtZXJnZT86IEZpZWxkTWVyZ2VGdW5jdGlvbiB8IGJvb2xlYW47IH0sXG4gICAgICBtZXJnZT86IEZpZWxkTWVyZ2VGdW5jdGlvbiB8IGJvb2xlYW4sXG4gICAgKSB7XG4gICAgICBleGlzdGluZy5tZXJnZSA9XG4gICAgICAgIHR5cGVvZiBtZXJnZSA9PT0gXCJmdW5jdGlvblwiID8gbWVyZ2UgOlxuICAgICAgICAvLyBQYXNzIG1lcmdlOnRydWUgYXMgYSBzaG9ydGhhbmQgZm9yIGEgbWVyZ2UgaW1wbGVtZW50YXRpb25cbiAgICAgICAgLy8gdGhhdCByZXR1cm5zIG9wdGlvbnMubWVyZ2VPYmplY3RzKGV4aXN0aW5nLCBpbmNvbWluZykuXG4gICAgICAgIG1lcmdlID09PSB0cnVlID8gbWVyZ2VUcnVlRm4gOlxuICAgICAgICAvLyBQYXNzIG1lcmdlOmZhbHNlIHRvIG1ha2UgaW5jb21pbmcgYWx3YXlzIHJlcGxhY2UgZXhpc3RpbmdcbiAgICAgICAgLy8gd2l0aG91dCBhbnkgd2FybmluZ3MgYWJvdXQgZGF0YSBjbG9iYmVyaW5nLlxuICAgICAgICBtZXJnZSA9PT0gZmFsc2UgPyBtZXJnZUZhbHNlRm4gOlxuICAgICAgICBleGlzdGluZy5tZXJnZTtcbiAgICB9XG5cbiAgICAvLyBUeXBlIHBvbGljaWVzIGNhbiBkZWZpbmUgbWVyZ2UgZnVuY3Rpb25zLCBhcyBhbiBhbHRlcm5hdGl2ZSB0b1xuICAgIC8vIHVzaW5nIGZpZWxkIHBvbGljaWVzIHRvIG1lcmdlIGNoaWxkIG9iamVjdHMuXG4gICAgc2V0TWVyZ2UoZXhpc3RpbmcsIGluY29taW5nLm1lcmdlKTtcblxuICAgIGV4aXN0aW5nLmtleUZuID1cbiAgICAgIC8vIFBhc3MgZmFsc2UgdG8gZGlzYWJsZSBub3JtYWxpemF0aW9uIGZvciB0aGlzIHR5cGVuYW1lLlxuICAgICAga2V5RmllbGRzID09PSBmYWxzZSA/IG51bGxLZXlGaWVsZHNGbiA6XG4gICAgICAvLyBQYXNzIGFuIGFycmF5IG9mIHN0cmluZ3MgdG8gdXNlIHRob3NlIGZpZWxkcyB0byBjb21wdXRlIGFcbiAgICAgIC8vIGNvbXBvc2l0ZSBJRCBmb3Igb2JqZWN0cyBvZiB0aGlzIHR5cGVuYW1lLlxuICAgICAgQXJyYXkuaXNBcnJheShrZXlGaWVsZHMpID8ga2V5RmllbGRzRm5Gcm9tU3BlY2lmaWVyKGtleUZpZWxkcykgOlxuICAgICAgLy8gUGFzcyBhIGZ1bmN0aW9uIHRvIHRha2UgZnVsbCBjb250cm9sIG92ZXIgaWRlbnRpZmljYXRpb24uXG4gICAgICB0eXBlb2Yga2V5RmllbGRzID09PSBcImZ1bmN0aW9uXCIgPyBrZXlGaWVsZHMgOlxuICAgICAgLy8gTGVhdmUgZXhpc3Rpbmcua2V5Rm4gdW5jaGFuZ2VkIGlmIGFib3ZlIGNhc2VzIGZhaWwuXG4gICAgICBleGlzdGluZy5rZXlGbjtcblxuICAgIGlmIChmaWVsZHMpIHtcbiAgICAgIE9iamVjdC5rZXlzKGZpZWxkcykuZm9yRWFjaChmaWVsZE5hbWUgPT4ge1xuICAgICAgICBjb25zdCBleGlzdGluZyA9IHRoaXMuZ2V0RmllbGRQb2xpY3kodHlwZW5hbWUsIGZpZWxkTmFtZSwgdHJ1ZSkhO1xuICAgICAgICBjb25zdCBpbmNvbWluZyA9IGZpZWxkc1tmaWVsZE5hbWVdO1xuXG4gICAgICAgIGlmICh0eXBlb2YgaW5jb21pbmcgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgIGV4aXN0aW5nLnJlYWQgPSBpbmNvbWluZztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB7IGtleUFyZ3MsIHJlYWQsIG1lcmdlIH0gPSBpbmNvbWluZztcblxuICAgICAgICAgIGV4aXN0aW5nLmtleUZuID1cbiAgICAgICAgICAgIC8vIFBhc3MgZmFsc2UgdG8gZGlzYWJsZSBhcmd1bWVudC1iYXNlZCBkaWZmZXJlbnRpYXRpb24gb2ZcbiAgICAgICAgICAgIC8vIGZpZWxkIGlkZW50aXRpZXMuXG4gICAgICAgICAgICBrZXlBcmdzID09PSBmYWxzZSA/IHNpbXBsZUtleUFyZ3NGbiA6XG4gICAgICAgICAgICAvLyBQYXNzIGFuIGFycmF5IG9mIHN0cmluZ3MgdG8gdXNlIG5hbWVkIGFyZ3VtZW50cyB0b1xuICAgICAgICAgICAgLy8gY29tcHV0ZSBhIGNvbXBvc2l0ZSBpZGVudGl0eSBmb3IgdGhlIGZpZWxkLlxuICAgICAgICAgICAgQXJyYXkuaXNBcnJheShrZXlBcmdzKSA/IGtleUFyZ3NGbkZyb21TcGVjaWZpZXIoa2V5QXJncykgOlxuICAgICAgICAgICAgLy8gUGFzcyBhIGZ1bmN0aW9uIHRvIHRha2UgZnVsbCBjb250cm9sIG92ZXIgZmllbGQgaWRlbnRpdHkuXG4gICAgICAgICAgICB0eXBlb2Yga2V5QXJncyA9PT0gXCJmdW5jdGlvblwiID8ga2V5QXJncyA6XG4gICAgICAgICAgICAvLyBMZWF2ZSBleGlzdGluZy5rZXlGbiB1bmNoYW5nZWQgaWYgYWJvdmUgY2FzZXMgZmFpbC5cbiAgICAgICAgICAgIGV4aXN0aW5nLmtleUZuO1xuXG4gICAgICAgICAgaWYgKHR5cGVvZiByZWFkID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGV4aXN0aW5nLnJlYWQgPSByZWFkO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHNldE1lcmdlKGV4aXN0aW5nLCBtZXJnZSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZXhpc3RpbmcucmVhZCAmJiBleGlzdGluZy5tZXJnZSkge1xuICAgICAgICAgIC8vIElmIHdlIGhhdmUgYm90aCBhIHJlYWQgYW5kIGEgbWVyZ2UgZnVuY3Rpb24sIGFzc3VtZVxuICAgICAgICAgIC8vIGtleUFyZ3M6ZmFsc2UsIGJlY2F1c2UgcmVhZCBhbmQgbWVyZ2UgdG9nZXRoZXIgY2FuIHRha2VcbiAgICAgICAgICAvLyByZXNwb25zaWJpbGl0eSBmb3IgaW50ZXJwcmV0aW5nIGFyZ3VtZW50cyBpbiBhbmQgb3V0LiBUaGlzXG4gICAgICAgICAgLy8gZGVmYXVsdCBhc3N1bXB0aW9uIGNhbiBhbHdheXMgYmUgb3ZlcnJpZGRlbiBieSBzcGVjaWZ5aW5nXG4gICAgICAgICAgLy8ga2V5QXJncyBleHBsaWNpdGx5IGluIHRoZSBGaWVsZFBvbGljeS5cbiAgICAgICAgICBleGlzdGluZy5rZXlGbiA9IGV4aXN0aW5nLmtleUZuIHx8IHNpbXBsZUtleUFyZ3NGbjtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBzZXRSb290VHlwZW5hbWUoXG4gICAgd2hpY2g6IFwiUXVlcnlcIiB8IFwiTXV0YXRpb25cIiB8IFwiU3Vic2NyaXB0aW9uXCIsXG4gICAgdHlwZW5hbWU6IHN0cmluZyA9IHdoaWNoLFxuICApIHtcbiAgICBjb25zdCByb290SWQgPSBcIlJPT1RfXCIgKyB3aGljaC50b1VwcGVyQ2FzZSgpO1xuICAgIGNvbnN0IG9sZCA9IHRoaXMucm9vdFR5cGVuYW1lc0J5SWRbcm9vdElkXTtcbiAgICBpZiAodHlwZW5hbWUgIT09IG9sZCkge1xuICAgICAgaW52YXJpYW50KCFvbGQgfHwgb2xkID09PSB3aGljaCwgYENhbm5vdCBjaGFuZ2Ugcm9vdCAke3doaWNofSBfX3R5cGVuYW1lIG1vcmUgdGhhbiBvbmNlYCk7XG4gICAgICAvLyBGaXJzdCwgZGVsZXRlIGFueSBvbGQgX190eXBlbmFtZSBhc3NvY2lhdGVkIHdpdGggdGhpcyByb290SWQgZnJvbVxuICAgICAgLy8gcm9vdElkc0J5VHlwZW5hbWUuXG4gICAgICBpZiAob2xkKSBkZWxldGUgdGhpcy5yb290SWRzQnlUeXBlbmFtZVtvbGRdO1xuICAgICAgLy8gTm93IG1ha2UgdGhpcyB0aGUgb25seSBfX3R5cGVuYW1lIHRoYXQgbWFwcyB0byB0aGlzIHJvb3RJZC5cbiAgICAgIHRoaXMucm9vdElkc0J5VHlwZW5hbWVbdHlwZW5hbWVdID0gcm9vdElkO1xuICAgICAgLy8gRmluYWxseSwgdXBkYXRlIHRoZSBfX3R5cGVuYW1lIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHJvb3RJZC5cbiAgICAgIHRoaXMucm9vdFR5cGVuYW1lc0J5SWRbcm9vdElkXSA9IHR5cGVuYW1lO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRQb3NzaWJsZVR5cGVzKHBvc3NpYmxlVHlwZXM6IFBvc3NpYmxlVHlwZXNNYXApIHtcbiAgICAodGhpcy51c2luZ1Bvc3NpYmxlVHlwZXMgYXMgYm9vbGVhbikgPSB0cnVlO1xuICAgIE9iamVjdC5rZXlzKHBvc3NpYmxlVHlwZXMpLmZvckVhY2goc3VwZXJ0eXBlID0+IHtcbiAgICAgIC8vIE1ha2Ugc3VyZSBhbGwgdHlwZXMgaGF2ZSBhbiBlbnRyeSBpbiB0aGlzLnN1cGVydHlwZU1hcCwgZXZlbiBpZlxuICAgICAgLy8gdGhlaXIgc3VwZXJ0eXBlIHNldCBpcyBlbXB0eSwgc28gd2UgY2FuIHJldHVybiBmYWxzZSBpbW1lZGlhdGVseVxuICAgICAgLy8gZnJvbSBwb2xpY2llcy5mcmFnbWVudE1hdGNoZXMgZm9yIHVua25vd24gc3VwZXJ0eXBlcy5cbiAgICAgIHRoaXMuZ2V0U3VwZXJ0eXBlU2V0KHN1cGVydHlwZSwgdHJ1ZSk7XG5cbiAgICAgIHBvc3NpYmxlVHlwZXNbc3VwZXJ0eXBlXS5mb3JFYWNoKHN1YnR5cGUgPT4ge1xuICAgICAgICB0aGlzLmdldFN1cGVydHlwZVNldChzdWJ0eXBlLCB0cnVlKSEuYWRkKHN1cGVydHlwZSk7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gc3VidHlwZS5tYXRjaChUeXBlT3JGaWVsZE5hbWVSZWdFeHApO1xuICAgICAgICBpZiAoIW1hdGNoIHx8IG1hdGNoWzBdICE9PSBzdWJ0eXBlKSB7XG4gICAgICAgICAgLy8gVE9ETyBEb24ndCBpbnRlcnByZXQganVzdCBhbnkgaW52YWxpZCB0eXBlbmFtZSBhcyBhIFJlZ0V4cC5cbiAgICAgICAgICB0aGlzLmZ1enp5U3VidHlwZXMuc2V0KHN1YnR5cGUsIG5ldyBSZWdFeHAoc3VidHlwZSkpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VHlwZVBvbGljeSh0eXBlbmFtZTogc3RyaW5nKTogUG9saWNpZXNbXCJ0eXBlUG9saWNpZXNcIl1bc3RyaW5nXSB7XG4gICAgaWYgKCFoYXNPd24uY2FsbCh0aGlzLnR5cGVQb2xpY2llcywgdHlwZW5hbWUpKSB7XG4gICAgICBjb25zdCBwb2xpY3k6IFBvbGljaWVzW1widHlwZVBvbGljaWVzXCJdW3N0cmluZ10gPVxuICAgICAgICB0aGlzLnR5cGVQb2xpY2llc1t0eXBlbmFtZV0gPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgICAgcG9saWN5LmZpZWxkcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAgIC8vIFdoZW4gdGhlIFR5cGVQb2xpY3kgZm9yIHR5cGVuYW1lIGlzIGZpcnN0IGFjY2Vzc2VkLCBpbnN0ZWFkIG9mXG4gICAgICAvLyBzdGFydGluZyB3aXRoIGFuIGVtcHR5IHBvbGljeSBvYmplY3QsIGluaGVyaXQgYW55IHByb3BlcnRpZXMgb3JcbiAgICAgIC8vIGZpZWxkcyBmcm9tIHRoZSB0eXBlIHBvbGljaWVzIG9mIHRoZSBzdXBlcnR5cGVzIG9mIHR5cGVuYW1lLlxuICAgICAgLy9cbiAgICAgIC8vIEFueSBwcm9wZXJ0aWVzIG9yIGZpZWxkcyBkZWZpbmVkIGV4cGxpY2l0bHkgd2l0aGluIHRoZSBUeXBlUG9saWN5XG4gICAgICAvLyBmb3IgdHlwZW5hbWUgd2lsbCB0YWtlIHByZWNlZGVuY2UsIGFuZCBpZiB0aGVyZSBhcmUgbXVsdGlwbGVcbiAgICAgIC8vIHN1cGVydHlwZXMsIHRoZSBwcm9wZXJ0aWVzIG9mIHBvbGljaWVzIHdob3NlIHR5cGVzIHdlcmUgYWRkZWRcbiAgICAgIC8vIGxhdGVyIHZpYSBhZGRQb3NzaWJsZVR5cGVzIHdpbGwgdGFrZSBwcmVjZWRlbmNlIG92ZXIgdGhvc2Ugb2ZcbiAgICAgIC8vIGVhcmxpZXIgc3VwZXJ0eXBlcy4gVE9ETyBQZXJoYXBzIHdlIHNob3VsZCB3YXJuIGFib3V0IHRoZXNlXG4gICAgICAvLyBjb25mbGljdHMgaW4gZGV2ZWxvcG1lbnQsIGFuZCByZWNvbW1lbmQgZGVmaW5pbmcgdGhlIHByb3BlcnR5XG4gICAgICAvLyBleHBsaWNpdGx5IGluIHRoZSBzdWJ0eXBlIHBvbGljeT9cbiAgICAgIC8vXG4gICAgICAvLyBGaWVsZCBwb2xpY3kgaW5oZXJpdGFuY2UgaXMgYXRvbWljL3NoYWxsb3c6IHlvdSBjYW4ndCBpbmhlcml0IGFcbiAgICAgIC8vIGZpZWxkIHBvbGljeSBhbmQgdGhlbiBvdmVycmlkZSBqdXN0IGl0cyByZWFkIGZ1bmN0aW9uLCBzaW5jZSByZWFkXG4gICAgICAvLyBhbmQgbWVyZ2UgZnVuY3Rpb25zIG9mdGVuIG5lZWQgdG8gY29vcGVyYXRlLCBzbyBjaGFuZ2luZyBvbmx5IG9uZVxuICAgICAgLy8gb2YgdGhlbSB3b3VsZCBiZSBhIHJlY2lwZSBmb3IgaW5jb25zaXN0ZW5jeS5cbiAgICAgIC8vXG4gICAgICAvLyBPbmNlIHRoZSBUeXBlUG9saWN5IGZvciB0eXBlbmFtZSBoYXMgYmVlbiBhY2Nlc3NlZCwgaXRzXG4gICAgICAvLyBwcm9wZXJ0aWVzIGNhbiBzdGlsbCBiZSB1cGRhdGVkIGRpcmVjdGx5IHVzaW5nIGFkZFR5cGVQb2xpY2llcyxcbiAgICAgIC8vIGJ1dCBmdXR1cmUgY2hhbmdlcyB0byBzdXBlcnR5cGUgcG9saWNpZXMgd2lsbCBub3QgYmUgcmVmbGVjdGVkIGluXG4gICAgICAvLyB0aGlzIHBvbGljeSwgYmVjYXVzZSB0aGlzIGNvZGUgcnVucyBhdCBtb3N0IG9uY2UgcGVyIHR5cGVuYW1lLlxuICAgICAgY29uc3Qgc3VwZXJ0eXBlcyA9IHRoaXMuc3VwZXJ0eXBlTWFwLmdldCh0eXBlbmFtZSk7XG4gICAgICBpZiAoc3VwZXJ0eXBlcyAmJiBzdXBlcnR5cGVzLnNpemUpIHtcbiAgICAgICAgc3VwZXJ0eXBlcy5mb3JFYWNoKHN1cGVydHlwZSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBmaWVsZHMsIC4uLnJlc3QgfSA9IHRoaXMuZ2V0VHlwZVBvbGljeShzdXBlcnR5cGUpO1xuICAgICAgICAgIE9iamVjdC5hc3NpZ24ocG9saWN5LCByZXN0KTtcbiAgICAgICAgICBPYmplY3QuYXNzaWduKHBvbGljeS5maWVsZHMsIGZpZWxkcyk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGluYm94ID0gdGhpcy50b0JlQWRkZWRbdHlwZW5hbWVdO1xuICAgIGlmIChpbmJveCAmJiBpbmJveC5sZW5ndGgpIHtcbiAgICAgIHRoaXMudXBkYXRlVHlwZVBvbGljeSh0eXBlbmFtZSwgY29tcGFjdCguLi5pbmJveC5zcGxpY2UoMCkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy50eXBlUG9saWNpZXNbdHlwZW5hbWVdO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRGaWVsZFBvbGljeShcbiAgICB0eXBlbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGZpZWxkTmFtZTogc3RyaW5nLFxuICAgIGNyZWF0ZUlmTWlzc2luZzogYm9vbGVhbixcbiAgKToge1xuICAgIGtleUZuPzogS2V5QXJnc0Z1bmN0aW9uO1xuICAgIHJlYWQ/OiBGaWVsZFJlYWRGdW5jdGlvbjxhbnk+O1xuICAgIG1lcmdlPzogRmllbGRNZXJnZUZ1bmN0aW9uPGFueT47XG4gIH0gfCB1bmRlZmluZWQge1xuICAgIGlmICh0eXBlbmFtZSkge1xuICAgICAgY29uc3QgZmllbGRQb2xpY2llcyA9IHRoaXMuZ2V0VHlwZVBvbGljeSh0eXBlbmFtZSkuZmllbGRzO1xuICAgICAgcmV0dXJuIGZpZWxkUG9saWNpZXNbZmllbGROYW1lXSB8fCAoXG4gICAgICAgIGNyZWF0ZUlmTWlzc2luZyAmJiAoZmllbGRQb2xpY2llc1tmaWVsZE5hbWVdID0gT2JqZWN0LmNyZWF0ZShudWxsKSkpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0U3VwZXJ0eXBlU2V0KFxuICAgIHN1YnR5cGU6IHN0cmluZyxcbiAgICBjcmVhdGVJZk1pc3Npbmc6IGJvb2xlYW4sXG4gICk6IFNldDxzdHJpbmc+IHwgdW5kZWZpbmVkIHtcbiAgICBsZXQgc3VwZXJ0eXBlU2V0ID0gdGhpcy5zdXBlcnR5cGVNYXAuZ2V0KHN1YnR5cGUpO1xuICAgIGlmICghc3VwZXJ0eXBlU2V0ICYmIGNyZWF0ZUlmTWlzc2luZykge1xuICAgICAgdGhpcy5zdXBlcnR5cGVNYXAuc2V0KHN1YnR5cGUsIHN1cGVydHlwZVNldCA9IG5ldyBTZXQ8c3RyaW5nPigpKTtcbiAgICB9XG4gICAgcmV0dXJuIHN1cGVydHlwZVNldDtcbiAgfVxuXG4gIHB1YmxpYyBmcmFnbWVudE1hdGNoZXMoXG4gICAgZnJhZ21lbnQ6IElubGluZUZyYWdtZW50Tm9kZSB8IEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gICAgdHlwZW5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICByZXN1bHQ/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+LFxuICAgIHZhcmlhYmxlcz86IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gICk6IGJvb2xlYW4ge1xuICAgIGlmICghZnJhZ21lbnQudHlwZUNvbmRpdGlvbikgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBJZiB0aGUgZnJhZ21lbnQgaGFzIGEgdHlwZSBjb25kaXRpb24gYnV0IHRoZSBvYmplY3Qgd2UncmUgbWF0Y2hpbmdcbiAgICAvLyBhZ2FpbnN0IGRvZXMgbm90IGhhdmUgYSBfX3R5cGVuYW1lLCB0aGUgZnJhZ21lbnQgY2Fubm90IG1hdGNoLlxuICAgIGlmICghdHlwZW5hbWUpIHJldHVybiBmYWxzZTtcblxuICAgIGNvbnN0IHN1cGVydHlwZSA9IGZyYWdtZW50LnR5cGVDb25kaXRpb24ubmFtZS52YWx1ZTtcbiAgICAvLyBDb21tb24gY2FzZTogZnJhZ21lbnQgdHlwZSBjb25kaXRpb24gYW5kIF9fdHlwZW5hbWUgYXJlIHRoZSBzYW1lLlxuICAgIGlmICh0eXBlbmFtZSA9PT0gc3VwZXJ0eXBlKSByZXR1cm4gdHJ1ZTtcblxuICAgIGlmICh0aGlzLnVzaW5nUG9zc2libGVUeXBlcyAmJlxuICAgICAgICB0aGlzLnN1cGVydHlwZU1hcC5oYXMoc3VwZXJ0eXBlKSkge1xuICAgICAgY29uc3QgdHlwZW5hbWVTdXBlcnR5cGVTZXQgPSB0aGlzLmdldFN1cGVydHlwZVNldCh0eXBlbmFtZSwgdHJ1ZSkhO1xuICAgICAgY29uc3Qgd29ya1F1ZXVlID0gW3R5cGVuYW1lU3VwZXJ0eXBlU2V0XTtcbiAgICAgIGNvbnN0IG1heWJlRW5xdWV1ZSA9IChzdWJ0eXBlOiBzdHJpbmcpID0+IHtcbiAgICAgICAgY29uc3Qgc3VwZXJ0eXBlU2V0ID0gdGhpcy5nZXRTdXBlcnR5cGVTZXQoc3VidHlwZSwgZmFsc2UpO1xuICAgICAgICBpZiAoc3VwZXJ0eXBlU2V0ICYmXG4gICAgICAgICAgICBzdXBlcnR5cGVTZXQuc2l6ZSAmJlxuICAgICAgICAgICAgd29ya1F1ZXVlLmluZGV4T2Yoc3VwZXJ0eXBlU2V0KSA8IDApIHtcbiAgICAgICAgICB3b3JrUXVldWUucHVzaChzdXBlcnR5cGVTZXQpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBXZSBuZWVkIHRvIGNoZWNrIGZ1enp5IHN1YnR5cGVzIG9ubHkgaWYgd2UgZW5jb3VudGVyZWQgZnV6enlcbiAgICAgIC8vIHN1YnR5cGUgc3RyaW5ncyBpbiBhZGRQb3NzaWJsZVR5cGVzLCBhbmQgb25seSB3aGlsZSB3cml0aW5nIHRvXG4gICAgICAvLyB0aGUgY2FjaGUsIHNpbmNlIHRoYXQncyB3aGVuIHNlbGVjdGlvblNldE1hdGNoZXNSZXN1bHQgZ2l2ZXMgYVxuICAgICAgLy8gc3Ryb25nIHNpZ25hbCBvZiBmcmFnbWVudCBtYXRjaGluZy4gVGhlIFN0b3JlUmVhZGVyIGNsYXNzIGNhbGxzXG4gICAgICAvLyBwb2xpY2llcy5mcmFnbWVudE1hdGNoZXMgd2l0aG91dCBwYXNzaW5nIGEgcmVzdWx0IG9iamVjdCwgc29cbiAgICAgIC8vIG5lZWRUb0NoZWNrRnV6enlTdWJ0eXBlcyBpcyBhbHdheXMgZmFsc2Ugd2hpbGUgcmVhZGluZy5cbiAgICAgIGxldCBuZWVkVG9DaGVja0Z1enp5U3VidHlwZXMgPSAhIShyZXN1bHQgJiYgdGhpcy5mdXp6eVN1YnR5cGVzLnNpemUpO1xuICAgICAgbGV0IGNoZWNraW5nRnV6enlTdWJ0eXBlcyA9IGZhbHNlO1xuXG4gICAgICAvLyBJdCdzIGltcG9ydGFudCB0byBrZWVwIGV2YWx1YXRpbmcgd29ya1F1ZXVlLmxlbmd0aCBlYWNoIHRpbWUgdGhyb3VnaFxuICAgICAgLy8gdGhlIGxvb3AsIGJlY2F1c2UgdGhlIHF1ZXVlIGNhbiBncm93IHdoaWxlIHdlJ3JlIGl0ZXJhdGluZyBvdmVyIGl0LlxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3b3JrUXVldWUubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgY29uc3Qgc3VwZXJ0eXBlU2V0ID0gd29ya1F1ZXVlW2ldO1xuXG4gICAgICAgIGlmIChzdXBlcnR5cGVTZXQuaGFzKHN1cGVydHlwZSkpIHtcbiAgICAgICAgICBpZiAoIXR5cGVuYW1lU3VwZXJ0eXBlU2V0LmhhcyhzdXBlcnR5cGUpKSB7XG4gICAgICAgICAgICBpZiAoY2hlY2tpbmdGdXp6eVN1YnR5cGVzKSB7XG4gICAgICAgICAgICAgIGludmFyaWFudC53YXJuKGBJbmZlcnJpbmcgc3VidHlwZSAke3R5cGVuYW1lfSBvZiBzdXBlcnR5cGUgJHtzdXBlcnR5cGV9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZWNvcmQgcG9zaXRpdmUgcmVzdWx0cyBmb3IgZmFzdGVyIGZ1dHVyZSBsb29rdXAuXG4gICAgICAgICAgICAvLyBVbmZvcnR1bmF0ZWx5LCB3ZSBjYW5ub3Qgc2FmZWx5IGNhY2hlIG5lZ2F0aXZlIHJlc3VsdHMsXG4gICAgICAgICAgICAvLyBiZWNhdXNlIG5ldyBwb3NzaWJsZVR5cGVzIGRhdGEgY291bGQgYWx3YXlzIGJlIGFkZGVkIHRvIHRoZVxuICAgICAgICAgICAgLy8gUG9saWNpZXMgY2xhc3MuXG4gICAgICAgICAgICB0eXBlbmFtZVN1cGVydHlwZVNldC5hZGQoc3VwZXJ0eXBlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBzdXBlcnR5cGVTZXQuZm9yRWFjaChtYXliZUVucXVldWUpO1xuXG4gICAgICAgIGlmIChuZWVkVG9DaGVja0Z1enp5U3VidHlwZXMgJiZcbiAgICAgICAgICAgIC8vIFN0YXJ0IGNoZWNraW5nIGZ1enp5IHN1YnR5cGVzIG9ubHkgYWZ0ZXIgZXhoYXVzdGluZyBhbGxcbiAgICAgICAgICAgIC8vIG5vbi1mdXp6eSBzdWJ0eXBlcyAoYWZ0ZXIgdGhlIGZpbmFsIGl0ZXJhdGlvbiBvZiB0aGUgbG9vcCkuXG4gICAgICAgICAgICBpID09PSB3b3JrUXVldWUubGVuZ3RoIC0gMSAmJlxuICAgICAgICAgICAgLy8gV2UgY291bGQgd2FpdCB0byBjb21wYXJlIGZyYWdtZW50LnNlbGVjdGlvblNldCB0byByZXN1bHRcbiAgICAgICAgICAgIC8vIGFmdGVyIHdlIHZlcmlmeSB0aGUgc3VwZXJ0eXBlLCBidXQgdGhpcyBjaGVjayBpcyBvZnRlbiBsZXNzXG4gICAgICAgICAgICAvLyBleHBlbnNpdmUgdGhhbiB0aGF0IHNlYXJjaCwgYW5kIHdlIHdpbGwgaGF2ZSB0byBkbyB0aGVcbiAgICAgICAgICAgIC8vIGNvbXBhcmlzb24gYW55d2F5IHdoZW5ldmVyIHdlIGZpbmQgYSBwb3RlbnRpYWwgbWF0Y2guXG4gICAgICAgICAgICBzZWxlY3Rpb25TZXRNYXRjaGVzUmVzdWx0KGZyYWdtZW50LnNlbGVjdGlvblNldCwgcmVzdWx0ISwgdmFyaWFibGVzKSkge1xuICAgICAgICAgIC8vIFdlIGRvbid0IGFsd2F5cyBuZWVkIHRvIGNoZWNrIGZ1enp5IHN1YnR5cGVzIChpZiBubyByZXN1bHRcbiAgICAgICAgICAvLyB3YXMgcHJvdmlkZWQsIG9yICF0aGlzLmZ1enp5U3VidHlwZXMuc2l6ZSksIGJ1dCwgd2hlbiB3ZSBkbyxcbiAgICAgICAgICAvLyB3ZSBvbmx5IHdhbnQgdG8gY2hlY2sgdGhlbSBvbmNlLlxuICAgICAgICAgIG5lZWRUb0NoZWNrRnV6enlTdWJ0eXBlcyA9IGZhbHNlO1xuICAgICAgICAgIGNoZWNraW5nRnV6enlTdWJ0eXBlcyA9IHRydWU7XG5cbiAgICAgICAgICAvLyBJZiB3ZSBmaW5kIGFueSBmdXp6eSBzdWJ0eXBlcyB0aGF0IG1hdGNoIHR5cGVuYW1lLCBleHRlbmQgdGhlXG4gICAgICAgICAgLy8gd29ya1F1ZXVlIHRvIHNlYXJjaCB0aHJvdWdoIHRoZSBzdXBlcnR5cGVzIG9mIHRob3NlIGZ1enp5XG4gICAgICAgICAgLy8gc3VidHlwZXMuIE90aGVyd2lzZSB0aGUgZm9yLWxvb3Agd2lsbCB0ZXJtaW5hdGUgYW5kIHdlJ2xsXG4gICAgICAgICAgLy8gcmV0dXJuIGZhbHNlIGJlbG93LlxuICAgICAgICAgIHRoaXMuZnV6enlTdWJ0eXBlcy5mb3JFYWNoKChyZWdFeHAsIGZ1enp5U3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IHR5cGVuYW1lLm1hdGNoKHJlZ0V4cCk7XG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMF0gPT09IHR5cGVuYW1lKSB7XG4gICAgICAgICAgICAgIG1heWJlRW5xdWV1ZShmdXp6eVN0cmluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgaGFzS2V5QXJncyh0eXBlbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBmaWVsZE5hbWU6IHN0cmluZykge1xuICAgIGNvbnN0IHBvbGljeSA9IHRoaXMuZ2V0RmllbGRQb2xpY3kodHlwZW5hbWUsIGZpZWxkTmFtZSwgZmFsc2UpO1xuICAgIHJldHVybiAhIShwb2xpY3kgJiYgcG9saWN5LmtleUZuKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRTdG9yZUZpZWxkTmFtZShmaWVsZFNwZWM6IEZpZWxkU3BlY2lmaWVyKTogc3RyaW5nIHtcbiAgICBjb25zdCB7IHR5cGVuYW1lLCBmaWVsZE5hbWUgfSA9IGZpZWxkU3BlYztcbiAgICBjb25zdCBwb2xpY3kgPSB0aGlzLmdldEZpZWxkUG9saWN5KHR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICBsZXQgc3RvcmVGaWVsZE5hbWU6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIGxldCBrZXlGbiA9IHBvbGljeSAmJiBwb2xpY3kua2V5Rm47XG4gICAgaWYgKGtleUZuICYmIHR5cGVuYW1lKSB7XG4gICAgICBjb25zdCBjb250ZXh0OiBQYXJhbWV0ZXJzPEtleUFyZ3NGdW5jdGlvbj5bMV0gPSB7XG4gICAgICAgIHR5cGVuYW1lLFxuICAgICAgICBmaWVsZE5hbWUsXG4gICAgICAgIGZpZWxkOiBmaWVsZFNwZWMuZmllbGQgfHwgbnVsbCxcbiAgICAgICAgdmFyaWFibGVzOiBmaWVsZFNwZWMudmFyaWFibGVzLFxuICAgICAgfTtcbiAgICAgIGNvbnN0IGFyZ3MgPSBhcmdzRnJvbUZpZWxkU3BlY2lmaWVyKGZpZWxkU3BlYyk7XG4gICAgICB3aGlsZSAoa2V5Rm4pIHtcbiAgICAgICAgY29uc3Qgc3BlY2lmaWVyT3JTdHJpbmcgPSBrZXlGbihhcmdzLCBjb250ZXh0KTtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc3BlY2lmaWVyT3JTdHJpbmcpKSB7XG4gICAgICAgICAga2V5Rm4gPSBrZXlBcmdzRm5Gcm9tU3BlY2lmaWVyKHNwZWNpZmllck9yU3RyaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBJZiB0aGUgY3VzdG9tIGtleUZuIHJldHVybnMgYSBmYWxzeSB2YWx1ZSwgZmFsbCBiYWNrIHRvXG4gICAgICAgICAgLy8gZmllbGROYW1lIGluc3RlYWQuXG4gICAgICAgICAgc3RvcmVGaWVsZE5hbWUgPSBzcGVjaWZpZXJPclN0cmluZyB8fCBmaWVsZE5hbWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3RvcmVGaWVsZE5hbWUgPT09IHZvaWQgMCkge1xuICAgICAgc3RvcmVGaWVsZE5hbWUgPSBmaWVsZFNwZWMuZmllbGRcbiAgICAgICAgPyBzdG9yZUtleU5hbWVGcm9tRmllbGQoZmllbGRTcGVjLmZpZWxkLCBmaWVsZFNwZWMudmFyaWFibGVzKVxuICAgICAgICA6IGdldFN0b3JlS2V5TmFtZShmaWVsZE5hbWUsIGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoZmllbGRTcGVjKSk7XG4gICAgfVxuXG4gICAgLy8gTWFrZSBzdXJlIGN1c3RvbSBmaWVsZCBuYW1lcyBzdGFydCB3aXRoIHRoZSBhY3R1YWwgZmllbGQubmFtZS52YWx1ZVxuICAgIC8vIG9mIHRoZSBmaWVsZCwgc28gd2UgY2FuIGFsd2F5cyBmaWd1cmUgb3V0IHdoaWNoIHByb3BlcnRpZXMgb2YgYVxuICAgIC8vIFN0b3JlT2JqZWN0IGNvcnJlc3BvbmQgdG8gd2hpY2ggb3JpZ2luYWwgZmllbGQgbmFtZXMuXG4gICAgcmV0dXJuIGZpZWxkTmFtZSA9PT0gZmllbGROYW1lRnJvbVN0b3JlTmFtZShzdG9yZUZpZWxkTmFtZSlcbiAgICAgID8gc3RvcmVGaWVsZE5hbWVcbiAgICAgIDogZmllbGROYW1lICsgXCI6XCIgKyBzdG9yZUZpZWxkTmFtZTtcbiAgfVxuXG4gIHB1YmxpYyByZWFkRmllbGQ8ViA9IFN0b3JlVmFsdWU+KFxuICAgIG9wdGlvbnM6IFJlYWRGaWVsZE9wdGlvbnMsXG4gICAgY29udGV4dDogUmVhZE1lcmdlTW9kaWZ5Q29udGV4dCxcbiAgKTogU2FmZVJlYWRvbmx5PFY+IHwgdW5kZWZpbmVkIHtcbiAgICBjb25zdCBvYmplY3RPclJlZmVyZW5jZSA9IG9wdGlvbnMuZnJvbTtcbiAgICBpZiAoIW9iamVjdE9yUmVmZXJlbmNlKSByZXR1cm47XG5cbiAgICBjb25zdCBuYW1lT3JGaWVsZCA9IG9wdGlvbnMuZmllbGQgfHwgb3B0aW9ucy5maWVsZE5hbWU7XG4gICAgaWYgKCFuYW1lT3JGaWVsZCkgcmV0dXJuO1xuXG4gICAgaWYgKG9wdGlvbnMudHlwZW5hbWUgPT09IHZvaWQgMCkge1xuICAgICAgY29uc3QgdHlwZW5hbWUgPSBjb250ZXh0LnN0b3JlLmdldEZpZWxkVmFsdWU8c3RyaW5nPihvYmplY3RPclJlZmVyZW5jZSwgXCJfX3R5cGVuYW1lXCIpO1xuICAgICAgaWYgKHR5cGVuYW1lKSBvcHRpb25zLnR5cGVuYW1lID0gdHlwZW5hbWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RvcmVGaWVsZE5hbWUgPSB0aGlzLmdldFN0b3JlRmllbGROYW1lKG9wdGlvbnMpO1xuICAgIGNvbnN0IGZpZWxkTmFtZSA9IGZpZWxkTmFtZUZyb21TdG9yZU5hbWUoc3RvcmVGaWVsZE5hbWUpO1xuICAgIGNvbnN0IGV4aXN0aW5nID0gY29udGV4dC5zdG9yZS5nZXRGaWVsZFZhbHVlPFY+KG9iamVjdE9yUmVmZXJlbmNlLCBzdG9yZUZpZWxkTmFtZSk7XG4gICAgY29uc3QgcG9saWN5ID0gdGhpcy5nZXRGaWVsZFBvbGljeShvcHRpb25zLnR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICBjb25zdCByZWFkID0gcG9saWN5ICYmIHBvbGljeS5yZWFkO1xuXG4gICAgaWYgKHJlYWQpIHtcbiAgICAgIGNvbnN0IHJlYWRPcHRpb25zID0gbWFrZUZpZWxkRnVuY3Rpb25PcHRpb25zKFxuICAgICAgICB0aGlzLFxuICAgICAgICBvYmplY3RPclJlZmVyZW5jZSxcbiAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgY29udGV4dC5zdG9yZS5nZXRTdG9yYWdlKFxuICAgICAgICAgIGlzUmVmZXJlbmNlKG9iamVjdE9yUmVmZXJlbmNlKVxuICAgICAgICAgICAgPyBvYmplY3RPclJlZmVyZW5jZS5fX3JlZlxuICAgICAgICAgICAgOiBvYmplY3RPclJlZmVyZW5jZSxcbiAgICAgICAgICBzdG9yZUZpZWxkTmFtZSxcbiAgICAgICAgKSxcbiAgICAgICk7XG5cbiAgICAgIC8vIENhbGwgcmVhZChleGlzdGluZywgcmVhZE9wdGlvbnMpIHdpdGggY2FjaGVTbG90IGhvbGRpbmcgdGhpcy5jYWNoZS5cbiAgICAgIHJldHVybiBjYWNoZVNsb3Qud2l0aFZhbHVlKFxuICAgICAgICB0aGlzLmNhY2hlLFxuICAgICAgICByZWFkLFxuICAgICAgICBbZXhpc3RpbmcsIHJlYWRPcHRpb25zXSxcbiAgICAgICkgYXMgU2FmZVJlYWRvbmx5PFY+O1xuICAgIH1cblxuICAgIHJldHVybiBleGlzdGluZztcbiAgfVxuXG4gIHB1YmxpYyBnZXRNZXJnZUZ1bmN0aW9uKFxuICAgIHBhcmVudFR5cGVuYW1lOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgZmllbGROYW1lOiBzdHJpbmcsXG4gICAgY2hpbGRUeXBlbmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICApOiBGaWVsZE1lcmdlRnVuY3Rpb24gfCB1bmRlZmluZWQge1xuICAgIGxldCBwb2xpY3k6XG4gICAgICB8IFBvbGljaWVzW1widHlwZVBvbGljaWVzXCJdW3N0cmluZ11cbiAgICAgIHwgUG9saWNpZXNbXCJ0eXBlUG9saWNpZXNcIl1bc3RyaW5nXVtcImZpZWxkc1wiXVtzdHJpbmddXG4gICAgICB8IHVuZGVmaW5lZCA9XG4gICAgICB0aGlzLmdldEZpZWxkUG9saWN5KHBhcmVudFR5cGVuYW1lLCBmaWVsZE5hbWUsIGZhbHNlKTtcbiAgICBsZXQgbWVyZ2UgPSBwb2xpY3kgJiYgcG9saWN5Lm1lcmdlO1xuICAgIGlmICghbWVyZ2UgJiYgY2hpbGRUeXBlbmFtZSkge1xuICAgICAgcG9saWN5ID0gdGhpcy5nZXRUeXBlUG9saWN5KGNoaWxkVHlwZW5hbWUpO1xuICAgICAgbWVyZ2UgPSBwb2xpY3kgJiYgcG9saWN5Lm1lcmdlO1xuICAgIH1cbiAgICByZXR1cm4gbWVyZ2U7XG4gIH1cblxuICBwdWJsaWMgcnVuTWVyZ2VGdW5jdGlvbihcbiAgICBleGlzdGluZzogU3RvcmVWYWx1ZSxcbiAgICBpbmNvbWluZzogU3RvcmVWYWx1ZSxcbiAgICB7IGZpZWxkLCB0eXBlbmFtZSwgbWVyZ2UgfTogTWVyZ2VJbmZvLFxuICAgIGNvbnRleHQ6IFJlYWRNZXJnZU1vZGlmeUNvbnRleHQsXG4gICAgc3RvcmFnZT86IFN0b3JhZ2VUeXBlLFxuICApIHtcbiAgICBpZiAobWVyZ2UgPT09IG1lcmdlVHJ1ZUZuKSB7XG4gICAgICAvLyBJbnN0ZWFkIG9mIGdvaW5nIHRvIHRoZSB0cm91YmxlIG9mIGNyZWF0aW5nIGEgZnVsbFxuICAgICAgLy8gRmllbGRGdW5jdGlvbk9wdGlvbnMgb2JqZWN0IGFuZCBjYWxsaW5nIG1lcmdlVHJ1ZUZuLCB3ZSBjYW5cbiAgICAgIC8vIHNpbXBseSBjYWxsIG1lcmdlT2JqZWN0cywgYXMgbWVyZ2VUcnVlRm4gd291bGQuXG4gICAgICByZXR1cm4gbWFrZU1lcmdlT2JqZWN0c0Z1bmN0aW9uKFxuICAgICAgICBjb250ZXh0LnN0b3JlLmdldEZpZWxkVmFsdWVcbiAgICAgICkoZXhpc3RpbmcgYXMgU3RvcmVPYmplY3QsXG4gICAgICAgIGluY29taW5nIGFzIFN0b3JlT2JqZWN0KTtcbiAgICB9XG5cbiAgICBpZiAobWVyZ2UgPT09IG1lcmdlRmFsc2VGbikge1xuICAgICAgLy8gTGlrZXdpc2UgZm9yIG1lcmdlRmFsc2VGbiwgd2hvc2UgaW1wbGVtZW50YXRpb24gaXMgZXZlbiBzaW1wbGVyLlxuICAgICAgcmV0dXJuIGluY29taW5nO1xuICAgIH1cblxuICAgIHJldHVybiBtZXJnZShleGlzdGluZywgaW5jb21pbmcsIG1ha2VGaWVsZEZ1bmN0aW9uT3B0aW9ucyhcbiAgICAgIHRoaXMsXG4gICAgICAvLyBVbmxpa2Ugb3B0aW9ucy5yZWFkRmllbGQgZm9yIHJlYWQgZnVuY3Rpb25zLCB3ZSBkbyBub3QgZmFsbFxuICAgICAgLy8gYmFjayB0byB0aGUgY3VycmVudCBvYmplY3QgaWYgbm8gZm9yZWlnbk9iak9yUmVmIGlzIHByb3ZpZGVkLFxuICAgICAgLy8gYmVjYXVzZSBpdCdzIG5vdCBjbGVhciB3aGF0IHRoZSBjdXJyZW50IG9iamVjdCBzaG91bGQgYmUgZm9yXG4gICAgICAvLyBtZXJnZSBmdW5jdGlvbnM6IHRoZSAocG9zc2libHkgdW5kZWZpbmVkKSBleGlzdGluZyBvYmplY3QsIG9yXG4gICAgICAvLyB0aGUgaW5jb21pbmcgb2JqZWN0PyBJZiB5b3UgdGhpbmsgeW91ciBtZXJnZSBmdW5jdGlvbiBuZWVkc1xuICAgICAgLy8gdG8gcmVhZCBzaWJsaW5nIGZpZWxkcyBpbiBvcmRlciB0byBwcm9kdWNlIGEgbmV3IHZhbHVlIGZvclxuICAgICAgLy8gdGhlIGN1cnJlbnQgZmllbGQsIHlvdSBtaWdodCB3YW50IHRvIHJldGhpbmsgeW91ciBzdHJhdGVneSxcbiAgICAgIC8vIGJlY2F1c2UgdGhhdCdzIGEgcmVjaXBlIGZvciBtYWtpbmcgbWVyZ2UgYmVoYXZpb3Igc2Vuc2l0aXZlXG4gICAgICAvLyB0byB0aGUgb3JkZXIgaW4gd2hpY2ggZmllbGRzIGFyZSB3cml0dGVuIGludG8gdGhlIGNhY2hlLlxuICAgICAgLy8gSG93ZXZlciwgcmVhZEZpZWxkKG5hbWUsIHJlZikgaXMgdXNlZnVsIGZvciBtZXJnZSBmdW5jdGlvbnNcbiAgICAgIC8vIHRoYXQgbmVlZCB0byBkZWR1cGxpY2F0ZSBjaGlsZCBvYmplY3RzIGFuZCByZWZlcmVuY2VzLlxuICAgICAgdm9pZCAwLFxuICAgICAgeyB0eXBlbmFtZSxcbiAgICAgICAgZmllbGROYW1lOiBmaWVsZC5uYW1lLnZhbHVlLFxuICAgICAgICBmaWVsZCxcbiAgICAgICAgdmFyaWFibGVzOiBjb250ZXh0LnZhcmlhYmxlcyB9LFxuICAgICAgY29udGV4dCxcbiAgICAgIHN0b3JhZ2UgfHwgT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICApKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBtYWtlRmllbGRGdW5jdGlvbk9wdGlvbnMoXG4gIHBvbGljaWVzOiBQb2xpY2llcyxcbiAgb2JqZWN0T3JSZWZlcmVuY2U6IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlIHwgdW5kZWZpbmVkLFxuICBmaWVsZFNwZWM6IEZpZWxkU3BlY2lmaWVyLFxuICBjb250ZXh0OiBSZWFkTWVyZ2VNb2RpZnlDb250ZXh0LFxuICBzdG9yYWdlOiBTdG9yYWdlVHlwZSxcbik6IEZpZWxkRnVuY3Rpb25PcHRpb25zIHtcbiAgY29uc3Qgc3RvcmVGaWVsZE5hbWUgPSBwb2xpY2llcy5nZXRTdG9yZUZpZWxkTmFtZShmaWVsZFNwZWMpO1xuICBjb25zdCBmaWVsZE5hbWUgPSBmaWVsZE5hbWVGcm9tU3RvcmVOYW1lKHN0b3JlRmllbGROYW1lKTtcbiAgY29uc3QgdmFyaWFibGVzID0gZmllbGRTcGVjLnZhcmlhYmxlcyB8fCBjb250ZXh0LnZhcmlhYmxlcztcbiAgY29uc3QgeyBnZXRGaWVsZFZhbHVlLCB0b1JlZmVyZW5jZSwgY2FuUmVhZCB9ID0gY29udGV4dC5zdG9yZTtcblxuICByZXR1cm4ge1xuICAgIGFyZ3M6IGFyZ3NGcm9tRmllbGRTcGVjaWZpZXIoZmllbGRTcGVjKSxcbiAgICBmaWVsZDogZmllbGRTcGVjLmZpZWxkIHx8IG51bGwsXG4gICAgZmllbGROYW1lLFxuICAgIHN0b3JlRmllbGROYW1lLFxuICAgIHZhcmlhYmxlcyxcbiAgICBpc1JlZmVyZW5jZSxcbiAgICB0b1JlZmVyZW5jZSxcbiAgICBzdG9yYWdlLFxuICAgIGNhY2hlOiBwb2xpY2llcy5jYWNoZSxcbiAgICBjYW5SZWFkLFxuXG4gICAgcmVhZEZpZWxkPFQ+KFxuICAgICAgZmllbGROYW1lT3JPcHRpb25zOiBzdHJpbmcgfCBSZWFkRmllbGRPcHRpb25zLFxuICAgICAgZnJvbT86IFN0b3JlT2JqZWN0IHwgUmVmZXJlbmNlLFxuICAgICkge1xuICAgICAgY29uc3Qgb3B0aW9uczogUmVhZEZpZWxkT3B0aW9ucyA9XG4gICAgICAgIHR5cGVvZiBmaWVsZE5hbWVPck9wdGlvbnMgPT09IFwic3RyaW5nXCIgPyB7XG4gICAgICAgICAgZmllbGROYW1lOiBmaWVsZE5hbWVPck9wdGlvbnMsXG4gICAgICAgICAgZnJvbSxcbiAgICAgICAgfSA6IHsgLi4uZmllbGROYW1lT3JPcHRpb25zIH07XG5cbiAgICAgIGlmICh2b2lkIDAgPT09IG9wdGlvbnMuZnJvbSkge1xuICAgICAgICBvcHRpb25zLmZyb20gPSBvYmplY3RPclJlZmVyZW5jZTtcbiAgICAgIH1cblxuICAgICAgaWYgKHZvaWQgMCA9PT0gb3B0aW9ucy52YXJpYWJsZXMpIHtcbiAgICAgICAgb3B0aW9ucy52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwb2xpY2llcy5yZWFkRmllbGQ8VD4ob3B0aW9ucywgY29udGV4dCk7XG4gICAgfSxcblxuICAgIG1lcmdlT2JqZWN0czogbWFrZU1lcmdlT2JqZWN0c0Z1bmN0aW9uKGdldEZpZWxkVmFsdWUpLFxuICB9O1xufVxuXG5mdW5jdGlvbiBtYWtlTWVyZ2VPYmplY3RzRnVuY3Rpb24oXG4gIGdldEZpZWxkVmFsdWU6IEZpZWxkVmFsdWVHZXR0ZXIsXG4pOiBNZXJnZU9iamVjdHNGdW5jdGlvbiB7XG4gIHJldHVybiBmdW5jdGlvbiBtZXJnZU9iamVjdHMoZXhpc3RpbmcsIGluY29taW5nKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoZXhpc3RpbmcpIHx8IEFycmF5LmlzQXJyYXkoaW5jb21pbmcpKSB7XG4gICAgICB0aHJvdyBuZXcgSW52YXJpYW50RXJyb3IoXCJDYW5ub3QgYXV0b21hdGljYWxseSBtZXJnZSBhcnJheXNcIik7XG4gICAgfVxuXG4gICAgLy8gVGhlc2UgZHluYW1pYyBjaGVja3MgYXJlIG5lY2Vzc2FyeSBiZWNhdXNlIHRoZSBwYXJhbWV0ZXJzIG9mIGFcbiAgICAvLyBjdXN0b20gbWVyZ2UgZnVuY3Rpb24gY2FuIGVhc2lseSBoYXZlIHRoZSBhbnkgdHlwZSwgc28gdGhlIHR5cGVcbiAgICAvLyBzeXN0ZW0gY2Fubm90IGFsd2F5cyBlbmZvcmNlIHRoZSBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSBwYXJhbWV0ZXJcbiAgICAvLyB0eXBlcyBvZiBvcHRpb25zLm1lcmdlT2JqZWN0cy5cbiAgICBpZiAoZXhpc3RpbmcgJiYgdHlwZW9mIGV4aXN0aW5nID09PSBcIm9iamVjdFwiICYmXG4gICAgICAgIGluY29taW5nICYmIHR5cGVvZiBpbmNvbWluZyA9PT0gXCJvYmplY3RcIikge1xuICAgICAgY29uc3QgZVR5cGUgPSBnZXRGaWVsZFZhbHVlKGV4aXN0aW5nLCBcIl9fdHlwZW5hbWVcIik7XG4gICAgICBjb25zdCBpVHlwZSA9IGdldEZpZWxkVmFsdWUoaW5jb21pbmcsIFwiX190eXBlbmFtZVwiKTtcbiAgICAgIGNvbnN0IHR5cGVzRGlmZmVyID0gZVR5cGUgJiYgaVR5cGUgJiYgZVR5cGUgIT09IGlUeXBlO1xuXG4gICAgICBpZiAodHlwZXNEaWZmZXIgfHxcbiAgICAgICAgICAhc3RvcmVWYWx1ZUlzU3RvcmVPYmplY3QoZXhpc3RpbmcpIHx8XG4gICAgICAgICAgIXN0b3JlVmFsdWVJc1N0b3JlT2JqZWN0KGluY29taW5nKSkge1xuICAgICAgICByZXR1cm4gaW5jb21pbmc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7IC4uLmV4aXN0aW5nLCAuLi5pbmNvbWluZyB9O1xuICAgIH1cblxuICAgIHJldHVybiBpbmNvbWluZztcbiAgfTtcbn1cblxuZnVuY3Rpb24ga2V5QXJnc0ZuRnJvbVNwZWNpZmllcihcbiAgc3BlY2lmaWVyOiBLZXlTcGVjaWZpZXIsXG4pOiBLZXlBcmdzRnVuY3Rpb24ge1xuICByZXR1cm4gKGFyZ3MsIGNvbnRleHQpID0+IHtcbiAgICByZXR1cm4gYXJncyA/IGAke2NvbnRleHQuZmllbGROYW1lfToke1xuICAgICAgSlNPTi5zdHJpbmdpZnkoY29tcHV0ZUtleU9iamVjdChhcmdzLCBzcGVjaWZpZXIsIGZhbHNlKSlcbiAgICB9YCA6IGNvbnRleHQuZmllbGROYW1lO1xuICB9O1xufVxuXG5mdW5jdGlvbiBrZXlGaWVsZHNGbkZyb21TcGVjaWZpZXIoXG4gIHNwZWNpZmllcjogS2V5U3BlY2lmaWVyLFxuKTogS2V5RmllbGRzRnVuY3Rpb24ge1xuICBjb25zdCB0cmllID0gbmV3IEtleVRyaWU8e1xuICAgIGFsaWFzTWFwPzogQWxpYXNNYXA7XG4gIH0+KGNhblVzZVdlYWtNYXApO1xuXG4gIHJldHVybiAob2JqZWN0LCBjb250ZXh0KSA9PiB7XG4gICAgbGV0IGFsaWFzTWFwOiBBbGlhc01hcCB8IHVuZGVmaW5lZDtcbiAgICBpZiAoY29udGV4dC5zZWxlY3Rpb25TZXQgJiYgY29udGV4dC5mcmFnbWVudE1hcCkge1xuICAgICAgY29uc3QgaW5mbyA9IHRyaWUubG9va3VwQXJyYXkoW1xuICAgICAgICBjb250ZXh0LnNlbGVjdGlvblNldCxcbiAgICAgICAgY29udGV4dC5mcmFnbWVudE1hcCxcbiAgICAgIF0pO1xuICAgICAgYWxpYXNNYXAgPSBpbmZvLmFsaWFzTWFwIHx8IChcbiAgICAgICAgaW5mby5hbGlhc01hcCA9IG1ha2VBbGlhc01hcChjb250ZXh0LnNlbGVjdGlvblNldCwgY29udGV4dC5mcmFnbWVudE1hcClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5T2JqZWN0ID0gY29udGV4dC5rZXlPYmplY3QgPVxuICAgICAgY29tcHV0ZUtleU9iamVjdChvYmplY3QsIHNwZWNpZmllciwgdHJ1ZSwgYWxpYXNNYXApO1xuXG4gICAgcmV0dXJuIGAke2NvbnRleHQudHlwZW5hbWV9OiR7SlNPTi5zdHJpbmdpZnkoa2V5T2JqZWN0KX1gO1xuICB9O1xufVxuXG50eXBlIEFsaWFzTWFwID0ge1xuICAvLyBNYXAgZnJvbSBzdG9yZSBrZXkgdG8gY29ycmVzcG9uZGluZyByZXNwb25zZSBrZXkuIFVuZGVmaW5lZCB3aGVuIHRoZXJlIGFyZVxuICAvLyBubyBhbGlhc2VkIGZpZWxkcyBpbiB0aGlzIHNlbGVjdGlvbiBzZXQuXG4gIGFsaWFzZXM/OiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+O1xuICAvLyBNYXAgZnJvbSBzdG9yZSBrZXkgdG8gQWxpYXNNYXAgY29ycmVwb25kaW5nIHRvIGEgY2hpbGQgc2VsZWN0aW9uIHNldC5cbiAgLy8gVW5kZWZpbmVkIHdoZW4gdGhlcmUgYXJlIG5vIGNoaWxkIHNlbGVjdGlvbiBzZXRzLlxuICBzdWJzZXRzPzogUmVjb3JkPHN0cmluZywgQWxpYXNNYXA+O1xufTtcblxuZnVuY3Rpb24gbWFrZUFsaWFzTWFwKFxuICBzZWxlY3Rpb25TZXQ6IFNlbGVjdGlvblNldE5vZGUsXG4gIGZyYWdtZW50TWFwOiBGcmFnbWVudE1hcCxcbik6IEFsaWFzTWFwIHtcbiAgbGV0IG1hcDogQWxpYXNNYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAvLyBUT0RPIENhY2hlIHRoaXMgd29yaywgcGVyaGFwcyBieSBzdG9yaW5nIHNlbGVjdGlvblNldC5fYWxpYXNNYXA/XG4gIGNvbnN0IHdvcmtRdWV1ZSA9IG5ldyBTZXQoW3NlbGVjdGlvblNldF0pO1xuICB3b3JrUXVldWUuZm9yRWFjaChzZWxlY3Rpb25TZXQgPT4ge1xuICAgIHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLmZvckVhY2goc2VsZWN0aW9uID0+IHtcbiAgICAgIGlmIChpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgaWYgKHNlbGVjdGlvbi5hbGlhcykge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlS2V5ID0gc2VsZWN0aW9uLmFsaWFzLnZhbHVlO1xuICAgICAgICAgIGNvbnN0IHN0b3JlS2V5ID0gc2VsZWN0aW9uLm5hbWUudmFsdWU7XG4gICAgICAgICAgaWYgKHN0b3JlS2V5ICE9PSByZXNwb25zZUtleSkge1xuICAgICAgICAgICAgY29uc3QgYWxpYXNlcyA9IG1hcC5hbGlhc2VzIHx8IChtYXAuYWxpYXNlcyA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuICAgICAgICAgICAgYWxpYXNlc1tzdG9yZUtleV0gPSByZXNwb25zZUtleTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgICBjb25zdCBzdWJzZXRzID0gbWFwLnN1YnNldHMgfHwgKG1hcC5zdWJzZXRzID0gT2JqZWN0LmNyZWF0ZShudWxsKSk7XG4gICAgICAgICAgc3Vic2V0c1tzZWxlY3Rpb24ubmFtZS52YWx1ZV0gPVxuICAgICAgICAgICAgbWFrZUFsaWFzTWFwKHNlbGVjdGlvbi5zZWxlY3Rpb25TZXQsIGZyYWdtZW50TWFwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBnZXRGcmFnbWVudEZyb21TZWxlY3Rpb24oc2VsZWN0aW9uLCBmcmFnbWVudE1hcCk7XG4gICAgICAgIGlmIChmcmFnbWVudCkge1xuICAgICAgICAgIHdvcmtRdWV1ZS5hZGQoZnJhZ21lbnQuc2VsZWN0aW9uU2V0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICB9KTtcbiAgcmV0dXJuIG1hcDtcbn1cblxuZnVuY3Rpb24gY29tcHV0ZUtleU9iamVjdChcbiAgcmVzcG9uc2U6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIHNwZWNpZmllcjogS2V5U3BlY2lmaWVyLFxuICBzdHJpY3Q6IGJvb2xlYW4sXG4gIGFsaWFzTWFwPzogQWxpYXNNYXAsXG4pOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgLy8gVGhlIG9yZGVyIG9mIGFkZGluZyBwcm9wZXJ0aWVzIHRvIGtleU9iaiBhZmZlY3RzIGl0cyBKU09OIHNlcmlhbGl6YXRpb24sXG4gIC8vIHNvIHdlIGFyZSBjYXJlZnVsIHRvIGJ1aWxkIGtleU9iaiBpbiB0aGUgb3JkZXIgb2Yga2V5cyBnaXZlbiBpblxuICAvLyBzcGVjaWZpZXIuXG4gIGNvbnN0IGtleU9iaiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGxldCBwcmV2S2V5OiBzdHJpbmcgfCB1bmRlZmluZWQ7XG4gIHNwZWNpZmllci5mb3JFYWNoKHMgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHMpKSB7XG4gICAgICBpZiAodHlwZW9mIHByZXZLZXkgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgY29uc3Qgc3Vic2V0cyA9IGFsaWFzTWFwICYmIGFsaWFzTWFwLnN1YnNldHM7XG4gICAgICAgIGNvbnN0IHN1YnNldCA9IHN1YnNldHMgJiYgc3Vic2V0c1twcmV2S2V5XTtcbiAgICAgICAga2V5T2JqW3ByZXZLZXldID0gY29tcHV0ZUtleU9iamVjdChyZXNwb25zZVtwcmV2S2V5XSwgcywgc3RyaWN0LCBzdWJzZXQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBhbGlhc2VzID0gYWxpYXNNYXAgJiYgYWxpYXNNYXAuYWxpYXNlcztcbiAgICAgIGNvbnN0IHJlc3BvbnNlTmFtZSA9IGFsaWFzZXMgJiYgYWxpYXNlc1tzXSB8fCBzO1xuICAgICAgaWYgKGhhc093bi5jYWxsKHJlc3BvbnNlLCByZXNwb25zZU5hbWUpKSB7XG4gICAgICAgIGtleU9ialtwcmV2S2V5ID0gc10gPSByZXNwb25zZVtyZXNwb25zZU5hbWVdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW52YXJpYW50KCFzdHJpY3QsIGBNaXNzaW5nIGZpZWxkICcke3Jlc3BvbnNlTmFtZX0nIHdoaWxlIGNvbXB1dGluZyBrZXkgZmllbGRzYCk7XG4gICAgICAgIHByZXZLZXkgPSB2b2lkIDA7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbiAgcmV0dXJuIGtleU9iajtcbn1cbiIsICIvLyBNYWtlIGJ1aWx0aW5zIGxpa2UgTWFwIGFuZCBTZXQgc2FmZSB0byB1c2Ugd2l0aCBub24tZXh0ZW5zaWJsZSBvYmplY3RzLlxuaW1wb3J0ICcuL2ZpeFBvbHlmaWxscyc7XG5cbmltcG9ydCB7IERvY3VtZW50Tm9kZSB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgZGVwLCB3cmFwIH0gZnJvbSAnb3B0aW1pc20nO1xuXG5pbXBvcnQgeyBBcG9sbG9DYWNoZSB9IGZyb20gJy4uL2NvcmUvY2FjaGUnO1xuaW1wb3J0IHsgQ2FjaGUgfSBmcm9tICcuLi9jb3JlL3R5cGVzL0NhY2hlJztcbmltcG9ydCB7IE1pc3NpbmdGaWVsZEVycm9yIH0gZnJvbSAnLi4vY29yZS90eXBlcy9jb21tb24nO1xuaW1wb3J0IHtcbiAgYWRkVHlwZW5hbWVUb0RvY3VtZW50LFxuICBTdG9yZU9iamVjdCxcbiAgUmVmZXJlbmNlLFxuICBpc1JlZmVyZW5jZSxcbn0gZnJvbSAnLi4vLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7XG4gIEFwb2xsb1JlZHVjZXJDb25maWcsXG4gIE5vcm1hbGl6ZWRDYWNoZU9iamVjdCxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBTdG9yZVJlYWRlciB9IGZyb20gJy4vcmVhZEZyb21TdG9yZSc7XG5pbXBvcnQgeyBTdG9yZVdyaXRlciB9IGZyb20gJy4vd3JpdGVUb1N0b3JlJztcbmltcG9ydCB7IEVudGl0eVN0b3JlLCBzdXBwb3J0c1Jlc3VsdENhY2hpbmcgfSBmcm9tICcuL2VudGl0eVN0b3JlJztcbmltcG9ydCB7IG1ha2VWYXIsIGZvcmdldENhY2hlLCByZWNhbGxDYWNoZSB9IGZyb20gJy4vcmVhY3RpdmVWYXJzJztcbmltcG9ydCB7XG4gIGRlZmF1bHREYXRhSWRGcm9tT2JqZWN0LFxuICBQb3NzaWJsZVR5cGVzTWFwLFxuICBQb2xpY2llcyxcbiAgVHlwZVBvbGljaWVzLFxufSBmcm9tICcuL3BvbGljaWVzJztcbmltcG9ydCB7IGhhc093biB9IGZyb20gJy4vaGVscGVycyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5NZW1vcnlDYWNoZUNvbmZpZyBleHRlbmRzIEFwb2xsb1JlZHVjZXJDb25maWcge1xuICByZXN1bHRDYWNoaW5nPzogYm9vbGVhbjtcbiAgcG9zc2libGVUeXBlcz86IFBvc3NpYmxlVHlwZXNNYXA7XG4gIHR5cGVQb2xpY2llcz86IFR5cGVQb2xpY2llcztcbn1cblxuY29uc3QgZGVmYXVsdENvbmZpZzogSW5NZW1vcnlDYWNoZUNvbmZpZyA9IHtcbiAgZGF0YUlkRnJvbU9iamVjdDogZGVmYXVsdERhdGFJZEZyb21PYmplY3QsXG4gIGFkZFR5cGVuYW1lOiB0cnVlLFxuICByZXN1bHRDYWNoaW5nOiB0cnVlLFxuICB0eXBlUG9saWNpZXM6IHt9LFxufTtcblxuZXhwb3J0IGNsYXNzIEluTWVtb3J5Q2FjaGUgZXh0ZW5kcyBBcG9sbG9DYWNoZTxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+IHtcbiAgcHJpdmF0ZSBkYXRhOiBFbnRpdHlTdG9yZTtcbiAgcHJpdmF0ZSBvcHRpbWlzdGljRGF0YTogRW50aXR5U3RvcmU7XG5cbiAgcHJvdGVjdGVkIGNvbmZpZzogSW5NZW1vcnlDYWNoZUNvbmZpZztcbiAgcHJpdmF0ZSB3YXRjaGVzID0gbmV3IFNldDxDYWNoZS5XYXRjaE9wdGlvbnM+KCk7XG4gIHByaXZhdGUgYWRkVHlwZW5hbWU6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSB0eXBlbmFtZURvY3VtZW50Q2FjaGUgPSBuZXcgTWFwPERvY3VtZW50Tm9kZSwgRG9jdW1lbnROb2RlPigpO1xuICBwcml2YXRlIHN0b3JlUmVhZGVyOiBTdG9yZVJlYWRlcjtcbiAgcHJpdmF0ZSBzdG9yZVdyaXRlcjogU3RvcmVXcml0ZXI7XG5cbiAgLy8gRHluYW1pY2FsbHkgaW1wb3J0ZWQgY29kZSBjYW4gYXVnbWVudCBleGlzdGluZyB0eXBlUG9saWNpZXMgb3JcbiAgLy8gcG9zc2libGVUeXBlcyBieSBjYWxsaW5nIGNhY2hlLnBvbGljaWVzLmFkZFR5cGVQb2xpY2llcyBvclxuICAvLyBjYWNoZS5wb2xpY2llcy5hZGRQb3NzaWJsZXR5cGVzLlxuICBwdWJsaWMgcmVhZG9ubHkgcG9saWNpZXM6IFBvbGljaWVzO1xuXG4gIHB1YmxpYyByZWFkb25seSBtYWtlVmFyID0gbWFrZVZhcjtcblxuICBjb25zdHJ1Y3Rvcihjb25maWc6IEluTWVtb3J5Q2FjaGVDb25maWcgPSB7fSkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5jb25maWcgPSB7IC4uLmRlZmF1bHRDb25maWcsIC4uLmNvbmZpZyB9O1xuICAgIHRoaXMuYWRkVHlwZW5hbWUgPSAhIXRoaXMuY29uZmlnLmFkZFR5cGVuYW1lO1xuXG4gICAgdGhpcy5wb2xpY2llcyA9IG5ldyBQb2xpY2llcyh7XG4gICAgICBjYWNoZTogdGhpcyxcbiAgICAgIGRhdGFJZEZyb21PYmplY3Q6IHRoaXMuY29uZmlnLmRhdGFJZEZyb21PYmplY3QsXG4gICAgICBwb3NzaWJsZVR5cGVzOiB0aGlzLmNvbmZpZy5wb3NzaWJsZVR5cGVzLFxuICAgICAgdHlwZVBvbGljaWVzOiB0aGlzLmNvbmZpZy50eXBlUG9saWNpZXMsXG4gICAgfSk7XG5cbiAgICAvLyBQYXNzaW5nIHsgcmVzdWx0Q2FjaGluZzogZmFsc2UgfSBpbiB0aGUgSW5NZW1vcnlDYWNoZSBjb25zdHJ1Y3RvciBvcHRpb25zXG4gICAgLy8gd2lsbCBjb21wbGV0ZWx5IGRpc2FibGUgZGVwZW5kZW5jeSB0cmFja2luZywgd2hpY2ggd2lsbCBpbXByb3ZlIG1lbW9yeVxuICAgIC8vIHVzYWdlIGJ1dCB3b3JzZW4gdGhlIHBlcmZvcm1hbmNlIG9mIHJlcGVhdGVkIHJlYWRzLlxuICAgIHRoaXMuZGF0YSA9IG5ldyBFbnRpdHlTdG9yZS5Sb290KHtcbiAgICAgIHBvbGljaWVzOiB0aGlzLnBvbGljaWVzLFxuICAgICAgcmVzdWx0Q2FjaGluZzogdGhpcy5jb25maWcucmVzdWx0Q2FjaGluZyxcbiAgICB9KTtcblxuICAgIC8vIFdoZW4gbm8gb3B0aW1pc3RpYyB3cml0ZXMgYXJlIGN1cnJlbnRseSBhY3RpdmUsIGNhY2hlLm9wdGltaXN0aWNEYXRhID09PVxuICAgIC8vIGNhY2hlLmRhdGEsIHNvIHRoZXJlIGFyZSBubyBhZGRpdGlvbmFsIGxheWVycyBvbiB0b3Agb2YgdGhlIGFjdHVhbCBkYXRhLlxuICAgIC8vIFdoZW4gYW4gb3B0aW1pc3RpYyB1cGRhdGUgaGFwcGVucywgdGhpcy5vcHRpbWlzdGljRGF0YSB3aWxsIGJlY29tZSBhXG4gICAgLy8gbGlua2VkIGxpc3Qgb2YgT3B0aW1pc3RpY0NhY2hlTGF5ZXIgb2JqZWN0cyB0aGF0IHRlcm1pbmF0ZXMgd2l0aCB0aGVcbiAgICAvLyBvcmlnaW5hbCB0aGlzLmRhdGEgY2FjaGUgb2JqZWN0LlxuICAgIHRoaXMub3B0aW1pc3RpY0RhdGEgPSB0aGlzLmRhdGE7XG5cbiAgICB0aGlzLnN0b3JlV3JpdGVyID0gbmV3IFN0b3JlV3JpdGVyKFxuICAgICAgdGhpcyxcbiAgICAgIHRoaXMuc3RvcmVSZWFkZXIgPSBuZXcgU3RvcmVSZWFkZXIoe1xuICAgICAgICBjYWNoZTogdGhpcyxcbiAgICAgICAgYWRkVHlwZW5hbWU6IHRoaXMuYWRkVHlwZW5hbWUsXG4gICAgICB9KSxcbiAgICApO1xuICB9XG5cbiAgcHVibGljIHJlc3RvcmUoZGF0YTogTm9ybWFsaXplZENhY2hlT2JqZWN0KTogdGhpcyB7XG4gICAgaWYgKGRhdGEpIHRoaXMuZGF0YS5yZXBsYWNlKGRhdGEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIGV4dHJhY3Qob3B0aW1pc3RpYzogYm9vbGVhbiA9IGZhbHNlKTogTm9ybWFsaXplZENhY2hlT2JqZWN0IHtcbiAgICByZXR1cm4gKG9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhKS5leHRyYWN0KCk7XG4gIH1cblxuICBwdWJsaWMgcmVhZDxUPihvcHRpb25zOiBDYWNoZS5SZWFkT3B0aW9ucyk6IFQgfCBudWxsIHtcbiAgICBjb25zdCB7XG4gICAgICAvLyBTaW5jZSByZWFkIHJldHVybnMgZGF0YSBvciBudWxsLCB3aXRob3V0IGFueSBhZGRpdGlvbmFsIG1ldGFkYXRhXG4gICAgICAvLyBhYm91dCB3aGV0aGVyL3doZXJlIHRoZXJlIG1pZ2h0IGhhdmUgYmVlbiBtaXNzaW5nIGZpZWxkcywgdGhlXG4gICAgICAvLyBkZWZhdWx0IGJlaGF2aW9yIGNhbm5vdCBiZSByZXR1cm5QYXJ0aWFsRGF0YSA9IHRydWUgKGxpa2UgaXQgaXNcbiAgICAgIC8vIGZvciB0aGUgZGlmZiBtZXRob2QpLCBzaW5jZSBkZWZhdWx0aW5nIHRvIHRydWUgd291bGQgdmlvbGF0ZSB0aGVcbiAgICAgIC8vIGludGVncml0eSBvZiB0aGUgVCBpbiB0aGUgcmV0dXJuIHR5cGUuIEhvd2V2ZXIsIHBhcnRpYWwgZGF0YSBtYXlcbiAgICAgIC8vIGJlIHVzZWZ1bCBpbiBzb21lIGNhc2VzLCBzbyByZXR1cm5QYXJ0aWFsRGF0YTp0cnVlIG1heSBiZVxuICAgICAgLy8gc3BlY2lmaWVkIGV4cGxpY2l0bHkuXG4gICAgICByZXR1cm5QYXJ0aWFsRGF0YSA9IGZhbHNlLFxuICAgIH0gPSBvcHRpb25zO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZVJlYWRlci5kaWZmUXVlcnlBZ2FpbnN0U3RvcmU8VD4oe1xuICAgICAgICBzdG9yZTogb3B0aW9ucy5vcHRpbWlzdGljID8gdGhpcy5vcHRpbWlzdGljRGF0YSA6IHRoaXMuZGF0YSxcbiAgICAgICAgcXVlcnk6IG9wdGlvbnMucXVlcnksXG4gICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgIHJvb3RJZDogb3B0aW9ucy5yb290SWQsXG4gICAgICAgIGNvbmZpZzogdGhpcy5jb25maWcsXG4gICAgICAgIHJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgfSkucmVzdWx0IHx8IG51bGw7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgaWYgKGUgaW5zdGFuY2VvZiBNaXNzaW5nRmllbGRFcnJvcikge1xuICAgICAgICAvLyBTd2FsbG93IE1pc3NpbmdGaWVsZEVycm9yIGFuZCByZXR1cm4gbnVsbCwgc28gY2FsbGVycyBkbyBub3RcbiAgICAgICAgLy8gbmVlZCB0byB3b3JyeSBhYm91dCBjYXRjaGluZyBcIm5vcm1hbFwiIGV4Y2VwdGlvbnMgcmVzdWx0aW5nIGZyb21cbiAgICAgICAgLy8gaW5jb21wbGV0ZSBjYWNoZSBkYXRhLiBVbmV4cGVjdGVkIGVycm9ycyB3aWxsIGJlIHJlLXRocm93bi4gSWZcbiAgICAgICAgLy8geW91IG5lZWQgbW9yZSBpbmZvcm1hdGlvbiBhYm91dCB3aGljaCBmaWVsZHMgd2VyZSBtaXNzaW5nLCB1c2VcbiAgICAgICAgLy8gY2FjaGUuZGlmZiBpbnN0ZWFkLCBhbmQgZXhhbWluZSBkaWZmUmVzdWx0Lm1pc3NpbmcuXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgICAgdGhyb3cgZTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgd3JpdGUob3B0aW9uczogQ2FjaGUuV3JpdGVPcHRpb25zKTogUmVmZXJlbmNlIHwgdW5kZWZpbmVkIHtcbiAgICB0cnkge1xuICAgICAgKyt0aGlzLnR4Q291bnQ7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yZVdyaXRlci53cml0ZVRvU3RvcmUoe1xuICAgICAgICBzdG9yZTogdGhpcy5kYXRhLFxuICAgICAgICBxdWVyeTogb3B0aW9ucy5xdWVyeSxcbiAgICAgICAgcmVzdWx0OiBvcHRpb25zLnJlc3VsdCxcbiAgICAgICAgZGF0YUlkOiBvcHRpb25zLmRhdGFJZCxcbiAgICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgIH0pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoIS0tdGhpcy50eENvdW50ICYmIG9wdGlvbnMuYnJvYWRjYXN0ICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbW9kaWZ5KG9wdGlvbnM6IENhY2hlLk1vZGlmeU9wdGlvbnMpOiBib29sZWFuIHtcbiAgICBpZiAoaGFzT3duLmNhbGwob3B0aW9ucywgXCJpZFwiKSAmJiAhb3B0aW9ucy5pZCkge1xuICAgICAgLy8gVG8gbXkga25vd2xlZGdlLCBUeXBlU2NyaXB0IGRvZXMgbm90IGN1cnJlbnRseSBwcm92aWRlIGEgd2F5IHRvXG4gICAgICAvLyBlbmZvcmNlIHRoYXQgYW4gb3B0aW9uYWwgcHJvcGVydHk/OnR5cGUgbXVzdCAqbm90KiBiZSB1bmRlZmluZWRcbiAgICAgIC8vIHdoZW4gcHJlc2VudC4gVGhhdCBhYmlsaXR5IHdvdWxkIGJlIHVzZWZ1bCBoZXJlLCBiZWNhdXNlIHdlIHdhbnRcbiAgICAgIC8vIG9wdGlvbnMuaWQgdG8gZGVmYXVsdCB0byBST09UX1FVRVJZIG9ubHkgd2hlbiBubyBvcHRpb25zLmlkIHdhc1xuICAgICAgLy8gcHJvdmlkZWQuIElmIHRoZSBjYWxsZXIgYXR0ZW1wdHMgdG8gcGFzcyBvcHRpb25zLmlkIHdpdGggYVxuICAgICAgLy8gZmFsc3kvdW5kZWZpbmVkIHZhbHVlIChwZXJoYXBzIGJlY2F1c2UgY2FjaGUuaWRlbnRpZnkgZmFpbGVkKSwgd2VcbiAgICAgIC8vIHNob3VsZCBub3QgYXNzdW1lIHRoZSBnb2FsIHdhcyB0byBtb2RpZnkgdGhlIFJPT1RfUVVFUlkgb2JqZWN0LlxuICAgICAgLy8gV2UgY291bGQgdGhyb3csIGJ1dCBpdCBzZWVtcyBuYXR1cmFsIHRvIHJldHVybiBmYWxzZSB0byBpbmRpY2F0ZVxuICAgICAgLy8gdGhhdCBub3RoaW5nIHdhcyBtb2RpZmllZC5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgY29uc3Qgc3RvcmUgPSBvcHRpb25zLm9wdGltaXN0aWMgLy8gRGVmYXVsdHMgdG8gZmFsc2UuXG4gICAgICA/IHRoaXMub3B0aW1pc3RpY0RhdGFcbiAgICAgIDogdGhpcy5kYXRhO1xuICAgIHRyeSB7XG4gICAgICArK3RoaXMudHhDb3VudDtcbiAgICAgIHJldHVybiBzdG9yZS5tb2RpZnkob3B0aW9ucy5pZCB8fCBcIlJPT1RfUVVFUllcIiwgb3B0aW9ucy5maWVsZHMpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoIS0tdGhpcy50eENvdW50ICYmIG9wdGlvbnMuYnJvYWRjYXN0ICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZGlmZjxUPihvcHRpb25zOiBDYWNoZS5EaWZmT3B0aW9ucyk6IENhY2hlLkRpZmZSZXN1bHQ8VD4ge1xuICAgIHJldHVybiB0aGlzLnN0b3JlUmVhZGVyLmRpZmZRdWVyeUFnYWluc3RTdG9yZSh7XG4gICAgICBzdG9yZTogb3B0aW9ucy5vcHRpbWlzdGljID8gdGhpcy5vcHRpbWlzdGljRGF0YSA6IHRoaXMuZGF0YSxcbiAgICAgIHJvb3RJZDogb3B0aW9ucy5pZCB8fCBcIlJPT1RfUVVFUllcIixcbiAgICAgIHF1ZXJ5OiBvcHRpb25zLnF1ZXJ5LFxuICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgIHJldHVyblBhcnRpYWxEYXRhOiBvcHRpb25zLnJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgY29uZmlnOiB0aGlzLmNvbmZpZyxcbiAgICB9KTtcbiAgfVxuXG4gIHB1YmxpYyB3YXRjaCh3YXRjaDogQ2FjaGUuV2F0Y2hPcHRpb25zKTogKCkgPT4gdm9pZCB7XG4gICAgaWYgKCF0aGlzLndhdGNoZXMuc2l6ZSkge1xuICAgICAgLy8gSW4gY2FzZSB3ZSBwcmV2aW91c2x5IGNhbGxlZCBmb3JnZXRDYWNoZSh0aGlzKSBiZWNhdXNlXG4gICAgICAvLyB0aGlzLndhdGNoZXMgYmVjYW1lIGVtcHR5IChzZWUgYmVsb3cpLCByZWF0dGFjaCB0aGlzIGNhY2hlIHRvIGFueVxuICAgICAgLy8gcmVhY3RpdmUgdmFyaWFibGVzIG9uIHdoaWNoIGl0IHByZXZpb3VzbHkgZGVwZW5kZWQuIEl0IG1pZ2h0IHNlZW1cbiAgICAgIC8vIHBhcmFkb3hpY2FsIHRoYXQgd2UncmUgYWJsZSB0byByZWNhbGwgc29tZXRoaW5nIHdlIHN1cHBvc2VkbHlcbiAgICAgIC8vIGZvcmdvdCwgYnV0IHRoZSBwb2ludCBvZiBjYWxsaW5nIGZvcmdldENhY2hlKHRoaXMpIGlzIHRvIHNpbGVuY2VcbiAgICAgIC8vIHVzZWxlc3MgYnJvYWRjYXN0cyB3aGlsZSB0aGlzLndhdGNoZXMgaXMgZW1wdHksIGFuZCB0byBhbGxvdyB0aGVcbiAgICAgIC8vIGNhY2hlIHRvIGJlIGdhcmJhZ2UgY29sbGVjdGVkLiBJZiwgaG93ZXZlciwgd2UgbWFuYWdlIHRvIGNhbGxcbiAgICAgIC8vIHJlY2FsbENhY2hlKHRoaXMpIGhlcmUsIHRoaXMgY2FjaGUgb2JqZWN0IG11c3Qgbm90IGhhdmUgYmVlblxuICAgICAgLy8gZ2FyYmFnZSBjb2xsZWN0ZWQgeWV0LCBhbmQgc2hvdWxkIHJlc3VtZSByZWNlaXZpbmcgdXBkYXRlcyBmcm9tXG4gICAgICAvLyByZWFjdGl2ZSB2YXJpYWJsZXMsIG5vdyB0aGF0IGl0IGhhcyBhIHdhdGNoZXIgdG8gbm90aWZ5LlxuICAgICAgcmVjYWxsQ2FjaGUodGhpcyk7XG4gICAgfVxuICAgIHRoaXMud2F0Y2hlcy5hZGQod2F0Y2gpO1xuICAgIGlmICh3YXRjaC5pbW1lZGlhdGUpIHtcbiAgICAgIHRoaXMubWF5YmVCcm9hZGNhc3RXYXRjaCh3YXRjaCk7XG4gICAgfVxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAvLyBPbmNlIHdlIHJlbW92ZSB0aGUgbGFzdCB3YXRjaCBmcm9tIHRoaXMud2F0Y2hlcywgY2FjaGUuYnJvYWRjYXN0V2F0Y2hlc1xuICAgICAgLy8gbm8gbG9uZ2VyIGRvZXMgYW55dGhpbmcsIHNvIHdlIHByZWVtcHRpdmVseSB0ZWxsIHRoZSByZWFjdGl2ZSB2YXJpYWJsZVxuICAgICAgLy8gc3lzdGVtIHRvIGV4Y2x1ZGUgdGhpcyBjYWNoZSBmcm9tIGZ1dHVyZSBicm9hZGNhc3RzLlxuICAgICAgaWYgKHRoaXMud2F0Y2hlcy5kZWxldGUod2F0Y2gpICYmICF0aGlzLndhdGNoZXMuc2l6ZSkge1xuICAgICAgICBmb3JnZXRDYWNoZSh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud2F0Y2hEZXAuZGlydHkod2F0Y2gpO1xuICAgICAgLy8gUmVtb3ZlIHRoaXMgd2F0Y2ggZnJvbSB0aGUgTFJVIGNhY2hlIG1hbmFnZWQgYnkgdGhlXG4gICAgICAvLyBtYXliZUJyb2FkY2FzdFdhdGNoIE9wdGltaXN0aWNXcmFwcGVyRnVuY3Rpb24sIHRvIHByZXZlbnQgbWVtb3J5XG4gICAgICAvLyBsZWFrcyBpbnZvbHZpbmcgdGhlIGNsb3N1cmUgb2Ygd2F0Y2guY2FsbGJhY2suXG4gICAgICB0aGlzLm1heWJlQnJvYWRjYXN0V2F0Y2guZm9yZ2V0KHdhdGNoKTtcbiAgICB9O1xuICB9XG5cbiAgLy8gUmVxdWVzdCBnYXJiYWdlIGNvbGxlY3Rpb24gb2YgdW5yZWFjaGFibGUgbm9ybWFsaXplZCBlbnRpdGllcy5cbiAgcHVibGljIGdjKCkge1xuICAgIHJldHVybiB0aGlzLm9wdGltaXN0aWNEYXRhLmdjKCk7XG4gIH1cblxuICAvLyBDYWxsIHRoaXMgbWV0aG9kIHRvIGVuc3VyZSB0aGUgZ2l2ZW4gcm9vdCBJRCByZW1haW5zIGluIHRoZSBjYWNoZSBhZnRlclxuICAvLyBnYXJiYWdlIGNvbGxlY3Rpb24sIGFsb25nIHdpdGggaXRzIHRyYW5zaXRpdmUgY2hpbGQgZW50aXRpZXMuIE5vdGUgdGhhdFxuICAvLyB0aGUgY2FjaGUgYXV0b21hdGljYWxseSByZXRhaW5zIGFsbCBkaXJlY3RseSB3cml0dGVuIGVudGl0aWVzLiBCeSBkZWZhdWx0LFxuICAvLyB0aGUgcmV0YWlubWVudCBwZXJzaXN0cyBhZnRlciBvcHRpbWlzdGljIHVwZGF0ZXMgYXJlIHJlbW92ZWQuIFBhc3MgdHJ1ZVxuICAvLyBmb3IgdGhlIG9wdGltaXN0aWMgYXJndW1lbnQgaWYgeW91IHdvdWxkIHByZWZlciBmb3IgdGhlIHJldGFpbm1lbnQgdG8gYmVcbiAgLy8gZGlzY2FyZGVkIHdoZW4gdGhlIHRvcC1tb3N0IG9wdGltaXN0aWMgbGF5ZXIgaXMgcmVtb3ZlZC4gUmV0dXJucyB0aGVcbiAgLy8gcmVzdWx0aW5nIChub24tbmVnYXRpdmUpIHJldGFpbm1lbnQgY291bnQuXG4gIHB1YmxpYyByZXRhaW4ocm9vdElkOiBzdHJpbmcsIG9wdGltaXN0aWM/OiBib29sZWFuKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKG9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhKS5yZXRhaW4ocm9vdElkKTtcbiAgfVxuXG4gIC8vIENhbGwgdGhpcyBtZXRob2QgdG8gdW5kbyB0aGUgZWZmZWN0IG9mIHRoZSByZXRhaW4gbWV0aG9kLCBhYm92ZS4gT25jZSB0aGVcbiAgLy8gcmV0YWlubWVudCBjb3VudCBmYWxscyB0byB6ZXJvLCB0aGUgZ2l2ZW4gSUQgd2lsbCBubyBsb25nZXIgYmUgcHJlc2VydmVkXG4gIC8vIGR1cmluZyBnYXJiYWdlIGNvbGxlY3Rpb24sIHRob3VnaCBpdCBtYXkgc3RpbGwgYmUgcHJlc2VydmVkIGJ5IG90aGVyIHNhZmVcbiAgLy8gZW50aXRpZXMgdGhhdCByZWZlciB0byBpdC4gUmV0dXJucyB0aGUgcmVzdWx0aW5nIChub24tbmVnYXRpdmUpIHJldGFpbm1lbnRcbiAgLy8gY291bnQsIGluIGNhc2UgdGhhdCdzIHVzZWZ1bC5cbiAgcHVibGljIHJlbGVhc2Uocm9vdElkOiBzdHJpbmcsIG9wdGltaXN0aWM/OiBib29sZWFuKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKG9wdGltaXN0aWMgPyB0aGlzLm9wdGltaXN0aWNEYXRhIDogdGhpcy5kYXRhKS5yZWxlYXNlKHJvb3RJZCk7XG4gIH1cblxuICAvLyBSZXR1cm5zIHRoZSBjYW5vbmljYWwgSUQgZm9yIGEgZ2l2ZW4gU3RvcmVPYmplY3QsIG9iZXlpbmcgdHlwZVBvbGljaWVzXG4gIC8vIGFuZCBrZXlGaWVsZHMgKGFuZCBkYXRhSWRGcm9tT2JqZWN0LCBpZiB5b3Ugc3RpbGwgdXNlIHRoYXQpLiBBdCBtaW5pbXVtLFxuICAvLyB0aGUgb2JqZWN0IG11c3QgY29udGFpbiBhIF9fdHlwZW5hbWUgYW5kIGFueSBwcmltYXJ5IGtleSBmaWVsZHMgcmVxdWlyZWRcbiAgLy8gdG8gaWRlbnRpZnkgZW50aXRpZXMgb2YgdGhhdCB0eXBlLiBJZiB5b3UgcGFzcyBhIHF1ZXJ5IHJlc3VsdCBvYmplY3QsIGJlXG4gIC8vIHN1cmUgdGhhdCBub25lIG9mIHRoZSBwcmltYXJ5IGtleSBmaWVsZHMgaGF2ZSBiZWVuIHJlbmFtZWQgYnkgYWxpYXNpbmcuXG4gIC8vIElmIHlvdSBwYXNzIGEgUmVmZXJlbmNlIG9iamVjdCwgaXRzIF9fcmVmIElEIHN0cmluZyB3aWxsIGJlIHJldHVybmVkLlxuICBwdWJsaWMgaWRlbnRpZnkob2JqZWN0OiBTdG9yZU9iamVjdCB8IFJlZmVyZW5jZSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIGlzUmVmZXJlbmNlKG9iamVjdCkgPyBvYmplY3QuX19yZWYgOlxuICAgICAgdGhpcy5wb2xpY2llcy5pZGVudGlmeShvYmplY3QpWzBdO1xuICB9XG5cbiAgcHVibGljIGV2aWN0KG9wdGlvbnM6IENhY2hlLkV2aWN0T3B0aW9ucyk6IGJvb2xlYW4ge1xuICAgIGlmICghb3B0aW9ucy5pZCkge1xuICAgICAgaWYgKGhhc093bi5jYWxsKG9wdGlvbnMsIFwiaWRcIikpIHtcbiAgICAgICAgLy8gU2VlIGNvbW1lbnQgaW4gbW9kaWZ5IG1ldGhvZCBhYm91dCB3aHkgd2UgcmV0dXJuIGZhbHNlIHdoZW5cbiAgICAgICAgLy8gb3B0aW9ucy5pZCBleGlzdHMgYnV0IGlzIGZhbHN5L3VuZGVmaW5lZC5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgaWQ6IFwiUk9PVF9RVUVSWVwiIH07XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAvLyBJdCdzIHVubGlrZWx5IHRoYXQgdGhlIGV2aWN0aW9uIHdpbGwgZW5kIHVwIGludm9raW5nIGFueSBvdGhlclxuICAgICAgLy8gY2FjaGUgdXBkYXRlIG9wZXJhdGlvbnMgd2hpbGUgaXQncyBydW5uaW5nLCBidXQge2luLGRlfWNyZW1lbnRpbmdcbiAgICAgIC8vIHRoaXMudHhDb3VudCBzdGlsbCBzZWVtcyBsaWtlIGEgZ29vZCBpZGVhLCBmb3IgdW5pZm9ybWl0eSB3aXRoXG4gICAgICAvLyB0aGUgb3RoZXIgdXBkYXRlIG1ldGhvZHMuXG4gICAgICArK3RoaXMudHhDb3VudDtcbiAgICAgIHJldHVybiB0aGlzLm9wdGltaXN0aWNEYXRhLmV2aWN0KG9wdGlvbnMpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBpZiAoIS0tdGhpcy50eENvdW50ICYmIG9wdGlvbnMuYnJvYWRjYXN0ICE9PSBmYWxzZSkge1xuICAgICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVzZXQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy5kYXRhLmNsZWFyKCk7XG4gICAgdGhpcy5vcHRpbWlzdGljRGF0YSA9IHRoaXMuZGF0YTtcbiAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBwdWJsaWMgcmVtb3ZlT3B0aW1pc3RpYyhpZFRvUmVtb3ZlOiBzdHJpbmcpIHtcbiAgICBjb25zdCBuZXdPcHRpbWlzdGljRGF0YSA9IHRoaXMub3B0aW1pc3RpY0RhdGEucmVtb3ZlTGF5ZXIoaWRUb1JlbW92ZSk7XG4gICAgaWYgKG5ld09wdGltaXN0aWNEYXRhICE9PSB0aGlzLm9wdGltaXN0aWNEYXRhKSB7XG4gICAgICB0aGlzLm9wdGltaXN0aWNEYXRhID0gbmV3T3B0aW1pc3RpY0RhdGE7XG4gICAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHR4Q291bnQgPSAwO1xuXG4gIHB1YmxpYyBwZXJmb3JtVHJhbnNhY3Rpb24oXG4gICAgdHJhbnNhY3Rpb246IChjYWNoZTogSW5NZW1vcnlDYWNoZSkgPT4gYW55LFxuICAgIG9wdGltaXN0aWNJZD86IHN0cmluZyB8IG51bGwsXG4gICkge1xuICAgIGNvbnN0IHBlcmZvcm0gPSAobGF5ZXI/OiBFbnRpdHlTdG9yZSkgPT4ge1xuICAgICAgY29uc3QgeyBkYXRhLCBvcHRpbWlzdGljRGF0YSB9ID0gdGhpcztcbiAgICAgICsrdGhpcy50eENvdW50O1xuICAgICAgaWYgKGxheWVyKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHRoaXMub3B0aW1pc3RpY0RhdGEgPSBsYXllcjtcbiAgICAgIH1cbiAgICAgIHRyeSB7XG4gICAgICAgIHRyYW5zYWN0aW9uKHRoaXMpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLS10aGlzLnR4Q291bnQ7XG4gICAgICAgIHRoaXMuZGF0YSA9IGRhdGE7XG4gICAgICAgIHRoaXMub3B0aW1pc3RpY0RhdGEgPSBvcHRpbWlzdGljRGF0YTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGV0IGZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24gPSBmYWxzZTtcblxuICAgIGlmICh0eXBlb2Ygb3B0aW1pc3RpY0lkID09PSAnc3RyaW5nJykge1xuICAgICAgLy8gTm90ZSB0aGF0IHRoZXJlIGNhbiBiZSBtdWx0aXBsZSBsYXllcnMgd2l0aCB0aGUgc2FtZSBvcHRpbWlzdGljSWQuXG4gICAgICAvLyBXaGVuIHJlbW92ZU9wdGltaXN0aWMoaWQpIGlzIGNhbGxlZCBmb3IgdGhhdCBpZCwgYWxsIG1hdGNoaW5nIGxheWVyc1xuICAgICAgLy8gd2lsbCBiZSByZW1vdmVkLCBhbmQgdGhlIHJlbWFpbmluZyBsYXllcnMgd2lsbCBiZSByZWFwcGxpZWQuXG4gICAgICB0aGlzLm9wdGltaXN0aWNEYXRhID0gdGhpcy5vcHRpbWlzdGljRGF0YS5hZGRMYXllcihvcHRpbWlzdGljSWQsIHBlcmZvcm0pO1xuICAgICAgZnJvbU9wdGltaXN0aWNUcmFuc2FjdGlvbiA9IHRydWU7XG4gICAgfSBlbHNlIGlmIChvcHRpbWlzdGljSWQgPT09IG51bGwpIHtcbiAgICAgIC8vIEVuc3VyZSBib3RoIHRoaXMuZGF0YSBhbmQgdGhpcy5vcHRpbWlzdGljRGF0YSByZWZlciB0byB0aGUgcm9vdFxuICAgICAgLy8gKG5vbi1vcHRpbWlzdGljKSBsYXllciBvZiB0aGUgY2FjaGUgZHVyaW5nIHRoZSB0cmFuc2FjdGlvbi4gTm90ZVxuICAgICAgLy8gdGhhdCB0aGlzLmRhdGEgY291bGQgYmUgYSBMYXllciBpZiB3ZSBhcmUgY3VycmVudGx5IGV4ZWN1dGluZyBhblxuICAgICAgLy8gb3B0aW1pc3RpYyB0cmFuc2FjdGlvbiBmdW5jdGlvbiwgYnV0IG90aGVyd2lzZSB3aWxsIGFsd2F5cyBiZSBhblxuICAgICAgLy8gRW50aXR5U3RvcmUuUm9vdCBpbnN0YW5jZS5cbiAgICAgIHBlcmZvcm0odGhpcy5kYXRhKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3RoZXJ3aXNlLCBsZWF2ZSB0aGlzLmRhdGEgYW5kIHRoaXMub3B0aW1pc3RpY0RhdGEgdW5jaGFuZ2VkIGFuZFxuICAgICAgLy8gcnVuIHRoZSB0cmFuc2FjdGlvbiB3aXRoIGJyb2FkY2FzdCBiYXRjaGluZy5cbiAgICAgIHBlcmZvcm0oKTtcbiAgICB9XG5cbiAgICAvLyBUaGlzIGJyb2FkY2FzdCBkb2VzIG5vdGhpbmcgaWYgdGhpcy50eENvdW50ID4gMC5cbiAgICB0aGlzLmJyb2FkY2FzdFdhdGNoZXMoZnJvbU9wdGltaXN0aWNUcmFuc2FjdGlvbik7XG4gIH1cblxuICBwdWJsaWMgdHJhbnNmb3JtRG9jdW1lbnQoZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSk6IERvY3VtZW50Tm9kZSB7XG4gICAgaWYgKHRoaXMuYWRkVHlwZW5hbWUpIHtcbiAgICAgIGxldCByZXN1bHQgPSB0aGlzLnR5cGVuYW1lRG9jdW1lbnRDYWNoZS5nZXQoZG9jdW1lbnQpO1xuICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgcmVzdWx0ID0gYWRkVHlwZW5hbWVUb0RvY3VtZW50KGRvY3VtZW50KTtcbiAgICAgICAgdGhpcy50eXBlbmFtZURvY3VtZW50Q2FjaGUuc2V0KGRvY3VtZW50LCByZXN1bHQpO1xuICAgICAgICAvLyBJZiBzb21lb25lIGNhbGxzIHRyYW5zZm9ybURvY3VtZW50IGFuZCB0aGVuIG1pc3Rha2VubHkgcGFzc2VzIHRoZVxuICAgICAgICAvLyByZXN1bHQgYmFjayBpbnRvIGFuIEFQSSB0aGF0IGFsc28gY2FsbHMgdHJhbnNmb3JtRG9jdW1lbnQsIG1ha2Ugc3VyZVxuICAgICAgICAvLyB3ZSBkb24ndCBrZWVwIGNyZWF0aW5nIG5ldyBxdWVyeSBkb2N1bWVudHMuXG4gICAgICAgIHRoaXMudHlwZW5hbWVEb2N1bWVudENhY2hlLnNldChyZXN1bHQsIHJlc3VsdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICByZXR1cm4gZG9jdW1lbnQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgYnJvYWRjYXN0V2F0Y2hlcyhmcm9tT3B0aW1pc3RpY1RyYW5zYWN0aW9uPzogYm9vbGVhbikge1xuICAgIGlmICghdGhpcy50eENvdW50KSB7XG4gICAgICB0aGlzLndhdGNoZXMuZm9yRWFjaChjID0+IHRoaXMubWF5YmVCcm9hZGNhc3RXYXRjaChjLCBmcm9tT3B0aW1pc3RpY1RyYW5zYWN0aW9uKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBtYXliZUJyb2FkY2FzdFdhdGNoID0gd3JhcCgoXG4gICAgYzogQ2FjaGUuV2F0Y2hPcHRpb25zLFxuICAgIGZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24/OiBib29sZWFuLFxuICApID0+IHtcbiAgICByZXR1cm4gdGhpcy5icm9hZGNhc3RXYXRjaC5jYWxsKHRoaXMsIGMsICEhZnJvbU9wdGltaXN0aWNUcmFuc2FjdGlvbik7XG4gIH0sIHtcbiAgICBtYWtlQ2FjaGVLZXk6IChjOiBDYWNoZS5XYXRjaE9wdGlvbnMpID0+IHtcbiAgICAgIC8vIFJldHVybiBhIGNhY2hlIGtleSAodGh1cyBlbmFibGluZyByZXN1bHQgY2FjaGluZykgb25seSBpZiB3ZSdyZVxuICAgICAgLy8gY3VycmVudGx5IHVzaW5nIGEgZGF0YSBzdG9yZSB0aGF0IGNhbiB0cmFjayBjYWNoZSBkZXBlbmRlbmNpZXMuXG4gICAgICBjb25zdCBzdG9yZSA9IGMub3B0aW1pc3RpYyA/IHRoaXMub3B0aW1pc3RpY0RhdGEgOiB0aGlzLmRhdGE7XG4gICAgICBpZiAoc3VwcG9ydHNSZXN1bHRDYWNoaW5nKHN0b3JlKSkge1xuICAgICAgICBjb25zdCB7IG9wdGltaXN0aWMsIHJvb3RJZCwgdmFyaWFibGVzIH0gPSBjO1xuICAgICAgICByZXR1cm4gc3RvcmUubWFrZUNhY2hlS2V5KFxuICAgICAgICAgIGMucXVlcnksXG4gICAgICAgICAgLy8gRGlmZmVyZW50IHdhdGNoZXMgY2FuIGhhdmUgdGhlIHNhbWUgcXVlcnksIG9wdGltaXN0aWNcbiAgICAgICAgICAvLyBzdGF0dXMsIHJvb3RJZCwgYW5kIHZhcmlhYmxlcywgYnV0IGlmIHRoZWlyIGNhbGxiYWNrcyBhcmVcbiAgICAgICAgICAvLyBkaWZmZXJlbnQsIHRoZSAoaWRlbnRpY2FsKSByZXN1bHQgbmVlZHMgdG8gYmUgZGVsaXZlcmVkIHRvXG4gICAgICAgICAgLy8gZWFjaCBkaXN0aW5jdCBjYWxsYmFjay4gVGhlIGVhc2llc3Qgd2F5IHRvIGFjaGlldmUgdGhhdFxuICAgICAgICAgIC8vIHNlcGFyYXRpb24gaXMgdG8gaW5jbHVkZSBjLmNhbGxiYWNrIGluIHRoZSBjYWNoZSBrZXkgZm9yXG4gICAgICAgICAgLy8gbWF5YmVCcm9hZGNhc3RXYXRjaCBjYWxscy4gU2VlIGlzc3VlICM1NzMzLlxuICAgICAgICAgIGMuY2FsbGJhY2ssXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoeyBvcHRpbWlzdGljLCByb290SWQsIHZhcmlhYmxlcyB9KSxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHByaXZhdGUgd2F0Y2hEZXAgPSBkZXA8Q2FjaGUuV2F0Y2hPcHRpb25zPigpO1xuXG4gIC8vIFRoaXMgbWV0aG9kIGlzIHdyYXBwZWQgYnkgbWF5YmVCcm9hZGNhc3RXYXRjaCwgd2hpY2ggaXMgY2FsbGVkIGJ5XG4gIC8vIGJyb2FkY2FzdFdhdGNoZXMsIHNvIHRoYXQgd2UgY29tcHV0ZSBhbmQgYnJvYWRjYXN0IHJlc3VsdHMgb25seSB3aGVuXG4gIC8vIHRoZSBkYXRhIHRoYXQgd291bGQgYmUgYnJvYWRjYXN0IG1pZ2h0IGhhdmUgY2hhbmdlZC4gSXQgd291bGQgYmVcbiAgLy8gc2ltcGxlciB0byBjaGVjayBmb3IgY2hhbmdlcyBhZnRlciByZWNvbXB1dGluZyBhIHJlc3VsdCBidXQgYmVmb3JlXG4gIC8vIGJyb2FkY2FzdGluZyBpdCwgYnV0IHRoaXMgd3JhcHBpbmcgYXBwcm9hY2ggYWxsb3dzIHVzIHRvIHNraXAgYm90aFxuICAvLyB0aGUgcmVjb21wdXRhdGlvbiBhbmQgdGhlIGJyb2FkY2FzdCwgaW4gbW9zdCBjYXNlcy5cbiAgcHJpdmF0ZSBicm9hZGNhc3RXYXRjaChcbiAgICBjOiBDYWNoZS5XYXRjaE9wdGlvbnMsXG4gICAgZnJvbU9wdGltaXN0aWNUcmFuc2FjdGlvbjogYm9vbGVhbixcbiAgKSB7XG4gICAgLy8gRmlyc3QsIGludmFsaWRhdGUgYW55IG90aGVyIG1heWJlQnJvYWRjYXN0V2F0Y2ggd3JhcHBlciBmdW5jdGlvbnNcbiAgICAvLyBjdXJyZW50bHkgZGVwZW5kaW5nIG9uIHRoaXMgQ2FjaGUuV2F0Y2hPcHRpb25zIG9iamVjdCAoaW5jbHVkaW5nXG4gICAgLy8gdGhlIG9uZSBjdXJyZW50bHkgY2FsbGluZyBicm9hZGNhc3RXYXRjaCksIHNvIHRoZXkgd2lsbCBiZSBpbmNsdWRlZFxuICAgIC8vIGluIHRoZSBuZXh0IGJyb2FkY2FzdCwgZXZlbiBpZiB0aGUgcmVzdWx0IHRoZXkgcmVjZWl2ZSBpcyB0aGUgc2FtZVxuICAgIC8vIGFzIHRoZSBwcmV2aW91cyByZXN1bHQgdGhleSByZWNlaXZlZC4gVGhpcyBpcyBpbXBvcnRhbnQgYmVjYXVzZSB3ZVxuICAgIC8vIGFyZSBhYm91dCB0byBkZWxpdmVyIGEgZGlmZmVyZW50IHJlc3VsdCB0byBjLmNhbGxiYWNrLCBzbyBhbnlcbiAgICAvLyBwcmV2aW91cyByZXN1bHRzIHNob3VsZCBoYXZlIGEgY2hhbmNlIHRvIGJlIHJlZGVsaXZlcmVkLlxuICAgIHRoaXMud2F0Y2hEZXAuZGlydHkoYyk7XG5cbiAgICAvLyBOZXh0LCByZS1kZXBlbmQgb24gdGhpcy53YXRjaERlcCBmb3IganVzdCB0aGlzIGludm9jYXRpb24gb2ZcbiAgICAvLyBtYXliZUJyb2FkY2FzdFdhdGNoICh0aGlzIGlzIGEgbm8tb3AgaWYgYnJvYWRjYXN0V2F0Y2ggd2FzIG5vdFxuICAgIC8vIGNhbGxlZCBieSBtYXliZUJyb2FkY2FzdFdhdGNoKS4gVGhpcyBhbGxvd3Mgb25seSB0aGUgbW9zdCByZWNlbnRcbiAgICAvLyBtYXliZUJyb2FkY2FzdFdhdGNoIGludm9jYXRpb24gZm9yIHRoaXMgd2F0Y2hlciB0byByZW1haW4gY2FjaGVkLFxuICAgIC8vIGVuYWJsaW5nIHJlLWJyb2FkY2FzdCBvZiBwcmV2aW91cyByZXN1bHRzIGV2ZW4gaWYgdGhleSBoYXZlIG5vdFxuICAgIC8vIGNoYW5nZWQgc2luY2UgdGhleSB3ZXJlIHByZXZpb3VzbHkgZGVsaXZlcmVkLlxuICAgIHRoaXMud2F0Y2hEZXAoYyk7XG5cbiAgICBjb25zdCBkaWZmID0gdGhpcy5kaWZmPGFueT4oe1xuICAgICAgcXVlcnk6IGMucXVlcnksXG4gICAgICB2YXJpYWJsZXM6IGMudmFyaWFibGVzLFxuICAgICAgb3B0aW1pc3RpYzogYy5vcHRpbWlzdGljLFxuICAgIH0pO1xuXG4gICAgaWYgKGMub3B0aW1pc3RpYyAmJiBmcm9tT3B0aW1pc3RpY1RyYW5zYWN0aW9uKSB7XG4gICAgICBkaWZmLmZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24gPSB0cnVlO1xuICAgIH1cblxuICAgIGMuY2FsbGJhY2soZGlmZik7XG4gIH1cbn1cbiIsICJpbXBvcnQge1xuICBEb2N1bWVudE5vZGUsXG4gIE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlLFxuICBTZWxlY3Rpb25TZXROb2RlLFxuICBTZWxlY3Rpb25Ob2RlLFxuICBJbmxpbmVGcmFnbWVudE5vZGUsXG4gIEZyYWdtZW50RGVmaW5pdGlvbk5vZGUsXG4gIEZpZWxkTm9kZSxcbiAgQVNUTm9kZSxcbiAgdmlzaXQsXG4gIEJSRUFLLFxufSBmcm9tICdncmFwaHFsJztcbmltcG9ydCB7IGludmFyaWFudCB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5cbmltcG9ydCB7IEFwb2xsb0NhY2hlIH0gZnJvbSAnLi4vY2FjaGUnO1xuaW1wb3J0IHtcbiAgRnJhZ21lbnRNYXAsXG4gIFN0b3JlT2JqZWN0LFxuICBhcmd1bWVudHNPYmplY3RGcm9tRmllbGQsXG4gIGJ1aWxkUXVlcnlGcm9tU2VsZWN0aW9uU2V0LFxuICBjcmVhdGVGcmFnbWVudE1hcCxcbiAgZ2V0RnJhZ21lbnREZWZpbml0aW9ucyxcbiAgZ2V0TWFpbkRlZmluaXRpb24sXG4gIGhhc0RpcmVjdGl2ZXMsXG4gIGlzRmllbGQsXG4gIGlzSW5saW5lRnJhZ21lbnQsXG4gIG1lcmdlRGVlcCxcbiAgbWVyZ2VEZWVwQXJyYXksXG4gIHJlbW92ZUNsaWVudFNldHNGcm9tRG9jdW1lbnQsXG4gIHJlc3VsdEtleU5hbWVGcm9tRmllbGQsXG4gIHNob3VsZEluY2x1ZGUsXG59IGZyb20gJy4uL3V0aWxpdGllcyc7XG5pbXBvcnQgeyBBcG9sbG9DbGllbnQgfSBmcm9tICcuL0Fwb2xsb0NsaWVudCc7XG5pbXBvcnQgeyBSZXNvbHZlcnMsIE9wZXJhdGlvblZhcmlhYmxlcyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgRmV0Y2hSZXN1bHQgfSBmcm9tICcuLi9saW5rL2NvcmUnO1xuaW1wb3J0IHsgY2FjaGVTbG90IH0gZnJvbSAnLi4vY2FjaGUnO1xuXG5leHBvcnQgdHlwZSBSZXNvbHZlciA9IChcbiAgcm9vdFZhbHVlPzogYW55LFxuICBhcmdzPzogYW55LFxuICBjb250ZXh0PzogYW55LFxuICBpbmZvPzoge1xuICAgIGZpZWxkOiBGaWVsZE5vZGU7XG4gICAgZnJhZ21lbnRNYXA6IEZyYWdtZW50TWFwO1xuICB9LFxuKSA9PiBhbnk7XG5cbmV4cG9ydCB0eXBlIFZhcmlhYmxlTWFwID0geyBbbmFtZTogc3RyaW5nXTogYW55IH07XG5cbmV4cG9ydCB0eXBlIEZyYWdtZW50TWF0Y2hlciA9IChcbiAgcm9vdFZhbHVlOiBhbnksXG4gIHR5cGVDb25kaXRpb246IHN0cmluZyxcbiAgY29udGV4dDogYW55LFxuKSA9PiBib29sZWFuO1xuXG5leHBvcnQgdHlwZSBFeGVjQ29udGV4dCA9IHtcbiAgZnJhZ21lbnRNYXA6IEZyYWdtZW50TWFwO1xuICBjb250ZXh0OiBhbnk7XG4gIHZhcmlhYmxlczogVmFyaWFibGVNYXA7XG4gIGZyYWdtZW50TWF0Y2hlcjogRnJhZ21lbnRNYXRjaGVyO1xuICBkZWZhdWx0T3BlcmF0aW9uVHlwZTogc3RyaW5nO1xuICBleHBvcnRlZFZhcmlhYmxlczogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgb25seVJ1bkZvcmNlZFJlc29sdmVyczogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIExvY2FsU3RhdGVPcHRpb25zPFRDYWNoZVNoYXBlPiA9IHtcbiAgY2FjaGU6IEFwb2xsb0NhY2hlPFRDYWNoZVNoYXBlPjtcbiAgY2xpZW50PzogQXBvbGxvQ2xpZW50PFRDYWNoZVNoYXBlPjtcbiAgcmVzb2x2ZXJzPzogUmVzb2x2ZXJzIHwgUmVzb2x2ZXJzW107XG4gIGZyYWdtZW50TWF0Y2hlcj86IEZyYWdtZW50TWF0Y2hlcjtcbn07XG5cbmV4cG9ydCBjbGFzcyBMb2NhbFN0YXRlPFRDYWNoZVNoYXBlPiB7XG4gIHByaXZhdGUgY2FjaGU6IEFwb2xsb0NhY2hlPFRDYWNoZVNoYXBlPjtcbiAgcHJpdmF0ZSBjbGllbnQ6IEFwb2xsb0NsaWVudDxUQ2FjaGVTaGFwZT47XG4gIHByaXZhdGUgcmVzb2x2ZXJzPzogUmVzb2x2ZXJzO1xuICBwcml2YXRlIGZyYWdtZW50TWF0Y2hlcjogRnJhZ21lbnRNYXRjaGVyO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBjYWNoZSxcbiAgICBjbGllbnQsXG4gICAgcmVzb2x2ZXJzLFxuICAgIGZyYWdtZW50TWF0Y2hlcixcbiAgfTogTG9jYWxTdGF0ZU9wdGlvbnM8VENhY2hlU2hhcGU+KSB7XG4gICAgdGhpcy5jYWNoZSA9IGNhY2hlO1xuXG4gICAgaWYgKGNsaWVudCkge1xuICAgICAgdGhpcy5jbGllbnQgPSBjbGllbnQ7XG4gICAgfVxuXG4gICAgaWYgKHJlc29sdmVycykge1xuICAgICAgdGhpcy5hZGRSZXNvbHZlcnMocmVzb2x2ZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoZnJhZ21lbnRNYXRjaGVyKSB7XG4gICAgICB0aGlzLnNldEZyYWdtZW50TWF0Y2hlcihmcmFnbWVudE1hdGNoZXIpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRSZXNvbHZlcnMocmVzb2x2ZXJzOiBSZXNvbHZlcnMgfCBSZXNvbHZlcnNbXSkge1xuICAgIHRoaXMucmVzb2x2ZXJzID0gdGhpcy5yZXNvbHZlcnMgfHwge307XG4gICAgaWYgKEFycmF5LmlzQXJyYXkocmVzb2x2ZXJzKSkge1xuICAgICAgcmVzb2x2ZXJzLmZvckVhY2gocmVzb2x2ZXJHcm91cCA9PiB7XG4gICAgICAgIHRoaXMucmVzb2x2ZXJzID0gbWVyZ2VEZWVwKHRoaXMucmVzb2x2ZXJzLCByZXNvbHZlckdyb3VwKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlc29sdmVycyA9IG1lcmdlRGVlcCh0aGlzLnJlc29sdmVycywgcmVzb2x2ZXJzKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0UmVzb2x2ZXJzKHJlc29sdmVyczogUmVzb2x2ZXJzIHwgUmVzb2x2ZXJzW10pIHtcbiAgICB0aGlzLnJlc29sdmVycyA9IHt9O1xuICAgIHRoaXMuYWRkUmVzb2x2ZXJzKHJlc29sdmVycyk7XG4gIH1cblxuICBwdWJsaWMgZ2V0UmVzb2x2ZXJzKCkge1xuICAgIHJldHVybiB0aGlzLnJlc29sdmVycyB8fCB7fTtcbiAgfVxuXG4gIC8vIFJ1biBsb2NhbCBjbGllbnQgcmVzb2x2ZXJzIGFnYWluc3QgdGhlIGluY29taW5nIHF1ZXJ5IGFuZCByZW1vdGUgZGF0YS5cbiAgLy8gTG9jYWxseSByZXNvbHZlZCBmaWVsZCB2YWx1ZXMgYXJlIG1lcmdlZCB3aXRoIHRoZSBpbmNvbWluZyByZW1vdGUgZGF0YSxcbiAgLy8gYW5kIHJldHVybmVkLiBOb3RlIHRoYXQgbG9jYWxseSByZXNvbHZlZCBmaWVsZHMgd2lsbCBvdmVyd3JpdGVcbiAgLy8gcmVtb3RlIGRhdGEgdXNpbmcgdGhlIHNhbWUgZmllbGQgbmFtZS5cbiAgcHVibGljIGFzeW5jIHJ1blJlc29sdmVyczxURGF0YT4oe1xuICAgIGRvY3VtZW50LFxuICAgIHJlbW90ZVJlc3VsdCxcbiAgICBjb250ZXh0LFxuICAgIHZhcmlhYmxlcyxcbiAgICBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzID0gZmFsc2UsXG4gIH06IHtcbiAgICBkb2N1bWVudDogRG9jdW1lbnROb2RlIHwgbnVsbDtcbiAgICByZW1vdGVSZXN1bHQ6IEZldGNoUmVzdWx0PFREYXRhPjtcbiAgICBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgICB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICAgIG9ubHlSdW5Gb3JjZWRSZXNvbHZlcnM/OiBib29sZWFuO1xuICB9KTogUHJvbWlzZTxGZXRjaFJlc3VsdDxURGF0YT4+IHtcbiAgICBpZiAoZG9jdW1lbnQpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc29sdmVEb2N1bWVudChcbiAgICAgICAgZG9jdW1lbnQsXG4gICAgICAgIHJlbW90ZVJlc3VsdC5kYXRhLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIHRoaXMuZnJhZ21lbnRNYXRjaGVyLFxuICAgICAgICBvbmx5UnVuRm9yY2VkUmVzb2x2ZXJzLFxuICAgICAgKS50aGVuKGxvY2FsUmVzdWx0ID0+ICh7XG4gICAgICAgIC4uLnJlbW90ZVJlc3VsdCxcbiAgICAgICAgZGF0YTogbG9jYWxSZXN1bHQucmVzdWx0LFxuICAgICAgfSkpO1xuICAgIH1cblxuICAgIHJldHVybiByZW1vdGVSZXN1bHQ7XG4gIH1cblxuICBwdWJsaWMgc2V0RnJhZ21lbnRNYXRjaGVyKGZyYWdtZW50TWF0Y2hlcjogRnJhZ21lbnRNYXRjaGVyKSB7XG4gICAgdGhpcy5mcmFnbWVudE1hdGNoZXIgPSBmcmFnbWVudE1hdGNoZXI7XG4gIH1cblxuICBwdWJsaWMgZ2V0RnJhZ21lbnRNYXRjaGVyKCk6IEZyYWdtZW50TWF0Y2hlciB7XG4gICAgcmV0dXJuIHRoaXMuZnJhZ21lbnRNYXRjaGVyO1xuICB9XG5cbiAgLy8gQ2xpZW50IHF1ZXJpZXMgY29udGFpbiBldmVyeXRoaW5nIGluIHRoZSBpbmNvbWluZyBkb2N1bWVudCAoaWYgYSBAY2xpZW50XG4gIC8vIGRpcmVjdGl2ZSBpcyBmb3VuZCkuXG4gIHB1YmxpYyBjbGllbnRRdWVyeShkb2N1bWVudDogRG9jdW1lbnROb2RlKSB7XG4gICAgaWYgKGhhc0RpcmVjdGl2ZXMoWydjbGllbnQnXSwgZG9jdW1lbnQpKSB7XG4gICAgICBpZiAodGhpcy5yZXNvbHZlcnMpIHtcbiAgICAgICAgcmV0dXJuIGRvY3VtZW50O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIFNlcnZlciBxdWVyaWVzIGFyZSBzdHJpcHBlZCBvZiBhbGwgQGNsaWVudCBiYXNlZCBzZWxlY3Rpb24gc2V0cy5cbiAgcHVibGljIHNlcnZlclF1ZXJ5KGRvY3VtZW50OiBEb2N1bWVudE5vZGUpIHtcbiAgICByZXR1cm4gcmVtb3ZlQ2xpZW50U2V0c0Zyb21Eb2N1bWVudChkb2N1bWVudCk7XG4gIH1cblxuICBwdWJsaWMgcHJlcGFyZUNvbnRleHQoY29udGV4dD86IFJlY29yZDxzdHJpbmcsIGFueT4pIHtcbiAgICBjb25zdCB7IGNhY2hlIH0gPSB0aGlzO1xuICAgIHJldHVybiB7XG4gICAgICAuLi5jb250ZXh0LFxuICAgICAgY2FjaGUsXG4gICAgICAvLyBHZXR0aW5nIGFuIGVudHJ5J3MgY2FjaGUga2V5IGlzIHVzZWZ1bCBmb3IgbG9jYWwgc3RhdGUgcmVzb2x2ZXJzLlxuICAgICAgZ2V0Q2FjaGVLZXkob2JqOiBTdG9yZU9iamVjdCkge1xuICAgICAgICByZXR1cm4gY2FjaGUuaWRlbnRpZnkob2JqKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIC8vIFRvIHN1cHBvcnQgYEBjbGllbnQgQGV4cG9ydChhczogXCJzb21lVmFyXCIpYCBzeW50YXgsIHdlJ2xsIGZpcnN0IHJlc29sdmVcbiAgLy8gQGNsaWVudCBAZXhwb3J0IGZpZWxkcyBsb2NhbGx5LCB0aGVuIHBhc3MgdGhlIHJlc29sdmVkIHZhbHVlcyBiYWNrIHRvIGJlXG4gIC8vIHVzZWQgYWxvbmdzaWRlIHRoZSBvcmlnaW5hbCBvcGVyYXRpb24gdmFyaWFibGVzLlxuICBwdWJsaWMgYXN5bmMgYWRkRXhwb3J0ZWRWYXJpYWJsZXMoXG4gICAgZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSxcbiAgICB2YXJpYWJsZXM6IE9wZXJhdGlvblZhcmlhYmxlcyA9IHt9LFxuICAgIGNvbnRleHQgPSB7fSxcbiAgKSB7XG4gICAgaWYgKGRvY3VtZW50KSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXNvbHZlRG9jdW1lbnQoXG4gICAgICAgIGRvY3VtZW50LFxuICAgICAgICB0aGlzLmJ1aWxkUm9vdFZhbHVlRnJvbUNhY2hlKGRvY3VtZW50LCB2YXJpYWJsZXMpIHx8IHt9LFxuICAgICAgICB0aGlzLnByZXBhcmVDb250ZXh0KGNvbnRleHQpLFxuICAgICAgICB2YXJpYWJsZXMsXG4gICAgICApLnRoZW4oZGF0YSA9PiAoe1xuICAgICAgICAuLi52YXJpYWJsZXMsXG4gICAgICAgIC4uLmRhdGEuZXhwb3J0ZWRWYXJpYWJsZXMsXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnZhcmlhYmxlcyxcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHNob3VsZEZvcmNlUmVzb2x2ZXJzKGRvY3VtZW50OiBBU1ROb2RlKSB7XG4gICAgbGV0IGZvcmNlUmVzb2x2ZXJzID0gZmFsc2U7XG4gICAgdmlzaXQoZG9jdW1lbnQsIHtcbiAgICAgIERpcmVjdGl2ZToge1xuICAgICAgICBlbnRlcihub2RlKSB7XG4gICAgICAgICAgaWYgKG5vZGUubmFtZS52YWx1ZSA9PT0gJ2NsaWVudCcgJiYgbm9kZS5hcmd1bWVudHMpIHtcbiAgICAgICAgICAgIGZvcmNlUmVzb2x2ZXJzID0gbm9kZS5hcmd1bWVudHMuc29tZShcbiAgICAgICAgICAgICAgYXJnID0+XG4gICAgICAgICAgICAgICAgYXJnLm5hbWUudmFsdWUgPT09ICdhbHdheXMnICYmXG4gICAgICAgICAgICAgICAgYXJnLnZhbHVlLmtpbmQgPT09ICdCb29sZWFuVmFsdWUnICYmXG4gICAgICAgICAgICAgICAgYXJnLnZhbHVlLnZhbHVlID09PSB0cnVlLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIGlmIChmb3JjZVJlc29sdmVycykge1xuICAgICAgICAgICAgICByZXR1cm4gQlJFQUs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gZm9yY2VSZXNvbHZlcnM7XG4gIH1cblxuICAvLyBRdWVyeSB0aGUgY2FjaGUgYW5kIHJldHVybiBtYXRjaGluZyBkYXRhLlxuICBwcml2YXRlIGJ1aWxkUm9vdFZhbHVlRnJvbUNhY2hlKFxuICAgIGRvY3VtZW50OiBEb2N1bWVudE5vZGUsXG4gICAgdmFyaWFibGVzPzogUmVjb3JkPHN0cmluZywgYW55PixcbiAgKSB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUuZGlmZih7XG4gICAgICBxdWVyeTogYnVpbGRRdWVyeUZyb21TZWxlY3Rpb25TZXQoZG9jdW1lbnQpLFxuICAgICAgdmFyaWFibGVzLFxuICAgICAgcmV0dXJuUGFydGlhbERhdGE6IHRydWUsXG4gICAgICBvcHRpbWlzdGljOiBmYWxzZSxcbiAgICB9KS5yZXN1bHQ7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlc29sdmVEb2N1bWVudDxURGF0YT4oXG4gICAgZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSxcbiAgICByb290VmFsdWU6IFREYXRhLFxuICAgIGNvbnRleHQ6IGFueSA9IHt9LFxuICAgIHZhcmlhYmxlczogVmFyaWFibGVNYXAgPSB7fSxcbiAgICBmcmFnbWVudE1hdGNoZXI6IEZyYWdtZW50TWF0Y2hlciA9ICgpID0+IHRydWUsXG4gICAgb25seVJ1bkZvcmNlZFJlc29sdmVyczogYm9vbGVhbiA9IGZhbHNlLFxuICApIHtcbiAgICBjb25zdCBtYWluRGVmaW5pdGlvbiA9IGdldE1haW5EZWZpbml0aW9uKGRvY3VtZW50KTtcbiAgICBjb25zdCBmcmFnbWVudHMgPSBnZXRGcmFnbWVudERlZmluaXRpb25zKGRvY3VtZW50KTtcbiAgICBjb25zdCBmcmFnbWVudE1hcCA9IGNyZWF0ZUZyYWdtZW50TWFwKGZyYWdtZW50cyk7XG5cbiAgICBjb25zdCBkZWZpbml0aW9uT3BlcmF0aW9uID0gKG1haW5EZWZpbml0aW9uIGFzIE9wZXJhdGlvbkRlZmluaXRpb25Ob2RlKVxuICAgICAgLm9wZXJhdGlvbjtcblxuICAgIGNvbnN0IGRlZmF1bHRPcGVyYXRpb25UeXBlID0gZGVmaW5pdGlvbk9wZXJhdGlvblxuICAgICAgPyBkZWZpbml0aW9uT3BlcmF0aW9uLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICtcbiAgICAgICAgZGVmaW5pdGlvbk9wZXJhdGlvbi5zbGljZSgxKVxuICAgICAgOiAnUXVlcnknO1xuXG4gICAgY29uc3QgeyBjYWNoZSwgY2xpZW50IH0gPSB0aGlzO1xuICAgIGNvbnN0IGV4ZWNDb250ZXh0OiBFeGVjQ29udGV4dCA9IHtcbiAgICAgIGZyYWdtZW50TWFwLFxuICAgICAgY29udGV4dDoge1xuICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICBjYWNoZSxcbiAgICAgICAgY2xpZW50LFxuICAgICAgfSxcbiAgICAgIHZhcmlhYmxlcyxcbiAgICAgIGZyYWdtZW50TWF0Y2hlcixcbiAgICAgIGRlZmF1bHRPcGVyYXRpb25UeXBlLFxuICAgICAgZXhwb3J0ZWRWYXJpYWJsZXM6IHt9LFxuICAgICAgb25seVJ1bkZvcmNlZFJlc29sdmVycyxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZVNlbGVjdGlvblNldChcbiAgICAgIG1haW5EZWZpbml0aW9uLnNlbGVjdGlvblNldCxcbiAgICAgIHJvb3RWYWx1ZSxcbiAgICAgIGV4ZWNDb250ZXh0LFxuICAgICkudGhlbihyZXN1bHQgPT4gKHtcbiAgICAgIHJlc3VsdCxcbiAgICAgIGV4cG9ydGVkVmFyaWFibGVzOiBleGVjQ29udGV4dC5leHBvcnRlZFZhcmlhYmxlcyxcbiAgICB9KSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlc29sdmVTZWxlY3Rpb25TZXQ8VERhdGE+KFxuICAgIHNlbGVjdGlvblNldDogU2VsZWN0aW9uU2V0Tm9kZSxcbiAgICByb290VmFsdWU6IFREYXRhLFxuICAgIGV4ZWNDb250ZXh0OiBFeGVjQ29udGV4dCxcbiAgKSB7XG4gICAgY29uc3QgeyBmcmFnbWVudE1hcCwgY29udGV4dCwgdmFyaWFibGVzIH0gPSBleGVjQ29udGV4dDtcbiAgICBjb25zdCByZXN1bHRzVG9NZXJnZTogVERhdGFbXSA9IFtyb290VmFsdWVdO1xuXG4gICAgY29uc3QgZXhlY3V0ZSA9IGFzeW5jIChzZWxlY3Rpb246IFNlbGVjdGlvbk5vZGUpOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgICAgIGlmICghc2hvdWxkSW5jbHVkZShzZWxlY3Rpb24sIHZhcmlhYmxlcykpIHtcbiAgICAgICAgLy8gU2tpcCB0aGlzIGVudGlyZWx5LlxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0ZpZWxkKHNlbGVjdGlvbikpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZUZpZWxkKHNlbGVjdGlvbiwgcm9vdFZhbHVlLCBleGVjQ29udGV4dCkudGhlbihcbiAgICAgICAgICBmaWVsZFJlc3VsdCA9PiB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGZpZWxkUmVzdWx0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICByZXN1bHRzVG9NZXJnZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBbcmVzdWx0S2V5TmFtZUZyb21GaWVsZChzZWxlY3Rpb24pXTogZmllbGRSZXN1bHQsXG4gICAgICAgICAgICAgIH0gYXMgVERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICk7XG4gICAgICB9XG5cbiAgICAgIGxldCBmcmFnbWVudDogSW5saW5lRnJhZ21lbnROb2RlIHwgRnJhZ21lbnREZWZpbml0aW9uTm9kZTtcblxuICAgICAgaWYgKGlzSW5saW5lRnJhZ21lbnQoc2VsZWN0aW9uKSkge1xuICAgICAgICBmcmFnbWVudCA9IHNlbGVjdGlvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFRoaXMgaXMgYSBuYW1lZCBmcmFnbWVudC5cbiAgICAgICAgZnJhZ21lbnQgPSBmcmFnbWVudE1hcFtzZWxlY3Rpb24ubmFtZS52YWx1ZV07XG4gICAgICAgIGludmFyaWFudChmcmFnbWVudCwgYE5vIGZyYWdtZW50IG5hbWVkICR7c2VsZWN0aW9uLm5hbWUudmFsdWV9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChmcmFnbWVudCAmJiBmcmFnbWVudC50eXBlQ29uZGl0aW9uKSB7XG4gICAgICAgIGNvbnN0IHR5cGVDb25kaXRpb24gPSBmcmFnbWVudC50eXBlQ29uZGl0aW9uLm5hbWUudmFsdWU7XG4gICAgICAgIGlmIChleGVjQ29udGV4dC5mcmFnbWVudE1hdGNoZXIocm9vdFZhbHVlLCB0eXBlQ29uZGl0aW9uLCBjb250ZXh0KSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVTZWxlY3Rpb25TZXQoXG4gICAgICAgICAgICBmcmFnbWVudC5zZWxlY3Rpb25TZXQsXG4gICAgICAgICAgICByb290VmFsdWUsXG4gICAgICAgICAgICBleGVjQ29udGV4dCxcbiAgICAgICAgICApLnRoZW4oZnJhZ21lbnRSZXN1bHQgPT4ge1xuICAgICAgICAgICAgcmVzdWx0c1RvTWVyZ2UucHVzaChmcmFnbWVudFJlc3VsdCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHNlbGVjdGlvblNldC5zZWxlY3Rpb25zLm1hcChleGVjdXRlKSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBtZXJnZURlZXBBcnJheShyZXN1bHRzVG9NZXJnZSk7XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlc29sdmVGaWVsZChcbiAgICBmaWVsZDogRmllbGROb2RlLFxuICAgIHJvb3RWYWx1ZTogYW55LFxuICAgIGV4ZWNDb250ZXh0OiBFeGVjQ29udGV4dCxcbiAgKTogUHJvbWlzZTxhbnk+IHtcbiAgICBjb25zdCB7IHZhcmlhYmxlcyB9ID0gZXhlY0NvbnRleHQ7XG4gICAgY29uc3QgZmllbGROYW1lID0gZmllbGQubmFtZS52YWx1ZTtcbiAgICBjb25zdCBhbGlhc2VkRmllbGROYW1lID0gcmVzdWx0S2V5TmFtZUZyb21GaWVsZChmaWVsZCk7XG4gICAgY29uc3QgYWxpYXNVc2VkID0gZmllbGROYW1lICE9PSBhbGlhc2VkRmllbGROYW1lO1xuICAgIGNvbnN0IGRlZmF1bHRSZXN1bHQgPSByb290VmFsdWVbYWxpYXNlZEZpZWxkTmFtZV0gfHwgcm9vdFZhbHVlW2ZpZWxkTmFtZV07XG4gICAgbGV0IHJlc3VsdFByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoZGVmYXVsdFJlc3VsdCk7XG5cbiAgICAvLyBVc3VhbGx5IGFsbCBsb2NhbCByZXNvbHZlcnMgYXJlIHJ1biB3aGVuIHBhc3NpbmcgdGhyb3VnaCBoZXJlLCBidXRcbiAgICAvLyBpZiB3ZSd2ZSBzcGVjaWZpY2FsbHkgaWRlbnRpZmllZCB0aGF0IHdlIG9ubHkgd2FudCB0byBydW4gZm9yY2VkXG4gICAgLy8gcmVzb2x2ZXJzICh0aGF0IGlzLCByZXNvbHZlcnMgZm9yIGZpZWxkcyBtYXJrZWQgd2l0aFxuICAgIC8vIGBAY2xpZW50KGFsd2F5czogdHJ1ZSlgKSwgdGhlbiB3ZSdsbCBza2lwIHJ1bm5pbmcgbm9uLWZvcmNlZCByZXNvbHZlcnMuXG4gICAgaWYgKFxuICAgICAgIWV4ZWNDb250ZXh0Lm9ubHlSdW5Gb3JjZWRSZXNvbHZlcnMgfHxcbiAgICAgIHRoaXMuc2hvdWxkRm9yY2VSZXNvbHZlcnMoZmllbGQpXG4gICAgKSB7XG4gICAgICBjb25zdCByZXNvbHZlclR5cGUgPVxuICAgICAgICByb290VmFsdWUuX190eXBlbmFtZSB8fCBleGVjQ29udGV4dC5kZWZhdWx0T3BlcmF0aW9uVHlwZTtcbiAgICAgIGNvbnN0IHJlc29sdmVyTWFwID0gdGhpcy5yZXNvbHZlcnMgJiYgdGhpcy5yZXNvbHZlcnNbcmVzb2x2ZXJUeXBlXTtcbiAgICAgIGlmIChyZXNvbHZlck1hcCkge1xuICAgICAgICBjb25zdCByZXNvbHZlID0gcmVzb2x2ZXJNYXBbYWxpYXNVc2VkID8gZmllbGROYW1lIDogYWxpYXNlZEZpZWxkTmFtZV07XG4gICAgICAgIGlmIChyZXNvbHZlKSB7XG4gICAgICAgICAgcmVzdWx0UHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZShcbiAgICAgICAgICAgIC8vIEluIGNhc2UgdGhlIHJlc29sdmUgZnVuY3Rpb24gYWNjZXNzZXMgcmVhY3RpdmUgdmFyaWFibGVzLFxuICAgICAgICAgICAgLy8gc2V0IGNhY2hlU2xvdCB0byB0aGUgY3VycmVudCBjYWNoZSBpbnN0YW5jZS5cbiAgICAgICAgICAgIGNhY2hlU2xvdC53aXRoVmFsdWUodGhpcy5jYWNoZSwgcmVzb2x2ZSwgW1xuICAgICAgICAgICAgICByb290VmFsdWUsXG4gICAgICAgICAgICAgIGFyZ3VtZW50c09iamVjdEZyb21GaWVsZChmaWVsZCwgdmFyaWFibGVzKSxcbiAgICAgICAgICAgICAgZXhlY0NvbnRleHQuY29udGV4dCxcbiAgICAgICAgICAgICAgeyBmaWVsZCwgZnJhZ21lbnRNYXA6IGV4ZWNDb250ZXh0LmZyYWdtZW50TWFwIH0sXG4gICAgICAgICAgICBdKVxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0UHJvbWlzZS50aGVuKChyZXN1bHQgPSBkZWZhdWx0UmVzdWx0KSA9PiB7XG4gICAgICAvLyBJZiBhbiBAZXhwb3J0IGRpcmVjdGl2ZSBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIGN1cnJlbnQgZmllbGQsIHN0b3JlXG4gICAgICAvLyB0aGUgYGFzYCBleHBvcnQgdmFyaWFibGUgbmFtZSBhbmQgY3VycmVudCByZXN1bHQgZm9yIGxhdGVyIHVzZS5cbiAgICAgIGlmIChmaWVsZC5kaXJlY3RpdmVzKSB7XG4gICAgICAgIGZpZWxkLmRpcmVjdGl2ZXMuZm9yRWFjaChkaXJlY3RpdmUgPT4ge1xuICAgICAgICAgIGlmIChkaXJlY3RpdmUubmFtZS52YWx1ZSA9PT0gJ2V4cG9ydCcgJiYgZGlyZWN0aXZlLmFyZ3VtZW50cykge1xuICAgICAgICAgICAgZGlyZWN0aXZlLmFyZ3VtZW50cy5mb3JFYWNoKGFyZyA9PiB7XG4gICAgICAgICAgICAgIGlmIChhcmcubmFtZS52YWx1ZSA9PT0gJ2FzJyAmJiBhcmcudmFsdWUua2luZCA9PT0gJ1N0cmluZ1ZhbHVlJykge1xuICAgICAgICAgICAgICAgIGV4ZWNDb250ZXh0LmV4cG9ydGVkVmFyaWFibGVzW2FyZy52YWx1ZS52YWx1ZV0gPSByZXN1bHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBhbGwgc2NhbGFyIHR5cGVzIGhlcmUuXG4gICAgICBpZiAoIWZpZWxkLnNlbGVjdGlvblNldCkge1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICAvLyBGcm9tIGhlcmUgZG93biwgdGhlIGZpZWxkIGhhcyBhIHNlbGVjdGlvbiBzZXQsIHdoaWNoIG1lYW5zIGl0J3MgdHJ5aW5nXG4gICAgICAvLyB0byBxdWVyeSBhIEdyYXBoUUxPYmplY3RUeXBlLlxuICAgICAgaWYgKHJlc3VsdCA9PSBudWxsKSB7XG4gICAgICAgIC8vIEJhc2ljYWxseSBhbnkgZmllbGQgaW4gYSBHcmFwaFFMIHJlc3BvbnNlIGNhbiBiZSBudWxsLCBvciBtaXNzaW5nXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlc3VsdCkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVN1YlNlbGVjdGVkQXJyYXkoZmllbGQsIHJlc3VsdCwgZXhlY0NvbnRleHQpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm5lZCB2YWx1ZSBpcyBhbiBvYmplY3QsIGFuZCB0aGUgcXVlcnkgaGFzIGEgc3ViLXNlbGVjdGlvbi4gUmVjdXJzZS5cbiAgICAgIGlmIChmaWVsZC5zZWxlY3Rpb25TZXQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVNlbGVjdGlvblNldChcbiAgICAgICAgICBmaWVsZC5zZWxlY3Rpb25TZXQsXG4gICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgIGV4ZWNDb250ZXh0LFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNvbHZlU3ViU2VsZWN0ZWRBcnJheShcbiAgICBmaWVsZDogRmllbGROb2RlLFxuICAgIHJlc3VsdDogYW55W10sXG4gICAgZXhlY0NvbnRleHQ6IEV4ZWNDb250ZXh0LFxuICApOiBhbnkge1xuICAgIHJldHVybiBQcm9taXNlLmFsbChcbiAgICAgIHJlc3VsdC5tYXAoaXRlbSA9PiB7XG4gICAgICAgIGlmIChpdGVtID09PSBudWxsKSB7XG4gICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGlzIGlzIGEgbmVzdGVkIGFycmF5LCByZWN1cnNlLlxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShpdGVtKSkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnJlc29sdmVTdWJTZWxlY3RlZEFycmF5KGZpZWxkLCBpdGVtLCBleGVjQ29udGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUaGlzIGlzIGFuIG9iamVjdCwgcnVuIHRoZSBzZWxlY3Rpb24gc2V0IG9uIGl0LlxuICAgICAgICBpZiAoZmllbGQuc2VsZWN0aW9uU2V0KSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZVNlbGVjdGlvblNldChmaWVsZC5zZWxlY3Rpb25TZXQsIGl0ZW0sIGV4ZWNDb250ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgKTtcbiAgfVxufVxuIiwgImltcG9ydCB7IERvY3VtZW50Tm9kZSwgR3JhcGhRTEVycm9yIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gXCJAd3J5L2VxdWFsaXR5XCI7XG5cbmltcG9ydCB7IENhY2hlLCBBcG9sbG9DYWNoZSB9IGZyb20gJy4uL2NhY2hlJztcbmltcG9ydCB7IFdhdGNoUXVlcnlPcHRpb25zLCBFcnJvclBvbGljeSB9IGZyb20gJy4vd2F0Y2hRdWVyeU9wdGlvbnMnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZVF1ZXJ5IH0gZnJvbSAnLi9PYnNlcnZhYmxlUXVlcnknO1xuaW1wb3J0IHsgUXVlcnlMaXN0ZW5lciB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHsgRmV0Y2hSZXN1bHQgfSBmcm9tICcuLi9saW5rL2NvcmUnO1xuaW1wb3J0IHtcbiAgT2JzZXJ2YWJsZVN1YnNjcmlwdGlvbixcbiAgaXNOb25FbXB0eUFycmF5LFxuICBncmFwaFFMUmVzdWx0SGFzRXJyb3IsXG4gIGNhblVzZVdlYWtNYXAsXG59IGZyb20gJy4uL3V0aWxpdGllcyc7XG5pbXBvcnQge1xuICBOZXR3b3JrU3RhdHVzLFxuICBpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQsXG59IGZyb20gJy4vbmV0d29ya1N0YXR1cyc7XG5pbXBvcnQgeyBBcG9sbG9FcnJvciB9IGZyb20gJy4uL2Vycm9ycyc7XG5cbmV4cG9ydCB0eXBlIFF1ZXJ5U3RvcmVWYWx1ZSA9IFBpY2s8UXVlcnlJbmZvLFxuICB8IFwidmFyaWFibGVzXCJcbiAgfCBcIm5ldHdvcmtTdGF0dXNcIlxuICB8IFwibmV0d29ya0Vycm9yXCJcbiAgfCBcImdyYXBoUUxFcnJvcnNcIlxuICA+O1xuXG5jb25zdCBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cyA9IG5ldyAoXG4gIGNhblVzZVdlYWtNYXAgPyBXZWFrTWFwIDogTWFwXG4pPEFwb2xsb0NhY2hlPGFueT4sIG51bWJlcj4oKTtcblxuZnVuY3Rpb24gd3JhcERlc3RydWN0aXZlQ2FjaGVNZXRob2QoXG4gIGNhY2hlOiBBcG9sbG9DYWNoZTxhbnk+LFxuICBtZXRob2ROYW1lOiBrZXlvZiBBcG9sbG9DYWNoZTxhbnk+LFxuKSB7XG4gIGNvbnN0IG9yaWdpbmFsID0gY2FjaGVbbWV0aG9kTmFtZV07XG4gIGlmICh0eXBlb2Ygb3JpZ2luYWwgPT09IFwiZnVuY3Rpb25cIikge1xuICAgIGNhY2hlW21ldGhvZE5hbWVdID0gZnVuY3Rpb24gKCkge1xuICAgICAgZGVzdHJ1Y3RpdmVNZXRob2RDb3VudHMuc2V0KFxuICAgICAgICBjYWNoZSxcbiAgICAgICAgLy8gVGhlICUxZTE1IGFsbG93cyB0aGUgY291bnQgdG8gd3JhcCBhcm91bmQgdG8gMCBzYWZlbHkgZXZlcnlcbiAgICAgICAgLy8gcXVhZHJpbGxpb24gZXZpY3Rpb25zLCBzbyB0aGVyZSdzIG5vIHJpc2sgb2Ygb3ZlcmZsb3cuIFRvIGJlXG4gICAgICAgIC8vIGNsZWFyLCB0aGlzIGlzIG1vcmUgb2YgYSBwZWRhbnRpYyBwcmluY2lwbGUgdGhhbiBzb21ldGhpbmdcbiAgICAgICAgLy8gdGhhdCBtYXR0ZXJzIGluIGFueSBjb25jZWl2YWJsZSBwcmFjdGljYWwgc2NlbmFyaW8uXG4gICAgICAgIChkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5nZXQoY2FjaGUpISArIDEpICUgMWUxNSxcbiAgICAgICk7XG4gICAgICByZXR1cm4gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIGNhbmNlbE5vdGlmeVRpbWVvdXQoaW5mbzogUXVlcnlJbmZvKSB7XG4gIGlmIChpbmZvW1wibm90aWZ5VGltZW91dFwiXSkge1xuICAgIGNsZWFyVGltZW91dChpbmZvW1wibm90aWZ5VGltZW91dFwiXSk7XG4gICAgaW5mb1tcIm5vdGlmeVRpbWVvdXRcIl0gPSB2b2lkIDA7XG4gIH1cbn1cblxuLy8gQSBRdWVyeUluZm8gb2JqZWN0IHJlcHJlc2VudHMgYSBzaW5nbGUgcXVlcnkgbWFuYWdlZCBieSB0aGVcbi8vIFF1ZXJ5TWFuYWdlciwgd2hpY2ggdHJhY2tzIGFsbCBRdWVyeUluZm8gb2JqZWN0cyBieSBxdWVyeUlkIGluIGl0c1xuLy8gdGhpcy5xdWVyaWVzIE1hcC4gUXVlcnlJbmZvIG9iamVjdHMgc3RvcmUgdGhlIGxhdGVzdCByZXN1bHRzIGFuZCBlcnJvcnNcbi8vIGZvciB0aGUgZ2l2ZW4gcXVlcnksIGFuZCBhcmUgcmVzcG9uc2libGUgZm9yIHJlcG9ydGluZyB0aG9zZSByZXN1bHRzIHRvXG4vLyB0aGUgY29ycmVzcG9uZGluZyBPYnNlcnZhYmxlUXVlcnksIHZpYSB0aGUgUXVlcnlJbmZvLm5vdGlmeSBtZXRob2QuXG4vLyBSZXN1bHRzIGFyZSByZXBvcnRlZCBhc3luY2hyb25vdXNseSB3aGVuZXZlciBzZXREaWZmIG1hcmtzIHRoZVxuLy8gUXVlcnlJbmZvIG9iamVjdCBhcyBkaXJ0eSwgdGhvdWdoIGEgY2FsbCB0byB0aGUgUXVlcnlNYW5hZ2VyJ3Ncbi8vIGJyb2FkY2FzdFF1ZXJpZXMgbWV0aG9kIG1heSB0cmlnZ2VyIHRoZSBub3RpZmljYXRpb24gYmVmb3JlIGl0IGhhcHBlbnNcbi8vIGF1dG9tYXRpY2FsbHkuIFRoaXMgY2xhc3MgdXNlZCB0byBiZSBhIHNpbXBsZSBpbnRlcmZhY2UgdHlwZSB3aXRob3V0XG4vLyBhbnkgZmllbGQgcHJpdmFjeSBvciBtZWFuaW5nZnVsIG1ldGhvZHMsIHdoaWNoIGlzIHdoeSBpdCBzdGlsbCBoYXMgc29cbi8vIG1hbnkgcHVibGljIGZpZWxkcy4gVGhlIGVmZm9ydCB0byBsb2NrIGRvd24gYW5kIHNpbXBsaWZ5IHRoZSBRdWVyeUluZm9cbi8vIGludGVyZmFjZSBpcyBvbmdvaW5nLCBhbmQgZnVydGhlciBpbXByb3ZlbWVudHMgYXJlIHdlbGNvbWUuXG5leHBvcnQgY2xhc3MgUXVlcnlJbmZvIHtcbiAgbGlzdGVuZXJzID0gbmV3IFNldDxRdWVyeUxpc3RlbmVyPigpO1xuICBkb2N1bWVudDogRG9jdW1lbnROb2RlIHwgbnVsbCA9IG51bGw7XG4gIGxhc3RSZXF1ZXN0SWQgPSAxO1xuICBzdWJzY3JpcHRpb25zID0gbmV3IFNldDxPYnNlcnZhYmxlU3Vic2NyaXB0aW9uPigpO1xuICB2YXJpYWJsZXM/OiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBuZXR3b3JrU3RhdHVzPzogTmV0d29ya1N0YXR1cztcbiAgbmV0d29ya0Vycm9yPzogRXJyb3IgfCBudWxsO1xuICBncmFwaFFMRXJyb3JzPzogUmVhZG9ubHlBcnJheTxHcmFwaFFMRXJyb3I+O1xuICBzdG9wcGVkID0gZmFsc2U7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBjYWNoZTogQXBvbGxvQ2FjaGU8YW55Pikge1xuICAgIC8vIFRyYWNrIGhvdyBvZnRlbiBjYWNoZS5ldmljdCBpcyBjYWxsZWQsIHNpbmNlIHdlIHdhbnQgZXZpY3Rpb24gdG9cbiAgICAvLyBvdmVycmlkZSB0aGUgZmV1ZC1zdG9wcGluZyBsb2dpYyBpbiB0aGUgbWFya1Jlc3VsdCBtZXRob2QsIGJ5XG4gICAgLy8gY2F1c2luZyBzaG91bGRXcml0ZSB0byByZXR1cm4gdHJ1ZS4gV3JhcHBpbmcgdGhlIGNhY2hlLmV2aWN0IG1ldGhvZFxuICAgIC8vIGlzIGEgYml0IG9mIGEgaGFjaywgYnV0IGl0IHNhdmVzIHVzIGZyb20gaGF2aW5nIHRvIG1ha2UgZXZpY3Rpb25cbiAgICAvLyBjb3VudGluZyBhbiBvZmZpY2lhbCBwYXJ0IG9mIHRoZSBBcG9sbG9DYWNoZSBBUEkuXG4gICAgaWYgKCFkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5oYXMoY2FjaGUpKSB7XG4gICAgICBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5zZXQoY2FjaGUsIDApO1xuICAgICAgd3JhcERlc3RydWN0aXZlQ2FjaGVNZXRob2QoY2FjaGUsIFwiZXZpY3RcIik7XG4gICAgICB3cmFwRGVzdHJ1Y3RpdmVDYWNoZU1ldGhvZChjYWNoZSwgXCJtb2RpZnlcIik7XG4gICAgICB3cmFwRGVzdHJ1Y3RpdmVDYWNoZU1ldGhvZChjYWNoZSwgXCJyZXNldFwiKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaW5pdChxdWVyeToge1xuICAgIGRvY3VtZW50OiBEb2N1bWVudE5vZGU7XG4gICAgdmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHwgdW5kZWZpbmVkLFxuICAgIC8vIFRoZSBpbml0aWFsIG5ldHdvcmtTdGF0dXMgZm9yIHRoaXMgZmV0Y2gsIG1vc3Qgb2Z0ZW5cbiAgICAvLyBOZXR3b3JrU3RhdHVzLmxvYWRpbmcsIGJ1dCBhbHNvIHBvc3NpYmx5IGZldGNoTW9yZSwgcG9sbCwgcmVmZXRjaCxcbiAgICAvLyBvciBzZXRWYXJpYWJsZXMuXG4gICAgbmV0d29ya1N0YXR1cz86IE5ldHdvcmtTdGF0dXMsXG4gICAgb2JzZXJ2YWJsZVF1ZXJ5PzogT2JzZXJ2YWJsZVF1ZXJ5PGFueT47XG4gICAgbGFzdFJlcXVlc3RJZD86IG51bWJlcjtcbiAgfSk6IHRoaXMge1xuICAgIGxldCBuZXR3b3JrU3RhdHVzID0gcXVlcnkubmV0d29ya1N0YXR1cyB8fCBOZXR3b3JrU3RhdHVzLmxvYWRpbmc7XG4gICAgaWYgKHRoaXMudmFyaWFibGVzICYmXG4gICAgICAgIHRoaXMubmV0d29ya1N0YXR1cyAhPT0gTmV0d29ya1N0YXR1cy5sb2FkaW5nICYmXG4gICAgICAgICFlcXVhbCh0aGlzLnZhcmlhYmxlcywgcXVlcnkudmFyaWFibGVzKSkge1xuICAgICAgbmV0d29ya1N0YXR1cyA9IE5ldHdvcmtTdGF0dXMuc2V0VmFyaWFibGVzO1xuICAgIH1cblxuICAgIGlmICghZXF1YWwocXVlcnkudmFyaWFibGVzLCB0aGlzLnZhcmlhYmxlcykpIHtcbiAgICAgIHRoaXMuZGlmZiA9IG51bGw7XG4gICAgfVxuXG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLCB7XG4gICAgICBkb2N1bWVudDogcXVlcnkuZG9jdW1lbnQsXG4gICAgICB2YXJpYWJsZXM6IHF1ZXJ5LnZhcmlhYmxlcyxcbiAgICAgIG5ldHdvcmtFcnJvcjogbnVsbCxcbiAgICAgIGdyYXBoUUxFcnJvcnM6IHRoaXMuZ3JhcGhRTEVycm9ycyB8fCBbXSxcbiAgICAgIG5ldHdvcmtTdGF0dXMsXG4gICAgfSk7XG5cbiAgICBpZiAocXVlcnkub2JzZXJ2YWJsZVF1ZXJ5KSB7XG4gICAgICB0aGlzLnNldE9ic2VydmFibGVRdWVyeShxdWVyeS5vYnNlcnZhYmxlUXVlcnkpO1xuICAgIH1cblxuICAgIGlmIChxdWVyeS5sYXN0UmVxdWVzdElkKSB7XG4gICAgICB0aGlzLmxhc3RSZXF1ZXN0SWQgPSBxdWVyeS5sYXN0UmVxdWVzdElkO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHJpdmF0ZSBkaXJ0eTogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgbm90aWZ5VGltZW91dD86IFJldHVyblR5cGU8dHlwZW9mIHNldFRpbWVvdXQ+O1xuXG4gIHByaXZhdGUgZGlmZjogQ2FjaGUuRGlmZlJlc3VsdDxhbnk+IHwgbnVsbCA9IG51bGw7XG5cbiAgcmVzZXQoKSB7XG4gICAgY2FuY2VsTm90aWZ5VGltZW91dCh0aGlzKTtcbiAgICB0aGlzLmRpZmYgPSBudWxsO1xuICAgIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgfVxuXG4gIGdldERpZmYodmFyaWFibGVzID0gdGhpcy52YXJpYWJsZXMpOiBDYWNoZS5EaWZmUmVzdWx0PGFueT4ge1xuICAgIGlmICh0aGlzLmRpZmYgJiYgZXF1YWwodmFyaWFibGVzLCB0aGlzLnZhcmlhYmxlcykpIHtcbiAgICAgIHJldHVybiB0aGlzLmRpZmY7XG4gICAgfVxuXG4gICAgdGhpcy51cGRhdGVXYXRjaCh0aGlzLnZhcmlhYmxlcyA9IHZhcmlhYmxlcyk7XG5cbiAgICByZXR1cm4gdGhpcy5kaWZmID0gdGhpcy5jYWNoZS5kaWZmKHtcbiAgICAgIHF1ZXJ5OiB0aGlzLmRvY3VtZW50ISxcbiAgICAgIHZhcmlhYmxlcyxcbiAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgb3B0aW1pc3RpYzogdHJ1ZSxcbiAgICB9KTtcbiAgfVxuXG4gIHNldERpZmYoZGlmZjogQ2FjaGUuRGlmZlJlc3VsdDxhbnk+IHwgbnVsbCkge1xuICAgIGNvbnN0IG9sZERpZmYgPSB0aGlzLmRpZmY7XG4gICAgdGhpcy5kaWZmID0gZGlmZjtcbiAgICBpZiAoIXRoaXMuZGlydHkgJiZcbiAgICAgICAgKGRpZmYgJiYgZGlmZi5yZXN1bHQpICE9PSAob2xkRGlmZiAmJiBvbGREaWZmLnJlc3VsdCkpIHtcbiAgICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICAgICAgaWYgKCF0aGlzLm5vdGlmeVRpbWVvdXQpIHtcbiAgICAgICAgdGhpcy5ub3RpZnlUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLm5vdGlmeSgpLCAwKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgcmVhZG9ubHkgb2JzZXJ2YWJsZVF1ZXJ5OiBPYnNlcnZhYmxlUXVlcnk8YW55PiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG9xTGlzdGVuZXI/OiBRdWVyeUxpc3RlbmVyO1xuXG4gIHNldE9ic2VydmFibGVRdWVyeShvcTogT2JzZXJ2YWJsZVF1ZXJ5PGFueT4gfCBudWxsKSB7XG4gICAgaWYgKG9xID09PSB0aGlzLm9ic2VydmFibGVRdWVyeSkgcmV0dXJuO1xuXG4gICAgaWYgKHRoaXMub3FMaXN0ZW5lcikge1xuICAgICAgdGhpcy5saXN0ZW5lcnMuZGVsZXRlKHRoaXMub3FMaXN0ZW5lcik7XG4gICAgfVxuXG4gICAgKHRoaXMgYXMgYW55KS5vYnNlcnZhYmxlUXVlcnkgPSBvcTtcblxuICAgIGlmIChvcSkge1xuICAgICAgb3FbXCJxdWVyeUluZm9cIl0gPSB0aGlzO1xuICAgICAgdGhpcy5saXN0ZW5lcnMuYWRkKHRoaXMub3FMaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgLy8gSWYgdGhpcy5kaWZmIGNhbWUgZnJvbSBhbiBvcHRpbWlzdGljIHRyYW5zYWN0aW9uLCBkZWxpdmVyIHRoZVxuICAgICAgICAvLyBjdXJyZW50IGNhY2hlIGRhdGEgdG8gdGhlIE9ic2VydmFibGVRdWVyeSwgYnV0IGRvbid0IHBlcmZvcm0gYVxuICAgICAgICAvLyBmdWxsIHJlb2JzZXJ2YXRpb24sIHNpbmNlIG9xLnJlb2JzZXJ2ZSBtaWdodCBtYWtlIGEgbmV0d29ya1xuICAgICAgICAvLyByZXF1ZXN0LCBhbmQgd2UgZG9uJ3Qgd2FudCB0byB0cmlnZ2VyIG5ldHdvcmsgcmVxdWVzdHMgZm9yXG4gICAgICAgIC8vIG9wdGltaXN0aWMgdXBkYXRlcy5cbiAgICAgICAgaWYgKHRoaXMuZ2V0RGlmZigpLmZyb21PcHRpbWlzdGljVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICBvcVtcIm9ic2VydmVcIl0oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvcS5yZW9ic2VydmUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlbGV0ZSB0aGlzLm9xTGlzdGVuZXI7XG4gICAgfVxuICB9XG5cbiAgbm90aWZ5KCkge1xuICAgIGNhbmNlbE5vdGlmeVRpbWVvdXQodGhpcyk7XG5cbiAgICBpZiAodGhpcy5zaG91bGROb3RpZnkoKSkge1xuICAgICAgdGhpcy5saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcih0aGlzKSk7XG4gICAgfVxuXG4gICAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGROb3RpZnkoKSB7XG4gICAgaWYgKCF0aGlzLmRpcnR5IHx8ICF0aGlzLmxpc3RlbmVycy5zaXplKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodCh0aGlzLm5ldHdvcmtTdGF0dXMpICYmXG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZVF1ZXJ5KSB7XG4gICAgICBjb25zdCB7IGZldGNoUG9saWN5IH0gPSB0aGlzLm9ic2VydmFibGVRdWVyeS5vcHRpb25zO1xuICAgICAgaWYgKGZldGNoUG9saWN5ICE9PSBcImNhY2hlLW9ubHlcIiAmJlxuICAgICAgICAgIGZldGNoUG9saWN5ICE9PSBcImNhY2hlLWFuZC1uZXR3b3JrXCIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHVibGljIHN0b3AoKSB7XG4gICAgaWYgKCF0aGlzLnN0b3BwZWQpIHtcbiAgICAgIHRoaXMuc3RvcHBlZCA9IHRydWU7XG5cbiAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICAvLyBSZXZlcnQgYmFjayB0byB0aGUgbm8tb3AgdmVyc2lvbiBvZiBjYW5jZWwgaW5oZXJpdGVkIGZyb21cbiAgICAgIC8vIFF1ZXJ5SW5mby5wcm90b3R5cGUuXG4gICAgICBkZWxldGUgdGhpcy5jYW5jZWw7XG5cbiAgICAgIHRoaXMuc3Vic2NyaXB0aW9ucy5mb3JFYWNoKHN1YiA9PiBzdWIudW5zdWJzY3JpYmUoKSk7XG5cbiAgICAgIGNvbnN0IG9xID0gdGhpcy5vYnNlcnZhYmxlUXVlcnk7XG4gICAgICBpZiAob3EpIG9xLnN0b3BQb2xsaW5nKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gVGhpcyBtZXRob2QgaXMgYSBuby1vcCBieSBkZWZhdWx0LCB1bnRpbC91bmxlc3Mgb3ZlcnJpZGRlbiBieSB0aGVcbiAgLy8gdXBkYXRlV2F0Y2ggbWV0aG9kLlxuICBwcml2YXRlIGNhbmNlbCgpIHt9XG5cbiAgcHJpdmF0ZSBsYXN0V2F0Y2g/OiBDYWNoZS5XYXRjaE9wdGlvbnM7XG5cbiAgcHJpdmF0ZSB1cGRhdGVXYXRjaCh2YXJpYWJsZXMgPSB0aGlzLnZhcmlhYmxlcykge1xuICAgIGNvbnN0IG9xID0gdGhpcy5vYnNlcnZhYmxlUXVlcnk7XG4gICAgaWYgKG9xICYmIG9xLm9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09IFwibm8tY2FjaGVcIikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoIXRoaXMubGFzdFdhdGNoIHx8XG4gICAgICAgIHRoaXMubGFzdFdhdGNoLnF1ZXJ5ICE9PSB0aGlzLmRvY3VtZW50IHx8XG4gICAgICAgICFlcXVhbCh2YXJpYWJsZXMsIHRoaXMubGFzdFdhdGNoLnZhcmlhYmxlcykpIHtcbiAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICB0aGlzLmNhbmNlbCA9IHRoaXMuY2FjaGUud2F0Y2godGhpcy5sYXN0V2F0Y2ggPSB7XG4gICAgICAgIHF1ZXJ5OiB0aGlzLmRvY3VtZW50ISxcbiAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICBvcHRpbWlzdGljOiB0cnVlLFxuICAgICAgICBjYWxsYmFjazogZGlmZiA9PiB0aGlzLnNldERpZmYoZGlmZiksXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGxhc3RXcml0ZT86IHtcbiAgICByZXN1bHQ6IEZldGNoUmVzdWx0PGFueT47XG4gICAgdmFyaWFibGVzOiBXYXRjaFF1ZXJ5T3B0aW9uc1tcInZhcmlhYmxlc1wiXTtcbiAgICBkbUNvdW50OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gIH07XG5cbiAgcHJpdmF0ZSBzaG91bGRXcml0ZShcbiAgICByZXN1bHQ6IEZldGNoUmVzdWx0PGFueT4sXG4gICAgdmFyaWFibGVzOiBXYXRjaFF1ZXJ5T3B0aW9uc1tcInZhcmlhYmxlc1wiXSxcbiAgKSB7XG4gICAgY29uc3QgeyBsYXN0V3JpdGUgfSA9IHRoaXM7XG4gICAgcmV0dXJuICEoXG4gICAgICBsYXN0V3JpdGUgJiZcbiAgICAgIC8vIElmIGNhY2hlLmV2aWN0IGhhcyBiZWVuIGNhbGxlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHdlIHdyb3RlIHRoaXNcbiAgICAgIC8vIGRhdGEgaW50byB0aGUgY2FjaGUsIHRoZXJlJ3MgYSBjaGFuY2Ugd3JpdGluZyB0aGlzIHJlc3VsdCBpbnRvXG4gICAgICAvLyB0aGUgY2FjaGUgd2lsbCByZXBhaXIgd2hhdCB3YXMgZXZpY3RlZC5cbiAgICAgIGxhc3RXcml0ZS5kbUNvdW50ID09PSBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5nZXQodGhpcy5jYWNoZSkgJiZcbiAgICAgIGVxdWFsKHZhcmlhYmxlcywgbGFzdFdyaXRlLnZhcmlhYmxlcykgJiZcbiAgICAgIGVxdWFsKHJlc3VsdC5kYXRhLCBsYXN0V3JpdGUucmVzdWx0LmRhdGEpXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBtYXJrUmVzdWx0PFQ+KFxuICAgIHJlc3VsdDogRmV0Y2hSZXN1bHQ8VD4sXG4gICAgb3B0aW9uczogUGljazxXYXRjaFF1ZXJ5T3B0aW9ucyxcbiAgICAgIHwgXCJ2YXJpYWJsZXNcIlxuICAgICAgfCBcImZldGNoUG9saWN5XCJcbiAgICAgIHwgXCJlcnJvclBvbGljeVwiPixcbiAgICBhbGxvd0NhY2hlV3JpdGU6IGJvb2xlYW4sXG4gICkge1xuICAgIHRoaXMuZ3JhcGhRTEVycm9ycyA9IGlzTm9uRW1wdHlBcnJheShyZXN1bHQuZXJyb3JzKSA/IHJlc3VsdC5lcnJvcnMgOiBbXTtcblxuICAgIC8vIENhbmNlbCB0aGUgcGVuZGluZyBub3RpZnkgdGltZW91dCAoaWYgaXQgZXhpc3RzKSB0byBwcmV2ZW50IGV4dHJhbmVvdXMgbmV0d29ya1xuICAgIC8vIHJlcXVlc3RzLiBUbyBhbGxvdyBmdXR1cmUgbm90aWZ5IHRpbWVvdXRzLCBkaWZmIGFuZCBkaXJ0eSBhcmUgcmVzZXQgYXMgd2VsbC5cbiAgICB0aGlzLnJlc2V0KCk7XG5cbiAgICBpZiAob3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gJ25vLWNhY2hlJykge1xuICAgICAgdGhpcy5kaWZmID0geyByZXN1bHQ6IHJlc3VsdC5kYXRhLCBjb21wbGV0ZTogdHJ1ZSB9O1xuXG4gICAgfSBlbHNlIGlmICghdGhpcy5zdG9wcGVkICYmIGFsbG93Q2FjaGVXcml0ZSkge1xuICAgICAgaWYgKHNob3VsZFdyaXRlUmVzdWx0KHJlc3VsdCwgb3B0aW9ucy5lcnJvclBvbGljeSkpIHtcbiAgICAgICAgLy8gVXNpbmcgYSB0cmFuc2FjdGlvbiBoZXJlIHNvIHdlIGhhdmUgYSBjaGFuY2UgdG8gcmVhZCB0aGUgcmVzdWx0XG4gICAgICAgIC8vIGJhY2sgZnJvbSB0aGUgY2FjaGUgYmVmb3JlIHRoZSB3YXRjaCBjYWxsYmFjayBmaXJlcyBhcyBhIHJlc3VsdFxuICAgICAgICAvLyBvZiB3cml0ZVF1ZXJ5LCBzbyB3ZSBjYW4gc3RvcmUgdGhlIG5ldyBkaWZmIHF1aWV0bHkgYW5kIGlnbm9yZVxuICAgICAgICAvLyBpdCB3aGVuIHdlIHJlY2VpdmUgaXQgcmVkdW5kYW50bHkgZnJvbSB0aGUgd2F0Y2ggY2FsbGJhY2suXG4gICAgICAgIHRoaXMuY2FjaGUucGVyZm9ybVRyYW5zYWN0aW9uKGNhY2hlID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5zaG91bGRXcml0ZShyZXN1bHQsIG9wdGlvbnMudmFyaWFibGVzKSkge1xuICAgICAgICAgICAgY2FjaGUud3JpdGVRdWVyeSh7XG4gICAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLmRvY3VtZW50ISxcbiAgICAgICAgICAgICAgZGF0YTogcmVzdWx0LmRhdGEgYXMgVCxcbiAgICAgICAgICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB0aGlzLmxhc3RXcml0ZSA9IHtcbiAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICB2YXJpYWJsZXM6IG9wdGlvbnMudmFyaWFibGVzLFxuICAgICAgICAgICAgICBkbUNvdW50OiBkZXN0cnVjdGl2ZU1ldGhvZENvdW50cy5nZXQodGhpcy5jYWNoZSksXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBJZiByZXN1bHQgaXMgdGhlIHNhbWUgYXMgdGhlIGxhc3QgcmVzdWx0IHdlIHJlY2VpdmVkIGZyb21cbiAgICAgICAgICAgIC8vIHRoZSBuZXR3b3JrIChhbmQgdGhlIHZhcmlhYmxlcyBtYXRjaCB0b28pLCBhdm9pZCB3cml0aW5nXG4gICAgICAgICAgICAvLyByZXN1bHQgaW50byB0aGUgY2FjaGUgYWdhaW4uIFRoZSB3aXNkb20gb2Ygc2tpcHBpbmcgdGhpc1xuICAgICAgICAgICAgLy8gY2FjaGUgd3JpdGUgaXMgZmFyIGZyb20gb2J2aW91cywgc2luY2UgYW55IGNhY2hlIHdyaXRlXG4gICAgICAgICAgICAvLyBjb3VsZCBiZSB0aGUgb25lIHRoYXQgcHV0cyB0aGUgY2FjaGUgYmFjayBpbnRvIGEgZGVzaXJlZFxuICAgICAgICAgICAgLy8gc3RhdGUsIGZpeGluZyBjb3JydXB0aW9uIG9yIG1pc3NpbmcgZGF0YS4gSG93ZXZlciwgaWYgd2VcbiAgICAgICAgICAgIC8vIGFsd2F5cyB3cml0ZSBldmVyeSBuZXR3b3JrIHJlc3VsdCBpbnRvIHRoZSBjYWNoZSwgd2UgZW5hYmxlXG4gICAgICAgICAgICAvLyBmZXVkcyBiZXR3ZWVuIHF1ZXJpZXMgY29tcGV0aW5nIHRvIHVwZGF0ZSB0aGUgc2FtZSBkYXRhIGluXG4gICAgICAgICAgICAvLyBpbmNvbXBhdGlibGUgd2F5cywgd2hpY2ggY2FuIGxlYWQgdG8gYW4gZW5kbGVzcyBjeWNsZSBvZlxuICAgICAgICAgICAgLy8gY2FjaGUgYnJvYWRjYXN0cyBhbmQgdXNlbGVzcyBuZXR3b3JrIHJlcXVlc3RzLiBBcyB3aXRoIGFueVxuICAgICAgICAgICAgLy8gZmV1ZCwgZXZlbnR1YWxseSBvbmUgc2lkZSBtdXN0IHN0ZXAgYmFjayBmcm9tIHRoZSBicmluayxcbiAgICAgICAgICAgIC8vIGxldHRpbmcgdGhlIG90aGVyIHNpZGUocykgaGF2ZSB0aGUgbGFzdCB3b3JkKHMpLiBUaGVyZSBtYXlcbiAgICAgICAgICAgIC8vIGJlIG90aGVyIHBvaW50cyB3aGVyZSB3ZSBjb3VsZCBicmVhayB0aGlzIGN5Y2xlLCBzdWNoIGFzXG4gICAgICAgICAgICAvLyBzaWxlbmNpbmcgdGhlIGJyb2FkY2FzdCBmb3IgY2FjaGUud3JpdGVRdWVyeSAobm90IGEgZ29vZFxuICAgICAgICAgICAgLy8gaWRlYSwgc2luY2UgaXQganVzdCBkZWxheXMgdGhlIGZldWQgYSBiaXQpIG9yIHNvbWVob3dcbiAgICAgICAgICAgIC8vIGF2b2lkaW5nIHRoZSBuZXR3b3JrIHJlcXVlc3QgdGhhdCBqdXN0IGhhcHBlbmVkIChhbHNvIGJhZCxcbiAgICAgICAgICAgIC8vIGJlY2F1c2UgdGhlIHNlcnZlciBjb3VsZCByZXR1cm4gdXNlZnVsIG5ldyBkYXRhKS4gQWxsXG4gICAgICAgICAgICAvLyBvcHRpb25zIGNvbnNpZGVyZWQsIHNraXBwaW5nIHRoaXMgY2FjaGUgd3JpdGUgc2VlbXMgdG8gYmVcbiAgICAgICAgICAgIC8vIHRoZSBsZWFzdCBkYW1hZ2luZyBwbGFjZSB0byBicmVhayB0aGUgY3ljbGUsIGJlY2F1c2UgaXRcbiAgICAgICAgICAgIC8vIHJlZmxlY3RzIHRoZSBpbnR1aXRpb24gdGhhdCB3ZSByZWNlbnRseSB3cm90ZSB0aGlzIGV4YWN0XG4gICAgICAgICAgICAvLyByZXN1bHQgaW50byB0aGUgY2FjaGUsIHNvIHRoZSBjYWNoZSAqc2hvdWxkKiBhbHJlYWR5L3N0aWxsXG4gICAgICAgICAgICAvLyBjb250YWluIHRoaXMgZGF0YS4gSWYgc29tZSBvdGhlciBxdWVyeSBoYXMgY2xvYmJlcmVkIHRoYXRcbiAgICAgICAgICAgIC8vIGRhdGEgaW4gdGhlIG1lYW50aW1lLCB0aGF0J3MgdG9vIGJhZCwgYnV0IHRoZXJlIHdpbGwgYmUgbm9cbiAgICAgICAgICAgIC8vIHdpbm5lcnMgaWYgZXZlcnkgcXVlcnkgYmxpbmRseSByZXZlcnRzIHRvIGl0cyBvd24gdmVyc2lvblxuICAgICAgICAgICAgLy8gb2YgdGhlIGRhdGEuIFRoaXMgYXBwcm9hY2ggYWxzbyBnaXZlcyB0aGUgbmV0d29yayBhIGNoYW5jZVxuICAgICAgICAgICAgLy8gdG8gcmV0dXJuIG5ldyBkYXRhLCB3aGljaCB3aWxsIGJlIHdyaXR0ZW4gaW50byB0aGUgY2FjaGUgYXNcbiAgICAgICAgICAgIC8vIHVzdWFsLCBub3RpZnlpbmcgb25seSB0aG9zZSBxdWVyaWVzIHRoYXQgYXJlIGRpcmVjdGx5XG4gICAgICAgICAgICAvLyBhZmZlY3RlZCBieSB0aGUgY2FjaGUgdXBkYXRlcywgYXMgdXN1YWwuIEluIHRoZSBmdXR1cmUsIGFuXG4gICAgICAgICAgICAvLyBldmVuIG1vcmUgc29waGlzdGljYXRlZCBjYWNoZSBjb3VsZCBwZXJoYXBzIHByZXZlbnQgb3JcbiAgICAgICAgICAgIC8vIG1pdGlnYXRlIHRoZSBjbG9iYmVyaW5nIHNvbWVob3csIGJ1dCB0aGF0IHdvdWxkIG1ha2UgdGhpc1xuICAgICAgICAgICAgLy8gcGFydGljdWxhciBjYWNoZSB3cml0ZSBldmVuIGxlc3MgaW1wb3J0YW50LCBhbmQgdGh1c1xuICAgICAgICAgICAgLy8gc2tpcHBpbmcgaXQgd291bGQgYmUgZXZlbiBzYWZlciB0aGFuIGl0IGlzIHRvZGF5LlxuICAgICAgICAgICAgaWYgKHRoaXMuZGlmZiAmJiB0aGlzLmRpZmYuY29tcGxldGUpIHtcbiAgICAgICAgICAgICAgLy8gUmV1c2UgZGF0YSBmcm9tIHRoZSBsYXN0IGdvb2QgKGNvbXBsZXRlKSBkaWZmIHRoYXQgd2VcbiAgICAgICAgICAgICAgLy8gcmVjZWl2ZWQsIHdoZW4gcG9zc2libGUuXG4gICAgICAgICAgICAgIHJlc3VsdC5kYXRhID0gdGhpcy5kaWZmLnJlc3VsdDtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgdGhlIHByZXZpb3VzIHRoaXMuZGlmZiB3YXMgaW5jb21wbGV0ZSwgZmFsbCB0aHJvdWdoIHRvXG4gICAgICAgICAgICAvLyByZS1yZWFkaW5nIHRoZSBsYXRlc3QgZGF0YSB3aXRoIGNhY2hlLmRpZmYsIGJlbG93LlxuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGRpZmYgPSBjYWNoZS5kaWZmPFQ+KHtcbiAgICAgICAgICAgIHF1ZXJ5OiB0aGlzLmRvY3VtZW50ISxcbiAgICAgICAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgICAgICAgICByZXR1cm5QYXJ0aWFsRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgIG9wdGltaXN0aWM6IHRydWUsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICAvLyBJbiBjYXNlIHRoZSBRdWVyeU1hbmFnZXIgc3RvcHMgdGhpcyBRdWVyeUluZm8gYmVmb3JlIGl0c1xuICAgICAgICAgIC8vIHJlc3VsdHMgYXJlIGRlbGl2ZXJlZCwgaXQncyBpbXBvcnRhbnQgdG8gYXZvaWQgcmVzdGFydGluZyB0aGVcbiAgICAgICAgICAvLyBjYWNoZSB3YXRjaCB3aGVuIG1hcmtSZXN1bHQgaXMgY2FsbGVkLlxuICAgICAgICAgIGlmICghdGhpcy5zdG9wcGVkKSB7XG4gICAgICAgICAgICAvLyBBbnkgdGltZSB3ZSdyZSBhYm91dCB0byB1cGRhdGUgdGhpcy5kaWZmLCB3ZSBuZWVkIHRvIG1ha2VcbiAgICAgICAgICAgIC8vIHN1cmUgd2UndmUgc3RhcnRlZCB3YXRjaGluZyB0aGUgY2FjaGUuXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVdhdGNoKG9wdGlvbnMudmFyaWFibGVzKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBJZiB3ZSdyZSBhbGxvd2VkIHRvIHdyaXRlIHRvIHRoZSBjYWNoZSwgYW5kIHdlIGNhbiByZWFkIGFcbiAgICAgICAgICAvLyBjb21wbGV0ZSByZXN1bHQgZnJvbSB0aGUgY2FjaGUsIHVwZGF0ZSByZXN1bHQuZGF0YSB0byBiZSB0aGVcbiAgICAgICAgICAvLyByZXN1bHQgZnJvbSB0aGUgY2FjaGUsIHJhdGhlciB0aGFuIHRoZSByYXcgbmV0d29yayByZXN1bHQuXG4gICAgICAgICAgLy8gU2V0IHdpdGhvdXQgc2V0RGlmZiB0byBhdm9pZCB0cmlnZ2VyaW5nIGEgbm90aWZ5IGNhbGwsIHNpbmNlXG4gICAgICAgICAgLy8gd2UgaGF2ZSBvdGhlciB3YXlzIG9mIG5vdGlmeWluZyBmb3IgdGhpcyByZXN1bHQuXG4gICAgICAgICAgdGhpcy5kaWZmID0gZGlmZjtcbiAgICAgICAgICBpZiAoZGlmZi5jb21wbGV0ZSkge1xuICAgICAgICAgICAgcmVzdWx0LmRhdGEgPSBkaWZmLnJlc3VsdDtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmxhc3RXcml0ZSA9IHZvaWQgMDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgbWFya1JlYWR5KCkge1xuICAgIHRoaXMubmV0d29ya0Vycm9yID0gbnVsbDtcbiAgICByZXR1cm4gdGhpcy5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5yZWFkeTtcbiAgfVxuXG4gIHB1YmxpYyBtYXJrRXJyb3IoZXJyb3I6IEFwb2xsb0Vycm9yKSB7XG4gICAgdGhpcy5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5lcnJvcjtcbiAgICB0aGlzLmxhc3RXcml0ZSA9IHZvaWQgMDtcblxuICAgIHRoaXMucmVzZXQoKTtcblxuICAgIGlmIChlcnJvci5ncmFwaFFMRXJyb3JzKSB7XG4gICAgICB0aGlzLmdyYXBoUUxFcnJvcnMgPSBlcnJvci5ncmFwaFFMRXJyb3JzO1xuICAgIH1cblxuICAgIGlmIChlcnJvci5uZXR3b3JrRXJyb3IpIHtcbiAgICAgIHRoaXMubmV0d29ya0Vycm9yID0gZXJyb3IubmV0d29ya0Vycm9yO1xuICAgIH1cblxuICAgIHJldHVybiBlcnJvcjtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkV3JpdGVSZXN1bHQ8VD4oXG4gIHJlc3VsdDogRmV0Y2hSZXN1bHQ8VD4sXG4gIGVycm9yUG9saWN5OiBFcnJvclBvbGljeSA9IFwibm9uZVwiLFxuKSB7XG4gIGNvbnN0IGlnbm9yZUVycm9ycyA9XG4gICAgZXJyb3JQb2xpY3kgPT09IFwiaWdub3JlXCIgfHxcbiAgICBlcnJvclBvbGljeSA9PT0gXCJhbGxcIjtcbiAgbGV0IHdyaXRlV2l0aEVycm9ycyA9ICFncmFwaFFMUmVzdWx0SGFzRXJyb3IocmVzdWx0KTtcbiAgaWYgKCF3cml0ZVdpdGhFcnJvcnMgJiYgaWdub3JlRXJyb3JzICYmIHJlc3VsdC5kYXRhKSB7XG4gICAgd3JpdGVXaXRoRXJyb3JzID0gdHJ1ZTtcbiAgfVxuICByZXR1cm4gd3JpdGVXaXRoRXJyb3JzO1xufVxuIiwgImltcG9ydCB7IERvY3VtZW50Tm9kZSB9IGZyb20gJ2dyYXBocWwnO1xuaW1wb3J0IHsgaW52YXJpYW50LCBJbnZhcmlhbnRFcnJvciB9IGZyb20gJ3RzLWludmFyaWFudCc7XG5pbXBvcnQgeyBlcXVhbCB9IGZyb20gJ0B3cnkvZXF1YWxpdHknO1xuXG5pbXBvcnQgeyBBcG9sbG9MaW5rLCBleGVjdXRlLCBGZXRjaFJlc3VsdCB9IGZyb20gJy4uL2xpbmsvY29yZSc7XG5pbXBvcnQgeyBDYWNoZSwgQXBvbGxvQ2FjaGUgfSBmcm9tICcuLi9jYWNoZSc7XG5cbmltcG9ydCB7XG4gIGdldERlZmF1bHRWYWx1ZXMsXG4gIGdldE9wZXJhdGlvbkRlZmluaXRpb24sXG4gIGdldE9wZXJhdGlvbk5hbWUsXG4gIGhhc0NsaWVudEV4cG9ydHMsXG4gIGdyYXBoUUxSZXN1bHRIYXNFcnJvcixcbiAgcmVtb3ZlQ29ubmVjdGlvbkRpcmVjdGl2ZUZyb21Eb2N1bWVudCxcbiAgY2FuVXNlV2Vha01hcCxcbiAgT2JzZXJ2YWJsZVN1YnNjcmlwdGlvbixcbiAgT2JzZXJ2YWJsZSxcbiAgYXN5bmNNYXAsXG4gIGlzTm9uRW1wdHlBcnJheSxcbiAgQ29uY2FzdCxcbiAgQ29uY2FzdFNvdXJjZXNJdGVyYWJsZSxcbn0gZnJvbSAnLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IEFwb2xsb0Vycm9yLCBpc0Fwb2xsb0Vycm9yIH0gZnJvbSAnLi4vZXJyb3JzJztcbmltcG9ydCB7XG4gIFF1ZXJ5T3B0aW9ucyxcbiAgV2F0Y2hRdWVyeU9wdGlvbnMsXG4gIFN1YnNjcmlwdGlvbk9wdGlvbnMsXG4gIE11dGF0aW9uT3B0aW9ucyxcbiAgV2F0Y2hRdWVyeUZldGNoUG9saWN5LFxuICBFcnJvclBvbGljeSxcbn0gZnJvbSAnLi93YXRjaFF1ZXJ5T3B0aW9ucyc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlUXVlcnkgfSBmcm9tICcuL09ic2VydmFibGVRdWVyeSc7XG5pbXBvcnQgeyBOZXR3b3JrU3RhdHVzLCBpc05ldHdvcmtSZXF1ZXN0SW5GbGlnaHQgfSBmcm9tICcuL25ldHdvcmtTdGF0dXMnO1xuaW1wb3J0IHtcbiAgQXBvbGxvUXVlcnlSZXN1bHQsXG4gIE9wZXJhdGlvblZhcmlhYmxlcyxcbn0gZnJvbSAnLi90eXBlcyc7XG5pbXBvcnQgeyBMb2NhbFN0YXRlIH0gZnJvbSAnLi9Mb2NhbFN0YXRlJztcblxuaW1wb3J0IHsgUXVlcnlJbmZvLCBRdWVyeVN0b3JlVmFsdWUsIHNob3VsZFdyaXRlUmVzdWx0IH0gZnJvbSAnLi9RdWVyeUluZm8nO1xuXG5jb25zdCB7IGhhc093blByb3BlcnR5IH0gPSBPYmplY3QucHJvdG90eXBlO1xuXG5pbnRlcmZhY2UgTXV0YXRpb25TdG9yZVZhbHVlIHtcbiAgbXV0YXRpb246IERvY3VtZW50Tm9kZTtcbiAgdmFyaWFibGVzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuICBsb2FkaW5nOiBib29sZWFuO1xuICBlcnJvcjogRXJyb3IgfCBudWxsO1xufVxuXG5leHBvcnQgY2xhc3MgUXVlcnlNYW5hZ2VyPFRTdG9yZT4ge1xuICBwdWJsaWMgY2FjaGU6IEFwb2xsb0NhY2hlPFRTdG9yZT47XG4gIHB1YmxpYyBsaW5rOiBBcG9sbG9MaW5rO1xuICBwdWJsaWMgcmVhZG9ubHkgYXNzdW1lSW1tdXRhYmxlUmVzdWx0czogYm9vbGVhbjtcbiAgcHVibGljIHJlYWRvbmx5IHNzck1vZGU6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSBxdWVyeURlZHVwbGljYXRpb246IGJvb2xlYW47XG4gIHByaXZhdGUgY2xpZW50QXdhcmVuZXNzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gIHByaXZhdGUgbG9jYWxTdGF0ZTogTG9jYWxTdGF0ZTxUU3RvcmU+O1xuXG4gIHByaXZhdGUgb25Ccm9hZGNhc3Q/OiAoKSA9PiB2b2lkO1xuICBwdWJsaWMgbXV0YXRpb25TdG9yZT86IHtcbiAgICBbbXV0YXRpb25JZDogc3RyaW5nXTogTXV0YXRpb25TdG9yZVZhbHVlO1xuICB9O1xuXG4gIC8vIEFsbCB0aGUgcXVlcmllcyB0aGF0IHRoZSBRdWVyeU1hbmFnZXIgaXMgY3VycmVudGx5IG1hbmFnaW5nIChub3RcbiAgLy8gaW5jbHVkaW5nIG11dGF0aW9ucyBhbmQgc3Vic2NyaXB0aW9ucykuXG4gIHByaXZhdGUgcXVlcmllcyA9IG5ldyBNYXA8c3RyaW5nLCBRdWVyeUluZm8+KCk7XG5cbiAgLy8gTWFwcyBmcm9tIHF1ZXJ5SWQgc3RyaW5ncyB0byBQcm9taXNlIHJlamVjdGlvbiBmdW5jdGlvbnMgZm9yXG4gIC8vIGN1cnJlbnRseSBhY3RpdmUgcXVlcmllcyBhbmQgZmV0Y2hlcy5cbiAgcHJpdmF0ZSBmZXRjaENhbmNlbEZucyA9IG5ldyBNYXA8c3RyaW5nLCAoZXJyb3I6IGFueSkgPT4gYW55PigpO1xuXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBjYWNoZSxcbiAgICBsaW5rLFxuICAgIHF1ZXJ5RGVkdXBsaWNhdGlvbiA9IGZhbHNlLFxuICAgIG9uQnJvYWRjYXN0LFxuICAgIHNzck1vZGUgPSBmYWxzZSxcbiAgICBjbGllbnRBd2FyZW5lc3MgPSB7fSxcbiAgICBsb2NhbFN0YXRlLFxuICAgIGFzc3VtZUltbXV0YWJsZVJlc3VsdHMsXG4gIH06IHtcbiAgICBjYWNoZTogQXBvbGxvQ2FjaGU8VFN0b3JlPjtcbiAgICBsaW5rOiBBcG9sbG9MaW5rO1xuICAgIHF1ZXJ5RGVkdXBsaWNhdGlvbj86IGJvb2xlYW47XG4gICAgb25Ccm9hZGNhc3Q/OiAoKSA9PiB2b2lkO1xuICAgIHNzck1vZGU/OiBib29sZWFuO1xuICAgIGNsaWVudEF3YXJlbmVzcz86IFJlY29yZDxzdHJpbmcsIHN0cmluZz47XG4gICAgbG9jYWxTdGF0ZT86IExvY2FsU3RhdGU8VFN0b3JlPjtcbiAgICBhc3N1bWVJbW11dGFibGVSZXN1bHRzPzogYm9vbGVhbjtcbiAgfSkge1xuICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMucXVlcnlEZWR1cGxpY2F0aW9uID0gcXVlcnlEZWR1cGxpY2F0aW9uO1xuICAgIHRoaXMuY2xpZW50QXdhcmVuZXNzID0gY2xpZW50QXdhcmVuZXNzO1xuICAgIHRoaXMubG9jYWxTdGF0ZSA9IGxvY2FsU3RhdGUgfHwgbmV3IExvY2FsU3RhdGUoeyBjYWNoZSB9KTtcbiAgICB0aGlzLnNzck1vZGUgPSBzc3JNb2RlO1xuICAgIHRoaXMuYXNzdW1lSW1tdXRhYmxlUmVzdWx0cyA9ICEhYXNzdW1lSW1tdXRhYmxlUmVzdWx0cztcbiAgICBpZiAoKHRoaXMub25Ccm9hZGNhc3QgPSBvbkJyb2FkY2FzdCkpIHtcbiAgICAgIHRoaXMubXV0YXRpb25TdG9yZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgdGhpcyBtZXRob2QgdG8gdGVybWluYXRlIGFueSBhY3RpdmUgcXVlcnkgcHJvY2Vzc2VzLCBtYWtpbmcgaXQgc2FmZVxuICAgKiB0byBkaXNwb3NlIG9mIHRoaXMgUXVlcnlNYW5hZ2VyIGluc3RhbmNlLlxuICAgKi9cbiAgcHVibGljIHN0b3AoKSB7XG4gICAgdGhpcy5xdWVyaWVzLmZvckVhY2goKF9pbmZvLCBxdWVyeUlkKSA9PiB7XG4gICAgICB0aGlzLnN0b3BRdWVyeU5vQnJvYWRjYXN0KHF1ZXJ5SWQpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jYW5jZWxQZW5kaW5nRmV0Y2hlcyhcbiAgICAgIG5ldyBJbnZhcmlhbnRFcnJvcignUXVlcnlNYW5hZ2VyIHN0b3BwZWQgd2hpbGUgcXVlcnkgd2FzIGluIGZsaWdodCcpLFxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbFBlbmRpbmdGZXRjaGVzKGVycm9yOiBFcnJvcikge1xuICAgIHRoaXMuZmV0Y2hDYW5jZWxGbnMuZm9yRWFjaChjYW5jZWwgPT4gY2FuY2VsKGVycm9yKSk7XG4gICAgdGhpcy5mZXRjaENhbmNlbEZucy5jbGVhcigpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIG11dGF0ZTxUPih7XG4gICAgbXV0YXRpb24sXG4gICAgdmFyaWFibGVzLFxuICAgIG9wdGltaXN0aWNSZXNwb25zZSxcbiAgICB1cGRhdGVRdWVyaWVzLFxuICAgIHJlZmV0Y2hRdWVyaWVzID0gW10sXG4gICAgYXdhaXRSZWZldGNoUXVlcmllcyA9IGZhbHNlLFxuICAgIHVwZGF0ZTogdXBkYXRlV2l0aFByb3h5Rm4sXG4gICAgZXJyb3JQb2xpY3kgPSAnbm9uZScsXG4gICAgZmV0Y2hQb2xpY3ksXG4gICAgY29udGV4dCA9IHt9LFxuICB9OiBNdXRhdGlvbk9wdGlvbnMpOiBQcm9taXNlPEZldGNoUmVzdWx0PFQ+PiB7XG4gICAgaW52YXJpYW50KFxuICAgICAgbXV0YXRpb24sXG4gICAgICAnbXV0YXRpb24gb3B0aW9uIGlzIHJlcXVpcmVkLiBZb3UgbXVzdCBzcGVjaWZ5IHlvdXIgR3JhcGhRTCBkb2N1bWVudCBpbiB0aGUgbXV0YXRpb24gb3B0aW9uLicsXG4gICAgKTtcblxuICAgIGludmFyaWFudChcbiAgICAgICFmZXRjaFBvbGljeSB8fCBmZXRjaFBvbGljeSA9PT0gJ25vLWNhY2hlJyxcbiAgICAgIFwiTXV0YXRpb25zIG9ubHkgc3VwcG9ydCBhICduby1jYWNoZScgZmV0Y2hQb2xpY3kuIElmIHlvdSBkb24ndCB3YW50IHRvIGRpc2FibGUgdGhlIGNhY2hlLCByZW1vdmUgeW91ciBmZXRjaFBvbGljeSBzZXR0aW5nIHRvIHByb2NlZWQgd2l0aCB0aGUgZGVmYXVsdCBtdXRhdGlvbiBiZWhhdmlvci5cIlxuICAgICk7XG5cbiAgICBjb25zdCBtdXRhdGlvbklkID0gdGhpcy5nZW5lcmF0ZU11dGF0aW9uSWQoKTtcbiAgICBtdXRhdGlvbiA9IHRoaXMudHJhbnNmb3JtKG11dGF0aW9uKS5kb2N1bWVudDtcblxuICAgIHZhcmlhYmxlcyA9IHRoaXMuZ2V0VmFyaWFibGVzKG11dGF0aW9uLCB2YXJpYWJsZXMpO1xuXG4gICAgaWYgKHRoaXMudHJhbnNmb3JtKG11dGF0aW9uKS5oYXNDbGllbnRFeHBvcnRzKSB7XG4gICAgICB2YXJpYWJsZXMgPSBhd2FpdCB0aGlzLmxvY2FsU3RhdGUuYWRkRXhwb3J0ZWRWYXJpYWJsZXMobXV0YXRpb24sIHZhcmlhYmxlcywgY29udGV4dCk7XG4gICAgfVxuXG4gICAgY29uc3QgbXV0YXRpb25TdG9yZVZhbHVlID1cbiAgICAgIHRoaXMubXV0YXRpb25TdG9yZSAmJlxuICAgICAgKHRoaXMubXV0YXRpb25TdG9yZVttdXRhdGlvbklkXSA9IHtcbiAgICAgICAgbXV0YXRpb24sXG4gICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgbG9hZGluZzogdHJ1ZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9IGFzIE11dGF0aW9uU3RvcmVWYWx1ZSk7XG5cbiAgICBpZiAob3B0aW1pc3RpY1Jlc3BvbnNlKSB7XG4gICAgICB0aGlzLm1hcmtNdXRhdGlvbk9wdGltaXN0aWM8VD4ob3B0aW1pc3RpY1Jlc3BvbnNlLCB7XG4gICAgICAgIG11dGF0aW9uSWQsXG4gICAgICAgIGRvY3VtZW50OiBtdXRhdGlvbixcbiAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICBlcnJvclBvbGljeSxcbiAgICAgICAgdXBkYXRlUXVlcmllcyxcbiAgICAgICAgdXBkYXRlOiB1cGRhdGVXaXRoUHJveHlGbixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgbGV0IHN0b3JlUmVzdWx0OiBGZXRjaFJlc3VsdDxUPiB8IG51bGw7XG4gICAgICBsZXQgZXJyb3I6IEFwb2xsb0Vycm9yO1xuXG4gICAgICBzZWxmLmdldE9ic2VydmFibGVGcm9tTGluayhcbiAgICAgICAgbXV0YXRpb24sXG4gICAgICAgIHtcbiAgICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICAgIG9wdGltaXN0aWNSZXNwb25zZSxcbiAgICAgICAgfSxcbiAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICBmYWxzZSxcbiAgICAgICkuc3Vic2NyaWJlKHtcbiAgICAgICAgbmV4dChyZXN1bHQ6IEZldGNoUmVzdWx0PFQ+KSB7XG4gICAgICAgICAgaWYgKGdyYXBoUUxSZXN1bHRIYXNFcnJvcihyZXN1bHQpICYmIGVycm9yUG9saWN5ID09PSAnbm9uZScpIHtcbiAgICAgICAgICAgIGVycm9yID0gbmV3IEFwb2xsb0Vycm9yKHtcbiAgICAgICAgICAgICAgZ3JhcGhRTEVycm9yczogcmVzdWx0LmVycm9ycyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChtdXRhdGlvblN0b3JlVmFsdWUpIHtcbiAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZS5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICBtdXRhdGlvblN0b3JlVmFsdWUuZXJyb3IgPSBudWxsO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChmZXRjaFBvbGljeSAhPT0gJ25vLWNhY2hlJykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgc2VsZi5tYXJrTXV0YXRpb25SZXN1bHQ8VD4oe1xuICAgICAgICAgICAgICAgIG11dGF0aW9uSWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0LFxuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBtdXRhdGlvbixcbiAgICAgICAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgZXJyb3JQb2xpY3ksXG4gICAgICAgICAgICAgICAgdXBkYXRlUXVlcmllcyxcbiAgICAgICAgICAgICAgICB1cGRhdGU6IHVwZGF0ZVdpdGhQcm94eUZuLFxuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgZXJyb3IgPSBuZXcgQXBvbGxvRXJyb3Ioe1xuICAgICAgICAgICAgICAgIG5ldHdvcmtFcnJvcjogZSxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzdG9yZVJlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgfSxcblxuICAgICAgICBlcnJvcihlcnI6IEVycm9yKSB7XG4gICAgICAgICAgaWYgKG11dGF0aW9uU3RvcmVWYWx1ZSkge1xuICAgICAgICAgICAgbXV0YXRpb25TdG9yZVZhbHVlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZS5lcnJvciA9IGVycjtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKG9wdGltaXN0aWNSZXNwb25zZSkge1xuICAgICAgICAgICAgc2VsZi5jYWNoZS5yZW1vdmVPcHRpbWlzdGljKG11dGF0aW9uSWQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZWxmLmJyb2FkY2FzdFF1ZXJpZXMoKTtcbiAgICAgICAgICByZWplY3QoXG4gICAgICAgICAgICBuZXcgQXBvbGxvRXJyb3Ioe1xuICAgICAgICAgICAgICBuZXR3b3JrRXJyb3I6IGVycixcbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICk7XG4gICAgICAgIH0sXG5cbiAgICAgICAgY29tcGxldGUoKSB7XG4gICAgICAgICAgaWYgKGVycm9yICYmIG11dGF0aW9uU3RvcmVWYWx1ZSkge1xuICAgICAgICAgICAgbXV0YXRpb25TdG9yZVZhbHVlLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIG11dGF0aW9uU3RvcmVWYWx1ZS5lcnJvciA9IGVycm9yO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChvcHRpbWlzdGljUmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHNlbGYuY2FjaGUucmVtb3ZlT3B0aW1pc3RpYyhtdXRhdGlvbklkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBzZWxmLmJyb2FkY2FzdFF1ZXJpZXMoKTtcblxuICAgICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBhbGxvdyBmb3IgY29uZGl0aW9uYWwgcmVmZXRjaGVzXG4gICAgICAgICAgLy8gWFhYIGRvIHdlIHdhbnQgdG8gbWFrZSB0aGlzIHRoZSBvbmx5IEFQSSBvbmUgZGF5P1xuICAgICAgICAgIGlmICh0eXBlb2YgcmVmZXRjaFF1ZXJpZXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJlZmV0Y2hRdWVyaWVzID0gcmVmZXRjaFF1ZXJpZXMoc3RvcmVSZXN1bHQhKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCByZWZldGNoUXVlcnlQcm9taXNlczogUHJvbWlzZTxcbiAgICAgICAgICAgIEFwb2xsb1F1ZXJ5UmVzdWx0PGFueT5bXSB8IEFwb2xsb1F1ZXJ5UmVzdWx0PHt9PlxuICAgICAgICAgID5bXSA9IFtdO1xuXG4gICAgICAgICAgaWYgKGlzTm9uRW1wdHlBcnJheShyZWZldGNoUXVlcmllcykpIHtcbiAgICAgICAgICAgIHJlZmV0Y2hRdWVyaWVzLmZvckVhY2gocmVmZXRjaFF1ZXJ5ID0+IHtcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZWZldGNoUXVlcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5xdWVyaWVzLmZvckVhY2goKHsgb2JzZXJ2YWJsZVF1ZXJ5IH0pID0+IHtcbiAgICAgICAgICAgICAgICAgIGlmIChvYnNlcnZhYmxlUXVlcnkgJiZcbiAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZhYmxlUXVlcnkucXVlcnlOYW1lID09PSByZWZldGNoUXVlcnkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVmZXRjaFF1ZXJ5UHJvbWlzZXMucHVzaChvYnNlcnZhYmxlUXVlcnkucmVmZXRjaCgpKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBxdWVyeU9wdGlvbnM6IFF1ZXJ5T3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgIHF1ZXJ5OiByZWZldGNoUXVlcnkucXVlcnksXG4gICAgICAgICAgICAgICAgICB2YXJpYWJsZXM6IHJlZmV0Y2hRdWVyeS52YXJpYWJsZXMsXG4gICAgICAgICAgICAgICAgICBmZXRjaFBvbGljeTogJ25ldHdvcmstb25seScsXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGlmIChyZWZldGNoUXVlcnkuY29udGV4dCkge1xuICAgICAgICAgICAgICAgICAgcXVlcnlPcHRpb25zLmNvbnRleHQgPSByZWZldGNoUXVlcnkuY29udGV4dDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICByZWZldGNoUXVlcnlQcm9taXNlcy5wdXNoKHNlbGYucXVlcnkocXVlcnlPcHRpb25zKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIFByb21pc2UuYWxsKFxuICAgICAgICAgICAgYXdhaXRSZWZldGNoUXVlcmllcyA/IHJlZmV0Y2hRdWVyeVByb21pc2VzIDogW10sXG4gICAgICAgICAgKS50aGVuKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgICAgZXJyb3JQb2xpY3kgPT09ICdpZ25vcmUnICYmXG4gICAgICAgICAgICAgIHN0b3JlUmVzdWx0ICYmXG4gICAgICAgICAgICAgIGdyYXBoUUxSZXN1bHRIYXNFcnJvcihzdG9yZVJlc3VsdClcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICBkZWxldGUgc3RvcmVSZXN1bHQuZXJyb3JzO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXNvbHZlKHN0b3JlUmVzdWx0ISk7XG4gICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIG1hcmtNdXRhdGlvblJlc3VsdDxURGF0YT4oXG4gICAgbXV0YXRpb246IHtcbiAgICAgIG11dGF0aW9uSWQ6IHN0cmluZztcbiAgICAgIHJlc3VsdDogRmV0Y2hSZXN1bHQ8VERhdGE+O1xuICAgICAgZG9jdW1lbnQ6IERvY3VtZW50Tm9kZTtcbiAgICAgIHZhcmlhYmxlcz86IE9wZXJhdGlvblZhcmlhYmxlcztcbiAgICAgIGVycm9yUG9saWN5OiBFcnJvclBvbGljeTtcbiAgICAgIHVwZGF0ZVF1ZXJpZXM6IE11dGF0aW9uT3B0aW9uczxURGF0YT5bXCJ1cGRhdGVRdWVyaWVzXCJdLFxuICAgICAgdXBkYXRlPzogKFxuICAgICAgICBjYWNoZTogQXBvbGxvQ2FjaGU8VFN0b3JlPixcbiAgICAgICAgcmVzdWx0OiBGZXRjaFJlc3VsdDxURGF0YT4sXG4gICAgICApID0+IHZvaWQ7XG4gICAgfSxcbiAgICBjYWNoZSA9IHRoaXMuY2FjaGUsXG4gICkge1xuICAgIGlmIChzaG91bGRXcml0ZVJlc3VsdChtdXRhdGlvbi5yZXN1bHQsIG11dGF0aW9uLmVycm9yUG9saWN5KSkge1xuICAgICAgY29uc3QgY2FjaGVXcml0ZXM6IENhY2hlLldyaXRlT3B0aW9uc1tdID0gW3tcbiAgICAgICAgcmVzdWx0OiBtdXRhdGlvbi5yZXN1bHQuZGF0YSxcbiAgICAgICAgZGF0YUlkOiAnUk9PVF9NVVRBVElPTicsXG4gICAgICAgIHF1ZXJ5OiBtdXRhdGlvbi5kb2N1bWVudCxcbiAgICAgICAgdmFyaWFibGVzOiBtdXRhdGlvbi52YXJpYWJsZXMsXG4gICAgICB9XTtcblxuICAgICAgY29uc3QgeyB1cGRhdGVRdWVyaWVzIH0gPSBtdXRhdGlvbjtcbiAgICAgIGlmICh1cGRhdGVRdWVyaWVzKSB7XG4gICAgICAgIHRoaXMucXVlcmllcy5mb3JFYWNoKCh7IG9ic2VydmFibGVRdWVyeSB9LCBxdWVyeUlkKSA9PiB7XG4gICAgICAgICAgY29uc3QgcXVlcnlOYW1lID0gb2JzZXJ2YWJsZVF1ZXJ5ICYmIG9ic2VydmFibGVRdWVyeS5xdWVyeU5hbWU7XG4gICAgICAgICAgaWYgKCFxdWVyeU5hbWUgfHwgIWhhc093blByb3BlcnR5LmNhbGwodXBkYXRlUXVlcmllcywgcXVlcnlOYW1lKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCB1cGRhdGVyID0gdXBkYXRlUXVlcmllc1txdWVyeU5hbWVdO1xuICAgICAgICAgIGNvbnN0IHsgZG9jdW1lbnQsIHZhcmlhYmxlcyB9ID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeUlkKSE7XG5cbiAgICAgICAgICAvLyBSZWFkIHRoZSBjdXJyZW50IHF1ZXJ5IHJlc3VsdCBmcm9tIHRoZSBzdG9yZS5cbiAgICAgICAgICBjb25zdCB7IHJlc3VsdDogY3VycmVudFF1ZXJ5UmVzdWx0LCBjb21wbGV0ZSB9ID0gY2FjaGUuZGlmZjxURGF0YT4oe1xuICAgICAgICAgICAgcXVlcnk6IGRvY3VtZW50ISxcbiAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0cnVlLFxuICAgICAgICAgICAgb3B0aW1pc3RpYzogZmFsc2UsXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBpZiAoY29tcGxldGUgJiYgY3VycmVudFF1ZXJ5UmVzdWx0KSB7XG4gICAgICAgICAgICAvLyBSdW4gb3VyIHJlZHVjZXIgdXNpbmcgdGhlIGN1cnJlbnQgcXVlcnkgcmVzdWx0IGFuZCB0aGUgbXV0YXRpb24gcmVzdWx0LlxuICAgICAgICAgICAgY29uc3QgbmV4dFF1ZXJ5UmVzdWx0ID0gdXBkYXRlcihjdXJyZW50UXVlcnlSZXN1bHQsIHtcbiAgICAgICAgICAgICAgbXV0YXRpb25SZXN1bHQ6IG11dGF0aW9uLnJlc3VsdCxcbiAgICAgICAgICAgICAgcXVlcnlOYW1lOiBkb2N1bWVudCAmJiBnZXRPcGVyYXRpb25OYW1lKGRvY3VtZW50KSB8fCB2b2lkIDAsXG4gICAgICAgICAgICAgIHF1ZXJ5VmFyaWFibGVzOiB2YXJpYWJsZXMhLFxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFdyaXRlIHRoZSBtb2RpZmllZCByZXN1bHQgYmFjayBpbnRvIHRoZSBzdG9yZSBpZiB3ZSBnb3QgYSBuZXcgcmVzdWx0LlxuICAgICAgICAgICAgaWYgKG5leHRRdWVyeVJlc3VsdCkge1xuICAgICAgICAgICAgICBjYWNoZVdyaXRlcy5wdXNoKHtcbiAgICAgICAgICAgICAgICByZXN1bHQ6IG5leHRRdWVyeVJlc3VsdCxcbiAgICAgICAgICAgICAgICBkYXRhSWQ6ICdST09UX1FVRVJZJyxcbiAgICAgICAgICAgICAgICBxdWVyeTogZG9jdW1lbnQhLFxuICAgICAgICAgICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY2FjaGUucGVyZm9ybVRyYW5zYWN0aW9uKGMgPT4ge1xuICAgICAgICBjYWNoZVdyaXRlcy5mb3JFYWNoKHdyaXRlID0+IGMud3JpdGUod3JpdGUpKTtcblxuICAgICAgICAvLyBJZiB0aGUgbXV0YXRpb24gaGFzIHNvbWUgd3JpdGVzIGFzc29jaWF0ZWQgd2l0aCBpdCB0aGVuIHdlIG5lZWQgdG9cbiAgICAgICAgLy8gYXBwbHkgdGhvc2Ugd3JpdGVzIHRvIHRoZSBzdG9yZSBieSBydW5uaW5nIHRoaXMgcmVkdWNlciBhZ2FpbiB3aXRoIGFcbiAgICAgICAgLy8gd3JpdGUgYWN0aW9uLlxuICAgICAgICBjb25zdCB7IHVwZGF0ZSB9ID0gbXV0YXRpb247XG4gICAgICAgIGlmICh1cGRhdGUpIHtcbiAgICAgICAgICB1cGRhdGUoYywgbXV0YXRpb24ucmVzdWx0KTtcbiAgICAgICAgfVxuICAgICAgfSwgLyogbm9uLW9wdGltaXN0aWMgdHJhbnNhY3Rpb246ICovIG51bGwpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBtYXJrTXV0YXRpb25PcHRpbWlzdGljPFREYXRhPihcbiAgICBvcHRpbWlzdGljUmVzcG9uc2U6IGFueSxcbiAgICBtdXRhdGlvbjoge1xuICAgICAgbXV0YXRpb25JZDogc3RyaW5nO1xuICAgICAgZG9jdW1lbnQ6IERvY3VtZW50Tm9kZTtcbiAgICAgIHZhcmlhYmxlcz86IE9wZXJhdGlvblZhcmlhYmxlcztcbiAgICAgIGVycm9yUG9saWN5OiBFcnJvclBvbGljeTtcbiAgICAgIHVwZGF0ZVF1ZXJpZXM6IE11dGF0aW9uT3B0aW9uczxURGF0YT5bXCJ1cGRhdGVRdWVyaWVzXCJdLFxuICAgICAgdXBkYXRlPzogKFxuICAgICAgICBjYWNoZTogQXBvbGxvQ2FjaGU8VFN0b3JlPixcbiAgICAgICAgcmVzdWx0OiBGZXRjaFJlc3VsdDxURGF0YT4sXG4gICAgICApID0+IHZvaWQ7XG4gICAgfSxcbiAgKSB7XG4gICAgY29uc3QgZGF0YSA9IHR5cGVvZiBvcHRpbWlzdGljUmVzcG9uc2UgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgPyBvcHRpbWlzdGljUmVzcG9uc2UobXV0YXRpb24udmFyaWFibGVzKVxuICAgICAgOiBvcHRpbWlzdGljUmVzcG9uc2U7XG5cbiAgICByZXR1cm4gdGhpcy5jYWNoZS5yZWNvcmRPcHRpbWlzdGljVHJhbnNhY3Rpb24oY2FjaGUgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5tYXJrTXV0YXRpb25SZXN1bHQ8VERhdGE+KHtcbiAgICAgICAgICAuLi5tdXRhdGlvbixcbiAgICAgICAgICByZXN1bHQ6IHsgZGF0YSB9LFxuICAgICAgICB9LCBjYWNoZSk7XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBpbnZhcmlhbnQuZXJyb3IoZXJyb3IpO1xuICAgICAgfVxuICAgIH0sIG11dGF0aW9uLm11dGF0aW9uSWQpO1xuICB9XG5cbiAgcHVibGljIGZldGNoUXVlcnk8VERhdGEsIFRWYXJzPihcbiAgICBxdWVyeUlkOiBzdHJpbmcsXG4gICAgb3B0aW9uczogV2F0Y2hRdWVyeU9wdGlvbnM8VFZhcnMsIFREYXRhPixcbiAgICBuZXR3b3JrU3RhdHVzPzogTmV0d29ya1N0YXR1cyxcbiAgKTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4+IHtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFF1ZXJ5T2JzZXJ2YWJsZTxURGF0YSwgVFZhcnM+KFxuICAgICAgcXVlcnlJZCxcbiAgICAgIG9wdGlvbnMsXG4gICAgICBuZXR3b3JrU3RhdHVzLFxuICAgICkucHJvbWlzZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRRdWVyeVN0b3JlKCkge1xuICAgIGNvbnN0IHN0b3JlOiBSZWNvcmQ8c3RyaW5nLCBRdWVyeVN0b3JlVmFsdWU+ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaCgoaW5mbywgcXVlcnlJZCkgPT4ge1xuICAgICAgc3RvcmVbcXVlcnlJZF0gPSB7XG4gICAgICAgIHZhcmlhYmxlczogaW5mby52YXJpYWJsZXMsXG4gICAgICAgIG5ldHdvcmtTdGF0dXM6IGluZm8ubmV0d29ya1N0YXR1cyxcbiAgICAgICAgbmV0d29ya0Vycm9yOiBpbmZvLm5ldHdvcmtFcnJvcixcbiAgICAgICAgZ3JhcGhRTEVycm9yczogaW5mby5ncmFwaFFMRXJyb3JzLFxuICAgICAgfTtcbiAgICB9KTtcbiAgICByZXR1cm4gc3RvcmU7XG4gIH1cblxuICBwdWJsaWMgcmVzZXRFcnJvcnMocXVlcnlJZDogc3RyaW5nKSB7XG4gICAgY29uc3QgcXVlcnlJbmZvID0gdGhpcy5xdWVyaWVzLmdldChxdWVyeUlkKTtcbiAgICBpZiAocXVlcnlJbmZvKSB7XG4gICAgICBxdWVyeUluZm8ubmV0d29ya0Vycm9yID0gdW5kZWZpbmVkO1xuICAgICAgcXVlcnlJbmZvLmdyYXBoUUxFcnJvcnMgPSBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRyYW5zZm9ybUNhY2hlID0gbmV3IChjYW5Vc2VXZWFrTWFwID8gV2Vha01hcCA6IE1hcCk8XG4gICAgRG9jdW1lbnROb2RlLFxuICAgIFJlYWRvbmx5PHtcbiAgICAgIGRvY3VtZW50OiBSZWFkb25seTxEb2N1bWVudE5vZGU+O1xuICAgICAgaGFzQ2xpZW50RXhwb3J0czogYm9vbGVhbjtcbiAgICAgIGhhc0ZvcmNlZFJlc29sdmVyczogYm9vbGVhbjtcbiAgICAgIGNsaWVudFF1ZXJ5OiBSZWFkb25seTxEb2N1bWVudE5vZGU+IHwgbnVsbDtcbiAgICAgIHNlcnZlclF1ZXJ5OiBSZWFkb25seTxEb2N1bWVudE5vZGU+IHwgbnVsbDtcbiAgICAgIGRlZmF1bHRWYXJzOiBSZWFkb25seTxPcGVyYXRpb25WYXJpYWJsZXM+O1xuICAgIH0+XG4gID4oKTtcblxuICBwdWJsaWMgdHJhbnNmb3JtKGRvY3VtZW50OiBEb2N1bWVudE5vZGUpIHtcbiAgICBjb25zdCB7IHRyYW5zZm9ybUNhY2hlIH0gPSB0aGlzO1xuXG4gICAgaWYgKCF0cmFuc2Zvcm1DYWNoZS5oYXMoZG9jdW1lbnQpKSB7XG4gICAgICBjb25zdCB0cmFuc2Zvcm1lZCA9IHRoaXMuY2FjaGUudHJhbnNmb3JtRG9jdW1lbnQoZG9jdW1lbnQpO1xuICAgICAgY29uc3QgZm9yTGluayA9IHJlbW92ZUNvbm5lY3Rpb25EaXJlY3RpdmVGcm9tRG9jdW1lbnQoXG4gICAgICAgIHRoaXMuY2FjaGUudHJhbnNmb3JtRm9yTGluayh0cmFuc2Zvcm1lZCkpO1xuXG4gICAgICBjb25zdCBjbGllbnRRdWVyeSA9IHRoaXMubG9jYWxTdGF0ZS5jbGllbnRRdWVyeSh0cmFuc2Zvcm1lZCk7XG4gICAgICBjb25zdCBzZXJ2ZXJRdWVyeSA9IGZvckxpbmsgJiYgdGhpcy5sb2NhbFN0YXRlLnNlcnZlclF1ZXJ5KGZvckxpbmspO1xuXG4gICAgICBjb25zdCBjYWNoZUVudHJ5ID0ge1xuICAgICAgICBkb2N1bWVudDogdHJhbnNmb3JtZWQsXG4gICAgICAgIC8vIFRPRE8gVGhlc2UgdHdvIGNhbGxzIChoYXNDbGllbnRFeHBvcnRzIGFuZCBzaG91bGRGb3JjZVJlc29sdmVycylcbiAgICAgICAgLy8gY291bGQgcHJvYmFibHkgYmUgbWVyZ2VkIGludG8gYSBzaW5nbGUgdHJhdmVyc2FsLlxuICAgICAgICBoYXNDbGllbnRFeHBvcnRzOiBoYXNDbGllbnRFeHBvcnRzKHRyYW5zZm9ybWVkKSxcbiAgICAgICAgaGFzRm9yY2VkUmVzb2x2ZXJzOiB0aGlzLmxvY2FsU3RhdGUuc2hvdWxkRm9yY2VSZXNvbHZlcnModHJhbnNmb3JtZWQpLFxuICAgICAgICBjbGllbnRRdWVyeSxcbiAgICAgICAgc2VydmVyUXVlcnksXG4gICAgICAgIGRlZmF1bHRWYXJzOiBnZXREZWZhdWx0VmFsdWVzKFxuICAgICAgICAgIGdldE9wZXJhdGlvbkRlZmluaXRpb24odHJhbnNmb3JtZWQpXG4gICAgICAgICkgYXMgT3BlcmF0aW9uVmFyaWFibGVzLFxuICAgICAgfTtcblxuICAgICAgY29uc3QgYWRkID0gKGRvYzogRG9jdW1lbnROb2RlIHwgbnVsbCkgPT4ge1xuICAgICAgICBpZiAoZG9jICYmICF0cmFuc2Zvcm1DYWNoZS5oYXMoZG9jKSkge1xuICAgICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldChkb2MsIGNhY2hlRW50cnkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBBZGQgY2FjaGVFbnRyeSB0byB0aGUgdHJhbnNmb3JtQ2FjaGUgdXNpbmcgc2V2ZXJhbCBkaWZmZXJlbnQga2V5cyxcbiAgICAgIC8vIHNpbmNlIGFueSBvbmUgb2YgdGhlc2UgZG9jdW1lbnRzIGNvdWxkIGVuZCB1cCBnZXR0aW5nIHBhc3NlZCB0byB0aGVcbiAgICAgIC8vIHRyYW5zZm9ybSBtZXRob2QgYWdhaW4gaW4gdGhlIGZ1dHVyZS5cbiAgICAgIGFkZChkb2N1bWVudCk7XG4gICAgICBhZGQodHJhbnNmb3JtZWQpO1xuICAgICAgYWRkKGNsaWVudFF1ZXJ5KTtcbiAgICAgIGFkZChzZXJ2ZXJRdWVyeSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldChkb2N1bWVudCkhO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRWYXJpYWJsZXMoXG4gICAgZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSxcbiAgICB2YXJpYWJsZXM/OiBPcGVyYXRpb25WYXJpYWJsZXMsXG4gICk6IE9wZXJhdGlvblZhcmlhYmxlcyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnRoaXMudHJhbnNmb3JtKGRvY3VtZW50KS5kZWZhdWx0VmFycyxcbiAgICAgIC4uLnZhcmlhYmxlcyxcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIHdhdGNoUXVlcnk8VCwgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlcz4oXG4gICAgb3B0aW9uczogV2F0Y2hRdWVyeU9wdGlvbnM8VFZhcmlhYmxlcywgVD4sXG4gICk6IE9ic2VydmFibGVRdWVyeTxULCBUVmFyaWFibGVzPiB7XG4gICAgLy8gYXNzaWduIHZhcmlhYmxlIGRlZmF1bHQgdmFsdWVzIGlmIHN1cHBsaWVkXG4gICAgb3B0aW9ucyA9IHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICB2YXJpYWJsZXM6IHRoaXMuZ2V0VmFyaWFibGVzKFxuICAgICAgICBvcHRpb25zLnF1ZXJ5LFxuICAgICAgICBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICkgYXMgVFZhcmlhYmxlcyxcbiAgICB9O1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLm5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIG9wdGlvbnMubm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlID0gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgcXVlcnlJbmZvID0gbmV3IFF1ZXJ5SW5mbyh0aGlzLmNhY2hlKTtcbiAgICBjb25zdCBvYnNlcnZhYmxlID0gbmV3IE9ic2VydmFibGVRdWVyeTxULCBUVmFyaWFibGVzPih7XG4gICAgICBxdWVyeU1hbmFnZXI6IHRoaXMsXG4gICAgICBxdWVyeUluZm8sXG4gICAgICBvcHRpb25zLFxuICAgIH0pO1xuXG4gICAgdGhpcy5xdWVyaWVzLnNldChvYnNlcnZhYmxlLnF1ZXJ5SWQsIHF1ZXJ5SW5mbyk7XG5cbiAgICBxdWVyeUluZm8uaW5pdCh7XG4gICAgICBkb2N1bWVudDogb3B0aW9ucy5xdWVyeSxcbiAgICAgIG9ic2VydmFibGVRdWVyeTogb2JzZXJ2YWJsZSxcbiAgICAgIHZhcmlhYmxlczogb3B0aW9ucy52YXJpYWJsZXMsXG4gICAgfSk7XG5cbiAgICByZXR1cm4gb2JzZXJ2YWJsZTtcbiAgfVxuXG4gIHB1YmxpYyBxdWVyeTxURGF0YSwgVFZhcnMgPSBPcGVyYXRpb25WYXJpYWJsZXM+KFxuICAgIG9wdGlvbnM6IFF1ZXJ5T3B0aW9uczxUVmFycywgVERhdGE+LFxuICApOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj4ge1xuICAgIGludmFyaWFudChcbiAgICAgIG9wdGlvbnMucXVlcnksXG4gICAgICAncXVlcnkgb3B0aW9uIGlzIHJlcXVpcmVkLiBZb3UgbXVzdCBzcGVjaWZ5IHlvdXIgR3JhcGhRTCBkb2N1bWVudCAnICtcbiAgICAgICAgJ2luIHRoZSBxdWVyeSBvcHRpb24uJyxcbiAgICApO1xuXG4gICAgaW52YXJpYW50KFxuICAgICAgb3B0aW9ucy5xdWVyeS5raW5kID09PSAnRG9jdW1lbnQnLFxuICAgICAgJ1lvdSBtdXN0IHdyYXAgdGhlIHF1ZXJ5IHN0cmluZyBpbiBhIFwiZ3FsXCIgdGFnLicsXG4gICAgKTtcblxuICAgIGludmFyaWFudChcbiAgICAgICEob3B0aW9ucyBhcyBhbnkpLnJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgJ3JldHVyblBhcnRpYWxEYXRhIG9wdGlvbiBvbmx5IHN1cHBvcnRlZCBvbiB3YXRjaFF1ZXJ5LicsXG4gICAgKTtcblxuICAgIGludmFyaWFudChcbiAgICAgICEob3B0aW9ucyBhcyBhbnkpLnBvbGxJbnRlcnZhbCxcbiAgICAgICdwb2xsSW50ZXJ2YWwgb3B0aW9uIG9ubHkgc3VwcG9ydGVkIG9uIHdhdGNoUXVlcnkuJyxcbiAgICApO1xuXG4gICAgY29uc3QgcXVlcnlJZCA9IHRoaXMuZ2VuZXJhdGVRdWVyeUlkKCk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hRdWVyeTxURGF0YSwgVFZhcnM+KFxuICAgICAgcXVlcnlJZCxcbiAgICAgIG9wdGlvbnMsXG4gICAgKS5maW5hbGx5KCgpID0+IHRoaXMuc3RvcFF1ZXJ5KHF1ZXJ5SWQpKTtcbiAgfVxuXG4gIHByaXZhdGUgcXVlcnlJZENvdW50ZXIgPSAxO1xuICBwdWJsaWMgZ2VuZXJhdGVRdWVyeUlkKCkge1xuICAgIHJldHVybiBTdHJpbmcodGhpcy5xdWVyeUlkQ291bnRlcisrKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVxdWVzdElkQ291bnRlciA9IDE7XG4gIHB1YmxpYyBnZW5lcmF0ZVJlcXVlc3RJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0SWRDb3VudGVyKys7XG4gIH1cblxuICBwcml2YXRlIG11dGF0aW9uSWRDb3VudGVyID0gMTtcbiAgcHVibGljIGdlbmVyYXRlTXV0YXRpb25JZCgpIHtcbiAgICByZXR1cm4gU3RyaW5nKHRoaXMubXV0YXRpb25JZENvdW50ZXIrKyk7XG4gIH1cblxuICBwdWJsaWMgc3RvcFF1ZXJ5SW5TdG9yZShxdWVyeUlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnN0b3BRdWVyeUluU3RvcmVOb0Jyb2FkY2FzdChxdWVyeUlkKTtcbiAgICB0aGlzLmJyb2FkY2FzdFF1ZXJpZXMoKTtcbiAgfVxuXG4gIHByaXZhdGUgc3RvcFF1ZXJ5SW5TdG9yZU5vQnJvYWRjYXN0KHF1ZXJ5SWQ6IHN0cmluZykge1xuICAgIGNvbnN0IHF1ZXJ5SW5mbyA9IHRoaXMucXVlcmllcy5nZXQocXVlcnlJZCk7XG4gICAgaWYgKHF1ZXJ5SW5mbykgcXVlcnlJbmZvLnN0b3AoKTtcbiAgfVxuXG4gIHB1YmxpYyBjbGVhclN0b3JlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEJlZm9yZSB3ZSBoYXZlIHNlbnQgdGhlIHJlc2V0IGFjdGlvbiB0byB0aGUgc3RvcmUsIHdlIGNhbiBubyBsb25nZXJcbiAgICAvLyByZWx5IG9uIHRoZSByZXN1bHRzIHJldHVybmVkIGJ5IGluLWZsaWdodCByZXF1ZXN0cyBzaW5jZSB0aGVzZSBtYXlcbiAgICAvLyBkZXBlbmQgb24gdmFsdWVzIHRoYXQgcHJldmlvdXNseSBleGlzdGVkIGluIHRoZSBkYXRhIHBvcnRpb24gb2YgdGhlXG4gICAgLy8gc3RvcmUuIFNvLCB3ZSBjYW5jZWwgdGhlIHByb21pc2VzIGFuZCBvYnNlcnZlcnMgdGhhdCB3ZSBoYXZlIGlzc3VlZFxuICAgIC8vIHNvIGZhciBhbmQgbm90IHlldCByZXNvbHZlZCAoaW4gdGhlIGNhc2Ugb2YgcXVlcmllcykuXG4gICAgdGhpcy5jYW5jZWxQZW5kaW5nRmV0Y2hlcyhuZXcgSW52YXJpYW50RXJyb3IoXG4gICAgICAnU3RvcmUgcmVzZXQgd2hpbGUgcXVlcnkgd2FzIGluIGZsaWdodCAobm90IGNvbXBsZXRlZCBpbiBsaW5rIGNoYWluKScsXG4gICAgKSk7XG5cbiAgICB0aGlzLnF1ZXJpZXMuZm9yRWFjaChxdWVyeUluZm8gPT4ge1xuICAgICAgaWYgKHF1ZXJ5SW5mby5vYnNlcnZhYmxlUXVlcnkpIHtcbiAgICAgICAgLy8gU2V0IGxvYWRpbmcgdG8gdHJ1ZSBzbyBsaXN0ZW5lcnMgZG9uJ3QgdHJpZ2dlciB1bmxlc3MgdGhleSB3YW50XG4gICAgICAgIC8vIHJlc3VsdHMgd2l0aCBwYXJ0aWFsIGRhdGEuXG4gICAgICAgIHF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5sb2FkaW5nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcXVlcnlJbmZvLnN0b3AoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLm11dGF0aW9uU3RvcmUpIHtcbiAgICAgIHRoaXMubXV0YXRpb25TdG9yZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgfVxuXG4gICAgLy8gYmVnaW4gcmVtb3ZpbmcgZGF0YSBmcm9tIHRoZSBzdG9yZVxuICAgIHJldHVybiB0aGlzLmNhY2hlLnJlc2V0KCk7XG4gIH1cblxuICBwdWJsaWMgcmVzZXRTdG9yZSgpOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PGFueT5bXT4ge1xuICAgIC8vIFNpbWlsYXJseSwgd2UgaGF2ZSB0byBoYXZlIHRvIHJlZmV0Y2ggZWFjaCBvZiB0aGUgcXVlcmllcyBjdXJyZW50bHkgYmVpbmdcbiAgICAvLyBvYnNlcnZlZC4gV2UgcmVmZXRjaCBpbnN0ZWFkIG9mIGVycm9yJ2luZyBvbiB0aGVzZSBzaW5jZSB0aGUgYXNzdW1wdGlvbiBpcyB0aGF0XG4gICAgLy8gcmVzZXR0aW5nIHRoZSBzdG9yZSBkb2Vzbid0IGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3IgdGhlIHF1ZXJpZXMgY3VycmVudGx5IGJlaW5nXG4gICAgLy8gd2F0Y2hlZC4gSWYgdGhlcmUgaXMgYW4gZXhpc3RpbmcgcXVlcnkgaW4gZmxpZ2h0IHdoZW4gdGhlIHN0b3JlIGlzIHJlc2V0LFxuICAgIC8vIHRoZSBwcm9taXNlIGZvciBpdCB3aWxsIGJlIHJlamVjdGVkIGFuZCBpdHMgcmVzdWx0cyB3aWxsIG5vdCBiZSB3cml0dGVuIHRvIHRoZVxuICAgIC8vIHN0b3JlLlxuICAgIHJldHVybiB0aGlzLmNsZWFyU3RvcmUoKS50aGVuKCgpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLnJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcygpO1xuICAgIH0pO1xuICB9XG5cbiAgcHVibGljIHJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcyhcbiAgICBpbmNsdWRlU3RhbmRieTogYm9vbGVhbiA9IGZhbHNlLFxuICApOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PGFueT5bXT4ge1xuICAgIGNvbnN0IG9ic2VydmFibGVRdWVyeVByb21pc2VzOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PGFueT4+W10gPSBbXTtcblxuICAgIHRoaXMucXVlcmllcy5mb3JFYWNoKCh7IG9ic2VydmFibGVRdWVyeSB9LCBxdWVyeUlkKSA9PiB7XG4gICAgICBpZiAob2JzZXJ2YWJsZVF1ZXJ5ICYmIG9ic2VydmFibGVRdWVyeS5oYXNPYnNlcnZlcnMoKSkge1xuICAgICAgICBjb25zdCBmZXRjaFBvbGljeSA9IG9ic2VydmFibGVRdWVyeS5vcHRpb25zLmZldGNoUG9saWN5O1xuXG4gICAgICAgIG9ic2VydmFibGVRdWVyeS5yZXNldExhc3RSZXN1bHRzKCk7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBmZXRjaFBvbGljeSAhPT0gJ2NhY2hlLW9ubHknICYmXG4gICAgICAgICAgKGluY2x1ZGVTdGFuZGJ5IHx8IGZldGNoUG9saWN5ICE9PSAnc3RhbmRieScpXG4gICAgICAgICkge1xuICAgICAgICAgIG9ic2VydmFibGVRdWVyeVByb21pc2VzLnB1c2gob2JzZXJ2YWJsZVF1ZXJ5LnJlZmV0Y2goKSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldFF1ZXJ5KHF1ZXJ5SWQpLnNldERpZmYobnVsbCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLmJyb2FkY2FzdFF1ZXJpZXMoKTtcblxuICAgIHJldHVybiBQcm9taXNlLmFsbChvYnNlcnZhYmxlUXVlcnlQcm9taXNlcyk7XG4gIH1cblxuICBwdWJsaWMgc2V0T2JzZXJ2YWJsZVF1ZXJ5KG9ic2VydmFibGVRdWVyeTogT2JzZXJ2YWJsZVF1ZXJ5PGFueSwgYW55Pikge1xuICAgIHRoaXMuZ2V0UXVlcnkob2JzZXJ2YWJsZVF1ZXJ5LnF1ZXJ5SWQpLnNldE9ic2VydmFibGVRdWVyeShvYnNlcnZhYmxlUXVlcnkpO1xuICB9XG5cbiAgcHVibGljIHN0YXJ0R3JhcGhRTFN1YnNjcmlwdGlvbjxUID0gYW55Pih7XG4gICAgcXVlcnksXG4gICAgZmV0Y2hQb2xpY3ksXG4gICAgZXJyb3JQb2xpY3ksXG4gICAgdmFyaWFibGVzLFxuICAgIGNvbnRleHQgPSB7fSxcbiAgfTogU3Vic2NyaXB0aW9uT3B0aW9ucyk6IE9ic2VydmFibGU8RmV0Y2hSZXN1bHQ8VD4+IHtcbiAgICBxdWVyeSA9IHRoaXMudHJhbnNmb3JtKHF1ZXJ5KS5kb2N1bWVudDtcbiAgICB2YXJpYWJsZXMgPSB0aGlzLmdldFZhcmlhYmxlcyhxdWVyeSwgdmFyaWFibGVzKTtcblxuICAgIGNvbnN0IG1ha2VPYnNlcnZhYmxlID0gKHZhcmlhYmxlczogT3BlcmF0aW9uVmFyaWFibGVzKSA9PlxuICAgICAgdGhpcy5nZXRPYnNlcnZhYmxlRnJvbUxpbms8VD4oXG4gICAgICAgIHF1ZXJ5LFxuICAgICAgICBjb250ZXh0LFxuICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIGZhbHNlLFxuICAgICAgKS5tYXAocmVzdWx0ID0+IHtcbiAgICAgICAgaWYgKGZldGNoUG9saWN5ICE9PSAnbm8tY2FjaGUnKSB7XG4gICAgICAgICAgLy8gdGhlIHN1YnNjcmlwdGlvbiBpbnRlcmZhY2Ugc2hvdWxkIGhhbmRsZSBub3Qgc2VuZGluZyB1cyByZXN1bHRzIHdlIG5vIGxvbmdlciBzdWJzY3JpYmUgdG8uXG4gICAgICAgICAgLy8gWFhYIEkgZG9uJ3QgdGhpbmsgd2UgZXZlciBzZW5kIGluIGFuIG9iamVjdCB3aXRoIGVycm9ycywgYnV0IHdlIG1pZ2h0IGluIHRoZSBmdXR1cmUuLi5cbiAgICAgICAgICBpZiAoc2hvdWxkV3JpdGVSZXN1bHQocmVzdWx0LCBlcnJvclBvbGljeSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2FjaGUud3JpdGUoe1xuICAgICAgICAgICAgICBxdWVyeSxcbiAgICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQuZGF0YSxcbiAgICAgICAgICAgICAgZGF0YUlkOiAnUk9PVF9TVUJTQ1JJUFRJT04nLFxuICAgICAgICAgICAgICB2YXJpYWJsZXM6IHZhcmlhYmxlcyxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGdyYXBoUUxSZXN1bHRIYXNFcnJvcihyZXN1bHQpKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEFwb2xsb0Vycm9yKHtcbiAgICAgICAgICAgIGdyYXBoUUxFcnJvcnM6IHJlc3VsdC5lcnJvcnMsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSk7XG5cbiAgICBpZiAodGhpcy50cmFuc2Zvcm0ocXVlcnkpLmhhc0NsaWVudEV4cG9ydHMpIHtcbiAgICAgIGNvbnN0IG9ic2VydmFibGVQcm9taXNlID0gdGhpcy5sb2NhbFN0YXRlLmFkZEV4cG9ydGVkVmFyaWFibGVzKFxuICAgICAgICBxdWVyeSxcbiAgICAgICAgdmFyaWFibGVzLFxuICAgICAgICBjb250ZXh0LFxuICAgICAgKS50aGVuKG1ha2VPYnNlcnZhYmxlKTtcblxuICAgICAgcmV0dXJuIG5ldyBPYnNlcnZhYmxlPEZldGNoUmVzdWx0PFQ+PihvYnNlcnZlciA9PiB7XG4gICAgICAgIGxldCBzdWI6IE9ic2VydmFibGVTdWJzY3JpcHRpb24gfCBudWxsID0gbnVsbDtcbiAgICAgICAgb2JzZXJ2YWJsZVByb21pc2UudGhlbihcbiAgICAgICAgICBvYnNlcnZhYmxlID0+IHN1YiA9IG9ic2VydmFibGUuc3Vic2NyaWJlKG9ic2VydmVyKSxcbiAgICAgICAgICBvYnNlcnZlci5lcnJvcixcbiAgICAgICAgKTtcbiAgICAgICAgcmV0dXJuICgpID0+IHN1YiAmJiBzdWIudW5zdWJzY3JpYmUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiBtYWtlT2JzZXJ2YWJsZSh2YXJpYWJsZXMpO1xuICB9XG5cbiAgcHVibGljIHN0b3BRdWVyeShxdWVyeUlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnN0b3BRdWVyeU5vQnJvYWRjYXN0KHF1ZXJ5SWQpO1xuICAgIHRoaXMuYnJvYWRjYXN0UXVlcmllcygpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdG9wUXVlcnlOb0Jyb2FkY2FzdChxdWVyeUlkOiBzdHJpbmcpIHtcbiAgICB0aGlzLnN0b3BRdWVyeUluU3RvcmVOb0Jyb2FkY2FzdChxdWVyeUlkKTtcbiAgICB0aGlzLnJlbW92ZVF1ZXJ5KHF1ZXJ5SWQpO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZVF1ZXJ5KHF1ZXJ5SWQ6IHN0cmluZykge1xuICAgIC8vIHRlYXJkb3duIGFsbCBsaW5rc1xuICAgIC8vIEJvdGggYFF1ZXJ5TWFuYWdlci5mZXRjaFJlcXVlc3RgIGFuZCBgUXVlcnlNYW5hZ2VyLnF1ZXJ5YCBjcmVhdGUgc2VwYXJhdGUgcHJvbWlzZXNcbiAgICAvLyB0aGF0IGVhY2ggYWRkIHRoZWlyIHJlamVjdCBmdW5jdGlvbnMgdG8gZmV0Y2hDYW5jZWxGbnMuXG4gICAgLy8gQSBxdWVyeSBjcmVhdGVkIHdpdGggYFF1ZXJ5TWFuYWdlci5xdWVyeSgpYCBjb3VsZCB0cmlnZ2VyIGEgYFF1ZXJ5TWFuYWdlci5mZXRjaFJlcXVlc3RgLlxuICAgIC8vIFRoZSBzYW1lIHF1ZXJ5SWQgY291bGQgaGF2ZSB0d28gcmVqZWN0aW9uIGZucyBmb3IgdHdvIHByb21pc2VzXG4gICAgdGhpcy5mZXRjaENhbmNlbEZucy5kZWxldGUocXVlcnlJZCk7XG4gICAgdGhpcy5nZXRRdWVyeShxdWVyeUlkKS5zdG9wKCk7XG4gICAgdGhpcy5xdWVyaWVzLmRlbGV0ZShxdWVyeUlkKTtcbiAgfVxuXG4gIHB1YmxpYyBicm9hZGNhc3RRdWVyaWVzKCkge1xuICAgIGlmICh0aGlzLm9uQnJvYWRjYXN0KSB0aGlzLm9uQnJvYWRjYXN0KCk7XG4gICAgdGhpcy5xdWVyaWVzLmZvckVhY2goaW5mbyA9PiBpbmZvLm5vdGlmeSgpKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRMb2NhbFN0YXRlKCk6IExvY2FsU3RhdGU8VFN0b3JlPiB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxTdGF0ZTtcbiAgfVxuXG4gIHByaXZhdGUgaW5GbGlnaHRMaW5rT2JzZXJ2YWJsZXMgPSBuZXcgTWFwPFxuICAgIERvY3VtZW50Tm9kZSxcbiAgICBNYXA8c3RyaW5nLCBPYnNlcnZhYmxlPEZldGNoUmVzdWx0Pj5cbiAgPigpO1xuXG4gIHByaXZhdGUgZ2V0T2JzZXJ2YWJsZUZyb21MaW5rPFQgPSBhbnk+KFxuICAgIHF1ZXJ5OiBEb2N1bWVudE5vZGUsXG4gICAgY29udGV4dDogYW55LFxuICAgIHZhcmlhYmxlcz86IE9wZXJhdGlvblZhcmlhYmxlcyxcbiAgICBkZWR1cGxpY2F0aW9uOiBib29sZWFuID1cbiAgICAgIC8vIFByZWZlciBjb250ZXh0LnF1ZXJ5RGVkdXBsaWNhdGlvbiBpZiBzcGVjaWZpZWQuXG4gICAgICBjb250ZXh0Py5xdWVyeURlZHVwbGljYXRpb24gPz9cbiAgICAgIHRoaXMucXVlcnlEZWR1cGxpY2F0aW9uLFxuICApOiBPYnNlcnZhYmxlPEZldGNoUmVzdWx0PFQ+PiB7XG4gICAgbGV0IG9ic2VydmFibGU6IE9ic2VydmFibGU8RmV0Y2hSZXN1bHQ8VD4+O1xuXG4gICAgY29uc3QgeyBzZXJ2ZXJRdWVyeSB9ID0gdGhpcy50cmFuc2Zvcm0ocXVlcnkpO1xuICAgIGlmIChzZXJ2ZXJRdWVyeSkge1xuICAgICAgY29uc3QgeyBpbkZsaWdodExpbmtPYnNlcnZhYmxlcywgbGluayB9ID0gdGhpcztcblxuICAgICAgY29uc3Qgb3BlcmF0aW9uID0ge1xuICAgICAgICBxdWVyeTogc2VydmVyUXVlcnksXG4gICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgb3BlcmF0aW9uTmFtZTogZ2V0T3BlcmF0aW9uTmFtZShzZXJ2ZXJRdWVyeSkgfHwgdm9pZCAwLFxuICAgICAgICBjb250ZXh0OiB0aGlzLnByZXBhcmVDb250ZXh0KHtcbiAgICAgICAgICAuLi5jb250ZXh0LFxuICAgICAgICAgIGZvcmNlRmV0Y2g6ICFkZWR1cGxpY2F0aW9uXG4gICAgICAgIH0pLFxuICAgICAgfTtcblxuICAgICAgY29udGV4dCA9IG9wZXJhdGlvbi5jb250ZXh0O1xuXG4gICAgICBpZiAoZGVkdXBsaWNhdGlvbikge1xuICAgICAgICBjb25zdCBieVZhcmlhYmxlcyA9IGluRmxpZ2h0TGlua09ic2VydmFibGVzLmdldChzZXJ2ZXJRdWVyeSkgfHwgbmV3IE1hcCgpO1xuICAgICAgICBpbkZsaWdodExpbmtPYnNlcnZhYmxlcy5zZXQoc2VydmVyUXVlcnksIGJ5VmFyaWFibGVzKTtcblxuICAgICAgICBjb25zdCB2YXJKc29uID0gSlNPTi5zdHJpbmdpZnkodmFyaWFibGVzKTtcbiAgICAgICAgb2JzZXJ2YWJsZSA9IGJ5VmFyaWFibGVzLmdldCh2YXJKc29uKTtcblxuICAgICAgICBpZiAoIW9ic2VydmFibGUpIHtcbiAgICAgICAgICBjb25zdCBjb25jYXN0ID0gbmV3IENvbmNhc3QoW1xuICAgICAgICAgICAgZXhlY3V0ZShsaW5rLCBvcGVyYXRpb24pIGFzIE9ic2VydmFibGU8RmV0Y2hSZXN1bHQ8VD4+XG4gICAgICAgICAgXSk7XG5cbiAgICAgICAgICBieVZhcmlhYmxlcy5zZXQodmFySnNvbiwgb2JzZXJ2YWJsZSA9IGNvbmNhc3QpO1xuXG4gICAgICAgICAgY29uY2FzdC5jbGVhbnVwKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChieVZhcmlhYmxlcy5kZWxldGUodmFySnNvbikgJiZcbiAgICAgICAgICAgICAgICBieVZhcmlhYmxlcy5zaXplIDwgMSkge1xuICAgICAgICAgICAgICBpbkZsaWdodExpbmtPYnNlcnZhYmxlcy5kZWxldGUoc2VydmVyUXVlcnkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9ic2VydmFibGUgPSBuZXcgQ29uY2FzdChbXG4gICAgICAgICAgZXhlY3V0ZShsaW5rLCBvcGVyYXRpb24pIGFzIE9ic2VydmFibGU8RmV0Y2hSZXN1bHQ8VD4+XG4gICAgICAgIF0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvYnNlcnZhYmxlID0gbmV3IENvbmNhc3QoW1xuICAgICAgICBPYnNlcnZhYmxlLm9mKHsgZGF0YToge30gfSBhcyBGZXRjaFJlc3VsdDxUPilcbiAgICAgIF0pO1xuICAgICAgY29udGV4dCA9IHRoaXMucHJlcGFyZUNvbnRleHQoY29udGV4dCk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBjbGllbnRRdWVyeSB9ID0gdGhpcy50cmFuc2Zvcm0ocXVlcnkpO1xuICAgIGlmIChjbGllbnRRdWVyeSkge1xuICAgICAgb2JzZXJ2YWJsZSA9IGFzeW5jTWFwKG9ic2VydmFibGUsIHJlc3VsdCA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RhdGUucnVuUmVzb2x2ZXJzKHtcbiAgICAgICAgICBkb2N1bWVudDogY2xpZW50UXVlcnksXG4gICAgICAgICAgcmVtb3RlUmVzdWx0OiByZXN1bHQsXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG9ic2VydmFibGU7XG4gIH1cblxuICBwcml2YXRlIGdldFJlc3VsdHNGcm9tTGluazxURGF0YSwgVFZhcnM+KFxuICAgIHF1ZXJ5SW5mbzogUXVlcnlJbmZvLFxuICAgIGFsbG93Q2FjaGVXcml0ZTogYm9vbGVhbixcbiAgICBvcHRpb25zOiBQaWNrPFdhdGNoUXVlcnlPcHRpb25zPFRWYXJzLCBURGF0YT4sXG4gICAgICB8IFwidmFyaWFibGVzXCJcbiAgICAgIHwgXCJjb250ZXh0XCJcbiAgICAgIHwgXCJmZXRjaFBvbGljeVwiXG4gICAgICB8IFwiZXJyb3JQb2xpY3lcIj4sXG4gICk6IE9ic2VydmFibGU8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PiB7XG4gICAgY29uc3QgeyBsYXN0UmVxdWVzdElkIH0gPSBxdWVyeUluZm87XG5cbiAgICByZXR1cm4gYXN5bmNNYXAoXG4gICAgICB0aGlzLmdldE9ic2VydmFibGVGcm9tTGluayhcbiAgICAgICAgcXVlcnlJbmZvLmRvY3VtZW50ISxcbiAgICAgICAgb3B0aW9ucy5jb250ZXh0LFxuICAgICAgICBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICAgICksXG5cbiAgICAgIHJlc3VsdCA9PiB7XG4gICAgICAgIGNvbnN0IGhhc0Vycm9ycyA9IGlzTm9uRW1wdHlBcnJheShyZXN1bHQuZXJyb3JzKTtcblxuICAgICAgICBpZiAobGFzdFJlcXVlc3RJZCA+PSBxdWVyeUluZm8ubGFzdFJlcXVlc3RJZCkge1xuICAgICAgICAgIGlmIChoYXNFcnJvcnMgJiYgb3B0aW9ucy5lcnJvclBvbGljeSA9PT0gXCJub25lXCIpIHtcbiAgICAgICAgICAgIC8vIFRocm93aW5nIGhlcmUgZWZmZWN0aXZlbHkgY2FsbHMgb2JzZXJ2ZXIuZXJyb3IuXG4gICAgICAgICAgICB0aHJvdyBxdWVyeUluZm8ubWFya0Vycm9yKG5ldyBBcG9sbG9FcnJvcih7XG4gICAgICAgICAgICAgIGdyYXBoUUxFcnJvcnM6IHJlc3VsdC5lcnJvcnMsXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHF1ZXJ5SW5mby5tYXJrUmVzdWx0KHJlc3VsdCwgb3B0aW9ucywgYWxsb3dDYWNoZVdyaXRlKTtcbiAgICAgICAgICBxdWVyeUluZm8ubWFya1JlYWR5KCk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBhcXI6IEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPiA9IHtcbiAgICAgICAgICBkYXRhOiByZXN1bHQuZGF0YSxcbiAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBuZXR3b3JrU3RhdHVzOiBxdWVyeUluZm8ubmV0d29ya1N0YXR1cyB8fCBOZXR3b3JrU3RhdHVzLnJlYWR5LFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChoYXNFcnJvcnMgJiYgb3B0aW9ucy5lcnJvclBvbGljeSAhPT0gXCJpZ25vcmVcIikge1xuICAgICAgICAgIGFxci5lcnJvcnMgPSByZXN1bHQuZXJyb3JzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGFxcjtcbiAgICAgIH0sXG5cbiAgICAgIG5ldHdvcmtFcnJvciA9PiB7XG4gICAgICAgIGNvbnN0IGVycm9yID0gaXNBcG9sbG9FcnJvcihuZXR3b3JrRXJyb3IpXG4gICAgICAgICAgPyBuZXR3b3JrRXJyb3JcbiAgICAgICAgICA6IG5ldyBBcG9sbG9FcnJvcih7IG5ldHdvcmtFcnJvciB9KTtcblxuICAgICAgICBpZiAobGFzdFJlcXVlc3RJZCA+PSBxdWVyeUluZm8ubGFzdFJlcXVlc3RJZCkge1xuICAgICAgICAgIHF1ZXJ5SW5mby5tYXJrRXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICB9LFxuICAgICk7XG4gIH1cblxuICBwdWJsaWMgZmV0Y2hRdWVyeU9ic2VydmFibGU8VERhdGEsIFRWYXJzPihcbiAgICBxdWVyeUlkOiBzdHJpbmcsXG4gICAgb3B0aW9uczogV2F0Y2hRdWVyeU9wdGlvbnM8VFZhcnMsIFREYXRhPixcbiAgICAvLyBUaGUgaW5pdGlhbCBuZXR3b3JrU3RhdHVzIGZvciB0aGlzIGZldGNoLCBtb3N0IG9mdGVuXG4gICAgLy8gTmV0d29ya1N0YXR1cy5sb2FkaW5nLCBidXQgYWxzbyBwb3NzaWJseSBmZXRjaE1vcmUsIHBvbGwsIHJlZmV0Y2gsXG4gICAgLy8gb3Igc2V0VmFyaWFibGVzLlxuICAgIG5ldHdvcmtTdGF0dXMgPSBOZXR3b3JrU3RhdHVzLmxvYWRpbmcsXG4gICk6IENvbmNhc3Q8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PiB7XG4gICAgY29uc3QgcXVlcnkgPSB0aGlzLnRyYW5zZm9ybShvcHRpb25zLnF1ZXJ5KS5kb2N1bWVudDtcbiAgICBjb25zdCB2YXJpYWJsZXMgPSB0aGlzLmdldFZhcmlhYmxlcyhxdWVyeSwgb3B0aW9ucy52YXJpYWJsZXMpIGFzIFRWYXJzO1xuICAgIGNvbnN0IHF1ZXJ5SW5mbyA9IHRoaXMuZ2V0UXVlcnkocXVlcnlJZCk7XG4gICAgY29uc3Qgb2xkTmV0d29ya1N0YXR1cyA9IHF1ZXJ5SW5mby5uZXR3b3JrU3RhdHVzO1xuXG4gICAgbGV0IHtcbiAgICAgIGZldGNoUG9saWN5ID0gXCJjYWNoZS1maXJzdFwiIGFzIFdhdGNoUXVlcnlGZXRjaFBvbGljeSxcbiAgICAgIGVycm9yUG9saWN5ID0gXCJub25lXCIgYXMgRXJyb3JQb2xpY3ksXG4gICAgICByZXR1cm5QYXJ0aWFsRGF0YSA9IGZhbHNlLFxuICAgICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlID0gZmFsc2UsXG4gICAgICBjb250ZXh0ID0ge30sXG4gICAgfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBtaWdodFVzZU5ldHdvcmsgPVxuICAgICAgZmV0Y2hQb2xpY3kgPT09IFwiY2FjaGUtZmlyc3RcIiB8fFxuICAgICAgZmV0Y2hQb2xpY3kgPT09IFwiY2FjaGUtYW5kLW5ldHdvcmtcIiB8fFxuICAgICAgZmV0Y2hQb2xpY3kgPT09IFwibmV0d29yay1vbmx5XCIgfHxcbiAgICAgIGZldGNoUG9saWN5ID09PSBcIm5vLWNhY2hlXCI7XG5cbiAgICBpZiAobWlnaHRVc2VOZXR3b3JrICYmXG4gICAgICAgIG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSAmJlxuICAgICAgICB0eXBlb2Ygb2xkTmV0d29ya1N0YXR1cyA9PT0gXCJudW1iZXJcIiAmJlxuICAgICAgICBvbGROZXR3b3JrU3RhdHVzICE9PSBuZXR3b3JrU3RhdHVzICYmXG4gICAgICAgIGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChuZXR3b3JrU3RhdHVzKSkge1xuICAgICAgLy8gSW4gb3JkZXIgdG8gZm9yY2UgZGVsaXZlcnkgb2YgYW4gaW5jb21wbGV0ZSBjYWNoZSByZXN1bHQgd2l0aFxuICAgICAgLy8gbG9hZGluZzp0cnVlLCB3ZSB0d2VhayB0aGUgZmV0Y2hQb2xpY3kgdG8gaW5jbHVkZSB0aGUgY2FjaGUsIGFuZFxuICAgICAgLy8gcHJldGVuZCB0aGF0IHJldHVyblBhcnRpYWxEYXRhIHdhcyBlbmFibGVkLlxuICAgICAgaWYgKGZldGNoUG9saWN5ICE9PSBcImNhY2hlLWZpcnN0XCIpIHtcbiAgICAgICAgZmV0Y2hQb2xpY3kgPSBcImNhY2hlLWFuZC1uZXR3b3JrXCI7XG4gICAgICB9XG4gICAgICByZXR1cm5QYXJ0aWFsRGF0YSA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IE9iamVjdC5hc3NpZ24oe30sIG9wdGlvbnMsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgdmFyaWFibGVzLFxuICAgICAgZmV0Y2hQb2xpY3ksXG4gICAgICBlcnJvclBvbGljeSxcbiAgICAgIHJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlLFxuICAgICAgY29udGV4dCxcbiAgICB9KTtcblxuICAgIGNvbnN0IGZyb21WYXJpYWJsZXMgPSAodmFyaWFibGVzOiBUVmFycykgPT4ge1xuICAgICAgLy8gU2luY2Ugbm9ybWFsaXplZCBpcyBhbHdheXMgYSBmcmVzaCBjb3B5IG9mIG9wdGlvbnMsIGl0J3Mgc2FmZSB0b1xuICAgICAgLy8gbW9kaWZ5IGl0cyBwcm9wZXJ0aWVzIGhlcmUsIHJhdGhlciB0aGFuIGNyZWF0aW5nIHlldCBhbm90aGVyIG5ld1xuICAgICAgLy8gV2F0Y2hRdWVyeU9wdGlvbnMgb2JqZWN0LlxuICAgICAgbm9ybWFsaXplZC52YXJpYWJsZXMgPSB2YXJpYWJsZXM7XG4gICAgICByZXR1cm4gdGhpcy5mZXRjaFF1ZXJ5QnlQb2xpY3k8VERhdGEsIFRWYXJzPihcbiAgICAgICAgcXVlcnlJbmZvLFxuICAgICAgICBub3JtYWxpemVkLFxuICAgICAgICBuZXR3b3JrU3RhdHVzLFxuICAgICAgKTtcbiAgICB9O1xuXG4gICAgLy8gVGhpcyBjYW5jZWwgZnVuY3Rpb24gbmVlZHMgdG8gYmUgc2V0IGJlZm9yZSB0aGUgY29uY2FzdCBpcyBjcmVhdGVkLFxuICAgIC8vIGluIGNhc2UgY29uY2FzdCBjcmVhdGlvbiBzeW5jaHJvbm91c2x5IGNhbmNlbHMgdGhlIHJlcXVlc3QuXG4gICAgdGhpcy5mZXRjaENhbmNlbEZucy5zZXQocXVlcnlJZCwgcmVhc29uID0+IHtcbiAgICAgIC8vIERlbGF5aW5nIHRoZSBjYW5jZWxsYXRpb24gdXNpbmcgYSBQcm9taXNlIGVuc3VyZXMgdGhhdCB0aGVcbiAgICAgIC8vIGNvbmNhc3QgdmFyaWFibGUgaGFzIGJlZW4gaW5pdGlhbGl6ZWQuXG4gICAgICBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IGNvbmNhc3QuY2FuY2VsKHJlYXNvbikpO1xuICAgIH0pO1xuXG4gICAgLy8gQSBDb25jYXN0PFQ+IGNhbiBiZSBjcmVhdGVkIGVpdGhlciBmcm9tIGFuIEl0ZXJhYmxlPE9ic2VydmFibGU8VD4+XG4gICAgLy8gb3IgZnJvbSBhIFByb21pc2VMaWtlPEl0ZXJhYmxlPE9ic2VydmFibGU8VD4+Piwgd2hlcmUgVCBpbiB0aGlzXG4gICAgLy8gY2FzZSBpcyBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4uXG4gICAgY29uc3QgY29uY2FzdCA9IG5ldyBDb25jYXN0KFxuICAgICAgLy8gSWYgdGhlIHF1ZXJ5IGhhcyBAZXhwb3J0KGFzOiAuLi4pIGRpcmVjdGl2ZXMsIHRoZW4gd2UgbmVlZCB0b1xuICAgICAgLy8gcHJvY2VzcyB0aG9zZSBkaXJlY3RpdmVzIGFzeW5jaHJvbm91c2x5LiBXaGVuIHRoZXJlIGFyZSBub1xuICAgICAgLy8gQGV4cG9ydCBkaXJlY3RpdmVzICh0aGUgY29tbW9uIGNhc2UpLCB3ZSBkZWxpYmVyYXRlbHkgYXZvaWRcbiAgICAgIC8vIHdyYXBwaW5nIHRoZSByZXN1bHQgb2YgdGhpcy5mZXRjaFF1ZXJ5QnlQb2xpY3kgaW4gYSBQcm9taXNlLFxuICAgICAgLy8gc2luY2UgdGhlIHRpbWluZyBvZiByZXN1bHQgZGVsaXZlcnkgaXMgKHVuZm9ydHVuYXRlbHkpIGltcG9ydGFudFxuICAgICAgLy8gZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LiBUT0RPIFRoaXMgY29kZSBjb3VsZCBiZSBzaW1wbGVyIGlmXG4gICAgICAvLyB3ZSBkZXByZWNhdGVkIGFuZCByZW1vdmVkIExvY2FsU3RhdGUuXG4gICAgICB0aGlzLnRyYW5zZm9ybShub3JtYWxpemVkLnF1ZXJ5KS5oYXNDbGllbnRFeHBvcnRzXG4gICAgICAgID8gdGhpcy5sb2NhbFN0YXRlLmFkZEV4cG9ydGVkVmFyaWFibGVzKFxuICAgICAgICAgIG5vcm1hbGl6ZWQucXVlcnksXG4gICAgICAgICAgbm9ybWFsaXplZC52YXJpYWJsZXMsXG4gICAgICAgICAgbm9ybWFsaXplZC5jb250ZXh0LFxuICAgICAgICApLnRoZW4oZnJvbVZhcmlhYmxlcylcbiAgICAgICAgOiBmcm9tVmFyaWFibGVzKG5vcm1hbGl6ZWQudmFyaWFibGVzISlcbiAgICApO1xuXG4gICAgY29uY2FzdC5jbGVhbnVwKCgpID0+IHtcbiAgICAgIHRoaXMuZmV0Y2hDYW5jZWxGbnMuZGVsZXRlKHF1ZXJ5SWQpO1xuXG4gICAgICBjb25zdCB7IG5leHRGZXRjaFBvbGljeSB9ID0gb3B0aW9ucztcbiAgICAgIGlmIChuZXh0RmV0Y2hQb2xpY3kpIHtcbiAgICAgICAgLy8gVGhlIG9wdGlvbnMubmV4dEZldGNoUG9saWN5IHRyYW5zaXRpb24gc2hvdWxkIGhhcHBlbiBvbmx5IG9uY2UsXG4gICAgICAgIC8vIGJ1dCBpdCBzaG91bGQgYmUgcG9zc2libGUgZm9yIGEgbmV4dEZldGNoUG9saWN5IGZ1bmN0aW9uIHRvIHNldFxuICAgICAgICAvLyB0aGlzLm5leHRGZXRjaFBvbGljeSB0byBwZXJmb3JtIGFuIGFkZGl0aW9uYWwgdHJhbnNpdGlvbi5cbiAgICAgICAgb3B0aW9ucy5uZXh0RmV0Y2hQb2xpY3kgPSB2b2lkIDA7XG5cbiAgICAgICAgLy8gV2hlbiBzb21lb25lIGNob29zZXMgY2FjaGUtYW5kLW5ldHdvcmsgb3IgbmV0d29yay1vbmx5IGFzIHRoZWlyXG4gICAgICAgIC8vIGluaXRpYWwgRmV0Y2hQb2xpY3ksIHRoZXkgb2Z0ZW4gZG8gbm90IHdhbnQgZnV0dXJlIGNhY2hlIHVwZGF0ZXMgdG9cbiAgICAgICAgLy8gdHJpZ2dlciB1bmNvbmRpdGlvbmFsIG5ldHdvcmsgcmVxdWVzdHMsIHdoaWNoIGlzIHdoYXQgcmVwZWF0ZWRseVxuICAgICAgICAvLyBhcHBseWluZyB0aGUgY2FjaGUtYW5kLW5ldHdvcmsgb3IgbmV0d29yay1vbmx5IHBvbGljaWVzIHdvdWxkIHNlZW1cbiAgICAgICAgLy8gdG8gaW1wbHkuIEluc3RlYWQsIHdoZW4gdGhlIGNhY2hlIHJlcG9ydHMgYW4gdXBkYXRlIGFmdGVyIHRoZVxuICAgICAgICAvLyBpbml0aWFsIG5ldHdvcmsgcmVxdWVzdCwgaXQgbWF5IGJlIGRlc2lyYWJsZSBmb3Igc3Vic2VxdWVudCBuZXR3b3JrXG4gICAgICAgIC8vIHJlcXVlc3RzIHRvIGJlIHRyaWdnZXJlZCBvbmx5IGlmIHRoZSBjYWNoZSByZXN1bHQgaXMgaW5jb21wbGV0ZS5cbiAgICAgICAgLy8gVGhlIG9wdGlvbnMubmV4dEZldGNoUG9saWN5IG9wdGlvbiBwcm92aWRlcyBhbiBlYXN5IHdheSB0byB1cGRhdGVcbiAgICAgICAgLy8gb3B0aW9ucy5mZXRjaFBvbGljeSBhZnRlciB0aGUgaW50aWFsIG5ldHdvcmsgcmVxdWVzdCwgd2l0aG91dFxuICAgICAgICAvLyBoYXZpbmcgdG8gY2FsbCBvYnNlcnZhYmxlUXVlcnkuc2V0T3B0aW9ucy5cbiAgICAgICAgb3B0aW9ucy5mZXRjaFBvbGljeSA9IHR5cGVvZiBuZXh0RmV0Y2hQb2xpY3kgPT09IFwiZnVuY3Rpb25cIlxuICAgICAgICAgID8gbmV4dEZldGNoUG9saWN5LmNhbGwob3B0aW9ucywgb3B0aW9ucy5mZXRjaFBvbGljeSB8fCBcImNhY2hlLWZpcnN0XCIpXG4gICAgICAgICAgOiBuZXh0RmV0Y2hQb2xpY3k7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY29uY2FzdDtcbiAgfVxuXG4gIHByaXZhdGUgZmV0Y2hRdWVyeUJ5UG9saWN5PFREYXRhLCBUVmFycz4oXG4gICAgcXVlcnlJbmZvOiBRdWVyeUluZm8sXG4gICAgb3B0aW9uczogV2F0Y2hRdWVyeU9wdGlvbnM8VFZhcnMsIFREYXRhPixcbiAgICAvLyBUaGUgaW5pdGlhbCBuZXR3b3JrU3RhdHVzIGZvciB0aGlzIGZldGNoLCBtb3N0IG9mdGVuXG4gICAgLy8gTmV0d29ya1N0YXR1cy5sb2FkaW5nLCBidXQgYWxzbyBwb3NzaWJseSBmZXRjaE1vcmUsIHBvbGwsIHJlZmV0Y2gsXG4gICAgLy8gb3Igc2V0VmFyaWFibGVzLlxuICAgIG5ldHdvcmtTdGF0dXM6IE5ldHdvcmtTdGF0dXMsXG4gICk6IENvbmNhc3RTb3VyY2VzSXRlcmFibGU8QXBvbGxvUXVlcnlSZXN1bHQ8VERhdGE+PiB7XG4gICAgY29uc3Qge1xuICAgICAgcXVlcnksXG4gICAgICB2YXJpYWJsZXMsXG4gICAgICBmZXRjaFBvbGljeSxcbiAgICAgIGVycm9yUG9saWN5LFxuICAgICAgcmV0dXJuUGFydGlhbERhdGEsXG4gICAgICBjb250ZXh0LFxuICAgIH0gPSBvcHRpb25zO1xuXG4gICAgcXVlcnlJbmZvLmluaXQoe1xuICAgICAgZG9jdW1lbnQ6IHF1ZXJ5LFxuICAgICAgdmFyaWFibGVzLFxuICAgICAgbGFzdFJlcXVlc3RJZDogdGhpcy5nZW5lcmF0ZVJlcXVlc3RJZCgpLFxuICAgICAgbmV0d29ya1N0YXR1cyxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlYWRDYWNoZSA9ICgpID0+IHF1ZXJ5SW5mby5nZXREaWZmKHZhcmlhYmxlcyk7XG5cbiAgICBjb25zdCByZXN1bHRzRnJvbUNhY2hlID0gKFxuICAgICAgZGlmZjogQ2FjaGUuRGlmZlJlc3VsdDxURGF0YT4sXG4gICAgICBuZXR3b3JrU3RhdHVzID0gcXVlcnlJbmZvLm5ldHdvcmtTdGF0dXMgfHwgTmV0d29ya1N0YXR1cy5sb2FkaW5nLFxuICAgICkgPT4ge1xuICAgICAgY29uc3QgZGF0YSA9IGRpZmYucmVzdWx0IGFzIFREYXRhO1xuXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJlxuICAgICAgICAgIGlzTm9uRW1wdHlBcnJheShkaWZmLm1pc3NpbmcpICYmXG4gICAgICAgICAgIWVxdWFsKGRhdGEsIHt9KSAmJlxuICAgICAgICAgICFyZXR1cm5QYXJ0aWFsRGF0YSkge1xuICAgICAgICBpbnZhcmlhbnQud2FybihgTWlzc2luZyBjYWNoZSByZXN1bHQgZmllbGRzOiAke1xuICAgICAgICAgIGRpZmYubWlzc2luZy5tYXAobSA9PiBtLnBhdGguam9pbignLicpKS5qb2luKCcsICcpXG4gICAgICAgIH1gLCBkaWZmLm1pc3NpbmcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmcm9tRGF0YSA9IChkYXRhOiBURGF0YSkgPT4gT2JzZXJ2YWJsZS5vZih7XG4gICAgICAgIGRhdGEsXG4gICAgICAgIGxvYWRpbmc6IGlzTmV0d29ya1JlcXVlc3RJbkZsaWdodChuZXR3b3JrU3RhdHVzKSxcbiAgICAgICAgbmV0d29ya1N0YXR1cyxcbiAgICAgICAgLi4uKGRpZmYuY29tcGxldGUgPyBudWxsIDogeyBwYXJ0aWFsOiB0cnVlIH0pLFxuICAgICAgfSBhcyBBcG9sbG9RdWVyeVJlc3VsdDxURGF0YT4pO1xuXG4gICAgICBpZiAodGhpcy50cmFuc2Zvcm0ocXVlcnkpLmhhc0ZvcmNlZFJlc29sdmVycykge1xuICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0YXRlLnJ1blJlc29sdmVycyh7XG4gICAgICAgICAgZG9jdW1lbnQ6IHF1ZXJ5LFxuICAgICAgICAgIHJlbW90ZVJlc3VsdDogeyBkYXRhIH0sXG4gICAgICAgICAgY29udGV4dCxcbiAgICAgICAgICB2YXJpYWJsZXMsXG4gICAgICAgICAgb25seVJ1bkZvcmNlZFJlc29sdmVyczogdHJ1ZSxcbiAgICAgICAgfSkudGhlbihyZXNvbHZlZCA9PiBmcm9tRGF0YShyZXNvbHZlZC5kYXRhISkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZnJvbURhdGEoZGF0YSk7XG4gICAgfTtcblxuICAgIGNvbnN0IHJlc3VsdHNGcm9tTGluayA9IChhbGxvd0NhY2hlV3JpdGU6IGJvb2xlYW4pID0+XG4gICAgICB0aGlzLmdldFJlc3VsdHNGcm9tTGluazxURGF0YSwgVFZhcnM+KHF1ZXJ5SW5mbywgYWxsb3dDYWNoZVdyaXRlLCB7XG4gICAgICAgIHZhcmlhYmxlcyxcbiAgICAgICAgY29udGV4dCxcbiAgICAgICAgZmV0Y2hQb2xpY3ksXG4gICAgICAgIGVycm9yUG9saWN5LFxuICAgICAgfSk7XG5cbiAgICBzd2l0Y2ggKGZldGNoUG9saWN5KSB7XG4gICAgZGVmYXVsdDogY2FzZSBcImNhY2hlLWZpcnN0XCI6IHtcbiAgICAgIGNvbnN0IGRpZmYgPSByZWFkQ2FjaGUoKTtcblxuICAgICAgaWYgKGRpZmYuY29tcGxldGUpIHtcbiAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICByZXN1bHRzRnJvbUNhY2hlKGRpZmYsIHF1ZXJ5SW5mby5tYXJrUmVhZHkoKSksXG4gICAgICAgIF07XG4gICAgICB9XG5cbiAgICAgIGlmIChyZXR1cm5QYXJ0aWFsRGF0YSkge1xuICAgICAgICByZXR1cm4gW1xuICAgICAgICAgIHJlc3VsdHNGcm9tQ2FjaGUoZGlmZiksXG4gICAgICAgICAgcmVzdWx0c0Zyb21MaW5rKHRydWUpLFxuICAgICAgICBdO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gW1xuICAgICAgICByZXN1bHRzRnJvbUxpbmsodHJ1ZSksXG4gICAgICBdO1xuICAgIH1cblxuICAgIGNhc2UgXCJjYWNoZS1hbmQtbmV0d29ya1wiOiB7XG4gICAgICBjb25zdCBkaWZmID0gcmVhZENhY2hlKCk7XG5cbiAgICAgIGlmIChkaWZmLmNvbXBsZXRlIHx8IHJldHVyblBhcnRpYWxEYXRhKSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgcmVzdWx0c0Zyb21DYWNoZShkaWZmKSxcbiAgICAgICAgICByZXN1bHRzRnJvbUxpbmsodHJ1ZSksXG4gICAgICAgIF07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBbXG4gICAgICAgIHJlc3VsdHNGcm9tTGluayh0cnVlKSxcbiAgICAgIF07XG4gICAgfVxuXG4gICAgY2FzZSBcImNhY2hlLW9ubHlcIjpcbiAgICAgIHJldHVybiBbXG4gICAgICAgIHJlc3VsdHNGcm9tQ2FjaGUocmVhZENhY2hlKCksIHF1ZXJ5SW5mby5tYXJrUmVhZHkoKSksXG4gICAgICBdO1xuXG4gICAgY2FzZSBcIm5ldHdvcmstb25seVwiOlxuICAgICAgcmV0dXJuIFtyZXN1bHRzRnJvbUxpbmsodHJ1ZSldO1xuXG4gICAgY2FzZSBcIm5vLWNhY2hlXCI6XG4gICAgICByZXR1cm4gW3Jlc3VsdHNGcm9tTGluayhmYWxzZSldO1xuXG4gICAgY2FzZSBcInN0YW5kYnlcIjpcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGdldFF1ZXJ5KHF1ZXJ5SWQ6IHN0cmluZyk6IFF1ZXJ5SW5mbyB7XG4gICAgaWYgKHF1ZXJ5SWQgJiYgIXRoaXMucXVlcmllcy5oYXMocXVlcnlJZCkpIHtcbiAgICAgIHRoaXMucXVlcmllcy5zZXQocXVlcnlJZCwgbmV3IFF1ZXJ5SW5mbyh0aGlzLmNhY2hlKSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnF1ZXJpZXMuZ2V0KHF1ZXJ5SWQpITtcbiAgfVxuXG4gIHByaXZhdGUgcHJlcGFyZUNvbnRleHQoY29udGV4dCA9IHt9KSB7XG4gICAgY29uc3QgbmV3Q29udGV4dCA9IHRoaXMubG9jYWxTdGF0ZS5wcmVwYXJlQ29udGV4dChjb250ZXh0KTtcbiAgICByZXR1cm4ge1xuICAgICAgLi4ubmV3Q29udGV4dCxcbiAgICAgIGNsaWVudEF3YXJlbmVzczogdGhpcy5jbGllbnRBd2FyZW5lc3MsXG4gICAgfTtcbiAgfVxufVxuIiwgImltcG9ydCB7IEV4ZWN1dGlvblJlc3VsdCwgRG9jdW1lbnROb2RlIH0gZnJvbSAnZ3JhcGhxbCc7XG5pbXBvcnQgeyBpbnZhcmlhbnQsIEludmFyaWFudEVycm9yIH0gZnJvbSAndHMtaW52YXJpYW50JztcblxuaW1wb3J0IHsgQXBvbGxvTGluaywgRmV0Y2hSZXN1bHQsIEdyYXBoUUxSZXF1ZXN0LCBleGVjdXRlIH0gZnJvbSAnLi4vbGluay9jb3JlJztcbmltcG9ydCB7IEFwb2xsb0NhY2hlLCBEYXRhUHJveHkgfSBmcm9tICcuLi9jYWNoZSc7XG5pbXBvcnQgeyBPYnNlcnZhYmxlLCBjb21wYWN0IH0gZnJvbSAnLi4vdXRpbGl0aWVzJztcbmltcG9ydCB7IHZlcnNpb24gfSBmcm9tICcuLi92ZXJzaW9uJztcbmltcG9ydCB7IEh0dHBMaW5rLCBVcmlGdW5jdGlvbiB9IGZyb20gJy4uL2xpbmsvaHR0cCc7XG5cbmltcG9ydCB7IFF1ZXJ5TWFuYWdlciB9IGZyb20gJy4vUXVlcnlNYW5hZ2VyJztcbmltcG9ydCB7IE9ic2VydmFibGVRdWVyeSB9IGZyb20gJy4vT2JzZXJ2YWJsZVF1ZXJ5JztcblxuaW1wb3J0IHtcbiAgQXBvbGxvUXVlcnlSZXN1bHQsXG4gIE9wZXJhdGlvblZhcmlhYmxlcyxcbiAgUmVzb2x2ZXJzLFxufSBmcm9tICcuL3R5cGVzJztcblxuaW1wb3J0IHtcbiAgUXVlcnlPcHRpb25zLFxuICBXYXRjaFF1ZXJ5T3B0aW9ucyxcbiAgTXV0YXRpb25PcHRpb25zLFxuICBTdWJzY3JpcHRpb25PcHRpb25zLFxuICBXYXRjaFF1ZXJ5RmV0Y2hQb2xpY3ksXG59IGZyb20gJy4vd2F0Y2hRdWVyeU9wdGlvbnMnO1xuXG5pbXBvcnQge1xuICBMb2NhbFN0YXRlLFxuICBGcmFnbWVudE1hdGNoZXIsXG59IGZyb20gJy4vTG9jYWxTdGF0ZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVmYXVsdE9wdGlvbnMge1xuICB3YXRjaFF1ZXJ5PzogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxhbnksIGFueT4+O1xuICBxdWVyeT86IFBhcnRpYWw8UXVlcnlPcHRpb25zPGFueSwgYW55Pj47XG4gIG11dGF0ZT86IFBhcnRpYWw8TXV0YXRpb25PcHRpb25zPGFueSwgYW55Pj47XG59XG5cbmxldCBoYXNTdWdnZXN0ZWREZXZ0b29scyA9IGZhbHNlO1xuXG5leHBvcnQgdHlwZSBBcG9sbG9DbGllbnRPcHRpb25zPFRDYWNoZVNoYXBlPiA9IHtcbiAgdXJpPzogc3RyaW5nIHwgVXJpRnVuY3Rpb247XG4gIGNyZWRlbnRpYWxzPzogc3RyaW5nO1xuICBoZWFkZXJzPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgbGluaz86IEFwb2xsb0xpbms7XG4gIGNhY2hlOiBBcG9sbG9DYWNoZTxUQ2FjaGVTaGFwZT47XG4gIHNzckZvcmNlRmV0Y2hEZWxheT86IG51bWJlcjtcbiAgc3NyTW9kZT86IGJvb2xlYW47XG4gIGNvbm5lY3RUb0RldlRvb2xzPzogYm9vbGVhbjtcbiAgcXVlcnlEZWR1cGxpY2F0aW9uPzogYm9vbGVhbjtcbiAgZGVmYXVsdE9wdGlvbnM/OiBEZWZhdWx0T3B0aW9ucztcbiAgYXNzdW1lSW1tdXRhYmxlUmVzdWx0cz86IGJvb2xlYW47XG4gIHJlc29sdmVycz86IFJlc29sdmVycyB8IFJlc29sdmVyc1tdO1xuICB0eXBlRGVmcz86IHN0cmluZyB8IHN0cmluZ1tdIHwgRG9jdW1lbnROb2RlIHwgRG9jdW1lbnROb2RlW107XG4gIGZyYWdtZW50TWF0Y2hlcj86IEZyYWdtZW50TWF0Y2hlcjtcbiAgbmFtZT86IHN0cmluZztcbiAgdmVyc2lvbj86IHN0cmluZztcbn07XG5cbnR5cGUgT3B0aW9uc1VuaW9uPFREYXRhLCBUVmFyaWFibGVzPiA9XG4gIHwgV2F0Y2hRdWVyeU9wdGlvbnM8VFZhcmlhYmxlcywgVERhdGE+XG4gIHwgUXVlcnlPcHRpb25zPFRWYXJpYWJsZXMsIFREYXRhPlxuICB8IE11dGF0aW9uT3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz47XG5cbmV4cG9ydCBmdW5jdGlvbiBtZXJnZU9wdGlvbnM8XG4gIFRPcHRpb25zIGV4dGVuZHMgT3B0aW9uc1VuaW9uPGFueSwgYW55PlxuPihcbiAgZGVmYXVsdHM6IFBhcnRpYWw8VE9wdGlvbnM+LFxuICBvcHRpb25zOiBUT3B0aW9ucyxcbik6IFRPcHRpb25zIHtcbiAgcmV0dXJuIGNvbXBhY3QoZGVmYXVsdHMsIG9wdGlvbnMsIG9wdGlvbnMudmFyaWFibGVzICYmIHtcbiAgICB2YXJpYWJsZXM6IHtcbiAgICAgIC4uLmRlZmF1bHRzLnZhcmlhYmxlcyxcbiAgICAgIC4uLm9wdGlvbnMudmFyaWFibGVzLFxuICAgIH0sXG4gIH0pO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgdGhlIHByaW1hcnkgQXBvbGxvIENsaWVudCBjbGFzcy4gSXQgaXMgdXNlZCB0byBzZW5kIEdyYXBoUUwgZG9jdW1lbnRzIChpLmUuIHF1ZXJpZXNcbiAqIGFuZCBtdXRhdGlvbnMpIHRvIGEgR3JhcGhRTCBzcGVjLWNvbXBsaWFudCBzZXJ2ZXIgb3ZlciBhIHtAbGluayBOZXR3b3JrSW50ZXJmYWNlfSBpbnN0YW5jZSxcbiAqIHJlY2VpdmUgcmVzdWx0cyBmcm9tIHRoZSBzZXJ2ZXIgYW5kIGNhY2hlIHRoZSByZXN1bHRzIGluIGEgc3RvcmUuIEl0IGFsc28gZGVsaXZlcnMgdXBkYXRlc1xuICogdG8gR3JhcGhRTCBxdWVyaWVzIHRocm91Z2gge0BsaW5rIE9ic2VydmFibGV9IGluc3RhbmNlcy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFwb2xsb0NsaWVudDxUQ2FjaGVTaGFwZT4gaW1wbGVtZW50cyBEYXRhUHJveHkge1xuICBwdWJsaWMgbGluazogQXBvbGxvTGluaztcbiAgcHVibGljIGNhY2hlOiBBcG9sbG9DYWNoZTxUQ2FjaGVTaGFwZT47XG4gIHB1YmxpYyBkaXNhYmxlTmV0d29ya0ZldGNoZXM6IGJvb2xlYW47XG4gIHB1YmxpYyB2ZXJzaW9uOiBzdHJpbmc7XG4gIHB1YmxpYyBxdWVyeURlZHVwbGljYXRpb246IGJvb2xlYW47XG4gIHB1YmxpYyBkZWZhdWx0T3B0aW9uczogRGVmYXVsdE9wdGlvbnMgPSB7fTtcbiAgcHVibGljIHJlYWRvbmx5IHR5cGVEZWZzOiBBcG9sbG9DbGllbnRPcHRpb25zPFRDYWNoZVNoYXBlPlsndHlwZURlZnMnXTtcblxuICBwcml2YXRlIHF1ZXJ5TWFuYWdlcjogUXVlcnlNYW5hZ2VyPFRDYWNoZVNoYXBlPjtcbiAgcHJpdmF0ZSBkZXZUb29sc0hvb2tDYjogRnVuY3Rpb247XG4gIHByaXZhdGUgcmVzZXRTdG9yZUNhbGxiYWNrczogQXJyYXk8KCkgPT4gUHJvbWlzZTxhbnk+PiA9IFtdO1xuICBwcml2YXRlIGNsZWFyU3RvcmVDYWxsYmFja3M6IEFycmF5PCgpID0+IFByb21pc2U8YW55Pj4gPSBbXTtcbiAgcHJpdmF0ZSBsb2NhbFN0YXRlOiBMb2NhbFN0YXRlPFRDYWNoZVNoYXBlPjtcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgQXBvbGxvQ2xpZW50fS5cbiAgICpcbiAgICogQHBhcmFtIHVyaSBUaGUgR3JhcGhRTCBlbmRwb2ludCB0aGF0IEFwb2xsbyBDbGllbnQgd2lsbCBjb25uZWN0IHRvLiBJZlxuICAgKiAgICAgICAgICAgIGBsaW5rYCBpcyBjb25maWd1cmVkLCB0aGlzIG9wdGlvbiBpcyBpZ25vcmVkLlxuICAgKiBAcGFyYW0gbGluayBUaGUge0BsaW5rIEFwb2xsb0xpbmt9IG92ZXIgd2hpY2ggR3JhcGhRTCBkb2N1bWVudHMgd2lsbCBiZSByZXNvbHZlZCBpbnRvIGEgcmVzcG9uc2UuXG4gICAqXG4gICAqIEBwYXJhbSBjYWNoZSBUaGUgaW5pdGlhbCBjYWNoZSB0byB1c2UgaW4gdGhlIGRhdGEgc3RvcmUuXG4gICAqXG4gICAqIEBwYXJhbSBzc3JNb2RlIERldGVybWluZXMgd2hldGhlciB0aGlzIGlzIGJlaW5nIHJ1biBpbiBTZXJ2ZXIgU2lkZSBSZW5kZXJpbmcgKFNTUikgbW9kZS5cbiAgICpcbiAgICogQHBhcmFtIHNzckZvcmNlRmV0Y2hEZWxheSBEZXRlcm1pbmVzIHRoZSB0aW1lIGludGVydmFsIGJlZm9yZSB3ZSBmb3JjZSBmZXRjaCBxdWVyaWVzIGZvciBhXG4gICAqIHNlcnZlciBzaWRlIHJlbmRlci5cbiAgICpcbiAgICogQHBhcmFtIHF1ZXJ5RGVkdXBsaWNhdGlvbiBJZiBzZXQgdG8gZmFsc2UsIGEgcXVlcnkgd2lsbCBzdGlsbCBiZSBzZW50IHRvIHRoZSBzZXJ2ZXIgZXZlbiBpZiBhIHF1ZXJ5XG4gICAqIHdpdGggaWRlbnRpY2FsIHBhcmFtZXRlcnMgKHF1ZXJ5LCB2YXJpYWJsZXMsIG9wZXJhdGlvbk5hbWUpIGlzIGFscmVhZHkgaW4gZmxpZ2h0LlxuICAgKlxuICAgKiBAcGFyYW0gZGVmYXVsdE9wdGlvbnMgVXNlZCB0byBzZXQgYXBwbGljYXRpb24gd2lkZSBkZWZhdWx0cyBmb3IgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zIHN1cHBsaWVkIHRvIGB3YXRjaFF1ZXJ5YCwgYHF1ZXJ5YCwgb3JcbiAgICogICAgICAgICAgICAgICAgICAgICAgIGBtdXRhdGVgLlxuICAgKlxuICAgKiBAcGFyYW0gYXNzdW1lSW1tdXRhYmxlUmVzdWx0cyBXaGVuIHRoaXMgb3B0aW9uIGlzIHRydWUsIHRoZSBjbGllbnQgd2lsbCBhc3N1bWUgcmVzdWx0c1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWFkIGZyb20gdGhlIGNhY2hlIGFyZSBuZXZlciBtdXRhdGVkIGJ5IGFwcGxpY2F0aW9uIGNvZGUsXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdoaWNoIGVuYWJsZXMgc3Vic3RhbnRpYWwgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9ucy4gUGFzc2luZ1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgeyBmcmVlemVSZXN1bHRzOiB0cnVlIH1gIHRvIHRoZSBgSW5NZW1vcnlDYWNoZWAgY29uc3RydWN0b3JcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuIGhlbHAgZW5mb3JjZSB0aGlzIGltbXV0YWJpbGl0eS5cbiAgICpcbiAgICogQHBhcmFtIG5hbWUgQSBjdXN0b20gbmFtZSB0aGF0IGNhbiBiZSB1c2VkIHRvIGlkZW50aWZ5IHRoaXMgY2xpZW50LCB3aGVuXG4gICAqICAgICAgICAgICAgIHVzaW5nIEFwb2xsbyBjbGllbnQgYXdhcmVuZXNzIGZlYXR1cmVzLiBFLmcuIFwiaU9TXCIuXG4gICAqXG4gICAqIEBwYXJhbSB2ZXJzaW9uIEEgY3VzdG9tIHZlcnNpb24gdGhhdCBjYW4gYmUgdXNlZCB0byBpZGVudGlmeSB0aGlzIGNsaWVudCxcbiAgICogICAgICAgICAgICAgICAgd2hlbiB1c2luZyBBcG9sbG8gY2xpZW50IGF3YXJlbmVzcyBmZWF0dXJlcy4gVGhpcyBpcyB0aGVcbiAgICogICAgICAgICAgICAgICAgdmVyc2lvbiBvZiB5b3VyIGNsaWVudCwgd2hpY2ggeW91IG1heSB3YW50IHRvIGluY3JlbWVudCBvblxuICAgKiAgICAgICAgICAgICAgICBuZXcgYnVpbGRzLiBUaGlzIGlzIE5PVCB0aGUgdmVyc2lvbiBvZiBBcG9sbG8gQ2xpZW50IHRoYXRcbiAgICogICAgICAgICAgICAgICAgeW91IGFyZSB1c2luZy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG9wdGlvbnM6IEFwb2xsb0NsaWVudE9wdGlvbnM8VENhY2hlU2hhcGU+KSB7XG4gICAgY29uc3Qge1xuICAgICAgdXJpLFxuICAgICAgY3JlZGVudGlhbHMsXG4gICAgICBoZWFkZXJzLFxuICAgICAgY2FjaGUsXG4gICAgICBzc3JNb2RlID0gZmFsc2UsXG4gICAgICBzc3JGb3JjZUZldGNoRGVsYXkgPSAwLFxuICAgICAgY29ubmVjdFRvRGV2VG9vbHMgPVxuICAgICAgICAvLyBFeHBvc2UgdGhlIGNsaWVudCBpbnN0YW5jZSBhcyB3aW5kb3cuX19BUE9MTE9fQ0xJRU5UX18gYW5kIGNhbGxcbiAgICAgICAgLy8gb25Ccm9hZGNhc3QgaW4gcXVlcnlNYW5hZ2VyLmJyb2FkY2FzdFF1ZXJpZXMgdG8gZW5hYmxlIGJyb3dzZXJcbiAgICAgICAgLy8gZGV2dG9vbHMsIGJ1dCBkaXNhYmxlIHRoZW0gYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAhKHdpbmRvdyBhcyBhbnkpLl9fQVBPTExPX0NMSUVOVF9fICYmXG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG4gICAgICBxdWVyeURlZHVwbGljYXRpb24gPSB0cnVlLFxuICAgICAgZGVmYXVsdE9wdGlvbnMsXG4gICAgICBhc3N1bWVJbW11dGFibGVSZXN1bHRzID0gZmFsc2UsXG4gICAgICByZXNvbHZlcnMsXG4gICAgICB0eXBlRGVmcyxcbiAgICAgIGZyYWdtZW50TWF0Y2hlcixcbiAgICAgIG5hbWU6IGNsaWVudEF3YXJlbmVzc05hbWUsXG4gICAgICB2ZXJzaW9uOiBjbGllbnRBd2FyZW5lc3NWZXJzaW9uLFxuICAgIH0gPSBvcHRpb25zO1xuXG4gICAgbGV0IHsgbGluayB9ID0gb3B0aW9ucztcblxuICAgIGlmICghbGluaykge1xuICAgICAgbGluayA9IHVyaVxuICAgICAgICA/IG5ldyBIdHRwTGluayh7IHVyaSwgY3JlZGVudGlhbHMsIGhlYWRlcnMgfSlcbiAgICAgICAgOiBBcG9sbG9MaW5rLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgaWYgKCFjYWNoZSkge1xuICAgICAgdGhyb3cgbmV3IEludmFyaWFudEVycm9yKFxuICAgICAgICBcIlRvIGluaXRpYWxpemUgQXBvbGxvIENsaWVudCwgeW91IG11c3Qgc3BlY2lmeSBhICdjYWNoZScgcHJvcGVydHkgXCIgK1xuICAgICAgICBcImluIHRoZSBvcHRpb25zIG9iamVjdC4gXFxuXCIgK1xuICAgICAgICBcIkZvciBtb3JlIGluZm9ybWF0aW9uLCBwbGVhc2UgdmlzaXQ6IGh0dHBzOi8vZ28uYXBvbGxvLmRldi9jL2RvY3NcIlxuICAgICAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmxpbmsgPSBsaW5rO1xuICAgIHRoaXMuY2FjaGUgPSBjYWNoZTtcbiAgICB0aGlzLmRpc2FibGVOZXR3b3JrRmV0Y2hlcyA9IHNzck1vZGUgfHwgc3NyRm9yY2VGZXRjaERlbGF5ID4gMDtcbiAgICB0aGlzLnF1ZXJ5RGVkdXBsaWNhdGlvbiA9IHF1ZXJ5RGVkdXBsaWNhdGlvbjtcbiAgICB0aGlzLmRlZmF1bHRPcHRpb25zID0gZGVmYXVsdE9wdGlvbnMgfHwge307XG4gICAgdGhpcy50eXBlRGVmcyA9IHR5cGVEZWZzO1xuXG4gICAgaWYgKHNzckZvcmNlRmV0Y2hEZWxheSkge1xuICAgICAgc2V0VGltZW91dChcbiAgICAgICAgKCkgPT4gKHRoaXMuZGlzYWJsZU5ldHdvcmtGZXRjaGVzID0gZmFsc2UpLFxuICAgICAgICBzc3JGb3JjZUZldGNoRGVsYXksXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMud2F0Y2hRdWVyeSA9IHRoaXMud2F0Y2hRdWVyeS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucXVlcnkgPSB0aGlzLnF1ZXJ5LmJpbmQodGhpcyk7XG4gICAgdGhpcy5tdXRhdGUgPSB0aGlzLm11dGF0ZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVzZXRTdG9yZSA9IHRoaXMucmVzZXRTdG9yZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMucmVGZXRjaE9ic2VydmFibGVRdWVyaWVzID0gdGhpcy5yZUZldGNoT2JzZXJ2YWJsZVF1ZXJpZXMuYmluZCh0aGlzKTtcblxuICAgIGlmIChjb25uZWN0VG9EZXZUb29scyAmJiB0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0Jykge1xuICAgICAgKHdpbmRvdyBhcyBhbnkpLl9fQVBPTExPX0NMSUVOVF9fID0gdGhpcztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdWdnZXN0IGluc3RhbGxpbmcgdGhlIGRldnRvb2xzIGZvciBkZXZlbG9wZXJzIHdobyBkb24ndCBoYXZlIHRoZW1cbiAgICAgKi9cbiAgICBpZiAoIWhhc1N1Z2dlc3RlZERldnRvb2xzICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIGhhc1N1Z2dlc3RlZERldnRvb2xzID0gdHJ1ZTtcbiAgICAgIGlmIChcbiAgICAgICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgd2luZG93LmRvY3VtZW50ICYmXG4gICAgICAgIHdpbmRvdy50b3AgPT09IHdpbmRvdy5zZWxmICYmXG4gICAgICAgICEod2luZG93IGFzIGFueSkuX19BUE9MTE9fREVWVE9PTFNfR0xPQkFMX0hPT0tfX1xuICAgICAgKSB7XG4gICAgICAgIGNvbnN0IG5hdiA9IHdpbmRvdy5uYXZpZ2F0b3I7XG4gICAgICAgIGNvbnN0IHVhID0gbmF2ICYmIG5hdi51c2VyQWdlbnQ7XG4gICAgICAgIGxldCB1cmw6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHR5cGVvZiB1YSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgIGlmICh1YS5pbmRleE9mKFwiQ2hyb21lL1wiKSA+IC0xKSB7XG4gICAgICAgICAgICB1cmwgPSBcImh0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWlsL1wiICtcbiAgICAgICAgICAgICAgXCJhcG9sbG8tY2xpZW50LWRldmVsb3Blci10L2pka2tua2tiZWJiYXBpbGdvZWNjY2lnbGtmYm1ibmZtXCI7XG4gICAgICAgICAgfSBlbHNlIGlmICh1YS5pbmRleE9mKFwiRmlyZWZveC9cIikgPiAtMSkge1xuICAgICAgICAgICAgdXJsID0gXCJodHRwczovL2FkZG9ucy5tb3ppbGxhLm9yZy9lbi1VUy9maXJlZm94L2FkZG9uL2Fwb2xsby1kZXZlbG9wZXItdG9vbHMvXCI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh1cmwpIHtcbiAgICAgICAgICBpbnZhcmlhbnQubG9nKFxuICAgICAgICAgICAgXCJEb3dubG9hZCB0aGUgQXBvbGxvIERldlRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBcIiArXG4gICAgICAgICAgICAgIFwiZXhwZXJpZW5jZTogXCIgKyB1cmxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy52ZXJzaW9uID0gdmVyc2lvbjtcblxuICAgIHRoaXMubG9jYWxTdGF0ZSA9IG5ldyBMb2NhbFN0YXRlKHtcbiAgICAgIGNhY2hlLFxuICAgICAgY2xpZW50OiB0aGlzLFxuICAgICAgcmVzb2x2ZXJzLFxuICAgICAgZnJhZ21lbnRNYXRjaGVyLFxuICAgIH0pO1xuXG4gICAgdGhpcy5xdWVyeU1hbmFnZXIgPSBuZXcgUXVlcnlNYW5hZ2VyKHtcbiAgICAgIGNhY2hlOiB0aGlzLmNhY2hlLFxuICAgICAgbGluazogdGhpcy5saW5rLFxuICAgICAgcXVlcnlEZWR1cGxpY2F0aW9uLFxuICAgICAgc3NyTW9kZSxcbiAgICAgIGNsaWVudEF3YXJlbmVzczoge1xuICAgICAgICBuYW1lOiBjbGllbnRBd2FyZW5lc3NOYW1lISxcbiAgICAgICAgdmVyc2lvbjogY2xpZW50QXdhcmVuZXNzVmVyc2lvbiEsXG4gICAgICB9LFxuICAgICAgbG9jYWxTdGF0ZTogdGhpcy5sb2NhbFN0YXRlLFxuICAgICAgYXNzdW1lSW1tdXRhYmxlUmVzdWx0cyxcbiAgICAgIG9uQnJvYWRjYXN0OiBjb25uZWN0VG9EZXZUb29scyA/ICgpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuZGV2VG9vbHNIb29rQ2IpIHtcbiAgICAgICAgICB0aGlzLmRldlRvb2xzSG9va0NiKHtcbiAgICAgICAgICAgIGFjdGlvbjoge30sXG4gICAgICAgICAgICBzdGF0ZToge1xuICAgICAgICAgICAgICBxdWVyaWVzOiB0aGlzLnF1ZXJ5TWFuYWdlci5nZXRRdWVyeVN0b3JlKCksXG4gICAgICAgICAgICAgIG11dGF0aW9uczogdGhpcy5xdWVyeU1hbmFnZXIubXV0YXRpb25TdG9yZSB8fCB7fSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkYXRhV2l0aE9wdGltaXN0aWNSZXN1bHRzOiB0aGlzLmNhY2hlLmV4dHJhY3QodHJ1ZSksXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gOiB2b2lkIDAsXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbCB0aGlzIG1ldGhvZCB0byB0ZXJtaW5hdGUgYW55IGFjdGl2ZSBjbGllbnQgcHJvY2Vzc2VzLCBtYWtpbmcgaXQgc2FmZVxuICAgKiB0byBkaXNwb3NlIG9mIHRoaXMgYEFwb2xsb0NsaWVudGAgaW5zdGFuY2UuXG4gICAqL1xuICBwdWJsaWMgc3RvcCgpIHtcbiAgICB0aGlzLnF1ZXJ5TWFuYWdlci5zdG9wKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyB3YXRjaGVzIHRoZSBjYWNoZSBzdG9yZSBvZiB0aGUgcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25zIHNwZWNpZmllZCBhbmRcbiAgICogcmV0dXJucyBhbiB7QGxpbmsgT2JzZXJ2YWJsZVF1ZXJ5fS4gV2UgY2FuIHN1YnNjcmliZSB0byB0aGlzIHtAbGluayBPYnNlcnZhYmxlUXVlcnl9IGFuZFxuICAgKiByZWNlaXZlIHVwZGF0ZWQgcmVzdWx0cyB0aHJvdWdoIGEgR3JhcGhRTCBvYnNlcnZlciB3aGVuIHRoZSBjYWNoZSBzdG9yZSBjaGFuZ2VzLlxuICAgKiA8cCAvPjxwIC8+XG4gICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3QgYW4gaW1wbGVtZW50YXRpb24gb2YgR3JhcGhRTCBzdWJzY3JpcHRpb25zLiBSYXRoZXIsXG4gICAqIGl0IHVzZXMgQXBvbGxvJ3Mgc3RvcmUgaW4gb3JkZXIgdG8gcmVhY3RpdmVseSBkZWxpdmVyIHVwZGF0ZXMgdG8geW91ciBxdWVyeSByZXN1bHRzLlxuICAgKiA8cCAvPjxwIC8+XG4gICAqIEZvciBleGFtcGxlLCBzdXBwb3NlIHlvdSBjYWxsIHdhdGNoUXVlcnkgb24gYSBHcmFwaFFMIHF1ZXJ5IHRoYXQgZmV0Y2hlcyBhIHBlcnNvbidzXG4gICAqIGZpcnN0IGFuZCBsYXN0IG5hbWUgYW5kIHRoaXMgcGVyc29uIGhhcyBhIHBhcnRpY3VsYXIgb2JqZWN0IGlkZW50aWZlciwgcHJvdmlkZWQgYnlcbiAgICogZGF0YUlkRnJvbU9iamVjdC4gTGF0ZXIsIGEgZGlmZmVyZW50IHF1ZXJ5IGZldGNoZXMgdGhhdCBzYW1lIHBlcnNvbidzXG4gICAqIGZpcnN0IGFuZCBsYXN0IG5hbWUgYW5kIHRoZSBmaXJzdCBuYW1lIGhhcyBub3cgY2hhbmdlZC4gVGhlbiwgYW55IG9ic2VydmVycyBhc3NvY2lhdGVkXG4gICAqIHdpdGggdGhlIHJlc3VsdHMgb2YgdGhlIGZpcnN0IHF1ZXJ5IHdpbGwgYmUgdXBkYXRlZCB3aXRoIGEgbmV3IHJlc3VsdCBvYmplY3QuXG4gICAqIDxwIC8+PHAgLz5cbiAgICogTm90ZSB0aGF0IGlmIHRoZSBjYWNoZSBkb2VzIG5vdCBjaGFuZ2UsIHRoZSBzdWJzY3JpYmVyIHdpbGwgKm5vdCogYmUgbm90aWZpZWQuXG4gICAqIDxwIC8+PHAgLz5cbiAgICogU2VlIFtoZXJlXShodHRwczovL21lZGl1bS5jb20vYXBvbGxvLXN0YWNrL3RoZS1jb25jZXB0cy1vZi1ncmFwaHFsLWJjNjhiZDgxOWJlMyMuM21iMGNiY21jKSBmb3JcbiAgICogYSBkZXNjcmlwdGlvbiBvZiBzdG9yZSByZWFjdGl2aXR5LlxuICAgKi9cbiAgcHVibGljIHdhdGNoUXVlcnk8VCA9IGFueSwgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlcz4oXG4gICAgb3B0aW9uczogV2F0Y2hRdWVyeU9wdGlvbnM8VFZhcmlhYmxlcywgVD4sXG4gICk6IE9ic2VydmFibGVRdWVyeTxULCBUVmFyaWFibGVzPiB7XG4gICAgaWYgKHRoaXMuZGVmYXVsdE9wdGlvbnMud2F0Y2hRdWVyeSkge1xuICAgICAgb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmRlZmF1bHRPcHRpb25zLndhdGNoUXVlcnksIG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8vIFhYWCBPdmVyd3JpdGluZyBvcHRpb25zIGlzIHByb2JhYmx5IG5vdCB0aGUgYmVzdCB3YXkgdG8gZG8gdGhpcyBsb25nIHRlcm0uLi5cbiAgICBpZiAoXG4gICAgICB0aGlzLmRpc2FibGVOZXR3b3JrRmV0Y2hlcyAmJlxuICAgICAgKG9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09ICduZXR3b3JrLW9ubHknIHx8XG4gICAgICAgIG9wdGlvbnMuZmV0Y2hQb2xpY3kgPT09ICdjYWNoZS1hbmQtbmV0d29yaycpXG4gICAgKSB7XG4gICAgICBvcHRpb25zID0geyAuLi5vcHRpb25zLCBmZXRjaFBvbGljeTogJ2NhY2hlLWZpcnN0JyB9O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci53YXRjaFF1ZXJ5PFQsIFRWYXJpYWJsZXM+KG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgcmVzb2x2ZXMgYSBzaW5nbGUgcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25zIHNwZWNpZmllZCBhbmRcbiAgICogcmV0dXJucyBhIHtAbGluayBQcm9taXNlfSB3aGljaCBpcyBlaXRoZXIgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0aW5nIGRhdGFcbiAgICogb3IgcmVqZWN0ZWQgd2l0aCBhbiBlcnJvci5cbiAgICpcbiAgICogQHBhcmFtIG9wdGlvbnMgQW4gb2JqZWN0IG9mIHR5cGUge0BsaW5rIFF1ZXJ5T3B0aW9uc30gdGhhdCBhbGxvd3MgdXMgdG9cbiAgICogZGVzY3JpYmUgaG93IHRoaXMgcXVlcnkgc2hvdWxkIGJlIHRyZWF0ZWQgZS5nLiB3aGV0aGVyIGl0IHNob3VsZCBoaXQgdGhlXG4gICAqIHNlcnZlciBhdCBhbGwgb3IganVzdCByZXNvbHZlIGZyb20gdGhlIGNhY2hlLCBldGMuXG4gICAqL1xuICBwdWJsaWMgcXVlcnk8VCA9IGFueSwgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlcz4oXG4gICAgb3B0aW9uczogUXVlcnlPcHRpb25zPFRWYXJpYWJsZXMsIFQ+LFxuICApOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PFQ+PiB7XG4gICAgaWYgKHRoaXMuZGVmYXVsdE9wdGlvbnMucXVlcnkpIHtcbiAgICAgIG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5kZWZhdWx0T3B0aW9ucy5xdWVyeSwgb3B0aW9ucyk7XG4gICAgfVxuXG4gICAgaW52YXJpYW50KFxuICAgICAgKG9wdGlvbnMuZmV0Y2hQb2xpY3kgYXMgV2F0Y2hRdWVyeUZldGNoUG9saWN5KSAhPT0gJ2NhY2hlLWFuZC1uZXR3b3JrJyxcbiAgICAgICdUaGUgY2FjaGUtYW5kLW5ldHdvcmsgZmV0Y2hQb2xpY3kgZG9lcyBub3Qgd29yayB3aXRoIGNsaWVudC5xdWVyeSwgYmVjYXVzZSAnICtcbiAgICAgICdjbGllbnQucXVlcnkgY2FuIG9ubHkgcmV0dXJuIGEgc2luZ2xlIHJlc3VsdC4gUGxlYXNlIHVzZSBjbGllbnQud2F0Y2hRdWVyeSAnICtcbiAgICAgICd0byByZWNlaXZlIG11bHRpcGxlIHJlc3VsdHMgZnJvbSB0aGUgY2FjaGUgYW5kIHRoZSBuZXR3b3JrLCBvciBjb25zaWRlciAnICtcbiAgICAgICd1c2luZyBhIGRpZmZlcmVudCBmZXRjaFBvbGljeSwgc3VjaCBhcyBjYWNoZS1maXJzdCBvciBuZXR3b3JrLW9ubHkuJ1xuICAgICk7XG5cbiAgICBpZiAodGhpcy5kaXNhYmxlTmV0d29ya0ZldGNoZXMgJiYgb3B0aW9ucy5mZXRjaFBvbGljeSA9PT0gJ25ldHdvcmstb25seScpIHtcbiAgICAgIG9wdGlvbnMgPSB7IC4uLm9wdGlvbnMsIGZldGNoUG9saWN5OiAnY2FjaGUtZmlyc3QnIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLnF1ZXJ5PFQsIFRWYXJpYWJsZXM+KG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgcmVzb2x2ZXMgYSBzaW5nbGUgbXV0YXRpb24gYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25zIHNwZWNpZmllZCBhbmQgcmV0dXJucyBhXG4gICAqIHtAbGluayBQcm9taXNlfSB3aGljaCBpcyBlaXRoZXIgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0aW5nIGRhdGEgb3IgcmVqZWN0ZWQgd2l0aCBhblxuICAgKiBlcnJvci5cbiAgICpcbiAgICogSXQgdGFrZXMgb3B0aW9ucyBhcyBhbiBvYmplY3Qgd2l0aCB0aGUgZm9sbG93aW5nIGtleXMgYW5kIHZhbHVlczpcbiAgICovXG4gIHB1YmxpYyBtdXRhdGU8VCA9IGFueSwgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlcz4oXG4gICAgb3B0aW9uczogTXV0YXRpb25PcHRpb25zPFQsIFRWYXJpYWJsZXM+LFxuICApOiBQcm9taXNlPEZldGNoUmVzdWx0PFQ+PiB7XG4gICAgaWYgKHRoaXMuZGVmYXVsdE9wdGlvbnMubXV0YXRlKSB7XG4gICAgICBvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuZGVmYXVsdE9wdGlvbnMubXV0YXRlLCBvcHRpb25zKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLm11dGF0ZTxUPihvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHN1YnNjcmliZXMgdG8gYSBncmFwaHFsIHN1YnNjcmlwdGlvbiBhY2NvcmRpbmcgdG8gdGhlIG9wdGlvbnMgc3BlY2lmaWVkIGFuZCByZXR1cm5zIGFuXG4gICAqIHtAbGluayBPYnNlcnZhYmxlfSB3aGljaCBlaXRoZXIgZW1pdHMgcmVjZWl2ZWQgZGF0YSBvciBhbiBlcnJvci5cbiAgICovXG4gIHB1YmxpYyBzdWJzY3JpYmU8VCA9IGFueSwgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlcz4oXG4gICAgb3B0aW9uczogU3Vic2NyaXB0aW9uT3B0aW9uczxUVmFyaWFibGVzLCBUPixcbiAgKTogT2JzZXJ2YWJsZTxGZXRjaFJlc3VsdDxUPj4ge1xuICAgIHJldHVybiB0aGlzLnF1ZXJ5TWFuYWdlci5zdGFydEdyYXBoUUxTdWJzY3JpcHRpb248VD4ob3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogVHJpZXMgdG8gcmVhZCBzb21lIGRhdGEgZnJvbSB0aGUgc3RvcmUgaW4gdGhlIHNoYXBlIG9mIHRoZSBwcm92aWRlZFxuICAgKiBHcmFwaFFMIHF1ZXJ5IHdpdGhvdXQgbWFraW5nIGEgbmV0d29yayByZXF1ZXN0LiBUaGlzIG1ldGhvZCB3aWxsIHN0YXJ0IGF0XG4gICAqIHRoZSByb290IHF1ZXJ5LiBUbyBzdGFydCBhdCBhIHNwZWNpZmljIGlkIHJldHVybmVkIGJ5IGBkYXRhSWRGcm9tT2JqZWN0YFxuICAgKiB1c2UgYHJlYWRGcmFnbWVudGAuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpbWlzdGljIFNldCB0byBgdHJ1ZWAgdG8gYWxsb3cgYHJlYWRRdWVyeWAgdG8gcmV0dXJuXG4gICAqIG9wdGltaXN0aWMgcmVzdWx0cy4gSXMgYGZhbHNlYCBieSBkZWZhdWx0LlxuICAgKi9cbiAgcHVibGljIHJlYWRRdWVyeTxUID0gYW55LCBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzPihcbiAgICBvcHRpb25zOiBEYXRhUHJveHkuUXVlcnk8VFZhcmlhYmxlcywgVD4sXG4gICAgb3B0aW1pc3RpYzogYm9vbGVhbiA9IGZhbHNlLFxuICApOiBUIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUucmVhZFF1ZXJ5PFQsIFRWYXJpYWJsZXM+KG9wdGlvbnMsIG9wdGltaXN0aWMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyaWVzIHRvIHJlYWQgc29tZSBkYXRhIGZyb20gdGhlIHN0b3JlIGluIHRoZSBzaGFwZSBvZiB0aGUgcHJvdmlkZWRcbiAgICogR3JhcGhRTCBmcmFnbWVudCB3aXRob3V0IG1ha2luZyBhIG5ldHdvcmsgcmVxdWVzdC4gVGhpcyBtZXRob2Qgd2lsbCByZWFkIGFcbiAgICogR3JhcGhRTCBmcmFnbWVudCBmcm9tIGFueSBhcmJpdHJhcnkgaWQgdGhhdCBpcyBjdXJyZW50bHkgY2FjaGVkLCB1bmxpa2VcbiAgICogYHJlYWRRdWVyeWAgd2hpY2ggd2lsbCBvbmx5IHJlYWQgZnJvbSB0aGUgcm9vdCBxdWVyeS5cbiAgICpcbiAgICogWW91IG11c3QgcGFzcyBpbiBhIEdyYXBoUUwgZG9jdW1lbnQgd2l0aCBhIHNpbmdsZSBmcmFnbWVudCBvciBhIGRvY3VtZW50XG4gICAqIHdpdGggbXVsdGlwbGUgZnJhZ21lbnRzIHRoYXQgcmVwcmVzZW50IHdoYXQgeW91IGFyZSByZWFkaW5nLiBJZiB5b3UgcGFzc1xuICAgKiBpbiBhIGRvY3VtZW50IHdpdGggbXVsdGlwbGUgZnJhZ21lbnRzIHRoZW4geW91IG11c3QgYWxzbyBzcGVjaWZ5IGFcbiAgICogYGZyYWdtZW50TmFtZWAuXG4gICAqXG4gICAqIEBwYXJhbSBvcHRpbWlzdGljIFNldCB0byBgdHJ1ZWAgdG8gYWxsb3cgYHJlYWRGcmFnbWVudGAgdG8gcmV0dXJuXG4gICAqIG9wdGltaXN0aWMgcmVzdWx0cy4gSXMgYGZhbHNlYCBieSBkZWZhdWx0LlxuICAgKi9cbiAgcHVibGljIHJlYWRGcmFnbWVudDxUID0gYW55LCBUVmFyaWFibGVzID0gT3BlcmF0aW9uVmFyaWFibGVzPihcbiAgICBvcHRpb25zOiBEYXRhUHJveHkuRnJhZ21lbnQ8VFZhcmlhYmxlcywgVD4sXG4gICAgb3B0aW1pc3RpYzogYm9vbGVhbiA9IGZhbHNlLFxuICApOiBUIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUucmVhZEZyYWdtZW50PFQsIFRWYXJpYWJsZXM+KG9wdGlvbnMsIG9wdGltaXN0aWMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyaXRlcyBzb21lIGRhdGEgaW4gdGhlIHNoYXBlIG9mIHRoZSBwcm92aWRlZCBHcmFwaFFMIHF1ZXJ5IGRpcmVjdGx5IHRvXG4gICAqIHRoZSBzdG9yZS4gVGhpcyBtZXRob2Qgd2lsbCBzdGFydCBhdCB0aGUgcm9vdCBxdWVyeS4gVG8gc3RhcnQgYXQgYVxuICAgKiBzcGVjaWZpYyBpZCByZXR1cm5lZCBieSBgZGF0YUlkRnJvbU9iamVjdGAgdGhlbiB1c2UgYHdyaXRlRnJhZ21lbnRgLlxuICAgKi9cbiAgcHVibGljIHdyaXRlUXVlcnk8VERhdGEgPSBhbnksIFRWYXJpYWJsZXMgPSBPcGVyYXRpb25WYXJpYWJsZXM+KFxuICAgIG9wdGlvbnM6IERhdGFQcm94eS5Xcml0ZVF1ZXJ5T3B0aW9uczxURGF0YSwgVFZhcmlhYmxlcz4sXG4gICk6IHZvaWQge1xuICAgIHRoaXMuY2FjaGUud3JpdGVRdWVyeTxURGF0YSwgVFZhcmlhYmxlcz4ob3B0aW9ucyk7XG4gICAgdGhpcy5xdWVyeU1hbmFnZXIuYnJvYWRjYXN0UXVlcmllcygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyaXRlcyBzb21lIGRhdGEgaW4gdGhlIHNoYXBlIG9mIHRoZSBwcm92aWRlZCBHcmFwaFFMIGZyYWdtZW50IGRpcmVjdGx5IHRvXG4gICAqIHRoZSBzdG9yZS4gVGhpcyBtZXRob2Qgd2lsbCB3cml0ZSB0byBhIEdyYXBoUUwgZnJhZ21lbnQgZnJvbSBhbnkgYXJiaXRyYXJ5XG4gICAqIGlkIHRoYXQgaXMgY3VycmVudGx5IGNhY2hlZCwgdW5saWtlIGB3cml0ZVF1ZXJ5YCB3aGljaCB3aWxsIG9ubHkgd3JpdGVcbiAgICogZnJvbSB0aGUgcm9vdCBxdWVyeS5cbiAgICpcbiAgICogWW91IG11c3QgcGFzcyBpbiBhIEdyYXBoUUwgZG9jdW1lbnQgd2l0aCBhIHNpbmdsZSBmcmFnbWVudCBvciBhIGRvY3VtZW50XG4gICAqIHdpdGggbXVsdGlwbGUgZnJhZ21lbnRzIHRoYXQgcmVwcmVzZW50IHdoYXQgeW91IGFyZSB3cml0aW5nLiBJZiB5b3UgcGFzc1xuICAgKiBpbiBhIGRvY3VtZW50IHdpdGggbXVsdGlwbGUgZnJhZ21lbnRzIHRoZW4geW91IG11c3QgYWxzbyBzcGVjaWZ5IGFcbiAgICogYGZyYWdtZW50TmFtZWAuXG4gICAqL1xuICBwdWJsaWMgd3JpdGVGcmFnbWVudDxURGF0YSA9IGFueSwgVFZhcmlhYmxlcyA9IE9wZXJhdGlvblZhcmlhYmxlcz4oXG4gICAgb3B0aW9uczogRGF0YVByb3h5LldyaXRlRnJhZ21lbnRPcHRpb25zPFREYXRhLCBUVmFyaWFibGVzPixcbiAgKTogdm9pZCB7XG4gICAgdGhpcy5jYWNoZS53cml0ZUZyYWdtZW50PFREYXRhLCBUVmFyaWFibGVzPihvcHRpb25zKTtcbiAgICB0aGlzLnF1ZXJ5TWFuYWdlci5icm9hZGNhc3RRdWVyaWVzKCk7XG4gIH1cblxuICBwdWJsaWMgX19hY3Rpb25Ib29rRm9yRGV2VG9vbHMoY2I6ICgpID0+IGFueSkge1xuICAgIHRoaXMuZGV2VG9vbHNIb29rQ2IgPSBjYjtcbiAgfVxuXG4gIHB1YmxpYyBfX3JlcXVlc3RSYXcocGF5bG9hZDogR3JhcGhRTFJlcXVlc3QpOiBPYnNlcnZhYmxlPEV4ZWN1dGlvblJlc3VsdD4ge1xuICAgIHJldHVybiBleGVjdXRlKHRoaXMubGluaywgcGF5bG9hZCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHlvdXIgZW50aXJlIHN0b3JlIGJ5IGNsZWFyaW5nIG91dCB5b3VyIGNhY2hlIGFuZCB0aGVuIHJlLWV4ZWN1dGluZ1xuICAgKiBhbGwgb2YgeW91ciBhY3RpdmUgcXVlcmllcy4gVGhpcyBtYWtlcyBpdCBzbyB0aGF0IHlvdSBtYXkgZ3VhcmFudGVlIHRoYXRcbiAgICogdGhlcmUgaXMgbm8gZGF0YSBsZWZ0IGluIHlvdXIgc3RvcmUgZnJvbSBhIHRpbWUgYmVmb3JlIHlvdSBjYWxsZWQgdGhpc1xuICAgKiBtZXRob2QuXG4gICAqXG4gICAqIGByZXNldFN0b3JlKClgIGlzIHVzZWZ1bCB3aGVuIHlvdXIgdXNlciBqdXN0IGxvZ2dlZCBvdXQuIFlvdVx1MjAxOXZlIHJlbW92ZWQgdGhlXG4gICAqIHVzZXIgc2Vzc2lvbiwgYW5kIHlvdSBub3cgd2FudCB0byBtYWtlIHN1cmUgdGhhdCBhbnkgcmVmZXJlbmNlcyB0byBkYXRhIHlvdVxuICAgKiBtaWdodCBoYXZlIGZldGNoZWQgd2hpbGUgdGhlIHVzZXIgc2Vzc2lvbiB3YXMgYWN0aXZlIGlzIGdvbmUuXG4gICAqXG4gICAqIEl0IGlzIGltcG9ydGFudCB0byByZW1lbWJlciB0aGF0IGByZXNldFN0b3JlKClgICp3aWxsKiByZWZldGNoIGFueSBhY3RpdmVcbiAgICogcXVlcmllcy4gVGhpcyBtZWFucyB0aGF0IGFueSBjb21wb25lbnRzIHRoYXQgbWlnaHQgYmUgbW91bnRlZCB3aWxsIGV4ZWN1dGVcbiAgICogdGhlaXIgcXVlcmllcyBhZ2FpbiB1c2luZyB5b3VyIG5ldHdvcmsgaW50ZXJmYWNlLiBJZiB5b3UgZG8gbm90IHdhbnQgdG9cbiAgICogcmUtZXhlY3V0ZSBhbnkgcXVlcmllcyB0aGVuIHlvdSBzaG91bGQgbWFrZSBzdXJlIHRvIHN0b3Agd2F0Y2hpbmcgYW55XG4gICAqIGFjdGl2ZSBxdWVyaWVzLlxuICAgKi9cbiAgcHVibGljIHJlc2V0U3RvcmUoKTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxhbnk+W10gfCBudWxsPiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpXG4gICAgICAudGhlbigoKSA9PiB0aGlzLnF1ZXJ5TWFuYWdlci5jbGVhclN0b3JlKCkpXG4gICAgICAudGhlbigoKSA9PiBQcm9taXNlLmFsbCh0aGlzLnJlc2V0U3RvcmVDYWxsYmFja3MubWFwKGZuID0+IGZuKCkpKSlcbiAgICAgIC50aGVuKCgpID0+IHRoaXMucmVGZXRjaE9ic2VydmFibGVRdWVyaWVzKCkpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBhbGwgZGF0YSBmcm9tIHRoZSBzdG9yZS4gVW5saWtlIGByZXNldFN0b3JlYCwgYGNsZWFyU3RvcmVgIHdpbGxcbiAgICogbm90IHJlZmV0Y2ggYW55IGFjdGl2ZSBxdWVyaWVzLlxuICAgKi9cbiAgcHVibGljIGNsZWFyU3RvcmUoKTogUHJvbWlzZTxhbnlbXT4ge1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKVxuICAgICAgLnRoZW4oKCkgPT4gdGhpcy5xdWVyeU1hbmFnZXIuY2xlYXJTdG9yZSgpKVxuICAgICAgLnRoZW4oKCkgPT4gUHJvbWlzZS5hbGwodGhpcy5jbGVhclN0b3JlQ2FsbGJhY2tzLm1hcChmbiA9PiBmbigpKSkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93cyBjYWxsYmFja3MgdG8gYmUgcmVnaXN0ZXJlZCB0aGF0IGFyZSBleGVjdXRlZCB3aGVuIHRoZSBzdG9yZSBpc1xuICAgKiByZXNldC4gYG9uUmVzZXRTdG9yZWAgcmV0dXJucyBhbiB1bnN1YnNjcmliZSBmdW5jdGlvbiB0aGF0IGNhbiBiZSB1c2VkXG4gICAqIHRvIHJlbW92ZSByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICovXG4gIHB1YmxpYyBvblJlc2V0U3RvcmUoY2I6ICgpID0+IFByb21pc2U8YW55Pik6ICgpID0+IHZvaWQge1xuICAgIHRoaXMucmVzZXRTdG9yZUNhbGxiYWNrcy5wdXNoKGNiKTtcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgdGhpcy5yZXNldFN0b3JlQ2FsbGJhY2tzID0gdGhpcy5yZXNldFN0b3JlQ2FsbGJhY2tzLmZpbHRlcihjID0+IGMgIT09IGNiKTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93cyBjYWxsYmFja3MgdG8gYmUgcmVnaXN0ZXJlZCB0aGF0IGFyZSBleGVjdXRlZCB3aGVuIHRoZSBzdG9yZSBpc1xuICAgKiBjbGVhcmVkLiBgb25DbGVhclN0b3JlYCByZXR1cm5zIGFuIHVuc3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWRcbiAgICogdG8gcmVtb3ZlIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgKi9cbiAgcHVibGljIG9uQ2xlYXJTdG9yZShjYjogKCkgPT4gUHJvbWlzZTxhbnk+KTogKCkgPT4gdm9pZCB7XG4gICAgdGhpcy5jbGVhclN0b3JlQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB0aGlzLmNsZWFyU3RvcmVDYWxsYmFja3MgPSB0aGlzLmNsZWFyU3RvcmVDYWxsYmFja3MuZmlsdGVyKGMgPT4gYyAhPT0gY2IpO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogUmVmZXRjaGVzIGFsbCBvZiB5b3VyIGFjdGl2ZSBxdWVyaWVzLlxuICAgKlxuICAgKiBgcmVGZXRjaE9ic2VydmFibGVRdWVyaWVzKClgIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byBicmluZyB0aGUgY2xpZW50IGJhY2sgdG8gcHJvcGVyIHN0YXRlIGluIGNhc2Ugb2YgYSBuZXR3b3JrIG91dGFnZVxuICAgKlxuICAgKiBJdCBpcyBpbXBvcnRhbnQgdG8gcmVtZW1iZXIgdGhhdCBgcmVGZXRjaE9ic2VydmFibGVRdWVyaWVzKClgICp3aWxsKiByZWZldGNoIGFueSBhY3RpdmVcbiAgICogcXVlcmllcy4gVGhpcyBtZWFucyB0aGF0IGFueSBjb21wb25lbnRzIHRoYXQgbWlnaHQgYmUgbW91bnRlZCB3aWxsIGV4ZWN1dGVcbiAgICogdGhlaXIgcXVlcmllcyBhZ2FpbiB1c2luZyB5b3VyIG5ldHdvcmsgaW50ZXJmYWNlLiBJZiB5b3UgZG8gbm90IHdhbnQgdG9cbiAgICogcmUtZXhlY3V0ZSBhbnkgcXVlcmllcyB0aGVuIHlvdSBzaG91bGQgbWFrZSBzdXJlIHRvIHN0b3Agd2F0Y2hpbmcgYW55XG4gICAqIGFjdGl2ZSBxdWVyaWVzLlxuICAgKiBUYWtlcyBvcHRpb25hbCBwYXJhbWV0ZXIgYGluY2x1ZGVTdGFuZGJ5YCB3aGljaCB3aWxsIGluY2x1ZGUgcXVlcmllcyBpbiBzdGFuZGJ5LW1vZGUgd2hlbiByZWZldGNoaW5nLlxuICAgKi9cbiAgcHVibGljIHJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcyhcbiAgICBpbmNsdWRlU3RhbmRieT86IGJvb2xlYW4sXG4gICk6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8YW55PltdPiB7XG4gICAgcmV0dXJuIHRoaXMucXVlcnlNYW5hZ2VyLnJlRmV0Y2hPYnNlcnZhYmxlUXVlcmllcyhpbmNsdWRlU3RhbmRieSk7XG4gIH1cblxuICAvKipcbiAgICogRXhwb3NlcyB0aGUgY2FjaGUncyBjb21wbGV0ZSBzdGF0ZSwgaW4gYSBzZXJpYWxpemFibGUgZm9ybWF0IGZvciBsYXRlciByZXN0b3JhdGlvbi5cbiAgICovXG4gIHB1YmxpYyBleHRyYWN0KG9wdGltaXN0aWM/OiBib29sZWFuKTogVENhY2hlU2hhcGUge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmV4dHJhY3Qob3B0aW1pc3RpYyk7XG4gIH1cblxuICAvKipcbiAgICogUmVwbGFjZXMgZXhpc3Rpbmcgc3RhdGUgaW4gdGhlIGNhY2hlIChpZiBhbnkpIHdpdGggdGhlIHZhbHVlcyBleHByZXNzZWQgYnlcbiAgICogYHNlcmlhbGl6ZWRTdGF0ZWAuXG4gICAqXG4gICAqIENhbGxlZCB3aGVuIGh5ZHJhdGluZyBhIGNhY2hlIChzZXJ2ZXIgc2lkZSByZW5kZXJpbmcsIG9yIG9mZmxpbmUgc3RvcmFnZSksXG4gICAqIGFuZCBhbHNvIChwb3RlbnRpYWxseSkgZHVyaW5nIGhvdCByZWxvYWRzLlxuICAgKi9cbiAgcHVibGljIHJlc3RvcmUoc2VyaWFsaXplZFN0YXRlOiBUQ2FjaGVTaGFwZSk6IEFwb2xsb0NhY2hlPFRDYWNoZVNoYXBlPiB7XG4gICAgcmV0dXJuIHRoaXMuY2FjaGUucmVzdG9yZShzZXJpYWxpemVkU3RhdGUpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhZGRpdGlvbmFsIGxvY2FsIHJlc29sdmVycy5cbiAgICovXG4gIHB1YmxpYyBhZGRSZXNvbHZlcnMocmVzb2x2ZXJzOiBSZXNvbHZlcnMgfCBSZXNvbHZlcnNbXSkge1xuICAgIHRoaXMubG9jYWxTdGF0ZS5hZGRSZXNvbHZlcnMocmVzb2x2ZXJzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgKG92ZXJyaWRlIGV4aXN0aW5nKSBsb2NhbCByZXNvbHZlcnMuXG4gICAqL1xuICBwdWJsaWMgc2V0UmVzb2x2ZXJzKHJlc29sdmVyczogUmVzb2x2ZXJzIHwgUmVzb2x2ZXJzW10pIHtcbiAgICB0aGlzLmxvY2FsU3RhdGUuc2V0UmVzb2x2ZXJzKHJlc29sdmVycyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGFsbCByZWdpc3RlcmVkIGxvY2FsIHJlc29sdmVycy5cbiAgICovXG4gIHB1YmxpYyBnZXRSZXNvbHZlcnMoKSB7XG4gICAgcmV0dXJuIHRoaXMubG9jYWxTdGF0ZS5nZXRSZXNvbHZlcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgYSBjdXN0b20gbG9jYWwgc3RhdGUgZnJhZ21lbnQgbWF0Y2hlci5cbiAgICovXG4gIHB1YmxpYyBzZXRMb2NhbFN0YXRlRnJhZ21lbnRNYXRjaGVyKGZyYWdtZW50TWF0Y2hlcjogRnJhZ21lbnRNYXRjaGVyKSB7XG4gICAgdGhpcy5sb2NhbFN0YXRlLnNldEZyYWdtZW50TWF0Y2hlcihmcmFnbWVudE1hdGNoZXIpO1xuICB9XG5cbiAgLyoqXG4gICAqIERlZmluZSBhIG5ldyBBcG9sbG9MaW5rIChvciBsaW5rIGNoYWluKSB0aGF0IEFwb2xsbyBDbGllbnQgd2lsbCB1c2UuXG4gICAqL1xuICBwdWJsaWMgc2V0TGluayhuZXdMaW5rOiBBcG9sbG9MaW5rKSB7XG4gICAgdGhpcy5saW5rID0gdGhpcy5xdWVyeU1hbmFnZXIubGluayA9IG5ld0xpbms7XG4gIH1cbn1cbiIsICJpbXBvcnQgdHNsaWIgZnJvbSAnLi4vdHNsaWIuanMnO1xyXG5jb25zdCB7XHJcbiAgICBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbixcclxuICAgIF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtLFxyXG4gICAgX19tZXRhZGF0YSxcclxuICAgIF9fYXdhaXRlcixcclxuICAgIF9fZ2VuZXJhdG9yLFxyXG4gICAgX19leHBvcnRTdGFyLFxyXG4gICAgX19jcmVhdGVCaW5kaW5nLFxyXG4gICAgX192YWx1ZXMsXHJcbiAgICBfX3JlYWQsXHJcbiAgICBfX3NwcmVhZCxcclxuICAgIF9fc3ByZWFkQXJyYXlzLFxyXG4gICAgX19hd2FpdCxcclxuICAgIF9fYXN5bmNHZW5lcmF0b3IsXHJcbiAgICBfX2FzeW5jRGVsZWdhdG9yLFxyXG4gICAgX19hc3luY1ZhbHVlcyxcclxuICAgIF9fbWFrZVRlbXBsYXRlT2JqZWN0LFxyXG4gICAgX19pbXBvcnRTdGFyLFxyXG4gICAgX19pbXBvcnREZWZhdWx0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXHJcbn0gPSB0c2xpYjtcclxuZXhwb3J0IHtcclxuICAgIF9fZXh0ZW5kcyxcclxuICAgIF9fYXNzaWduLFxyXG4gICAgX19yZXN0LFxyXG4gICAgX19kZWNvcmF0ZSxcclxuICAgIF9fcGFyYW0sXHJcbiAgICBfX21ldGFkYXRhLFxyXG4gICAgX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3IsXHJcbiAgICBfX2V4cG9ydFN0YXIsXHJcbiAgICBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZCxcclxuICAgIF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXMsXHJcbiAgICBfX2F3YWl0LFxyXG4gICAgX19hc3luY0dlbmVyYXRvcixcclxuICAgIF9fYXN5bmNEZWxlZ2F0b3IsXHJcbiAgICBfX2FzeW5jVmFsdWVzLFxyXG4gICAgX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXIsXHJcbiAgICBfX2ltcG9ydERlZmF1bHQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZFNldCxcclxufTtcclxuIiwgbnVsbCwgIi8qIENvcmUgKi9cblxuZXhwb3J0IHtcbiAgQXBvbGxvQ2xpZW50LFxuICBBcG9sbG9DbGllbnRPcHRpb25zLFxuICBEZWZhdWx0T3B0aW9ucyxcbiAgbWVyZ2VPcHRpb25zLFxufSBmcm9tICcuL0Fwb2xsb0NsaWVudCc7XG5leHBvcnQge1xuICBPYnNlcnZhYmxlUXVlcnksXG4gIEZldGNoTW9yZU9wdGlvbnMsXG4gIFVwZGF0ZVF1ZXJ5T3B0aW9ucyxcbn0gZnJvbSAnLi9PYnNlcnZhYmxlUXVlcnknO1xuZXhwb3J0IHtcbiAgUXVlcnlPcHRpb25zLFxuICBXYXRjaFF1ZXJ5T3B0aW9ucyxcbiAgTXV0YXRpb25PcHRpb25zLFxuICBTdWJzY3JpcHRpb25PcHRpb25zLFxuICBGZXRjaFBvbGljeSxcbiAgV2F0Y2hRdWVyeUZldGNoUG9saWN5LFxuICBFcnJvclBvbGljeSxcbiAgRmV0Y2hNb3JlUXVlcnlPcHRpb25zLFxuICBTdWJzY3JpYmVUb01vcmVPcHRpb25zLFxuICBNdXRhdGlvblVwZGF0ZXJGbixcbn0gZnJvbSAnLi93YXRjaFF1ZXJ5T3B0aW9ucyc7XG5leHBvcnQgeyBOZXR3b3JrU3RhdHVzIH0gZnJvbSAnLi9uZXR3b3JrU3RhdHVzJztcbmV4cG9ydCAqIGZyb20gJy4vdHlwZXMnO1xuZXhwb3J0IHtcbiAgUmVzb2x2ZXIsXG4gIEZyYWdtZW50TWF0Y2hlcixcbn0gZnJvbSAnLi9Mb2NhbFN0YXRlJztcbmV4cG9ydCB7IGlzQXBvbGxvRXJyb3IsIEFwb2xsb0Vycm9yIH0gZnJvbSAnLi4vZXJyb3JzJztcblxuLyogQ2FjaGUgKi9cblxuZXhwb3J0IHtcbiAgLy8gQWxsIHRoZSBleHBvcnRzICh0eXBlcyBhbmQgdmFsdWVzKSBmcm9tIC4uL2NhY2hlLCBtaW51cyBjYWNoZVNsb3QsXG4gIC8vIHdoaWNoIHdlIHdhbnQgdG8ga2VlcCBzZW1pLXByaXZhdGUuXG4gIENhY2hlLFxuICBBcG9sbG9DYWNoZSxcbiAgVHJhbnNhY3Rpb24sXG4gIERhdGFQcm94eSxcbiAgSW5NZW1vcnlDYWNoZSxcbiAgSW5NZW1vcnlDYWNoZUNvbmZpZyxcbiAgTWlzc2luZ0ZpZWxkRXJyb3IsXG4gIGRlZmF1bHREYXRhSWRGcm9tT2JqZWN0LFxuICBSZWFjdGl2ZVZhcixcbiAgbWFrZVZhcixcbiAgVHlwZVBvbGljaWVzLFxuICBUeXBlUG9saWN5LFxuICBGaWVsZFBvbGljeSxcbiAgRmllbGRSZWFkRnVuY3Rpb24sXG4gIEZpZWxkTWVyZ2VGdW5jdGlvbixcbiAgRmllbGRGdW5jdGlvbk9wdGlvbnMsXG4gIFBvc3NpYmxlVHlwZXNNYXAsXG59IGZyb20gJy4uL2NhY2hlJztcblxuZXhwb3J0ICogZnJvbSAnLi4vY2FjaGUvaW5tZW1vcnkvdHlwZXMnO1xuXG4vKiBMaW5rICovXG5cbmV4cG9ydCAqIGZyb20gJy4uL2xpbmsvY29yZSc7XG5leHBvcnQgKiBmcm9tICcuLi9saW5rL2h0dHAnO1xuZXhwb3J0IHtcbiAgZnJvbUVycm9yLFxuICB0b1Byb21pc2UsXG4gIGZyb21Qcm9taXNlLFxuICBTZXJ2ZXJFcnJvcixcbiAgdGhyb3dTZXJ2ZXJFcnJvcixcbn0gZnJvbSAnLi4vbGluay91dGlscyc7XG5cbi8qIFV0aWxpdGllcyAqL1xuXG5leHBvcnQge1xuICBPYnNlcnZhYmxlLFxuICBPYnNlcnZlcixcbiAgT2JzZXJ2YWJsZVN1YnNjcmlwdGlvbixcbiAgUmVmZXJlbmNlLFxuICBpc1JlZmVyZW5jZSxcbiAgbWFrZVJlZmVyZW5jZSxcbiAgU3RvcmVPYmplY3QsXG59IGZyb20gJy4uL3V0aWxpdGllcyc7XG5cbi8qIFN1cHBvcnRpbmcgKi9cblxuLy8gVGhlIHZlcmJvc2l0eSBvZiBpbnZhcmlhbnQue2xvZyx3YXJuLGVycm9yfSBjYW4gYmUgY29udHJvbGxlZCBnbG9iYWxseVxuLy8gKGZvciBhbnlvbmUgdXNpbmcgdGhlIHNhbWUgdHMtaW52YXJpYW50IHBhY2thZ2UpIGJ5IHBhc3NpbmcgXCJsb2dcIixcbi8vIFwid2FyblwiLCBcImVycm9yXCIsIG9yIFwic2lsZW50XCIgdG8gc2V0VmVyYm9zaXR5IChcImxvZ1wiIGlzIHRoZSBkZWZhdWx0KS5cbi8vIE5vdGUgdGhhdCBhbGwgaW52YXJpYW50LiogbG9nZ2luZyBpcyBoaWRkZW4gaW4gcHJvZHVjdGlvbi5cbmltcG9ydCB7IHNldFZlcmJvc2l0eSB9IGZyb20gXCJ0cy1pbnZhcmlhbnRcIjtcbmV4cG9ydCB7IHNldFZlcmJvc2l0eSBhcyBzZXRMb2dWZXJib3NpdHkgfVxuc2V0VmVyYm9zaXR5KFwibG9nXCIpO1xuXG4vLyBOb3RlIHRoYXQgaW1wb3J0aW5nIGBncWxgIGJ5IGl0c2VsZiwgdGhlbiBkZXN0cnVjdHVyaW5nXG4vLyBhZGRpdGlvbmFsIHByb3BlcnRpZXMgc2VwYXJhdGVseSBiZWZvcmUgZXhwb3J0aW5nLCBpcyBpbnRlbnRpb25hbC5cbi8vIER1ZSB0byB0aGUgd2F5IHRoZSBgZ3JhcGhxbC10YWdgIGxpYnJhcnkgaXMgc2V0dXAsIGNlcnRhaW4gYnVuZGxlcnNcbi8vIGNhbid0IGZpbmQgdGhlIHByb3BlcnRpZXMgYWRkZWQgdG8gdGhlIGV4cG9ydGVkIGBncWxgIGZ1bmN0aW9uIHdpdGhvdXRcbi8vIGFkZGl0aW9uYWwgZ3VpZGFuY2UgKGUuZy4gUm9sbHVwIC0gc2VlXG4vLyBodHRwczovL3JvbGx1cGpzLm9yZy9ndWlkZS9lbi8jZXJyb3ItbmFtZS1pcy1ub3QtZXhwb3J0ZWQtYnktbW9kdWxlKS5cbi8vIEluc3RlYWQgb2YgaGF2aW5nIHBlb3BsZSB0aGF0IGFyZSB1c2luZyBidW5kbGVycyB3aXRoIGBAYXBvbGxvL2NsaWVudGAgYWRkXG4vLyBleHRyYSBidW5kbGVyIGNvbmZpZyB0byBoZWxwIGBncmFwaHFsLXRhZ2AgZXhwb3J0cyBiZSBmb3VuZCAod2hpY2ggd291bGQgYmVcbi8vIGF3a3dhcmQgc2luY2UgdGhleSBhcmVuJ3QgaW1wb3J0aW5nIGBncmFwaHFsLXRhZ2AgdGhlbXNlbHZlcyksIHRoaXNcbi8vIHdvcmthcm91bmQgb2YgcHVsbGluZyB0aGUgZXh0cmEgcHJvcGVydGllcyBvZmYgdGhlIGBncWxgIGZ1bmN0aW9uLFxuLy8gdGhlbiByZS1leHBvcnRpbmcgdGhlbSBzZXBhcmF0ZWx5LCBoZWxwcyBrZWVwcyBidW5kbGVycyBoYXBweSB3aXRob3V0IGFueVxuLy8gYWRkaXRpb25hbCBjb25maWcgY2hhbmdlcy5cbmltcG9ydCBncWwgZnJvbSAnZ3JhcGhxbC10YWcnO1xuZXhwb3J0IGNvbnN0IHtcbiAgcmVzZXRDYWNoZXMsXG4gIGRpc2FibGVGcmFnbWVudFdhcm5pbmdzLFxuICBlbmFibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcyxcbiAgZGlzYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzXG59ID0gZ3FsO1xuZXhwb3J0IHsgZ3FsIH07XG4iLCAiY29uc3QgYXBwbGllZENsYXNzTWl4aW5zID0gbmV3IFdlYWtNYXAoKTtcblxuLyoqIFZlZmlmeSBpZiB0aGUgTWl4aW4gd2FzIHByZXZpb3VzbHkgYXBwbHllZFxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG1peGluICAgICAgTWl4aW4gYmVpbmcgYXBwbHllZFxuICogQHBhcmFtIHtvYmplY3R9IHN1cGVyQ2xhc3MgICBDbGFzcyByZWNlaXZpbmcgdGhlIG5ldyBtaXhpblxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIHdhc01peGluUHJldmlvdXNseUFwcGxpZWQobWl4aW4sIHN1cGVyQ2xhc3MpIHtcbiAgbGV0IGtsYXNzID0gc3VwZXJDbGFzcztcbiAgd2hpbGUgKGtsYXNzKSB7XG4gICAgaWYgKGFwcGxpZWRDbGFzc01peGlucy5nZXQoa2xhc3MpID09PSBtaXhpbikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGtsYXNzID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGtsYXNzKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKiBBcHBseSBlYWNoIG1peGluIGluIHRoZSBjaGFpbiB0byBtYWtlIHN1cmUgdGhleSBhcmUgbm90IGFwcGxpZWQgbW9yZSB0aGFuIG9uY2UgdG8gdGhlIGZpbmFsIGNsYXNzLlxuICogQGV4cG9ydFxuICogQHBhcmFtIHtmdW5jdGlvbn0gbWl4aW4gICAgICBNaXhpbiB0byBiZSBhcHBseWVkXG4gKiBAcmV0dXJucyB7b2JqZWN0fSAgICAgICAgICAgIE1peGVkIGNsYXNzIHdpdGggbWl4aW4gYXBwbGllZFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGVkdXBlTWl4aW4obWl4aW4pIHtcbiAgcmV0dXJuIHN1cGVyQ2xhc3MgPT4ge1xuICAgIGlmICh3YXNNaXhpblByZXZpb3VzbHlBcHBsaWVkKG1peGluLCBzdXBlckNsYXNzKSkge1xuICAgICAgcmV0dXJuIHN1cGVyQ2xhc3M7XG4gICAgfVxuICAgIGNvbnN0IG1peGVkQ2xhc3MgPSBtaXhpbihzdXBlckNsYXNzKTtcbiAgICBhcHBsaWVkQ2xhc3NNaXhpbnMuc2V0KG1peGVkQ2xhc3MsIG1peGluKTtcbiAgICByZXR1cm4gbWl4ZWRDbGFzcztcbiAgfTtcbn1cbiIsICJpbXBvcnQgdHlwZSB7IERvY3VtZW50Tm9kZSB9IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xuXG4vKipcbiAqIFZhbGlkYXRlcyBhIGdyYXBocWwgZG9jdW1lbnQgbm9kZS5cbiAqXG4gKiBgYGBoYXNrZWxsXG4gKiBpc1ZhbGlkR3FsIDo6IERvY3VtZW50Tm9kZSBhID0+IGEgLT4gQm9vbFxuICogYGBgXG4gKiBAcGFyYW0gZG9jIE1heWJlIGEgRG9jdW1lbnROb2RlXG4gKiBAcmV0dXJuIFdoZXRoZXIgdGhlIGFyZ3VtZW50IGlzIGEgRG9jdW1lbnROb2RlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbGlkR3FsKGRvYzogYW55KTogZG9jIGlzIERvY3VtZW50Tm9kZSB7XG4gIHJldHVybiAhIShcbiAgICBkb2MgJiZcbiAgICB0eXBlb2YgZG9jID09PSAnb2JqZWN0JyAmJlxuICAgICdraW5kJyBpbiBkb2MgJiZcbiAgICAnZGVmaW5pdGlvbnMnIGluIGRvY1xuICApO1xufVxuIiwgImltcG9ydCB0eXBlIHsgQXBvbGxvRWxlbWVudEludGVyZmFjZSB9IGZyb20gJ0BhcG9sbG8tZWxlbWVudHMvaW50ZXJmYWNlcy9hcG9sbG8tZWxlbWVudCc7XG5pbXBvcnQgdHlwZSB7IERvY3VtZW50Tm9kZSB9IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xuXG5pbnRlcmZhY2UgUHJvcGVydHlFZmZlY3RPcHRpb25zPEMgZXh0ZW5kcyBBcG9sbG9FbGVtZW50SW50ZXJmYWNlPiB7XG4gIC8qKiBOYW1lIG9mIHRoZSBwcm9wZXJ0eS4gKi9cbiAgbmFtZToga2V5b2YgQyxcbiAgLyoqIFRoZSBwcm9wZXJ0eSdzIGluaXRpYWwgdmFsdWUuICovXG4gIGluaXQ/OiBDW2tleW9mIENdO1xuICAvKipcbiAgICogU2lkZSBlZmZlY3QgdG8gcnVuIHdoZW4gc2V0dGluZyB0aGUgcHJvcGVydHkuXG4gICAqXG4gICAqIEB0aGlzIGJvdW5kIHRvIHRoZSBlbGVtZW50IGluc3RhbmNlLlxuICAgKiBAcGFyYW0gdmFsdWUgVGhlIG5ldyB2YWx1ZS5cbiAgICovXG4gIG9uU2V0KHRoaXM6IEMsIHZhbHVlOiBDW2tleW9mIENdKTogdm9pZDtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFByb3BlcnR5RGVzY3JpcHRvcmAgZm9yIGEgYm9vbGVhbiBwcm9wZXJ0eSB0aGF0IHJlZmxlY3RzIHRvIGEgYm9vbGVhbiBhdHRyaWJ1dGVcbiAqXG4gKiBAcGFyYW0gIGF0dHIgQXR0cmlidXRlIG5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJvb2xlYW5BdHRyPEMgZXh0ZW5kcyBBcG9sbG9FbGVtZW50SW50ZXJmYWNlPihhdHRyOiBzdHJpbmcpOiBQcm9wZXJ0eURlc2NyaXB0b3Ige1xuICByZXR1cm4ge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXG4gICAgZ2V0KHRoaXM6IEMpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShhdHRyKTtcbiAgICB9LFxuXG4gICAgc2V0KHRoaXM6IEMsIHY6IGJvb2xlYW4pIHtcbiAgICAgIGlmICh2KVxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyLCAnJyk7XG4gICAgICBlbHNlXG4gICAgICAgIHRoaXMucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgIH0sXG5cbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFByb3BlcnR5RGVzY3JpcHRvcmAgZm9yIGEgcHJvcGVydHkgdGhhdCBydW5zIGEgZ2l2ZW4gc2lkZSBlZmZlY3Qgd2hlbiBzZXQuXG4gKlxuICogQHBhcmFtIG9wdGlvbnMgQ29uZmlndXJhdGlvbiBmb3IgdGhlIHByb3BlcnR5OiBpdCdzIG5hbWUsIGluaXRpYWwgdmFsdWUsIGFuZCBzZXR0ZXIgc2lkZS1lZmZlY3QuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBlZmZlY3Q8QyBleHRlbmRzIEFwb2xsb0VsZW1lbnRJbnRlcmZhY2U+KFxuICBvcHRpb25zOiBQcm9wZXJ0eUVmZmVjdE9wdGlvbnM8Qz5cbik6IFByb3BlcnR5RGVzY3JpcHRvciB7XG4gIGNvbnN0IHsgbmFtZSwgaW5pdCwgb25TZXQgfSA9IG9wdGlvbnM7XG4gIGNvbnN0IHByaXZhdGVOYW1lID0gYF8ke25hbWV9YCBhcyB0eXBlb2YgbmFtZTsgLy8gbGl0dGxlIHdoaXRlIGxpZXNcbiAgcmV0dXJuIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgIGdldCh0aGlzOiBDKSB7XG4gICAgICByZXR1cm4gdGhpc1twcml2YXRlTmFtZV0gPz8gaW5pdDtcbiAgICB9LFxuXG4gICAgc2V0KHRoaXM6IEMsIHZhbHVlKSB7XG4gICAgICB0aGlzW3ByaXZhdGVOYW1lXSA9IHZhbHVlO1xuICAgICAgb25TZXQuY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgfSxcbiAgfTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgYFByb3BlcnR5RGVzY3JpcHRvcmAgZm9yIGFuIGBBcG9sbG9FbGVtZW50YCdzIGBkb2N1bWVudGAgcHJvcGVydHkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBncWxEb2N1bWVudDxDIGV4dGVuZHMgQXBvbGxvRWxlbWVudEludGVyZmFjZT4oKTogUHJvcGVydHlEZXNjcmlwdG9yIHtcbiAgcmV0dXJuIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcblxuICAgIGdldCh0aGlzOiBDKTogRG9jdW1lbnROb2RlIHwgbnVsbCB7XG4gICAgICByZXR1cm4gdGhpcy5kb2N1bWVudDtcbiAgICB9LFxuXG4gICAgc2V0KHRoaXM6IEMsIGRvY3VtZW50KSB7XG4gICAgICB0aGlzLmRvY3VtZW50ID0gZG9jdW1lbnQ7XG4gICAgfSxcblxuICB9O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUHJvcGVydHlEZXNjcmlwdG9yYCBmb3IgYSB3cml0YWJsZSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0gIGluaXQgVGhlIHByb3BlcnR5J3MgaW5pdGlhbCB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHdyaXRhYmxlKGluaXQ/OiB1bmtub3duKTogUHJvcGVydHlEZXNjcmlwdG9yIHtcbiAgcmV0dXJuIHtcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICB2YWx1ZTogaW5pdCxcbiAgfTtcbn1cbiIsICIvKiogU3BsaXRzIGEgc3RyaW5nIGJ5IGAsYCB0aGVuIHRyaW1zIGVhY2ggb2YgdGhlIHJlc3VsdHMgKi9cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdENvbW1hc0FuZFRyaW0odmFsdWU6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgcmV0dXJuIHZhbHVlXG4gICAgLnNwbGl0KCcsJylcbiAgICAubWFwKHggPT4geC50cmltKCkpXG4gICAgLmZpbHRlcihCb29sZWFuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHN0cmlwSFRNTENvbW1lbnRzKHN0cmluZzogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlPy4oLzwhLS0tLT4vZywgJycpO1xufVxuXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHkoeDogb2JqZWN0IHwgQXJyYXk8dW5rbm93bj4pOiBib29sZWFuIHtcbiAgY29uc3QgeyBsZW5ndGggfSA9IEFycmF5LmlzQXJyYXkoeCkgPyB4IDogT2JqZWN0LmtleXMoeCk7XG4gIHJldHVybiAhbGVuZ3RoO1xufVxuIiwgImltcG9ydCB0eXBlIHtcbiAgQXBvbGxvQ2xpZW50LFxuICBBcG9sbG9FcnJvcixcbiAgRG9jdW1lbnROb2RlLFxuICBOb3JtYWxpemVkQ2FjaGVPYmplY3QsXG4gIFR5cGVkRG9jdW1lbnROb2RlLFxufSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcblxuaW1wb3J0IHR5cGUge1xuICBBcG9sbG9FbGVtZW50RWxlbWVudCxcbiAgQXBvbGxvRWxlbWVudEludGVyZmFjZSxcbiAgQ29uc3RydWN0b3IsXG4gIEdyYXBoUUxFcnJvcixcbn0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9pbnRlcmZhY2VzJztcblxuaW1wb3J0IHsgZ3FsIH0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZSc7XG5cbmltcG9ydCB7IGlzVmFsaWRHcWwgfSBmcm9tICdAYXBvbGxvLWVsZW1lbnRzL2xpYi9pcy12YWxpZC1ncWwnO1xuaW1wb3J0IHsgZGVkdXBlTWl4aW4gfSBmcm9tICdAb3Blbi13Yy9kZWR1cGUtbWl4aW4nO1xuaW1wb3J0IHsgZWZmZWN0LCB3cml0YWJsZSB9IGZyb20gJ0BhcG9sbG8tZWxlbWVudHMvbGliL2Rlc2NyaXB0b3JzJztcbmltcG9ydCB7IHN0cmlwSFRNTENvbW1lbnRzIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9saWIvaGVscGVycyc7XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIFdpbmRvd0V2ZW50TWFwIHtcbiAgICAnYXBvbGxvLWVsZW1lbnQtZGlzY29ubmVjdGVkJzogQXBvbGxvRWxlbWVudEV2ZW50O1xuICB9XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudEV2ZW50TWFwIHtcbiAgICAnYXBvbGxvLWVsZW1lbnQtY29ubmVjdGVkJzogQXBvbGxvRWxlbWVudEV2ZW50O1xuICAgICdhcG9sbG8tZWxlbWVudC1kaXNjb25uZWN0ZWQnOiBBcG9sbG9FbGVtZW50RXZlbnQ7XG4gICAgJ2Fwb2xsby1lcnJvcic6IEN1c3RvbUV2ZW50PEFwb2xsb0Vycm9yPjtcbiAgfVxufVxuXG5jb25zdCBTQ1JJUFRfU0VMRUNUT1IgPVxuICAnc2NyaXB0W3R5cGU9XCJhcHBsaWNhdGlvbi9ncmFwaHFsXCJdJztcblxuZnVuY3Rpb24gY2FwaXRhbChzdHJpbmc6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBgJHtzdHJpbmcuc3Vic3RyKDAsIDEpLnRvVXBwZXJDYXNlKCl9JHtzdHJpbmcuc3Vic3RyKDEpfWA7XG59XG5cbi8qKlxuICogRmlyZWQgd2hlbiBhbiBlbGVtZW50IGNvbm5lY3RzIHRvIG9yIGRpc2Nvbm5lY3RzIGZyb20gdGhlIERPTVxuICovXG5leHBvcnQgY2xhc3MgQXBvbGxvRWxlbWVudEV2ZW50PFQgPSBBcG9sbG9FbGVtZW50RWxlbWVudD4gZXh0ZW5kcyBDdXN0b21FdmVudDxUPiB7XG4gIGRlY2xhcmUgdHlwZTogJ2Fwb2xsby1lbGVtZW50LWNvbm5lY3RlZCd8J2Fwb2xsby1lbGVtZW50LWRpc2Nvbm5lY3RlZCc7XG5cbiAgY29uc3RydWN0b3IodHlwZTogJ2Fwb2xsby1lbGVtZW50LWNvbm5lY3RlZCd8J2Fwb2xsby1lbGVtZW50LWRpc2Nvbm5lY3RlZCcsIGRldGFpbDogVCkge1xuICAgIHN1cGVyKHR5cGUsIHtcbiAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICBjb21wb3NlZDogdHJ1ZSxcbiAgICAgIGRldGFpbCxcbiAgICB9KTtcbiAgfVxufVxuXG50eXBlIE1peGluSW5zdGFuY2UgPVxuICBDb25zdHJ1Y3RvcjxBcG9sbG9FbGVtZW50SW50ZXJmYWNlPiAmXG4gIFBpY2s8dHlwZW9mIEFwb2xsb0VsZW1lbnRJbnRlcmZhY2UsIGtleW9mIHR5cGVvZiBBcG9sbG9FbGVtZW50SW50ZXJmYWNlPiAmIHtcbiAgICBvYnNlcnZlZEF0dHJpYnV0ZXM/OiBzdHJpbmdbXTtcbiAgfTtcblxuZnVuY3Rpb24gQXBvbGxvRWxlbWVudE1peGluSW1wbGVtZW50YXRpb248QiBleHRlbmRzIENvbnN0cnVjdG9yPihzdXBlcmNsYXNzOiBCKTogTWl4aW5JbnN0YW5jZSAmIEIge1xuICBhYnN0cmFjdCBjbGFzcyBBcG9sbG9FbGVtZW50IGV4dGVuZHMgc3VwZXJjbGFzcyBpbXBsZW1lbnRzIE9taXQ8QXBvbGxvRWxlbWVudEludGVyZmFjZSwgJ21vJz4ge1xuICAgIHN0YXRpYyBkb2N1bWVudFR5cGU6ICdkb2N1bWVudCd8J3F1ZXJ5J3wnbXV0YXRpb24nfCdzdWJzY3JpcHRpb24nID0gJ2RvY3VtZW50JztcblxuICAgIC8qKiBUaGUgQXBvbGxvIENsaWVudCBpbnN0YW5jZS4gKi9cbiAgICBjbGllbnQ6IEFwb2xsb0NsaWVudDxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+IHwgbnVsbCA9IHdpbmRvdy5fX0FQT0xMT19DTElFTlRfXyA/PyBudWxsOyAvKiBjOCBpZ25vcmUgbmV4dCAqLyAvLyBjb3ZlcmVkXG5cbiAgICAvKiogTGF0ZXN0IGRhdGEgKi9cbiAgICBkZWNsYXJlIGFic3RyYWN0IGRhdGE6IHVua25vd24gfCBudWxsO1xuXG4gICAgLyoqXG4gICAgICogQW4gb2JqZWN0IHRoYXQgbWFwcyBmcm9tIHRoZSBuYW1lIG9mIGEgdmFyaWFibGUgYXMgdXNlZCBpbiB0aGUgb3BlcmF0aW9uJ3MgR3JhcGhRTCBkb2N1bWVudCB0byB0aGF0IHZhcmlhYmxlJ3MgdmFsdWUuXG4gICAgICovXG4gICAgZGVjbGFyZSBhYnN0cmFjdCB2YXJpYWJsZXM6IHVua25vd24gfCBudWxsO1xuXG4gICAgLyoqIExhdGVzdCBlcnJvci4gKi9cbiAgICBkZWNsYXJlIGVycm9yOiBFcnJvciB8IEFwb2xsb0Vycm9yIHwgbnVsbDtcblxuICAgIC8qKiBMYXRlc3QgZXJyb3JzLiAqL1xuICAgIGRlY2xhcmUgZXJyb3JzOiByZWFkb25seSBHcmFwaFFMRXJyb3JbXSB8IG51bGw7XG5cbiAgICAvKiogV2hldGhlciBhIHJlcXVlc3QgaXMgaW4tZmxpZ2h0LiAqL1xuICAgIGRlY2xhcmUgbG9hZGluZzogYm9vbGVhbjtcblxuICAgIC8qKiBDb250ZXh0IHBhc3NlZCB0byB0aGUgbGluayBleGVjdXRpb24gY2hhaW4uICovXG4gICAgZGVjbGFyZSBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG5cbiAgICBwcml2YXRlIF9kb2N1bWVudDogdGhpc1snZG9jdW1lbnQnXSA9IG51bGw7XG5cbiAgICBwcml2YXRlIF9kb2N1bWVudFNldEJ5SlMgPSBmYWxzZTtcblxuICAgIHByaXZhdGUgX3ZhcmlhYmxlczogdGhpc1sndmFyaWFibGVzJ10gPSBudWxsO1xuXG4gICAgcHJpdmF0ZSBfdmFyaWFibGVzU2V0QnlKUyA9IGZhbHNlO1xuXG4gICAgcHJvdGVjdGVkIG1vPzogTXV0YXRpb25PYnNlcnZlcjtcblxuICAgIC8qKlxuICAgICAqIEEgR3JhcGhRTCBkb2N1bWVudCBjb250YWluaW5nIGEgc2luZ2xlIHF1ZXJ5LCBtdXRhdGlvbiwgb3Igc3Vic2NyaXB0aW9uLlxuICAgICAqIFlvdSBjYW4gc2V0IGl0IGFzIGEgSmF2YVNjcmlwdCBwcm9wZXJ0eSBvciBieSBhcHBlbmRpbmcgYSBHcmFwaFFMIHNjcmlwdCB0byB0aGUgZWxlbWVudCAobGlnaHQgRE9NKS5cbiAgICAgKi9cbiAgICBnZXQgZG9jdW1lbnQoKTogRG9jdW1lbnROb2RlIHwgVHlwZWREb2N1bWVudE5vZGUgfCBudWxsIHtcbiAgICAgIHJldHVybiB0aGlzLl9kb2N1bWVudCA/PyB0aGlzLmdldERPTUdyYXBoUUxEb2N1bWVudCgpO1xuICAgIH1cblxuICAgIHNldCBkb2N1bWVudChkb2N1bWVudCkge1xuICAgICAgdGhpcy5fZG9jdW1lbnRTZXRCeUpTID0gZmFsc2U7XG4gICAgICBpZiAoIWRvY3VtZW50KVxuICAgICAgICB0aGlzLl9kb2N1bWVudCA9IG51bGw7XG4gICAgICBlbHNlIGlmICghaXNWYWxpZEdxbChkb2N1bWVudCkpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoYCR7Y2FwaXRhbCgodGhpcy5jb25zdHJ1Y3RvciBhcyB0eXBlb2YgQXBvbGxvRWxlbWVudEludGVyZmFjZSkuZG9jdW1lbnRUeXBlID8/ICdkb2N1bWVudCcpfSBtdXN0IGJlIGEgZ3FsLXBhcnNlZCBEb2N1bWVudE5vZGVgKTsgLyogYzggaWdub3JlIG5leHQgKi9cbiAgICAgIGVsc2Uge1xuICAgICAgICB0aGlzLl9kb2N1bWVudCA9IGRvY3VtZW50O1xuICAgICAgICB0aGlzLl9kb2N1bWVudFNldEJ5SlMgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5tbykgLy8gYGlzQ29ubmVjdGVkYCBpcyB1bnJlbGlhYmxlIGluIHRoaXMgY2FzZVxuICAgICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VkPy4oZG9jdW1lbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKC4uLmE6IGFueVtdKSB7IHN1cGVyKC4uLmEpOyB9XG5cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrPy4oKTtcblxuICAgICAgdGhpcy5tbyA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMub25ET01NdXRhdGlvbi5iaW5kKHRoaXMpKTtcblxuICAgICAgdGhpcy5tby5vYnNlcnZlKHRoaXMsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSwgY2hpbGRMaXN0OiB0cnVlLCBzdWJ0cmVlOiB0cnVlIH0pO1xuXG4gICAgICB0aGlzLl9kb2N1bWVudCA9IHRoaXMuX2RvY3VtZW50ID8/IHRoaXMuZ2V0RE9NR3JhcGhRTERvY3VtZW50KCk7XG4gICAgICB0aGlzLl92YXJpYWJsZXMgPSB0aGlzLl92YXJpYWJsZXMgPz8gdGhpcy5nZXRET01WYXJpYWJsZXMoKTtcblxuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBBcG9sbG9FbGVtZW50RXZlbnQoJ2Fwb2xsby1lbGVtZW50LWNvbm5lY3RlZCcsIHRoaXMpKTtcbiAgICB9XG5cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpOiB2b2lkIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQXBvbGxvRWxlbWVudEV2ZW50KCdhcG9sbG8tZWxlbWVudC1kaXNjb25uZWN0ZWQnLCB0aGlzKSk7XG4gICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQXBvbGxvRWxlbWVudEV2ZW50KCdhcG9sbG8tZWxlbWVudC1kaXNjb25uZWN0ZWQnLCB0aGlzKSk7XG4gICAgICB0aGlzLm1vPy5kaXNjb25uZWN0KCk7XG4gICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGlmZWN5Y2xlIGNhbGxiYWNrIHRoYXQgcmVhY3RzIHRvIGNoYW5nZXMgaW4gdGhlIEdyYXBoUUwgZG9jdW1lbnQuXG4gICAgICogQHBhcmFtIGRvY3VtZW50IFRoZSBHcmFwaFFMIGRvY3VtZW50LlxuICAgICAqL1xuICAgIHByb3RlY3RlZCBkb2N1bWVudENoYW5nZWQ/KGRvY3VtZW50OiB0aGlzWydkb2N1bWVudCddKTogdm9pZFxuXG4gICAgLyoqXG4gICAgICogTGlmZWN5Y2xlIGNhbGxiYWNrIHRoYXQgcmVhY3RzIHRvIGNoYW5nZXMgaW4gdGhlIG9wZXJhdGlvbiB2YXJpYWJsZXMuXG4gICAgICogQHBhcmFtIHZhcmlhYmxlcyBUaGUgdmFyaWFibGVzLlxuICAgICAqL1xuICAgIHByb3RlY3RlZCB2YXJpYWJsZXNDaGFuZ2VkPyh2YXJpYWJsZXM6IHRoaXNbJ3ZhcmlhYmxlcyddKTogdm9pZFxuXG4gICAgcHJpdmF0ZSBvbkRPTU11dGF0aW9uKHJlY29yZHM6IE11dGF0aW9uUmVjb3JkW10pOiB2b2lkIHtcbiAgICAgIGNvbnN0IGlzR1FMU2NyaXB0Q2hhbmdlZCA9IChyZWNvcmQ6IE11dGF0aW9uUmVjb3JkKSA9PlxuICAgICAgICBbLi4ucmVjb3JkPy5hZGRlZE5vZGVzXS5zb21lKG5vZGUgPT5cbiAgICAgICAgICBub2RlID09PSB0aGlzLnF1ZXJ5U2VsZWN0b3IoU0NSSVBUX1NFTEVDVE9SKSk7XG5cbiAgICAgIGlmICghdGhpcy5fZG9jdW1lbnRTZXRCeUpTKSB7XG4gICAgICAgIHRoaXMuX2RvY3VtZW50ID0gdGhpcy5nZXRET01HcmFwaFFMRG9jdW1lbnQoKTtcbiAgICAgICAgLy8gbm90aWZ5IHdoZW4gdGhlIGZpcnN0IHNjcmlwdCBjaGlsZCBlbGVtZW50IGNoYW5nZXNcbiAgICAgICAgaWYgKHJlY29yZHMuc29tZShpc0dRTFNjcmlwdENoYW5nZWQpKVxuICAgICAgICAgIHRoaXMuZG9jdW1lbnRDaGFuZ2VkPy4odGhpcy5kb2N1bWVudCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5fdmFyaWFibGVzU2V0QnlKUylcbiAgICAgICAgdGhpcy5fdmFyaWFibGVzID0gdGhpcy5nZXRET01WYXJpYWJsZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHZXQgYSBHcmFwaFFMIERvY3VtZW50Tm9kZSBmcm9tIHRoZSBlbGVtZW50J3MgR3JhcGhRTCBzY3JpcHQgY2hpbGRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgZ2V0RE9NR3JhcGhRTERvY3VtZW50KCk6IHRoaXNbJ2RvY3VtZW50J10ge1xuICAgICAgY29uc3Qgc2NyaXB0ID0gdGhpcy5xdWVyeVNlbGVjdG9yPEhUTUxTY3JpcHRFbGVtZW50PihTQ1JJUFRfU0VMRUNUT1IpO1xuICAgICAgY29uc3QgdGV4dCA9IHNjcmlwdD8uaW5uZXJUZXh0O1xuICAgICAgaWYgKCF0ZXh0KVxuICAgICAgICByZXR1cm4gbnVsbDsgLyogYzggaWdub3JlIG5leHQgKi8gLy8gY292ZXJlZFxuICAgICAgZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gYWRtaXR0ZWRseSwgd2UgaGF2ZSB0byB0cnVzdCB0aGUgdXNlciBoZXJlLlxuICAgICAgICAgIHJldHVybiBncWwoc3RyaXBIVE1MQ29tbWVudHModGV4dCkpIGFzIHRoaXNbJ2RvY3VtZW50J107IC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIGNvdmVyZWRcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgdGhpcy5lcnJvciA9IGVycjtcbiAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdldHMgb3BlcmF0aW9uIHZhcmlhYmxlcyBmcm9tIHRoZSBlbGVtZW50J3MgSlNPTiBzY3JpcHQgY2hpbGRcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgZ2V0RE9NVmFyaWFibGVzKCk6IHRoaXNbJ3ZhcmlhYmxlcyddIHtcbiAgICAgIGNvbnN0IHNjcmlwdCA9IHRoaXMucXVlcnlTZWxlY3RvcjxIVE1MU2NyaXB0RWxlbWVudD4oJ3NjcmlwdFt0eXBlPVwiYXBwbGljYXRpb24vanNvblwiXScpO1xuICAgICAgaWYgKCFzY3JpcHQpIHJldHVybiBudWxsOyAvKiBjOCBpZ25vcmUgbmV4dCAqLyAvLyBjb3ZlcmVkXG4gICAgICB0cnkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShzY3JpcHQuaW5uZXJUZXh0KTsgLyogYzggaWdub3JlIG5leHQgKi8gLy8gY292ZXJlZFxuICAgICAgfSBjYXRjaCB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKEFwb2xsb0VsZW1lbnQucHJvdG90eXBlLCB7XG4gICAgZGF0YTogd3JpdGFibGUobnVsbCksXG4gICAgZXJyb3I6IHdyaXRhYmxlKG51bGwpLFxuICAgIGVycm9yczogd3JpdGFibGUobnVsbCksXG4gICAgbG9hZGluZzogd3JpdGFibGUoZmFsc2UpLFxuICAgIHZhcmlhYmxlczogZWZmZWN0KHtcbiAgICAgIG5hbWU6ICd2YXJpYWJsZXMnLFxuICAgICAgaW5pdDogbnVsbCxcbiAgICAgIG9uU2V0KHZhcmlhYmxlczogdW5rbm93bikge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBUaGlzIGlzIGVzc2VudGlhbGx5IGEgY2xhc3MgYWNjZXNzb3IsIEknbSB3b3JraW5nIGFyb3VuZCBzb21lIFRTIGxpbWl0YXRpb25zXG4gICAgICAgIGlmICh0aGlzLm1vKSAvLyBlbGVtZW50IGlzIGNvbm5lY3RlZFxuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yOiBUaGlzIGlzIGVzc2VudGlhbGx5IGEgY2xhc3MgYWNjZXNzb3IsIEknbSB3b3JraW5nIGFyb3VuZCBzb21lIFRTIGxpbWl0YXRpb25zXG4gICAgICAgICAgdGhpcy52YXJpYWJsZXNDaGFuZ2VkPy4odmFyaWFibGVzKTtcbiAgICAgIH0sXG4gICAgfSksXG4gIH0pO1xuXG4gIC8vIEB0cy1leHBlY3QtZXJyb3I6IGxldCdzIHByZXRlbmQgaXQgaXNcbiAgcmV0dXJuIEFwb2xsb0VsZW1lbnQ7XG59XG5cbi8qKlxuICogYEFwb2xsb0VsZW1lbnRNaXhpbmA6IGNsYXNzIG1peGluIGZvciBhcG9sbG8gY3VzdG9tIGVsZW1lbnRzLlxuICovXG5leHBvcnQgY29uc3QgQXBvbGxvRWxlbWVudE1peGluID1cbiAgZGVkdXBlTWl4aW4oQXBvbGxvRWxlbWVudE1peGluSW1wbGVtZW50YXRpb24pO1xuIiwgImltcG9ydCB0eXBlIHtcbiAgQXBvbGxvRXJyb3IsXG4gIEFwb2xsb1F1ZXJ5UmVzdWx0LFxuICBEb2N1bWVudE5vZGUsXG4gIEVycm9yUG9saWN5LFxuICBGZXRjaFBvbGljeSxcbiAgT2JzZXJ2YWJsZVF1ZXJ5LFxuICBPcGVyYXRpb25WYXJpYWJsZXMsXG4gIFF1ZXJ5T3B0aW9ucyxcbiAgU3Vic2NyaWJlVG9Nb3JlT3B0aW9ucyxcbiAgU3Vic2NyaXB0aW9uT3B0aW9ucyxcbiAgV2F0Y2hRdWVyeU9wdGlvbnMsXG59IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xuXG5pbXBvcnQgdHlwZSB7XG4gIEFwb2xsb1F1ZXJ5SW50ZXJmYWNlLFxuICBDb21wb25lbnREb2N1bWVudCxcbiAgQ29uc3RydWN0b3IsXG4gIERhdGEsXG4gIEZldGNoTW9yZVBhcmFtcyxcbiAgUmVmZXRjaFF1ZXJpZXNUeXBlLFxuICBWYXJpYWJsZXMsXG59IGZyb20gJ0BhcG9sbG8tZWxlbWVudHMvaW50ZXJmYWNlcyc7XG5cbmltcG9ydCB7IE5ldHdvcmtTdGF0dXMgfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcblxuaW1wb3J0IHsgZGVkdXBlTWl4aW4gfSBmcm9tICdAb3Blbi13Yy9kZWR1cGUtbWl4aW4nO1xuXG5pbXBvcnQgeyBBcG9sbG9FbGVtZW50TWl4aW4gfSBmcm9tICcuL2Fwb2xsby1lbGVtZW50LW1peGluJztcblxuaW1wb3J0IHsgYm9vbGVhbkF0dHIsIGVmZmVjdCwgZ3FsRG9jdW1lbnQsIHdyaXRhYmxlIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9saWIvZGVzY3JpcHRvcnMnO1xuXG50eXBlIEFwb2xsb1F1ZXJ5UmVzdWx0RXZlbnQ8VERhdGEgPSB1bmtub3duPiA9XG4gIEN1c3RvbUV2ZW50PEFwb2xsb1F1ZXJ5UmVzdWx0PFREYXRhPj47XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50RXZlbnRNYXAge1xuICAgICdhcG9sbG8tcXVlcnktcmVzdWx0JzogQXBvbGxvUXVlcnlSZXN1bHRFdmVudDtcbiAgfVxufVxuXG50eXBlIE1peGluSW5zdGFuY2UgPSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIG5ldyA8RCA9IHVua25vd24sIFYgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+PiguLi5hOiBhbnlbXSk6IEFwb2xsb1F1ZXJ5SW50ZXJmYWNlPEQsIFY+O1xuICBkb2N1bWVudFR5cGU6ICdxdWVyeScsXG59XG5cbmZ1bmN0aW9uIEFwb2xsb1F1ZXJ5TWl4aW5JbXBsPEIgZXh0ZW5kcyBDb25zdHJ1Y3Rvcj4oc3VwZXJjbGFzczogQik6IE1peGluSW5zdGFuY2UgJiBCIHtcbiAgY2xhc3MgQXBvbGxvUXVlcnlFbGVtZW50PEQgPSB1bmtub3duLCBWID0gT3BlcmF0aW9uVmFyaWFibGVzPlxuICAgIGV4dGVuZHMgQXBvbGxvRWxlbWVudE1peGluKHN1cGVyY2xhc3MpXG4gICAgaW1wbGVtZW50cyBPbWl0PEFwb2xsb1F1ZXJ5SW50ZXJmYWNlPEQsIFY+LCAnc2hvdWxkU3Vic2NyaWJlJz4ge1xuICAgIHN0YXRpYyBkb2N1bWVudFR5cGUgPSAncXVlcnknIGFzIGNvbnN0O1xuXG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKTogc3RyaW5nW10ge1xuICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KFtcbiAgICAgICAgLi4uc3VwZXIub2JzZXJ2ZWRBdHRyaWJ1dGVzID8/IFtdLFxuICAgICAgICAnZmV0Y2gtcG9saWN5JyxcbiAgICAgICAgJ25leHQtZmV0Y2gtcG9saWN5JyxcbiAgICAgIF0pXTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbGF0ZXN0IHF1ZXJ5IGRhdGEuXG4gICAgICovXG4gICAgZGVjbGFyZSBkYXRhOiBEYXRhPEQ+IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCBtYXAgZnJvbSB2YXJpYWJsZSBuYW1lIHRvIHZhcmlhYmxlIHZhbHVlLCB3aGVyZSB0aGUgdmFyaWFibGVzIGFyZSB1c2VkIHdpdGhpbiB0aGUgR3JhcGhRTCBxdWVyeS5cbiAgICAgKlxuICAgICAqIFNldHRpbmcgdmFyaWFibGVzIHdpbGwgaW5pdGlhdGUgdGhlIHF1ZXJ5LCB1bmxlc3MgW2Bub0F1dG9TdWJzY3JpYmVgXSgjbm9hdXRvc3Vic2NyaWJlKSBpcyBhbHNvIHNldC5cbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IFF1ZXJ5IHZhcmlhYmxlcy5cbiAgICAgKi9cbiAgICBkZWNsYXJlIHZhcmlhYmxlczogVmFyaWFibGVzPEQsIFY+IHwgbnVsbDtcblxuICAgIGRlY2xhcmUgcXVlcnk6IERvY3VtZW50Tm9kZSB8IENvbXBvbmVudERvY3VtZW50PEQ+IHwgbnVsbDtcblxuICAgIGRlY2xhcmUgZmV0Y2hQb2xpY3k/OiBGZXRjaFBvbGljeTtcblxuICAgIGRlY2xhcmUgcGFydGlhbD86IGJvb2xlYW47XG5cbiAgICBkZWNsYXJlIHBhcnRpYWxSZWZldGNoPzogYm9vbGVhbjtcblxuICAgIGRlY2xhcmUgcmVmZXRjaFF1ZXJpZXM6IFJlZmV0Y2hRdWVyaWVzVHlwZTxEPiB8IG51bGw7XG5cbiAgICBkZWNsYXJlIHJldHVyblBhcnRpYWxEYXRhPzogYm9vbGVhbjtcblxuICAgIGRlY2xhcmUgbmV4dEZldGNoUG9saWN5PzogRmV0Y2hQb2xpY3k7XG5cbiAgICBkZWNsYXJlIG5ldHdvcmtTdGF0dXM6IE5ldHdvcmtTdGF0dXM7XG5cbiAgICBkZWNsYXJlIG9ic2VydmFibGVRdWVyeT86IE9ic2VydmFibGVRdWVyeTxEYXRhPEQ+LCBWYXJpYWJsZXM8RCwgVj4+O1xuXG4gICAgZGVjbGFyZSBvcHRpb25zOiBQYXJ0aWFsPFdhdGNoUXVlcnlPcHRpb25zPFZhcmlhYmxlczxELCBWPiwgRGF0YTxEPj4+IHwgbnVsbDtcblxuICAgIGRlY2xhcmUgbm9BdXRvU3Vic2NyaWJlOiBib29sZWFuO1xuXG4gICAgZGVjbGFyZSBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2U6IGJvb2xlYW47XG5cbiAgICBkZWNsYXJlIHBvbGxJbnRlcnZhbD86IG51bWJlcjtcblxuICAgIG9uRGF0YT8oX3Jlc3VsdDogQXBvbGxvUXVlcnlSZXN1bHQ8RGF0YTxEPj4pOiB2b2lkXG5cbiAgICBvbkVycm9yPyhfZXJyb3I6IEVycm9yKTogdm9pZFxuXG4gICAgZXJyb3JQb2xpY3k6IEVycm9yUG9saWN5ID0gJ25vbmUnO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX19vcHRpb25zOiBQYXJ0aWFsPFdhdGNoUXVlcnlPcHRpb25zPiB8IG51bGwgPSBudWxsO1xuXG4gICAgLyoqIEBwcml2YXRlICovXG4gICAgX19uZXR3b3JrU3RhdHVzID0gTmV0d29ya1N0YXR1cy5yZWFkeTtcblxuICAgIHB1YmxpYyBnZXQgY2FuQXV0b1N1YnNjcmliZSgpIHtcbiAgICAgIHJldHVybiAoXG4gICAgICAgICEhdGhpcy5jbGllbnQgJiZcbiAgICAgICAgIXRoaXMubm9BdXRvU3Vic2NyaWJlICYmXG4gICAgICAgIHRoaXMuc2hvdWxkU3Vic2NyaWJlKClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoLi4uYTogYW55W10pIHsgc3VwZXIoLi4uYSk7IH1cblxuICAgIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lOiBzdHJpbmcsIG9sZFZhbDogc3RyaW5nLCBuZXdWYWw6IHN0cmluZyk6IHZvaWQge1xuICAgICAgc3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrPy4obmFtZSwgb2xkVmFsLCBuZXdWYWwpO1xuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvcjogdHMgaXMgbm90IHRyYWNraW5nIHRoZSBzdGF0aWMgc2lkZVxuICAgICAgaWYgKHN1cGVyLmNvbnN0cnVjdG9yPy5vYnNlcnZlZEF0dHJpYnV0ZXM/LmluY2x1ZGVzPy4obmFtZSkpXG4gICAgICAgIHJldHVybjtcblxuICAgICAgc3dpdGNoIChuYW1lKSB7XG4gICAgICAgIGNhc2UgJ2ZldGNoLXBvbGljeSc6XG4gICAgICAgICAgdGhpcy5mZXRjaFBvbGljeSA9IG5ld1ZhbCBhcyBBcG9sbG9RdWVyeUVsZW1lbnQ8RCwgVj5bJ2ZldGNoUG9saWN5J107XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSAnbmV4dC1mZXRjaC1wb2xpY3knOlxuICAgICAgICAgIHRoaXMubmV4dEZldGNoUG9saWN5ID0gbmV3VmFsIGFzIEFwb2xsb1F1ZXJ5RWxlbWVudDxELCBWPlsnbmV4dEZldGNoUG9saWN5J107XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgdGhpcy5kb2N1bWVudENoYW5nZWQodGhpcy5xdWVyeSk7XG4gICAgfVxuXG4gICAgZG9jdW1lbnRDaGFuZ2VkKHF1ZXJ5OiBEb2N1bWVudE5vZGUgfCBDb21wb25lbnREb2N1bWVudDxEPiB8IG51bGwpOiB2b2lkIHtcbiAgICAgIGlmICghcXVlcnkpIHJldHVybjsgLyogYzggaWdub3JlIG5leHQgKi8gLy8gYWxsIGNvdmVyZWRcbiAgICAgIGlmICh0aGlzLmNhblN1YnNjcmliZSh7IHF1ZXJ5IH0pICYmIHRoaXMuc2hvdWxkU3Vic2NyaWJlKHsgcXVlcnkgfSkpIC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIGFsbCBjb3ZlcmVkXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlKHsgcXVlcnkgfSk7IC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIGFsbCBjb3ZlcmVkXG4gICAgfVxuXG4gICAgdmFyaWFibGVzQ2hhbmdlZCh2YXJpYWJsZXM6IFZhcmlhYmxlczxELCBWPik6IHZvaWQge1xuICAgICAgaWYgKHRoaXMub2JzZXJ2YWJsZVF1ZXJ5KVxuICAgICAgICB0aGlzLnJlZmV0Y2godmFyaWFibGVzKTtcbiAgICAgIGVsc2UgaWYgKHRoaXMuY2FuU3Vic2NyaWJlKHsgdmFyaWFibGVzIH0pICYmIHRoaXMuc2hvdWxkU3Vic2NyaWJlKHsgdmFyaWFibGVzIH0pKVxuICAgICAgICB0aGlzLnN1YnNjcmliZSh7IHZhcmlhYmxlcyB9KTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEV4cG9zZXMgdGhlIFtgT2JzZXJ2YWJsZVF1ZXJ5I3JlZmV0Y2hgXShodHRwczovL3d3dy5hcG9sbG9ncmFwaHFsLmNvbS9kb2NzL3JlYWN0L2FwaS9hcG9sbG8tY2xpZW50Lmh0bWwjT2JzZXJ2YWJsZVF1ZXJ5LnJlZmV0Y2gpIG1ldGhvZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB2YXJpYWJsZXMgVGhlIG5ldyBzZXQgb2YgdmFyaWFibGVzLiBJZiB0aGVyZSBhcmUgbWlzc2luZyB2YXJpYWJsZXMsIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgdGhvc2UgdmFyaWFibGVzIHdpbGwgYmUgdXNlZC4uXG4gICAgICovXG4gICAgYXN5bmMgcmVmZXRjaCh2YXJpYWJsZXM6IFZhcmlhYmxlczxELCBWPik6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8RGF0YTxEPj4+IHtcbiAgICAgIGlmICghdGhpcy5vYnNlcnZhYmxlUXVlcnkpXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IHJlZmV0Y2ggd2l0aG91dCBhbiBPYnNlcnZhYmxlUXVlcnknKTtcbiAgICAgIHJldHVybiB0aGlzLm9ic2VydmFibGVRdWVyeS5yZWZldGNoKHZhcmlhYmxlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGFibGUgdG8gYXV0b21hdGljYWxseSBzdWJzY3JpYmVcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIGNhblN1YnNjcmliZShvcHRpb25zPzogUGFydGlhbDxTdWJzY3JpcHRpb25PcHRpb25zPFZhcmlhYmxlczxELCBWPiB8IG51bGwsIERhdGE8RD4+Pik6IGJvb2xlYW4ge1xuICAgICAgLyogYzggaWdub3JlIG5leHQgNCAqL1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgIXRoaXMubm9BdXRvU3Vic2NyaWJlICYmXG4gICAgICAgICEhdGhpcy5jbGllbnQgJiZcbiAgICAgICAgISEob3B0aW9ucz8ucXVlcnkgPz8gdGhpcy5kb2N1bWVudClcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBlbGVtZW50IHNob3VsZCBhdHRlbXB0IHRvIGF1dG9tYXRpY2FsbHkgc3Vic2NyaWJlIGkuZS4gYmVnaW4gcXVlcnlpbmdcbiAgICAgKlxuICAgICAqIE92ZXJyaWRlIHRvIHByZXZlbnQgc3Vic2NyaWJpbmcgdW5sZXNzIHlvdXIgY29uZGl0aW9ucyBhcmUgbWV0LlxuICAgICAqL1xuICAgIHNob3VsZFN1YnNjcmliZShvcHRpb25zPzogUGFydGlhbDxTdWJzY3JpcHRpb25PcHRpb25zPFZhcmlhYmxlczxELCBWPiwgRGF0YTxEPj4+KTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gKHZvaWQgb3B0aW9ucywgdHJ1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBvYnNlcnZhYmxlUXVlcnkgYW5kIHN1YnNjcmliZXMuXG4gICAgICogQHBhcmFtIHBhcmFtcyBvcHRpb25zIGZvciBjb250cm9sbGluZyBob3cgdGhlIHN1YnNjcmlwdGlvbiBzdWJzY3JpYmVzXG4gICAgICovXG4gICAgc3Vic2NyaWJlKFxuICAgICAgcGFyYW1zPzogUGFydGlhbDxTdWJzY3JpcHRpb25PcHRpb25zPFZhcmlhYmxlczxELCBWPiwgRGF0YTxEPj4+XG4gICAgKTogWmVuT2JzZXJ2YWJsZS5TdWJzY3JpcHRpb24ge1xuICAgICAgY29uc3Qgb3B0aW9uczogU3Vic2NyaXB0aW9uT3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIERhdGE8RD4+ID0ge1xuICAgICAgICAvLyBJdCdzIGJldHRlciB0byBsZXQgQXBvbGxvIGNsaWVudCB0aHJvdyB0aGlzIGVycm9yXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICAgIHF1ZXJ5OiBwYXJhbXM/LnF1ZXJ5ID8/IHRoaXMucXVlcnkhLFxuICAgICAgICBjb250ZXh0OiBwYXJhbXM/LmNvbnRleHQgPz8gdGhpcy5jb250ZXh0LFxuICAgICAgICBmZXRjaFBvbGljeTogcGFyYW1zPy5mZXRjaFBvbGljeSA/PyB0aGlzLmZldGNoUG9saWN5LFxuICAgICAgICB2YXJpYWJsZXM6IHBhcmFtcz8udmFyaWFibGVzID8/IHRoaXMudmFyaWFibGVzID8/IHVuZGVmaW5lZCxcbiAgICAgIH07XG5cbiAgICAgIGlmICh0aGlzLm9ic2VydmFibGVRdWVyeSlcbiAgICAgICAgdGhpcy5vYnNlcnZhYmxlUXVlcnkuc3RvcFBvbGxpbmcoKTsgLyogYzggaWdub3JlIG5leHQgKi8gLy8gY292ZXJlZFxuXG4gICAgICB0aGlzLm9ic2VydmFibGVRdWVyeSA9IHRoaXMud2F0Y2hRdWVyeShvcHRpb25zKTtcblxuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2YWJsZVF1ZXJ5Py5zdWJzY3JpYmUoe1xuICAgICAgICBuZXh0OiB0aGlzLm5leHREYXRhLmJpbmQodGhpcyksXG4gICAgICAgIGVycm9yOiB0aGlzLm5leHRFcnJvci5iaW5kKHRoaXMpLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGV0cyB5b3UgcGFzcyBhIEdyYXBoUUwgc3Vic2NyaXB0aW9uIGFuZCB1cGRhdGVRdWVyeSBmdW5jdGlvblxuICAgICAqIHRvIHN1YnNjcmliZSB0byBtb3JlIHVwZGF0ZXMgZm9yIHlvdXIgcXVlcnkuXG4gICAgICpcbiAgICAgKiBUaGUgYHVwZGF0ZVF1ZXJ5YCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBwcmV2aW91cyBxdWVyeSBkYXRhLFxuICAgICAqIHRoZW4gYSBgeyBzdWJzY3JpcHRpb25EYXRhOiBUU3Vic2NyaXB0aW9uUmVzdWx0IH1gIG9iamVjdCxcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCB1cGRhdGVkIHF1ZXJ5IGRhdGEgYmFzZWQgb24gdGhlIG5ldyByZXN1bHRzLlxuICAgICAqL1xuICAgIHN1YnNjcmliZVRvTW9yZShcbiAgICAgIG9wdGlvbnM6IFN1YnNjcmliZVRvTW9yZU9wdGlvbnM8RGF0YTxEPiwgVmFyaWFibGVzPEQsIFY+PlxuICAgICk6ICgoKSA9PiB2b2lkKSB8IHZvaWQge1xuICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2YWJsZVF1ZXJ5Py5zdWJzY3JpYmVUb01vcmUob3B0aW9ucyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXhlY3V0ZXMgYSBRdWVyeSBvbmNlIGFuZCB1cGRhdGVzIHRoZSBjb21wb25lbnQgd2l0aCB0aGUgcmVzdWx0XG4gICAgICovXG4gICAgYXN5bmMgZXhlY3V0ZVF1ZXJ5KFxuICAgICAgcGFyYW1zPzogUGFydGlhbDxRdWVyeU9wdGlvbnM8VmFyaWFibGVzPEQsIFY+Pj5cbiAgICApOiBQcm9taXNlPEFwb2xsb1F1ZXJ5UmVzdWx0PERhdGE8RD4+PiB7XG4gICAgICBpZiAoIXRoaXMuY2xpZW50KVxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdObyBBcG9sbG8gY2xpZW50LiBTZWUgaHR0cHM6Ly9hcG9sbG9lbGVtZW50cy5kZXYvZ3VpZGVzL2dldHRpbmctc3RhcnRlZC9hcG9sbG8tY2xpZW50LycpOyAvKiBjOCBpZ25vcmUgbmV4dCAqLyAvLyBpdCdzIGNvdmVyZWRcblxuICAgICAgY29uc3QgeyBjb250ZXh0LCBlcnJvclBvbGljeSwgZmV0Y2hQb2xpY3kgfSA9IHRoaXM7XG5cbiAgICAgIGNvbnN0IG9wdGlvbnM6IFF1ZXJ5T3B0aW9uczxWYXJpYWJsZXM8RCwgVj4+ID0ge1xuICAgICAgICBjb250ZXh0LCBlcnJvclBvbGljeSwgZmV0Y2hQb2xpY3ksXG4gICAgICAgIC4uLnBhcmFtcyxcbiAgICAgICAgLy8gSXQncyBiZXR0ZXIgdG8gbGV0IEFwb2xsbyBjbGllbnQgdGhyb3cgdGhpcyBlcnJvclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICBxdWVyeTogcGFyYW1zPy5xdWVyeSA/PyB0aGlzLnF1ZXJ5ISxcbiAgICAgICAgdmFyaWFibGVzOiBwYXJhbXM/LnZhcmlhYmxlcyA/PyB0aGlzLnZhcmlhYmxlcyA/PyB1bmRlZmluZWQsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmNsaWVudC5xdWVyeShvcHRpb25zKTtcbiAgICAgICAgdGhpcy5uZXh0RGF0YShyZXN1bHQpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdGhpcy5uZXh0RXJyb3IoZXJyb3IpO1xuICAgICAgICB0aHJvdyBlcnJvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFeHBvc2VzIHRoZSBgT2JzZXJ2YWJsZVF1ZXJ5I2ZldGNoTW9yZWAgbWV0aG9kLlxuICAgICAqIGh0dHBzOi8vd3d3LmFwb2xsb2dyYXBocWwuY29tL2RvY3MvcmVhY3QvYXBpL2NvcmUvT2JzZXJ2YWJsZVF1ZXJ5LyNPYnNlcnZhYmxlUXVlcnkuZmV0Y2hNb3JlXG4gICAgICpcbiAgICAgKiBUaGUgb3B0aW9uYWwgYHVwZGF0ZVF1ZXJ5YCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBwcmV2aW91cyBxdWVyeSBkYXRhLFxuICAgICAqIHRoZW4gYSBgeyBzdWJzY3JpcHRpb25EYXRhOiBUU3Vic2NyaXB0aW9uUmVzdWx0IH1gIG9iamVjdCxcbiAgICAgKiBhbmQgcmV0dXJucyBhbiBvYmplY3Qgd2l0aCB1cGRhdGVkIHF1ZXJ5IGRhdGEgYmFzZWQgb24gdGhlIG5ldyByZXN1bHRzLlxuICAgICAqXG4gICAgICogVGhlIG9wdGlvbmFsIGB2YXJpYWJsZXNgIHBhcmFtZXRlciBpcyBhbiBvcHRpb25hbCBuZXcgdmFyaWFibGVzIG9iamVjdC5cbiAgICAgKi9cbiAgICBmZXRjaE1vcmUocGFyYW1zPzogUGFydGlhbDxGZXRjaE1vcmVQYXJhbXM8RCwgVj4+KTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxEYXRhPEQ+Pj4ge1xuICAgICAgY29uc3Qgb3B0aW9uczogdHlwZW9mIHBhcmFtcyA9IHtcbiAgICAgICAgLy8gSXQncyBiZXR0ZXIgdG8gbGV0IEFwb2xsbyBjbGllbnQgdGhyb3cgdGhpcyBlcnJvclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICBxdWVyeTogcGFyYW1zPy5xdWVyeSA/PyB0aGlzLnF1ZXJ5ISxcbiAgICAgICAgdXBkYXRlUXVlcnk6IHBhcmFtcz8udXBkYXRlUXVlcnksXG4gICAgICAgIHZhcmlhYmxlczogcGFyYW1zPy52YXJpYWJsZXMgPz8gdGhpcy52YXJpYWJsZXMgPz8gdW5kZWZpbmVkLFxuICAgICAgICBjb250ZXh0OiBwYXJhbXM/LmNvbnRleHQgPz8gdGhpcy5jb250ZXh0LFxuICAgICAgfTtcblxuICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcblxuICAgICAgdGhpcy5vYnNlcnZhYmxlUXVlcnkgPz89XG4gICAgICAgIHRoaXMud2F0Y2hRdWVyeShvcHRpb25zIGFzIFdhdGNoUXVlcnlPcHRpb25zPFZhcmlhYmxlczxELCBWPiwgRGF0YTxWPj4pO1xuXG4gICAgICByZXR1cm4gdGhpcy5vYnNlcnZhYmxlUXVlcnk/LmZldGNoTW9yZShvcHRpb25zKS50aGVuKHggPT4ge1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHg7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIE9ic2VydmFibGVRdWVyeSB3aXRoIHRoZSBvcHRpb25zIHByb3ZpZGVkIGJ5IHRoZSBlbGVtZW50LlxuICAgICAqIC0gYGNvbnRleHRgIENvbnRleHQgdG8gYmUgcGFzc2VkIHRvIGxpbmsgZXhlY3V0aW9uIGNoYWluXG4gICAgICogLSBgZXJyb3JQb2xpY3lgIFNwZWNpZmllcyB0aGUgRXJyb3JQb2xpY3kgdG8gYmUgdXNlZCBmb3IgdGhpcyBxdWVyeVxuICAgICAqIC0gYGZldGNoUG9saWN5YCBTcGVjaWZpZXMgdGhlIEZldGNoUG9saWN5IHRvIGJlIHVzZWQgZm9yIHRoaXMgcXVlcnlcbiAgICAgKiAtIGBmZXRjaFJlc3VsdHNgIFdoZXRoZXIgb3Igbm90IHRvIGZldGNoIHJlc3VsdHNcbiAgICAgKiAtIGBtZXRhZGF0YWAgQXJiaXRyYXJ5IG1ldGFkYXRhIHN0b3JlZCBpbiB0aGUgc3RvcmUgd2l0aCB0aGlzIHF1ZXJ5LiBEZXNpZ25lZCBmb3IgZGVidWdnaW5nLCBkZXZlbG9wZXIgdG9vbHMsIGV0Yy5cbiAgICAgKiAtIGBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2VgIFdoZXRoZXIgb3Igbm90IHVwZGF0ZXMgdG8gdGhlIG5ldHdvcmsgc3RhdHVzIHNob3VsZCB0cmlnZ2VyIG5leHQgb24gdGhlIG9ic2VydmVyIG9mIHRoaXMgcXVlcnlcbiAgICAgKiAtIGBwb2xsSW50ZXJ2YWxgIFRoZSB0aW1lIGludGVydmFsIChpbiBtaWxsaXNlY29uZHMpIG9uIHdoaWNoIHRoaXMgcXVlcnkgc2hvdWxkIGJlIHJlZmV0Y2hlZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAgICogLSBgcXVlcnlgIEEgR3JhcGhRTCBkb2N1bWVudCB0aGF0IGNvbnNpc3RzIG9mIGEgc2luZ2xlIHF1ZXJ5IHRvIGJlIHNlbnQgZG93biB0byB0aGUgc2VydmVyLlxuICAgICAqIC0gYHZhcmlhYmxlc2AgQSBtYXAgZ29pbmcgZnJvbSB2YXJpYWJsZSBuYW1lIHRvIHZhcmlhYmxlIHZhbHVlLCB3aGVyZSB0aGUgdmFyaWFibGVzIGFyZSB1c2VkIHdpdGhpbiB0aGUgR3JhcGhRTCBxdWVyeS5cbiAgICAgKi9cbiAgICB3YXRjaFF1ZXJ5KFxuICAgICAgcGFyYW1zPzogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIERhdGE8RD4+PlxuICAgICk6IE9ic2VydmFibGVRdWVyeTxEYXRhPEQ+LCBWYXJpYWJsZXM8RCwgVj4+IHtcbiAgICAgIGlmICghdGhpcy5jbGllbnQpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vIEFwb2xsbyBjbGllbnQuIFNlZSBodHRwczovL2Fwb2xsb2VsZW1lbnRzLmRldi9ndWlkZXMvZ2V0dGluZy1zdGFydGVkL2Fwb2xsby1jbGllbnQvJyk7IC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIGl0J3MgY292ZXJlZFxuXG4gICAgICBjb25zdCBvcHRpb25zOiBXYXRjaFF1ZXJ5T3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIERhdGE8RD4+ID0ge1xuICAgICAgICBjb250ZXh0OiB0aGlzLmNvbnRleHQsXG4gICAgICAgIGVycm9yUG9saWN5OiB0aGlzLmVycm9yUG9saWN5LFxuICAgICAgICBmZXRjaFBvbGljeTogdGhpcy5mZXRjaFBvbGljeSxcbiAgICAgICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlOiB0aGlzLm5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZSxcbiAgICAgICAgcGFydGlhbFJlZmV0Y2g6IHRoaXMucGFydGlhbFJlZmV0Y2gsXG4gICAgICAgIHBvbGxJbnRlcnZhbDogdGhpcy5wb2xsSW50ZXJ2YWwsXG4gICAgICAgIHJldHVyblBhcnRpYWxEYXRhOiB0aGlzLnJldHVyblBhcnRpYWxEYXRhLFxuICAgICAgICBuZXh0RmV0Y2hQb2xpY3k6IHRoaXMubmV4dEZldGNoUG9saWN5LFxuICAgICAgICAuLi5wYXJhbXMsXG4gICAgICAgIC8vIEl0J3MgYmV0dGVyIHRvIGxldCBBcG9sbG8gY2xpZW50IHRocm93IHRoaXMgZXJyb3JcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgcXVlcnk6IHBhcmFtcz8ucXVlcnkgPz8gdGhpcy5xdWVyeSEsIC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIGl0J3MgY292ZXJlZFxuICAgICAgICB2YXJpYWJsZXM6IHBhcmFtcz8udmFyaWFibGVzID8/IHRoaXMudmFyaWFibGVzID8/IHVuZGVmaW5lZCxcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB0aGlzLmNsaWVudC53YXRjaFF1ZXJ5KG9wdGlvbnMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYGRhdGFgLCBgbG9hZGluZ2AsIGFuZCBgZXJyb3JgIG9uIHRoZSBpbnN0YW5jZSB3aGVuIG5ldyBzdWJzY3JpcHRpb24gcmVzdWx0cyBhcnJpdmUuXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBuZXh0RGF0YShyZXN1bHQ6IEFwb2xsb1F1ZXJ5UmVzdWx0PERhdGE8RD4+KTogdm9pZCB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdhcG9sbG8tcXVlcnktcmVzdWx0JywgeyBkZXRhaWw6IHJlc3VsdCB9KSk7XG4gICAgICB0aGlzLmRhdGEgPSByZXN1bHQuZGF0YTtcbiAgICAgIHRoaXMuZXJyb3IgPSByZXN1bHQuZXJyb3IgPz8gbnVsbDtcbiAgICAgIHRoaXMuZXJyb3JzID0gcmVzdWx0LmVycm9ycyA/PyBudWxsO1xuICAgICAgdGhpcy5sb2FkaW5nID0gcmVzdWx0LmxvYWRpbmc7XG4gICAgICB0aGlzLm5ldHdvcmtTdGF0dXMgPSByZXN1bHQubmV0d29ya1N0YXR1cztcbiAgICAgIHRoaXMucGFydGlhbCA9IHJlc3VsdC5wYXJ0aWFsO1xuICAgICAgdGhpcy5vbkRhdGE/LihyZXN1bHQpOyAvKiBjOCBpZ25vcmUgbmV4dCAqLyAvLyBpdCdzIGNvdmVyZWRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGBlcnJvcmAgYW5kIGBsb2FkaW5nYCBvbiB0aGUgaW5zdGFuY2Ugd2hlbiB0aGUgc3Vic2NyaXB0aW9uIGVycm9ycy5cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIG5leHRFcnJvcihlcnJvcjogQXBvbGxvRXJyb3IpOiB2b2lkIHtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2Fwb2xsby1lcnJvcicsIHsgZGV0YWlsOiBlcnJvciB9KSk7XG4gICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMub25FcnJvcj8uKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhBcG9sbG9RdWVyeUVsZW1lbnQucHJvdG90eXBlLCB7XG4gICAgcXVlcnk6IGdxbERvY3VtZW50KCksXG4gICAgbmV0d29ya1N0YXR1czogd3JpdGFibGUoTmV0d29ya1N0YXR1cy5yZWFkeSksXG4gICAgbm9BdXRvU3Vic2NyaWJlOiBib29sZWFuQXR0cignbm8tYXV0by1zdWJzY3JpYmUnKSxcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG4gICAgb3B0aW9uczogZWZmZWN0PEFwb2xsb1F1ZXJ5RWxlbWVudDxhbnksIGFueT4+KHtcbiAgICAgIG5hbWU6ICdvcHRpb25zJyxcbiAgICAgIGluaXQ6IG51bGwsXG4gICAgICBvblNldChvcHRpb25zOiBBcG9sbG9RdWVyeUVsZW1lbnQ8YW55LCBhbnk+WydvcHRpb25zJ10pIHtcbiAgICAgICAgaWYgKCFvcHRpb25zKSByZXR1cm47XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZVF1ZXJ5Py5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgICAgfSxcbiAgICB9KSxcbiAgICAvKiBlc2xpbnQtZW5hYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi9cbiAgfSk7XG5cbiAgcmV0dXJuIEFwb2xsb1F1ZXJ5RWxlbWVudDtcbn1cblxuXG4vKipcbiAqIGBBcG9sbG9RdWVyeU1peGluYDogY2xhc3MgbWl4aW4gZm9yIGFwb2xsby1xdWVyeSBlbGVtZW50cy5cbiAqL1xuZXhwb3J0IGNvbnN0IEFwb2xsb1F1ZXJ5TWl4aW4gPVxuICBkZWR1cGVNaXhpbihBcG9sbG9RdWVyeU1peGluSW1wbCk7XG4iLCAiaW1wb3J0IHR5cGUge1xuICBBcG9sbG9RdWVyeVJlc3VsdCxcbiAgRG9jdW1lbnROb2RlLFxuICBFcnJvclBvbGljeSxcbiAgRmV0Y2hQb2xpY3ksXG4gIEZldGNoTW9yZU9wdGlvbnMsXG4gIEZldGNoTW9yZVF1ZXJ5T3B0aW9ucyxcbiAgTmV0d29ya1N0YXR1cyxcbiAgT2JzZXJ2YWJsZVF1ZXJ5LFxuICBPcGVyYXRpb25WYXJpYWJsZXMsXG4gIFF1ZXJ5T3B0aW9ucyxcbiAgU3Vic2NyaWJlVG9Nb3JlT3B0aW9ucyxcbiAgU3Vic2NyaXB0aW9uT3B0aW9ucyxcbiAgV2F0Y2hRdWVyeU9wdGlvbnMsXG59IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xuXG5pbXBvcnQgdHlwZSB7IENvbXBvbmVudERvY3VtZW50LCBEYXRhLCBWYXJpYWJsZXMgfSBmcm9tICcuL29wZXJhdGlvbic7XG5pbXBvcnQgdHlwZSB7IEFwb2xsb0VsZW1lbnRJbnRlcmZhY2UgfSBmcm9tICcuL2Fwb2xsby1lbGVtZW50JztcblxuaW1wb3J0IHsgQXBvbGxvUXVlcnlNaXhpbiB9IGZyb20gJ0BhcG9sbG8tZWxlbWVudHMvbWl4aW5zL2Fwb2xsby1xdWVyeS1taXhpbic7XG5cbmV4cG9ydCB0eXBlIEZldGNoTW9yZVBhcmFtczxELCBWPiA9XG4gIEZldGNoTW9yZVF1ZXJ5T3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIGtleW9mIFZhcmlhYmxlczxELCBWPiwgRGF0YTxEPj4gJlxuICBGZXRjaE1vcmVPcHRpb25zPERhdGE8RD4sIFZhcmlhYmxlczxELCBWPj5cblxuLyoqXG4gKiBDb21tb24gaW50ZXJmYWNlIGZvciBxdWVyeSBlbGVtZW50c1xuICpcbiAqIFNlZSBbYEFwb2xsb0VsZW1lbnRJbnRlcmZhY2VgXShodHRwczovL2Fwb2xsb2VsZW1lbnRzLmRldi9hcGkvaW50ZXJmYWNlcy9lbGVtZW50KSBmb3IgbW9yZSBpbmZvcm1hdGlvbiBvbiBldmVudHNcbiAqXG4gKiBAZWxlbWVudFxuICpcbiAqIEBmaXJlcyAnYXBvbGxvLXF1ZXJ5LXJlc3VsdCcgd2hlbiB0aGUgcXVlcnkgcmVzb2x2ZXNcbiAqIEBmaXJlcyAnYXBvbGxvLWVycm9yJyB3aGVuIHRoZSBxdWVyeSByZWplY3RzXG4gKi9cbmV4cG9ydCBkZWNsYXJlIGNsYXNzIEFwb2xsb1F1ZXJ5SW50ZXJmYWNlPEQsIFYgPSBPcGVyYXRpb25WYXJpYWJsZXM+XG4gIGV4dGVuZHMgQXBvbGxvRWxlbWVudEludGVyZmFjZVxuICBpbXBsZW1lbnRzIEFwb2xsb1F1ZXJ5SW50ZXJmYWNlPEQsIFY+IHtcbiAgc3RhdGljIGRvY3VtZW50VHlwZTogJ3F1ZXJ5JztcblxuICAvKipcbiAgICogVGhlIGxhdGVzdCBxdWVyeSBkYXRhLlxuICAgKi9cbiAgZGVjbGFyZSBkYXRhOiBEYXRhPEQ+IHwgbnVsbDtcblxuICAvKipcbiAgICogQSBHcmFwaFFMIGRvY3VtZW50IGNvbnRhaW5pbmcgYSBzaW5nbGUgcXVlcnkuXG4gICAqL1xuICBkZWNsYXJlIHF1ZXJ5OiBEb2N1bWVudE5vZGUgfCBDb21wb25lbnREb2N1bWVudDxEPiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBtYXAgZnJvbSB2YXJpYWJsZSBuYW1lIHRvIHZhcmlhYmxlIHZhbHVlLCB3aGVyZSB0aGUgdmFyaWFibGVzIGFyZSB1c2VkIHdpdGhpbiB0aGUgR3JhcGhRTCBxdWVyeS5cbiAgICpcbiAgICogU2V0dGluZyB2YXJpYWJsZXMgd2lsbCBpbml0aWF0ZSB0aGUgcXVlcnksIHVubGVzcyBbYG5vQXV0b1N1YnNjcmliZWBdKCNub2F1dG9zdWJzY3JpYmUpIGlzIGFsc28gc2V0LlxuICAgKlxuICAgKiBAc3VtbWFyeSBRdWVyeSB2YXJpYWJsZXMuXG4gICAqL1xuICBkZWNsYXJlIHZhcmlhYmxlczogVmFyaWFibGVzPEQsIFY+IHwgbnVsbDtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGVyZSB0aGUgY2xpZW50IG1heSByZXR1cm4gYSByZXN1bHQgZnJvbS4gVGhlIG9wdGlvbnMgYXJlOlxuICAgKlxuICAgKiAtIGBjYWNoZS1maXJzdGAgKGRlZmF1bHQpOiByZXR1cm4gcmVzdWx0IGZyb20gY2FjaGUsIGZldGNoIGZyb20gbmV0d29yayBpZiBjYWNoZWQgcmVzdWx0IGlzIG5vdCBhdmFpbGFibGUuXG4gICAqIC0gYGNhY2hlLWFuZC1uZXR3b3JrYDogcmV0dXJuIHJlc3VsdCBmcm9tIGNhY2hlIGZpcnN0IChpZiBpdCBleGlzdHMpLCB0aGVuIHJldHVybiBuZXR3b3JrIHJlc3VsdCBvbmNlIGl0J3MgYXZhaWxhYmxlLlxuICAgKiAtIGBjYWNoZS1vbmx5YDogcmV0dXJuIHJlc3VsdCBmcm9tIGNhY2hlIGlmIGF2YWlsYWJsZSwgZmFpbCBvdGhlcndpc2UuXG4gICAqIC0gYG5vLWNhY2hlYDogcmV0dXJuIHJlc3VsdCBmcm9tIG5ldHdvcmssIGZhaWwgaWYgbmV0d29yayBjYWxsIGRvZXNuJ3Qgc3VjY2VlZCwgZG9uJ3Qgc2F2ZSB0byBjYWNoZVxuICAgKiAtIGBuZXR3b3JrLW9ubHlgOiByZXR1cm4gcmVzdWx0IGZyb20gbmV0d29yaywgZmFpbCBpZiBuZXR3b3JrIGNhbGwgZG9lc24ndCBzdWNjZWVkLCBzYXZlIHRvIGNhY2hlXG4gICAqIC0gYHN0YW5kYnlgOiBvbmx5IGZvciBxdWVyaWVzIHRoYXQgYXJlbid0IGFjdGl2ZWx5IHdhdGNoZWQsIGJ1dCBzaG91bGQgYmUgYXZhaWxhYmxlIGZvciByZWZldGNoIGFuZCB1cGRhdGVRdWVyaWVzLlxuICAgKlxuICAgKiBAc3VtbWFyeSBUaGUgW2ZldGNoUG9saWN5XShodHRwczovL3d3dy5hcG9sbG9ncmFwaHFsLmNvbS9kb2NzL3JlYWN0L2FwaS9jb3JlL0Fwb2xsb0NsaWVudC8jRmV0Y2hQb2xpY3kpIGZvciB0aGUgcXVlcnkuXG4gICAqL1xuICBkZWNsYXJlIGZldGNoUG9saWN5PzogRmV0Y2hQb2xpY3k7XG5cbiAgLyoqXG4gICAqIFdoZW4gc29tZW9uZSBjaG9vc2VzIGNhY2hlLWFuZC1uZXR3b3JrIG9yIG5ldHdvcmstb25seSBhcyB0aGVpclxuICAgKiBpbml0aWFsIEZldGNoUG9saWN5LCB0aGV5IG9mdGVuIGRvIG5vdCB3YW50IGZ1dHVyZSBjYWNoZSB1cGRhdGVzIHRvXG4gICAqIHRyaWdnZXIgdW5jb25kaXRpb25hbCBuZXR3b3JrIHJlcXVlc3RzLCB3aGljaCBpcyB3aGF0IHJlcGVhdGVkbHlcbiAgICogYXBwbHlpbmcgdGhlIGNhY2hlLWFuZC1uZXR3b3JrIG9yIG5ldHdvcmstb25seSBwb2xpY2llcyB3b3VsZCBzZWVtXG4gICAqIHRvIGltcGx5LiBJbnN0ZWFkLCB3aGVuIHRoZSBjYWNoZSByZXBvcnRzIGFuIHVwZGF0ZSBhZnRlciB0aGVcbiAgICogaW5pdGlhbCBuZXR3b3JrIHJlcXVlc3QsIGl0IG1heSBiZSBkZXNpcmFibGUgZm9yIHN1YnNlcXVlbnQgbmV0d29ya1xuICAgKiByZXF1ZXN0cyB0byBiZSB0cmlnZ2VyZWQgb25seSBpZiB0aGUgY2FjaGUgcmVzdWx0IGlzIGluY29tcGxldGUuXG4gICAqIFRoZSBuZXh0RmV0Y2hQb2xpY3kgb3B0aW9uIHByb3ZpZGVzIGEgd2F5IHRvIHVwZGF0ZVxuICAgKiBvcHRpb25zLmZldGNoUG9saWN5IGFmdGVyIHRoZSBpbnRpYWwgbmV0d29yayByZXF1ZXN0LCB3aXRob3V0XG4gICAqIGhhdmluZyB0byBzZXQgb3B0aW9ucy5cbiAgICpcbiAgICogQHN1bW1hcnkgU2V0IHRvIHByZXZlbnQgc3Vic2VxdWVudCBuZXR3b3JrIHJlcXVlc3RzIHdoZW4gdGhlIGZldGNoIHBvbGljeSBpcyBgY2FjaGUtYW5kLW5ldHdvcmtgIG9yIGBuZXR3b3JrLW9ubHlgLlxuICAgKi9cbiAgZGVjbGFyZSBuZXh0RmV0Y2hQb2xpY3k/OiBGZXRjaFBvbGljeTtcblxuICAvKipcbiAgICogSWYgZGF0YSB3YXMgcmVhZCBmcm9tIHRoZSBjYWNoZSB3aXRoIG1pc3NpbmcgZmllbGRzLFxuICAgKiBwYXJ0aWFsIHdpbGwgYmUgdHJ1ZS4gT3RoZXJ3aXNlLCBwYXJ0aWFsIHdpbGwgYmUgZmFsc3kuXG4gICAqXG4gICAqIEBzdW1tYXJ5IFRydWUgd2hlbiB0aGUgcXVlcnkgcmV0dXJuZWQgcGFydGlhbCBkYXRhLlxuICAgKi9cbiAgZGVjbGFyZSBwYXJ0aWFsPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogSWYgdHJ1ZSwgcGVyZm9ybSBhIHF1ZXJ5IHJlZmV0Y2ggaWYgdGhlIHF1ZXJ5IHJlc3VsdCBpcyBtYXJrZWQgYXMgYmVpbmcgcGFydGlhbCxcbiAgICogYW5kIHRoZSByZXR1cm5lZCBkYXRhIGlzIHJlc2V0IHRvIGFuIGVtcHR5IE9iamVjdCBieSB0aGUgQXBvbGxvIENsaWVudCBRdWVyeU1hbmFnZXJcbiAgICogKGR1ZSB0byBhIGNhY2hlIG1pc3MpLlxuICAgKlxuICAgKiBUaGUgZGVmYXVsdCB2YWx1ZSBpcyBmYWxzZSBmb3IgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkncyBzYWtlLFxuICAgKiBidXQgc2hvdWxkIGJlIGNoYW5nZWQgdG8gdHJ1ZSBmb3IgbW9zdCB1c2UtY2FzZXMuXG4gICAqXG4gICAqIEBzdW1tYXJ5IFNldCB0byByZXRyeSBhbnkgcGFydGlhbCBxdWVyeSByZXN1bHRzLlxuICAgKi9cbiAgZGVjbGFyZSBwYXJ0aWFsUmVmZXRjaD86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIE9wdCBpbnRvIHJlY2VpdmluZyBwYXJ0aWFsIHJlc3VsdHMgZnJvbSB0aGUgY2FjaGUgZm9yIHF1ZXJpZXNcbiAgICogdGhhdCBhcmUgbm90IGZ1bGx5IHNhdGlzZmllZCBieSB0aGUgY2FjaGUuXG4gICAqL1xuICBkZWNsYXJlIHJldHVyblBhcnRpYWxEYXRhPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogYG5ldHdvcmtTdGF0dXNgIGlzIHVzZWZ1bCBpZiB5b3Ugd2FudCB0byBkaXNwbGF5IGEgZGlmZmVyZW50IGxvYWRpbmcgaW5kaWNhdG9yIChvciBubyBpbmRpY2F0b3IgYXQgYWxsKVxuICAgKiBkZXBlbmRpbmcgb24geW91ciBuZXR3b3JrIHN0YXR1cyBhcyBpdCBwcm92aWRlcyBhIG1vcmUgZGV0YWlsZWQgdmlldyBpbnRvIHRoZSBzdGF0ZSBvZiBhIG5ldHdvcmsgcmVxdWVzdFxuICAgKiBvbiB5b3VyIGNvbXBvbmVudCB0aGFuIGBsb2FkaW5nYCBkb2VzLiBgbmV0d29ya1N0YXR1c2AgaXMgYW4gZW51bSB3aXRoIGRpZmZlcmVudCBudW1iZXIgdmFsdWVzIGJldHdlZW4gMSBhbmQgOC5cbiAgICogVGhlc2UgbnVtYmVyIHZhbHVlcyBlYWNoIHJlcHJlc2VudCBhIGRpZmZlcmVudCBuZXR3b3JrIHN0YXRlLlxuICAgKlxuICAgKiAxLiBgbG9hZGluZ2A6IFRoZSBxdWVyeSBoYXMgbmV2ZXIgYmVlbiBydW4gYmVmb3JlIGFuZCB0aGUgcmVxdWVzdCBpcyBub3cgcGVuZGluZy4gQSBxdWVyeSB3aWxsIHN0aWxsIGhhdmUgdGhpcyBuZXR3b3JrIHN0YXR1cyBldmVuIGlmIGEgcmVzdWx0IHdhcyByZXR1cm5lZCBmcm9tIHRoZSBjYWNoZSwgYnV0IGEgcXVlcnkgd2FzIGRpc3BhdGNoZWQgYW55d2F5LlxuICAgKiAyLiBgc2V0VmFyaWFibGVzYDogSWYgYSBxdWVyeVx1MjAxOXMgdmFyaWFibGVzIGNoYW5nZSBhbmQgYSBuZXR3b3JrIHJlcXVlc3Qgd2FzIGZpcmVkIHRoZW4gdGhlIG5ldHdvcmsgc3RhdHVzIHdpbGwgYmUgc2V0VmFyaWFibGVzIHVudGlsIHRoZSByZXN1bHQgb2YgdGhhdCBxdWVyeSBjb21lcyBiYWNrLiBSZWFjdCB1c2VycyB3aWxsIHNlZSB0aGlzIHdoZW4gb3B0aW9ucy52YXJpYWJsZXMgY2hhbmdlcyBvbiB0aGVpciBxdWVyaWVzLlxuICAgKiAzLiBgZmV0Y2hNb3JlYDogSW5kaWNhdGVzIHRoYXQgZmV0Y2hNb3JlIHdhcyBjYWxsZWQgb24gdGhpcyBxdWVyeSBhbmQgdGhhdCB0aGUgbmV0d29yayByZXF1ZXN0IGNyZWF0ZWQgaXMgY3VycmVudGx5IGluIGZsaWdodC5cbiAgICogNC4gYHJlZmV0Y2hgOiBJdCBtZWFucyB0aGF0IHJlZmV0Y2ggd2FzIGNhbGxlZCBvbiBhIHF1ZXJ5IGFuZCB0aGUgcmVmZXRjaCByZXF1ZXN0IGlzIGN1cnJlbnRseSBpbiBmbGlnaHQuXG4gICAqIDUuIFVudXNlZC5cbiAgICogNi4gYHBvbGxgOiBJbmRpY2F0ZXMgdGhhdCBhIHBvbGxpbmcgcXVlcnkgaXMgY3VycmVudGx5IGluIGZsaWdodC4gU28gZm9yIGV4YW1wbGUgaWYgeW91IGFyZSBwb2xsaW5nIGEgcXVlcnkgZXZlcnkgMTAgc2Vjb25kcyB0aGVuIHRoZSBuZXR3b3JrIHN0YXR1cyB3aWxsIHN3aXRjaCB0byBwb2xsIGV2ZXJ5IDEwIHNlY29uZHMgd2hlbmV2ZXIgYSBwb2xsIHJlcXVlc3QgaGFzIGJlZW4gc2VudCBidXQgbm90IHJlc29sdmVkLlxuICAgKiA3LiBgcmVhZHlgOiBObyByZXF1ZXN0IGlzIGluIGZsaWdodCBmb3IgdGhpcyBxdWVyeSwgYW5kIG5vIGVycm9ycyBoYXBwZW5lZC4gRXZlcnl0aGluZyBpcyBPSy5cbiAgICogOC4gYGVycm9yYDogTm8gcmVxdWVzdCBpcyBpbiBmbGlnaHQgZm9yIHRoaXMgcXVlcnksIGJ1dCBvbmUgb3IgbW9yZSBlcnJvcnMgd2VyZSBkZXRlY3RlZC5cbiAgICpcbiAgICogSWYgdGhlIG5ldHdvcmsgc3RhdHVzIGlzIGxlc3MgdGhlbiA3IHRoZW4gaXQgaXMgZXF1aXZhbGVudCB0byBgbG9hZGluZ2AgYmVpbmcgdHJ1ZS4gSW4gZmFjdCB5b3UgY291bGRcbiAgICogcmVwbGFjZSBhbGwgb2YgeW91ciBgbG9hZGluZ2AgY2hlY2tzIHdpdGggYG5ldHdvcmtTdGF0dXMgPCA3YCBhbmQgeW91IHdvdWxkIG5vdCBzZWUgYSBkaWZmZXJlbmNlLlxuICAgKiBJdCBpcyByZWNvbW1lbmRlZCB0aGF0IHlvdSB1c2UgYGxvYWRpbmdgLCBob3dldmVyLlxuICAgKi9cbiAgZGVjbGFyZSBuZXR3b3JrU3RhdHVzOiBOZXR3b3JrU3RhdHVzO1xuXG4gIC8qKlxuICAgKiBUaGUgQXBvbGxvIGBPYnNlcnZhYmxlUXVlcnlgIHdhdGNoaW5nIHRoaXMgZWxlbWVudCdzIHF1ZXJ5LlxuICAgKi9cbiAgZGVjbGFyZSBvYnNlcnZhYmxlUXVlcnk/OiBPYnNlcnZhYmxlUXVlcnk8RGF0YTxEPiwgVmFyaWFibGVzPEQsIFY+PjtcblxuICAvKipcbiAgICogU2V0IHRvIHJlb2JzZXJ2ZSB0aGUgYE9ic2VydmFibGVRdWVyeWBcbiAgICovXG4gIGRlY2xhcmUgb3B0aW9uczogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIERhdGE8RD4+PiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHVwZGF0ZXMgdG8gdGhlIG5ldHdvcmsgc3RhdHVzIHNob3VsZCB0cmlnZ2VyIG5leHQgb24gdGhlIG9ic2VydmVyIG9mIHRoaXMgcXVlcnkuXG4gICAqL1xuICBkZWNsYXJlIG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIGludGVydmFsIChpbiBtaWxsaXNlY29uZHMpIG9uIHdoaWNoIHRoaXMgcXVlcnkgc2hvdWxkIGJlIHJlZmV0Y2hlZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqL1xuICBkZWNsYXJlIHBvbGxJbnRlcnZhbD86IG51bWJlcjtcblxuICAvKipcbiAgICogZXJyb3JQb2xpY3kgZGV0ZXJtaW5lcyB0aGUgbGV2ZWwgb2YgZXZlbnRzIGZvciBlcnJvcnMgaW4gdGhlIGV4ZWN1dGlvbiByZXN1bHQuIFRoZSBvcHRpb25zIGFyZTpcbiAgICogLSBgbm9uZWAgKGRlZmF1bHQpOiBhbnkgZXJyb3JzIGZyb20gdGhlIHJlcXVlc3QgYXJlIHRyZWF0ZWQgbGlrZSBydW50aW1lIGVycm9ycyBhbmQgdGhlIG9ic2VydmFibGUgaXMgc3RvcHBlZCAoWFhYIHRoaXMgaXMgZGVmYXVsdCB0byBsb3dlciBicmVha2luZyBjaGFuZ2VzIGdvaW5nIGZyb20gQUMgMS4wID0+IDIuMClcbiAgICogLSBgaWdub3JlYDogZXJyb3JzIGZyb20gdGhlIHJlcXVlc3QgZG8gbm90IHN0b3AgdGhlIG9ic2VydmFibGUsIGJ1dCBhbHNvIGRvbid0IGNhbGwgYG5leHRgXG4gICAqIC0gYGFsbGA6IGVycm9ycyBhcmUgdHJlYXRlZCBsaWtlIGRhdGEgYW5kIHdpbGwgbm90aWZ5IG9ic2VydmFibGVzXG4gICAqL1xuICBkZWNsYXJlIGVycm9yUG9saWN5OiBFcnJvclBvbGljeTtcblxuICAvKipcbiAgICogV2hlbiB0cnVlLCB0aGUgY29tcG9uZW50IHdpbGwgbm90IGF1dG9tYXRpY2FsbHkgc3Vic2NyaWJlIHRvIG5ldyBkYXRhLlxuICAgKiBDYWxsIHRoZSBgc3Vic2NyaWJlKClgIG1ldGhvZCB0byBkbyBzby5cbiAgICovXG4gIGRlY2xhcmUgbm9BdXRvU3Vic2NyaWJlOiBib29sZWFuO1xuXG4gIC8qKiBGbGFncyBhbiBlbGVtZW50IHRoYXQncyByZWFkeSBhbmQgYWJsZSB0byBhdXRvIHN1YnNjcmliZSAqL1xuICBwdWJsaWMgZ2V0IGNhbkF1dG9TdWJzY3JpYmUoKTogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvciguLi5hOiBhbnlbXSk7XG5cbiAgLyoqXG4gICAqIE9wdGlvbmFsIGNhbGxiYWNrIGZvciB3aGVuIGEgcXVlcnkgaXMgY29tcGxldGVkLlxuICAgKi9cbiAgb25EYXRhPyhfcmVzdWx0OiBBcG9sbG9RdWVyeVJlc3VsdDxEYXRhPEQ+Pik6IHZvaWRcblxuICAvKipcbiAgICogT3B0aW9uYWwgY2FsbGJhY2sgZm9yIHdoZW4gYW4gZXJyb3Igb2NjdXJzLlxuICAgKi9cbiAgb25FcnJvcj8oX2Vycm9yOiBFcnJvcik6IHZvaWRcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB2YXJpYWJsZXMgb2YgdGhpcyBvYnNlcnZhYmxlIHF1ZXJ5LCBhbmQgZmV0Y2ggdGhlIG5ldyByZXN1bHRzLlxuICAgKiBAcGFyYW0gdmFyaWFibGVzIFRoZSBuZXcgc2V0IG9mIHZhcmlhYmxlcy4gSWYgdGhlcmUgYXJlIG1pc3NpbmcgdmFyaWFibGVzLCB0aGUgcHJldmlvdXMgdmFsdWVzIG9mIHRob3NlIHZhcmlhYmxlcyB3aWxsIGJlIHVzZWQuLlxuICAgKi9cbiAgcmVmZXRjaCh2YXJpYWJsZXM6IFZhcmlhYmxlczxELCBWPik6IFByb21pc2U8QXBvbGxvUXVlcnlSZXN1bHQ8RGF0YTxEPj4+O1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGF0dGVtcHQgdG8gc3Vic2NyaWJlIGkuZS4gYmVnaW4gcXVlcnlpbmdcbiAgICogT3ZlcnJpZGUgdG8gcHJldmVudCBzdWJzY3JpYmluZyB1bmxlc3MgeW91ciBjb25kaXRpb25zIGFyZSBtZXRcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBzaG91bGRTdWJzY3JpYmUoXG4gICAgb3B0aW9ucz86IFBhcnRpYWw8U3Vic2NyaXB0aW9uT3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIERhdGE8RD4+PlxuICApOiBib29sZWFuXG5cbiAgLyoqXG4gICAqIFJlc2V0cyB0aGUgb2JzZXJ2YWJsZVF1ZXJ5IGFuZCBzdWJzY3JpYmVzLlxuICAgKi9cbiAgc3Vic2NyaWJlKFxuICAgIHBhcmFtcz86IFBhcnRpYWw8U3Vic2NyaXB0aW9uT3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIERhdGE8RD4+PlxuICApOiBaZW5PYnNlcnZhYmxlLlN1YnNjcmlwdGlvbjtcblxuICAvKipcbiAgICogTGV0cyB5b3UgcGFzcyBhIEdyYXBoUUwgc3Vic2NyaXB0aW9uIGFuZCB1cGRhdGVRdWVyeSBmdW5jdGlvblxuICAgKiB0byBzdWJzY3JpYmUgdG8gbW9yZSB1cGRhdGVzIGZvciB5b3VyIHF1ZXJ5LlxuICAgKlxuICAgKiBUaGUgYHVwZGF0ZVF1ZXJ5YCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBwcmV2aW91cyBxdWVyeSBkYXRhLFxuICAgKiB0aGVuIGEgYHsgc3Vic2NyaXB0aW9uRGF0YTogVFN1YnNjcmlwdGlvblJlc3VsdCB9YCBvYmplY3QsXG4gICAqIGFuZCByZXR1cm5zIGFuIG9iamVjdCB3aXRoIHVwZGF0ZWQgcXVlcnkgZGF0YSBiYXNlZCBvbiB0aGUgbmV3IHJlc3VsdHMuXG4gICAqL1xuICBzdWJzY3JpYmVUb01vcmUob3B0aW9uczogU3Vic2NyaWJlVG9Nb3JlT3B0aW9uczxEYXRhPEQ+LCBWYXJpYWJsZXM8RCwgVj4+KTogKCgpID0+IHZvaWQpIHwgdm9pZDtcblxuICAvKipcbiAgICogRXhlY3V0ZXMgYSBRdWVyeSBvbmNlIGFuZCB1cGRhdGVzIHRoZSBjb21wb25lbnQgd2l0aCB0aGUgcmVzdWx0XG4gICAqL1xuICBleGVjdXRlUXVlcnkoXG4gICAgcGFyYW1zPzogUGFydGlhbDxRdWVyeU9wdGlvbnM8VmFyaWFibGVzPEQsIFY+Pj5cbiAgKTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxEYXRhPEQ+PiB8IHZvaWQ+O1xuXG4gIC8qKlxuICAgKiBFeHBvc2VzIHRoZSBgT2JzZXJ2YWJsZVF1ZXJ5I2ZldGNoTW9yZWAgbWV0aG9kLlxuICAgKiBodHRwczovL3d3dy5hcG9sbG9ncmFwaHFsLmNvbS9kb2NzL3JlYWN0L2FwaS9jb3JlL09ic2VydmFibGVRdWVyeS8jT2JzZXJ2YWJsZVF1ZXJ5LmZldGNoTW9yZVxuICAgKlxuICAgKiBUaGUgb3B0aW9uYWwgYHVwZGF0ZVF1ZXJ5YCBwYXJhbWV0ZXIgaXMgYSBmdW5jdGlvbiB0aGF0IHRha2VzIHRoZSBwcmV2aW91cyBxdWVyeSBkYXRhLFxuICAgKiB0aGVuIGEgYHsgc3Vic2NyaXB0aW9uRGF0YTogVFN1YnNjcmlwdGlvblJlc3VsdCB9YCBvYmplY3QsXG4gICAqIGFuZCByZXR1cm5zIGFuIG9iamVjdCB3aXRoIHVwZGF0ZWQgcXVlcnkgZGF0YSBiYXNlZCBvbiB0aGUgbmV3IHJlc3VsdHMuXG4gICAqXG4gICAqIFRoZSBvcHRpb25hbCBgdmFyaWFibGVzYCBwYXJhbWV0ZXIgaXMgYW4gb3B0aW9uYWwgbmV3IHZhcmlhYmxlcyBvYmplY3QuXG4gICAqL1xuICBmZXRjaE1vcmUocGFyYW1zPzogUGFydGlhbDxGZXRjaE1vcmVQYXJhbXM8RCwgVj4+KTogUHJvbWlzZTxBcG9sbG9RdWVyeVJlc3VsdDxEYXRhPEQ+Pj47XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgT2JzZXJ2YWJsZVF1ZXJ5IHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQgYnkgdGhlIGVsZW1lbnQuXG4gICAqIC0gYGNvbnRleHRgIENvbnRleHQgdG8gYmUgcGFzc2VkIHRvIGxpbmsgZXhlY3V0aW9uIGNoYWluXG4gICAqIC0gYGVycm9yUG9saWN5YCBTcGVjaWZpZXMgdGhlIEVycm9yUG9saWN5IHRvIGJlIHVzZWQgZm9yIHRoaXMgcXVlcnlcbiAgICogLSBgZmV0Y2hQb2xpY3lgIFNwZWNpZmllcyB0aGUgRmV0Y2hQb2xpY3kgdG8gYmUgdXNlZCBmb3IgdGhpcyBxdWVyeVxuICAgKiAtIGBmZXRjaFJlc3VsdHNgIFdoZXRoZXIgb3Igbm90IHRvIGZldGNoIHJlc3VsdHNcbiAgICogLSBgbWV0YWRhdGFgIEFyYml0cmFyeSBtZXRhZGF0YSBzdG9yZWQgaW4gdGhlIHN0b3JlIHdpdGggdGhpcyBxdWVyeS4gRGVzaWduZWQgZm9yIGRlYnVnZ2luZywgZGV2ZWxvcGVyIHRvb2xzLCBldGMuXG4gICAqIC0gYG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZWAgV2hldGhlciBvciBub3QgdXBkYXRlcyB0byB0aGUgbmV0d29yayBzdGF0dXMgc2hvdWxkIHRyaWdnZXIgbmV4dCBvbiB0aGUgb2JzZXJ2ZXIgb2YgdGhpcyBxdWVyeVxuICAgKiAtIGBwb2xsSW50ZXJ2YWxgIFRoZSB0aW1lIGludGVydmFsIChpbiBtaWxsaXNlY29uZHMpIG9uIHdoaWNoIHRoaXMgcXVlcnkgc2hvdWxkIGJlIHJlZmV0Y2hlZCBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqIC0gYHF1ZXJ5YCBBIEdyYXBoUUwgZG9jdW1lbnQgdGhhdCBjb25zaXN0cyBvZiBhIHNpbmdsZSBxdWVyeSB0byBiZSBzZW50IGRvd24gdG8gdGhlIHNlcnZlci5cbiAgICogLSBgdmFyaWFibGVzYCBBIG1hcCBnb2luZyBmcm9tIHZhcmlhYmxlIG5hbWUgdG8gdmFyaWFibGUgdmFsdWUsIHdoZXJlIHRoZSB2YXJpYWJsZXMgYXJlIHVzZWQgd2l0aGluIHRoZSBHcmFwaFFMIHF1ZXJ5LlxuICAgKi9cbiAgd2F0Y2hRdWVyeShcbiAgICBvcHRpb25zPzogUGFydGlhbDxXYXRjaFF1ZXJ5T3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIERhdGE8RD4+PlxuICApOiBPYnNlcnZhYmxlUXVlcnk8RGF0YTxEPiwgVmFyaWFibGVzPEQsIFY+Pjtcbn1cblxuZXhwb3J0IGNsYXNzIEFwb2xsb1F1ZXJ5RWxlbWVudDxEID0gdW5rbm93biwgViA9IE9wZXJhdGlvblZhcmlhYmxlcz5cbiAgZXh0ZW5kcyBBcG9sbG9RdWVyeU1peGluKEhUTUxFbGVtZW50KTxELCBWPiB7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBHcmFwaFFMRXJyb3IgfSBmcm9tICdAYXBvbGxvLWVsZW1lbnRzL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgdHlwZSB7XG4gIEFwb2xsb0NsaWVudCxcbiAgQXBvbGxvRXJyb3IsXG4gIERvY3VtZW50Tm9kZSxcbiAgTm9ybWFsaXplZENhY2hlT2JqZWN0LFxuICBPcGVyYXRpb25WYXJpYWJsZXMsXG4gIFR5cGVkRG9jdW1lbnROb2RlLFxufSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcblxuaW1wb3J0IHR5cGUgeyBDdXN0b21FbGVtZW50IH0gZnJvbSAnLi9jb25zdHJ1Y3Rvcic7XG5pbXBvcnQgdHlwZSB7IERhdGEsIFZhcmlhYmxlcyB9IGZyb20gJy4vb3BlcmF0aW9uJztcblxuaW1wb3J0IHsgQXBvbGxvRWxlbWVudE1peGluIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9taXhpbnMvYXBvbGxvLWVsZW1lbnQtbWl4aW4nO1xuXG4vKipcbiAqIENvbW1vbiBiYXNlIGludGVyZmFjZSBmb3IgYXBvbGxvIGVsZW1lbnRzXG4gKlxuICogQGVsZW1lbnRcbiAqXG4gKiBAZmlyZXMgJ2Fwb2xsby1lbGVtZW50LWNvbm5lY3RlZCcgd2hlbiB0aGUgZWxlbWVudCBjb25uZWN0cyB0byB0aGUgZG9tXG4gKiBAZmlyZXMgJ2Fwb2xsby1lbGVtZW50LWRpc2Nvbm5lY3RlZCcgd2hlbiB0aGUgZWxlbWVudCBkaXNjb25uZWN0cyBmcm9tIHRoZSBkb21cbiAqL1xuZXhwb3J0IGRlY2xhcmUgYWJzdHJhY3QgY2xhc3MgQXBvbGxvRWxlbWVudEludGVyZmFjZSBleHRlbmRzIEN1c3RvbUVsZW1lbnQge1xuICBkZWNsYXJlIHN0YXRpYyBkb2N1bWVudFR5cGU6ICdkb2N1bWVudCd8J3F1ZXJ5J3wnbXV0YXRpb24nfCdzdWJzY3JpcHRpb24nO1xuXG4gIC8qKiBkYXRhICovXG4gIGFic3RyYWN0IGRhdGE6IHVua25vd24gfCBudWxsO1xuXG4gIC8qKiBPcGVyYXRpb24gdmFyaWFibGVzICovXG4gIGFic3RyYWN0IHZhcmlhYmxlczogdW5rbm93biB8IG51bGw7XG5cbiAgLyoqIFRoZSBBcG9sbG8gQ2xpZW50IGluc3RhbmNlLiAqL1xuICBkZWNsYXJlIGNsaWVudDogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBHcmFwaFFMIG9wZXJhdGlvbiBkb2N1bWVudCBpLmUuIHF1ZXJ5LCBzdWJzY3JpcHRpb24sIG9yIG11dGF0aW9uLlxuICAgKiBNdXN0IGJlIGEgcGFyc2VkIEdyYXBoUUwgRG9jdW1lbnROb2RlLCBzbyB1c2UgYGdyYXBocWwtdGFnYC5cbiAgICogSWYgdW5zZXQsIHRoZSBlbGVtZW50IGNhbiBkZXJpdmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIGZpcnN0XG4gICAqIGxpZ2h0LURPTSBgPHNjcmlwdCB0eXBlPVwiYXBwbGljYXRpb24vZ3JhcGhxbFwiPmAgY2hpbGQuXG4gICAqL1xuICBkZWNsYXJlIGRvY3VtZW50OiBEb2N1bWVudE5vZGUgfCBUeXBlZERvY3VtZW50Tm9kZSB8IG51bGw7XG5cbiAgLyoqIENvbnRleHQgcGFzc2VkIHRvIHRoZSBsaW5rIGV4ZWN1dGlvbiBjaGFpbi4gKi9cbiAgZGVjbGFyZSBjb250ZXh0PzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG5cbiAgLyoqIExhdGVzdCBlcnJvciAqL1xuICBkZWNsYXJlIGVycm9yOiBFcnJvciB8IEFwb2xsb0Vycm9yIHwgbnVsbDtcblxuICAvKiogTGF0ZXN0IGVycm9ycyAqL1xuICBkZWNsYXJlIGVycm9yczogcmVhZG9ubHkgR3JhcGhRTEVycm9yW10gfCBudWxsO1xuXG4gIC8qKiBXaGV0aGVyIGEgcmVxdWVzdCBpcyBpbiBmbGlnaHQuICovXG4gIGRlY2xhcmUgbG9hZGluZzogYm9vbGVhbjtcblxuICBjb25zdHJ1Y3RvciguLi5hOiBhbnlbXSk7XG5cbiAgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZDtcblxuICBkZWNsYXJlIHByb3RlY3RlZCBtbz86IE11dGF0aW9uT2JzZXJ2ZXI7XG5cbiAgLyoqXG4gICAqIExpZmVjeWNsZSBjYWxsYmFjayB0aGF0IHJlYWN0cyB0byBjaGFuZ2VzIGluIHRoZSBHcmFwaFFMIGRvY3VtZW50XG4gICAqL1xuICBwcm90ZWN0ZWQgZG9jdW1lbnRDaGFuZ2VkPyhkb2N1bWVudDogdGhpc1snZG9jdW1lbnQnXSk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIExpZmVjeWNsZSBjYWxsYmFjayB0aGF0IHJlYWN0cyB0byBjaGFuZ2VzIGluIHRoZSBvcGVyYXRpb24gdmFyaWFibGVzXG4gICAqL1xuICBwcm90ZWN0ZWQgdmFyaWFibGVzQ2hhbmdlZD8odmFyaWFibGVzOiB0aGlzWyd2YXJpYWJsZXMnXSk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEdldHMgb3BlcmF0aW9uIHZhcmlhYmxlcyBmcm9tIHRoZSBlbGVtZW50J3MgSlNPTiBzY3JpcHQgY2hpbGRcbiAgICovXG4gIHByb3RlY3RlZCBnZXRET01WYXJpYWJsZXMoKTogdGhpc1sndmFyaWFibGVzJ107XG5cbiAgLyoqXG4gICAqIEdldCBhIEdyYXBoUUwgRG9jdW1lbnROb2RlIGZyb20gdGhlIGVsZW1lbnQncyBHcmFwaFFMIHNjcmlwdCBjaGlsZFxuICAgKi9cbiAgcHJvdGVjdGVkIGdldERPTUdyYXBoUUxEb2N1bWVudCgpOiB0aGlzWydkb2N1bWVudCddO1xuXG4gIHByaXZhdGUgb25ET01NdXRhdGlvbihyZWNvcmRzOiBNdXRhdGlvblJlY29yZFtdKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIEFwb2xsb0VsZW1lbnRFbGVtZW50PEQgPSB1bmtub3duLCBWID0gT3BlcmF0aW9uVmFyaWFibGVzPlxuICBleHRlbmRzIEFwb2xsb0VsZW1lbnRNaXhpbihIVE1MRWxlbWVudCkge1xuICAgIC8qKiBkYXRhICovXG4gICAgZGVjbGFyZSBkYXRhOiBEYXRhPEQ+IHwgbnVsbDtcblxuICAgIC8qKiBPcGVyYXRpb24gdmFyaWFibGVzICovXG4gICAgZGVjbGFyZSB2YXJpYWJsZXM6IFZhcmlhYmxlczxELCBWPiB8IG51bGw7XG59XG4iLCAiLyoqXG4gKiBjdWlkLmpzXG4gKiBDb2xsaXNpb24tcmVzaXN0YW50IFVJRCBnZW5lcmF0b3IgZm9yIGJyb3dzZXJzIGFuZCBub2RlLlxuICogU2VxdWVudGlhbCBmb3IgZmFzdCBkYiBsb29rdXBzIGFuZCByZWNlbmN5IHNvcnRpbmcuXG4gKiBTYWZlIGZvciBlbGVtZW50IElEcyBhbmQgc2VydmVyLXNpZGUgbG9va3Vwcy5cbiAqXG4gKiBFeHRyYWN0ZWQgZnJvbSBDTENUUlxuICpcbiAqIENvcHlyaWdodCAoYykgRXJpYyBFbGxpb3R0IDIwMTJcbiAqIE1JVCBMaWNlbnNlXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIHBhZChudW06IHN0cmluZywgc2l6ZTogbnVtYmVyKTogc3RyaW5nIHtcbiAgY29uc3QgcyA9IGAwMDAwMDAwMDAke251bX1gO1xuICByZXR1cm4gcy5zdWJzdHIocy5sZW5ndGggLSBzaXplKTtcbn1cblxuY29uc3QgZ2xvYmFsQ291bnQgPSBPYmplY3Qua2V5cyh3aW5kb3cpLmxlbmd0aDtcbmNvbnN0IG1pbWVUeXBlc0xlbmd0aCA9IG5hdmlnYXRvci5taW1lVHlwZXMgPyBuYXZpZ2F0b3IubWltZVR5cGVzLmxlbmd0aCA6IDA7XG5jb25zdCBjbGllbnRJZCA9IHBhZCgobWltZVR5cGVzTGVuZ3RoICtcbiAgbmF2aWdhdG9yLnVzZXJBZ2VudC5sZW5ndGgpLnRvU3RyaW5nKDM2KSArXG4gIGdsb2JhbENvdW50LnRvU3RyaW5nKDM2KSwgNCk7XG5cbmV4cG9ydCBmdW5jdGlvbiBmaW5nZXJwcmludCgpOiBzdHJpbmcge1xuICByZXR1cm4gY2xpZW50SWQ7XG59XG5cbmxldCBnZXRSYW5kb21WYWx1ZTogdHlwZW9mIE1hdGgucmFuZG9tO1xuaWYgKHdpbmRvdy5jcnlwdG8pIHtcbiAgY29uc3QgbGltID0gTWF0aC5wb3coMiwgMzIpIC0gMTtcbiAgZ2V0UmFuZG9tVmFsdWUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDMyQXJyYXkoMSkpWzBdIC8gbGltKTtcbiAgfTtcbn0gZWxzZVxuICBnZXRSYW5kb21WYWx1ZSA9IE1hdGgucmFuZG9tO1xuXG5cbmxldCBjID0gMDtcbmNvbnN0IGJsb2NrU2l6ZSA9IDQ7XG5jb25zdCBiYXNlID0gMzY7XG5jb25zdCBkaXNjcmV0ZVZhbHVlcyA9IE1hdGgucG93KGJhc2UsIGJsb2NrU2l6ZSk7XG5cbmZ1bmN0aW9uIHJhbmRvbUJsb2NrKCkge1xuICByZXR1cm4gcGFkKChnZXRSYW5kb21WYWx1ZSgpICpcbiAgICBkaXNjcmV0ZVZhbHVlcyA8PCAwKVxuICAgIC50b1N0cmluZyhiYXNlKSwgYmxvY2tTaXplKTtcbn1cblxuZnVuY3Rpb24gc2FmZUNvdW50ZXIoKSB7XG4gIGMgPSBjIDwgZGlzY3JldGVWYWx1ZXMgPyBjIDogMDtcbiAgYysrOyAvLyB0aGlzIGlzIG5vdCBzdWJsaW1pbmFsXG4gIHJldHVybiBjIC0gMTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGN1aWQoKTogc3RyaW5nIHtcbiAgLy8gU3RhcnRpbmcgd2l0aCBhIGxvd2VyY2FzZSBsZXR0ZXIgbWFrZXNcbiAgLy8gaXQgSFRNTCBlbGVtZW50IElEIGZyaWVuZGx5LlxuICBjb25zdCBsZXR0ZXIgPSAnYyc7IC8vIGhhcmQtY29kZWQgYWxsb3dzIGZvciBzZXF1ZW50aWFsIGFjY2Vzc1xuXG4gIC8vIHRpbWVzdGFtcFxuICAvLyB3YXJuaW5nOiB0aGlzIGV4cG9zZXMgdGhlIGV4YWN0IGRhdGUgYW5kIHRpbWVcbiAgLy8gdGhhdCB0aGUgdWlkIHdhcyBjcmVhdGVkLlxuICBjb25zdCB0aW1lc3RhbXAgPSAobmV3IERhdGUoKS5nZXRUaW1lKCkpLnRvU3RyaW5nKGJhc2UpO1xuXG4gIC8vIFByZXZlbnQgc2FtZS1tYWNoaW5lIGNvbGxpc2lvbnMuXG4gIGNvbnN0IGNvdW50ZXIgPSBwYWQoc2FmZUNvdW50ZXIoKS50b1N0cmluZyhiYXNlKSwgYmxvY2tTaXplKTtcblxuICAvLyBBIGZldyBjaGFycyB0byBnZW5lcmF0ZSBkaXN0aW5jdCBpZHMgZm9yIGRpZmZlcmVudFxuICAvLyBjbGllbnRzIChzbyBkaWZmZXJlbnQgY29tcHV0ZXJzIGFyZSBmYXIgbGVzc1xuICAvLyBsaWtlbHkgdG8gZ2VuZXJhdGUgdGhlIHNhbWUgaWQpXG4gIGNvbnN0IHByaW50ID0gZmluZ2VycHJpbnQoKTtcblxuICAvLyBHcmFiIHNvbWUgbW9yZSBjaGFycyBmcm9tIE1hdGgucmFuZG9tKClcbiAgY29uc3QgcmFuZG9tID0gcmFuZG9tQmxvY2soKSArIHJhbmRvbUJsb2NrKCk7XG5cbiAgcmV0dXJuIGxldHRlciArIHRpbWVzdGFtcCArIGNvdW50ZXIgKyBwcmludCArIHJhbmRvbTtcbn1cblxuY3VpZC5zbHVnID0gZnVuY3Rpb24gc2x1ZygpIHtcbiAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpLnRvU3RyaW5nKDM2KTtcbiAgY29uc3QgY291bnRlciA9IHNhZmVDb3VudGVyKCkudG9TdHJpbmcoMzYpLnNsaWNlKC00KTtcbiAgY29uc3QgcHJpbnQgPSBmaW5nZXJwcmludCgpLnNsaWNlKDAsIDEpICtcbiAgICAgIGZpbmdlcnByaW50KCkuc2xpY2UoLTEpO1xuICBjb25zdCByYW5kb20gPSByYW5kb21CbG9jaygpLnNsaWNlKC0yKTtcblxuICByZXR1cm4gZGF0ZS5zbGljZSgtMikgK1xuICAgIGNvdW50ZXIgKyBwcmludCArIHJhbmRvbTtcbn07XG5cbmN1aWQuaXNDdWlkID0gZnVuY3Rpb24gaXNDdWlkKHN0cmluZ1RvQ2hlY2s6IHN0cmluZykge1xuICBpZiAodHlwZW9mIHN0cmluZ1RvQ2hlY2sgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gIGlmIChzdHJpbmdUb0NoZWNrLnN0YXJ0c1dpdGgoJ2MnKSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbmN1aWQuaXNTbHVnID0gZnVuY3Rpb24gaXNTbHVnKHN0cmluZ1RvQ2hlY2s6IHN0cmluZykge1xuICBpZiAodHlwZW9mIHN0cmluZ1RvQ2hlY2sgIT09ICdzdHJpbmcnKSByZXR1cm4gZmFsc2U7XG4gIGNvbnN0IHN0cmluZ0xlbmd0aCA9IHN0cmluZ1RvQ2hlY2subGVuZ3RoO1xuICBpZiAoc3RyaW5nTGVuZ3RoID49IDcgJiYgc3RyaW5nTGVuZ3RoIDw9IDEwKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY3VpZC5maW5nZXJwcmludCA9IGZpbmdlcnByaW50O1xuIiwgImltcG9ydCB0eXBlIHsgQ29uc3RydWN0b3IgfSBmcm9tICdAYXBvbGxvLWVsZW1lbnRzL2ludGVyZmFjZXMnO1xuaW1wb3J0IHsgQXBvbGxvRWxlbWVudEVsZW1lbnQgfSBmcm9tICdAYXBvbGxvLWVsZW1lbnRzL2ludGVyZmFjZXMvYXBvbGxvLWVsZW1lbnQnO1xuXG5pbXBvcnQgeyBjdWlkIH0gZnJvbSAnLi9jdWlkJztcblxudHlwZSBUeXBlID0gJ2NsaWVudCcgfCAnc3Vic2NyaXB0aW9uJyB8ICdtdXRhdGlvbicgfCAncXVlcnknO1xuXG5jb25zdCBub29wID0gKCkgPT4gdm9pZCBudWxsO1xuXG5jb25zdCBJTlNUQU5DRVMgPSBuZXcgV2Vha01hcCgpO1xuXG5jb25zdCBERVNDUklQVE9SUyA9IG5ldyBXZWFrTWFwKCk7XG5cbmNvbnN0IEVMRU1FTlRfQVBQTElFRCA9IG5ldyBXZWFrTWFwKCk7XG5cbmZ1bmN0aW9uIGlzRWxlbWVudEFwcGxpZWQ8VCBleHRlbmRzIEhUTUxFbGVtZW50Pihob3N0OiBUKTogYm9vbGVhbiB7XG4gIHJldHVybiBFTEVNRU5UX0FQUExJRUQuaGFzKGhvc3QpO1xufVxuXG5mdW5jdGlvbiBnZXRFbGVtZW50RGVzY3JpcHRvcjxUIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KGhvc3Q6IFQpOiBQcm9wZXJ0eURlc2NyaXB0b3JNYXAge1xuICByZXR1cm4gRUxFTUVOVF9BUFBMSUVELmdldChob3N0KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldERlc2NyaXB0b3I8VCBleHRlbmRzIEhUTUxFbGVtZW50Pihob3N0OiBUKTogUHJvcGVydHlEZXNjcmlwdG9yTWFwIHtcbiAgcmV0dXJuIERFU0NSSVBUT1JTLmdldChob3N0KTtcbn1cblxuZnVuY3Rpb24gZ2V0UHJvdG90eXBlRGVzY3JpcHRvcjxTIGV4dGVuZHMgSFRNTEVsZW1lbnQ+KFxuICBzb3VyY2U6IENvbnN0cnVjdG9yPFM+LFxuKTogUHJvcGVydHlEZXNjcmlwdG9yTWFwIHtcbiAgLyoqIFByb3BlcnRpZXMgdG8gbm90IHJlZGVmaW5lICovXG4gIGNvbnN0IGV4Y2x1ZGUgPSBbJ2NsaWVudCcsICdkYXRhJywgJ2Vycm9yJywgJ2Vycm9ycycsICdsb2FkaW5nJywgJ25ldHdvcmtTdGF0dXMnXTtcblxuICAvLyBjbGFzcyBmaWVsZHMgbmVlZCBhIHJlYWwgaW5zdGFuY2UgaW4gb3JkZXIgdG8gZ2V0IHRoZWlyIGRlc2NyaXB0b3JzLlxuICBpZiAoIUlOU1RBTkNFUy5nZXQoc291cmNlKSkge1xuICAgIGN1c3RvbUVsZW1lbnRzLmRlZmluZShgYXBvbGxvLWVsZW1lbnRzLWludGVybWVkaWF0ZS1lbGVtZW50LSR7Y3VpZCgpfWAsIHNvdXJjZSk7XG4gICAgSU5TVEFOQ0VTLnNldChzb3VyY2UsIG5ldyBzb3VyY2UoKSk7XG4gIH1cblxuICBjb25zdCB7IGNvbnN0cnVjdG9yLCAuLi5kZXNjcmlwdG9ycyB9ID0ge1xuICAgIC4uLk9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKElOU1RBTkNFUy5nZXQoc291cmNlKSksXG4gICAgLi4uT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMoT2JqZWN0LmdldFByb3RvdHlwZU9mKHNvdXJjZS5wcm90b3R5cGUpKSxcbiAgfTtcblxuICBleGNsdWRlLmZvckVhY2goa2V5ID0+IGRlbGV0ZSBkZXNjcmlwdG9yc1trZXldKTtcblxuICByZXR1cm4gZGVzY3JpcHRvcnM7XG59XG5cbmZ1bmN0aW9uIHVuc2FmZUFwcGx5UHJvdG90eXBlPFMgZXh0ZW5kcyBIVE1MRWxlbWVudD4oXG4gIHRhcmdldDogUyxcbiAgc291cmNlOiBDb25zdHJ1Y3RvcjxTPixcbik6IFByb3BlcnR5RGVzY3JpcHRvck1hcCB7XG4gIGNvbnN0IGRlc2NyaXB0b3JzID1cbiAgICBnZXRQcm90b3R5cGVEZXNjcmlwdG9yKHNvdXJjZSk7XG5cbiAgY29uc3QgcHJvcGVydGllc1RvQXNzaWduID1cbiAgICBPYmplY3QuZnJvbUVudHJpZXMoT2JqZWN0LmVudHJpZXMoZGVzY3JpcHRvcnMpLm1hcCgoW2tleSwgZGVzY3JpcHRvcl0pID0+IHtcbiAgICAgIGlmICh0eXBlb2YgZGVzY3JpcHRvcj8udmFsdWUgPT09ICdmdW5jdGlvbicpXG4gICAgICAgIHJldHVybiBba2V5LCB7IC4uLmRlc2NyaXB0b3IsIHZhbHVlOiBkZXNjcmlwdG9yLnZhbHVlLmJpbmQodGFyZ2V0KSB9XTtcbiAgICAgIGVsc2VcbiAgICAgICAgcmV0dXJuIFtrZXksIGRlc2NyaXB0b3JdO1xuICAgIH0pKTtcblxuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcGVydGllc1RvQXNzaWduKTtcblxuICByZXR1cm4gcHJvcGVydGllc1RvQXNzaWduO1xufVxuXG5mdW5jdGlvbiB1bnNhZmVBcHBseTxUIGV4dGVuZHMgQXBvbGxvRWxlbWVudEVsZW1lbnQ+KFxuICBob3N0OiBULFxuICBrbGFzczogQ29uc3RydWN0b3I8VD4sXG4gIHR5cGU6IFR5cGUsXG4pOiB2b2lkIHtcbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogY2FuJ3QgYmUgaGVscGVkLlxuICBob3N0LmNvbnN0cnVjdG9yLmRvY3VtZW50VHlwZSA9IHR5cGUgPT09ICdjbGllbnQnID8gJ2RvY3VtZW50JyA6IHR5cGU7IC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIGNvdmVyZWRcblxuICBERVNDUklQVE9SUy5zZXQoaG9zdCwge1xuICAgIC4uLmdldEVsZW1lbnREZXNjcmlwdG9yKGhvc3QpLFxuICAgIC4uLnVuc2FmZUFwcGx5UHJvdG90eXBlKGhvc3QsIGtsYXNzKSxcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIHVuc2FmZUFwcGx5RWxlbWVudDxUIGV4dGVuZHMgQXBvbGxvRWxlbWVudEVsZW1lbnQ+KFxuICBob3N0OiBULFxuICBlZmZlY3RzOiAoaG9zdDogVCkgPT4gdm9pZFxuKTogdm9pZCB7XG4gIGVmZmVjdHMoaG9zdCk7XG4gIEVMRU1FTlRfQVBQTElFRFxuICAgIC5zZXQoaG9zdCwgdW5zYWZlQXBwbHlQcm90b3R5cGUoaG9zdCwgQXBvbGxvRWxlbWVudEVsZW1lbnQpKTtcbn1cblxuLyoqXG4gKiBBcHBsaWVzIGEgY2xhc3MnIHByb3RvdHlwZSB0byBhbiBlbGVtZW50LCBtaXhpbmcgaW4gdGhlIGNsYXNzJyBwcm9wZXJ0aWVzIGFuZCBtZXRob2RzIHRvIHRoZSBlbGVtZW50IGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSAgaG9zdCBFbGVtZW50IHRvIGFwcGx5IHByb3RvdHlwZSBwcm9wZXJ0aWVzIHRvLlxuICogQHBhcmFtICBrbGFzcyBDbGFzcyB3aG9zZSBwcm90b3R5cGUgdG8gYXBwbHkgdG8gdGhlIGhvc3QgZWxlbWVudC5cbiAqIEBwYXJhbSAgdHlwZSBIaW50IGFib3V0IHdoYXQga2luZCBvZiBjbGFzcy9ob3N0IHBhaXIgaXMgaW4gcXVlc3Rpb24uXG4gKiBAcGFyYW0gIGVmZmVjdHMgZnVuY3Rpb24gdGhhdCB3aWxsIHJ1biB0aGUgZmlyc3QgdGltZSB0aGlzIGVsZW1lbnQgaGFzIGEgY2xhc3MgcHJvdG90eXBlIG1peGVkIGluIHZpYSB0aGlzIGhlbHBlci5cbiAqIEByZXR1cm4gQ29tYmluZWQgYFByb3BlcnR5RGVzY3JpcHRvck1hcGAgZm9yIHRoZSBpbnN0YW5jZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFwcGx5UHJvdG90eXBlPFQgZXh0ZW5kcyBBcG9sbG9FbGVtZW50RWxlbWVudDxhbnksIGFueT4+KCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgaG9zdDogVCxcbiAga2xhc3M6IENvbnN0cnVjdG9yPFQ+IHwgdHlwZW9mIEFwb2xsb0VsZW1lbnRFbGVtZW50LFxuICB0eXBlOiBUeXBlLFxuICBlZmZlY3RzOiAoaG9zdDogVCkgPT4gdm9pZCA9IG5vb3AsXG4pOiBQcm9wZXJ0eURlc2NyaXB0b3JNYXAge1xuICBpZiAoIWlzRWxlbWVudEFwcGxpZWQoaG9zdCkgfHwga2xhc3MgPT09IEFwb2xsb0VsZW1lbnRFbGVtZW50KSAvKiBjOCBpZ25vcmUgbmV4dCAqLyAvLyBjb3ZlcmVkXG4gICAgdW5zYWZlQXBwbHlFbGVtZW50KGhvc3QsIGVmZmVjdHMpO1xuXG4gIGlmICghZ2V0RGVzY3JpcHRvcihob3N0KSB8fCBrbGFzcyAhPT0gQXBvbGxvRWxlbWVudEVsZW1lbnQpIC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIGNvdmVyZWRcbiAgICB1bnNhZmVBcHBseShob3N0LCBrbGFzcywgdHlwZSk7XG5cbiAgcmV0dXJuIGdldERlc2NyaXB0b3IoaG9zdCk7XG59XG4iLCAiaW1wb3J0IHR5cGUgeyBBcG9sbG9DbGllbnQsIERvY3VtZW50Tm9kZSwgTm9ybWFsaXplZENhY2hlT2JqZWN0IH0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZSc7XG5cbmltcG9ydCB0eXBlIHtcbiAgQXBvbGxvRWxlbWVudEVsZW1lbnQsXG4gIENvbXBvbmVudERvY3VtZW50LFxuICBDb25zdHJ1Y3Rvcixcbn0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9pbnRlcmZhY2VzJztcblxuaW1wb3J0IHR5cGUgeyBTdGF0ZSB9IGZyb20gJ2hhdW50ZWQnO1xuXG5pbXBvcnQgeyBhcHBseVByb3RvdHlwZSB9IGZyb20gJ0BhcG9sbG8tZWxlbWVudHMvbGliL3Byb3RvdHlwZXMnO1xuXG5pbXBvcnQgeyBIb29rIH0gZnJvbSAnaGF1bnRlZCc7XG5cbmNvbnN0IFBSSVZBVEU6IFJlY29yZDxzdHJpbmcsIFdlYWtNYXA8QXBvbGxvRWxlbWVudEVsZW1lbnQsIHVua25vd24+PiA9IHsgfTtcblxuY29uc3QgREVGQVVMVFMgPSB7XG4gIGRhdGE6IG51bGwsXG4gIGVycm9yOiBudWxsLFxuICBlcnJvcnM6IG51bGwsXG4gIGxvYWRpbmc6IGZhbHNlLFxufTtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFwb2xsb0hvb2s8XG4gIEQsXG4gIFYsXG4gIE9wdGlvbnNUeXBlIGV4dGVuZHMgeyBjbGllbnQ/OiBBcG9sbG9DbGllbnQ8Tm9ybWFsaXplZENhY2hlT2JqZWN0PiB9LFxuICBSZXR1cm5UeXBlIGV4dGVuZHMgdW5rbm93bixcbiAgQ29tcG9uZW50Q2xhc3MgZXh0ZW5kcyBBcG9sbG9FbGVtZW50RWxlbWVudDxELCBWPlxuPiBleHRlbmRzIEhvb2s8W0RvY3VtZW50Tm9kZSwgT3B0aW9uc1R5cGVdLCBSZXR1cm5UeXBlLCBDb21wb25lbnRDbGFzcz4ge1xuICBhYnN0cmFjdCByZWFkb25seSB0eXBlOiAncXVlcnknfCdtdXRhdGlvbid8J3N1YnNjcmlwdGlvbic7XG5cbiAgYWJzdHJhY3QgcmVhZG9ubHkgY29tcG9uZW50Q2xhc3M6IENvbnN0cnVjdG9yPENvbXBvbmVudENsYXNzPjtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgb3B0aW9uc1RvUHJvcGVydGllcygpOiBQYXJ0aWFsPENvbXBvbmVudENsYXNzPjtcblxuICBwcm90ZWN0ZWQgYWJzdHJhY3Qgb3B0aW9uc1RvT3B0aW9uYWxNZXRob2RzKCk6IFBhcnRpYWw8Q29tcG9uZW50Q2xhc3M+O1xuXG4gIGFic3RyYWN0IGRlZmF1bHRzOiBQYXJ0aWFsPENvbXBvbmVudENsYXNzPjtcblxuICByZWFkb25seSByZWFjdGl2ZVByb3BzOiAoa2V5b2YgQ29tcG9uZW50Q2xhc3MpW10gPSBbXTtcblxuICBwcm90ZWN0ZWQgZGlzY29ubmVjdGVkID0gdHJ1ZTtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwdWJsaWMgaWQ6IG51bWJlcixcbiAgICBwdWJsaWMgc3RhdGU6IFN0YXRlPENvbXBvbmVudENsYXNzPixcbiAgICBwdWJsaWMgZG9jdW1lbnQ6IERvY3VtZW50Tm9kZSB8IENvbXBvbmVudERvY3VtZW50PEQ+LFxuICAgIHB1YmxpYyBvcHRpb25zOiBPcHRpb25zVHlwZSA9IHt9IGFzIE9wdGlvbnNUeXBlLFxuICApIHtcbiAgICBzdXBlcihpZCwgc3RhdGUpO1xuICB9XG5cbiAgcHJvdGVjdGVkIGluaXQoKTogdm9pZCB7XG4gICAgdGhpcy5kZWZhdWx0cyA9IHsgLi4uREVGQVVMVFMsIC4uLnRoaXMuZGVmYXVsdHMgfTtcbiAgICB0aGlzLmluaXRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmluaXRIb3N0KCk7XG4gICAgdGhpcy5pbml0UmVhY3RpdmVQcm9wcygpO1xuICAgIHRoaXMuaW5pdE1ldGhvZHMoKTtcbiAgICB0aGlzLmNvbm5lY3QoKTtcbiAgfVxuXG4gIHByaXZhdGUgaW5pdExpc3RlbmVycygpIHtcbiAgICBjb25zdCB1cGRhdGUgPSAoKSA9PiB0aGlzLnVwZGF0ZSh0aGlzLmRvY3VtZW50LCB0aGlzLm9wdGlvbnMpO1xuICAgIHRoaXMuc3RhdGUuaG9zdC5hZGRFdmVudExpc3RlbmVyKGBhcG9sbG8tJHt0aGlzLnR5cGV9LXJlc3VsdGAsIHVwZGF0ZSk7XG4gICAgdGhpcy5zdGF0ZS5ob3N0LmFkZEV2ZW50TGlzdGVuZXIoJ2Fwb2xsby1lcnJvcicsIHVwZGF0ZSk7XG4gIH1cblxuICBwcml2YXRlIGluaXRIb3N0KCk6IHZvaWQge1xuICAgIGFwcGx5UHJvdG90eXBlKHRoaXMuc3RhdGUuaG9zdCwgdGhpcy5jb21wb25lbnRDbGFzcywgdGhpcy50eXBlKTtcbiAgICBPYmplY3QuYXNzaWduKHRoaXMuc3RhdGUuaG9zdCwge1xuICAgICAgLi4udGhpcy5kZWZhdWx0cyxcbiAgICAgIC4uLnRoaXMub3B0aW9uc1RvUHJvcGVydGllcygpLFxuICAgICAgY2xpZW50OiB0aGlzLm9wdGlvbnMuY2xpZW50ID8/IHdpbmRvdy5fX0FQT0xMT19DTElFTlRfXyA/PyBudWxsLFxuICAgIH0pO1xuICB9XG5cbiAgLyoqIGRpcmVjdGx5IGFzc2lnbmluZyBicmVha3Mgc2lub24gc3BpZXMsIHNvIHdlJ2xsIHRha2UgdGhlIGxvbmcgd2F5IGFyb3VuZC4gKi9cbiAgcHJpdmF0ZSBpbml0TWV0aG9kcygpOiB2b2lkIHtcbiAgICBjb25zdCBjb25maWd1cmFibGUgPSB0cnVlO1xuICAgIGNvbnN0IGVudW1lcmFibGUgPSBmYWxzZTtcblxuICAgIE9iamVjdC5lbnRyaWVzKHRoaXMub3B0aW9uc1RvT3B0aW9uYWxNZXRob2RzKCkpLmZvckVhY2goKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuc3RhdGUuaG9zdCwga2V5LCB7IGNvbmZpZ3VyYWJsZSwgZW51bWVyYWJsZSwgdmFsdWUgfSk7IC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIEknbSBjZXJ0YWluIHRoaXMgaXMgYmVpbmcgY2FsbGVkXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGluaXRSZWFjdGl2ZVByb3BzKCk6IHZvaWQge1xuICAgIGNvbnN0IHsgc3RhdGU6IHsgaG9zdCB9IH0gPSB0aGlzO1xuXG4gICAgY29uc3QgcHJvcHMgPSBbJ2xvYWRpbmcnLCAuLi50aGlzLnJlYWN0aXZlUHJvcHNdO1xuXG4gICAgcHJvcHMuZm9yRWFjaCgoa2V5OiBzdHJpbmcgfCBrZXlvZiBDb21wb25lbnRDbGFzcykgPT4ge1xuICAgICAgUFJJVkFURVtrZXkgYXMgc3RyaW5nXSA/Pz0gbmV3IFdlYWtNYXAoKTtcbiAgICAgIFBSSVZBVEVba2V5IGFzIHN0cmluZ10uc2V0KGhvc3QsIHRoaXMuZGVmYXVsdHNba2V5IGFzIGtleW9mIENvbXBvbmVudENsYXNzXSk7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoaG9zdCwga2V5LCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0KCkge1xuICAgICAgICAgIHJldHVybiBQUklWQVRFW2tleSBhcyBzdHJpbmddLmdldChob3N0KTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0KHZhbHVlOiBib29sZWFuKSB7XG4gICAgICAgICAgUFJJVkFURVtrZXkgYXMgc3RyaW5nXS5zZXQoaG9zdCwgdmFsdWUpO1xuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IGJvcnJvd2luZyBhIHByaXZhdGUgQVBJIGluIG9yZGVyIHRvIHNldCB1cCByZWFjdGl2aXR5XG4gICAgICAgICAgaG9zdC5fc2NoZWR1bGVyLnVwZGF0ZSgpO1xuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgY29ubmVjdCgpOiB2b2lkIHtcbiAgICBjb25zdCB7IGNvbm5lY3RlZENhbGxiYWNrLCBkaXNjb25uZWN0ZWRDYWxsYmFjayB9ID0gdGhpcy5jb21wb25lbnRDbGFzcy5wcm90b3R5cGU7XG4gICAgT2JqZWN0LmFzc2lnbih0aGlzLnN0YXRlLmhvc3QsIHsgY29ubmVjdGVkQ2FsbGJhY2ssIGRpc2Nvbm5lY3RlZENhbGxiYWNrIH0pO1xuICAgIHRoaXMuc3RhdGUuaG9zdC5jb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgPSBmYWxzZTtcbiAgfVxuXG4gIHRlYXJkb3duKCk6IHZvaWQge1xuICAgIHRoaXMuc3RhdGUuaG9zdC5kaXNjb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gICAgdGhpcy5kaXNjb25uZWN0ZWQgPSB0cnVlO1xuICB9XG59XG4iLCAiaW1wb3J0IHR5cGUge1xuICBBcG9sbG9DbGllbnQsXG4gIERvY3VtZW50Tm9kZSxcbiAgTm9ybWFsaXplZENhY2hlT2JqZWN0LFxuICBPcGVyYXRpb25WYXJpYWJsZXMsXG4gIFR5cGVkRG9jdW1lbnROb2RlLFxufSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcblxuaW1wb3J0IHR5cGUgeyBTdGF0ZSB9IGZyb20gJ2hhdW50ZWQnO1xuXG5pbXBvcnQgdHlwZSB7IEFwb2xsb1F1ZXJ5SW50ZXJmYWNlIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9pbnRlcmZhY2VzJztcblxuaW1wb3J0IHsgTmV0d29ya1N0YXR1cyB9IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xuXG5pbXBvcnQgeyBBcG9sbG9RdWVyeUVsZW1lbnQgfSBmcm9tICdAYXBvbGxvLWVsZW1lbnRzL2ludGVyZmFjZXMvYXBvbGxvLXF1ZXJ5JztcblxuaW1wb3J0IHsgaG9vayB9IGZyb20gJ2hhdW50ZWQnO1xuXG5pbXBvcnQgeyBBcG9sbG9Ib29rIH0gZnJvbSAnLi9BcG9sbG9Ib29rJztcblxuZXhwb3J0IHR5cGUgUXVlcnlIb29rT3B0aW9uczxELCBWPiA9IFBhcnRpYWw8UGljazxBcG9sbG9RdWVyeUludGVyZmFjZTxELCBWPixcbiAgfCAnY29udGV4dCdcbiAgfCAnZXJyb3JQb2xpY3knXG4gIHwgJ2ZldGNoUG9saWN5J1xuICB8ICduZXh0RmV0Y2hQb2xpY3knXG4gIHwgJ25vQXV0b1N1YnNjcmliZSdcbiAgfCAnbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlJ1xuICB8ICdvbkVycm9yJ1xuICB8ICdwYXJ0aWFsUmVmZXRjaCdcbiAgfCAncG9sbEludGVydmFsJ1xuICB8ICdxdWVyeSdcbiAgfCAncmV0dXJuUGFydGlhbERhdGEnXG4gIHwgJ3Nob3VsZFN1YnNjcmliZSdcbiAgfCAndmFyaWFibGVzJ1xuPiAmIHtcbiAgY2xpZW50PzogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD47XG4gIG9uQ29tcGxldGVkPyhkYXRhOiBEKTogdm9pZDtcbn0+O1xuXG5leHBvcnQgdHlwZSBRdWVyeVJlc3VsdDxELCBWPiA9IFBpY2s8QXBvbGxvUXVlcnlJbnRlcmZhY2U8RCwgVj4sXG4gICAgJ2NsaWVudCdcbiAgfCAnZGF0YSdcbiAgfCAnZXJyb3InXG4gIHwgJ2ZldGNoTW9yZSdcbiAgfCAnbG9hZGluZydcbiAgfCAnbmV0d29ya1N0YXR1cydcbiAgfCAncmVmZXRjaCdcbiAgfCAnc3Vic2NyaWJlVG9Nb3JlJ1xuICB8ICd2YXJpYWJsZXMnXG4+ICYge1xuICBjYWxsZWQ6IHRydWU7XG4gIHN0YXJ0UG9sbGluZzogKG1zOiBudW1iZXIpID0+IHZvaWQ7XG4gIHN0b3BQb2xsaW5nOiAoKSA9PiB2b2lkO1xufVxuXG5jbGFzcyBVc2VRdWVyeUhvb2s8RCA9IHVua25vd24sIFYgPSBPcGVyYXRpb25WYXJpYWJsZXM+IGV4dGVuZHMgQXBvbGxvSG9vazxcbiAgRCxcbiAgVixcbiAgUXVlcnlIb29rT3B0aW9uczxELCBWPixcbiAgUXVlcnlSZXN1bHQ8RCwgVj4sXG4gIEFwb2xsb1F1ZXJ5RWxlbWVudDxELCBWPlxuPiB7XG4gIHJlYWRvbmx5IHR5cGUgPSAncXVlcnknO1xuXG4gIHJlYWRvbmx5IGNvbXBvbmVudENsYXNzID0gQXBvbGxvUXVlcnlFbGVtZW50O1xuXG4gIHJlYWRvbmx5IGRlZmF1bHRzOiBQYXJ0aWFsPEFwb2xsb1F1ZXJ5RWxlbWVudDxELCBWPj4gPSB7XG4gICAgbmV0d29ya1N0YXR1czogTmV0d29ya1N0YXR1cy5yZWFkeSxcbiAgfTtcblxuICBwb2xsaW5nSW50ZXJ2YWw/OiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaWQ6IG51bWJlcixcbiAgICBzdGF0ZTogU3RhdGU8QXBvbGxvUXVlcnlFbGVtZW50PEQsIFY+PixcbiAgICBxdWVyeTogRCBleHRlbmRzIFR5cGVkRG9jdW1lbnROb2RlID8gRCA6IERvY3VtZW50Tm9kZSxcbiAgICBvcHRpb25zPzogUXVlcnlIb29rT3B0aW9uczxELCBWPlxuICApIHtcbiAgICBzdXBlcihpZCwgc3RhdGUsIHF1ZXJ5LCBvcHRpb25zKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvcHRpb25zVG9Qcm9wZXJ0aWVzKCkgOiBQYXJ0aWFsPEFwb2xsb1F1ZXJ5RWxlbWVudDxELCBWPj4ge1xuICAgIGNvbnN0IHsgb25FcnJvciwgb25Db21wbGV0ZWQsIC4uLm9wdGlvbnMgfSA9IHRoaXMub3B0aW9ucztcbiAgICBjb25zdCBxdWVyeSA9IHRoaXMuZG9jdW1lbnQgPz8gb3B0aW9ucy5xdWVyeTtcbiAgICBjb25zdCBub0F1dG9TdWJzY3JpYmUgPVxuICAgICAgb3B0aW9ucy5ub0F1dG9TdWJzY3JpYmUgPz8gdGhpcy5zdGF0ZS5ob3N0Lmhhc0F0dHJpYnV0ZSgnbm8tYXV0by1zdWJzY3JpYmUnKTtcbiAgICBjb25zdCBlcnJvclBvbGljeSA9IG9wdGlvbnMuZXJyb3JQb2xpY3kgPz8gJ25vbmUnO1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLmRlZmF1bHRzLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIG5vQXV0b1N1YnNjcmliZSxcbiAgICAgIGVycm9yUG9saWN5LFxuICAgICAgcXVlcnksXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvcHRpb25zVG9PcHRpb25hbE1ldGhvZHMoKSB7XG4gICAgLy8gc2hvdWxkU3Vic2NyaWJlIGlzIGhhbmRsZWQganVzdCBmaW5lIGJ5IGBhcHBseWBcbiAgICBjb25zdCB7IG9uQ29tcGxldGVkLCBvbkVycm9yIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgcmV0dXJuIHsgb25Db21wbGV0ZWQsIG9uRXJyb3IgfTtcbiAgfVxuXG4gIHVwZGF0ZShfID0gdGhpcy5kb2N1bWVudCwgeyB2YXJpYWJsZXMgPSBudWxsIH0gPSB0aGlzLm9wdGlvbnMpOiBRdWVyeVJlc3VsdDxELCBWPiB7XG4gICAgaWYgKHRoaXMuZGlzY29ubmVjdGVkKSB0aGlzLmNvbm5lY3QoKTtcblxuICAgIGNvbnN0IHsgY2xpZW50LCBkYXRhLCBlcnJvciwgbG9hZGluZywgbmV0d29ya1N0YXR1cyB9ID0gdGhpcy5zdGF0ZS5ob3N0O1xuXG4gICAgY29uc3QgcmVmZXRjaCA9IHRoaXMuc3RhdGUuaG9zdC5yZWZldGNoLmJpbmQodGhpcy5zdGF0ZS5ob3N0KTtcbiAgICBjb25zdCBmZXRjaE1vcmUgPSB0aGlzLnN0YXRlLmhvc3QuZmV0Y2hNb3JlLmJpbmQodGhpcy5zdGF0ZS5ob3N0KTtcbiAgICBjb25zdCBzdWJzY3JpYmVUb01vcmUgPSB0aGlzLnN0YXRlLmhvc3Quc3Vic2NyaWJlVG9Nb3JlLmJpbmQodGhpcy5zdGF0ZS5ob3N0KTtcblxuICAgIGNvbnN0IHN0YXJ0UG9sbGluZyA9IChtczogbnVtYmVyKSA9PlxuICAgICAgdm9pZCAodGhpcy5wb2xsaW5nSW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwocmVmZXRjaCwgbXMpKTtcblxuICAgIGNvbnN0IHN0b3BQb2xsaW5nID0gKCkgPT5cbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsaW5nSW50ZXJ2YWwpO1xuXG4gICAgY29uc3QgY2FsbGVkID0gdHJ1ZTtcblxuICAgIHJldHVybiB7XG4gICAgICBjYWxsZWQsIGNsaWVudCwgZGF0YSwgZXJyb3IsIGxvYWRpbmcsIG5ldHdvcmtTdGF0dXMsIHZhcmlhYmxlcyxcbiAgICAgIGZldGNoTW9yZSwgcmVmZXRjaCwgc3RhcnRQb2xsaW5nLCBzdG9wUG9sbGluZywgc3Vic2NyaWJlVG9Nb3JlLFxuICAgIH07XG4gIH1cblxuICB0ZWFyZG93bigpIHtcbiAgICBpZiAodGhpcy5wb2xsaW5nSW50ZXJ2YWwgIT0gbnVsbClcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsaW5nSW50ZXJ2YWwpO1xuICAgIHN1cGVyLnRlYXJkb3duKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IHVzZVF1ZXJ5ID0gaG9vayhVc2VRdWVyeUhvb2spO1xuIiwgImltcG9ydCB0eXBlIHtcbiAgQXBvbGxvRXJyb3IsXG4gIERvY3VtZW50Tm9kZSxcbiAgRXJyb3JQb2xpY3ksXG4gIEZldGNoUG9saWN5LFxuICBGZXRjaFJlc3VsdCxcbiAgTXV0YXRpb25PcHRpb25zLFxuICBNdXRhdGlvblVwZGF0ZXJGbixcbiAgT3BlcmF0aW9uVmFyaWFibGVzLFxufSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcblxuaW1wb3J0IHsgZ3FsRG9jdW1lbnQsIHdyaXRhYmxlIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9saWIvZGVzY3JpcHRvcnMnO1xuXG5pbXBvcnQgdHlwZSB7XG4gIEFwb2xsb011dGF0aW9uSW50ZXJmYWNlLFxuICBDb21wb25lbnREb2N1bWVudCxcbiAgQ29uc3RydWN0b3IsXG4gIERhdGEsXG4gIE9wdGltaXN0aWNSZXNwb25zZVR5cGUsXG4gIFJlZmV0Y2hRdWVyaWVzVHlwZSxcbiAgVmFyaWFibGVzLFxufSBmcm9tICdAYXBvbGxvLWVsZW1lbnRzL2ludGVyZmFjZXMnO1xuXG5pbXBvcnQgeyBkZWR1cGVNaXhpbiB9IGZyb20gJ0BvcGVuLXdjL2RlZHVwZS1taXhpbic7XG5pbXBvcnQgeyBBcG9sbG9FbGVtZW50TWl4aW4gfSBmcm9tICcuL2Fwb2xsby1lbGVtZW50LW1peGluJztcblxudHlwZSBBcG9sbG9NdXRhdGlvblJlc3VsdEV2ZW50PFREYXRhID0gdW5rbm93bj4gPVxuICBDdXN0b21FdmVudDxGZXRjaFJlc3VsdDxURGF0YT4+O1xuXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudEV2ZW50TWFwIHtcbiAgICAnYXBvbGxvLW11dGF0aW9uLXJlc3VsdCc6IEFwb2xsb011dGF0aW9uUmVzdWx0RXZlbnQ7XG4gIH1cbn1cblxudHlwZSBNaXhpbkluc3RhbmNlID0ge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICBuZXcgPEQsIFYgPSBSZWNvcmQ8c3RyaW5nLCBhbnk+PigpOiBBcG9sbG9NdXRhdGlvbkludGVyZmFjZTxELCBWPjtcbiAgZG9jdW1lbnRUeXBlOiAnbXV0YXRpb24nO1xuICBvYnNlcnZlZEF0dHJpYnV0ZXM/OiBzdHJpbmdbXTtcbn1cblxuZnVuY3Rpb24gQXBvbGxvTXV0YXRpb25NaXhpbkltcGw8QiBleHRlbmRzIENvbnN0cnVjdG9yPihiYXNlOiBCKTogQiAmIE1peGluSW5zdGFuY2Uge1xuICBjbGFzcyBBcG9sbG9NdXRhdGlvbkVsZW1lbnQ8RCwgViA9IE9wZXJhdGlvblZhcmlhYmxlcz5cbiAgICBleHRlbmRzIEFwb2xsb0VsZW1lbnRNaXhpbihiYXNlKVxuICAgIGltcGxlbWVudHMgQXBvbGxvTXV0YXRpb25JbnRlcmZhY2U8RCwgVj4ge1xuICAgIHN0YXRpYyBkb2N1bWVudFR5cGUgPSAnbXV0YXRpb24nIGFzIGNvbnN0O1xuXG4gICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKTogc3RyaW5nW10ge1xuICAgICAgcmV0dXJuIFsuLi5uZXcgU2V0KFtcbiAgICAgICAgLi4uc3VwZXIub2JzZXJ2ZWRBdHRyaWJ1dGVzID8/IFtdLCAvKiBjOCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICAnYXdhaXQtcmVmZXRjaC1xdWVyaWVzJyxcbiAgICAgICAgJ2ZldGNoLXBvbGljeScsXG4gICAgICAgICdyZWZldGNoLXF1ZXJpZXMnLFxuICAgICAgXSldO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExhdGVzdCBtdXRhdGlvbiBkYXRhLlxuICAgICAqL1xuICAgIGRlY2xhcmUgZGF0YTogRGF0YTxEPiB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgdGhhdCBtYXBzIGZyb20gdGhlIG5hbWUgb2YgYSB2YXJpYWJsZSBhcyB1c2VkIGluIHRoZSBtdXRhdGlvbiBHcmFwaFFMIGRvY3VtZW50IHRvIHRoYXQgdmFyaWFibGUncyB2YWx1ZS5cbiAgICAgKlxuICAgICAqIEBzdW1tYXJ5IE11dGF0aW9uIHZhcmlhYmxlcy5cbiAgICAgKi9cbiAgICBkZWNsYXJlIHZhcmlhYmxlczogVmFyaWFibGVzPEQsIFY+IHwgbnVsbDtcblxuICAgIGRlY2xhcmUgbXV0YXRpb246IERvY3VtZW50Tm9kZSB8IENvbXBvbmVudERvY3VtZW50PEQ+IHwgbnVsbDtcblxuICAgIGRlY2xhcmUgcmVmZXRjaFF1ZXJpZXM6IFJlZmV0Y2hRdWVyaWVzVHlwZTxEPiB8IG51bGw7XG5cbiAgICBkZWNsYXJlIGNhbGxlZDogYm9vbGVhbjtcblxuICAgIGRlY2xhcmUgY29udGV4dD86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG4gICAgZGVjbGFyZSBvcHRpbWlzdGljUmVzcG9uc2U/OiBPcHRpbWlzdGljUmVzcG9uc2VUeXBlPEQsIFY+O1xuXG4gICAgZGVjbGFyZSBlcnJvclBvbGljeT86IEVycm9yUG9saWN5O1xuXG4gICAgZGVjbGFyZSBmZXRjaFBvbGljeT86IEV4dHJhY3Q8RmV0Y2hQb2xpY3ksICduby1jYWNoZSc+O1xuXG4gICAgZGVjbGFyZSBhd2FpdFJlZmV0Y2hRdWVyaWVzPzogYm9vbGVhbjtcblxuICAgIG9uQ29tcGxldGVkPyhfZGF0YTogRGF0YTxEPik6IHZvaWQ7XG5cbiAgICBvbkVycm9yPyhfZXJyb3I6IEVycm9yKTogdm9pZDtcblxuICAgIHVwZGF0ZXI/KFxuICAgICAgLi4ucGFyYW1zOiBQYXJhbWV0ZXJzPE11dGF0aW9uVXBkYXRlckZuPERhdGE8RD4+PlxuICAgICk6IFJldHVyblR5cGU8TXV0YXRpb25VcGRhdGVyRm48RGF0YTxEPj4+O1xuXG4gICAgaWdub3JlUmVzdWx0cyA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogVGhlIElEIG51bWJlciBvZiB0aGUgbW9zdCByZWNlbnQgbXV0YXRpb24gc2luY2UgdGhlIGVsZW1lbnQgd2FzIGluc3RhbnRpYXRlZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIG1vc3RSZWNlbnRNdXRhdGlvbklkID0gMDtcblxuICAgIGNvbnN0cnVjdG9yKC4uLmE6IGFueVtdKSB7XG4gICAgICBzdXBlciguLi5hKTtcbiAgICAgIHRoaXMudmFyaWFibGVzID8/PSBudWxsO1xuICAgICAgdGhpcy5sb2FkaW5nID8/PSBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrPy4oKTtcbiAgICB9XG5cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZTogc3RyaW5nLCBvbGRWYWw6IHN0cmluZywgbmV3VmFsOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgIHN1cGVyLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjaz8uKG5hbWUsIG9sZFZhbCwgbmV3VmFsKTtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3I6IHRzIGlzIG5vdCB0cmFja2luZyB0aGUgc3RhdGljIHNpZGVcbiAgICAgIGlmIChzdXBlci5jb25zdHJ1Y3Rvcj8ub2JzZXJ2ZWRBdHRyaWJ1dGVzPy5pbmNsdWRlcz8uKG5hbWUpKVxuICAgICAgICByZXR1cm47IC8qIGM4IGlnbm9yZSBuZXh0ICovXG5cbiAgICAgIHN3aXRjaCAobmFtZSkgeyAvKiBjOCBpZ25vcmUgbmV4dCAqL1xuICAgICAgICBjYXNlICdhd2FpdC1yZWZldGNoLXF1ZXJpZXMnOlxuICAgICAgICAgIHRoaXMuYXdhaXRSZWZldGNoUXVlcmllcyA9XG4gICAgICAgICAgICB0aGlzLmhhc0F0dHJpYnV0ZSgnYXdhaXQtcmVmZXRjaC1xdWVyaWVzJyk7XG4gICAgICAgICAgYnJlYWs7IC8qIGM4IGlnbm9yZSBuZXh0ICovXG5cbiAgICAgICAgY2FzZSAncmVmZXRjaC1xdWVyaWVzJzpcbiAgICAgICAgICB0aGlzLnJlZmV0Y2hRdWVyaWVzID1cbiAgICAgICAgICAgICFuZXdWYWwgPyBudWxsIDogbmV3VmFsXG4gICAgICAgICAgICAgIC5zcGxpdCgnLCcpXG4gICAgICAgICAgICAgIC5tYXAoeCA9PiB4LnRyaW0oKSk7XG4gICAgICAgICAgYnJlYWs7IC8qIGM4IGlnbm9yZSBuZXh0ICovXG5cbiAgICAgICAgY2FzZSAnZmV0Y2gtcG9saWN5JzpcbiAgICAgICAgICB0aGlzLmZldGNoUG9saWN5ID0gbmV3VmFsIGFzIEFwb2xsb011dGF0aW9uRWxlbWVudDxELCBWPlsnZmV0Y2hQb2xpY3knXTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBUaGlzIHJlc29sdmVzIGEgc2luZ2xlIG11dGF0aW9uIGFjY29yZGluZyB0byB0aGUgb3B0aW9ucyBzcGVjaWZpZWQgYW5kIHJldHVybnMgYSBQcm9taXNlIHdoaWNoIGlzIGVpdGhlciByZXNvbHZlZCB3aXRoIHRoZSByZXN1bHRpbmcgZGF0YSBvciByZWplY3RlZCB3aXRoIGFuIGVycm9yLlxuICAgICAqL1xuICAgIHB1YmxpYyBhc3luYyBtdXRhdGUoXG4gICAgICBwYXJhbXM/OiBQYXJ0aWFsPE11dGF0aW9uT3B0aW9uczxEYXRhPEQ+LCBWYXJpYWJsZXM8RCwgVj4+PlxuICAgICk6IFByb21pc2U8RmV0Y2hSZXN1bHQ8RGF0YTxEPj4+IHtcbiAgICAgIGlmICghdGhpcy5jbGllbnQpXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ05vIEFwb2xsbyBjbGllbnQuIFNlZSBodHRwczovL2Fwb2xsb2VsZW1lbnRzLmRldi9ndWlkZXMvZ2V0dGluZy1zdGFydGVkL2Fwb2xsby1jbGllbnQvJyk7IC8qIGM4IGlnbm9yZSBuZXh0ICovIC8vIGNvdmVyZWRcblxuICAgICAgY29uc3Qgb3B0aW9uczogTXV0YXRpb25PcHRpb25zPERhdGE8RD4sIFZhcmlhYmxlczxELCBWPj4gPSB7XG4gICAgICAgIC8vIEl0J3MgYmV0dGVyIHRvIGxldCBBcG9sbG8gY2xpZW50IHRocm93IHRoaXMgZXJyb3JcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgbXV0YXRpb246IHBhcmFtcz8ubXV0YXRpb24gPz8gdGhpcy5tdXRhdGlvbiEsXG5cbiAgICAgICAgYXdhaXRSZWZldGNoUXVlcmllczogcGFyYW1zPy5hd2FpdFJlZmV0Y2hRdWVyaWVzID8/IHRoaXMuYXdhaXRSZWZldGNoUXVlcmllcyxcbiAgICAgICAgY29udGV4dDogcGFyYW1zPy5jb250ZXh0ID8/IHRoaXMuY29udGV4dCxcbiAgICAgICAgZXJyb3JQb2xpY3k6IHBhcmFtcz8uZXJyb3JQb2xpY3kgPz8gdGhpcy5lcnJvclBvbGljeSxcbiAgICAgICAgZmV0Y2hQb2xpY3k6IHBhcmFtcz8uZmV0Y2hQb2xpY3kgPz8gdGhpcy5mZXRjaFBvbGljeSxcbiAgICAgICAgb3B0aW1pc3RpY1Jlc3BvbnNlOiBwYXJhbXM/Lm9wdGltaXN0aWNSZXNwb25zZSA/PyB0aGlzLm9wdGltaXN0aWNSZXNwb25zZSxcbiAgICAgICAgcmVmZXRjaFF1ZXJpZXM6IHBhcmFtcz8ucmVmZXRjaFF1ZXJpZXMgPz8gdGhpcy5yZWZldGNoUXVlcmllcyA/PyB1bmRlZmluZWQsXG4gICAgICAgIHVwZGF0ZTogcGFyYW1zPy51cGRhdGUgPz8gdGhpcy51cGRhdGVyLFxuICAgICAgICB2YXJpYWJsZXM6IHBhcmFtcz8udmFyaWFibGVzID8/IHRoaXMudmFyaWFibGVzID8/IHVuZGVmaW5lZCxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IG11dGF0aW9uSWQgPSB0aGlzLmdlbmVyYXRlTXV0YXRpb25JZCgpO1xuXG4gICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgICAgdGhpcy5jYWxsZWQgPSB0cnVlO1xuXG4gICAgICByZXR1cm4gdGhpcy5jbGllbnQubXV0YXRlPERhdGE8RD4sIFZhcmlhYmxlczxELCBWPj4ob3B0aW9ucylcbiAgICAgICAgLnRoZW4odGhpcy5vbkNvbXBsZXRlZE11dGF0aW9uLmJpbmQodGhpcywgbXV0YXRpb25JZCkpXG4gICAgICAgIC5jYXRjaCh0aGlzLm9uTXV0YXRpb25FcnJvci5iaW5kKHRoaXMsIG11dGF0aW9uSWQpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbmNyZW1lbnRzIGFuZCByZXR1cm5zIHRoZSBtb3N0IHJlY2VudCBtdXRhdGlvbiBpZC5cbiAgICAgKi9cbiAgICBwcml2YXRlIGdlbmVyYXRlTXV0YXRpb25JZCgpOiBudW1iZXIge1xuICAgICAgdGhpcy5tb3N0UmVjZW50TXV0YXRpb25JZCArPSAxO1xuICAgICAgcmV0dXJuIHRoaXMubW9zdFJlY2VudE11dGF0aW9uSWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIHdoZW4gYW4gSUQgbWF0Y2hlcyB0aGUgbW9zdCByZWNlbnQgbXV0YXRpb24gaWQuXG4gICAgICovXG4gICAgcHJpdmF0ZSBpc01vc3RSZWNlbnRNdXRhdGlvbihtdXRhdGlvbklkOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICAgIHJldHVybiB0aGlzLm1vc3RSZWNlbnRNdXRhdGlvbklkID09PSBtdXRhdGlvbklkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxiYWNrIGZvciB3aGVuIGEgbXV0YXRpb24gaXMgY29tcGxldGVkLlxuICAgICAqL1xuICAgIHByaXZhdGUgb25Db21wbGV0ZWRNdXRhdGlvbihcbiAgICAgIG11dGF0aW9uSWQ6IG51bWJlcixcbiAgICAgIHJlc3BvbnNlOiBGZXRjaFJlc3VsdDxEYXRhPEQ+PlxuICAgICk6IEZldGNoUmVzdWx0PERhdGE8RD4+IHtcbiAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzcG9uc2U7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdhcG9sbG8tbXV0YXRpb24tcmVzdWx0JywgeyBkZXRhaWw6IHJlc3BvbnNlIH0pKTtcbiAgICAgIGlmICh0aGlzLmlzTW9zdFJlY2VudE11dGF0aW9uKG11dGF0aW9uSWQpICYmICF0aGlzLmlnbm9yZVJlc3VsdHMpIHtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhID8/IG51bGw7IC8qIGM4IGlnbm9yZSBuZXh0ICovXG4gICAgICAgIHRoaXMuZXJyb3JzID0gcmVzcG9uc2UuZXJyb3JzID8/IG51bGw7XG4gICAgICAgIGlmIChkYXRhKVxuICAgICAgICAgIHRoaXMub25Db21wbGV0ZWQ/LihkYXRhKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXNwb25zZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayBmb3Igd2hlbiBhIG11dGF0aW9uIGZhaWxzLlxuICAgICAqL1xuICAgIHByaXZhdGUgb25NdXRhdGlvbkVycm9yKG11dGF0aW9uSWQ6IG51bWJlciwgZXJyb3I6IEFwb2xsb0Vycm9yKTogbmV2ZXIge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnYXBvbGxvLWVycm9yJywgeyBkZXRhaWw6IGVycm9yIH0pKTtcbiAgICAgIGlmICh0aGlzLmlzTW9zdFJlY2VudE11dGF0aW9uKG11dGF0aW9uSWQpKSB7XG4gICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRhdGEgPSBudWxsO1xuICAgICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICB9XG4gICAgICB0aGlzLm9uRXJyb3I/LihlcnJvcik7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhBcG9sbG9NdXRhdGlvbkVsZW1lbnQucHJvdG90eXBlLCB7XG4gICAgY2FsbGVkOiB3cml0YWJsZShmYWxzZSksXG4gICAgbXV0YXRpb246IGdxbERvY3VtZW50KCksXG4gICAgb3B0aW1pc3RpY1Jlc3BvbnNlOiB3cml0YWJsZSgpLFxuICAgIHJlZmV0Y2hRdWVyaWVzOiB3cml0YWJsZShudWxsKSxcbiAgfSk7XG5cbiAgcmV0dXJuIEFwb2xsb011dGF0aW9uRWxlbWVudDtcbn1cblxuLyoqXG4gKiBgQXBvbGxvTXV0YXRpb25NaXhpbmA6IGNsYXNzIG1peGluIGZvciBhcG9sbG8tbXV0YXRpb24gZWxlbWVudHMuXG4gKi9cbmV4cG9ydCBjb25zdCBBcG9sbG9NdXRhdGlvbk1peGluID1cbiAgZGVkdXBlTWl4aW4oQXBvbGxvTXV0YXRpb25NaXhpbkltcGwpO1xuIiwgImltcG9ydCB0eXBlIHtcbiAgRG9jdW1lbnROb2RlLFxuICBFcnJvclBvbGljeSxcbiAgRmV0Y2hQb2xpY3ksXG4gIEZldGNoUmVzdWx0LFxuICBNdXRhdGlvbk9wdGlvbnMsXG4gIE11dGF0aW9uVXBkYXRlckZuLFxuICBPcGVyYXRpb25WYXJpYWJsZXMsXG59IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xuXG5pbXBvcnQgdHlwZSB7IFJlZmV0Y2hRdWVyeURlc2NyaXB0aW9uIH0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZS93YXRjaFF1ZXJ5T3B0aW9ucyc7XG5cbmltcG9ydCB0eXBlIHsgQ29tcG9uZW50RG9jdW1lbnQsIERhdGEsIFZhcmlhYmxlcyB9IGZyb20gJy4vb3BlcmF0aW9uJztcbmltcG9ydCB0eXBlIHsgQXBvbGxvRWxlbWVudEludGVyZmFjZSB9IGZyb20gJy4vYXBvbGxvLWVsZW1lbnQnO1xuXG5pbXBvcnQgeyBBcG9sbG9NdXRhdGlvbk1peGluIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9taXhpbnMvYXBvbGxvLW11dGF0aW9uLW1peGluJztcblxuZXhwb3J0IHR5cGUgUmVmZXRjaFF1ZXJpZXNUeXBlPEQ+ID1cbiAgUmVmZXRjaFF1ZXJ5RGVzY3JpcHRpb24gfFxuICAoKHJlc3VsdDogRmV0Y2hSZXN1bHQ8RGF0YTxEPj4pID0+XG4gICAgUmVmZXRjaFF1ZXJ5RGVzY3JpcHRpb24pO1xuXG5leHBvcnQgdHlwZSBPcHRpbWlzdGljUmVzcG9uc2VUeXBlPEQsIFY+ID1cbiAgRGF0YTxEPiB8XG4gICgodmFyczogVmFyaWFibGVzPEQsIFY+KSA9PlxuICAgIERhdGE8RD4pO1xuXG4vKipcbiAqIENvbW1vbiBpbnRlcmZhY2UgZm9yIG11dGF0aW9uIGVsZW1lbnRzXG4gKlxuICogU2VlIFtgQXBvbGxvRWxlbWVudEludGVyZmFjZWBdKGh0dHBzOi8vYXBvbGxvZWxlbWVudHMuZGV2L2FwaS9pbnRlcmZhY2VzL2VsZW1lbnQpIGZvciBtb3JlIGluZm9ybWF0aW9uIG9uIGV2ZW50c1xuICpcbiAqIEBlbGVtZW50XG4gKlxuICogQGZpcmVzICdhcG9sbG8tbXV0YXRpb24tcmVzdWx0JyB3aGVuIHRoZSBtdXRhdGlvbiByZXNvbHZlc1xuICogQGZpcmVzICdhcG9sbG8tZXJyb3InIHdoZW4gdGhlIG11dGF0aW9uIHJlamVjdHNcbiAqL1xuZXhwb3J0IGRlY2xhcmUgY2xhc3MgQXBvbGxvTXV0YXRpb25JbnRlcmZhY2U8RCwgViA9IE9wZXJhdGlvblZhcmlhYmxlcz5cbiAgZXh0ZW5kcyBBcG9sbG9FbGVtZW50SW50ZXJmYWNlIHtcbiAgLyoqXG4gICAqIExhdGVzdCBtdXRhdGlvbiBkYXRhXG4gICAqL1xuICBkZWNsYXJlIGRhdGE6IERhdGE8RD4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdGhhdCBtYXBzIGZyb20gdGhlIG5hbWUgb2YgYSB2YXJpYWJsZSBhcyB1c2VkIGluIHRoZSBtdXRhdGlvbiBHcmFwaFFMIGRvY3VtZW50IHRvIHRoYXQgdmFyaWFibGUncyB2YWx1ZS5cbiAgICpcbiAgICogQHN1bW1hcnkgTXV0YXRpb24gdmFyaWFibGVzLlxuICAgKi9cbiAgZGVjbGFyZSB2YXJpYWJsZXM6IFZhcmlhYmxlczxELCBWPiB8IG51bGw7XG5cbiAgLyoqIFRoZSBtdXRhdGlvbi4gKi9cbiAgZGVjbGFyZSBtdXRhdGlvbjogRG9jdW1lbnROb2RlIHwgQ29tcG9uZW50RG9jdW1lbnQ8RD4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgdGhhdCByZXByZXNlbnRzIHRoZSByZXN1bHQgb2YgdGhpcyBtdXRhdGlvbiB0aGF0XG4gICAqIHdpbGwgYmUgb3B0aW1pc3RpY2FsbHkgc3RvcmVkIGJlZm9yZSB0aGUgc2VydmVyIGhhcyBhY3R1YWxseSByZXR1cm5lZCBhXG4gICAqIHJlc3VsdC5cbiAgICpcbiAgICogVGhpcyBpcyBtb3N0IG9mdGVuIHVzZWQgZm9yIG9wdGltaXN0aWMgVUksIHdoZXJlIHdlIHdhbnQgdG8gYmUgYWJsZSB0byBzZWVcbiAgICogdGhlIHJlc3VsdCBvZiBhIG11dGF0aW9uIGltbWVkaWF0ZWx5LCBhbmQgdXBkYXRlIHRoZSBVSSBsYXRlciBpZiBhbnkgZXJyb3JzXG4gICAqIGFwcGVhci5cbiAgICovXG4gIGRlY2xhcmUgb3B0aW1pc3RpY1Jlc3BvbnNlPzogT3B0aW1pc3RpY1Jlc3BvbnNlVHlwZTxELCBWPjtcblxuICAvKipcbiAgICogV2hldGhlciB0aGUgbXV0YXRpb24gd2FzIGNhbGxlZFxuICAgKi9cbiAgZGVjbGFyZSBjYWxsZWQ6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSByZXR1cm5lZCBkYXRhIHByb3BlcnR5IHdpbGwgbm90IHVwZGF0ZSB3aXRoIHRoZSBtdXRhdGlvbiByZXN1bHQuXG4gICAqL1xuICBkZWNsYXJlIGlnbm9yZVJlc3VsdHM/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBTcGVjaWZpZXMgdGhlIEVycm9yUG9saWN5IHRvIGJlIHVzZWQgZm9yIHRoaXMgbXV0YXRpb24uXG4gICAqL1xuICBkZWNsYXJlIGVycm9yUG9saWN5PzogRXJyb3JQb2xpY3k7XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgRmV0Y2hQb2xpY3kgdG8gYmUgdXNlZCBmb3IgdGhpcyBtdXRhdGlvbi5cbiAgICovXG4gIGRlY2xhcmUgZmV0Y2hQb2xpY3k/OiBFeHRyYWN0PEZldGNoUG9saWN5LCAnbm8tY2FjaGUnPjtcblxuICAvKipcbiAgICogQSBsaXN0IG9mIHF1ZXJ5IG5hbWVzIHdoaWNoIHdpbGwgYmUgcmVmZXRjaGVkIG9uY2UgdGhpcyBtdXRhdGlvbiBoYXMgcmV0dXJuZWQuXG4gICAqIFRoaXMgaXMgb2Z0ZW4gdXNlZCBpZiB5b3UgaGF2ZSBhIHNldCBvZiBxdWVyaWVzIHdoaWNoIG1heSBiZSBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGFuZCB3aWxsIGhhdmUgdG8gdXBkYXRlLlxuICAgKiBSYXRoZXIgdGhhbiB3cml0aW5nIGEgbXV0YXRpb24gcXVlcnkgcmVkdWNlciAoaS5lLiBgdXBkYXRlUXVlcmllc2ApIGZvciB0aGlzLFxuICAgKiB5b3UgY2FuIHJlZmV0Y2ggdGhlIHF1ZXJpZXMgdGhhdCB3aWxsIGJlIGFmZmVjdGVkXG4gICAqIGFuZCBhY2hpZXZlIGEgY29uc2lzdGVudCBzdG9yZSBvbmNlIHRoZXNlIHF1ZXJpZXMgcmV0dXJuLlxuICAgKi9cbiAgZGVjbGFyZSByZWZldGNoUXVlcmllczogUmVmZXRjaFF1ZXJpZXNUeXBlPEQ+IHwgbnVsbDtcblxuICAvKipcbiAgICogUXVlcmllcyByZWZldGNoZWQgYXMgcGFydCBvZiByZWZldGNoUXVlcmllcyBhcmUgaGFuZGxlZCBhc3luY2hyb25vdXNseSxcbiAgICogYW5kIGFyZSBub3Qgd2FpdGVkIG9uIGJlZm9yZSB0aGUgbXV0YXRpb24gaXMgY29tcGxldGVkIChyZXNvbHZlZCkuXG4gICAqIFNldHRpbmcgdGhpcyB0byB0cnVlIHdpbGwgbWFrZSBzdXJlIHJlZmV0Y2hlZCBxdWVyaWVzIGFyZSBjb21wbGV0ZWRcbiAgICogYmVmb3JlIHRoZSBtdXRhdGlvbiBpcyBjb25zaWRlcmVkIGRvbmUuIGZhbHNlIGJ5IGRlZmF1bHQuXG4gICAqL1xuICBkZWNsYXJlIGF3YWl0UmVmZXRjaFF1ZXJpZXM/OiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKC4uLmE6IGFueVtdKTtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZm9yIHdoZW4gYSBtdXRhdGlvbiBpcyBjb21wbGV0ZWQuXG4gICAqL1xuICBvbkNvbXBsZXRlZD8oX2RhdGE6IERhdGE8RD4pOiB2b2lkXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZvciB3aGVuIGFuIGVycm9yIG9jY3VycyBpbiBtdXRhdGlvbi5cbiAgICovXG4gIG9uRXJyb3I/KF9lcnJvcjogRXJyb3IpOiB2b2lkXG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gd2hpY2ggdXBkYXRlcyB0aGUgYXBvbGxvIGNhY2hlIHdoZW4gdGhlIHF1ZXJ5IHJlc3BvbmRzLlxuICAgKiBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgY2FsbGVkIHR3aWNlIG92ZXIgdGhlIGxpZmVjeWNsZSBvZiBhIG11dGF0aW9uLlxuICAgKiBPbmNlIGF0IHRoZSB2ZXJ5IGJlZ2lubmluZyBpZiBhbiBvcHRpbWlzdGljUmVzcG9uc2Ugd2FzIHByb3ZpZGVkLlxuICAgKiBUaGUgd3JpdGVzIGNyZWF0ZWQgZnJvbSB0aGUgb3B0aW1pc3RpYyBkYXRhIHdpbGwgYmUgcm9sbGVkIGJhY2sgYmVmb3JlXG4gICAqIHRoZSBzZWNvbmQgdGltZSB0aGlzIGZ1bmN0aW9uIGlzIGNhbGxlZCB3aGljaCBpcyB3aGVuIHRoZSBtdXRhdGlvbiBoYXNcbiAgICogc3VjY2VzZnVsbHkgcmVzb2x2ZWQuIEF0IHRoYXQgcG9pbnQgdXBkYXRlIHdpbGwgYmUgY2FsbGVkIHdpdGggdGhlIGFjdHVhbFxuICAgKiBtdXRhdGlvbiByZXN1bHQgYW5kIHRob3NlIHdyaXRlcyB3aWxsIG5vdCBiZSByb2xsZWQgYmFjay5cbiAgICpcbiAgICogVGhlIHJlYXNvbiBhIERhdGFQcm94eSBpcyBwcm92aWRlZCBpbnN0ZWFkIG9mIHRoZSB1c2VyIGNhbGxpbmcgdGhlIG1ldGhvZHNcbiAgICogZGlyZWN0bHkgb24gQXBvbGxvQ2xpZW50IGlzIHRoYXQgYWxsIG9mIHRoZSB3cml0ZXMgYXJlIGJhdGNoZWQgdG9nZXRoZXIgYXRcbiAgICogdGhlIGVuZCBvZiB0aGUgdXBkYXRlLCBhbmQgaXQgYWxsb3dzIGZvciB3cml0ZXMgZ2VuZXJhdGVkIGJ5IG9wdGltaXN0aWNcbiAgICogZGF0YSB0byBiZSByb2xsZWQgYmFjay5cbiAgICovXG4gIHVwZGF0ZXI/KFxuICAgIC4uLnBhcmFtczogUGFyYW1ldGVyczxNdXRhdGlvblVwZGF0ZXJGbjxEYXRhPEQ+Pj5cbiAgKTogUmV0dXJuVHlwZTxNdXRhdGlvblVwZGF0ZXJGbjxEYXRhPEQ+Pj47XG5cbiAgLyoqXG4gICAqIFRoaXMgcmVzb2x2ZXMgYSBzaW5nbGUgbXV0YXRpb24gYWNjb3JkaW5nIHRvIHRoZSBvcHRpb25zIHNwZWNpZmllZCBhbmQgcmV0dXJucyBhXG4gICAqIFByb21pc2Ugd2hpY2ggaXMgZWl0aGVyIHJlc29sdmVkIHdpdGggdGhlIHJlc3VsdGluZyBkYXRhIG9yIHJlamVjdGVkIHdpdGggYW4gZXJyb3IuXG4gICAqL1xuICBwdWJsaWMgbXV0YXRlKFxuICAgIHBhcmFtcz86IFBhcnRpYWw8TXV0YXRpb25PcHRpb25zPERhdGE8RD4sIFZhcmlhYmxlczxELCBWPj4+XG4gICk6IFByb21pc2U8RmV0Y2hSZXN1bHQ8RGF0YTxEPj4+O1xufVxuXG5leHBvcnQgY2xhc3MgQXBvbGxvTXV0YXRpb25FbGVtZW50PEQgPSB1bmtub3duLCBWID0gT3BlcmF0aW9uVmFyaWFibGVzPlxuICBleHRlbmRzIEFwb2xsb011dGF0aW9uTWl4aW4oSFRNTEVsZW1lbnQpPEQsIFY+IGltcGxlbWVudHMgQXBvbGxvTXV0YXRpb25JbnRlcmZhY2U8RCwgVj4ge1xuICAgIGRlY2xhcmUgZGF0YTogRGF0YTxEPiB8IG51bGw7XG5cbiAgICBkZWNsYXJlIHZhcmlhYmxlczogVmFyaWFibGVzPEQsIFY+IHwgbnVsbDtcbn1cbiIsICJpbXBvcnQgdHlwZSB7XG4gIEFwb2xsb0NsaWVudCxcbiAgQXBvbGxvRXJyb3IsXG4gIERvY3VtZW50Tm9kZSxcbiAgT3BlcmF0aW9uVmFyaWFibGVzLFxuICBOb3JtYWxpemVkQ2FjaGVPYmplY3QsXG59IGZyb20gJ0BhcG9sbG8vY2xpZW50L2NvcmUnO1xuXG5pbXBvcnQgdHlwZSB7IFN0YXRlIH0gZnJvbSAnaGF1bnRlZCc7XG5cbmltcG9ydCB7IEFwb2xsb011dGF0aW9uRWxlbWVudCB9IGZyb20gJ0BhcG9sbG8tZWxlbWVudHMvaW50ZXJmYWNlcy9hcG9sbG8tbXV0YXRpb24nO1xuXG5pbXBvcnQgeyBob29rIH0gZnJvbSAnaGF1bnRlZCc7XG5cbmltcG9ydCB7IEFwb2xsb0hvb2sgfSBmcm9tICcuL0Fwb2xsb0hvb2snO1xuaW1wb3J0IHsgQ29tcG9uZW50RG9jdW1lbnQsIERhdGEgfSBmcm9tICdAYXBvbGxvLWVsZW1lbnRzL2ludGVyZmFjZXMnO1xuXG5leHBvcnQgdHlwZSBNdXRhdGlvbkhvb2tPcHRpb25zPEQsIFY+ID0gUGFydGlhbDxQaWNrPEFwb2xsb011dGF0aW9uRWxlbWVudDxELCBWPixcbiAgfCAnY29udGV4dCdcbiAgfCAnbXV0YXRpb24nXG4gIHwgJ2Vycm9yUG9saWN5J1xuICB8ICdmZXRjaFBvbGljeSdcbiAgfCAndmFyaWFibGVzJ1xuICB8ICdyZWZldGNoUXVlcmllcydcbiAgfCAnYXdhaXRSZWZldGNoUXVlcmllcydcbiAgfCAnb3B0aW1pc3RpY1Jlc3BvbnNlJ1xuICB8ICdpZ25vcmVSZXN1bHRzJ1xuICB8ICdvbkNvbXBsZXRlZCdcbiAgfCAnb25FcnJvcidcbj4gJiB7XG4gIGNsaWVudD86IEFwb2xsb0NsaWVudDxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+O1xuICB1cGRhdGU6IEFwb2xsb011dGF0aW9uRWxlbWVudFsndXBkYXRlciddXG4gIG5vdGlmeU9uTmV0d29ya1N0YXR1c0NoYW5nZT86IGJvb2xlYW47XG59PjtcblxuZXhwb3J0IGludGVyZmFjZSBNdXRhdGlvbkhvb2tSZXN1bHQ8RCwgVj4ge1xuICBjYWxsZWQ6IGJvb2xlYW47XG4gIGNsaWVudDogQXBvbGxvTXV0YXRpb25FbGVtZW50PEQsIFY+WydjbGllbnQnXSB8IG51bGw7XG4gIGRhdGE6IERhdGE8RD4gfCBudWxsO1xuICBlcnJvcjogRXJyb3IgfCBBcG9sbG9FcnJvciB8IG51bGwsXG4gIGxvYWRpbmc6IGJvb2xlYW47XG59XG5cbmV4cG9ydCB0eXBlIE11dGF0ZUZuPEQsIFY+ID0gQXBvbGxvTXV0YXRpb25FbGVtZW50PEQsIFY+WydtdXRhdGUnXTtcblxuZXhwb3J0IHR5cGUgTXV0YXRpb25UdXBsZTxELCBWPiA9IFtNdXRhdGVGbjxELCBWPiwgTXV0YXRpb25Ib29rUmVzdWx0PEQsIFY+XVxuXG5jbGFzcyBVc2VNdXRhdGlvbkhvb2s8RCA9IHVua25vd24sIFYgPSBPcGVyYXRpb25WYXJpYWJsZXM+IGV4dGVuZHMgQXBvbGxvSG9vazxcbiAgRCxcbiAgVixcbiAgTXV0YXRpb25Ib29rT3B0aW9uczxELCBWPixcbiAgTXV0YXRpb25UdXBsZTxELCBWPixcbiAgQXBvbGxvTXV0YXRpb25FbGVtZW50PEQsIFY+XG4+IHtcbiAgcmVhZG9ubHkgY29tcG9uZW50Q2xhc3MgPSBBcG9sbG9NdXRhdGlvbkVsZW1lbnQ7XG5cbiAgcmVhZG9ubHkgdHlwZSA9ICdtdXRhdGlvbic7XG5cbiAgcmVhZG9ubHkgcmVhY3RpdmVQcm9wcyA9IFsnY2FsbGVkJyBhcyBjb25zdF07XG5cbiAgcmVhZG9ubHkgZGVmYXVsdHM6IFBhcnRpYWw8QXBvbGxvTXV0YXRpb25FbGVtZW50PEQsIFY+PiA9IHtcbiAgICBjYWxsZWQ6IGZhbHNlLFxuICB9O1xuXG4gIHBvbGxpbmdJbnRlcnZhbD86IG51bWJlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBpZDogbnVtYmVyLFxuICAgIHN0YXRlOiBTdGF0ZTxBcG9sbG9NdXRhdGlvbkVsZW1lbnQ8RCwgVj4+LFxuICAgIG11dGF0aW9uOiBEb2N1bWVudE5vZGUgfCBDb21wb25lbnREb2N1bWVudDxEPixcbiAgICBvcHRpb25zPzogTXV0YXRpb25Ib29rT3B0aW9uczxELCBWPlxuICApIHtcbiAgICBzdXBlcihpZCwgc3RhdGUsIG11dGF0aW9uLCBvcHRpb25zKTtcbiAgICB0aGlzLmluaXQoKTtcbiAgICB0aGlzLnVwZGF0ZSgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIG9wdGlvbnNUb1Byb3BlcnRpZXMoKTogUGFydGlhbDxBcG9sbG9NdXRhdGlvbkVsZW1lbnQ8RCwgVj4+IHtcbiAgICBjb25zdCB7XG4gICAgICBvbkNvbXBsZXRlZCwgb25FcnJvciwgdXBkYXRlLFxuICAgICAgaWdub3JlUmVzdWx0cyA9IGZhbHNlLFxuICAgICAgdmFyaWFibGVzID0gbnVsbCxcbiAgICAgIHJlZmV0Y2hRdWVyaWVzID0gbnVsbCxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9ID0gdGhpcy5vcHRpb25zO1xuICAgIGNvbnN0IG11dGF0aW9uID0gdGhpcy5kb2N1bWVudCA/PyBvcHRpb25zLm11dGF0aW9uO1xuICAgIHJldHVybiB7XG4gICAgICBtdXRhdGlvbixcbiAgICAgIGlnbm9yZVJlc3VsdHMsXG4gICAgICB2YXJpYWJsZXMsXG4gICAgICByZWZldGNoUXVlcmllcyxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvcHRpb25zVG9PcHRpb25hbE1ldGhvZHMoKTogUGFydGlhbDxBcG9sbG9NdXRhdGlvbkVsZW1lbnQ8RCwgVj4+IHtcbiAgICBjb25zdCB7IG9wdGlvbnM6IHsgb25Db21wbGV0ZWQsIG9uRXJyb3IsIHVwZGF0ZTogdXBkYXRlciB9IH0gPSB0aGlzO1xuICAgIHJldHVybiB7IG9uQ29tcGxldGVkLCBvbkVycm9yLCB1cGRhdGVyIH07XG4gIH1cblxuICB1cGRhdGUoXyA9IHRoaXMuZG9jdW1lbnQsIHsgdmFyaWFibGVzIH0gPSB0aGlzLm9wdGlvbnMpOiBNdXRhdGlvblR1cGxlPEQsIFY+IHtcbiAgICBpZiAodGhpcy5kaXNjb25uZWN0ZWQpIHRoaXMuY29ubmVjdCgpO1xuXG4gICAgY29uc3QgeyBob3N0IH0gPSB0aGlzLnN0YXRlO1xuXG4gICAgaG9zdC52YXJpYWJsZXMgPSB2YXJpYWJsZXMgPz8gbnVsbDtcblxuICAgIGNvbnN0IHsgY2FsbGVkLCBjbGllbnQsIGRhdGEsIGVycm9yLCBsb2FkaW5nIH0gPSB0aGlzLnN0YXRlLmhvc3Q7XG5cbiAgICByZXR1cm4gW2hvc3QubXV0YXRlLmJpbmQoaG9zdCksIHsgY2FsbGVkLCBjbGllbnQsIGRhdGEsIGVycm9yLCBsb2FkaW5nIH1dO1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB1c2VNdXRhdGlvbiA9IGhvb2soVXNlTXV0YXRpb25Ib29rKTtcbiIsICJpbXBvcnQgdHlwZSB7XG4gIEFwb2xsb0Vycm9yLFxuICBEb2N1bWVudE5vZGUsXG4gIEZldGNoUG9saWN5LFxuICBGZXRjaFJlc3VsdCxcbiAgT2JzZXJ2YWJsZSxcbiAgU3Vic2NyaXB0aW9uT3B0aW9ucyxcbn0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZSc7XG5cbmltcG9ydCB0eXBlIHtcbiAgQXBvbGxvU3Vic2NyaXB0aW9uSW50ZXJmYWNlLFxuICBDb21wb25lbnREb2N1bWVudCxcbiAgQ29uc3RydWN0b3IsXG4gIERhdGEsXG4gIE9uU3Vic2NyaXB0aW9uRGF0YVBhcmFtcyxcbiAgU3Vic2NyaXB0aW9uRGF0YU9wdGlvbnMsXG4gIFZhcmlhYmxlcyxcbn0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9pbnRlcmZhY2VzJztcblxuaW1wb3J0IHsgZGVkdXBlTWl4aW4gfSBmcm9tICdAb3Blbi13Yy9kZWR1cGUtbWl4aW4nO1xuXG5pbXBvcnQgeyBBcG9sbG9FbGVtZW50TWl4aW4gfSBmcm9tICcuL2Fwb2xsby1lbGVtZW50LW1peGluJztcbmltcG9ydCB7IGJvb2xlYW5BdHRyLCBncWxEb2N1bWVudCB9IGZyb20gJ0BhcG9sbG8tZWxlbWVudHMvbGliL2Rlc2NyaXB0b3JzJztcblxudHlwZSBBcG9sbG9TdWJzY3JpcHRpb25SZXN1bHRFdmVudDxURGF0YSA9IHVua25vd24+ID1cbiAgQ3VzdG9tRXZlbnQ8T25TdWJzY3JpcHRpb25EYXRhUGFyYW1zPFREYXRhPj47XG5cbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50RXZlbnRNYXAge1xuICAgICdhcG9sbG8tc3Vic2NyaXB0aW9uLXJlc3VsdCc6IEFwb2xsb1N1YnNjcmlwdGlvblJlc3VsdEV2ZW50O1xuICB9XG59XG5cbnR5cGUgTWl4aW5JbnN0YW5jZSA9IHtcbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgbmV3IDxEID0gdW5rbm93biwgViA9IFJlY29yZDxzdHJpbmcsIGFueT4+KC4uLmE6IGFueVtdKTogQXBvbGxvU3Vic2NyaXB0aW9uSW50ZXJmYWNlPEQsIFY+O1xuICBkb2N1bWVudFR5cGU6ICdzdWJzY3JpcHRpb24nO1xufVxuXG5mdW5jdGlvbiBBcG9sbG9TdWJzY3JpcHRpb25NaXhpbkltcGw8QiBleHRlbmRzIENvbnN0cnVjdG9yPihiYXNlOiBCKTogTWl4aW5JbnN0YW5jZSAmIEIge1xuICBjbGFzcyBBcG9sbG9TdWJzY3JpcHRpb25FbGVtZW50PEQsIFY+XG4gICAgZXh0ZW5kcyBBcG9sbG9FbGVtZW50TWl4aW4oYmFzZSlcbiAgICBpbXBsZW1lbnRzIE9taXQ8QXBvbGxvU3Vic2NyaXB0aW9uSW50ZXJmYWNlPEQsIFY+LCAnY2FuU3Vic2NyaWJlJz4ge1xuICAgIHN0YXRpYyBkb2N1bWVudFR5cGUgPSAnc3Vic2NyaXB0aW9uJyBhcyBjb25zdDtcblxuICAgIGRlY2xhcmUgc3Vic2NyaXB0aW9uOiBEb2N1bWVudE5vZGUgfCBDb21wb25lbnREb2N1bWVudDxEPiB8IG51bGw7XG5cbiAgICAvKipcbiAgICAgKiBMYXRlc3Qgc3Vic2NyaXB0aW9uIGRhdGEuXG4gICAgICovXG4gICAgZGVjbGFyZSBkYXRhOiBEYXRhPEQ+IHwgbnVsbDtcblxuICAgIC8qKlxuICAgICAqIEFuIG9iamVjdCBtYXAgZnJvbSB2YXJpYWJsZSBuYW1lIHRvIHZhcmlhYmxlIHZhbHVlLCB3aGVyZSB0aGUgdmFyaWFibGVzIGFyZSB1c2VkIHdpdGhpbiB0aGUgR3JhcGhRTCBzdWJzY3JpcHRpb24uXG4gICAgICpcbiAgICAgKiBTZXR0aW5nIHZhcmlhYmxlcyB3aWxsIGluaXRpYXRlIHRoZSBzdWJzY3JpcHRpb24sIHVubGVzcyBbYG5vQXV0b1N1YnNjcmliZWBdKCNub2F1dG9zdWJzY3JpYmUpIGlzIGFsc28gc2V0LlxuICAgICAqXG4gICAgICogQHN1bW1hcnkgU3Vic2NyaXB0aW9uIHZhcmlhYmxlcy5cbiAgICAgKi9cbiAgICBkZWNsYXJlIHZhcmlhYmxlczogVmFyaWFibGVzPEQsIFY+IHwgbnVsbDtcblxuICAgIGRlY2xhcmUgZmV0Y2hQb2xpY3k/OiBGZXRjaFBvbGljeTtcblxuICAgIGRlY2xhcmUgcG9sbEludGVydmFsPzogbnVtYmVyO1xuXG4gICAgZGVjbGFyZSBub0F1dG9TdWJzY3JpYmU6IGJvb2xlYW47XG5cbiAgICBkZWNsYXJlIG9ic2VydmFibGU/OiBPYnNlcnZhYmxlPEZldGNoUmVzdWx0PERhdGE8RD4+PjtcblxuICAgIGRlY2xhcmUgb2JzZXJ2YWJsZVN1YnNjcmlwdGlvbj86IFplbk9ic2VydmFibGUuU3Vic2NyaXB0aW9uO1xuXG4gICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlID0gZmFsc2U7XG5cbiAgICBzaG91bGRSZXN1YnNjcmliZTogU3Vic2NyaXB0aW9uRGF0YU9wdGlvbnNbJ3Nob3VsZFJlc3Vic2NyaWJlJ10gPSBmYWxzZTtcblxuICAgIHNraXAgPSBmYWxzZTtcblxuICAgIG9uU3Vic2NyaXB0aW9uRGF0YT8oX3Jlc3VsdDogT25TdWJzY3JpcHRpb25EYXRhUGFyYW1zPERhdGE8RD4+KTogdm9pZFxuXG4gICAgb25TdWJzY3JpcHRpb25Db21wbGV0ZT8oKTogdm9pZFxuXG4gICAgb25FcnJvcj8oZXJyb3I6IEFwb2xsb0Vycm9yKTogdm9pZFxuXG4gICAgcHVibGljIGdldCBjYW5BdXRvU3Vic2NyaWJlKCkge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgISF0aGlzLmNsaWVudCAmJlxuICAgICAgICAhdGhpcy5ub0F1dG9TdWJzY3JpYmUgJiZcbiAgICAgICAgdGhpcy5zaG91bGRTdWJzY3JpYmUoKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvciguLi5hOiBhbnlbXSkgeyBzdXBlciguLi5hKTsgfVxuXG4gICAgY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gICAgICBpZiAoIXRoaXMuY2FuU3Vic2NyaWJlKCkgfHwgIXRoaXMuc2hvdWxkU3Vic2NyaWJlKCkpIHJldHVybjtcbiAgICAgIHRoaXMuaW5pdE9ic2VydmFibGUoKTtcbiAgICAgIHRoaXMuc3Vic2NyaWJlKCk7XG4gICAgfVxuXG4gICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKTogdm9pZCB7XG4gICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaz8uKCk7XG4gICAgICB0aGlzLmNhbmNlbCgpO1xuICAgIH1cblxuICAgIGRvY3VtZW50Q2hhbmdlZChkb2N1bWVudDogRG9jdW1lbnROb2RlIHwgQ29tcG9uZW50RG9jdW1lbnQ8RD4pOiB2b2lkIHtcbiAgICAgIHRoaXMuY2FuY2VsKCk7XG5cbiAgICAgIGNvbnN0IHF1ZXJ5ID0gZG9jdW1lbnQ7XG5cbiAgICAgIGlmICh0aGlzLmNhblN1YnNjcmliZSh7IHF1ZXJ5IH0pICYmIHRoaXMuc2hvdWxkU3Vic2NyaWJlKHsgcXVlcnkgfSkpXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlKCk7XG4gICAgfVxuXG4gICAgdmFyaWFibGVzQ2hhbmdlZCh2YXJpYWJsZXM6IFZhcmlhYmxlczxELCBWPiB8IG51bGwpOiB2b2lkIHtcbiAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICBpZiAodGhpcy5jYW5TdWJzY3JpYmUoeyB2YXJpYWJsZXMgfSkgJiYgdGhpcy5zaG91bGRTdWJzY3JpYmUoeyB2YXJpYWJsZXMgfSkpXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlKCk7XG4gICAgfVxuXG4gICAgcHVibGljIHN1YnNjcmliZShwYXJhbXM/OiBQYXJ0aWFsPFN1YnNjcmlwdGlvbkRhdGFPcHRpb25zPEQsIFY+Pikge1xuICAgICAgdGhpcy5pbml0T2JzZXJ2YWJsZShwYXJhbXMpO1xuXG4gICAgICBpZiAodGhpcy5vYnNlcnZhYmxlU3Vic2NyaXB0aW9uICYmICEocGFyYW1zPy5zaG91bGRSZXN1YnNjcmliZSA/PyB0aGlzLnNob3VsZFJlc3Vic2NyaWJlKSlcbiAgICAgICAgcmV0dXJuOyAvKiBjOCBpZ25vcmUgbmV4dCAqL1xuXG4gICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlO1xuXG4gICAgICB0aGlzLm9ic2VydmFibGVTdWJzY3JpcHRpb24gPVxuICAgICAgICB0aGlzLm9ic2VydmFibGU/LnN1YnNjcmliZSh7XG4gICAgICAgICAgbmV4dDogdGhpcy5uZXh0RGF0YS5iaW5kKHRoaXMpLFxuICAgICAgICAgIGVycm9yOiB0aGlzLm5leHRFcnJvci5iaW5kKHRoaXMpLFxuICAgICAgICAgIGNvbXBsZXRlOiB0aGlzLm9uQ29tcGxldGUuYmluZCh0aGlzKSxcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcHVibGljIGNhbmNlbCgpOiB2b2lkIHtcbiAgICAgIHRoaXMuZW5kU3Vic2NyaXB0aW9uKCk7XG4gICAgICB0aGlzLm9ic2VydmFibGVTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLm9ic2VydmFibGUgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGFibGUgdG8gYXV0b21hdGljYWxseSBzdWJzY3JpYmVcbiAgICAgKi9cbiAgICBwcm90ZWN0ZWQgY2FuU3Vic2NyaWJlKHBhcmFtcz86IFBhcnRpYWw8U3Vic2NyaXB0aW9uT3B0aW9uczx0aGlzWyd2YXJpYWJsZXMnXT4+KTogYm9vbGVhbiB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAhdGhpcy5ub0F1dG9TdWJzY3JpYmUgJiZcbiAgICAgICAgISF0aGlzLmNsaWVudCAmJlxuICAgICAgICAhIShwYXJhbXM/LnF1ZXJ5ID8/IHRoaXMuZG9jdW1lbnQpXG4gICAgICApO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgd2hldGhlciB0aGUgZWxlbWVudCBzaG91bGQgYXR0ZW1wdCB0byBhdXRvbWF0aWNhbGx5IHN1YnNjcmliZSBpLmUuIGJlZ2luIHF1ZXJ5aW5nXG4gICAgICpcbiAgICAgKiBPdmVycmlkZSB0byBwcmV2ZW50IHN1YnNjcmliaW5nIHVubGVzcyB5b3VyIGNvbmRpdGlvbnMgYXJlIG1ldC5cbiAgICAgKi9cbiAgICBzaG91bGRTdWJzY3JpYmUocGFyYW1zPzogUGFydGlhbDxTdWJzY3JpcHRpb25PcHRpb25zPHRoaXNbJ3ZhcmlhYmxlcyddPj4pOiBib29sZWFuIHtcbiAgICAgIHJldHVybiAodm9pZCBwYXJhbXMsIHRydWUpO1xuICAgIH1cblxuICAgIHByaXZhdGUgaW5pdE9ic2VydmFibGUocGFyYW1zPzogUGFydGlhbDxTdWJzY3JpcHRpb25EYXRhT3B0aW9uczxELCBWPj4pOiB2b2lkIHtcbiAgICAgIGNvbnN0IHNob3VsZFJlc3Vic2NyaWJlID0gcGFyYW1zPy5zaG91bGRSZXN1YnNjcmliZSA/PyB0aGlzLnNob3VsZFJlc3Vic2NyaWJlO1xuICAgICAgY29uc3QgY2xpZW50ID0gcGFyYW1zPy5jbGllbnQgPz8gdGhpcy5jbGllbnQ7XG4gICAgICBjb25zdCBza2lwID0gcGFyYW1zPy5za2lwID8/IHRoaXMuc2tpcDtcbiAgICAgIC8vIEl0J3MgYmV0dGVyIHRvIGxldCBBcG9sbG8gY2xpZW50IHRocm93IHRoaXMgZXJyb3JcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICBjb25zdCBxdWVyeSA9IHBhcmFtcz8uc3Vic2NyaXB0aW9uID8/IHRoaXMuc3Vic2NyaXB0aW9uITtcbiAgICAgIGNvbnN0IHZhcmlhYmxlcyA9IHBhcmFtcz8udmFyaWFibGVzID8/IHRoaXMudmFyaWFibGVzID8/IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGZldGNoUG9saWN5ID0gcGFyYW1zPy5mZXRjaFBvbGljeSA/PyB0aGlzLmZldGNoUG9saWN5O1xuXG4gICAgICBpZiAoIWNsaWVudClcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignTm8gQXBvbGxvIGNsaWVudC4gU2VlIGh0dHBzOi8vYXBvbGxvZWxlbWVudHMuZGV2L2d1aWRlcy9nZXR0aW5nLXN0YXJ0ZWQvYXBvbGxvLWNsaWVudC8nKTtcblxuICAgICAgaWYgKCh0aGlzLm9ic2VydmFibGUgJiYgIXNob3VsZFJlc3Vic2NyaWJlKSB8fCBza2lwKVxuICAgICAgICByZXR1cm47XG5cbiAgICAgIHRoaXMub2JzZXJ2YWJsZSA9XG4gICAgICAgIGNsaWVudC5zdWJzY3JpYmU8RGF0YTxEPiwgVmFyaWFibGVzPEQsIFY+Pih7IHF1ZXJ5LCB2YXJpYWJsZXMsIGZldGNoUG9saWN5IH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYGRhdGFgLCBgbG9hZGluZ2AsIGFuZCBgZXJyb3JgIG9uIHRoZSBpbnN0YW5jZSB3aGVuIG5ldyBzdWJzY3JpcHRpb24gcmVzdWx0cyBhcnJpdmUuXG4gICAgICovXG4gICAgcHJpdmF0ZSBuZXh0RGF0YShyZXN1bHQ6IEZldGNoUmVzdWx0PERhdGE8RD4+KSB7XG4gICAgICBjb25zdCBkYXRhID0gcmVzdWx0LmRhdGEgPz8gbnVsbDsgLyogYzggaWdub3JlIG5leHQgKi9cbiAgICAgIC8vIElmIHdlIGdvdCB0byB0aGlzIGxpbmUgd2l0aG91dCBhIGNsaWVudCwgaXQncyBiZWNhdXNlIG9mIHVzZXIgZXJyb3JcbiAgICAgIGNvbnN0IGNsaWVudCA9IHRoaXMuY2xpZW50ITsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tbm9uLW51bGwtYXNzZXJ0aW9uXG4gICAgICBjb25zdCBsb2FkaW5nID0gZmFsc2U7XG4gICAgICBjb25zdCBlcnJvciA9IG51bGw7XG4gICAgICBjb25zdCBzdWJzY3JpcHRpb25EYXRhID0geyBkYXRhLCBsb2FkaW5nLCBlcnJvciB9O1xuICAgICAgY29uc3QgZGV0YWlsID0geyBjbGllbnQsIHN1YnNjcmlwdGlvbkRhdGEgfTtcbiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2Fwb2xsby1zdWJzY3JpcHRpb24tcmVzdWx0JywgeyBkZXRhaWwgfSkpO1xuICAgICAgdGhpcy5kYXRhID0gZGF0YTtcbiAgICAgIHRoaXMubG9hZGluZyA9IGxvYWRpbmc7XG4gICAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gICAgICB0aGlzLm9uU3Vic2NyaXB0aW9uRGF0YT8uKGRldGFpbCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBgZXJyb3JgIGFuZCBgbG9hZGluZ2Agb24gdGhlIGluc3RhbmNlIHdoZW4gdGhlIHN1YnNjcmlwdGlvbiBlcnJvcnMuXG4gICAgICovXG4gICAgcHJpdmF0ZSBuZXh0RXJyb3IoZXJyb3I6IEFwb2xsb0Vycm9yKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdhcG9sbG8tZXJyb3InLCB7IGRldGFpbDogZXJyb3IgfSkpO1xuICAgICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICB0aGlzLm9uRXJyb3I/LihlcnJvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2h1dHMgZG93biB0aGUgc3Vic2NyaXB0aW9uXG4gICAgICovXG4gICAgcHJpdmF0ZSBvbkNvbXBsZXRlKCk6IHZvaWQge1xuICAgICAgdGhpcy5vblN1YnNjcmlwdGlvbkNvbXBsZXRlPy4oKTtcbiAgICAgIHRoaXMuZW5kU3Vic2NyaXB0aW9uKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBlbmRTdWJzY3JpcHRpb24oKSB7XG4gICAgICBpZiAodGhpcy5vYnNlcnZhYmxlU3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIHRoaXMub2JzZXJ2YWJsZVN1YnNjcmlwdGlvbi51bnN1YnNjcmliZSgpO1xuICAgICAgICB0aGlzLm9ic2VydmFibGVTdWJzY3JpcHRpb24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQXBvbGxvU3Vic2NyaXB0aW9uRWxlbWVudC5wcm90b3R5cGUsIHtcbiAgICBzdWJzY3JpcHRpb246IGdxbERvY3VtZW50KCksXG4gICAgbm9BdXRvU3Vic2NyaWJlOiBib29sZWFuQXR0cignbm8tYXV0by1zdWJzY3JpYmUnKSxcbiAgfSk7XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvcjogaXQgaXMgdGhvdWdoXG4gIHJldHVybiBBcG9sbG9TdWJzY3JpcHRpb25FbGVtZW50O1xufVxuXG4vKipcbiAqIGBBcG9sbG9TdWJzY3JpcHRpb25NaXhpbmA6IGNsYXNzIG1peGluIGZvciBhcG9sbG8tc3Vic2NyaXB0aW9uIGVsZW1lbnRzLlxuICovXG5leHBvcnQgY29uc3QgQXBvbGxvU3Vic2NyaXB0aW9uTWl4aW4gPVxuICBkZWR1cGVNaXhpbihBcG9sbG9TdWJzY3JpcHRpb25NaXhpbkltcGwpO1xuIiwgImltcG9ydCB0eXBlIHtcbiAgQXBvbGxvQ2xpZW50LFxuICBBcG9sbG9FcnJvcixcbiAgRG9jdW1lbnROb2RlLFxuICBGZXRjaFBvbGljeSxcbiAgRmV0Y2hSZXN1bHQsXG4gIE5vcm1hbGl6ZWRDYWNoZU9iamVjdCxcbiAgT2JzZXJ2YWJsZSxcbiAgT3BlcmF0aW9uVmFyaWFibGVzLFxuICBTdWJzY3JpcHRpb25PcHRpb25zLFxufSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcblxuaW1wb3J0IHR5cGUgeyBDb21wb25lbnREb2N1bWVudCwgRGF0YSwgVmFyaWFibGVzIH0gZnJvbSAnLi9vcGVyYXRpb24nO1xuaW1wb3J0IHR5cGUgeyBBcG9sbG9FbGVtZW50SW50ZXJmYWNlIH0gZnJvbSAnLi9hcG9sbG8tZWxlbWVudCc7XG5cbmltcG9ydCB7IEFwb2xsb1N1YnNjcmlwdGlvbk1peGluIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9taXhpbnMvYXBvbGxvLXN1YnNjcmlwdGlvbi1taXhpbic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uUmVzdWx0PFREYXRhPiB7XG4gIC8qKiB3aGV0aGVyIHRoZSBzdWJzY3JpcHRpb24gaXMgbG9hZGluZyAqL1xuICBsb2FkaW5nOiBib29sZWFuO1xuICAvKiogc3Vic2NyaXB0aW9uIGRhdGEgKi9cbiAgZGF0YTogVERhdGEgfCBudWxsO1xuICAvKiogc3Vic2NyaXB0aW9uIGVycm9yICovXG4gIGVycm9yOiBBcG9sbG9FcnJvciB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU3Vic2NyaXB0aW9uRGF0YU9wdGlvbnM8RCA9IHVua25vd24sIFYgPSBPcGVyYXRpb25WYXJpYWJsZXM+IHtcbiAgc3Vic2NyaXB0aW9uOiBEb2N1bWVudE5vZGUgfCBDb21wb25lbnREb2N1bWVudDxEPjtcbiAgdmFyaWFibGVzPzogVmFyaWFibGVzPEQsIFY+O1xuICBmZXRjaFBvbGljeT86IEZldGNoUG9saWN5O1xuICBzaG91bGRSZXN1YnNjcmliZT86XG4gICAgfCBib29sZWFuXG4gICAgfCAoKG9wdGlvbnM6IFN1YnNjcmlwdGlvbkRhdGFPcHRpb25zPEQsIFY+KSA9PiBib29sZWFuKTtcbiAgY2xpZW50PzogQXBvbGxvQ2xpZW50PE5vcm1hbGl6ZWRDYWNoZU9iamVjdD47XG4gIHNraXA/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9uU3Vic2NyaXB0aW9uRGF0YVBhcmFtczxURGF0YSA9IHVua25vd24+IHtcbiAgY2xpZW50OiBBcG9sbG9DbGllbnQ8Tm9ybWFsaXplZENhY2hlT2JqZWN0PjtcbiAgc3Vic2NyaXB0aW9uRGF0YTogU3Vic2NyaXB0aW9uUmVzdWx0PFREYXRhPjtcbn1cblxuLyoqXG4gKiBDb21tb24gaW50ZXJmYWNlIGZvciBzdWJzY3JpcHRpb24gZWxlbWVudHNcbiAqXG4gKiBTZWUgW2BBcG9sbG9FbGVtZW50SW50ZXJmYWNlYF0oaHR0cHM6Ly9hcG9sbG9lbGVtZW50cy5kZXYvYXBpL2ludGVyZmFjZXMvZWxlbWVudCkgZm9yIG1vcmUgaW5mb3JtYXRpb24gb24gZXZlbnRzXG4gKlxuICogQGVsZW1lbnRcbiAqXG4gKiBAZmlyZXMgJ2Fwb2xsby1zdWJzY3JpcHRpb24tcmVzdWx0JyB3aGVuIHRoZSBzdWJzY3JpcHRpb24gdXBkYXRlc1xuICogQGZpcmVzICdhcG9sbG8tZXJyb3InIHdoZW4gdGhlIHF1ZXJ5IHJlamVjdHNcbiAqL1xuZXhwb3J0IGRlY2xhcmUgYWJzdHJhY3QgY2xhc3MgQXBvbGxvU3Vic2NyaXB0aW9uSW50ZXJmYWNlPEQsIFYgPSBPcGVyYXRpb25WYXJpYWJsZXM+XG4gIGV4dGVuZHMgQXBvbGxvRWxlbWVudEludGVyZmFjZSB7XG4gIC8qKlxuICAgKiBMYXRlc3Qgc3Vic2NyaXB0aW9uIGRhdGEuXG4gICAqL1xuICBkZWNsYXJlIGRhdGE6IERhdGE8RD4gfCBudWxsO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgbWFwIGZyb20gdmFyaWFibGUgbmFtZSB0byB2YXJpYWJsZSB2YWx1ZSwgd2hlcmUgdGhlIHZhcmlhYmxlcyBhcmUgdXNlZCB3aXRoaW4gdGhlIEdyYXBoUUwgc3Vic2NyaXB0aW9uLlxuICAgKlxuICAgKiBTZXR0aW5nIHZhcmlhYmxlcyB3aWxsIGluaXRpYXRlIHRoZSBzdWJzY3JpcHRpb24sIHVubGVzcyBbYG5vQXV0b1N1YnNjcmliZWBdKCNub2F1dG9zdWJzY3JpYmUpIGlzIGFsc28gc2V0LlxuICAgKlxuICAgKiBAc3VtbWFyeSBTdWJzY3JpcHRpb24gdmFyaWFibGVzLlxuICAgKi9cbiAgZGVjbGFyZSB2YXJpYWJsZXM6IFZhcmlhYmxlczxELCBWPiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFNwZWNpZmllcyB0aGUgRmV0Y2hQb2xpY3kgdG8gYmUgdXNlZCBmb3IgdGhpcyBzdWJzY3JpcHRpb24uXG4gICAqL1xuICBkZWNsYXJlIGZldGNoUG9saWN5PzogRmV0Y2hQb2xpY3k7XG5cbiAgLyoqXG4gICAqIFRoZSB0aW1lIGludGVydmFsIChpbiBtaWxsaXNlY29uZHMpIG9uIHdoaWNoIHRoaXMgc3Vic2NyaXB0aW9uIHNob3VsZCBiZSByZWZldGNoZWQgZnJvbSB0aGUgc2VydmVyLlxuICAgKi9cbiAgZGVjbGFyZSBwb2xsSW50ZXJ2YWw/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgb3Igbm90IHVwZGF0ZXMgdG8gdGhlIG5ldHdvcmsgc3RhdHVzIHNob3VsZCB0cmlnZ2VyIG5leHQgb24gdGhlIG9ic2VydmVyIG9mIHRoaXMgc3Vic2NyaXB0aW9uLlxuICAgKi9cbiAgZGVjbGFyZSBub3RpZnlPbk5ldHdvcmtTdGF0dXNDaGFuZ2U6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIE9ic2VydmFibGUgd2F0Y2hpbmcgdGhpcyBlbGVtZW50J3Mgc3Vic2NyaXB0aW9uLlxuICAgKi9cbiAgZGVjbGFyZSBvYnNlcnZhYmxlPzogT2JzZXJ2YWJsZTxGZXRjaFJlc3VsdDxEYXRhPEQ+Pj47XG5cbiAgLyoqXG4gICAqIFN1YnNjcmlwdGlvbiB0byB0aGUgb2JzZXJ2YWJsZVxuICAgKi9cbiAgZGVjbGFyZSBvYnNlcnZhYmxlU3Vic2NyaXB0aW9uPzogWmVuT2JzZXJ2YWJsZS5TdWJzY3JpcHRpb247XG5cbiAgLyoqXG4gICAqIEEgR3JhcGhRTCBkb2N1bWVudCBjb250YWluaW5nIGEgc2luZ2xlIHN1YnNjcmlwdGlvbi5cbiAgICovXG4gIGRlY2xhcmUgc3Vic2NyaXB0aW9uOiBEb2N1bWVudE5vZGUgfCBDb21wb25lbnREb2N1bWVudDxEPiB8IG51bGw7XG5cbiAgLyoqXG4gICAqIElmIHRydWUsIHRoZSBlbGVtZW50IHdpbGwgbm90IGJlZ2luIHF1ZXJ5aW5nIGRhdGEgdW50aWwgeW91IG1hbnVhbGx5IGNhbGwgYHN1YnNjcmliZWBcbiAgICovXG4gIGRlY2xhcmUgbm9BdXRvU3Vic2NyaWJlOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBJZiBza2lwIGlzIHRydWUsIHRoZSBxdWVyeSB3aWxsIGJlIHNraXBwZWQgZW50aXJlbHlcbiAgICovXG4gIGRlY2xhcmUgc2tpcDogYm9vbGVhbjtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB5b3VyIHN1YnNjcmlwdGlvbiBzaG91bGQgYmUgdW5zdWJzY3JpYmVkIGFuZCBzdWJzY3JpYmVkIGFnYWluLlxuICAgKi9cbiAgZGVjbGFyZSBzaG91bGRSZXN1YnNjcmliZTogU3Vic2NyaXB0aW9uRGF0YU9wdGlvbnNbJ3Nob3VsZFJlc3Vic2NyaWJlJ107XG5cbiAgY29uc3RydWN0b3IoLi4uYTogYW55W10pO1xuXG4gIC8qKlxuICAgKiBSZXNldHMgdGhlIG9ic2VydmFibGUgYW5kIHN1YnNjcmliZXMuXG4gICAqL1xuICBwdWJsaWMgc3Vic2NyaWJlKHBhcmFtcz86IFBhcnRpYWw8U3Vic2NyaXB0aW9uRGF0YU9wdGlvbnM8RCwgVj4+KTogdm9pZFxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGFuZCBjbGVhcnMgdGhlIHN1YnNjcmlwdGlvblxuICAgKi9cbiAgcHVibGljIGNhbmNlbCgpOiB2b2lkXG5cbiAgLyoqIEZsYWdzIGFuIGVsZW1lbnQgdGhhdCdzIHJlYWR5IGFuZCBhYmxlIHRvIGF1dG8gc3Vic2NyaWJlICovXG4gIHB1YmxpYyBnZXQgY2FuQXV0b1N1YnNjcmliZSgpOiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGVsZW1lbnQgc2hvdWxkIGF0dGVtcHQgdG8gc3Vic2NyaWJlIGkuZS4gYmVnaW4gcXVlcnlpbmdcbiAgICogT3ZlcnJpZGUgdG8gcHJldmVudCBzdWJzY3JpYmluZyB1bmxlc3MgeW91ciBjb25kaXRpb25zIGFyZSBtZXRcbiAgICovXG4gIHNob3VsZFN1YnNjcmliZShcbiAgICBvcHRpb25zPzogUGFydGlhbDxTdWJzY3JpcHRpb25PcHRpb25zPFZhcmlhYmxlczxELCBWPiwgRGF0YTxEPj4+XG4gICk6IGJvb2xlYW5cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyB3aGV0aGVyIHRoZSBlbGVtZW50IGlzIGFibGUgdG8gYXV0b21hdGljYWxseSBzdWJzY3JpYmVcbiAgICovXG4gIHByb3RlY3RlZCBjYW5TdWJzY3JpYmUob3B0aW9ucz86IFBhcnRpYWw8U3Vic2NyaXB0aW9uT3B0aW9uczxWYXJpYWJsZXM8RCwgVj4sIERhdGE8RD4+Pik6IGJvb2xlYW5cblxuICAvKipcbiAgICogQ2FsbGJhY2sgZm9yIHdoZW4gZGF0YSBpcyB1cGRhdGVkXG4gICAqL1xuICBvblN1YnNjcmlwdGlvbkRhdGE/KHJlc3VsdDogT25TdWJzY3JpcHRpb25EYXRhUGFyYW1zPERhdGE8RD4+KTogdm9pZDtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZm9yIHdoZW4gZXJyb3IgaXMgdXBkYXRlZFxuICAgKi9cbiAgb25FcnJvcj8oZXJyb3I6IEFwb2xsb0Vycm9yKTogdm9pZDtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZm9yIHdoZW4gc3Vic2NyaXB0aW9uIGNvbXBsZXRlcy5cbiAgICovXG4gIG9uU3Vic2NyaXB0aW9uQ29tcGxldGU/KCk6IHZvaWQ7XG5cbiAgcHJpdmF0ZSBpbml0T2JzZXJ2YWJsZShwYXJhbXM/OiBQYXJ0aWFsPFN1YnNjcmlwdGlvbkRhdGFPcHRpb25zPEQsIFY+Pik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFNldHMgYGRhdGFgLCBgbG9hZGluZ2AsIGFuZCBgZXJyb3JgIG9uIHRoZSBpbnN0YW5jZSB3aGVuIG5ldyBzdWJzY3JpcHRpb24gcmVzdWx0cyBhcnJpdmUuXG4gICAqL1xuICBwcml2YXRlIG5leHREYXRhKHJlc3VsdDogRmV0Y2hSZXN1bHQ8RGF0YTxEPj4pOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBTZXRzIGBlcnJvcmAgYW5kIGBsb2FkaW5nYCBvbiB0aGUgaW5zdGFuY2Ugd2hlbiB0aGUgc3Vic2NyaXB0aW9uIGVycm9ycy5cbiAgICovXG4gIHByaXZhdGUgbmV4dEVycm9yKGVycm9yOiBBcG9sbG9FcnJvcik6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIFNodXRzIGRvd24gdGhlIHN1YnNjcmlwdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBvbkNvbXBsZXRlKCk6IHZvaWQ7XG5cbiAgcHJpdmF0ZSBlbmRTdWJzY3JpcHRpb24oKTogdm9pZDtcbn1cblxuZXhwb3J0IGNsYXNzIEFwb2xsb1N1YnNjcmlwdGlvbkVsZW1lbnQ8RCA9IHVua25vd24sIFYgPSBPcGVyYXRpb25WYXJpYWJsZXM+XG4gIGV4dGVuZHMgQXBvbGxvU3Vic2NyaXB0aW9uTWl4aW4oSFRNTEVsZW1lbnQpPEQsIFY+IHsgfVxuIiwgImltcG9ydCB0eXBlIHtcbiAgQXBvbGxvQ2xpZW50LFxuICBEb2N1bWVudE5vZGUsXG4gIE5vcm1hbGl6ZWRDYWNoZU9iamVjdCxcbiAgT3BlcmF0aW9uVmFyaWFibGVzLFxuICBUeXBlZERvY3VtZW50Tm9kZSxcbn0gZnJvbSAnQGFwb2xsby9jbGllbnQvY29yZSc7XG5cbmltcG9ydCB0eXBlIHsgU3RhdGUgfSBmcm9tICdoYXVudGVkJztcblxuaW1wb3J0IHsgQXBvbGxvU3Vic2NyaXB0aW9uRWxlbWVudCB9IGZyb20gJ0BhcG9sbG8tZWxlbWVudHMvaW50ZXJmYWNlcy9hcG9sbG8tc3Vic2NyaXB0aW9uJztcblxuaW1wb3J0IHsgaG9vayB9IGZyb20gJ2hhdW50ZWQnO1xuXG5pbXBvcnQgeyBBcG9sbG9Ib29rIH0gZnJvbSAnLi9BcG9sbG9Ib29rJztcblxuZXhwb3J0IHR5cGUgU3Vic2NyaXB0aW9uSG9va09wdGlvbnM8RCwgVj4gPSBQYXJ0aWFsPFBpY2s8QXBvbGxvU3Vic2NyaXB0aW9uRWxlbWVudDxELCBWPixcbiAgfCAnZmV0Y2hQb2xpY3knXG4gIHwgJ25vQXV0b1N1YnNjcmliZSdcbiAgfCAnb25TdWJzY3JpcHRpb25Db21wbGV0ZSdcbiAgfCAnb25TdWJzY3JpcHRpb25EYXRhJ1xuICB8ICdzaG91bGRSZXN1YnNjcmliZSdcbiAgfCAnc2hvdWxkU3Vic2NyaWJlJ1xuICB8ICdza2lwJ1xuICB8ICdzdWJzY3JpcHRpb24nXG4gIHwgJ3ZhcmlhYmxlcydcbj4gJiB7XG4gIGNsaWVudD86IEFwb2xsb0NsaWVudDxOb3JtYWxpemVkQ2FjaGVPYmplY3Q+O1xufT47XG5cbmV4cG9ydCB0eXBlIFN1YnNjcmlwdGlvblJlc3VsdDxEPiA9IFBpY2s8QXBvbGxvU3Vic2NyaXB0aW9uRWxlbWVudDxEPixcbiAgfCAnZGF0YSdcbiAgfCAnZXJyb3InXG4gIHwgJ2xvYWRpbmcnXG4+O1xuXG5jbGFzcyBVc2VTdWJzY3JpcHRpb25Ib29rPEQsIFYgPSBPcGVyYXRpb25WYXJpYWJsZXM+IGV4dGVuZHMgQXBvbGxvSG9vazxcbiAgRCxcbiAgVixcbiAgU3Vic2NyaXB0aW9uSG9va09wdGlvbnM8RCwgVj4sXG4gIFN1YnNjcmlwdGlvblJlc3VsdDxEPixcbiAgQXBvbGxvU3Vic2NyaXB0aW9uRWxlbWVudDxELCBWPlxuPiB7XG4gIHJlYWRvbmx5IHR5cGUgPSAnc3Vic2NyaXB0aW9uJztcblxuICByZWFkb25seSBjb21wb25lbnRDbGFzcyA9IEFwb2xsb1N1YnNjcmlwdGlvbkVsZW1lbnQ7XG5cbiAgcmVhZG9ubHkgZGVmYXVsdHM6IFBhcnRpYWw8QXBvbGxvU3Vic2NyaXB0aW9uRWxlbWVudDxELCBWPj4gPSB7XG4gICAgbm90aWZ5T25OZXR3b3JrU3RhdHVzQ2hhbmdlOiBmYWxzZSxcbiAgICBzaG91bGRSZXN1YnNjcmliZTogZmFsc2UsXG4gICAgc2tpcDogZmFsc2UsXG4gIH07XG5cbiAgY29uc3RydWN0b3IoXG4gICAgaWQ6IG51bWJlcixcbiAgICBzdGF0ZTogU3RhdGU8QXBvbGxvU3Vic2NyaXB0aW9uRWxlbWVudDxELCBWPj4sXG4gICAgc3Vic2NyaXB0aW9uOiBEIGV4dGVuZHMgVHlwZWREb2N1bWVudE5vZGUgPyBEIDogRG9jdW1lbnROb2RlLFxuICAgIG9wdGlvbnM/OiBTdWJzY3JpcHRpb25Ib29rT3B0aW9uczxELCBWPlxuICApIHtcbiAgICBzdXBlcihpZCwgc3RhdGUsIHN1YnNjcmlwdGlvbiwgb3B0aW9ucyk7XG4gICAgdGhpcy5pbml0KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3B0aW9uc1RvUHJvcGVydGllcygpIHtcbiAgICBjb25zdCB7XG4gICAgICBvblN1YnNjcmlwdGlvbkNvbXBsZXRlLCBvblN1YnNjcmlwdGlvbkRhdGEsIHNob3VsZFN1YnNjcmliZSxcbiAgICAgIC4uLm9wdGlvbnNcbiAgICB9ID0gdGhpcy5vcHRpb25zO1xuICAgIHJldHVybiB7XG4gICAgICAuLi50aGlzLmRlZmF1bHRzLFxuICAgICAgbm9BdXRvU3Vic2NyaWJlOiBvcHRpb25zLm5vQXV0b1N1YnNjcmliZSA/PyB0aGlzLnN0YXRlLmhvc3QuaGFzQXR0cmlidXRlKCduby1hdXRvLXN1YnNjcmliZScpLFxuICAgICAgc2tpcDogb3B0aW9ucy5za2lwID8/IGZhbHNlLFxuICAgICAgc3Vic2NyaXB0aW9uOiB0aGlzLmRvY3VtZW50LFxuICAgICAgdmFyaWFibGVzOiBvcHRpb25zLnZhcmlhYmxlcyxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIG9wdGlvbnNUb09wdGlvbmFsTWV0aG9kcygpOiBQYXJ0aWFsPEFwb2xsb1N1YnNjcmlwdGlvbkVsZW1lbnQ8RCwgVj4+IHtcbiAgICBjb25zdCB7IG9uU3Vic2NyaXB0aW9uRGF0YSwgc2hvdWxkU3Vic2NyaWJlIH0gPSB0aGlzLm9wdGlvbnM7XG4gICAgcmV0dXJuIHsgb25TdWJzY3JpcHRpb25EYXRhLCBzaG91bGRTdWJzY3JpYmUgfTtcbiAgfVxuXG4gIHVwZGF0ZSgpOiBTdWJzY3JpcHRpb25SZXN1bHQ8RD4ge1xuICAgIGlmICh0aGlzLmRpc2Nvbm5lY3RlZCkgdGhpcy5jb25uZWN0KCk7XG5cbiAgICBjb25zdCB7IGRhdGEsIGVycm9yLCBsb2FkaW5nIH0gPSB0aGlzLnN0YXRlLmhvc3Q7XG5cbiAgICByZXR1cm4geyBkYXRhLCBlcnJvciwgbG9hZGluZyB9O1xuICB9XG59XG5cbmV4cG9ydCBjb25zdCB1c2VTdWJzY3JpcHRpb24gPSBob29rKFVzZVN1YnNjcmlwdGlvbkhvb2spO1xuIiwgIi8qIGVzbGludC1kaXNhYmxlIG5vLW5lc3RlZC10ZXJuYXJ5ICovXG5pbXBvcnQgeyBncWwgfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfQkFSQkVRVUVTX0NPTExFQ1RJT05fUFJJQ0VfUkFOR0UgPSBbMSwgMzAwMDBdO1xuZXhwb3J0IGNvbnN0IERFRkFVTFRfQkFSQkVRVUVTX0NPTExFQ1RJT05fR1JJTExfQ09PS0lOR19BUkVBX1JBTkdFID0gWzEsIDIwXTtcblxuZXhwb3J0IGNvbnN0IEdFVF9QUk9EVUNUX0JZX0hBTkRMRSA9IGdxbGBcbiAgcXVlcnkgZ2V0UHJvZHVjdEJ5SGFuZGxlKCRoYW5kbGU6IFN0cmluZyEpIHtcbiAgICBwcm9kdWN0QnlIYW5kbGUoaGFuZGxlOiAkaGFuZGxlKSB7XG4gICAgICBpZFxuICAgICAgb25saW5lU3RvcmVVcmxcbiAgICAgIGF2YWlsYWJsZUZvclNhbGVcbiAgICAgIGhhbmRsZVxuICAgICAgdGl0bGVcbiAgICAgIHRvdGFsSW52ZW50b3J5XG4gICAgICB0YWdzXG4gICAgICB2ZW5kb3JcbiAgICAgIHByb2R1Y3RUeXBlXG4gICAgICB2YXJpYW50cyhmaXJzdDogMikge1xuICAgICAgICBlZGdlcyB7XG4gICAgICAgICAgbm9kZSB7XG4gICAgICAgICAgICBpZFxuICAgICAgICAgICAgaW1hZ2Uge1xuICAgICAgICAgICAgICBhbHRUZXh0XG4gICAgICAgICAgICAgIG9yaWdpbmFsU3JjXG4gICAgICAgICAgICAgIHRyYW5zZm9ybWVkU3JjKGNyb3A6IENFTlRFUiwgbWF4V2lkdGg6IDYwMCwgbWF4SGVpZ2h0OiA2MDApXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwcmljZVYyIHtcbiAgICAgICAgICAgICAgYW1vdW50XG4gICAgICAgICAgICAgIGN1cnJlbmN5Q29kZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcXVhbnRpdHlBdmFpbGFibGVcbiAgICAgICAgICAgIGF2YWlsYWJsZUZvclNhbGVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCBHRVRfUFJPRFVDVFMgPSBncWxgXG4gIHF1ZXJ5IGdldFByb2R1Y3RzKFxuICAgICRmaXJzdDogSW50XG4gICAgJGFmdGVyOiBTdHJpbmdcbiAgICAkcXVlcnk6IFN0cmluZ1xuICAgICRyZXZlcnNlOiBCb29sZWFuXG4gICAgJHNvcnRLZXk6IFByb2R1Y3RTb3J0S2V5c1xuICApIHtcbiAgICBwcm9kdWN0cyhcbiAgICAgIGZpcnN0OiAkZmlyc3RcbiAgICAgIGFmdGVyOiAkYWZ0ZXJcbiAgICAgIHF1ZXJ5OiAkcXVlcnlcbiAgICAgIHJldmVyc2U6ICRyZXZlcnNlXG4gICAgICBzb3J0S2V5OiAkc29ydEtleVxuICAgICkge1xuICAgICAgZWRnZXMge1xuICAgICAgICBjdXJzb3JcbiAgICAgICAgbm9kZSB7XG4gICAgICAgICAgaWRcbiAgICAgICAgICBvbmxpbmVTdG9yZVVybFxuICAgICAgICAgIGhhbmRsZVxuICAgICAgICAgIHRpdGxlXG4gICAgICAgICAgYXZhaWxhYmxlRm9yU2FsZVxuICAgICAgICAgIHByb2R1Y3RUeXBlXG4gICAgICAgICAgdmVuZG9yXG4gICAgICAgICAgdG90YWxJbnZlbnRvcnlcbiAgICAgICAgICBpbWFnZXMoZmlyc3Q6IDIpIHtcbiAgICAgICAgICAgIGVkZ2VzIHtcbiAgICAgICAgICAgICAgbm9kZSB7XG4gICAgICAgICAgICAgICAgYWx0VGV4dFxuICAgICAgICAgICAgICAgIG9yaWdpbmFsU3JjXG4gICAgICAgICAgICAgICAgdHJhbnNmb3JtZWRTcmMoY3JvcDogQ0VOVEVSLCBtYXhXaWR0aDogMzQwLCBtYXhIZWlnaHQ6IDM0MClcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBwcmljZVJhbmdlIHtcbiAgICAgICAgICAgIG1heFZhcmlhbnRQcmljZSB7XG4gICAgICAgICAgICAgIGFtb3VudFxuICAgICAgICAgICAgICBjdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG1pblZhcmlhbnRQcmljZSB7XG4gICAgICAgICAgICAgIGFtb3VudFxuICAgICAgICAgICAgICBjdXJyZW5jeUNvZGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdGFnc1xuICAgICAgICAgIGRlc2NyaXB0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbmA7XG5cbmV4cG9ydCBjb25zdCB0cmFuc2Zvcm1GdW5jID0gKHtcbiAgYXZhaWxhYmxlRm9yU2FsZSxcbiAgdG90YWxJbnZlbnRvcnksXG4gIG9ubGluZVN0b3JlVXJsLFxuICBkZXNjcmlwdGlvbixcbiAgaGFuZGxlLFxuICBpbWFnZXMsXG4gIHByaWNlUmFuZ2UsXG4gIHRhZ3MsXG4gIHRpdGxlLFxuICB2ZW5kb3IsXG4gIHByb2R1Y3RUeXBlLFxufSkgPT4gKHtcbiAgYXZhaWxhYmxlRm9yU2FsZSxcbiAgaW5TdG9jazogdG90YWxJbnZlbnRvcnkgPiAwLFxuICB0b3RhbEludmVudG9yeSxcbiAgdGl0bGUsXG4gIGhhbmRsZSxcbiAgaW1hZ2VzOlxuICAgIGltYWdlcz8uZWRnZXM/Lm1hcCgoeyBub2RlOiBpbWFnZSB9KSA9PiAoe1xuICAgICAgaW1hZ2VBbHRUZXh0OiBpbWFnZT8uYWx0VGV4dCA/PyBudWxsLFxuICAgICAgaW1hZ2VPcmlnaW5hbFNyYzogaW1hZ2U/Lm9yaWdpbmFsU3JjID8/IG51bGwsXG4gICAgICBpbWFnZVRyYW5zZm9ybWVkU3JjOiBpbWFnZT8udHJhbnNmb3JtZWRTcmMgPz8gbnVsbCxcbiAgICB9KSkgPz8gW10sXG4gIG1heFZhcmlhbnRQcmljZTogTnVtYmVyKHByaWNlUmFuZ2U/Lm1heFZhcmlhbnRQcmljZT8uYW1vdW50KSxcbiAgbWluVmFyaWFudFByaWNlOiBOdW1iZXIocHJpY2VSYW5nZT8ubWluVmFyaWFudFByaWNlPy5hbW91bnQpLFxuICB0YWdzLFxuICBkZXNjcmlwdGlvbixcbiAgdmVuZG9yLFxuICBwcm9kdWN0VHlwZSxcbiAgb25saW5lU3RvcmVVcmwsXG59KTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUZyYWdtZW50RnJvbVN0cmluZyA9IChzdHIpID0+XG4gIGRvY3VtZW50LmNyZWF0ZVJhbmdlKCkuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KHN0cik7XG5cbmV4cG9ydCBjb25zdCBzdHJpcEhUTUwgPSAoc3RyKSA9PiBzdHIucmVwbGFjZSgvKDwoW14+XSspPikvZ2ksICcnKTtcblxuZXhwb3J0IGNvbnN0IGFkZHNsYXNoZXMgPSAoc3RyKSA9PlxuICBgJHtzdHJ9YC5yZXBsYWNlKC8oW1xcXFxcIiddKS9nLCAnXFxcXCQxJykucmVwbGFjZSgvXFwwL2csICdcXFxcMCcpO1xuXG5leHBvcnQgY29uc3QgYWRkUXVvdGVzSWZOZWNlc3NhcnkgPSAoY3VyKSA9PlxuICBjdXIuc3BsaXQoL1xccysvKS5sZW5ndGggPiAxID8gYFwiJHtjdXJ9XCJgIDogY3VyO1xuXG5leHBvcnQgY29uc3QgcmVtb3ZlS2V5ID0gKG9iaiwgcHJvcFRvRGVsZXRlKSA9PiB7XG4gIGNvbnN0IHsgW3Byb3BUb0RlbGV0ZV06IGRlbGV0ZWQsIC4uLm9iamVjdFdpdGhvdXREZWxldGVkUHJvcCB9ID0gb2JqO1xuICByZXR1cm4gb2JqZWN0V2l0aG91dERlbGV0ZWRQcm9wO1xufTtcbi8vIHVzZWQgdG8gZ2VuZXJhdGUgcXVlcnkgc3RyaW5nIHdoaWNoIHRvIGJlIHVzZWQgaW4gZ3JhcGhxbCByZXF1ZXN0XG5leHBvcnQgY29uc3QgZ2V0UXVlcnlTdHJpbmcgPSAoe1xuICBzZWFyY2hTdHJpbmcgPSAnJyxcbiAgcHJvZHVjdFR5cGVzID0gW10sXG59ID0ge30pID0+IHtcbiAgbGV0IHNlYXJjaFN0cmluZ1BhcnQgPSAnJztcbiAgY29uc3QgcXVlcnlWYWx1ZVN0cmluZyA9XG4gICAgc2VhcmNoU3RyaW5nLnRyaW0oKSA9PT0gJydcbiAgICAgID8gYCpgXG4gICAgICA6IHNlYXJjaFN0cmluZy50cmltKCkuc3BsaXQoJyAnKS5sZW5ndGggPiAxXG4gICAgICA/IGBcIiR7YWRkc2xhc2hlcyhcbiAgICAgICAgICBzZWFyY2hTdHJpbmcudHJpbSgpLnNwbGl0KCcgJykuc2xpY2UoMCwgLTEpLmpvaW4oJyAnKVxuICAgICAgICApfSpcImBcbiAgICAgIDogYCR7YWRkc2xhc2hlcyhzZWFyY2hTdHJpbmcudHJpbSgpKX0qYDtcblxuICBpZiAoc2VhcmNoU3RyaW5nLnRyaW0oKSAhPT0gJycpIHtcbiAgICBzZWFyY2hTdHJpbmdQYXJ0ID0gYCBBTkQgKHRpdGxlOiR7cXVlcnlWYWx1ZVN0cmluZ30gT1IgZGVzY3JpcHRpb246JHtxdWVyeVZhbHVlU3RyaW5nfSBPUiB0YWdzOiR7cXVlcnlWYWx1ZVN0cmluZ30pYDtcbiAgfVxuXG4gIGxldCBwcm9kdWN0VHlwZXNQYXJ0ID0gYCR7cHJvZHVjdFR5cGVzXG4gICAgLm1hcCgodHlwZSkgPT4gYHByb2R1Y3RfdHlwZTpcIiR7YWRkc2xhc2hlcyh0eXBlKX1cImApXG4gICAgLmpvaW4oJyBPUiAnKX1gO1xuXG4gIGlmIChwcm9kdWN0VHlwZXNQYXJ0ICE9PSAnJykge1xuICAgIHByb2R1Y3RUeXBlc1BhcnQgPSBgIEFORCAoJHtwcm9kdWN0VHlwZXNQYXJ0fSlgO1xuICB9XG5cbiAgcmV0dXJuIGBhdmFpbGFibGVfZm9yX3NhbGU6dHJ1ZSR7c2VhcmNoU3RyaW5nUGFydH0ke3Byb2R1Y3RUeXBlc1BhcnR9YDtcbn07XG5cbmV4cG9ydCBjb25zdCBxdWVyeUFsbFByb2R1Y3RzVGhyb3VnaEdyYXBocWxDcmVhdG9yID0gKHtcbiAgc2VhcmNoU3RyaW5nID0gJycsXG4gIHByb2R1Y3RUeXBlcyA9IFtdLFxufSA9IHt9KSA9PiB7XG4gIGxldCBwcm9kdWN0cyA9IFtdO1xuICBjb25zdCBxdWVyeTI1MFByb2R1Y3RzID0gKGRhdGFXaXRoTGFzdFBhZ2VQcm9kdWN0cykgPT5cbiAgICB3aW5kb3cuX19BUE9MTE9fQ0xJRU5UX19cbiAgICAgIC5xdWVyeSh7XG4gICAgICAgIHF1ZXJ5OiBHRVRfUFJPRFVDVFMsXG4gICAgICAgIHZhcmlhYmxlczoge1xuICAgICAgICAgIGZpcnN0OiAyNTAsXG4gICAgICAgICAgcXVlcnk6IGAke2dldFF1ZXJ5U3RyaW5nKHsgc2VhcmNoU3RyaW5nLCBwcm9kdWN0VHlwZXMgfSl9YCxcbiAgICAgICAgICBhZnRlcjpcbiAgICAgICAgICAgIGRhdGFXaXRoTGFzdFBhZ2VQcm9kdWN0cz8uZGF0YT8ucHJvZHVjdHM/LmVkZ2VzPy5zbGljZSgtMSk/LlswXVxuICAgICAgICAgICAgICA/LmN1cnNvciA/PyBudWxsLFxuICAgICAgICAgIHNvcnRLZXk6ICdCRVNUX1NFTExJTkcnLFxuICAgICAgICB9LFxuICAgICAgfSlcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XG4gICAgICAgIHByb2R1Y3RzID0gW1xuICAgICAgICAgIC4uLnByb2R1Y3RzLFxuICAgICAgICAgIC4uLihkYXRhPy5kYXRhPy5wcm9kdWN0cz8uZWRnZXM/Lm1hcCgoeyBub2RlIH0pID0+IG5vZGUpID8/IFtdKSxcbiAgICAgICAgXTtcbiAgICAgICAgaWYgKChkYXRhPy5kYXRhPy5wcm9kdWN0cz8uZWRnZXM/Lmxlbmd0aCA/PyAwKSA8IDI1MCkge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUocHJvZHVjdHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBxdWVyeTI1MFByb2R1Y3RzKGRhdGEpO1xuICAgICAgfSk7XG4gIHJldHVybiBxdWVyeTI1MFByb2R1Y3RzO1xufTtcblxuZXhwb3J0IGNvbnN0IHF1ZXJ5QWxsUHJvZHVjdHNGcm9tU2VhcmNoVGVybSA9IGFzeW5jIChzZWFyY2hTdHJpbmcgPSAnJykgPT4ge1xuICBjb25zdCByYXdQcm9kdWN0cyA9IGF3YWl0IHF1ZXJ5QWxsUHJvZHVjdHNUaHJvdWdoR3JhcGhxbENyZWF0b3Ioe1xuICAgIHNlYXJjaFN0cmluZyxcbiAgfSkoKTtcblxuICByZXR1cm4gcmF3UHJvZHVjdHMubWFwKHRyYW5zZm9ybUZ1bmMpO1xufTtcblxuZXhwb3J0IGNvbnN0IGhhc0ludGVyc2VjdGlvbkJldHdlZW5Ud29SYW5nZXMgPSAoYXJyMSA9IFtdLCBhcnIyID0gW10pID0+IHtcbiAgY29uc3QgW2VsMTEsIGVsMTJdID0gYXJyMTtcbiAgY29uc3QgW2VsMjEsIGVsMjJdID0gYXJyMjtcbiAgY29uc3QgbGVmdExpbWl0ID0gTWF0aC5tYXgoZWwxMSwgZWwyMSk7XG4gIGNvbnN0IHJpZ2h0TGltaXQgPSBNYXRoLm1pbihlbDEyLCBlbDIyKTtcbiAgaWYgKHJpZ2h0TGltaXQgPj0gbGVmdExpbWl0KSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IGNvbnN0IHByb2R1Y3RzRmlsdGVycyA9IChzdGF0ZSkgPT4gKHtcbiAgb25saW5lU3RvcmVPbmx5OiAocHJvZHVjdCkgPT4ge1xuICAgIGlmICghc3RhdGUub25saW5lU3RvcmVPbmx5KSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuICEhcHJvZHVjdC5vbmxpbmVTdG9yZVVybDtcbiAgfSxcbn0pO1xuXG5leHBvcnQgY29uc3QgcHJvZHVjdHNTb3J0ZXIgPSAoc3RhdGUpID0+IChwcm9kdWN0QSwgcHJvZHVjdEIpID0+IHtcbiAgc3dpdGNoIChzdGF0ZS5zb3J0VmFsdWUpIHtcbiAgICBjYXNlICdUSVRMRV9BU0MnOiB7XG4gICAgICByZXR1cm4gcHJvZHVjdEE/LnRpdGxlPy5sb2NhbGVDb21wYXJlKHByb2R1Y3RCPy50aXRsZSwgdW5kZWZpbmVkLCB7XG4gICAgICAgIGJhc2U6IHRydWUsXG4gICAgICB9KTtcbiAgICB9XG4gICAgY2FzZSAnVElUTEVfREVTQyc6IHtcbiAgICAgIHJldHVybiBwcm9kdWN0Qj8udGl0bGU/LmxvY2FsZUNvbXBhcmUocHJvZHVjdEE/LnRpdGxlLCB1bmRlZmluZWQsIHtcbiAgICAgICAgYmFzZTogdHJ1ZSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBjYXNlICdQUklDRV9BU0MnOiB7XG4gICAgICByZXR1cm4gcHJvZHVjdEEubWluVmFyaWFudFByaWNlIC0gcHJvZHVjdEIubWF4VmFyaWFudFByaWNlO1xuICAgIH1cbiAgICBjYXNlICdQUklDRV9ERVNDJzoge1xuICAgICAgcmV0dXJuIHByb2R1Y3RCLm1pblZhcmlhbnRQcmljZSAtIHByb2R1Y3RBLm1heFZhcmlhbnRQcmljZTtcbiAgICB9XG4gICAgZGVmYXVsdDoge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICB9XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0U29ydFZhbHVlRnJvbURlZmF1bHRTb3J0QnkgPSAoZGVmYXVsdFNvcnRCeSkgPT4ge1xuICBzd2l0Y2ggKGRlZmF1bHRTb3J0QnkpIHtcbiAgICBjYXNlICdiZXN0LXNlbGxpbmcnOiB7XG4gICAgICByZXR1cm4gJ0JFU1RfU0VMTElOR19BU0MnO1xuICAgIH1cbiAgICBjYXNlICd0aXRsZS1hc2NlbmRpbmcnOiB7XG4gICAgICByZXR1cm4gJ1RJVExFX0FTQyc7XG4gICAgfVxuICAgIGNhc2UgJ3RpdGxlLWRlc2NlbmRpbmcnOiB7XG4gICAgICByZXR1cm4gJ1RJVExFX0RFU0MnO1xuICAgIH1cbiAgICBjYXNlICdwcmljZS1hc2NlbmRpbmcnOiB7XG4gICAgICByZXR1cm4gJ1BSSUNFX0FTQyc7XG4gICAgfVxuICAgIGNhc2UgJ3ByaWNlLWRlc2NlbmRpbmcnOiB7XG4gICAgICByZXR1cm4gJ1BSSUNFX0RFU0MnO1xuICAgIH1cbiAgICBkZWZhdWx0OiB7XG4gICAgICByZXR1cm4gJ0JFU1RfU0VMTElOR19BU0MnO1xuICAgIH1cbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGdldERpc3BsYXllZFBhZ2VOdW1iZXJzID0gKHBhZ2VDb3VudCwgcGFnZU51bWJlcikgPT4ge1xuICBjb25zdCBkaXNwbGF5ZWRQYWdlTnVtYmVycyA9IFtcbiAgICAxLFxuICAgIHBhZ2VDb3VudCxcbiAgICBwYWdlTnVtYmVyIC0gMixcbiAgICBwYWdlTnVtYmVyIC0gMSxcbiAgICBwYWdlTnVtYmVyLFxuICAgIHBhZ2VOdW1iZXIgKyAxLFxuICAgIHBhZ2VOdW1iZXIgKyAyLFxuICBdXG4gICAgLmZpbHRlcihcbiAgICAgIChpdGVtLCBwb3MsIGEpID0+XG4gICAgICAgIGEuaW5kZXhPZihpdGVtKSA9PT0gcG9zICYmIGl0ZW0gPj0gMSAmJiBpdGVtIDw9IHBhZ2VDb3VudFxuICAgIClcbiAgICAuc29ydCgoYSwgYikgPT4gYSAtIGIpXG4gICAgLnJlZHVjZSgoYWNjLCBjdXIsIGlkeCkgPT4ge1xuICAgICAgbGV0IGFjY0NvcHkgPSBbLi4uYWNjXTtcbiAgICAgIGlmIChpZHggPT09IDApIHtcbiAgICAgICAgYWNjQ29weSA9IFtjdXJdO1xuICAgICAgfSBlbHNlIGlmIChjdXIgLSBhY2NbYWNjLmxlbmd0aCAtIDFdID4gMSkge1xuICAgICAgICBhY2NDb3B5ID0gWy4uLmFjYywgJy4uLicsIGN1cl07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhY2NDb3B5ID0gWy4uLmFjYywgY3VyXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhY2NDb3B5O1xuICAgIH0sIFtdKTtcbiAgcmV0dXJuIGRpc3BsYXllZFBhZ2VOdW1iZXJzO1xufTtcbiIsICJpbXBvcnQgeyBodG1sLCB2aXJ0dWFsIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9oYXVudGVkJztcblxuY29uc3QgVGl0bGVCYW5uZXIgPSB2aXJ0dWFsKFxuICAoe1xuICAgIGNsYXNzTGlzdCA9IFtcbiAgICAgICdjb2xsZWN0aW9uLWJhbm5lcicsXG4gICAgICAnZC1mbGV4JyxcbiAgICAgICdqdXN0aWZ5LWNvbnRlbnQtYmV0d2VlbicsXG4gICAgICAnYWxpZ24taXRlbXMtY2VudGVyJyxcbiAgICBdLFxuICAgIHRpdGxlLFxuICB9KSA9PiBodG1sYDxkaXYgY2xhc3M9JHtjbGFzc0xpc3Quam9pbignICcpfT5cbiAgICA8aDIgY2xhc3M9XCJiYW5uZXItbmFtZSBkdG0tYmFubmVyLW5hbWVcIj4ke3RpdGxlfTwvaDI+XG4gICAgPGRpdiBjbGFzcz1cInBhcmFsbGVsb2dyYW1zLWdyb3VwIGR0bS1wYXJhbGxlbG9ncmFtcy1ncm91cFwiPlxuICAgICAgPHNwYW4gY2xhc3M9XCJwYXJhbGxlbG9ncmFtcyBwYXJhbGxlbG9ncmFtLWx0IGR0bS1wYXJhbGxlbG9ncmFtc1wiPiA8L3NwYW4+XG4gICAgICA8c3BhbiBjbGFzcz1cInBhcmFsbGVsb2dyYW1zIHBhcmFsbGVsb2dyYW0tcnQgZHRtLXBhcmFsbGVsb2dyYW1zXCI+IDwvc3Bhbj5cbiAgICAgIDxzcGFuIGNsYXNzPVwicGFyYWxsZWxvZ3JhbXMgcGFyYWxsZWxvZ3JhbS1iciBkdG0tcGFyYWxsZWxvZ3JhbXNcIj4gPC9zcGFuPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5gXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBUaXRsZUJhbm5lcjtcbiIsICIvKiBlc2xpbnQtZGlzYWJsZSBjYW1lbGNhc2UgKi9cbmltcG9ydCB7IGh0bWwsIHVzZVN0YXRlIH0gZnJvbSAnQGFwb2xsby1lbGVtZW50cy9oYXVudGVkJztcbmltcG9ydCBwaWNrQnkgZnJvbSAnbG9kYXNoLnBpY2tieSc7XG5pbXBvcnQgeyBzdHJpcEhUTUwgfSBmcm9tICcuLi8uLi9zaGFyZWQvaGVscGVycyc7XG5pbXBvcnQgVGl0bGVCYW5uZXIgZnJvbSAnLi9UaXRsZUJhbm5lcic7XG5cbmZ1bmN0aW9uIENvbXBhcmVUYWJsZSgpIHtcbiAgY29uc3QgdHJhbnNmb3JtRnVuYyA9ICh7XG4gICAgYXZhaWxhYmxlLFxuICAgIHRpdGxlLFxuICAgIGZlYXR1cmVkX2ltYWdlLFxuICAgIHZlbmRvcixcbiAgICBkZXNjcmlwdGlvbixcbiAgICB0YWdzLFxuICAgIHByaWNlLFxuICAgIGhhbmRsZSxcbiAgICBmaXJzdF9hdmFpbGFibGVfdmFyaWFudF9pZCxcbiAgfSkgPT4gKHtcbiAgICBhdmFpbGFiaWxpdHk6IGF2YWlsYWJsZSA/ICdJTlNUT0NLJyA6ICdPVVRPRlNUT0NLJyxcbiAgICBuYW1lOiB0aXRsZSxcbiAgICBpbWFnZTogZmVhdHVyZWRfaW1hZ2UsXG4gICAgYnJhbmQ6IHZlbmRvcixcbiAgICBkZXNjcmlwdGlvbjogc3RyaXBIVE1MKGRlc2NyaXB0aW9uKSxcbiAgICBoYW5kbGUsXG4gICAgdmFyaWFudElkOiBmaXJzdF9hdmFpbGFibGVfdmFyaWFudF9pZCxcbiAgICBwcmljZTogYCQkeyhwcmljZSAvIDEwMDApLnRvRml4ZWQoMil9YCxcbiAgICAnY29vay10eXBlJzpcbiAgICAgIHRhZ3NcbiAgICAgICAgPy5maWx0ZXIoKHRhZykgPT4gdGFnLmluY2x1ZGVzKCdkdG1fY29vay10eXBlXycpKVxuICAgICAgICA/Lm1hcCgodCkgPT4gdD8ucmVwbGFjZSgnZHRtX2Nvb2stdHlwZV8nLCAnJykpID8/IFtdLFxuICAgICd0b3RhbC1idHUnOlxuICAgICAgdGFnc1xuICAgICAgICA/LmZpbmQoKHRhZykgPT4gdGFnLmluY2x1ZGVzKCdkdG1fdG90YWwtYnR1JykpXG4gICAgICAgID8ucmVwbGFjZSgnZHRtX3RvdGFsLWJ0dV8nLCAnJykgPz8gJycsXG4gICAgJ2Nvb2tpbmctdGVtcGVyYXR1cmUtcmFuZ2UnOlxuICAgICAgdGFnc1xuICAgICAgICA/LmZpbmQoKHRhZykgPT4gdGFnLmluY2x1ZGVzKCdkdG1fY29va2luZy10ZW1wZXJhdHVyZS1yYW5nZScpKVxuICAgICAgICA/LnJlcGxhY2UoJ2R0bV9jb29raW5nLXRlbXBlcmF0dXJlLXJhbmdlXycsICcnKSA/PyAnJyxcbiAgICAndG90YWwtZ3JpbGwtc2l6ZSc6XG4gICAgICB0YWdzXG4gICAgICAgID8uZmluZCgodGFnKSA9PiB0YWcuaW5jbHVkZXMoJ2R0bV90b3RhbC1ncmlsbC1zaXplJykpXG4gICAgICAgID8ucmVwbGFjZSgnZHRtX3RvdGFsLWdyaWxsLXNpemVfJywgJycpID8/ICcnLFxuICAgICdwcmltYXJ5LWNvb2tpbmctc3BhY2UnOlxuICAgICAgdGFnc1xuICAgICAgICA/LmZpbmQoKHRhZykgPT4gdGFnLmluY2x1ZGVzKCdkdG1fcHJpbWFyeS1jb29raW5nLXNwYWNlJykpXG4gICAgICAgID8ucmVwbGFjZSgnZHRtX3ByaW1hcnktY29va2luZy1zcGFjZV8nLCAnJykgPz8gJycsXG4gICAgJ251bWJlci1vZi1yYWNrcyc6XG4gICAgICB0YWdzXG4gICAgICAgID8uZmluZCgodGFnKSA9PiB0YWcuaW5jbHVkZXMoJ2R0bV9udW1iZXItb2YtcmFja3MnKSlcbiAgICAgICAgPy5yZXBsYWNlKCdkdG1fbnVtYmVyLW9mLXJhY2tzXycsICcnKSA/PyAnJyxcbiAgICAncmVhci1yb3Rpc3NlcmllLWJ1cm5lcic6ICEhdGFncz8uaW5jbHVkZXMoJ2R0bV9yZWFyLXJvdGlzc2VyaWUtYnVybmVyJyksXG4gICAgJ3NpZGUtYnVybmVyJzogISF0YWdzPy5pbmNsdWRlcygnZHRtX3NpZGUtYnVybmVyJyksXG4gICAgJ3NlYXItZnVuY3Rpb25hbGl0eSc6ICEhdGFncz8uaW5jbHVkZXMoJ2R0bV9zZWFyLWZ1bmN0aW9uYWxpdHknKSxcbiAgfSk7XG4gIGNvbnN0IGN1cnJlbnRDb21wYXJlUHJvZHVjdHMgPSBKU09OLnBhcnNlKFxuICAgIGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdjb21wYXJlJykgPz8gJ3t9J1xuICApO1xuICBjb25zdCBbcHJvZHVjdHMsIHNldFByb2R1Y3RzXSA9IHVzZVN0YXRlKFxuICAgIHdpbmRvdz8ucHJvZHVjdHNUb0NvbXBhcmUubWFwKChwKSA9PiB0cmFuc2Zvcm1GdW5jKHApKSA/PyBbXVxuICApO1xuICBjb25zdCBjb21wYXJlSXRlbXMgPSBbXG4gICAgeyBsYWJlbDogJ1Byb2R1Y3QgTmFtZSAmIEltYWdlJywga2V5OiAnbmFtZV9pbWFnZScgfSxcbiAgICB7IGxhYmVsOiAnUHJvZHVjdCBEZXNjcmlwdGlvbicsIGtleTogJ2Rlc2NyaXB0aW9uJyB9LFxuICAgIHsgbGFiZWw6ICdCcmFuZCcsIGtleTogJ2JyYW5kJyB9LFxuICAgIHsgbGFiZWw6ICdBdmFpbGFiaWxpdHknLCBrZXk6ICdhdmFpbGFiaWxpdHknIH0sXG4gICAgeyBsYWJlbDogJ0Nvb2sgVHlwZScsIGtleTogJ2Nvb2stdHlwZScgfSxcbiAgICB7IGxhYmVsOiAnVG90YWwgQlRVJywga2V5OiAndG90YWwtYnR1JyB9LFxuICAgIHsgbGFiZWw6ICdDb29raW5nIFRlbXBlcmF0dXJlIFJhbmdlJywga2V5OiAnY29va2luZy10ZW1wZXJhdHVyZS1yYW5nZScgfSxcbiAgICB7IGxhYmVsOiAnVG90YWwgR3JpbGwgU2l6ZScsIGtleTogJ3RvdGFsLWdyaWxsLXNpemUnIH0sXG4gICAgeyBsYWJlbDogJ1ByaW1hcnkgQ29va2luZyBTcGFjZScsIGtleTogJ3ByaW1hcnktY29va2luZy1zcGFjZScgfSxcbiAgICB7IGxhYmVsOiAnTnVtYmVyIG9mIHJhY2tzICcsIGtleTogJ251bWJlci1vZi1yYWNrcycgfSxcbiAgICB7IGxhYmVsOiAnUmVhciBSb3Rpc3NlcmllIEJ1cm5lcicsIGtleTogJ3JlYXItcm90aXNzZXJpZS1idXJuZXInIH0sXG4gICAgeyBsYWJlbDogJ1NpZGUgQnVybmVyICcsIGtleTogJ3NpZGUtYnVybmVyJyB9LFxuICAgIHsgbGFiZWw6ICdTZWFyIEZ1bmN0aW9uYWxpdHknLCBrZXk6ICdzZWFyLWZ1bmN0aW9uYWxpdHknIH0sXG4gICAgeyBsYWJlbDogJ0FjdGlvbicsIGtleTogJ2FjdGlvbicgfSxcbiAgXTtcbiAgY29uc3QgaGFuZGxlUmVtb3ZlSWNvbkNsaWNrZWQgPSAocHJvZHVjdCkgPT4ge1xuICAgIGNvbnN0IG5ld0NvbXBhcmVQcm9kdWN0cyA9IHBpY2tCeShcbiAgICAgIGN1cnJlbnRDb21wYXJlUHJvZHVjdHMsXG4gICAgICAodmFsdWUpID0+IHZhbHVlICE9PSBwcm9kdWN0LmhhbmRsZVxuICAgICk7XG4gICAgY29uc29sZS5sb2coJ25ld0NvbXBhcmVQcm9kdWN0cycsIG5ld0NvbXBhcmVQcm9kdWN0cyk7XG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2NvbXBhcmUnLCBKU09OLnN0cmluZ2lmeShuZXdDb21wYXJlUHJvZHVjdHMpKTtcbiAgICBzZXRQcm9kdWN0cygocHJldmlvdXNQcm9kdWN0cykgPT5cbiAgICAgIHByZXZpb3VzUHJvZHVjdHMuZmlsdGVyKChwKSA9PiBwLmhhbmRsZSAhPT0gcHJvZHVjdC5oYW5kbGUpXG4gICAgKTtcbiAgfTtcbiAgY29uc3QgZ2V0Q2VsbENvbnRlbnQgPSAoaXRlbSwgcHJvZHVjdCkgPT4ge1xuICAgIHN3aXRjaCAoaXRlbS5rZXkpIHtcbiAgICAgIGNhc2UgJ25hbWVfaW1hZ2UnOiB7XG4gICAgICAgIHJldHVybiBodG1sYDxkaXZcbiAgICAgICAgICBjbGFzcz1cIm5hbWUtaW1hZ2UtcHJpY2Utd3JhcHBlciB3LTEwMFwiXG4gICAgICAgICAgc3R5bGU9XCJwb3NpdGlvbjogcmVsYXRpdmU7XCJcbiAgICAgICAgPlxuICAgICAgICAgIDxpbWdcbiAgICAgICAgICAgIGNsYXNzPVwidy0xMDBcIlxuICAgICAgICAgICAgc3JjPSR7cHJvZHVjdC5pbWFnZX1cbiAgICAgICAgICAgIHN0eWxlPVwibWF4LXdpZHRoOiAzMDBweDtkaXNwbGF5OiBibG9jazttYXJnaW46MCBhdXRvO1wiXG4gICAgICAgICAgLz5cbiAgICAgICAgICA8aDM+JHtwcm9kdWN0Lm5hbWV9PC9oMz5cbiAgICAgICAgICA8aDQ+JHtwcm9kdWN0LnByaWNlfTwvaDQ+XG4gICAgICAgICAgPGlcbiAgICAgICAgICAgIGNsYXNzPVwiZmEgZmEtY2xvc2VcIlxuICAgICAgICAgICAgc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHJpZ2h0OiAwOyB0b3A6IDA7IGN1cnNvcjogcG9pbnRlcjtcIlxuICAgICAgICAgICAgQGNsaWNrPSR7KCkgPT4gaGFuZGxlUmVtb3ZlSWNvbkNsaWNrZWQocHJvZHVjdCl9XG4gICAgICAgICAgPjwvaT5cbiAgICAgICAgPC9kaXY+YDtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2FjdGlvbic6IHtcbiAgICAgICAgcmV0dXJuIGh0bWxgJHtwcm9kdWN0LnZhcmlhbnRJZFxuICAgICAgICAgID8gaHRtbGA8YVxuICAgICAgICAgICAgICBocmVmPSR7YC9jYXJ0L2FkZD9pZD0ke3Byb2R1Y3QudmFyaWFudElkfSZxdWFudGl0eT0xYH1cbiAgICAgICAgICAgICAgY2xhc3M9XCJidG4gYnRuLXNvbGlkXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgQWRkIHRvIGNhcnQgPj5cbiAgICAgICAgICAgIDwvYT5gXG4gICAgICAgICAgOiBudWxsfWA7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHJldHVybiBwcm9kdWN0Py5baXRlbS5rZXldID8/ICcnO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgcmV0dXJuIGh0bWxgIDxkaXYgY2xhc3M9XCJtb2RhbC1oZWFkZXJcIj5cbiAgICAgICR7VGl0bGVCYW5uZXIoe1xuICAgICAgICB0aXRsZTogJ0NvbXBhcmUgUHJvZHVjdHMnLFxuICAgICAgICBjbGFzc0xpc3Q6IFtcbiAgICAgICAgICAnZC1mbGV4JyxcbiAgICAgICAgICAnanVzdGlmeS1jb250ZW50LWJldHdlZW4nLFxuICAgICAgICAgICdhbGlnbi1pdGVtcy1jZW50ZXInLFxuICAgICAgICAgICd3LTEwMCcsXG4gICAgICAgIF0sXG4gICAgICB9KX1cbiAgICA8L2Rpdj5cbiAgICAke3Byb2R1Y3RzICYmIChwcm9kdWN0cz8ubGVuZ3RoID8/IDApID4gMFxuICAgICAgPyBodG1sYDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlLXdyYXBwZXJcIj5cbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLXJlc3BvbnNpdmVcIj5cbiAgICAgICAgICAgICAgPHRib2R5IGlkPVwidGFibGUtY29tcGFyZVwiPlxuICAgICAgICAgICAgICAgICR7Y29tcGFyZUl0ZW1zLm1hcChcbiAgICAgICAgICAgICAgICAgIChpdGVtKSA9PiBodG1sYFxuICAgICAgICAgICAgICAgICAgICA8dHI+XG4gICAgICAgICAgICAgICAgICAgICAgPHRoIHdpZHRoPVwiMTAlXCIgY2xhc3M9JHtpdGVtLmtleX0+JHtpdGVtLmxhYmVsfTwvdGg+XG4gICAgICAgICAgICAgICAgICAgICAgJHtwcm9kdWN0cy5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAocHJvZHVjdCkgPT4gaHRtbGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgPHRkXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIkezkwIC8gcHJvZHVjdHMubGVuZ3RofSVcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzPSR7YCR7cHJvZHVjdC5oYW5kbGV9LSR7aXRlbS5rZXl9YH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7Z2V0Q2VsbENvbnRlbnQoaXRlbSwgcHJvZHVjdCl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+XG4gICAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC90cj5cbiAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICA8L3Rib2R5PlxuICAgICAgICAgICAgPC90YWJsZT5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+YFxuICAgICAgOiBodG1sYDxkaXYgY2xhc3M9XCJtb2RhbC1ib2R5XCI+XG4gICAgICAgICAgPGRpdiBjbGFzcz1cInRhYmxlLXdyYXBwZXJcIj5cbiAgICAgICAgICAgIDx0YWJsZSBjbGFzcz1cInRhYmxlIHRhYmxlLXJlc3BvbnNpdmVcIj5cbiAgICAgICAgICAgICAgPHRib2R5IGlkPVwidGFibGUtY29tcGFyZVwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJyb3cgY2FydC1idXR0b25zIGNvbXBhcmUtZ3JpZC0tZW1wdHktbGlzdFwiPlxuICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImNvbC0xMlwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXJcIj5cbiAgICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzcz1cIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICBzcmM9XCJodHRwczovL3BpY3N1bS5waG90b3MvMjAwLzMwMFwiXG4gICAgICAgICAgICAgICAgICAgICAgICBhbHQ9XCJDb21wYXJlIGxpc3QgbG9hZGluZ1wiXG4gICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICA8aDUgY2xhc3M9XCJ0aXRsZS1mb250IG1iLTMgZW1wdHktbGlzdC0tdGV4dCBcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIFlvdXIgY29tcGFyZSBsaXN0IGlzIGN1cnJlbnRseSBlbXB0eS5cbiAgICAgICAgICAgICAgICAgICAgICA8L2g1PlxuICAgICAgICAgICAgICAgICAgICAgIDxhIGhyZWY9XCIvY29sbGVjdGlvbnMvQmFyYmVxdWVzXCIgY2xhc3M9XCJidG4gYnRuLXNvbGlkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBTdGFydCBTaG9wcGluZ1xuICAgICAgICAgICAgICAgICAgICAgIDwvYT5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgPC90Ym9keT5cbiAgICAgICAgICAgIDwvdGFibGU+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PmB9XG4gICAgPGRpdiBjbGFzcz1cIm1vZGFsLWZvb3RlclwiPlxuICAgICAgPGFcbiAgICAgICAgaHJlZj1cImphdmFzY3JpcHQ6dm9pZCgwKVwiXG4gICAgICAgIGNsYXNzPVwiY2xvc2UtbW9kYWxcIlxuICAgICAgICBAY2xpY2s9JHsoKSA9PiB7XG4gICAgICAgICAgd2luZG93Py4kKCcuY29tcGFyZV9tb2RhbCcpPy5oaWRlKCk7XG4gICAgICAgIH19XG4gICAgICA+XG4gICAgICAgIDxpIGNsYXNzPVwiZmEgZmEtY2xvc2VcIj48L2k+XG4gICAgICA8L2E+XG4gICAgPC9kaXY+YDtcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICB0YWdOYW1lOiAnY29tcGFyZS10YWJsZScsXG4gIHJlbmRlcmVyOiBDb21wYXJlVGFibGUsXG4gIG9wdGlvbnM6IHtcbiAgICBvYnNlcnZlZEF0dHJpYnV0ZXM6IFsnZW1wdHktaW1hZ2UnXSxcbiAgICB1c2VTaGFkb3dET006IGZhbHNlLFxuICB9LFxufTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqL1xuLyoqXG4gKiBXaGVuIHVzaW5nIENsb3N1cmUgQ29tcGlsZXIsIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkocHJvcGVydHksIG9iamVjdCkgaXMgcmVwbGFjZWQgYnkgdGhlIG11bmdlZCBuYW1lIGZvciBvYmplY3RbcHJvcGVydHldXG4gKiBXZSBjYW5ub3QgYWxpYXMgdGhpcyBmdW5jdGlvbiwgc28gd2UgaGF2ZSB0byB1c2UgYSBzbWFsbCBzaGltIHRoYXQgaGFzIHRoZSBzYW1lIGJlaGF2aW9yIHdoZW4gbm90IGNvbXBpbGluZy5cbiAqXG4gKiBAcGFyYW0gez99IHByb3AgUHJvcGVydHkgbmFtZVxuICogQHBhcmFtIHsqfSBvYmogUmVmZXJlbmNlIG9iamVjdFxuICogQHJldHVybiB7c3RyaW5nfSBQb3RlbnRpYWxseSByZW5hbWVkIHByb3BlcnR5IG5hbWVcbiAqL1xud2luZG93LkpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkgPSBmdW5jdGlvbihwcm9wLCBvYmopIHtcbiAgcmV0dXJuIHByb3A7XG59O1xuLyogZXNsaW50LWVuYWJsZSAqL1xuXG5leHBvcnQge307XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi9ib290LmpzJztcblxubGV0IENTU19VUkxfUlggPSAvKHVybFxcKCkoW14pXSopKFxcKSkvZztcbmxldCBBQlNfVVJMID0gLyheXFwvW15cXC9dKXwoXiMpfCheW1xcdy1cXGRdKjopLztcbmxldCB3b3JraW5nVVJMO1xubGV0IHJlc29sdmVEb2M7XG4vKipcbiAqIFJlc29sdmVzIHRoZSBnaXZlbiBVUkwgYWdhaW5zdCB0aGUgcHJvdmlkZWQgYGJhc2VVcmknLlxuICpcbiAqIE5vdGUgdGhhdCB0aGlzIGZ1bmN0aW9uIHBlcmZvcm1zIG5vIHJlc29sdXRpb24gZm9yIFVSTHMgdGhhdCBzdGFydFxuICogd2l0aCBgL2AgKGFic29sdXRlIFVSTHMpIG9yIGAjYCAoaGFzaCBpZGVudGlmaWVycykuICBGb3IgZ2VuZXJhbCBwdXJwb3NlXG4gKiBVUkwgcmVzb2x1dGlvbiwgdXNlIGB3aW5kb3cuVVJMYC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsIElucHV0IFVSTCB0byByZXNvbHZlXG4gKiBAcGFyYW0gez9zdHJpbmc9fSBiYXNlVVJJIEJhc2UgVVJJIHRvIHJlc29sdmUgdGhlIFVSTCBhZ2FpbnN0XG4gKiBAcmV0dXJuIHtzdHJpbmd9IHJlc29sdmVkIFVSTFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVVybCh1cmwsIGJhc2VVUkkpIHtcbiAgaWYgKHVybCAmJiBBQlNfVVJMLnRlc3QodXJsKSkge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgaWYgKHVybCA9PT0gJy8vJykge1xuICAgIHJldHVybiB1cmw7XG4gIH1cbiAgLy8gTGF6eSBmZWF0dXJlIGRldGVjdGlvbi5cbiAgaWYgKHdvcmtpbmdVUkwgPT09IHVuZGVmaW5lZCkge1xuICAgIHdvcmtpbmdVUkwgPSBmYWxzZTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdSA9IG5ldyBVUkwoJ2InLCAnaHR0cDovL2EnKTtcbiAgICAgIHUucGF0aG5hbWUgPSAnYyUyMGQnO1xuICAgICAgd29ya2luZ1VSTCA9ICh1LmhyZWYgPT09ICdodHRwOi8vYS9jJTIwZCcpO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIHNpbGVudGx5IGZhaWxcbiAgICB9XG4gIH1cbiAgaWYgKCFiYXNlVVJJKSB7XG4gICAgYmFzZVVSSSA9IGRvY3VtZW50LmJhc2VVUkkgfHwgd2luZG93LmxvY2F0aW9uLmhyZWY7XG4gIH1cbiAgaWYgKHdvcmtpbmdVUkwpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIChuZXcgVVJMKHVybCwgYmFzZVVSSSkpLmhyZWY7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgLy8gQmFkIHVybCBvciBiYXNlVVJJIHN0cnVjdHVyZS4gRG8gbm90IGF0dGVtcHQgdG8gcmVzb2x2ZS5cbiAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuICB9XG4gIC8vIEZhbGxiYWNrIHRvIGNyZWF0aW5nIGFuIGFuY2hvciBpbnRvIGEgZGlzY29ubmVjdGVkIGRvY3VtZW50LlxuICBpZiAoIXJlc29sdmVEb2MpIHtcbiAgICByZXNvbHZlRG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCd0ZW1wJyk7XG4gICAgcmVzb2x2ZURvYy5iYXNlID0gcmVzb2x2ZURvYy5jcmVhdGVFbGVtZW50KCdiYXNlJyk7XG4gICAgcmVzb2x2ZURvYy5oZWFkLmFwcGVuZENoaWxkKHJlc29sdmVEb2MuYmFzZSk7XG4gICAgcmVzb2x2ZURvYy5hbmNob3IgPSByZXNvbHZlRG9jLmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICByZXNvbHZlRG9jLmJvZHkuYXBwZW5kQ2hpbGQocmVzb2x2ZURvYy5hbmNob3IpO1xuICB9XG4gIHJlc29sdmVEb2MuYmFzZS5ocmVmID0gYmFzZVVSSTtcbiAgcmVzb2x2ZURvYy5hbmNob3IuaHJlZiA9IHVybDtcbiAgcmV0dXJuIHJlc29sdmVEb2MuYW5jaG9yLmhyZWYgfHwgdXJsO1xuXG59XG5cbi8qKlxuICogUmVzb2x2ZXMgYW55IHJlbGF0aXZlIFVSTCdzIGluIHRoZSBnaXZlbiBDU1MgdGV4dCBhZ2FpbnN0IHRoZSBwcm92aWRlZFxuICogYG93bmVyRG9jdW1lbnRgJ3MgYGJhc2VVUklgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0IENTUyB0ZXh0IHRvIHByb2Nlc3NcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJJIEJhc2UgVVJJIHRvIHJlc29sdmUgdGhlIFVSTCBhZ2FpbnN0XG4gKiBAcmV0dXJuIHtzdHJpbmd9IFByb2Nlc3NlZCBDU1MgdGV4dCB3aXRoIHJlc29sdmVkIFVSTCdzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNvbHZlQ3NzKGNzc1RleHQsIGJhc2VVUkkpIHtcbiAgcmV0dXJuIGNzc1RleHQucmVwbGFjZShDU1NfVVJMX1JYLCBmdW5jdGlvbihtLCBwcmUsIHVybCwgcG9zdCkge1xuICAgIHJldHVybiBwcmUgKyAnXFwnJyArXG4gICAgICByZXNvbHZlVXJsKHVybC5yZXBsYWNlKC9bXCInXS9nLCAnJyksIGJhc2VVUkkpICtcbiAgICAgICdcXCcnICsgcG9zdDtcbiAgfSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHBhdGggZnJvbSBhIGdpdmVuIGB1cmxgLiBUaGUgcGF0aCBpbmNsdWRlcyB0aGUgdHJhaWxpbmdcbiAqIGAvYCBmcm9tIHRoZSB1cmwuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IHVybCBJbnB1dCBVUkwgdG8gdHJhbnNmb3JtXG4gKiBAcmV0dXJuIHtzdHJpbmd9IHJlc29sdmVkIHBhdGhcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhdGhGcm9tVXJsKHVybCkge1xuICByZXR1cm4gdXJsLnN1YnN0cmluZygwLCB1cmwubGFzdEluZGV4T2YoJy8nKSArIDEpO1xufVxuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5pbXBvcnQgeyBwYXRoRnJvbVVybCB9IGZyb20gJy4vcmVzb2x2ZS11cmwuanMnO1xuZXhwb3J0IGNvbnN0IHVzZVNoYWRvdyA9ICEod2luZG93LlNoYWR5RE9NKSB8fCAhKHdpbmRvdy5TaGFkeURPTS5pblVzZSk7XG5leHBvcnQgY29uc3QgdXNlTmF0aXZlQ1NTUHJvcGVydGllcyA9IEJvb2xlYW4oIXdpbmRvdy5TaGFkeUNTUyB8fCB3aW5kb3cuU2hhZHlDU1MubmF0aXZlQ3NzKTtcbmV4cG9ydCBjb25zdCB1c2VOYXRpdmVDdXN0b21FbGVtZW50cyA9ICEod2luZG93LmN1c3RvbUVsZW1lbnRzLnBvbHlmaWxsV3JhcEZsdXNoQ2FsbGJhY2spO1xuZXhwb3J0IGNvbnN0IHN1cHBvcnRzQWRvcHRpbmdTdHlsZVNoZWV0cyA9IHVzZVNoYWRvdyAmJlxuICAgICgnYWRvcHRlZFN0eWxlU2hlZXRzJyBpbiBEb2N1bWVudC5wcm90b3R5cGUpICYmXG4gICAgKCdyZXBsYWNlU3luYycgaW4gQ1NTU3R5bGVTaGVldC5wcm90b3R5cGUpICYmXG4gICAgLy8gU2luY2Ugc3BlYyBtYXkgY2hhbmdlLCBmZWF0dXJlIGRldGVjdCBleGFjdCBBUEkgd2UgbmVlZFxuICAgICgoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBzaGVldCA9IG5ldyBDU1NTdHlsZVNoZWV0KCk7XG4gICAgICAgIHNoZWV0LnJlcGxhY2VTeW5jKCcnKTtcbiAgICAgICAgY29uc3QgaG9zdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBob3N0LmF0dGFjaFNoYWRvdyh7bW9kZTogJ29wZW4nfSk7XG4gICAgICAgIGhvc3Quc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHMgPSBbc2hlZXRdO1xuICAgICAgICByZXR1cm4gKGhvc3Quc2hhZG93Um9vdC5hZG9wdGVkU3R5bGVTaGVldHNbMF0gPT09IHNoZWV0KTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfSkoKTtcblxuLyoqXG4gKiBHbG9iYWxseSBzZXR0YWJsZSBwcm9wZXJ0eSB0aGF0IGlzIGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdG9cbiAqIGBFbGVtZW50TWl4aW5gIGluc3RhbmNlcywgdXNlZnVsIGZvciBiaW5kaW5nIGluIHRlbXBsYXRlcyB0b1xuICogbWFrZSBVUkwncyByZWxhdGl2ZSB0byBhbiBhcHBsaWNhdGlvbidzIHJvb3QuICBEZWZhdWx0cyB0byB0aGUgbWFpblxuICogZG9jdW1lbnQgVVJMLCBidXQgY2FuIGJlIG92ZXJyaWRkZW4gYnkgdXNlcnMuICBJdCBtYXkgYmUgdXNlZnVsIHRvIHNldFxuICogYHJvb3RQYXRoYCB0byBwcm92aWRlIGEgc3RhYmxlIGFwcGxpY2F0aW9uIG1vdW50IHBhdGggd2hlblxuICogdXNpbmcgY2xpZW50IHNpZGUgcm91dGluZy5cbiAqL1xuZXhwb3J0IGxldCByb290UGF0aCA9IHdpbmRvdy5Qb2x5bWVyICYmIHdpbmRvdy5Qb2x5bWVyLnJvb3RQYXRoIHx8XG4gIHBhdGhGcm9tVXJsKGRvY3VtZW50LmJhc2VVUkkgfHwgd2luZG93LmxvY2F0aW9uLmhyZWYpO1xuXG4vKipcbiAqIFNldHMgdGhlIGdsb2JhbCByb290UGF0aCBwcm9wZXJ0eSB1c2VkIGJ5IGBFbGVtZW50TWl4aW5gIGFuZFxuICogYXZhaWxhYmxlIHZpYSBgcm9vdFBhdGhgLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBuZXcgcm9vdCBwYXRoXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3Qgc2V0Um9vdFBhdGggPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJvb3RQYXRoID0gcGF0aDtcbn07XG5cbi8qKlxuICogQSBnbG9iYWwgY2FsbGJhY2sgdXNlZCB0byBzYW5pdGl6ZSBhbnkgdmFsdWUgYmVmb3JlIGluc2VydGluZyBpdCBpbnRvIHRoZSBET00uXG4gKiBUaGUgY2FsbGJhY2sgc2lnbmF0dXJlIGlzOlxuICpcbiAqICBmdW5jdGlvbiBzYW5pdGl6ZURPTVZhbHVlKHZhbHVlLCBuYW1lLCB0eXBlLCBub2RlKSB7IC4uLiB9XG4gKlxuICogV2hlcmU6XG4gKlxuICogYHZhbHVlYCBpcyB0aGUgdmFsdWUgdG8gc2FuaXRpemUuXG4gKiBgbmFtZWAgaXMgdGhlIG5hbWUgb2YgYW4gYXR0cmlidXRlIG9yIHByb3BlcnR5IChmb3IgZXhhbXBsZSwgaHJlZikuXG4gKiBgdHlwZWAgaW5kaWNhdGVzIHdoZXJlIHRoZSB2YWx1ZSBpcyBiZWluZyBpbnNlcnRlZDogb25lIG9mIHByb3BlcnR5LCBhdHRyaWJ1dGUsIG9yIHRleHQuXG4gKiBgbm9kZWAgaXMgdGhlIG5vZGUgd2hlcmUgdGhlIHZhbHVlIGlzIGJlaW5nIGluc2VydGVkLlxuICpcbiAqIEB0eXBlIHsoZnVuY3Rpb24oKixzdHJpbmcsc3RyaW5nLD9Ob2RlKToqKXx1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBsZXQgc2FuaXRpemVET01WYWx1ZSA9XG4gIHdpbmRvdy5Qb2x5bWVyICYmIHdpbmRvdy5Qb2x5bWVyLnNhbml0aXplRE9NVmFsdWUgfHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIFNldHMgdGhlIGdsb2JhbCBzYW5pdGl6ZURPTVZhbHVlIGF2YWlsYWJsZSB2aWEgdGhpcyBtb2R1bGUncyBleHBvcnRlZFxuICogYHNhbml0aXplRE9NVmFsdWVgIHZhcmlhYmxlLlxuICpcbiAqIEBwYXJhbSB7KGZ1bmN0aW9uKCosc3RyaW5nLHN0cmluZyw/Tm9kZSk6Kil8dW5kZWZpbmVkfSBuZXdTYW5pdGl6ZURPTVZhbHVlIHRoZSBnbG9iYWwgc2FuaXRpemVET01WYWx1ZSBjYWxsYmFja1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldFNhbml0aXplRE9NVmFsdWUgPSBmdW5jdGlvbihuZXdTYW5pdGl6ZURPTVZhbHVlKSB7XG4gIHNhbml0aXplRE9NVmFsdWUgPSBuZXdTYW5pdGl6ZURPTVZhbHVlO1xufTtcblxuLyoqXG4gKiBHZXRzIHNhbml0aXplRE9NVmFsdWUsIGZvciBlbnZpcm9ubWVudHMgdGhhdCBkb24ndCB3ZWxsIHN1cHBvcnQgYGV4cG9ydCBsZXRgLlxuICpcbiAqIEByZXR1cm4geyhmdW5jdGlvbigqLHN0cmluZyxzdHJpbmcsP05vZGUpOiopfHVuZGVmaW5lZH0gc2FuaXRpemVET01WYWx1ZVxuICovXG5leHBvcnQgY29uc3QgZ2V0U2FuaXRpemVET01WYWx1ZSA9IGZ1bmN0aW9uKCkge1xuICByZXR1cm4gc2FuaXRpemVET01WYWx1ZTtcbn07XG5cbi8qKlxuICogR2xvYmFsbHkgc2V0dGFibGUgcHJvcGVydHkgdG8gbWFrZSBQb2x5bWVyIEdlc3R1cmVzIHVzZSBwYXNzaXZlIFRvdWNoRXZlbnQgbGlzdGVuZXJzIHdoZW4gcmVjb2duaXppbmcgZ2VzdHVyZXMuXG4gKiBXaGVuIHNldCB0byBgdHJ1ZWAsIGdlc3R1cmVzIG1hZGUgZnJvbSB0b3VjaCB3aWxsIG5vdCBiZSBhYmxlIHRvIHByZXZlbnQgc2Nyb2xsaW5nLCBhbGxvd2luZyBmb3Igc21vb3RoZXJcbiAqIHNjcm9sbGluZyBwZXJmb3JtYW5jZS5cbiAqIERlZmF1bHRzIHRvIGBmYWxzZWAgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LlxuICovXG5leHBvcnQgbGV0IHBhc3NpdmVUb3VjaEdlc3R1cmVzID1cbiAgd2luZG93LlBvbHltZXIgJiYgd2luZG93LlBvbHltZXIuc2V0UGFzc2l2ZVRvdWNoR2VzdHVyZXMgfHwgZmFsc2U7XG5cbi8qKlxuICogU2V0cyBgcGFzc2l2ZVRvdWNoR2VzdHVyZXNgIGdsb2JhbGx5IGZvciBhbGwgZWxlbWVudHMgdXNpbmcgUG9seW1lciBHZXN0dXJlcy5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZVBhc3NpdmUgZW5hYmxlIG9yIGRpc2FibGUgcGFzc2l2ZSB0b3VjaCBnZXN0dXJlcyBnbG9iYWxseVxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldFBhc3NpdmVUb3VjaEdlc3R1cmVzID0gZnVuY3Rpb24odXNlUGFzc2l2ZSkge1xuICBwYXNzaXZlVG91Y2hHZXN0dXJlcyA9IHVzZVBhc3NpdmU7XG59O1xuXG4vKipcbiAqIFNldHRpbmcgdG8gZW5zdXJlIFBvbHltZXIgdGVtcGxhdGUgZXZhbHVhdGlvbiBvbmx5IG9jY3VycyBiYXNlZCBvbiB0ZW1wYXRlc1xuICogZGVmaW5lZCBpbiB0cnVzdGVkIHNjcmlwdC4gIFdoZW4gdHJ1ZSwgYDxkb20tbW9kdWxlPmAgcmUtcmVnaXN0cmF0aW9uIGlzXG4gKiBkaXNhbGxvd2VkLCBgPGRvbS1iaW5kPmAgaXMgZGlzYWJsZWQsIGFuZCBgPGRvbS1pZj5gL2A8ZG9tLXJlcGVhdD5gXG4gKiB0ZW1wbGF0ZXMgd2lsbCBvbmx5IGV2YWx1YXRlIGluIHRoZSBjb250ZXh0IG9mIGEgdHJ1c3RlZCBlbGVtZW50IHRlbXBsYXRlLlxuICovXG5leHBvcnQgbGV0IHN0cmljdFRlbXBsYXRlUG9saWN5ID1cbiAgd2luZG93LlBvbHltZXIgJiYgd2luZG93LlBvbHltZXIuc3RyaWN0VGVtcGxhdGVQb2xpY3kgfHwgZmFsc2U7XG5cbi8qKlxuICogU2V0cyBgc3RyaWN0VGVtcGxhdGVQb2xpY3lgIGdsb2JhbGx5IGZvciBhbGwgZWxlbWVudHNcbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZVN0cmljdFBvbGljeSBlbmFibGUgb3IgZGlzYWJsZSBzdHJpY3QgdGVtcGxhdGUgcG9saWN5XG4gKiAgIGdsb2JhbGx5XG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3Qgc2V0U3RyaWN0VGVtcGxhdGVQb2xpY3kgPSBmdW5jdGlvbih1c2VTdHJpY3RQb2xpY3kpIHtcbiAgc3RyaWN0VGVtcGxhdGVQb2xpY3kgPSB1c2VTdHJpY3RQb2xpY3k7XG59O1xuXG4vKipcbiAqIFNldHRpbmcgdG8gZW5hYmxlIGRvbS1tb2R1bGUgbG9va3VwIGZyb20gUG9seW1lci5FbGVtZW50LiAgQnkgZGVmYXVsdCxcbiAqIHRlbXBsYXRlcyBtdXN0IGJlIGRlZmluZWQgaW4gc2NyaXB0IHVzaW5nIHRoZSBgc3RhdGljIGdldCB0ZW1wbGF0ZSgpYFxuICogZ2V0dGVyIGFuZCB0aGUgYGh0bWxgIHRhZyBmdW5jdGlvbi4gIFRvIGVuYWJsZSBsZWdhY3kgbG9hZGluZyBvZiB0ZW1wbGF0ZXNcbiAqIHZpYSBkb20tbW9kdWxlLCBzZXQgdGhpcyBmbGFnIHRvIHRydWUuXG4gKi9cbmV4cG9ydCBsZXQgYWxsb3dUZW1wbGF0ZUZyb21Eb21Nb2R1bGUgPVxuICB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci5hbGxvd1RlbXBsYXRlRnJvbURvbU1vZHVsZSB8fCBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIGBsb29rdXBUZW1wbGF0ZUZyb21Eb21Nb2R1bGVgIGdsb2JhbGx5IGZvciBhbGwgZWxlbWVudHNcbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGFsbG93RG9tTW9kdWxlIGVuYWJsZSBvciBkaXNhYmxlIHRlbXBsYXRlIGxvb2t1cFxuICogICBnbG9iYWxseVxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldEFsbG93VGVtcGxhdGVGcm9tRG9tTW9kdWxlID0gZnVuY3Rpb24oYWxsb3dEb21Nb2R1bGUpIHtcbiAgYWxsb3dUZW1wbGF0ZUZyb21Eb21Nb2R1bGUgPSBhbGxvd0RvbU1vZHVsZTtcbn07XG5cbi8qKlxuICogU2V0dGluZyB0byBza2lwIHByb2Nlc3Npbmcgc3R5bGUgaW5jbHVkZXMgYW5kIHJlLXdyaXRpbmcgdXJscyBpbiBjc3Mgc3R5bGVzLlxuICogTm9ybWFsbHkgXCJpbmNsdWRlZFwiIHN0eWxlcyBhcmUgcHVsbGVkIGludG8gdGhlIGVsZW1lbnQgYW5kIGFsbCB1cmxzIGluIHN0eWxlc1xuICogYXJlIHJlLXdyaXR0ZW4gdG8gYmUgcmVsYXRpdmUgdG8gdGhlIGNvbnRhaW5pbmcgc2NyaXB0IHVybC5cbiAqIElmIG5vIGluY2x1ZGVzIG9yIHJlbGF0aXZlIHVybHMgYXJlIHVzZWQgaW4gc3R5bGVzLCB0aGVzZSBzdGVwcyBjYW4gYmVcbiAqIHNraXBwZWQgYXMgYW4gb3B0aW1pemF0aW9uLlxuICovXG5leHBvcnQgbGV0IGxlZ2FjeU9wdGltaXphdGlvbnMgPVxuICB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci5sZWdhY3lPcHRpbWl6YXRpb25zIHx8IGZhbHNlO1xuXG4vKipcbiAqIFNldHMgYGxlZ2FjeU9wdGltaXphdGlvbnNgIGdsb2JhbGx5IGZvciBhbGwgZWxlbWVudHMgdG8gZW5hYmxlIG9wdGltaXphdGlvbnNcbiAqIHdoZW4gb25seSBsZWdhY3kgYmFzZWQgZWxlbWVudHMgYXJlIHVzZWQuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB1c2VMZWdhY3lPcHRpbWl6YXRpb25zIGVuYWJsZSBvciBkaXNhYmxlIGxlZ2FjeSBvcHRpbWl6YXRpb25zXG4gKiBpbmNsdWRlcyBhbmQgdXJsIHJld3JpdGluZ1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldExlZ2FjeU9wdGltaXphdGlvbnMgPSBmdW5jdGlvbih1c2VMZWdhY3lPcHRpbWl6YXRpb25zKSB7XG4gIGxlZ2FjeU9wdGltaXphdGlvbnMgPSB1c2VMZWdhY3lPcHRpbWl6YXRpb25zO1xufTtcblxuLyoqXG4gKiBTZXR0aW5nIHRvIGFkZCB3YXJuaW5ncyB1c2VmdWwgd2hlbiBtaWdyYXRpbmcgZnJvbSBQb2x5bWVyIDEueCB0byAyLnguXG4gKi9cbmV4cG9ydCBsZXQgbGVnYWN5V2FybmluZ3MgPVxuICB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci5sZWdhY3lXYXJuaW5ncyB8fCBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIGBsZWdhY3lXYXJuaW5nc2AgZ2xvYmFsbHkgZm9yIGFsbCBlbGVtZW50cyB0byBtaWdyYXRpb24gd2FybmluZ3MuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB1c2VMZWdhY3lXYXJuaW5ncyBlbmFibGUgb3IgZGlzYWJsZSB3YXJuaW5nc1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldExlZ2FjeVdhcm5pbmdzID0gZnVuY3Rpb24odXNlTGVnYWN5V2FybmluZ3MpIHtcbiAgbGVnYWN5V2FybmluZ3MgPSB1c2VMZWdhY3lXYXJuaW5ncztcbn07XG5cbi8qKlxuICogU2V0dGluZyB0byBwZXJmb3JtIGluaXRpYWwgcmVuZGVyaW5nIHN5bmNocm9ub3VzbHkgd2hlbiBydW5uaW5nIHVuZGVyIFNoYWR5RE9NLlxuICogVGhpcyBtYXRjaGVzIHRoZSBiZWhhdmlvciBvZiBQb2x5bWVyIDEuXG4gKi9cbmV4cG9ydCBsZXQgc3luY0luaXRpYWxSZW5kZXIgPVxuICB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci5zeW5jSW5pdGlhbFJlbmRlciB8fCBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIGBzeW5jSW5pdGlhbFJlbmRlcmAgZ2xvYmFsbHkgZm9yIGFsbCBlbGVtZW50cyB0byBlbmFibGUgc3luY2hyb25vdXNcbiAqIGluaXRpYWwgcmVuZGVyaW5nLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdXNlU3luY0luaXRpYWxSZW5kZXIgZW5hYmxlIG9yIGRpc2FibGUgc3luY2hyb25vdXMgaW5pdGlhbFxuICogcmVuZGVyaW5nIGdsb2JhbGx5LlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldFN5bmNJbml0aWFsUmVuZGVyID0gZnVuY3Rpb24odXNlU3luY0luaXRpYWxSZW5kZXIpIHtcbiAgc3luY0luaXRpYWxSZW5kZXIgPSB1c2VTeW5jSW5pdGlhbFJlbmRlcjtcbn07XG5cbi8qKlxuICogU2V0dGluZyB0byByZXRhaW4gdGhlIGxlZ2FjeSBQb2x5bWVyIDEgYmVoYXZpb3IgZm9yIG11bHRpLXByb3BlcnR5XG4gKiBvYnNlcnZlcnMgYXJvdW5kIHVuZGVmaW5lZCB2YWx1ZXMuIE9ic2VydmVycyBhbmQgY29tcHV0ZWQgcHJvcGVydHkgbWV0aG9kc1xuICogYXJlIG5vdCBjYWxsZWQgdW50aWwgbm8gYXJndW1lbnQgaXMgdW5kZWZpbmVkLlxuICovXG5leHBvcnQgbGV0IGxlZ2FjeVVuZGVmaW5lZCA9XG4gIHdpbmRvdy5Qb2x5bWVyICYmIHdpbmRvdy5Qb2x5bWVyLmxlZ2FjeVVuZGVmaW5lZCB8fCBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIGBsZWdhY3lVbmRlZmluZWRgIGdsb2JhbGx5IGZvciBhbGwgZWxlbWVudHMgdG8gZW5hYmxlIGxlZ2FjeVxuICogbXVsdGktcHJvcGVydHkgYmVoYXZpb3IgZm9yIHVuZGVmaW5lZCB2YWx1ZXMuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB1c2VMZWdhY3lVbmRlZmluZWQgZW5hYmxlIG9yIGRpc2FibGUgbGVnYWN5XG4gKiBtdWx0aS1wcm9wZXJ0eSBiZWhhdmlvciBmb3IgdW5kZWZpbmVkLlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldExlZ2FjeVVuZGVmaW5lZCA9IGZ1bmN0aW9uKHVzZUxlZ2FjeVVuZGVmaW5lZCkge1xuICBsZWdhY3lVbmRlZmluZWQgPSB1c2VMZWdhY3lVbmRlZmluZWQ7XG59O1xuXG4vKipcbiAqIFNldHRpbmcgdG8gZW5zdXJlIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIGNvbXB1dGVkIGluIG9yZGVyIHRvIGVuc3VyZVxuICogcmUtY29tcHV0YXRpb24gbmV2ZXIgb2NjdXJzIGluIGEgZ2l2ZW4gdHVybi5cbiAqL1xuZXhwb3J0IGxldCBvcmRlcmVkQ29tcHV0ZWQgPVxuICB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci5vcmRlcmVkQ29tcHV0ZWQgfHwgZmFsc2U7XG5cbi8qKlxuICogU2V0cyBgb3JkZXJlZENvbXB1dGVkYCBnbG9iYWxseSBmb3IgYWxsIGVsZW1lbnRzIHRvIGVuYWJsZSBvcmRlcmVkIGNvbXB1dGVkXG4gKiBwcm9wZXJ0eSBjb21wdXRhdGlvbi5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZU9yZGVyZWRDb21wdXRlZCBlbmFibGUgb3IgZGlzYWJsZSBvcmRlcmVkIGNvbXB1dGVkIGVmZmVjdHNcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBjb25zdCBzZXRPcmRlcmVkQ29tcHV0ZWQgPSBmdW5jdGlvbih1c2VPcmRlcmVkQ29tcHV0ZWQpIHtcbiAgb3JkZXJlZENvbXB1dGVkID0gdXNlT3JkZXJlZENvbXB1dGVkO1xufTtcblxuLyoqXG4gKiBTZXR0aW5nIHRvIGNhbmNlbCBzeW50aGV0aWMgY2xpY2sgZXZlbnRzIGZpcmVkIGJ5IG9sZGVyIG1vYmlsZSBicm93c2Vycy4gTW9kZXJuIGJyb3dzZXJzXG4gKiBubyBsb25nZXIgZmlyZSBzeW50aGV0aWMgY2xpY2sgZXZlbnRzLCBhbmQgdGhlIGNhbmNlbGxhdGlvbiBiZWhhdmlvciBjYW4gaW50ZXJmZXJlXG4gKiB3aGVuIHByb2dyYW1tYXRpY2FsbHkgY2xpY2tpbmcgb24gZWxlbWVudHMuXG4gKi9cbmV4cG9ydCBsZXQgY2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHMgPSB0cnVlO1xuXG4vKipcbiAqIFNldHMgYHNldENhbmNlbFN5bnRoZXRpY0V2ZW50c2AgZ2xvYmFsbHkgZm9yIGFsbCBlbGVtZW50cyB0byBjYW5jZWwgc3ludGhldGljIGNsaWNrIGV2ZW50cy5cbiAqXG4gKiBAcGFyYW0ge2Jvb2xlYW59IHVzZUNhbmNlbFN5bnRoZXRpY0NsaWNrRXZlbnRzIGVuYWJsZSBvciBkaXNhYmxlIGNhbmNlbGxpbmcgc3ludGhldGljXG4gKiBldmVudHNcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBjb25zdCBzZXRDYW5jZWxTeW50aGV0aWNDbGlja0V2ZW50cyA9IGZ1bmN0aW9uKHVzZUNhbmNlbFN5bnRoZXRpY0NsaWNrRXZlbnRzKSB7XG4gIGNhbmNlbFN5bnRoZXRpY0NsaWNrRXZlbnRzID0gdXNlQ2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHM7XG59O1xuXG4vKipcbiAqIFNldHRpbmcgdG8gcmVtb3ZlIG5lc3RlZCB0ZW1wbGF0ZXMgaW5zaWRlIGBkb20taWZgIGFuZCBgZG9tLXJlcGVhdGAgYXNcbiAqIHBhcnQgb2YgZWxlbWVudCB0ZW1wbGF0ZSBwYXJzaW5nLiAgVGhpcyBpcyBhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB0aGF0XG4gKiBlbGltaW5hdGVzIG1vc3Qgb2YgdGhlIHRheCBvZiBuZWVkaW5nIHR3byBlbGVtZW50cyBkdWUgdG8gdGhlIGxvc3Mgb2ZcbiAqIHR5cGUtZXh0ZW5kZWQgdGVtcGxhdGVzIGFzIGEgcmVzdWx0IG9mIHRoZSBWMSBzcGVjaWZpY2F0aW9uIGNoYW5nZXMuXG4gKi9cbmV4cG9ydCBsZXQgcmVtb3ZlTmVzdGVkVGVtcGxhdGVzID1cbiAgd2luZG93LlBvbHltZXIgJiYgd2luZG93LlBvbHltZXIucmVtb3ZlTmVzdGVkVGVtcGxhdGVzIHx8IGZhbHNlO1xuXG4vKipcbiAqIFNldHMgYHJlbW92ZU5lc3RlZFRlbXBsYXRlc2AgZ2xvYmFsbHksIHRvIGVsaW1pbmF0ZSBuZXN0ZWQgdGVtcGxhdGVzXG4gKiBpbnNpZGUgYGRvbS1pZmAgYW5kIGBkb20tcmVwZWF0YCBhcyBwYXJ0IG9mIHRlbXBsYXRlIHBhcnNpbmcuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB1c2VSZW1vdmVOZXN0ZWRUZW1wbGF0ZXMgZW5hYmxlIG9yIGRpc2FibGUgcmVtb3ZpbmcgbmVzdGVkXG4gKiAgIHRlbXBsYXRlcyBkdXJpbmcgcGFyc2luZ1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldFJlbW92ZU5lc3RlZFRlbXBsYXRlcyA9IGZ1bmN0aW9uKHVzZVJlbW92ZU5lc3RlZFRlbXBsYXRlcykge1xuICByZW1vdmVOZXN0ZWRUZW1wbGF0ZXMgPSB1c2VSZW1vdmVOZXN0ZWRUZW1wbGF0ZXM7XG59O1xuXG4vKipcbiAqIFNldHRpbmcgdG8gcGxhY2UgYGRvbS1pZmAgZWxlbWVudHMgaW4gYSBwZXJmb3JtYW5jZS1vcHRpbWl6ZWQgbW9kZSB0aGF0IHRha2VzXG4gKiBhZHZhbnRhZ2Ugb2YgbGlnaHRlci13ZWlnaHQgaG9zdCBydW50aW1lIHRlbXBsYXRlIHN0YW1waW5nIHRvIGVsaW1pbmF0ZSB0aGVcbiAqIG5lZWQgZm9yIGFuIGludGVybWVkaWF0ZSBUZW1wbGF0aXplciBgVGVtcGxhdGVJbnN0YW5jZWAgdG8gbWFuZ2UgdGhlIG5vZGVzXG4gKiBzdGFtcGVkIGJ5IGBkb20taWZgLiAgVW5kZXIgdGhpcyBzZXR0aW5nLCBhbnkgVGVtcGxhdGl6ZXItcHJvdmlkZWQgQVBJJ3NcbiAqIHN1Y2ggYXMgYG1vZGVsRm9yRWxlbWVudGAgd2lsbCBub3QgYmUgYXZhaWxhYmxlIGZvciBub2RlcyBzdGFtcGVkIGJ5XG4gKiBgZG9tLWlmYC5cbiAqL1xuZXhwb3J0IGxldCBmYXN0RG9tSWYgPSB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci5mYXN0RG9tSWYgfHwgZmFsc2U7XG5cbi8qKlxuICogU2V0cyBgZmFzdERvbUlmYCBnbG9iYWxseSwgdG8gcHV0IGBkb20taWZgIGluIGEgcGVyZm9ybWFuY2Utb3B0aW1pemVkIG1vZGUuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSB1c2VGYXN0RG9tSWYgZW5hYmxlIG9yIGRpc2FibGUgYGRvbS1pZmAgZmFzdC1tb2RlXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3Qgc2V0RmFzdERvbUlmID0gZnVuY3Rpb24odXNlRmFzdERvbUlmKSB7XG4gIGZhc3REb21JZiA9IHVzZUZhc3REb21JZjtcbn07XG5cbi8qKlxuICogU2V0dGluZyB0byBkaXNhYmxlIGBkb20tY2hhbmdlYCBhbmQgYHJlbmRlcmVkLWl0ZW0tY291bnRgIGV2ZW50cyBmcm9tXG4gKiBgZG9tLWlmYCBhbmQgYGRvbS1yZXBlYXRgLiBVc2VycyBjYW4gb3B0IGJhY2sgaW50byBgZG9tLWNoYW5nZWAgZXZlbnRzIGJ5XG4gKiBzZXR0aW5nIHRoZSBgbm90aWZ5LWRvbS1jaGFuZ2VgIGF0dHJpYnV0ZSAoYG5vdGlmeURvbUNoYW5nZTogdHJ1ZWAgcHJvcGVydHkpXG4gKiB0byBgZG9tLWlmYC9gZG9uLXJlcGVhdGAgaW5zdGFuY2VzLlxuICovXG5leHBvcnQgbGV0IHN1cHByZXNzVGVtcGxhdGVOb3RpZmljYXRpb25zID1cbiAgd2luZG93LlBvbHltZXIgJiYgd2luZG93LlBvbHltZXIuc3VwcHJlc3NUZW1wbGF0ZU5vdGlmaWNhdGlvbnMgfHwgZmFsc2U7XG5cbi8qKlxuICogU2V0cyBgc3VwcHJlc3NUZW1wbGF0ZU5vdGlmaWNhdGlvbnNgIGdsb2JhbGx5LCB0byBkaXNhYmxlIGBkb20tY2hhbmdlYCBhbmRcbiAqIGByZW5kZXJlZC1pdGVtLWNvdW50YCBldmVudHMgZnJvbSBgZG9tLWlmYCBhbmQgYGRvbS1yZXBlYXRgLlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gc3VwcHJlc3MgZW5hYmxlIG9yIGRpc2FibGUgYHN1cHByZXNzVGVtcGxhdGVOb3RpZmljYXRpb25zYFxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHNldFN1cHByZXNzVGVtcGxhdGVOb3RpZmljYXRpb25zID0gZnVuY3Rpb24oc3VwcHJlc3MpIHtcbiAgc3VwcHJlc3NUZW1wbGF0ZU5vdGlmaWNhdGlvbnMgPSBzdXBwcmVzcztcbn07XG5cbi8qKlxuICogU2V0dGluZyB0byBkaXNhYmxlIHVzZSBvZiBkeW5hbWljIGF0dHJpYnV0ZXMuIFRoaXMgaXMgYW4gb3B0aW1pemF0aW9uXG4gKiB0byBhdm9pZCBzZXR0aW5nIGBvYnNlcnZlZEF0dHJpYnV0ZXNgLiBJbnN0ZWFkIGF0dHJpYnV0ZXMgYXJlIHJlYWRcbiAqIG9uY2UgYXQgY3JlYXRlIHRpbWUgYW5kIHNldC9yZW1vdmVBdHRyaWJ1dGUgYXJlIHBhdGNoZWQuXG4gKi9cbmV4cG9ydCBsZXQgbGVnYWN5Tm9PYnNlcnZlZEF0dHJpYnV0ZXMgPVxuICB3aW5kb3cuUG9seW1lciAmJiB3aW5kb3cuUG9seW1lci5sZWdhY3lOb09ic2VydmVkQXR0cmlidXRlcyB8fCBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIGBsZWdhY3lOb09ic2VydmVkQXR0cmlidXRlc2AgZ2xvYmFsbHksIHRvIGRpc2FibGUgYG9ic2VydmVkQXR0cmlidXRlc2AuXG4gKlxuICogQHBhcmFtIHtib29sZWFufSBub09ic2VydmVkQXR0cmlidXRlcyBlbmFibGUgb3IgZGlzYWJsZSBgbGVnYWN5Tm9PYnNlcnZlZEF0dHJpYnV0ZXNgXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3Qgc2V0TGVnYWN5Tm9PYnNlcnZlZEF0dHJpYnV0ZXMgPSBmdW5jdGlvbihub09ic2VydmVkQXR0cmlidXRlcykge1xuICBsZWdhY3lOb09ic2VydmVkQXR0cmlidXRlcyA9IG5vT2JzZXJ2ZWRBdHRyaWJ1dGVzO1xufTtcblxuLyoqXG4gKiBTZXR0aW5nIHRvIGVuYWJsZSB1c2Ugb2YgYGFkb3B0ZWRTdHlsZVNoZWV0c2AgZm9yIHNoYXJpbmcgc3R5bGUgc2hlZXRzXG4gKiBiZXR3ZWVuIGNvbXBvbmVudCBpbnN0YW5jZXMnIHNoYWRvdyByb290cywgaWYgdGhlIGFwcCB1c2VzIGJ1aWx0IFNoYWR5IENTU1xuICogc3R5bGVzLlxuICovXG5leHBvcnQgbGV0IHVzZUFkb3B0ZWRTdHlsZVNoZWV0c1dpdGhCdWlsdENTUyA9XG4gIHdpbmRvdy5Qb2x5bWVyICYmIHdpbmRvdy5Qb2x5bWVyLnVzZUFkb3B0ZWRTdHlsZVNoZWV0c1dpdGhCdWlsdENTUyB8fCBmYWxzZTtcblxuLyoqXG4gKiBTZXRzIGB1c2VBZG9wdGVkU3R5bGVTaGVldHNXaXRoQnVpbHRDU1NgIGdsb2JhbGx5LlxuICpcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gdmFsdWUgZW5hYmxlIG9yIGRpc2FibGUgYHVzZUFkb3B0ZWRTdHlsZVNoZWV0c1dpdGhCdWlsdENTU2BcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBjb25zdCBzZXRVc2VBZG9wdGVkU3R5bGVTaGVldHNXaXRoQnVpbHRDU1MgPSBmdW5jdGlvbih2YWx1ZSkge1xuICB1c2VBZG9wdGVkU3R5bGVTaGVldHNXaXRoQnVpbHRDU1MgPSB2YWx1ZTtcbn07XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi9ib290LmpzJztcblxuLy8gdW5pcXVlIGdsb2JhbCBpZCBmb3IgZGVkdXBpbmcgbWl4aW5zLlxubGV0IGRlZHVwZUlkID0gMDtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIHtGdW5jdGlvbn1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIE1peGluRnVuY3Rpb24oKXt9XG4vKiogQHR5cGUgeyhXZWFrTWFwIHwgdW5kZWZpbmVkKX0gKi9cbk1peGluRnVuY3Rpb24ucHJvdG90eXBlLl9fbWl4aW5BcHBsaWNhdGlvbnM7XG4vKiogQHR5cGUgeyhPYmplY3QgfCB1bmRlZmluZWQpfSAqL1xuTWl4aW5GdW5jdGlvbi5wcm90b3R5cGUuX19taXhpblNldDtcblxuLyogZXNsaW50LWRpc2FibGUgdmFsaWQtanNkb2MgKi9cbi8qKlxuICogV3JhcHMgYW4gRVM2IGNsYXNzIGV4cHJlc3Npb24gbWl4aW4gc3VjaCB0aGF0IHRoZSBtaXhpbiBpcyBvbmx5IGFwcGxpZWRcbiAqIGlmIGl0IGhhcyBub3QgYWxyZWFkeSBiZWVuIGFwcGxpZWQgaXRzIGJhc2UgYXJndW1lbnQuIEFsc28gbWVtb2l6ZXMgbWl4aW5cbiAqIGFwcGxpY2F0aW9ucy5cbiAqXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtUfSBtaXhpbiBFUzYgY2xhc3MgZXhwcmVzc2lvbiBtaXhpbiB0byB3cmFwXG4gKiBAcmV0dXJuIHtUfVxuICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9XG4gKi9cbmV4cG9ydCBjb25zdCBkZWR1cGluZ01peGluID0gZnVuY3Rpb24obWl4aW4pIHtcbiAgbGV0IG1peGluQXBwbGljYXRpb25zID0gLyoqIEB0eXBlIHshTWl4aW5GdW5jdGlvbn0gKi8obWl4aW4pLl9fbWl4aW5BcHBsaWNhdGlvbnM7XG4gIGlmICghbWl4aW5BcHBsaWNhdGlvbnMpIHtcbiAgICBtaXhpbkFwcGxpY2F0aW9ucyA9IG5ldyBXZWFrTWFwKCk7XG4gICAgLyoqIEB0eXBlIHshTWl4aW5GdW5jdGlvbn0gKi8obWl4aW4pLl9fbWl4aW5BcHBsaWNhdGlvbnMgPSBtaXhpbkFwcGxpY2F0aW9ucztcbiAgfVxuICAvLyBtYWludGFpbiBhIHVuaXF1ZSBpZCBmb3IgZWFjaCBtaXhpblxuICBsZXQgbWl4aW5EZWR1cGVJZCA9IGRlZHVwZUlkKys7XG4gIGZ1bmN0aW9uIGRlZHVwaW5nTWl4aW4oYmFzZSkge1xuICAgIGxldCBiYXNlU2V0ID0gLyoqIEB0eXBlIHshTWl4aW5GdW5jdGlvbn0gKi8oYmFzZSkuX19taXhpblNldDtcbiAgICBpZiAoYmFzZVNldCAmJiBiYXNlU2V0W21peGluRGVkdXBlSWRdKSB7XG4gICAgICByZXR1cm4gYmFzZTtcbiAgICB9XG4gICAgbGV0IG1hcCA9IG1peGluQXBwbGljYXRpb25zO1xuICAgIGxldCBleHRlbmRlZCA9IG1hcC5nZXQoYmFzZSk7XG4gICAgaWYgKCFleHRlbmRlZCkge1xuICAgICAgZXh0ZW5kZWQgPSAvKiogQHR5cGUgeyFGdW5jdGlvbn0gKi8obWl4aW4pKGJhc2UpO1xuICAgICAgbWFwLnNldChiYXNlLCBleHRlbmRlZCk7XG4gICAgICAvLyBjb3B5IGluaGVyaXRlZCBtaXhpbiBzZXQgZnJvbSB0aGUgZXh0ZW5kZWQgY2xhc3MsIG9yIHRoZSBiYXNlIGNsYXNzXG4gICAgICAvLyBOT1RFOiB3ZSBhdm9pZCB1c2Ugb2YgU2V0IGhlcmUgYmVjYXVzZSBzb21lIGJyb3dzZXIgKElFMTEpXG4gICAgICAvLyBjYW5ub3QgZXh0ZW5kIGEgYmFzZSBTZXQgdmlhIHRoZSBjb25zdHJ1Y3Rvci5cbiAgICAgIGxldCBtaXhpblNldCA9IE9iamVjdC5jcmVhdGUoLyoqIEB0eXBlIHshTWl4aW5GdW5jdGlvbn0gKi8oZXh0ZW5kZWQpLl9fbWl4aW5TZXQgfHwgYmFzZVNldCB8fCBudWxsKTtcbiAgICAgIG1peGluU2V0W21peGluRGVkdXBlSWRdID0gdHJ1ZTtcbiAgICAgIC8qKiBAdHlwZSB7IU1peGluRnVuY3Rpb259ICovKGV4dGVuZGVkKS5fX21peGluU2V0ID0gbWl4aW5TZXQ7XG4gICAgfVxuICAgIHJldHVybiBleHRlbmRlZDtcbiAgfVxuXG4gIHJldHVybiBkZWR1cGluZ01peGluO1xufTtcbi8qIGVzbGludC1lbmFibGUgdmFsaWQtanNkb2MgKi9cbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICcuLi91dGlscy9ib290LmpzJztcblxuaW1wb3J0IHsgcmVzb2x2ZVVybCwgcGF0aEZyb21VcmwgfSBmcm9tICcuLi91dGlscy9yZXNvbHZlLXVybC5qcyc7XG5pbXBvcnQgeyBzdHJpY3RUZW1wbGF0ZVBvbGljeSB9IGZyb20gJy4uL3V0aWxzL3NldHRpbmdzLmpzJztcblxubGV0IG1vZHVsZXMgPSB7fTtcbmxldCBsY01vZHVsZXMgPSB7fTtcbi8qKlxuICogU2V0cyBhIGRvbS1tb2R1bGUgaW50byB0aGUgZ2xvYmFsIHJlZ2lzdHJ5IGJ5IGlkLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBpZCBkb20tbW9kdWxlIGlkXG4gKiBAcGFyYW0ge0RvbU1vZHVsZX0gbW9kdWxlIGRvbS1tb2R1bGUgaW5zdGFuY2VcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIHNldE1vZHVsZShpZCwgbW9kdWxlKSB7XG4gIC8vIHN0b3JlIGlkIHNlcGFyYXRlIGZyb20gbG93ZXJjYXNlZCBpZCBzbyB0aGF0XG4gIC8vIGluIGFsbCBjYXNlcyBtaXhlZENhc2UgaWQgd2lsbCBzdG9yZWQgZGlzdGluY3RseVxuICAvLyBhbmQgbG93ZXJjYXNlIHZlcnNpb24gaXMgYSBmYWxsYmFja1xuICBtb2R1bGVzW2lkXSA9IGxjTW9kdWxlc1tpZC50b0xvd2VyQ2FzZSgpXSA9IG1vZHVsZTtcbn1cbi8qKlxuICogUmV0cmlldmVzIGEgZG9tLW1vZHVsZSBmcm9tIHRoZSBnbG9iYWwgcmVnaXN0cnkgYnkgaWQuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGlkIGRvbS1tb2R1bGUgaWRcbiAqIEByZXR1cm4ge0RvbU1vZHVsZSF9IGRvbS1tb2R1bGUgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gZmluZE1vZHVsZShpZCkge1xuICByZXR1cm4gbW9kdWxlc1tpZF0gfHwgbGNNb2R1bGVzW2lkLnRvTG93ZXJDYXNlKCldO1xufVxuXG5mdW5jdGlvbiBzdHlsZU91dHNpZGVUZW1wbGF0ZUNoZWNrKGluc3QpIHtcbiAgaWYgKGluc3QucXVlcnlTZWxlY3Rvcignc3R5bGUnKSkge1xuICAgIGNvbnNvbGUud2FybignZG9tLW1vZHVsZSAlcyBoYXMgc3R5bGUgb3V0c2lkZSB0ZW1wbGF0ZScsIGluc3QuaWQpO1xuICB9XG59XG5cbi8qKlxuICogVGhlIGBkb20tbW9kdWxlYCBlbGVtZW50IHJlZ2lzdGVycyB0aGUgZG9tIGl0IGNvbnRhaW5zIHRvIHRoZSBuYW1lIGdpdmVuXG4gKiBieSB0aGUgbW9kdWxlJ3MgaWQgYXR0cmlidXRlLiBJdCBwcm92aWRlcyBhIHVuaWZpZWQgZGF0YWJhc2Ugb2YgZG9tXG4gKiBhY2Nlc3NpYmxlIHZpYSBpdHMgc3RhdGljIGBpbXBvcnRgIEFQSS5cbiAqXG4gKiBBIGtleSB1c2UgY2FzZSBvZiBgZG9tLW1vZHVsZWAgaXMgZm9yIHByb3ZpZGluZyBjdXN0b20gZWxlbWVudCBgPHRlbXBsYXRlPmBzXG4gKiB2aWEgSFRNTCBpbXBvcnRzIHRoYXQgYXJlIHBhcnNlZCBieSB0aGUgbmF0aXZlIEhUTUwgcGFyc2VyLCB0aGF0IGNhbiBiZVxuICogcmVsb2NhdGVkIGR1cmluZyBhIGJ1bmRsaW5nIHBhc3MgYW5kIHN0aWxsIGxvb2tlZCB1cCBieSBgaWRgLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIDxkb20tbW9kdWxlIGlkPVwiZm9vXCI+XG4gKiAgICAgICA8aW1nIHNyYz1cInN0dWZmLnBuZ1wiPlxuICogICAgIDwvZG9tLW1vZHVsZT5cbiAqXG4gKiBUaGVuIGluIGNvZGUgaW4gc29tZSBvdGhlciBsb2NhdGlvbiB0aGF0IGNhbm5vdCBhY2Nlc3MgdGhlIGRvbS1tb2R1bGUgYWJvdmVcbiAqXG4gKiAgICAgbGV0IGltZyA9IGN1c3RvbUVsZW1lbnRzLmdldCgnZG9tLW1vZHVsZScpLmltcG9ydCgnZm9vJywgJ2ltZycpO1xuICpcbiAqIEBjdXN0b21FbGVtZW50XG4gKiBAZXh0ZW5kcyBIVE1MRWxlbWVudFxuICogQHN1bW1hcnkgQ3VzdG9tIGVsZW1lbnQgdGhhdCBwcm92aWRlcyBhIHJlZ2lzdHJ5IG9mIHJlbG9jYXRhYmxlIERPTSBjb250ZW50XG4gKiAgIGJ5IGBpZGAgdGhhdCBpcyBhZ25vc3RpYyB0byBidW5kbGluZy5cbiAqIEB1bnJlc3RyaWN0ZWRcbiAqL1xuZXhwb3J0IGNsYXNzIERvbU1vZHVsZSBleHRlbmRzIEhUTUxFbGVtZW50IHtcblxuICAvKiogQG92ZXJyaWRlICovXG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkgeyByZXR1cm4gWydpZCddOyB9XG5cbiAgLyoqXG4gICAqIFJldHJpZXZlcyB0aGUgZWxlbWVudCBzcGVjaWZpZWQgYnkgdGhlIGNzcyBgc2VsZWN0b3JgIGluIHRoZSBtb2R1bGVcbiAgICogcmVnaXN0ZXJlZCBieSBgaWRgLiBGb3IgZXhhbXBsZSwgdGhpcy5pbXBvcnQoJ2ZvbycsICdpbWcnKTtcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlkIFRoZSBpZCBvZiB0aGUgZG9tLW1vZHVsZSBpbiB3aGljaCB0byBzZWFyY2guXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gc2VsZWN0b3IgVGhlIGNzcyBzZWxlY3RvciBieSB3aGljaCB0byBmaW5kIHRoZSBlbGVtZW50LlxuICAgKiBAcmV0dXJuIHtFbGVtZW50fSBSZXR1cm5zIHRoZSBlbGVtZW50IHdoaWNoIG1hdGNoZXMgYHNlbGVjdG9yYCBpbiB0aGVcbiAgICogbW9kdWxlIHJlZ2lzdGVyZWQgYXQgdGhlIHNwZWNpZmllZCBgaWRgLlxuICAgKlxuICAgKiBAZXhwb3J0XG4gICAqIEBub2NvbGxhcHNlIFJlZmVycmVkIHRvIGluZGlyZWN0bHkgaW4gc3R5bGUtZ2F0aGVyLmpzXG4gICAqL1xuICBzdGF0aWMgaW1wb3J0KGlkLCBzZWxlY3Rvcikge1xuICAgIGlmIChpZCkge1xuICAgICAgbGV0IG0gPSBmaW5kTW9kdWxlKGlkKTtcbiAgICAgIGlmIChtICYmIHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBtLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG07XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi9cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IG9sZCBPbGQgdmFsdWUgb2YgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IHZhbHVlIEN1cnJlbnQgdmFsdWUgb2YgYXR0cmlidXRlLlxuICAgKiBAcGFyYW0gez9zdHJpbmd9IG5hbWVzcGFjZSBBdHRyaWJ1dGUgbmFtZXNwYWNlLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhuYW1lLCBvbGQsIHZhbHVlLCBuYW1lc3BhY2UpIHtcbiAgICBpZiAob2xkICE9PSB2YWx1ZSkge1xuICAgICAgdGhpcy5yZWdpc3RlcigpO1xuICAgIH1cbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXVudXNlZC1hcmdzICovXG5cbiAgLyoqXG4gICAqIFRoZSBhYnNvbHV0ZSBVUkwgb2YgdGhlIG9yaWdpbmFsIGxvY2F0aW9uIG9mIHRoaXMgYGRvbS1tb2R1bGVgLlxuICAgKlxuICAgKiBUaGlzIHZhbHVlIHdpbGwgZGlmZmVyIGZyb20gdGhpcyBlbGVtZW50J3MgYG93bmVyRG9jdW1lbnRgIGluIHRoZVxuICAgKiBmb2xsb3dpbmcgd2F5czpcbiAgICogLSBUYWtlcyBpbnRvIGFjY291bnQgYW55IGBhc3NldHBhdGhgIGF0dHJpYnV0ZSBhZGRlZCBkdXJpbmcgYnVuZGxpbmdcbiAgICogICB0byBpbmRpY2F0ZSB0aGUgb3JpZ2luYWwgbG9jYXRpb24gcmVsYXRpdmUgdG8gdGhlIGJ1bmRsZWQgbG9jYXRpb25cbiAgICogLSBVc2VzIHRoZSBIVE1MSW1wb3J0cyBwb2x5ZmlsbCdzIGBpbXBvcnRGb3JFbGVtZW50YCBBUEkgdG8gZW5zdXJlXG4gICAqICAgdGhlIHBhdGggaXMgcmVsYXRpdmUgdG8gdGhlIGltcG9ydCBkb2N1bWVudCdzIGxvY2F0aW9uIHNpbmNlXG4gICAqICAgYG93bmVyRG9jdW1lbnRgIGlzIG5vdCBjdXJyZW50bHkgcG9seWZpbGxlZFxuICAgKi9cbiAgZ2V0IGFzc2V0cGF0aCgpIHtcbiAgICAvLyBEb24ndCBvdmVycmlkZSBleGlzdGluZyBhc3NldHBhdGguXG4gICAgaWYgKCF0aGlzLl9fYXNzZXRwYXRoKSB7XG4gICAgICAvLyBub3RlOiBhc3NldHBhdGggc2V0IHZpYSBhbiBhdHRyaWJ1dGUgbXVzdCBiZSByZWxhdGl2ZSB0byB0aGlzXG4gICAgICAvLyBlbGVtZW50J3MgbG9jYXRpb247IGFjY29tb2RhdGUgcG9seWZpbGxlZCBIVE1MSW1wb3J0c1xuICAgICAgY29uc3Qgb3duZXIgPSB3aW5kb3cuSFRNTEltcG9ydHMgJiYgSFRNTEltcG9ydHMuaW1wb3J0Rm9yRWxlbWVudCA/XG4gICAgICAgIEhUTUxJbXBvcnRzLmltcG9ydEZvckVsZW1lbnQodGhpcykgfHwgZG9jdW1lbnQgOiB0aGlzLm93bmVyRG9jdW1lbnQ7XG4gICAgICBjb25zdCB1cmwgPSByZXNvbHZlVXJsKFxuICAgICAgICB0aGlzLmdldEF0dHJpYnV0ZSgnYXNzZXRwYXRoJykgfHwgJycsIG93bmVyLmJhc2VVUkkpO1xuICAgICAgdGhpcy5fX2Fzc2V0cGF0aCA9IHBhdGhGcm9tVXJsKHVybCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9fYXNzZXRwYXRoO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyB0aGUgZG9tLW1vZHVsZSBhdCBhIGdpdmVuIGlkLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWRcbiAgICogd2hlbiBhIGRvbS1tb2R1bGUgaXMgaW1wZXJhdGl2ZWx5IGNyZWF0ZWQuIEZvclxuICAgKiBleGFtcGxlLCBgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZG9tLW1vZHVsZScpLnJlZ2lzdGVyKCdmb28nKWAuXG4gICAqIEBwYXJhbSB7c3RyaW5nPX0gaWQgVGhlIGlkIGF0IHdoaWNoIHRvIHJlZ2lzdGVyIHRoZSBkb20tbW9kdWxlLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgcmVnaXN0ZXIoaWQpIHtcbiAgICBpZCA9IGlkIHx8IHRoaXMuaWQ7XG4gICAgaWYgKGlkKSB7XG4gICAgICAvLyBVbmRlciBzdHJpY3RUZW1wbGF0ZVBvbGljeSwgcmVqZWN0IGFuZCBudWxsIG91dCBhbnkgcmUtcmVnaXN0ZXJlZFxuICAgICAgLy8gZG9tLW1vZHVsZSBzaW5jZSBpdCBpcyBhbWJpZ3VvdXMgd2hldGhlciBmaXJzdC1pbiBvciBsYXN0LWluIGlzIHRydXN0ZWRcbiAgICAgIGlmIChzdHJpY3RUZW1wbGF0ZVBvbGljeSAmJiBmaW5kTW9kdWxlKGlkKSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHNldE1vZHVsZShpZCwgbnVsbCk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgc3RyaWN0VGVtcGxhdGVQb2xpY3k6IGRvbS1tb2R1bGUgJHtpZH0gcmUtcmVnaXN0ZXJlZGApO1xuICAgICAgfVxuICAgICAgdGhpcy5pZCA9IGlkO1xuICAgICAgc2V0TW9kdWxlKGlkLCB0aGlzKTtcbiAgICAgIHN0eWxlT3V0c2lkZVRlbXBsYXRlQ2hlY2sodGhpcyk7XG4gICAgfVxuICB9XG59XG5cbkRvbU1vZHVsZS5wcm90b3R5cGVbJ21vZHVsZXMnXSA9IG1vZHVsZXM7XG5cbmN1c3RvbUVsZW1lbnRzLmRlZmluZSgnZG9tLW1vZHVsZScsIERvbU1vZHVsZSk7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuLyoqXG4gKiBNb2R1bGUgd2l0aCB1dGlsaXRpZXMgZm9yIGNvbGxlY3Rpb24gQ1NTIHRleHQgZnJvbSBgPHRlbXBsYXRlcz5gLCBleHRlcm5hbFxuICogc3R5bGVzaGVldHMsIGFuZCBgZG9tLW1vZHVsZWBzLlxuICpcbiAqIEBzdW1tYXJ5IE1vZHVsZSB3aXRoIHV0aWxpdGllcyBmb3IgY29sbGVjdGlvbiBDU1MgdGV4dCBmcm9tIHZhcmlvdXMgc291cmNlcy5cbiAqL1xuXG5pbXBvcnQgeyBEb21Nb2R1bGUgfSBmcm9tICcuLi9lbGVtZW50cy9kb20tbW9kdWxlLmpzJztcbmltcG9ydCB7IHJlc29sdmVDc3MgfSBmcm9tICcuL3Jlc29sdmUtdXJsLmpzJztcblxuY29uc3QgTU9EVUxFX1NUWUxFX0xJTktfU0VMRUNUT1IgPSAnbGlua1tyZWw9aW1wb3J0XVt0eXBlfj1jc3NdJztcbmNvbnN0IElOQ0xVREVfQVRUUiA9ICdpbmNsdWRlJztcbmNvbnN0IFNIQURZX1VOU0NPUEVEX0FUVFIgPSAnc2hhZHktdW5zY29wZWQnO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVJZCAuXG4gKiBAcmV0dXJuIHs/RG9tTW9kdWxlfSAuXG4gKi9cbmZ1bmN0aW9uIGltcG9ydE1vZHVsZShtb2R1bGVJZCkge1xuICByZXR1cm4gLyoqIEB0eXBlIHs/RG9tTW9kdWxlfSAqLyhEb21Nb2R1bGUuaW1wb3J0KG1vZHVsZUlkKSk7XG59XG5cbmZ1bmN0aW9uIHN0eWxlRm9ySW1wb3J0KGltcG9ydERvYykge1xuICAvLyBOT1RFOiBwb2x5ZmlsbCBhZmZvcmRhbmNlLlxuICAvLyB1bmRlciB0aGUgSFRNTEltcG9ydHMgcG9seWZpbGwsIHRoZXJlIHdpbGwgYmUgbm8gJ2JvZHknLFxuICAvLyBidXQgdGhlIGltcG9ydCBwc2V1ZG8tZG9jIGNhbiBiZSB1c2VkIGRpcmVjdGx5LlxuICBsZXQgY29udGFpbmVyID0gaW1wb3J0RG9jLmJvZHkgPyBpbXBvcnREb2MuYm9keSA6IGltcG9ydERvYztcbiAgY29uc3QgaW1wb3J0Q3NzID0gcmVzb2x2ZUNzcyhjb250YWluZXIudGV4dENvbnRlbnQsXG4gICAgaW1wb3J0RG9jLmJhc2VVUkkpO1xuICBjb25zdCBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHN0eWxlLnRleHRDb250ZW50ID0gaW1wb3J0Q3NzO1xuICByZXR1cm4gc3R5bGU7XG59XG5cbi8qKiBAdHlwZWRlZiB7e2Fzc2V0cGF0aDogc3RyaW5nfX0gKi9cbmxldCB0ZW1wbGF0ZVdpdGhBc3NldFBhdGg7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuXG4vKipcbiAqIFJldHVybnMgYSBsaXN0IG9mIDxzdHlsZT4gZWxlbWVudHMgaW4gYSBzcGFjZS1zZXBhcmF0ZWQgbGlzdCBvZiBgZG9tLW1vZHVsZWBzLlxuICpcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZUlkcyBMaXN0IG9mIGRvbS1tb2R1bGUgaWQncyB3aXRoaW4gd2hpY2ggdG9cbiAqIHNlYXJjaCBmb3IgY3NzLlxuICogQHJldHVybiB7IUFycmF5PCFIVE1MU3R5bGVFbGVtZW50Pn0gQXJyYXkgb2YgY29udGFpbmVkIDxzdHlsZT4gZWxlbWVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHN0eWxlc0Zyb21Nb2R1bGVzKG1vZHVsZUlkcykge1xuIGNvbnN0IG1vZHVsZXMgPSBtb2R1bGVJZHMudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gY29uc3Qgc3R5bGVzID0gW107XG4gZm9yIChsZXQgaT0wOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuICAgc3R5bGVzLnB1c2goLi4uc3R5bGVzRnJvbU1vZHVsZShtb2R1bGVzW2ldKSk7XG4gfVxuIHJldHVybiBzdHlsZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGxpc3Qgb2YgPHN0eWxlPiBlbGVtZW50cyBpbiBhIGdpdmVuIGBkb20tbW9kdWxlYC5cbiAqIFN0eWxlcyBpbiBhIGBkb20tbW9kdWxlYCBjYW4gY29tZSBlaXRoZXIgZnJvbSBgPHN0eWxlPmBzIHdpdGhpbiB0aGVcbiAqIGZpcnN0IGA8dGVtcGxhdGU+YCwgb3IgZWxzZSBmcm9tIG9uZSBvciBtb3JlXG4gKiBgPGxpbmsgcmVsPVwiaW1wb3J0XCIgdHlwZT1cImNzc1wiPmAgbGlua3Mgb3V0c2lkZSB0aGUgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZUlkIGRvbS1tb2R1bGUgaWQgdG8gZ2F0aGVyIHN0eWxlcyBmcm9tXG4gKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxTdHlsZUVsZW1lbnQ+fSBBcnJheSBvZiBjb250YWluZWQgc3R5bGVzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVzRnJvbU1vZHVsZShtb2R1bGVJZCkge1xuICBjb25zdCBtID0gaW1wb3J0TW9kdWxlKG1vZHVsZUlkKTtcblxuICBpZiAoIW0pIHtcbiAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBmaW5kIHN0eWxlIGRhdGEgaW4gbW9kdWxlIG5hbWVkJywgbW9kdWxlSWQpO1xuICAgIHJldHVybiBbXTtcbiAgfVxuXG4gIGlmIChtLl9zdHlsZXMgPT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuICAgIC8vIG1vZHVsZSBpbXBvcnRzOiA8bGluayByZWw9XCJpbXBvcnRcIiB0eXBlPVwiY3NzXCI+XG4gICAgc3R5bGVzLnB1c2goLi4uX3N0eWxlc0Zyb21Nb2R1bGVJbXBvcnRzKG0pKTtcbiAgICAvLyBpbmNsdWRlIGNzcyBmcm9tIHRoZSBmaXJzdCB0ZW1wbGF0ZSBpbiB0aGUgbW9kdWxlXG4gICAgY29uc3QgdGVtcGxhdGUgPSAvKiogQHR5cGUgez9IVE1MVGVtcGxhdGVFbGVtZW50fSAqLyhcbiAgICAgICAgbS5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpKTtcbiAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgIHN0eWxlcy5wdXNoKC4uLnN0eWxlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSxcbiAgICAgICAgLyoqIEB0eXBlIHt0ZW1wbGF0ZVdpdGhBc3NldFBhdGh9ICovKG0pLmFzc2V0cGF0aCkpO1xuICAgIH1cblxuICAgIG0uX3N0eWxlcyA9IHN0eWxlcztcbiAgfVxuXG4gIHJldHVybiBtLl9zdHlsZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgYDxzdHlsZT5gIGVsZW1lbnRzIHdpdGhpbiBhIGdpdmVuIHRlbXBsYXRlLlxuICpcbiAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIGdhdGhlciBzdHlsZXMgZnJvbVxuICogQHBhcmFtIHtzdHJpbmc9fSBiYXNlVVJJIGJhc2VVUkkgZm9yIHN0eWxlIGNvbnRlbnRcbiAqIEByZXR1cm4geyFBcnJheTwhSFRNTFN0eWxlRWxlbWVudD59IEFycmF5IG9mIHN0eWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gc3R5bGVzRnJvbVRlbXBsYXRlKHRlbXBsYXRlLCBiYXNlVVJJKSB7XG4gIGlmICghdGVtcGxhdGUuX3N0eWxlcykge1xuICAgIGNvbnN0IHN0eWxlcyA9IFtdO1xuICAgIC8vIGlmIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSwgZ2V0IGNvbnRlbnQgZnJvbSBpdHMgLmNvbnRlbnRcbiAgICBjb25zdCBlJCA9IHRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKTtcbiAgICBmb3IgKGxldCBpPTA7IGkgPCBlJC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGUgPSBlJFtpXTtcbiAgICAgIC8vIHN1cHBvcnQgc3R5bGUgc2hhcmluZyBieSBhbGxvd2luZyBzdHlsZXMgdG8gXCJpbmNsdWRlXCJcbiAgICAgIC8vIG90aGVyIGRvbS1tb2R1bGVzIHRoYXQgY29udGFpbiBzdHlsaW5nXG4gICAgICBsZXQgaW5jbHVkZSA9IGUuZ2V0QXR0cmlidXRlKElOQ0xVREVfQVRUUik7XG4gICAgICBpZiAoaW5jbHVkZSkge1xuICAgICAgICBzdHlsZXMucHVzaCguLi5zdHlsZXNGcm9tTW9kdWxlcyhpbmNsdWRlKS5maWx0ZXIoZnVuY3Rpb24oaXRlbSwgaW5kZXgsIHNlbGYpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pID09PSBpbmRleDtcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgICAgaWYgKGJhc2VVUkkpIHtcbiAgICAgICAgZS50ZXh0Q29udGVudCA9XG4gICAgICAgICAgICByZXNvbHZlQ3NzKGUudGV4dENvbnRlbnQsIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyAoYmFzZVVSSSkpO1xuICAgICAgfVxuICAgICAgc3R5bGVzLnB1c2goZSk7XG4gICAgfVxuICAgIHRlbXBsYXRlLl9zdHlsZXMgPSBzdHlsZXM7XG4gIH1cbiAgcmV0dXJuIHRlbXBsYXRlLl9zdHlsZXM7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGxpc3Qgb2YgPHN0eWxlPiBlbGVtZW50cyAgZnJvbSBzdHlsZXNoZWV0cyBsb2FkZWQgdmlhIGA8bGluayByZWw9XCJpbXBvcnRcIiB0eXBlPVwiY3NzXCI+YCBsaW5rcyB3aXRoaW4gdGhlIHNwZWNpZmllZCBgZG9tLW1vZHVsZWAuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG1vZHVsZUlkIElkIG9mIGBkb20tbW9kdWxlYCB0byBnYXRoZXIgQ1NTIGZyb21cbiAqIEByZXR1cm4geyFBcnJheTwhSFRNTFN0eWxlRWxlbWVudD59IEFycmF5IG9mIGNvbnRhaW5lZCBzdHlsZXMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGVJZCkge1xuIGxldCBtID0gaW1wb3J0TW9kdWxlKG1vZHVsZUlkKTtcbiByZXR1cm4gbSA/IF9zdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhtKSA6IFtdO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBtb2R1bGUgZG9tLW1vZHVsZSBlbGVtZW50IHRoYXQgY291bGQgY29udGFpbiBgPGxpbmsgcmVsPVwiaW1wb3J0XCIgdHlwZT1cImNzc1wiPmAgc3R5bGVzXG4gKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxTdHlsZUVsZW1lbnQ+fSBBcnJheSBvZiBjb250YWluZWQgc3R5bGVzXG4gKi9cbmZ1bmN0aW9uIF9zdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGUpIHtcbiAgY29uc3Qgc3R5bGVzID0gW107XG4gIGNvbnN0IHAkID0gbW9kdWxlLnF1ZXJ5U2VsZWN0b3JBbGwoTU9EVUxFX1NUWUxFX0xJTktfU0VMRUNUT1IpO1xuICBmb3IgKGxldCBpPTA7IGkgPCBwJC5sZW5ndGg7IGkrKykge1xuICAgIGxldCBwID0gcCRbaV07XG4gICAgaWYgKHAuaW1wb3J0KSB7XG4gICAgICBjb25zdCBpbXBvcnREb2MgPSBwLmltcG9ydDtcbiAgICAgIGNvbnN0IHVuc2NvcGVkID0gcC5oYXNBdHRyaWJ1dGUoU0hBRFlfVU5TQ09QRURfQVRUUik7XG4gICAgICBpZiAodW5zY29wZWQgJiYgIWltcG9ydERvYy5fdW5zY29wZWRTdHlsZSkge1xuICAgICAgICBjb25zdCBzdHlsZSA9IHN0eWxlRm9ySW1wb3J0KGltcG9ydERvYyk7XG4gICAgICAgIHN0eWxlLnNldEF0dHJpYnV0ZShTSEFEWV9VTlNDT1BFRF9BVFRSLCAnJyk7XG4gICAgICAgIGltcG9ydERvYy5fdW5zY29wZWRTdHlsZSA9IHN0eWxlO1xuICAgICAgfSBlbHNlIGlmICghaW1wb3J0RG9jLl9zdHlsZSkge1xuICAgICAgICBpbXBvcnREb2MuX3N0eWxlID0gc3R5bGVGb3JJbXBvcnQoaW1wb3J0RG9jKTtcbiAgICAgIH1cbiAgICAgIHN0eWxlcy5wdXNoKHVuc2NvcGVkID8gaW1wb3J0RG9jLl91bnNjb3BlZFN0eWxlIDogaW1wb3J0RG9jLl9zdHlsZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHlsZXM7XG59XG5cbi8qKlxuICpcbiAqIFJldHVybnMgQ1NTIHRleHQgb2Ygc3R5bGVzIGluIGEgc3BhY2Utc2VwYXJhdGVkIGxpc3Qgb2YgYGRvbS1tb2R1bGVgcy5cbiAqIE5vdGU6IFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQsIHVzZSBgc3R5bGVzRnJvbU1vZHVsZXNgIGluc3RlYWQuXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVJZHMgTGlzdCBvZiBkb20tbW9kdWxlIGlkJ3Mgd2l0aGluIHdoaWNoIHRvXG4gKiBzZWFyY2ggZm9yIGNzcy5cbiAqIEByZXR1cm4ge3N0cmluZ30gQ29uY2F0ZW5hdGVkIENTUyBjb250ZW50IGZyb20gc3BlY2lmaWVkIGBkb20tbW9kdWxlYHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc0Zyb21Nb2R1bGVzKG1vZHVsZUlkcykge1xuIGxldCBtb2R1bGVzID0gbW9kdWxlSWRzLnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuIGxldCBjc3NUZXh0ID0gJyc7XG4gZm9yIChsZXQgaT0wOyBpIDwgbW9kdWxlcy5sZW5ndGg7IGkrKykge1xuICAgY3NzVGV4dCArPSBjc3NGcm9tTW9kdWxlKG1vZHVsZXNbaV0pO1xuIH1cbiByZXR1cm4gY3NzVGV4dDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIENTUyB0ZXh0IG9mIHN0eWxlcyBpbiBhIGdpdmVuIGBkb20tbW9kdWxlYC4gIENTUyBpbiBhIGBkb20tbW9kdWxlYFxuICogY2FuIGNvbWUgZWl0aGVyIGZyb20gYDxzdHlsZT5gcyB3aXRoaW4gdGhlIGZpcnN0IGA8dGVtcGxhdGU+YCwgb3IgZWxzZVxuICogZnJvbSBvbmUgb3IgbW9yZSBgPGxpbmsgcmVsPVwiaW1wb3J0XCIgdHlwZT1cImNzc1wiPmAgbGlua3Mgb3V0c2lkZSB0aGVcbiAqIHRlbXBsYXRlLlxuICpcbiAqIEFueSBgPHN0eWxlcz5gIHByb2Nlc3NlZCBhcmUgcmVtb3ZlZCBmcm9tIHRoZWlyIG9yaWdpbmFsIGxvY2F0aW9uLlxuICogTm90ZTogVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCwgdXNlIGBzdHlsZUZyb21Nb2R1bGVgIGluc3RlYWQuXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb2R1bGVJZCBkb20tbW9kdWxlIGlkIHRvIGdhdGhlciBzdHlsZXMgZnJvbVxuICogQHJldHVybiB7c3RyaW5nfSBDb25jYXRlbmF0ZWQgQ1NTIGNvbnRlbnQgZnJvbSBzcGVjaWZpZWQgYGRvbS1tb2R1bGVgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjc3NGcm9tTW9kdWxlKG1vZHVsZUlkKSB7XG4gIGxldCBtID0gaW1wb3J0TW9kdWxlKG1vZHVsZUlkKTtcbiAgaWYgKG0gJiYgbS5fY3NzVGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gbW9kdWxlIGltcG9ydHM6IDxsaW5rIHJlbD1cImltcG9ydFwiIHR5cGU9XCJjc3NcIj5cbiAgICBsZXQgY3NzVGV4dCA9IF9jc3NGcm9tTW9kdWxlSW1wb3J0cyhtKTtcbiAgICAvLyBpbmNsdWRlIGNzcyBmcm9tIHRoZSBmaXJzdCB0ZW1wbGF0ZSBpbiB0aGUgbW9kdWxlXG4gICAgbGV0IHQgPSAvKiogQHR5cGUgez9IVE1MVGVtcGxhdGVFbGVtZW50fSAqLyhtLnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJykpO1xuICAgIGlmICh0KSB7XG4gICAgICBjc3NUZXh0ICs9IGNzc0Zyb21UZW1wbGF0ZSh0LFxuICAgICAgICAvKiogQHR5cGUge3RlbXBsYXRlV2l0aEFzc2V0UGF0aH0gKi8obSkuYXNzZXRwYXRoKTtcbiAgICB9XG4gICAgbS5fY3NzVGV4dCA9IGNzc1RleHQgfHwgbnVsbDtcbiAgfVxuICBpZiAoIW0pIHtcbiAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBmaW5kIHN0eWxlIGRhdGEgaW4gbW9kdWxlIG5hbWVkJywgbW9kdWxlSWQpO1xuICB9XG4gIHJldHVybiBtICYmIG0uX2Nzc1RleHQgfHwgJyc7XG59XG5cbi8qKlxuICogUmV0dXJucyBDU1MgdGV4dCBvZiBgPHN0eWxlcz5gIHdpdGhpbiBhIGdpdmVuIHRlbXBsYXRlLlxuICpcbiAqIEFueSBgPHN0eWxlcz5gIHByb2Nlc3NlZCBhcmUgcmVtb3ZlZCBmcm9tIHRoZWlyIG9yaWdpbmFsIGxvY2F0aW9uLlxuICogTm90ZTogVGhpcyBtZXRob2QgaXMgZGVwcmVjYXRlZCwgdXNlIGBzdHlsZUZyb21UZW1wbGF0ZWAgaW5zdGVhZC5cbiAqXG4gKiBAZGVwcmVjYXRlZFxuICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgVGVtcGxhdGUgdG8gZ2F0aGVyIHN0eWxlcyBmcm9tXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZVVSSSBCYXNlIFVSSSB0byByZXNvbHZlIHRoZSBVUkwgYWdhaW5zdFxuICogQHJldHVybiB7c3RyaW5nfSBDb25jYXRlbmF0ZWQgQ1NTIGNvbnRlbnQgZnJvbSBzcGVjaWZpZWQgdGVtcGxhdGVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNzc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgYmFzZVVSSSkge1xuICBsZXQgY3NzVGV4dCA9ICcnO1xuICBjb25zdCBlJCA9IHN0eWxlc0Zyb21UZW1wbGF0ZSh0ZW1wbGF0ZSwgYmFzZVVSSSk7XG4gIC8vIGlmIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSwgZ2V0IGNvbnRlbnQgZnJvbSBpdHMgLmNvbnRlbnRcbiAgZm9yIChsZXQgaT0wOyBpIDwgZSQubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgZSA9IGUkW2ldO1xuICAgIGlmIChlLnBhcmVudE5vZGUpIHtcbiAgICAgIGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKTtcbiAgICB9XG4gICAgY3NzVGV4dCArPSBlLnRleHRDb250ZW50O1xuICB9XG4gIHJldHVybiBjc3NUZXh0O1xufVxuXG4vKipcbiAqIFJldHVybnMgQ1NTIHRleHQgZnJvbSBzdHlsZXNoZWV0cyBsb2FkZWQgdmlhIGA8bGluayByZWw9XCJpbXBvcnRcIiB0eXBlPVwiY3NzXCI+YFxuICogbGlua3Mgd2l0aGluIHRoZSBzcGVjaWZpZWQgYGRvbS1tb2R1bGVgLlxuICpcbiAqIE5vdGU6IFRoaXMgbWV0aG9kIGlzIGRlcHJlY2F0ZWQsIHVzZSBgc3R5bGVzRnJvbU1vZHVsZUltcG9ydHNgIGluc3RlYWQuXG4gKlxuICogQGRlcHJlY2F0ZWRcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gbW9kdWxlSWQgSWQgb2YgYGRvbS1tb2R1bGVgIHRvIGdhdGhlciBDU1MgZnJvbVxuICogQHJldHVybiB7c3RyaW5nfSBDb25jYXRlbmF0ZWQgQ1NTIGNvbnRlbnQgZnJvbSBsaW5rcyBpbiBzcGVjaWZpZWQgYGRvbS1tb2R1bGVgXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjc3NGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGVJZCkge1xuICBsZXQgbSA9IGltcG9ydE1vZHVsZShtb2R1bGVJZCk7XG4gIHJldHVybiBtID8gX2Nzc0Zyb21Nb2R1bGVJbXBvcnRzKG0pIDogJyc7XG59XG5cbi8qKlxuICogQGRlcHJlY2F0ZWRcbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBtb2R1bGUgZG9tLW1vZHVsZSBlbGVtZW50IHRoYXQgY291bGQgY29udGFpbiBgPGxpbmsgcmVsPVwiaW1wb3J0XCIgdHlwZT1cImNzc1wiPmAgc3R5bGVzXG4gKiBAcmV0dXJuIHtzdHJpbmd9IENvbmNhdGVuYXRlZCBDU1MgY29udGVudCBmcm9tIGxpbmtzIGluIHRoZSBkb20tbW9kdWxlXG4gKi9cbmZ1bmN0aW9uIF9jc3NGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGUpIHtcbiAgbGV0IGNzc1RleHQgPSAnJztcbiAgbGV0IHN0eWxlcyA9IF9zdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhtb2R1bGUpO1xuICBmb3IgKGxldCBpPTA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjc3NUZXh0ICs9IHN0eWxlc1tpXS50ZXh0Q29udGVudDtcbiAgfVxuICByZXR1cm4gY3NzVGV4dDtcbn1cbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuLyoqXG4gKiBOb2RlIHdyYXBwZXIgdG8gZW5zdXJlIFNoYWRvd0RPTSBzYWZlIG9wZXJhdGlvbiByZWdhcmRsZXNzIG9mIHBvbHlmaWxsXG4gKiBwcmVzZW5jZSBvciBtb2RlLiBOb3RlIHRoYXQgd2l0aCB0aGUgaW50cm9kdWN0aW9uIG9mIGBTaGFkeURPTS5ub1BhdGNoYCxcbiAqIGEgbm9kZSB3cmFwcGVyIG11c3QgYmUgdXNlZCB0byBhY2Nlc3MgU2hhZG93RE9NIEFQSS5cbiAqIFRoaXMgaXMgc2ltaWxhciB0byB1c2luZyBgUG9seW1lci5kb21gIGJ1dCByZWxpZXMgZXhjbHVzaXZlbHlcbiAqIG9uIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2hhZHlET00gcG9seWZpbGwgcmF0aGVyIHRoYW4gcmVxdWlyaW5nIHRoZSBsb2FkaW5nXG4gKiBvZiBsZWdhY3kgKFBvbHltZXIuZG9tKSBBUEkuXG4gKiBAdHlwZSB7ZnVuY3Rpb24oTm9kZSk6Tm9kZX1cbiAqL1xuZXhwb3J0IGNvbnN0IHdyYXAgPSAod2luZG93WydTaGFkeURPTSddICYmIHdpbmRvd1snU2hhZHlET00nXVsnbm9QYXRjaCddICYmIHdpbmRvd1snU2hhZHlET00nXVsnd3JhcCddKSA/XG4gIHdpbmRvd1snU2hhZHlET00nXVsnd3JhcCddIDpcbiAgKHdpbmRvd1snU2hhZHlET00nXSA/IChuKSA9PiBTaGFkeURPTVsncGF0Y2gnXShuKSA6IChuKSA9PiBuKTtcblxuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbi8qKlxuICogTW9kdWxlIHdpdGggdXRpbGl0aWVzIGZvciBtYW5pcHVsYXRpbmcgc3RydWN0dXJlZCBkYXRhIHBhdGggc3RyaW5ncy5cbiAqXG4gKiBAc3VtbWFyeSBNb2R1bGUgd2l0aCB1dGlsaXRpZXMgZm9yIG1hbmlwdWxhdGluZyBzdHJ1Y3R1cmVkIGRhdGEgcGF0aCBzdHJpbmdzLlxuICovXG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBzdHJpbmcgaXMgYSBzdHJ1Y3R1cmVkIGRhdGEgcGF0aCAoaGFzIGRvdHMpLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiBpc1BhdGgoJ2Zvby5iYXIuYmF6JykgLy8gdHJ1ZVxuICogaXNQYXRoKCdmb28nKSAgICAgICAgIC8vIGZhbHNlXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHN0cmluZ1xuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgc3RyaW5nIGNvbnRhaW5lZCBvbmUgb3IgbW9yZSBkb3RzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BhdGgocGF0aCkge1xuICByZXR1cm4gcGF0aC5pbmRleE9mKCcuJykgPj0gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSByb290IHByb3BlcnR5IG5hbWUgZm9yIHRoZSBnaXZlbiBwYXRoLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiByb290KCdmb28uYmFyLmJheicpIC8vICdmb28nXG4gKiByb290KCdmb28nKSAgICAgICAgIC8vICdmb28nXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHN0cmluZ1xuICogQHJldHVybiB7c3RyaW5nfSBSb290IHByb3BlcnR5IG5hbWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJvb3QocGF0aCkge1xuICBsZXQgZG90SW5kZXggPSBwYXRoLmluZGV4T2YoJy4nKTtcbiAgaWYgKGRvdEluZGV4ID09PSAtMSkge1xuICAgIHJldHVybiBwYXRoO1xuICB9XG4gIHJldHVybiBwYXRoLnNsaWNlKDAsIGRvdEluZGV4KTtcbn1cblxuLyoqXG4gKiBHaXZlbiBgYmFzZWAgaXMgYGZvby5iYXJgLCBgZm9vYCBpcyBhbiBhbmNlc3RvciwgYGZvby5iYXJgIGlzIG5vdFxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBwYXRoIGlzIGFuIGFuY2VzdG9yIG9mIHRoZSBiYXNlIHBhdGguXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBcbiAqIGlzQW5jZXN0b3IoJ2Zvby5iYXInLCAnZm9vJykgICAgICAgICAvLyB0cnVlXG4gKiBpc0FuY2VzdG9yKCdmb28uYmFyJywgJ2Zvby5iYXInKSAgICAgLy8gZmFsc2VcbiAqIGlzQW5jZXN0b3IoJ2Zvby5iYXInLCAnZm9vLmJhci5iYXonKSAvLyBmYWxzZVxuICogYGBgXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2UgUGF0aCBzdHJpbmcgdG8gdGVzdCBhZ2FpbnN0LlxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCBzdHJpbmcgdG8gdGVzdC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYHBhdGhgIGlzIGFuIGFuY2VzdG9yIG9mIGBiYXNlYC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQW5jZXN0b3IoYmFzZSwgcGF0aCkge1xuICAvLyAgICAgYmFzZS5zdGFydHNXaXRoKHBhdGggKyAnLicpO1xuICByZXR1cm4gYmFzZS5pbmRleE9mKHBhdGggKyAnLicpID09PSAwO1xufVxuXG4vKipcbiAqIEdpdmVuIGBiYXNlYCBpcyBgZm9vLmJhcmAsIGBmb28uYmFyLmJhemAgaXMgYW4gZGVzY2VuZGFudFxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiBpc0Rlc2NlbmRhbnQoJ2Zvby5iYXInLCAnZm9vLmJhci5iYXonKSAvLyB0cnVlXG4gKiBpc0Rlc2NlbmRhbnQoJ2Zvby5iYXInLCAnZm9vLmJhcicpICAgICAvLyBmYWxzZVxuICogaXNEZXNjZW5kYW50KCdmb28uYmFyJywgJ2ZvbycpICAgICAgICAgLy8gZmFsc2VcbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlIFBhdGggc3RyaW5nIHRvIHRlc3QgYWdhaW5zdC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggc3RyaW5nIHRvIHRlc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBwYXRoYCBpcyBhIGRlc2NlbmRhbnQgb2YgYGJhc2VgLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNEZXNjZW5kYW50KGJhc2UsIHBhdGgpIHtcbiAgLy8gICAgIHBhdGguc3RhcnRzV2l0aChiYXNlICsgJy4nKTtcbiAgcmV0dXJuIHBhdGguaW5kZXhPZihiYXNlICsgJy4nKSA9PT0gMDtcbn1cblxuLyoqXG4gKiBSZXBsYWNlcyBhIHByZXZpb3VzIGJhc2UgcGF0aCB3aXRoIGEgbmV3IGJhc2UgcGF0aCwgcHJlc2VydmluZyB0aGVcbiAqIHJlbWFpbmRlciBvZiB0aGUgcGF0aC5cbiAqXG4gKiBVc2VyIG11c3QgZW5zdXJlIGBwYXRoYCBoYXMgYSBwcmVmaXggb2YgYGJhc2VgLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiB0cmFuc2xhdGUoJ2Zvby5iYXInLCAnem90JywgJ2Zvby5iYXIuYmF6JykgLy8gJ3pvdC5iYXonXG4gKiBgYGBcbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gYmFzZSBDdXJyZW50IGJhc2Ugc3RyaW5nIHRvIHJlbW92ZVxuICogQHBhcmFtIHtzdHJpbmd9IG5ld0Jhc2UgTmV3IGJhc2Ugc3RyaW5nIHRvIHJlcGxhY2Ugd2l0aFxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCB0byB0cmFuc2xhdGVcbiAqIEByZXR1cm4ge3N0cmluZ30gVHJhbnNsYXRlZCBzdHJpbmdcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRyYW5zbGF0ZShiYXNlLCBuZXdCYXNlLCBwYXRoKSB7XG4gIHJldHVybiBuZXdCYXNlICsgcGF0aC5zbGljZShiYXNlLmxlbmd0aCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGJhc2UgUGF0aCBzdHJpbmcgdG8gdGVzdCBhZ2FpbnN0XG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIHN0cmluZyB0byB0ZXN0XG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGBwYXRoYCBpcyBlcXVhbCB0byBgYmFzZWBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1hdGNoZXMoYmFzZSwgcGF0aCkge1xuICByZXR1cm4gKGJhc2UgPT09IHBhdGgpIHx8XG4gICAgICAgICBpc0FuY2VzdG9yKGJhc2UsIHBhdGgpIHx8XG4gICAgICAgICBpc0Rlc2NlbmRhbnQoYmFzZSwgcGF0aCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgYXJyYXktYmFzZWQgcGF0aHMgdG8gZmxhdHRlbmVkIHBhdGguICBTdHJpbmctYmFzZWQgcGF0aHNcbiAqIGFyZSByZXR1cm5lZCBhcy1pcy5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYFxuICogbm9ybWFsaXplKFsnZm9vLmJhcicsIDAsICdiYXonXSkgIC8vICdmb28uYmFyLjAuYmF6J1xuICogbm9ybWFsaXplKCdmb28uYmFyLjAuYmF6JykgICAgICAgIC8vICdmb28uYmFyLjAuYmF6J1xuICogYGBgXG4gKlxuICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHBhdGggSW5wdXQgcGF0aFxuICogQHJldHVybiB7c3RyaW5nfSBGbGF0dGVuZWQgcGF0aFxuICovXG5leHBvcnQgZnVuY3Rpb24gbm9ybWFsaXplKHBhdGgpIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkocGF0aCkpIHtcbiAgICBsZXQgcGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpPTA7IGk8cGF0aC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGFyZ3MgPSBwYXRoW2ldLnRvU3RyaW5nKCkuc3BsaXQoJy4nKTtcbiAgICAgIGZvciAobGV0IGo9MDsgajxhcmdzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYXJnc1tqXSk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cy5qb2luKCcuJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHBhdGg7XG4gIH1cbn1cblxuLyoqXG4gKiBTcGxpdHMgYSBwYXRoIGludG8gYW4gYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuIEFjY2VwdHMgZWl0aGVyIGFycmF5c1xuICogb2YgcGF0aCBwYXJ0cyBvciBzdHJpbmdzLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiBzcGxpdChbJ2Zvby5iYXInLCAwLCAnYmF6J10pICAvLyBbJ2ZvbycsICdiYXInLCAnMCcsICdiYXonXVxuICogc3BsaXQoJ2Zvby5iYXIuMC5iYXonKSAgICAgICAgLy8gWydmb28nLCAnYmFyJywgJzAnLCAnYmF6J11cbiAqIGBgYFxuICpcbiAqIEBwYXJhbSB7c3RyaW5nIHwgIUFycmF5PHN0cmluZ3xudW1iZXI+fSBwYXRoIElucHV0IHBhdGhcbiAqIEByZXR1cm4geyFBcnJheTxzdHJpbmc+fSBBcnJheSBvZiBwYXRoIHBhcnRzXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdChwYXRoKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHBhdGgpKSB7XG4gICAgcmV0dXJuIG5vcm1hbGl6ZShwYXRoKS5zcGxpdCgnLicpO1xuICB9XG4gIHJldHVybiBwYXRoLnRvU3RyaW5nKCkuc3BsaXQoJy4nKTtcbn1cblxuLyoqXG4gKiBSZWFkcyBhIHZhbHVlIGZyb20gYSBwYXRoLiAgSWYgYW55IHN1Yi1wcm9wZXJ0eSBpbiB0aGUgcGF0aCBpcyBgdW5kZWZpbmVkYCxcbiAqIHRoaXMgbWV0aG9kIHJldHVybnMgYHVuZGVmaW5lZGAgKHdpbGwgbmV2ZXIgdGhyb3cuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJvb3QgT2JqZWN0IGZyb20gd2hpY2ggdG8gZGVyZWZlcmVuY2UgcGF0aCBmcm9tXG4gKiBAcGFyYW0ge3N0cmluZyB8ICFBcnJheTxzdHJpbmd8bnVtYmVyPn0gcGF0aCBQYXRoIHRvIHJlYWRcbiAqIEBwYXJhbSB7T2JqZWN0PX0gaW5mbyBJZiBhbiBvYmplY3QgaXMgcHJvdmlkZWQgdG8gYGluZm9gLCB0aGUgbm9ybWFsaXplZFxuICogIChmbGF0dGVuZWQpIHBhdGggd2lsbCBiZSBzZXQgdG8gYGluZm8ucGF0aGAuXG4gKiBAcmV0dXJuIHsqfSBWYWx1ZSBhdCBwYXRoLCBvciBgdW5kZWZpbmVkYCBpZiB0aGUgcGF0aCBjb3VsZCBub3QgYmVcbiAqICBmdWxseSBkZXJlZmVyZW5jZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXQocm9vdCwgcGF0aCwgaW5mbykge1xuICBsZXQgcHJvcCA9IHJvb3Q7XG4gIGxldCBwYXJ0cyA9IHNwbGl0KHBhdGgpO1xuICAvLyBMb29wIG92ZXIgcGF0aCBwYXJ0c1swLi5uLTFdIGFuZCBkZXJlZmVyZW5jZVxuICBmb3IgKGxldCBpPTA7IGk8cGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoIXByb3ApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICBwcm9wID0gcHJvcFtwYXJ0XTtcbiAgfVxuICBpZiAoaW5mbykge1xuICAgIGluZm8ucGF0aCA9IHBhcnRzLmpvaW4oJy4nKTtcbiAgfVxuICByZXR1cm4gcHJvcDtcbn1cblxuLyoqXG4gKiBTZXRzIGEgdmFsdWUgdG8gYSBwYXRoLiAgSWYgYW55IHN1Yi1wcm9wZXJ0eSBpbiB0aGUgcGF0aCBpcyBgdW5kZWZpbmVkYCxcbiAqIHRoaXMgbWV0aG9kIHdpbGwgbm8tb3AuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHJvb3QgT2JqZWN0IGZyb20gd2hpY2ggdG8gZGVyZWZlcmVuY2UgcGF0aCBmcm9tXG4gKiBAcGFyYW0ge3N0cmluZyB8ICFBcnJheTxzdHJpbmd8bnVtYmVyPn0gcGF0aCBQYXRoIHRvIHNldFxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBzZXQgdG8gcGF0aFxuICogQHJldHVybiB7c3RyaW5nIHwgdW5kZWZpbmVkfSBUaGUgbm9ybWFsaXplZCB2ZXJzaW9uIG9mIHRoZSBpbnB1dCBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXQocm9vdCwgcGF0aCwgdmFsdWUpIHtcbiAgbGV0IHByb3AgPSByb290O1xuICBsZXQgcGFydHMgPSBzcGxpdChwYXRoKTtcbiAgbGV0IGxhc3QgPSBwYXJ0c1twYXJ0cy5sZW5ndGgtMV07XG4gIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgLy8gTG9vcCBvdmVyIHBhdGggcGFydHNbMC4ubi0yXSBhbmQgZGVyZWZlcmVuY2VcbiAgICBmb3IgKGxldCBpPTA7IGk8cGFydHMubGVuZ3RoLTE7IGkrKykge1xuICAgICAgbGV0IHBhcnQgPSBwYXJ0c1tpXTtcbiAgICAgIHByb3AgPSBwcm9wW3BhcnRdO1xuICAgICAgaWYgKCFwcm9wKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gU2V0IHZhbHVlIHRvIG9iamVjdCBhdCBlbmQgb2YgcGF0aFxuICAgIHByb3BbbGFzdF0gPSB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBTaW1wbGUgcHJvcGVydHkgc2V0XG4gICAgcHJvcFtwYXRoXSA9IHZhbHVlO1xuICB9XG4gIHJldHVybiBwYXJ0cy5qb2luKCcuJyk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBzdHJpbmcgaXMgYSBzdHJ1Y3R1cmVkIGRhdGEgcGF0aCAoaGFzIGRvdHMpLlxuICpcbiAqIFRoaXMgZnVuY3Rpb24gaXMgZGVwcmVjYXRlZC4gIFVzZSBgaXNQYXRoYCBpbnN0ZWFkLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogYGBgXG4gKiBpc0RlZXAoJ2Zvby5iYXIuYmF6JykgLy8gdHJ1ZVxuICogaXNEZWVwKCdmb28nKSAgICAgICAgIC8vIGZhbHNlXG4gKiBgYGBcbiAqXG4gKiBAZGVwcmVjYXRlZFxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggUGF0aCBzdHJpbmdcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHN0cmluZyBjb250YWluZWQgb25lIG9yIG1vcmUgZG90c1xuICovXG5leHBvcnQgY29uc3QgaXNEZWVwID0gaXNQYXRoO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbmNvbnN0IGNhc2VNYXAgPSB7fTtcbmNvbnN0IERBU0hfVE9fQ0FNRUwgPSAvLVthLXpdL2c7XG5jb25zdCBDQU1FTF9UT19EQVNIID0gLyhbQS1aXSkvZztcblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3IE1vZHVsZSB3aXRoIHV0aWxpdGllcyBmb3IgY29udmVydGluZyBiZXR3ZWVuIFwiZGFzaC1jYXNlXCIgYW5kXG4gKiBcImNhbWVsQ2FzZVwiIGlkZW50aWZpZXJzLlxuICovXG5cbi8qKlxuICogQ29udmVydHMgXCJkYXNoLWNhc2VcIiBpZGVudGlmaWVyIChlLmcuIGBmb28tYmFyLWJhemApIHRvIFwiY2FtZWxDYXNlXCJcbiAqIChlLmcuIGBmb29CYXJCYXpgKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZGFzaCBEYXNoLWNhc2UgaWRlbnRpZmllclxuICogQHJldHVybiB7c3RyaW5nfSBDYW1lbC1jYXNlIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBpZGVudGlmaWVyXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkYXNoVG9DYW1lbENhc2UoZGFzaCkge1xuICByZXR1cm4gY2FzZU1hcFtkYXNoXSB8fCAoXG4gICAgY2FzZU1hcFtkYXNoXSA9IGRhc2guaW5kZXhPZignLScpIDwgMCA/IGRhc2ggOiBkYXNoLnJlcGxhY2UoREFTSF9UT19DQU1FTCxcbiAgICAgIChtKSA9PiBtWzFdLnRvVXBwZXJDYXNlKClcbiAgICApXG4gICk7XG59XG5cbi8qKlxuICogQ29udmVydHMgXCJjYW1lbENhc2VcIiBpZGVudGlmaWVyIChlLmcuIGBmb29CYXJCYXpgKSB0byBcImRhc2gtY2FzZVwiXG4gKiAoZS5nLiBgZm9vLWJhci1iYXpgKS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gY2FtZWwgQ2FtZWwtY2FzZSBpZGVudGlmaWVyXG4gKiBAcmV0dXJuIHtzdHJpbmd9IERhc2gtY2FzZSByZXByZXNlbnRhdGlvbiBvZiB0aGUgaWRlbnRpZmllclxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FtZWxUb0Rhc2hDYXNlKGNhbWVsKSB7XG4gIHJldHVybiBjYXNlTWFwW2NhbWVsXSB8fCAoXG4gICAgY2FzZU1hcFtjYW1lbF0gPSBjYW1lbC5yZXBsYWNlKENBTUVMX1RPX0RBU0gsICctJDEnKS50b0xvd2VyQ2FzZSgpXG4gICk7XG59XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuLyoqXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKlxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgYSBudW1iZXIgb2Ygc3RyYXRlZ2llcyBmb3IgZW5xdWV1aW5nIGFzeW5jaHJvbm91c1xuICogdGFza3MuIEVhY2ggc3ViLW1vZHVsZSBwcm92aWRlcyBhIHN0YW5kYXJkIGBydW4oZm4pYCBpbnRlcmZhY2UgdGhhdCByZXR1cm5zIGFcbiAqIGhhbmRsZSwgYW5kIGEgYGNhbmNlbChoYW5kbGUpYCBpbnRlcmZhY2UgZm9yIGNhbmNlbGluZyBhc3luYyB0YXNrcyBiZWZvcmVcbiAqIHRoZXkgcnVuLlxuICpcbiAqIEBzdW1tYXJ5IE1vZHVsZSB0aGF0IHByb3ZpZGVzIGEgbnVtYmVyIG9mIHN0cmF0ZWdpZXMgZm9yIGVucXVldWluZ1xuICogYXN5bmNocm9ub3VzIHRhc2tzLlxuICovXG5cbmltcG9ydCAnLi9ib290LmpzJztcblxuLy8gTWljcm90YXNrIGltcGxlbWVudGVkIHVzaW5nIE11dGF0aW9uIE9ic2VydmVyXG5sZXQgbWljcm90YXNrQ3VyckhhbmRsZSA9IDA7XG5sZXQgbWljcm90YXNrTGFzdEhhbmRsZSA9IDA7XG5sZXQgbWljcm90YXNrQ2FsbGJhY2tzID0gW107XG5sZXQgbWljcm90YXNrTm9kZUNvbnRlbnQgPSAwO1xubGV0IG1pY3JvdGFza1NjaGVkdWxlZCA9IGZhbHNlO1xubGV0IG1pY3JvdGFza05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG5uZXcgd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXIobWljcm90YXNrRmx1c2gpLm9ic2VydmUobWljcm90YXNrTm9kZSwge2NoYXJhY3RlckRhdGE6IHRydWV9KTtcblxuZnVuY3Rpb24gbWljcm90YXNrRmx1c2goKSB7XG4gIG1pY3JvdGFza1NjaGVkdWxlZCA9IGZhbHNlO1xuICBjb25zdCBsZW4gPSBtaWNyb3Rhc2tDYWxsYmFja3MubGVuZ3RoO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgbGV0IGNiID0gbWljcm90YXNrQ2FsbGJhY2tzW2ldO1xuICAgIGlmIChjYikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7IHRocm93IGU7IH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBtaWNyb3Rhc2tDYWxsYmFja3Muc3BsaWNlKDAsIGxlbik7XG4gIG1pY3JvdGFza0xhc3RIYW5kbGUgKz0gbGVuO1xufVxuXG4vKipcbiAqIEFzeW5jIGludGVyZmFjZSB3cmFwcGVyIGFyb3VuZCBgc2V0VGltZW91dGAuXG4gKlxuICogQG5hbWVzcGFjZVxuICogQHN1bW1hcnkgQXN5bmMgaW50ZXJmYWNlIHdyYXBwZXIgYXJvdW5kIGBzZXRUaW1lb3V0YC5cbiAqL1xuY29uc3QgdGltZU91dCA9IHtcbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdWItbW9kdWxlIHdpdGggdGhlIGFzeW5jIGludGVyZmFjZSBwcm92aWRpbmcgdGhlIHByb3ZpZGVkXG4gICAqIGRlbGF5LlxuICAgKlxuICAgKiBAbWVtYmVyb2YgdGltZU91dFxuICAgKiBAcGFyYW0ge251bWJlcj19IGRlbGF5IFRpbWUgdG8gd2FpdCBiZWZvcmUgY2FsbGluZyBjYWxsYmFja3MgaW4gbXNcbiAgICogQHJldHVybiB7IUFzeW5jSW50ZXJmYWNlfSBBbiBhc3luYyB0aW1lb3V0IGludGVyZmFjZVxuICAgKi9cbiAgYWZ0ZXIoZGVsYXkpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcnVuKGZuKSB7IHJldHVybiB3aW5kb3cuc2V0VGltZW91dChmbiwgZGVsYXkpOyB9LFxuICAgICAgY2FuY2VsKGhhbmRsZSkge1xuICAgICAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfSxcbiAgLyoqXG4gICAqIEVucXVldWVzIGEgZnVuY3Rpb24gY2FsbGVkIGluIHRoZSBuZXh0IHRhc2suXG4gICAqXG4gICAqIEBtZW1iZXJvZiB0aW1lT3V0XG4gICAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBmbiBDYWxsYmFjayB0byBydW5cbiAgICogQHBhcmFtIHtudW1iZXI9fSBkZWxheSBEZWxheSBpbiBtaWxsaXNlY29uZHNcbiAgICogQHJldHVybiB7bnVtYmVyfSBIYW5kbGUgdXNlZCBmb3IgY2FuY2VsaW5nIHRhc2tcbiAgICovXG4gIHJ1bihmbiwgZGVsYXkpIHtcbiAgICByZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZm4sIGRlbGF5KTtcbiAgfSxcbiAgLyoqXG4gICAqIENhbmNlbHMgYSBwcmV2aW91c2x5IGVucXVldWVkIGB0aW1lT3V0YCBjYWxsYmFjay5cbiAgICpcbiAgICogQG1lbWJlcm9mIHRpbWVPdXRcbiAgICogQHBhcmFtIHtudW1iZXJ9IGhhbmRsZSBIYW5kbGUgcmV0dXJuZWQgZnJvbSBgcnVuYCBvZiBjYWxsYmFjayB0byBjYW5jZWxcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGNhbmNlbChoYW5kbGUpIHtcbiAgICB3aW5kb3cuY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gIH1cbn07XG5leHBvcnQge3RpbWVPdXR9O1xuXG4vKipcbiAqIEFzeW5jIGludGVyZmFjZSB3cmFwcGVyIGFyb3VuZCBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYC5cbiAqXG4gKiBAbmFtZXNwYWNlXG4gKiBAc3VtbWFyeSBBc3luYyBpbnRlcmZhY2Ugd3JhcHBlciBhcm91bmQgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAuXG4gKi9cbmNvbnN0IGFuaW1hdGlvbkZyYW1lID0ge1xuICAvKipcbiAgICogRW5xdWV1ZXMgYSBmdW5jdGlvbiBjYWxsZWQgYXQgYHJlcXVlc3RBbmltYXRpb25GcmFtZWAgdGltaW5nLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgYW5pbWF0aW9uRnJhbWVcbiAgICogQHBhcmFtIHtmdW5jdGlvbihudW1iZXIpOnZvaWR9IGZuIENhbGxiYWNrIHRvIHJ1blxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEhhbmRsZSB1c2VkIGZvciBjYW5jZWxpbmcgdGFza1xuICAgKi9cbiAgcnVuKGZuKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZm4pO1xuICB9LFxuICAvKipcbiAgICogQ2FuY2VscyBhIHByZXZpb3VzbHkgZW5xdWV1ZWQgYGFuaW1hdGlvbkZyYW1lYCBjYWxsYmFjay5cbiAgICpcbiAgICogQG1lbWJlcm9mIGFuaW1hdGlvbkZyYW1lXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGUgSGFuZGxlIHJldHVybmVkIGZyb20gYHJ1bmAgb2YgY2FsbGJhY2sgdG8gY2FuY2VsXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBjYW5jZWwoaGFuZGxlKSB7XG4gICAgd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lKGhhbmRsZSk7XG4gIH1cbn07XG5leHBvcnQge2FuaW1hdGlvbkZyYW1lfTtcblxuLyoqXG4gKiBBc3luYyBpbnRlcmZhY2Ugd3JhcHBlciBhcm91bmQgYHJlcXVlc3RJZGxlQ2FsbGJhY2tgLiAgRmFsbHMgYmFjayB0b1xuICogYHNldFRpbWVvdXRgIG9uIGJyb3dzZXJzIHRoYXQgZG8gbm90IHN1cHBvcnQgYHJlcXVlc3RJZGxlQ2FsbGJhY2tgLlxuICpcbiAqIEBuYW1lc3BhY2VcbiAqIEBzdW1tYXJ5IEFzeW5jIGludGVyZmFjZSB3cmFwcGVyIGFyb3VuZCBgcmVxdWVzdElkbGVDYWxsYmFja2AuXG4gKi9cbmNvbnN0IGlkbGVQZXJpb2QgPSB7XG4gIC8qKlxuICAgKiBFbnF1ZXVlcyBhIGZ1bmN0aW9uIGNhbGxlZCBhdCBgcmVxdWVzdElkbGVDYWxsYmFja2AgdGltaW5nLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgaWRsZVBlcmlvZFxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFJZGxlRGVhZGxpbmUpOnZvaWR9IGZuIENhbGxiYWNrIHRvIHJ1blxuICAgKiBAcmV0dXJuIHtudW1iZXJ9IEhhbmRsZSB1c2VkIGZvciBjYW5jZWxpbmcgdGFza1xuICAgKi9cbiAgcnVuKGZuKSB7XG4gICAgcmV0dXJuIHdpbmRvdy5yZXF1ZXN0SWRsZUNhbGxiYWNrID9cbiAgICAgIHdpbmRvdy5yZXF1ZXN0SWRsZUNhbGxiYWNrKGZuKSA6XG4gICAgICB3aW5kb3cuc2V0VGltZW91dChmbiwgMTYpO1xuICB9LFxuICAvKipcbiAgICogQ2FuY2VscyBhIHByZXZpb3VzbHkgZW5xdWV1ZWQgYGlkbGVQZXJpb2RgIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAbWVtYmVyb2YgaWRsZVBlcmlvZFxuICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlIEhhbmRsZSByZXR1cm5lZCBmcm9tIGBydW5gIG9mIGNhbGxiYWNrIHRvIGNhbmNlbFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgY2FuY2VsKGhhbmRsZSkge1xuICAgIHdpbmRvdy5jYW5jZWxJZGxlQ2FsbGJhY2sgP1xuICAgICAgd2luZG93LmNhbmNlbElkbGVDYWxsYmFjayhoYW5kbGUpIDpcbiAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQoaGFuZGxlKTtcbiAgfVxufTtcbmV4cG9ydCB7aWRsZVBlcmlvZH07XG5cbi8qKlxuICogQXN5bmMgaW50ZXJmYWNlIGZvciBlbnF1ZXVpbmcgY2FsbGJhY2tzIHRoYXQgcnVuIGF0IG1pY3JvdGFzayB0aW1pbmcuXG4gKlxuICogTm90ZSB0aGF0IG1pY3JvdGFzayB0aW1pbmcgaXMgYWNoaWV2ZWQgdmlhIGEgc2luZ2xlIGBNdXRhdGlvbk9ic2VydmVyYCxcbiAqIGFuZCB0aHVzIGNhbGxiYWNrcyBlbnF1ZXVlZCB3aXRoIHRoaXMgQVBJIHdpbGwgYWxsIHJ1biBpbiBhIHNpbmdsZVxuICogYmF0Y2gsIGFuZCBub3QgaW50ZXJsZWF2ZWQgd2l0aCBvdGhlciBtaWNyb3Rhc2tzIHN1Y2ggYXMgcHJvbWlzZXMuXG4gKiBQcm9taXNlcyBhcmUgYXZvaWRlZCBhcyBhbiBpbXBsZW1lbnRhdGlvbiBjaG9pY2UgZm9yIHRoZSB0aW1lIGJlaW5nXG4gKiBkdWUgdG8gU2FmYXJpIGJ1Z3MgdGhhdCBjYXVzZSBQcm9taXNlcyB0byBsYWNrIG1pY3JvdGFzayBndWFyYW50ZWVzLlxuICpcbiAqIEBuYW1lc3BhY2VcbiAqIEBzdW1tYXJ5IEFzeW5jIGludGVyZmFjZSBmb3IgZW5xdWV1aW5nIGNhbGxiYWNrcyB0aGF0IHJ1biBhdCBtaWNyb3Rhc2tcbiAqICAgdGltaW5nLlxuICovXG5jb25zdCBtaWNyb1Rhc2sgPSB7XG5cbiAgLyoqXG4gICAqIEVucXVldWVzIGEgZnVuY3Rpb24gY2FsbGVkIGF0IG1pY3JvdGFzayB0aW1pbmcuXG4gICAqXG4gICAqIEBtZW1iZXJvZiBtaWNyb1Rhc2tcbiAgICogQHBhcmFtIHshRnVuY3Rpb249fSBjYWxsYmFjayBDYWxsYmFjayB0byBydW5cbiAgICogQHJldHVybiB7bnVtYmVyfSBIYW5kbGUgdXNlZCBmb3IgY2FuY2VsaW5nIHRhc2tcbiAgICovXG4gIHJ1bihjYWxsYmFjaykge1xuICAgIGlmICghbWljcm90YXNrU2NoZWR1bGVkKSB7XG4gICAgICBtaWNyb3Rhc2tTY2hlZHVsZWQgPSB0cnVlO1xuICAgICAgbWljcm90YXNrTm9kZS50ZXh0Q29udGVudCA9IG1pY3JvdGFza05vZGVDb250ZW50Kys7XG4gICAgfVxuICAgIG1pY3JvdGFza0NhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcbiAgICByZXR1cm4gbWljcm90YXNrQ3VyckhhbmRsZSsrO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDYW5jZWxzIGEgcHJldmlvdXNseSBlbnF1ZXVlZCBgbWljcm9UYXNrYCBjYWxsYmFjay5cbiAgICpcbiAgICogQG1lbWJlcm9mIG1pY3JvVGFza1xuICAgKiBAcGFyYW0ge251bWJlcn0gaGFuZGxlIEhhbmRsZSByZXR1cm5lZCBmcm9tIGBydW5gIG9mIGNhbGxiYWNrIHRvIGNhbmNlbFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgY2FuY2VsKGhhbmRsZSkge1xuICAgIGNvbnN0IGlkeCA9IGhhbmRsZSAtIG1pY3JvdGFza0xhc3RIYW5kbGU7XG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICBpZiAoIW1pY3JvdGFza0NhbGxiYWNrc1tpZHhdKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignaW52YWxpZCBhc3luYyBoYW5kbGU6ICcgKyBoYW5kbGUpO1xuICAgICAgfVxuICAgICAgbWljcm90YXNrQ2FsbGJhY2tzW2lkeF0gPSBudWxsO1xuICAgIH1cbiAgfVxuXG59O1xuZXhwb3J0IHttaWNyb1Rhc2t9O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuXG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuaW1wb3J0IHsgbWljcm9UYXNrIH0gZnJvbSAnLi4vdXRpbHMvYXN5bmMuanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4uL3V0aWxzL3dyYXAuanMnO1xuXG4vKiogQGNvbnN0IHshQXN5bmNJbnRlcmZhY2V9ICovXG5jb25zdCBtaWNyb3Rhc2sgPSBtaWNyb1Rhc2s7XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IHByb3ZpZGVzIGJhc2ljIG1ldGEtcHJvZ3JhbW1pbmcgZm9yIGNyZWF0aW5nIG9uZVxuICogb3IgbW9yZSBwcm9wZXJ0eSBhY2Nlc3NvcnMgKGdldHRlci9zZXR0ZXIgcGFpcikgdGhhdCBlbnF1ZXVlIGFuIGFzeW5jXG4gKiAoYmF0Y2hlZCkgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2suXG4gKlxuICogRm9yIGJhc2ljIHVzYWdlIG9mIHRoaXMgbWl4aW4sIGNhbGwgYE15Q2xhc3MuY3JlYXRlUHJvcGVydGllcyhwcm9wcylgXG4gKiBvbmNlIGF0IGNsYXNzIGRlZmluaXRpb24gdGltZSB0byBjcmVhdGUgcHJvcGVydHkgYWNjZXNzb3JzIGZvciBwcm9wZXJ0aWVzXG4gKiBuYW1lZCBpbiBwcm9wcywgaW1wbGVtZW50IGBfcHJvcGVydGllc0NoYW5nZWRgIHRvIHJlYWN0IGFzIGRlc2lyZWQgdG9cbiAqIHByb3BlcnR5IGNoYW5nZXMsIGFuZCBpbXBsZW1lbnQgYHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKClgIGFuZFxuICogaW5jbHVkZSBsb3dlcmNhc2UgdmVyc2lvbnMgb2YgYW55IHByb3BlcnR5IG5hbWVzIHRoYXQgc2hvdWxkIGJlIHNldCBmcm9tXG4gKiBhdHRyaWJ1dGVzLiBMYXN0LCBjYWxsIGB0aGlzLl9lbmFibGVQcm9wZXJ0aWVzKClgIGluIHRoZSBlbGVtZW50J3NcbiAqIGBjb25uZWN0ZWRDYWxsYmFja2AgdG8gZW5hYmxlIHRoZSBhY2Nlc3NvcnMuXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIGZvciByZWFjdGluZyB0byBwcm9wZXJ0eSBjaGFuZ2VzIGZyb21cbiAqICAgZ2VuZXJhdGVkIHByb3BlcnR5IGFjY2Vzc29ycy5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZXJ0aWVzQ2hhbmdlZCA9IGRlZHVwaW5nTWl4aW4oXG4gICAgLyoqXG4gICAgICogQHRlbXBsYXRlIFRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAgICAgKiBAcmV0dXJuIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3Mgd2l0aCBtaXhpbiBhcHBsaWVkLlxuICAgICAqL1xuICAgIChzdXBlckNsYXNzKSA9PiB7XG5cbiAgLyoqXG4gICAqIEBwb2x5bWVyXG4gICAqIEBtaXhpbkNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX1Byb3BlcnRpZXNDaGFuZ2VkfVxuICAgKiBAdW5yZXN0cmljdGVkXG4gICAqL1xuICBjbGFzcyBQcm9wZXJ0aWVzQ2hhbmdlZCBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBwcm9wZXJ0eSBhY2Nlc3NvcnMgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eSBuYW1lcy5cbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IHByb3BzIE9iamVjdCB3aG9zZSBrZXlzIGFyZSBuYW1lcyBvZiBhY2Nlc3NvcnMuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgY3JlYXRlUHJvcGVydGllcyhwcm9wcykge1xuICAgICAgY29uc3QgcHJvdG8gPSB0aGlzLnByb3RvdHlwZTtcbiAgICAgIGZvciAobGV0IHByb3AgaW4gcHJvcHMpIHtcbiAgICAgICAgLy8gZG9uJ3Qgc3RvbXAgYW4gZXhpc3RpbmcgYWNjZXNzb3JcbiAgICAgICAgaWYgKCEocHJvcCBpbiBwcm90bykpIHtcbiAgICAgICAgICBwcm90by5fY3JlYXRlUHJvcGVydHlBY2Nlc3Nvcihwcm9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gYXR0cmlidXRlIG5hbWUgdGhhdCBjb3JyZXNwb25kcyB0byB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICogVGhlIGF0dHJpYnV0ZSBuYW1lIGlzIHRoZSBsb3dlcmNhc2VkIHByb3BlcnR5IG5hbWUuIE92ZXJyaWRlIHRvXG4gICAgICogY3VzdG9taXplIHRoaXMgbWFwcGluZy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgdG8gY29udmVydFxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gQXR0cmlidXRlIG5hbWUgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgYXR0cmlidXRlTmFtZUZvclByb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gcHJvcGVydHkudG9Mb3dlckNhc2UoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBwb2ludCB0byBwcm92aWRlIGEgdHlwZSB0byB3aGljaCB0byBkZXNlcmlhbGl6ZSBhIHZhbHVlIHRvXG4gICAgICogYSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIHByb3BlcnR5XG4gICAgICpcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgdHlwZUZvclByb3BlcnR5KG5hbWUpIHsgfSAvL2VzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzZXR0ZXIvZ2V0dGVyIHBhaXIgZm9yIHRoZSBuYW1lZCBwcm9wZXJ0eSB3aXRoIGl0cyBvd25cbiAgICAgKiBsb2NhbCBzdG9yYWdlLiAgVGhlIGdldHRlciByZXR1cm5zIHRoZSB2YWx1ZSBpbiB0aGUgbG9jYWwgc3RvcmFnZSxcbiAgICAgKiBhbmQgdGhlIHNldHRlciBjYWxscyBgX3NldFByb3BlcnR5YCwgd2hpY2ggdXBkYXRlcyB0aGUgbG9jYWwgc3RvcmFnZVxuICAgICAqIGZvciB0aGUgcHJvcGVydHkgYW5kIGVucXVldWVzIGEgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2suXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBtYXkgYmUgY2FsbGVkIG9uIGEgcHJvdG90eXBlIG9yIGFuIGluc3RhbmNlLiAgQ2FsbGluZ1xuICAgICAqIHRoaXMgbWV0aG9kIG1heSBvdmVyd3JpdGUgYSBwcm9wZXJ0eSB2YWx1ZSB0aGF0IGFscmVhZHkgZXhpc3RzIG9uXG4gICAgICogdGhlIHByb3RvdHlwZS9pbnN0YW5jZSBieSBjcmVhdGluZyB0aGUgYWNjZXNzb3IuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSByZWFkT25seSBXaGVuIHRydWUsIG5vIHNldHRlciBpcyBjcmVhdGVkOyB0aGVcbiAgICAgKiAgIHByb3RlY3RlZCBgX3NldFByb3BlcnR5YCBmdW5jdGlvbiBtdXN0IGJlIHVzZWQgdG8gc2V0IHRoZSBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKHByb3BlcnR5LCByZWFkT25seSkge1xuICAgICAgdGhpcy5fYWRkUHJvcGVydHlUb0F0dHJpYnV0ZU1hcChwcm9wZXJ0eSk7XG4gICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX19kYXRhSGFzQWNjZXNzb3InLCB0aGlzKSkpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFIYXNBY2Nlc3NvciA9IE9iamVjdC5hc3NpZ24oe30sIHRoaXMuX19kYXRhSGFzQWNjZXNzb3IpO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLl9fZGF0YUhhc0FjY2Vzc29yW3Byb3BlcnR5XSkge1xuICAgICAgICB0aGlzLl9fZGF0YUhhc0FjY2Vzc29yW3Byb3BlcnR5XSA9IHRydWU7XG4gICAgICAgIHRoaXMuX2RlZmluZVByb3BlcnR5QWNjZXNzb3IocHJvcGVydHksIHJlYWRPbmx5KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBnaXZlbiBgcHJvcGVydHlgIHRvIGEgbWFwIG1hdGNoaW5nIGF0dHJpYnV0ZSBuYW1lc1xuICAgICAqIHRvIHByb3BlcnR5IG5hbWVzLCB1c2luZyBgYXR0cmlidXRlTmFtZUZvclByb3BlcnR5YC4gVGhpcyBtYXAgaXNcbiAgICAgKiB1c2VkIHdoZW4gZGVzZXJpYWxpemluZyBhdHRyaWJ1dGUgdmFsdWVzIHRvIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfYWRkUHJvcGVydHlUb0F0dHJpYnV0ZU1hcChwcm9wZXJ0eSkge1xuICAgICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ19fZGF0YUF0dHJpYnV0ZXMnLCB0aGlzKSkpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFBdHRyaWJ1dGVzID0gT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5fX2RhdGFBdHRyaWJ1dGVzKTtcbiAgICAgIH1cbiAgICAgIC8vIFRoaXMgY2hlY2sgaXMgdGVjaG5pY2FsbHkgbm90IGNvcnJlY3Q7IGl0J3MgYW4gb3B0aW1pemF0aW9uIHRoYXRcbiAgICAgIC8vIGFzc3VtZXMgdGhhdCBpZiBhIF9wcm9wZXJ0eV8gbmFtZSBpcyBhbHJlYWR5IGluIHRoZSBtYXAgKG5vdGUgdGhpcyBpc1xuICAgICAgLy8gYW4gYXR0ci0+cHJvcGVydHkgbWFwKSwgdGhlIHByb3BlcnR5IG1hcHBlZCBkaXJlY3RseSB0byB0aGUgYXR0cmlidXRlXG4gICAgICAvLyBhbmQgaXQgaGFzIGFscmVhZHkgYmVlbiBtYXBwZWQuICBUaGlzIHdvdWxkIGZhaWwgaWZcbiAgICAgIC8vIGBhdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHlgIHdlcmUgb3ZlcnJpZGRlbiBzdWNoIHRoYXQgdGhpcyB3YXMgbm90IHRoZVxuICAgICAgLy8gY2FzZS5cbiAgICAgIGxldCBhdHRyID0gdGhpcy5fX2RhdGFBdHRyaWJ1dGVzW3Byb3BlcnR5XTtcbiAgICAgIGlmICghYXR0cikge1xuICAgICAgICBhdHRyID0gdGhpcy5jb25zdHJ1Y3Rvci5hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkocHJvcGVydHkpO1xuICAgICAgICB0aGlzLl9fZGF0YUF0dHJpYnV0ZXNbYXR0cl0gPSBwcm9wZXJ0eTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBhdHRyO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERlZmluZXMgYSBwcm9wZXJ0eSBhY2Nlc3NvciBmb3IgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlYWRPbmx5IFdoZW4gdHJ1ZSwgbm8gc2V0dGVyIGlzIGNyZWF0ZWRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgICBfZGVmaW5lUHJvcGVydHlBY2Nlc3Nvcihwcm9wZXJ0eSwgcmVhZE9ubHkpIHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBwcm9wZXJ0eSwge1xuICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuICAgICAgICAvKiogQHRoaXMge1Byb3BlcnRpZXNDaGFuZ2VkfSAqL1xuICAgICAgICBnZXQoKSB7XG4gICAgICAgICAgLy8gSW5saW5lIGZvciBwZXJmIGluc3RlYWQgb2YgdXNpbmcgYF9nZXRQcm9wZXJ0eWBcbiAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbcHJvcGVydHldO1xuICAgICAgICB9LFxuICAgICAgICAvKiogQHRoaXMge1Byb3BlcnRpZXNDaGFuZ2VkfSAqL1xuICAgICAgICBzZXQ6IHJlYWRPbmx5ID8gZnVuY3Rpb24gKCkge30gOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAvLyBJbmxpbmUgZm9yIHBlcmYgaW5zdGVhZCBvZiB1c2luZyBgX3NldFByb3BlcnR5YFxuICAgICAgICAgIGlmICh0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHkocHJvcGVydHksIHZhbHVlLCB0cnVlKSkge1xuICAgICAgICAgICAgdGhpcy5faW52YWxpZGF0ZVByb3BlcnRpZXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLyogZXNsaW50LWVuYWJsZSAqL1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xuICAgICAgdGhpcy5fX2RhdGFFbmFibGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9fZGF0YVJlYWR5ID0gZmFsc2U7XG4gICAgICB0aGlzLl9fZGF0YUludmFsaWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX19kYXRhID0ge307XG4gICAgICB0aGlzLl9fZGF0YVBlbmRpbmcgPSBudWxsO1xuICAgICAgdGhpcy5fX2RhdGFPbGQgPSBudWxsO1xuICAgICAgdGhpcy5fX2RhdGFJbnN0YW5jZVByb3BzID0gbnVsbDtcbiAgICAgIC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xuICAgICAgLy8gTk9URTogdXNlZCB0byB0cmFjayByZS1lbnRyYW50IGNhbGxzIHRvIGBfZmx1c2hQcm9wZXJ0aWVzYFxuICAgICAgdGhpcy5fX2RhdGFDb3VudGVyID0gMDtcbiAgICAgIHRoaXMuX19zZXJpYWxpemluZyA9IGZhbHNlO1xuICAgICAgdGhpcy5faW5pdGlhbGl6ZVByb3BlcnRpZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMaWZlY3ljbGUgY2FsbGJhY2sgY2FsbGVkIHdoZW4gcHJvcGVydGllcyBhcmUgZW5hYmxlZCB2aWFcbiAgICAgKiBgX2VuYWJsZVByb3BlcnRpZXNgLlxuICAgICAqXG4gICAgICogVXNlcnMgbWF5IG92ZXJyaWRlIHRoaXMgZnVuY3Rpb24gdG8gaW1wbGVtZW50IGJlaGF2aW9yIHRoYXQgaXNcbiAgICAgKiBkZXBlbmRlbnQgb24gdGhlIGVsZW1lbnQgaGF2aW5nIGl0cyBwcm9wZXJ0eSBkYXRhIGluaXRpYWxpemVkLCBlLmcuXG4gICAgICogZnJvbSBkZWZhdWx0cyAoaW5pdGlhbGl6ZWQgZnJvbSBgY29uc3RydWN0b3JgLCBgX2luaXRpYWxpemVQcm9wZXJ0aWVzYCksXG4gICAgICogYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AsIG9yIHZhbHVlcyBwcm9wYWdhdGVkIGZyb20gaG9zdCBlLmcuIHZpYVxuICAgICAqIGJpbmRpbmdzLiAgYHN1cGVyLnJlYWR5KClgIG11c3QgYmUgY2FsbGVkIHRvIGVuc3VyZSB0aGUgZGF0YSBzeXN0ZW1cbiAgICAgKiBiZWNvbWVzIGVuYWJsZWQuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICByZWFkeSgpIHtcbiAgICAgIHRoaXMuX19kYXRhUmVhZHkgPSB0cnVlO1xuICAgICAgdGhpcy5fZmx1c2hQcm9wZXJ0aWVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW5pdGlhbGl6ZXMgdGhlIGxvY2FsIHN0b3JhZ2UgZm9yIHByb3BlcnR5IGFjY2Vzc29ycy5cbiAgICAgKlxuICAgICAqIFByb3ZpZGVkIGFzIGFuIG92ZXJyaWRlIHBvaW50IGZvciBwZXJmb3JtaW5nIGFueSBzZXR1cCB3b3JrIHByaW9yXG4gICAgICogdG8gaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eSBhY2Nlc3NvciBzeXN0ZW0uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfaW5pdGlhbGl6ZVByb3BlcnRpZXMoKSB7XG4gICAgICAvLyBDYXB0dXJlIGluc3RhbmNlIHByb3BlcnRpZXM7IHRoZXNlIHdpbGwgYmUgc2V0IGludG8gYWNjZXNzb3JzXG4gICAgICAvLyBkdXJpbmcgZmlyc3QgZmx1c2guIERvbid0IHNldCB0aGVtIGhlcmUsIHNpbmNlIHdlIHdhbnRcbiAgICAgIC8vIHRoZXNlIHRvIG92ZXJ3cml0ZSBkZWZhdWx0cy9jb25zdHJ1Y3RvciBhc3NpZ25tZW50c1xuICAgICAgZm9yIChsZXQgcCBpbiB0aGlzLl9fZGF0YUhhc0FjY2Vzc29yKSB7XG4gICAgICAgIGlmICh0aGlzLmhhc093blByb3BlcnR5KHApKSB7XG4gICAgICAgICAgdGhpcy5fX2RhdGFJbnN0YW5jZVByb3BzID0gdGhpcy5fX2RhdGFJbnN0YW5jZVByb3BzIHx8IHt9O1xuICAgICAgICAgIHRoaXMuX19kYXRhSW5zdGFuY2VQcm9wc1twXSA9IHRoaXNbcF07XG4gICAgICAgICAgZGVsZXRlIHRoaXNbcF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgYXQgcmVhZHkgdGltZSB3aXRoIGJhZyBvZiBpbnN0YW5jZSBwcm9wZXJ0aWVzIHRoYXQgb3Zlcndyb3RlXG4gICAgICogYWNjZXNzb3JzIHdoZW4gdGhlIGVsZW1lbnQgdXBncmFkZWQuXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBzZXRzIHRoZXNlIHByb3BlcnRpZXMgYmFjayBpbnRvIHRoZVxuICAgICAqIHNldHRlciBhdCByZWFkeSB0aW1lLiAgVGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgYXMgYW4gb3ZlcnJpZGVcbiAgICAgKiBwb2ludCBmb3IgY3VzdG9taXppbmcgb3IgcHJvdmlkaW5nIG1vcmUgZWZmaWNpZW50IGluaXRpYWxpemF0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBwcm9wZXJ0eSB2YWx1ZXMgdGhhdCB3ZXJlIG92ZXJ3cml0dGVuXG4gICAgICogICB3aGVuIGNyZWF0aW5nIHByb3BlcnR5IGFjY2Vzc29ycy5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfaW5pdGlhbGl6ZUluc3RhbmNlUHJvcGVydGllcyhwcm9wcykge1xuICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLCBwcm9wcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgbG9jYWwgc3RvcmFnZSBmb3IgYSBwcm9wZXJ0eSAodmlhIGBfc2V0UGVuZGluZ1Byb3BlcnR5YClcbiAgICAgKiBhbmQgZW5xdWV1ZXMgYSBgX3Byb2VwcnRpZXNDaGFuZ2VkYCBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3NldFByb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSkge1xuICAgICAgaWYgKHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpKSB7XG4gICAgICAgIHRoaXMuX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdmFsdWUgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm4geyp9IFZhbHVlIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHlcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2dldFByb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5fX2RhdGFbcHJvcGVydHldO1xuICAgIH1cblxuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgbG9jYWwgc3RvcmFnZSBmb3IgYSBwcm9wZXJ0eSwgcmVjb3JkcyB0aGUgcHJldmlvdXMgdmFsdWUsXG4gICAgICogYW5kIGFkZHMgaXQgdG8gdGhlIHNldCBvZiBcInBlbmRpbmcgY2hhbmdlc1wiIHRoYXQgd2lsbCBiZSBwYXNzZWQgdG8gdGhlXG4gICAgICogYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2suICBUaGlzIG1ldGhvZCBkb2VzIG5vdCBlbnF1ZXVlIHRoZVxuICAgICAqIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBzZXRcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBleHQgTm90IHVzZWQgaGVyZTsgYWZmb3JkYW5jZSBmb3IgY2xvc3VyZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvcGVydHkgY2hhbmdlZFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfc2V0UGVuZGluZ1Byb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSwgZXh0KSB7XG4gICAgICBsZXQgb2xkID0gdGhpcy5fX2RhdGFbcHJvcGVydHldO1xuICAgICAgbGV0IGNoYW5nZWQgPSB0aGlzLl9zaG91bGRQcm9wZXJ0eUNoYW5nZShwcm9wZXJ0eSwgdmFsdWUsIG9sZCk7XG4gICAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgICBpZiAoIXRoaXMuX19kYXRhUGVuZGluZykge1xuICAgICAgICAgIHRoaXMuX19kYXRhUGVuZGluZyA9IHt9O1xuICAgICAgICAgIHRoaXMuX19kYXRhT2xkID0ge307XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW5zdXJlIG9sZCBpcyBjYXB0dXJlZCBmcm9tIHRoZSBsYXN0IHR1cm5cbiAgICAgICAgaWYgKHRoaXMuX19kYXRhT2xkICYmICEocHJvcGVydHkgaW4gdGhpcy5fX2RhdGFPbGQpKSB7XG4gICAgICAgICAgdGhpcy5fX2RhdGFPbGRbcHJvcGVydHldID0gb2xkO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19kYXRhW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICB0aGlzLl9fZGF0YVBlbmRpbmdbcHJvcGVydHldID0gdmFsdWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hhbmdlZDtcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSAqL1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgdGhlIHByb3BlcnR5XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBwcm9wZXJ0eSBpcyBwZW5kaW5nLlxuICAgICAqL1xuICAgIF9pc1Byb3BlcnR5UGVuZGluZyhwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuICEhKHRoaXMuX19kYXRhUGVuZGluZyAmJiB0aGlzLl9fZGF0YVBlbmRpbmcuaGFzT3duUHJvcGVydHkocHJvcGVydHkpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGUgcHJvcGVydGllcyBhcyBpbnZhbGlkLCBhbmQgZW5xdWV1ZXMgYW4gYXN5bmNcbiAgICAgKiBgX3Byb3BlcnRpZXNDaGFuZ2VkYCBjYWxsYmFjay5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9pbnZhbGlkYXRlUHJvcGVydGllcygpIHtcbiAgICAgIGlmICghdGhpcy5fX2RhdGFJbnZhbGlkICYmIHRoaXMuX19kYXRhUmVhZHkpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFJbnZhbGlkID0gdHJ1ZTtcbiAgICAgICAgbWljcm90YXNrLnJ1bigoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMuX19kYXRhSW52YWxpZCkge1xuICAgICAgICAgICAgdGhpcy5fX2RhdGFJbnZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgICB0aGlzLl9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGwgdG8gZW5hYmxlIHByb3BlcnR5IGFjY2Vzc29yIHByb2Nlc3NpbmcuIEJlZm9yZSB0aGlzIG1ldGhvZCBpc1xuICAgICAqIGNhbGxlZCBhY2Nlc3NvciB2YWx1ZXMgd2lsbCBiZSBzZXQgYnV0IHNpZGUgZWZmZWN0cyBhcmVcbiAgICAgKiBxdWV1ZWQuIFdoZW4gY2FsbGVkLCBhbnkgcGVuZGluZyBzaWRlIGVmZmVjdHMgb2NjdXIgaW1tZWRpYXRlbHkuXG4gICAgICogRm9yIGVsZW1lbnRzLCBnZW5lcmFsbHkgYGNvbm5lY3RlZENhbGxiYWNrYCBpcyBhIG5vcm1hbCBzcG90IHRvIGRvIHNvLlxuICAgICAqIEl0IGlzIHNhZmUgdG8gY2FsbCB0aGlzIG1ldGhvZCBtdWx0aXBsZSB0aW1lcyBhcyBpdCBvbmx5IHR1cm5zIG9uXG4gICAgICogcHJvcGVydHkgYWNjZXNzb3JzIG9uY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfZW5hYmxlUHJvcGVydGllcygpIHtcbiAgICAgIGlmICghdGhpcy5fX2RhdGFFbmFibGVkKSB7XG4gICAgICAgIHRoaXMuX19kYXRhRW5hYmxlZCA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9fZGF0YUluc3RhbmNlUHJvcHMpIHtcbiAgICAgICAgICB0aGlzLl9pbml0aWFsaXplSW5zdGFuY2VQcm9wZXJ0aWVzKHRoaXMuX19kYXRhSW5zdGFuY2VQcm9wcyk7XG4gICAgICAgICAgdGhpcy5fX2RhdGFJbnN0YW5jZVByb3BzID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlYWR5KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbHMgdGhlIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrIHdpdGggdGhlIGN1cnJlbnQgc2V0IG9mXG4gICAgICogcGVuZGluZyBjaGFuZ2VzIChhbmQgb2xkIHZhbHVlcyByZWNvcmRlZCB3aGVuIHBlbmRpbmcgY2hhbmdlcyB3ZXJlXG4gICAgICogc2V0KSwgYW5kIHJlc2V0cyB0aGUgcGVuZGluZyBzZXQgb2YgY2hhbmdlcy4gR2VuZXJhbGx5LCB0aGlzIG1ldGhvZFxuICAgICAqIHNob3VsZCBub3QgYmUgY2FsbGVkIGluIHVzZXIgY29kZS5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9mbHVzaFByb3BlcnRpZXMoKSB7XG4gICAgICB0aGlzLl9fZGF0YUNvdW50ZXIrKztcbiAgICAgIGNvbnN0IHByb3BzID0gdGhpcy5fX2RhdGE7XG4gICAgICBjb25zdCBjaGFuZ2VkUHJvcHMgPSB0aGlzLl9fZGF0YVBlbmRpbmc7XG4gICAgICBjb25zdCBvbGQgPSB0aGlzLl9fZGF0YU9sZDtcbiAgICAgIGlmICh0aGlzLl9zaG91bGRQcm9wZXJ0aWVzQ2hhbmdlKHByb3BzLCBjaGFuZ2VkUHJvcHMsIG9sZCkpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nID0gbnVsbDtcbiAgICAgICAgdGhpcy5fX2RhdGFPbGQgPSBudWxsO1xuICAgICAgICB0aGlzLl9wcm9wZXJ0aWVzQ2hhbmdlZChwcm9wcywgY2hhbmdlZFByb3BzLCBvbGQpO1xuICAgICAgfVxuICAgICAgdGhpcy5fX2RhdGFDb3VudGVyLS07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGluIGBfZmx1c2hQcm9wZXJ0aWVzYCB0byBkZXRlcm1pbmUgaWYgYF9wcm9wZXJ0aWVzQ2hhbmdlZGBcbiAgICAgKiBzaG91bGQgYmUgY2FsbGVkLiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiByZXR1cm5zIHRydWUgaWZcbiAgICAgKiBwcm9wZXJ0aWVzIGFyZSBwZW5kaW5nLiBPdmVycmlkZSB0byBjdXN0b21pemUgd2hlblxuICAgICAqIGBfcHJvcGVydGllc0NoYW5nZWRgIGlzIGNhbGxlZC5cbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IGN1cnJlbnRQcm9wcyBCYWcgb2YgYWxsIGN1cnJlbnQgYWNjZXNzb3IgdmFsdWVzXG4gICAgICogQHBhcmFtIHs/T2JqZWN0fSBjaGFuZ2VkUHJvcHMgQmFnIG9mIHByb3BlcnRpZXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdFxuICAgICAqICAgY2FsbCB0byBgX3Byb3BlcnRpZXNDaGFuZ2VkYFxuICAgICAqIEBwYXJhbSB7P09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgZWFjaCBwcm9wZXJ0eVxuICAgICAqICAgaW4gYGNoYW5nZWRQcm9wc2BcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSB0cnVlIGlmIGNoYW5nZWRQcm9wcyBpcyB0cnV0aHlcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfc2hvdWxkUHJvcGVydGllc0NoYW5nZShjdXJyZW50UHJvcHMsIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgcmV0dXJuIEJvb2xlYW4oY2hhbmdlZFByb3BzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsYmFjayBjYWxsZWQgd2hlbiBhbnkgcHJvcGVydGllcyB3aXRoIGFjY2Vzc29ycyBjcmVhdGVkIHZpYVxuICAgICAqIGBfY3JlYXRlUHJvcGVydHlBY2Nlc3NvcmAgaGF2ZSBiZWVuIHNldC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IU9iamVjdH0gY3VycmVudFByb3BzIEJhZyBvZiBhbGwgY3VycmVudCBhY2Nlc3NvciB2YWx1ZXNcbiAgICAgKiBAcGFyYW0gez9PYmplY3R9IGNoYW5nZWRQcm9wcyBCYWcgb2YgcHJvcGVydGllcyBjaGFuZ2VkIHNpbmNlIHRoZSBsYXN0XG4gICAgICogICBjYWxsIHRvIGBfcHJvcGVydGllc0NoYW5nZWRgXG4gICAgICogQHBhcmFtIHs/T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBlYWNoIHByb3BlcnR5XG4gICAgICogICBpbiBgY2hhbmdlZFByb3BzYFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9wcm9wZXJ0aWVzQ2hhbmdlZChjdXJyZW50UHJvcHMsIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE1ldGhvZCBjYWxsZWQgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBwcm9wZXJ0eSB2YWx1ZSBzaG91bGQgYmVcbiAgICAgKiBjb25zaWRlcmVkIGFzIGEgY2hhbmdlIGFuZCBjYXVzZSB0aGUgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2tcbiAgICAgKiB0byBiZSBlbnF1ZXVlZC5cbiAgICAgKlxuICAgICAqIFRoZSBkZWZhdWx0IGltcGxlbWVudGF0aW9uIHJldHVybnMgYHRydWVgIGlmIGEgc3RyaWN0IGVxdWFsaXR5XG4gICAgICogY2hlY2sgZmFpbHMuIFRoZSBtZXRob2QgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGBOYU5gLlxuICAgICAqXG4gICAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gZS5nLiBwcm92aWRlIHN0cmljdGVyIGNoZWNraW5nIGZvclxuICAgICAqIE9iamVjdHMvQXJyYXlzIHdoZW4gdXNpbmcgaW1tdXRhYmxlIHBhdHRlcm5zLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Kn0gb2xkIFByZXZpb3VzIHByb3BlcnR5IHZhbHVlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcHJvcGVydHkgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBjaGFuZ2VcbiAgICAgKiAgIGFuZCBlbnF1ZXVlIGEgYF9wcm9lcHJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2tcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3Nob3VsZFByb3BlcnR5Q2hhbmdlKHByb3BlcnR5LCB2YWx1ZSwgb2xkKSB7XG4gICAgICByZXR1cm4gKFxuICAgICAgICAvLyBTdHJpY3QgZXF1YWxpdHkgY2hlY2tcbiAgICAgICAgKG9sZCAhPT0gdmFsdWUgJiZcbiAgICAgICAgICAvLyBUaGlzIGVuc3VyZXMgKG9sZD09TmFOLCB2YWx1ZT09TmFOKSBhbHdheXMgcmV0dXJucyBmYWxzZVxuICAgICAgICAgIChvbGQgPT09IG9sZCB8fCB2YWx1ZSA9PT0gdmFsdWUpKVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIG5hdGl2ZSBDdXN0b20gRWxlbWVudHMgYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AgdG9cbiAgICAgKiBzZXQgYW4gYXR0cmlidXRlIHZhbHVlIHRvIGEgcHJvcGVydHkgdmlhIGBfYXR0cmlidXRlVG9Qcm9wZXJ0eWAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBOYW1lIG9mIGF0dHJpYnV0ZSB0aGF0IGNoYW5nZWRcbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IG9sZCBPbGQgYXR0cmlidXRlIHZhbHVlXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBOZXcgYXR0cmlidXRlIHZhbHVlXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBuYW1lc3BhY2UgQXR0cmlidXRlIG5hbWVzcGFjZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IFN1cGVyIG1heSBvciBtYXkgbm90IGltcGxlbWVudCB0aGUgY2FsbGJhY2tcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkLCB2YWx1ZSwgbmFtZXNwYWNlKSB7XG4gICAgICBpZiAob2xkICE9PSB2YWx1ZSkge1xuICAgICAgICB0aGlzLl9hdHRyaWJ1dGVUb1Byb3BlcnR5KG5hbWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdXBlci5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgdmFsdWUsIG5hbWVzcGFjZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzZXJpYWxpemVzIGFuIGF0dHJpYnV0ZSB0byBpdHMgYXNzb2NpYXRlZCBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGNhbGxzIHRoZSBgX2Rlc2VyaWFsaXplVmFsdWVgIG1ldGhvZCB0byBjb252ZXJ0IHRoZSBzdHJpbmcgdG9cbiAgICAgKiBhIHR5cGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZSBOYW1lIG9mIGF0dHJpYnV0ZSB0byBkZXNlcmlhbGl6ZS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IHZhbHVlIG9mIHRoZSBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHsqPX0gdHlwZSB0eXBlIHRvIGRlc2VyaWFsaXplIHRvLCBkZWZhdWx0cyB0byB0aGUgdmFsdWVcbiAgICAgKiByZXR1cm5lZCBmcm9tIGB0eXBlRm9yUHJvcGVydHlgXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfYXR0cmlidXRlVG9Qcm9wZXJ0eShhdHRyaWJ1dGUsIHZhbHVlLCB0eXBlKSB7XG4gICAgICBpZiAoIXRoaXMuX19zZXJpYWxpemluZykge1xuICAgICAgICBjb25zdCBtYXAgPSB0aGlzLl9fZGF0YUF0dHJpYnV0ZXM7XG4gICAgICAgIGNvbnN0IHByb3BlcnR5ID0gbWFwICYmIG1hcFthdHRyaWJ1dGVdIHx8IGF0dHJpYnV0ZTtcbiAgICAgICAgdGhpc1twcm9wZXJ0eV0gPSB0aGlzLl9kZXNlcmlhbGl6ZVZhbHVlKHZhbHVlLCB0eXBlIHx8XG4gICAgICAgICAgdGhpcy5jb25zdHJ1Y3Rvci50eXBlRm9yUHJvcGVydHkocHJvcGVydHkpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXJpYWxpemVzIGEgcHJvcGVydHkgdG8gaXRzIGFzc29jaWF0ZWQgYXR0cmlidXRlLlxuICAgICAqXG4gICAgICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9IENsb3N1cmUgY2FuJ3QgZmlndXJlIG91dCBgdGhpc2AgaXMgYW4gZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lIHRvIHJlZmxlY3QuXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBhdHRyaWJ1dGUgQXR0cmlidXRlIG5hbWUgdG8gcmVmbGVjdCB0by5cbiAgICAgKiBAcGFyYW0geyo9fSB2YWx1ZSBQcm9wZXJ0eSB2YWx1ZSB0byByZWZlY3QuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfcHJvcGVydHlUb0F0dHJpYnV0ZShwcm9wZXJ0eSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgICAgdGhpcy5fX3NlcmlhbGl6aW5nID0gdHJ1ZTtcbiAgICAgIHZhbHVlID0gKGFyZ3VtZW50cy5sZW5ndGggPCAzKSA/IHRoaXNbcHJvcGVydHldIDogdmFsdWU7XG4gICAgICB0aGlzLl92YWx1ZVRvTm9kZUF0dHJpYnV0ZSgvKiogQHR5cGUgeyFIVE1MRWxlbWVudH0gKi8odGhpcyksIHZhbHVlLFxuICAgICAgICBhdHRyaWJ1dGUgfHwgdGhpcy5jb25zdHJ1Y3Rvci5hdHRyaWJ1dGVOYW1lRm9yUHJvcGVydHkocHJvcGVydHkpKTtcbiAgICAgIHRoaXMuX19zZXJpYWxpemluZyA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgYSB0eXBlZCB2YWx1ZSB0byBhbiBIVE1MIGF0dHJpYnV0ZSBvbiBhIG5vZGUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBjYWxscyB0aGUgYF9zZXJpYWxpemVWYWx1ZWAgbWV0aG9kIHRvIGNvbnZlcnQgdGhlIHR5cGVkXG4gICAgICogdmFsdWUgdG8gYSBzdHJpbmcuICBJZiB0aGUgYF9zZXJpYWxpemVWYWx1ZWAgbWV0aG9kIHJldHVybnMgYHVuZGVmaW5lZGAsXG4gICAgICogdGhlIGF0dHJpYnV0ZSB3aWxsIGJlIHJlbW92ZWQgKHRoaXMgaXMgdGhlIGRlZmF1bHQgZm9yIGJvb2xlYW5cbiAgICAgKiB0eXBlIGBmYWxzZWApLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlIEVsZW1lbnQgdG8gc2V0IGF0dHJpYnV0ZSB0by5cbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNlcmlhbGl6ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlIEF0dHJpYnV0ZSBuYW1lIHRvIHNlcmlhbGl6ZSB0by5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF92YWx1ZVRvTm9kZUF0dHJpYnV0ZShub2RlLCB2YWx1ZSwgYXR0cmlidXRlKSB7XG4gICAgICBjb25zdCBzdHIgPSB0aGlzLl9zZXJpYWxpemVWYWx1ZSh2YWx1ZSk7XG4gICAgICBpZiAoYXR0cmlidXRlID09PSAnY2xhc3MnIHx8IGF0dHJpYnV0ZSA9PT0gJ25hbWUnIHx8IGF0dHJpYnV0ZSA9PT0gJ3Nsb3QnKSB7XG4gICAgICAgIG5vZGUgPSAvKiogQHR5cGUgez9FbGVtZW50fSAqLyh3cmFwKG5vZGUpKTtcbiAgICAgIH1cbiAgICAgIGlmIChzdHIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShhdHRyaWJ1dGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUoYXR0cmlidXRlLCBzdHIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgdHlwZWQgSmF2YVNjcmlwdCB2YWx1ZSB0byBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHNldHRpbmcgSlMgcHJvcGVydHkgdmFsdWVzIHRvXG4gICAgICogSFRNTCBhdHRyaWJ1dGVzLiAgVXNlcnMgbWF5IG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHByb3ZpZGVcbiAgICAgKiBzZXJpYWxpemF0aW9uIGZvciBjdXN0b20gdHlwZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFByb3BlcnR5IHZhbHVlIHRvIHNlcmlhbGl6ZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmcgfCB1bmRlZmluZWR9IFN0cmluZyBzZXJpYWxpemVkIGZyb20gdGhlIHByb3ZpZGVkXG4gICAgICogcHJvcGVydHkgIHZhbHVlLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9zZXJpYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSAnYm9vbGVhbic6XG4gICAgICAgICAgcmV0dXJuIHZhbHVlID8gJycgOiB1bmRlZmluZWQ7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyB2YWx1ZS50b1N0cmluZygpIDogdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgc3RyaW5nIHRvIGEgdHlwZWQgSmF2YVNjcmlwdCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIGNhbGxlZCB3aGVuIHJlYWRpbmcgSFRNTCBhdHRyaWJ1dGUgdmFsdWVzIHRvXG4gICAgICogSlMgcHJvcGVydGllcy4gIFVzZXJzIG1heSBvdmVycmlkZSB0aGlzIG1ldGhvZCB0byBwcm92aWRlXG4gICAgICogZGVzZXJpYWxpemF0aW9uIGZvciBjdXN0b20gYHR5cGVgcy4gVHlwZXMgZm9yIGBCb29sZWFuYCwgYFN0cmluZ2AsXG4gICAgICogYW5kIGBOdW1iZXJgIGNvbnZlcnQgYXR0cmlidXRlcyB0byB0aGUgZXhwZWN0ZWQgdHlwZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IHZhbHVlIFZhbHVlIHRvIGRlc2VyaWFsaXplLlxuICAgICAqIEBwYXJhbSB7Kj19IHR5cGUgVHlwZSB0byBkZXNlcmlhbGl6ZSB0aGUgc3RyaW5nIHRvLlxuICAgICAqIEByZXR1cm4geyp9IFR5cGVkIHZhbHVlIGRlc2VyaWFsaXplZCBmcm9tIHRoZSBwcm92aWRlZCBzdHJpbmcuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2Rlc2VyaWFsaXplVmFsdWUodmFsdWUsIHR5cGUpIHtcbiAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICBjYXNlIEJvb2xlYW46XG4gICAgICAgICAgcmV0dXJuICh2YWx1ZSAhPT0gbnVsbCk7XG4gICAgICAgIGNhc2UgTnVtYmVyOlxuICAgICAgICAgIHJldHVybiBOdW1iZXIodmFsdWUpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBQcm9wZXJ0aWVzQ2hhbmdlZDtcbn0pO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuXG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuaW1wb3J0IHsgY2FtZWxUb0Rhc2hDYXNlLCBkYXNoVG9DYW1lbENhc2UgfSBmcm9tICcuLi91dGlscy9jYXNlLW1hcC5qcyc7XG5pbXBvcnQgeyBQcm9wZXJ0aWVzQ2hhbmdlZCB9IGZyb20gJy4vcHJvcGVydGllcy1jaGFuZ2VkLmpzJztcblxuLy8gU2F2ZSBtYXAgb2YgbmF0aXZlIHByb3BlcnRpZXM7IHRoaXMgZm9ybXMgYSBibGFja2xpc3Qgb3IgcHJvcGVydGllc1xuLy8gdGhhdCB3b24ndCBoYXZlIHRoZWlyIHZhbHVlcyBcInNhdmVkXCIgYnkgYHNhdmVBY2Nlc3NvclZhbHVlYCwgc2luY2Vcbi8vIHJlYWRpbmcgZnJvbSBhbiBIVE1MRWxlbWVudCBhY2Nlc3NvciBmcm9tIHRoZSBjb250ZXh0IG9mIGEgcHJvdG90eXBlIHRocm93c1xuY29uc3QgbmF0aXZlUHJvcGVydGllcyA9IHt9O1xubGV0IHByb3RvID0gSFRNTEVsZW1lbnQucHJvdG90eXBlO1xud2hpbGUgKHByb3RvKSB7XG4gIGxldCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHByb3RvKTtcbiAgZm9yIChsZXQgaT0wOyBpPHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgbmF0aXZlUHJvcGVydGllc1twcm9wc1tpXV0gPSB0cnVlO1xuICB9XG4gIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHByb3RvKTtcbn1cblxuLyoqXG4gKiBVc2VkIHRvIHNhdmUgdGhlIHZhbHVlIG9mIGEgcHJvcGVydHkgdGhhdCB3aWxsIGJlIG92ZXJyaWRkZW4gd2l0aFxuICogYW4gYWNjZXNzb3IuIElmIHRoZSBgbW9kZWxgIGlzIGEgcHJvdG90eXBlLCB0aGUgdmFsdWVzIHdpbGwgYmUgc2F2ZWRcbiAqIGluIGBfX2RhdGFQcm90b2AsIGFuZCBpdCdzIHVwIHRvIHRoZSB1c2VyIChvciBkb3duc3RyZWFtIG1peGluKSB0b1xuICogZGVjaWRlIGhvdy93aGVuIHRvIHNldCB0aGVzZSB2YWx1ZXMgYmFjayBpbnRvIHRoZSBhY2Nlc3NvcnMuXG4gKiBJZiBgbW9kZWxgIGlzIGFscmVhZHkgYW4gaW5zdGFuY2UgKGl0IGhhcyBhIGBfX2RhdGFgIHByb3BlcnR5KSwgdGhlblxuICogdGhlIHZhbHVlIHdpbGwgYmUgc2V0IGFzIGEgcGVuZGluZyBwcm9wZXJ0eSwgbWVhbmluZyB0aGUgdXNlciBzaG91bGRcbiAqIGNhbGwgYF9pbnZhbGlkYXRlUHJvcGVydGllc2Agb3IgYF9mbHVzaFByb3BlcnRpZXNgIHRvIHRha2UgZWZmZWN0XG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG1vZGVsIFByb3RvdHlwZSBvciBpbnN0YW5jZVxuICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IE5hbWUgb2YgcHJvcGVydHlcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBzYXZlQWNjZXNzb3JWYWx1ZShtb2RlbCwgcHJvcGVydHkpIHtcbiAgLy8gRG9uJ3QgcmVhZC9zdG9yZSB2YWx1ZSBmb3IgYW55IG5hdGl2ZSBwcm9wZXJ0aWVzIHNpbmNlIHRoZXkgY291bGQgdGhyb3dcbiAgaWYgKCFuYXRpdmVQcm9wZXJ0aWVzW3Byb3BlcnR5XSkge1xuICAgIGxldCB2YWx1ZSA9IG1vZGVsW3Byb3BlcnR5XTtcbiAgICBpZiAodmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKG1vZGVsLl9fZGF0YSkge1xuICAgICAgICAvLyBBZGRpbmcgYWNjZXNzb3IgdG8gaW5zdGFuY2U7IHVwZGF0ZSB0aGUgcHJvcGVydHlcbiAgICAgICAgLy8gSXQgaXMgdGhlIHVzZXIncyByZXNwb25zaWJpbGl0eSB0byBjYWxsIF9mbHVzaFByb3BlcnRpZXNcbiAgICAgICAgbW9kZWwuX3NldFBlbmRpbmdQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWRkaW5nIGFjY2Vzc29yIHRvIHByb3RvOyBzYXZlIHByb3RvJ3MgdmFsdWUgZm9yIGluc3RhbmNlLXRpbWUgdXNlXG4gICAgICAgIGlmICghbW9kZWwuX19kYXRhUHJvdG8pIHtcbiAgICAgICAgICBtb2RlbC5fX2RhdGFQcm90byA9IHt9O1xuICAgICAgICB9IGVsc2UgaWYgKCFtb2RlbC5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX2RhdGFQcm90bycsIG1vZGVsKSkpIHtcbiAgICAgICAgICBtb2RlbC5fX2RhdGFQcm90byA9IE9iamVjdC5jcmVhdGUobW9kZWwuX19kYXRhUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIG1vZGVsLl9fZGF0YVByb3RvW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVsZW1lbnQgY2xhc3MgbWl4aW4gdGhhdCBwcm92aWRlcyBiYXNpYyBtZXRhLXByb2dyYW1taW5nIGZvciBjcmVhdGluZyBvbmVcbiAqIG9yIG1vcmUgcHJvcGVydHkgYWNjZXNzb3JzIChnZXR0ZXIvc2V0dGVyIHBhaXIpIHRoYXQgZW5xdWV1ZSBhbiBhc3luY1xuICogKGJhdGNoZWQpIGBfcHJvcGVydGllc0NoYW5nZWRgIGNhbGxiYWNrLlxuICpcbiAqIEZvciBiYXNpYyB1c2FnZSBvZiB0aGlzIG1peGluOlxuICpcbiAqIC0gICBEZWNsYXJlIGF0dHJpYnV0ZXMgdG8gb2JzZXJ2ZSB2aWEgdGhlIHN0YW5kYXJkIGBzdGF0aWMgZ2V0XG4gKiAgICAgb2JzZXJ2ZWRBdHRyaWJ1dGVzKClgLiBVc2UgYGRhc2gtY2FzZWAgYXR0cmlidXRlIG5hbWVzIHRvIHJlcHJlc2VudFxuICogICAgIGBjYW1lbENhc2VgIHByb3BlcnR5IG5hbWVzLlxuICogLSAgIEltcGxlbWVudCB0aGUgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgY2FsbGJhY2sgb24gdGhlIGNsYXNzLlxuICogLSAgIENhbGwgYE15Q2xhc3MuY3JlYXRlUHJvcGVydGllc0ZvckF0dHJpYnV0ZXMoKWAgKipvbmNlKiogb24gdGhlIGNsYXNzIHRvXG4gKiAgICAgZ2VuZXJhdGUgcHJvcGVydHkgYWNjZXNzb3JzIGZvciBlYWNoIG9ic2VydmVkIGF0dHJpYnV0ZS4gVGhpcyBtdXN0IGJlXG4gKiAgICAgY2FsbGVkIGJlZm9yZSB0aGUgZmlyc3QgaW5zdGFuY2UgaXMgY3JlYXRlZCwgZm9yIGV4YW1wbGUsIGJ5IGNhbGxpbmcgaXRcbiAqICAgICBiZWZvcmUgY2FsbGluZyBgY3VzdG9tRWxlbWVudHMuZGVmaW5lYC4gSXQgY2FuIGFsc28gYmUgY2FsbGVkIGxhemlseSBmcm9tXG4gKiAgICAgdGhlIGVsZW1lbnQncyBgY29uc3RydWN0b3JgLCBhcyBsb25nIGFzIGl0J3MgZ3VhcmRlZCBzbyB0aGF0IHRoZSBjYWxsIGlzXG4gKiAgICAgb25seSBtYWRlIG9uY2UsIHdoZW4gdGhlIGZpcnN0IGluc3RhbmNlIGlzIGNyZWF0ZWQuXG4gKiAtICAgQ2FsbCBgdGhpcy5fZW5hYmxlUHJvcGVydGllcygpYCBpbiB0aGUgZWxlbWVudCdzIGBjb25uZWN0ZWRDYWxsYmFja2AgdG9cbiAqICAgICBlbmFibGUgdGhlIGFjY2Vzc29ycy5cbiAqXG4gKiBBbnkgYG9ic2VydmVkQXR0cmlidXRlc2Agd2lsbCBhdXRvbWF0aWNhbGx5IGJlXG4gKiBkZXNlcmlhbGl6ZWQgdmlhIGBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tgIGFuZCBzZXQgdG8gdGhlIGFzc29jaWF0ZWRcbiAqIHByb3BlcnR5IHVzaW5nIGBkYXNoLWNhc2VgLXRvLWBjYW1lbENhc2VgIGNvbnZlbnRpb24uXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAYXBwbGllc01peGluIFByb3BlcnRpZXNDaGFuZ2VkXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIGZvciByZWFjdGluZyB0byBwcm9wZXJ0eSBjaGFuZ2VzIGZyb21cbiAqICAgZ2VuZXJhdGVkIHByb3BlcnR5IGFjY2Vzc29ycy5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZXJ0eUFjY2Vzc29ycyA9IGRlZHVwaW5nTWl4aW4oc3VwZXJDbGFzcyA9PiB7XG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0aWVzQ2hhbmdlZH1cbiAgICogQHVucmVzdHJpY3RlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgIGNvbnN0IGJhc2UgPSBQcm9wZXJ0aWVzQ2hhbmdlZChzdXBlckNsYXNzKTtcblxuICAvKipcbiAgICogQHBvbHltZXJcbiAgICogQG1peGluQ2xhc3NcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydHlBY2Nlc3NvcnN9XG4gICAqIEBleHRlbmRzIHtiYXNlfVxuICAgKiBAdW5yZXN0cmljdGVkXG4gICAqL1xuICBjbGFzcyBQcm9wZXJ0eUFjY2Vzc29ycyBleHRlbmRzIGJhc2Uge1xuXG4gICAgLyoqXG4gICAgICogR2VuZXJhdGVzIHByb3BlcnR5IGFjY2Vzc29ycyBmb3IgYWxsIGF0dHJpYnV0ZXMgaW4gdGhlIHN0YW5kYXJkXG4gICAgICogc3RhdGljIGBvYnNlcnZlZEF0dHJpYnV0ZXNgIGFycmF5LlxuICAgICAqXG4gICAgICogQXR0cmlidXRlIG5hbWVzIGFyZSBtYXBwZWQgdG8gcHJvcGVydHkgbmFtZXMgdXNpbmcgdGhlIGBkYXNoLWNhc2VgIHRvXG4gICAgICogYGNhbWVsQ2FzZWAgY29udmVudGlvblxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQcm9wZXJ0aWVzRm9yQXR0cmlidXRlcygpIHtcbiAgICAgIGxldCBhJCA9ICAvKiogQHR5cGUgez99ICovICh0aGlzKS5vYnNlcnZlZEF0dHJpYnV0ZXM7XG4gICAgICBmb3IgKGxldCBpPTA7IGkgPCBhJC5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnByb3RvdHlwZS5fY3JlYXRlUHJvcGVydHlBY2Nlc3NvcihkYXNoVG9DYW1lbENhc2UoYSRbaV0pKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGF0dHJpYnV0ZSBuYW1lIHRoYXQgY29ycmVzcG9uZHMgdG8gdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqIEJ5IGRlZmF1bHQsIGNvbnZlcnRzIGNhbWVsIHRvIGRhc2ggY2FzZSwgZS5nLiBgZm9vQmFyYCB0byBgZm9vLWJhcmAuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IHRvIGNvbnZlcnRcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEF0dHJpYnV0ZSBuYW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGF0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIGNhbWVsVG9EYXNoQ2FzZShwcm9wZXJ0eSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIFByb3BlcnRpZXNDaGFuZ2VkIGltcGxlbWVudGF0aW9uIHRvIGluaXRpYWxpemUgdmFsdWVzIGZvclxuICAgICAqIGFjY2Vzc29ycyBjcmVhdGVkIGZvciB2YWx1ZXMgdGhhdCBhbHJlYWR5IGV4aXN0ZWQgb24gdGhlIGVsZW1lbnRcbiAgICAgKiBwcm90b3R5cGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfaW5pdGlhbGl6ZVByb3BlcnRpZXMoKSB7XG4gICAgICBpZiAodGhpcy5fX2RhdGFQcm90bykge1xuICAgICAgICB0aGlzLl9pbml0aWFsaXplUHJvdG9Qcm9wZXJ0aWVzKHRoaXMuX19kYXRhUHJvdG8pO1xuICAgICAgICB0aGlzLl9fZGF0YVByb3RvID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIHN1cGVyLl9pbml0aWFsaXplUHJvcGVydGllcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbGxlZCBhdCBpbnN0YW5jZSB0aW1lIHdpdGggYmFnIG9mIHByb3BlcnRpZXMgdGhhdCB3ZXJlIG92ZXJ3cml0dGVuXG4gICAgICogYnkgYWNjZXNzb3JzIG9uIHRoZSBwcm90b3R5cGUgd2hlbiBhY2Nlc3NvcnMgd2VyZSBjcmVhdGVkLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gc2V0cyB0aGVzZSBwcm9wZXJ0aWVzIGJhY2sgaW50byB0aGVcbiAgICAgKiBzZXR0ZXIgYXQgaW5zdGFuY2UgdGltZS4gIFRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGFzIGFuIG92ZXJyaWRlXG4gICAgICogcG9pbnQgZm9yIGN1c3RvbWl6aW5nIG9yIHByb3ZpZGluZyBtb3JlIGVmZmljaWVudCBpbml0aWFsaXphdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBCYWcgb2YgcHJvcGVydHkgdmFsdWVzIHRoYXQgd2VyZSBvdmVyd3JpdHRlblxuICAgICAqICAgd2hlbiBjcmVhdGluZyBwcm9wZXJ0eSBhY2Nlc3NvcnMuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2luaXRpYWxpemVQcm90b1Byb3BlcnRpZXMocHJvcHMpIHtcbiAgICAgIGZvciAobGV0IHAgaW4gcHJvcHMpIHtcbiAgICAgICAgdGhpcy5fc2V0UHJvcGVydHkocCwgcHJvcHNbcF0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhlIGVsZW1lbnQgaGFzIHRoZSBnaXZlbiBhdHRyaWJ1dGUuIElmIGl0IGRvZXMgbm90LFxuICAgICAqIGFzc2lnbnMgdGhlIGdpdmVuIHZhbHVlIHRvIHRoZSBhdHRyaWJ1dGUuXG4gICAgICpcbiAgICAgKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c30gQ2xvc3VyZSBjYW4ndCBmaWd1cmUgb3V0IGB0aGlzYCBpcyBpbmZhY3QgYW5cbiAgICAgKiAgICAgZWxlbWVudFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGF0dHJpYnV0ZSBOYW1lIG9mIGF0dHJpYnV0ZSB0byBlbnN1cmUgaXMgc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBvZiB0aGUgYXR0cmlidXRlLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2Vuc3VyZUF0dHJpYnV0ZShhdHRyaWJ1dGUsIHZhbHVlKSB7XG4gICAgICBjb25zdCBlbCA9IC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyh0aGlzKTtcbiAgICAgIGlmICghZWwuaGFzQXR0cmlidXRlKGF0dHJpYnV0ZSkpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVUb05vZGVBdHRyaWJ1dGUoZWwsIHZhbHVlLCBhdHRyaWJ1dGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBQcm9wZXJ0aWVzQ2hhbmdlZCBpbXBsZW1lbnRpb24gdG8gc2VyaWFsaXplIG9iamVjdHMgYXMgSlNPTi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgUHJvcGVydHkgdmFsdWUgdG8gc2VyaWFsaXplLlxuICAgICAqIEByZXR1cm4ge3N0cmluZyB8IHVuZGVmaW5lZH0gU3RyaW5nIHNlcmlhbGl6ZWQgZnJvbSB0aGUgcHJvdmlkZWQgcHJvcGVydHlcbiAgICAgKiAgICAgdmFsdWUuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3NlcmlhbGl6ZVZhbHVlKHZhbHVlKSB7XG4gICAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1mYWxsdGhyb3VnaCAqL1xuICAgICAgc3dpdGNoICh0eXBlb2YgdmFsdWUpIHtcbiAgICAgICAgY2FzZSAnb2JqZWN0JzpcbiAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gdmFsdWUudG9TdHJpbmcoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xuICAgICAgICAgICAgfSBjYXRjaCh4KSB7XG4gICAgICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gc3VwZXIuX3NlcmlhbGl6ZVZhbHVlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIHN0cmluZyB0byBhIHR5cGVkIEphdmFTY3JpcHQgdmFsdWUuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnkgUG9seW1lciB3aGVuIHJlYWRpbmcgSFRNTCBhdHRyaWJ1dGUgdmFsdWVzIHRvXG4gICAgICogSlMgcHJvcGVydGllcy4gIFVzZXJzIG1heSBvdmVycmlkZSB0aGlzIG1ldGhvZCBvbiBQb2x5bWVyIGVsZW1lbnRcbiAgICAgKiBwcm90b3R5cGVzIHRvIHByb3ZpZGUgZGVzZXJpYWxpemF0aW9uIGZvciBjdXN0b20gYHR5cGVgcy4gIE5vdGUsXG4gICAgICogdGhlIGB0eXBlYCBhcmd1bWVudCBpcyB0aGUgdmFsdWUgb2YgdGhlIGB0eXBlYCBmaWVsZCBwcm92aWRlZCBpbiB0aGVcbiAgICAgKiBgcHJvcGVydGllc2AgY29uZmlndXJhdGlvbiBvYmplY3QgZm9yIGEgZ2l2ZW4gcHJvcGVydHksIGFuZCBpc1xuICAgICAqIGJ5IGNvbnZlbnRpb24gdGhlIGNvbnN0cnVjdG9yIGZvciB0aGUgdHlwZSB0byBkZXNlcmlhbGl6ZS5cbiAgICAgKlxuICAgICAqXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBBdHRyaWJ1dGUgdmFsdWUgdG8gZGVzZXJpYWxpemUuXG4gICAgICogQHBhcmFtIHsqPX0gdHlwZSBUeXBlIHRvIGRlc2VyaWFsaXplIHRoZSBzdHJpbmcgdG8uXG4gICAgICogQHJldHVybiB7Kn0gVHlwZWQgdmFsdWUgZGVzZXJpYWxpemVkIGZyb20gdGhlIHByb3ZpZGVkIHN0cmluZy5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfZGVzZXJpYWxpemVWYWx1ZSh2YWx1ZSwgdHlwZSkge1xuICAgICAgLyoqXG4gICAgICAgKiBAdHlwZSB7Kn1cbiAgICAgICAqL1xuICAgICAgbGV0IG91dFZhbHVlO1xuICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgT2JqZWN0OlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRWYWx1ZSA9IEpTT04ucGFyc2UoLyoqIEB0eXBlIHtzdHJpbmd9ICovKHZhbHVlKSk7XG4gICAgICAgICAgfSBjYXRjaCh4KSB7XG4gICAgICAgICAgICAvLyBhbGxvdyBub24tSlNPTiBsaXRlcmFscyBsaWtlIFN0cmluZ3MgYW5kIE51bWJlcnNcbiAgICAgICAgICAgIG91dFZhbHVlID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIEFycmF5OlxuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRWYWx1ZSA9IEpTT04ucGFyc2UoLyoqIEB0eXBlIHtzdHJpbmd9ICovKHZhbHVlKSk7XG4gICAgICAgICAgfSBjYXRjaCh4KSB7XG4gICAgICAgICAgICBvdXRWYWx1ZSA9IG51bGw7XG4gICAgICAgICAgICBjb25zb2xlLndhcm4oYFBvbHltZXI6OkF0dHJpYnV0ZXM6IGNvdWxkbid0IGRlY29kZSBBcnJheSBhcyBKU09OOiAke3ZhbHVlfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBEYXRlOlxuICAgICAgICAgIG91dFZhbHVlID0gaXNOYU4odmFsdWUpID8gU3RyaW5nKHZhbHVlKSA6IE51bWJlcih2YWx1ZSk7XG4gICAgICAgICAgb3V0VmFsdWUgPSBuZXcgRGF0ZShvdXRWYWx1ZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgb3V0VmFsdWUgPSBzdXBlci5fZGVzZXJpYWxpemVWYWx1ZSh2YWx1ZSwgdHlwZSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICByZXR1cm4gb3V0VmFsdWU7XG4gICAgfVxuICAgIC8qIGVzbGludC1lbmFibGUgbm8tZmFsbHRocm91Z2ggKi9cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBQcm9wZXJ0aWVzQ2hhbmdlZCBpbXBsZW1lbnRhdGlvbiB0byBzYXZlIGV4aXN0aW5nIHByb3RvdHlwZVxuICAgICAqIHByb3BlcnR5IHZhbHVlIHNvIHRoYXQgaXQgY2FuIGJlIHJlc2V0LlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlYWRPbmx5IFdoZW4gdHJ1ZSwgbm8gc2V0dGVyIGlzIGNyZWF0ZWRcbiAgICAgKlxuICAgICAqIFdoZW4gY2FsbGluZyBvbiBhIHByb3RvdHlwZSwgYW55IG92ZXJ3cml0dGVuIHZhbHVlcyBhcmUgc2F2ZWQgaW5cbiAgICAgKiBgX19kYXRhUHJvdG9gLCBhbmQgaXQgaXMgdXAgdG8gdGhlIHN1YmNsYXNzZXIgdG8gZGVjaWRlIGhvdy93aGVuXG4gICAgICogdG8gc2V0IHRob3NlIHByb3BlcnRpZXMgYmFjayBpbnRvIHRoZSBhY2Nlc3Nvci4gIFdoZW4gY2FsbGluZyBvbiBhblxuICAgICAqIGluc3RhbmNlLCB0aGUgb3ZlcndyaXR0ZW4gdmFsdWUgaXMgc2V0IHZpYSBgX3NldFBlbmRpbmdQcm9wZXJ0eWAsXG4gICAgICogYW5kIHRoZSB1c2VyIHNob3VsZCBjYWxsIGBfaW52YWxpZGF0ZVByb3BlcnRpZXNgIG9yIGBfZmx1c2hQcm9wZXJ0aWVzYFxuICAgICAqIGZvciB0aGUgdmFsdWVzIHRvIHRha2UgZWZmZWN0LlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9kZWZpbmVQcm9wZXJ0eUFjY2Vzc29yKHByb3BlcnR5LCByZWFkT25seSkge1xuICAgICAgc2F2ZUFjY2Vzc29yVmFsdWUodGhpcywgcHJvcGVydHkpO1xuICAgICAgc3VwZXIuX2RlZmluZVByb3BlcnR5QWNjZXNzb3IocHJvcGVydHksIHJlYWRPbmx5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBsaWJyYXJ5IGNyZWF0ZWQgYW4gYWNjZXNzb3IgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBhbiBhY2Nlc3NvciB3YXMgY3JlYXRlZFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9oYXNBY2Nlc3Nvcihwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHRoaXMuX19kYXRhSGFzQWNjZXNzb3IgJiYgdGhpcy5fX2RhdGFIYXNBY2Nlc3Nvcltwcm9wZXJ0eV07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgaGFzIGEgcGVuZGluZyBjaGFuZ2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiBwcm9wZXJ0eSBoYXMgYSBwZW5kaW5nIGNoYW5nZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfaXNQcm9wZXJ0eVBlbmRpbmcocHJvcCkge1xuICAgICAgcmV0dXJuIEJvb2xlYW4odGhpcy5fX2RhdGFQZW5kaW5nICYmIChwcm9wIGluIHRoaXMuX19kYXRhUGVuZGluZykpO1xuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIFByb3BlcnR5QWNjZXNzb3JzO1xuXG59KTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICcuLi91dGlscy9ib290LmpzJztcblxuaW1wb3J0IHsgZGVkdXBpbmdNaXhpbiB9IGZyb20gJy4uL3V0aWxzL21peGluLmpzJztcblxuLy8gMS54IGJhY2t3YXJkcy1jb21wYXRpYmxlIGF1dG8td3JhcHBlciBmb3IgdGVtcGxhdGUgdHlwZSBleHRlbnNpb25zXG4vLyBUaGlzIGlzIGEgY2xlYXIgbGF5ZXJpbmcgdmlvbGF0aW9uIGFuZCBnaXZlcyBmYXZvcmVkLW5hdGlvbiBzdGF0dXMgdG9cbi8vIGRvbS1pZiBhbmQgZG9tLXJlcGVhdCB0ZW1wbGF0ZXMuICBUaGlzIGlzIGEgY29uY2VpdCB3ZSdyZSBjaG9vc2luZyB0byBrZWVwXG4vLyBhLikgdG8gZWFzZSAxLnggYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgZHVlIHRvIGxvc3Mgb2YgYGlzYCwgYW5kXG4vLyBiLikgdG8gbWFpbnRhaW4gaWYvcmVwZWF0IGNhcGFiaWxpdHkgaW4gcGFyc2VyLWNvbnN0cmFpbmVkIGVsZW1lbnRzXG4vLyAgICAgKGUuZy4gdGFibGUsIHNlbGVjdCkgaW4gbGlldSBvZiBuYXRpdmUgQ0UgdHlwZSBleHRlbnNpb25zIHdpdGhvdXRcbi8vICAgICBtYXNzaXZlIG5ldyBpbnZlbnRpb24gaW4gdGhpcyBzcGFjZSAoZS5nLiBkaXJlY3RpdmUgc3lzdGVtKVxuY29uc3QgdGVtcGxhdGVFeHRlbnNpb25zID0ge1xuICAnZG9tLWlmJzogdHJ1ZSxcbiAgJ2RvbS1yZXBlYXQnOiB0cnVlXG59O1xuXG5sZXQgcGxhY2Vob2xkZXJCdWdEZXRlY3QgPSBmYWxzZTtcbmxldCBwbGFjZWhvbGRlckJ1ZyA9IGZhbHNlO1xuXG5mdW5jdGlvbiBoYXNQbGFjZWhvbGRlckJ1ZygpIHtcbiAgaWYgKCFwbGFjZWhvbGRlckJ1Z0RldGVjdCkge1xuICAgIHBsYWNlaG9sZGVyQnVnRGV0ZWN0ID0gdHJ1ZTtcbiAgICBjb25zdCB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgICB0LnBsYWNlaG9sZGVyID0gJ2EnO1xuICAgIHBsYWNlaG9sZGVyQnVnID0gdC5wbGFjZWhvbGRlciA9PT0gdC50ZXh0Q29udGVudDtcbiAgfVxuICByZXR1cm4gcGxhY2Vob2xkZXJCdWc7XG59XG5cbi8qKlxuICogU29tZSBicm93c2VycyBoYXZlIGEgYnVnIHdpdGggdGV4dGFyZWEsIHdoZXJlIHBsYWNlaG9sZGVyIHRleHQgaXMgY29waWVkIGFzXG4gKiBhIHRleHRub2RlIGNoaWxkIG9mIHRoZSB0ZXh0YXJlYS5cbiAqXG4gKiBJZiB0aGUgcGxhY2Vob2xkZXIgaXMgYSBiaW5kaW5nLCB0aGlzIGNhbiBicmVhayB0ZW1wbGF0ZSBzdGFtcGluZyBpbiB0d29cbiAqIHdheXMuXG4gKlxuICogT25lIGlzc3VlIGlzIHRoYXQgd2hlbiB0aGUgYHBsYWNlaG9sZGVyYCBhdHRyaWJ1dGUgaXMgcmVtb3ZlZCB3aGVuIHRoZVxuICogYmluZGluZyBpcyBwcm9jZXNzZWQsIHRoZSB0ZXh0bm9kZSBjaGlsZCBvZiB0aGUgdGV4dGFyZWEgaXMgZGVsZXRlZCwgYW5kIHRoZVxuICogdGVtcGxhdGUgaW5mbyB0cmllcyB0byBiaW5kIGludG8gdGhhdCBub2RlLlxuICpcbiAqIFdpdGggYGxlZ2FjeU9wdGltaXphdGlvbnNgIGluIHVzZSwgd2hlbiB0aGUgdGVtcGxhdGUgaXMgc3RhbXBlZCBhbmQgdGhlXG4gKiBgdGV4dGFyZWEudGV4dENvbnRlbnRgIGJpbmRpbmcgaXMgcHJvY2Vzc2VkLCBubyBjb3JyZXNwb25kaW5nIG5vZGUgaXMgZm91bmRcbiAqIGJlY2F1c2UgaXQgd2FzIHJlbW92ZWQgZHVyaW5nIHBhcnNpbmcuIEFuIGV4Y2VwdGlvbiBpcyBnZW5lcmF0ZWQgd2hlbiB0aGlzXG4gKiBiaW5kaW5nIGlzIHVwZGF0ZWQuXG4gKlxuICogV2l0aCBgbGVnYWN5T3B0aW1pemF0aW9uc2Agbm90IGluIHVzZSwgdGhlIHRlbXBsYXRlIGlzIGNsb25lZCBiZWZvcmVcbiAqIHByb2Nlc3NpbmcgYW5kIHRoaXMgY2hhbmdlcyB0aGUgYWJvdmUgYmVoYXZpb3IuIFRoZSBjbG9uZWQgdGVtcGxhdGUgYWxzbyBoYXNcbiAqIGEgdmFsdWUgcHJvcGVydHkgc2V0IHRvIHRoZSBwbGFjZWhvbGRlciBhbmQgdGV4dENvbnRlbnQuIFRoaXMgcHJldmVudHMgdGhlXG4gKiByZW1vdmFsIG9mIHRoZSB0ZXh0Q29udGVudCB3aGVuIHRoZSBwbGFjZWhvbGRlciBhdHRyaWJ1dGUgaXMgcmVtb3ZlZC5cbiAqIFRoZXJlZm9yZSB0aGUgZXhjZXB0aW9uIGRvZXMgbm90IG9jY3VyLiBIb3dldmVyLCB0aGVyZSBpcyBhbiBleHRyYVxuICogdW5uZWNlc3NhcnkgYmluZGluZy5cbiAqXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlIENoZWNrIG5vZGUgZm9yIHBsYWNlaG9sZGVyIGJ1Z1xuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gZml4UGxhY2Vob2xkZXIobm9kZSkge1xuICBpZiAoaGFzUGxhY2Vob2xkZXJCdWcoKSAmJiBub2RlLmxvY2FsTmFtZSA9PT0gJ3RleHRhcmVhJyAmJiBub2RlLnBsYWNlaG9sZGVyXG4gICAgICAgICYmIG5vZGUucGxhY2Vob2xkZXIgPT09IG5vZGUudGV4dENvbnRlbnQpIHtcbiAgICBub2RlLnRleHRDb250ZW50ID0gbnVsbDtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cmFwVGVtcGxhdGVFeHRlbnNpb24obm9kZSkge1xuICBsZXQgaXMgPSBub2RlLmdldEF0dHJpYnV0ZSgnaXMnKTtcbiAgaWYgKGlzICYmIHRlbXBsYXRlRXh0ZW5zaW9uc1tpc10pIHtcbiAgICBsZXQgdCA9IG5vZGU7XG4gICAgdC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgbm9kZSA9IHQub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KGlzKTtcbiAgICB0LnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKG5vZGUsIHQpO1xuICAgIG5vZGUuYXBwZW5kQ2hpbGQodCk7XG4gICAgd2hpbGUodC5hdHRyaWJ1dGVzLmxlbmd0aCkge1xuICAgICAgbm9kZS5zZXRBdHRyaWJ1dGUodC5hdHRyaWJ1dGVzWzBdLm5hbWUsIHQuYXR0cmlidXRlc1swXS52YWx1ZSk7XG4gICAgICB0LnJlbW92ZUF0dHJpYnV0ZSh0LmF0dHJpYnV0ZXNbMF0ubmFtZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBub2RlO1xufVxuXG5mdW5jdGlvbiBmaW5kVGVtcGxhdGVOb2RlKHJvb3QsIG5vZGVJbmZvKSB7XG4gIC8vIHJlY3Vyc2l2ZWx5IGFzY2VuZCB0cmVlIHVudGlsIHdlIGhpdCByb290XG4gIGxldCBwYXJlbnQgPSBub2RlSW5mby5wYXJlbnRJbmZvICYmIGZpbmRUZW1wbGF0ZU5vZGUocm9vdCwgbm9kZUluZm8ucGFyZW50SW5mbyk7XG4gIC8vIHVud2luZCB0aGUgc3RhY2ssIHJldHVybmluZyB0aGUgaW5kZXhlZCBub2RlIGF0IGVhY2ggbGV2ZWxcbiAgaWYgKHBhcmVudCkge1xuICAgIC8vIG5vdGU6IG1hcmdpbmFsbHkgZmFzdGVyIHRoYW4gaW5kZXhpbmcgdmlhIGNoaWxkTm9kZXNcbiAgICAvLyAoaHR0cDovL2pzcGVyZi5jb20vY2hpbGRub2Rlcy1sb29rdXApXG4gICAgZm9yIChsZXQgbj1wYXJlbnQuZmlyc3RDaGlsZCwgaT0wOyBuOyBuPW4ubmV4dFNpYmxpbmcpIHtcbiAgICAgIGlmIChub2RlSW5mby5wYXJlbnRJbmRleCA9PT0gaSsrKSB7XG4gICAgICAgIHJldHVybiBuO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcm9vdDtcbiAgfVxufVxuXG4vLyBjb25zdHJ1Y3QgYCRgIG1hcCAoZnJvbSBpZCBhbm5vdGF0aW9ucylcbmZ1bmN0aW9uIGFwcGx5SWRUb01hcChpbnN0LCBtYXAsIG5vZGUsIG5vZGVJbmZvKSB7XG4gIGlmIChub2RlSW5mby5pZCkge1xuICAgIG1hcFtub2RlSW5mby5pZF0gPSBub2RlO1xuICB9XG59XG5cbi8vIGluc3RhbGwgZXZlbnQgbGlzdGVuZXJzIChmcm9tIGV2ZW50IGFubm90YXRpb25zKVxuZnVuY3Rpb24gYXBwbHlFdmVudExpc3RlbmVyKGluc3QsIG5vZGUsIG5vZGVJbmZvKSB7XG4gIGlmIChub2RlSW5mby5ldmVudHMgJiYgbm9kZUluZm8uZXZlbnRzLmxlbmd0aCkge1xuICAgIGZvciAobGV0IGo9MCwgZSQ9bm9kZUluZm8uZXZlbnRzLCBlOyAoajxlJC5sZW5ndGgpICYmIChlPWUkW2pdKTsgaisrKSB7XG4gICAgICBpbnN0Ll9hZGRNZXRob2RFdmVudExpc3RlbmVyVG9Ob2RlKG5vZGUsIGUubmFtZSwgZS52YWx1ZSwgaW5zdCk7XG4gICAgfVxuICB9XG59XG5cbi8vIHB1c2ggY29uZmlndXJhdGlvbiByZWZlcmVuY2VzIGF0IGNvbmZpZ3VyZSB0aW1lXG5mdW5jdGlvbiBhcHBseVRlbXBsYXRlSW5mbyhpbnN0LCBub2RlLCBub2RlSW5mbywgcGFyZW50VGVtcGxhdGVJbmZvKSB7XG4gIGlmIChub2RlSW5mby50ZW1wbGF0ZUluZm8pIHtcbiAgICAvLyBHaXZlIHRoZSBub2RlIGFuIGluc3RhbmNlIG9mIHRoaXMgdGVtcGxhdGVJbmZvIGFuZCBzZXQgaXRzIHBhcmVudFxuICAgIG5vZGUuX3RlbXBsYXRlSW5mbyA9IG5vZGVJbmZvLnRlbXBsYXRlSW5mbztcbiAgICBub2RlLl9wYXJlbnRUZW1wbGF0ZUluZm8gPSBwYXJlbnRUZW1wbGF0ZUluZm87XG4gIH1cbn1cblxuZnVuY3Rpb24gY3JlYXRlTm9kZUV2ZW50SGFuZGxlcihjb250ZXh0LCBldmVudE5hbWUsIG1ldGhvZE5hbWUpIHtcbiAgLy8gSW5zdGFuY2VzIGNhbiBvcHRpb25hbGx5IGhhdmUgYSBfbWV0aG9kSG9zdCB3aGljaCBhbGxvd3MgcmVkaXJlY3Rpbmcgd2hlcmVcbiAgLy8gdG8gZmluZCBtZXRob2RzLiBDdXJyZW50bHkgdXNlZCBieSBgdGVtcGxhdGl6ZWAuXG4gIGNvbnRleHQgPSBjb250ZXh0Ll9tZXRob2RIb3N0IHx8IGNvbnRleHQ7XG4gIGxldCBoYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuICAgIGlmIChjb250ZXh0W21ldGhvZE5hbWVdKSB7XG4gICAgICBjb250ZXh0W21ldGhvZE5hbWVdKGUsIGUuZGV0YWlsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS53YXJuKCdsaXN0ZW5lciBtZXRob2QgYCcgKyBtZXRob2ROYW1lICsgJ2Agbm90IGRlZmluZWQnKTtcbiAgICB9XG4gIH07XG4gIHJldHVybiBoYW5kbGVyO1xufVxuXG4vKipcbiAqIEVsZW1lbnQgbWl4aW4gdGhhdCBwcm92aWRlcyBiYXNpYyB0ZW1wbGF0ZSBwYXJzaW5nIGFuZCBzdGFtcGluZywgaW5jbHVkaW5nXG4gKiB0aGUgZm9sbG93aW5nIHRlbXBsYXRlLXJlbGF0ZWQgZmVhdHVyZXMgZm9yIHN0YW1wZWQgdGVtcGxhdGVzOlxuICpcbiAqIC0gRGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXJzIChgb24tZXZlbnRuYW1lPVwibGlzdGVuZXJcImApXG4gKiAtIE1hcCBvZiBub2RlIGlkJ3MgdG8gc3RhbXBlZCBub2RlIGluc3RhbmNlcyAoYHRoaXMuJC5pZGApXG4gKiAtIE5lc3RlZCB0ZW1wbGF0ZSBjb250ZW50IGNhY2hpbmcvcmVtb3ZhbCBhbmQgcmUtaW5zdGFsbGF0aW9uIChwZXJmb3JtYW5jZVxuICogICBvcHRpbWl6YXRpb24pXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgYmFzaWMgdGVtcGxhdGUgcGFyc2luZyBhbmQgc3RhbXBpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IFRlbXBsYXRlU3RhbXAgPSBkZWR1cGluZ01peGluKFxuICAgIC8qKlxuICAgICAqIEB0ZW1wbGF0ZSBUXG4gICAgICogQHBhcmFtIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3MgQ2xhc3MgdG8gYXBwbHkgbWl4aW4gdG8uXG4gICAgICogQHJldHVybiB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIHdpdGggbWl4aW4gYXBwbGllZC5cbiAgICAgKi9cbiAgICAoc3VwZXJDbGFzcykgPT4ge1xuXG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9UZW1wbGF0ZVN0YW1wfVxuICAgKi9cbiAgY2xhc3MgVGVtcGxhdGVTdGFtcCBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXG4gICAgLyoqXG4gICAgICogU2NhbnMgYSB0ZW1wbGF0ZSB0byBwcm9kdWNlIHRlbXBsYXRlIG1ldGFkYXRhLlxuICAgICAqXG4gICAgICogVGVtcGxhdGUtc3BlY2lmaWMgbWV0YWRhdGEgYXJlIHN0b3JlZCBpbiB0aGUgb2JqZWN0IHJldHVybmVkLCBhbmQgbm9kZS1cbiAgICAgKiBzcGVjaWZpYyBtZXRhZGF0YSBhcmUgc3RvcmVkIGluIG9iamVjdHMgaW4gaXRzIGZsYXR0ZW5lZCBgbm9kZUluZm9MaXN0YFxuICAgICAqIGFycmF5LiAgT25seSBub2RlcyBpbiB0aGUgdGVtcGxhdGUgdGhhdCB3ZXJlIHBhcnNlZCBhcyBub2RlcyBvZlxuICAgICAqIGludGVyZXN0IGNvbnRhaW4gYW4gb2JqZWN0IGluIGBub2RlSW5mb0xpc3RgLiAgRWFjaCBgbm9kZUluZm9gIG9iamVjdFxuICAgICAqIGNvbnRhaW5zIGFuIGBpbmRleGAgKGBjaGlsZE5vZGVzYCBpbmRleCBpbiBwYXJlbnQpIGFuZCBvcHRpb25hbGx5XG4gICAgICogYHBhcmVudGAsIHdoaWNoIHBvaW50cyB0byBub2RlIGluZm8gb2YgaXRzIHBhcmVudCAoaW5jbHVkaW5nIGl0cyBpbmRleCkuXG4gICAgICpcbiAgICAgKiBUaGUgdGVtcGxhdGUgbWV0YWRhdGEgb2JqZWN0IHJldHVybmVkIGZyb20gdGhpcyBtZXRob2QgaGFzIHRoZSBmb2xsb3dpbmdcbiAgICAgKiBzdHJ1Y3R1cmUgKG1hbnkgZmllbGRzIG9wdGlvbmFsKTpcbiAgICAgKlxuICAgICAqIGBgYGpzXG4gICAgICogICB7XG4gICAgICogICAgIC8vIEZsYXR0ZW5lZCBsaXN0IG9mIG5vZGUgbWV0YWRhdGEgKGZvciBub2RlcyB0aGF0IGdlbmVyYXRlZCBtZXRhZGF0YSlcbiAgICAgKiAgICAgbm9kZUluZm9MaXN0OiBbXG4gICAgICogICAgICAge1xuICAgICAqICAgICAgICAgLy8gYGlkYCBhdHRyaWJ1dGUgZm9yIGFueSBub2RlcyB3aXRoIGlkJ3MgZm9yIGdlbmVyYXRpbmcgYCRgIG1hcFxuICAgICAqICAgICAgICAgaWQ6IHtzdHJpbmd9LFxuICAgICAqICAgICAgICAgLy8gYG9uLWV2ZW50PVwiaGFuZGxlclwiYCBtZXRhZGF0YVxuICAgICAqICAgICAgICAgZXZlbnRzOiBbXG4gICAgICogICAgICAgICAgIHtcbiAgICAgKiAgICAgICAgICAgICBuYW1lOiB7c3RyaW5nfSwgICAvLyBldmVudCBuYW1lXG4gICAgICogICAgICAgICAgICAgdmFsdWU6IHtzdHJpbmd9LCAgLy8gaGFuZGxlciBtZXRob2QgbmFtZVxuICAgICAqICAgICAgICAgICB9LCAuLi5cbiAgICAgKiAgICAgICAgIF0sXG4gICAgICogICAgICAgICAvLyBOb3RlcyB3aGVuIHRoZSB0ZW1wbGF0ZSBjb250YWluZWQgYSBgPHNsb3Q+YCBmb3Igc2hhZHkgRE9NXG4gICAgICogICAgICAgICAvLyBvcHRpbWl6YXRpb24gcHVycG9zZXNcbiAgICAgKiAgICAgICAgIGhhc0luc2VydGlvblBvaW50OiB7Ym9vbGVhbn0sXG4gICAgICogICAgICAgICAvLyBGb3IgbmVzdGVkIGA8dGVtcGxhdGU+YGAgbm9kZXMsIG5lc3RlZCB0ZW1wbGF0ZSBtZXRhZGF0YVxuICAgICAqICAgICAgICAgdGVtcGxhdGVJbmZvOiB7b2JqZWN0fSwgLy8gbmVzdGVkIHRlbXBsYXRlIG1ldGFkYXRhXG4gICAgICogICAgICAgICAvLyBNZXRhZGF0YSB0byBhbGxvdyBlZmZpY2llbnQgcmV0cmlldmFsIG9mIGluc3RhbmNlZCBub2RlXG4gICAgICogICAgICAgICAvLyBjb3JyZXNwb25kaW5nIHRvIHRoaXMgbWV0YWRhdGFcbiAgICAgKiAgICAgICAgIHBhcmVudEluZm86IHtudW1iZXJ9LCAgIC8vIHJlZmVyZW5jZSB0byBwYXJlbnQgbm9kZUluZm8+XG4gICAgICogICAgICAgICBwYXJlbnRJbmRleDoge251bWJlcn0sICAvLyBpbmRleCBpbiBwYXJlbnQncyBgY2hpbGROb2Rlc2AgY29sbGVjdGlvblxuICAgICAqICAgICAgICAgaW5mb0luZGV4OiB7bnVtYmVyfSwgICAgLy8gaW5kZXggb2YgdGhpcyBgbm9kZUluZm9gIGluIGB0ZW1wbGF0ZUluZm8ubm9kZUluZm9MaXN0YFxuICAgICAqICAgICAgIH0sXG4gICAgICogICAgICAgLi4uXG4gICAgICogICAgIF0sXG4gICAgICogICAgIC8vIFdoZW4gdHJ1ZSwgdGhlIHRlbXBsYXRlIGhhZCB0aGUgYHN0cmlwLXdoaXRlc3BhY2VgIGF0dHJpYnV0ZVxuICAgICAqICAgICAvLyBvciB3YXMgbmVzdGVkIGluIGEgdGVtcGxhdGUgd2l0aCB0aGF0IHNldHRpbmdcbiAgICAgKiAgICAgc3RyaXBXaGl0ZXNwYWNlOiB7Ym9vbGVhbn0sXG4gICAgICogICAgIC8vIEZvciBuZXN0ZWQgdGVtcGxhdGVzLCBuZXN0ZWQgdGVtcGxhdGUgY29udGVudCBpcyBtb3ZlZCBpbnRvXG4gICAgICogICAgIC8vIGEgZG9jdW1lbnQgZnJhZ21lbnQgc3RvcmVkIGhlcmU7IHRoaXMgaXMgYW4gb3B0aW1pemF0aW9uIHRvXG4gICAgICogICAgIC8vIGF2b2lkIHRoZSBjb3N0IG9mIG5lc3RlZCB0ZW1wbGF0ZSBjbG9uaW5nXG4gICAgICogICAgIGNvbnRlbnQ6IHtEb2N1bWVudEZyYWdtZW50fVxuICAgICAqICAgfVxuICAgICAqIGBgYFxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2Qga2lja3Mgb2ZmIGEgcmVjdXJzaXZlIHRyZWV3YWxrIGFzIGZvbGxvd3M6XG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKiAgICBfcGFyc2VUZW1wbGF0ZSA8LS0tLS0tLS0tLS0tLS0tLS0tLS0tK1xuICAgICAqICAgICAgX3BhcnNlVGVtcGxhdGVDb250ZW50ICAgICAgICAgICAgICB8XG4gICAgICogICAgICAgIF9wYXJzZVRlbXBsYXRlTm9kZSAgPC0tLS0tLS0tLS0tLXwtLStcbiAgICAgKiAgICAgICAgICBfcGFyc2VUZW1wbGF0ZU5lc3RlZFRlbXBsYXRlIC0tKyAgfFxuICAgICAqICAgICAgICAgIF9wYXJzZVRlbXBsYXRlQ2hpbGROb2RlcyAtLS0tLS0tLS0rXG4gICAgICogICAgICAgICAgX3BhcnNlVGVtcGxhdGVOb2RlQXR0cmlidXRlc1xuICAgICAqICAgICAgICAgICAgX3BhcnNlVGVtcGxhdGVOb2RlQXR0cmlidXRlXG4gICAgICpcbiAgICAgKiBgYGBcbiAgICAgKlxuICAgICAqIFRoZXNlIG1ldGhvZHMgbWF5IGJlIG92ZXJyaWRkZW4gdG8gYWRkIGN1c3RvbSBtZXRhZGF0YSBhYm91dCB0ZW1wbGF0ZXNcbiAgICAgKiB0byBlaXRoZXIgYHRlbXBsYXRlSW5mb2Agb3IgYG5vZGVJbmZvYC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBtYXkgYmUgZGVzdHJ1Y3RpdmUgdG8gdGhlIHRlbXBsYXRlLCBpbiB0aGF0XG4gICAgICogZS5nLiBldmVudCBhbm5vdGF0aW9ucyBtYXkgYmUgcmVtb3ZlZCBhZnRlciBiZWluZyBub3RlZCBpbiB0aGVcbiAgICAgKiB0ZW1wbGF0ZSBtZXRhZGF0YS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIHBhcnNlXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZUluZm89fSBvdXRlclRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmcm9tIHRoZSBvdXRlclxuICAgICAqICAgdGVtcGxhdGUsIGZvciBwYXJzaW5nIG5lc3RlZCB0ZW1wbGF0ZXNcbiAgICAgKiBAcmV0dXJuIHshVGVtcGxhdGVJbmZvfSBQYXJzZWQgdGVtcGxhdGUgbWV0YWRhdGFcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgb3V0ZXJUZW1wbGF0ZUluZm8pIHtcbiAgICAgIC8vIHNpbmNlIGEgdGVtcGxhdGUgbWF5IGJlIHJlLXVzZWQsIG1lbW8taXplIG1ldGFkYXRhXG4gICAgICBpZiAoIXRlbXBsYXRlLl90ZW1wbGF0ZUluZm8pIHtcbiAgICAgICAgLy8gVE9ETyhyaWN0aWMpOiBmaXggdHlwaW5nXG4gICAgICAgIGxldCAvKiogPyAqLyB0ZW1wbGF0ZUluZm8gPSB0ZW1wbGF0ZS5fdGVtcGxhdGVJbmZvID0ge307XG4gICAgICAgIHRlbXBsYXRlSW5mby5ub2RlSW5mb0xpc3QgPSBbXTtcbiAgICAgICAgdGVtcGxhdGVJbmZvLm5lc3RlZFRlbXBsYXRlID0gQm9vbGVhbihvdXRlclRlbXBsYXRlSW5mbyk7XG4gICAgICAgIHRlbXBsYXRlSW5mby5zdHJpcFdoaXRlU3BhY2UgPVxuICAgICAgICAgIChvdXRlclRlbXBsYXRlSW5mbyAmJiBvdXRlclRlbXBsYXRlSW5mby5zdHJpcFdoaXRlU3BhY2UpIHx8XG4gICAgICAgICAgdGVtcGxhdGUuaGFzQXR0cmlidXRlKCdzdHJpcC13aGl0ZXNwYWNlJyk7XG4gICAgICAgICAvLyBUT0RPKHJpY3RpYyk6IGZpeCB0eXBpbmdcbiAgICAgICAgIHRoaXMuX3BhcnNlVGVtcGxhdGVDb250ZW50KFxuICAgICAgICAgICAgIHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8sIC8qKiBAdHlwZSB7P30gKi8gKHtwYXJlbnQ6IG51bGx9KSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGVtcGxhdGUuX3RlbXBsYXRlSW5mbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWUgZG9jcyBmb3IgX3BhcnNlVGVtcGxhdGVOb2RlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgLlxuICAgICAqIEBwYXJhbSB7IVRlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIC5cbiAgICAgKiBAcGFyYW0geyFOb2RlSW5mb30gbm9kZUluZm8gLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IC5cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcGFyc2VUZW1wbGF0ZUNvbnRlbnQodGVtcGxhdGUsIHRlbXBsYXRlSW5mbywgbm9kZUluZm8pIHtcbiAgICAgIHJldHVybiB0aGlzLl9wYXJzZVRlbXBsYXRlTm9kZSh0ZW1wbGF0ZS5jb250ZW50LCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGVtcGxhdGUgbm9kZSBhbmQgYWRkcyB0ZW1wbGF0ZSBhbmQgbm9kZSBtZXRhZGF0YSBiYXNlZCBvblxuICAgICAqIHRoZSBjdXJyZW50IG5vZGUsIGFuZCBpdHMgYGNoaWxkTm9kZXNgIGFuZCBgYXR0cmlidXRlc2AuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBtYXkgYmUgb3ZlcnJpZGRlbiB0byBhZGQgY3VzdG9tIG5vZGUgb3IgdGVtcGxhdGUgc3BlY2lmaWNcbiAgICAgKiBtZXRhZGF0YSBiYXNlZCBvbiB0aGlzIG5vZGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgTm9kZSB0byBwYXJzZVxuICAgICAqIEBwYXJhbSB7IVRlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHshTm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2aXNpdGVkIG5vZGUgYWRkZWQgbm9kZS1zcGVjaWZpY1xuICAgICAqICAgbWV0YWRhdGEgdG8gYG5vZGVJbmZvYFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTm9kZShub2RlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKSB7XG4gICAgICBsZXQgbm90ZWQgPSBmYWxzZTtcbiAgICAgIGxldCBlbGVtZW50ID0gLyoqIEB0eXBlIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gKi8gKG5vZGUpO1xuICAgICAgaWYgKGVsZW1lbnQubG9jYWxOYW1lID09ICd0ZW1wbGF0ZScgJiYgIWVsZW1lbnQuaGFzQXR0cmlidXRlKCdwcmVzZXJ2ZS1jb250ZW50JykpIHtcbiAgICAgICAgbm90ZWQgPSB0aGlzLl9wYXJzZVRlbXBsYXRlTmVzdGVkVGVtcGxhdGUoZWxlbWVudCwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbykgfHwgbm90ZWQ7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQubG9jYWxOYW1lID09PSAnc2xvdCcpIHtcbiAgICAgICAgLy8gRm9yIFNoYWR5RG9tIG9wdGltaXphdGlvbiwgaW5kaWNhdGluZyB0aGVyZSBpcyBhbiBpbnNlcnRpb24gcG9pbnRcbiAgICAgICAgdGVtcGxhdGVJbmZvLmhhc0luc2VydGlvblBvaW50ID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGZpeFBsYWNlaG9sZGVyKGVsZW1lbnQpO1xuICAgICAgaWYgKGVsZW1lbnQuZmlyc3RDaGlsZCkge1xuICAgICAgICB0aGlzLl9wYXJzZVRlbXBsYXRlQ2hpbGROb2RlcyhlbGVtZW50LCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbGVtZW50Lmhhc0F0dHJpYnV0ZXMgJiYgZWxlbWVudC5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICAgICAgbm90ZWQgPSB0aGlzLl9wYXJzZVRlbXBsYXRlTm9kZUF0dHJpYnV0ZXMoZWxlbWVudCwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbykgfHwgbm90ZWQ7XG4gICAgICB9XG4gICAgICAvLyBDaGVja2luZyBgbm9kZUluZm8ubm90ZWRgIGFsbG93cyBhIGNoaWxkIG5vZGUgb2YgdGhpcyBub2RlICh3aG8gZ2V0c1xuICAgICAgLy8gYWNjZXNzIHRvIGBwYXJlbnRJbmZvYCkgdG8gY2F1c2UgdGhlIHBhcmVudCB0byBiZSBub3RlZCwgd2hpY2hcbiAgICAgIC8vIG90aGVyd2lzZSBoYXMgbm8gcmV0dXJuIHBhdGggdmlhIGBfcGFyc2VUZW1wbGF0ZUNoaWxkTm9kZXNgICh1c2VkIGJ5XG4gICAgICAvLyBzb21lIG9wdGltaXphdGlvbnMpXG4gICAgICByZXR1cm4gbm90ZWQgfHwgbm9kZUluZm8ubm90ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRlbXBsYXRlIGNoaWxkIG5vZGVzIGZvciB0aGUgZ2l2ZW4gcm9vdCBub2RlLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgYWxzbyB3cmFwcyB3aGl0ZWxpc3RlZCBsZWdhY3kgdGVtcGxhdGUgZXh0ZW5zaW9uc1xuICAgICAqIChgaXM9XCJkb20taWZcImAgYW5kIGBpcz1cImRvbS1yZXBlYXRcImApIHdpdGggdGhlaXIgZXF1aXZhbGVudCBlbGVtZW50XG4gICAgICogd3JhcHBlcnMsIGNvbGxhcHNlcyB0ZXh0IG5vZGVzLCBhbmQgc3RyaXBzIHdoaXRlc3BhY2UgZnJvbSB0aGUgdGVtcGxhdGVcbiAgICAgKiBpZiB0aGUgYHRlbXBsYXRlSW5mby5zdHJpcFdoaXRlc3BhY2VgIHNldHRpbmcgd2FzIHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSByb290IFJvb3Qgbm9kZSB3aG9zZSBgY2hpbGROb2Rlc2Agd2lsbCBiZSBwYXJzZWRcbiAgICAgKiBAcGFyYW0geyFUZW1wbGF0ZUluZm99IHRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7IU5vZGVJbmZvfSBub2RlSW5mbyBOb2RlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlQ2hpbGROb2Rlcyhyb290LCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKSB7XG4gICAgICBpZiAocm9vdC5sb2NhbE5hbWUgPT09ICdzY3JpcHQnIHx8IHJvb3QubG9jYWxOYW1lID09PSAnc3R5bGUnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IG5vZGU9cm9vdC5maXJzdENoaWxkLCBwYXJlbnRJbmRleD0wLCBuZXh0OyBub2RlOyBub2RlPW5leHQpIHtcbiAgICAgICAgLy8gV3JhcCB0ZW1wbGF0ZXNcbiAgICAgICAgaWYgKG5vZGUubG9jYWxOYW1lID09ICd0ZW1wbGF0ZScpIHtcbiAgICAgICAgICBub2RlID0gd3JhcFRlbXBsYXRlRXh0ZW5zaW9uKG5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIGNvbGxhcHNlIGFkamFjZW50IHRleHROb2RlczogZml4ZXMgYW4gSUUgaXNzdWUgdGhhdCBjYW4gY2F1c2VcbiAgICAgICAgLy8gdGV4dCBub2RlcyB0byBiZSBpbmV4cGxpY2FibHkgc3BsaXQgPShcbiAgICAgICAgLy8gbm90ZSB0aGF0IHJvb3Qubm9ybWFsaXplKCkgc2hvdWxkIHdvcmsgYnV0IGRvZXMgbm90IHNvIHdlIGRvIHRoaXNcbiAgICAgICAgLy8gbWFudWFsbHkuXG4gICAgICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgICAgICBpZiAobm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5URVhUX05PREUpIHtcbiAgICAgICAgICBsZXQgLyoqIE5vZGUgKi8gbiA9IG5leHQ7XG4gICAgICAgICAgd2hpbGUgKG4gJiYgKG4ubm9kZVR5cGUgPT09IE5vZGUuVEVYVF9OT0RFKSkge1xuICAgICAgICAgICAgbm9kZS50ZXh0Q29udGVudCArPSBuLnRleHRDb250ZW50O1xuICAgICAgICAgICAgbmV4dCA9IG4ubmV4dFNpYmxpbmc7XG4gICAgICAgICAgICByb290LnJlbW92ZUNoaWxkKG4pO1xuICAgICAgICAgICAgbiA9IG5leHQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIG9wdGlvbmFsbHkgc3RyaXAgd2hpdGVzcGFjZVxuICAgICAgICAgIGlmICh0ZW1wbGF0ZUluZm8uc3RyaXBXaGl0ZVNwYWNlICYmICFub2RlLnRleHRDb250ZW50LnRyaW0oKSkge1xuICAgICAgICAgICAgcm9vdC5yZW1vdmVDaGlsZChub2RlKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsZXQgY2hpbGRJbmZvID1cbiAgICAgICAgICAgIC8qKiBAdHlwZSB7IU5vZGVJbmZvfSAqLyAoe3BhcmVudEluZGV4LCBwYXJlbnRJbmZvOiBub2RlSW5mb30pO1xuICAgICAgICBpZiAodGhpcy5fcGFyc2VUZW1wbGF0ZU5vZGUobm9kZSwgdGVtcGxhdGVJbmZvLCBjaGlsZEluZm8pKSB7XG4gICAgICAgICAgY2hpbGRJbmZvLmluZm9JbmRleCA9IHRlbXBsYXRlSW5mby5ub2RlSW5mb0xpc3QucHVzaChjaGlsZEluZm8pIC0gMTtcbiAgICAgICAgfVxuICAgICAgICAvLyBJbmNyZW1lbnQgaWYgbm90IHJlbW92ZWRcbiAgICAgICAgaWYgKG5vZGUucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHBhcmVudEluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgdGVtcGxhdGUgY29udGVudCBmb3IgdGhlIGdpdmVuIG5lc3RlZCBgPHRlbXBsYXRlPmAuXG4gICAgICpcbiAgICAgKiBOZXN0ZWQgdGVtcGxhdGUgaW5mbyBpcyBzdG9yZWQgYXMgYHRlbXBsYXRlSW5mb2AgaW4gdGhlIGN1cnJlbnQgbm9kZSdzXG4gICAgICogYG5vZGVJbmZvYC4gYHRlbXBsYXRlLmNvbnRlbnRgIGlzIHJlbW92ZWQgYW5kIHN0b3JlZCBpbiBgdGVtcGxhdGVJbmZvYC5cbiAgICAgKiBJdCB3aWxsIHRoZW4gYmUgdGhlIHJlc3BvbnNpYmlsaXR5IG9mIHRoZSBob3N0IHRvIHNldCBpdCBiYWNrIHRvIHRoZVxuICAgICAqIHRlbXBsYXRlIGFuZCBmb3IgdXNlcnMgc3RhbXBpbmcgbmVzdGVkIHRlbXBsYXRlcyB0byB1c2UgdGhlXG4gICAgICogYF9jb250ZW50Rm9yVGVtcGxhdGVgIG1ldGhvZCB0byByZXRyaWV2ZSB0aGUgY29udGVudCBmb3IgdGhpcyB0ZW1wbGF0ZVxuICAgICAqIChhbiBvcHRpbWl6YXRpb24gdG8gYXZvaWQgdGhlIGNvc3Qgb2YgY2xvbmluZyBuZXN0ZWQgdGVtcGxhdGUgY29udGVudCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxUZW1wbGF0ZUVsZW1lbnR9IG5vZGUgTm9kZSB0byBwYXJzZSAoYSA8dGVtcGxhdGU+KVxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGVJbmZvfSBvdXRlclRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZVxuICAgICAqICAgdGhhdCBpbmNsdWRlcyB0aGUgdGVtcGxhdGUgYG5vZGVgXG4gICAgICogQHBhcmFtIHshTm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2aXNpdGVkIG5vZGUgYWRkZWQgbm9kZS1zcGVjaWZpY1xuICAgICAqICAgbWV0YWRhdGEgdG8gYG5vZGVJbmZvYFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTmVzdGVkVGVtcGxhdGUobm9kZSwgb3V0ZXJUZW1wbGF0ZUluZm8sIG5vZGVJbmZvKSB7XG4gICAgICAvLyBUT0RPKHJpY3RpYyk6IHRoZSB0eXBlIG9mIG5vZGUgc2hvdWxkIGJlIG5vbi1udWxsXG4gICAgICBsZXQgZWxlbWVudCA9IC8qKiBAdHlwZSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9ICovIChub2RlKTtcbiAgICAgIGxldCB0ZW1wbGF0ZUluZm8gPSB0aGlzLl9wYXJzZVRlbXBsYXRlKGVsZW1lbnQsIG91dGVyVGVtcGxhdGVJbmZvKTtcbiAgICAgIGxldCBjb250ZW50ID0gdGVtcGxhdGVJbmZvLmNvbnRlbnQgPVxuICAgICAgICAgIGVsZW1lbnQuY29udGVudC5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxlbWVudC5jb250ZW50KTtcbiAgICAgIG5vZGVJbmZvLnRlbXBsYXRlSW5mbyA9IHRlbXBsYXRlSW5mbztcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFBhcnNlcyB0ZW1wbGF0ZSBub2RlIGF0dHJpYnV0ZXMgYW5kIGFkZHMgbm9kZSBtZXRhZGF0YSB0byBgbm9kZUluZm9gXG4gICAgICogZm9yIG5vZGVzIG9mIGludGVyZXN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlIE5vZGUgdG8gcGFyc2VcbiAgICAgKiBAcGFyYW0geyFUZW1wbGF0ZUluZm99IHRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmb3IgY3VycmVudFxuICAgICAqICAgICB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7IU5vZGVJbmZvfSBub2RlSW5mbyBOb2RlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgdmlzaXRlZCBub2RlIGFkZGVkIG5vZGUtc3BlY2lmaWNcbiAgICAgKiAgIG1ldGFkYXRhIHRvIGBub2RlSW5mb2BcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcGFyc2VUZW1wbGF0ZU5vZGVBdHRyaWJ1dGVzKG5vZGUsIHRlbXBsYXRlSW5mbywgbm9kZUluZm8pIHtcbiAgICAgIC8vIE1ha2UgY29weSBvZiBvcmlnaW5hbCBhdHRyaWJ1dGUgbGlzdCwgc2luY2UgdGhlIG9yZGVyIG1heSBjaGFuZ2VcbiAgICAgIC8vIGFzIGF0dHJpYnV0ZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkXG4gICAgICBsZXQgbm90ZWQgPSBmYWxzZTtcbiAgICAgIGxldCBhdHRycyA9IEFycmF5LmZyb20obm9kZS5hdHRyaWJ1dGVzKTtcbiAgICAgIGZvciAobGV0IGk9YXR0cnMubGVuZ3RoLTEsIGE7IChhPWF0dHJzW2ldKTsgaS0tKSB7XG4gICAgICAgIG5vdGVkID0gdGhpcy5fcGFyc2VUZW1wbGF0ZU5vZGVBdHRyaWJ1dGUobm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbywgYS5uYW1lLCBhLnZhbHVlKSB8fCBub3RlZDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBub3RlZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBzaW5nbGUgdGVtcGxhdGUgbm9kZSBhdHRyaWJ1dGUgYW5kIGFkZHMgbm9kZSBtZXRhZGF0YSB0b1xuICAgICAqIGBub2RlSW5mb2AgZm9yIGF0dHJpYnV0ZXMgb2YgaW50ZXJlc3QuXG4gICAgICpcbiAgICAgKiBUaGlzIGltcGxlbWVudGF0aW9uIGFkZHMgbWV0YWRhdGEgZm9yIGBvbi1ldmVudD1cImhhbmRsZXJcImAgYXR0cmlidXRlc1xuICAgICAqIGFuZCBgaWRgIGF0dHJpYnV0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUgTm9kZSB0byBwYXJzZVxuICAgICAqIEBwYXJhbSB7IVRlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHshTm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgQXR0cmlidXRlIG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdmFsdWUgQXR0cmlidXRlIHZhbHVlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2aXNpdGVkIG5vZGUgYWRkZWQgbm9kZS1zcGVjaWZpY1xuICAgICAqICAgbWV0YWRhdGEgdG8gYG5vZGVJbmZvYFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTm9kZUF0dHJpYnV0ZShub2RlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvLCBuYW1lLCB2YWx1ZSkge1xuICAgICAgLy8gZXZlbnRzIChvbi0qKVxuICAgICAgaWYgKG5hbWUuc2xpY2UoMCwgMykgPT09ICdvbi0nKSB7XG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICBub2RlSW5mby5ldmVudHMgPSBub2RlSW5mby5ldmVudHMgfHwgW107XG4gICAgICAgIG5vZGVJbmZvLmV2ZW50cy5wdXNoKHtcbiAgICAgICAgICBuYW1lOiBuYW1lLnNsaWNlKDMpLFxuICAgICAgICAgIHZhbHVlXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIC8vIHN0YXRpYyBpZFxuICAgICAgZWxzZSBpZiAobmFtZSA9PT0gJ2lkJykge1xuICAgICAgICBub2RlSW5mby5pZCA9IHZhbHVlO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBgY29udGVudGAgZG9jdW1lbnQgZnJhZ21lbnQgZm9yIGEgZ2l2ZW4gdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBGb3IgbmVzdGVkIHRlbXBsYXRlcywgUG9seW1lciBwZXJmb3JtcyBhbiBvcHRpbWl6YXRpb24gdG8gY2FjaGUgbmVzdGVkXG4gICAgICogdGVtcGxhdGUgY29udGVudCB0byBhdm9pZCB0aGUgY29zdCBvZiBjbG9uaW5nIGRlZXBseSBuZXN0ZWQgdGVtcGxhdGVzLlxuICAgICAqIFRoaXMgbWV0aG9kIHJldHJpZXZlcyB0aGUgY2FjaGVkIGNvbnRlbnQgZm9yIGEgZ2l2ZW4gdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0hUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIHJldHJpZXZlIGBjb250ZW50YCBmb3JcbiAgICAgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fSBDb250ZW50IGZyYWdtZW50XG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX2NvbnRlbnRGb3JUZW1wbGF0ZSh0ZW1wbGF0ZSkge1xuICAgICAgbGV0IHRlbXBsYXRlSW5mbyA9IC8qKiBAdHlwZSB7SFRNTFRlbXBsYXRlRWxlbWVudFdpdGhJbmZvfSAqLyAodGVtcGxhdGUpLl90ZW1wbGF0ZUluZm87XG4gICAgICByZXR1cm4gKHRlbXBsYXRlSW5mbyAmJiB0ZW1wbGF0ZUluZm8uY29udGVudCkgfHwgdGVtcGxhdGUuY29udGVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDbG9uZXMgdGhlIHByb3ZpZGVkIHRlbXBsYXRlIGNvbnRlbnQgYW5kIHJldHVybnMgYSBkb2N1bWVudCBmcmFnbWVudFxuICAgICAqIGNvbnRhaW5pbmcgdGhlIGNsb25lZCBkb20uXG4gICAgICpcbiAgICAgKiBUaGUgdGVtcGxhdGUgaXMgcGFyc2VkIChvbmNlIGFuZCBtZW1vaXplZCkgdXNpbmcgdGhpcyBsaWJyYXJ5J3NcbiAgICAgKiB0ZW1wbGF0ZSBwYXJzaW5nIGZlYXR1cmVzLCBhbmQgcHJvdmlkZXMgdGhlIGZvbGxvd2luZyB2YWx1ZS1hZGRlZFxuICAgICAqIGZlYXR1cmVzOlxuICAgICAqICogQWRkcyBkZWNsYXJhdGl2ZSBldmVudCBsaXN0ZW5lcnMgZm9yIGBvbi1ldmVudD1cImhhbmRsZXJcImAgYXR0cmlidXRlc1xuICAgICAqICogR2VuZXJhdGVzIGFuIFwiaWQgbWFwXCIgZm9yIGFsbCBub2RlcyB3aXRoIGlkJ3MgdW5kZXIgYCRgIG9uIHJldHVybmVkXG4gICAgICogICBkb2N1bWVudCBmcmFnbWVudFxuICAgICAqICogUGFzc2VzIHRlbXBsYXRlIGluZm8gaW5jbHVkaW5nIGBjb250ZW50YCBiYWNrIHRvIHRlbXBsYXRlcyBhc1xuICAgICAqICAgYF90ZW1wbGF0ZUluZm9gIChhIHBlcmZvcm1hbmNlIG9wdGltaXphdGlvbiB0byBhdm9pZCBkZWVwIHRlbXBsYXRlXG4gICAgICogICBjbG9uaW5nKVxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoZSBtZW1vaXplZCB0ZW1wbGF0ZSBwYXJzaW5nIHByb2Nlc3MgaXMgZGVzdHJ1Y3RpdmUgdG8gdGhlXG4gICAgICogdGVtcGxhdGU6IGF0dHJpYnV0ZXMgZm9yIGJpbmRpbmdzIGFuZCBkZWNsYXJhdGl2ZSBldmVudCBsaXN0ZW5lcnMgYXJlXG4gICAgICogcmVtb3ZlZCBhZnRlciBiZWluZyBub3RlZCBpbiBub3RlcywgYW5kIGFueSBuZXN0ZWQgYDx0ZW1wbGF0ZT4uY29udGVudGBcbiAgICAgKiBpcyByZW1vdmVkIGFuZCBzdG9yZWQgaW4gbm90ZXMgYXMgd2VsbC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIHN0YW1wXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZUluZm89fSB0ZW1wbGF0ZUluZm8gT3B0aW9uYWwgdGVtcGxhdGUgaW5mbyBhc3NvY2lhdGVkXG4gICAgICogICB3aXRoIHRoZSB0ZW1wbGF0ZSB0byBiZSBzdGFtcGVkOyBpZiBvbWl0dGVkIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlXG4gICAgICogICBhdXRvbWF0aWNhbGx5IHBhcnNlZC5cbiAgICAgKiBAcmV0dXJuIHshU3RhbXBlZFRlbXBsYXRlfSBDbG9uZWQgdGVtcGxhdGUgY29udGVudFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9zdGFtcFRlbXBsYXRlKHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8pIHtcbiAgICAgIC8vIFBvbHlmaWxsIHN1cHBvcnQ6IGJvb3RzdHJhcCB0aGUgdGVtcGxhdGUgaWYgaXQgaGFzIG5vdCBhbHJlYWR5IGJlZW5cbiAgICAgIGlmICh0ZW1wbGF0ZSAmJiAhdGVtcGxhdGUuY29udGVudCAmJlxuICAgICAgICAgIHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50ICYmIEhUTUxUZW1wbGF0ZUVsZW1lbnQuZGVjb3JhdGUpIHtcbiAgICAgICAgSFRNTFRlbXBsYXRlRWxlbWVudC5kZWNvcmF0ZSh0ZW1wbGF0ZSk7XG4gICAgICB9XG4gICAgICAvLyBBY2NlcHRpbmcgdGhlIGB0ZW1wbGF0ZUluZm9gIHZpYSBhbiBhcmd1bWVudCBhbGxvd3MgZm9yIGNyZWF0aW5nXG4gICAgICAvLyBpbnN0YW5jZXMgb2YgdGhlIGB0ZW1wbGF0ZUluZm9gIGJ5IHRoZSBjYWxsZXIsIHVzZWZ1bCBmb3IgYWRkaW5nXG4gICAgICAvLyBpbnN0YW5jZS10aW1lIGluZm9ybWF0aW9uIHRvIHRoZSBwcm90b3R5cGljYWwgZGF0YVxuICAgICAgdGVtcGxhdGVJbmZvID0gdGVtcGxhdGVJbmZvIHx8IHRoaXMuY29uc3RydWN0b3IuX3BhcnNlVGVtcGxhdGUodGVtcGxhdGUpO1xuICAgICAgbGV0IG5vZGVJbmZvID0gdGVtcGxhdGVJbmZvLm5vZGVJbmZvTGlzdDtcbiAgICAgIGxldCBjb250ZW50ID0gdGVtcGxhdGVJbmZvLmNvbnRlbnQgfHwgdGVtcGxhdGUuY29udGVudDtcbiAgICAgIGxldCBkb20gPSAvKiogQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9ICovIChkb2N1bWVudC5pbXBvcnROb2RlKGNvbnRlbnQsIHRydWUpKTtcbiAgICAgIC8vIE5PVEU6IFNoYWR5RG9tIG9wdGltaXphdGlvbiBpbmRpY2F0aW5nIHRoZXJlIGlzIGFuIGluc2VydGlvbiBwb2ludFxuICAgICAgZG9tLl9fbm9JbnNlcnRpb25Qb2ludCA9ICF0ZW1wbGF0ZUluZm8uaGFzSW5zZXJ0aW9uUG9pbnQ7XG4gICAgICBsZXQgbm9kZXMgPSBkb20ubm9kZUxpc3QgPSBuZXcgQXJyYXkobm9kZUluZm8ubGVuZ3RoKTtcbiAgICAgIGRvbS4kID0ge307XG4gICAgICBmb3IgKGxldCBpPTAsIGw9bm9kZUluZm8ubGVuZ3RoLCBpbmZvOyAoaTxsKSAmJiAoaW5mbz1ub2RlSW5mb1tpXSk7IGkrKykge1xuICAgICAgICBsZXQgbm9kZSA9IG5vZGVzW2ldID0gZmluZFRlbXBsYXRlTm9kZShkb20sIGluZm8pO1xuICAgICAgICBhcHBseUlkVG9NYXAodGhpcywgZG9tLiQsIG5vZGUsIGluZm8pO1xuICAgICAgICBhcHBseVRlbXBsYXRlSW5mbyh0aGlzLCBub2RlLCBpbmZvLCB0ZW1wbGF0ZUluZm8pO1xuICAgICAgICBhcHBseUV2ZW50TGlzdGVuZXIodGhpcywgbm9kZSwgaW5mbyk7XG4gICAgICB9XG4gICAgICBkb20gPSAvKiogQHR5cGUgeyFTdGFtcGVkVGVtcGxhdGV9ICovKGRvbSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tc2VsZi1hc3NpZ25cbiAgICAgIHJldHVybiBkb207XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBhbiBldmVudCBsaXN0ZW5lciBieSBtZXRob2QgbmFtZSBmb3IgdGhlIGV2ZW50IHByb3ZpZGVkLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgZ2VuZXJhdGVzIGEgaGFuZGxlciBmdW5jdGlvbiB0aGF0IGxvb2tzIHVwIHRoZSBtZXRob2RcbiAgICAgKiBuYW1lIGF0IGhhbmRsaW5nIHRpbWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIGFkZCBsaXN0ZW5lciBvblxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiBldmVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIE5hbWUgb2YgbWV0aG9kXG4gICAgICogQHBhcmFtIHsqPX0gY29udGV4dCBDb250ZXh0IHRoZSBtZXRob2Qgd2lsbCBiZSBjYWxsZWQgb24gKGRlZmF1bHRzXG4gICAgICogICB0byBgbm9kZWApXG4gICAgICogQHJldHVybiB7RnVuY3Rpb259IEdlbmVyYXRlZCBoYW5kbGVyIGZ1bmN0aW9uXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2FkZE1ldGhvZEV2ZW50TGlzdGVuZXJUb05vZGUobm9kZSwgZXZlbnROYW1lLCBtZXRob2ROYW1lLCBjb250ZXh0KSB7XG4gICAgICBjb250ZXh0ID0gY29udGV4dCB8fCBub2RlO1xuICAgICAgbGV0IGhhbmRsZXIgPSBjcmVhdGVOb2RlRXZlbnRIYW5kbGVyKGNvbnRleHQsIGV2ZW50TmFtZSwgbWV0aG9kTmFtZSk7XG4gICAgICB0aGlzLl9hZGRFdmVudExpc3RlbmVyVG9Ob2RlKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICByZXR1cm4gaGFuZGxlcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBwb2ludCBmb3IgYWRkaW5nIGN1c3RvbSBvciBzaW11bGF0ZWQgZXZlbnQgaGFuZGxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIGFkZCBldmVudCBsaXN0ZW5lciB0b1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiBldmVudFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUV2ZW50KTp2b2lkfSBoYW5kbGVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGFkZFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2FkZEV2ZW50TGlzdGVuZXJUb05vZGUobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBwb2ludCBmb3IgYWRkaW5nIGN1c3RvbSBvciBzaW11bGF0ZWQgZXZlbnQgaGFuZGxpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIHJlbW92ZSBldmVudCBsaXN0ZW5lciBmcm9tXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIGV2ZW50XG4gICAgICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpOnZvaWR9IGhhbmRsZXIgTGlzdGVuZXIgZnVuY3Rpb24gdG8gcmVtb3ZlXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfcmVtb3ZlRXZlbnRMaXN0ZW5lckZyb21Ob2RlKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gVGVtcGxhdGVTdGFtcDtcblxufSk7XG4iLCAiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKiBAc3VwcHJlc3Mge2NoZWNrUHJvdG90eXBhbFR5cGVzfVxuICogQGxpY2Vuc2UgQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmRcbiAqIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXlcbiAqIGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnlcbiAqIEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVBcbiAqIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4uL3V0aWxzL3dyYXAuanMnO1xuaW1wb3J0IHsgZGVkdXBpbmdNaXhpbiB9IGZyb20gJy4uL3V0aWxzL21peGluLmpzJztcbmltcG9ydCB7IHJvb3QsIGlzQW5jZXN0b3IsIGlzRGVzY2VuZGFudCwgZ2V0LCB0cmFuc2xhdGUsIGlzUGF0aCwgc2V0LCBub3JtYWxpemUgfSBmcm9tICcuLi91dGlscy9wYXRoLmpzJztcbi8qIGZvciBub3RpZnksIHJlZmxlY3QgKi9cbmltcG9ydCB7IGNhbWVsVG9EYXNoQ2FzZSwgZGFzaFRvQ2FtZWxDYXNlIH0gZnJvbSAnLi4vdXRpbHMvY2FzZS1tYXAuanMnO1xuaW1wb3J0IHsgUHJvcGVydHlBY2Nlc3NvcnMgfSBmcm9tICcuL3Byb3BlcnR5LWFjY2Vzc29ycy5qcyc7XG4vKiBmb3IgYW5ub3RhdGVkIGVmZmVjdHMgKi9cbmltcG9ydCB7IFRlbXBsYXRlU3RhbXAgfSBmcm9tICcuL3RlbXBsYXRlLXN0YW1wLmpzJztcbmltcG9ydCB7IHNhbml0aXplRE9NVmFsdWUsIGxlZ2FjeVVuZGVmaW5lZCwgb3JkZXJlZENvbXB1dGVkLCByZW1vdmVOZXN0ZWRUZW1wbGF0ZXMsIGZhc3REb21JZiB9IGZyb20gJy4uL3V0aWxzL3NldHRpbmdzLmpzJztcblxuLy8gTW9ub3RvbmljYWxseSBpbmNyZWFzaW5nIHVuaXF1ZSBJRCB1c2VkIGZvciBkZS1kdXBpbmcgZWZmZWN0cyB0cmlnZ2VyZWRcbi8vIGZyb20gbXVsdGlwbGUgcHJvcGVydGllcyBpbiB0aGUgc2FtZSB0dXJuXG5sZXQgZGVkdXBlSWQgPSAwO1xuXG5jb25zdCBOT09QID0gW107XG5cbi8qKlxuICogUHJvcGVydHkgZWZmZWN0IHR5cGVzOyBlZmZlY3RzIGFyZSBzdG9yZWQgb24gdGhlIHByb3RvdHlwZSB1c2luZyB0aGVzZSBrZXlzXG4gKiBAZW51bSB7c3RyaW5nfVxuICovXG5jb25zdCBUWVBFUyA9IHtcbiAgQ09NUFVURTogJ19fY29tcHV0ZUVmZmVjdHMnLFxuICBSRUZMRUNUOiAnX19yZWZsZWN0RWZmZWN0cycsXG4gIE5PVElGWTogJ19fbm90aWZ5RWZmZWN0cycsXG4gIFBST1BBR0FURTogJ19fcHJvcGFnYXRlRWZmZWN0cycsXG4gIE9CU0VSVkU6ICdfX29ic2VydmVFZmZlY3RzJyxcbiAgUkVBRF9PTkxZOiAnX19yZWFkT25seSdcbn07XG5cbmNvbnN0IENPTVBVVEVfSU5GTyA9ICdfX2NvbXB1dGVJbmZvJztcblxuLyoqIEBjb25zdCB7IVJlZ0V4cH0gKi9cbmNvbnN0IGNhcGl0YWxBdHRyaWJ1dGVSZWdleCA9IC9bQS1aXS87XG5cbi8qKlxuICogQHR5cGVkZWYge3tcbiAqIG5hbWU6IChzdHJpbmcgfCB1bmRlZmluZWQpLFxuICogc3RydWN0dXJlZDogKGJvb2xlYW4gfCB1bmRlZmluZWQpLFxuICogd2lsZGNhcmQ6IChib29sZWFuIHwgdW5kZWZpbmVkKVxuICogfX1cbiAqL1xubGV0IERhdGFUcmlnZ2VyOyAvL2VzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogaW5mbzogPyxcbiAqIHRyaWdnZXI6ICghRGF0YVRyaWdnZXIgfCB1bmRlZmluZWQpLFxuICogZm46ICghRnVuY3Rpb24gfCB1bmRlZmluZWQpXG4gKiB9fVxuICovXG5sZXQgRGF0YUVmZmVjdDsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbi8qKlxuICogRW5zdXJlcyB0aGF0IHRoZSBtb2RlbCBoYXMgYW4gb3duLXByb3BlcnR5IG1hcCBvZiBlZmZlY3RzIGZvciB0aGUgZ2l2ZW4gdHlwZS5cbiAqIFRoZSBtb2RlbCBtYXkgYmUgYSBwcm90b3R5cGUgb3IgYW4gaW5zdGFuY2UuXG4gKlxuICogUHJvcGVydHkgZWZmZWN0cyBhcmUgc3RvcmVkIGFzIGFycmF5cyBvZiBlZmZlY3RzIGJ5IHByb3BlcnR5IGluIGEgbWFwLFxuICogYnkgbmFtZWQgdHlwZSBvbiB0aGUgbW9kZWwuIGUuZy5cbiAqXG4gKiAgIF9fY29tcHV0ZUVmZmVjdHM6IHtcbiAqICAgICBmb286IFsgLi4uIF0sXG4gKiAgICAgYmFyOiBbIC4uLiBdXG4gKiAgIH1cbiAqXG4gKiBJZiB0aGUgbW9kZWwgZG9lcyBub3QgeWV0IGhhdmUgYW4gZWZmZWN0IG1hcCBmb3IgdGhlIHR5cGUsIG9uZSBpcyBjcmVhdGVkXG4gKiBhbmQgcmV0dXJuZWQuICBJZiBpdCBkb2VzLCBidXQgaXQgaXMgbm90IGFuIG93biBwcm9wZXJ0eSAoaS5lLiB0aGVcbiAqIHByb3RvdHlwZSBoYWQgZWZmZWN0cyksIHRoZSB0aGUgbWFwIGlzIGRlZXBseSBjbG9uZWQgYW5kIHRoZSBjb3B5IGlzXG4gKiBzZXQgb24gdGhlIG1vZGVsIGFuZCByZXR1cm5lZCwgcmVhZHkgZm9yIG5ldyBlZmZlY3RzIHRvIGJlIGFkZGVkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBtb2RlbCBQcm90b3R5cGUgb3IgaW5zdGFuY2VcbiAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIFByb3BlcnR5IGVmZmVjdCB0eXBlXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBjbG9uZUFycmF5cyBDbG9uZSBhbnkgYXJyYXlzIGFzc2lnbmVkIHRvIHRoZSBtYXAgd2hlblxuICogICBleHRlbmRpbmcgYSBzdXBlcmNsYXNzIG1hcCBvbnRvIHRoaXMgc3ViY2xhc3NcbiAqIEByZXR1cm4ge09iamVjdH0gVGhlIG93bi1wcm9wZXJ0eSBtYXAgb2YgZWZmZWN0cyBmb3IgdGhlIGdpdmVuIHR5cGVcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGVuc3VyZU93bkVmZmVjdE1hcChtb2RlbCwgdHlwZSwgY2xvbmVBcnJheXMpIHtcbiAgbGV0IGVmZmVjdHMgPSBtb2RlbFt0eXBlXTtcbiAgaWYgKCFlZmZlY3RzKSB7XG4gICAgZWZmZWN0cyA9IG1vZGVsW3R5cGVdID0ge307XG4gIH0gZWxzZSBpZiAoIW1vZGVsLmhhc093blByb3BlcnR5KHR5cGUpKSB7XG4gICAgZWZmZWN0cyA9IG1vZGVsW3R5cGVdID0gT2JqZWN0LmNyZWF0ZShtb2RlbFt0eXBlXSk7XG4gICAgaWYgKGNsb25lQXJyYXlzKSB7XG4gICAgICBmb3IgKGxldCBwIGluIGVmZmVjdHMpIHtcbiAgICAgICAgbGV0IHByb3RvRnggPSBlZmZlY3RzW3BdO1xuICAgICAgICAvLyBQZXJmIG9wdGltaXphdGlvbiBvdmVyIEFycmF5LnNsaWNlXG4gICAgICAgIGxldCBpbnN0RnggPSBlZmZlY3RzW3BdID0gQXJyYXkocHJvdG9GeC5sZW5ndGgpO1xuICAgICAgICBmb3IgKGxldCBpPTA7IGk8cHJvdG9GeC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGluc3RGeFtpXSA9IHByb3RvRnhbaV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVmZmVjdHM7XG59XG5cbi8vIC0tIGVmZmVjdHMgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vKipcbiAqIFJ1bnMgYWxsIGVmZmVjdHMgb2YgYSBnaXZlbiB0eXBlIGZvciB0aGUgZ2l2ZW4gc2V0IG9mIHByb3BlcnR5IGNoYW5nZXNcbiAqIG9uIGFuIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSB3aXRoIGVmZmVjdHMgdG8gcnVuXG4gKiBAcGFyYW0gez9PYmplY3R9IGVmZmVjdHMgT2JqZWN0IG1hcCBvZiBwcm9wZXJ0eS10by1BcnJheSBvZiBlZmZlY3RzXG4gKiBAcGFyYW0gez9PYmplY3R9IHByb3BzIEJhZyBvZiBjdXJyZW50IHByb3BlcnR5IGNoYW5nZXNcbiAqIEBwYXJhbSB7P09iamVjdD19IG9sZFByb3BzIEJhZyBvZiBwcmV2aW91cyB2YWx1ZXMgZm9yIGNoYW5nZWQgcHJvcGVydGllc1xuICogQHBhcmFtIHtib29sZWFuPX0gaGFzUGF0aHMgVHJ1ZSB3aXRoIGBwcm9wc2AgY29udGFpbnMgb25lIG9yIG1vcmUgcGF0aHNcbiAqIEBwYXJhbSB7Kj19IGV4dHJhQXJncyBBZGRpdGlvbmFsIG1ldGFkYXRhIHRvIHBhc3MgdG8gZWZmZWN0IGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGFuIGVmZmVjdCByYW4gZm9yIHRoaXMgcHJvcGVydHlcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJ1bkVmZmVjdHMoaW5zdCwgZWZmZWN0cywgcHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocywgZXh0cmFBcmdzKSB7XG4gIGlmIChlZmZlY3RzKSB7XG4gICAgbGV0IHJhbiA9IGZhbHNlO1xuICAgIGNvbnN0IGlkID0gZGVkdXBlSWQrKztcbiAgICBmb3IgKGxldCBwcm9wIGluIHByb3BzKSB7XG4gICAgICAvLyBJbmxpbmUgYHJ1bkVmZmVjdHNGb3JQcm9wZXJ0eWAgZm9yIHBlcmYuXG4gICAgICBsZXQgcm9vdFByb3BlcnR5ID0gaGFzUGF0aHMgPyByb290KHByb3ApIDogcHJvcDtcbiAgICAgIGxldCBmeHMgPSBlZmZlY3RzW3Jvb3RQcm9wZXJ0eV07XG4gICAgICBpZiAoZnhzKSB7XG4gICAgICAgIGZvciAobGV0IGk9MCwgbD1meHMubGVuZ3RoLCBmeDsgKGk8bCkgJiYgKGZ4PWZ4c1tpXSk7IGkrKykge1xuICAgICAgICAgIGlmICgoIWZ4LmluZm8gfHwgZnguaW5mby5sYXN0UnVuICE9PSBpZCkgJiZcbiAgICAgICAgICAgICAgKCFoYXNQYXRocyB8fCBwYXRoTWF0Y2hlc1RyaWdnZXIocHJvcCwgZngudHJpZ2dlcikpKSB7XG4gICAgICAgICAgICBpZiAoZnguaW5mbykge1xuICAgICAgICAgICAgICBmeC5pbmZvLmxhc3RSdW4gPSBpZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZ4LmZuKGluc3QsIHByb3AsIHByb3BzLCBvbGRQcm9wcywgZnguaW5mbywgaGFzUGF0aHMsIGV4dHJhQXJncyk7XG4gICAgICAgICAgICByYW4gPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmFuO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBSdW5zIGEgbGlzdCBvZiBlZmZlY3RzIGZvciBhIGdpdmVuIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSB3aXRoIGVmZmVjdHMgdG8gcnVuXG4gKiBAcGFyYW0geyFPYmplY3R9IGVmZmVjdHMgT2JqZWN0IG1hcCBvZiBwcm9wZXJ0eS10by1BcnJheSBvZiBlZmZlY3RzXG4gKiBAcGFyYW0ge251bWJlcn0gZGVkdXBlSWQgQ291bnRlciB1c2VkIGZvciBkZS1kdXBpbmcgZWZmZWN0c1xuICogQHBhcmFtIHtzdHJpbmd9IHByb3AgTmFtZSBvZiBjaGFuZ2VkIHByb3BlcnR5XG4gKiBAcGFyYW0geyp9IHByb3BzIENoYW5nZWQgcHJvcGVydGllc1xuICogQHBhcmFtIHsqfSBvbGRQcm9wcyBPbGQgcHJvcGVydGllc1xuICogQHBhcmFtIHtib29sZWFuPX0gaGFzUGF0aHMgVHJ1ZSB3aXRoIGBwcm9wc2AgY29udGFpbnMgb25lIG9yIG1vcmUgcGF0aHNcbiAqIEBwYXJhbSB7Kj19IGV4dHJhQXJncyBBZGRpdGlvbmFsIG1ldGFkYXRhIHRvIHBhc3MgdG8gZWZmZWN0IGZ1bmN0aW9uXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGFuIGVmZmVjdCByYW4gZm9yIHRoaXMgcHJvcGVydHlcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHJ1bkVmZmVjdHNGb3JQcm9wZXJ0eShpbnN0LCBlZmZlY3RzLCBkZWR1cGVJZCwgcHJvcCwgcHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocywgZXh0cmFBcmdzKSB7XG4gIGxldCByYW4gPSBmYWxzZTtcbiAgbGV0IHJvb3RQcm9wZXJ0eSA9IGhhc1BhdGhzID8gcm9vdChwcm9wKSA6IHByb3A7XG4gIGxldCBmeHMgPSBlZmZlY3RzW3Jvb3RQcm9wZXJ0eV07XG4gIGlmIChmeHMpIHtcbiAgICBmb3IgKGxldCBpPTAsIGw9ZnhzLmxlbmd0aCwgZng7IChpPGwpICYmIChmeD1meHNbaV0pOyBpKyspIHtcbiAgICAgIGlmICgoIWZ4LmluZm8gfHwgZnguaW5mby5sYXN0UnVuICE9PSBkZWR1cGVJZCkgJiZcbiAgICAgICAgICAoIWhhc1BhdGhzIHx8IHBhdGhNYXRjaGVzVHJpZ2dlcihwcm9wLCBmeC50cmlnZ2VyKSkpIHtcbiAgICAgICAgaWYgKGZ4LmluZm8pIHtcbiAgICAgICAgICBmeC5pbmZvLmxhc3RSdW4gPSBkZWR1cGVJZDtcbiAgICAgICAgfVxuICAgICAgICBmeC5mbihpbnN0LCBwcm9wLCBwcm9wcywgb2xkUHJvcHMsIGZ4LmluZm8sIGhhc1BhdGhzLCBleHRyYUFyZ3MpO1xuICAgICAgICByYW4gPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmFuO1xufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhIHByb3BlcnR5L3BhdGggdGhhdCBoYXMgY2hhbmdlZCBtYXRjaGVzIHRoZSB0cmlnZ2VyXG4gKiBjcml0ZXJpYSBmb3IgYW4gZWZmZWN0LiAgQSB0cmlnZ2VyIGlzIGEgZGVzY3JpcHRvciB3aXRoIHRoZSBmb2xsb3dpbmdcbiAqIHN0cnVjdHVyZSwgd2hpY2ggbWF0Y2hlcyB0aGUgZGVzY3JpcHRvcnMgcmV0dXJuZWQgZnJvbSBgcGFyc2VBcmdgLlxuICogZS5nLiBmb3IgYGZvby5iYXIuKmA6XG4gKiBgYGBcbiAqIHRyaWdnZXI6IHtcbiAqICAgbmFtZTogJ2EuYicsXG4gKiAgIHN0cnVjdHVyZWQ6IHRydWUsXG4gKiAgIHdpbGRjYXJkOiB0cnVlXG4gKiB9XG4gKiBgYGBcbiAqIElmIG5vIHRyaWdnZXIgaXMgZ2l2ZW4sIHRoZSBwYXRoIGlzIGRlZW1lZCB0byBtYXRjaC5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQYXRoIG9yIHByb3BlcnR5IHRoYXQgY2hhbmdlZFxuICogQHBhcmFtIHs/RGF0YVRyaWdnZXJ9IHRyaWdnZXIgRGVzY3JpcHRvclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcGF0aCBtYXRjaGVkIHRoZSB0cmlnZ2VyXG4gKi9cbmZ1bmN0aW9uIHBhdGhNYXRjaGVzVHJpZ2dlcihwYXRoLCB0cmlnZ2VyKSB7XG4gIGlmICh0cmlnZ2VyKSB7XG4gICAgbGV0IHRyaWdnZXJQYXRoID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovICh0cmlnZ2VyLm5hbWUpO1xuICAgIHJldHVybiAodHJpZ2dlclBhdGggPT0gcGF0aCkgfHxcbiAgICAgICAgISEodHJpZ2dlci5zdHJ1Y3R1cmVkICYmIGlzQW5jZXN0b3IodHJpZ2dlclBhdGgsIHBhdGgpKSB8fFxuICAgICAgICAhISh0cmlnZ2VyLndpbGRjYXJkICYmIGlzRGVzY2VuZGFudCh0cmlnZ2VyUGF0aCwgcGF0aCkpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgXCJvYnNlcnZlclwiIGVmZmVjdC5cbiAqXG4gKiBDYWxscyB0aGUgbWV0aG9kIHdpdGggYGluZm8ubWV0aG9kTmFtZWAgb24gdGhlIGluc3RhbmNlLCBwYXNzaW5nIHRoZVxuICogbmV3IGFuZCBvbGQgdmFsdWVzLlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSB0aGUgZWZmZWN0IHdpbGwgYmUgcnVuIG9uXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiBwcm9wZXJ0eVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBjdXJyZW50IHByb3BlcnR5IGNoYW5nZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7P30gaW5mbyBFZmZlY3QgbWV0YWRhdGFcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5PYnNlcnZlckVmZmVjdChpbnN0LCBwcm9wZXJ0eSwgcHJvcHMsIG9sZFByb3BzLCBpbmZvKSB7XG4gIGxldCBmbiA9IHR5cGVvZiBpbmZvLm1ldGhvZCA9PT0gXCJzdHJpbmdcIiA/IGluc3RbaW5mby5tZXRob2RdIDogaW5mby5tZXRob2Q7XG4gIGxldCBjaGFuZ2VkUHJvcCA9IGluZm8ucHJvcGVydHk7XG4gIGlmIChmbikge1xuICAgIGZuLmNhbGwoaW5zdCwgaW5zdC5fX2RhdGFbY2hhbmdlZFByb3BdLCBvbGRQcm9wc1tjaGFuZ2VkUHJvcF0pO1xuICB9IGVsc2UgaWYgKCFpbmZvLmR5bmFtaWNGbikge1xuICAgIGNvbnNvbGUud2Fybignb2JzZXJ2ZXIgbWV0aG9kIGAnICsgaW5mby5tZXRob2QgKyAnYCBub3QgZGVmaW5lZCcpO1xuICB9XG59XG5cbi8qKlxuICogUnVucyBcIm5vdGlmeVwiIGVmZmVjdHMgZm9yIGEgc2V0IG9mIGNoYW5nZWQgcHJvcGVydGllcy5cbiAqXG4gKiBUaGlzIG1ldGhvZCBkaWZmZXJzIGZyb20gdGhlIGdlbmVyaWMgYHJ1bkVmZmVjdHNgIG1ldGhvZCBpbiB0aGF0IGl0XG4gKiB3aWxsIGRpc3BhdGNoIHBhdGggbm90aWZpY2F0aW9uIGV2ZW50cyBpbiB0aGUgY2FzZSB0aGF0IHRoZSBwcm9wZXJ0eVxuICogY2hhbmdlZCB3YXMgYSBwYXRoIGFuZCB0aGUgcm9vdCBwcm9wZXJ0eSBmb3IgdGhhdCBwYXRoIGRpZG4ndCBoYXZlIGFcbiAqIFwibm90aWZ5XCIgZWZmZWN0LiAgVGhpcyBpcyB0byBtYWludGFpbiAxLjAgYmVoYXZpb3IgdGhhdCBkaWQgbm90IHJlcXVpcmVcbiAqIGBub3RpZnk6IHRydWVgIHRvIGVuc3VyZSBvYmplY3Qgc3ViLXByb3BlcnR5IG5vdGlmaWNhdGlvbnMgd2VyZVxuICogc2VudC5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgaW5zdGFuY2Ugd2l0aCBlZmZlY3RzIHRvIHJ1blxuICogQHBhcmFtIHtPYmplY3R9IG5vdGlmeVByb3BzIEJhZyBvZiBwcm9wZXJ0aWVzIHRvIG5vdGlmeVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBjdXJyZW50IHByb3BlcnR5IGNoYW5nZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzUGF0aHMgVHJ1ZSB3aXRoIGBwcm9wc2AgY29udGFpbnMgb25lIG9yIG1vcmUgcGF0aHNcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5Ob3RpZnlFZmZlY3RzKGluc3QsIG5vdGlmeVByb3BzLCBwcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKSB7XG4gIC8vIE5vdGlmeVxuICBsZXQgZnhzID0gaW5zdFtUWVBFUy5OT1RJRlldO1xuICBsZXQgbm90aWZpZWQ7XG4gIGxldCBpZCA9IGRlZHVwZUlkKys7XG4gIC8vIFRyeSBub3JtYWwgbm90aWZ5IGVmZmVjdHM7IGlmIG5vbmUsIGZhbGwgYmFjayB0byB0cnkgcGF0aCBub3RpZmljYXRpb25cbiAgZm9yIChsZXQgcHJvcCBpbiBub3RpZnlQcm9wcykge1xuICAgIGlmIChub3RpZnlQcm9wc1twcm9wXSkge1xuICAgICAgaWYgKGZ4cyAmJiBydW5FZmZlY3RzRm9yUHJvcGVydHkoaW5zdCwgZnhzLCBpZCwgcHJvcCwgcHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocykpIHtcbiAgICAgICAgbm90aWZpZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIGlmIChoYXNQYXRocyAmJiBub3RpZnlQYXRoKGluc3QsIHByb3AsIHByb3BzKSkge1xuICAgICAgICBub3RpZmllZCA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIEZsdXNoIGhvc3QgaWYgd2UgYWN0dWFsbHkgbm90aWZpZWQgYW5kIGhvc3Qgd2FzIGJhdGNoaW5nXG4gIC8vIEFuZCB0aGUgaG9zdCBoYXMgYWxyZWFkeSBpbml0aWFsaXplZCBjbGllbnRzOyB0aGlzIHByZXZlbnRzXG4gIC8vIGFuIGlzc3VlIHdpdGggYSBob3N0IG9ic2VydmluZyBkYXRhIGNoYW5nZXMgYmVmb3JlIGNsaWVudHMgYXJlIHJlYWR5LlxuICBsZXQgaG9zdDtcbiAgaWYgKG5vdGlmaWVkICYmIChob3N0ID0gaW5zdC5fX2RhdGFIb3N0KSAmJiBob3N0Ll9pbnZhbGlkYXRlUHJvcGVydGllcykge1xuICAgIGhvc3QuX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNwYXRjaGVzIHtwcm9wZXJ0eX0tY2hhbmdlZCBldmVudHMgd2l0aCBwYXRoIGluZm9ybWF0aW9uIGluIHRoZSBkZXRhaWxcbiAqIG9iamVjdCB0byBpbmRpY2F0ZSBhIHN1Yi1wYXRoIG9mIHRoZSBwcm9wZXJ0eSB3YXMgY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgZWxlbWVudCBmcm9tIHdoaWNoIHRvIGZpcmUgdGhlXG4gKiAgICAgZXZlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRoYXQgd2FzIGNoYW5nZWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBCYWcgb2YgY3VycmVudCBwcm9wZXJ0eSBjaGFuZ2VzXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIHBhdGggd2FzIG5vdGlmaWVkXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBub3RpZnlQYXRoKGluc3QsIHBhdGgsIHByb3BzKSB7XG4gIGxldCByb290UHJvcGVydHkgPSByb290KHBhdGgpO1xuICBpZiAocm9vdFByb3BlcnR5ICE9PSBwYXRoKSB7XG4gICAgbGV0IGV2ZW50TmFtZSA9IGNhbWVsVG9EYXNoQ2FzZShyb290UHJvcGVydHkpICsgJy1jaGFuZ2VkJztcbiAgICBkaXNwYXRjaE5vdGlmeUV2ZW50KGluc3QsIGV2ZW50TmFtZSwgcHJvcHNbcGF0aF0sIHBhdGgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBEaXNwYXRjaGVzIHtwcm9wZXJ0eX0tY2hhbmdlZCBldmVudHMgdG8gaW5kaWNhdGUgYSBwcm9wZXJ0eSAob3IgcGF0aClcbiAqIGNoYW5nZWQuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGVsZW1lbnQgZnJvbSB3aGljaCB0byBmaXJlIHRoZVxuICogICAgIGV2ZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBzZW5kXG4gKiAgICAgKCd7cHJvcGVydHl9LWNoYW5nZWQnKVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgb2YgdGhlIGNoYW5nZWQgcHJvcGVydHlcbiAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZH0gcGF0aCBJZiBhIHN1Yi1wYXRoIG9mIHRoaXMgcHJvcGVydHlcbiAqICAgICBjaGFuZ2VkLCB0aGUgcGF0aCB0aGF0IGNoYW5nZWQgKG9wdGlvbmFsKS5cbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9XG4gKi9cbmZ1bmN0aW9uIGRpc3BhdGNoTm90aWZ5RXZlbnQoaW5zdCwgZXZlbnROYW1lLCB2YWx1ZSwgcGF0aCkge1xuICBsZXQgZGV0YWlsID0ge1xuICAgIHZhbHVlOiB2YWx1ZSxcbiAgICBxdWV1ZVByb3BlcnR5OiB0cnVlXG4gIH07XG4gIGlmIChwYXRoKSB7XG4gICAgZGV0YWlsLnBhdGggPSBwYXRoO1xuICB9XG4gIC8vIEFzIGEgcGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uLCB3ZSBjb3VsZCBlbGlkZSB0aGUgd3JhcCBoZXJlIHNpbmNlIG5vdGlmeWluZ1xuICAvLyBldmVudHMgYXJlIG5vbi1idWJibGluZyBhbmQgc2hvdWxkbid0IG5lZWQgcmV0YXJnZXRpbmcuIEhvd2V2ZXIsIGEgdmVyeVxuICAvLyBzbWFsbCBudW1iZXIgb2YgaW50ZXJuYWwgdGVzdHMgZmFpbGVkIGluIG9ic2N1cmUgd2F5cywgd2hpY2ggbWF5IGluZGljYXRlXG4gIC8vIHVzZXIgY29kZSByZWxpZWQgb24gdGltaW5nIGRpZmZlcmVuY2VzIHJlc3VsdGluZyBmcm9tIFNoYWR5RE9NIGZsdXNoaW5nXG4gIC8vIGFzIGEgcmVzdWx0IG9mIHRoZSB3cmFwcGVkIGBkaXNwYXRjaEV2ZW50YC5cbiAgd3JhcCgvKiogQHR5cGUgeyFIVE1MRWxlbWVudH0gKi8oaW5zdCkpLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KGV2ZW50TmFtZSwgeyBkZXRhaWwgfSkpO1xufVxuXG4vKipcbiAqIEltcGxlbWVudHMgdGhlIFwibm90aWZ5XCIgZWZmZWN0LlxuICpcbiAqIERpc3BhdGNoZXMgYSBub24tYnViYmxpbmcgZXZlbnQgbmFtZWQgYGluZm8uZXZlbnROYW1lYCBvbiB0aGUgaW5zdGFuY2VcbiAqIHdpdGggYSBkZXRhaWwgb2JqZWN0IGNvbnRhaW5pbmcgdGhlIG5ldyBgdmFsdWVgLlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSB0aGUgZWZmZWN0IHdpbGwgYmUgcnVuIG9uXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiBwcm9wZXJ0eVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBjdXJyZW50IHByb3BlcnR5IGNoYW5nZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7P30gaW5mbyBFZmZlY3QgbWV0YWRhdGFcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gaGFzUGF0aHMgVHJ1ZSB3aXRoIGBwcm9wc2AgY29udGFpbnMgb25lIG9yIG1vcmUgcGF0aHNcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5Ob3RpZnlFZmZlY3QoaW5zdCwgcHJvcGVydHksIHByb3BzLCBvbGRQcm9wcywgaW5mbywgaGFzUGF0aHMpIHtcbiAgbGV0IHJvb3RQcm9wZXJ0eSA9IGhhc1BhdGhzID8gcm9vdChwcm9wZXJ0eSkgOiBwcm9wZXJ0eTtcbiAgbGV0IHBhdGggPSByb290UHJvcGVydHkgIT0gcHJvcGVydHkgPyBwcm9wZXJ0eSA6IG51bGw7XG4gIGxldCB2YWx1ZSA9IHBhdGggPyBnZXQoaW5zdCwgcGF0aCkgOiBpbnN0Ll9fZGF0YVtwcm9wZXJ0eV07XG4gIGlmIChwYXRoICYmIHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IHByb3BzW3Byb3BlcnR5XTsgIC8vIHNwZWNpZmljYWxseSBmb3IgLnNwbGljZXNcbiAgfVxuICBkaXNwYXRjaE5vdGlmeUV2ZW50KGluc3QsIGluZm8uZXZlbnROYW1lLCB2YWx1ZSwgcGF0aCk7XG59XG5cbi8qKlxuICogSGFuZGxlciBmdW5jdGlvbiBmb3IgMi13YXkgbm90aWZpY2F0aW9uIGV2ZW50cy4gUmVjZWl2ZXMgY29udGV4dFxuICogaW5mb3JtYXRpb24gY2FwdHVyZWQgaW4gdGhlIGBhZGROb3RpZnlMaXN0ZW5lcmAgY2xvc3VyZSBmcm9tIHRoZVxuICogYF9fbm90aWZ5TGlzdGVuZXJzYCBtZXRhZGF0YS5cbiAqXG4gKiBTZXRzIHRoZSB2YWx1ZSBvZiB0aGUgbm90aWZpZWQgcHJvcGVydHkgdG8gdGhlIGhvc3QgcHJvcGVydHkgb3IgcGF0aC4gIElmXG4gKiB0aGUgZXZlbnQgY29udGFpbmVkIHBhdGggaW5mb3JtYXRpb24sIHRyYW5zbGF0ZSB0aGF0IHBhdGggdG8gdGhlIGhvc3RcbiAqIHNjb3BlJ3MgbmFtZSBmb3IgdGhhdCBwYXRoIGZpcnN0LlxuICpcbiAqIEBwYXJhbSB7Q3VzdG9tRXZlbnR9IGV2ZW50IE5vdGlmaWNhdGlvbiBldmVudCAoZS5nLiAnPHByb3BlcnR5Pi1jaGFuZ2VkJylcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IEhvc3QgZWxlbWVudCBpbnN0YW5jZSBoYW5kbGluZyB0aGVcbiAqICAgICBub3RpZmljYXRpb24gZXZlbnRcbiAqIEBwYXJhbSB7c3RyaW5nfSBmcm9tUHJvcCBDaGlsZCBlbGVtZW50IHByb3BlcnR5IHRoYXQgd2FzIGJvdW5kXG4gKiBAcGFyYW0ge3N0cmluZ30gdG9QYXRoIEhvc3QgcHJvcGVydHkvcGF0aCB0aGF0IHdhcyBib3VuZFxuICogQHBhcmFtIHtib29sZWFufSBuZWdhdGUgV2hldGhlciB0aGUgYmluZGluZyB3YXMgbmVnYXRlZFxuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGhhbmRsZU5vdGlmaWNhdGlvbihldmVudCwgaW5zdCwgZnJvbVByb3AsIHRvUGF0aCwgbmVnYXRlKSB7XG4gIGxldCB2YWx1ZTtcbiAgbGV0IGRldGFpbCA9IC8qKiBAdHlwZSB7T2JqZWN0fSAqLyhldmVudC5kZXRhaWwpO1xuICBsZXQgZnJvbVBhdGggPSBkZXRhaWwgJiYgZGV0YWlsLnBhdGg7XG4gIGlmIChmcm9tUGF0aCkge1xuICAgIHRvUGF0aCA9IHRyYW5zbGF0ZShmcm9tUHJvcCwgdG9QYXRoLCBmcm9tUGF0aCk7XG4gICAgdmFsdWUgPSBkZXRhaWwgJiYgZGV0YWlsLnZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHZhbHVlID0gZXZlbnQuY3VycmVudFRhcmdldFtmcm9tUHJvcF07XG4gIH1cbiAgdmFsdWUgPSBuZWdhdGUgPyAhdmFsdWUgOiB2YWx1ZTtcbiAgaWYgKCFpbnN0W1RZUEVTLlJFQURfT05MWV0gfHwgIWluc3RbVFlQRVMuUkVBRF9PTkxZXVt0b1BhdGhdKSB7XG4gICAgaWYgKGluc3QuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aCh0b1BhdGgsIHZhbHVlLCB0cnVlLCBCb29sZWFuKGZyb21QYXRoKSlcbiAgICAgICYmICghZGV0YWlsIHx8ICFkZXRhaWwucXVldWVQcm9wZXJ0eSkpIHtcbiAgICAgIGluc3QuX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgXCJyZWZsZWN0XCIgZWZmZWN0LlxuICpcbiAqIFNldHMgdGhlIGF0dHJpYnV0ZSBuYW1lZCBgaW5mby5hdHRyTmFtZWAgdG8gdGhlIGdpdmVuIHByb3BlcnR5IHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSB0aGUgZWZmZWN0IHdpbGwgYmUgcnVuIG9uXG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiBwcm9wZXJ0eVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBjdXJyZW50IHByb3BlcnR5IGNoYW5nZXNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7P30gaW5mbyBFZmZlY3QgbWV0YWRhdGFcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5SZWZsZWN0RWZmZWN0KGluc3QsIHByb3BlcnR5LCBwcm9wcywgb2xkUHJvcHMsIGluZm8pIHtcbiAgbGV0IHZhbHVlID0gaW5zdC5fX2RhdGFbcHJvcGVydHldO1xuICBpZiAoc2FuaXRpemVET01WYWx1ZSkge1xuICAgIHZhbHVlID0gc2FuaXRpemVET01WYWx1ZSh2YWx1ZSwgaW5mby5hdHRyTmFtZSwgJ2F0dHJpYnV0ZScsIC8qKiBAdHlwZSB7Tm9kZX0gKi8oaW5zdCkpO1xuICB9XG4gIGluc3QuX3Byb3BlcnR5VG9BdHRyaWJ1dGUocHJvcGVydHksIGluZm8uYXR0ck5hbWUsIHZhbHVlKTtcbn1cblxuLyoqXG4gKiBSdW5zIFwiY29tcHV0ZWRcIiBlZmZlY3RzIGZvciBhIHNldCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMuXG4gKlxuICogVGhpcyBtZXRob2QgZGlmZmVycyBmcm9tIHRoZSBnZW5lcmljIGBydW5FZmZlY3RzYCBtZXRob2QgaW4gdGhhdCBpdFxuICogY29udGludWVzIHRvIHJ1biBjb21wdXRlZCBlZmZlY3RzIGJhc2VkIG9uIHRoZSBvdXRwdXQgb2YgZWFjaCBwYXNzIHVudGlsXG4gKiB0aGVyZSBhcmUgbm8gbW9yZSBuZXdseSBjb21wdXRlZCBwcm9wZXJ0aWVzLiAgVGhpcyBlbnN1cmVzIHRoYXQgYWxsXG4gKiBwcm9wZXJ0aWVzIHRoYXQgd2lsbCBiZSBjb21wdXRlZCBieSB0aGUgaW5pdGlhbCBzZXQgb2YgY2hhbmdlcyBhcmVcbiAqIGNvbXB1dGVkIGJlZm9yZSBvdGhlciBlZmZlY3RzIChiaW5kaW5nIHByb3BhZ2F0aW9uLCBvYnNlcnZlcnMsIGFuZCBub3RpZnkpXG4gKiBydW4uXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHRoZSBlZmZlY3Qgd2lsbCBiZSBydW4gb25cbiAqIEBwYXJhbSB7P09iamVjdH0gY2hhbmdlZFByb3BzIEJhZyBvZiBjaGFuZ2VkIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7P09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge2Jvb2xlYW59IGhhc1BhdGhzIFRydWUgd2l0aCBgcHJvcHNgIGNvbnRhaW5zIG9uZSBvciBtb3JlIHBhdGhzXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gcnVuQ29tcHV0ZWRFZmZlY3RzKGluc3QsIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKSB7XG4gIGxldCBjb21wdXRlRWZmZWN0cyA9IGluc3RbVFlQRVMuQ09NUFVURV07XG4gIGlmIChjb21wdXRlRWZmZWN0cykge1xuICAgIGlmIChvcmRlcmVkQ29tcHV0ZWQpIHtcbiAgICAgIC8vIFJ1bnMgY29tcHV0ZWQgZWZmZWN0cyBpbiBlZmZpY2llbnQgb3JkZXIgYnkga2VlcGluZyBhIHRvcG9sb2dpY2FsbHktXG4gICAgICAvLyBzb3J0ZWQgcXVldWUgb2YgY29tcHV0ZSBlZmZlY3RzIHRvIHJ1biwgYW5kIGluc2VydGluZyBzdWJzZXF1ZW50bHlcbiAgICAgIC8vIGludmFsaWRhdGVkIGVmZmVjdHMgYXMgdGhleSBhcmUgcnVuXG4gICAgICBkZWR1cGVJZCsrO1xuICAgICAgY29uc3Qgb3JkZXIgPSBnZXRDb21wdXRlZE9yZGVyKGluc3QpO1xuICAgICAgY29uc3QgcXVldWUgPSBbXTtcbiAgICAgIGZvciAobGV0IHAgaW4gY2hhbmdlZFByb3BzKSB7XG4gICAgICAgIGVucXVldWVFZmZlY3RzRm9yKHAsIGNvbXB1dGVFZmZlY3RzLCBxdWV1ZSwgb3JkZXIsIGhhc1BhdGhzKTtcbiAgICAgIH1cbiAgICAgIGxldCBpbmZvO1xuICAgICAgd2hpbGUgKChpbmZvID0gcXVldWUuc2hpZnQoKSkpIHtcbiAgICAgICAgaWYgKHJ1bkNvbXB1dGVkRWZmZWN0KGluc3QsICcnLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBpbmZvKSkge1xuICAgICAgICAgIGVucXVldWVFZmZlY3RzRm9yKGluZm8ubWV0aG9kSW5mbywgY29tcHV0ZUVmZmVjdHMsIHF1ZXVlLCBvcmRlciwgaGFzUGF0aHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBPYmplY3QuYXNzaWduKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKG9sZFByb3BzKSwgaW5zdC5fX2RhdGFPbGQpO1xuICAgICAgT2JqZWN0LmFzc2lnbigvKiogQHR5cGUgeyFPYmplY3R9ICovIChjaGFuZ2VkUHJvcHMpLCBpbnN0Ll9fZGF0YVBlbmRpbmcpO1xuICAgICAgaW5zdC5fX2RhdGFQZW5kaW5nID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gT3JpZ2luYWwgUG9seW1lciAyLnggY29tcHV0ZWQgZWZmZWN0cyBvcmRlciwgd2hpY2ggY29udGludWVzIHJ1bm5pbmdcbiAgICAgIC8vIGVmZmVjdHMgdW50aWwgbm8gZnVydGhlciBjb21wdXRlZCBwcm9wZXJ0aWVzIGhhdmUgYmVlbiBpbnZhbGlkYXRlZFxuICAgICAgbGV0IGlucHV0UHJvcHMgPSBjaGFuZ2VkUHJvcHM7XG4gICAgICB3aGlsZSAocnVuRWZmZWN0cyhpbnN0LCBjb21wdXRlRWZmZWN0cywgaW5wdXRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKG9sZFByb3BzKSwgaW5zdC5fX2RhdGFPbGQpO1xuICAgICAgICBPYmplY3QuYXNzaWduKC8qKiBAdHlwZSB7IU9iamVjdH0gKi8gKGNoYW5nZWRQcm9wcyksIGluc3QuX19kYXRhUGVuZGluZyk7XG4gICAgICAgIGlucHV0UHJvcHMgPSBpbnN0Ll9fZGF0YVBlbmRpbmc7XG4gICAgICAgIGluc3QuX19kYXRhUGVuZGluZyA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW5zZXJ0cyBhIGNvbXB1dGVkIGVmZmVjdCBpbnRvIGEgcXVldWUsIGdpdmVuIHRoZSBzcGVjaWZpZWQgb3JkZXIuIFBlcmZvcm1zXG4gKiB0aGUgaW5zZXJ0IHVzaW5nIGEgYmluYXJ5IHNlYXJjaC5cbiAqXG4gKiBVc2VkIGJ5IGBvcmRlcmVkQ29tcHV0ZWQ6IHRydWVgIGNvbXB1dGVkIHByb3BlcnR5IGFsZ29yaXRobS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gaW5mbyBQcm9wZXJ0eSBlZmZlY3RzIG1ldGFkYXRhXG4gKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHF1ZXVlIE9yZGVyZWQgcXVldWUgb2YgZWZmZWN0c1xuICogQHBhcmFtIHtNYXA8c3RyaW5nLG51bWJlcj59IG9yZGVyIE1hcCBvZiBjb21wdXRlZCBwcm9wZXJ0eSBuYW1lLT50b3BvbG9naWNhbFxuICogICBzb3J0IG9yZGVyXG4gKi9cbmNvbnN0IGluc2VydEVmZmVjdCA9IChpbmZvLCBxdWV1ZSwgb3JkZXIpID0+IHtcbiAgbGV0IHN0YXJ0ID0gMDtcbiAgbGV0IGVuZCA9IHF1ZXVlLmxlbmd0aCAtIDE7XG4gIGxldCBpZHggPSAtMTtcbiAgd2hpbGUgKHN0YXJ0IDw9IGVuZCkge1xuICAgIGNvbnN0IG1pZCA9IChzdGFydCArIGVuZCkgPj4gMTtcbiAgICAvLyBOb3RlIGBtZXRob2RJbmZvYCBpcyB3aGVyZSB0aGUgY29tcHV0ZWQgcHJvcGVydHkgbmFtZSBpcyBzdG9yZWQgaW5cbiAgICAvLyB0aGUgZWZmZWN0IG1ldGFkYXRhXG4gICAgY29uc3QgY21wID0gb3JkZXIuZ2V0KHF1ZXVlW21pZF0ubWV0aG9kSW5mbykgLSBvcmRlci5nZXQoaW5mby5tZXRob2RJbmZvKTtcbiAgICBpZiAoY21wIDwgMCkge1xuICAgICAgc3RhcnQgPSBtaWQgKyAxO1xuICAgIH0gZWxzZSBpZiAoY21wID4gMCkge1xuICAgICAgZW5kID0gbWlkIC0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWR4ID0gbWlkO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gIGlmIChpZHggPCAwKSB7XG4gICAgaWR4ID0gZW5kICsgMTtcbiAgfVxuICBxdWV1ZS5zcGxpY2UoaWR4LCAwLCBpbmZvKTtcbn07XG5cbi8qKlxuICogSW5zZXJ0cyBhbGwgZG93bnN0cmVhbSBjb21wdXRlZCBlZmZlY3RzIGludmFsaWRhdGVkIGJ5IHRoZSBzcGVjaWZpZWQgcHJvcGVydHlcbiAqIGludG8gdGhlIHRvcG9sb2dpY2FsbHktc29ydGVkIHF1ZXVlIG9mIGVmZmVjdHMgdG8gYmUgcnVuLlxuICpcbiAqIFVzZWQgYnkgYG9yZGVyZWRDb21wdXRlZDogdHJ1ZWAgY29tcHV0ZWQgcHJvcGVydHkgYWxnb3JpdGhtLlxuICpcbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFByb3BlcnR5IG5hbWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBjb21wdXRlRWZmZWN0cyBDb21wdXRlZCBlZmZlY3RzIGZvciB0aGlzIGVsZW1lbnRcbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gcXVldWUgVG9wb2xvZ2ljYWxseS1zb3J0ZWQgcXVldWUgb2YgY29tcHV0ZWQgZWZmZWN0c1xuICogICB0byBiZSBydW5cbiAqIEBwYXJhbSB7TWFwPHN0cmluZyxudW1iZXI+fSBvcmRlciBNYXAgb2YgY29tcHV0ZWQgcHJvcGVydHkgbmFtZS0+dG9wb2xvZ2ljYWxcbiAqICAgc29ydCBvcmRlclxuICogQHBhcmFtIHtib29sZWFufSBoYXNQYXRocyBUcnVlIHdpdGggYGNoYW5nZWRQcm9wc2AgY29udGFpbnMgb25lIG9yIG1vcmUgcGF0aHNcbiAqL1xuY29uc3QgZW5xdWV1ZUVmZmVjdHNGb3IgPSAocHJvcCwgY29tcHV0ZUVmZmVjdHMsIHF1ZXVlLCBvcmRlciwgaGFzUGF0aHMpID0+IHtcbiAgY29uc3Qgcm9vdFByb3BlcnR5ID0gaGFzUGF0aHMgPyByb290KHByb3ApIDogcHJvcDtcbiAgY29uc3QgZnhzID0gY29tcHV0ZUVmZmVjdHNbcm9vdFByb3BlcnR5XTtcbiAgaWYgKGZ4cykge1xuICAgIGZvciAobGV0IGk9MDsgaTxmeHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGZ4ID0gZnhzW2ldO1xuICAgICAgaWYgKChmeC5pbmZvLmxhc3RSdW4gIT09IGRlZHVwZUlkKSAmJlxuICAgICAgICAgICghaGFzUGF0aHMgfHwgcGF0aE1hdGNoZXNUcmlnZ2VyKHByb3AsIGZ4LnRyaWdnZXIpKSkge1xuICAgICAgICBmeC5pbmZvLmxhc3RSdW4gPSBkZWR1cGVJZDtcbiAgICAgICAgaW5zZXJ0RWZmZWN0KGZ4LmluZm8sIHF1ZXVlLCBvcmRlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgcmV0cmlldmVzIGEgbWVtb2l6ZWQgbWFwIG9mIGNvbXB1dGVkIHByb3BlcnR5IG5hbWUgdG8gaXRzXG4gKiB0b3BvbG9naWNhbGx5LXNvcnRlZCBvcmRlci5cbiAqXG4gKiBUaGUgbWFwIGlzIGdlbmVyYXRlZCBieSBmaXJzdCBhc3NpZ25pbmcgYSBcImRlcGVuZGVuY3kgY291bnRcIiB0byBlYWNoIHByb3BlcnR5XG4gKiAoZGVmaW5lZCBhcyBudW1iZXIgcHJvcGVydGllcyBpdCBkZXBlbmRzIG9uLCBpbmNsdWRpbmcgaXRzIG1ldGhvZCBmb3JcbiAqIFwiZHluYW1pYyBmdW5jdGlvbnNcIikuIEFueSBwcm9wZXJ0aWVzIHRoYXQgaGF2ZSBubyBkZXBlbmRlbmNpZXMgYXJlIGFkZGVkIHRvXG4gKiB0aGUgYHJlYWR5YCBxdWV1ZSwgd2hpY2ggYXJlIHByb3BlcnRpZXMgd2hvc2Ugb3JkZXIgY2FuIGJlIGFkZGVkIHRvIHRoZSBmaW5hbFxuICogb3JkZXIgbWFwLiBQcm9wZXJ0aWVzIGFyZSBwb3BwZWQgb2ZmIHRoZSBgcmVhZHlgIHF1ZXVlIG9uZSBieSBvbmUgYW5kIGEuKSBhZGRlZCBhc1xuICogdGhlIG5leHQgcHJvcGVydHkgaW4gdGhlIG9yZGVyIG1hcCwgYW5kIGIuKSBlYWNoIHByb3BlcnR5IHRoYXQgaXQgaXMgYVxuICogZGVwZW5kZW5jeSBmb3IgaGFzIGl0cyBkZXAgY291bnQgZGVjcmVtZW50ZWQgKGFuZCBpZiB0aGF0IHByb3BlcnR5J3MgZGVwXG4gKiBjb3VudCBnb2VzIHRvIHplcm8sIGl0IGlzIGFkZGVkIHRvIHRoZSBgcmVhZHlgIHF1ZXVlKSwgdW50aWwgYWxsIHByb3BlcnRpZXNcbiAqIGhhdmUgYmVlbiB2aXNpdGVkIGFuZCBvcmRlcmVkLlxuICpcbiAqIFVzZWQgYnkgYG9yZGVyZWRDb21wdXRlZDogdHJ1ZWAgY29tcHV0ZWQgcHJvcGVydHkgYWxnb3JpdGhtLlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSB0byByZXRyaWV2ZSB0aGUgY29tcHV0ZWRcbiAqICAgZWZmZWN0IG9yZGVyIGZvci5cbiAqIEByZXR1cm4ge01hcDxzdHJpbmcsbnVtYmVyPn0gTWFwIG9mIGNvbXB1dGVkIHByb3BlcnR5IG5hbWUtPnRvcG9sb2dpY2FsIHNvcnRcbiAqICAgb3JkZXJcbiAqL1xuZnVuY3Rpb24gZ2V0Q29tcHV0ZWRPcmRlcihpbnN0KSB7XG4gIGxldCBvcmRlcmVkID0gaW5zdC5jb25zdHJ1Y3Rvci5fX29yZGVyZWRDb21wdXRlZERlcHM7XG4gIGlmICghb3JkZXJlZCkge1xuICAgIG9yZGVyZWQgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgZWZmZWN0cyA9IGluc3RbVFlQRVMuQ09NUFVURV07XG4gICAgbGV0IHtjb3VudHMsIHJlYWR5LCB0b3RhbH0gPSBkZXBlbmRlbmN5Q291bnRzKGluc3QpO1xuICAgIGxldCBjdXJyO1xuICAgIHdoaWxlICgoY3VyciA9IHJlYWR5LnNoaWZ0KCkpKSB7XG4gICAgICBvcmRlcmVkLnNldChjdXJyLCBvcmRlcmVkLnNpemUpO1xuICAgICAgY29uc3QgY29tcHV0ZWRCeUN1cnIgPSBlZmZlY3RzW2N1cnJdO1xuICAgICAgaWYgKGNvbXB1dGVkQnlDdXJyKSB7XG4gICAgICAgIGNvbXB1dGVkQnlDdXJyLmZvckVhY2goZnggPT4ge1xuICAgICAgICAgIC8vIE5vdGUgYG1ldGhvZEluZm9gIGlzIHdoZXJlIHRoZSBjb21wdXRlZCBwcm9wZXJ0eSBuYW1lIGlzIHN0b3JlZFxuICAgICAgICAgIGNvbnN0IGNvbXB1dGVkUHJvcCA9IGZ4LmluZm8ubWV0aG9kSW5mbztcbiAgICAgICAgICAtLXRvdGFsO1xuICAgICAgICAgIGlmICgtLWNvdW50c1tjb21wdXRlZFByb3BdID09PSAwKSB7XG4gICAgICAgICAgICByZWFkeS5wdXNoKGNvbXB1dGVkUHJvcCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRvdGFsICE9PSAwKSB7XG4gICAgICBjb25zdCBlbCA9IC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR9ICovIChpbnN0KTtcbiAgICAgIGNvbnNvbGUud2FybihgQ29tcHV0ZWQgZ3JhcGggZm9yICR7ZWwubG9jYWxOYW1lfSBpbmNvbXBsZXRlOyBjaXJjdWxhcj9gKTtcbiAgICB9XG4gICAgaW5zdC5jb25zdHJ1Y3Rvci5fX29yZGVyZWRDb21wdXRlZERlcHMgPSBvcmRlcmVkO1xuICB9XG4gIHJldHVybiBvcmRlcmVkO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIG1hcCBvZiBwcm9wZXJ0eS10by1kZXBlbmRlbmN5IGNvdW50IChgY291bnRzYCwgd2hlcmUgXCJkZXBlbmRlbmN5XG4gKiBjb3VudFwiIGlzIHRoZSBudW1iZXIgb2YgZGVwZW5kZW5jaWVzIGEgZ2l2ZW4gcHJvcGVydHkgaGFzIGFzc3VtaW5nIGl0IGlzIGFcbiAqIGNvbXB1dGVkIHByb3BlcnR5LCBvdGhlcndpc2UgMCkuICBJdCBhbHNvIHJldHVybnMgYSBwcmUtcG9wdWxhdGVkIGxpc3Qgb2ZcbiAqIGByZWFkeWAgcHJvcGVydGllcyB0aGF0IGhhdmUgbm8gZGVwZW5kZW5jaWVzIGFuZCBhIGB0b3RhbGAgY291bnQsIHdoaWNoIGlzXG4gKiB1c2VkIGZvciBlcnJvci1jaGVja2luZyB0aGUgZ3JhcGguXG4gKlxuICogVXNlZCBieSBgb3JkZXJlZENvbXB1dGVkOiB0cnVlYCBjb21wdXRlZCBwcm9wZXJ0eSBhbGdvcml0aG0uXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHRvIGdlbmVyYXRlIGRlcGVuZGVuY3lcbiAqICAgY291bnRzIGZvci5cbiAqIEByZXR1cm4geyFPYmplY3R9IE9iamVjdCBjb250YWluaW5nIGBjb3VudHNgIG1hcCAocHJvcGVydHktdG8tZGVwZW5kZW5jeVxuICogICBjb3VudCkgYW5kIHByZS1wb3B1bGF0ZWQgYHJlYWR5YCBhcnJheSBvZiBwcm9wZXJ0aWVzIHRoYXQgaGFkIHplcm9cbiAqICAgZGVwZW5kZW5jaWVzLlxuICovXG5mdW5jdGlvbiBkZXBlbmRlbmN5Q291bnRzKGluc3QpIHtcbiAgY29uc3QgaW5mb0ZvckNvbXB1dGVkID0gaW5zdFtDT01QVVRFX0lORk9dO1xuICBjb25zdCBjb3VudHMgPSB7fTtcbiAgY29uc3QgY29tcHV0ZWREZXBzID0gaW5zdFtUWVBFUy5DT01QVVRFXTtcbiAgY29uc3QgcmVhZHkgPSBbXTtcbiAgbGV0IHRvdGFsID0gMDtcbiAgLy8gQ291bnQgZGVwZW5kZW5jaWVzIGZvciBlYWNoIGNvbXB1dGVkIHByb3BlcnR5XG4gIGZvciAobGV0IHAgaW4gaW5mb0ZvckNvbXB1dGVkKSB7XG4gICAgY29uc3QgaW5mbyA9IGluZm9Gb3JDb21wdXRlZFtwXTtcbiAgICAvLyBCZSBzdXJlIHRvIGFkZCB0aGUgbWV0aG9kIG5hbWUgaXRzZWxmIGluIGNhc2Ugb2YgXCJkeW5hbWljIGZ1bmN0aW9uc1wiXG4gICAgdG90YWwgKz0gY291bnRzW3BdID1cbiAgICAgIGluZm8uYXJncy5maWx0ZXIoYSA9PiAhYS5saXRlcmFsKS5sZW5ndGggKyAoaW5mby5keW5hbWljRm4gPyAxIDogMCk7XG4gIH1cbiAgLy8gQnVpbGQgbGlzdCBvZiByZWFkeSBwcm9wZXJ0aWVzICh0aGF0IGFyZW4ndCB0aGVtc2VsdmVzIGNvbXB1dGVkKVxuICBmb3IgKGxldCBwIGluIGNvbXB1dGVkRGVwcykge1xuICAgIGlmICghaW5mb0ZvckNvbXB1dGVkW3BdKSB7XG4gICAgICByZWFkeS5wdXNoKHApO1xuICAgIH1cbiAgfVxuICByZXR1cm4ge2NvdW50cywgcmVhZHksIHRvdGFsfTtcbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBcImNvbXB1dGVkIHByb3BlcnR5XCIgZWZmZWN0IGJ5IHJ1bm5pbmcgdGhlIG1ldGhvZCB3aXRoIHRoZVxuICogdmFsdWVzIG9mIHRoZSBhcmd1bWVudHMgc3BlY2lmaWVkIGluIHRoZSBgaW5mb2Agb2JqZWN0IGFuZCBzZXR0aW5nIHRoZVxuICogcmV0dXJuIHZhbHVlIHRvIHRoZSBjb21wdXRlZCBwcm9wZXJ0eSBzcGVjaWZpZWQuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHRoZSBlZmZlY3Qgd2lsbCBiZSBydW4gb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHByb3BlcnR5XG4gKiBAcGFyYW0gez9PYmplY3R9IGNoYW5nZWRQcm9wcyBCYWcgb2YgY3VycmVudCBwcm9wZXJ0eSBjaGFuZ2VzXG4gKiBAcGFyYW0gez9PYmplY3R9IG9sZFByb3BzIEJhZyBvZiBwcmV2aW91cyB2YWx1ZXMgZm9yIGNoYW5nZWQgcHJvcGVydGllc1xuICogQHBhcmFtIHs/fSBpbmZvIEVmZmVjdCBtZXRhZGF0YVxuICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSB3aGVuIHRoZSBwcm9wZXJ0eSBiZWluZyBjb21wdXRlZCBjaGFuZ2VkXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5Db21wdXRlZEVmZmVjdChpbnN0LCBwcm9wZXJ0eSwgY2hhbmdlZFByb3BzLCBvbGRQcm9wcywgaW5mbykge1xuICAvLyBEaXJ0eSBjaGVjayBkZXBlbmRlbmNpZXMgYW5kIHJ1biBpZiBhbnkgaW52YWxpZFxuICBsZXQgcmVzdWx0ID0gcnVuTWV0aG9kRWZmZWN0KGluc3QsIHByb3BlcnR5LCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBpbmZvKTtcbiAgLy8gQWJvcnQgaWYgbWV0aG9kIHJldHVybnMgYSBuby1vcCByZXN1bHRcbiAgaWYgKHJlc3VsdCA9PT0gTk9PUCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBsZXQgY29tcHV0ZWRQcm9wID0gaW5mby5tZXRob2RJbmZvO1xuICBpZiAoaW5zdC5fX2RhdGFIYXNBY2Nlc3NvciAmJiBpbnN0Ll9fZGF0YUhhc0FjY2Vzc29yW2NvbXB1dGVkUHJvcF0pIHtcbiAgICByZXR1cm4gaW5zdC5fc2V0UGVuZGluZ1Byb3BlcnR5KGNvbXB1dGVkUHJvcCwgcmVzdWx0LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBpbnN0W2NvbXB1dGVkUHJvcF0gPSByZXN1bHQ7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59XG5cbi8qKlxuICogQ29tcHV0ZXMgcGF0aCBjaGFuZ2VzIGJhc2VkIG9uIHBhdGggbGlua3Mgc2V0IHVwIHVzaW5nIHRoZSBgbGlua1BhdGhzYFxuICogQVBJLlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSB3aG9zZSBwcm9wcyBhcmUgY2hhbmdpbmdcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdGhhdCBoYXMgY2hhbmdlZFxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSBvZiBjaGFuZ2VkIHBhdGhcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjb21wdXRlTGlua2VkUGF0aHMoaW5zdCwgcGF0aCwgdmFsdWUpIHtcbiAgbGV0IGxpbmtzID0gaW5zdC5fX2RhdGFMaW5rZWRQYXRocztcbiAgaWYgKGxpbmtzKSB7XG4gICAgbGV0IGxpbms7XG4gICAgZm9yIChsZXQgYSBpbiBsaW5rcykge1xuICAgICAgbGV0IGIgPSBsaW5rc1thXTtcbiAgICAgIGlmIChpc0Rlc2NlbmRhbnQoYSwgcGF0aCkpIHtcbiAgICAgICAgbGluayA9IHRyYW5zbGF0ZShhLCBiLCBwYXRoKTtcbiAgICAgICAgaW5zdC5fc2V0UGVuZGluZ1Byb3BlcnR5T3JQYXRoKGxpbmssIHZhbHVlLCB0cnVlLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNEZXNjZW5kYW50KGIsIHBhdGgpKSB7XG4gICAgICAgIGxpbmsgPSB0cmFuc2xhdGUoYiwgYSwgcGF0aCk7XG4gICAgICAgIGluc3QuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aChsaW5rLCB2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIC0tIGJpbmRpbmdzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBBZGRzIGJpbmRpbmcgbWV0YWRhdGEgdG8gdGhlIGN1cnJlbnQgYG5vZGVJbmZvYCwgYW5kIGJpbmRpbmcgZWZmZWN0c1xuICogZm9yIGFsbCBwYXJ0IGRlcGVuZGVuY2llcyB0byBgdGVtcGxhdGVJbmZvYC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBDbGFzcyB0aGF0IGBfcGFyc2VUZW1wbGF0ZWAgaXMgY3VycmVudGx5XG4gKiAgIHJ1bm5pbmcgb25cbiAqIEBwYXJhbSB7VGVtcGxhdGVJbmZvfSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGVcbiAqIEBwYXJhbSB7Tm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUgbm9kZVxuICogQHBhcmFtIHtzdHJpbmd9IGtpbmQgQmluZGluZyBraW5kLCBlaXRoZXIgJ3Byb3BlcnR5JywgJ2F0dHJpYnV0ZScsIG9yICd0ZXh0J1xuICogQHBhcmFtIHtzdHJpbmd9IHRhcmdldCBUYXJnZXQgcHJvcGVydHkgbmFtZVxuICogQHBhcmFtIHshQXJyYXk8IUJpbmRpbmdQYXJ0Pn0gcGFydHMgQXJyYXkgb2YgYmluZGluZyBwYXJ0IG1ldGFkYXRhXG4gKiBAcGFyYW0ge3N0cmluZz19IGxpdGVyYWwgTGl0ZXJhbCB0ZXh0IHN1cnJvdW5kaW5nIGJpbmRpbmcgcGFydHMgKHNwZWNpZmllZFxuICogICBvbmx5IGZvciAncHJvcGVydHknIGJpbmRpbmdzLCBzaW5jZSB0aGVzZSBtdXN0IGJlIGluaXRpYWxpemVkIGFzIHBhcnRcbiAqICAgb2YgYm9vdC11cClcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhZGRCaW5kaW5nKGNvbnN0cnVjdG9yLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvLCBraW5kLCB0YXJnZXQsIHBhcnRzLCBsaXRlcmFsKSB7XG4gIC8vIENyZWF0ZSBiaW5kaW5nIG1ldGFkYXRhIGFuZCBhZGQgdG8gbm9kZUluZm9cbiAgbm9kZUluZm8uYmluZGluZ3MgPSBub2RlSW5mby5iaW5kaW5ncyB8fCBbXTtcbiAgbGV0IC8qKiBCaW5kaW5nICovIGJpbmRpbmcgPSB7IGtpbmQsIHRhcmdldCwgcGFydHMsIGxpdGVyYWwsIGlzQ29tcG91bmQ6IChwYXJ0cy5sZW5ndGggIT09IDEpIH07XG4gIG5vZGVJbmZvLmJpbmRpbmdzLnB1c2goYmluZGluZyk7XG4gIC8vIEFkZCBsaXN0ZW5lciBpbmZvIHRvIGJpbmRpbmcgbWV0YWRhdGFcbiAgaWYgKHNob3VsZEFkZExpc3RlbmVyKGJpbmRpbmcpKSB7XG4gICAgbGV0IHtldmVudCwgbmVnYXRlfSA9IGJpbmRpbmcucGFydHNbMF07XG4gICAgYmluZGluZy5saXN0ZW5lckV2ZW50ID0gZXZlbnQgfHwgKGNhbWVsVG9EYXNoQ2FzZSh0YXJnZXQpICsgJy1jaGFuZ2VkJyk7XG4gICAgYmluZGluZy5saXN0ZW5lck5lZ2F0ZSA9IG5lZ2F0ZTtcbiAgfVxuICAvLyBBZGQgXCJwcm9wYWdhdGVcIiBwcm9wZXJ0eSBlZmZlY3RzIHRvIHRlbXBsYXRlSW5mb1xuICBsZXQgaW5kZXggPSB0ZW1wbGF0ZUluZm8ubm9kZUluZm9MaXN0Lmxlbmd0aDtcbiAgZm9yIChsZXQgaT0wOyBpPGJpbmRpbmcucGFydHMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgcGFydCA9IGJpbmRpbmcucGFydHNbaV07XG4gICAgcGFydC5jb21wb3VuZEluZGV4ID0gaTtcbiAgICBhZGRFZmZlY3RGb3JCaW5kaW5nUGFydChjb25zdHJ1Y3RvciwgdGVtcGxhdGVJbmZvLCBiaW5kaW5nLCBwYXJ0LCBpbmRleCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIHByb3BlcnR5IGVmZmVjdHMgdG8gdGhlIGdpdmVuIGB0ZW1wbGF0ZUluZm9gIGZvciB0aGUgZ2l2ZW4gYmluZGluZ1xuICogcGFydC5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjb25zdHJ1Y3RvciBDbGFzcyB0aGF0IGBfcGFyc2VUZW1wbGF0ZWAgaXMgY3VycmVudGx5XG4gKiAgIHJ1bm5pbmcgb25cbiAqIEBwYXJhbSB7VGVtcGxhdGVJbmZvfSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGVcbiAqIEBwYXJhbSB7IUJpbmRpbmd9IGJpbmRpbmcgQmluZGluZyBtZXRhZGF0YVxuICogQHBhcmFtIHshQmluZGluZ1BhcnR9IHBhcnQgQmluZGluZyBwYXJ0IG1ldGFkYXRhXG4gKiBAcGFyYW0ge251bWJlcn0gaW5kZXggSW5kZXggaW50byBgbm9kZUluZm9MaXN0YCBmb3IgdGhpcyBub2RlXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBhZGRFZmZlY3RGb3JCaW5kaW5nUGFydChjb25zdHJ1Y3RvciwgdGVtcGxhdGVJbmZvLCBiaW5kaW5nLCBwYXJ0LCBpbmRleCkge1xuICBpZiAoIXBhcnQubGl0ZXJhbCkge1xuICAgIGlmIChiaW5kaW5nLmtpbmQgPT09ICdhdHRyaWJ1dGUnICYmIGJpbmRpbmcudGFyZ2V0WzBdID09PSAnLScpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ2Fubm90IHNldCBhdHRyaWJ1dGUgJyArIGJpbmRpbmcudGFyZ2V0ICtcbiAgICAgICAgJyBiZWNhdXNlIFwiLVwiIGlzIG5vdCBhIHZhbGlkIGF0dHJpYnV0ZSBzdGFydGluZyBjaGFyYWN0ZXInKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGRlcGVuZGVuY2llcyA9IHBhcnQuZGVwZW5kZW5jaWVzO1xuICAgICAgbGV0IGluZm8gPSB7IGluZGV4LCBiaW5kaW5nLCBwYXJ0LCBldmFsdWF0b3I6IGNvbnN0cnVjdG9yIH07XG4gICAgICBmb3IgKGxldCBqPTA7IGo8ZGVwZW5kZW5jaWVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgIGxldCB0cmlnZ2VyID0gZGVwZW5kZW5jaWVzW2pdO1xuICAgICAgICBpZiAodHlwZW9mIHRyaWdnZXIgPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0cmlnZ2VyID0gcGFyc2VBcmcodHJpZ2dlcik7XG4gICAgICAgICAgdHJpZ2dlci53aWxkY2FyZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3RydWN0b3IuX2FkZFRlbXBsYXRlUHJvcGVydHlFZmZlY3QodGVtcGxhdGVJbmZvLCB0cmlnZ2VyLnJvb3RQcm9wZXJ0eSwge1xuICAgICAgICAgIGZuOiBydW5CaW5kaW5nRWZmZWN0LFxuICAgICAgICAgIGluZm8sIHRyaWdnZXJcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgXCJiaW5kaW5nXCIgKHByb3BlcnR5L3BhdGggYmluZGluZykgZWZmZWN0LlxuICpcbiAqIE5vdGUgdGhhdCBiaW5kaW5nIHN5bnRheCBpcyBvdmVycmlkYWJsZSB2aWEgYF9wYXJzZUJpbmRpbmdzYCBhbmRcbiAqIGBfZXZhbHVhdGVCaW5kaW5nYC4gIFRoaXMgbWV0aG9kIHdpbGwgY2FsbCBgX2V2YWx1YXRlQmluZGluZ2AgZm9yIGFueVxuICogbm9uLWxpdGVyYWwgcGFydHMgcmV0dXJuZWQgZnJvbSBgX3BhcnNlQmluZGluZ3NgLiAgSG93ZXZlcixcbiAqIHRoZXJlIGlzIG5vIHN1cHBvcnQgZm9yIF9wYXRoXyBiaW5kaW5ncyB2aWEgY3VzdG9tIGJpbmRpbmcgcGFydHMsXG4gKiBhcyB0aGlzIGlzIHNwZWNpZmljIHRvIFBvbHltZXIncyBwYXRoIGJpbmRpbmcgc3ludGF4LlxuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IFRoZSBpbnN0YW5jZSB0aGUgZWZmZWN0IHdpbGwgYmUgcnVuIG9uXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBOYW1lIG9mIHByb3BlcnR5XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICogQHBhcmFtIHtPYmplY3R9IG9sZFByb3BzIEJhZyBvZiBwcmV2aW91cyB2YWx1ZXMgZm9yIGNoYW5nZWQgcHJvcGVydGllc1xuICogQHBhcmFtIHs/fSBpbmZvIEVmZmVjdCBtZXRhZGF0YVxuICogQHBhcmFtIHtib29sZWFufSBoYXNQYXRocyBUcnVlIHdpdGggYHByb3BzYCBjb250YWlucyBvbmUgb3IgbW9yZSBwYXRoc1xuICogQHBhcmFtIHtBcnJheX0gbm9kZUxpc3QgTGlzdCBvZiBub2RlcyBhc3NvY2lhdGVkIHdpdGggYG5vZGVJbmZvTGlzdGAgdGVtcGxhdGVcbiAqICAgbWV0YWRhdGFcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5CaW5kaW5nRWZmZWN0KGluc3QsIHBhdGgsIHByb3BzLCBvbGRQcm9wcywgaW5mbywgaGFzUGF0aHMsIG5vZGVMaXN0KSB7XG4gIGxldCBub2RlID0gbm9kZUxpc3RbaW5mby5pbmRleF07XG4gIGxldCBiaW5kaW5nID0gaW5mby5iaW5kaW5nO1xuICBsZXQgcGFydCA9IGluZm8ucGFydDtcbiAgLy8gU3VicGF0aCBub3RpZmljYXRpb246IHRyYW5zZm9ybSBwYXRoIGFuZCBzZXQgdG8gY2xpZW50XG4gIC8vIGUuZy46IGZvbz1cInt7b2JqLnN1Yn19XCIsIHBhdGg6ICdvYmouc3ViLnByb3AnLCBzZXQgJ2Zvby5wcm9wJz1vYmouc3ViLnByb3BcbiAgaWYgKGhhc1BhdGhzICYmIHBhcnQuc291cmNlICYmIChwYXRoLmxlbmd0aCA+IHBhcnQuc291cmNlLmxlbmd0aCkgJiZcbiAgICAgIChiaW5kaW5nLmtpbmQgPT0gJ3Byb3BlcnR5JykgJiYgIWJpbmRpbmcuaXNDb21wb3VuZCAmJlxuICAgICAgbm9kZS5fX2lzUHJvcGVydHlFZmZlY3RzQ2xpZW50ICYmXG4gICAgICBub2RlLl9fZGF0YUhhc0FjY2Vzc29yICYmIG5vZGUuX19kYXRhSGFzQWNjZXNzb3JbYmluZGluZy50YXJnZXRdKSB7XG4gICAgbGV0IHZhbHVlID0gcHJvcHNbcGF0aF07XG4gICAgcGF0aCA9IHRyYW5zbGF0ZShwYXJ0LnNvdXJjZSwgYmluZGluZy50YXJnZXQsIHBhdGgpO1xuICAgIGlmIChub2RlLl9zZXRQZW5kaW5nUHJvcGVydHlPclBhdGgocGF0aCwgdmFsdWUsIGZhbHNlLCB0cnVlKSkge1xuICAgICAgaW5zdC5fZW5xdWV1ZUNsaWVudChub2RlKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGV0IHZhbHVlID0gaW5mby5ldmFsdWF0b3IuX2V2YWx1YXRlQmluZGluZyhpbnN0LCBwYXJ0LCBwYXRoLCBwcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKTtcbiAgICAvLyBQcm9wYWdhdGUgdmFsdWUgdG8gY2hpbGRcbiAgICAvLyBBYm9ydCBpZiB2YWx1ZSBpcyBhIG5vLW9wIHJlc3VsdFxuICAgIGlmICh2YWx1ZSAhPT0gTk9PUCkge1xuICAgICAgYXBwbHlCaW5kaW5nVmFsdWUoaW5zdCwgbm9kZSwgYmluZGluZywgcGFydCwgdmFsdWUpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNldHMgdGhlIHZhbHVlIGZvciBhbiBcImJpbmRpbmdcIiAoYmluZGluZykgZWZmZWN0IHRvIGEgbm9kZSxcbiAqIGVpdGhlciBhcyBhIHByb3BlcnR5IG9yIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBUaGUgaW5zdGFuY2Ugb3duaW5nIHRoZSBiaW5kaW5nIGVmZmVjdFxuICogQHBhcmFtIHtOb2RlfSBub2RlIFRhcmdldCBub2RlIGZvciBiaW5kaW5nXG4gKiBAcGFyYW0geyFCaW5kaW5nfSBiaW5kaW5nIEJpbmRpbmcgbWV0YWRhdGFcbiAqIEBwYXJhbSB7IUJpbmRpbmdQYXJ0fSBwYXJ0IEJpbmRpbmcgcGFydCBtZXRhZGF0YVxuICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBzZXRcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBhcHBseUJpbmRpbmdWYWx1ZShpbnN0LCBub2RlLCBiaW5kaW5nLCBwYXJ0LCB2YWx1ZSkge1xuICB2YWx1ZSA9IGNvbXB1dGVCaW5kaW5nVmFsdWUobm9kZSwgdmFsdWUsIGJpbmRpbmcsIHBhcnQpO1xuICBpZiAoc2FuaXRpemVET01WYWx1ZSkge1xuICAgIHZhbHVlID0gc2FuaXRpemVET01WYWx1ZSh2YWx1ZSwgYmluZGluZy50YXJnZXQsIGJpbmRpbmcua2luZCwgbm9kZSk7XG4gIH1cbiAgaWYgKGJpbmRpbmcua2luZCA9PSAnYXR0cmlidXRlJykge1xuICAgIC8vIEF0dHJpYnV0ZSBiaW5kaW5nXG4gICAgaW5zdC5fdmFsdWVUb05vZGVBdHRyaWJ1dGUoLyoqIEB0eXBlIHtFbGVtZW50fSAqLyhub2RlKSwgdmFsdWUsIGJpbmRpbmcudGFyZ2V0KTtcbiAgfSBlbHNlIHtcbiAgICAvLyBQcm9wZXJ0eSBiaW5kaW5nXG4gICAgbGV0IHByb3AgPSBiaW5kaW5nLnRhcmdldDtcbiAgICBpZiAobm9kZS5fX2lzUHJvcGVydHlFZmZlY3RzQ2xpZW50ICYmXG4gICAgICAgIG5vZGUuX19kYXRhSGFzQWNjZXNzb3IgJiYgbm9kZS5fX2RhdGFIYXNBY2Nlc3Nvcltwcm9wXSkge1xuICAgICAgaWYgKCFub2RlW1RZUEVTLlJFQURfT05MWV0gfHwgIW5vZGVbVFlQRVMuUkVBRF9PTkxZXVtwcm9wXSkge1xuICAgICAgICBpZiAobm9kZS5fc2V0UGVuZGluZ1Byb3BlcnR5KHByb3AsIHZhbHVlKSkge1xuICAgICAgICAgIGluc3QuX2VucXVldWVDbGllbnQobm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSW4gbGVnYWN5IG5vLWJhdGNoaW5nIG1vZGUsIGJpbmRpbmdzIGFwcGxpZWQgYmVmb3JlIGRhdGFSZWFkeSBhcmVcbiAgICAgIC8vIGVxdWl2YWxlbnQgdG8gdGhlIFwiYXBwbHkgY29uZmlnXCIgcGhhc2UsIHdoaWNoIG9ubHkgc2V0IG1hbmFnZWQgcHJvcHNcbiAgICAgIGluc3QuX3NldFVubWFuYWdlZFByb3BlcnR5VG9Ob2RlKG5vZGUsIHByb3AsIHZhbHVlKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUcmFuc2Zvcm1zIGFuIFwiYmluZGluZ1wiIGVmZmVjdCB2YWx1ZSBiYXNlZCBvbiBjb21wb3VuZCAmIG5lZ2F0aW9uXG4gKiBlZmZlY3QgbWV0YWRhdGEsIGFzIHdlbGwgYXMgaGFuZGxpbmcgZm9yIHNwZWNpYWwtY2FzZSBwcm9wZXJ0aWVzXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlIE5vZGUgdGhlIHZhbHVlIHdpbGwgYmUgc2V0IHRvXG4gKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNldFxuICogQHBhcmFtIHshQmluZGluZ30gYmluZGluZyBCaW5kaW5nIG1ldGFkYXRhXG4gKiBAcGFyYW0geyFCaW5kaW5nUGFydH0gcGFydCBCaW5kaW5nIHBhcnQgbWV0YWRhdGFcbiAqIEByZXR1cm4geyp9IFRyYW5zZm9ybWVkIHZhbHVlIHRvIHNldFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gY29tcHV0ZUJpbmRpbmdWYWx1ZShub2RlLCB2YWx1ZSwgYmluZGluZywgcGFydCkge1xuICBpZiAoYmluZGluZy5pc0NvbXBvdW5kKSB7XG4gICAgbGV0IHN0b3JhZ2UgPSBub2RlLl9fZGF0YUNvbXBvdW5kU3RvcmFnZVtiaW5kaW5nLnRhcmdldF07XG4gICAgc3RvcmFnZVtwYXJ0LmNvbXBvdW5kSW5kZXhdID0gdmFsdWU7XG4gICAgdmFsdWUgPSBzdG9yYWdlLmpvaW4oJycpO1xuICB9XG4gIGlmIChiaW5kaW5nLmtpbmQgIT09ICdhdHRyaWJ1dGUnKSB7XG4gICAgLy8gU29tZSBicm93c2VycyBzZXJpYWxpemUgYHVuZGVmaW5lZGAgdG8gYFwidW5kZWZpbmVkXCJgXG4gICAgaWYgKGJpbmRpbmcudGFyZ2V0ID09PSAndGV4dENvbnRlbnQnIHx8XG4gICAgICAgIChiaW5kaW5nLnRhcmdldCA9PT0gJ3ZhbHVlJyAmJlxuICAgICAgICAgIChub2RlLmxvY2FsTmFtZSA9PT0gJ2lucHV0JyB8fCBub2RlLmxvY2FsTmFtZSA9PT0gJ3RleHRhcmVhJykpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlID09IHVuZGVmaW5lZCA/ICcnIDogdmFsdWU7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWx1ZTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBiaW5kaW5nJ3MgbWV0YWRhdGEgbWVldHMgYWxsIHRoZSByZXF1aXJlbWVudHMgdG8gYWxsb3dcbiAqIDItd2F5IGJpbmRpbmcsIGFuZCB0aGVyZWZvcmUgYSBgPHByb3BlcnR5Pi1jaGFuZ2VkYCBldmVudCBsaXN0ZW5lciBzaG91bGQgYmVcbiAqIGFkZGVkOlxuICogLSB1c2VkIGN1cmx5IGJyYWNlc1xuICogLSBpcyBhIHByb3BlcnR5IChub3QgYXR0cmlidXRlKSBiaW5kaW5nXG4gKiAtIGlzIG5vdCBhIHRleHRDb250ZW50IGJpbmRpbmdcbiAqIC0gaXMgbm90IGNvbXBvdW5kXG4gKlxuICogQHBhcmFtIHshQmluZGluZ30gYmluZGluZyBCaW5kaW5nIG1ldGFkYXRhXG4gKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIDItd2F5IGxpc3RlbmVyIHNob3VsZCBiZSBhZGRlZFxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gc2hvdWxkQWRkTGlzdGVuZXIoYmluZGluZykge1xuICByZXR1cm4gQm9vbGVhbihiaW5kaW5nLnRhcmdldCkgJiZcbiAgICAgICAgIGJpbmRpbmcua2luZCAhPSAnYXR0cmlidXRlJyAmJlxuICAgICAgICAgYmluZGluZy5raW5kICE9ICd0ZXh0JyAmJlxuICAgICAgICAgIWJpbmRpbmcuaXNDb21wb3VuZCAmJlxuICAgICAgICAgYmluZGluZy5wYXJ0c1swXS5tb2RlID09PSAneyc7XG59XG5cbi8qKlxuICogU2V0dXAgY29tcG91bmQgYmluZGluZyBzdG9yYWdlIHN0cnVjdHVyZXMsIG5vdGlmeSBsaXN0ZW5lcnMsIGFuZCBkYXRhSG9zdFxuICogcmVmZXJlbmNlcyBvbnRvIHRoZSBib3VuZCBub2RlTGlzdC5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBJbnN0YW5jZSB0aGF0IGJhcyBiZWVuIHByZXZpb3VzbHlcbiAqICAgICBib3VuZFxuICogQHBhcmFtIHtUZW1wbGF0ZUluZm99IHRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YVxuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNldHVwQmluZGluZ3MoaW5zdCwgdGVtcGxhdGVJbmZvKSB7XG4gIC8vIFNldHVwIGNvbXBvdW5kIHN0b3JhZ2UsIGRhdGFIb3N0LCBhbmQgbm90aWZ5IGxpc3RlbmVyc1xuICBsZXQge25vZGVMaXN0LCBub2RlSW5mb0xpc3R9ID0gdGVtcGxhdGVJbmZvO1xuICBpZiAobm9kZUluZm9MaXN0Lmxlbmd0aCkge1xuICAgIGZvciAobGV0IGk9MDsgaSA8IG5vZGVJbmZvTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGluZm8gPSBub2RlSW5mb0xpc3RbaV07XG4gICAgICBsZXQgbm9kZSA9IG5vZGVMaXN0W2ldO1xuICAgICAgbGV0IGJpbmRpbmdzID0gaW5mby5iaW5kaW5ncztcbiAgICAgIGlmIChiaW5kaW5ncykge1xuICAgICAgICBmb3IgKGxldCBpPTA7IGk8YmluZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsZXQgYmluZGluZyA9IGJpbmRpbmdzW2ldO1xuICAgICAgICAgIHNldHVwQ29tcG91bmRTdG9yYWdlKG5vZGUsIGJpbmRpbmcpO1xuICAgICAgICAgIGFkZE5vdGlmeUxpc3RlbmVyKG5vZGUsIGluc3QsIGJpbmRpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBUaGlzIGVuc3VyZXMgYWxsIGJvdW5kIGVsZW1lbnRzIGhhdmUgYSBob3N0IHNldCwgcmVnYXJkbGVzc1xuICAgICAgLy8gb2Ygd2hldGhlciB0aGV5IHVwZ3JhZGUgc3luY2hyb25vdXMgdG8gY3JlYXRpb25cbiAgICAgIG5vZGUuX19kYXRhSG9zdCA9IGluc3Q7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZXMgYF9fZGF0YUNvbXBvdW5kU3RvcmFnZWAgbG9jYWwgc3RvcmFnZSBvbiBhIGJvdW5kIG5vZGUgd2l0aFxuICogaW5pdGlhbCBsaXRlcmFsIGRhdGEgZm9yIGNvbXBvdW5kIGJpbmRpbmdzLCBhbmQgc2V0cyB0aGUgam9pbmVkXG4gKiBsaXRlcmFsIHBhcnRzIHRvIHRoZSBib3VuZCBwcm9wZXJ0eS5cbiAqXG4gKiBXaGVuIGNoYW5nZXMgdG8gY29tcG91bmQgcGFydHMgb2NjdXIsIHRoZXkgYXJlIGZpcnN0IHNldCBpbnRvIHRoZSBjb21wb3VuZFxuICogc3RvcmFnZSBhcnJheSBmb3IgdGhhdCBwcm9wZXJ0eSwgYW5kIHRoZW4gdGhlIGFycmF5IGlzIGpvaW5lZCB0byByZXN1bHQgaW5cbiAqIHRoZSBmaW5hbCB2YWx1ZSBzZXQgdG8gdGhlIHByb3BlcnR5L2F0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGUgQm91bmQgbm9kZSB0byBpbml0aWFsaXplXG4gKiBAcGFyYW0ge0JpbmRpbmd9IGJpbmRpbmcgQmluZGluZyBtZXRhZGF0YVxuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHNldHVwQ29tcG91bmRTdG9yYWdlKG5vZGUsIGJpbmRpbmcpIHtcbiAgaWYgKGJpbmRpbmcuaXNDb21wb3VuZCkge1xuICAgIC8vIENyZWF0ZSBjb21wb3VuZCBzdG9yYWdlIG1hcFxuICAgIGxldCBzdG9yYWdlID0gbm9kZS5fX2RhdGFDb21wb3VuZFN0b3JhZ2UgfHxcbiAgICAgIChub2RlLl9fZGF0YUNvbXBvdW5kU3RvcmFnZSA9IHt9KTtcbiAgICBsZXQgcGFydHMgPSBiaW5kaW5nLnBhcnRzO1xuICAgIC8vIENvcHkgbGl0ZXJhbHMgZnJvbSBwYXJ0cyBpbnRvIHN0b3JhZ2UgZm9yIHRoaXMgYmluZGluZ1xuICAgIGxldCBsaXRlcmFscyA9IG5ldyBBcnJheShwYXJ0cy5sZW5ndGgpO1xuICAgIGZvciAobGV0IGo9MDsgajxwYXJ0cy5sZW5ndGg7IGorKykge1xuICAgICAgbGl0ZXJhbHNbal0gPSBwYXJ0c1tqXS5saXRlcmFsO1xuICAgIH1cbiAgICBsZXQgdGFyZ2V0ID0gYmluZGluZy50YXJnZXQ7XG4gICAgc3RvcmFnZVt0YXJnZXRdID0gbGl0ZXJhbHM7XG4gICAgLy8gQ29uZmlndXJlIHByb3BlcnRpZXMgd2l0aCB0aGVpciBsaXRlcmFsIHBhcnRzXG4gICAgaWYgKGJpbmRpbmcubGl0ZXJhbCAmJiBiaW5kaW5nLmtpbmQgPT0gJ3Byb3BlcnR5Jykge1xuICAgICAgLy8gTm90ZSwgY2xhc3NOYW1lIG5lZWRzIHN0eWxlIHNjb3Bpbmcgc28gdGhpcyBuZWVkcyB3cmFwcGluZy5cbiAgICAgIC8vIFdlIG1heSBhbHNvIHdhbnQgdG8gY29uc2lkZXIgZG9pbmcgdGhpcyBmb3IgYHRleHRDb250ZW50YCBhbmRcbiAgICAgIC8vIGBpbm5lckhUTUxgLlxuICAgICAgaWYgKHRhcmdldCA9PT0gJ2NsYXNzTmFtZScpIHtcbiAgICAgICAgbm9kZSA9IHdyYXAobm9kZSk7XG4gICAgICB9XG4gICAgICBub2RlW3RhcmdldF0gPSBiaW5kaW5nLmxpdGVyYWw7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQWRkcyBhIDItd2F5IGJpbmRpbmcgbm90aWZpY2F0aW9uIGV2ZW50IGxpc3RlbmVyIHRvIHRoZSBub2RlIHNwZWNpZmllZFxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBub2RlIENoaWxkIGVsZW1lbnQgdG8gYWRkIGxpc3RlbmVyIHRvXG4gKiBAcGFyYW0geyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gaW5zdCBIb3N0IGVsZW1lbnQgaW5zdGFuY2UgdG8gaGFuZGxlXG4gKiAgICAgbm90aWZpY2F0aW9uIGV2ZW50XG4gKiBAcGFyYW0ge0JpbmRpbmd9IGJpbmRpbmcgQmluZGluZyBtZXRhZGF0YVxuICogQHJldHVybiB7dm9pZH1cbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGFkZE5vdGlmeUxpc3RlbmVyKG5vZGUsIGluc3QsIGJpbmRpbmcpIHtcbiAgaWYgKGJpbmRpbmcubGlzdGVuZXJFdmVudCkge1xuICAgIGxldCBwYXJ0ID0gYmluZGluZy5wYXJ0c1swXTtcbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoYmluZGluZy5saXN0ZW5lckV2ZW50LCBmdW5jdGlvbihlKSB7XG4gICAgICBoYW5kbGVOb3RpZmljYXRpb24oZSwgaW5zdCwgYmluZGluZy50YXJnZXQsIHBhcnQuc291cmNlLCBwYXJ0Lm5lZ2F0ZSk7XG4gICAgfSk7XG4gIH1cbn1cblxuLy8gLS0gZm9yIG1ldGhvZC1iYXNlZCBlZmZlY3RzIChjb21wbGV4T2JzZXJ2ZXIgJiBjb21wdXRlZCkgLS0tLS0tLS0tLS0tLS1cblxuLyoqXG4gKiBBZGRzIHByb3BlcnR5IGVmZmVjdHMgZm9yIGVhY2ggYXJndW1lbnQgaW4gdGhlIG1ldGhvZCBzaWduYXR1cmUgKGFuZFxuICogb3B0aW9uYWxseSwgZm9yIHRoZSBtZXRob2QgbmFtZSBpZiBgZHluYW1pY2AgaXMgdHJ1ZSkgdGhhdCBjYWxscyB0aGVcbiAqIHByb3ZpZGVkIGVmZmVjdCBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnQgfCBPYmplY3R9IG1vZGVsIFByb3RvdHlwZSBvciBpbnN0YW5jZVxuICogQHBhcmFtIHshTWV0aG9kU2lnbmF0dXJlfSBzaWcgTWV0aG9kIHNpZ25hdHVyZSBtZXRhZGF0YVxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgVHlwZSBvZiBwcm9wZXJ0eSBlZmZlY3QgdG8gYWRkXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBlZmZlY3RGbiBGdW5jdGlvbiB0byBydW4gd2hlbiBhcmd1bWVudHMgY2hhbmdlXG4gKiBAcGFyYW0geyo9fSBtZXRob2RJbmZvIEVmZmVjdC1zcGVjaWZpYyBpbmZvcm1hdGlvbiB0byBiZSBpbmNsdWRlZCBpblxuICogICBtZXRob2QgZWZmZWN0IG1ldGFkYXRhXG4gKiBAcGFyYW0ge2Jvb2xlYW58T2JqZWN0PX0gZHluYW1pY0ZuIEJvb2xlYW4gb3Igb2JqZWN0IG1hcCBpbmRpY2F0aW5nIHdoZXRoZXJcbiAqICAgbWV0aG9kIG5hbWVzIHNob3VsZCBiZSBpbmNsdWRlZCBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIGVmZmVjdC4gTm90ZSxcbiAqICAgZGVmYXVsdHMgdG8gdHJ1ZSBpZiB0aGUgc2lnbmF0dXJlIGlzIHN0YXRpYyAoc2lnLnN0YXRpYyBpcyB0cnVlKS5cbiAqIEByZXR1cm4geyFPYmplY3R9IEVmZmVjdCBtZXRhZGF0YSBmb3IgdGhpcyBtZXRob2QgZWZmZWN0XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBjcmVhdGVNZXRob2RFZmZlY3QobW9kZWwsIHNpZywgdHlwZSwgZWZmZWN0Rm4sIG1ldGhvZEluZm8sIGR5bmFtaWNGbikge1xuICBkeW5hbWljRm4gPSBzaWcuc3RhdGljIHx8IChkeW5hbWljRm4gJiZcbiAgICAodHlwZW9mIGR5bmFtaWNGbiAhPT0gJ29iamVjdCcgfHwgZHluYW1pY0ZuW3NpZy5tZXRob2ROYW1lXSkpO1xuICBsZXQgaW5mbyA9IHtcbiAgICBtZXRob2ROYW1lOiBzaWcubWV0aG9kTmFtZSxcbiAgICBhcmdzOiBzaWcuYXJncyxcbiAgICBtZXRob2RJbmZvLFxuICAgIGR5bmFtaWNGblxuICB9O1xuICBmb3IgKGxldCBpPTAsIGFyZzsgKGk8c2lnLmFyZ3MubGVuZ3RoKSAmJiAoYXJnPXNpZy5hcmdzW2ldKTsgaSsrKSB7XG4gICAgaWYgKCFhcmcubGl0ZXJhbCkge1xuICAgICAgbW9kZWwuX2FkZFByb3BlcnR5RWZmZWN0KGFyZy5yb290UHJvcGVydHksIHR5cGUsIHtcbiAgICAgICAgZm46IGVmZmVjdEZuLCBpbmZvOiBpbmZvLCB0cmlnZ2VyOiBhcmdcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuICBpZiAoZHluYW1pY0ZuKSB7XG4gICAgbW9kZWwuX2FkZFByb3BlcnR5RWZmZWN0KHNpZy5tZXRob2ROYW1lLCB0eXBlLCB7XG4gICAgICBmbjogZWZmZWN0Rm4sIGluZm86IGluZm9cbiAgICB9KTtcbiAgfVxuICByZXR1cm4gaW5mbztcbn1cblxuLyoqXG4gKiBDYWxscyBhIG1ldGhvZCB3aXRoIGFyZ3VtZW50cyBtYXJzaGFsZWQgZnJvbSBwcm9wZXJ0aWVzIG9uIHRoZSBpbnN0YW5jZVxuICogYmFzZWQgb24gdGhlIG1ldGhvZCBzaWduYXR1cmUgY29udGFpbmVkIGluIHRoZSBlZmZlY3QgbWV0YWRhdGEuXG4gKlxuICogTXVsdGktcHJvcGVydHkgb2JzZXJ2ZXJzLCBjb21wdXRlZCBwcm9wZXJ0aWVzLCBhbmQgaW5saW5lIGNvbXB1dGluZ1xuICogZnVuY3Rpb25zIGNhbGwgdGhpcyBmdW5jdGlvbiB0byBpbnZva2UgdGhlIG1ldGhvZCwgdGhlbiB1c2UgdGhlIHJldHVyblxuICogdmFsdWUgYWNjb3JkaW5nbHkuXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgVGhlIGluc3RhbmNlIHRoZSBlZmZlY3Qgd2lsbCBiZSBydW4gb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHByb3BlcnR5XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICogQHBhcmFtIHtPYmplY3R9IG9sZFByb3BzIEJhZyBvZiBwcmV2aW91cyB2YWx1ZXMgZm9yIGNoYW5nZWQgcHJvcGVydGllc1xuICogQHBhcmFtIHs/fSBpbmZvIEVmZmVjdCBtZXRhZGF0YVxuICogQHJldHVybiB7Kn0gUmV0dXJucyB0aGUgcmV0dXJuIHZhbHVlIGZyb20gdGhlIG1ldGhvZCBpbnZvY2F0aW9uXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBydW5NZXRob2RFZmZlY3QoaW5zdCwgcHJvcGVydHksIHByb3BzLCBvbGRQcm9wcywgaW5mbykge1xuICAvLyBJbnN0YW5jZXMgY2FuIG9wdGlvbmFsbHkgaGF2ZSBhIF9tZXRob2RIb3N0IHdoaWNoIGFsbG93cyByZWRpcmVjdGluZyB3aGVyZVxuICAvLyB0byBmaW5kIG1ldGhvZHMuIEN1cnJlbnRseSB1c2VkIGJ5IGB0ZW1wbGF0aXplYC5cbiAgbGV0IGNvbnRleHQgPSBpbnN0Ll9tZXRob2RIb3N0IHx8IGluc3Q7XG4gIGxldCBmbiA9IGNvbnRleHRbaW5mby5tZXRob2ROYW1lXTtcbiAgaWYgKGZuKSB7XG4gICAgbGV0IGFyZ3MgPSBpbnN0Ll9tYXJzaGFsQXJncyhpbmZvLmFyZ3MsIHByb3BlcnR5LCBwcm9wcyk7XG4gICAgcmV0dXJuIGFyZ3MgPT09IE5PT1AgPyBOT09QIDogZm4uYXBwbHkoY29udGV4dCwgYXJncyk7XG4gIH0gZWxzZSBpZiAoIWluZm8uZHluYW1pY0ZuKSB7XG4gICAgY29uc29sZS53YXJuKCdtZXRob2QgYCcgKyBpbmZvLm1ldGhvZE5hbWUgKyAnYCBub3QgZGVmaW5lZCcpO1xuICB9XG59XG5cbmNvbnN0IGVtcHR5QXJyYXkgPSBbXTtcblxuLy8gUmVndWxhciBleHByZXNzaW9ucyB1c2VkIGZvciBiaW5kaW5nXG5jb25zdCBJREVOVCAgPSAnKD86JyArICdbYS16QS1aXyRdW1xcXFx3LjokXFxcXC0qXSonICsgJyknO1xuY29uc3QgTlVNQkVSID0gJyg/OicgKyAnWy0rXT9bMC05XSpcXFxcLj9bMC05XSsoPzpbZUVdWy0rXT9bMC05XSspPycgKyAnKSc7XG5jb25zdCBTUVVPVEVfU1RSSU5HID0gJyg/OicgKyAnXFwnKD86W15cXCdcXFxcXFxcXF18XFxcXFxcXFwuKSpcXCcnICsgJyknO1xuY29uc3QgRFFVT1RFX1NUUklORyA9ICcoPzonICsgJ1wiKD86W15cIlxcXFxcXFxcXXxcXFxcXFxcXC4pKlwiJyArICcpJztcbmNvbnN0IFNUUklORyA9ICcoPzonICsgU1FVT1RFX1NUUklORyArICd8JyArIERRVU9URV9TVFJJTkcgKyAnKSc7XG5jb25zdCBBUkdVTUVOVCA9ICcoPzooJyArIElERU5UICsgJ3wnICsgTlVNQkVSICsgJ3wnICsgIFNUUklORyArICcpXFxcXHMqJyArICcpJztcbmNvbnN0IEFSR1VNRU5UUyA9ICcoPzonICsgQVJHVU1FTlQgKyAnKD86LFxcXFxzKicgKyBBUkdVTUVOVCArICcpKicgKyAnKSc7XG5jb25zdCBBUkdVTUVOVF9MSVNUID0gJyg/OicgKyAnXFxcXChcXFxccyonICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcoPzonICsgQVJHVU1FTlRTICsgJz8nICsgJyknICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXFxcXClcXFxccyonICsgJyknO1xuY29uc3QgQklORElORyA9ICcoJyArIElERU5UICsgJ1xcXFxzKicgKyBBUkdVTUVOVF9MSVNUICsgJz8nICsgJyknOyAvLyBHcm91cCAzXG5jb25zdCBPUEVOX0JSQUNLRVQgPSAnKFxcXFxbXFxcXFt8e3spJyArICdcXFxccyonO1xuY29uc3QgQ0xPU0VfQlJBQ0tFVCA9ICcoPzpdXXx9fSknO1xuY29uc3QgTkVHQVRFID0gJyg/OighKVxcXFxzKik/JzsgLy8gR3JvdXAgMlxuY29uc3QgRVhQUkVTU0lPTiA9IE9QRU5fQlJBQ0tFVCArIE5FR0FURSArIEJJTkRJTkcgKyBDTE9TRV9CUkFDS0VUO1xuY29uc3QgYmluZGluZ1JlZ2V4ID0gbmV3IFJlZ0V4cChFWFBSRVNTSU9OLCBcImdcIik7XG5cbi8qKlxuICogQ3JlYXRlIGEgc3RyaW5nIGZyb20gYmluZGluZyBwYXJ0cyBvZiBhbGwgdGhlIGxpdGVyYWwgcGFydHNcbiAqXG4gKiBAcGFyYW0geyFBcnJheTxCaW5kaW5nUGFydD59IHBhcnRzIEFsbCBwYXJ0cyB0byBzdHJpbmdpZnlcbiAqIEByZXR1cm4ge3N0cmluZ30gU3RyaW5nIG1hZGUgZnJvbSB0aGUgbGl0ZXJhbCBwYXJ0c1xuICovXG5mdW5jdGlvbiBsaXRlcmFsRnJvbVBhcnRzKHBhcnRzKSB7XG4gIGxldCBzID0gJyc7XG4gIGZvciAobGV0IGk9MDsgaTxwYXJ0cy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBsaXRlcmFsID0gcGFydHNbaV0ubGl0ZXJhbDtcbiAgICBzICs9IGxpdGVyYWwgfHwgJyc7XG4gIH1cbiAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogUGFyc2VzIGFuIGV4cHJlc3Npb24gc3RyaW5nIGZvciBhIG1ldGhvZCBzaWduYXR1cmUsIGFuZCByZXR1cm5zIGEgbWV0YWRhdGFcbiAqIGRlc2NyaWJpbmcgdGhlIG1ldGhvZCBpbiB0ZXJtcyBvZiBgbWV0aG9kTmFtZWAsIGBzdGF0aWNgICh3aGV0aGVyIGFsbCB0aGVcbiAqIGFyZ3VtZW50cyBhcmUgbGl0ZXJhbHMpLCBhbmQgYW4gYXJyYXkgb2YgYGFyZ3NgXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV4cHJlc3Npb24gVGhlIGV4cHJlc3Npb24gdG8gcGFyc2VcbiAqIEByZXR1cm4gez9NZXRob2RTaWduYXR1cmV9IFRoZSBtZXRob2QgbWV0YWRhdGEgb2JqZWN0IGlmIGEgbWV0aG9kIGV4cHJlc3Npb24gd2FzXG4gKiAgIGZvdW5kLCBvdGhlcndpc2UgYHVuZGVmaW5lZGBcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlTWV0aG9kKGV4cHJlc3Npb24pIHtcbiAgLy8gdHJpZXMgdG8gbWF0Y2ggdmFsaWQgamF2YXNjcmlwdCBwcm9wZXJ0eSBuYW1lc1xuICBsZXQgbSA9IGV4cHJlc3Npb24ubWF0Y2goLyhbXlxcc10rPylcXCgoW1xcc1xcU10qKVxcKS8pO1xuICBpZiAobSkge1xuICAgIGxldCBtZXRob2ROYW1lID0gbVsxXTtcbiAgICBsZXQgc2lnID0geyBtZXRob2ROYW1lLCBzdGF0aWM6IHRydWUsIGFyZ3M6IGVtcHR5QXJyYXkgfTtcbiAgICBpZiAobVsyXS50cmltKCkpIHtcbiAgICAgIC8vIHJlcGxhY2UgZXNjYXBlZCBjb21tYXMgd2l0aCBjb21tYSBlbnRpdHksIHNwbGl0IG9uIHVuLWVzY2FwZWQgY29tbWFzXG4gICAgICBsZXQgYXJncyA9IG1bMl0ucmVwbGFjZSgvXFxcXCwvZywgJyZjb21tYTsnKS5zcGxpdCgnLCcpO1xuICAgICAgcmV0dXJuIHBhcnNlQXJncyhhcmdzLCBzaWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2lnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxuLyoqXG4gKiBQYXJzZXMgYW4gYXJyYXkgb2YgYXJndW1lbnRzIGFuZCBzZXRzIHRoZSBgYXJnc2AgcHJvcGVydHkgb2YgdGhlIHN1cHBsaWVkXG4gKiBzaWduYXR1cmUgbWV0YWRhdGEgb2JqZWN0LiBTZXRzIHRoZSBgc3RhdGljYCBwcm9wZXJ0eSB0byBmYWxzZSBpZiBhbnlcbiAqIGFyZ3VtZW50IGlzIGEgbm9uLWxpdGVyYWwuXG4gKlxuICogQHBhcmFtIHshQXJyYXk8c3RyaW5nPn0gYXJnTGlzdCBBcnJheSBvZiBhcmd1bWVudCBuYW1lc1xuICogQHBhcmFtIHshTWV0aG9kU2lnbmF0dXJlfSBzaWcgTWV0aG9kIHNpZ25hdHVyZSBtZXRhZGF0YSBvYmplY3RcbiAqIEByZXR1cm4geyFNZXRob2RTaWduYXR1cmV9IFRoZSB1cGRhdGVkIHNpZ25hdHVyZSBtZXRhZGF0YSBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQXJncyhhcmdMaXN0LCBzaWcpIHtcbiAgc2lnLmFyZ3MgPSBhcmdMaXN0Lm1hcChmdW5jdGlvbihyYXdBcmcpIHtcbiAgICBsZXQgYXJnID0gcGFyc2VBcmcocmF3QXJnKTtcbiAgICBpZiAoIWFyZy5saXRlcmFsKSB7XG4gICAgICBzaWcuc3RhdGljID0gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiBhcmc7XG4gIH0sIHRoaXMpO1xuICByZXR1cm4gc2lnO1xufVxuXG4vKipcbiAqIFBhcnNlcyBhbiBpbmRpdmlkdWFsIGFyZ3VtZW50LCBhbmQgcmV0dXJucyBhbiBhcmd1bWVudCBtZXRhZGF0YSBvYmplY3RcbiAqIHdpdGggdGhlIGZvbGxvd2luZyBmaWVsZHM6XG4gKlxuICogICB7XG4gKiAgICAgdmFsdWU6ICdwcm9wJywgICAgICAgIC8vIHByb3BlcnR5L3BhdGggb3IgbGl0ZXJhbCB2YWx1ZVxuICogICAgIGxpdGVyYWw6IGZhbHNlLCAgICAgICAvLyB3aGV0aGVyIGFyZ3VtZW50IGlzIGEgbGl0ZXJhbFxuICogICAgIHN0cnVjdHVyZWQ6IGZhbHNlLCAgICAvLyB3aGV0aGVyIHRoZSBwcm9wZXJ0eSBpcyBhIHBhdGhcbiAqICAgICByb290UHJvcGVydHk6ICdwcm9wJywgLy8gdGhlIHJvb3QgcHJvcGVydHkgb2YgdGhlIHBhdGhcbiAqICAgICB3aWxkY2FyZDogZmFsc2UgICAgICAgLy8gd2hldGhlciB0aGUgYXJndW1lbnQgd2FzIGEgd2lsZGNhcmQgJy4qJyBwYXRoXG4gKiAgIH1cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gcmF3QXJnIFRoZSBzdHJpbmcgdmFsdWUgb2YgdGhlIGFyZ3VtZW50XG4gKiBAcmV0dXJuIHshTWV0aG9kQXJnfSBBcmd1bWVudCBtZXRhZGF0YSBvYmplY3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIHBhcnNlQXJnKHJhd0FyZykge1xuICAvLyBjbGVhbiB1cCB3aGl0ZXNwYWNlXG4gIGxldCBhcmcgPSByYXdBcmcudHJpbSgpXG4gICAgLy8gcmVwbGFjZSBjb21tYSBlbnRpdHkgd2l0aCBjb21tYVxuICAgIC5yZXBsYWNlKC8mY29tbWE7L2csICcsJylcbiAgICAvLyByZXBhaXIgZXh0cmEgZXNjYXBlIHNlcXVlbmNlczsgbm90ZSBvbmx5IGNvbW1hcyBzdHJpY3RseSBuZWVkXG4gICAgLy8gZXNjYXBpbmcsIGJ1dCB3ZSBhbGxvdyBhbnkgb3RoZXIgY2hhciB0byBiZSBlc2NhcGVkIHNpbmNlIGl0c1xuICAgIC8vIGxpa2VseSB1c2VycyB3aWxsIGRvIHRoaXNcbiAgICAucmVwbGFjZSgvXFxcXCguKS9nLCAnXFwkMScpXG4gICAgO1xuICAvLyBiYXNpYyBhcmd1bWVudCBkZXNjcmlwdG9yXG4gIGxldCBhID0ge1xuICAgIG5hbWU6IGFyZyxcbiAgICB2YWx1ZTogJycsXG4gICAgbGl0ZXJhbDogZmFsc2VcbiAgfTtcbiAgLy8gZGV0ZWN0IGxpdGVyYWwgdmFsdWUgKG11c3QgYmUgU3RyaW5nIG9yIE51bWJlcilcbiAgbGV0IGZjID0gYXJnWzBdO1xuICBpZiAoZmMgPT09ICctJykge1xuICAgIGZjID0gYXJnWzFdO1xuICB9XG4gIGlmIChmYyA+PSAnMCcgJiYgZmMgPD0gJzknKSB7XG4gICAgZmMgPSAnIyc7XG4gIH1cbiAgc3dpdGNoKGZjKSB7XG4gICAgY2FzZSBcIidcIjpcbiAgICBjYXNlICdcIic6XG4gICAgICBhLnZhbHVlID0gYXJnLnNsaWNlKDEsIC0xKTtcbiAgICAgIGEubGl0ZXJhbCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgICBjYXNlICcjJzpcbiAgICAgIGEudmFsdWUgPSBOdW1iZXIoYXJnKTtcbiAgICAgIGEubGl0ZXJhbCA9IHRydWU7XG4gICAgICBicmVhaztcbiAgfVxuICAvLyBpZiBub3QgbGl0ZXJhbCwgbG9vayBmb3Igc3RydWN0dXJlZCBwYXRoXG4gIGlmICghYS5saXRlcmFsKSB7XG4gICAgYS5yb290UHJvcGVydHkgPSByb290KGFyZyk7XG4gICAgLy8gZGV0ZWN0IHN0cnVjdHVyZWQgcGF0aCAoaGFzIGRvdHMpXG4gICAgYS5zdHJ1Y3R1cmVkID0gaXNQYXRoKGFyZyk7XG4gICAgaWYgKGEuc3RydWN0dXJlZCkge1xuICAgICAgYS53aWxkY2FyZCA9IChhcmcuc2xpY2UoLTIpID09ICcuKicpO1xuICAgICAgaWYgKGEud2lsZGNhcmQpIHtcbiAgICAgICAgYS5uYW1lID0gYXJnLnNsaWNlKDAsIC0yKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIGE7XG59XG5cbmZ1bmN0aW9uIGdldEFyZ1ZhbHVlKGRhdGEsIHByb3BzLCBwYXRoKSB7XG4gIGxldCB2YWx1ZSA9IGdldChkYXRhLCBwYXRoKTtcbiAgLy8gd2hlbiBkYXRhIGlzIG5vdCBzdG9yZWQgZS5nLiBgc3BsaWNlc2AsIGdldCB0aGUgdmFsdWUgZnJvbSBjaGFuZ2VkUHJvcHNcbiAgLy8gVE9ETyhrc2NoYWFmKTogTm90ZSwgdGhpcyBjYW4gY2F1c2UgYSByYXJlIGlzc3VlIHdoZXJlIHRoZSB3aWxkY2FyZFxuICAvLyBpbmZvLnZhbHVlIGNvdWxkIHB1bGwgYSBzdGFsZSB2YWx1ZSBvdXQgb2YgY2hhbmdlZFByb3BzIGR1cmluZyBhIHJlZW50cmFudFxuICAvLyBjaGFuZ2UgdGhhdCBzZXRzIHRoZSB2YWx1ZSBiYWNrIHRvIHVuZGVmaW5lZC5cbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXIvcG9seW1lci9pc3N1ZXMvNTQ3OVxuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gcHJvcHNbcGF0aF07XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG4vLyBkYXRhIGFwaVxuXG4vKipcbiAqIFNlbmRzIGFycmF5IHNwbGljZSBub3RpZmljYXRpb25zIChgLnNwbGljZXNgIGFuZCBgLmxlbmd0aGApXG4gKlxuICogTm90ZTogdGhpcyBpbXBsZW1lbnRhdGlvbiBvbmx5IGFjY2VwdHMgbm9ybWFsaXplZCBwYXRoc1xuICpcbiAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IEluc3RhbmNlIHRvIHNlbmQgbm90aWZpY2F0aW9ucyB0b1xuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRoZSBtdXRhdGlvbnMgb2NjdXJyZWQgb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIHRoZSBhcnJheSB0aGF0IHdhcyBtdXRhdGVkXG4gKiBAcGFyYW0ge0FycmF5fSBzcGxpY2VzIEFycmF5IG9mIHNwbGljZSByZWNvcmRzXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm90aWZ5U3BsaWNlcyhpbnN0LCBhcnJheSwgcGF0aCwgc3BsaWNlcykge1xuICBjb25zdCBzcGxpY2VzRGF0YSA9IHsgaW5kZXhTcGxpY2VzOiBzcGxpY2VzIH07XG4gIC8vIExlZ2FjeSBiZWhhdmlvciBzdG9yZWQgc3BsaWNlcyBpbiBgX19kYXRhX19gIHNvIGl0IHdhcyAqbm90KiBlcGhlbWVyYWwuXG4gIC8vIFRvIG1hdGNoIHRoaXMgYmVoYXZpb3IsIHdlIHN0b3JlIHNwbGljZXMgZGlyZWN0bHkgb24gdGhlIGFycmF5LlxuICBpZiAobGVnYWN5VW5kZWZpbmVkICYmICFpbnN0Ll9vdmVycmlkZUxlZ2FjeVVuZGVmaW5lZCkge1xuICAgIGFycmF5LnNwbGljZXMgPSBzcGxpY2VzRGF0YTtcbiAgfVxuICBpbnN0Lm5vdGlmeVBhdGgocGF0aCArICcuc3BsaWNlcycsIHNwbGljZXNEYXRhKTtcbiAgaW5zdC5ub3RpZnlQYXRoKHBhdGggKyAnLmxlbmd0aCcsIGFycmF5Lmxlbmd0aCk7XG4gIC8vIENsZWFyIHNwbGljZSBkYXRhIG9ubHkgd2hlbiBpdCdzIHN0b3JlZCBvbiB0aGUgYXJyYXkuXG4gIGlmIChsZWdhY3lVbmRlZmluZWQgJiYgIWluc3QuX292ZXJyaWRlTGVnYWN5VW5kZWZpbmVkKSB7XG4gICAgc3BsaWNlc0RhdGEuaW5kZXhTcGxpY2VzID0gW107XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgc3BsaWNlIHJlY29yZCBhbmQgc2VuZHMgYW4gYXJyYXkgc3BsaWNlIG5vdGlmaWNhdGlvbiBmb3JcbiAqIHRoZSBkZXNjcmliZWQgbXV0YXRpb25cbiAqXG4gKiBOb3RlOiB0aGlzIGltcGxlbWVudGF0aW9uIG9ubHkgYWNjZXB0cyBub3JtYWxpemVkIHBhdGhzXG4gKlxuICogQHBhcmFtIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IGluc3QgSW5zdGFuY2UgdG8gc2VuZCBub3RpZmljYXRpb25zIHRvXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdGhlIG11dGF0aW9ucyBvY2N1cnJlZCBvblxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gdGhlIGFycmF5IHRoYXQgd2FzIG11dGF0ZWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCBJbmRleCBhdCB3aGljaCB0aGUgYXJyYXkgbXV0YXRpb24gb2NjdXJyZWRcbiAqIEBwYXJhbSB7bnVtYmVyfSBhZGRlZENvdW50IE51bWJlciBvZiBhZGRlZCBpdGVtc1xuICogQHBhcmFtIHtBcnJheX0gcmVtb3ZlZCBBcnJheSBvZiByZW1vdmVkIGl0ZW1zXG4gKiBAcmV0dXJuIHt2b2lkfVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gbm90aWZ5U3BsaWNlKGluc3QsIGFycmF5LCBwYXRoLCBpbmRleCwgYWRkZWRDb3VudCwgcmVtb3ZlZCkge1xuICBub3RpZnlTcGxpY2VzKGluc3QsIGFycmF5LCBwYXRoLCBbe1xuICAgIGluZGV4OiBpbmRleCxcbiAgICBhZGRlZENvdW50OiBhZGRlZENvdW50LFxuICAgIHJlbW92ZWQ6IHJlbW92ZWQsXG4gICAgb2JqZWN0OiBhcnJheSxcbiAgICB0eXBlOiAnc3BsaWNlJ1xuICB9XSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhbiB1cHBlci1jYXNlZCB2ZXJzaW9uIG9mIHRoZSBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgU3RyaW5nIHRvIHVwcGVyY2FzZVxuICogQHJldHVybiB7c3RyaW5nfSBVcHBlcmNhc2VkIHN0cmluZ1xuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gdXBwZXIobmFtZSkge1xuICByZXR1cm4gbmFtZVswXS50b1VwcGVyQ2FzZSgpICsgbmFtZS5zdWJzdHJpbmcoMSk7XG59XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IHByb3ZpZGVzIG1ldGEtcHJvZ3JhbW1pbmcgZm9yIFBvbHltZXIncyB0ZW1wbGF0ZVxuICogYmluZGluZyBhbmQgZGF0YSBvYnNlcnZhdGlvbiAoY29sbGVjdGl2ZWx5LCBcInByb3BlcnR5IGVmZmVjdHNcIikgc3lzdGVtLlxuICpcbiAqIFRoaXMgbWl4aW4gdXNlcyBwcm92aWRlcyB0aGUgZm9sbG93aW5nIGtleSBzdGF0aWMgbWV0aG9kcyBmb3IgYWRkaW5nXG4gKiBwcm9wZXJ0eSBlZmZlY3RzIHRvIGFuIGVsZW1lbnQgY2xhc3M6XG4gKiAtIGBhZGRQcm9wZXJ0eUVmZmVjdGBcbiAqIC0gYGNyZWF0ZVByb3BlcnR5T2JzZXJ2ZXJgXG4gKiAtIGBjcmVhdGVNZXRob2RPYnNlcnZlcmBcbiAqIC0gYGNyZWF0ZU5vdGlmeWluZ1Byb3BlcnR5YFxuICogLSBgY3JlYXRlUmVhZE9ubHlQcm9wZXJ0eWBcbiAqIC0gYGNyZWF0ZVJlZmxlY3RlZFByb3BlcnR5YFxuICogLSBgY3JlYXRlQ29tcHV0ZWRQcm9wZXJ0eWBcbiAqIC0gYGJpbmRUZW1wbGF0ZWBcbiAqXG4gKiBFYWNoIG1ldGhvZCBjcmVhdGVzIG9uZSBvciBtb3JlIHByb3BlcnR5IGFjY2Vzc29ycywgYWxvbmcgd2l0aCBtZXRhZGF0YVxuICogdXNlZCBieSB0aGlzIG1peGluJ3MgaW1wbGVtZW50YXRpb24gb2YgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgdG8gcGVyZm9ybVxuICogdGhlIHByb3BlcnR5IGVmZmVjdHMuXG4gKlxuICogVW5kZXJzY29yZWQgdmVyc2lvbnMgb2YgdGhlIGFib3ZlIG1ldGhvZHMgYWxzbyBleGlzdCBvbiB0aGUgZWxlbWVudFxuICogcHJvdG90eXBlIGZvciBhZGRpbmcgcHJvcGVydHkgZWZmZWN0cyBvbiBpbnN0YW5jZXMgYXQgcnVudGltZS5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBtaXhpbiBvdmVycmlkZXMgc2V2ZXJhbCBgUHJvcGVydHlBY2Nlc3NvcnNgIG1ldGhvZHMsIGluXG4gKiBtYW55IGNhc2VzIHRvIG1haW50YWluIGd1YXJhbnRlZXMgcHJvdmlkZWQgYnkgdGhlIFBvbHltZXIgMS54IGZlYXR1cmVzO1xuICogbm90YWJseSBpdCBjaGFuZ2VzIHByb3BlcnR5IGFjY2Vzc29ycyB0byBiZSBzeW5jaHJvbm91cyBieSBkZWZhdWx0XG4gKiB3aGVyZWFzIHRoZSBkZWZhdWx0IHdoZW4gdXNpbmcgYFByb3BlcnR5QWNjZXNzb3JzYCBzdGFuZGFsb25lIGlzIHRvIGJlXG4gKiBhc3luYyBieSBkZWZhdWx0LlxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQGFwcGxpZXNNaXhpbiBUZW1wbGF0ZVN0YW1wXG4gKiBAYXBwbGllc01peGluIFByb3BlcnR5QWNjZXNzb3JzXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgbWV0YS1wcm9ncmFtbWluZyBmb3IgUG9seW1lcidzXG4gKiB0ZW1wbGF0ZSBiaW5kaW5nIGFuZCBkYXRhIG9ic2VydmF0aW9uIHN5c3RlbS5cbiAqL1xuZXhwb3J0IGNvbnN0IFByb3BlcnR5RWZmZWN0cyA9IGRlZHVwaW5nTWl4aW4oc3VwZXJDbGFzcyA9PiB7XG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0eUFjY2Vzc29yc31cbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfVGVtcGxhdGVTdGFtcH1cbiAgICogQHVucmVzdHJpY3RlZFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgY29uc3QgcHJvcGVydHlFZmZlY3RzQmFzZSA9IFRlbXBsYXRlU3RhbXAoUHJvcGVydHlBY2Nlc3NvcnMoc3VwZXJDbGFzcykpO1xuXG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9XG4gICAqIEBleHRlbmRzIHtwcm9wZXJ0eUVmZmVjdHNCYXNlfVxuICAgKiBAdW5yZXN0cmljdGVkXG4gICAqL1xuICBjbGFzcyBQcm9wZXJ0eUVmZmVjdHMgZXh0ZW5kcyBwcm9wZXJ0eUVmZmVjdHNCYXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbiAgICAgIC8vIFVzZWQgdG8gaWRlbnRpZnkgdXNlcnMgb2YgdGhpcyBtaXhpbiwgYWxhIGluc3RhbmNlb2ZcbiAgICAgIHRoaXMuX19pc1Byb3BlcnR5RWZmZWN0c0NsaWVudCA9IHRydWU7XG4gICAgICAvKiogQHR5cGUge2Jvb2xlYW59ICovXG4gICAgICB0aGlzLl9fZGF0YUNsaWVudHNSZWFkeTtcbiAgICAgIC8qKiBAdHlwZSB7QXJyYXl9ICovXG4gICAgICB0aGlzLl9fZGF0YVBlbmRpbmdDbGllbnRzO1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fZGF0YVRvTm90aWZ5O1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fZGF0YUxpbmtlZFBhdGhzO1xuICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xuICAgICAgdGhpcy5fX2RhdGFIYXNQYXRocztcbiAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuICAgICAgdGhpcy5fX2RhdGFDb21wb3VuZFN0b3JhZ2U7XG4gICAgICAvKiogQHR5cGUge1BvbHltZXJfUHJvcGVydHlFZmZlY3RzfSAqL1xuICAgICAgdGhpcy5fX2RhdGFIb3N0O1xuICAgICAgLyoqIEB0eXBlIHshT2JqZWN0fSAqL1xuICAgICAgdGhpcy5fX2RhdGFUZW1wO1xuICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xuICAgICAgdGhpcy5fX2RhdGFDbGllbnRzSW5pdGlhbGl6ZWQ7XG4gICAgICAvKiogQHR5cGUgeyFPYmplY3R9ICovXG4gICAgICB0aGlzLl9fZGF0YTtcbiAgICAgIC8qKiBAdHlwZSB7IU9iamVjdHxudWxsfSAqL1xuICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nO1xuICAgICAgLyoqIEB0eXBlIHshT2JqZWN0fSAqL1xuICAgICAgdGhpcy5fX2RhdGFPbGQ7XG4gICAgICAvKiogQHR5cGUge09iamVjdH0gKi9cbiAgICAgIHRoaXMuX19jb21wdXRlRWZmZWN0cztcbiAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuICAgICAgdGhpcy5fX2NvbXB1dGVJbmZvO1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fcmVmbGVjdEVmZmVjdHM7XG4gICAgICAvKiogQHR5cGUge09iamVjdH0gKi9cbiAgICAgIHRoaXMuX19ub3RpZnlFZmZlY3RzO1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fcHJvcGFnYXRlRWZmZWN0cztcbiAgICAgIC8qKiBAdHlwZSB7T2JqZWN0fSAqL1xuICAgICAgdGhpcy5fX29ic2VydmVFZmZlY3RzO1xuICAgICAgLyoqIEB0eXBlIHtPYmplY3R9ICovXG4gICAgICB0aGlzLl9fcmVhZE9ubHk7XG4gICAgICAvKiogQHR5cGUgeyFUZW1wbGF0ZUluZm99ICovXG4gICAgICB0aGlzLl9fdGVtcGxhdGVJbmZvO1xuICAgICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xuICAgICAgdGhpcy5fb3ZlcnJpZGVMZWdhY3lVbmRlZmluZWQ7XG4gICAgfVxuXG4gICAgZ2V0IFBST1BFUlRZX0VGRkVDVF9UWVBFUygpIHtcbiAgICAgIHJldHVybiBUWVBFUztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIF9pbml0aWFsaXplUHJvcGVydGllcygpIHtcbiAgICAgIHN1cGVyLl9pbml0aWFsaXplUHJvcGVydGllcygpO1xuICAgICAgdGhpcy5fcmVnaXN0ZXJIb3N0KCk7XG4gICAgICB0aGlzLl9fZGF0YUNsaWVudHNSZWFkeSA9IGZhbHNlO1xuICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nQ2xpZW50cyA9IG51bGw7XG4gICAgICB0aGlzLl9fZGF0YVRvTm90aWZ5ID0gbnVsbDtcbiAgICAgIHRoaXMuX19kYXRhTGlua2VkUGF0aHMgPSBudWxsO1xuICAgICAgdGhpcy5fX2RhdGFIYXNQYXRocyA9IGZhbHNlO1xuICAgICAgLy8gTWF5IGJlIHNldCBvbiBpbnN0YW5jZSBwcmlvciB0byB1cGdyYWRlXG4gICAgICB0aGlzLl9fZGF0YUNvbXBvdW5kU3RvcmFnZSA9IHRoaXMuX19kYXRhQ29tcG91bmRTdG9yYWdlIHx8IG51bGw7XG4gICAgICB0aGlzLl9fZGF0YUhvc3QgPSB0aGlzLl9fZGF0YUhvc3QgfHwgbnVsbDtcbiAgICAgIHRoaXMuX19kYXRhVGVtcCA9IHt9O1xuICAgICAgdGhpcy5fX2RhdGFDbGllbnRzSW5pdGlhbGl6ZWQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBfcmVnaXN0ZXJIb3N0KCkge1xuICAgICAgaWYgKGhvc3RTdGFjay5sZW5ndGgpIHtcbiAgICAgICAgbGV0IGhvc3QgPSBob3N0U3RhY2tbaG9zdFN0YWNrLmxlbmd0aC0xXTtcbiAgICAgICAgaG9zdC5fZW5xdWV1ZUNsaWVudCh0aGlzKTtcbiAgICAgICAgLy8gVGhpcyBlbnN1cmVzIGV2ZW4gbm9uLWJvdW5kIGVsZW1lbnRzIGhhdmUgYSBob3N0IHNldCwgYXNcbiAgICAgICAgLy8gbG9uZyBhcyB0aGV5IHVwZ3JhZGUgc3luY2hyb25vdXNseVxuICAgICAgICB0aGlzLl9fZGF0YUhvc3QgPSBob3N0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBgUHJvcGVydHlBY2Nlc3NvcnNgIGltcGxlbWVudGF0aW9uIHRvIHByb3ZpZGUgYVxuICAgICAqIG1vcmUgZWZmaWNpZW50IGltcGxlbWVudGF0aW9uIG9mIGluaXRpYWxpemluZyBwcm9wZXJ0aWVzIGZyb21cbiAgICAgKiB0aGUgcHJvdG90eXBlIG9uIHRoZSBpbnN0YW5jZS5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wcyBQcm9wZXJ0aWVzIHRvIGluaXRpYWxpemUgb24gdGhlIHByb3RvdHlwZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgX2luaXRpYWxpemVQcm90b1Byb3BlcnRpZXMocHJvcHMpIHtcbiAgICAgIHRoaXMuX19kYXRhID0gT2JqZWN0LmNyZWF0ZShwcm9wcyk7XG4gICAgICB0aGlzLl9fZGF0YVBlbmRpbmcgPSBPYmplY3QuY3JlYXRlKHByb3BzKTtcbiAgICAgIHRoaXMuX19kYXRhT2xkID0ge307XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIGBQcm9wZXJ0eUFjY2Vzc29yc2AgaW1wbGVtZW50YXRpb24gdG8gYXZvaWQgc2V0dGluZ1xuICAgICAqIGBfc2V0UHJvcGVydHlgJ3MgYHNob3VsZE5vdGlmeTogdHJ1ZWAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgUHJvcGVydGllcyB0byBpbml0aWFsaXplIG9uIHRoZSBpbnN0YW5jZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgX2luaXRpYWxpemVJbnN0YW5jZVByb3BlcnRpZXMocHJvcHMpIHtcbiAgICAgIGxldCByZWFkT25seSA9IHRoaXNbVFlQRVMuUkVBRF9PTkxZXTtcbiAgICAgIGZvciAobGV0IHByb3AgaW4gcHJvcHMpIHtcbiAgICAgICAgaWYgKCFyZWFkT25seSB8fCAhcmVhZE9ubHlbcHJvcF0pIHtcbiAgICAgICAgICB0aGlzLl9fZGF0YVBlbmRpbmcgPSB0aGlzLl9fZGF0YVBlbmRpbmcgfHwge307XG4gICAgICAgICAgdGhpcy5fX2RhdGFPbGQgPSB0aGlzLl9fZGF0YU9sZCB8fCB7fTtcbiAgICAgICAgICB0aGlzLl9fZGF0YVtwcm9wXSA9IHRoaXMuX19kYXRhUGVuZGluZ1twcm9wXSA9IHByb3BzW3Byb3BdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJvdG90eXBlIHNldHVwIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gc3RhdGljIGBhZGRQcm9wZXJ0eUVmZmVjdGAgQVBJIGJ1dCBjYW4gYmUgY2FsbGVkIG9uXG4gICAgICogYW4gaW5zdGFuY2UgdG8gYWRkIGVmZmVjdHMgYXQgcnVudGltZS4gIFNlZSB0aGF0IG1ldGhvZCBmb3JcbiAgICAgKiBmdWxsIEFQSSBkb2NzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IHRoYXQgc2hvdWxkIHRyaWdnZXIgdGhlIGVmZmVjdFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEVmZmVjdCB0eXBlLCBmcm9tIHRoaXMuUFJPUEVSVFlfRUZGRUNUX1RZUEVTXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBlZmZlY3QgRWZmZWN0IG1ldGFkYXRhIG9iamVjdFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9hZGRQcm9wZXJ0eUVmZmVjdChwcm9wZXJ0eSwgdHlwZSwgZWZmZWN0KSB7XG4gICAgICB0aGlzLl9jcmVhdGVQcm9wZXJ0eUFjY2Vzc29yKHByb3BlcnR5LCB0eXBlID09IFRZUEVTLlJFQURfT05MWSk7XG4gICAgICAvLyBlZmZlY3RzIGFyZSBhY2N1bXVsYXRlZCBpbnRvIGFycmF5cyBwZXIgcHJvcGVydHkgYmFzZWQgb24gdHlwZVxuICAgICAgbGV0IGVmZmVjdHMgPSBlbnN1cmVPd25FZmZlY3RNYXAodGhpcywgdHlwZSwgdHJ1ZSlbcHJvcGVydHldO1xuICAgICAgaWYgKCFlZmZlY3RzKSB7XG4gICAgICAgIGVmZmVjdHMgPSB0aGlzW3R5cGVdW3Byb3BlcnR5XSA9IFtdO1xuICAgICAgfVxuICAgICAgZWZmZWN0cy5wdXNoKGVmZmVjdCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgZ2l2ZW4gcHJvcGVydHkgZWZmZWN0LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IHRoZSBlZmZlY3Qgd2FzIGFzc29jaWF0ZWQgd2l0aFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSB0eXBlIEVmZmVjdCB0eXBlLCBmcm9tIHRoaXMuUFJPUEVSVFlfRUZGRUNUX1RZUEVTXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBlZmZlY3QgRWZmZWN0IG1ldGFkYXRhIG9iamVjdCB0byByZW1vdmVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIF9yZW1vdmVQcm9wZXJ0eUVmZmVjdChwcm9wZXJ0eSwgdHlwZSwgZWZmZWN0KSB7XG4gICAgICBsZXQgZWZmZWN0cyA9IGVuc3VyZU93bkVmZmVjdE1hcCh0aGlzLCB0eXBlLCB0cnVlKVtwcm9wZXJ0eV07XG4gICAgICBsZXQgaWR4ID0gZWZmZWN0cy5pbmRleE9mKGVmZmVjdCk7XG4gICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgZWZmZWN0cy5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGN1cnJlbnQgcHJvdG90eXBlL2luc3RhbmNlIGhhcyBhIHByb3BlcnR5IGVmZmVjdFxuICAgICAqIG9mIGEgY2VydGFpbiB0eXBlLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IHR5cGUgRWZmZWN0IHR5cGUsIGZyb20gdGhpcy5QUk9QRVJUWV9FRkZFQ1RfVFlQRVNcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBwcm90b3R5cGUvaW5zdGFuY2UgaGFzIGFuIGVmZmVjdCBvZiB0aGlzXG4gICAgICogICAgIHR5cGVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX2hhc1Byb3BlcnR5RWZmZWN0KHByb3BlcnR5LCB0eXBlKSB7XG4gICAgICBsZXQgZWZmZWN0cyA9IHRoaXNbdHlwZV07XG4gICAgICByZXR1cm4gQm9vbGVhbihlZmZlY3RzICYmIGVmZmVjdHNbcHJvcGVydHldKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIGN1cnJlbnQgcHJvdG90eXBlL2luc3RhbmNlIGhhcyBhIFwicmVhZCBvbmx5XCJcbiAgICAgKiBhY2Nlc3NvciBmb3IgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSBwcm90b3R5cGUvaW5zdGFuY2UgaGFzIGFuIGVmZmVjdCBvZiB0aGlzXG4gICAgICogICAgIHR5cGVcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX2hhc1JlYWRPbmx5RWZmZWN0KHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5faGFzUHJvcGVydHlFZmZlY3QocHJvcGVydHksIFRZUEVTLlJFQURfT05MWSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBjdXJyZW50IHByb3RvdHlwZS9pbnN0YW5jZSBoYXMgYSBcIm5vdGlmeVwiXG4gICAgICogcHJvcGVydHkgZWZmZWN0IGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHByb3RvdHlwZS9pbnN0YW5jZSBoYXMgYW4gZWZmZWN0IG9mIHRoaXNcbiAgICAgKiAgICAgdHlwZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfaGFzTm90aWZ5RWZmZWN0KHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5faGFzUHJvcGVydHlFZmZlY3QocHJvcGVydHksIFRZUEVTLk5PVElGWSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBjdXJyZW50IHByb3RvdHlwZS9pbnN0YW5jZSBoYXMgYSBcInJlZmxlY3QgdG9cbiAgICAgKiBhdHRyaWJ1dGVcIiBwcm9wZXJ0eSBlZmZlY3QgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSBpZiB0aGUgcHJvdG90eXBlL2luc3RhbmNlIGhhcyBhbiBlZmZlY3Qgb2YgdGhpc1xuICAgICAqICAgICB0eXBlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9oYXNSZWZsZWN0RWZmZWN0KHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gdGhpcy5faGFzUHJvcGVydHlFZmZlY3QocHJvcGVydHksIFRZUEVTLlJFRkxFQ1QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgY3VycmVudCBwcm90b3R5cGUvaW5zdGFuY2UgaGFzIGEgXCJjb21wdXRlZFwiXG4gICAgICogcHJvcGVydHkgZWZmZWN0IGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHByb3RvdHlwZS9pbnN0YW5jZSBoYXMgYW4gZWZmZWN0IG9mIHRoaXNcbiAgICAgKiAgICAgdHlwZVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfaGFzQ29tcHV0ZWRFZmZlY3QocHJvcGVydHkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9oYXNQcm9wZXJ0eUVmZmVjdChwcm9wZXJ0eSwgVFlQRVMuQ09NUFVURSk7XG4gICAgfVxuXG4gICAgLy8gUnVudGltZSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICAvKipcbiAgICAgKiBTZXRzIGEgcGVuZGluZyBwcm9wZXJ0eSBvciBwYXRoLiAgSWYgdGhlIHJvb3QgcHJvcGVydHkgb2YgdGhlIHBhdGggaW5cbiAgICAgKiBxdWVzdGlvbiBoYWQgbm8gYWNjZXNzb3IsIHRoZSBwYXRoIGlzIHNldCwgb3RoZXJ3aXNlIGl0IGlzIGVucXVldWVkXG4gICAgICogdmlhIGBfc2V0UGVuZGluZ1Byb3BlcnR5YC5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gaXNvbGF0ZXMgcmVsYXRpdmVseSBleHBlbnNpdmUgZnVuY3Rpb25hbGl0eSBuZWNlc3NhcnlcbiAgICAgKiBmb3IgdGhlIHB1YmxpYyBBUEkgKGBzZXRgLCBgc2V0UHJvcGVydGllc2AsIGBub3RpZnlQYXRoYCwgYW5kIHByb3BlcnR5XG4gICAgICogY2hhbmdlIGxpc3RlbmVycyB2aWEge3suLi59fSBiaW5kaW5ncyksIHN1Y2ggdGhhdCBpdCBpcyBvbmx5IGRvbmVcbiAgICAgKiB3aGVuIHBhdGhzIGVudGVyIHRoZSBzeXN0ZW0sIGFuZCBub3QgYXQgZXZlcnkgcHJvcGFnYXRpb24gc3RlcC4gIEl0XG4gICAgICogYWxzbyBzZXRzIGEgYF9fZGF0YUhhc1BhdGhzYCBmbGFnIG9uIHRoZSBpbnN0YW5jZSB3aGljaCBpcyB1c2VkIHRvXG4gICAgICogZmFzdC1wYXRoIHNsb3dlciBwYXRoLW1hdGNoaW5nIGNvZGUgaW4gdGhlIHByb3BlcnR5IGVmZmVjdHMgaG9zdCBwYXRocy5cbiAgICAgKlxuICAgICAqIGBwYXRoYCBjYW4gYmUgYSBwYXRoIHN0cmluZyBvciBhcnJheSBvZiBwYXRoIHBhcnRzIGFzIGFjY2VwdGVkIGJ5IHRoZVxuICAgICAqIHB1YmxpYyBBUEkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8ICFBcnJheTxudW1iZXJ8c3RyaW5nPn0gcGF0aCBQYXRoIHRvIHNldFxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0XG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gc2hvdWxkTm90aWZ5IFNldCB0byB0cnVlIGlmIHRoaXMgY2hhbmdlIHNob3VsZFxuICAgICAqICBjYXVzZSBhIHByb3BlcnR5IG5vdGlmaWNhdGlvbiBldmVudCBkaXNwYXRjaFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IGlzUGF0aE5vdGlmaWNhdGlvbiBJZiB0aGUgcGF0aCBiZWluZyBzZXQgaXMgYSBwYXRoXG4gICAgICogICBub3RpZmljYXRpb24gb2YgYW4gYWxyZWFkeSBjaGFuZ2VkIHZhbHVlLCBhcyBvcHBvc2VkIHRvIGEgcmVxdWVzdFxuICAgICAqICAgdG8gc2V0IGFuZCBub3RpZnkgdGhlIGNoYW5nZS4gIEluIHRoZSBsYXR0ZXIgYGZhbHNlYCBjYXNlLCBhIGRpcnR5XG4gICAgICogICBjaGVjayBpcyBwZXJmb3JtZWQgYW5kIHRoZW4gdGhlIHZhbHVlIGlzIHNldCB0byB0aGUgcGF0aCBiZWZvcmVcbiAgICAgKiAgIGVucXVldWluZyB0aGUgcGVuZGluZyBwcm9wZXJ0eSBjaGFuZ2UuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIHRoZSBwcm9wZXJ0eS9wYXRoIHdhcyBlbnF1ZXVlZCBpblxuICAgICAqICAgdGhlIHBlbmRpbmcgY2hhbmdlcyBiYWcuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9zZXRQZW5kaW5nUHJvcGVydHlPclBhdGgocGF0aCwgdmFsdWUsIHNob3VsZE5vdGlmeSwgaXNQYXRoTm90aWZpY2F0aW9uKSB7XG4gICAgICBpZiAoaXNQYXRoTm90aWZpY2F0aW9uIHx8XG4gICAgICAgICAgcm9vdChBcnJheS5pc0FycmF5KHBhdGgpID8gcGF0aFswXSA6IHBhdGgpICE9PSBwYXRoKSB7XG4gICAgICAgIC8vIERpcnR5IGNoZWNrIGNoYW5nZXMgYmVpbmcgc2V0IHRvIGEgcGF0aCBhZ2FpbnN0IHRoZSBhY3R1YWwgb2JqZWN0LFxuICAgICAgICAvLyBzaW5jZSB0aGlzIGlzIHRoZSBlbnRyeSBwb2ludCBmb3IgcGF0aHMgaW50byB0aGUgc3lzdGVtOyBmcm9tIGhlcmVcbiAgICAgICAgLy8gdGhlIG9ubHkgZGlydHkgY2hlY2tzIGFyZSBhZ2FpbnN0IHRoZSBgX19kYXRhVGVtcGAgY2FjaGUgdG8gcHJldmVudFxuICAgICAgICAvLyBkdXBsaWNhdGUgd29yayBpbiB0aGUgc2FtZSB0dXJuIG9ubHkuIE5vdGUsIGlmIHRoaXMgd2FzIGEgbm90aWZpY2F0aW9uXG4gICAgICAgIC8vIG9mIGEgY2hhbmdlIGFscmVhZHkgc2V0IHRvIGEgcGF0aCAoaXNQYXRoTm90aWZpY2F0aW9uOiB0cnVlKSxcbiAgICAgICAgLy8gd2UgYWx3YXlzIGxldCB0aGUgY2hhbmdlIHRocm91Z2ggYW5kIHNraXAgdGhlIGBzZXRgIHNpbmNlIGl0IHdhc1xuICAgICAgICAvLyBhbHJlYWR5IGRpcnR5IGNoZWNrZWQgYXQgdGhlIHBvaW50IG9mIGVudHJ5IGFuZCB0aGUgdW5kZXJseWluZ1xuICAgICAgICAvLyBvYmplY3QgaGFzIGFscmVhZHkgYmVlbiB1cGRhdGVkXG4gICAgICAgIGlmICghaXNQYXRoTm90aWZpY2F0aW9uKSB7XG4gICAgICAgICAgbGV0IG9sZCA9IGdldCh0aGlzLCBwYXRoKTtcbiAgICAgICAgICBwYXRoID0gLyoqIEB0eXBlIHtzdHJpbmd9ICovIChzZXQodGhpcywgcGF0aCwgdmFsdWUpKTtcbiAgICAgICAgICAvLyBVc2UgcHJvcGVydHktYWNjZXNzb3IncyBzaW1wbGVyIGRpcnR5IGNoZWNrXG4gICAgICAgICAgaWYgKCFwYXRoIHx8ICFzdXBlci5fc2hvdWxkUHJvcGVydHlDaGFuZ2UocGF0aCwgdmFsdWUsIG9sZCkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5fX2RhdGFIYXNQYXRocyA9IHRydWU7XG4gICAgICAgIGlmICh0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHkoLyoqQHR5cGV7c3RyaW5nfSovKHBhdGgpLCB2YWx1ZSwgc2hvdWxkTm90aWZ5KSkge1xuICAgICAgICAgIGNvbXB1dGVMaW5rZWRQYXRocyh0aGlzLCAvKipAdHlwZXtzdHJpbmd9Ki8gKHBhdGgpLCB2YWx1ZSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGlzLl9fZGF0YUhhc0FjY2Vzc29yICYmIHRoaXMuX19kYXRhSGFzQWNjZXNzb3JbcGF0aF0pIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5fc2V0UGVuZGluZ1Byb3BlcnR5KC8qKkB0eXBle3N0cmluZ30qLyhwYXRoKSwgdmFsdWUsIHNob3VsZE5vdGlmeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpc1twYXRoXSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhIHZhbHVlIHRvIGEgbm9uLVBvbHltZXIgZWxlbWVudC9ub2RlJ3MgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBUaGUgaW1wbGVtZW50YXRpb24gbWFrZXMgYSBiZXN0LWVmZm9ydCBhdCBiaW5kaW5nIGludGVyb3A6XG4gICAgICogU29tZSBuYXRpdmUgZWxlbWVudCBwcm9wZXJ0aWVzIGhhdmUgc2lkZS1lZmZlY3RzIHdoZW5cbiAgICAgKiByZS1zZXR0aW5nIHRoZSBzYW1lIHZhbHVlIChlLmcuIHNldHRpbmcgYDxpbnB1dD4udmFsdWVgIHJlc2V0cyB0aGVcbiAgICAgKiBjdXJzb3IgcG9zaXRpb24pLCBzbyB3ZSBkbyBhIGRpcnR5LWNoZWNrIGJlZm9yZSBzZXR0aW5nIHRoZSB2YWx1ZS5cbiAgICAgKiBIb3dldmVyLCBmb3IgYmV0dGVyIGludGVyb3Agd2l0aCBub24tUG9seW1lciBjdXN0b20gZWxlbWVudHMgdGhhdFxuICAgICAqIGFjY2VwdCBvYmplY3RzLCB3ZSBleHBsaWNpdGx5IHJlLXNldCBvYmplY3QgY2hhbmdlcyBjb21pbmcgZnJvbSB0aGVcbiAgICAgKiBQb2x5bWVyIHdvcmxkICh3aGljaCBtYXkgaW5jbHVkZSBkZWVwIG9iamVjdCBjaGFuZ2VzIHdpdGhvdXQgdGhlXG4gICAgICogdG9wIHJlZmVyZW5jZSBjaGFuZ2luZyksIGVycmluZyBvbiB0aGUgc2lkZSBvZiBwcm92aWRpbmcgbW9yZVxuICAgICAqIGluZm9ybWF0aW9uLlxuICAgICAqXG4gICAgICogVXNlcnMgbWF5IG92ZXJyaWRlIHRoaXMgbWV0aG9kIHRvIHByb3ZpZGUgYWx0ZXJuYXRlIGFwcHJvYWNoZXMuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyFOb2RlfSBub2RlIFRoZSBub2RlIHRvIHNldCBhIHByb3BlcnR5IG9uXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgVGhlIHByb3BlcnR5IHRvIHNldFxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9zZXRVbm1hbmFnZWRQcm9wZXJ0eVRvTm9kZShub2RlLCBwcm9wLCB2YWx1ZSkge1xuICAgICAgLy8gSXQgaXMgYSBqdWRnbWVudCBjYWxsIHRoYXQgcmVzZXR0aW5nIHByaW1pdGl2ZXMgaXNcbiAgICAgIC8vIFwiYmFkXCIgYW5kIHJlc2V0dGluZ3Mgb2JqZWN0cyBpcyBhbHNvIFwiZ29vZFwiOyBhbHRlcm5hdGl2ZWx5IHdlIGNvdWxkXG4gICAgICAvLyBpbXBsZW1lbnQgYSB3aGl0ZWxpc3Qgb2YgdGFnICYgcHJvcGVydHkgdmFsdWVzIHRoYXQgc2hvdWxkIG5ldmVyXG4gICAgICAvLyBiZSByZXNldCAoZS5nLiA8aW5wdXQ+LnZhbHVlICYmIDxzZWxlY3Q+LnZhbHVlKVxuICAgICAgaWYgKHZhbHVlICE9PSBub2RlW3Byb3BdIHx8IHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xuICAgICAgICAvLyBOb3RlLCBjbGFzc05hbWUgbmVlZHMgc3R5bGUgc2NvcGluZyBzbyB0aGlzIG5lZWRzIHdyYXBwaW5nLlxuICAgICAgICBpZiAocHJvcCA9PT0gJ2NsYXNzTmFtZScpIHtcbiAgICAgICAgICBub2RlID0gLyoqIEB0eXBlIHshTm9kZX0gKi8od3JhcChub2RlKSk7XG4gICAgICAgIH1cbiAgICAgICAgbm9kZVtwcm9wXSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyB0aGUgYFByb3BlcnRpZXNDaGFuZ2VkYCBpbXBsZW1lbnRhdGlvbiB0byBpbnRyb2R1Y2Ugc3BlY2lhbFxuICAgICAqIGRpcnR5IGNoZWNrIGxvZ2ljIGRlcGVuZGluZyBvbiB0aGUgcHJvcGVydHkgJiB2YWx1ZSBiZWluZyBzZXQ6XG4gICAgICpcbiAgICAgKiAxLiBBbnkgdmFsdWUgc2V0IHRvIGEgcGF0aCAoZS5nLiAnb2JqLnByb3AnOiA0MiBvciAnb2JqLnByb3AnOiB7Li4ufSlcbiAgICAgKiAgICBTdG9yZWQgaW4gYF9fZGF0YVRlbXBgLCBkaXJ0eSBjaGVja2VkIGFnYWluc3QgYF9fZGF0YVRlbXBgXG4gICAgICogMi4gT2JqZWN0IHNldCB0byBzaW1wbGUgcHJvcGVydHkgKGUuZy4gJ3Byb3AnOiB7Li4ufSlcbiAgICAgKiAgICBTdG9yZWQgaW4gYF9fZGF0YVRlbXBgIGFuZCBgX19kYXRhYCwgZGlydHkgY2hlY2tlZCBhZ2FpbnN0XG4gICAgICogICAgYF9fZGF0YVRlbXBgIGJ5IGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgYF9zaG91bGRQcm9wZXJ0eUNoYW5nZWBcbiAgICAgKiAzLiBQcmltaXRpdmUgdmFsdWUgc2V0IHRvIHNpbXBsZSBwcm9wZXJ0eSAoZS5nLiAncHJvcCc6IDQyKVxuICAgICAqICAgIFN0b3JlZCBpbiBgX19kYXRhYCwgZGlydHkgY2hlY2tlZCBhZ2FpbnN0IGBfX2RhdGFgXG4gICAgICpcbiAgICAgKiBUaGUgZGlydHktY2hlY2sgaXMgaW1wb3J0YW50IHRvIHByZXZlbnQgY3ljbGVzIGR1ZSB0byB0d28td2F5XG4gICAgICogbm90aWZpY2F0aW9uLCBidXQgcGF0aHMgYW5kIG9iamVjdHMgYXJlIG9ubHkgZGlydHkgY2hlY2tlZCBhZ2FpbnN0IGFueVxuICAgICAqIHByZXZpb3VzIHZhbHVlIHNldCBkdXJpbmcgdGhpcyB0dXJuIHZpYSBhIFwidGVtcG9yYXJ5IGNhY2hlXCIgdGhhdCBpc1xuICAgICAqIGNsZWFyZWQgd2hlbiB0aGUgbGFzdCBgX3Byb3BlcnRpZXNDaGFuZ2VkYCBleGl0cy4gVGhpcyBpcyBzbzpcbiAgICAgKiBhLiBhbnkgY2FjaGVkIGFycmF5IHBhdGhzIChlLmcuICdhcnJheS4zLnByb3AnKSBtYXkgYmUgaW52YWxpZGF0ZWRcbiAgICAgKiAgICBkdWUgdG8gYXJyYXkgbXV0YXRpb25zIGxpa2Ugc2hpZnQvdW5zaGlmdC9zcGxpY2U7IHRoaXMgaXMgZmluZVxuICAgICAqICAgIHNpbmNlIHBhdGggY2hhbmdlcyBhcmUgZGlydHktY2hlY2tlZCBhdCB1c2VyIGVudHJ5IHBvaW50cyBsaWtlIGBzZXRgXG4gICAgICogYi4gZGlydHktY2hlY2tpbmcgZm9yIG9iamVjdHMgb25seSBsYXN0cyBvbmUgdHVybiB0byBhbGxvdyB0aGUgdXNlclxuICAgICAqICAgIHRvIG11dGF0ZSB0aGUgb2JqZWN0IGluLXBsYWNlIGFuZCByZS1zZXQgaXQgd2l0aCB0aGUgc2FtZSBpZGVudGl0eVxuICAgICAqICAgIGFuZCBoYXZlIGFsbCBzdWItcHJvcGVydGllcyByZS1wcm9wYWdhdGVkIGluIGEgc3Vic2VxdWVudCB0dXJuLlxuICAgICAqXG4gICAgICogVGhlIHRlbXAgY2FjaGUgaXMgbm90IG5lY2Vzc2FyaWx5IHN1ZmZpY2llbnQgdG8gcHJldmVudCBpbnZhbGlkIGFycmF5XG4gICAgICogcGF0aHMsIHNpbmNlIGEgc3BsaWNlIGNhbiBoYXBwZW4gZHVyaW5nIHRoZSBzYW1lIHR1cm4gKHdpdGggcGF0aG9sb2dpY2FsXG4gICAgICogdXNlciBjb2RlKTsgd2UgY291bGQgaW50cm9kdWNlIGEgXCJmaXh1cFwiIGZvciB0ZW1wb3JhcmlseSBjYWNoZWQgYXJyYXlcbiAgICAgKiBwYXRocyBpZiBuZWVkZWQ6IGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyL3BvbHltZXIvaXNzdWVzLzQyMjdcbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0XG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gc2hvdWxkTm90aWZ5IFRydWUgaWYgcHJvcGVydHkgc2hvdWxkIGZpcmUgbm90aWZpY2F0aW9uXG4gICAgICogICBldmVudCAoYXBwbGllcyBvbmx5IGZvciBgbm90aWZ5OiB0cnVlYCBwcm9wZXJ0aWVzKVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvcGVydHkgY2hhbmdlZFxuICAgICAqL1xuICAgIF9zZXRQZW5kaW5nUHJvcGVydHkocHJvcGVydHksIHZhbHVlLCBzaG91bGROb3RpZnkpIHtcbiAgICAgIGxldCBwcm9wSXNQYXRoID0gdGhpcy5fX2RhdGFIYXNQYXRocyAmJiBpc1BhdGgocHJvcGVydHkpO1xuICAgICAgbGV0IHByZXZQcm9wcyA9IHByb3BJc1BhdGggPyB0aGlzLl9fZGF0YVRlbXAgOiB0aGlzLl9fZGF0YTtcbiAgICAgIGlmICh0aGlzLl9zaG91bGRQcm9wZXJ0eUNoYW5nZShwcm9wZXJ0eSwgdmFsdWUsIHByZXZQcm9wc1twcm9wZXJ0eV0pKSB7XG4gICAgICAgIGlmICghdGhpcy5fX2RhdGFQZW5kaW5nKSB7XG4gICAgICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nID0ge307XG4gICAgICAgICAgdGhpcy5fX2RhdGFPbGQgPSB7fTtcbiAgICAgICAgfVxuICAgICAgICAvLyBFbnN1cmUgb2xkIGlzIGNhcHR1cmVkIGZyb20gdGhlIGxhc3QgdHVyblxuICAgICAgICBpZiAoIShwcm9wZXJ0eSBpbiB0aGlzLl9fZGF0YU9sZCkpIHtcbiAgICAgICAgICB0aGlzLl9fZGF0YU9sZFtwcm9wZXJ0eV0gPSB0aGlzLl9fZGF0YVtwcm9wZXJ0eV07XG4gICAgICAgIH1cbiAgICAgICAgLy8gUGF0aHMgYXJlIHN0b3JlZCBpbiB0ZW1wb3JhcnkgY2FjaGUgKGNsZWFyZWQgYXQgZW5kIG9mIHR1cm4pLFxuICAgICAgICAvLyB3aGljaCBpcyB1c2VkIGZvciBkaXJ0eS1jaGVja2luZywgYWxsIG90aGVycyBzdG9yZWQgaW4gX19kYXRhXG4gICAgICAgIGlmIChwcm9wSXNQYXRoKSB7XG4gICAgICAgICAgdGhpcy5fX2RhdGFUZW1wW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX19kYXRhW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEFsbCBjaGFuZ2VzIGdvIGludG8gcGVuZGluZyBwcm9wZXJ0eSBiYWcsIHBhc3NlZCB0byBfcHJvcGVydGllc0NoYW5nZWRcbiAgICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nW3Byb3BlcnR5XSA9IHZhbHVlO1xuICAgICAgICAvLyBUcmFjayBwcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIG5vdGlmeSBzZXBhcmF0ZWx5XG4gICAgICAgIGlmIChwcm9wSXNQYXRoIHx8ICh0aGlzW1RZUEVTLk5PVElGWV0gJiYgdGhpc1tUWVBFUy5OT1RJRlldW3Byb3BlcnR5XSkpIHtcbiAgICAgICAgICB0aGlzLl9fZGF0YVRvTm90aWZ5ID0gdGhpcy5fX2RhdGFUb05vdGlmeSB8fCB7fTtcbiAgICAgICAgICB0aGlzLl9fZGF0YVRvTm90aWZ5W3Byb3BlcnR5XSA9IHNob3VsZE5vdGlmeTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgYmFzZSBpbXBsZW1lbnRhdGlvbiB0byBlbnN1cmUgYWxsIGFjY2Vzc29ycyBzZXQgYHNob3VsZE5vdGlmeWBcbiAgICAgKiB0byB0cnVlLCBmb3IgcGVyLXByb3BlcnR5IG5vdGlmaWNhdGlvbiB0cmFja2luZy5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIHRoZSBwcm9wZXJ0eVxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBfc2V0UHJvcGVydHkocHJvcGVydHksIHZhbHVlKSB7XG4gICAgICBpZiAodGhpcy5fc2V0UGVuZGluZ1Byb3BlcnR5KHByb3BlcnR5LCB2YWx1ZSwgdHJ1ZSkpIHtcbiAgICAgICAgdGhpcy5faW52YWxpZGF0ZVByb3BlcnRpZXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgYFByb3BlcnR5QWNjZXNzb3JgJ3MgZGVmYXVsdCBhc3luYyBxdWV1aW5nIG9mXG4gICAgICogYF9wcm9wZXJ0aWVzQ2hhbmdlZGA6IGlmIGBfX2RhdGFSZWFkeWAgaXMgZmFsc2UgKGhhcyBub3QgeWV0IGJlZW5cbiAgICAgKiBtYW51YWxseSBmbHVzaGVkKSwgdGhlIGZ1bmN0aW9uIG5vLW9wczsgb3RoZXJ3aXNlIGZsdXNoZXNcbiAgICAgKiBgX3Byb3BlcnRpZXNDaGFuZ2VkYCBzeW5jaHJvbm91c2x5LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBfaW52YWxpZGF0ZVByb3BlcnRpZXMoKSB7XG4gICAgICBpZiAodGhpcy5fX2RhdGFSZWFkeSkge1xuICAgICAgICB0aGlzLl9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbnF1ZXVlcyB0aGUgZ2l2ZW4gY2xpZW50IG9uIGEgbGlzdCBvZiBwZW5kaW5nIGNsaWVudHMsIHdob3NlXG4gICAgICogcGVuZGluZyBwcm9wZXJ0eSBjaGFuZ2VzIGNhbiBsYXRlciBiZSBmbHVzaGVkIHZpYSBhIGNhbGwgdG9cbiAgICAgKiBgX2ZsdXNoQ2xpZW50c2AuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2xpZW50IFByb3BlcnR5RWZmZWN0cyBjbGllbnQgdG8gZW5xdWV1ZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9lbnF1ZXVlQ2xpZW50KGNsaWVudCkge1xuICAgICAgdGhpcy5fX2RhdGFQZW5kaW5nQ2xpZW50cyA9IHRoaXMuX19kYXRhUGVuZGluZ0NsaWVudHMgfHwgW107XG4gICAgICBpZiAoY2xpZW50ICE9PSB0aGlzKSB7XG4gICAgICAgIHRoaXMuX19kYXRhUGVuZGluZ0NsaWVudHMucHVzaChjbGllbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZsdXNoZXMgYW55IGNsaWVudHMgcHJldmlvdXNseSBlbnF1ZXVlZCB2aWEgYF9lbnF1ZXVlQ2xpZW50YCwgY2F1c2luZ1xuICAgICAqIHRoZWlyIGBfZmx1c2hQcm9wZXJ0aWVzYCBtZXRob2QgdG8gcnVuLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX2ZsdXNoQ2xpZW50cygpIHtcbiAgICAgIGlmICghdGhpcy5fX2RhdGFDbGllbnRzUmVhZHkpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFDbGllbnRzUmVhZHkgPSB0cnVlO1xuICAgICAgICB0aGlzLl9yZWFkeUNsaWVudHMoKTtcbiAgICAgICAgLy8gT3ZlcnJpZGUgcG9pbnQgd2hlcmUgYWNjZXNzb3JzIGFyZSB0dXJuZWQgb247IGltcG9ydGFudGx5LFxuICAgICAgICAvLyB0aGlzIGlzIGFmdGVyIGNsaWVudHMgaGF2ZSBmdWxseSByZWFkaWVkLCBwcm92aWRpbmcgYSBndWFyYW50ZWVcbiAgICAgICAgLy8gdGhhdCBhbnkgcHJvcGVydHkgZWZmZWN0cyBvY2N1ciBvbmx5IGFmdGVyIGFsbCBjbGllbnRzIGFyZSByZWFkeS5cbiAgICAgICAgdGhpcy5fX2RhdGFSZWFkeSA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9fZW5hYmxlT3JGbHVzaENsaWVudHMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOT1RFOiBXZSBlbnN1cmUgY2xpZW50cyBlaXRoZXIgZW5hYmxlIG9yIGZsdXNoIGFzIGFwcHJvcHJpYXRlLiBUaGlzXG4gICAgLy8gaGFuZGxlcyB0d28gY29ybmVyIGNhc2VzOlxuICAgIC8vICgxKSBjbGllbnRzIGZsdXNoIHByb3Blcmx5IHdoZW4gY29ubmVjdGVkL2VuYWJsZWQgYmVmb3JlIHRoZSBob3N0XG4gICAgLy8gZW5hYmxlczsgZS5nLlxuICAgIC8vICAgKGEpIFRlbXBsYXRpemUgc3RhbXBzIHdpdGggbm8gcHJvcGVydGllcyBhbmQgZG9lcyBub3QgZmx1c2ggYW5kXG4gICAgLy8gICAoYikgdGhlIGluc3RhbmNlIGlzIGluc2VydGVkIGludG8gZG9tIGFuZFxuICAgIC8vICAgKGMpIHRoZW4gdGhlIGluc3RhbmNlIGZsdXNoZXMuXG4gICAgLy8gKDIpIGNsaWVudHMgZW5hYmxlIHByb3Blcmx5IHdoZW4gbm90IGNvbm5lY3RlZC9lbmFibGVkIHdoZW4gdGhlIGhvc3RcbiAgICAvLyBmbHVzaGVzOyBlLmcuXG4gICAgLy8gICAoYSkgYSB0ZW1wbGF0ZSBpcyBydW50aW1lIHN0YW1wZWQgYW5kIG5vdCB5ZXQgY29ubmVjdGVkL2VuYWJsZWRcbiAgICAvLyAgIChiKSBhIGhvc3Qgc2V0cyBhIHByb3BlcnR5LCBjYXVzaW5nIHN0YW1wZWQgZG9tIHRvIGZsdXNoXG4gICAgLy8gICAoYykgdGhlIHN0YW1wZWQgZG9tIGVuYWJsZXMuXG4gICAgX19lbmFibGVPckZsdXNoQ2xpZW50cygpIHtcbiAgICAgIGxldCBjbGllbnRzID0gdGhpcy5fX2RhdGFQZW5kaW5nQ2xpZW50cztcbiAgICAgIGlmIChjbGllbnRzKSB7XG4gICAgICAgIHRoaXMuX19kYXRhUGVuZGluZ0NsaWVudHMgPSBudWxsO1xuICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBjbGllbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGV0IGNsaWVudCA9IGNsaWVudHNbaV07XG4gICAgICAgICAgaWYgKCFjbGllbnQuX19kYXRhRW5hYmxlZCkge1xuICAgICAgICAgICAgY2xpZW50Ll9lbmFibGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgfSBlbHNlIGlmIChjbGllbnQuX19kYXRhUGVuZGluZykge1xuICAgICAgICAgICAgY2xpZW50Ll9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGFueSBpbml0aWFsIHNldHVwIG9uIGNsaWVudCBkb20uIENhbGxlZCBiZWZvcmUgdGhlIGZpcnN0XG4gICAgICogYF9mbHVzaFByb3BlcnRpZXNgIGNhbGwgb24gY2xpZW50IGRvbSBhbmQgYmVmb3JlIGFueSBlbGVtZW50XG4gICAgICogb2JzZXJ2ZXJzIGFyZSBjYWxsZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfcmVhZHlDbGllbnRzKCkge1xuICAgICAgdGhpcy5fX2VuYWJsZU9yRmx1c2hDbGllbnRzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIGJhZyBvZiBwcm9wZXJ0eSBjaGFuZ2VzIHRvIHRoaXMgaW5zdGFuY2UsIGFuZFxuICAgICAqIHN5bmNocm9ub3VzbHkgcHJvY2Vzc2VzIGFsbCBlZmZlY3RzIG9mIHRoZSBwcm9wZXJ0aWVzIGFzIGEgYmF0Y2guXG4gICAgICpcbiAgICAgKiBQcm9wZXJ0eSBuYW1lcyBtdXN0IGJlIHNpbXBsZSBwcm9wZXJ0aWVzLCBub3QgcGF0aHMuICBCYXRjaGVkXG4gICAgICogcGF0aCBwcm9wYWdhdGlvbiBpcyBub3Qgc3VwcG9ydGVkLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIEJhZyBvZiBvbmUgb3IgbW9yZSBrZXktdmFsdWUgcGFpcnMgd2hvc2Uga2V5IGlzXG4gICAgICogICBhIHByb3BlcnR5IGFuZCB2YWx1ZSBpcyB0aGUgbmV3IHZhbHVlIHRvIHNldCBmb3IgdGhhdCBwcm9wZXJ0eS5cbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBzZXRSZWFkT25seSBXaGVuIHRydWUsIGFueSBwcml2YXRlIHZhbHVlcyBzZXQgaW5cbiAgICAgKiAgIGBwcm9wc2Agd2lsbCBiZSBzZXQuIEJ5IGRlZmF1bHQsIGBzZXRQcm9wZXJ0aWVzYCB3aWxsIG5vdCBzZXRcbiAgICAgKiAgIGByZWFkT25seTogdHJ1ZWAgcm9vdCBwcm9wZXJ0aWVzLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNldFByb3BlcnRpZXMocHJvcHMsIHNldFJlYWRPbmx5KSB7XG4gICAgICBmb3IgKGxldCBwYXRoIGluIHByb3BzKSB7XG4gICAgICAgIGlmIChzZXRSZWFkT25seSB8fCAhdGhpc1tUWVBFUy5SRUFEX09OTFldIHx8ICF0aGlzW1RZUEVTLlJFQURfT05MWV1bcGF0aF0pIHtcbiAgICAgICAgICAvL1RPRE8oa3NjaGFhZik6IGV4cGxpY2l0bHkgZGlzYWxsb3cgcGF0aHMgaW4gc2V0UHJvcGVydHk/XG4gICAgICAgICAgLy8gd2lsZGNhcmQgb2JzZXJ2ZXJzIGN1cnJlbnRseSBvbmx5IHBhc3MgdGhlIGZpcnN0IGNoYW5nZWQgcGF0aFxuICAgICAgICAgIC8vIGluIHRoZSBgaW5mb2Agb2JqZWN0LCBhbmQgeW91IGNvdWxkIGRvIHNvbWUgb2RkIHRoaW5ncyBiYXRjaGluZ1xuICAgICAgICAgIC8vIHBhdGhzLCBlLmcuIHsnZm9vLmJhcic6IHsuLi59LCAnZm9vJzogbnVsbH1cbiAgICAgICAgICB0aGlzLl9zZXRQZW5kaW5nUHJvcGVydHlPclBhdGgocGF0aCwgcHJvcHNbcGF0aF0sIHRydWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9pbnZhbGlkYXRlUHJvcGVydGllcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBgUHJvcGVydHlBY2Nlc3NvcnNgIHNvIHRoYXQgcHJvcGVydHkgYWNjZXNzb3JcbiAgICAgKiBzaWRlIGVmZmVjdHMgYXJlIG5vdCBlbmFibGVkIHVudGlsIGFmdGVyIGNsaWVudCBkb20gaXMgZnVsbHkgcmVhZHkuXG4gICAgICogQWxzbyBjYWxscyBgX2ZsdXNoQ2xpZW50c2AgY2FsbGJhY2sgdG8gZW5zdXJlIGNsaWVudCBkb20gaXMgZW5hYmxlZFxuICAgICAqIHRoYXQgd2FzIG5vdCBlbmFibGVkIGFzIGEgcmVzdWx0IG9mIGZsdXNoaW5nIHByb3BlcnRpZXMuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHJlYWR5KCkge1xuICAgICAgLy8gSXQgaXMgaW1wb3J0YW50IHRoYXQgYHN1cGVyLnJlYWR5KClgIGlzIG5vdCBjYWxsZWQgaGVyZSBhcyBpdFxuICAgICAgLy8gaW1tZWRpYXRlbHkgdHVybnMgb24gYWNjZXNzb3JzLiBJbnN0ZWFkLCB3ZSB3YWl0IHVudGlsIGByZWFkeUNsaWVudHNgXG4gICAgICAvLyB0byBlbmFibGUgYWNjZXNzb3JzIHRvIHByb3ZpZGUgYSBndWFyYW50ZWUgdGhhdCBjbGllbnRzIGFyZSByZWFkeVxuICAgICAgLy8gYmVmb3JlIHByb2Nlc3NpbmcgYW55IGFjY2Vzc29ycyBzaWRlIGVmZmVjdHMuXG4gICAgICB0aGlzLl9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgIC8vIElmIG5vIGRhdGEgd2FzIHBlbmRpbmcsIGBfZmx1c2hQcm9wZXJ0aWVzYCB3aWxsIG5vdCBgZmx1c2hDbGllbnRzYFxuICAgICAgLy8gc28gZW5zdXJlIHRoaXMgaXMgZG9uZS5cbiAgICAgIGlmICghdGhpcy5fX2RhdGFDbGllbnRzUmVhZHkpIHtcbiAgICAgICAgdGhpcy5fZmx1c2hDbGllbnRzKCk7XG4gICAgICB9XG4gICAgICAvLyBCZWZvcmUgcmVhZHksIGNsaWVudCBub3RpZmljYXRpb25zIGRvIG5vdCB0cmlnZ2VyIF9mbHVzaFByb3BlcnRpZXMuXG4gICAgICAvLyBUaGVyZWZvcmUgYSBmbHVzaCBpcyBuZWNlc3NhcnkgaGVyZSBpZiBkYXRhIGhhcyBiZWVuIHNldC5cbiAgICAgIGlmICh0aGlzLl9fZGF0YVBlbmRpbmcpIHtcbiAgICAgICAgdGhpcy5fZmx1c2hQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBgUHJvcGVydHlBY2Nlc3NvcnNgJ3MgcHJvcGVydGllcyBjaGFuZ2VkIGNhbGxiYWNrLlxuICAgICAqXG4gICAgICogUnVucyBlYWNoIGNsYXNzIG9mIGVmZmVjdHMgZm9yIHRoZSBiYXRjaCBvZiBjaGFuZ2VkIHByb3BlcnRpZXMgaW5cbiAgICAgKiBhIHNwZWNpZmljIG9yZGVyIChjb21wdXRlLCBwcm9wYWdhdGUsIHJlZmxlY3QsIG9ic2VydmUsIG5vdGlmeSkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IGN1cnJlbnRQcm9wcyBCYWcgb2YgYWxsIGN1cnJlbnQgYWNjZXNzb3IgdmFsdWVzXG4gICAgICogQHBhcmFtIHs/T2JqZWN0fSBjaGFuZ2VkUHJvcHMgQmFnIG9mIHByb3BlcnRpZXMgY2hhbmdlZCBzaW5jZSB0aGUgbGFzdFxuICAgICAqICAgY2FsbCB0byBgX3Byb3BlcnRpZXNDaGFuZ2VkYFxuICAgICAqIEBwYXJhbSB7P09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgZWFjaCBwcm9wZXJ0eVxuICAgICAqICAgaW4gYGNoYW5nZWRQcm9wc2BcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIF9wcm9wZXJ0aWVzQ2hhbmdlZChjdXJyZW50UHJvcHMsIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMpIHtcbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIC8vIGxldCBjID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoY2hhbmdlZFByb3BzIHx8IHt9KTtcbiAgICAgIC8vIHdpbmRvdy5kZWJ1ZyAmJiBjb25zb2xlLmdyb3VwKHRoaXMubG9jYWxOYW1lICsgJyMnICsgdGhpcy5pZCArICc6ICcgKyBjKTtcbiAgICAgIC8vIGlmICh3aW5kb3cuZGVidWcpIHsgZGVidWdnZXI7IH1cbiAgICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICAgIGxldCBoYXNQYXRocyA9IHRoaXMuX19kYXRhSGFzUGF0aHM7XG4gICAgICB0aGlzLl9fZGF0YUhhc1BhdGhzID0gZmFsc2U7XG4gICAgICBsZXQgbm90aWZ5UHJvcHM7XG4gICAgICAvLyBDb21wdXRlIHByb3BlcnRpZXNcbiAgICAgIHJ1bkNvbXB1dGVkRWZmZWN0cyh0aGlzLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocyk7XG4gICAgICAvLyBDbGVhciBub3RpZnkgcHJvcGVydGllcyBwcmlvciB0byBwb3NzaWJsZSByZWVudHJ5IChwcm9wYWdhdGUsIG9ic2VydmUpLFxuICAgICAgLy8gYnV0IGFmdGVyIGNvbXB1dGluZyBlZmZlY3RzIGhhdmUgYSBjaGFuY2UgdG8gYWRkIHRvIHRoZW1cbiAgICAgIG5vdGlmeVByb3BzID0gdGhpcy5fX2RhdGFUb05vdGlmeTtcbiAgICAgIHRoaXMuX19kYXRhVG9Ob3RpZnkgPSBudWxsO1xuICAgICAgLy8gUHJvcGFnYXRlIHByb3BlcnRpZXMgdG8gY2xpZW50c1xuICAgICAgdGhpcy5fcHJvcGFnYXRlUHJvcGVydHlDaGFuZ2VzKGNoYW5nZWRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKTtcbiAgICAgIC8vIEZsdXNoIGNsaWVudHNcbiAgICAgIHRoaXMuX2ZsdXNoQ2xpZW50cygpO1xuICAgICAgLy8gUmVmbGVjdCBwcm9wZXJ0aWVzXG4gICAgICBydW5FZmZlY3RzKHRoaXMsIHRoaXNbVFlQRVMuUkVGTEVDVF0sIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKTtcbiAgICAgIC8vIE9ic2VydmUgcHJvcGVydGllc1xuICAgICAgcnVuRWZmZWN0cyh0aGlzLCB0aGlzW1RZUEVTLk9CU0VSVkVdLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocyk7XG4gICAgICAvLyBOb3RpZnkgcHJvcGVydGllcyB0byBob3N0XG4gICAgICBpZiAobm90aWZ5UHJvcHMpIHtcbiAgICAgICAgcnVuTm90aWZ5RWZmZWN0cyh0aGlzLCBub3RpZnlQcm9wcywgY2hhbmdlZFByb3BzLCBvbGRQcm9wcywgaGFzUGF0aHMpO1xuICAgICAgfVxuICAgICAgLy8gQ2xlYXIgdGVtcG9yYXJ5IGNhY2hlIGF0IGVuZCBvZiB0dXJuXG4gICAgICBpZiAodGhpcy5fX2RhdGFDb3VudGVyID09IDEpIHtcbiAgICAgICAgdGhpcy5fX2RhdGFUZW1wID0ge307XG4gICAgICB9XG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgICAvLyB3aW5kb3cuZGVidWcgJiYgY29uc29sZS5ncm91cEVuZCh0aGlzLmxvY2FsTmFtZSArICcjJyArIHRoaXMuaWQgKyAnOiAnICsgYyk7XG4gICAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHRvIHByb3BhZ2F0ZSBhbnkgcHJvcGVydHkgY2hhbmdlcyB0byBzdGFtcGVkIHRlbXBsYXRlIG5vZGVzXG4gICAgICogbWFuYWdlZCBieSB0aGlzIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY2hhbmdlZFByb3BzIEJhZyBvZiBjaGFuZ2VkIHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb2xkUHJvcHMgQmFnIG9mIHByZXZpb3VzIHZhbHVlcyBmb3IgY2hhbmdlZCBwcm9wZXJ0aWVzXG4gICAgICogQHBhcmFtIHtib29sZWFufSBoYXNQYXRocyBUcnVlIHdpdGggYHByb3BzYCBjb250YWlucyBvbmUgb3IgbW9yZSBwYXRoc1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9wcm9wYWdhdGVQcm9wZXJ0eUNoYW5nZXMoY2hhbmdlZFByb3BzLCBvbGRQcm9wcywgaGFzUGF0aHMpIHtcbiAgICAgIGlmICh0aGlzW1RZUEVTLlBST1BBR0FURV0pIHtcbiAgICAgICAgcnVuRWZmZWN0cyh0aGlzLCB0aGlzW1RZUEVTLlBST1BBR0FURV0sIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9fdGVtcGxhdGVJbmZvKSB7XG4gICAgICAgIHRoaXMuX3J1bkVmZmVjdHNGb3JUZW1wbGF0ZSh0aGlzLl9fdGVtcGxhdGVJbmZvLCBjaGFuZ2VkUHJvcHMsIG9sZFByb3BzLCBoYXNQYXRocyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3J1bkVmZmVjdHNGb3JUZW1wbGF0ZSh0ZW1wbGF0ZUluZm8sIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKSB7XG4gICAgICBjb25zdCBiYXNlUnVuRWZmZWN0cyA9IChjaGFuZ2VkUHJvcHMsIGhhc1BhdGhzKSA9PiB7XG4gICAgICAgIHJ1bkVmZmVjdHModGhpcywgdGVtcGxhdGVJbmZvLnByb3BlcnR5RWZmZWN0cywgY2hhbmdlZFByb3BzLCBvbGRQcm9wcyxcbiAgICAgICAgICBoYXNQYXRocywgdGVtcGxhdGVJbmZvLm5vZGVMaXN0KTtcbiAgICAgICAgZm9yIChsZXQgaW5mbz10ZW1wbGF0ZUluZm8uZmlyc3RDaGlsZDsgaW5mbzsgaW5mbz1pbmZvLm5leHRTaWJsaW5nKSB7XG4gICAgICAgICAgdGhpcy5fcnVuRWZmZWN0c0ZvclRlbXBsYXRlKGluZm8sIGNoYW5nZWRQcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIGlmICh0ZW1wbGF0ZUluZm8ucnVuRWZmZWN0cykge1xuICAgICAgICB0ZW1wbGF0ZUluZm8ucnVuRWZmZWN0cyhiYXNlUnVuRWZmZWN0cywgY2hhbmdlZFByb3BzLCBoYXNQYXRocyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBiYXNlUnVuRWZmZWN0cyhjaGFuZ2VkUHJvcHMsIGhhc1BhdGhzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGlhc2VzIG9uZSBkYXRhIHBhdGggYXMgYW5vdGhlciwgc3VjaCB0aGF0IHBhdGggbm90aWZpY2F0aW9ucyBmcm9tIG9uZVxuICAgICAqIGFyZSByb3V0ZWQgdG8gdGhlIG90aGVyLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHRvIFRhcmdldCBwYXRoIHRvIGxpbmsuXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IGZyb20gU291cmNlIHBhdGggdG8gbGluay5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBsaW5rUGF0aHModG8sIGZyb20pIHtcbiAgICAgIHRvID0gbm9ybWFsaXplKHRvKTtcbiAgICAgIGZyb20gPSBub3JtYWxpemUoZnJvbSk7XG4gICAgICB0aGlzLl9fZGF0YUxpbmtlZFBhdGhzID0gdGhpcy5fX2RhdGFMaW5rZWRQYXRocyB8fCB7fTtcbiAgICAgIHRoaXMuX19kYXRhTGlua2VkUGF0aHNbdG9dID0gZnJvbTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGEgZGF0YSBwYXRoIGFsaWFzIHByZXZpb3VzbHkgZXN0YWJsaXNoZWQgd2l0aCBgX2xpbmtQYXRoc2AuXG4gICAgICpcbiAgICAgKiBOb3RlLCB0aGUgcGF0aCB0byB1bmxpbmsgc2hvdWxkIGJlIHRoZSB0YXJnZXQgKGB0b2ApIHVzZWQgd2hlblxuICAgICAqIGxpbmtpbmcgdGhlIHBhdGhzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHBhdGggVGFyZ2V0IHBhdGggdG8gdW5saW5rLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHVubGlua1BhdGhzKHBhdGgpIHtcbiAgICAgIHBhdGggPSBub3JtYWxpemUocGF0aCk7XG4gICAgICBpZiAodGhpcy5fX2RhdGFMaW5rZWRQYXRocykge1xuICAgICAgICBkZWxldGUgdGhpcy5fX2RhdGFMaW5rZWRQYXRoc1twYXRoXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBOb3RpZnkgdGhhdCBhbiBhcnJheSBoYXMgY2hhbmdlZC5cbiAgICAgKlxuICAgICAqIEV4YW1wbGU6XG4gICAgICpcbiAgICAgKiAgICAgdGhpcy5pdGVtcyA9IFsge25hbWU6ICdKaW0nfSwge25hbWU6ICdUb2RkJ30sIHtuYW1lOiAnQmlsbCd9IF07XG4gICAgICogICAgIC4uLlxuICAgICAqICAgICB0aGlzLml0ZW1zLnNwbGljZSgxLCAxLCB7bmFtZTogJ1NhbSd9KTtcbiAgICAgKiAgICAgdGhpcy5pdGVtcy5wdXNoKHtuYW1lOiAnQm9iJ30pO1xuICAgICAqICAgICB0aGlzLm5vdGlmeVNwbGljZXMoJ2l0ZW1zJywgW1xuICAgICAqICAgICAgIHsgaW5kZXg6IDEsIHJlbW92ZWQ6IFt7bmFtZTogJ1RvZGQnfV0sIGFkZGVkQ291bnQ6IDEsXG4gICAgICogICAgICAgICBvYmplY3Q6IHRoaXMuaXRlbXMsIHR5cGU6ICdzcGxpY2UnIH0sXG4gICAgICogICAgICAgeyBpbmRleDogMywgcmVtb3ZlZDogW10sIGFkZGVkQ291bnQ6IDEsXG4gICAgICogICAgICAgICBvYmplY3Q6IHRoaXMuaXRlbXMsIHR5cGU6ICdzcGxpY2UnfVxuICAgICAqICAgICBdKTtcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdGhhdCBzaG91bGQgYmUgbm90aWZpZWQuXG4gICAgICogQHBhcmFtIHtBcnJheX0gc3BsaWNlcyBBcnJheSBvZiBzcGxpY2UgcmVjb3JkcyBpbmRpY2F0aW5nIG9yZGVyZWRcbiAgICAgKiAgIGNoYW5nZXMgdGhhdCBvY2N1cnJlZCB0byB0aGUgYXJyYXkuIEVhY2ggcmVjb3JkIHNob3VsZCBoYXZlIHRoZVxuICAgICAqICAgZm9sbG93aW5nIGZpZWxkczpcbiAgICAgKiAgICAqIGluZGV4OiBpbmRleCBhdCB3aGljaCB0aGUgY2hhbmdlIG9jY3VycmVkXG4gICAgICogICAgKiByZW1vdmVkOiBhcnJheSBvZiBpdGVtcyB0aGF0IHdlcmUgcmVtb3ZlZCBmcm9tIHRoaXMgaW5kZXhcbiAgICAgKiAgICAqIGFkZGVkQ291bnQ6IG51bWJlciBvZiBuZXcgaXRlbXMgYWRkZWQgYXQgdGhpcyBpbmRleFxuICAgICAqICAgICogb2JqZWN0OiBhIHJlZmVyZW5jZSB0byB0aGUgYXJyYXkgaW4gcXVlc3Rpb25cbiAgICAgKiAgICAqIHR5cGU6IHRoZSBzdHJpbmcgbGl0ZXJhbCAnc3BsaWNlJ1xuICAgICAqXG4gICAgICogICBOb3RlIHRoYXQgc3BsaWNlIHJlY29yZHMgX211c3RfIGJlIG5vcm1hbGl6ZWQgc3VjaCB0aGF0IHRoZXkgYXJlXG4gICAgICogICByZXBvcnRlZCBpbiBpbmRleCBvcmRlciAocmF3IHJlc3VsdHMgZnJvbSBgT2JqZWN0Lm9ic2VydmVgIGFyZSBub3RcbiAgICAgKiAgIG9yZGVyZWQgYW5kIG11c3QgYmUgbm9ybWFsaXplZC9tZXJnZWQgYmVmb3JlIG5vdGlmeWluZykuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBub3RpZnlTcGxpY2VzKHBhdGgsIHNwbGljZXMpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9ICovKGdldCh0aGlzLCBwYXRoLCBpbmZvKSk7XG4gICAgICBub3RpZnlTcGxpY2VzKHRoaXMsIGFycmF5LCBpbmZvLnBhdGgsIHNwbGljZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCBmb3IgcmVhZGluZyBhIHZhbHVlIGZyb20gYSBwYXRoLlxuICAgICAqXG4gICAgICogTm90ZSwgaWYgYW55IHBhcnQgaW4gdGhlIHBhdGggaXMgdW5kZWZpbmVkLCB0aGlzIG1ldGhvZCByZXR1cm5zXG4gICAgICogYHVuZGVmaW5lZGAgKHRoaXMgbWV0aG9kIGRvZXMgbm90IHRocm93IHdoZW4gZGVyZWZlcmVuY2luZyB1bmRlZmluZWRcbiAgICAgKiBwYXRocykuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyhzdHJpbmd8IUFycmF5PChzdHJpbmd8bnVtYmVyKT4pfSBwYXRoIFBhdGggdG8gdGhlIHZhbHVlXG4gICAgICogICB0byByZWFkLiAgVGhlIHBhdGggbWF5IGJlIHNwZWNpZmllZCBhcyBhIHN0cmluZyAoZS5nLiBgZm9vLmJhci5iYXpgKVxuICAgICAqICAgb3IgYW4gYXJyYXkgb2YgcGF0aCBwYXJ0cyAoZS5nLiBgWydmb28uYmFyJywgJ2JheiddYCkuICBOb3RlIHRoYXRcbiAgICAgKiAgIGJyYWNrZXRlZCBleHByZXNzaW9ucyBhcmUgbm90IHN1cHBvcnRlZDsgc3RyaW5nLWJhc2VkIHBhdGggcGFydHNcbiAgICAgKiAgICptdXN0KiBiZSBzZXBhcmF0ZWQgYnkgZG90cy4gIE5vdGUgdGhhdCB3aGVuIGRlcmVmZXJlbmNpbmcgYXJyYXlcbiAgICAgKiAgIGluZGljZXMsIHRoZSBpbmRleCBtYXkgYmUgdXNlZCBhcyBhIGRvdHRlZCBwYXJ0IGRpcmVjdGx5XG4gICAgICogICAoZS5nLiBgdXNlcnMuMTIubmFtZWAgb3IgYFsndXNlcnMnLCAxMiwgJ25hbWUnXWApLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gcm9vdCBSb290IG9iamVjdCBmcm9tIHdoaWNoIHRoZSBwYXRoIGlzIGV2YWx1YXRlZC5cbiAgICAgKiBAcmV0dXJuIHsqfSBWYWx1ZSBhdCB0aGUgcGF0aCwgb3IgYHVuZGVmaW5lZGAgaWYgYW55IHBhcnQgb2YgdGhlIHBhdGhcbiAgICAgKiAgIGlzIHVuZGVmaW5lZC5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgZ2V0KHBhdGgsIHJvb3QpIHtcbiAgICAgIHJldHVybiBnZXQocm9vdCB8fCB0aGlzLCBwYXRoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIHNldHRpbmcgYSB2YWx1ZSB0byBhIHBhdGggYW5kIG5vdGlmeWluZyBhbnlcbiAgICAgKiBlbGVtZW50cyBib3VuZCB0byB0aGUgc2FtZSBwYXRoLlxuICAgICAqXG4gICAgICogTm90ZSwgaWYgYW55IHBhcnQgaW4gdGhlIHBhdGggZXhjZXB0IGZvciB0aGUgbGFzdCBpcyB1bmRlZmluZWQsXG4gICAgICogdGhpcyBtZXRob2QgZG9lcyBub3RoaW5nICh0aGlzIG1ldGhvZCBkb2VzIG5vdCB0aHJvdyB3aGVuXG4gICAgICogZGVyZWZlcmVuY2luZyB1bmRlZmluZWQgcGF0aHMpLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHsoc3RyaW5nfCFBcnJheTwoc3RyaW5nfG51bWJlcik+KX0gcGF0aCBQYXRoIHRvIHRoZSB2YWx1ZVxuICAgICAqICAgdG8gd3JpdGUuICBUaGUgcGF0aCBtYXkgYmUgc3BlY2lmaWVkIGFzIGEgc3RyaW5nIChlLmcuIGAnZm9vLmJhci5iYXonYClcbiAgICAgKiAgIG9yIGFuIGFycmF5IG9mIHBhdGggcGFydHMgKGUuZy4gYFsnZm9vLmJhcicsICdiYXonXWApLiAgTm90ZSB0aGF0XG4gICAgICogICBicmFja2V0ZWQgZXhwcmVzc2lvbnMgYXJlIG5vdCBzdXBwb3J0ZWQ7IHN0cmluZy1iYXNlZCBwYXRoIHBhcnRzXG4gICAgICogICAqbXVzdCogYmUgc2VwYXJhdGVkIGJ5IGRvdHMuICBOb3RlIHRoYXQgd2hlbiBkZXJlZmVyZW5jaW5nIGFycmF5XG4gICAgICogICBpbmRpY2VzLCB0aGUgaW5kZXggbWF5IGJlIHVzZWQgYXMgYSBkb3R0ZWQgcGFydCBkaXJlY3RseVxuICAgICAqICAgKGUuZy4gYCd1c2Vycy4xMi5uYW1lJ2Agb3IgYFsndXNlcnMnLCAxMiwgJ25hbWUnXWApLlxuICAgICAqIEBwYXJhbSB7Kn0gdmFsdWUgVmFsdWUgdG8gc2V0IGF0IHRoZSBzcGVjaWZpZWQgcGF0aC5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHJvb3QgUm9vdCBvYmplY3QgZnJvbSB3aGljaCB0aGUgcGF0aCBpcyBldmFsdWF0ZWQuXG4gICAgICogICBXaGVuIHNwZWNpZmllZCwgbm8gbm90aWZpY2F0aW9uIHdpbGwgb2NjdXIuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc2V0KHBhdGgsIHZhbHVlLCByb290KSB7XG4gICAgICBpZiAocm9vdCkge1xuICAgICAgICBzZXQocm9vdCwgcGF0aCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCF0aGlzW1RZUEVTLlJFQURfT05MWV0gfHwgIXRoaXNbVFlQRVMuUkVBRF9PTkxZXVsvKiogQHR5cGUge3N0cmluZ30gKi8ocGF0aCldKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aChwYXRoLCB2YWx1ZSwgdHJ1ZSkpIHtcbiAgICAgICAgICAgIHRoaXMuX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWRkcyBpdGVtcyBvbnRvIHRoZSBlbmQgb2YgdGhlIGFycmF5IGF0IHRoZSBwYXRoIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIFRoZSBhcmd1bWVudHMgYWZ0ZXIgYHBhdGhgIGFuZCByZXR1cm4gdmFsdWUgbWF0Y2ggdGhhdCBvZlxuICAgICAqIGBBcnJheS5wcm90b3R5cGUucHVzaGAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBub3RpZmllcyBvdGhlciBwYXRocyB0byB0aGUgc2FtZSBhcnJheSB0aGF0IGFcbiAgICAgKiBzcGxpY2Ugb2NjdXJyZWQgdG8gdGhlIGFycmF5LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHBhdGggUGF0aCB0byBhcnJheS5cbiAgICAgKiBAcGFyYW0gey4uLip9IGl0ZW1zIEl0ZW1zIHRvIHB1c2ggb250byBhcnJheVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTmV3IGxlbmd0aCBvZiB0aGUgYXJyYXkuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHB1c2gocGF0aCwgLi4uaXRlbXMpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9Ki8oZ2V0KHRoaXMsIHBhdGgsIGluZm8pKTtcbiAgICAgIGxldCBsZW4gPSBhcnJheS5sZW5ndGg7XG4gICAgICBsZXQgcmV0ID0gYXJyYXkucHVzaCguLi5pdGVtcyk7XG4gICAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIG5vdGlmeVNwbGljZSh0aGlzLCBhcnJheSwgaW5mby5wYXRoLCBsZW4sIGl0ZW1zLmxlbmd0aCwgW10pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJldDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuIGl0ZW0gZnJvbSB0aGUgZW5kIG9mIGFycmF5IGF0IHRoZSBwYXRoIHNwZWNpZmllZC5cbiAgICAgKlxuICAgICAqIFRoZSBhcmd1bWVudHMgYWZ0ZXIgYHBhdGhgIGFuZCByZXR1cm4gdmFsdWUgbWF0Y2ggdGhhdCBvZlxuICAgICAqIGBBcnJheS5wcm90b3R5cGUucG9wYC5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIG5vdGlmaWVzIG90aGVyIHBhdGhzIHRvIHRoZSBzYW1lIGFycmF5IHRoYXQgYVxuICAgICAqIHNwbGljZSBvY2N1cnJlZCB0byB0aGUgYXJyYXkuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZyB8ICFBcnJheTxzdHJpbmd8bnVtYmVyPn0gcGF0aCBQYXRoIHRvIGFycmF5LlxuICAgICAqIEByZXR1cm4geyp9IEl0ZW0gdGhhdCB3YXMgcmVtb3ZlZC5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgcG9wKHBhdGgpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9ICovKGdldCh0aGlzLCBwYXRoLCBpbmZvKSk7XG4gICAgICBsZXQgaGFkTGVuZ3RoID0gQm9vbGVhbihhcnJheS5sZW5ndGgpO1xuICAgICAgbGV0IHJldCA9IGFycmF5LnBvcCgpO1xuICAgICAgaWYgKGhhZExlbmd0aCkge1xuICAgICAgICBub3RpZnlTcGxpY2UodGhpcywgYXJyYXksIGluZm8ucGF0aCwgYXJyYXkubGVuZ3RoLCAwLCBbcmV0XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN0YXJ0aW5nIGZyb20gdGhlIHN0YXJ0IGluZGV4IHNwZWNpZmllZCwgcmVtb3ZlcyAwIG9yIG1vcmUgaXRlbXNcbiAgICAgKiBmcm9tIHRoZSBhcnJheSBhbmQgaW5zZXJ0cyAwIG9yIG1vcmUgbmV3IGl0ZW1zIGluIHRoZWlyIHBsYWNlLlxuICAgICAqXG4gICAgICogVGhlIGFyZ3VtZW50cyBhZnRlciBgcGF0aGAgYW5kIHJldHVybiB2YWx1ZSBtYXRjaCB0aGF0IG9mXG4gICAgICogYEFycmF5LnByb3RvdHlwZS5zcGxpY2VgLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2Qgbm90aWZpZXMgb3RoZXIgcGF0aHMgdG8gdGhlIHNhbWUgYXJyYXkgdGhhdCBhXG4gICAgICogc3BsaWNlIG9jY3VycmVkIHRvIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgIUFycmF5PHN0cmluZ3xudW1iZXI+fSBwYXRoIFBhdGggdG8gYXJyYXkuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHN0YXJ0IEluZGV4IGZyb20gd2hpY2ggdG8gc3RhcnQgcmVtb3ZpbmcvaW5zZXJ0aW5nLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyPX0gZGVsZXRlQ291bnQgTnVtYmVyIG9mIGl0ZW1zIHRvIHJlbW92ZS5cbiAgICAgKiBAcGFyYW0gey4uLip9IGl0ZW1zIEl0ZW1zIHRvIGluc2VydCBpbnRvIGFycmF5LlxuICAgICAqIEByZXR1cm4geyFBcnJheX0gQXJyYXkgb2YgcmVtb3ZlZCBpdGVtcy5cbiAgICAgKiBAcHVibGljXG4gICAgICovXG4gICAgc3BsaWNlKHBhdGgsIHN0YXJ0LCBkZWxldGVDb3VudCwgLi4uaXRlbXMpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGggOiAnJ307XG4gICAgICBsZXQgYXJyYXkgPSAvKiogQHR5cGUge0FycmF5fSAqLyhnZXQodGhpcywgcGF0aCwgaW5mbykpO1xuICAgICAgLy8gTm9ybWFsaXplIGZhbmN5IG5hdGl2ZSBzcGxpY2UgaGFuZGxpbmcgb2YgY3Jhenkgc3RhcnQgdmFsdWVzXG4gICAgICBpZiAoc3RhcnQgPCAwKSB7XG4gICAgICAgIHN0YXJ0ID0gYXJyYXkubGVuZ3RoIC0gTWF0aC5mbG9vcigtc3RhcnQpO1xuICAgICAgfSBlbHNlIGlmIChzdGFydCkge1xuICAgICAgICBzdGFydCA9IE1hdGguZmxvb3Ioc3RhcnQpO1xuICAgICAgfVxuICAgICAgLy8gYXJyYXkuc3BsaWNlIGRvZXMgZGlmZmVyZW50IHRoaW5ncyBiYXNlZCBvbiB0aGUgbnVtYmVyIG9mIGFyZ3VtZW50c1xuICAgICAgLy8geW91IHBhc3MgaW4uIFRoZXJlZm9yZSwgYXJyYXkuc3BsaWNlKDApIGFuZCBhcnJheS5zcGxpY2UoMCwgdW5kZWZpbmVkKVxuICAgICAgLy8gZG8gZGlmZmVyZW50IHRoaW5ncy4gSW4gdGhlIGZvcm1lciwgdGhlIHdob2xlIGFycmF5IGlzIGNsZWFyZWQuIEluIHRoZVxuICAgICAgLy8gbGF0dGVyLCBubyBpdGVtcyBhcmUgcmVtb3ZlZC5cbiAgICAgIC8vIFRoaXMgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIGRldGVjdCB3aGV0aGVyIDEuIG9uZSBvZiB0aGUgYXJndW1lbnRzXG4gICAgICAvLyBpcyBhY3R1YWxseSBwYXNzZWQgaW4gYW5kIHRoZW4gMi4gZGV0ZXJtaW5lIGhvdyBtYW55IGFyZ3VtZW50c1xuICAgICAgLy8gd2Ugc2hvdWxkIHBhc3Mgb24gdG8gdGhlIG5hdGl2ZSBhcnJheS5zcGxpY2VcbiAgICAgIC8vXG4gICAgICBsZXQgcmV0O1xuICAgICAgLy8gT21pdCBhbnkgYWRkaXRpb25hbCBhcmd1bWVudHMgaWYgdGhleSB3ZXJlIG5vdCBwYXNzZWQgaW5cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAyKSB7XG4gICAgICAgIHJldCA9IGFycmF5LnNwbGljZShzdGFydCk7XG4gICAgICAvLyBFaXRoZXIgc3RhcnQgd2FzIHVuZGVmaW5lZCBhbmQgdGhlIG90aGVycyB3ZXJlIGRlZmluZWQsIGJ1dCBpbiB0aGlzXG4gICAgICAvLyBjYXNlIHdlIGNhbiBzYWZlbHkgcGFzcyBvbiBhbGwgYXJndW1lbnRzXG4gICAgICAvL1xuICAgICAgLy8gTm90ZTogdGhpcyBpbmNsdWRlcyB0aGUgY2FzZSB3aGVyZSBub25lIG9mIHRoZSBhcmd1bWVudHMgd2VyZSBwYXNzZWQgaW4sXG4gICAgICAvLyBlLmcuIHRoaXMuc3BsaWNlKCdhcnJheScpLiBIb3dldmVyLCBpZiBib3RoIHN0YXJ0IGFuZCBkZWxldGVDb3VudFxuICAgICAgLy8gYXJlIHVuZGVmaW5lZCwgYXJyYXkuc3BsaWNlIHdpbGwgbm90IG1vZGlmeSB0aGUgYXJyYXkgKGFzIGV4cGVjdGVkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0ID0gYXJyYXkuc3BsaWNlKHN0YXJ0LCBkZWxldGVDb3VudCwgLi4uaXRlbXMpO1xuICAgICAgfVxuICAgICAgLy8gQXQgdGhlIGVuZCwgY2hlY2sgd2hldGhlciBhbnkgaXRlbXMgd2VyZSBwYXNzZWQgaW4gKGUuZy4gaW5zZXJ0aW9ucylcbiAgICAgIC8vIG9yIGlmIHRoZSByZXR1cm4gYXJyYXkgY29udGFpbnMgaXRlbXMgKGUuZy4gZGVsZXRpb25zKS5cbiAgICAgIC8vIE9ubHkgbm90aWZ5IGlmIGl0ZW1zIHdlcmUgYWRkZWQgb3IgZGVsZXRlZC5cbiAgICAgIGlmIChpdGVtcy5sZW5ndGggfHwgcmV0Lmxlbmd0aCkge1xuICAgICAgICBub3RpZnlTcGxpY2UodGhpcywgYXJyYXksIGluZm8ucGF0aCwgc3RhcnQsIGl0ZW1zLmxlbmd0aCwgcmV0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhbiBpdGVtIGZyb20gdGhlIGJlZ2lubmluZyBvZiBhcnJheSBhdCB0aGUgcGF0aCBzcGVjaWZpZWQuXG4gICAgICpcbiAgICAgKiBUaGUgYXJndW1lbnRzIGFmdGVyIGBwYXRoYCBhbmQgcmV0dXJuIHZhbHVlIG1hdGNoIHRoYXQgb2ZcbiAgICAgKiBgQXJyYXkucHJvdG90eXBlLnBvcGAuXG4gICAgICpcbiAgICAgKiBUaGlzIG1ldGhvZCBub3RpZmllcyBvdGhlciBwYXRocyB0byB0aGUgc2FtZSBhcnJheSB0aGF0IGFcbiAgICAgKiBzcGxpY2Ugb2NjdXJyZWQgdG8gdGhlIGFycmF5LlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmcgfCAhQXJyYXk8c3RyaW5nfG51bWJlcj59IHBhdGggUGF0aCB0byBhcnJheS5cbiAgICAgKiBAcmV0dXJuIHsqfSBJdGVtIHRoYXQgd2FzIHJlbW92ZWQuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHNoaWZ0KHBhdGgpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9ICovKGdldCh0aGlzLCBwYXRoLCBpbmZvKSk7XG4gICAgICBsZXQgaGFkTGVuZ3RoID0gQm9vbGVhbihhcnJheS5sZW5ndGgpO1xuICAgICAgbGV0IHJldCA9IGFycmF5LnNoaWZ0KCk7XG4gICAgICBpZiAoaGFkTGVuZ3RoKSB7XG4gICAgICAgIG5vdGlmeVNwbGljZSh0aGlzLCBhcnJheSwgaW5mby5wYXRoLCAwLCAwLCBbcmV0XSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmV0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFkZHMgaXRlbXMgb250byB0aGUgYmVnaW5uaW5nIG9mIHRoZSBhcnJheSBhdCB0aGUgcGF0aCBzcGVjaWZpZWQuXG4gICAgICpcbiAgICAgKiBUaGUgYXJndW1lbnRzIGFmdGVyIGBwYXRoYCBhbmQgcmV0dXJuIHZhbHVlIG1hdGNoIHRoYXQgb2ZcbiAgICAgKiBgQXJyYXkucHJvdG90eXBlLnB1c2hgLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2Qgbm90aWZpZXMgb3RoZXIgcGF0aHMgdG8gdGhlIHNhbWUgYXJyYXkgdGhhdCBhXG4gICAgICogc3BsaWNlIG9jY3VycmVkIHRvIHRoZSBhcnJheS5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgIUFycmF5PHN0cmluZ3xudW1iZXI+fSBwYXRoIFBhdGggdG8gYXJyYXkuXG4gICAgICogQHBhcmFtIHsuLi4qfSBpdGVtcyBJdGVtcyB0byBpbnNlcnQgaW5mbyBhcnJheVxuICAgICAqIEByZXR1cm4ge251bWJlcn0gTmV3IGxlbmd0aCBvZiB0aGUgYXJyYXkuXG4gICAgICogQHB1YmxpY1xuICAgICAqL1xuICAgIHVuc2hpZnQocGF0aCwgLi4uaXRlbXMpIHtcbiAgICAgIGxldCBpbmZvID0ge3BhdGg6ICcnfTtcbiAgICAgIGxldCBhcnJheSA9IC8qKiBAdHlwZSB7QXJyYXl9ICovKGdldCh0aGlzLCBwYXRoLCBpbmZvKSk7XG4gICAgICBsZXQgcmV0ID0gYXJyYXkudW5zaGlmdCguLi5pdGVtcyk7XG4gICAgICBpZiAoaXRlbXMubGVuZ3RoKSB7XG4gICAgICAgIG5vdGlmeVNwbGljZSh0aGlzLCBhcnJheSwgaW5mby5wYXRoLCAwLCBpdGVtcy5sZW5ndGgsIFtdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTm90aWZ5IHRoYXQgYSBwYXRoIGhhcyBjaGFuZ2VkLlxuICAgICAqXG4gICAgICogRXhhbXBsZTpcbiAgICAgKlxuICAgICAqICAgICB0aGlzLml0ZW0udXNlci5uYW1lID0gJ0JvYic7XG4gICAgICogICAgIHRoaXMubm90aWZ5UGF0aCgnaXRlbS51c2VyLm5hbWUnKTtcbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFBhdGggdGhhdCBzaG91bGQgYmUgbm90aWZpZWQuXG4gICAgICogQHBhcmFtIHsqPX0gdmFsdWUgVmFsdWUgYXQgdGhlIHBhdGggKG9wdGlvbmFsKS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwdWJsaWNcbiAgICAgKi9cbiAgICBub3RpZnlQYXRoKHBhdGgsIHZhbHVlKSB7XG4gICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgIGxldCBwcm9wUGF0aDtcbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgLy8gR2V0IHZhbHVlIGlmIG5vdCBzdXBwbGllZFxuICAgICAgICBsZXQgaW5mbyA9IHtwYXRoOiAnJ307XG4gICAgICAgIHZhbHVlID0gZ2V0KHRoaXMsIHBhdGgsIGluZm8pO1xuICAgICAgICBwcm9wUGF0aCA9IGluZm8ucGF0aDtcbiAgICAgIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShwYXRoKSkge1xuICAgICAgICAvLyBOb3JtYWxpemUgcGF0aCBpZiBuZWVkZWRcbiAgICAgICAgcHJvcFBhdGggPSBub3JtYWxpemUocGF0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9wUGF0aCA9IC8qKiBAdHlwZXtzdHJpbmd9ICovKHBhdGgpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aChwcm9wUGF0aCwgdmFsdWUsIHRydWUsIHRydWUpKSB7XG4gICAgICAgIHRoaXMuX2ludmFsaWRhdGVQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBzdGF0aWMgYGNyZWF0ZVJlYWRPbmx5UHJvcGVydHlgIEFQSSBidXQgY2FuIGJlIGNhbGxlZCBvblxuICAgICAqIGFuIGluc3RhbmNlIHRvIGFkZCBlZmZlY3RzIGF0IHJ1bnRpbWUuICBTZWUgdGhhdCBtZXRob2QgZm9yXG4gICAgICogZnVsbCBBUEkgZG9jcy5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gcHJvdGVjdGVkU2V0dGVyIENyZWF0ZXMgYSBjdXN0b20gcHJvdGVjdGVkIHNldHRlclxuICAgICAqICAgd2hlbiBgdHJ1ZWAuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX2NyZWF0ZVJlYWRPbmx5UHJvcGVydHkocHJvcGVydHksIHByb3RlY3RlZFNldHRlcikge1xuICAgICAgdGhpcy5fYWRkUHJvcGVydHlFZmZlY3QocHJvcGVydHksIFRZUEVTLlJFQURfT05MWSk7XG4gICAgICBpZiAocHJvdGVjdGVkU2V0dGVyKSB7XG4gICAgICAgIHRoaXNbJ19zZXQnICsgdXBwZXIocHJvcGVydHkpXSA9IC8qKiBAdGhpcyB7UHJvcGVydHlFZmZlY3RzfSAqL2Z1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgdGhpcy5fc2V0UHJvcGVydHkocHJvcGVydHksIHZhbHVlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHN0YXRpYyBgY3JlYXRlUHJvcGVydHlPYnNlcnZlcmAgQVBJIGJ1dCBjYW4gYmUgY2FsbGVkIG9uXG4gICAgICogYW4gaW5zdGFuY2UgdG8gYWRkIGVmZmVjdHMgYXQgcnVudGltZS4gIFNlZSB0aGF0IG1ldGhvZCBmb3JcbiAgICAgKiBmdWxsIEFQSSBkb2NzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ3xmdW5jdGlvbigqLCopfSBtZXRob2QgRnVuY3Rpb24gb3IgbmFtZSBvZiBvYnNlcnZlciBtZXRob2RcbiAgICAgKiAgICAgdG8gY2FsbFxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IGR5bmFtaWNGbiBXaGV0aGVyIHRoZSBtZXRob2QgbmFtZSBzaG91bGQgYmUgaW5jbHVkZWQgYXNcbiAgICAgKiAgIGEgZGVwZW5kZW5jeSB0byB0aGUgZWZmZWN0LlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9jcmVhdGVQcm9wZXJ0eU9ic2VydmVyKHByb3BlcnR5LCBtZXRob2QsIGR5bmFtaWNGbikge1xuICAgICAgbGV0IGluZm8gPSB7IHByb3BlcnR5LCBtZXRob2QsIGR5bmFtaWNGbjogQm9vbGVhbihkeW5hbWljRm4pIH07XG4gICAgICB0aGlzLl9hZGRQcm9wZXJ0eUVmZmVjdChwcm9wZXJ0eSwgVFlQRVMuT0JTRVJWRSwge1xuICAgICAgICBmbjogcnVuT2JzZXJ2ZXJFZmZlY3QsIGluZm8sIHRyaWdnZXI6IHtuYW1lOiBwcm9wZXJ0eX1cbiAgICAgIH0pO1xuICAgICAgaWYgKGR5bmFtaWNGbikge1xuICAgICAgICB0aGlzLl9hZGRQcm9wZXJ0eUVmZmVjdCgvKiogQHR5cGUge3N0cmluZ30gKi8obWV0aG9kKSwgVFlQRVMuT0JTRVJWRSwge1xuICAgICAgICAgIGZuOiBydW5PYnNlcnZlckVmZmVjdCwgaW5mbywgdHJpZ2dlcjoge25hbWU6IG1ldGhvZH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRXF1aXZhbGVudCB0byBzdGF0aWMgYGNyZWF0ZU1ldGhvZE9ic2VydmVyYCBBUEkgYnV0IGNhbiBiZSBjYWxsZWQgb25cbiAgICAgKiBhbiBpbnN0YW5jZSB0byBhZGQgZWZmZWN0cyBhdCBydW50aW1lLiAgU2VlIHRoYXQgbWV0aG9kIGZvclxuICAgICAqIGZ1bGwgQVBJIGRvY3MuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBNZXRob2QgZXhwcmVzc2lvblxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxPYmplY3Q9fSBkeW5hbWljRm4gQm9vbGVhbiBvciBvYmplY3QgbWFwIGluZGljYXRpbmdcbiAgICAgKiAgIHdoZXRoZXIgbWV0aG9kIG5hbWVzIHNob3VsZCBiZSBpbmNsdWRlZCBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIGVmZmVjdC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfY3JlYXRlTWV0aG9kT2JzZXJ2ZXIoZXhwcmVzc2lvbiwgZHluYW1pY0ZuKSB7XG4gICAgICBsZXQgc2lnID0gcGFyc2VNZXRob2QoZXhwcmVzc2lvbik7XG4gICAgICBpZiAoIXNpZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgb2JzZXJ2ZXIgZXhwcmVzc2lvbiAnXCIgKyBleHByZXNzaW9uICsgXCInXCIpO1xuICAgICAgfVxuICAgICAgY3JlYXRlTWV0aG9kRWZmZWN0KHRoaXMsIHNpZywgVFlQRVMuT0JTRVJWRSwgcnVuTWV0aG9kRWZmZWN0LCBudWxsLCBkeW5hbWljRm4pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gc3RhdGljIGBjcmVhdGVOb3RpZnlpbmdQcm9wZXJ0eWAgQVBJIGJ1dCBjYW4gYmUgY2FsbGVkIG9uXG4gICAgICogYW4gaW5zdGFuY2UgdG8gYWRkIGVmZmVjdHMgYXQgcnVudGltZS4gIFNlZSB0aGF0IG1ldGhvZCBmb3JcbiAgICAgKiBmdWxsIEFQSSBkb2NzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfY3JlYXRlTm90aWZ5aW5nUHJvcGVydHkocHJvcGVydHkpIHtcbiAgICAgIHRoaXMuX2FkZFByb3BlcnR5RWZmZWN0KHByb3BlcnR5LCBUWVBFUy5OT1RJRlksIHtcbiAgICAgICAgZm46IHJ1bk5vdGlmeUVmZmVjdCxcbiAgICAgICAgaW5mbzoge1xuICAgICAgICAgIGV2ZW50TmFtZTogY2FtZWxUb0Rhc2hDYXNlKHByb3BlcnR5KSArICctY2hhbmdlZCcsXG4gICAgICAgICAgcHJvcGVydHk6IHByb3BlcnR5XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gc3RhdGljIGBjcmVhdGVSZWZsZWN0ZWRQcm9wZXJ0eWAgQVBJIGJ1dCBjYW4gYmUgY2FsbGVkIG9uXG4gICAgICogYW4gaW5zdGFuY2UgdG8gYWRkIGVmZmVjdHMgYXQgcnVudGltZS4gIFNlZSB0aGF0IG1ldGhvZCBmb3JcbiAgICAgKiBmdWxsIEFQSSBkb2NzLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBnby9taXNzaW5nZm5wcm9wc1xuICAgICAqL1xuICAgIF9jcmVhdGVSZWZsZWN0ZWRQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgbGV0IGF0dHIgPSB0aGlzLmNvbnN0cnVjdG9yLmF0dHJpYnV0ZU5hbWVGb3JQcm9wZXJ0eShwcm9wZXJ0eSk7XG4gICAgICBpZiAoYXR0clswXSA9PT0gJy0nKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignUHJvcGVydHkgJyArIHByb3BlcnR5ICsgJyBjYW5ub3QgYmUgcmVmbGVjdGVkIHRvIGF0dHJpYnV0ZSAnICtcbiAgICAgICAgICBhdHRyICsgJyBiZWNhdXNlIFwiLVwiIGlzIG5vdCBhIHZhbGlkIHN0YXJ0aW5nIGF0dHJpYnV0ZSBuYW1lLiBVc2UgYSBsb3dlcmNhc2UgZmlyc3QgbGV0dGVyIGZvciB0aGUgcHJvcGVydHkgaW5zdGVhZC4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FkZFByb3BlcnR5RWZmZWN0KHByb3BlcnR5LCBUWVBFUy5SRUZMRUNULCB7XG4gICAgICAgICAgZm46IHJ1blJlZmxlY3RFZmZlY3QsXG4gICAgICAgICAgaW5mbzoge1xuICAgICAgICAgICAgYXR0ck5hbWU6IGF0dHJcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVxdWl2YWxlbnQgdG8gc3RhdGljIGBjcmVhdGVDb21wdXRlZFByb3BlcnR5YCBBUEkgYnV0IGNhbiBiZSBjYWxsZWQgb25cbiAgICAgKiBhbiBpbnN0YW5jZSB0byBhZGQgZWZmZWN0cyBhdCBydW50aW1lLiAgU2VlIHRoYXQgbWV0aG9kIGZvclxuICAgICAqIGZ1bGwgQVBJIGRvY3MuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiBjb21wdXRlZCBwcm9wZXJ0eSB0byBzZXRcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXhwcmVzc2lvbiBNZXRob2QgZXhwcmVzc2lvblxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbnxPYmplY3Q9fSBkeW5hbWljRm4gQm9vbGVhbiBvciBvYmplY3QgbWFwIGluZGljYXRpbmdcbiAgICAgKiAgIHdoZXRoZXIgbWV0aG9kIG5hbWVzIHNob3VsZCBiZSBpbmNsdWRlZCBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIGVmZmVjdC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKi9cbiAgICBfY3JlYXRlQ29tcHV0ZWRQcm9wZXJ0eShwcm9wZXJ0eSwgZXhwcmVzc2lvbiwgZHluYW1pY0ZuKSB7XG4gICAgICBsZXQgc2lnID0gcGFyc2VNZXRob2QoZXhwcmVzc2lvbik7XG4gICAgICBpZiAoIXNpZykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJNYWxmb3JtZWQgY29tcHV0ZWQgZXhwcmVzc2lvbiAnXCIgKyBleHByZXNzaW9uICsgXCInXCIpO1xuICAgICAgfVxuICAgICAgY29uc3QgaW5mbyA9IGNyZWF0ZU1ldGhvZEVmZmVjdCh0aGlzLCBzaWcsIFRZUEVTLkNPTVBVVEUsIHJ1bkNvbXB1dGVkRWZmZWN0LCBwcm9wZXJ0eSwgZHluYW1pY0ZuKTtcbiAgICAgIC8vIEVmZmVjdHMgYXJlIG5vcm1hbGx5IHN0b3JlZCBhcyBtYXAgb2YgZGVwZW5kZW5jeS0+ZWZmZWN0LCBidXQgZm9yXG4gICAgICAvLyBvcmRlcmVkIGNvbXB1dGF0aW9uLCB3ZSBhbHNvIG5lZWQgdHJlZSBvZiBjb21wdXRlZFByb3AtPmRlcGVuZGVuY2llc1xuICAgICAgZW5zdXJlT3duRWZmZWN0TWFwKHRoaXMsIENPTVBVVEVfSU5GTylbcHJvcGVydHldID0gaW5mbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBHYXRoZXIgdGhlIGFyZ3VtZW50IHZhbHVlcyBmb3IgYSBtZXRob2Qgc3BlY2lmaWVkIGluIHRoZSBwcm92aWRlZCBhcnJheVxuICAgICAqIG9mIGFyZ3VtZW50IG1ldGFkYXRhLlxuICAgICAqXG4gICAgICogVGhlIGBwYXRoYCBhbmQgYHZhbHVlYCBhcmd1bWVudHMgYXJlIHVzZWQgdG8gZmlsbCBpbiB3aWxkY2FyZCBkZXNjcmlwdG9yXG4gICAgICogd2hlbiB0aGUgbWV0aG9kIGlzIGJlaW5nIGNhbGxlZCBhcyBhIHJlc3VsdCBvZiBhIHBhdGggbm90aWZpY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHshQXJyYXk8IU1ldGhvZEFyZz59IGFyZ3MgQXJyYXkgb2YgYXJndW1lbnQgbWV0YWRhdGFcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBQcm9wZXJ0eS9wYXRoIG5hbWUgdGhhdCB0cmlnZ2VyZWQgdGhlIG1ldGhvZCBlZmZlY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAqIEByZXR1cm4geyFBcnJheTwqPn0gQXJyYXkgb2YgYXJndW1lbnQgdmFsdWVzXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICBfbWFyc2hhbEFyZ3MoYXJncywgcGF0aCwgcHJvcHMpIHtcbiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLl9fZGF0YTtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IFtdO1xuICAgICAgZm9yIChsZXQgaT0wLCBsPWFyZ3MubGVuZ3RoOyBpPGw7IGkrKykge1xuICAgICAgICBsZXQge25hbWUsIHN0cnVjdHVyZWQsIHdpbGRjYXJkLCB2YWx1ZSwgbGl0ZXJhbH0gPSBhcmdzW2ldO1xuICAgICAgICBpZiAoIWxpdGVyYWwpIHtcbiAgICAgICAgICBpZiAod2lsZGNhcmQpIHtcbiAgICAgICAgICAgIGNvbnN0IG1hdGNoZXMgPSBpc0Rlc2NlbmRhbnQobmFtZSwgcGF0aCk7XG4gICAgICAgICAgICBjb25zdCBwYXRoVmFsdWUgPSBnZXRBcmdWYWx1ZShkYXRhLCBwcm9wcywgbWF0Y2hlcyA/IHBhdGggOiBuYW1lKTtcbiAgICAgICAgICAgIHZhbHVlID0ge1xuICAgICAgICAgICAgICBwYXRoOiBtYXRjaGVzID8gcGF0aCA6IG5hbWUsXG4gICAgICAgICAgICAgIHZhbHVlOiBwYXRoVmFsdWUsXG4gICAgICAgICAgICAgIGJhc2U6IG1hdGNoZXMgPyBnZXQoZGF0YSwgbmFtZSkgOiBwYXRoVmFsdWVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlID0gc3RydWN0dXJlZCA/IGdldEFyZ1ZhbHVlKGRhdGEsIHByb3BzLCBuYW1lKSA6IGRhdGFbbmFtZV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIFdoZW4gdGhlIGBsZWdhY3lVbmRlZmluZWRgIGZsYWcgaXMgZW5hYmxlZCwgcGFzcyBhIG5vLW9wIHZhbHVlXG4gICAgICAgIC8vIHNvIHRoYXQgdGhlIG9ic2VydmVyLCBjb21wdXRlZCBwcm9wZXJ0eSwgb3IgY29tcG91bmQgYmluZGluZyBpcyBhYm9ydGVkLlxuICAgICAgICBpZiAobGVnYWN5VW5kZWZpbmVkICYmICF0aGlzLl9vdmVycmlkZUxlZ2FjeVVuZGVmaW5lZCAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGFyZ3MubGVuZ3RoID4gMSkge1xuICAgICAgICAgIHJldHVybiBOT09QO1xuICAgICAgICB9XG4gICAgICAgIHZhbHVlc1tpXSA9IHZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICB9XG5cbiAgICAvLyAtLSBzdGF0aWMgY2xhc3MgbWV0aG9kcyAtLS0tLS0tLS0tLS1cblxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgYW4gYWNjZXNzb3IgZXhpc3RzIGZvciB0aGUgc3BlY2lmaWVkIHByb3BlcnR5LCBhbmQgYWRkc1xuICAgICAqIHRvIGEgbGlzdCBvZiBcInByb3BlcnR5IGVmZmVjdHNcIiB0aGF0IHdpbGwgcnVuIHdoZW4gdGhlIGFjY2Vzc29yIGZvclxuICAgICAqIHRoZSBzcGVjaWZpZWQgcHJvcGVydHkgaXMgc2V0LiAgRWZmZWN0cyBhcmUgZ3JvdXBlZCBieSBcInR5cGVcIiwgd2hpY2hcbiAgICAgKiByb3VnaGx5IGNvcnJlc3BvbmRzIHRvIGEgcGhhc2UgaW4gZWZmZWN0IHByb2Nlc3NpbmcuICBUaGUgZWZmZWN0XG4gICAgICogbWV0YWRhdGEgc2hvdWxkIGJlIGluIHRoZSBmb2xsb3dpbmcgZm9ybTpcbiAgICAgKlxuICAgICAqICAgICB7XG4gICAgICogICAgICAgZm46IGVmZmVjdEZ1bmN0aW9uLCAvLyBSZWZlcmVuY2UgdG8gZnVuY3Rpb24gdG8gY2FsbCB0byBwZXJmb3JtIGVmZmVjdFxuICAgICAqICAgICAgIGluZm86IHsgLi4uIH0gICAgICAgLy8gRWZmZWN0IG1ldGFkYXRhIHBhc3NlZCB0byBmdW5jdGlvblxuICAgICAqICAgICAgIHRyaWdnZXI6IHsgICAgICAgICAgLy8gT3B0aW9uYWwgdHJpZ2dlcmluZyBtZXRhZGF0YTsgaWYgbm90IHByb3ZpZGVkXG4gICAgICogICAgICAgICBuYW1lOiBzdHJpbmcgICAgICAvLyB0aGUgcHJvcGVydHkgaXMgdHJlYXRlZCBhcyBhIHdpbGRjYXJkXG4gICAgICogICAgICAgICBzdHJ1Y3R1cmVkOiBib29sZWFuXG4gICAgICogICAgICAgICB3aWxkY2FyZDogYm9vbGVhblxuICAgICAqICAgICAgIH1cbiAgICAgKiAgICAgfVxuICAgICAqXG4gICAgICogRWZmZWN0cyBhcmUgY2FsbGVkIGZyb20gYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgaW4gdGhlIGZvbGxvd2luZyBvcmRlciBieVxuICAgICAqIHR5cGU6XG4gICAgICpcbiAgICAgKiAxLiBDT01QVVRFXG4gICAgICogMi4gUFJPUEFHQVRFXG4gICAgICogMy4gUkVGTEVDVFxuICAgICAqIDQuIE9CU0VSVkVcbiAgICAgKiA1LiBOT1RJRllcbiAgICAgKlxuICAgICAqIEVmZmVjdCBmdW5jdGlvbnMgYXJlIGNhbGxlZCB3aXRoIHRoZSBmb2xsb3dpbmcgc2lnbmF0dXJlOlxuICAgICAqXG4gICAgICogICAgIGVmZmVjdEZ1bmN0aW9uKGluc3QsIHBhdGgsIHByb3BzLCBvbGRQcm9wcywgaW5mbywgaGFzUGF0aHMpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgdGhhdCBzaG91bGQgdHJpZ2dlciB0aGUgZWZmZWN0XG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRWZmZWN0IHR5cGUsIGZyb20gdGhpcy5QUk9QRVJUWV9FRkZFQ1RfVFlQRVNcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGVmZmVjdCBFZmZlY3QgbWV0YWRhdGEgb2JqZWN0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgYWRkUHJvcGVydHlFZmZlY3QocHJvcGVydHksIHR5cGUsIGVmZmVjdCkge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2FkZFByb3BlcnR5RWZmZWN0KHByb3BlcnR5LCB0eXBlLCBlZmZlY3QpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBzaW5nbGUtcHJvcGVydHkgb2JzZXJ2ZXIgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBQcm9wZXJ0eSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd8ZnVuY3Rpb24oKiwqKX0gbWV0aG9kIEZ1bmN0aW9uIG9yIG5hbWUgb2Ygb2JzZXJ2ZXIgbWV0aG9kIHRvIGNhbGxcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW49fSBkeW5hbWljRm4gV2hldGhlciB0aGUgbWV0aG9kIG5hbWUgc2hvdWxkIGJlIGluY2x1ZGVkIGFzXG4gICAgICogICBhIGRlcGVuZGVuY3kgdG8gdGhlIGVmZmVjdC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQcm9wZXJ0eU9ic2VydmVyKHByb3BlcnR5LCBtZXRob2QsIGR5bmFtaWNGbikge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIocHJvcGVydHksIG1ldGhvZCwgZHluYW1pY0ZuKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbXVsdGktcHJvcGVydHkgXCJtZXRob2Qgb2JzZXJ2ZXJcIiBiYXNlZCBvbiB0aGUgcHJvdmlkZWRcbiAgICAgKiBleHByZXNzaW9uLCB3aGljaCBzaG91bGQgYmUgYSBzdHJpbmcgaW4gdGhlIGZvcm0gb2YgYSBub3JtYWwgSmF2YVNjcmlwdFxuICAgICAqIGZ1bmN0aW9uIHNpZ25hdHVyZTogYCdtZXRob2ROYW1lKGFyZzEsIFsuLi4sIGFyZ25dKSdgLiAgRWFjaCBhcmd1bWVudFxuICAgICAqIHNob3VsZCBjb3JyZXNwb25kIHRvIGEgcHJvcGVydHkgb3IgcGF0aCBpbiB0aGUgY29udGV4dCBvZiB0aGlzXG4gICAgICogcHJvdG90eXBlIChvciBpbnN0YW5jZSksIG9yIG1heSBiZSBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIE1ldGhvZCBleHByZXNzaW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufE9iamVjdD19IGR5bmFtaWNGbiBCb29sZWFuIG9yIG9iamVjdCBtYXAgaW5kaWNhdGluZ1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogICB3aGV0aGVyIG1ldGhvZCBuYW1lcyBzaG91bGQgYmUgaW5jbHVkZWQgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSBlZmZlY3QuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZU1ldGhvZE9ic2VydmVyKGV4cHJlc3Npb24sIGR5bmFtaWNGbikge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZU1ldGhvZE9ic2VydmVyKGV4cHJlc3Npb24sIGR5bmFtaWNGbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2F1c2VzIHRoZSBzZXR0ZXIgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eSB0byBkaXNwYXRjaCBgPHByb3BlcnR5Pi1jaGFuZ2VkYFxuICAgICAqIGV2ZW50cyB0byBub3RpZnkgb2YgY2hhbmdlcyB0byB0aGUgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZU5vdGlmeWluZ1Byb3BlcnR5KHByb3BlcnR5KSB7XG4gICAgICB0aGlzLnByb3RvdHlwZS5fY3JlYXRlTm90aWZ5aW5nUHJvcGVydHkocHJvcGVydHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSByZWFkLW9ubHkgYWNjZXNzb3IgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIFRvIHNldCB0aGUgcHJvcGVydHksIHVzZSB0aGUgcHJvdGVjdGVkIGBfc2V0UHJvcGVydHlgIEFQSS5cbiAgICAgKiBUbyBjcmVhdGUgYSBjdXN0b20gcHJvdGVjdGVkIHNldHRlciAoZS5nLiBgX3NldE15UHJvcCgpYCBmb3JcbiAgICAgKiBwcm9wZXJ0eSBgbXlQcm9wYCksIHBhc3MgYHRydWVgIGZvciBgcHJvdGVjdGVkU2V0dGVyYC5cbiAgICAgKlxuICAgICAqIE5vdGUsIGlmIHRoZSBwcm9wZXJ0eSB3aWxsIGhhdmUgb3RoZXIgcHJvcGVydHkgZWZmZWN0cywgdGhpcyBtZXRob2RcbiAgICAgKiBzaG91bGQgYmUgY2FsbGVkIGZpcnN0LCBiZWZvcmUgYWRkaW5nIG90aGVyIGVmZmVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IHByb3RlY3RlZFNldHRlciBDcmVhdGVzIGEgY3VzdG9tIHByb3RlY3RlZCBzZXR0ZXJcbiAgICAgKiAgIHdoZW4gYHRydWVgLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZVJlYWRPbmx5UHJvcGVydHkocHJvcGVydHksIHByb3RlY3RlZFNldHRlcikge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZVJlYWRPbmx5UHJvcGVydHkocHJvcGVydHksIHByb3RlY3RlZFNldHRlcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2F1c2VzIHRoZSBzZXR0ZXIgZm9yIHRoZSBnaXZlbiBwcm9wZXJ0eSB0byByZWZsZWN0IHRoZSBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIHRvIGEgKGRhc2gtY2FzZWQpIGF0dHJpYnV0ZSBvZiB0aGUgc2FtZSBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVSZWZsZWN0ZWRQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZVJlZmxlY3RlZFByb3BlcnR5KHByb3BlcnR5KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgY29tcHV0ZWQgcHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgc2V0IHRvIHRoZSByZXN1bHQgb2YgdGhlXG4gICAgICogbWV0aG9kIGRlc2NyaWJlZCBieSB0aGUgZ2l2ZW4gYGV4cHJlc3Npb25gIGVhY2ggdGltZSBvbmUgb3IgbW9yZVxuICAgICAqIGFyZ3VtZW50cyB0byB0aGUgbWV0aG9kIGNoYW5nZXMuICBUaGUgZXhwcmVzc2lvbiBzaG91bGQgYmUgYSBzdHJpbmdcbiAgICAgKiBpbiB0aGUgZm9ybSBvZiBhIG5vcm1hbCBKYXZhU2NyaXB0IGZ1bmN0aW9uIHNpZ25hdHVyZTpcbiAgICAgKiBgJ21ldGhvZE5hbWUoYXJnMSwgWy4uLiwgYXJnbl0pJ2BcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eSBOYW1lIG9mIGNvbXB1dGVkIHByb3BlcnR5IHRvIHNldFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBleHByZXNzaW9uIE1ldGhvZCBleHByZXNzaW9uXG4gICAgICogQHBhcmFtIHtib29sZWFufE9iamVjdD19IGR5bmFtaWNGbiBCb29sZWFuIG9yIG9iamVjdCBtYXAgaW5kaWNhdGluZyB3aGV0aGVyXG4gICAgICogICBtZXRob2QgbmFtZXMgc2hvdWxkIGJlIGluY2x1ZGVkIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgZWZmZWN0LlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGNyZWF0ZUNvbXB1dGVkUHJvcGVydHkocHJvcGVydHksIGV4cHJlc3Npb24sIGR5bmFtaWNGbikge1xuICAgICAgdGhpcy5wcm90b3R5cGUuX2NyZWF0ZUNvbXB1dGVkUHJvcGVydHkocHJvcGVydHksIGV4cHJlc3Npb24sIGR5bmFtaWNGbik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUGFyc2VzIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZSB0byBlbnN1cmUgYmluZGluZyBlZmZlY3RzIGFyZSBjcmVhdGVkXG4gICAgICogZm9yIHRoZW0sIGFuZCB0aGVuIGVuc3VyZXMgcHJvcGVydHkgYWNjZXNzb3JzIGFyZSBjcmVhdGVkIGZvciBhbnlcbiAgICAgKiBkZXBlbmRlbnQgcHJvcGVydGllcyBpbiB0aGUgdGVtcGxhdGUuICBCaW5kaW5nIGVmZmVjdHMgZm9yIGJvdW5kXG4gICAgICogdGVtcGxhdGVzIGFyZSBzdG9yZWQgaW4gYSBsaW5rZWQgbGlzdCBvbiB0aGUgaW5zdGFuY2Ugc28gdGhhdFxuICAgICAqIHRlbXBsYXRlcyBjYW4gYmUgZWZmaWNpZW50bHkgc3RhbXBlZCBhbmQgdW5zdGFtcGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgVGVtcGxhdGUgY29udGFpbmluZyBiaW5kaW5nXG4gICAgICogICBiaW5kaW5nc1xuICAgICAqIEByZXR1cm4geyFUZW1wbGF0ZUluZm99IFRlbXBsYXRlIG1ldGFkYXRhIG9iamVjdFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBiaW5kVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgIHJldHVybiB0aGlzLnByb3RvdHlwZS5fYmluZFRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICB9XG5cbiAgICAvLyAtLSBiaW5kaW5nIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuICAgIC8qXG4gICAgICogT3ZlcnZpZXcgb2YgYmluZGluZyBmbG93OlxuICAgICAqXG4gICAgICogRHVyaW5nIGZpbmFsaXphdGlvbiAoYGluc3RhbmNlQmluZGluZz09ZmFsc2VgLCBgd2FzUHJlQm91bmQ9PWZhbHNlYCk6XG4gICAgICogIGBfYmluZFRlbXBsYXRlKHQsIGZhbHNlKWAgY2FsbGVkIGRpcmVjdGx5IGR1cmluZyBmaW5hbGl6YXRpb24gLSBwYXJzZXNcbiAgICAgKiAgdGhlIHRlbXBsYXRlIChmb3IgdGhlIGZpcnN0IHRpbWUpLCBhbmQgdGhlbiBhc3NpZ25zIHRoYXQgX3Byb3RvdHlwaWNhbF9cbiAgICAgKiAgdGVtcGxhdGUgaW5mbyB0byBgX19wcmVib3VuZFRlbXBsYXRlSW5mb2AgX29uIHRoZSBwcm90b3R5cGVfOyBub3RlIGluXG4gICAgICogIHRoaXMgY2FzZSBgd2FzUHJlQm91bmRgIGlzIGZhbHNlOyB0aGlzIGlzIHRoZSBmaXJzdCB0aW1lIHdlJ3JlIGJpbmRpbmdcbiAgICAgKiAgaXQsIHRodXMgd2UgY3JlYXRlIGFjY2Vzc29ycy5cbiAgICAgKlxuICAgICAqIER1cmluZyBmaXJzdCBzdGFtcGluZyAoYGluc3RhbmNlQmluZGluZz09dHJ1ZWAsIGB3YXNQcmVCb3VuZD09dHJ1ZWApOlxuICAgICAqICAgYF9zdGFtcFRlbXBsYXRlYCBjYWxscyBgX2JpbmRUZW1wbGF0ZSh0LCB0cnVlKWA6IHRoZSBgdGVtcGxhdGVJbmZvYFxuICAgICAqICAgcmV0dXJuZWQgbWF0Y2hlcyB0aGUgcHJlYm91bmQgb25lLCBhbmQgc28gdGhpcyBpcyBgd2FzUHJlQm91bmQgPT0gdHJ1ZWBcbiAgICAgKiAgIHN0YXRlOyB0aHVzIHdlIF9za2lwXyBjcmVhdGluZyBhY2Nlc3NvcnMsIGJ1dCBfZG9fIGNyZWF0ZSBhbiBpbnN0YW5jZVxuICAgICAqICAgb2YgdGhlIHRlbXBsYXRlIGluZm8gdG8gc2VydmUgYXMgdGhlIHN0YXJ0IG9mIG91ciBsaW5rZWQgbGlzdCAobmVlZHMgdG9cbiAgICAgKiAgIGJlIGFuIGluc3RhbmNlLCBub3QgdGhlIHByb3RvdHlwaWNhbCBvbmUsIHNvIHRoYXQgd2UgY2FuIGFkZCBgbm9kZUxpc3RgXG4gICAgICogICB0byBpdCB0byBjb250YWluIHRoZSBgbm9kZUluZm9gLW9yZGVyZWQgbGlzdCBvZiBpbnN0YW5jZSBub2RlcyBmb3JcbiAgICAgKiAgIGJpbmRpbmdzLCBhbmQgc28gd2UgY2FuIGNoYWluIHJ1bnRpbWUtc3RhbXBlZCB0ZW1wbGF0ZSBpbmZvcyBvZmYgb2ZcbiAgICAgKiAgIGl0KS4gQXQgdGhpcyBwb2ludCwgdGhlIGNhbGwgdG8gYF9zdGFtcFRlbXBsYXRlYCBjYWxsc1xuICAgICAqICAgYGFwcGx5VGVtcGxhdGVJbmZvYCBmb3IgZWFjaCBuZXN0ZWQgYDx0ZW1wbGF0ZT5gIGZvdW5kIGR1cmluZyBwYXJzaW5nXG4gICAgICogICB0byBoYW5kIHByb3RvdHlwaWNhbCBgX3RlbXBsYXRlSW5mb2AgdG8gdGhlbTsgd2UgYWxzbyBwYXNzIHRoZSBfcGFyZW50X1xuICAgICAqICAgYHRlbXBsYXRlSW5mb2AgdG8gdGhlIGA8dGVtcGxhdGU+YCBzbyB0aGF0IHdlIGhhdmUgdGhlIGluc3RhbmNlLXRpbWVcbiAgICAgKiAgIHBhcmVudCB0byBsaW5rIHRoZSBgdGVtcGxhdGVJbmZvYCB1bmRlciBpbiB0aGUgY2FzZSBpdCB3YXNcbiAgICAgKiAgIHJ1bnRpbWUtc3RhbXBlZC5cbiAgICAgKlxuICAgICAqIER1cmluZyBzdWJzZXF1ZW50IHJ1bnRpbWUgc3RhbXBpbmcgKGBpbnN0YW5jZUJpbmRpbmc9PXRydWVgLFxuICAgICAqICAgYHdhc1ByZUJvdW5kPT1mYWxzZWApOiBgX3N0YW1wVGVtcGxhdGVgIGNhbGxzIGBfYmluZFRlbXBsYXRlKHQsIHRydWUpYFxuICAgICAqICAgLSBoZXJlIGB0ZW1wbGF0ZUluZm9gIGlzIGd1YXJhbnRlZWQgdG8gX25vdF8gbWF0Y2ggdGhlIHByZWJvdW5kIG9uZSxcbiAgICAgKiAgIGJlY2F1c2UgaXQgd2FzIGVpdGhlciBhIGRpZmZlcmVudCB0ZW1wbGF0ZSBhbHRvZ2V0aGVyLCBvciBldmVuIGlmIGl0XG4gICAgICogICB3YXMgdGhlIHNhbWUgdGVtcGxhdGUsIHRoZSBzdGVwIGFib3ZlIGNyZWF0ZWQgYSBpbnN0YW5jZSBvZiB0aGUgaW5mbztcbiAgICAgKiAgIGluIHRoaXMgY2FzZSBgd2FzUHJlQm91bmQgPT0gZmFsc2VgLCBzbyB3ZSBfZG9fIGNyZWF0ZSBhY2Nlc3NvcnMsIF9hbmRfXG4gICAgICogICBsaW5rIGEgaW5zdGFuY2UgaW50byB0aGUgbGlua2VkIGxpc3QuXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBFcXVpdmFsZW50IHRvIHN0YXRpYyBgYmluZFRlbXBsYXRlYCBBUEkgYnV0IGNhbiBiZSBjYWxsZWQgb24gYW4gaW5zdGFuY2VcbiAgICAgKiB0byBhZGQgZWZmZWN0cyBhdCBydW50aW1lLiAgU2VlIHRoYXQgbWV0aG9kIGZvciBmdWxsIEFQSSBkb2NzLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgbWF5IGJlIGNhbGxlZCBvbiB0aGUgcHJvdG90eXBlIChmb3IgcHJvdG90eXBpY2FsIHRlbXBsYXRlXG4gICAgICogYmluZGluZywgdG8gYXZvaWQgY3JlYXRpbmcgYWNjZXNzb3JzIGV2ZXJ5IGluc3RhbmNlKSBvbmNlIHBlciBwcm90b3R5cGUsXG4gICAgICogYW5kIHdpbGwgYmUgY2FsbGVkIHdpdGggYHJ1bnRpbWVCaW5kaW5nOiB0cnVlYCBieSBgX3N0YW1wVGVtcGxhdGVgIHRvXG4gICAgICogY3JlYXRlIGFuZCBsaW5rIGFuIGluc3RhbmNlIG9mIHRoZSB0ZW1wbGF0ZSBtZXRhZGF0YSBhc3NvY2lhdGVkIHdpdGggYVxuICAgICAqIHBhcnRpY3VsYXIgc3RhbXBpbmcuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZSBUZW1wbGF0ZSBjb250YWluaW5nIGJpbmRpbmdcbiAgICAgKiBiaW5kaW5nc1xuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IGluc3RhbmNlQmluZGluZyBXaGVuIGZhbHNlIChkZWZhdWx0KSwgcGVyZm9ybXNcbiAgICAgKiBcInByb3RvdHlwaWNhbFwiIGJpbmRpbmcgb2YgdGhlIHRlbXBsYXRlIGFuZCBvdmVyd3JpdGVzIGFueSBwcmV2aW91c2x5XG4gICAgICogYm91bmQgdGVtcGxhdGUgZm9yIHRoZSBjbGFzcy4gV2hlbiB0cnVlIChhcyBwYXNzZWQgZnJvbVxuICAgICAqIGBfc3RhbXBUZW1wbGF0ZWApLCB0aGUgdGVtcGxhdGUgaW5mbyBpcyBpbnN0YW5jZWQgYW5kIGxpbmtlZCBpbnRvIHRoZVxuICAgICAqIGxpc3Qgb2YgYm91bmQgdGVtcGxhdGVzLlxuICAgICAqIEByZXR1cm4geyFUZW1wbGF0ZUluZm99IFRlbXBsYXRlIG1ldGFkYXRhIG9iamVjdDsgZm9yIGBydW50aW1lQmluZGluZ2AsXG4gICAgICogdGhpcyBpcyBhbiBpbnN0YW5jZSBvZiB0aGUgcHJvdG90eXBpY2FsIHRlbXBsYXRlIGluZm9cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gZ28vbWlzc2luZ2ZucHJvcHNcbiAgICAgKi9cbiAgICBfYmluZFRlbXBsYXRlKHRlbXBsYXRlLCBpbnN0YW5jZUJpbmRpbmcpIHtcbiAgICAgIGxldCB0ZW1wbGF0ZUluZm8gPSB0aGlzLmNvbnN0cnVjdG9yLl9wYXJzZVRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgIGxldCB3YXNQcmVCb3VuZCA9IHRoaXMuX19wcmVCb3VuZFRlbXBsYXRlSW5mbyA9PSB0ZW1wbGF0ZUluZm87XG4gICAgICAvLyBPcHRpbWl6YXRpb246IHNpbmNlIHRoaXMgaXMgY2FsbGVkIHR3aWNlIGZvciBwcm90by1ib3VuZCB0ZW1wbGF0ZXMsXG4gICAgICAvLyBkb24ndCBhdHRlbXB0IHRvIHJlY3JlYXRlIGFjY2Vzc29ycyBpZiB0aGlzIHRlbXBsYXRlIHdhcyBwcmUtYm91bmRcbiAgICAgIGlmICghd2FzUHJlQm91bmQpIHtcbiAgICAgICAgZm9yIChsZXQgcHJvcCBpbiB0ZW1wbGF0ZUluZm8ucHJvcGVydHlFZmZlY3RzKSB7XG4gICAgICAgICAgdGhpcy5fY3JlYXRlUHJvcGVydHlBY2Nlc3Nvcihwcm9wKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKGluc3RhbmNlQmluZGluZykge1xuICAgICAgICAvLyBGb3IgaW5zdGFuY2UtdGltZSBiaW5kaW5nLCBjcmVhdGUgaW5zdGFuY2Ugb2YgdGVtcGxhdGUgbWV0YWRhdGFcbiAgICAgICAgLy8gYW5kIGxpbmsgaW50byB0cmVlIG9mIHRlbXBsYXRlcyBpZiBuZWNlc3NhcnlcbiAgICAgICAgdGVtcGxhdGVJbmZvID0gLyoqIEB0eXBlIHshVGVtcGxhdGVJbmZvfSAqLyhPYmplY3QuY3JlYXRlKHRlbXBsYXRlSW5mbykpO1xuICAgICAgICB0ZW1wbGF0ZUluZm8ud2FzUHJlQm91bmQgPSB3YXNQcmVCb3VuZDtcbiAgICAgICAgaWYgKCF0aGlzLl9fdGVtcGxhdGVJbmZvKSB7XG4gICAgICAgICAgLy8gU2V0IHRoZSBpbmZvIHRvIHRoZSByb290IG9mIHRoZSB0cmVlXG4gICAgICAgICAgdGhpcy5fX3RlbXBsYXRlSW5mbyA9IHRlbXBsYXRlSW5mbztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBBcHBlbmQgdGhpcyB0ZW1wbGF0ZSBpbmZvIG9udG8gdGhlIGVuZCBvZiBpdHMgcGFyZW50IHRlbXBsYXRlJ3NcbiAgICAgICAgICAvLyBsaXN0LCB3aGljaCB3aWxsIGRldGVybWluZSB0aGUgdHJlZSBzdHJ1Y3R1cmUgdmlhIHdoaWNoIHByb3BlcnR5XG4gICAgICAgICAgLy8gZWZmZWN0cyBhcmUgcnVuOyBpZiB0aGlzIHRlbXBsYXRlIHdhcyBub3QgbmVzdGVkIGluIGFub3RoZXJcbiAgICAgICAgICAvLyB0ZW1wbGF0ZSwgdXNlIHRoZSByb290IHRlbXBsYXRlICh0aGUgZmlyc3Qgc3RhbXBlZCBvbmUpIGFzIHRoZVxuICAgICAgICAgIC8vIHBhcmVudC4gTm90ZSwgYHBhcmVudGAgaXMgdGhlIGB0ZW1wbGF0ZUluZm9gIGluc3RhbmNlIGZvciB0aGlzXG4gICAgICAgICAgLy8gdGVtcGxhdGUncyBwYXJlbnQgKGNvbnRhaW5pbmcpIHRlbXBsYXRlLCB3aGljaCB3YXMgc2V0IHVwIGluXG4gICAgICAgICAgLy8gYGFwcGx5VGVtcGxhdGVJbmZvYC4gIFdoaWxlIGEgZ2l2ZW4gdGVtcGxhdGUncyBgcGFyZW50YCBpcyBzZXRcbiAgICAgICAgICAvLyBhcHJpb3JpLCBpdCBpcyBvbmx5IGFkZGVkIHRvIHRoZSBwYXJlbnQncyBjaGlsZCBsaXN0IGF0IHRoZSBwb2ludFxuICAgICAgICAgIC8vIHRoYXQgaXQgaXMgYmVpbmcgYm91bmQsIHNpbmNlIGEgdGVtcGxhdGUgbWF5IG9yIG1heSBub3QgZXZlciBiZVxuICAgICAgICAgIC8vIHN0YW1wZWQsIGFuZCBtYXkgYmUgc3RhbXBlZCBtb3JlIHRoYW4gb25jZSAoaW4gd2hpY2ggY2FzZSBpbnN0YW5jZXNcbiAgICAgICAgICAvLyBvZiB0aGUgdGVtcGxhdGUgaW5mbyB3aWxsIGJlIGluIHRoZSB0cmVlIHVuZGVyIGl0cyBwYXJlbnQgbW9yZSB0aGFuXG4gICAgICAgICAgLy8gb25jZSkuXG4gICAgICAgICAgY29uc3QgcGFyZW50ID0gdGVtcGxhdGUuX3BhcmVudFRlbXBsYXRlSW5mbyB8fCB0aGlzLl9fdGVtcGxhdGVJbmZvO1xuICAgICAgICAgIGNvbnN0IHByZXZpb3VzID0gcGFyZW50Lmxhc3RDaGlsZDtcbiAgICAgICAgICB0ZW1wbGF0ZUluZm8ucGFyZW50ID0gcGFyZW50O1xuICAgICAgICAgIHBhcmVudC5sYXN0Q2hpbGQgPSB0ZW1wbGF0ZUluZm87XG4gICAgICAgICAgdGVtcGxhdGVJbmZvLnByZXZpb3VzU2libGluZyA9IHByZXZpb3VzO1xuICAgICAgICAgIGlmIChwcmV2aW91cykge1xuICAgICAgICAgICAgcHJldmlvdXMubmV4dFNpYmxpbmcgPSB0ZW1wbGF0ZUluZm87XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcmVudC5maXJzdENoaWxkID0gdGVtcGxhdGVJbmZvO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fX3ByZUJvdW5kVGVtcGxhdGVJbmZvID0gdGVtcGxhdGVJbmZvO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRlbXBsYXRlSW5mbztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgcHJvcGVydHkgZWZmZWN0IHRvIHRoZSBnaXZlbiB0ZW1wbGF0ZSBtZXRhZGF0YSwgd2hpY2ggaXMgcnVuXG4gICAgICogYXQgdGhlIFwicHJvcGFnYXRlXCIgc3RhZ2Ugb2YgYF9wcm9wZXJ0aWVzQ2hhbmdlZGAgd2hlbiB0aGUgdGVtcGxhdGVcbiAgICAgKiBoYXMgYmVlbiBib3VuZCB0byB0aGUgZWxlbWVudCB2aWEgYF9iaW5kVGVtcGxhdGVgLlxuICAgICAqXG4gICAgICogVGhlIGBlZmZlY3RgIG9iamVjdCBzaG91bGQgbWF0Y2ggdGhlIGZvcm1hdCBpbiBgX2FkZFByb3BlcnR5RWZmZWN0YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgdG8gYWRkIGVmZmVjdCB0b1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFByb3BlcnR5IHRoYXQgc2hvdWxkIHRyaWdnZXIgdGhlIGVmZmVjdFxuICAgICAqIEBwYXJhbSB7T2JqZWN0PX0gZWZmZWN0IEVmZmVjdCBtZXRhZGF0YSBvYmplY3RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfYWRkVGVtcGxhdGVQcm9wZXJ0eUVmZmVjdCh0ZW1wbGF0ZUluZm8sIHByb3AsIGVmZmVjdCkge1xuICAgICAgbGV0IGhvc3RQcm9wcyA9IHRlbXBsYXRlSW5mby5ob3N0UHJvcHMgPSB0ZW1wbGF0ZUluZm8uaG9zdFByb3BzIHx8IHt9O1xuICAgICAgaG9zdFByb3BzW3Byb3BdID0gdHJ1ZTtcbiAgICAgIGxldCBlZmZlY3RzID0gdGVtcGxhdGVJbmZvLnByb3BlcnR5RWZmZWN0cyA9IHRlbXBsYXRlSW5mby5wcm9wZXJ0eUVmZmVjdHMgfHwge307XG4gICAgICBsZXQgcHJvcEVmZmVjdHMgPSBlZmZlY3RzW3Byb3BdID0gZWZmZWN0c1twcm9wXSB8fCBbXTtcbiAgICAgIHByb3BFZmZlY3RzLnB1c2goZWZmZWN0KTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFtcHMgdGhlIHByb3ZpZGVkIHRlbXBsYXRlIGFuZCBwZXJmb3JtcyBpbnN0YW5jZS10aW1lIHNldHVwIGZvclxuICAgICAqIFBvbHltZXIgdGVtcGxhdGUgZmVhdHVyZXMsIGluY2x1ZGluZyBkYXRhIGJpbmRpbmdzLCBkZWNsYXJhdGl2ZSBldmVudFxuICAgICAqIGxpc3RlbmVycywgYW5kIHRoZSBgdGhpcy4kYCBtYXAgb2YgYGlkYCdzIHRvIG5vZGVzLiAgQSBkb2N1bWVudCBmcmFnbWVudFxuICAgICAqIGlzIHJldHVybmVkIGNvbnRhaW5pbmcgdGhlIHN0YW1wZWQgRE9NLCByZWFkeSBmb3IgaW5zZXJ0aW9uIGludG8gdGhlXG4gICAgICogRE9NLlxuICAgICAqXG4gICAgICogVGhpcyBtZXRob2QgbWF5IGJlIGNhbGxlZCBtb3JlIHRoYW4gb25jZTsgaG93ZXZlciBub3RlIHRoYXQgZHVlIHRvXG4gICAgICogYHNoYWR5Y3NzYCBwb2x5ZmlsbCBsaW1pdGF0aW9ucywgb25seSBzdHlsZXMgZnJvbSB0ZW1wbGF0ZXMgcHJlcGFyZWRcbiAgICAgKiB1c2luZyBgU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlYCB3aWxsIGJlIGNvcnJlY3RseSBwb2x5ZmlsbGVkIChzY29wZWRcbiAgICAgKiB0byB0aGUgc2hhZG93IHJvb3QgYW5kIHN1cHBvcnQgQ1NTIGN1c3RvbSBwcm9wZXJ0aWVzKSwgYW5kIG5vdGUgdGhhdFxuICAgICAqIGBTaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGVgIG1heSBvbmx5IGJlIGNhbGxlZCBvbmNlIHBlciBlbGVtZW50LiBBcyBzdWNoLFxuICAgICAqIGFueSBzdHlsZXMgcmVxdWlyZWQgYnkgaW4gcnVudGltZS1zdGFtcGVkIHRlbXBsYXRlcyBtdXN0IGJlIGluY2x1ZGVkXG4gICAgICogaW4gdGhlIG1haW4gZWxlbWVudCB0ZW1wbGF0ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlIHRvIHN0YW1wXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZUluZm89fSB0ZW1wbGF0ZUluZm8gT3B0aW9uYWwgYm91bmQgdGVtcGxhdGUgaW5mbyBhc3NvY2lhdGVkXG4gICAgICogICB3aXRoIHRoZSB0ZW1wbGF0ZSB0byBiZSBzdGFtcGVkOyBpZiBvbWl0dGVkIHRoZSB0ZW1wbGF0ZSB3aWxsIGJlXG4gICAgICogICBhdXRvbWF0aWNhbGx5IGJvdW5kLlxuICAgICAqIEByZXR1cm4geyFTdGFtcGVkVGVtcGxhdGV9IENsb25lZCB0ZW1wbGF0ZSBjb250ZW50XG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqL1xuICAgIF9zdGFtcFRlbXBsYXRlKHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8pIHtcbiAgICAgIHRlbXBsYXRlSW5mbyA9ICB0ZW1wbGF0ZUluZm8gfHwgLyoqIEB0eXBlIHshVGVtcGxhdGVJbmZvfSAqLyh0aGlzLl9iaW5kVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpKTtcbiAgICAgIC8vIEVuc3VyZXMgdGhhdCBjcmVhdGVkIGRvbSBpcyBgX2VucXVldWVDbGllbnRgJ2QgdG8gdGhpcyBlbGVtZW50IHNvXG4gICAgICAvLyB0aGF0IGl0IGNhbiBiZSBmbHVzaGVkIG9uIG5leHQgY2FsbCB0byBgX2ZsdXNoUHJvcGVydGllc2BcbiAgICAgIGhvc3RTdGFjay5wdXNoKHRoaXMpO1xuICAgICAgbGV0IGRvbSA9IHN1cGVyLl9zdGFtcFRlbXBsYXRlKHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8pO1xuICAgICAgaG9zdFN0YWNrLnBvcCgpO1xuICAgICAgLy8gQWRkIHRlbXBsYXRlLWluc3RhbmNlLXNwZWNpZmljIGRhdGEgdG8gaW5zdGFuY2VkIHRlbXBsYXRlSW5mb1xuICAgICAgdGVtcGxhdGVJbmZvLm5vZGVMaXN0ID0gZG9tLm5vZGVMaXN0O1xuICAgICAgLy8gQ2FwdHVyZSBjaGlsZCBub2RlcyB0byBhbGxvdyB1bnN0YW1waW5nIG9mIG5vbi1wcm90b3R5cGljYWwgdGVtcGxhdGVzXG4gICAgICBpZiAoIXRlbXBsYXRlSW5mby53YXNQcmVCb3VuZCkge1xuICAgICAgICBsZXQgbm9kZXMgPSB0ZW1wbGF0ZUluZm8uY2hpbGROb2RlcyA9IFtdO1xuICAgICAgICBmb3IgKGxldCBuPWRvbS5maXJzdENoaWxkOyBuOyBuPW4ubmV4dFNpYmxpbmcpIHtcbiAgICAgICAgICBub2Rlcy5wdXNoKG4pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBkb20udGVtcGxhdGVJbmZvID0gdGVtcGxhdGVJbmZvO1xuICAgICAgLy8gU2V0dXAgY29tcG91bmQgc3RvcmFnZSwgMi13YXkgbGlzdGVuZXJzLCBhbmQgZGF0YUhvc3QgZm9yIGJpbmRpbmdzXG4gICAgICBzZXR1cEJpbmRpbmdzKHRoaXMsIHRlbXBsYXRlSW5mbyk7XG4gICAgICAvLyBGbHVzaCBwcm9wZXJ0aWVzIGludG8gdGVtcGxhdGUgbm9kZXM7IHRoZSBjaGVjayBvbiBgX19kYXRhQ2xpZW50c1JlYWR5YFxuICAgICAgLy8gZW5zdXJlcyB3ZSBkb24ndCBuZWVkbGVzc2x5IHJ1biBlZmZlY3RzIGZvciBhbiBlbGVtZW50J3MgaW5pdGlhbFxuICAgICAgLy8gcHJvdG90eXBpY2FsIHRlbXBsYXRlIHN0YW1waW5nIHNpbmNlIHRoZXkgd2lsbCBoYXBwZW4gYXMgYSBwYXJ0IG9mIHRoZVxuICAgICAgLy8gZmlyc3QgY2FsbCB0byBgX3Byb3BlcnRpZXNDaGFuZ2VkYC4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlXG4gICAgICAvLyBhZnRlciBydW5uaW5nIHRoZSBpbml0aWFsIHByb3BhZ2F0ZSBlZmZlY3RzLCBhbmQgaW1tZWRpYXRlbHkgYmVmb3JlXG4gICAgICAvLyBmbHVzaGluZyBjbGllbnRzLiBTaW5jZSBkb3duc3RyZWFtIGNsaWVudHMgY291bGQgY2F1c2Ugc3RhbXBpbmcgb25cbiAgICAgIC8vIHRoaXMgaG9zdCAoZS5nLiBhIGZhc3REb21JZiBgZG9tLWlmYCBiZWluZyBmb3JjZWQgdG8gcmVuZGVyXG4gICAgICAvLyBzeW5jaHJvbm91c2x5KSwgdGhpcyBmbGFnIGVuc3VyZXMgZWZmZWN0cyBmb3IgcnVudGltZS1zdGFtcGVkIHRlbXBsYXRlc1xuICAgICAgLy8gYXJlIHJ1biBhdCB0aGlzIHBvaW50IGR1cmluZyB0aGUgaW5pdGlhbCBlbGVtZW50IGJvb3QtdXAuXG4gICAgICBpZiAodGhpcy5fX2RhdGFDbGllbnRzUmVhZHkpIHtcbiAgICAgICAgdGhpcy5fcnVuRWZmZWN0c0ZvclRlbXBsYXRlKHRlbXBsYXRlSW5mbywgdGhpcy5fX2RhdGEsIG51bGwsIGZhbHNlKTtcbiAgICAgICAgdGhpcy5fZmx1c2hDbGllbnRzKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZG9tO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYW5kIHVuYmluZHMgdGhlIG5vZGVzIHByZXZpb3VzbHkgY29udGFpbmVkIGluIHRoZSBwcm92aWRlZFxuICAgICAqIERvY3VtZW50RnJhZ21lbnQgcmV0dXJuZWQgZnJvbSBgX3N0YW1wVGVtcGxhdGVgLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHBhcmFtIHshU3RhbXBlZFRlbXBsYXRlfSBkb20gRG9jdW1lbnRGcmFnbWVudCBwcmV2aW91c2x5IHJldHVybmVkXG4gICAgICogICBmcm9tIGBfc3RhbXBUZW1wbGF0ZWAgYXNzb2NpYXRlZCB3aXRoIHRoZSBub2RlcyB0byBiZSByZW1vdmVkXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX3JlbW92ZUJvdW5kRG9tKGRvbSkge1xuICAgICAgLy8gVW5saW5rIHRlbXBsYXRlIGluZm87IE5vdGUgdGhhdCB3aGlsZSB0aGUgY2hpbGQgaXMgdW5saW5rZWQgZnJvbSBpdHNcbiAgICAgIC8vIHBhcmVudCBsaXN0LCBhIHRlbXBsYXRlJ3MgYHBhcmVudGAgcmVmZXJlbmNlIGlzIG5ldmVyIHJlbW92ZWQsIHNpbmNlXG4gICAgICAvLyB0aGlzIGlzIGlzIGRldGVybWluZWQgYnkgdGhlIHRyZWUgc3RydWN0dXJlIGFuZCBhcHBsaWVkIGF0XG4gICAgICAvLyBgYXBwbHlUZW1wbGF0ZUluZm9gIHRpbWUuXG4gICAgICBjb25zdCB0ZW1wbGF0ZUluZm8gPSBkb20udGVtcGxhdGVJbmZvO1xuICAgICAgY29uc3Qge3ByZXZpb3VzU2libGluZywgbmV4dFNpYmxpbmcsIHBhcmVudH0gPSB0ZW1wbGF0ZUluZm87XG4gICAgICBpZiAocHJldmlvdXNTaWJsaW5nKSB7XG4gICAgICAgIHByZXZpb3VzU2libGluZy5uZXh0U2libGluZyA9IG5leHRTaWJsaW5nO1xuICAgICAgfSBlbHNlIGlmIChwYXJlbnQpIHtcbiAgICAgICAgcGFyZW50LmZpcnN0Q2hpbGQgPSBuZXh0U2libGluZztcbiAgICAgIH1cbiAgICAgIGlmIChuZXh0U2libGluZykge1xuICAgICAgICBuZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmcgPSBwcmV2aW91c1NpYmxpbmc7XG4gICAgICB9IGVsc2UgaWYgKHBhcmVudCkge1xuICAgICAgICBwYXJlbnQubGFzdENoaWxkID0gcHJldmlvdXNTaWJsaW5nO1xuICAgICAgfVxuICAgICAgdGVtcGxhdGVJbmZvLm5leHRTaWJsaW5nID0gdGVtcGxhdGVJbmZvLnByZXZpb3VzU2libGluZyA9IG51bGw7XG4gICAgICAvLyBSZW1vdmUgc3RhbXBlZCBub2Rlc1xuICAgICAgbGV0IG5vZGVzID0gdGVtcGxhdGVJbmZvLmNoaWxkTm9kZXM7XG4gICAgICBmb3IgKGxldCBpPTA7IGk8bm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgbGV0IG5vZGUgPSBub2Rlc1tpXTtcbiAgICAgICAgd3JhcCh3cmFwKG5vZGUpLnBhcmVudE5vZGUpLnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBkZWZhdWx0IGBUZW1wbGF0ZVN0YW1wYCBpbXBsZW1lbnRhdGlvbiB0byBhZGQgc3VwcG9ydCBmb3JcbiAgICAgKiBwYXJzaW5nIGJpbmRpbmdzIGZyb20gYFRleHROb2RlYCdzJyBgdGV4dENvbnRlbnRgLiAgQSBgYmluZGluZ3NgXG4gICAgICogYXJyYXkgaXMgYWRkZWQgdG8gYG5vZGVJbmZvYCBhbmQgcG9wdWxhdGVkIHdpdGggYmluZGluZyBtZXRhZGF0YVxuICAgICAqIHdpdGggaW5mb3JtYXRpb24gY2FwdHVyaW5nIHRoZSBiaW5kaW5nIHRhcmdldCwgYW5kIGEgYHBhcnRzYCBhcnJheVxuICAgICAqIHdpdGggb25lIG9yIG1vcmUgbWV0YWRhdGEgb2JqZWN0cyBjYXB0dXJpbmcgdGhlIHNvdXJjZShzKSBvZiB0aGVcbiAgICAgKiBiaW5kaW5nLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtOb2RlfSBub2RlIE5vZGUgdG8gcGFyc2VcbiAgICAgKiBAcGFyYW0ge1RlbXBsYXRlSW5mb30gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHtOb2RlSW5mb30gbm9kZUluZm8gTm9kZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZSBub2RlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gYHRydWVgIGlmIHRoZSB2aXNpdGVkIG5vZGUgYWRkZWQgbm9kZS1zcGVjaWZpY1xuICAgICAqICAgbWV0YWRhdGEgdG8gYG5vZGVJbmZvYFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBJbnRlcmZhY2VzIGluIGNsb3N1cmUgZG8gbm90IGluaGVyaXQgc3RhdGljcywgYnV0IGNsYXNzZXMgZG9cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcGFyc2VUZW1wbGF0ZU5vZGUobm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbykge1xuICAgICAgLy8gVE9ETyhodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMyNDApOlxuICAgICAgLy8gICAgIENoYW5nZSBiYWNrIHRvIGp1c3Qgc3VwZXIubWV0aG9kQ2FsbCgpXG4gICAgICBsZXQgbm90ZWQgPSBwcm9wZXJ0eUVmZmVjdHNCYXNlLl9wYXJzZVRlbXBsYXRlTm9kZS5jYWxsKFxuICAgICAgICB0aGlzLCBub2RlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKTtcbiAgICAgIGlmIChub2RlLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICBsZXQgcGFydHMgPSB0aGlzLl9wYXJzZUJpbmRpbmdzKG5vZGUudGV4dENvbnRlbnQsIHRlbXBsYXRlSW5mbyk7XG4gICAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHRleHRDb250ZW50IHdpdGggYW55IGxpdGVyYWwgcGFydHNcbiAgICAgICAgICAvLyBOT1RFOiBkZWZhdWx0IHRvIGEgc3BhY2UgaGVyZSBzbyB0aGUgdGV4dE5vZGUgcmVtYWluczsgc29tZSBicm93c2Vyc1xuICAgICAgICAgIC8vIChJRSkgb21pdCBhbiBlbXB0eSB0ZXh0Tm9kZSBmb2xsb3dpbmcgY2xvbmVOb2RlL2ltcG9ydE5vZGUuXG4gICAgICAgICAgbm9kZS50ZXh0Q29udGVudCA9IGxpdGVyYWxGcm9tUGFydHMocGFydHMpIHx8ICcgJztcbiAgICAgICAgICBhZGRCaW5kaW5nKHRoaXMsIHRlbXBsYXRlSW5mbywgbm9kZUluZm8sICd0ZXh0JywgJ3RleHRDb250ZW50JywgcGFydHMpO1xuICAgICAgICAgIG5vdGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIG5vdGVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBkZWZhdWx0IGBUZW1wbGF0ZVN0YW1wYCBpbXBsZW1lbnRhdGlvbiB0byBhZGQgc3VwcG9ydCBmb3JcbiAgICAgKiBwYXJzaW5nIGJpbmRpbmdzIGZyb20gYXR0cmlidXRlcy4gIEEgYGJpbmRpbmdzYFxuICAgICAqIGFycmF5IGlzIGFkZGVkIHRvIGBub2RlSW5mb2AgYW5kIHBvcHVsYXRlZCB3aXRoIGJpbmRpbmcgbWV0YWRhdGFcbiAgICAgKiB3aXRoIGluZm9ybWF0aW9uIGNhcHR1cmluZyB0aGUgYmluZGluZyB0YXJnZXQsIGFuZCBhIGBwYXJ0c2AgYXJyYXlcbiAgICAgKiB3aXRoIG9uZSBvciBtb3JlIG1ldGFkYXRhIG9iamVjdHMgY2FwdHVyaW5nIHRoZSBzb3VyY2Uocykgb2YgdGhlXG4gICAgICogYmluZGluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZSBOb2RlIHRvIHBhcnNlXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZUluZm99IHRlbXBsYXRlSW5mbyBUZW1wbGF0ZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7Tm9kZUluZm99IG5vZGVJbmZvIE5vZGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGUgbm9kZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIEF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIEF0dHJpYnV0ZSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IGB0cnVlYCBpZiB0aGUgdmlzaXRlZCBub2RlIGFkZGVkIG5vZGUtc3BlY2lmaWNcbiAgICAgKiAgIG1ldGFkYXRhIHRvIGBub2RlSW5mb2BcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gSW50ZXJmYWNlcyBpbiBjbG9zdXJlIGRvIG5vdCBpbmhlcml0IHN0YXRpY3MsIGJ1dCBjbGFzc2VzIGRvXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3BhcnNlVGVtcGxhdGVOb2RlQXR0cmlidXRlKG5vZGUsIHRlbXBsYXRlSW5mbywgbm9kZUluZm8sIG5hbWUsIHZhbHVlKSB7XG4gICAgICBsZXQgcGFydHMgPSB0aGlzLl9wYXJzZUJpbmRpbmdzKHZhbHVlLCB0ZW1wbGF0ZUluZm8pO1xuICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgIC8vIEF0dHJpYnV0ZSBvciBwcm9wZXJ0eVxuICAgICAgICBsZXQgb3JpZ05hbWUgPSBuYW1lO1xuICAgICAgICBsZXQga2luZCA9ICdwcm9wZXJ0eSc7XG4gICAgICAgIC8vIFRoZSBvbmx5IHdheSB3ZSBzZWUgYSBjYXBpdGFsIGxldHRlciBoZXJlIGlzIGlmIHRoZSBhdHRyIGhhc1xuICAgICAgICAvLyBhIGNhcGl0YWwgbGV0dGVyIGluIGl0IHBlciBzcGVjLiBJbiB0aGlzIGNhc2UsIHRvIG1ha2Ugc3VyZVxuICAgICAgICAvLyB0aGlzIGJpbmRpbmcgd29ya3MsIHdlIGdvIGFoZWFkIGFuZCBtYWtlIHRoZSBiaW5kaW5nIHRvIHRoZSBhdHRyaWJ1dGUuXG4gICAgICAgIGlmIChjYXBpdGFsQXR0cmlidXRlUmVnZXgudGVzdChuYW1lKSkge1xuICAgICAgICAgIGtpbmQgPSAnYXR0cmlidXRlJztcbiAgICAgICAgfSBlbHNlIGlmIChuYW1lW25hbWUubGVuZ3RoLTFdID09ICckJykge1xuICAgICAgICAgIG5hbWUgPSBuYW1lLnNsaWNlKDAsIC0xKTtcbiAgICAgICAgICBraW5kID0gJ2F0dHJpYnV0ZSc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhdHRyaWJ1dGUgYmluZGluZ3Mgd2l0aCBhbnkgbGl0ZXJhbCBwYXJ0c1xuICAgICAgICBsZXQgbGl0ZXJhbCA9IGxpdGVyYWxGcm9tUGFydHMocGFydHMpO1xuICAgICAgICBpZiAobGl0ZXJhbCAmJiBraW5kID09ICdhdHRyaWJ1dGUnKSB7XG4gICAgICAgICAgLy8gRW5zdXJlIGEgU2hhZHlDU1MgdGVtcGxhdGUgc2NvcGVkIHN0eWxlIGlzIG5vdCByZW1vdmVkXG4gICAgICAgICAgLy8gd2hlbiBhIGNsYXNzJCBiaW5kaW5nJ3MgaW5pdGlhbCBsaXRlcmFsIHZhbHVlIGlzIHNldC5cbiAgICAgICAgICBpZiAobmFtZSA9PSAnY2xhc3MnICYmIG5vZGUuaGFzQXR0cmlidXRlKCdjbGFzcycpKSB7XG4gICAgICAgICAgICBsaXRlcmFsICs9ICcgJyArIG5vZGUuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCBsaXRlcmFsKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzdXBwb3J0IGRpc2FibGUtdXBncmFkZVxuICAgICAgICBpZiAoa2luZCA9PSAnYXR0cmlidXRlJyAmJiBvcmlnTmFtZSA9PSAnZGlzYWJsZS11cGdyYWRlJCcpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShuYW1lLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ2xlYXIgYXR0cmlidXRlIGJlZm9yZSByZW1vdmluZywgc2luY2UgSUUgd29uJ3QgYWxsb3cgcmVtb3ZpbmdcbiAgICAgICAgLy8gYHZhbHVlYCBhdHRyaWJ1dGUgaWYgaXQgcHJldmlvdXNseSBoYWQgYSB2YWx1ZSAoY2FuJ3RcbiAgICAgICAgLy8gdW5jb25kaXRpb25hbGx5IHNldCAnJyBiZWZvcmUgcmVtb3Zpbmcgc2luY2UgYXR0cmlidXRlcyB3aXRoIGAkYFxuICAgICAgICAvLyBjYW4ndCBiZSBzZXQgdXNpbmcgc2V0QXR0cmlidXRlKVxuICAgICAgICBpZiAobm9kZS5sb2NhbE5hbWUgPT09ICdpbnB1dCcgJiYgb3JpZ05hbWUgPT09ICd2YWx1ZScpIHtcbiAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShvcmlnTmFtZSwgJycpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFJlbW92ZSBhbm5vdGF0aW9uXG4gICAgICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKG9yaWdOYW1lKTtcbiAgICAgICAgLy8gQ2FzZSBoYWNrZXJ5OiBhdHRyaWJ1dGVzIGFyZSBsb3dlci1jYXNlLCBidXQgYmluZCB0YXJnZXRzXG4gICAgICAgIC8vIChwcm9wZXJ0aWVzKSBhcmUgY2FzZSBzZW5zaXRpdmUuIEdhbWJpdCBpcyB0byBtYXAgZGFzaC1jYXNlIHRvXG4gICAgICAgIC8vIGNhbWVsLWNhc2U6IGBmb28tYmFyYCBiZWNvbWVzIGBmb29CYXJgLlxuICAgICAgICAvLyBBdHRyaWJ1dGUgYmluZGluZ3MgYXJlIGV4Y2VwdGVkLlxuICAgICAgICBpZiAoa2luZCA9PT0gJ3Byb3BlcnR5Jykge1xuICAgICAgICAgIG5hbWUgPSBkYXNoVG9DYW1lbENhc2UobmFtZSk7XG4gICAgICAgIH1cbiAgICAgICAgYWRkQmluZGluZyh0aGlzLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvLCBraW5kLCBuYW1lLCBwYXJ0cywgbGl0ZXJhbCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVE9ETyhodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMyNDApOlxuICAgICAgICAvLyAgICAgQ2hhbmdlIGJhY2sgdG8ganVzdCBzdXBlci5tZXRob2RDYWxsKClcbiAgICAgICAgcmV0dXJuIHByb3BlcnR5RWZmZWN0c0Jhc2UuX3BhcnNlVGVtcGxhdGVOb2RlQXR0cmlidXRlLmNhbGwoXG4gICAgICAgICAgdGhpcywgbm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbywgbmFtZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBkZWZhdWx0IGBUZW1wbGF0ZVN0YW1wYCBpbXBsZW1lbnRhdGlvbiB0byBhZGQgc3VwcG9ydCBmb3JcbiAgICAgKiBiaW5kaW5nIHRoZSBwcm9wZXJ0aWVzIHRoYXQgYSBuZXN0ZWQgdGVtcGxhdGUgZGVwZW5kcyBvbiB0byB0aGUgdGVtcGxhdGVcbiAgICAgKiBhcyBgX2hvc3RfPHByb3BlcnR5PmAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgTm9kZSB0byBwYXJzZVxuICAgICAqIEBwYXJhbSB7VGVtcGxhdGVJbmZvfSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge05vZGVJbmZvfSBub2RlSW5mbyBOb2RlIG1ldGFkYXRhIGZvciBjdXJyZW50IHRlbXBsYXRlIG5vZGVcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBgdHJ1ZWAgaWYgdGhlIHZpc2l0ZWQgbm9kZSBhZGRlZCBub2RlLXNwZWNpZmljXG4gICAgICogICBtZXRhZGF0YSB0byBgbm9kZUluZm9gXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IEludGVyZmFjZXMgaW4gY2xvc3VyZSBkbyBub3QgaW5oZXJpdCBzdGF0aWNzLCBidXQgY2xhc3NlcyBkb1xuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZVRlbXBsYXRlTmVzdGVkVGVtcGxhdGUobm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbykge1xuICAgICAgLy8gVE9ETyhodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMyNDApOlxuICAgICAgLy8gICAgIENoYW5nZSBiYWNrIHRvIGp1c3Qgc3VwZXIubWV0aG9kQ2FsbCgpXG4gICAgICBsZXQgbm90ZWQgPSBwcm9wZXJ0eUVmZmVjdHNCYXNlLl9wYXJzZVRlbXBsYXRlTmVzdGVkVGVtcGxhdGUuY2FsbChcbiAgICAgICAgdGhpcywgbm9kZSwgdGVtcGxhdGVJbmZvLCBub2RlSW5mbyk7XG4gICAgICBjb25zdCBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gICAgICBjb25zdCBuZXN0ZWRUZW1wbGF0ZUluZm8gPSBub2RlSW5mby50ZW1wbGF0ZUluZm87XG4gICAgICBjb25zdCBpc0RvbUlmID0gcGFyZW50LmxvY2FsTmFtZSA9PT0gJ2RvbS1pZic7XG4gICAgICBjb25zdCBpc0RvbVJlcGVhdCA9IHBhcmVudC5sb2NhbE5hbWUgPT09ICdkb20tcmVwZWF0JztcbiAgICAgIC8vIFJlbW92ZSBuZXN0ZWQgdGVtcGxhdGUgYW5kIHJlZGlyZWN0IGl0cyBob3N0IGJpbmRpbmdzICYgdGVtcGxhdGVJbmZvXG4gICAgICAvLyBvbnRvIHRoZSBwYXJlbnQgKGRvbS1pZi9yZXBlYXQgZWxlbWVudCkncyBub2RlSW5mb1xuICAgICAgaWYgKHJlbW92ZU5lc3RlZFRlbXBsYXRlcyAmJiAoaXNEb21JZiB8fCBpc0RvbVJlcGVhdCkpIHtcbiAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgICAvLyBVc2UgdGhlIHBhcmVudCdzIG5vZGVJbmZvIChmb3IgdGhlIGRvbS1pZi9yZXBlYXQpIHRvIHJlY29yZCB0aGVcbiAgICAgICAgLy8gdGVtcGxhdGVJbmZvLCBhbmQgdXNlIHRoYXQgZm9yIGFueSBob3N0IHByb3BlcnR5IGJpbmRpbmdzIGJlbG93XG4gICAgICAgIG5vZGVJbmZvID0gbm9kZUluZm8ucGFyZW50SW5mbztcbiAgICAgICAgbm9kZUluZm8udGVtcGxhdGVJbmZvID0gbmVzdGVkVGVtcGxhdGVJbmZvO1xuICAgICAgICAvLyBFbnN1cmUgdGhlIHBhcmVudCBkb20taWYvcmVwZWF0IGlzIG5vdGVkIHNpbmNlIGl0IG5vdyBtYXkgaGF2ZSBob3N0XG4gICAgICAgIC8vIGJpbmRpbmdzOyBpdCBtYXkgbm90IGhhdmUgYmVlbiBpZiBpdCBkaWQgbm90IGhhdmUgaXRzIG93biBiaW5kaW5nc1xuICAgICAgICBub2RlSW5mby5ub3RlZCA9IHRydWU7XG4gICAgICAgIG5vdGVkID0gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBNZXJnZSBob3N0IHByb3BzIGludG8gb3V0ZXIgdGVtcGxhdGUgYW5kIGFkZCBiaW5kaW5nc1xuICAgICAgbGV0IGhvc3RQcm9wcyA9IG5lc3RlZFRlbXBsYXRlSW5mby5ob3N0UHJvcHM7XG4gICAgICBpZiAoZmFzdERvbUlmICYmIGlzRG9tSWYpIHtcbiAgICAgICAgLy8gYGZhc3REb21JZmAgbW9kZSB1c2VzIHJ1bnRpbWUtdGVtcGxhdGUgc3RhbXBpbmcgdG8gYWRkIGFjY2Vzc29ycy9cbiAgICAgICAgLy8gZWZmZWN0cyB0byBwcm9wZXJ0aWVzIHVzZWQgaW4gaXRzIHRlbXBsYXRlOyBhcyBzdWNoIHdlIGRvbid0IG5lZWQgdG9cbiAgICAgICAgLy8gdGF4IHRoZSBob3N0IGVsZW1lbnQgd2l0aCBgX2hvc3RfYCBiaW5kaW5ncyBmb3IgdGhlIGBkb20taWZgLlxuICAgICAgICAvLyBIb3dldmVyLCBpbiB0aGUgZXZlbnQgaXQgaXMgbmVzdGVkIGluIGEgYGRvbS1yZXBlYXRgLCBpdCBpcyBzdGlsbFxuICAgICAgICAvLyBpbXBvcnRhbnQgdGhhdCBpdHMgaG9zdCBwcm9wZXJ0aWVzIGFyZSBhZGRlZCB0byB0aGVcbiAgICAgICAgLy8gVGVtcGxhdGVJbnN0YW5jZSdzIGBob3N0UHJvcHNgIHNvIHRoYXQgdGhleSBhcmUgZm9yd2FyZGVkIHRvIHRoZVxuICAgICAgICAvLyBUZW1wbGF0ZUluc3RhbmNlLlxuICAgICAgICBpZiAoaG9zdFByb3BzKSB7XG4gICAgICAgICAgdGVtcGxhdGVJbmZvLmhvc3RQcm9wcyA9XG4gICAgICAgICAgICBPYmplY3QuYXNzaWduKHRlbXBsYXRlSW5mby5ob3N0UHJvcHMgfHwge30sIGhvc3RQcm9wcyk7XG4gICAgICAgICAgLy8gRW5zdXJlIHRoZSBkb20taWYgaXMgbm90ZWQgc28gdGhhdCBpdCBoYXMgYSBfX2RhdGFIb3N0LCBzaW5jZVxuICAgICAgICAgIC8vIGBmYXN0RG9tSWZgIHVzZXMgdGhlIGhvc3QgZm9yIHJ1bnRpbWUgdGVtcGxhdGUgc3RhbXBpbmc7IG5vdGUgdGhpc1xuICAgICAgICAgIC8vIHdhcyBhbHJlYWR5IGVuc3VyZWQgYWJvdmUgaW4gdGhlIGByZW1vdmVOZXN0ZWRUZW1wbGF0ZXNgIGNhc2VcbiAgICAgICAgICBpZiAoIXJlbW92ZU5lc3RlZFRlbXBsYXRlcykge1xuICAgICAgICAgICAgbm9kZUluZm8ucGFyZW50SW5mby5ub3RlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsZXQgbW9kZSA9ICd7JztcbiAgICAgICAgZm9yIChsZXQgc291cmNlIGluIGhvc3RQcm9wcykge1xuICAgICAgICAgIGxldCBwYXJ0cyA9IFt7IG1vZGUsIHNvdXJjZSwgZGVwZW5kZW5jaWVzOiBbc291cmNlXSwgaG9zdFByb3A6IHRydWUgfV07XG4gICAgICAgICAgYWRkQmluZGluZyh0aGlzLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvLCAncHJvcGVydHknLCAnX2hvc3RfJyArIHNvdXJjZSwgcGFydHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gbm90ZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIHRvIHBhcnNlIHRleHQgaW4gYSB0ZW1wbGF0ZSAoZWl0aGVyIGF0dHJpYnV0ZSB2YWx1ZXMgb3JcbiAgICAgKiB0ZXh0Q29udGVudCkgaW50byBiaW5kaW5nIG1ldGFkYXRhLlxuICAgICAqXG4gICAgICogQW55IG92ZXJyaWRlcyBvZiB0aGlzIG1ldGhvZCBzaG91bGQgcmV0dXJuIGFuIGFycmF5IG9mIGJpbmRpbmcgcGFydFxuICAgICAqIG1ldGFkYXRhICByZXByZXNlbnRpbmcgb25lIG9yIG1vcmUgYmluZGluZ3MgZm91bmQgaW4gdGhlIHByb3ZpZGVkIHRleHRcbiAgICAgKiBhbmQgYW55IFwibGl0ZXJhbFwiIHRleHQgaW4gYmV0d2Vlbi4gIEFueSBub24tbGl0ZXJhbCBwYXJ0cyB3aWxsIGJlIHBhc3NlZFxuICAgICAqIHRvIGBfZXZhbHVhdGVCaW5kaW5nYCB3aGVuIGFueSBkZXBlbmRlbmNpZXMgY2hhbmdlLiAgVGhlIG9ubHkgcmVxdWlyZWRcbiAgICAgKiBmaWVsZHMgb2YgZWFjaCBcInBhcnRcIiBpbiB0aGUgcmV0dXJuZWQgYXJyYXkgYXJlIGFzIGZvbGxvd3M6XG4gICAgICpcbiAgICAgKiAtIGBkZXBlbmRlbmNpZXNgIC0gQXJyYXkgY29udGFpbmluZyB0cmlnZ2VyIG1ldGFkYXRhIGZvciBlYWNoIHByb3BlcnR5XG4gICAgICogICB0aGF0IHNob3VsZCB0cmlnZ2VyIHRoZSBiaW5kaW5nIHRvIHVwZGF0ZVxuICAgICAqIC0gYGxpdGVyYWxgIC0gU3RyaW5nIGNvbnRhaW5pbmcgdGV4dCBpZiB0aGUgcGFydCByZXByZXNlbnRzIGEgbGl0ZXJhbDtcbiAgICAgKiAgIGluIHRoaXMgY2FzZSBubyBgZGVwZW5kZW5jaWVzYCBhcmUgbmVlZGVkXG4gICAgICpcbiAgICAgKiBBZGRpdGlvbmFsIG1ldGFkYXRhIGZvciB1c2UgYnkgYF9ldmFsdWF0ZUJpbmRpbmdgIG1heSBiZSBwcm92aWRlZCBpblxuICAgICAqIGVhY2ggcGFydCBvYmplY3QgYXMgbmVlZGVkLlxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gaGFuZGxlcyB0aGUgZm9sbG93aW5nIHR5cGVzIG9mIGJpbmRpbmdzXG4gICAgICogKG9uZSBvciBtb3JlIG1heSBiZSBpbnRlcm1peGVkIHdpdGggbGl0ZXJhbCBzdHJpbmdzKTpcbiAgICAgKiAtIFByb3BlcnR5IGJpbmRpbmc6IGBbW3Byb3BdXWBcbiAgICAgKiAtIFBhdGggYmluZGluZzogYFtbb2JqZWN0LnByb3BdXWBcbiAgICAgKiAtIE5lZ2F0ZWQgcHJvcGVydHkgb3IgcGF0aCBiaW5kaW5nczogYFtbIXByb3BdXWAgb3IgYFtbIW9iamVjdC5wcm9wXV1gXG4gICAgICogLSBUd28td2F5IHByb3BlcnR5IG9yIHBhdGggYmluZGluZ3MgKHN1cHBvcnRzIG5lZ2F0aW9uKTpcbiAgICAgKiAgIGB7e3Byb3B9fWAsIGB7e29iamVjdC5wcm9wfX1gLCBge3shcHJvcH19YCBvciBge3shb2JqZWN0LnByb3B9fWBcbiAgICAgKiAtIElubGluZSBjb21wdXRlZCBtZXRob2QgKHN1cHBvcnRzIG5lZ2F0aW9uKTpcbiAgICAgKiAgIGBbW2NvbXB1dGUoYSwgJ2xpdGVyYWwnLCBiKV1dYCwgYFtbIWNvbXB1dGUoYSwgJ2xpdGVyYWwnLCBiKV1dYFxuICAgICAqXG4gICAgICogVGhlIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gdXNlcyBhIHJlZ3VsYXIgZXhwcmVzc2lvbiBmb3IgYmVzdFxuICAgICAqIHBlcmZvcm1hbmNlLiBIb3dldmVyLCB0aGUgcmVndWxhciBleHByZXNzaW9uIHVzZXMgYSB3aGl0ZS1saXN0IG9mXG4gICAgICogYWxsb3dlZCBjaGFyYWN0ZXJzIGluIGEgZGF0YS1iaW5kaW5nLCB3aGljaCBjYXVzZXMgcHJvYmxlbXMgZm9yXG4gICAgICogZGF0YS1iaW5kaW5ncyB0aGF0IGRvIHVzZSBjaGFyYWN0ZXJzIG5vdCBpbiB0aGlzIHdoaXRlLWxpc3QuXG4gICAgICpcbiAgICAgKiBJbnN0ZWFkIG9mIHVwZGF0aW5nIHRoZSB3aGl0ZS1saXN0IHdpdGggYWxsIGFsbG93ZWQgY2hhcmFjdGVycyxcbiAgICAgKiB0aGVyZSBpcyBhIFN0cmljdEJpbmRpbmdQYXJzZXIgKHNlZSBsaWIvbWl4aW5zL3N0cmljdC1iaW5kaW5nLXBhcnNlcilcbiAgICAgKiB0aGF0IHVzZXMgYSBzdGF0ZSBtYWNoaW5lIGluc3RlYWQuIFRoaXMgc3RhdGUgbWFjaGluZSBpcyBhYmxlIHRvIGhhbmRsZVxuICAgICAqIGFsbCBjaGFyYWN0ZXJzLiBIb3dldmVyLCBpdCBpcyBzbGlnaHRseSBsZXNzIHBlcmZvcm1hbnQsIHRoZXJlZm9yZSB3ZVxuICAgICAqIGV4dHJhY3RlZCBpdCBpbnRvIGEgc2VwYXJhdGUgb3B0aW9uYWwgbWl4aW4uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUZXh0IHRvIHBhcnNlIGZyb20gYXR0cmlidXRlIG9yIHRleHRDb250ZW50XG4gICAgICogQHBhcmFtIHtPYmplY3R9IHRlbXBsYXRlSW5mbyBDdXJyZW50IHRlbXBsYXRlIG1ldGFkYXRhXG4gICAgICogQHJldHVybiB7QXJyYXk8IUJpbmRpbmdQYXJ0Pn0gQXJyYXkgb2YgYmluZGluZyBwYXJ0IG1ldGFkYXRhXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9wYXJzZUJpbmRpbmdzKHRleHQsIHRlbXBsYXRlSW5mbykge1xuICAgICAgbGV0IHBhcnRzID0gW107XG4gICAgICBsZXQgbGFzdEluZGV4ID0gMDtcbiAgICAgIGxldCBtO1xuICAgICAgLy8gRXhhbXBsZTogXCJsaXRlcmFsMXt7cHJvcH19bGl0ZXJhbDJbWyFjb21wdXRlKGZvbyxiYXIpXV1maW5hbFwiXG4gICAgICAvLyBSZWdleCBtYXRjaGVzOlxuICAgICAgLy8gICAgICAgIEl0ZXJhdGlvbiAxOiAgSXRlcmF0aW9uIDI6XG4gICAgICAvLyBtWzFdOiAne3snICAgICAgICAgICdbWydcbiAgICAgIC8vIG1bMl06ICcnICAgICAgICAgICAgJyEnXG4gICAgICAvLyBtWzNdOiAncHJvcCcgICAgICAgICdjb21wdXRlKGZvbyxiYXIpJ1xuICAgICAgd2hpbGUgKChtID0gYmluZGluZ1JlZ2V4LmV4ZWModGV4dCkpICE9PSBudWxsKSB7XG4gICAgICAgIC8vIEFkZCBsaXRlcmFsIHBhcnRcbiAgICAgICAgaWYgKG0uaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKHtsaXRlcmFsOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgbS5pbmRleCl9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgYmluZGluZyBwYXJ0XG4gICAgICAgIGxldCBtb2RlID0gbVsxXVswXTtcbiAgICAgICAgbGV0IG5lZ2F0ZSA9IEJvb2xlYW4obVsyXSk7XG4gICAgICAgIGxldCBzb3VyY2UgPSBtWzNdLnRyaW0oKTtcbiAgICAgICAgbGV0IGN1c3RvbUV2ZW50ID0gZmFsc2UsIG5vdGlmeUV2ZW50ID0gJycsIGNvbG9uID0gLTE7XG4gICAgICAgIGlmIChtb2RlID09ICd7JyAmJiAoY29sb24gPSBzb3VyY2UuaW5kZXhPZignOjonKSkgPiAwKSB7XG4gICAgICAgICAgbm90aWZ5RXZlbnQgPSBzb3VyY2Uuc3Vic3RyaW5nKGNvbG9uICsgMik7XG4gICAgICAgICAgc291cmNlID0gc291cmNlLnN1YnN0cmluZygwLCBjb2xvbik7XG4gICAgICAgICAgY3VzdG9tRXZlbnQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGxldCBzaWduYXR1cmUgPSBwYXJzZU1ldGhvZChzb3VyY2UpO1xuICAgICAgICBsZXQgZGVwZW5kZW5jaWVzID0gW107XG4gICAgICAgIGlmIChzaWduYXR1cmUpIHtcbiAgICAgICAgICAvLyBJbmxpbmUgY29tcHV0ZWQgZnVuY3Rpb25cbiAgICAgICAgICBsZXQge2FyZ3MsIG1ldGhvZE5hbWV9ID0gc2lnbmF0dXJlO1xuICAgICAgICAgIGZvciAobGV0IGk9MDsgaTxhcmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgYXJnID0gYXJnc1tpXTtcbiAgICAgICAgICAgIGlmICghYXJnLmxpdGVyYWwpIHtcbiAgICAgICAgICAgICAgZGVwZW5kZW5jaWVzLnB1c2goYXJnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgbGV0IGR5bmFtaWNGbnMgPSB0ZW1wbGF0ZUluZm8uZHluYW1pY0ZucztcbiAgICAgICAgICBpZiAoZHluYW1pY0ZucyAmJiBkeW5hbWljRm5zW21ldGhvZE5hbWVdIHx8IHNpZ25hdHVyZS5zdGF0aWMpIHtcbiAgICAgICAgICAgIGRlcGVuZGVuY2llcy5wdXNoKG1ldGhvZE5hbWUpO1xuICAgICAgICAgICAgc2lnbmF0dXJlLmR5bmFtaWNGbiA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFByb3BlcnR5IG9yIHBhdGhcbiAgICAgICAgICBkZXBlbmRlbmNpZXMucHVzaChzb3VyY2UpO1xuICAgICAgICB9XG4gICAgICAgIHBhcnRzLnB1c2goe1xuICAgICAgICAgIHNvdXJjZSwgbW9kZSwgbmVnYXRlLCBjdXN0b21FdmVudCwgc2lnbmF0dXJlLCBkZXBlbmRlbmNpZXMsXG4gICAgICAgICAgZXZlbnQ6IG5vdGlmeUV2ZW50XG4gICAgICAgIH0pO1xuICAgICAgICBsYXN0SW5kZXggPSBiaW5kaW5nUmVnZXgubGFzdEluZGV4O1xuICAgICAgfVxuICAgICAgLy8gQWRkIGEgZmluYWwgbGl0ZXJhbCBwYXJ0XG4gICAgICBpZiAobGFzdEluZGV4ICYmIGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG4gICAgICAgIGxldCBsaXRlcmFsID0gdGV4dC5zdWJzdHJpbmcobGFzdEluZGV4KTtcbiAgICAgICAgaWYgKGxpdGVyYWwpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKHtcbiAgICAgICAgICAgIGxpdGVyYWw6IGxpdGVyYWxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHBhcnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gcGFydHM7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYWxsZWQgdG8gZXZhbHVhdGUgYSBwcmV2aW91c2x5IHBhcnNlZCBiaW5kaW5nIHBhcnQgYmFzZWQgb24gYSBzZXQgb2ZcbiAgICAgKiBvbmUgb3IgbW9yZSBjaGFuZ2VkIGRlcGVuZGVuY2llcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IVBvbHltZXJfUHJvcGVydHlFZmZlY3RzfSBpbnN0IEVsZW1lbnQgdGhhdCBzaG91bGQgYmUgdXNlZCBhc1xuICAgICAqICAgICBzY29wZSBmb3IgYmluZGluZyBkZXBlbmRlbmNpZXNcbiAgICAgKiBAcGFyYW0ge0JpbmRpbmdQYXJ0fSBwYXJ0IEJpbmRpbmcgcGFydCBtZXRhZGF0YVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoIFByb3BlcnR5L3BhdGggdGhhdCB0cmlnZ2VyZWQgdGhpcyBlZmZlY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvcHMgQmFnIG9mIGN1cnJlbnQgcHJvcGVydHkgY2hhbmdlc1xuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvbGRQcm9wcyBCYWcgb2YgcHJldmlvdXMgdmFsdWVzIGZvciBjaGFuZ2VkIHByb3BlcnRpZXNcbiAgICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhhc1BhdGhzIFRydWUgd2l0aCBgcHJvcHNgIGNvbnRhaW5zIG9uZSBvciBtb3JlIHBhdGhzXG4gICAgICogQHJldHVybiB7Kn0gVmFsdWUgdGhlIGJpbmRpbmcgcGFydCBldmFsdWF0ZWQgdG9cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX2V2YWx1YXRlQmluZGluZyhpbnN0LCBwYXJ0LCBwYXRoLCBwcm9wcywgb2xkUHJvcHMsIGhhc1BhdGhzKSB7XG4gICAgICBsZXQgdmFsdWU7XG4gICAgICBpZiAocGFydC5zaWduYXR1cmUpIHtcbiAgICAgICAgdmFsdWUgPSBydW5NZXRob2RFZmZlY3QoaW5zdCwgcGF0aCwgcHJvcHMsIG9sZFByb3BzLCBwYXJ0LnNpZ25hdHVyZSk7XG4gICAgICB9IGVsc2UgaWYgKHBhdGggIT0gcGFydC5zb3VyY2UpIHtcbiAgICAgICAgdmFsdWUgPSBnZXQoaW5zdCwgcGFydC5zb3VyY2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKGhhc1BhdGhzICYmIGlzUGF0aChwYXRoKSkge1xuICAgICAgICAgIHZhbHVlID0gZ2V0KGluc3QsIHBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlID0gaW5zdC5fX2RhdGFbcGF0aF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChwYXJ0Lm5lZ2F0ZSkge1xuICAgICAgICB2YWx1ZSA9ICF2YWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBQcm9wZXJ0eUVmZmVjdHM7XG59KTtcblxuLyoqXG4gKiBTdGFjayBmb3IgZW5xdWV1aW5nIGNsaWVudCBkb20gY3JlYXRlZCBieSBhIGhvc3QgZWxlbWVudC5cbiAqXG4gKiBCeSBkZWZhdWx0IGVsZW1lbnRzIGFyZSBmbHVzaGVkIHZpYSBgX2ZsdXNoUHJvcGVydGllc2Agd2hlblxuICogYGNvbm5lY3RlZENhbGxiYWNrYCBpcyBjYWxsZWQuIEVsZW1lbnRzIGF0dGFjaCB0aGVpciBjbGllbnQgZG9tIHRvXG4gKiB0aGVtc2VsdmVzIGF0IGByZWFkeWAgdGltZSB3aGljaCByZXN1bHRzIGZyb20gdGhpcyBmaXJzdCBmbHVzaC5cbiAqIFRoaXMgcHJvdmlkZXMgYW4gb3JkZXJpbmcgZ3VhcmFudGVlIHRoYXQgdGhlIGNsaWVudCBkb20gYW4gZWxlbWVudFxuICogY3JlYXRlcyBpcyBmbHVzaGVkIGJlZm9yZSB0aGUgZWxlbWVudCBpdHNlbGYgKGkuZS4gY2xpZW50IGByZWFkeWBcbiAqIGZpcmVzIGJlZm9yZSBob3N0IGByZWFkeWApLlxuICpcbiAqIEhvd2V2ZXIsIGlmIGBfZmx1c2hQcm9wZXJ0aWVzYCBpcyBjYWxsZWQgKmJlZm9yZSogYW4gZWxlbWVudCBpcyBjb25uZWN0ZWQsXG4gKiBhcyBmb3IgZXhhbXBsZSBgVGVtcGxhdGl6ZWAgZG9lcywgdGhpcyBvcmRlcmluZyBndWFyYW50ZWUgY2Fubm90IGJlXG4gKiBzYXRpc2ZpZWQgYmVjYXVzZSBubyBlbGVtZW50cyBhcmUgY29ubmVjdGVkLiAoTm90ZTogQm91bmQgZWxlbWVudHMgdGhhdFxuICogcmVjZWl2ZSBkYXRhIGRvIGJlY29tZSBlbnF1ZXVlZCBjbGllbnRzIGFuZCBhcmUgcHJvcGVybHkgb3JkZXJlZCBidXRcbiAqIHVuYm91bmQgZWxlbWVudHMgYXJlIG5vdC4pXG4gKlxuICogVG8gbWFpbnRhaW4gdGhlIGRlc2lyZWQgXCJjbGllbnQgYmVmb3JlIGhvc3RcIiBvcmRlcmluZyBndWFyYW50ZWUgZm9yIHRoaXNcbiAqIGNhc2Ugd2UgcmVseSBvbiB0aGUgXCJob3N0IHN0YWNrLiBDbGllbnQgbm9kZXMgcmVnaXN0ZXJzIHRoZW1zZWx2ZXMgd2l0aFxuICogdGhlIGNyZWF0aW5nIGhvc3QgZWxlbWVudCB3aGVuIGNyZWF0ZWQuIFRoaXMgZW5zdXJlcyB0aGF0IGFsbCBjbGllbnQgZG9tXG4gKiBpcyByZWFkaWVkIGluIHRoZSBwcm9wZXIgb3JkZXIsIG1haW50YWluaW5nIHRoZSBkZXNpcmVkIGd1YXJhbnRlZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCBob3N0U3RhY2sgPSBbXTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKipcbiAqIFRvdGFsIG51bWJlciBvZiBQb2x5bWVyIGVsZW1lbnQgaW5zdGFuY2VzIGNyZWF0ZWQuXG4gKiBAdHlwZSB7bnVtYmVyfVxuICovXG5leHBvcnQgbGV0IGluc3RhbmNlQ291bnQgPSAwO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5jcmVtZW50SW5zdGFuY2VDb3VudCgpIHtcbiAgaW5zdGFuY2VDb3VudCsrO1xufVxuXG4vKipcbiAqIEFycmF5IG9mIFBvbHltZXIgZWxlbWVudCBjbGFzc2VzIHRoYXQgaGF2ZSBiZWVuIGZpbmFsaXplZC5cbiAqIEB0eXBlIHshQXJyYXk8IVBvbHltZXJFbGVtZW50Q29uc3RydWN0b3I+fVxuICovXG5leHBvcnQgY29uc3QgcmVnaXN0cmF0aW9ucyA9IFtdO1xuXG4vKipcbiAqIEBwYXJhbSB7IVBvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9IHByb3RvdHlwZSBFbGVtZW50IHByb3RvdHlwZSB0byBsb2dcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIF9yZWdMb2cocHJvdG90eXBlKSB7XG4gIGNvbnNvbGUubG9nKCdbJyArIC8qKiBAdHlwZSB7P30gKi8ocHJvdG90eXBlKS5pcyArICddOiByZWdpc3RlcmVkJyk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgY2xhc3MgcHJvdG90eXBlIGZvciB0ZWxlbWV0cnkgcHVycG9zZXMuXG4gKiBAcGFyYW0geyFQb2x5bWVyRWxlbWVudENvbnN0cnVjdG9yfSBwcm90b3R5cGUgRWxlbWVudCBwcm90b3R5cGUgdG8gcmVnaXN0ZXJcbiAqIEBwcm90ZWN0ZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlZ2lzdGVyKHByb3RvdHlwZSkge1xuICByZWdpc3RyYXRpb25zLnB1c2gocHJvdG90eXBlKTtcbn1cblxuLyoqXG4gKiBMb2dzIGFsbCBlbGVtZW50cyByZWdpc3RlcmVkIHdpdGggYW4gYGlzYCB0byB0aGUgY29uc29sZS5cbiAqIEBwdWJsaWNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGR1bXBSZWdpc3RyYXRpb25zKCkge1xuICByZWdpc3RyYXRpb25zLmZvckVhY2goX3JlZ0xvZyk7XG59IiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuXG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuaW1wb3J0IHsgcmVnaXN0ZXIsIGluY3JlbWVudEluc3RhbmNlQ291bnQgfSBmcm9tICcuLi91dGlscy90ZWxlbWV0cnkuanMnO1xuaW1wb3J0IHsgUHJvcGVydGllc0NoYW5nZWQgfSBmcm9tICcuL3Byb3BlcnRpZXMtY2hhbmdlZC5qcyc7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGNvcHkgb2YgYHByb3BzYCB3aXRoIGVhY2ggcHJvcGVydHkgbm9ybWFsaXplZCBzdWNoIHRoYXRcbiAqIHVwZ3JhZGVkIGl0IGlzIGFuIG9iamVjdCB3aXRoIGF0IGxlYXN0IGEgdHlwZSBwcm9wZXJ0eSB7IHR5cGU6IFR5cGV9LlxuICpcbiAqIEBwYXJhbSB7IU9iamVjdH0gcHJvcHMgUHJvcGVydGllcyB0byBub3JtYWxpemVcbiAqIEByZXR1cm4geyFPYmplY3R9IENvcHkgb2YgaW5wdXQgYHByb3BzYCB3aXRoIG5vcm1hbGl6ZWQgcHJvcGVydGllcyB0aGF0XG4gKiBhcmUgaW4gdGhlIGZvcm0ge3R5cGU6IFR5cGV9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVQcm9wZXJ0aWVzKHByb3BzKSB7XG4gIGNvbnN0IG91dHB1dCA9IHt9O1xuICBmb3IgKGxldCBwIGluIHByb3BzKSB7XG4gICAgY29uc3QgbyA9IHByb3BzW3BdO1xuICAgIG91dHB1dFtwXSA9ICh0eXBlb2YgbyA9PT0gJ2Z1bmN0aW9uJykgPyB7dHlwZTogb30gOiBvO1xuICB9XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbi8qKlxuICogTWl4aW4gdGhhdCBwcm92aWRlcyBhIG1pbmltYWwgc3RhcnRpbmcgcG9pbnQgdG8gdXNpbmcgdGhlIFByb3BlcnRpZXNDaGFuZ2VkXG4gKiBtaXhpbiBieSBwcm92aWRpbmcgYSBtZWNoYW5pc20gdG8gZGVjbGFyZSBwcm9wZXJ0aWVzIGluIGEgc3RhdGljXG4gKiBnZXR0ZXIgKGUuZy4gc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkgeyByZXR1cm4geyBmb286IFN0cmluZyB9IH0pLiBDaGFuZ2VzXG4gKiBhcmUgcmVwb3J0ZWQgdmlhIHRoZSBgX3Byb3BlcnRpZXNDaGFuZ2VkYCBtZXRob2QuXG4gKlxuICogVGhpcyBtaXhpbiBwcm92aWRlcyBubyBzcGVjaWZpYyBzdXBwb3J0IGZvciByZW5kZXJpbmcuIFVzZXJzIGFyZSBleHBlY3RlZFxuICogdG8gY3JlYXRlIGEgU2hhZG93Um9vdCBhbmQgcHV0IGNvbnRlbnQgaW50byBpdCBhbmQgdXBkYXRlIGl0IGluIHdoYXRldmVyXG4gKiB3YXkgbWFrZXMgc2Vuc2UuIFRoaXMgY2FuIGJlIGRvbmUgaW4gcmVhY3Rpb24gdG8gcHJvcGVydGllcyBjaGFuZ2luZyBieVxuICogaW1wbGVtZW50aW5nIGBfcHJvcGVydGllc0NoYW5nZWRgLlxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQGFwcGxpZXNNaXhpbiBQcm9wZXJ0aWVzQ2hhbmdlZFxuICogQHN1bW1hcnkgTWl4aW4gdGhhdCBwcm92aWRlcyBhIG1pbmltYWwgc3RhcnRpbmcgcG9pbnQgZm9yIHVzaW5nXG4gKiB0aGUgUHJvcGVydGllc0NoYW5nZWQgbWl4aW4gYnkgcHJvdmlkaW5nIGEgZGVjbGFyYXRpdmUgYHByb3BlcnRpZXNgIG9iamVjdC5cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyBDbGFzcyB0byBhcHBseSBtaXhpbiB0by5cbiAqIEByZXR1cm4ge2Z1bmN0aW9uKG5ldzpUKX0gc3VwZXJDbGFzcyB3aXRoIG1peGluIGFwcGxpZWQuXG4gKi9cbmV4cG9ydCBjb25zdCBQcm9wZXJ0aWVzTWl4aW4gPSBkZWR1cGluZ01peGluKHN1cGVyQ2xhc3MgPT4ge1xuXG4gLyoqXG4gICogQGNvbnN0cnVjdG9yXG4gICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydGllc0NoYW5nZWR9XG4gICogQHByaXZhdGVcbiAgKi9cbiBjb25zdCBiYXNlID0gUHJvcGVydGllc0NoYW5nZWQoc3VwZXJDbGFzcyk7XG5cbiAvKipcbiAgKiBSZXR1cm5zIHRoZSBzdXBlciBjbGFzcyBjb25zdHJ1Y3RvciBmb3IgdGhlIGdpdmVuIGNsYXNzLCBpZiBpdCBpcyBhblxuICAqIGluc3RhbmNlIG9mIHRoZSBQcm9wZXJ0aWVzTWl4aW4uXG4gICpcbiAgKiBAcGFyYW0geyFQcm9wZXJ0aWVzTWl4aW5Db25zdHJ1Y3Rvcn0gY29uc3RydWN0b3IgUHJvcGVydGllc01peGluIGNvbnN0cnVjdG9yXG4gICogQHJldHVybiB7P1Byb3BlcnRpZXNNaXhpbkNvbnN0cnVjdG9yfSBTdXBlciBjbGFzcyBjb25zdHJ1Y3RvclxuICAqL1xuIGZ1bmN0aW9uIHN1cGVyUHJvcGVydGllc0NsYXNzKGNvbnN0cnVjdG9yKSB7XG4gICBjb25zdCBzdXBlckN0b3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY29uc3RydWN0b3IpO1xuXG4gICAvLyBOb3RlLCB0aGUgYFByb3BlcnRpZXNNaXhpbmAgY2xhc3MgYmVsb3cgb25seSByZWZlcnMgdG8gdGhlIGNsYXNzXG4gICAvLyBnZW5lcmF0ZWQgYnkgdGhpcyBjYWxsIHRvIHRoZSBtaXhpbjsgdGhlIGluc3RhbmNlb2YgdGVzdCBvbmx5IHdvcmtzXG4gICAvLyBiZWNhdXNlIHRoZSBtaXhpbiBpcyBkZWR1cGVkIGFuZCBndWFyYW50ZWVkIG9ubHkgdG8gYXBwbHkgb25jZSwgaGVuY2VcbiAgIC8vIGFsbCBjb25zdHJ1Y3RvcnMgaW4gYSBwcm90byBjaGFpbiB3aWxsIHNlZSB0aGUgc2FtZSBgUHJvcGVydGllc01peGluYFxuICAgcmV0dXJuIChzdXBlckN0b3IucHJvdG90eXBlIGluc3RhbmNlb2YgUHJvcGVydGllc01peGluKSA/XG4gICAgIC8qKiBAdHlwZSB7IVByb3BlcnRpZXNNaXhpbkNvbnN0cnVjdG9yfSAqLyAoc3VwZXJDdG9yKSA6IG51bGw7XG4gfVxuXG4gLyoqXG4gICogUmV0dXJucyBhIG1lbW9pemVkIHZlcnNpb24gb2YgdGhlIGBwcm9wZXJ0aWVzYCBvYmplY3QgZm9yIHRoZVxuICAqIGdpdmVuIGNsYXNzLiBQcm9wZXJ0aWVzIG5vdCBpbiBvYmplY3QgZm9ybWF0IGFyZSBjb252ZXJ0ZWQgdG8gYXRcbiAgKiBsZWFzdCB7dHlwZX0uXG4gICpcbiAgKiBAcGFyYW0ge1Byb3BlcnRpZXNNaXhpbkNvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvciBQcm9wZXJ0aWVzTWl4aW4gY29uc3RydWN0b3JcbiAgKiBAcmV0dXJuIHtPYmplY3R9IE1lbW9pemVkIHByb3BlcnRpZXMgb2JqZWN0XG4gICovXG4gZnVuY3Rpb24gb3duUHJvcGVydGllcyhjb25zdHJ1Y3Rvcikge1xuICAgaWYgKCFjb25zdHJ1Y3Rvci5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX293blByb3BlcnRpZXMnLCBjb25zdHJ1Y3RvcikpKSB7XG4gICAgIGxldCBwcm9wcyA9IG51bGw7XG5cbiAgICAgaWYgKGNvbnN0cnVjdG9yLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ3Byb3BlcnRpZXMnLCBjb25zdHJ1Y3RvcikpKSB7XG4gICAgICAgY29uc3QgcHJvcGVydGllcyA9IGNvbnN0cnVjdG9yLnByb3BlcnRpZXM7XG5cbiAgICAgICBpZiAocHJvcGVydGllcykge1xuICAgICAgICBwcm9wcyA9IG5vcm1hbGl6ZVByb3BlcnRpZXMocHJvcGVydGllcyk7XG4gICAgICAgfVxuICAgICB9XG5cbiAgICAgY29uc3RydWN0b3IuX19vd25Qcm9wZXJ0aWVzID0gcHJvcHM7XG4gICB9XG4gICByZXR1cm4gY29uc3RydWN0b3IuX19vd25Qcm9wZXJ0aWVzO1xuIH1cblxuIC8qKlxuICAqIEBwb2x5bWVyXG4gICogQG1peGluQ2xhc3NcbiAgKiBAZXh0ZW5kcyB7YmFzZX1cbiAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0aWVzTWl4aW59XG4gICogQHVucmVzdHJpY3RlZFxuICAqL1xuIGNsYXNzIFByb3BlcnRpZXNNaXhpbiBleHRlbmRzIGJhc2Uge1xuXG4gICAvKipcbiAgICAqIEltcGxlbWVudHMgc3RhbmRhcmQgY3VzdG9tIGVsZW1lbnRzIGdldHRlciB0byBvYnNlcnZlcyB0aGUgYXR0cmlidXRlc1xuICAgICogbGlzdGVkIGluIGBwcm9wZXJ0aWVzYC5cbiAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IEludGVyZmFjZXMgaW4gY2xvc3VyZSBkbyBub3QgaW5oZXJpdCBzdGF0aWNzLCBidXQgY2xhc3NlcyBkb1xuICAgICogQG5vY29sbGFwc2VcbiAgICAqL1xuICAgc3RhdGljIGdldCBvYnNlcnZlZEF0dHJpYnV0ZXMoKSB7XG4gICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX29ic2VydmVkQXR0cmlidXRlcycsIHRoaXMpKSkge1xuICAgICAgIHJlZ2lzdGVyKHRoaXMucHJvdG90eXBlKTtcbiAgICAgICBjb25zdCBwcm9wcyA9IHRoaXMuX3Byb3BlcnRpZXM7XG4gICAgICAgdGhpcy5fX29ic2VydmVkQXR0cmlidXRlcyA9IHByb3BzID8gT2JqZWN0LmtleXMocHJvcHMpLm1hcChwID0+IHRoaXMucHJvdG90eXBlLl9hZGRQcm9wZXJ0eVRvQXR0cmlidXRlTWFwKHApKSA6IFtdO1xuICAgICB9XG4gICAgIHJldHVybiB0aGlzLl9fb2JzZXJ2ZWRBdHRyaWJ1dGVzO1xuICAgfVxuXG4gICAvKipcbiAgICAqIEZpbmFsaXplcyBhbiBlbGVtZW50IGRlZmluaXRpb24sIGluY2x1ZGluZyBlbnN1cmluZyBhbnkgc3VwZXIgY2xhc3Nlc1xuICAgICogYXJlIGFsc28gZmluYWxpemVkLiBUaGlzIGluY2x1ZGVzIGVuc3VyaW5nIHByb3BlcnR5XG4gICAgKiBhY2Nlc3NvcnMgZXhpc3Qgb24gdGhlIGVsZW1lbnQgcHJvdG90eXBlLiBUaGlzIG1ldGhvZCBjYWxsc1xuICAgICogYF9maW5hbGl6ZUNsYXNzYCB0byBmaW5hbGl6ZSBlYWNoIGNvbnN0cnVjdG9yIGluIHRoZSBwcm90b3R5cGUgY2hhaW4uXG4gICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICogQG5vY29sbGFwc2VcbiAgICAqL1xuICAgc3RhdGljIGZpbmFsaXplKCkge1xuICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX19maW5hbGl6ZWQnLCB0aGlzKSkpIHtcbiAgICAgICBjb25zdCBzdXBlckN0b3IgPSBzdXBlclByb3BlcnRpZXNDbGFzcygvKiogQHR5cGUgeyFQcm9wZXJ0aWVzTWl4aW5Db25zdHJ1Y3Rvcn0gKi8odGhpcykpO1xuICAgICAgIGlmIChzdXBlckN0b3IpIHtcbiAgICAgICAgIHN1cGVyQ3Rvci5maW5hbGl6ZSgpO1xuICAgICAgIH1cbiAgICAgICB0aGlzLl9fZmluYWxpemVkID0gdHJ1ZTtcbiAgICAgICB0aGlzLl9maW5hbGl6ZUNsYXNzKCk7XG4gICAgIH1cbiAgIH1cblxuICAgLyoqXG4gICAgKiBGaW5hbGl6ZSBhbiBlbGVtZW50IGNsYXNzLiBUaGlzIGluY2x1ZGVzIGVuc3VyaW5nIHByb3BlcnR5XG4gICAgKiBhY2Nlc3NvcnMgZXhpc3Qgb24gdGhlIGVsZW1lbnQgcHJvdG90eXBlLiBUaGlzIG1ldGhvZCBpcyBjYWxsZWQgYnlcbiAgICAqIGBmaW5hbGl6ZWAgYW5kIGZpbmFsaXplcyB0aGUgY2xhc3MgY29uc3RydWN0b3IuXG4gICAgKlxuICAgICogQHByb3RlY3RlZFxuICAgICogQG5vY29sbGFwc2VcbiAgICAqL1xuICAgc3RhdGljIF9maW5hbGl6ZUNsYXNzKCkge1xuICAgICBjb25zdCBwcm9wcyA9IG93blByb3BlcnRpZXMoLyoqIEB0eXBlIHshUHJvcGVydGllc01peGluQ29uc3RydWN0b3J9ICovKHRoaXMpKTtcbiAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgLyoqIEB0eXBlIHs/fSAqLyAodGhpcykuY3JlYXRlUHJvcGVydGllcyhwcm9wcyk7XG4gICAgIH1cbiAgIH1cblxuICAgLyoqXG4gICAgKiBSZXR1cm5zIGEgbWVtb2l6ZWQgdmVyc2lvbiBvZiBhbGwgcHJvcGVydGllcywgaW5jbHVkaW5nIHRob3NlIGluaGVyaXRlZFxuICAgICogZnJvbSBzdXBlciBjbGFzc2VzLiBQcm9wZXJ0aWVzIG5vdCBpbiBvYmplY3QgZm9ybWF0IGFyZSBjb252ZXJ0ZWQgdG9cbiAgICAqIGF0IGxlYXN0IHt0eXBlfS5cbiAgICAqXG4gICAgKiBAcmV0dXJuIHtPYmplY3R9IE9iamVjdCBjb250YWluaW5nIHByb3BlcnRpZXMgZm9yIHRoaXMgY2xhc3NcbiAgICAqIEBwcm90ZWN0ZWRcbiAgICAqIEBub2NvbGxhcHNlXG4gICAgKi9cbiAgIHN0YXRpYyBnZXQgX3Byb3BlcnRpZXMoKSB7XG4gICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShcbiAgICAgICBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX3Byb3BlcnRpZXMnLCB0aGlzKSkpIHtcbiAgICAgICBjb25zdCBzdXBlckN0b3IgPSBzdXBlclByb3BlcnRpZXNDbGFzcygvKiogQHR5cGUgeyFQcm9wZXJ0aWVzTWl4aW5Db25zdHJ1Y3Rvcn0gKi8odGhpcykpO1xuICAgICAgIHRoaXMuX19wcm9wZXJ0aWVzID0gT2JqZWN0LmFzc2lnbih7fSxcbiAgICAgICAgIHN1cGVyQ3RvciAmJiBzdXBlckN0b3IuX3Byb3BlcnRpZXMsXG4gICAgICAgICBvd25Qcm9wZXJ0aWVzKC8qKiBAdHlwZSB7UHJvcGVydGllc01peGluQ29uc3RydWN0b3J9ICovKHRoaXMpKSk7XG4gICAgIH1cbiAgICAgcmV0dXJuIHRoaXMuX19wcm9wZXJ0aWVzO1xuICAgfVxuXG4gICAvKipcbiAgICAqIE92ZXJyaWRlcyBgUHJvcGVydGllc0NoYW5nZWRgIG1ldGhvZCB0byByZXR1cm4gdHlwZSBzcGVjaWZpZWQgaW4gdGhlXG4gICAgKiBzdGF0aWMgYHByb3BlcnRpZXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIHByb3BlcnR5LlxuICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiBwcm9wZXJ0eVxuICAgICogQHJldHVybiB7Kn0gVHlwZSB0byB3aGljaCB0byBkZXNlcmlhbGl6ZSBhdHRyaWJ1dGVcbiAgICAqXG4gICAgKiBAcHJvdGVjdGVkXG4gICAgKiBAbm9jb2xsYXBzZVxuICAgICovXG4gICBzdGF0aWMgdHlwZUZvclByb3BlcnR5KG5hbWUpIHtcbiAgICAgY29uc3QgaW5mbyA9IHRoaXMuX3Byb3BlcnRpZXNbbmFtZV07XG4gICAgIHJldHVybiBpbmZvICYmIGluZm8udHlwZTtcbiAgIH1cblxuICAgLyoqXG4gICAgKiBPdmVycmlkZXMgYFByb3BlcnRpZXNDaGFuZ2VkYCBtZXRob2QgYW5kIGFkZHMgYSBjYWxsIHRvXG4gICAgKiBgZmluYWxpemVgIHdoaWNoIGxhemlseSBjb25maWd1cmVzIHRoZSBlbGVtZW50J3MgcHJvcGVydHkgYWNjZXNzb3JzLlxuICAgICogQG92ZXJyaWRlXG4gICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICovXG4gICBfaW5pdGlhbGl6ZVByb3BlcnRpZXMoKSB7XG4gICAgIGluY3JlbWVudEluc3RhbmNlQ291bnQoKTtcbiAgICAgdGhpcy5jb25zdHJ1Y3Rvci5maW5hbGl6ZSgpO1xuICAgICBzdXBlci5faW5pdGlhbGl6ZVByb3BlcnRpZXMoKTtcbiAgIH1cblxuICAgLyoqXG4gICAgKiBDYWxsZWQgd2hlbiB0aGUgZWxlbWVudCBpcyBhZGRlZCB0byBhIGRvY3VtZW50LlxuICAgICogQ2FsbHMgYF9lbmFibGVQcm9wZXJ0aWVzYCB0byB0dXJuIG9uIHByb3BlcnR5IHN5c3RlbSBmcm9tXG4gICAgKiBgUHJvcGVydGllc0NoYW5nZWRgLlxuICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gU3VwZXIgbWF5IG9yIG1heSBub3QgaW1wbGVtZW50IHRoZSBjYWxsYmFja1xuICAgICogQHJldHVybiB7dm9pZH1cbiAgICAqIEBvdmVycmlkZVxuICAgICovXG4gICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgaWYgKHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKSB7XG4gICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgfVxuICAgICB0aGlzLl9lbmFibGVQcm9wZXJ0aWVzKCk7XG4gICB9XG5cbiAgIC8qKlxuICAgICogQ2FsbGVkIHdoZW4gdGhlIGVsZW1lbnQgaXMgcmVtb3ZlZCBmcm9tIGEgZG9jdW1lbnRcbiAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IFN1cGVyIG1heSBvciBtYXkgbm90IGltcGxlbWVudCB0aGUgY2FsbGJhY2tcbiAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgKiBAb3ZlcnJpZGVcbiAgICAqL1xuICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgIGlmIChzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaykge1xuICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgIH1cbiAgIH1cblxuIH1cblxuIHJldHVybiBQcm9wZXJ0aWVzTWl4aW47XG5cbn0pO1xuIiwgIi8qKlxuICogQGZpbGVvdmVydmlld1xuICogQHN1cHByZXNzIHtjaGVja1Byb3RvdHlwYWxUeXBlc31cbiAqIEBsaWNlbnNlIENvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBUaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbiAqIGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kXG4gKiBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5XG4gKiBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5XG4gKiBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQXG4gKiByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbmltcG9ydCAnLi4vdXRpbHMvYm9vdC5qcyc7XG5cbmltcG9ydCB7IHJvb3RQYXRoLCBzdHJpY3RUZW1wbGF0ZVBvbGljeSwgYWxsb3dUZW1wbGF0ZUZyb21Eb21Nb2R1bGUsIGxlZ2FjeU9wdGltaXphdGlvbnMsIGxlZ2FjeVdhcm5pbmdzLCBzeW5jSW5pdGlhbFJlbmRlciwgc3VwcG9ydHNBZG9wdGluZ1N0eWxlU2hlZXRzLCB1c2VBZG9wdGVkU3R5bGVTaGVldHNXaXRoQnVpbHRDU1MgfSBmcm9tICcuLi91dGlscy9zZXR0aW5ncy5qcyc7XG5pbXBvcnQgeyBkZWR1cGluZ01peGluIH0gZnJvbSAnLi4vdXRpbHMvbWl4aW4uanMnO1xuaW1wb3J0IHsgc3R5bGVzRnJvbVRlbXBsYXRlLCBzdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyB9IGZyb20gJy4uL3V0aWxzL3N0eWxlLWdhdGhlci5qcyc7XG5pbXBvcnQgeyBwYXRoRnJvbVVybCwgcmVzb2x2ZUNzcywgcmVzb2x2ZVVybCB9IGZyb20gJy4uL3V0aWxzL3Jlc29sdmUtdXJsLmpzJztcbmltcG9ydCB7IERvbU1vZHVsZSB9IGZyb20gJy4uL2VsZW1lbnRzL2RvbS1tb2R1bGUuanMnO1xuaW1wb3J0IHsgUHJvcGVydHlFZmZlY3RzIH0gZnJvbSAnLi9wcm9wZXJ0eS1lZmZlY3RzLmpzJztcbmltcG9ydCB7IFByb3BlcnRpZXNNaXhpbiB9IGZyb20gJy4vcHJvcGVydGllcy1taXhpbi5qcyc7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnLi4vdXRpbHMvd3JhcC5qcyc7XG5cbi8qKlxuICogQ3VycmVudCBQb2x5bWVyIHZlcnNpb24gaW4gU2VtdmVyIG5vdGF0aW9uLlxuICogQHR5cGUge3N0cmluZ30gU2VtdmVyIG5vdGF0aW9uIG9mIHRoZSBjdXJyZW50IHZlcnNpb24gb2YgUG9seW1lci5cbiAqL1xuZXhwb3J0IGNvbnN0IHZlcnNpb24gPSAnMy40LjEnO1xuXG5leHBvcnQgY29uc3QgYnVpbHRDU1MgPSB3aW5kb3cuU2hhZHlDU1MgJiYgd2luZG93LlNoYWR5Q1NTWydjc3NCdWlsZCddO1xuXG4vKipcbiAqIEVsZW1lbnQgY2xhc3MgbWl4aW4gdGhhdCBwcm92aWRlcyB0aGUgY29yZSBBUEkgZm9yIFBvbHltZXIncyBtZXRhLXByb2dyYW1taW5nXG4gKiBmZWF0dXJlcyBpbmNsdWRpbmcgdGVtcGxhdGUgc3RhbXBpbmcsIGRhdGEtYmluZGluZywgYXR0cmlidXRlIGRlc2VyaWFsaXphdGlvbixcbiAqIGFuZCBwcm9wZXJ0eSBjaGFuZ2Ugb2JzZXJ2YXRpb24uXG4gKlxuICogU3ViY2xhc3NlcnMgbWF5IHByb3ZpZGUgdGhlIGZvbGxvd2luZyBzdGF0aWMgZ2V0dGVycyB0byByZXR1cm4gbWV0YWRhdGFcbiAqIHVzZWQgdG8gY29uZmlndXJlIFBvbHltZXIncyBmZWF0dXJlcyBmb3IgdGhlIGNsYXNzOlxuICpcbiAqIC0gYHN0YXRpYyBnZXQgaXMoKWA6IFdoZW4gdGhlIHRlbXBsYXRlIGlzIHByb3ZpZGVkIHZpYSBhIGBkb20tbW9kdWxlYCxcbiAqICAgdXNlcnMgc2hvdWxkIHJldHVybiB0aGUgYGRvbS1tb2R1bGVgIGlkIGZyb20gYSBzdGF0aWMgYGlzYCBnZXR0ZXIuICBJZlxuICogICBubyB0ZW1wbGF0ZSBpcyBuZWVkZWQgb3IgdGhlIHRlbXBsYXRlIGlzIHByb3ZpZGVkIGRpcmVjdGx5IHZpYSB0aGVcbiAqICAgYHRlbXBsYXRlYCBnZXR0ZXIsIHRoZXJlIGlzIG5vIG5lZWQgdG8gZGVmaW5lIGBpc2AgZm9yIHRoZSBlbGVtZW50LlxuICpcbiAqIC0gYHN0YXRpYyBnZXQgdGVtcGxhdGUoKWA6IFVzZXJzIG1heSBwcm92aWRlIHRoZSB0ZW1wbGF0ZSBkaXJlY3RseSAoYXNcbiAqICAgb3Bwb3NlZCB0byB2aWEgYGRvbS1tb2R1bGVgKSBieSBpbXBsZW1lbnRpbmcgYSBzdGF0aWMgYHRlbXBsYXRlYCBnZXR0ZXIuXG4gKiAgIFRoZSBnZXR0ZXIgbXVzdCByZXR1cm4gYW4gYEhUTUxUZW1wbGF0ZUVsZW1lbnRgLlxuICpcbiAqIC0gYHN0YXRpYyBnZXQgcHJvcGVydGllcygpYDogU2hvdWxkIHJldHVybiBhbiBvYmplY3QgZGVzY3JpYmluZ1xuICogICBwcm9wZXJ0eS1yZWxhdGVkIG1ldGFkYXRhIHVzZWQgYnkgUG9seW1lciBmZWF0dXJlcyAoa2V5OiBwcm9wZXJ0eSBuYW1lXG4gKiAgIHZhbHVlOiBvYmplY3QgY29udGFpbmluZyBwcm9wZXJ0eSBtZXRhZGF0YSkuIFZhbGlkIGtleXMgaW4gcGVyLXByb3BlcnR5XG4gKiAgIG1ldGFkYXRhIGluY2x1ZGU6XG4gKiAgIC0gYHR5cGVgIChTdHJpbmd8TnVtYmVyfE9iamVjdHxBcnJheXwuLi4pOiBVc2VkIGJ5XG4gKiAgICAgYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AgdG8gZGV0ZXJtaW5lIGhvdyBzdHJpbmctYmFzZWQgYXR0cmlidXRlc1xuICogICAgIGFyZSBkZXNlcmlhbGl6ZWQgdG8gSmF2YVNjcmlwdCBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiAgIC0gYG5vdGlmeWAgKGJvb2xlYW4pOiBDYXVzZXMgYSBjaGFuZ2UgaW4gdGhlIHByb3BlcnR5IHRvIGZpcmUgYVxuICogICAgIG5vbi1idWJibGluZyBldmVudCBjYWxsZWQgYDxwcm9wZXJ0eT4tY2hhbmdlZGAuIEVsZW1lbnRzIHRoYXQgaGF2ZVxuICogICAgIGVuYWJsZWQgdHdvLXdheSBiaW5kaW5nIHRvIHRoZSBwcm9wZXJ0eSB1c2UgdGhpcyBldmVudCB0byBvYnNlcnZlIGNoYW5nZXMuXG4gKiAgIC0gYHJlYWRPbmx5YCAoYm9vbGVhbik6IENyZWF0ZXMgYSBnZXR0ZXIgZm9yIHRoZSBwcm9wZXJ0eSwgYnV0IG5vIHNldHRlci5cbiAqICAgICBUbyBzZXQgYSByZWFkLW9ubHkgcHJvcGVydHksIHVzZSB0aGUgcHJpdmF0ZSBzZXR0ZXIgbWV0aG9kXG4gKiAgICAgYF9zZXRQcm9wZXJ0eShwcm9wZXJ0eSwgdmFsdWUpYC5cbiAqICAgLSBgb2JzZXJ2ZXJgIChzdHJpbmcpOiBPYnNlcnZlciBtZXRob2QgbmFtZSB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW5cbiAqICAgICB0aGUgcHJvcGVydHkgY2hhbmdlcy4gVGhlIGFyZ3VtZW50cyBvZiB0aGUgbWV0aG9kIGFyZVxuICogICAgIGAodmFsdWUsIHByZXZpb3VzVmFsdWUpYC5cbiAqICAgLSBgY29tcHV0ZWRgIChzdHJpbmcpOiBTdHJpbmcgZGVzY3JpYmluZyBtZXRob2QgYW5kIGRlcGVuZGVudCBwcm9wZXJ0aWVzXG4gKiAgICAgZm9yIGNvbXB1dGluZyB0aGUgdmFsdWUgb2YgdGhpcyBwcm9wZXJ0eSAoZS5nLiBgJ2NvbXB1dGVGb28oYmFyLCB6b3QpJ2ApLlxuICogICAgIENvbXB1dGVkIHByb3BlcnRpZXMgYXJlIHJlYWQtb25seSBieSBkZWZhdWx0IGFuZCBjYW4gb25seSBiZSBjaGFuZ2VkXG4gKiAgICAgdmlhIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGNvbXB1dGluZyBtZXRob2QuXG4gKlxuICogLSBgc3RhdGljIGdldCBvYnNlcnZlcnMoKWA6IEFycmF5IG9mIHN0cmluZ3MgZGVzY3JpYmluZyBtdWx0aS1wcm9wZXJ0eVxuICogICBvYnNlcnZlciBtZXRob2RzIGFuZCB0aGVpciBkZXBlbmRlbnQgcHJvcGVydGllcyAoZS5nLlxuICogICBgJ29ic2VydmVBQkMoYSwgYiwgYyknYCkuXG4gKlxuICogVGhlIGJhc2UgY2xhc3MgcHJvdmlkZXMgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbnMgZm9yIHRoZSBmb2xsb3dpbmcgc3RhbmRhcmRcbiAqIGN1c3RvbSBlbGVtZW50IGxpZmVjeWNsZSBjYWxsYmFja3M7IHVzZXJzIG1heSBvdmVycmlkZSB0aGVzZSwgYnV0IHNob3VsZFxuICogY2FsbCB0aGUgc3VwZXIgbWV0aG9kIHRvIGVuc3VyZVxuICogLSBgY29uc3RydWN0b3JgOiBSdW4gd2hlbiB0aGUgZWxlbWVudCBpcyBjcmVhdGVkIG9yIHVwZ3JhZGVkXG4gKiAtIGBjb25uZWN0ZWRDYWxsYmFja2A6IFJ1biBlYWNoIHRpbWUgdGhlIGVsZW1lbnQgaXMgY29ubmVjdGVkIHRvIHRoZVxuICogICBkb2N1bWVudFxuICogLSBgZGlzY29ubmVjdGVkQ2FsbGJhY2tgOiBSdW4gZWFjaCB0aW1lIHRoZSBlbGVtZW50IGlzIGRpc2Nvbm5lY3RlZCBmcm9tXG4gKiAgIHRoZSBkb2N1bWVudFxuICogLSBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYDogUnVuIGVhY2ggdGltZSBhbiBhdHRyaWJ1dGUgaW5cbiAqICAgYG9ic2VydmVkQXR0cmlidXRlc2AgaXMgc2V0IG9yIHJlbW92ZWQgKG5vdGU6IHRoaXMgZWxlbWVudCdzIGRlZmF1bHRcbiAqICAgYG9ic2VydmVkQXR0cmlidXRlc2AgaW1wbGVtZW50YXRpb24gd2lsbCBhdXRvbWF0aWNhbGx5IHJldHVybiBhbiBhcnJheVxuICogICBvZiBkYXNoLWNhc2VkIGF0dHJpYnV0ZXMgYmFzZWQgb24gYHByb3BlcnRpZXNgKVxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQGFwcGxpZXNNaXhpbiBQcm9wZXJ0eUVmZmVjdHNcbiAqIEBhcHBsaWVzTWl4aW4gUHJvcGVydGllc01peGluXG4gKiBAcHJvcGVydHkgcm9vdFBhdGgge3N0cmluZ30gU2V0IHRvIHRoZSB2YWx1ZSBvZiBgcm9vdFBhdGhgLFxuICogICB3aGljaCBkZWZhdWx0cyB0byB0aGUgbWFpbiBkb2N1bWVudCBwYXRoXG4gKiBAcHJvcGVydHkgaW1wb3J0UGF0aCB7c3RyaW5nfSBTZXQgdG8gdGhlIHZhbHVlIG9mIHRoZSBjbGFzcydzIHN0YXRpY1xuICogICBgaW1wb3J0UGF0aGAgcHJvcGVydHksIHdoaWNoIGRlZmF1bHRzIHRvIHRoZSBwYXRoIG9mIHRoaXMgZWxlbWVudCdzXG4gKiAgIGBkb20tbW9kdWxlYCAod2hlbiBgaXNgIGlzIHVzZWQpLCBidXQgY2FuIGJlIG92ZXJyaWRkZW4gZm9yIG90aGVyXG4gKiAgIGltcG9ydCBzdHJhdGVnaWVzLlxuICogQHN1bW1hcnkgRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IHByb3ZpZGVzIHRoZSBjb3JlIEFQSSBmb3IgUG9seW1lcidzXG4gKiBtZXRhLXByb2dyYW1taW5nIGZlYXR1cmVzLlxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIENsYXNzIHRvIGFwcGx5IG1peGluIHRvLlxuICogQHJldHVybiB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIHdpdGggbWl4aW4gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGNvbnN0IEVsZW1lbnRNaXhpbiA9IGRlZHVwaW5nTWl4aW4oYmFzZSA9PiB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfUHJvcGVydHlFZmZlY3RzfVxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0aWVzTWl4aW59XG4gICAqIEBleHRlbmRzIHtIVE1MRWxlbWVudH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0IHBvbHltZXJFbGVtZW50QmFzZSA9IFByb3BlcnRpZXNNaXhpbihQcm9wZXJ0eUVmZmVjdHMoYmFzZSkpO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBwcm9wZXJ0aWVzIHdpdGggZGVmYXVsdCB2YWx1ZXMuXG4gICAqIFRoaXMgbGlzdCBpcyBjcmVhdGVkIGFzIGFuIG9wdGltaXphdGlvbiBzaW5jZSBpdCBpcyBhIHN1YnNldCBvZlxuICAgKiB0aGUgbGlzdCByZXR1cm5lZCBmcm9tIGBfcHJvcGVydGllc2AuXG4gICAqIFRoaXMgbGlzdCBpcyB1c2VkIGluIGBfaW5pdGlhbGl6ZVByb3BlcnRpZXNgIHRvIHNldCBwcm9wZXJ0eSBkZWZhdWx0cy5cbiAgICpcbiAgICogQHBhcmFtIHtQb2x5bWVyRWxlbWVudENvbnN0cnVjdG9yfSBjb25zdHJ1Y3RvciBFbGVtZW50IGNsYXNzXG4gICAqIEByZXR1cm4ge1BvbHltZXJFbGVtZW50UHJvcGVydGllc30gRmxhdHRlbmVkIHByb3BlcnRpZXMgZm9yIHRoaXMgY2xhc3NcbiAgICogICB0aGF0IGhhdmUgZGVmYXVsdCB2YWx1ZXNcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIHByb3BlcnR5RGVmYXVsdHMoY29uc3RydWN0b3IpIHtcbiAgICBpZiAoIWNvbnN0cnVjdG9yLmhhc093blByb3BlcnR5KFxuICAgICAgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX19wcm9wZXJ0eURlZmF1bHRzJywgY29uc3RydWN0b3IpKSkge1xuICAgICAgY29uc3RydWN0b3IuX19wcm9wZXJ0eURlZmF1bHRzID0gbnVsbDtcbiAgICAgIGxldCBwcm9wcyA9IGNvbnN0cnVjdG9yLl9wcm9wZXJ0aWVzO1xuICAgICAgZm9yIChsZXQgcCBpbiBwcm9wcykge1xuICAgICAgICBsZXQgaW5mbyA9IHByb3BzW3BdO1xuICAgICAgICBpZiAoJ3ZhbHVlJyBpbiBpbmZvKSB7XG4gICAgICAgICAgY29uc3RydWN0b3IuX19wcm9wZXJ0eURlZmF1bHRzID0gY29uc3RydWN0b3IuX19wcm9wZXJ0eURlZmF1bHRzIHx8IHt9O1xuICAgICAgICAgIGNvbnN0cnVjdG9yLl9fcHJvcGVydHlEZWZhdWx0c1twXSA9IGluZm87XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGNvbnN0cnVjdG9yLl9fcHJvcGVydHlEZWZhdWx0cztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbWVtb2l6ZWQgdmVyc2lvbiBvZiB0aGUgYG9ic2VydmVyc2AgYXJyYXkuXG4gICAqIEBwYXJhbSB7UG9seW1lckVsZW1lbnRDb25zdHJ1Y3Rvcn0gY29uc3RydWN0b3IgRWxlbWVudCBjbGFzc1xuICAgKiBAcmV0dXJuIHtBcnJheX0gQXJyYXkgY29udGFpbmluZyBvd24gb2JzZXJ2ZXJzIGZvciB0aGUgZ2l2ZW4gY2xhc3NcbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgZnVuY3Rpb24gb3duT2JzZXJ2ZXJzKGNvbnN0cnVjdG9yKSB7XG4gICAgaWYgKCFjb25zdHJ1Y3Rvci5oYXNPd25Qcm9wZXJ0eShcbiAgICAgIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ19fb3duT2JzZXJ2ZXJzJywgY29uc3RydWN0b3IpKSkge1xuICAgICAgY29uc3RydWN0b3IuX19vd25PYnNlcnZlcnMgPVxuICAgICAgICAgIGNvbnN0cnVjdG9yLmhhc093blByb3BlcnR5KFxuICAgICAgICAgICAgICBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdvYnNlcnZlcnMnLCBjb25zdHJ1Y3RvcikpID9cbiAgICAgICAgICAvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9ICovIChjb25zdHJ1Y3Rvcikub2JzZXJ2ZXJzIDpcbiAgICAgICAgICBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gY29uc3RydWN0b3IuX19vd25PYnNlcnZlcnM7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBlZmZlY3RzIGZvciBhIHByb3BlcnR5LlxuICAgKlxuICAgKiBOb3RlLCBvbmNlIGEgcHJvcGVydHkgaGFzIGJlZW4gc2V0IHRvXG4gICAqIGByZWFkT25seWAsIGBjb21wdXRlZGAsIGByZWZsZWN0VG9BdHRyaWJ1dGVgLCBvciBgbm90aWZ5YFxuICAgKiB0aGVzZSB2YWx1ZXMgbWF5IG5vdCBiZSBjaGFuZ2VkLiBGb3IgZXhhbXBsZSwgYSBzdWJjbGFzcyBjYW5ub3RcbiAgICogYWx0ZXIgdGhlc2Ugc2V0dGluZ3MuIEhvd2V2ZXIsIGFkZGl0aW9uYWwgYG9ic2VydmVyc2AgbWF5IGJlIGFkZGVkXG4gICAqIGJ5IHN1YmNsYXNzZXMuXG4gICAqXG4gICAqIFRoZSBpbmZvIG9iamVjdCBzaG91bGQgY29udGFpbiBwcm9wZXJ0eSBtZXRhZGF0YSBhcyBmb2xsb3dzOlxuICAgKlxuICAgKiAqIGB0eXBlYDoge2Z1bmN0aW9ufSB0eXBlIHRvIHdoaWNoIGFuIGF0dHJpYnV0ZSBtYXRjaGluZyB0aGUgcHJvcGVydHlcbiAgICogaXMgZGVzZXJpYWxpemVkLiBOb3RlIHRoZSBwcm9wZXJ0eSBpcyBjYW1lbC1jYXNlZCBmcm9tIGEgZGFzaC1jYXNlZFxuICAgKiBhdHRyaWJ1dGUuIEZvciBleGFtcGxlLCAnZm9vLWJhcicgYXR0cmlidXRlIGlzIGRlc2VyaWFsaXplZCB0byBhXG4gICAqIHByb3BlcnR5IG5hbWVkICdmb29CYXInLlxuICAgKlxuICAgKiAqIGByZWFkT25seWA6IHtib29sZWFufSBjcmVhdGVzIGEgcmVhZE9ubHkgcHJvcGVydHkgYW5kXG4gICAqIG1ha2VzIGEgcHJpdmF0ZSBzZXR0ZXIgZm9yIHRoZSBwcml2YXRlIG9mIHRoZSBmb3JtICdfc2V0Rm9vJyBmb3IgYVxuICAgKiBwcm9wZXJ0eSAnZm9vJyxcbiAgICpcbiAgICogKiBgY29tcHV0ZWRgOiB7c3RyaW5nfSBjcmVhdGVzIGEgY29tcHV0ZWQgcHJvcGVydHkuIEEgY29tcHV0ZWQgcHJvcGVydHlcbiAgICogaXMgYWxzbyBhdXRvbWF0aWNhbGx5IHNldCB0byBgcmVhZE9ubHk6IHRydWVgLiBUaGUgdmFsdWUgaXMgY2FsY3VsYXRlZFxuICAgKiBieSBydW5uaW5nIGEgbWV0aG9kIGFuZCBhcmd1bWVudHMgcGFyc2VkIGZyb20gdGhlIGdpdmVuIHN0cmluZy4gRm9yXG4gICAqIGV4YW1wbGUgJ2NvbXB1dGUoZm9vKScgd2lsbCBjb21wdXRlIGEgZ2l2ZW4gcHJvcGVydHkgd2hlbiB0aGVcbiAgICogJ2ZvbycgcHJvcGVydHkgY2hhbmdlcyBieSBleGVjdXRpbmcgdGhlICdjb21wdXRlJyBtZXRob2QuIFRoaXMgbWV0aG9kXG4gICAqIG11c3QgcmV0dXJuIHRoZSBjb21wdXRlZCB2YWx1ZS5cbiAgICpcbiAgICogKiBgcmVmbGVjdFRvQXR0cmlidXRlYDoge2Jvb2xlYW59IElmIHRydWUsIHRoZSBwcm9wZXJ0eSB2YWx1ZSBpcyByZWZsZWN0ZWRcbiAgICogdG8gYW4gYXR0cmlidXRlIG9mIHRoZSBzYW1lIG5hbWUuIE5vdGUsIHRoZSBhdHRyaWJ1dGUgaXMgZGFzaC1jYXNlZFxuICAgKiBzbyBhIHByb3BlcnR5IG5hbWVkICdmb29CYXInIGlzIHJlZmxlY3RlZCBhcyAnZm9vLWJhcicuXG4gICAqXG4gICAqICogYG5vdGlmeWA6IHtib29sZWFufSBzZW5kcyBhIG5vbi1idWJibGluZyBub3RpZmljYXRpb24gZXZlbnQgd2hlblxuICAgKiB0aGUgcHJvcGVydHkgY2hhbmdlcy4gRm9yIGV4YW1wbGUsIGEgcHJvcGVydHkgbmFtZWQgJ2Zvbycgc2VuZHMgYW5cbiAgICogZXZlbnQgbmFtZWQgJ2Zvby1jaGFuZ2VkJyB3aXRoIGBldmVudC5kZXRhaWxgIHNldCB0byB0aGUgdmFsdWUgb2ZcbiAgICogdGhlIHByb3BlcnR5LlxuICAgKlxuICAgKiAqIG9ic2VydmVyOiB7c3RyaW5nfSBuYW1lIG9mIGEgbWV0aG9kIHRoYXQgcnVucyB3aGVuIHRoZSBwcm9wZXJ0eVxuICAgKiBjaGFuZ2VzLiBUaGUgYXJndW1lbnRzIG9mIHRoZSBtZXRob2QgYXJlICh2YWx1ZSwgcHJldmlvdXNWYWx1ZSkuXG4gICAqXG4gICAqIE5vdGU6IFVzZXJzIG1heSB3YW50IGNvbnRyb2wgb3ZlciBtb2RpZnlpbmcgcHJvcGVydHlcbiAgICogZWZmZWN0cyB2aWEgc3ViY2xhc3NpbmcuIEZvciBleGFtcGxlLCBhIHVzZXIgbWlnaHQgd2FudCB0byBtYWtlIGFcbiAgICogcmVmbGVjdFRvQXR0cmlidXRlIHByb3BlcnR5IG5vdCBkbyBzbyBpbiBhIHN1YmNsYXNzLiBXZSd2ZSBjaG9zZW4gdG9cbiAgICogZGlzYWJsZSB0aGlzIGJlY2F1c2UgaXQgbGVhZHMgdG8gYWRkaXRpb25hbCBjb21wbGljYXRpb24uXG4gICAqIEZvciBleGFtcGxlLCBhIHJlYWRPbmx5IGVmZmVjdCBnZW5lcmF0ZXMgYSBzcGVjaWFsIHNldHRlci4gSWYgYSBzdWJjbGFzc1xuICAgKiBkaXNhYmxlcyB0aGUgZWZmZWN0LCB0aGUgc2V0dGVyIHdvdWxkIGZhaWwgdW5leHBlY3RlZGx5LlxuICAgKiBCYXNlZCBvbiBmZWVkYmFjaywgd2UgbWF5IHdhbnQgdG8gdHJ5IHRvIG1ha2UgZWZmZWN0cyBtb3JlIG1hbGxlYWJsZVxuICAgKiBhbmQvb3IgcHJvdmlkZSBhbiBhZHZhbmNlZCBhcGkgZm9yIG1hbmlwdWxhdGluZyB0aGVtLlxuICAgKlxuICAgKiBAcGFyYW0geyFQb2x5bWVyRWxlbWVudH0gcHJvdG8gRWxlbWVudCBjbGFzcyBwcm90b3R5cGUgdG8gYWRkIGFjY2Vzc29yc1xuICAgKiAgIGFuZCBlZmZlY3RzIHRvXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgdGhlIHByb3BlcnR5LlxuICAgKiBAcGFyYW0ge09iamVjdH0gaW5mbyBJbmZvIG9iamVjdCBmcm9tIHdoaWNoIHRvIGNyZWF0ZSBwcm9wZXJ0eSBlZmZlY3RzLlxuICAgKiBTdXBwb3J0ZWQga2V5czpcbiAgICogQHBhcmFtIHtPYmplY3R9IGFsbFByb3BzIEZsYXR0ZW5lZCBtYXAgb2YgYWxsIHByb3BlcnRpZXMgZGVmaW5lZCBpbiB0aGlzXG4gICAqICAgZWxlbWVudCAoaW5jbHVkaW5nIGluaGVyaXRlZCBwcm9wZXJ0aWVzKVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZnVuY3Rpb24gY3JlYXRlUHJvcGVydHlGcm9tQ29uZmlnKHByb3RvLCBuYW1lLCBpbmZvLCBhbGxQcm9wcykge1xuICAgIC8vIGNvbXB1dGVkIGZvcmNlcyByZWFkT25seS4uLlxuICAgIGlmIChpbmZvLmNvbXB1dGVkKSB7XG4gICAgICBpbmZvLnJlYWRPbmx5ID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gTm90ZSwgc2luY2UgYWxsIGNvbXB1dGVkIHByb3BlcnRpZXMgYXJlIHJlYWRPbmx5LCB0aGlzIHByZXZlbnRzXG4gICAgLy8gYWRkaW5nIGFkZGl0aW9uYWwgY29tcHV0ZWQgcHJvcGVydHkgZWZmZWN0cyAod2hpY2ggbGVhZHMgdG8gYSBjb25mdXNpbmdcbiAgICAvLyBzZXR1cCB3aGVyZSBtdWx0aXBsZSB0cmlnZ2VycyBmb3Igc2V0dGluZyBhIHByb3BlcnR5KVxuICAgIC8vIFdoaWxlIHdlIGRvIGhhdmUgYGhhc0NvbXB1dGVkRWZmZWN0YCB0aGlzIGlzIHNldCBvbiB0aGUgcHJvcGVydHknc1xuICAgIC8vIGRlcGVuZGVuY2llcyByYXRoZXIgdGhhbiBpdHNlbGYuXG4gICAgaWYgKGluZm8uY29tcHV0ZWQpIHtcbiAgICAgIGlmIChwcm90by5faGFzUmVhZE9ubHlFZmZlY3QobmFtZSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBDYW5ub3QgcmVkZWZpbmUgY29tcHV0ZWQgcHJvcGVydHkgJyR7bmFtZX0nLmApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvdG8uX2NyZWF0ZUNvbXB1dGVkUHJvcGVydHkobmFtZSwgaW5mby5jb21wdXRlZCwgYWxsUHJvcHMpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaW5mby5yZWFkT25seSAmJiAhcHJvdG8uX2hhc1JlYWRPbmx5RWZmZWN0KG5hbWUpKSB7XG4gICAgICBwcm90by5fY3JlYXRlUmVhZE9ubHlQcm9wZXJ0eShuYW1lLCAhaW5mby5jb21wdXRlZCk7XG4gICAgfSBlbHNlIGlmIChpbmZvLnJlYWRPbmx5ID09PSBmYWxzZSAmJiBwcm90by5faGFzUmVhZE9ubHlFZmZlY3QobmFtZSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihgQ2Fubm90IG1ha2UgcmVhZE9ubHkgcHJvcGVydHkgJyR7bmFtZX0nIG5vbi1yZWFkT25seS5gKTtcbiAgICB9XG4gICAgaWYgKGluZm8ucmVmbGVjdFRvQXR0cmlidXRlICYmICFwcm90by5faGFzUmVmbGVjdEVmZmVjdChuYW1lKSkge1xuICAgICAgcHJvdG8uX2NyZWF0ZVJlZmxlY3RlZFByb3BlcnR5KG5hbWUpO1xuICAgIH0gZWxzZSBpZiAoaW5mby5yZWZsZWN0VG9BdHRyaWJ1dGUgPT09IGZhbHNlICYmIHByb3RvLl9oYXNSZWZsZWN0RWZmZWN0KG5hbWUpKSB7XG4gICAgICBjb25zb2xlLndhcm4oYENhbm5vdCBtYWtlIHJlZmxlY3RlZCBwcm9wZXJ0eSAnJHtuYW1lfScgbm9uLXJlZmxlY3RlZC5gKTtcbiAgICB9XG4gICAgaWYgKGluZm8ubm90aWZ5ICYmICFwcm90by5faGFzTm90aWZ5RWZmZWN0KG5hbWUpKSB7XG4gICAgICBwcm90by5fY3JlYXRlTm90aWZ5aW5nUHJvcGVydHkobmFtZSk7XG4gICAgfSBlbHNlIGlmIChpbmZvLm5vdGlmeSA9PT0gZmFsc2UgJiYgcHJvdG8uX2hhc05vdGlmeUVmZmVjdChuYW1lKSkge1xuICAgICAgY29uc29sZS53YXJuKGBDYW5ub3QgbWFrZSBub3RpZnkgcHJvcGVydHkgJyR7bmFtZX0nIG5vbi1ub3RpZnkuYCk7XG4gICAgfVxuICAgIC8vIGFsd2F5cyBhZGQgb2JzZXJ2ZXJcbiAgICBpZiAoaW5mby5vYnNlcnZlcikge1xuICAgICAgcHJvdG8uX2NyZWF0ZVByb3BlcnR5T2JzZXJ2ZXIobmFtZSwgaW5mby5vYnNlcnZlciwgYWxsUHJvcHNbaW5mby5vYnNlcnZlcl0pO1xuICAgIH1cbiAgICAvLyBhbHdheXMgY3JlYXRlIHRoZSBtYXBwaW5nIGZyb20gYXR0cmlidXRlIGJhY2sgdG8gcHJvcGVydHkgZm9yIGRlc2VyaWFsaXphdGlvbi5cbiAgICBwcm90by5fYWRkUHJvcGVydHlUb0F0dHJpYnV0ZU1hcChuYW1lKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9jZXNzIGFsbCBzdHlsZSBlbGVtZW50cyBpbiB0aGUgZWxlbWVudCB0ZW1wbGF0ZS4gU3R5bGVzIHdpdGggdGhlXG4gICAqIGBpbmNsdWRlYCBhdHRyaWJ1dGUgYXJlIHByb2Nlc3NlZCBzdWNoIHRoYXQgYW55IHN0eWxlcyBpblxuICAgKiB0aGUgYXNzb2NpYXRlZCBcInN0eWxlIG1vZHVsZXNcIiBhcmUgaW5jbHVkZWQgaW4gdGhlIGVsZW1lbnQgdGVtcGxhdGUuXG4gICAqIEBwYXJhbSB7UG9seW1lckVsZW1lbnRDb25zdHJ1Y3Rvcn0ga2xhc3MgRWxlbWVudCBjbGFzc1xuICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZSBUZW1wbGF0ZSB0byBwcm9jZXNzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBpcyBOYW1lIG9mIGVsZW1lbnRcbiAgICogQHBhcmFtIHtzdHJpbmd9IGJhc2VVUkkgQmFzZSBVUkkgZm9yIGVsZW1lbnRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZ1bmN0aW9uIHByb2Nlc3NFbGVtZW50U3R5bGVzKGtsYXNzLCB0ZW1wbGF0ZSwgaXMsIGJhc2VVUkkpIHtcbiAgICBpZiAoIWJ1aWx0Q1NTKSB7XG4gICAgICBjb25zdCB0ZW1wbGF0ZVN0eWxlcyA9IHRlbXBsYXRlLmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKTtcbiAgICAgIGNvbnN0IHN0eWxlc1dpdGhJbXBvcnRzID0gc3R5bGVzRnJvbVRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgIC8vIGluc2VydCBzdHlsZXMgZnJvbSA8bGluayByZWw9XCJpbXBvcnRcIiB0eXBlPVwiY3NzXCI+IGF0IHRoZSB0b3Agb2YgdGhlIHRlbXBsYXRlXG4gICAgICBjb25zdCBsaW5rZWRTdHlsZXMgPSBzdHlsZXNGcm9tTW9kdWxlSW1wb3J0cyhpcyk7XG4gICAgICBjb25zdCBmaXJzdFRlbXBsYXRlQ2hpbGQgPSB0ZW1wbGF0ZS5jb250ZW50LmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgZm9yIChsZXQgaWR4ID0gMDsgaWR4IDwgbGlua2VkU3R5bGVzLmxlbmd0aDsgaWR4KyspIHtcbiAgICAgICAgbGV0IHMgPSBsaW5rZWRTdHlsZXNbaWR4XTtcbiAgICAgICAgcy50ZXh0Q29udGVudCA9IGtsYXNzLl9wcm9jZXNzU3R5bGVUZXh0KHMudGV4dENvbnRlbnQsIGJhc2VVUkkpO1xuICAgICAgICB0ZW1wbGF0ZS5jb250ZW50Lmluc2VydEJlZm9yZShzLCBmaXJzdFRlbXBsYXRlQ2hpbGQpO1xuICAgICAgfVxuICAgICAgLy8ga2VlcCB0cmFjayBvZiB0aGUgbGFzdCBcImNvbmNyZXRlXCIgc3R5bGUgaW4gdGhlIHRlbXBsYXRlIHdlIGhhdmUgZW5jb3VudGVyZWRcbiAgICAgIGxldCB0ZW1wbGF0ZVN0eWxlSW5kZXggPSAwO1xuICAgICAgLy8gZW5zdXJlIGFsbCBnYXRoZXJlZCBzdHlsZXMgYXJlIGFjdHVhbGx5IGluIHRoaXMgdGVtcGxhdGUuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlc1dpdGhJbXBvcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBzID0gc3R5bGVzV2l0aEltcG9ydHNbaV07XG4gICAgICAgIGxldCB0ZW1wbGF0ZVN0eWxlID0gdGVtcGxhdGVTdHlsZXNbdGVtcGxhdGVTdHlsZUluZGV4XTtcbiAgICAgICAgLy8gaWYgdGhlIHN0eWxlIGlzIG5vdCBpbiB0aGlzIHRlbXBsYXRlLCBpdCdzIGJlZW4gXCJpbmNsdWRlZFwiIGFuZFxuICAgICAgICAvLyB3ZSBwdXQgYSBjbG9uZSBvZiBpdCBpbiB0aGUgdGVtcGxhdGUgYmVmb3JlIHRoZSBzdHlsZSB0aGF0IGluY2x1ZGVkIGl0XG4gICAgICAgIGlmICh0ZW1wbGF0ZVN0eWxlICE9PSBzKSB7XG4gICAgICAgICAgcyA9IHMuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgIHRlbXBsYXRlU3R5bGUucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUocywgdGVtcGxhdGVTdHlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGVtcGxhdGVTdHlsZUluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgcy50ZXh0Q29udGVudCA9IGtsYXNzLl9wcm9jZXNzU3R5bGVUZXh0KHMudGV4dENvbnRlbnQsIGJhc2VVUkkpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAod2luZG93LlNoYWR5Q1NTKSB7XG4gICAgICB3aW5kb3cuU2hhZHlDU1MucHJlcGFyZVRlbXBsYXRlKHRlbXBsYXRlLCBpcyk7XG4gICAgfVxuICAgIC8vIFN1cHBvcnQgZm9yIGBhZG9wdGVkU3R5bGVzaGVldHNgIHJlbGllcyBvbiB1c2luZyBuYXRpdmUgU2hhZG93IERPTVxuICAgIC8vIGFuZCBidWlsdCBDU1MuIEJ1aWx0IENTUyBpcyByZXF1aXJlZCBiZWNhdXNlIHJ1bnRpbWUgdHJhbnNmb3JtYXRpb24gb2ZcbiAgICAvLyBgQGFwcGx5YCBpcyBub3Qgc3VwcG9ydGVkLiBUaGlzIGlzIGJlY2F1c2UgU2hhZHlDU1MgcmVsaWVzIG9uIGJlaW5nIGFibGVcbiAgICAvLyB0byB1cGRhdGUgYSBgc3R5bGVgIGVsZW1lbnQgaW4gdGhlIGVsZW1lbnQgdGVtcGxhdGUgYW5kIHRoaXMgaXNcbiAgICAvLyByZW1vdmVkIHdoZW4gdXNpbmcgYGFkb3B0ZWRTdHlsZVNoZWV0c2AuXG4gICAgLy8gTm90ZSwgaXQgd291bGQgYmUgbW9yZSBlZmZpY2llbnQgdG8gYWxsb3cgc3R5bGUgaW5jbHVkZXMgdG8gYmVjb21lXG4gICAgLy8gc2VwYXJhdGUgc3R5bGVzaGVldHM7IGhvd2V2ZXIsIGJlY2F1c2Ugb2YgYEBhcHBseWAgdGhlc2UgYXJlXG4gICAgLy8gcG90ZW50aWFsbHkgbm90IHNoYXJlYWJsZSBhbmQgc2hhcmluZyB0aGUgb25lcyB0aGF0IGNvdWxkIGJlIHNoYXJlZFxuICAgIC8vIHdvdWxkIHJlcXVpcmUgc29tZSBjb29yZGluYXRpb24uIFRvIGtlZXAgaXQgc2ltcGxlLCBhbGwgdGhlIGluY2x1ZGVzXG4gICAgLy8gYW5kIHN0eWxlcyBhcmUgY29sbGFwc2VkIGludG8gYSBzaW5nbGUgc2hhcmVhYmxlIHN0eWxlc2hlZXQuXG4gICAgaWYgKHVzZUFkb3B0ZWRTdHlsZVNoZWV0c1dpdGhCdWlsdENTUyAmJiBidWlsdENTUyAmJlxuICAgICAgICBzdXBwb3J0c0Fkb3B0aW5nU3R5bGVTaGVldHMpIHtcbiAgICAgIC8vIFJlbW92ZSBzdHlsZXMgaW4gdGVtcGxhdGUgYW5kIG1ha2UgYSBzaGFyZWFibGUgc3R5bGVzaGVldFxuICAgICAgY29uc3Qgc3R5bGVzID0gdGVtcGxhdGUuY29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdHlsZScpO1xuICAgICAgaWYgKHN0eWxlcykge1xuICAgICAgICBsZXQgY3NzID0gJyc7XG4gICAgICAgIEFycmF5LmZyb20oc3R5bGVzKS5mb3JFYWNoKHMgPT4ge1xuICAgICAgICAgIGNzcyArPSBzLnRleHRDb250ZW50O1xuICAgICAgICAgIHMucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGtsYXNzLl9zdHlsZVNoZWV0ID0gbmV3IENTU1N0eWxlU2hlZXQoKTtcbiAgICAgICAga2xhc3MuX3N0eWxlU2hlZXQucmVwbGFjZVN5bmMoY3NzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTG9vayB1cCB0ZW1wbGF0ZSBmcm9tIGRvbS1tb2R1bGUgZm9yIGVsZW1lbnRcbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGlzIEVsZW1lbnQgbmFtZSB0byBsb29rIHVwXG4gICAqIEByZXR1cm4gez9IVE1MVGVtcGxhdGVFbGVtZW50fHVuZGVmaW5lZH0gVGVtcGxhdGUgZm91bmQgaW4gZG9tIG1vZHVsZSwgb3JcbiAgICogICB1bmRlZmluZWQgaWYgbm90IGZvdW5kXG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIGZ1bmN0aW9uIGdldFRlbXBsYXRlRnJvbURvbU1vZHVsZShpcykge1xuICAgIGxldCB0ZW1wbGF0ZSA9IG51bGw7XG4gICAgLy8gVW5kZXIgc3RyaWN0VGVtcGxhdGVQb2xpY3kgaW4gMy54KywgZG9tLW1vZHVsZSBsb29rdXAgaXMgb25seSBhbGxvd2VkXG4gICAgLy8gd2hlbiBvcHRlZC1pbiB2aWEgYWxsb3dUZW1wbGF0ZUZyb21Eb21Nb2R1bGVcbiAgICBpZiAoaXMgJiYgKCFzdHJpY3RUZW1wbGF0ZVBvbGljeSB8fCBhbGxvd1RlbXBsYXRlRnJvbURvbU1vZHVsZSkpIHtcbiAgICAgIHRlbXBsYXRlID0gLyoqIEB0eXBlIHs/SFRNTFRlbXBsYXRlRWxlbWVudH0gKi8gKFxuICAgICAgICAgIERvbU1vZHVsZS5pbXBvcnQoaXMsICd0ZW1wbGF0ZScpKTtcbiAgICAgIC8vIFVuZGVyIHN0cmljdFRlbXBsYXRlUG9saWN5LCByZXF1aXJlIGFueSBlbGVtZW50IHdpdGggYW4gYGlzYFxuICAgICAgLy8gc3BlY2lmaWVkIHRvIGhhdmUgYSBkb20tbW9kdWxlXG4gICAgICBpZiAoc3RyaWN0VGVtcGxhdGVQb2xpY3kgJiYgIXRlbXBsYXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgc3RyaWN0VGVtcGxhdGVQb2xpY3k6IGV4cGVjdGluZyBkb20tbW9kdWxlIG9yIG51bGwgdGVtcGxhdGUgZm9yICR7aXN9YCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAdW5yZXN0cmljdGVkXG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0VsZW1lbnRNaXhpbn1cbiAgICogQGV4dGVuZHMge3BvbHltZXJFbGVtZW50QmFzZX1cbiAgICovXG4gIGNsYXNzIFBvbHltZXJFbGVtZW50IGV4dGVuZHMgcG9seW1lckVsZW1lbnRCYXNlIHtcblxuICAgIC8qKlxuICAgICAqIEN1cnJlbnQgUG9seW1lciB2ZXJzaW9uIGluIFNlbXZlciBub3RhdGlvbi5cbiAgICAgKiBAdHlwZSB7c3RyaW5nfSBTZW12ZXIgbm90YXRpb24gb2YgdGhlIGN1cnJlbnQgdmVyc2lvbiBvZiBQb2x5bWVyLlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGdldCBwb2x5bWVyRWxlbWVudFZlcnNpb24oKSB7XG4gICAgICByZXR1cm4gdmVyc2lvbjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBvZiBQcm9wZXJ0aWVzTWl4aW4gX2ZpbmFsaXplQ2xhc3MgdG8gY3JlYXRlIG9ic2VydmVycyBhbmRcbiAgICAgKiBmaW5kIHRoZSB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBJbnRlcmZhY2VzIGluIGNsb3N1cmUgZG8gbm90IGluaGVyaXQgc3RhdGljcywgYnV0IGNsYXNzZXMgZG9cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfZmluYWxpemVDbGFzcygpIHtcbiAgICAgIC8vIFRPRE8oaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8zMjQwKTpcbiAgICAgIC8vICAgICBDaGFuZ2UgYmFjayB0byBqdXN0IHN1cGVyLm1ldGhvZENhbGwoKVxuICAgICAgcG9seW1lckVsZW1lbnRCYXNlLl9maW5hbGl6ZUNsYXNzLmNhbGwodGhpcyk7XG4gICAgICBjb25zdCBvYnNlcnZlcnMgPSBvd25PYnNlcnZlcnModGhpcyk7XG4gICAgICBpZiAob2JzZXJ2ZXJzKSB7XG4gICAgICAgIHRoaXMuY3JlYXRlT2JzZXJ2ZXJzKG9ic2VydmVycywgdGhpcy5fcHJvcGVydGllcyk7XG4gICAgICB9XG4gICAgICB0aGlzLl9wcmVwYXJlVGVtcGxhdGUoKTtcbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBzdGF0aWMgX3ByZXBhcmVUZW1wbGF0ZSgpIHtcbiAgICAgIC8vIG5vdGU6IGNyZWF0ZSBcIndvcmtpbmdcIiB0ZW1wbGF0ZSB0aGF0IGlzIGZpbmFsaXplZCBhdCBpbnN0YW5jZSB0aW1lXG4gICAgICBsZXQgdGVtcGxhdGUgPSAvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9ICovICh0aGlzKS50ZW1wbGF0ZTtcbiAgICAgIGlmICh0ZW1wbGF0ZSkge1xuICAgICAgICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3RlbXBsYXRlIGdldHRlciBtdXN0IHJldHVybiBIVE1MVGVtcGxhdGVFbGVtZW50Jyk7XG4gICAgICAgICAgdGVtcGxhdGUgPSBudWxsO1xuICAgICAgICB9IGVsc2UgaWYgKCFsZWdhY3lPcHRpbWl6YXRpb25zKSB7XG4gICAgICAgICAgdGVtcGxhdGUgPSB0ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqIEBvdmVycmlkZSAqL1xuICAgICAgdGhpcy5wcm90b3R5cGUuX3RlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGUgb2YgUHJvcGVydGllc0NoYW5nZWQgY3JlYXRlUHJvcGVydGllcyB0byBjcmVhdGUgYWNjZXNzb3JzXG4gICAgICogYW5kIHByb3BlcnR5IGVmZmVjdHMgZm9yIGFsbCBvZiB0aGUgcHJvcGVydGllcy5cbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IHByb3BzIC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVQcm9wZXJ0aWVzKHByb3BzKSB7XG4gICAgICBmb3IgKGxldCBwIGluIHByb3BzKSB7XG4gICAgICAgIGNyZWF0ZVByb3BlcnR5RnJvbUNvbmZpZyhcbiAgICAgICAgICAgIC8qKiBAdHlwZSB7P30gKi8gKHRoaXMucHJvdG90eXBlKSwgcCwgcHJvcHNbcF0sIHByb3BzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIG9ic2VydmVycyBmb3IgdGhlIGdpdmVuIGBvYnNlcnZlcnNgIGFycmF5LlxuICAgICAqIExldmVyYWdlcyBgUHJvcGVydHlFZmZlY3RzYCB0byBjcmVhdGUgb2JzZXJ2ZXJzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYnNlcnZlcnMgQXJyYXkgb2Ygb2JzZXJ2ZXIgZGVzY3JpcHRvcnMgZm9yXG4gICAgICogICB0aGlzIGNsYXNzXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGR5bmFtaWNGbnMgT2JqZWN0IGNvbnRhaW5pbmcga2V5cyBmb3IgYW55IHByb3BlcnRpZXNcbiAgICAgKiAgIHRoYXQgYXJlIGZ1bmN0aW9ucyBhbmQgc2hvdWxkIHRyaWdnZXIgdGhlIGVmZmVjdCB3aGVuIHRoZSBmdW5jdGlvblxuICAgICAqICAgcmVmZXJlbmNlIGlzIGNoYW5nZWRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBjcmVhdGVPYnNlcnZlcnMob2JzZXJ2ZXJzLCBkeW5hbWljRm5zKSB7XG4gICAgICBjb25zdCBwcm90byA9IHRoaXMucHJvdG90eXBlO1xuICAgICAgZm9yIChsZXQgaT0wOyBpIDwgb2JzZXJ2ZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHByb3RvLl9jcmVhdGVNZXRob2RPYnNlcnZlcihvYnNlcnZlcnNbaV0sIGR5bmFtaWNGbnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHRlbXBsYXRlIHRoYXQgd2lsbCBiZSBzdGFtcGVkIGludG8gdGhpcyBlbGVtZW50J3Mgc2hhZG93IHJvb3QuXG4gICAgICpcbiAgICAgKiBJZiBhIGBzdGF0aWMgZ2V0IGlzKClgIGdldHRlciBpcyBkZWZpbmVkLCB0aGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiB3aWxsXG4gICAgICogcmV0dXJuIHRoZSBmaXJzdCBgPHRlbXBsYXRlPmAgaW4gYSBgZG9tLW1vZHVsZWAgd2hvc2UgYGlkYCBtYXRjaGVzIHRoaXNcbiAgICAgKiBlbGVtZW50J3MgYGlzYCAobm90ZSB0aGF0IGEgYF90ZW1wbGF0ZWAgcHJvcGVydHkgb24gdGhlIGNsYXNzIHByb3RvdHlwZVxuICAgICAqIHRha2VzIHByZWNlZGVuY2Ugb3ZlciB0aGUgYGRvbS1tb2R1bGVgIHRlbXBsYXRlLCB0byBtYWludGFpbiBsZWdhY3lcbiAgICAgKiBlbGVtZW50IHNlbWFudGljczsgYSBzdWJjbGFzcyB3aWxsIHN1YnNlcXVlbnRseSBmYWxsIGJhY2sgdG8gaXRzIHN1cGVyXG4gICAgICogY2xhc3MgdGVtcGxhdGUgaWYgbmVpdGhlciBhIGBwcm90b3R5cGUuX3RlbXBsYXRlYCBvciBhIGBkb20tbW9kdWxlYCBmb3JcbiAgICAgKiB0aGUgY2xhc3MncyBgaXNgIHdhcyBmb3VuZCkuXG4gICAgICpcbiAgICAgKiBVc2VycyBtYXkgb3ZlcnJpZGUgdGhpcyBnZXR0ZXIgdG8gcmV0dXJuIGFuIGFyYml0cmFyeSB0ZW1wbGF0ZVxuICAgICAqIChpbiB3aGljaCBjYXNlIHRoZSBgaXNgIGdldHRlciBpcyB1bm5lY2Vzc2FyeSkuIFRoZSB0ZW1wbGF0ZSByZXR1cm5lZFxuICAgICAqIG11c3QgYmUgYW4gYEhUTUxUZW1wbGF0ZUVsZW1lbnRgLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHdoZW4gc3ViY2xhc3NpbmcsIGlmIHRoZSBzdXBlciBjbGFzcyBvdmVycm9kZSB0aGUgZGVmYXVsdFxuICAgICAqIGltcGxlbWVudGF0aW9uIGFuZCB0aGUgc3ViY2xhc3Mgd291bGQgbGlrZSB0byBwcm92aWRlIGFuIGFsdGVybmF0ZVxuICAgICAqIHRlbXBsYXRlIHZpYSBhIGBkb20tbW9kdWxlYCwgaXQgc2hvdWxkIG92ZXJyaWRlIHRoaXMgZ2V0dGVyIGFuZFxuICAgICAqIHJldHVybiBgRG9tTW9kdWxlLmltcG9ydCh0aGlzLmlzLCAndGVtcGxhdGUnKWAuXG4gICAgICpcbiAgICAgKiBJZiBhIHN1YmNsYXNzIHdvdWxkIGxpa2UgdG8gbW9kaWZ5IHRoZSBzdXBlciBjbGFzcyB0ZW1wbGF0ZSwgaXQgc2hvdWxkXG4gICAgICogY2xvbmUgaXQgcmF0aGVyIHRoYW4gbW9kaWZ5IGl0IGluIHBsYWNlLiAgSWYgdGhlIGdldHRlciBkb2VzIGV4cGVuc2l2ZVxuICAgICAqIHdvcmsgc3VjaCBhcyBjbG9uaW5nL21vZGlmeWluZyBhIHRlbXBsYXRlLCBpdCBzaG91bGQgbWVtb2l6ZSB0aGVcbiAgICAgKiB0ZW1wbGF0ZSBmb3IgbWF4aW11bSBwZXJmb3JtYW5jZTpcbiAgICAgKlxuICAgICAqICAgbGV0IG1lbW9pemVkVGVtcGxhdGU7XG4gICAgICogICBjbGFzcyBNeVN1YkNsYXNzIGV4dGVuZHMgTXlTdXBlckNsYXNzIHtcbiAgICAgKiAgICAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHtcbiAgICAgKiAgICAgICBpZiAoIW1lbW9pemVkVGVtcGxhdGUpIHtcbiAgICAgKiAgICAgICAgIG1lbW9pemVkVGVtcGxhdGUgPSBzdXBlci50ZW1wbGF0ZS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICogICAgICAgICBsZXQgc3ViQ29udGVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAqICAgICAgICAgc3ViQ29udGVudC50ZXh0Q29udGVudCA9ICdUaGlzIGNhbWUgZnJvbSBNeVN1YkNsYXNzJztcbiAgICAgKiAgICAgICAgIG1lbW9pemVkVGVtcGxhdGUuY29udGVudC5hcHBlbmRDaGlsZChzdWJDb250ZW50KTtcbiAgICAgKiAgICAgICB9XG4gICAgICogICAgICAgcmV0dXJuIG1lbW9pemVkVGVtcGxhdGU7XG4gICAgICogICAgIH1cbiAgICAgKiAgIH1cbiAgICAgKlxuICAgICAqIEByZXR1cm4geyFIVE1MVGVtcGxhdGVFbGVtZW50fHN0cmluZ30gVGVtcGxhdGUgdG8gYmUgc3RhbXBlZFxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHtcbiAgICAgIC8vIEV4cGxhbmF0aW9uIG9mIHRlbXBsYXRlLXJlbGF0ZWQgcHJvcGVydGllczpcbiAgICAgIC8vIC0gY29uc3RydWN0b3IudGVtcGxhdGUgKHRoaXMgZ2V0dGVyKTogdGhlIHRlbXBsYXRlIGZvciB0aGUgY2xhc3MuXG4gICAgICAvLyAgICAgVGhpcyBjYW4gY29tZSBmcm9tIHRoZSBwcm90b3R5cGUgKGZvciBsZWdhY3kgZWxlbWVudHMpLCBmcm9tIGFcbiAgICAgIC8vICAgICBkb20tbW9kdWxlLCBvciBmcm9tIHRoZSBzdXBlciBjbGFzcydzIHRlbXBsYXRlIChvciBjYW4gYmUgb3ZlcnJpZGRlblxuICAgICAgLy8gICAgIGFsdG9nZXRoZXIgYnkgdGhlIHVzZXIpXG4gICAgICAvLyAtIGNvbnN0cnVjdG9yLl90ZW1wbGF0ZTogbWVtb2l6ZWQgdmVyc2lvbiBvZiBjb25zdHJ1Y3Rvci50ZW1wbGF0ZVxuICAgICAgLy8gLSBwcm90b3R5cGUuX3RlbXBsYXRlOiB3b3JraW5nIHRlbXBsYXRlIGZvciB0aGUgZWxlbWVudCwgd2hpY2ggd2lsbCBiZVxuICAgICAgLy8gICAgIHBhcnNlZCBhbmQgbW9kaWZpZWQgaW4gcGxhY2UuIEl0IGlzIGEgY2xvbmVkIHZlcnNpb24gb2ZcbiAgICAgIC8vICAgICBjb25zdHJ1Y3Rvci50ZW1wbGF0ZSwgc2F2ZWQgaW4gX2ZpbmFsaXplQ2xhc3MoKS4gTm90ZSB0aGF0IGJlZm9yZVxuICAgICAgLy8gICAgIHRoaXMgZ2V0dGVyIGlzIGNhbGxlZCwgZm9yIGxlZ2FjeSBlbGVtZW50cyB0aGlzIGNvdWxkIGJlIGZyb20gYVxuICAgICAgLy8gICAgIF90ZW1wbGF0ZSBmaWVsZCBvbiB0aGUgaW5mbyBvYmplY3QgcGFzc2VkIHRvIFBvbHltZXIoKSwgYSBiZWhhdmlvcixcbiAgICAgIC8vICAgICBvciBzZXQgaW4gcmVnaXN0ZXJlZCgpOyBvbmNlIHRoZSBzdGF0aWMgZ2V0dGVyIHJ1bnMsIGEgY2xvbmUgb2YgaXRcbiAgICAgIC8vICAgICB3aWxsIG92ZXJ3cml0ZSBpdCBvbiB0aGUgcHJvdG90eXBlIGFzIHRoZSB3b3JraW5nIHRlbXBsYXRlLlxuICAgICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ190ZW1wbGF0ZScsIHRoaXMpKSkge1xuICAgICAgICBjb25zdCBwcm90b1RlbXBsYXRlID0gdGhpcy5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkoXG4gICAgICAgICAgSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX3RlbXBsYXRlJywgdGhpcy5wcm90b3R5cGUpKSA/XG4gICAgICAgICAgdGhpcy5wcm90b3R5cGUuX3RlbXBsYXRlIDogdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9XG4gICAgICAgICAgLy8gSWYgdXNlciBoYXMgcHV0IHRlbXBsYXRlIG9uIHByb3RvdHlwZSAoZS5nLiBpbiBsZWdhY3kgdmlhIHJlZ2lzdGVyZWRcbiAgICAgICAgICAvLyBjYWxsYmFjayBvciBpbmZvIG9iamVjdCksIHByZWZlciB0aGF0IGZpcnN0LiBOb3RlIHRoYXQgYG51bGxgIGlzXG4gICAgICAgICAgLy8gdXNlZCBhcyBhIHNlbnRpbmVsIHRvIGluZGljYXRlIFwibm8gdGVtcGxhdGVcIiBhbmQgY2FuIGJlIHVzZWQgdG9cbiAgICAgICAgICAvLyBvdmVycmlkZSBhIHN1cGVyIHRlbXBsYXRlLCB3aGVyZWFzIGB1bmRlZmluZWRgIGlzIHVzZWQgYXMgYVxuICAgICAgICAgIC8vIHNlbnRpbmVsIHRvIG1lYW4gXCJmYWxsLWJhY2sgdG8gZGVmYXVsdCB0ZW1wbGF0ZSBsb29rdXBcIiB2aWFcbiAgICAgICAgICAvLyBkb20tbW9kdWxlIGFuZC9vciBzdXBlci50ZW1wbGF0ZS5cbiAgICAgICAgICBwcm90b1RlbXBsYXRlICE9PSB1bmRlZmluZWQgPyBwcm90b1RlbXBsYXRlIDpcbiAgICAgICAgICAvLyBMb29rIGluIGRvbS1tb2R1bGUgYXNzb2NpYXRlZCB3aXRoIHRoaXMgZWxlbWVudCdzIGlzXG4gICAgICAgICAgKCh0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2lzJywgdGhpcykpICYmXG4gICAgICAgICAgKGdldFRlbXBsYXRlRnJvbURvbU1vZHVsZSgvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9Ki8gKHRoaXMpLmlzKSkpIHx8XG4gICAgICAgICAgLy8gTmV4dCBsb29rIGZvciBzdXBlcmNsYXNzIHRlbXBsYXRlIChjYWxsIHRoZSBzdXBlciBpbXBsIHRoaXNcbiAgICAgICAgICAvLyB3YXkgc28gdGhhdCBgdGhpc2AgcG9pbnRzIHRvIHRoZSBzdXBlcmNsYXNzKVxuICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZigvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9Ki8gKHRoaXMpLnByb3RvdHlwZSkuY29uc3RydWN0b3IudGVtcGxhdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX3RlbXBsYXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fHN0cmluZ30gdmFsdWUgVGVtcGxhdGUgdG8gc2V0LlxuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIHNldCB0ZW1wbGF0ZSh2YWx1ZSkge1xuICAgICAgdGhpcy5fdGVtcGxhdGUgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQYXRoIG1hdGNoaW5nIHRoZSB1cmwgZnJvbSB3aGljaCB0aGUgZWxlbWVudCB3YXMgaW1wb3J0ZWQuXG4gICAgICpcbiAgICAgKiBUaGlzIHBhdGggaXMgdXNlZCB0byByZXNvbHZlIHVybCdzIGluIHRlbXBsYXRlIHN0eWxlIGNzc1RleHQuXG4gICAgICogVGhlIGBpbXBvcnRQYXRoYCBwcm9wZXJ0eSBpcyBhbHNvIHNldCBvbiBlbGVtZW50IGluc3RhbmNlcyBhbmQgY2FuIGJlXG4gICAgICogdXNlZCB0byBjcmVhdGUgYmluZGluZ3MgcmVsYXRpdmUgdG8gdGhlIGltcG9ydCBwYXRoLlxuICAgICAqXG4gICAgICogRm9yIGVsZW1lbnRzIGRlZmluZWQgaW4gRVMgbW9kdWxlcywgdXNlcnMgc2hvdWxkIGltcGxlbWVudFxuICAgICAqIGBzdGF0aWMgZ2V0IGltcG9ydE1ldGEoKSB7IHJldHVybiBpbXBvcnQubWV0YTsgfWAsIGFuZCB0aGUgZGVmYXVsdFxuICAgICAqIGltcGxlbWVudGF0aW9uIG9mIGBpbXBvcnRQYXRoYCB3aWxsICByZXR1cm4gYGltcG9ydC5tZXRhLnVybGAncyBwYXRoLlxuICAgICAqIEZvciBlbGVtZW50cyBkZWZpbmVkIGluIEhUTUwgaW1wb3J0cywgdGhpcyBnZXR0ZXIgd2lsbCByZXR1cm4gdGhlIHBhdGhcbiAgICAgKiB0byB0aGUgZG9jdW1lbnQgY29udGFpbmluZyBhIGBkb20tbW9kdWxlYCBlbGVtZW50IG1hdGNoaW5nIHRoaXNcbiAgICAgKiBlbGVtZW50J3Mgc3RhdGljIGBpc2AgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBOb3RlLCB0aGlzIHBhdGggc2hvdWxkIGNvbnRhaW4gYSB0cmFpbGluZyBgL2AuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFRoZSBpbXBvcnQgcGF0aCBmb3IgdGhpcyBlbGVtZW50IGNsYXNzXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc31cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBnZXQgaW1wb3J0UGF0aCgpIHtcbiAgICAgIGlmICghdGhpcy5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfaW1wb3J0UGF0aCcsIHRoaXMpKSkge1xuICAgICAgICBjb25zdCBtZXRhID0gdGhpcy5pbXBvcnRNZXRhO1xuICAgICAgICBpZiAobWV0YSkge1xuICAgICAgICAgIHRoaXMuX2ltcG9ydFBhdGggPSBwYXRoRnJvbVVybChtZXRhLnVybCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3QgbW9kdWxlID0gRG9tTW9kdWxlLmltcG9ydCgvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9ICovICh0aGlzKS5pcyk7XG4gICAgICAgICAgdGhpcy5faW1wb3J0UGF0aCA9IChtb2R1bGUgJiYgbW9kdWxlLmFzc2V0cGF0aCkgfHxcbiAgICAgICAgICAgIE9iamVjdC5nZXRQcm90b3R5cGVPZigvKiogQHR5cGUge1BvbHltZXJFbGVtZW50Q29uc3RydWN0b3J9Ki8gKHRoaXMpLnByb3RvdHlwZSkuY29uc3RydWN0b3IuaW1wb3J0UGF0aDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuX2ltcG9ydFBhdGg7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgLyoqIEB0eXBlIHtIVE1MVGVtcGxhdGVFbGVtZW50fSAqL1xuICAgICAgdGhpcy5fdGVtcGxhdGU7XG4gICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgIHRoaXMuX2ltcG9ydFBhdGg7XG4gICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgIHRoaXMucm9vdFBhdGg7XG4gICAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICAgIHRoaXMuaW1wb3J0UGF0aDtcbiAgICAgIC8qKiBAdHlwZSB7U3RhbXBlZFRlbXBsYXRlIHwgSFRNTEVsZW1lbnQgfCBTaGFkb3dSb290fSAqL1xuICAgICAgdGhpcy5yb290O1xuICAgICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIUVsZW1lbnQ+fSAqL1xuICAgICAgdGhpcy4kO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyB0aGUgZGVmYXVsdCBgUHJvcGVydHlBY2Nlc3NvcnNgIHRvIGVuc3VyZSBjbGFzc1xuICAgICAqIG1ldGFwcm9ncmFtbWluZyByZWxhdGVkIHRvIHByb3BlcnR5IGFjY2Vzc29ycyBhbmQgZWZmZWN0cyBoYXNcbiAgICAgKiBjb21wbGV0ZWQgKGNhbGxzIGBmaW5hbGl6ZWApLlxuICAgICAqXG4gICAgICogSXQgYWxzbyBpbml0aWFsaXplcyBhbnkgcHJvcGVydHkgZGVmYXVsdHMgcHJvdmlkZWQgdmlhIGB2YWx1ZWAgaW5cbiAgICAgKiBgcHJvcGVydGllc2AgbWV0YWRhdGEuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzLG1pc3NpbmdQcm9wZXJ0aWVzfSBnby9taXNzaW5nZm5wcm9wc1xuICAgICAqL1xuICAgIF9pbml0aWFsaXplUHJvcGVydGllcygpIHtcbiAgICAgIHRoaXMuY29uc3RydWN0b3IuZmluYWxpemUoKTtcbiAgICAgIC8vIG5vdGU6IGZpbmFsaXplIHRlbXBsYXRlIHdoZW4gd2UgaGF2ZSBhY2Nlc3MgdG8gYGxvY2FsTmFtZWAgdG9cbiAgICAgIC8vIGF2b2lkIGRlcGVuZGVuY2Ugb24gYGlzYCBmb3IgcG9seWZpbGxpbmcgc3R5bGluZy5cbiAgICAgIHRoaXMuY29uc3RydWN0b3IuX2ZpbmFsaXplVGVtcGxhdGUoLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovKHRoaXMpLmxvY2FsTmFtZSk7XG4gICAgICBzdXBlci5faW5pdGlhbGl6ZVByb3BlcnRpZXMoKTtcbiAgICAgIC8vIHNldCBwYXRoIGRlZmF1bHRzXG4gICAgICB0aGlzLnJvb3RQYXRoID0gcm9vdFBhdGg7XG4gICAgICB0aGlzLmltcG9ydFBhdGggPSB0aGlzLmNvbnN0cnVjdG9yLmltcG9ydFBhdGg7XG4gICAgICAvLyBhcHBseSBwcm9wZXJ0eSBkZWZhdWx0cy4uLlxuICAgICAgbGV0IHAkID0gcHJvcGVydHlEZWZhdWx0cyh0aGlzLmNvbnN0cnVjdG9yKTtcbiAgICAgIGlmICghcCQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgZm9yIChsZXQgcCBpbiBwJCkge1xuICAgICAgICBsZXQgaW5mbyA9IHAkW3BdO1xuICAgICAgICBpZiAodGhpcy5fY2FuQXBwbHlQcm9wZXJ0eURlZmF1bHQocCkpIHtcbiAgICAgICAgICBsZXQgdmFsdWUgPSB0eXBlb2YgaW5mby52YWx1ZSA9PSAnZnVuY3Rpb24nID9cbiAgICAgICAgICAgIGluZm8udmFsdWUuY2FsbCh0aGlzKSA6XG4gICAgICAgICAgICBpbmZvLnZhbHVlO1xuICAgICAgICAgIC8vIFNldCB2aWEgYF9zZXRQcm9wZXJ0eWAgaWYgdGhlcmUgaXMgYW4gYWNjZXNzb3IsIHRvIGVuYWJsZVxuICAgICAgICAgIC8vIGluaXRpYWxpemluZyByZWFkT25seSBwcm9wZXJ0eSBkZWZhdWx0c1xuICAgICAgICAgIGlmICh0aGlzLl9oYXNBY2Nlc3NvcihwKSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0UGVuZGluZ1Byb3BlcnR5KHAsIHZhbHVlLCB0cnVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpc1twXSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIERldGVybWluZXMgaWYgYSBwcm9wZXJ0eSBkZmVhdWx0IGNhbiBiZSBhcHBsaWVkLiBGb3IgZXhhbXBsZSwgdGhpc1xuICAgICAqIHByZXZlbnRzIGEgZGVmYXVsdCBmcm9tIGJlaW5nIGFwcGxpZWQgd2hlbiBhIHByb3BlcnR5IHRoYXQgaGFzIG5vXG4gICAgICogYWNjZXNzb3IgaXMgb3ZlcnJpZGRlbiBieSBpdHMgaG9zdCBiZWZvcmUgdXBncmFkZSAoZS5nLiB2aWEgYSBiaW5kaW5nKS5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgTmFtZSBvZiB0aGUgcHJvcGVydHlcbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3BlcnR5IGRlZmF1bHQgY2FuIGJlIGFwcGxpZWQuXG4gICAgICovXG4gICAgX2NhbkFwcGx5UHJvcGVydHlEZWZhdWx0KHByb3BlcnR5KSB7XG4gICAgICByZXR1cm4gIXRoaXMuaGFzT3duUHJvcGVydHkocHJvcGVydHkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdhdGhlciBzdHlsZSB0ZXh0IGZvciBhIHN0eWxlIGVsZW1lbnQgaW4gdGhlIHRlbXBsYXRlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHQgVGV4dCBjb250YWluaW5nIHN0eWxpbmcgdG8gcHJvY2Vzc1xuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJJIEJhc2UgVVJJIHRvIHJlYmFzZSBDU1MgcGF0aHMgYWdhaW5zdFxuICAgICAqIEByZXR1cm4ge3N0cmluZ30gVGhlIHByb2Nlc3NlZCBDU1MgdGV4dFxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcHJvY2Vzc1N0eWxlVGV4dChjc3NUZXh0LCBiYXNlVVJJKSB7XG4gICAgICByZXR1cm4gcmVzb2x2ZUNzcyhjc3NUZXh0LCBiYXNlVVJJKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAqIENvbmZpZ3VyZXMgYW4gZWxlbWVudCBgcHJvdG9gIHRvIGZ1bmN0aW9uIHdpdGggYSBnaXZlbiBgdGVtcGxhdGVgLlxuICAgICogVGhlIGVsZW1lbnQgbmFtZSBgaXNgIGFuZCBleHRlbmRzIGBleHRgIG11c3QgYmUgc3BlY2lmaWVkIGZvciBTaGFkeUNTU1xuICAgICogc3R5bGUgc2NvcGluZy5cbiAgICAqXG4gICAgKiBAcGFyYW0ge3N0cmluZ30gaXMgVGFnIG5hbWUgKG9yIHR5cGUgZXh0ZW5zaW9uIG5hbWUpIGZvciB0aGlzIGVsZW1lbnRcbiAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgKiBAcHJvdGVjdGVkXG4gICAgKiBAbm9jb2xsYXBzZVxuICAgICovXG4gICAgc3RhdGljIF9maW5hbGl6ZVRlbXBsYXRlKGlzKSB7XG4gICAgICAvKiogQGNvbnN0IHtIVE1MVGVtcGxhdGVFbGVtZW50fSAqL1xuICAgICAgY29uc3QgdGVtcGxhdGUgPSB0aGlzLnByb3RvdHlwZS5fdGVtcGxhdGU7XG4gICAgICBpZiAodGVtcGxhdGUgJiYgIXRlbXBsYXRlLl9fcG9seW1lckZpbmFsaXplZCkge1xuICAgICAgICB0ZW1wbGF0ZS5fX3BvbHltZXJGaW5hbGl6ZWQgPSB0cnVlO1xuICAgICAgICBjb25zdCBpbXBvcnRQYXRoID0gdGhpcy5pbXBvcnRQYXRoO1xuICAgICAgICBjb25zdCBiYXNlVVJJID0gaW1wb3J0UGF0aCA/IHJlc29sdmVVcmwoaW1wb3J0UGF0aCkgOiAnJztcbiAgICAgICAgLy8gZS5nLiBzdXBwb3J0IGBpbmNsdWRlPVwibW9kdWxlLW5hbWVcImAsIGFuZCBTaGFkeUNTU1xuICAgICAgICBwcm9jZXNzRWxlbWVudFN0eWxlcyh0aGlzLCB0ZW1wbGF0ZSwgaXMsIGJhc2VVUkkpO1xuICAgICAgICB0aGlzLnByb3RvdHlwZS5fYmluZFRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhIGRlZmF1bHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIHN0YW5kYXJkIEN1c3RvbSBFbGVtZW50c1xuICAgICAqIGBjb25uZWN0ZWRDYWxsYmFja2AuXG4gICAgICpcbiAgICAgKiBUaGUgZGVmYXVsdCBpbXBsZW1lbnRhdGlvbiBlbmFibGVzIHRoZSBwcm9wZXJ0eSBlZmZlY3RzIHN5c3RlbSBhbmRcbiAgICAgKiBmbHVzaGVzIGFueSBwZW5kaW5nIHByb3BlcnRpZXMsIGFuZCB1cGRhdGVzIHNoaW1tZWQgQ1NTIHByb3BlcnRpZXNcbiAgICAgKiB3aGVuIHVzaW5nIHRoZSBTaGFkeUNTUyBzY29waW5nL2N1c3RvbSBwcm9wZXJ0aWVzIHBvbHlmaWxsLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllcywgaW52YWxpZENhc3RzfSBTdXBlciBtYXkgb3IgbWF5IG5vdFxuICAgICAqICAgICBpbXBsZW1lbnQgdGhlIGNhbGxiYWNrXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgIGlmICh3aW5kb3cuU2hhZHlDU1MgJiYgdGhpcy5fdGVtcGxhdGUpIHtcbiAgICAgICAgd2luZG93LlNoYWR5Q1NTLnN0eWxlRWxlbWVudCgvKiogQHR5cGUgeyFIVE1MRWxlbWVudH0gKi8odGhpcykpO1xuICAgICAgfVxuICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTdGFtcHMgdGhlIGVsZW1lbnQgdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHJlYWR5KCkge1xuICAgICAgaWYgKHRoaXMuX3RlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHRoaXMuX3N0YW1wVGVtcGxhdGUodGhpcy5fdGVtcGxhdGUpO1xuICAgICAgICB0aGlzLiQgPSB0aGlzLnJvb3QuJDtcbiAgICAgIH1cbiAgICAgIHN1cGVyLnJlYWR5KCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyBgUHJvcGVydHlFZmZlY3RzYCdzIGBfcmVhZHlDbGllbnRzYCBjYWxsLiBBdHRhY2hlc1xuICAgICAqIGVsZW1lbnQgZG9tIGJ5IGNhbGxpbmcgYF9hdHRhY2hEb21gIHdpdGggdGhlIGRvbSBzdGFtcGVkIGZyb20gdGhlXG4gICAgICogZWxlbWVudCdzIHRlbXBsYXRlIHZpYSBgX3N0YW1wVGVtcGxhdGVgLiBOb3RlIHRoYXQgdGhpcyBhbGxvd3NcbiAgICAgKiBjbGllbnQgZG9tIHRvIGJlIGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50IHByaW9yIHRvIGFueSBvYnNlcnZlcnNcbiAgICAgKiBydW5uaW5nLlxuICAgICAqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfcmVhZHlDbGllbnRzKCkge1xuICAgICAgaWYgKHRoaXMuX3RlbXBsYXRlKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHRoaXMuX2F0dGFjaERvbSgvKiogQHR5cGUge1N0YW1wZWRUZW1wbGF0ZX0gKi8odGhpcy5yb290KSk7XG4gICAgICB9XG4gICAgICAvLyBUaGUgc3VwZXIuX3JlYWR5Q2xpZW50cyBoZXJlIHNldHMgdGhlIGNsaWVudHMgaW5pdGlhbGl6ZWQgZmxhZy5cbiAgICAgIC8vIFdlIG11c3Qgd2FpdCB0byBkbyB0aGlzIHVudGlsIGFmdGVyIGNsaWVudCBkb20gaXMgY3JlYXRlZC9hdHRhY2hlZFxuICAgICAgLy8gc28gdGhhdCB0aGlzIGZsYWcgY2FuIGJlIGNoZWNrZWQgdG8gcHJldmVudCBub3RpZmljYXRpb25zIGZpcmVkXG4gICAgICAvLyBkdXJpbmcgdGhpcyBwcm9jZXNzIGZyb20gYmVpbmcgaGFuZGxlZCBiZWZvcmUgY2xpZW50cyBhcmUgcmVhZHkuXG4gICAgICBzdXBlci5fcmVhZHlDbGllbnRzKCk7XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiBBdHRhY2hlcyBhbiBlbGVtZW50J3Mgc3RhbXBlZCBkb20gdG8gaXRzZWxmLiBCeSBkZWZhdWx0LFxuICAgICAqIHRoaXMgbWV0aG9kIGNyZWF0ZXMgYSBgc2hhZG93Um9vdGAgYW5kIGFkZHMgdGhlIGRvbSB0byBpdC5cbiAgICAgKiBIb3dldmVyLCB0aGlzIG1ldGhvZCBtYXkgYmUgb3ZlcnJpZGRlbiB0byBhbGxvdyBhbiBlbGVtZW50XG4gICAgICogdG8gcHV0IGl0cyBkb20gaW4gYW5vdGhlciBsb2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEB0aHJvd3Mge0Vycm9yfVxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1JldHVybn1cbiAgICAgKiBAcGFyYW0ge1N0YW1wZWRUZW1wbGF0ZX0gZG9tIHRvIGF0dGFjaCB0byB0aGUgZWxlbWVudC5cbiAgICAgKiBAcmV0dXJuIHtTaGFkb3dSb290fSBub2RlIHRvIHdoaWNoIHRoZSBkb20gaGFzIGJlZW4gYXR0YWNoZWQuXG4gICAgICovXG4gICAgX2F0dGFjaERvbShkb20pIHtcbiAgICAgIGNvbnN0IG4gPSB3cmFwKHRoaXMpO1xuICAgICAgaWYgKG4uYXR0YWNoU2hhZG93KSB7XG4gICAgICAgIGlmIChkb20pIHtcbiAgICAgICAgICBpZiAoIW4uc2hhZG93Um9vdCkge1xuICAgICAgICAgICAgbi5hdHRhY2hTaGFkb3coe21vZGU6ICdvcGVuJywgc2hhZHlVcGdyYWRlRnJhZ21lbnQ6IGRvbX0pO1xuICAgICAgICAgICAgbi5zaGFkb3dSb290LmFwcGVuZENoaWxkKGRvbSk7XG4gICAgICAgICAgICAvLyBXaGVuIGBhZG9wdGVkU3R5bGVTaGVldHNgIGlzIHN1cHBvcnRlZCBhIHN0eWxlc2hlZXQgaXMgbWFkZVxuICAgICAgICAgICAgLy8gYXZhaWxhYmxlIG9uIHRoZSBlbGVtZW50IGNvbnN0cnVjdG9yLlxuICAgICAgICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IuX3N0eWxlU2hlZXQpIHtcbiAgICAgICAgICAgICAgbi5zaGFkb3dSb290LmFkb3B0ZWRTdHlsZVNoZWV0cyA9IFt0aGlzLmNvbnN0cnVjdG9yLl9zdHlsZVNoZWV0XTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKHN5bmNJbml0aWFsUmVuZGVyICYmIHdpbmRvdy5TaGFkeURPTSkge1xuICAgICAgICAgICAgd2luZG93LlNoYWR5RE9NLmZsdXNoSW5pdGlhbChuLnNoYWRvd1Jvb3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbi5zaGFkb3dSb290O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdTaGFkb3dET00gbm90IGF2YWlsYWJsZS4gJyArXG4gICAgICAgICAgLy8gVE9ETyhzb3J2ZWxsKTogbW92ZSB0byBjb21waWxlLXRpbWUgY29uZGl0aW9uYWwgd2hlbiBzdXBwb3J0ZWRcbiAgICAgICAgJ1BvbHltZXJFbGVtZW50IGNhbiBjcmVhdGUgZG9tIGFzIGNoaWxkcmVuIGluc3RlYWQgb2YgaW4gJyArXG4gICAgICAgICdTaGFkb3dET00gYnkgc2V0dGluZyBgdGhpcy5yb290ID0gdGhpcztcXGAgYmVmb3JlIFxcYHJlYWR5XFxgLicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFdoZW4gdXNpbmcgdGhlIFNoYWR5Q1NTIHNjb3BpbmcgYW5kIGN1c3RvbSBwcm9wZXJ0eSBzaGltLCBjYXVzZXMgYWxsXG4gICAgICogc2hpbW1lZCBzdHlsZXMgaW4gdGhpcyBlbGVtZW50IChhbmQgaXRzIHN1YnRyZWUpIHRvIGJlIHVwZGF0ZWRcbiAgICAgKiBiYXNlZCBvbiBjdXJyZW50IGN1c3RvbSBwcm9wZXJ0eSB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBUaGUgb3B0aW9uYWwgcGFyYW1ldGVyIG92ZXJyaWRlcyBpbmxpbmUgY3VzdG9tIHByb3BlcnR5IHN0eWxlcyB3aXRoIGFuXG4gICAgICogb2JqZWN0IG9mIHByb3BlcnRpZXMgd2hlcmUgdGhlIGtleXMgYXJlIENTUyBwcm9wZXJ0aWVzLCBhbmQgdGhlIHZhbHVlc1xuICAgICAqIGFyZSBzdHJpbmdzLlxuICAgICAqXG4gICAgICogRXhhbXBsZTogYHRoaXMudXBkYXRlU3R5bGVzKHsnLS1jb2xvcic6ICdibHVlJ30pYFxuICAgICAqXG4gICAgICogVGhlc2UgcHJvcGVydGllcyBhcmUgcmV0YWluZWQgdW5sZXNzIGEgdmFsdWUgb2YgYG51bGxgIGlzIHNldC5cbiAgICAgKlxuICAgICAqIE5vdGU6IFRoaXMgZnVuY3Rpb24gZG9lcyBub3Qgc3VwcG9ydCB1cGRhdGluZyBDU1MgbWl4aW5zLlxuICAgICAqIFlvdSBjYW4gbm90IGR5bmFtaWNhbGx5IGNoYW5nZSB0aGUgdmFsdWUgb2YgYW4gYEBhcHBseWAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHByb3BlcnRpZXMgQmFnIG9mIGN1c3RvbSBwcm9wZXJ0eSBrZXkvdmFsdWVzIHRvXG4gICAgICogICBhcHBseSB0byB0aGlzIGVsZW1lbnQuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c31cbiAgICAgKi9cbiAgICB1cGRhdGVTdHlsZXMocHJvcGVydGllcykge1xuICAgICAgaWYgKHdpbmRvdy5TaGFkeUNTUykge1xuICAgICAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVTdWJ0cmVlKC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyh0aGlzKSwgcHJvcGVydGllcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV3cml0ZXMgYSBnaXZlbiBVUkwgcmVsYXRpdmUgdG8gYSBiYXNlIFVSTC4gVGhlIGJhc2UgVVJMIGRlZmF1bHRzIHRvXG4gICAgICogdGhlIG9yaWdpbmFsIGxvY2F0aW9uIG9mIHRoZSBkb2N1bWVudCBjb250YWluaW5nIHRoZSBgZG9tLW1vZHVsZWAgZm9yXG4gICAgICogdGhpcyBlbGVtZW50LiBUaGlzIG1ldGhvZCB3aWxsIHJldHVybiB0aGUgc2FtZSBVUkwgYmVmb3JlIGFuZCBhZnRlclxuICAgICAqIGJ1bmRsaW5nLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHRoaXMgZnVuY3Rpb24gcGVyZm9ybXMgbm8gcmVzb2x1dGlvbiBmb3IgVVJMcyB0aGF0IHN0YXJ0XG4gICAgICogd2l0aCBgL2AgKGFic29sdXRlIFVSTHMpIG9yIGAjYCAoaGFzaCBpZGVudGlmaWVycykuICBGb3IgZ2VuZXJhbCBwdXJwb3NlXG4gICAgICogVVJMIHJlc29sdXRpb24sIHVzZSBgd2luZG93LlVSTGAuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIFVSTCB0byByZXNvbHZlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gYmFzZSBPcHRpb25hbCBiYXNlIFVSTCB0byByZXNvbHZlIGFnYWluc3QsIGRlZmF1bHRzXG4gICAgICogdG8gdGhlIGVsZW1lbnQncyBgaW1wb3J0UGF0aGBcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJld3JpdHRlbiBVUkwgcmVsYXRpdmUgdG8gYmFzZVxuICAgICAqL1xuICAgIHJlc29sdmVVcmwodXJsLCBiYXNlKSB7XG4gICAgICBpZiAoIWJhc2UgJiYgdGhpcy5pbXBvcnRQYXRoKSB7XG4gICAgICAgIGJhc2UgPSByZXNvbHZlVXJsKHRoaXMuaW1wb3J0UGF0aCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gcmVzb2x2ZVVybCh1cmwsIGJhc2UpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBgUHJvcGVydHlFZmZlY3RzYCB0byBhZGQgbWFwIG9mIGR5bmFtaWMgZnVuY3Rpb25zIG9uXG4gICAgICogdGVtcGxhdGUgaW5mbywgZm9yIGNvbnN1bXB0aW9uIGJ5IGBQcm9wZXJ0eUVmZmVjdHNgIHRlbXBsYXRlIGJpbmRpbmdcbiAgICAgKiBjb2RlLiBUaGlzIG1hcCBkZXRlcm1pbmVzIHdoaWNoIG1ldGhvZCB0ZW1wbGF0ZXMgc2hvdWxkIGhhdmUgYWNjZXNzb3JzXG4gICAgICogY3JlYXRlZCBmb3IgdGhlbS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlIFRlbXBsYXRlXG4gICAgICogQHBhcmFtIHshVGVtcGxhdGVJbmZvfSB0ZW1wbGF0ZUluZm8gVGVtcGxhdGUgbWV0YWRhdGEgZm9yIGN1cnJlbnQgdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0geyFOb2RlSW5mb30gbm9kZUluZm8gTm9kZSBtZXRhZGF0YSBmb3IgY3VycmVudCB0ZW1wbGF0ZS5cbiAgICAgKiBAcmV0dXJuIHtib29sZWFufSAuXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gSW50ZXJmYWNlcyBpbiBjbG9zdXJlIGRvIG5vdCBpbmhlcml0IHN0YXRpY3MsIGJ1dCBjbGFzc2VzIGRvXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX3BhcnNlVGVtcGxhdGVDb250ZW50KHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKSB7XG4gICAgICB0ZW1wbGF0ZUluZm8uZHluYW1pY0ZucyA9IHRlbXBsYXRlSW5mby5keW5hbWljRm5zIHx8IHRoaXMuX3Byb3BlcnRpZXM7XG4gICAgICAvLyBUT0RPKGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzI0MCk6XG4gICAgICAvLyAgICAgQ2hhbmdlIGJhY2sgdG8ganVzdCBzdXBlci5tZXRob2RDYWxsKClcbiAgICAgIHJldHVybiBwb2x5bWVyRWxlbWVudEJhc2UuX3BhcnNlVGVtcGxhdGVDb250ZW50LmNhbGwoXG4gICAgICAgIHRoaXMsIHRlbXBsYXRlLCB0ZW1wbGF0ZUluZm8sIG5vZGVJbmZvKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZXMgYFByb3BlcnR5RWZmZWN0c2AgdG8gd2FybiBvbiB1c2Ugb2YgdW5kZWNsYXJlZCBwcm9wZXJ0aWVzIGluXG4gICAgICogdGVtcGxhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gdGVtcGxhdGVJbmZvIFRlbXBsYXRlIG1ldGFkYXRhIHRvIGFkZCBlZmZlY3QgdG9cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSB0aGF0IHNob3VsZCB0cmlnZ2VyIHRoZSBlZmZlY3RcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IGVmZmVjdCBFZmZlY3QgbWV0YWRhdGEgb2JqZWN0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gSW50ZXJmYWNlcyBpbiBjbG9zdXJlIGRvIG5vdCBpbmhlcml0IHN0YXRpY3MsIGJ1dCBjbGFzc2VzIGRvXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgX2FkZFRlbXBsYXRlUHJvcGVydHlFZmZlY3QodGVtcGxhdGVJbmZvLCBwcm9wLCBlZmZlY3QpIHtcbiAgICAgIC8vIFdhcm4gaWYgcHJvcGVydGllcyBhcmUgdXNlZCBpbiB0ZW1wbGF0ZSB3aXRob3V0IGJlaW5nIGRlY2xhcmVkLlxuICAgICAgLy8gUHJvcGVydGllcyBtdXN0IGJlIGxpc3RlZCBpbiBgcHJvcGVydGllc2AgdG8gYmUgaW5jbHVkZWQgaW5cbiAgICAgIC8vIGBvYnNlcnZlZEF0dHJpYnV0ZXNgIHNpbmNlIENFIFYxIHJlYWRzIHRoYXQgYXQgcmVnaXN0cmF0aW9uIHRpbWUsIGFuZFxuICAgICAgLy8gc2luY2Ugd2Ugd2FudCB0byBrZWVwIHRlbXBsYXRlIHBhcnNpbmcgbGF6eSwgd2UgY2FuJ3QgYXV0b21hdGljYWxseVxuICAgICAgLy8gYWRkIHVuZGVjbGFyZWQgcHJvcGVydGllcyB1c2VkIGluIHRlbXBsYXRlcyB0byBgb2JzZXJ2ZWRBdHRyaWJ1dGVzYC5cbiAgICAgIC8vIFRoZSB3YXJuaW5nIGlzIG9ubHkgZW5hYmxlZCBpbiBgbGVnYWN5T3B0aW1pemF0aW9uc2AgbW9kZSwgc2luY2VcbiAgICAgIC8vIHdlIGRvbid0IHdhbnQgdG8gc3BhbSBleGlzdGluZyB1c2VycyB3aG8gbWlnaHQgaGF2ZSBhZG9wdGVkIHRoZVxuICAgICAgLy8gc2hvcnRoYW5kIHdoZW4gYXR0cmlidXRlIGRlc2VyaWFsaXphdGlvbiBpcyBub3QgaW1wb3J0YW50LlxuICAgICAgaWYgKGxlZ2FjeVdhcm5pbmdzICYmICEocHJvcCBpbiB0aGlzLl9wcm9wZXJ0aWVzKSAmJlxuICAgICAgICAgIC8vIE1ldGhvZHMgdXNlZCBpbiB0ZW1wbGF0ZXMgd2l0aCBubyBkZXBlbmRlbmNpZXMgKG9yIG9ubHkgbGl0ZXJhbFxuICAgICAgICAgIC8vIGRlcGVuZGVuY2llcykgYmVjb21lIGFjY2Vzc29ycyB3aXRoIHRlbXBsYXRlIGVmZmVjdHM7IGlnbm9yZSB0aGVzZVxuICAgICAgICAgICEoZWZmZWN0LmluZm8ucGFydC5zaWduYXR1cmUgJiYgZWZmZWN0LmluZm8ucGFydC5zaWduYXR1cmUuc3RhdGljKSAmJlxuICAgICAgICAgIC8vIFdhcm5pbmdzIGZvciBiaW5kaW5ncyBhZGRlZCB0byBuZXN0ZWQgdGVtcGxhdGVzIGFyZSBoYW5kbGVkIGJ5XG4gICAgICAgICAgLy8gdGVtcGxhdGl6ZXIgc28gaWdub3JlIGJvdGggdGhlIGhvc3QtdG8tdGVtcGxhdGUgYmluZGluZ3NcbiAgICAgICAgICAvLyAoYGhvc3RQcm9wYCkgYW5kIFRlbXBsYXRlSW5zdGFuY2UtdG8tY2hpbGQgYmluZGluZ3NcbiAgICAgICAgICAvLyAoYG5lc3RlZFRlbXBsYXRlYClcbiAgICAgICAgICAhZWZmZWN0LmluZm8ucGFydC5ob3N0UHJvcCAmJiAhdGVtcGxhdGVJbmZvLm5lc3RlZFRlbXBsYXRlKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgUHJvcGVydHkgJyR7cHJvcH0nIHVzZWQgaW4gdGVtcGxhdGUgYnV0IG5vdCBkZWNsYXJlZCBpbiAncHJvcGVydGllcyc7IGAgK1xuICAgICAgICAgIGBhdHRyaWJ1dGUgd2lsbCBub3QgYmUgb2JzZXJ2ZWQuYCk7XG4gICAgICB9XG4gICAgICAvLyBUT0RPKGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzI0MCk6XG4gICAgICAvLyAgICAgQ2hhbmdlIGJhY2sgdG8ganVzdCBzdXBlci5tZXRob2RDYWxsKClcbiAgICAgIHJldHVybiBwb2x5bWVyRWxlbWVudEJhc2UuX2FkZFRlbXBsYXRlUHJvcGVydHlFZmZlY3QuY2FsbChcbiAgICAgICAgdGhpcywgdGVtcGxhdGVJbmZvLCBwcm9wLCBlZmZlY3QpO1xuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIFBvbHltZXJFbGVtZW50O1xufSk7XG5cbi8qKlxuICogV2hlbiB1c2luZyB0aGUgU2hhZHlDU1Mgc2NvcGluZyBhbmQgY3VzdG9tIHByb3BlcnR5IHNoaW0sIGNhdXNlcyBhbGxcbiAqIHNoaW1tZWQgYHN0eWxlc2AgKHZpYSBgY3VzdG9tLXN0eWxlYCkgaW4gdGhlIGRvY3VtZW50IChhbmQgaXRzIHN1YnRyZWUpXG4gKiB0byBiZSB1cGRhdGVkIGJhc2VkIG9uIGN1cnJlbnQgY3VzdG9tIHByb3BlcnR5IHZhbHVlcy5cbiAqXG4gKiBUaGUgb3B0aW9uYWwgcGFyYW1ldGVyIG92ZXJyaWRlcyBpbmxpbmUgY3VzdG9tIHByb3BlcnR5IHN0eWxlcyB3aXRoIGFuXG4gKiBvYmplY3Qgb2YgcHJvcGVydGllcyB3aGVyZSB0aGUga2V5cyBhcmUgQ1NTIHByb3BlcnRpZXMsIGFuZCB0aGUgdmFsdWVzXG4gKiBhcmUgc3RyaW5ncy5cbiAqXG4gKiBFeGFtcGxlOiBgdXBkYXRlU3R5bGVzKHsnLS1jb2xvcic6ICdibHVlJ30pYFxuICpcbiAqIFRoZXNlIHByb3BlcnRpZXMgYXJlIHJldGFpbmVkIHVubGVzcyBhIHZhbHVlIG9mIGBudWxsYCBpcyBzZXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3Q9fSBwcm9wcyBCYWcgb2YgY3VzdG9tIHByb3BlcnR5IGtleS92YWx1ZXMgdG9cbiAqICAgYXBwbHkgdG8gdGhlIGRvY3VtZW50LlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGNvbnN0IHVwZGF0ZVN0eWxlcyA9IGZ1bmN0aW9uKHByb3BzKSB7XG4gIGlmICh3aW5kb3cuU2hhZHlDU1MpIHtcbiAgICB3aW5kb3cuU2hhZHlDU1Muc3R5bGVEb2N1bWVudChwcm9wcyk7XG4gIH1cbn07XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi9ib290LmpzJztcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBzdGF0aWMgc3RyaW5nIHZhbHVlIHdoaWNoIGNhbiBiZSB1c2VkIHRvIGZpbHRlclxuICogc3RyaW5ncyBieSBhc3NldGluZyB0aGF0IHRoZXkgaGF2ZSBiZWVuIGNyZWF0ZWQgdmlhIHRoaXMgY2xhc3MuIFRoZVxuICogYHZhbHVlYCBwcm9wZXJ0eSByZXR1cm5zIHRoZSBzdHJpbmcgcGFzc2VkIHRvIHRoZSBjb25zdHJ1Y3Rvci5cbiAqL1xuY2xhc3MgTGl0ZXJhbFN0cmluZyB7XG4gIGNvbnN0cnVjdG9yKHN0cmluZykge1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHRoaXMudmFsdWUgPSBzdHJpbmcudG9TdHJpbmcoKTtcbiAgfVxuICAvKipcbiAgICogQHJldHVybiB7c3RyaW5nfSBMaXRlcmFsU3RyaW5nIHN0cmluZyB2YWx1ZVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHsqfSB2YWx1ZSBPYmplY3QgdG8gc3RyaW5naWZ5IGludG8gSFRNTFxuICogQHJldHVybiB7c3RyaW5nfSBIVE1MIHN0cmluZ2lmaWVkIGZvcm0gb2YgYG9iamBcbiAqL1xuZnVuY3Rpb24gbGl0ZXJhbFZhbHVlKHZhbHVlKSB7XG4gIGlmICh2YWx1ZSBpbnN0YW5jZW9mIExpdGVyYWxTdHJpbmcpIHtcbiAgICByZXR1cm4gLyoqIEB0eXBlIHshTGl0ZXJhbFN0cmluZ30gKi8odmFsdWUpLnZhbHVlO1xuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgYG5vbi1saXRlcmFsIHZhbHVlIHBhc3NlZCB0byBQb2x5bWVyJ3MgaHRtbExpdGVyYWwgZnVuY3Rpb246ICR7dmFsdWV9YFxuICAgICk7XG4gIH1cbn1cblxuLyoqXG4gKiBAcGFyYW0geyp9IHZhbHVlIE9iamVjdCB0byBzdHJpbmdpZnkgaW50byBIVE1MXG4gKiBAcmV0dXJuIHtzdHJpbmd9IEhUTUwgc3RyaW5naWZpZWQgZm9ybSBvZiBgb2JqYFxuICovXG5mdW5jdGlvbiBodG1sVmFsdWUodmFsdWUpIHtcbiAgaWYgKHZhbHVlIGluc3RhbmNlb2YgSFRNTFRlbXBsYXRlRWxlbWVudCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50IH0gKi8odmFsdWUpLmlubmVySFRNTDtcbiAgfSBlbHNlIGlmICh2YWx1ZSBpbnN0YW5jZW9mIExpdGVyYWxTdHJpbmcpIHtcbiAgICByZXR1cm4gbGl0ZXJhbFZhbHVlKHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBub24tdGVtcGxhdGUgdmFsdWUgcGFzc2VkIHRvIFBvbHltZXIncyBodG1sIGZ1bmN0aW9uOiAke3ZhbHVlfWApO1xuICB9XG59XG5cbi8qKlxuICogQSB0ZW1wbGF0ZSBsaXRlcmFsIHRhZyB0aGF0IGNyZWF0ZXMgYW4gSFRNTCA8dGVtcGxhdGU+IGVsZW1lbnQgZnJvbSB0aGVcbiAqIGNvbnRlbnRzIG9mIHRoZSBzdHJpbmcuXG4gKlxuICogVGhpcyBhbGxvd3MgeW91IHRvIHdyaXRlIGEgUG9seW1lciBUZW1wbGF0ZSBpbiBKYXZhU2NyaXB0LlxuICpcbiAqIFRlbXBsYXRlcyBjYW4gYmUgY29tcG9zZWQgYnkgaW50ZXJwb2xhdGluZyBgSFRNTFRlbXBsYXRlRWxlbWVudGBzIGluXG4gKiBleHByZXNzaW9ucyBpbiB0aGUgSmF2YVNjcmlwdCB0ZW1wbGF0ZSBsaXRlcmFsLiBUaGUgbmVzdGVkIHRlbXBsYXRlJ3NcbiAqIGBpbm5lckhUTUxgIGlzIGluY2x1ZGVkIGluIHRoZSBjb250YWluaW5nIHRlbXBsYXRlLiAgVGhlIG9ubHkgb3RoZXJcbiAqIHZhbHVlcyBhbGxvd2VkIGluIGV4cHJlc3Npb25zIGFyZSB0aG9zZSByZXR1cm5lZCBmcm9tIGBodG1sTGl0ZXJhbGBcbiAqIHdoaWNoIGVuc3VyZXMgb25seSBsaXRlcmFsIHZhbHVlcyBmcm9tIEpTIHNvdXJjZSBldmVyIHJlYWNoIHRoZSBIVE1MLCB0b1xuICogZ3VhcmQgYWdhaW5zdCBYU1Mgcmlza3MuXG4gKlxuICogQWxsIG90aGVyIHZhbHVlcyBhcmUgZGlzYWxsb3dlZCBpbiBleHByZXNzaW9ucyB0byBoZWxwIHByZXZlbnQgWFNTXG4gKiBhdHRhY2tzOyBob3dldmVyLCBgaHRtbExpdGVyYWxgIGNhbiBiZSB1c2VkIHRvIGNvbXBvc2Ugc3RhdGljXG4gKiBzdHJpbmcgdmFsdWVzIGludG8gdGVtcGxhdGVzLiBUaGlzIGlzIHVzZWZ1bCB0byBjb21wb3NlIHN0cmluZ3MgaW50b1xuICogcGxhY2VzIHRoYXQgZG8gbm90IGFjY2VwdCBodG1sLCBsaWtlIHRoZSBjc3MgdGV4dCBvZiBhIGBzdHlsZWBcbiAqIGVsZW1lbnQuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgc3RhdGljIGdldCB0ZW1wbGF0ZSgpIHtcbiAqICAgICAgIHJldHVybiBodG1sYFxuICogICAgICAgICA8c3R5bGU+Omhvc3R7IGNvbnRlbnQ6XCIuLi5cIiB9PC9zdHlsZT5cbiAqICAgICAgICAgPGRpdiBjbGFzcz1cInNoYWRvd2VkXCI+JHt0aGlzLnBhcnRpYWxUZW1wbGF0ZX08L2Rpdj5cbiAqICAgICAgICAgJHtzdXBlci50ZW1wbGF0ZX1cbiAqICAgICAgIGA7XG4gKiAgICAgfVxuICogICAgIHN0YXRpYyBnZXQgcGFydGlhbFRlbXBsYXRlKCkgeyByZXR1cm4gaHRtbGA8c3Bhbj5QYXJ0aWFsITwvc3Bhbj5gOyB9XG4gKlxuICogQHBhcmFtIHshSVRlbXBsYXRlQXJyYXl9IHN0cmluZ3MgQ29uc3RhbnQgcGFydHMgb2YgdGFnZ2VkIHRlbXBsYXRlIGxpdGVyYWxcbiAqIEBwYXJhbSB7Li4uKn0gdmFsdWVzIFZhcmlhYmxlIHBhcnRzIG9mIHRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsXG4gKiBAcmV0dXJuIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gQ29uc3RydWN0ZWQgSFRNTFRlbXBsYXRlRWxlbWVudFxuICovXG5leHBvcnQgY29uc3QgaHRtbCA9IGZ1bmN0aW9uIGh0bWwoc3RyaW5ncywgLi4udmFsdWVzKSB7XG4gIGNvbnN0IHRlbXBsYXRlID0gLyoqIEB0eXBlIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gKi8oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKSk7XG4gIHRlbXBsYXRlLmlubmVySFRNTCA9IHZhbHVlcy5yZWR1Y2UoKGFjYywgdiwgaWR4KSA9PlxuICAgICAgYWNjICsgaHRtbFZhbHVlKHYpICsgc3RyaW5nc1tpZHggKyAxXSwgc3RyaW5nc1swXSk7XG4gIHJldHVybiB0ZW1wbGF0ZTtcbn07XG5cbi8qKlxuICogQW4gaHRtbCBsaXRlcmFsIHRhZyB0aGF0IGNhbiBiZSB1c2VkIHdpdGggYGh0bWxgIHRvIGNvbXBvc2UuXG4gKiBhIGxpdGVyYWwgc3RyaW5nLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICAgIHN0YXRpYyBnZXQgdGVtcGxhdGUoKSB7XG4gKiAgICAgICByZXR1cm4gaHRtbGBcbiAqICAgICAgICAgPHN0eWxlPlxuICogICAgICAgICAgIDpob3N0IHsgZGlzcGxheTogYmxvY2s7IH1cbiAqICAgICAgICAgICAke3RoaXMuc3R5bGVUZW1wbGF0ZSgpfVxuICogICAgICAgICA8L3N0eWxlPlxuICogICAgICAgICA8ZGl2IGNsYXNzPVwic2hhZG93ZWRcIj4ke3N0YXRpY1ZhbHVlfTwvZGl2PlxuICogICAgICAgICAke3N1cGVyLnRlbXBsYXRlfVxuICogICAgICAgYDtcbiAqICAgICB9XG4gKiAgICAgc3RhdGljIGdldCBzdHlsZVRlbXBsYXRlKCkge1xuICogICAgICAgIHJldHVybiBodG1sTGl0ZXJhbGAuc2hhZG93ZWQgeyBiYWNrZ3JvdW5kOiBncmF5OyB9YDtcbiAqICAgICB9XG4gKlxuICogQHBhcmFtIHshSVRlbXBsYXRlQXJyYXl9IHN0cmluZ3MgQ29uc3RhbnQgcGFydHMgb2YgdGFnZ2VkIHRlbXBsYXRlIGxpdGVyYWxcbiAqIEBwYXJhbSB7Li4uKn0gdmFsdWVzIFZhcmlhYmxlIHBhcnRzIG9mIHRhZ2dlZCB0ZW1wbGF0ZSBsaXRlcmFsXG4gKiBAcmV0dXJuIHshTGl0ZXJhbFN0cmluZ30gQ29uc3RydWN0ZWQgbGl0ZXJhbCBzdHJpbmdcbiAqL1xuZXhwb3J0IGNvbnN0IGh0bWxMaXRlcmFsID0gZnVuY3Rpb24oc3RyaW5ncywgLi4udmFsdWVzKSB7XG4gIHJldHVybiBuZXcgTGl0ZXJhbFN0cmluZyh2YWx1ZXMucmVkdWNlKChhY2MsIHYsIGlkeCkgPT5cbiAgICAgIGFjYyArIGxpdGVyYWxWYWx1ZSh2KSArIHN0cmluZ3NbaWR4ICsgMV0sIHN0cmluZ3NbMF0pKTtcbn07XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuaW1wb3J0IHsgRWxlbWVudE1peGluLCB2ZXJzaW9uIH0gZnJvbSAnLi9saWIvbWl4aW5zL2VsZW1lbnQtbWl4aW4uanMnO1xuZXhwb3J0IHsgaHRtbCB9IGZyb20gJy4vbGliL3V0aWxzL2h0bWwtdGFnLmpzJztcblxuZXhwb3J0IHsgdmVyc2lvbiB9O1xuXG4vKipcbiAqIEJhc2UgY2xhc3MgdGhhdCBwcm92aWRlcyB0aGUgY29yZSBBUEkgZm9yIFBvbHltZXIncyBtZXRhLXByb2dyYW1taW5nXG4gKiBmZWF0dXJlcyBpbmNsdWRpbmcgdGVtcGxhdGUgc3RhbXBpbmcsIGRhdGEtYmluZGluZywgYXR0cmlidXRlIGRlc2VyaWFsaXphdGlvbixcbiAqIGFuZCBwcm9wZXJ0eSBjaGFuZ2Ugb2JzZXJ2YXRpb24uXG4gKlxuICogQGN1c3RvbUVsZW1lbnRcbiAqIEBwb2x5bWVyXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0VsZW1lbnRNaXhpbn1cbiAqIEBleHRlbmRzIEhUTUxFbGVtZW50XG4gKiBAYXBwbGllc01peGluIEVsZW1lbnRNaXhpblxuICogQHN1bW1hcnkgQ3VzdG9tIGVsZW1lbnQgYmFzZSBjbGFzcyB0aGF0IHByb3ZpZGVzIHRoZSBjb3JlIEFQSSBmb3IgUG9seW1lcidzXG4gKiAgIGtleSBtZXRhLXByb2dyYW1taW5nIGZlYXR1cmVzIGluY2x1ZGluZyB0ZW1wbGF0ZSBzdGFtcGluZywgZGF0YS1iaW5kaW5nLFxuICogICBhdHRyaWJ1dGUgZGVzZXJpYWxpemF0aW9uLCBhbmQgcHJvcGVydHkgY2hhbmdlIG9ic2VydmF0aW9uXG4gKi9cbmV4cG9ydCBjb25zdCBQb2x5bWVyRWxlbWVudCA9IEVsZW1lbnRNaXhpbihIVE1MRWxlbWVudCk7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi9ib290LmpzJztcblxuaW1wb3J0ICcuL21peGluLmpzJztcbmltcG9ydCAnLi9hc3luYy5qcyc7XG5cbi8qKlxuICogQHN1bW1hcnkgQ29sbGFwc2UgbXVsdGlwbGUgY2FsbGJhY2tzIGludG8gb25lIGludm9jYXRpb24gYWZ0ZXIgYSB0aW1lci5cbiAqL1xuZXhwb3J0IGNsYXNzIERlYm91bmNlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2FzeW5jTW9kdWxlID0gbnVsbDtcbiAgICB0aGlzLl9jYWxsYmFjayA9IG51bGw7XG4gICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBTZXRzIHRoZSBzY2hlZHVsZXI7IHRoYXQgaXMsIGEgbW9kdWxlIHdpdGggdGhlIEFzeW5jIGludGVyZmFjZSxcbiAgICogYSBjYWxsYmFjayBhbmQgb3B0aW9uYWwgYXJndW1lbnRzIHRvIGJlIHBhc3NlZCB0byB0aGUgcnVuIGZ1bmN0aW9uXG4gICAqIGZyb20gdGhlIGFzeW5jIG1vZHVsZS5cbiAgICpcbiAgICogQHBhcmFtIHshQXN5bmNJbnRlcmZhY2V9IGFzeW5jTW9kdWxlIE9iamVjdCB3aXRoIEFzeW5jIGludGVyZmFjZS5cbiAgICogQHBhcmFtIHtmdW5jdGlvbigpfSBjYWxsYmFjayBDYWxsYmFjayB0byBydW4uXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBzZXRDb25maWcoYXN5bmNNb2R1bGUsIGNhbGxiYWNrKSB7XG4gICAgdGhpcy5fYXN5bmNNb2R1bGUgPSBhc3luY01vZHVsZTtcbiAgICB0aGlzLl9jYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMuX3RpbWVyID0gdGhpcy5fYXN5bmNNb2R1bGUucnVuKCgpID0+IHtcbiAgICAgIHRoaXMuX3RpbWVyID0gbnVsbDtcbiAgICAgIGRlYm91bmNlclF1ZXVlLmRlbGV0ZSh0aGlzKTtcbiAgICAgIHRoaXMuX2NhbGxiYWNrKCk7XG4gICAgfSk7XG4gIH1cbiAgLyoqXG4gICAqIENhbmNlbHMgYW4gYWN0aXZlIGRlYm91bmNlciBhbmQgcmV0dXJucyBhIHJlZmVyZW5jZSB0byBpdHNlbGYuXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBjYW5jZWwoKSB7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmUoKSkge1xuICAgICAgdGhpcy5fY2FuY2VsQXN5bmMoKTtcbiAgICAgIC8vIENhbmNlbGluZyBhIGRlYm91bmNlciByZW1vdmVzIGl0cyBzcG90IGZyb20gdGhlIGZsdXNoIHF1ZXVlLFxuICAgICAgLy8gc28gaWYgYSBkZWJvdW5jZXIgaXMgbWFudWFsbHkgY2FuY2VsZWQgYW5kIHJlLWRlYm91bmNlZCwgaXRcbiAgICAgIC8vIHdpbGwgcmVzZXQgaXRzIGZsdXNoIG9yZGVyICh0aGlzIGlzIGEgdmVyeSBtaW5vciBkaWZmZXJlbmNlIGZyb20gMS54KVxuICAgICAgLy8gUmUtZGVib3VuY2luZyB2aWEgdGhlIGBkZWJvdW5jZWAgQVBJIHJldGFpbnMgdGhlIDEueCBGSUZPIGZsdXNoIG9yZGVyXG4gICAgICBkZWJvdW5jZXJRdWV1ZS5kZWxldGUodGhpcyk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDYW5jZWxzIGEgZGVib3VuY2VyJ3MgYXN5bmMgY2FsbGJhY2suXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBfY2FuY2VsQXN5bmMoKSB7XG4gICAgaWYgKHRoaXMuaXNBY3RpdmUoKSkge1xuICAgICAgdGhpcy5fYXN5bmNNb2R1bGUuY2FuY2VsKC8qKiBAdHlwZSB7bnVtYmVyfSAqLyh0aGlzLl90aW1lcikpO1xuICAgICAgdGhpcy5fdGltZXIgPSBudWxsO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogRmx1c2hlcyBhbiBhY3RpdmUgZGVib3VuY2VyIGFuZCByZXR1cm5zIGEgcmVmZXJlbmNlIHRvIGl0c2VsZi5cbiAgICpcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGZsdXNoKCkge1xuICAgIGlmICh0aGlzLmlzQWN0aXZlKCkpIHtcbiAgICAgIHRoaXMuY2FuY2VsKCk7XG4gICAgICB0aGlzLl9jYWxsYmFjaygpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBkZWJvdW5jZXIgaXMgYWN0aXZlLlxuICAgKlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGFjdGl2ZS5cbiAgICovXG4gIGlzQWN0aXZlKCkge1xuICAgIHJldHVybiB0aGlzLl90aW1lciAhPSBudWxsO1xuICB9XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGVib3VuY2VyIGlmIG5vIGRlYm91bmNlciBpcyBwYXNzZWQgYXMgYSBwYXJhbWV0ZXJcbiAgICogb3IgaXQgY2FuY2VscyBhbiBhY3RpdmUgZGVib3VuY2VyIG90aGVyd2lzZS4gVGhlIGZvbGxvd2luZ1xuICAgKiBleGFtcGxlIHNob3dzIGhvdyBhIGRlYm91bmNlciBjYW4gYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIHdpdGhpbiBhXG4gICAqIG1pY3JvdGFzayBhbmQgXCJkZWJvdW5jZWRcIiBzdWNoIHRoYXQgdGhlIHByb3ZpZGVkIGNhbGxiYWNrIGZ1bmN0aW9uIGlzXG4gICAqIGNhbGxlZCBvbmNlLiBBZGQgdGhpcyBtZXRob2QgdG8gYSBjdXN0b20gZWxlbWVudDpcbiAgICpcbiAgICogYGBganNcbiAgICogaW1wb3J0IHttaWNyb1Rhc2t9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2FzeW5jLmpzJztcbiAgICogaW1wb3J0IHtEZWJvdW5jZXJ9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2RlYm91bmNlLmpzJztcbiAgICogLy8gLi4uXG4gICAqXG4gICAqIF9kZWJvdW5jZVdvcmsoKSB7XG4gICAqICAgdGhpcy5fZGVib3VuY2VKb2IgPSBEZWJvdW5jZXIuZGVib3VuY2UodGhpcy5fZGVib3VuY2VKb2IsXG4gICAqICAgICAgIG1pY3JvVGFzaywgKCkgPT4gdGhpcy5fZG9Xb3JrKCkpO1xuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBJZiB0aGUgYF9kZWJvdW5jZVdvcmtgIG1ldGhvZCBpcyBjYWxsZWQgbXVsdGlwbGUgdGltZXMgd2l0aGluIHRoZSBzYW1lXG4gICAqIG1pY3JvdGFzaywgdGhlIGBfZG9Xb3JrYCBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBvbmx5IG9uY2UgYXQgdGhlIG5leHRcbiAgICogbWljcm90YXNrIGNoZWNrcG9pbnQuXG4gICAqXG4gICAqIE5vdGU6IEluIHRlc3RpbmcgaXQgaXMgb2Z0ZW4gY29udmVuaWVudCB0byBhdm9pZCBhc3luY2hyb255LiBUbyBhY2NvbXBsaXNoXG4gICAqIHRoaXMgd2l0aCBhIGRlYm91bmNlciwgeW91IGNhbiB1c2UgYGVucXVldWVEZWJvdW5jZXJgIGFuZFxuICAgKiBgZmx1c2hgLiBGb3IgZXhhbXBsZSwgZXh0ZW5kIHRoZSBhYm92ZSBleGFtcGxlIGJ5IGFkZGluZ1xuICAgKiBgZW5xdWV1ZURlYm91bmNlcih0aGlzLl9kZWJvdW5jZUpvYilgIGF0IHRoZSBlbmQgb2YgdGhlXG4gICAqIGBfZGVib3VuY2VXb3JrYCBtZXRob2QuIFRoZW4gaW4gYSB0ZXN0LCBjYWxsIGBmbHVzaGAgdG8gZW5zdXJlXG4gICAqIHRoZSBkZWJvdW5jZXIgaGFzIGNvbXBsZXRlZC5cbiAgICpcbiAgICogQHBhcmFtIHtEZWJvdW5jZXI/fSBkZWJvdW5jZXIgRGVib3VuY2VyIG9iamVjdC5cbiAgICogQHBhcmFtIHshQXN5bmNJbnRlcmZhY2V9IGFzeW5jTW9kdWxlIE9iamVjdCB3aXRoIEFzeW5jIGludGVyZmFjZVxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IGNhbGxiYWNrIENhbGxiYWNrIHRvIHJ1bi5cbiAgICogQHJldHVybiB7IURlYm91bmNlcn0gUmV0dXJucyBhIGRlYm91bmNlciBvYmplY3QuXG4gICAqL1xuICBzdGF0aWMgZGVib3VuY2UoZGVib3VuY2VyLCBhc3luY01vZHVsZSwgY2FsbGJhY2spIHtcbiAgICBpZiAoZGVib3VuY2VyIGluc3RhbmNlb2YgRGVib3VuY2VyKSB7XG4gICAgICAvLyBDYW5jZWwgdGhlIGFzeW5jIGNhbGxiYWNrLCBidXQgbGVhdmUgaW4gZGVib3VuY2VyUXVldWUgaWYgaXQgd2FzXG4gICAgICAvLyBlbnF1ZXVlZCwgdG8gbWFpbnRhaW4gMS54IGZsdXNoIG9yZGVyXG4gICAgICBkZWJvdW5jZXIuX2NhbmNlbEFzeW5jKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlYm91bmNlciA9IG5ldyBEZWJvdW5jZXIoKTtcbiAgICB9XG4gICAgZGVib3VuY2VyLnNldENvbmZpZyhhc3luY01vZHVsZSwgY2FsbGJhY2spO1xuICAgIHJldHVybiBkZWJvdW5jZXI7XG4gIH1cbn1cblxubGV0IGRlYm91bmNlclF1ZXVlID0gbmV3IFNldCgpO1xuXG4vKipcbiAqIEFkZHMgYSBgRGVib3VuY2VyYCB0byBhIGxpc3Qgb2YgZ2xvYmFsbHkgZmx1c2hhYmxlIHRhc2tzLlxuICpcbiAqIEBwYXJhbSB7IURlYm91bmNlcn0gZGVib3VuY2VyIERlYm91bmNlciB0byBlbnF1ZXVlXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3QgZW5xdWV1ZURlYm91bmNlciA9IGZ1bmN0aW9uKGRlYm91bmNlcikge1xuICBkZWJvdW5jZXJRdWV1ZS5hZGQoZGVib3VuY2VyKTtcbn07XG5cbi8qKlxuICogRmx1c2hlcyBhbnkgZW5xdWV1ZWQgZGVib3VuY2Vyc1xuICpcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgd2hldGhlciBhbnkgZGVib3VuY2VycyB3ZXJlIGZsdXNoZWRcbiAqL1xuZXhwb3J0IGNvbnN0IGZsdXNoRGVib3VuY2VycyA9IGZ1bmN0aW9uKCkge1xuICBjb25zdCBkaWRGbHVzaCA9IEJvb2xlYW4oZGVib3VuY2VyUXVldWUuc2l6ZSk7XG4gIC8vIElmIG5ldyBkZWJvdW5jZXJzIGFyZSBhZGRlZCB3aGlsZSBmbHVzaGluZywgU2V0LmZvckVhY2ggd2lsbCBlbnN1cmVcbiAgLy8gbmV3bHkgYWRkZWQgb25lcyBhcmUgYWxzbyBmbHVzaGVkXG4gIGRlYm91bmNlclF1ZXVlLmZvckVhY2goZGVib3VuY2VyID0+IHtcbiAgICB0cnkge1xuICAgICAgZGVib3VuY2VyLmZsdXNoKCk7XG4gICAgfSBjYXRjaChlKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBkaWRGbHVzaDtcbn07IiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbi8qKlxuICogQGZpbGVvdmVydmlld1xuICpcbiAqIE1vZHVsZSBmb3IgYWRkaW5nIGxpc3RlbmVycyB0byBhIG5vZGUgZm9yIHRoZSBmb2xsb3dpbmcgbm9ybWFsaXplZFxuICogY3Jvc3MtcGxhdGZvcm0gXCJnZXN0dXJlXCIgZXZlbnRzOlxuICogLSBgZG93bmAgLSBtb3VzZSBvciB0b3VjaCB3ZW50IGRvd25cbiAqIC0gYHVwYCAtIG1vdXNlIG9yIHRvdWNoIHdlbnQgdXBcbiAqIC0gYHRhcGAgLSBtb3VzZSBjbGljayBvciBmaW5nZXIgdGFwXG4gKiAtIGB0cmFja2AgLSBtb3VzZSBkcmFnIG9yIHRvdWNoIG1vdmVcbiAqXG4gKiBAc3VtbWFyeSBNb2R1bGUgZm9yIGFkZGluZyBjcm9zcy1wbGF0Zm9ybSBnZXN0dXJlIGV2ZW50IGxpc3RlbmVycy5cbiAqL1xuXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbmltcG9ydCB7IHRpbWVPdXQsIG1pY3JvVGFzayB9IGZyb20gJy4vYXN5bmMuanMnO1xuaW1wb3J0IHsgRGVib3VuY2VyIH0gZnJvbSAnLi9kZWJvdW5jZS5qcyc7XG5pbXBvcnQgeyBwYXNzaXZlVG91Y2hHZXN0dXJlcywgY2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHMgfSBmcm9tICcuL3NldHRpbmdzLmpzJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICcuL3dyYXAuanMnO1xuXG4vLyBkZXRlY3QgbmF0aXZlIHRvdWNoIGFjdGlvbiBzdXBwb3J0XG5sZXQgSEFTX05BVElWRV9UQSA9IHR5cGVvZiBkb2N1bWVudC5oZWFkLnN0eWxlLnRvdWNoQWN0aW9uID09PSAnc3RyaW5nJztcbmxldCBHRVNUVVJFX0tFWSA9ICdfX3BvbHltZXJHZXN0dXJlcyc7XG5sZXQgSEFORExFRF9PQkogPSAnX19wb2x5bWVyR2VzdHVyZXNIYW5kbGVkJztcbmxldCBUT1VDSF9BQ1RJT04gPSAnX19wb2x5bWVyR2VzdHVyZXNUb3VjaEFjdGlvbic7XG4vLyByYWRpdXMgZm9yIHRhcCBhbmQgdHJhY2tcbmxldCBUQVBfRElTVEFOQ0UgPSAyNTtcbmxldCBUUkFDS19ESVNUQU5DRSA9IDU7XG4vLyBudW1iZXIgb2YgbGFzdCBOIHRyYWNrIHBvc2l0aW9ucyB0byBrZWVwXG5sZXQgVFJBQ0tfTEVOR1RIID0gMjtcblxuLy8gRGlzYWJsaW5nIFwibW91c2VcIiBoYW5kbGVycyBmb3IgMjUwMG1zIGlzIGVub3VnaFxubGV0IE1PVVNFX1RJTUVPVVQgPSAyNTAwO1xubGV0IE1PVVNFX0VWRU5UUyA9IFsnbW91c2Vkb3duJywgJ21vdXNlbW92ZScsICdtb3VzZXVwJywgJ2NsaWNrJ107XG4vLyBhbiBhcnJheSBvZiBiaXRtYXNrIHZhbHVlcyBmb3IgbWFwcGluZyBNb3VzZUV2ZW50LndoaWNoIHRvIE1vdXNlRXZlbnQuYnV0dG9uc1xubGV0IE1PVVNFX1dISUNIX1RPX0JVVFRPTlMgPSBbMCwgMSwgNCwgMl07XG5sZXQgTU9VU0VfSEFTX0JVVFRPTlMgPSAoZnVuY3Rpb24oKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIG5ldyBNb3VzZUV2ZW50KCd0ZXN0Jywge2J1dHRvbnM6IDF9KS5idXR0b25zID09PSAxO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFBvc3NpYmxlIG1vdXNlIGV2ZW50IG5hbWVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgbW91c2UgZXZlbnQsIGZhbHNlIGlmIG5vdFxuICovXG5mdW5jdGlvbiBpc01vdXNlRXZlbnQobmFtZSkge1xuICByZXR1cm4gTU9VU0VfRVZFTlRTLmluZGV4T2YobmFtZSkgPiAtMTtcbn1cblxuLyogZXNsaW50IG5vLWVtcHR5OiBbXCJlcnJvclwiLCB7IFwiYWxsb3dFbXB0eUNhdGNoXCI6IHRydWUgfV0gKi9cbi8vIGNoZWNrIGZvciBwYXNzaXZlIGV2ZW50IGxpc3RlbmVyc1xubGV0IHN1cHBvcnRzUGFzc2l2ZSA9IGZhbHNlO1xuKGZ1bmN0aW9uKCkge1xuICB0cnkge1xuICAgIGxldCBvcHRzID0gT2JqZWN0LmRlZmluZVByb3BlcnR5KHt9LCAncGFzc2l2ZScsIHtnZXQoKSB7c3VwcG9ydHNQYXNzaXZlID0gdHJ1ZTt9fSk7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBudWxsLCBvcHRzKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdCcsIG51bGwsIG9wdHMpO1xuICB9IGNhdGNoKGUpIHt9XG59KSgpO1xuXG4vKipcbiAqIEdlbmVyYXRlIHNldHRpbmdzIGZvciBldmVudCBsaXN0ZW5lcnMsIGRlcGVuZGFudCBvbiBgcGFzc2l2ZVRvdWNoR2VzdHVyZXNgXG4gKlxuICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBFdmVudCBuYW1lIHRvIGRldGVybWluZSBpZiBge3Bhc3NpdmV9YCBvcHRpb24gaXNcbiAqICAgbmVlZGVkXG4gKiBAcmV0dXJuIHt7cGFzc2l2ZTogYm9vbGVhbn0gfCB1bmRlZmluZWR9IE9wdGlvbnMgdG8gdXNlIGZvciBhZGRFdmVudExpc3RlbmVyXG4gKiAgIGFuZCByZW1vdmVFdmVudExpc3RlbmVyXG4gKi9cbmZ1bmN0aW9uIFBBU1NJVkVfVE9VQ0goZXZlbnROYW1lKSB7XG4gIGlmIChpc01vdXNlRXZlbnQoZXZlbnROYW1lKSB8fCBldmVudE5hbWUgPT09ICd0b3VjaGVuZCcpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKEhBU19OQVRJVkVfVEEgJiYgc3VwcG9ydHNQYXNzaXZlICYmIHBhc3NpdmVUb3VjaEdlc3R1cmVzKSB7XG4gICAgcmV0dXJuIHtwYXNzaXZlOiB0cnVlfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuLy8gQ2hlY2sgZm9yIHRvdWNoLW9ubHkgZGV2aWNlc1xubGV0IElTX1RPVUNIX09OTFkgPSBuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9pUCg/OltvYV1kfGhvbmUpfEFuZHJvaWQvKTtcblxuLy8ga2VlcCB0cmFjayBvZiBhbnkgbGFiZWxzIGhpdCBieSB0aGUgbW91c2VDYW5jZWxsZXJcbi8qKiBAdHlwZSB7IUFycmF5PCFIVE1MTGFiZWxFbGVtZW50Pn0gKi9cbmNvbnN0IGNsaWNrZWRMYWJlbHMgPSBbXTtcblxuLyoqIEB0eXBlIHshT2JqZWN0PGJvb2xlYW4+fSAqL1xuY29uc3QgbGFiZWxsYWJsZSA9IHtcbiAgJ2J1dHRvbic6IHRydWUsXG4gICdpbnB1dCc6IHRydWUsXG4gICdrZXlnZW4nOiB0cnVlLFxuICAnbWV0ZXInOiB0cnVlLFxuICAnb3V0cHV0JzogdHJ1ZSxcbiAgJ3RleHRhcmVhJzogdHJ1ZSxcbiAgJ3Byb2dyZXNzJzogdHJ1ZSxcbiAgJ3NlbGVjdCc6IHRydWVcbn07XG5cbi8vIERlZmluZWQgYXQgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybS1jb250cm9sLWluZnJhc3RydWN0dXJlLmh0bWwjZW5hYmxpbmctYW5kLWRpc2FibGluZy1mb3JtLWNvbnRyb2xzOi10aGUtZGlzYWJsZWQtYXR0cmlidXRlXG4vKiogQHR5cGUgeyFPYmplY3Q8Ym9vbGVhbj59ICovXG5jb25zdCBjYW5CZURpc2FibGVkID0ge1xuICAnYnV0dG9uJzogdHJ1ZSxcbiAgJ2NvbW1hbmQnOiB0cnVlLFxuICAnZmllbGRzZXQnOiB0cnVlLFxuICAnaW5wdXQnOiB0cnVlLFxuICAna2V5Z2VuJzogdHJ1ZSxcbiAgJ29wdGdyb3VwJzogdHJ1ZSxcbiAgJ29wdGlvbic6IHRydWUsXG4gICdzZWxlY3QnOiB0cnVlLFxuICAndGV4dGFyZWEnOiB0cnVlXG59O1xuXG4vKipcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgdG8gY2hlY2sgbGFiZWxsaW5nIHN0YXR1c1xuICogQHJldHVybiB7Ym9vbGVhbn0gZWxlbWVudCBjYW4gaGF2ZSBsYWJlbHNcbiAqL1xuZnVuY3Rpb24gY2FuQmVMYWJlbGxlZChlbCkge1xuICByZXR1cm4gbGFiZWxsYWJsZVtlbC5sb2NhbE5hbWVdIHx8IGZhbHNlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgdGhhdCBtYXkgYmUgbGFiZWxsZWQuXG4gKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxMYWJlbEVsZW1lbnQ+fSBSZWxldmFudCBsYWJlbCBmb3IgYGVsYFxuICovXG5mdW5jdGlvbiBtYXRjaGluZ0xhYmVscyhlbCkge1xuICBsZXQgbGFiZWxzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoLyoqIEB0eXBlIHtIVE1MSW5wdXRFbGVtZW50fSAqLyhlbCkubGFiZWxzIHx8IFtdKTtcbiAgLy8gSUUgZG9lc24ndCBoYXZlIGBsYWJlbHNgIGFuZCBTYWZhcmkgZG9lc24ndCBwb3B1bGF0ZSBgbGFiZWxzYFxuICAvLyBpZiBlbGVtZW50IGlzIGluIGEgc2hhZG93cm9vdC5cbiAgLy8gSW4gdGhpcyBpbnN0YW5jZSwgZmluZGluZyB0aGUgbm9uLWFuY2VzdG9yIGxhYmVscyBpcyBlbm91Z2gsXG4gIC8vIGFzIHRoZSBtb3VzZUNhbmNlbGxvciBjb2RlIHdpbGwgaGFuZGxlIGFuY3N0b3IgbGFiZWxzXG4gIGlmICghbGFiZWxzLmxlbmd0aCkge1xuICAgIGxhYmVscyA9IFtdO1xuICAgIGxldCByb290ID0gZWwuZ2V0Um9vdE5vZGUoKTtcbiAgICAvLyBpZiB0aGVyZSBpcyBhbiBpZCBvbiBgZWxgLCBjaGVjayBmb3IgYWxsIGxhYmVscyB3aXRoIGEgbWF0Y2hpbmcgYGZvcmAgYXR0cmlidXRlXG4gICAgaWYgKGVsLmlkKSB7XG4gICAgICBsZXQgbWF0Y2hpbmcgPSByb290LnF1ZXJ5U2VsZWN0b3JBbGwoYGxhYmVsW2ZvciA9ICR7ZWwuaWR9XWApO1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBtYXRjaGluZy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsYWJlbHMucHVzaCgvKiogQHR5cGUgeyFIVE1MTGFiZWxFbGVtZW50fSAqLyhtYXRjaGluZ1tpXSkpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbGFiZWxzO1xufVxuXG4vLyB0b3VjaCB3aWxsIG1ha2Ugc3ludGhldGljIG1vdXNlIGV2ZW50c1xuLy8gYHByZXZlbnREZWZhdWx0YCBvbiB0b3VjaGVuZCB3aWxsIGNhbmNlbCB0aGVtLFxuLy8gYnV0IHRoaXMgYnJlYWtzIGA8aW5wdXQ+YCBmb2N1cyBhbmQgbGluayBjbGlja3Ncbi8vIGRpc2FibGUgbW91c2UgaGFuZGxlcnMgZm9yIE1PVVNFX1RJTUVPVVQgbXMgYWZ0ZXJcbi8vIGEgdG91Y2hlbmQgdG8gaWdub3JlIHN5bnRoZXRpYyBtb3VzZSBldmVudHNcbmxldCBtb3VzZUNhbmNlbGxlciA9IGZ1bmN0aW9uKG1vdXNlRXZlbnQpIHtcbiAgLy8gQ2hlY2sgZm9yIHNvdXJjZUNhcGFiaWxpdGllcywgdXNlZCB0byBkaXN0aW5ndWlzaCBzeW50aGV0aWMgZXZlbnRzXG4gIC8vIGlmIG1vdXNlRXZlbnQgZGlkIG5vdCBjb21lIGZyb20gYSBkZXZpY2UgdGhhdCBmaXJlcyB0b3VjaCBldmVudHMsXG4gIC8vIGl0IHdhcyBtYWRlIGJ5IGEgcmVhbCBtb3VzZSBhbmQgc2hvdWxkIGJlIGNvdW50ZWRcbiAgLy8gaHR0cDovL3dpY2cuZ2l0aHViLmlvL0lucHV0RGV2aWNlQ2FwYWJpbGl0aWVzLyNkb20taW5wdXRkZXZpY2VjYXBhYmlsaXRpZXMtZmlyZXN0b3VjaGV2ZW50c1xuICBsZXQgc2MgPSBtb3VzZUV2ZW50LnNvdXJjZUNhcGFiaWxpdGllcztcbiAgaWYgKHNjICYmICFzYy5maXJlc1RvdWNoRXZlbnRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHNraXAgc3ludGhldGljIG1vdXNlIGV2ZW50c1xuICBtb3VzZUV2ZW50W0hBTkRMRURfT0JKXSA9IHtza2lwOiB0cnVlfTtcbiAgLy8gZGlzYWJsZSBcImdob3N0IGNsaWNrc1wiXG4gIGlmIChtb3VzZUV2ZW50LnR5cGUgPT09ICdjbGljaycpIHtcbiAgICBsZXQgY2xpY2tGcm9tTGFiZWwgPSBmYWxzZTtcbiAgICBsZXQgcGF0aCA9IGdldENvbXBvc2VkUGF0aChtb3VzZUV2ZW50KTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChwYXRoW2ldLm5vZGVUeXBlID09PSBOb2RlLkVMRU1FTlRfTk9ERSkge1xuICAgICAgICBpZiAocGF0aFtpXS5sb2NhbE5hbWUgPT09ICdsYWJlbCcpIHtcbiAgICAgICAgICBjbGlja2VkTGFiZWxzLnB1c2goLyoqIEB0eXBlIHshSFRNTExhYmVsRWxlbWVudH0gKi8gKHBhdGhbaV0pKTtcbiAgICAgICAgfSBlbHNlIGlmIChjYW5CZUxhYmVsbGVkKC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyAocGF0aFtpXSkpKSB7XG4gICAgICAgICAgbGV0IG93bmVyTGFiZWxzID1cbiAgICAgICAgICAgICAgbWF0Y2hpbmdMYWJlbHMoLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovIChwYXRoW2ldKSk7XG4gICAgICAgICAgLy8gY2hlY2sgaWYgb25lIG9mIHRoZSBjbGlja2VkIGxhYmVscyBpcyBsYWJlbGxpbmcgdGhpcyBlbGVtZW50XG4gICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBvd25lckxhYmVscy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgY2xpY2tGcm9tTGFiZWwgPSBjbGlja0Zyb21MYWJlbCB8fCBjbGlja2VkTGFiZWxzLmluZGV4T2Yob3duZXJMYWJlbHNbal0pID4gLTE7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAocGF0aFtpXSA9PT0gUE9JTlRFUlNUQVRFLm1vdXNlLnRhcmdldCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGlmIG9uZSBvZiB0aGUgY2xpY2tlZCBsYWJlbHMgd2FzIGxhYmVsbGluZyB0aGUgdGFyZ2V0IGVsZW1lbnQsXG4gICAgLy8gdGhpcyBpcyBub3QgYSBnaG9zdCBjbGlja1xuICAgIGlmIChjbGlja0Zyb21MYWJlbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBtb3VzZUV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgbW91c2VFdmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge2Jvb2xlYW49fSBzZXR1cCBUcnVlIHRvIGFkZCwgZmFsc2UgdG8gcmVtb3ZlLlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gc2V0dXBUZWFyZG93bk1vdXNlQ2FuY2VsbGVyKHNldHVwKSB7XG4gIGxldCBldmVudHMgPSBJU19UT1VDSF9PTkxZID8gWydjbGljayddIDogTU9VU0VfRVZFTlRTO1xuICBmb3IgKGxldCBpID0gMCwgZW47IGkgPCBldmVudHMubGVuZ3RoOyBpKyspIHtcbiAgICBlbiA9IGV2ZW50c1tpXTtcbiAgICBpZiAoc2V0dXApIHtcbiAgICAgIC8vIHJlc2V0IGNsaWNrTGFiZWxzIGFycmF5XG4gICAgICBjbGlja2VkTGFiZWxzLmxlbmd0aCA9IDA7XG4gICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGVuLCBtb3VzZUNhbmNlbGxlciwgdHJ1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZW4sIG1vdXNlQ2FuY2VsbGVyLCB0cnVlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gaWdub3JlTW91c2UoZSkge1xuICBpZiAoIWNhbmNlbFN5bnRoZXRpY0NsaWNrRXZlbnRzKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmICghUE9JTlRFUlNUQVRFLm1vdXNlLm1vdXNlSWdub3JlSm9iKSB7XG4gICAgc2V0dXBUZWFyZG93bk1vdXNlQ2FuY2VsbGVyKHRydWUpO1xuICB9XG4gIGxldCB1bnNldCA9IGZ1bmN0aW9uKCkge1xuICAgIHNldHVwVGVhcmRvd25Nb3VzZUNhbmNlbGxlcigpO1xuICAgIFBPSU5URVJTVEFURS5tb3VzZS50YXJnZXQgPSBudWxsO1xuICAgIFBPSU5URVJTVEFURS5tb3VzZS5tb3VzZUlnbm9yZUpvYiA9IG51bGw7XG4gIH07XG4gIFBPSU5URVJTVEFURS5tb3VzZS50YXJnZXQgPSBnZXRDb21wb3NlZFBhdGgoZSlbMF07XG4gIFBPSU5URVJTVEFURS5tb3VzZS5tb3VzZUlnbm9yZUpvYiA9IERlYm91bmNlci5kZWJvdW5jZShcbiAgICAgICAgUE9JTlRFUlNUQVRFLm1vdXNlLm1vdXNlSWdub3JlSm9iXG4gICAgICAsIHRpbWVPdXQuYWZ0ZXIoTU9VU0VfVElNRU9VVClcbiAgICAgICwgdW5zZXQpO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gZXYgZXZlbnQgdG8gdGVzdCBmb3IgbGVmdCBtb3VzZSBidXR0b24gZG93blxuICogQHJldHVybiB7Ym9vbGVhbn0gaGFzIGxlZnQgbW91c2UgYnV0dG9uIGRvd25cbiAqL1xuZnVuY3Rpb24gaGFzTGVmdE1vdXNlQnV0dG9uKGV2KSB7XG4gIGxldCB0eXBlID0gZXYudHlwZTtcbiAgLy8gZXhpdCBlYXJseSBpZiB0aGUgZXZlbnQgaXMgbm90IGEgbW91c2UgZXZlbnRcbiAgaWYgKCFpc01vdXNlRXZlbnQodHlwZSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgLy8gZXYuYnV0dG9uIGlzIG5vdCByZWxpYWJsZSBmb3IgbW91c2Vtb3ZlICgwIGlzIG92ZXJsb2FkZWQgYXMgYm90aCBsZWZ0IGJ1dHRvbiBhbmQgbm8gYnV0dG9ucylcbiAgLy8gaW5zdGVhZCB3ZSB1c2UgZXYuYnV0dG9ucyAoYml0bWFzayBvZiBidXR0b25zKSBvciBmYWxsIGJhY2sgdG8gZXYud2hpY2ggKGRlcHJlY2F0ZWQsIDAgZm9yIG5vIGJ1dHRvbnMsIDEgZm9yIGxlZnQgYnV0dG9uKVxuICBpZiAodHlwZSA9PT0gJ21vdXNlbW92ZScpIHtcbiAgICAvLyBhbGxvdyB1bmRlZmluZWQgZm9yIHRlc3RpbmcgZXZlbnRzXG4gICAgbGV0IGJ1dHRvbnMgPSBldi5idXR0b25zID09PSB1bmRlZmluZWQgPyAxIDogZXYuYnV0dG9ucztcbiAgICBpZiAoKGV2IGluc3RhbmNlb2Ygd2luZG93Lk1vdXNlRXZlbnQpICYmICFNT1VTRV9IQVNfQlVUVE9OUykge1xuICAgICAgYnV0dG9ucyA9IE1PVVNFX1dISUNIX1RPX0JVVFRPTlNbZXYud2hpY2hdIHx8IDA7XG4gICAgfVxuICAgIC8vIGJ1dHRvbnMgaXMgYSBiaXRtYXNrLCBjaGVjayB0aGF0IHRoZSBsZWZ0IGJ1dHRvbiBiaXQgaXMgc2V0ICgxKVxuICAgIHJldHVybiBCb29sZWFuKGJ1dHRvbnMgJiAxKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBhbGxvdyB1bmRlZmluZWQgZm9yIHRlc3RpbmcgZXZlbnRzXG4gICAgbGV0IGJ1dHRvbiA9IGV2LmJ1dHRvbiA9PT0gdW5kZWZpbmVkID8gMCA6IGV2LmJ1dHRvbjtcbiAgICAvLyBldi5idXR0b24gaXMgMCBpbiBtb3VzZWRvd24vbW91c2V1cC9jbGljayBmb3IgbGVmdCBidXR0b24gYWN0aXZhdGlvblxuICAgIHJldHVybiBidXR0b24gPT09IDA7XG4gIH1cbn1cblxuZnVuY3Rpb24gaXNTeW50aGV0aWNDbGljayhldikge1xuICBpZiAoZXYudHlwZSA9PT0gJ2NsaWNrJykge1xuICAgIC8vIGV2LmRldGFpbCBpcyAwIGZvciBIVE1MRWxlbWVudC5jbGljayBpbiBtb3N0IGJyb3dzZXJzXG4gICAgaWYgKGV2LmRldGFpbCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIGluIHRoZSB3b3JzdCBjYXNlLCBjaGVjayB0aGF0IHRoZSB4L3kgcG9zaXRpb24gb2YgdGhlIGNsaWNrIGlzIHdpdGhpblxuICAgIC8vIHRoZSBib3VuZGluZyBib3ggb2YgdGhlIHRhcmdldCBvZiB0aGUgZXZlbnRcbiAgICAvLyBUaGFua3MgSUUgMTAgPjooXG4gICAgbGV0IHQgPSBfZmluZE9yaWdpbmFsVGFyZ2V0KGV2KTtcbiAgICAvLyBtYWtlIHN1cmUgdGhlIHRhcmdldCBvZiB0aGUgZXZlbnQgaXMgYW4gZWxlbWVudCBzbyB3ZSBjYW4gdXNlIGdldEJvdW5kaW5nQ2xpZW50UmVjdCxcbiAgICAvLyBpZiBub3QsIGp1c3QgYXNzdW1lIGl0IGlzIGEgc3ludGhldGljIGNsaWNrXG4gICAgaWYgKCF0Lm5vZGVUeXBlIHx8IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8odCkubm9kZVR5cGUgIT09IE5vZGUuRUxFTUVOVF9OT0RFKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgbGV0IGJjciA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8odCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgLy8gdXNlIHBhZ2UgeC95IHRvIGFjY291bnQgZm9yIHNjcm9sbGluZ1xuICAgIGxldCB4ID0gZXYucGFnZVgsIHkgPSBldi5wYWdlWTtcbiAgICAvLyBldiBpcyBhIHN5bnRoZXRpYyBjbGljayBpZiB0aGUgcG9zaXRpb24gaXMgb3V0c2lkZSB0aGUgYm91bmRpbmcgYm94IG9mIHRoZSB0YXJnZXRcbiAgICByZXR1cm4gISgoeCA+PSBiY3IubGVmdCAmJiB4IDw9IGJjci5yaWdodCkgJiYgKHkgPj0gYmNyLnRvcCAmJiB5IDw9IGJjci5ib3R0b20pKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmxldCBQT0lOVEVSU1RBVEUgPSB7XG4gIG1vdXNlOiB7XG4gICAgdGFyZ2V0OiBudWxsLFxuICAgIG1vdXNlSWdub3JlSm9iOiBudWxsXG4gIH0sXG4gIHRvdWNoOiB7XG4gICAgeDogMCxcbiAgICB5OiAwLFxuICAgIGlkOiAtMSxcbiAgICBzY3JvbGxEZWNpZGVkOiBmYWxzZVxuICB9XG59O1xuXG5mdW5jdGlvbiBmaXJzdFRvdWNoQWN0aW9uKGV2KSB7XG4gIGxldCB0YSA9ICdhdXRvJztcbiAgbGV0IHBhdGggPSBnZXRDb21wb3NlZFBhdGgoZXYpO1xuICBmb3IgKGxldCBpID0gMCwgbjsgaSA8IHBhdGgubGVuZ3RoOyBpKyspIHtcbiAgICBuID0gcGF0aFtpXTtcbiAgICBpZiAobltUT1VDSF9BQ1RJT05dKSB7XG4gICAgICB0YSA9IG5bVE9VQ0hfQUNUSU9OXTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdGE7XG59XG5cbmZ1bmN0aW9uIHRyYWNrRG9jdW1lbnQoc3RhdGVPYmosIG1vdmVmbiwgdXBmbikge1xuICBzdGF0ZU9iai5tb3ZlZm4gPSBtb3ZlZm47XG4gIHN0YXRlT2JqLnVwZm4gPSB1cGZuO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBtb3ZlZm4pO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdXBmbik7XG59XG5cbmZ1bmN0aW9uIHVudHJhY2tEb2N1bWVudChzdGF0ZU9iaikge1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBzdGF0ZU9iai5tb3ZlZm4pO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgc3RhdGVPYmoudXBmbik7XG4gIHN0YXRlT2JqLm1vdmVmbiA9IG51bGw7XG4gIHN0YXRlT2JqLnVwZm4gPSBudWxsO1xufVxuXG5pZiAoY2FuY2VsU3ludGhldGljQ2xpY2tFdmVudHMpIHtcbiAgLy8gdXNlIGEgZG9jdW1lbnQtd2lkZSB0b3VjaGVuZCBsaXN0ZW5lciB0byBzdGFydCB0aGUgZ2hvc3QtY2xpY2sgcHJldmVudGlvbiBtZWNoYW5pc21cbiAgLy8gVXNlIHBhc3NpdmUgZXZlbnQgbGlzdGVuZXJzLCBpZiBzdXBwb3J0ZWQsIHRvIG5vdCBhZmZlY3Qgc2Nyb2xsaW5nIHBlcmZvcm1hbmNlXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgaWdub3JlTW91c2UsIHN1cHBvcnRzUGFzc2l2ZSA/IHtwYXNzaXZlOiB0cnVlfSA6IGZhbHNlKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBjb21wb3NlZFBhdGggZm9yIHRoZSBnaXZlbiBldmVudC5cbiAqIEBwYXJhbSB7RXZlbnR9IGV2ZW50IHRvIHByb2Nlc3NcbiAqIEByZXR1cm4geyFBcnJheTwhRXZlbnRUYXJnZXQ+fSBQYXRoIG9mIHRoZSBldmVudFxuICovXG5jb25zdCBnZXRDb21wb3NlZFBhdGggPSB3aW5kb3cuU2hhZHlET00gJiYgd2luZG93LlNoYWR5RE9NLm5vUGF0Y2ggP1xuICB3aW5kb3cuU2hhZHlET00uY29tcG9zZWRQYXRoIDpcbiAgKGV2ZW50KSA9PiBldmVudC5jb21wb3NlZFBhdGggJiYgZXZlbnQuY29tcG9zZWRQYXRoKCkgfHwgW107XG5cbi8qKiBAdHlwZSB7IU9iamVjdDxzdHJpbmcsICFHZXN0dXJlUmVjb2duaXplcj59ICovXG5leHBvcnQgY29uc3QgZ2VzdHVyZXMgPSB7fTtcblxuLyoqIEB0eXBlIHshQXJyYXk8IUdlc3R1cmVSZWNvZ25pemVyPn0gKi9cbmV4cG9ydCBjb25zdCByZWNvZ25pemVycyA9IFtdO1xuXG4vKipcbiAqIEZpbmRzIHRoZSBlbGVtZW50IHJlbmRlcmVkIG9uIHRoZSBzY3JlZW4gYXQgdGhlIHByb3ZpZGVkIGNvb3JkaW5hdGVzLlxuICpcbiAqIFNpbWlsYXIgdG8gYGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnRgLCBidXQgcGllcmNlcyB0aHJvdWdoXG4gKiBzaGFkb3cgcm9vdHMuXG4gKlxuICogQHBhcmFtIHtudW1iZXJ9IHggSG9yaXpvbnRhbCBwaXhlbCBjb29yZGluYXRlXG4gKiBAcGFyYW0ge251bWJlcn0geSBWZXJ0aWNhbCBwaXhlbCBjb29yZGluYXRlXG4gKiBAcmV0dXJuIHtFbGVtZW50fSBSZXR1cm5zIHRoZSBkZWVwZXN0IHNoYWRvd1Jvb3QgaW5jbHVzaXZlIGVsZW1lbnRcbiAqIGZvdW5kIGF0IHRoZSBzY3JlZW4gcG9zaXRpb24gZ2l2ZW4uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZWVwVGFyZ2V0RmluZCh4LCB5KSB7XG4gIGxldCBub2RlID0gZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludCh4LCB5KTtcbiAgbGV0IG5leHQgPSBub2RlO1xuICAvLyB0aGlzIGNvZGUgcGF0aCBpcyBvbmx5IHRha2VuIHdoZW4gbmF0aXZlIFNoYWRvd0RPTSBpcyB1c2VkXG4gIC8vIGlmIHRoZXJlIGlzIGEgc2hhZG93cm9vdCwgaXQgbWF5IGhhdmUgYSBub2RlIGF0IHgveVxuICAvLyBpZiB0aGVyZSBpcyBub3QgYSBzaGFkb3dyb290LCBleGl0IHRoZSBsb29wXG4gIHdoaWxlIChuZXh0ICYmIG5leHQuc2hhZG93Um9vdCAmJiAhd2luZG93LlNoYWR5RE9NKSB7XG4gICAgLy8gaWYgdGhlcmUgaXMgYSBub2RlIGF0IHgveSBpbiB0aGUgc2hhZG93cm9vdCwgbG9vayBkZWVwZXJcbiAgICBsZXQgb2xkTmV4dCA9IG5leHQ7XG4gICAgbmV4dCA9IG5leHQuc2hhZG93Um9vdC5lbGVtZW50RnJvbVBvaW50KHgsIHkpO1xuICAgIC8vIG9uIFNhZmFyaSwgZWxlbWVudEZyb21Qb2ludCBtYXkgcmV0dXJuIHRoZSBzaGFkb3dSb290IGhvc3RcbiAgICBpZiAob2xkTmV4dCA9PT0gbmV4dCkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChuZXh0KSB7XG4gICAgICBub2RlID0gbmV4dDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5cbi8qKlxuICogYSBjaGVhcGVyIGNoZWNrIHRoYW4gZXYuY29tcG9zZWRQYXRoKClbMF07XG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RXZlbnR8VG91Y2h9IGV2IEV2ZW50LlxuICogQHJldHVybiB7RXZlbnRUYXJnZXR9IFJldHVybnMgdGhlIGV2ZW50IHRhcmdldC5cbiAqL1xuZnVuY3Rpb24gX2ZpbmRPcmlnaW5hbFRhcmdldChldikge1xuICBjb25zdCBwYXRoID0gZ2V0Q29tcG9zZWRQYXRoKC8qKiBAdHlwZSB7P0V2ZW50fSAqLyAoZXYpKTtcbiAgLy8gSXQgc2hvdWxkbid0IGJlLCBidXQgc29tZXRpbWVzIHBhdGggaXMgZW1wdHkgKHdpbmRvdyBvbiBTYWZhcmkpLlxuICByZXR1cm4gcGF0aC5sZW5ndGggPiAwID8gcGF0aFswXSA6IGV2LnRhcmdldDtcbn1cblxuLyoqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtFdmVudH0gZXYgRXZlbnQuXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBfaGFuZGxlTmF0aXZlKGV2KSB7XG4gIGxldCBoYW5kbGVkO1xuICBsZXQgdHlwZSA9IGV2LnR5cGU7XG4gIGxldCBub2RlID0gZXYuY3VycmVudFRhcmdldDtcbiAgbGV0IGdvYmogPSBub2RlW0dFU1RVUkVfS0VZXTtcbiAgaWYgKCFnb2JqKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIGxldCBncyA9IGdvYmpbdHlwZV07XG4gIGlmICghZ3MpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgaWYgKCFldltIQU5ETEVEX09CSl0pIHtcbiAgICBldltIQU5ETEVEX09CSl0gPSB7fTtcbiAgICBpZiAodHlwZS5zbGljZSgwLCA1KSA9PT0gJ3RvdWNoJykge1xuICAgICAgZXYgPSAvKiogQHR5cGUge1RvdWNoRXZlbnR9ICovKGV2KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWFzc2lnblxuICAgICAgbGV0IHQgPSBldi5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAgIGlmICh0eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgLy8gb25seSBoYW5kbGUgdGhlIGZpcnN0IGZpbmdlclxuICAgICAgICBpZiAoZXYudG91Y2hlcy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICBQT0lOVEVSU1RBVEUudG91Y2guaWQgPSB0LmlkZW50aWZpZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChQT0lOVEVSU1RBVEUudG91Y2guaWQgIT09IHQuaWRlbnRpZmllcikge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAoIUhBU19OQVRJVkVfVEEpIHtcbiAgICAgICAgaWYgKHR5cGUgPT09ICd0b3VjaHN0YXJ0JyB8fCB0eXBlID09PSAndG91Y2htb3ZlJykge1xuICAgICAgICAgIF9oYW5kbGVUb3VjaEFjdGlvbihldik7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaGFuZGxlZCA9IGV2W0hBTkRMRURfT0JKXTtcbiAgLy8gdXNlZCB0byBpZ25vcmUgc3ludGhldGljIG1vdXNlIGV2ZW50c1xuICBpZiAoaGFuZGxlZC5za2lwKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIC8vIHJlc2V0IHJlY29nbml6ZXIgc3RhdGVcbiAgZm9yIChsZXQgaSA9IDAsIHI7IGkgPCByZWNvZ25pemVycy5sZW5ndGg7IGkrKykge1xuICAgIHIgPSByZWNvZ25pemVyc1tpXTtcbiAgICBpZiAoZ3Nbci5uYW1lXSAmJiAhaGFuZGxlZFtyLm5hbWVdKSB7XG4gICAgICBpZiAoci5mbG93ICYmIHIuZmxvdy5zdGFydC5pbmRleE9mKGV2LnR5cGUpID4gLTEgJiYgci5yZXNldCkge1xuICAgICAgICByLnJlc2V0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIGVuZm9yY2UgZ2VzdHVyZSByZWNvZ25pemVyIG9yZGVyXG4gIGZvciAobGV0IGkgPSAwLCByOyBpIDwgcmVjb2duaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICByID0gcmVjb2duaXplcnNbaV07XG4gICAgaWYgKGdzW3IubmFtZV0gJiYgIWhhbmRsZWRbci5uYW1lXSkge1xuICAgICAgaGFuZGxlZFtyLm5hbWVdID0gdHJ1ZTtcbiAgICAgIHJbdHlwZV0oZXYpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGV2IEV2ZW50LlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gX2hhbmRsZVRvdWNoQWN0aW9uKGV2KSB7XG4gIGxldCB0ID0gZXYuY2hhbmdlZFRvdWNoZXNbMF07XG4gIGxldCB0eXBlID0gZXYudHlwZTtcbiAgaWYgKHR5cGUgPT09ICd0b3VjaHN0YXJ0Jykge1xuICAgIFBPSU5URVJTVEFURS50b3VjaC54ID0gdC5jbGllbnRYO1xuICAgIFBPSU5URVJTVEFURS50b3VjaC55ID0gdC5jbGllbnRZO1xuICAgIFBPSU5URVJTVEFURS50b3VjaC5zY3JvbGxEZWNpZGVkID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3RvdWNobW92ZScpIHtcbiAgICBpZiAoUE9JTlRFUlNUQVRFLnRvdWNoLnNjcm9sbERlY2lkZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgUE9JTlRFUlNUQVRFLnRvdWNoLnNjcm9sbERlY2lkZWQgPSB0cnVlO1xuICAgIGxldCB0YSA9IGZpcnN0VG91Y2hBY3Rpb24oZXYpO1xuICAgIGxldCBzaG91bGRQcmV2ZW50ID0gZmFsc2U7XG4gICAgbGV0IGR4ID0gTWF0aC5hYnMoUE9JTlRFUlNUQVRFLnRvdWNoLnggLSB0LmNsaWVudFgpO1xuICAgIGxldCBkeSA9IE1hdGguYWJzKFBPSU5URVJTVEFURS50b3VjaC55IC0gdC5jbGllbnRZKTtcbiAgICBpZiAoIWV2LmNhbmNlbGFibGUpIHtcbiAgICAgIC8vIHNjcm9sbGluZyBpcyBoYXBwZW5pbmdcbiAgICB9IGVsc2UgaWYgKHRhID09PSAnbm9uZScpIHtcbiAgICAgIHNob3VsZFByZXZlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSBpZiAodGEgPT09ICdwYW4teCcpIHtcbiAgICAgIHNob3VsZFByZXZlbnQgPSBkeSA+IGR4O1xuICAgIH0gZWxzZSBpZiAodGEgPT09ICdwYW4teScpIHtcbiAgICAgIHNob3VsZFByZXZlbnQgPSBkeCA+IGR5O1xuICAgIH1cbiAgICBpZiAoc2hvdWxkUHJldmVudCkge1xuICAgICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJldmVudCgndHJhY2snKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBBZGRzIGFuIGV2ZW50IGxpc3RlbmVyIHRvIGEgbm9kZSBmb3IgdGhlIGdpdmVuIGdlc3R1cmUgdHlwZS5cbiAqXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIGFkZCBsaXN0ZW5lciBvblxuICogQHBhcmFtIHtzdHJpbmd9IGV2VHlwZSBHZXN0dXJlIHR5cGU6IGBkb3duYCwgYHVwYCwgYHRyYWNrYCwgb3IgYHRhcGBcbiAqIEBwYXJhbSB7IWZ1bmN0aW9uKCFFdmVudCk6dm9pZH0gaGFuZGxlciBFdmVudCBsaXN0ZW5lciBmdW5jdGlvbiB0byBjYWxsXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgYSBnZXN0dXJlIGV2ZW50IGxpc3RlbmVyIHdhcyBhZGRlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZExpc3RlbmVyKG5vZGUsIGV2VHlwZSwgaGFuZGxlcikge1xuICBpZiAoZ2VzdHVyZXNbZXZUeXBlXSkge1xuICAgIF9hZGQobm9kZSwgZXZUeXBlLCBoYW5kbGVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciBmcm9tIGEgbm9kZSBmb3IgdGhlIGdpdmVuIGdlc3R1cmUgdHlwZS5cbiAqXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIHRvIHJlbW92ZSBsaXN0ZW5lciBmcm9tXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZUeXBlIEdlc3R1cmUgdHlwZTogYGRvd25gLCBgdXBgLCBgdHJhY2tgLCBvciBgdGFwYFxuICogQHBhcmFtIHshZnVuY3Rpb24oIUV2ZW50KTp2b2lkfSBoYW5kbGVyIEV2ZW50IGxpc3RlbmVyIGZ1bmN0aW9uIHByZXZpb3VzbHkgcGFzc2VkIHRvXG4gKiAgYGFkZExpc3RlbmVyYC5cbiAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiBhIGdlc3R1cmUgZXZlbnQgbGlzdGVuZXIgd2FzIHJlbW92ZWQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZW1vdmVMaXN0ZW5lcihub2RlLCBldlR5cGUsIGhhbmRsZXIpIHtcbiAgaWYgKGdlc3R1cmVzW2V2VHlwZV0pIHtcbiAgICBfcmVtb3ZlKG5vZGUsIGV2VHlwZSwgaGFuZGxlcik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vKipcbiAqIGF1dG9tYXRlIHRoZSBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBuYXRpdmUgZXZlbnRzXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7IUV2ZW50VGFyZ2V0fSBub2RlIE5vZGUgb24gd2hpY2ggdG8gYWRkIHRoZSBldmVudC5cbiAqIEBwYXJhbSB7c3RyaW5nfSBldlR5cGUgRXZlbnQgdHlwZSB0byBhZGQuXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCl9IGhhbmRsZXIgRXZlbnQgaGFuZGxlciBmdW5jdGlvbi5cbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIF9hZGQobm9kZSwgZXZUeXBlLCBoYW5kbGVyKSB7XG4gIGxldCByZWNvZ25pemVyID0gZ2VzdHVyZXNbZXZUeXBlXTtcbiAgbGV0IGRlcHMgPSByZWNvZ25pemVyLmRlcHM7XG4gIGxldCBuYW1lID0gcmVjb2duaXplci5uYW1lO1xuICBsZXQgZ29iaiA9IG5vZGVbR0VTVFVSRV9LRVldO1xuICBpZiAoIWdvYmopIHtcbiAgICBub2RlW0dFU1RVUkVfS0VZXSA9IGdvYmogPSB7fTtcbiAgfVxuICBmb3IgKGxldCBpID0gMCwgZGVwLCBnZDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcbiAgICBkZXAgPSBkZXBzW2ldO1xuICAgIC8vIGRvbid0IGFkZCBtb3VzZSBoYW5kbGVycyBvbiBpT1MgYmVjYXVzZSB0aGV5IGNhdXNlIGdyYXkgc2VsZWN0aW9uIG92ZXJsYXlzXG4gICAgaWYgKElTX1RPVUNIX09OTFkgJiYgaXNNb3VzZUV2ZW50KGRlcCkgJiYgZGVwICE9PSAnY2xpY2snKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgZ2QgPSBnb2JqW2RlcF07XG4gICAgaWYgKCFnZCkge1xuICAgICAgZ29ialtkZXBdID0gZ2QgPSB7X2NvdW50OiAwfTtcbiAgICB9XG4gICAgaWYgKGdkLl9jb3VudCA9PT0gMCkge1xuICAgICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGRlcCwgX2hhbmRsZU5hdGl2ZSwgUEFTU0lWRV9UT1VDSChkZXApKTtcbiAgICB9XG4gICAgZ2RbbmFtZV0gPSAoZ2RbbmFtZV0gfHwgMCkgKyAxO1xuICAgIGdkLl9jb3VudCA9IChnZC5fY291bnQgfHwgMCkgKyAxO1xuICB9XG4gIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldlR5cGUsIGhhbmRsZXIpO1xuICBpZiAocmVjb2duaXplci50b3VjaEFjdGlvbikge1xuICAgIHNldFRvdWNoQWN0aW9uKG5vZGUsIHJlY29nbml6ZXIudG91Y2hBY3Rpb24pO1xuICB9XG59XG5cbi8qKlxuICogYXV0b21hdGUgZXZlbnQgbGlzdGVuZXIgcmVtb3ZhbCBmb3IgbmF0aXZlIGV2ZW50c1xuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gbm9kZSBOb2RlIG9uIHdoaWNoIHRvIHJlbW92ZSB0aGUgZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZUeXBlIEV2ZW50IHR5cGUgdG8gcmVtb3ZlLlxuICogQHBhcmFtIHtmdW5jdGlvbighRXZlbnQpOiB2b2lkfSBoYW5kbGVyIEV2ZW50IGhhbmRsZXIgZnVuY3Rpb24uXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiBfcmVtb3ZlKG5vZGUsIGV2VHlwZSwgaGFuZGxlcikge1xuICBsZXQgcmVjb2duaXplciA9IGdlc3R1cmVzW2V2VHlwZV07XG4gIGxldCBkZXBzID0gcmVjb2duaXplci5kZXBzO1xuICBsZXQgbmFtZSA9IHJlY29nbml6ZXIubmFtZTtcbiAgbGV0IGdvYmogPSBub2RlW0dFU1RVUkVfS0VZXTtcbiAgaWYgKGdvYmopIHtcbiAgICBmb3IgKGxldCBpID0gMCwgZGVwLCBnZDsgaSA8IGRlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGRlcCA9IGRlcHNbaV07XG4gICAgICBnZCA9IGdvYmpbZGVwXTtcbiAgICAgIGlmIChnZCAmJiBnZFtuYW1lXSkge1xuICAgICAgICBnZFtuYW1lXSA9IChnZFtuYW1lXSB8fCAxKSAtIDE7XG4gICAgICAgIGdkLl9jb3VudCA9IChnZC5fY291bnQgfHwgMSkgLSAxO1xuICAgICAgICBpZiAoZ2QuX2NvdW50ID09PSAwKSB7XG4gICAgICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGRlcCwgX2hhbmRsZU5hdGl2ZSwgUEFTU0lWRV9UT1VDSChkZXApKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZUeXBlLCBoYW5kbGVyKTtcbn1cblxuLyoqXG4gKiBSZWdpc3RlcnMgYSBuZXcgZ2VzdHVyZSBldmVudCByZWNvZ25pemVyIGZvciBhZGRpbmcgbmV3IGN1c3RvbVxuICogZ2VzdHVyZSBldmVudCB0eXBlcy5cbiAqXG4gKiBAcGFyYW0geyFHZXN0dXJlUmVjb2duaXplcn0gcmVjb2cgR2VzdHVyZSByZWNvZ25pemVyIGRlc2NyaXB0b3JcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZWdpc3RlcihyZWNvZykge1xuICByZWNvZ25pemVycy5wdXNoKHJlY29nKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCByZWNvZy5lbWl0cy5sZW5ndGg7IGkrKykge1xuICAgIGdlc3R1cmVzW3JlY29nLmVtaXRzW2ldXSA9IHJlY29nO1xuICB9XG59XG5cbi8qKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBldk5hbWUgRXZlbnQgbmFtZS5cbiAqIEByZXR1cm4ge09iamVjdH0gUmV0dXJucyB0aGUgZ2VzdHVyZSBmb3IgdGhlIGdpdmVuIGV2ZW50IG5hbWUuXG4gKi9cbmZ1bmN0aW9uIF9maW5kUmVjb2duaXplckJ5RXZlbnQoZXZOYW1lKSB7XG4gIGZvciAobGV0IGkgPSAwLCByOyBpIDwgcmVjb2duaXplcnMubGVuZ3RoOyBpKyspIHtcbiAgICByID0gcmVjb2duaXplcnNbaV07XG4gICAgZm9yIChsZXQgaiA9IDAsIG47IGogPCByLmVtaXRzLmxlbmd0aDsgaisrKSB7XG4gICAgICBuID0gci5lbWl0c1tqXTtcbiAgICAgIGlmIChuID09PSBldk5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHI7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG4vKipcbiAqIFNldHMgc2Nyb2xsaW5nIGRpcmVjdGlvbiBvbiBub2RlLlxuICpcbiAqIFRoaXMgdmFsdWUgaXMgY2hlY2tlZCBvbiBmaXJzdCBtb3ZlLCB0aHVzIGl0IHNob3VsZCBiZSBjYWxsZWQgcHJpb3IgdG9cbiAqIGFkZGluZyBldmVudCBsaXN0ZW5lcnMuXG4gKlxuICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IG5vZGUgTm9kZSB0byBzZXQgdG91Y2ggYWN0aW9uIHNldHRpbmcgb25cbiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSBUb3VjaCBhY3Rpb24gdmFsdWVcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXRUb3VjaEFjdGlvbihub2RlLCB2YWx1ZSkge1xuICBpZiAoSEFTX05BVElWRV9UQSAmJiBub2RlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAvLyBOT1RFOiBhZGQgdG91Y2hBY3Rpb24gYXN5bmMgc28gdGhhdCBldmVudHMgY2FuIGJlIGFkZGVkIGluXG4gICAgLy8gY3VzdG9tIGVsZW1lbnQgY29uc3RydWN0b3JzLiBPdGhlcndpc2Ugd2UgcnVuIGFmb3VsIG9mIGN1c3RvbVxuICAgIC8vIGVsZW1lbnRzIHJlc3RyaWN0aW9uIGFnYWluc3Qgc2V0dGluZ3MgYXR0cmlidXRlcyAoc3R5bGUpIGluIHRoZVxuICAgIC8vIGNvbnN0cnVjdG9yLlxuICAgIG1pY3JvVGFzay5ydW4oKCkgPT4ge1xuICAgICAgbm9kZS5zdHlsZS50b3VjaEFjdGlvbiA9IHZhbHVlO1xuICAgIH0pO1xuICB9XG4gIG5vZGVbVE9VQ0hfQUNUSU9OXSA9IHZhbHVlO1xufVxuXG4vKipcbiAqIERpc3BhdGNoZXMgYW4gZXZlbnQgb24gdGhlIGB0YXJnZXRgIGVsZW1lbnQgb2YgYHR5cGVgIHdpdGggdGhlIGdpdmVuXG4gKiBgZGV0YWlsYC5cbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyFFdmVudFRhcmdldH0gdGFyZ2V0IFRoZSBlbGVtZW50IG9uIHdoaWNoIHRvIGZpcmUgYW4gZXZlbnQuXG4gKiBAcGFyYW0ge3N0cmluZ30gdHlwZSBUaGUgdHlwZSBvZiBldmVudCB0byBmaXJlLlxuICogQHBhcmFtIHshT2JqZWN0PX0gZGV0YWlsIFRoZSBkZXRhaWwgb2JqZWN0IHRvIHBvcHVsYXRlIG9uIHRoZSBldmVudC5cbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIF9maXJlKHRhcmdldCwgdHlwZSwgZGV0YWlsKSB7XG4gIGxldCBldiA9IG5ldyBFdmVudCh0eXBlLCB7IGJ1YmJsZXM6IHRydWUsIGNhbmNlbGFibGU6IHRydWUsIGNvbXBvc2VkOiB0cnVlIH0pO1xuICBldi5kZXRhaWwgPSBkZXRhaWw7XG4gIHdyYXAoLyoqIEB0eXBlIHshTm9kZX0gKi8odGFyZ2V0KSkuZGlzcGF0Y2hFdmVudChldik7XG4gIC8vIGZvcndhcmQgYHByZXZlbnREZWZhdWx0YCBpbiBhIGNsZWFuIHdheVxuICBpZiAoZXYuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgIGxldCBwcmV2ZW50ZXIgPSBkZXRhaWwucHJldmVudGVyIHx8IGRldGFpbC5zb3VyY2VFdmVudDtcbiAgICBpZiAocHJldmVudGVyICYmIHByZXZlbnRlci5wcmV2ZW50RGVmYXVsdCkge1xuICAgICAgcHJldmVudGVyLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUHJldmVudHMgdGhlIGRpc3BhdGNoIGFuZCBkZWZhdWx0IGFjdGlvbiBvZiB0aGUgZ2l2ZW4gZXZlbnQgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZ30gZXZOYW1lIEV2ZW50IG5hbWUuXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJldmVudChldk5hbWUpIHtcbiAgbGV0IHJlY29nbml6ZXIgPSBfZmluZFJlY29nbml6ZXJCeUV2ZW50KGV2TmFtZSk7XG4gIGlmIChyZWNvZ25pemVyLmluZm8pIHtcbiAgICByZWNvZ25pemVyLmluZm8ucHJldmVudCA9IHRydWU7XG4gIH1cbn1cblxuLyoqXG4gKiBSZXNldCB0aGUgMjUwMG1zIHRpbWVvdXQgb24gcHJvY2Vzc2luZyBtb3VzZSBpbnB1dCBhZnRlciBkZXRlY3RpbmcgdG91Y2ggaW5wdXQuXG4gKlxuICogVG91Y2ggaW5wdXRzIGNyZWF0ZSBzeW50aGVzaXplZCBtb3VzZSBpbnB1dHMgYW55d2hlcmUgZnJvbSAwIHRvIDIwMDBtcyBhZnRlciB0aGUgdG91Y2guXG4gKiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZHVyaW5nIHRlc3Rpbmcgd2l0aCBzaW11bGF0ZWQgdG91Y2ggaW5wdXRzLlxuICogQ2FsbGluZyB0aGlzIG1ldGhvZCBpbiBwcm9kdWN0aW9uIG1heSBjYXVzZSBkdXBsaWNhdGUgdGFwcyBvciBvdGhlciBHZXN0dXJlcy5cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRNb3VzZUNhbmNlbGxlcigpIHtcbiAgaWYgKFBPSU5URVJTVEFURS5tb3VzZS5tb3VzZUlnbm9yZUpvYikge1xuICAgIFBPSU5URVJTVEFURS5tb3VzZS5tb3VzZUlnbm9yZUpvYi5mbHVzaCgpO1xuICB9XG59XG5cbi8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG5cbnJlZ2lzdGVyKHtcbiAgbmFtZTogJ2Rvd251cCcsXG4gIGRlcHM6IFsnbW91c2Vkb3duJywgJ3RvdWNoc3RhcnQnLCAndG91Y2hlbmQnXSxcbiAgZmxvdzoge1xuICAgIHN0YXJ0OiBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J10sXG4gICAgZW5kOiBbJ21vdXNldXAnLCAndG91Y2hlbmQnXVxuICB9LFxuICBlbWl0czogWydkb3duJywgJ3VwJ10sXG5cbiAgaW5mbzoge1xuICAgIG1vdmVmbjogbnVsbCxcbiAgICB1cGZuOiBudWxsXG4gIH0sXG5cbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHJlc2V0OiBmdW5jdGlvbigpIHtcbiAgICB1bnRyYWNrRG9jdW1lbnQodGhpcy5pbmZvKTtcbiAgfSxcblxuICAvKipcbiAgICogQHRoaXMge0dlc3R1cmVSZWNvZ25pemVyfVxuICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIG1vdXNlZG93bjogZnVuY3Rpb24oZSkge1xuICAgIGlmICghaGFzTGVmdE1vdXNlQnV0dG9uKGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCB0ID0gX2ZpbmRPcmlnaW5hbFRhcmdldChlKTtcbiAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgbGV0IG1vdmVmbiA9IGZ1bmN0aW9uIG1vdmVmbihlKSB7XG4gICAgICBpZiAoIWhhc0xlZnRNb3VzZUJ1dHRvbihlKSkge1xuICAgICAgICBkb3dudXBGaXJlKCd1cCcsIHQsIGUpO1xuICAgICAgICB1bnRyYWNrRG9jdW1lbnQoc2VsZi5pbmZvKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIGxldCB1cGZuID0gZnVuY3Rpb24gdXBmbihlKSB7XG4gICAgICBpZiAoaGFzTGVmdE1vdXNlQnV0dG9uKGUpKSB7XG4gICAgICAgIGRvd251cEZpcmUoJ3VwJywgdCwgZSk7XG4gICAgICB9XG4gICAgICB1bnRyYWNrRG9jdW1lbnQoc2VsZi5pbmZvKTtcbiAgICB9O1xuICAgIHRyYWNrRG9jdW1lbnQodGhpcy5pbmZvLCBtb3ZlZm4sIHVwZm4pO1xuICAgIGRvd251cEZpcmUoJ2Rvd24nLCB0LCBlKTtcbiAgfSxcbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB0b3VjaHN0YXJ0OiBmdW5jdGlvbihlKSB7XG4gICAgZG93bnVwRmlyZSgnZG93bicsIF9maW5kT3JpZ2luYWxUYXJnZXQoZSksIGUuY2hhbmdlZFRvdWNoZXNbMF0sIGUpO1xuICB9LFxuICAvKipcbiAgICogQHRoaXMge0dlc3R1cmVSZWNvZ25pemVyfVxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHRvdWNoZW5kOiBmdW5jdGlvbihlKSB7XG4gICAgZG93bnVwRmlyZSgndXAnLCBfZmluZE9yaWdpbmFsVGFyZ2V0KGUpLCBlLmNoYW5nZWRUb3VjaGVzWzBdLCBlKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7RXZlbnRUYXJnZXR9IHRhcmdldFxuICogQHBhcmFtIHtFdmVudHxUb3VjaH0gZXZlbnRcbiAqIEBwYXJhbSB7RXZlbnQ9fSBwcmV2ZW50ZXJcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmZ1bmN0aW9uIGRvd251cEZpcmUodHlwZSwgdGFyZ2V0LCBldmVudCwgcHJldmVudGVyKSB7XG4gIGlmICghdGFyZ2V0KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIF9maXJlKHRhcmdldCwgdHlwZSwge1xuICAgIHg6IGV2ZW50LmNsaWVudFgsXG4gICAgeTogZXZlbnQuY2xpZW50WSxcbiAgICBzb3VyY2VFdmVudDogZXZlbnQsXG4gICAgcHJldmVudGVyOiBwcmV2ZW50ZXIsXG4gICAgcHJldmVudDogZnVuY3Rpb24oZSkge1xuICAgICAgcmV0dXJuIHByZXZlbnQoZSk7XG4gICAgfVxuICB9KTtcbn1cblxucmVnaXN0ZXIoe1xuICBuYW1lOiAndHJhY2snLFxuICB0b3VjaEFjdGlvbjogJ25vbmUnLFxuICBkZXBzOiBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0JywgJ3RvdWNobW92ZScsICd0b3VjaGVuZCddLFxuICBmbG93OiB7XG4gICAgc3RhcnQ6IFsnbW91c2Vkb3duJywgJ3RvdWNoc3RhcnQnXSxcbiAgICBlbmQ6IFsnbW91c2V1cCcsICd0b3VjaGVuZCddXG4gIH0sXG4gIGVtaXRzOiBbJ3RyYWNrJ10sXG5cbiAgaW5mbzoge1xuICAgIHg6IDAsXG4gICAgeTogMCxcbiAgICBzdGF0ZTogJ3N0YXJ0JyxcbiAgICBzdGFydGVkOiBmYWxzZSxcbiAgICBtb3ZlczogW10sXG4gICAgLyoqIEB0aGlzIHtHZXN0dXJlSW5mb30gKi9cbiAgICBhZGRNb3ZlOiBmdW5jdGlvbihtb3ZlKSB7XG4gICAgICBpZiAodGhpcy5tb3Zlcy5sZW5ndGggPiBUUkFDS19MRU5HVEgpIHtcbiAgICAgICAgdGhpcy5tb3Zlcy5zaGlmdCgpO1xuICAgICAgfVxuICAgICAgdGhpcy5tb3Zlcy5wdXNoKG1vdmUpO1xuICAgIH0sXG4gICAgbW92ZWZuOiBudWxsLFxuICAgIHVwZm46IG51bGwsXG4gICAgcHJldmVudDogZmFsc2VcbiAgfSxcblxuICAvKipcbiAgICogQHRoaXMge0dlc3R1cmVSZWNvZ25pemVyfVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgcmVzZXQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuaW5mby5zdGF0ZSA9ICdzdGFydCc7XG4gICAgdGhpcy5pbmZvLnN0YXJ0ZWQgPSBmYWxzZTtcbiAgICB0aGlzLmluZm8ubW92ZXMgPSBbXTtcbiAgICB0aGlzLmluZm8ueCA9IDA7XG4gICAgdGhpcy5pbmZvLnkgPSAwO1xuICAgIHRoaXMuaW5mby5wcmV2ZW50ID0gZmFsc2U7XG4gICAgdW50cmFja0RvY3VtZW50KHRoaXMuaW5mbyk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBtb3VzZWRvd246IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoIWhhc0xlZnRNb3VzZUJ1dHRvbihlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBsZXQgdCA9IF9maW5kT3JpZ2luYWxUYXJnZXQoZSk7XG4gICAgbGV0IHNlbGYgPSB0aGlzO1xuICAgIGxldCBtb3ZlZm4gPSBmdW5jdGlvbiBtb3ZlZm4oZSkge1xuICAgICAgbGV0IHggPSBlLmNsaWVudFgsIHkgPSBlLmNsaWVudFk7XG4gICAgICBpZiAodHJhY2tIYXNNb3ZlZEVub3VnaChzZWxmLmluZm8sIHgsIHkpKSB7XG4gICAgICAgIC8vIGZpcnN0IG1vdmUgaXMgJ3N0YXJ0Jywgc3Vic2VxdWVudCBtb3ZlcyBhcmUgJ21vdmUnLCBtb3VzZXVwIGlzICdlbmQnXG4gICAgICAgIHNlbGYuaW5mby5zdGF0ZSA9IHNlbGYuaW5mby5zdGFydGVkID8gKGUudHlwZSA9PT0gJ21vdXNldXAnID8gJ2VuZCcgOiAndHJhY2snKSA6ICdzdGFydCc7XG4gICAgICAgIGlmIChzZWxmLmluZm8uc3RhdGUgPT09ICdzdGFydCcpIHtcbiAgICAgICAgICAvLyBpZiBhbmQgb25seSBpZiB0cmFja2luZywgYWx3YXlzIHByZXZlbnQgdGFwXG4gICAgICAgICAgcHJldmVudCgndGFwJyk7XG4gICAgICAgIH1cbiAgICAgICAgc2VsZi5pbmZvLmFkZE1vdmUoe3g6IHgsIHk6IHl9KTtcbiAgICAgICAgaWYgKCFoYXNMZWZ0TW91c2VCdXR0b24oZSkpIHtcbiAgICAgICAgICAvLyBhbHdheXMgZmlyZSBcImVuZFwiXG4gICAgICAgICAgc2VsZi5pbmZvLnN0YXRlID0gJ2VuZCc7XG4gICAgICAgICAgdW50cmFja0RvY3VtZW50KHNlbGYuaW5mbyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICB0cmFja0ZpcmUoc2VsZi5pbmZvLCB0LCBlKTtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLmluZm8uc3RhcnRlZCA9IHRydWU7XG4gICAgICB9XG4gICAgfTtcbiAgICBsZXQgdXBmbiA9IGZ1bmN0aW9uIHVwZm4oZSkge1xuICAgICAgaWYgKHNlbGYuaW5mby5zdGFydGVkKSB7XG4gICAgICAgIG1vdmVmbihlKTtcbiAgICAgIH1cblxuICAgICAgLy8gcmVtb3ZlIHRoZSB0ZW1wb3JhcnkgbGlzdGVuZXJzXG4gICAgICB1bnRyYWNrRG9jdW1lbnQoc2VsZi5pbmZvKTtcbiAgICB9O1xuICAgIC8vIGFkZCB0ZW1wb3JhcnkgZG9jdW1lbnQgbGlzdGVuZXJzIGFzIG1vdXNlIHJldGFyZ2V0c1xuICAgIHRyYWNrRG9jdW1lbnQodGhpcy5pbmZvLCBtb3ZlZm4sIHVwZm4pO1xuICAgIHRoaXMuaW5mby54ID0gZS5jbGllbnRYO1xuICAgIHRoaXMuaW5mby55ID0gZS5jbGllbnRZO1xuICB9LFxuICAvKipcbiAgICogQHRoaXMge0dlc3R1cmVSZWNvZ25pemVyfVxuICAgKiBAcGFyYW0ge1RvdWNoRXZlbnR9IGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHRvdWNoc3RhcnQ6IGZ1bmN0aW9uKGUpIHtcbiAgICBsZXQgY3QgPSBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgIHRoaXMuaW5mby54ID0gY3QuY2xpZW50WDtcbiAgICB0aGlzLmluZm8ueSA9IGN0LmNsaWVudFk7XG4gIH0sXG4gIC8qKlxuICAgKiBAdGhpcyB7R2VzdHVyZVJlY29nbml6ZXJ9XG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdG91Y2htb3ZlOiBmdW5jdGlvbihlKSB7XG4gICAgbGV0IHQgPSBfZmluZE9yaWdpbmFsVGFyZ2V0KGUpO1xuICAgIGxldCBjdCA9IGUuY2hhbmdlZFRvdWNoZXNbMF07XG4gICAgbGV0IHggPSBjdC5jbGllbnRYLCB5ID0gY3QuY2xpZW50WTtcbiAgICBpZiAodHJhY2tIYXNNb3ZlZEVub3VnaCh0aGlzLmluZm8sIHgsIHkpKSB7XG4gICAgICBpZiAodGhpcy5pbmZvLnN0YXRlID09PSAnc3RhcnQnKSB7XG4gICAgICAgIC8vIGlmIGFuZCBvbmx5IGlmIHRyYWNraW5nLCBhbHdheXMgcHJldmVudCB0YXBcbiAgICAgICAgcHJldmVudCgndGFwJyk7XG4gICAgICB9XG4gICAgICB0aGlzLmluZm8uYWRkTW92ZSh7eDogeCwgeTogeX0pO1xuICAgICAgdHJhY2tGaXJlKHRoaXMuaW5mbywgdCwgY3QpO1xuICAgICAgdGhpcy5pbmZvLnN0YXRlID0gJ3RyYWNrJztcbiAgICAgIHRoaXMuaW5mby5zdGFydGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG4gIC8qKlxuICAgKiBAdGhpcyB7R2VzdHVyZVJlY29nbml6ZXJ9XG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdG91Y2hlbmQ6IGZ1bmN0aW9uKGUpIHtcbiAgICBsZXQgdCA9IF9maW5kT3JpZ2luYWxUYXJnZXQoZSk7XG4gICAgbGV0IGN0ID0gZS5jaGFuZ2VkVG91Y2hlc1swXTtcbiAgICAvLyBvbmx5IHRyYWNrZW5kIGlmIHRyYWNrIHdhcyBzdGFydGVkIGFuZCBub3QgYWJvcnRlZFxuICAgIGlmICh0aGlzLmluZm8uc3RhcnRlZCkge1xuICAgICAgLy8gcmVzZXQgc3RhcnRlZCBzdGF0ZSBvbiB1cFxuICAgICAgdGhpcy5pbmZvLnN0YXRlID0gJ2VuZCc7XG4gICAgICB0aGlzLmluZm8uYWRkTW92ZSh7eDogY3QuY2xpZW50WCwgeTogY3QuY2xpZW50WX0pO1xuICAgICAgdHJhY2tGaXJlKHRoaXMuaW5mbywgdCwgY3QpO1xuICAgIH1cbiAgfVxufSk7XG5cbi8qKlxuICogQHBhcmFtIHshR2VzdHVyZUluZm99IGluZm9cbiAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gKiBAcGFyYW0ge251bWJlcn0geVxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gdHJhY2tIYXNNb3ZlZEVub3VnaChpbmZvLCB4LCB5KSB7XG4gIGlmIChpbmZvLnByZXZlbnQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgaWYgKGluZm8uc3RhcnRlZCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGxldCBkeCA9IE1hdGguYWJzKGluZm8ueCAtIHgpO1xuICBsZXQgZHkgPSBNYXRoLmFicyhpbmZvLnkgLSB5KTtcbiAgcmV0dXJuIChkeCA+PSBUUkFDS19ESVNUQU5DRSB8fCBkeSA+PSBUUkFDS19ESVNUQU5DRSk7XG59XG5cbi8qKlxuICogQHBhcmFtIHshR2VzdHVyZUluZm99IGluZm9cbiAqIEBwYXJhbSB7P0V2ZW50VGFyZ2V0fSB0YXJnZXRcbiAqIEBwYXJhbSB7VG91Y2h9IHRvdWNoXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5mdW5jdGlvbiB0cmFja0ZpcmUoaW5mbywgdGFyZ2V0LCB0b3VjaCkge1xuICBpZiAoIXRhcmdldCkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgc2Vjb25kbGFzdCA9IGluZm8ubW92ZXNbaW5mby5tb3Zlcy5sZW5ndGggLSAyXTtcbiAgbGV0IGxhc3Rtb3ZlID0gaW5mby5tb3Zlc1tpbmZvLm1vdmVzLmxlbmd0aCAtIDFdO1xuICBsZXQgZHggPSBsYXN0bW92ZS54IC0gaW5mby54O1xuICBsZXQgZHkgPSBsYXN0bW92ZS55IC0gaW5mby55O1xuICBsZXQgZGR4LCBkZHkgPSAwO1xuICBpZiAoc2Vjb25kbGFzdCkge1xuICAgIGRkeCA9IGxhc3Rtb3ZlLnggLSBzZWNvbmRsYXN0Lng7XG4gICAgZGR5ID0gbGFzdG1vdmUueSAtIHNlY29uZGxhc3QueTtcbiAgfVxuICBfZmlyZSh0YXJnZXQsICd0cmFjaycsIHtcbiAgICBzdGF0ZTogaW5mby5zdGF0ZSxcbiAgICB4OiB0b3VjaC5jbGllbnRYLFxuICAgIHk6IHRvdWNoLmNsaWVudFksXG4gICAgZHg6IGR4LFxuICAgIGR5OiBkeSxcbiAgICBkZHg6IGRkeCxcbiAgICBkZHk6IGRkeSxcbiAgICBzb3VyY2VFdmVudDogdG91Y2gsXG4gICAgaG92ZXI6IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIGRlZXBUYXJnZXRGaW5kKHRvdWNoLmNsaWVudFgsIHRvdWNoLmNsaWVudFkpO1xuICAgIH1cbiAgfSk7XG59XG5cbnJlZ2lzdGVyKHtcbiAgbmFtZTogJ3RhcCcsXG4gIGRlcHM6IFsnbW91c2Vkb3duJywgJ2NsaWNrJywgJ3RvdWNoc3RhcnQnLCAndG91Y2hlbmQnXSxcbiAgZmxvdzoge1xuICAgIHN0YXJ0OiBbJ21vdXNlZG93bicsICd0b3VjaHN0YXJ0J10sXG4gICAgZW5kOiBbJ2NsaWNrJywgJ3RvdWNoZW5kJ11cbiAgfSxcbiAgZW1pdHM6IFsndGFwJ10sXG4gIGluZm86IHtcbiAgICB4OiBOYU4sXG4gICAgeTogTmFOLFxuICAgIHByZXZlbnQ6IGZhbHNlXG4gIH0sXG4gIC8qKlxuICAgKiBAdGhpcyB7R2VzdHVyZVJlY29nbml6ZXJ9XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICByZXNldDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5pbmZvLnggPSBOYU47XG4gICAgdGhpcy5pbmZvLnkgPSBOYU47XG4gICAgdGhpcy5pbmZvLnByZXZlbnQgPSBmYWxzZTtcbiAgfSxcbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBtb3VzZWRvd246IGZ1bmN0aW9uKGUpIHtcbiAgICBpZiAoaGFzTGVmdE1vdXNlQnV0dG9uKGUpKSB7XG4gICAgICB0aGlzLmluZm8ueCA9IGUuY2xpZW50WDtcbiAgICAgIHRoaXMuaW5mby55ID0gZS5jbGllbnRZO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBjbGljazogZnVuY3Rpb24oZSkge1xuICAgIGlmIChoYXNMZWZ0TW91c2VCdXR0b24oZSkpIHtcbiAgICAgIHRyYWNrRm9yd2FyZCh0aGlzLmluZm8sIGUpO1xuICAgIH1cbiAgfSxcbiAgLyoqXG4gICAqIEB0aGlzIHtHZXN0dXJlUmVjb2duaXplcn1cbiAgICogQHBhcmFtIHtUb3VjaEV2ZW50fSBlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICB0b3VjaHN0YXJ0OiBmdW5jdGlvbihlKSB7XG4gICAgY29uc3QgdG91Y2ggPSBlLmNoYW5nZWRUb3VjaGVzWzBdO1xuICAgIHRoaXMuaW5mby54ID0gdG91Y2guY2xpZW50WDtcbiAgICB0aGlzLmluZm8ueSA9IHRvdWNoLmNsaWVudFk7XG4gIH0sXG4gIC8qKlxuICAgKiBAdGhpcyB7R2VzdHVyZVJlY29nbml6ZXJ9XG4gICAqIEBwYXJhbSB7VG91Y2hFdmVudH0gZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgdG91Y2hlbmQ6IGZ1bmN0aW9uKGUpIHtcbiAgICB0cmFja0ZvcndhcmQodGhpcy5pbmZvLCBlLmNoYW5nZWRUb3VjaGVzWzBdLCBlKTtcbiAgfVxufSk7XG5cbi8qKlxuICogQHBhcmFtIHshR2VzdHVyZUluZm99IGluZm9cbiAqIEBwYXJhbSB7RXZlbnQgfCBUb3VjaH0gZVxuICogQHBhcmFtIHtFdmVudD19IHByZXZlbnRlclxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZnVuY3Rpb24gdHJhY2tGb3J3YXJkKGluZm8sIGUsIHByZXZlbnRlcikge1xuICBsZXQgZHggPSBNYXRoLmFicyhlLmNsaWVudFggLSBpbmZvLngpO1xuICBsZXQgZHkgPSBNYXRoLmFicyhlLmNsaWVudFkgLSBpbmZvLnkpO1xuICAvLyBmaW5kIG9yaWdpbmFsIHRhcmdldCBmcm9tIGBwcmV2ZW50ZXJgIGZvciBUb3VjaEV2ZW50cywgb3IgYGVgIGZvciBNb3VzZUV2ZW50c1xuICBsZXQgdCA9IF9maW5kT3JpZ2luYWxUYXJnZXQoKHByZXZlbnRlciB8fCBlKSk7XG4gIGlmICghdCB8fCAoY2FuQmVEaXNhYmxlZFsvKiogQHR5cGUgeyFIVE1MRWxlbWVudH0gKi8odCkubG9jYWxOYW1lXSAmJiB0Lmhhc0F0dHJpYnV0ZSgnZGlzYWJsZWQnKSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gZHgsZHkgY2FuIGJlIE5hTiBpZiBgY2xpY2tgIGhhcyBiZWVuIHNpbXVsYXRlZCBhbmQgdGhlcmUgd2FzIG5vIGBkb3duYCBmb3IgYHN0YXJ0YFxuICBpZiAoaXNOYU4oZHgpIHx8IGlzTmFOKGR5KSB8fCAoZHggPD0gVEFQX0RJU1RBTkNFICYmIGR5IDw9IFRBUF9ESVNUQU5DRSkgfHwgaXNTeW50aGV0aWNDbGljayhlKSkge1xuICAgIC8vIHByZXZlbnQgdGFwcyBmcm9tIGJlaW5nIGdlbmVyYXRlZCBpZiBhbiBldmVudCBoYXMgY2FuY2VsZWQgdGhlbVxuICAgIGlmICghaW5mby5wcmV2ZW50KSB7XG4gICAgICBfZmlyZSh0LCAndGFwJywge1xuICAgICAgICB4OiBlLmNsaWVudFgsXG4gICAgICAgIHk6IGUuY2xpZW50WSxcbiAgICAgICAgc291cmNlRXZlbnQ6IGUsXG4gICAgICAgIHByZXZlbnRlcjogcHJldmVudGVyXG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyogZXNsaW50LWVuYWJsZSB2YWxpZC1qc2RvYyAqL1xuXG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBjb25zdCBmaW5kT3JpZ2luYWxUYXJnZXQgPSBfZmluZE9yaWdpbmFsVGFyZ2V0O1xuXG4vKiogQGRlcHJlY2F0ZWQgKi9cbmV4cG9ydCBjb25zdCBhZGQgPSBhZGRMaXN0ZW5lcjtcblxuLyoqIEBkZXByZWNhdGVkICovXG5leHBvcnQgY29uc3QgcmVtb3ZlID0gcmVtb3ZlTGlzdGVuZXI7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi4vdXRpbHMvYm9vdC5qcyc7XG5cbmltcG9ydCB7IGRlZHVwaW5nTWl4aW4gfSBmcm9tICcuLi91dGlscy9taXhpbi5qcyc7XG5pbXBvcnQgeyBhZGRMaXN0ZW5lciwgcmVtb3ZlTGlzdGVuZXIgfSBmcm9tICcuLi91dGlscy9nZXN0dXJlcy5qcyc7XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IHByb3ZpZGVzIEFQSSBmb3IgYWRkaW5nIFBvbHltZXIncyBjcm9zcy1wbGF0Zm9ybVxuICogZ2VzdHVyZSBldmVudHMgdG8gbm9kZXMuXG4gKlxuICogVGhlIEFQSSBpcyBkZXNpZ25lZCB0byBiZSBjb21wYXRpYmxlIHdpdGggb3ZlcnJpZGUgcG9pbnRzIGltcGxlbWVudGVkXG4gKiBpbiBgVGVtcGxhdGVTdGFtcGAgc3VjaCB0aGF0IGRlY2xhcmF0aXZlIGV2ZW50IGxpc3RlbmVycyBpblxuICogdGVtcGxhdGVzIHdpbGwgc3VwcG9ydCBnZXN0dXJlIGV2ZW50cyB3aGVuIHRoaXMgbWl4aW4gaXMgYXBwbGllZCBhbG9uZyB3aXRoXG4gKiBgVGVtcGxhdGVTdGFtcGAuXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgQVBJIGZvciBhZGRpbmcgUG9seW1lcidzXG4gKiAgIGNyb3NzLXBsYXRmb3JtIGdlc3R1cmUgZXZlbnRzIHRvIG5vZGVzXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3MgQ2xhc3MgdG8gYXBwbHkgbWl4aW4gdG8uXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihuZXc6VCl9IHN1cGVyQ2xhc3Mgd2l0aCBtaXhpbiBhcHBsaWVkLlxuICovXG5leHBvcnQgY29uc3QgR2VzdHVyZUV2ZW50TGlzdGVuZXJzID0gZGVkdXBpbmdNaXhpbigoc3VwZXJDbGFzcykgPT4ge1xuICAvKipcbiAgICogQHBvbHltZXJcbiAgICogQG1peGluQ2xhc3NcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfR2VzdHVyZUV2ZW50TGlzdGVuZXJzfVxuICAgKi9cbiAgY2xhc3MgR2VzdHVyZUV2ZW50TGlzdGVuZXJzIGV4dGVuZHMgc3VwZXJDbGFzcyB7XG4gICAgLyoqXG4gICAgICogQWRkIHRoZSBldmVudCBsaXN0ZW5lciB0byB0aGUgbm9kZSBpZiBpdCBpcyBhIGdlc3R1cmVzIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IG5vZGUgTm9kZSB0byBhZGQgZXZlbnQgbGlzdGVuZXIgdG9cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIE5hbWUgb2YgZXZlbnRcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCFFdmVudCk6dm9pZH0gaGFuZGxlciBMaXN0ZW5lciBmdW5jdGlvbiB0byBhZGRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9hZGRFdmVudExpc3RlbmVyVG9Ob2RlKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcikge1xuICAgICAgaWYgKCFhZGRMaXN0ZW5lcihub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpKSB7XG4gICAgICAgIHN1cGVyLl9hZGRFdmVudExpc3RlbmVyVG9Ob2RlKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lciB0byB0aGUgbm9kZSBpZiBpdCBpcyBhIGdlc3R1cmVzIGV2ZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHshRXZlbnRUYXJnZXR9IG5vZGUgTm9kZSB0byByZW1vdmUgZXZlbnQgbGlzdGVuZXIgZnJvbVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiBldmVudFxuICAgICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUV2ZW50KTp2b2lkfSBoYW5kbGVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIHJlbW92ZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX3JlbW92ZUV2ZW50TGlzdGVuZXJGcm9tTm9kZShub2RlLCBldmVudE5hbWUsIGhhbmRsZXIpIHtcbiAgICAgIGlmICghcmVtb3ZlTGlzdGVuZXIobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyKSkge1xuICAgICAgICBzdXBlci5fcmVtb3ZlRXZlbnRMaXN0ZW5lckZyb21Ob2RlKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIEdlc3R1cmVFdmVudExpc3RlbmVycztcbn0pO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGNvbnN0IG5hdGl2ZVNoYWRvdyA9ICEod2luZG93WydTaGFkeURPTSddICYmIHdpbmRvd1snU2hhZHlET00nXVsnaW5Vc2UnXSk7XG5sZXQgbmF0aXZlQ3NzVmFyaWFibGVzXztcblxuLyoqXG4gKiBAcGFyYW0geyhTaGFkeUNTU09wdGlvbnMgfCBTaGFkeUNTU0ludGVyZmFjZSk9fSBzZXR0aW5nc1xuICovXG5mdW5jdGlvbiBjYWxjQ3NzVmFyaWFibGVzKHNldHRpbmdzKSB7XG4gIGlmIChzZXR0aW5ncyAmJiBzZXR0aW5nc1snc2hpbWNzc3Byb3BlcnRpZXMnXSkge1xuICAgIG5hdGl2ZUNzc1ZhcmlhYmxlc18gPSBmYWxzZTtcbiAgfSBlbHNlIHtcbiAgICAvLyBjaHJvbWUgNDkgaGFzIHNlbWktd29ya2luZyBjc3MgdmFycywgY2hlY2sgaWYgYm94LXNoYWRvdyB3b3Jrc1xuICAgIC8vIHNhZmFyaSA5LjEgaGFzIGEgcmVjYWxjIGJ1ZzogaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE1NTc4MlxuICAgIC8vIEhvd2V2ZXIsIHNoaW0gY3NzIGN1c3RvbSBwcm9wZXJ0aWVzIGFyZSBvbmx5IHN1cHBvcnRlZCB3aXRoIFNoYWR5RE9NIGVuYWJsZWQsXG4gICAgLy8gc28gZmFsbCBiYWNrIG9uIG5hdGl2ZSBpZiB3ZSBkbyBub3QgZGV0ZWN0IFNoYWR5RE9NXG4gICAgLy8gRWRnZSAxNTogY3VzdG9tIHByb3BlcnRpZXMgdXNlZCBpbiA6OmJlZm9yZSBhbmQgOjphZnRlciB3aWxsIGFsc28gYmUgdXNlZCBpbiB0aGUgcGFyZW50IGVsZW1lbnRcbiAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL2lzc3Vlcy8xMjQxNDI1Ny9cbiAgICBuYXRpdmVDc3NWYXJpYWJsZXNfID0gbmF0aXZlU2hhZG93IHx8IEJvb2xlYW4oIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0FwcGxlV2ViS2l0XFwvNjAxfEVkZ2VcXC8xNS8pICYmXG4gICAgICB3aW5kb3cuQ1NTICYmIENTUy5zdXBwb3J0cyAmJiBDU1Muc3VwcG9ydHMoJ2JveC1zaGFkb3cnLCAnMCAwIDAgdmFyKC0tZm9vKScpKTtcbiAgfVxufVxuXG4vKiogQHR5cGUge3N0cmluZyB8IHVuZGVmaW5lZH0gKi9cbmV4cG9ydCBsZXQgY3NzQnVpbGQ7XG5pZiAod2luZG93LlNoYWR5Q1NTICYmIHdpbmRvdy5TaGFkeUNTUy5jc3NCdWlsZCAhPT0gdW5kZWZpbmVkKSB7XG4gIGNzc0J1aWxkID0gd2luZG93LlNoYWR5Q1NTLmNzc0J1aWxkO1xufVxuXG4vKiogQHR5cGUge2Jvb2xlYW59ICovXG5leHBvcnQgY29uc3QgZGlzYWJsZVJ1bnRpbWUgPSBCb29sZWFuKHdpbmRvdy5TaGFkeUNTUyAmJiB3aW5kb3cuU2hhZHlDU1MuZGlzYWJsZVJ1bnRpbWUpO1xuXG5pZiAod2luZG93LlNoYWR5Q1NTICYmIHdpbmRvdy5TaGFkeUNTUy5uYXRpdmVDc3MgIT09IHVuZGVmaW5lZCkge1xuICBuYXRpdmVDc3NWYXJpYWJsZXNfID0gd2luZG93LlNoYWR5Q1NTLm5hdGl2ZUNzcztcbn0gZWxzZSBpZiAod2luZG93LlNoYWR5Q1NTKSB7XG4gIGNhbGNDc3NWYXJpYWJsZXMod2luZG93LlNoYWR5Q1NTKTtcbiAgLy8gcmVzZXQgd2luZG93IHZhcmlhYmxlIHRvIGxldCBTaGFkeUNTUyBBUEkgdGFrZSBpdHMgcGxhY2VcbiAgd2luZG93LlNoYWR5Q1NTID0gdW5kZWZpbmVkO1xufSBlbHNlIHtcbiAgY2FsY0Nzc1ZhcmlhYmxlcyh3aW5kb3dbJ1dlYkNvbXBvbmVudHMnXSAmJiB3aW5kb3dbJ1dlYkNvbXBvbmVudHMnXVsnZmxhZ3MnXSk7XG59XG5cbi8vIEhhY2sgZm9yIHR5cGUgZXJyb3IgdW5kZXIgbmV3IHR5cGUgaW5mZXJlbmNlIHdoaWNoIGRvZXNuJ3QgbGlrZSB0aGF0XG4vLyBuYXRpdmVDc3NWYXJpYWJsZXMgaXMgdXBkYXRlZCBpbiBhIGZ1bmN0aW9uIGFuZCBhc3NpZ25zIHRoZSB0eXBlXG4vLyBgZnVuY3Rpb24oKTogP2AgaW5zdGVhZCBvZiBgYm9vbGVhbmAuXG5leHBvcnQgY29uc3QgbmF0aXZlQ3NzVmFyaWFibGVzID0gLyoqIEB0eXBlIHtib29sZWFufSAqLyhuYXRpdmVDc3NWYXJpYWJsZXNfKTsiLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuLypcbkV4dHJlbWVseSBzaW1wbGUgY3NzIHBhcnNlci4gSW50ZW5kZWQgdG8gYmUgbm90IG1vcmUgdGhhbiB3aGF0IHdlIG5lZWRcbmFuZCBkZWZpbml0ZWx5IG5vdCBuZWNlc3NhcmlseSBjb3JyZWN0ID0pLlxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKiogQHVucmVzdHJpY3RlZCAqL1xuY2xhc3MgU3R5bGVOb2RlIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpc1snc3RhcnQnXSA9IDA7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpc1snZW5kJ10gPSAwO1xuICAgIC8qKiBAdHlwZSB7U3R5bGVOb2RlfSAqL1xuICAgIHRoaXNbJ3ByZXZpb3VzJ10gPSBudWxsO1xuICAgIC8qKiBAdHlwZSB7U3R5bGVOb2RlfSAqL1xuICAgIHRoaXNbJ3BhcmVudCddID0gbnVsbDtcbiAgICAvKiogQHR5cGUge0FycmF5PFN0eWxlTm9kZT59ICovXG4gICAgdGhpc1sncnVsZXMnXSA9IG51bGw7XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgdGhpc1sncGFyc2VkQ3NzVGV4dCddID0gJyc7XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgdGhpc1snY3NzVGV4dCddID0gJyc7XG4gICAgLyoqIEB0eXBlIHtib29sZWFufSAqL1xuICAgIHRoaXNbJ2F0UnVsZSddID0gZmFsc2U7XG4gICAgLyoqIEB0eXBlIHtudW1iZXJ9ICovXG4gICAgdGhpc1sndHlwZSddID0gMDtcbiAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICB0aGlzWydrZXlmcmFtZXNOYW1lJ10gPSAnJztcbiAgICAvKiogQHR5cGUge3N0cmluZ30gKi9cbiAgICB0aGlzWydzZWxlY3RvciddID0gJyc7XG4gICAgLyoqIEB0eXBlIHtzdHJpbmd9ICovXG4gICAgdGhpc1sncGFyc2VkU2VsZWN0b3InXSA9ICcnO1xuICB9XG59XG5cbmV4cG9ydCB7U3R5bGVOb2RlfVxuXG4vLyBnaXZlbiBhIHN0cmluZyBvZiBjc3MsIHJldHVybiBhIHNpbXBsZSBydWxlIHRyZWVcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge1N0eWxlTm9kZX1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlKHRleHQpIHtcbiAgdGV4dCA9IGNsZWFuKHRleHQpO1xuICByZXR1cm4gcGFyc2VDc3MobGV4KHRleHQpLCB0ZXh0KTtcbn1cblxuLy8gcmVtb3ZlIHN0dWZmIHdlIGRvbid0IGNhcmUgYWJvdXQgdGhhdCBtYXkgaGluZGVyIHBhcnNpbmdcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gY2xlYW4oY3NzVGV4dCkge1xuICByZXR1cm4gY3NzVGV4dC5yZXBsYWNlKFJYLmNvbW1lbnRzLCAnJykucmVwbGFjZShSWC5wb3J0LCAnJyk7XG59XG5cbi8vIHN1cGVyIHNpbXBsZSB7Li4ufSBsZXhlciB0aGF0IHJldHVybnMgYSBub2RlIHRyZWVcbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IHRleHRcbiAqIEByZXR1cm4geyFTdHlsZU5vZGV9XG4gKi9cbmZ1bmN0aW9uIGxleCh0ZXh0KSB7XG4gIGxldCByb290ID0gbmV3IFN0eWxlTm9kZSgpO1xuICByb290WydzdGFydCddID0gMDtcbiAgcm9vdFsnZW5kJ10gPSB0ZXh0Lmxlbmd0aFxuICBsZXQgbiA9IHJvb3Q7XG4gIGZvciAobGV0IGkgPSAwLCBsID0gdGV4dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAodGV4dFtpXSA9PT0gT1BFTl9CUkFDRSkge1xuICAgICAgaWYgKCFuWydydWxlcyddKSB7XG4gICAgICAgIG5bJ3J1bGVzJ10gPSBbXTtcbiAgICAgIH1cbiAgICAgIGxldCBwID0gbjtcbiAgICAgIGxldCBwcmV2aW91cyA9IHBbJ3J1bGVzJ11bcFsncnVsZXMnXS5sZW5ndGggLSAxXSB8fCBudWxsO1xuICAgICAgbiA9IG5ldyBTdHlsZU5vZGUoKTtcbiAgICAgIG5bJ3N0YXJ0J10gPSBpICsgMTtcbiAgICAgIG5bJ3BhcmVudCddID0gcDtcbiAgICAgIG5bJ3ByZXZpb3VzJ10gPSBwcmV2aW91cztcbiAgICAgIHBbJ3J1bGVzJ10ucHVzaChuKTtcbiAgICB9IGVsc2UgaWYgKHRleHRbaV0gPT09IENMT1NFX0JSQUNFKSB7XG4gICAgICBuWydlbmQnXSA9IGkgKyAxO1xuICAgICAgbiA9IG5bJ3BhcmVudCddIHx8IHJvb3Q7XG4gICAgfVxuICB9XG4gIHJldHVybiByb290O1xufVxuXG4vLyBhZGQgc2VsZWN0b3JzL2Nzc1RleHQgdG8gbm9kZSB0cmVlXG4vKipcbiAqIEBwYXJhbSB7U3R5bGVOb2RlfSBub2RlXG4gKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICogQHJldHVybiB7IVN0eWxlTm9kZX1cbiAqL1xuZnVuY3Rpb24gcGFyc2VDc3Mobm9kZSwgdGV4dCkge1xuICBsZXQgdCA9IHRleHQuc3Vic3RyaW5nKG5vZGVbJ3N0YXJ0J10sIG5vZGVbJ2VuZCddIC0gMSk7XG4gIG5vZGVbJ3BhcnNlZENzc1RleHQnXSA9IG5vZGVbJ2Nzc1RleHQnXSA9IHQudHJpbSgpO1xuICBpZiAobm9kZVsncGFyZW50J10pIHtcbiAgICBsZXQgc3MgPSBub2RlWydwcmV2aW91cyddID8gbm9kZVsncHJldmlvdXMnXVsnZW5kJ10gOiBub2RlWydwYXJlbnQnXVsnc3RhcnQnXTtcbiAgICB0ID0gdGV4dC5zdWJzdHJpbmcoc3MsIG5vZGVbJ3N0YXJ0J10gLSAxKTtcbiAgICB0ID0gX2V4cGFuZFVuaWNvZGVFc2NhcGVzKHQpO1xuICAgIHQgPSB0LnJlcGxhY2UoUlgubXVsdGlwbGVTcGFjZXMsICcgJyk7XG4gICAgLy8gVE9ETyhzb3J2ZWxsKTogYWQgaG9jOyBtYWtlIHNlbGVjdG9yIGluY2x1ZGUgb25seSBhZnRlciBsYXN0IDtcbiAgICAvLyBoZWxwcyB3aXRoIG1peGluIHN5bnRheFxuICAgIHQgPSB0LnN1YnN0cmluZyh0Lmxhc3RJbmRleE9mKCc7JykgKyAxKTtcbiAgICBsZXQgcyA9IG5vZGVbJ3BhcnNlZFNlbGVjdG9yJ10gPSBub2RlWydzZWxlY3RvciddID0gdC50cmltKCk7XG4gICAgbm9kZVsnYXRSdWxlJ10gPSAocy5pbmRleE9mKEFUX1NUQVJUKSA9PT0gMCk7XG4gICAgLy8gbm90ZSwgc3VwcG9ydCBhIHN1YnNldCBvZiBydWxlIHR5cGVzLi4uXG4gICAgaWYgKG5vZGVbJ2F0UnVsZSddKSB7XG4gICAgICBpZiAocy5pbmRleE9mKE1FRElBX1NUQVJUKSA9PT0gMCkge1xuICAgICAgICBub2RlWyd0eXBlJ10gPSB0eXBlcy5NRURJQV9SVUxFO1xuICAgICAgfSBlbHNlIGlmIChzLm1hdGNoKFJYLmtleWZyYW1lc1J1bGUpKSB7XG4gICAgICAgIG5vZGVbJ3R5cGUnXSA9IHR5cGVzLktFWUZSQU1FU19SVUxFO1xuICAgICAgICBub2RlWydrZXlmcmFtZXNOYW1lJ10gPVxuICAgICAgICAgIG5vZGVbJ3NlbGVjdG9yJ10uc3BsaXQoUlgubXVsdGlwbGVTcGFjZXMpLnBvcCgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAocy5pbmRleE9mKFZBUl9TVEFSVCkgPT09IDApIHtcbiAgICAgICAgbm9kZVsndHlwZSddID0gdHlwZXMuTUlYSU5fUlVMRTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGVbJ3R5cGUnXSA9IHR5cGVzLlNUWUxFX1JVTEU7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGxldCByJCA9IG5vZGVbJ3J1bGVzJ107XG4gIGlmIChyJCkge1xuICAgIGZvciAobGV0IGkgPSAwLCBsID0gciQubGVuZ3RoLCByO1xuICAgICAgKGkgPCBsKSAmJiAociA9IHIkW2ldKTsgaSsrKSB7XG4gICAgICBwYXJzZUNzcyhyLCB0ZXh0KTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGU7XG59XG5cbi8qKlxuICogY29udmVyc2lvbiBvZiBzb3J0IHVuaWNvZGUgZXNjYXBlcyB3aXRoIHNwYWNlcyBsaWtlIGBcXDMzIGAgKGFuZCBsb25nZXIpIGludG9cbiAqIGV4cGFuZGVkIGZvcm0gdGhhdCBkb2Vzbid0IHJlcXVpcmUgdHJhaWxpbmcgc3BhY2UgYFxcMDAwMDMzYFxuICogQHBhcmFtIHtzdHJpbmd9IHNcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gX2V4cGFuZFVuaWNvZGVFc2NhcGVzKHMpIHtcbiAgcmV0dXJuIHMucmVwbGFjZSgvXFxcXChbMC05YS1mXXsxLDZ9KVxccy9naSwgZnVuY3Rpb24oKSB7XG4gICAgbGV0IGNvZGUgPSBhcmd1bWVudHNbMV0sXG4gICAgICByZXBlYXQgPSA2IC0gY29kZS5sZW5ndGg7XG4gICAgd2hpbGUgKHJlcGVhdC0tKSB7XG4gICAgICBjb2RlID0gJzAnICsgY29kZTtcbiAgICB9XG4gICAgcmV0dXJuICdcXFxcJyArIGNvZGU7XG4gIH0pO1xufVxuXG4vKipcbiAqIHN0cmluZ2lmeSBwYXJzZWQgY3NzLlxuICogQHBhcmFtIHtTdHlsZU5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IHByZXNlcnZlUHJvcGVydGllc1xuICogQHBhcmFtIHtzdHJpbmc9fSB0ZXh0XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdHJpbmdpZnkobm9kZSwgcHJlc2VydmVQcm9wZXJ0aWVzLCB0ZXh0ID0gJycpIHtcbiAgLy8gY2FsYyBydWxlIGNzc1RleHRcbiAgbGV0IGNzc1RleHQgPSAnJztcbiAgaWYgKG5vZGVbJ2Nzc1RleHQnXSB8fCBub2RlWydydWxlcyddKSB7XG4gICAgbGV0IHIkID0gbm9kZVsncnVsZXMnXTtcbiAgICBpZiAociQgJiYgIV9oYXNNaXhpblJ1bGVzKHIkKSkge1xuICAgICAgZm9yIChsZXQgaSA9IDAsIGwgPSByJC5sZW5ndGgsIHI7XG4gICAgICAgIChpIDwgbCkgJiYgKHIgPSByJFtpXSk7IGkrKykge1xuICAgICAgICBjc3NUZXh0ID0gc3RyaW5naWZ5KHIsIHByZXNlcnZlUHJvcGVydGllcywgY3NzVGV4dCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGNzc1RleHQgPSBwcmVzZXJ2ZVByb3BlcnRpZXMgPyBub2RlWydjc3NUZXh0J10gOlxuICAgICAgICByZW1vdmVDdXN0b21Qcm9wcyhub2RlWydjc3NUZXh0J10pO1xuICAgICAgY3NzVGV4dCA9IGNzc1RleHQudHJpbSgpO1xuICAgICAgaWYgKGNzc1RleHQpIHtcbiAgICAgICAgY3NzVGV4dCA9ICcgICcgKyBjc3NUZXh0ICsgJ1xcbic7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8vIGVtaXQgcnVsZSBpZiB0aGVyZSBpcyBjc3NUZXh0XG4gIGlmIChjc3NUZXh0KSB7XG4gICAgaWYgKG5vZGVbJ3NlbGVjdG9yJ10pIHtcbiAgICAgIHRleHQgKz0gbm9kZVsnc2VsZWN0b3InXSArICcgJyArIE9QRU5fQlJBQ0UgKyAnXFxuJztcbiAgICB9XG4gICAgdGV4dCArPSBjc3NUZXh0O1xuICAgIGlmIChub2RlWydzZWxlY3RvciddKSB7XG4gICAgICB0ZXh0ICs9IENMT1NFX0JSQUNFICsgJ1xcblxcbic7XG4gICAgfVxuICB9XG4gIHJldHVybiB0ZXh0O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7QXJyYXk8U3R5bGVOb2RlPn0gcnVsZXNcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmZ1bmN0aW9uIF9oYXNNaXhpblJ1bGVzKHJ1bGVzKSB7XG4gIGxldCByID0gcnVsZXNbMF07XG4gIHJldHVybiBCb29sZWFuKHIpICYmIEJvb2xlYW4oclsnc2VsZWN0b3InXSkgJiYgclsnc2VsZWN0b3InXS5pbmRleE9mKFZBUl9TVEFSVCkgPT09IDA7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZnVuY3Rpb24gcmVtb3ZlQ3VzdG9tUHJvcHMoY3NzVGV4dCkge1xuICBjc3NUZXh0ID0gcmVtb3ZlQ3VzdG9tUHJvcEFzc2lnbm1lbnQoY3NzVGV4dCk7XG4gIHJldHVybiByZW1vdmVDdXN0b21Qcm9wQXBwbHkoY3NzVGV4dCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUN1c3RvbVByb3BBc3NpZ25tZW50KGNzc1RleHQpIHtcbiAgcmV0dXJuIGNzc1RleHRcbiAgICAucmVwbGFjZShSWC5jdXN0b21Qcm9wLCAnJylcbiAgICAucmVwbGFjZShSWC5taXhpblByb3AsICcnKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiByZW1vdmVDdXN0b21Qcm9wQXBwbHkoY3NzVGV4dCkge1xuICByZXR1cm4gY3NzVGV4dFxuICAgIC5yZXBsYWNlKFJYLm1peGluQXBwbHksICcnKVxuICAgIC5yZXBsYWNlKFJYLnZhckFwcGx5LCAnJyk7XG59XG5cbi8qKiBAZW51bSB7bnVtYmVyfSAqL1xuZXhwb3J0IGNvbnN0IHR5cGVzID0ge1xuICBTVFlMRV9SVUxFOiAxLFxuICBLRVlGUkFNRVNfUlVMRTogNyxcbiAgTUVESUFfUlVMRTogNCxcbiAgTUlYSU5fUlVMRTogMTAwMFxufVxuXG5jb25zdCBPUEVOX0JSQUNFID0gJ3snO1xuY29uc3QgQ0xPU0VfQlJBQ0UgPSAnfSc7XG5cbi8vIGhlbHBlciByZWdleHAnc1xuY29uc3QgUlggPSB7XG4gIGNvbW1lbnRzOiAvXFwvXFwqW14qXSpcXCorKFteLypdW14qXSpcXCorKSpcXC8vZ2ltLFxuICBwb3J0OiAvQGltcG9ydFteO10qOy9naW0sXG4gIGN1c3RvbVByb3A6IC8oPzpeW147XFwtXFxzfV0rKT8tLVteO3t9XSo/Oltee307XSo/KD86WztcXG5dfCQpL2dpbSxcbiAgbWl4aW5Qcm9wOiAvKD86XlteO1xcLVxcc31dKyk/LS1bXjt7fV0qPzpbXnt9O10qP3tbXn1dKj99KD86WztcXG5dfCQpPy9naW0sXG4gIG1peGluQXBwbHk6IC9AYXBwbHlcXHMqXFwoP1teKTtdKlxcKT9cXHMqKD86WztcXG5dfCQpPy9naW0sXG4gIHZhckFwcGx5OiAvW147Ol0qPzpbXjtdKj92YXJcXChbXjtdKlxcKSg/Ols7XFxuXXwkKT8vZ2ltLFxuICBrZXlmcmFtZXNSdWxlOiAvXkBbXlxcc10qa2V5ZnJhbWVzLyxcbiAgbXVsdGlwbGVTcGFjZXM6IC9cXHMrL2dcbn1cblxuY29uc3QgVkFSX1NUQVJUID0gJy0tJztcbmNvbnN0IE1FRElBX1NUQVJUID0gJ0BtZWRpYSc7XG5jb25zdCBBVF9TVEFSVCA9ICdAJztcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG5leHBvcnQgY29uc3QgVkFSX0FTU0lHTiA9IC8oPzpefFs7XFxze11cXHMqKSgtLVtcXHctXSo/KVxccyo6XFxzKig/OigoPzonKD86XFxcXCd8LikqPyd8XCIoPzpcXFxcXCJ8LikqP1wifFxcKFteKV0qP1xcKXxbXn07e10pKyl8XFx7KFtefV0qKVxcfSg/Oig/PVs7XFxzfV0pfCQpKS9naTtcbmV4cG9ydCBjb25zdCBNSVhJTl9NQVRDSCA9IC8oPzpefFxcVyspQGFwcGx5XFxzKlxcKD8oW14pO1xcbl0qKVxcKT8vZ2k7XG5leHBvcnQgY29uc3QgVkFSX0NPTlNVTUVEID0gLygtLVtcXHctXSspXFxzKihbOiw7KV18JCkvZ2k7XG5leHBvcnQgY29uc3QgQU5JTUFUSU9OX01BVENIID0gLyhhbmltYXRpb25cXHMqOil8KGFuaW1hdGlvbi1uYW1lXFxzKjopLztcbmV4cG9ydCBjb25zdCBNRURJQV9NQVRDSCA9IC9AbWVkaWFcXHMoLiopLztcbmV4cG9ydCBjb25zdCBJU19WQVIgPSAvXi0tLztcbmV4cG9ydCBjb25zdCBCUkFDS0VURUQgPSAvXFx7W159XSpcXH0vZztcbmV4cG9ydCBjb25zdCBIT1NUX1BSRUZJWCA9ICcoPzpefFteLiNbOl0pJztcbmV4cG9ydCBjb25zdCBIT1NUX1NVRkZJWCA9ICcoJHxbLjpbXFxcXHM+K35dKSc7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKiogQHR5cGUgeyFTZXQ8c3RyaW5nPn0gKi9cbmNvbnN0IHN0eWxlVGV4dFNldCA9IG5ldyBTZXQoKTtcblxuZXhwb3J0IGNvbnN0IHNjb3BpbmdBdHRyaWJ1dGUgPSAnc2hhZHktdW5zY29wZWQnO1xuXG4vKipcbiAqIEFkZCBhIHNwZWNpZmljYWxseS1tYXJrZWQgc3R5bGUgdG8gdGhlIGRvY3VtZW50IGRpcmVjdGx5LCBhbmQgb25seSBvbmUgY29weSBvZiB0aGF0IHN0eWxlLlxuICpcbiAqIEBwYXJhbSB7IUhUTUxTdHlsZUVsZW1lbnR9IHN0eWxlXG4gKiBAcmV0dXJuIHt1bmRlZmluZWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwcm9jZXNzVW5zY29wZWRTdHlsZShzdHlsZSkge1xuICBjb25zdCB0ZXh0ID0gc3R5bGUudGV4dENvbnRlbnQ7XG4gIGlmICghc3R5bGVUZXh0U2V0Lmhhcyh0ZXh0KSkge1xuICAgIHN0eWxlVGV4dFNldC5hZGQodGV4dCk7XG4gICAgY29uc3QgbmV3U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIG5ld1N0eWxlLnNldEF0dHJpYnV0ZSgnc2hhZHktdW5zY29wZWQnLCAnJyk7XG4gICAgbmV3U3R5bGUudGV4dENvbnRlbnQgPSB0ZXh0O1xuICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobmV3U3R5bGUpO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzdHlsZSBpcyBzdXBwb3NlZCB0byBiZSB1bnNjb3BlZFxuICogQHBhcmFtIHshSFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgdGhlIHN0eWxlIGhhcyB0aGUgdW5zY29waW5nIGF0dHJpYnV0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNVbnNjb3BlZFN0eWxlKHN0eWxlKSB7XG4gIHJldHVybiBzdHlsZS5oYXNBdHRyaWJ1dGUoc2NvcGluZ0F0dHJpYnV0ZSk7XG59IiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtuYXRpdmVTaGFkb3csIG5hdGl2ZUNzc1ZhcmlhYmxlcywgY3NzQnVpbGR9IGZyb20gJy4vc3R5bGUtc2V0dGluZ3MuanMnO1xuaW1wb3J0IHtwYXJzZSwgc3RyaW5naWZ5LCB0eXBlcywgU3R5bGVOb2RlfSBmcm9tICcuL2Nzcy1wYXJzZS5qcyc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbmltcG9ydCB7TUVESUFfTUFUQ0h9IGZyb20gJy4vY29tbW9uLXJlZ2V4LmpzJztcbmltcG9ydCB7cHJvY2Vzc1Vuc2NvcGVkU3R5bGUsIGlzVW5zY29wZWRTdHlsZX0gZnJvbSAnLi91bnNjb3BlZC1zdHlsZS1oYW5kbGVyLmpzJztcblxuLyoqXG4gKiBAcGFyYW0ge3N0cmluZ3xTdHlsZU5vZGV9IHJ1bGVzXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKFN0eWxlTm9kZSk9fSBjYWxsYmFja1xuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9Dc3NUZXh0IChydWxlcywgY2FsbGJhY2spIHtcbiAgaWYgKCFydWxlcykge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBpZiAodHlwZW9mIHJ1bGVzID09PSAnc3RyaW5nJykge1xuICAgIHJ1bGVzID0gcGFyc2UocnVsZXMpO1xuICB9XG4gIGlmIChjYWxsYmFjaykge1xuICAgIGZvckVhY2hSdWxlKHJ1bGVzLCBjYWxsYmFjayk7XG4gIH1cbiAgcmV0dXJuIHN0cmluZ2lmeShydWxlcywgbmF0aXZlQ3NzVmFyaWFibGVzKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0ge0hUTUxTdHlsZUVsZW1lbnR9IHN0eWxlXG4gKiBAcmV0dXJuIHtTdHlsZU5vZGV9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBydWxlc0ZvclN0eWxlKHN0eWxlKSB7XG4gIGlmICghc3R5bGVbJ19fY3NzUnVsZXMnXSAmJiBzdHlsZS50ZXh0Q29udGVudCkge1xuICAgIHN0eWxlWydfX2Nzc1J1bGVzJ10gPSBwYXJzZShzdHlsZS50ZXh0Q29udGVudCk7XG4gIH1cbiAgcmV0dXJuIHN0eWxlWydfX2Nzc1J1bGVzJ10gfHwgbnVsbDtcbn1cblxuLy8gVGVzdHMgaWYgYSBydWxlIGlzIGEga2V5ZnJhbWVzIHNlbGVjdG9yLCB3aGljaCBsb29rcyBhbG1vc3QgZXhhY3RseVxuLy8gbGlrZSBhIG5vcm1hbCBzZWxlY3RvciBidXQgaXMgbm90IChpdCBoYXMgbm90aGluZyB0byBkbyB3aXRoIHNjb3Bpbmdcbi8vIGZvciBleGFtcGxlKS5cbi8qKlxuICogQHBhcmFtIHtTdHlsZU5vZGV9IHJ1bGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0tleWZyYW1lc1NlbGVjdG9yKHJ1bGUpIHtcbiAgcmV0dXJuIEJvb2xlYW4ocnVsZVsncGFyZW50J10pICYmXG4gIHJ1bGVbJ3BhcmVudCddWyd0eXBlJ10gPT09IHR5cGVzLktFWUZSQU1FU19SVUxFO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7U3R5bGVOb2RlfSBub2RlXG4gKiBAcGFyYW0ge0Z1bmN0aW9uPX0gc3R5bGVSdWxlQ2FsbGJhY2tcbiAqIEBwYXJhbSB7RnVuY3Rpb249fSBrZXlmcmFtZXNSdWxlQ2FsbGJhY2tcbiAqIEBwYXJhbSB7Ym9vbGVhbj19IG9ubHlBY3RpdmVSdWxlc1xuICovXG5leHBvcnQgZnVuY3Rpb24gZm9yRWFjaFJ1bGUobm9kZSwgc3R5bGVSdWxlQ2FsbGJhY2ssIGtleWZyYW1lc1J1bGVDYWxsYmFjaywgb25seUFjdGl2ZVJ1bGVzKSB7XG4gIGlmICghbm9kZSkge1xuICAgIHJldHVybjtcbiAgfVxuICBsZXQgc2tpcFJ1bGVzID0gZmFsc2U7XG4gIGxldCB0eXBlID0gbm9kZVsndHlwZSddO1xuICBpZiAob25seUFjdGl2ZVJ1bGVzKSB7XG4gICAgaWYgKHR5cGUgPT09IHR5cGVzLk1FRElBX1JVTEUpIHtcbiAgICAgIGxldCBtYXRjaE1lZGlhID0gbm9kZVsnc2VsZWN0b3InXS5tYXRjaChNRURJQV9NQVRDSCk7XG4gICAgICBpZiAobWF0Y2hNZWRpYSkge1xuICAgICAgICAvLyBpZiBydWxlIGlzIGEgbm9uIG1hdGNoaW5nIEBtZWRpYSBydWxlLCBza2lwIHN1YnJ1bGVzXG4gICAgICAgIGlmICghd2luZG93Lm1hdGNoTWVkaWEobWF0Y2hNZWRpYVsxXSkubWF0Y2hlcykge1xuICAgICAgICAgIHNraXBSdWxlcyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaWYgKHR5cGUgPT09IHR5cGVzLlNUWUxFX1JVTEUpIHtcbiAgICBzdHlsZVJ1bGVDYWxsYmFjayhub2RlKTtcbiAgfSBlbHNlIGlmIChrZXlmcmFtZXNSdWxlQ2FsbGJhY2sgJiZcbiAgICB0eXBlID09PSB0eXBlcy5LRVlGUkFNRVNfUlVMRSkge1xuICAgIGtleWZyYW1lc1J1bGVDYWxsYmFjayhub2RlKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSB0eXBlcy5NSVhJTl9SVUxFKSB7XG4gICAgc2tpcFJ1bGVzID0gdHJ1ZTtcbiAgfVxuICBsZXQgciQgPSBub2RlWydydWxlcyddO1xuICBpZiAociQgJiYgIXNraXBSdWxlcykge1xuICAgIGZvciAobGV0IGk9MCwgbD1yJC5sZW5ndGgsIHI7IChpPGwpICYmIChyPXIkW2ldKTsgaSsrKSB7XG4gICAgICBmb3JFYWNoUnVsZShyLCBzdHlsZVJ1bGVDYWxsYmFjaywga2V5ZnJhbWVzUnVsZUNhbGxiYWNrLCBvbmx5QWN0aXZlUnVsZXMpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBhZGQgYSBzdHJpbmcgb2YgY3NzVGV4dCB0byB0aGUgZG9jdW1lbnQuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0XG4gKiBAcGFyYW0ge3N0cmluZ30gbW9uaWtlclxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Tm9kZX0gY29udGV4dE5vZGVcbiAqIEByZXR1cm4ge0hUTUxTdHlsZUVsZW1lbnR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhcHBseUNzcyhjc3NUZXh0LCBtb25pa2VyLCB0YXJnZXQsIGNvbnRleHROb2RlKSB7XG4gIGxldCBzdHlsZSA9IGNyZWF0ZVNjb3BlU3R5bGUoY3NzVGV4dCwgbW9uaWtlcik7XG4gIGFwcGx5U3R5bGUoc3R5bGUsIHRhcmdldCwgY29udGV4dE5vZGUpO1xuICByZXR1cm4gc3R5bGU7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAqIEBwYXJhbSB7c3RyaW5nfSBtb25pa2VyXG4gKiBAcmV0dXJuIHshSFRNTFN0eWxlRWxlbWVudH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNjb3BlU3R5bGUoY3NzVGV4dCwgbW9uaWtlcikge1xuICBsZXQgc3R5bGUgPSAvKiogQHR5cGUge0hUTUxTdHlsZUVsZW1lbnR9ICovKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpO1xuICBpZiAobW9uaWtlcikge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnc2NvcGUnLCBtb25pa2VyKTtcbiAgfVxuICBzdHlsZS50ZXh0Q29udGVudCA9IGNzc1RleHQ7XG4gIHJldHVybiBzdHlsZTtcbn1cblxuLyoqXG4gKiBUcmFjayB0aGUgcG9zaXRpb24gb2YgdGhlIGxhc3QgYWRkZWQgc3R5bGUgZm9yIHBsYWNpbmcgcGxhY2Vob2xkZXJzXG4gKiBAdHlwZSB7Tm9kZX1cbiAqL1xubGV0IGxhc3RIZWFkQXBwbHlOb2RlID0gbnVsbDtcblxuLy8gaW5zZXJ0IGEgY29tbWVudCBub2RlIGFzIGEgc3R5bGluZyBwb3NpdGlvbiBwbGFjZWhvbGRlci5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IG1vbmlrZXJcbiAqIEByZXR1cm4geyFDb21tZW50fVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlTdHlsZVBsYWNlSG9sZGVyKG1vbmlrZXIpIHtcbiAgbGV0IHBsYWNlSG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgnIFNoYWR5IERPTSBzdHlsZXMgZm9yICcgK1xuICAgIG1vbmlrZXIgKyAnICcpO1xuICBsZXQgYWZ0ZXIgPSBsYXN0SGVhZEFwcGx5Tm9kZSA/XG4gICAgbGFzdEhlYWRBcHBseU5vZGVbJ25leHRTaWJsaW5nJ10gOiBudWxsO1xuICBsZXQgc2NvcGUgPSBkb2N1bWVudC5oZWFkO1xuICBzY29wZS5pbnNlcnRCZWZvcmUocGxhY2VIb2xkZXIsIGFmdGVyIHx8IHNjb3BlLmZpcnN0Q2hpbGQpO1xuICBsYXN0SGVhZEFwcGx5Tm9kZSA9IHBsYWNlSG9sZGVyO1xuICByZXR1cm4gcGxhY2VIb2xkZXI7XG59XG5cbi8qKlxuICogQHBhcmFtIHtIVE1MU3R5bGVFbGVtZW50fSBzdHlsZVxuICogQHBhcmFtIHs/Tm9kZX0gdGFyZ2V0XG4gKiBAcGFyYW0gez9Ob2RlfSBjb250ZXh0Tm9kZVxuICovXG5leHBvcnQgZnVuY3Rpb24gYXBwbHlTdHlsZShzdHlsZSwgdGFyZ2V0LCBjb250ZXh0Tm9kZSkge1xuICB0YXJnZXQgPSB0YXJnZXQgfHwgZG9jdW1lbnQuaGVhZDtcbiAgbGV0IGFmdGVyID0gKGNvbnRleHROb2RlICYmIGNvbnRleHROb2RlLm5leHRTaWJsaW5nKSB8fFxuICAgIHRhcmdldC5maXJzdENoaWxkO1xuICB0YXJnZXQuaW5zZXJ0QmVmb3JlKHN0eWxlLCBhZnRlcik7XG4gIGlmICghbGFzdEhlYWRBcHBseU5vZGUpIHtcbiAgICBsYXN0SGVhZEFwcGx5Tm9kZSA9IHN0eWxlO1xuICB9IGVsc2Uge1xuICAgIC8vIG9ubHkgdXBkYXRlIGxhc3RIZWFkQXBwbHlOb2RlIGlmIHRoZSBuZXcgc3R5bGUgaXMgaW5zZXJ0ZWQgYWZ0ZXIgdGhlIG9sZCBsYXN0SGVhZEFwcGx5Tm9kZVxuICAgIGxldCBwb3NpdGlvbiA9IHN0eWxlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGxhc3RIZWFkQXBwbHlOb2RlKTtcbiAgICBpZiAocG9zaXRpb24gPT09IE5vZGUuRE9DVU1FTlRfUE9TSVRJT05fUFJFQ0VESU5HKSB7XG4gICAgICBsYXN0SGVhZEFwcGx5Tm9kZSA9IHN0eWxlO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBidWlsZFR5cGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1RhcmdldGVkQnVpbGQoYnVpbGRUeXBlKSB7XG4gIHJldHVybiBuYXRpdmVTaGFkb3cgPyBidWlsZFR5cGUgPT09ICdzaGFkb3cnIDogYnVpbGRUeXBlID09PSAnc2hhZHknO1xufVxuXG4vKipcbiAqIFdhbGsgZnJvbSB0ZXh0W3N0YXJ0XSBtYXRjaGluZyBwYXJlbnMgYW5kXG4gKiByZXR1cm5zIHBvc2l0aW9uIG9mIHRoZSBvdXRlciBlbmQgcGFyZW5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gKiBAcGFyYW0ge251bWJlcn0gc3RhcnRcbiAqIEByZXR1cm4ge251bWJlcn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZpbmRNYXRjaGluZ1BhcmVuKHRleHQsIHN0YXJ0KSB7XG4gIGxldCBsZXZlbCA9IDA7XG4gIGZvciAobGV0IGk9c3RhcnQsIGw9dGV4dC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBpZiAodGV4dFtpXSA9PT0gJygnKSB7XG4gICAgICBsZXZlbCsrO1xuICAgIH0gZWxzZSBpZiAodGV4dFtpXSA9PT0gJyknKSB7XG4gICAgICBpZiAoLS1sZXZlbCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gaTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7ZnVuY3Rpb24oc3RyaW5nLCBzdHJpbmcsIHN0cmluZywgc3RyaW5nKX0gY2FsbGJhY2tcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NWYXJpYWJsZUFuZEZhbGxiYWNrKHN0ciwgY2FsbGJhY2spIHtcbiAgLy8gZmluZCAndmFyKCdcbiAgbGV0IHN0YXJ0ID0gc3RyLmluZGV4T2YoJ3ZhcignKTtcbiAgaWYgKHN0YXJ0ID09PSAtMSkge1xuICAgIC8vIG5vIHZhcj8sIGV2ZXJ5dGhpbmcgaXMgcHJlZml4XG4gICAgcmV0dXJuIGNhbGxiYWNrKHN0ciwgJycsICcnLCAnJyk7XG4gIH1cbiAgLy8ke3ByZWZpeH12YXIoJHtpbm5lcn0pJHtzdWZmaXh9XG4gIGxldCBlbmQgPSBmaW5kTWF0Y2hpbmdQYXJlbihzdHIsIHN0YXJ0ICsgMyk7XG4gIGxldCBpbm5lciA9IHN0ci5zdWJzdHJpbmcoc3RhcnQgKyA0LCBlbmQpO1xuICBsZXQgcHJlZml4ID0gc3RyLnN1YnN0cmluZygwLCBzdGFydCk7XG4gIC8vIHN1ZmZpeCBtYXkgaGF2ZSBvdGhlciB2YXJpYWJsZXNcbiAgbGV0IHN1ZmZpeCA9IHByb2Nlc3NWYXJpYWJsZUFuZEZhbGxiYWNrKHN0ci5zdWJzdHJpbmcoZW5kICsgMSksIGNhbGxiYWNrKTtcbiAgbGV0IGNvbW1hID0gaW5uZXIuaW5kZXhPZignLCcpO1xuICAvLyB2YWx1ZSBhbmQgZmFsbGJhY2sgYXJncyBzaG91bGQgYmUgdHJpbW1lZCB0byBtYXRjaCBpbiBwcm9wZXJ0eSBsb29rdXBcbiAgaWYgKGNvbW1hID09PSAtMSkge1xuICAgIC8vIHZhcmlhYmxlLCBubyBmYWxsYmFja1xuICAgIHJldHVybiBjYWxsYmFjayhwcmVmaXgsIGlubmVyLnRyaW0oKSwgJycsIHN1ZmZpeCk7XG4gIH1cbiAgLy8gdmFyKCR7dmFsdWV9LCR7ZmFsbGJhY2t9KVxuICBsZXQgdmFsdWUgPSBpbm5lci5zdWJzdHJpbmcoMCwgY29tbWEpLnRyaW0oKTtcbiAgbGV0IGZhbGxiYWNrID0gaW5uZXIuc3Vic3RyaW5nKGNvbW1hICsgMSkudHJpbSgpO1xuICByZXR1cm4gY2FsbGJhY2socHJlZml4LCB2YWx1ZSwgZmFsbGJhY2ssIHN1ZmZpeCk7XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldEVsZW1lbnRDbGFzc1JhdyhlbGVtZW50LCB2YWx1ZSkge1xuICAvLyB1c2UgbmF0aXZlIHNldEF0dHJpYnV0ZSBwcm92aWRlZCBieSBTaGFkeURPTSB3aGVuIHNldEF0dHJpYnV0ZSBpcyBwYXRjaGVkXG4gIGlmIChuYXRpdmVTaGFkb3cpIHtcbiAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCB2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgd2luZG93WydTaGFkeURPTSddWyduYXRpdmVNZXRob2RzJ11bJ3NldEF0dHJpYnV0ZSddLmNhbGwoZWxlbWVudCwgJ2NsYXNzJywgdmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogQHR5cGUge2Z1bmN0aW9uKCopOip9XG4gKi9cbmV4cG9ydCBjb25zdCB3cmFwID0gd2luZG93WydTaGFkeURPTSddICYmIHdpbmRvd1snU2hhZHlET00nXVsnd3JhcCddIHx8ICgobm9kZSkgPT4gbm9kZSk7XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50IHwge2lzOiBzdHJpbmcsIGV4dGVuZHM6IHN0cmluZ319IGVsZW1lbnRcbiAqIEByZXR1cm4ge3tpczogc3RyaW5nLCB0eXBlRXh0ZW5zaW9uOiBzdHJpbmd9fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0SXNFeHRlbmRzKGVsZW1lbnQpIHtcbiAgbGV0IGxvY2FsTmFtZSA9IGVsZW1lbnRbJ2xvY2FsTmFtZSddO1xuICBsZXQgaXMgPSAnJywgdHlwZUV4dGVuc2lvbiA9ICcnO1xuICAvKlxuICBOT1RFOiB0ZWNobmljYWxseSwgdGhpcyBjYW4gYmUgd3JvbmcgZm9yIGNlcnRhaW4gc3ZnIGVsZW1lbnRzXG4gIHdpdGggYC1gIGluIHRoZSBuYW1lIGxpa2UgYDxmb250LWZhY2U+YFxuICAqL1xuICBpZiAobG9jYWxOYW1lKSB7XG4gICAgaWYgKGxvY2FsTmFtZS5pbmRleE9mKCctJykgPiAtMSkge1xuICAgICAgaXMgPSBsb2NhbE5hbWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHR5cGVFeHRlbnNpb24gPSBsb2NhbE5hbWU7XG4gICAgICBpcyA9IChlbGVtZW50LmdldEF0dHJpYnV0ZSAmJiBlbGVtZW50LmdldEF0dHJpYnV0ZSgnaXMnKSkgfHwgJyc7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlzID0gLyoqIEB0eXBlIHs/fSAqLyhlbGVtZW50KS5pcztcbiAgICB0eXBlRXh0ZW5zaW9uID0gLyoqIEB0eXBlIHs/fSAqLyhlbGVtZW50KS5leHRlbmRzO1xuICB9XG4gIHJldHVybiB7aXMsIHR5cGVFeHRlbnNpb259O1xufVxuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnYXRoZXJTdHlsZVRleHQoZWxlbWVudCkge1xuICAvKiogQHR5cGUgeyFBcnJheTxzdHJpbmc+fSAqL1xuICBjb25zdCBzdHlsZVRleHRQYXJ0cyA9IFtdO1xuICBjb25zdCBzdHlsZXMgPSAvKiogQHR5cGUgeyFOb2RlTGlzdDwhSFRNTFN0eWxlRWxlbWVudD59ICovKGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc3R5bGUnKSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3Qgc3R5bGUgPSBzdHlsZXNbaV07XG4gICAgaWYgKGlzVW5zY29wZWRTdHlsZShzdHlsZSkpIHtcbiAgICAgIGlmICghbmF0aXZlU2hhZG93KSB7XG4gICAgICAgIHByb2Nlc3NVbnNjb3BlZFN0eWxlKHN0eWxlKTtcbiAgICAgICAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0eWxlVGV4dFBhcnRzLnB1c2goc3R5bGUudGV4dENvbnRlbnQpO1xuICAgICAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBzdHlsZVRleHRQYXJ0cy5qb2luKCcnKS50cmltKCk7XG59XG5cbi8qKlxuICogU3BsaXQgYSBzZWxlY3RvciBzZXBhcmF0ZWQgYnkgY29tbWFzIGludG8gYW4gYXJyYXkgaW4gYSBzbWFydCB3YXlcbiAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxuICogQHJldHVybiB7IUFycmF5PHN0cmluZz59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzcGxpdFNlbGVjdG9yTGlzdChzZWxlY3Rvcikge1xuICBjb25zdCBwYXJ0cyA9IFtdO1xuICBsZXQgcGFydCA9ICcnO1xuICBmb3IgKGxldCBpID0gMDsgaSA+PSAwICYmIGkgPCBzZWxlY3Rvci5sZW5ndGg7IGkrKykge1xuICAgIC8vIEEgc2VsZWN0b3Igd2l0aCBwYXJlbnRoZXNlcyB3aWxsIGJlIG9uZSBjb21wbGV0ZSBwYXJ0XG4gICAgaWYgKHNlbGVjdG9yW2ldID09PSAnKCcpIHtcbiAgICAgIC8vIGZpbmQgdGhlIG1hdGNoaW5nIHBhcmVuXG4gICAgICBjb25zdCBlbmQgPSBmaW5kTWF0Y2hpbmdQYXJlbihzZWxlY3RvciwgaSk7XG4gICAgICAvLyBwdXNoIHRoZSBwYXJlbiBibG9jayBpbnRvIHRoZSBwYXJ0XG4gICAgICBwYXJ0ICs9IHNlbGVjdG9yLnNsaWNlKGksIGVuZCArIDEpO1xuICAgICAgLy8gbW92ZSB0aGUgaW5kZXggdG8gYWZ0ZXIgdGhlIHBhcmVuIGJsb2NrXG4gICAgICBpID0gZW5kO1xuICAgIH0gZWxzZSBpZiAoc2VsZWN0b3JbaV0gPT09ICcsJykge1xuICAgICAgcGFydHMucHVzaChwYXJ0KTtcbiAgICAgIHBhcnQgPSAnJztcbiAgICB9IGVsc2Uge1xuICAgICAgcGFydCArPSBzZWxlY3RvcltpXTtcbiAgICB9XG4gIH1cbiAgLy8gY2F0Y2ggYW55IHBpZWNlcyBhZnRlciB0aGUgbGFzdCBjb21tYVxuICBpZiAocGFydCkge1xuICAgIHBhcnRzLnB1c2gocGFydCk7XG4gIH1cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG5jb25zdCBDU1NfQlVJTERfQVRUUiA9ICdjc3MtYnVpbGQnO1xuXG4vKipcbiAqIFJldHVybiB0aGUgcG9seW1lci1jc3MtYnVpbGQgXCJidWlsZCB0eXBlXCIgYXBwbGllZCB0byB0aGlzIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudFxuICogQHJldHVybiB7c3RyaW5nfSBDYW4gYmUgXCJcIiwgXCJzaGFkeVwiLCBvciBcInNoYWRvd1wiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDc3NCdWlsZChlbGVtZW50KSB7XG4gIGlmIChjc3NCdWlsZCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7c3RyaW5nfSAqLyhjc3NCdWlsZCk7XG4gIH1cbiAgaWYgKGVsZW1lbnQuX19jc3NCdWlsZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgLy8gdHJ5IGF0dHJpYnV0ZSBmaXJzdCwgYXMgaXQgaXMgdGhlIGNvbW1vbiBjYXNlXG4gICAgY29uc3QgYXR0clZhbHVlID0gZWxlbWVudC5nZXRBdHRyaWJ1dGUoQ1NTX0JVSUxEX0FUVFIpO1xuICAgIGlmIChhdHRyVmFsdWUpIHtcbiAgICAgIGVsZW1lbnQuX19jc3NCdWlsZCA9IGF0dHJWYWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYnVpbGRDb21tZW50ID0gZ2V0QnVpbGRDb21tZW50KGVsZW1lbnQpO1xuICAgICAgaWYgKGJ1aWxkQ29tbWVudCAhPT0gJycpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGJ1aWxkIGNvbW1lbnQgc28gaXQgaXMgbm90IG5lZWRsZXNzbHkgY29waWVkIGludG8gZXZlcnkgZWxlbWVudCBpbnN0YW5jZVxuICAgICAgICByZW1vdmVCdWlsZENvbW1lbnQoZWxlbWVudCk7XG4gICAgICB9XG4gICAgICBlbGVtZW50Ll9fY3NzQnVpbGQgPSBidWlsZENvbW1lbnQ7XG4gICAgfVxuICB9XG4gIHJldHVybiBlbGVtZW50Ll9fY3NzQnVpbGQgfHwgJyc7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIGVsZW1lbnQsIGVpdGhlciBhIDx0ZW1wbGF0ZT4gb3IgPHN0eWxlPiwgaGFzIGJlZW4gcHJvY2Vzc2VkXG4gKiBieSBwb2x5bWVyLWNzcy1idWlsZC5cbiAqXG4gKiBJZiBzbywgdGhlbiB3ZSBjYW4gbWFrZSBhIG51bWJlciBvZiBvcHRpbWl6YXRpb25zOlxuICogLSBwb2x5bWVyLWNzcy1idWlsZCB3aWxsIGRlY29tcG9zZSBtaXhpbnMgaW50byBpbmRpdmlkdWFsIENTUyBDdXN0b20gUHJvcGVydGllcyxcbiAqIHNvIHRoZSBBcHBseVNoaW0gY2FuIGJlIHNraXBwZWQgZW50aXJlbHkuXG4gKiAtIFVuZGVyIG5hdGl2ZSBTaGFkb3dET00sIHRoZSBzdHlsZSB0ZXh0IGNhbiBqdXN0IGJlIGNvcGllZCBpbnRvIGVhY2ggaW5zdGFuY2VcbiAqIHdpdGhvdXQgbW9kaWZpY2F0aW9uXG4gKiAtIElmIHRoZSBidWlsZCBpcyBcInNoYWR5XCIgYW5kIFNoYWR5RE9NIGlzIGluIHVzZSwgdGhlIHN0eWxpbmcgZG9lcyBub3QgbmVlZFxuICogc2NvcGluZyBiZXlvbmQgdGhlIHNoaW1taW5nIG9mIENTUyBDdXN0b20gUHJvcGVydGllc1xuICpcbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gZWxlbWVudEhhc0J1aWx0Q3NzKGVsZW1lbnQpIHtcbiAgcmV0dXJuIGdldENzc0J1aWxkKGVsZW1lbnQpICE9PSAnJztcbn1cblxuLyoqXG4gKiBGb3IgdGVtcGxhdGVzIG1hZGUgd2l0aCB0YWdnZWQgdGVtcGxhdGUgbGl0ZXJhbHMsIHBvbHltZXItY3NzLWJ1aWxkIHdpbGxcbiAqIGluc2VydCBhIGNvbW1lbnQgb2YgdGhlIGZvcm0gYDwhLS1jc3MtYnVpbGQ6c2hhZG93LS0+YFxuICpcbiAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRCdWlsZENvbW1lbnQoZWxlbWVudCkge1xuICBjb25zdCBidWlsZENvbW1lbnQgPSBlbGVtZW50LmxvY2FsTmFtZSA9PT0gJ3RlbXBsYXRlJyA/XG4gICAgICAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyAoZWxlbWVudCkuY29udGVudC5maXJzdENoaWxkIDpcbiAgICAgIGVsZW1lbnQuZmlyc3RDaGlsZDtcbiAgaWYgKGJ1aWxkQ29tbWVudCBpbnN0YW5jZW9mIENvbW1lbnQpIHtcbiAgICBjb25zdCBjb21tZW50UGFydHMgPSBidWlsZENvbW1lbnQudGV4dENvbnRlbnQudHJpbSgpLnNwbGl0KCc6Jyk7XG4gICAgaWYgKGNvbW1lbnRQYXJ0c1swXSA9PT0gQ1NTX0JVSUxEX0FUVFIpIHtcbiAgICAgIHJldHVybiBjb21tZW50UGFydHNbMV07XG4gICAgfVxuICB9XG4gIHJldHVybiAnJztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgY3NzIGJ1aWxkIHN0YXR1cyBpcyBvcHRpbWFsLCBhbmQgZG8gbm8gdW5uZWVkZWQgd29yay5cbiAqXG4gKiBAcGFyYW0ge3N0cmluZz19IGNzc0J1aWxkIENTUyBidWlsZCBzdGF0dXNcbiAqIEByZXR1cm4ge2Jvb2xlYW59IGNzcyBidWlsZCBpcyBvcHRpbWFsIG9yIG5vdFxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNPcHRpbWFsQ3NzQnVpbGQoY3NzQnVpbGQgPSAnJykge1xuICAvLyBDU1MgY3VzdG9tIHByb3BlcnR5IHNoaW0gYWx3YXlzIHJlcXVpcmVzIHdvcmtcbiAgaWYgKGNzc0J1aWxkID09PSAnJyB8fCAhbmF0aXZlQ3NzVmFyaWFibGVzKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHJldHVybiBuYXRpdmVTaGFkb3cgPyBjc3NCdWlsZCA9PT0gJ3NoYWRvdycgOiBjc3NCdWlsZCA9PT0gJ3NoYWR5Jztcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFIVE1MRWxlbWVudH0gZWxlbWVudFxuICovXG5mdW5jdGlvbiByZW1vdmVCdWlsZENvbW1lbnQoZWxlbWVudCkge1xuICBjb25zdCBidWlsZENvbW1lbnQgPSBlbGVtZW50LmxvY2FsTmFtZSA9PT0gJ3RlbXBsYXRlJyA/XG4gICAgICAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyAoZWxlbWVudCkuY29udGVudC5maXJzdENoaWxkIDpcbiAgICAgIGVsZW1lbnQuZmlyc3RDaGlsZDtcbiAgYnVpbGRDb21tZW50LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoYnVpbGRDb21tZW50KTtcbn1cbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB7IE1JWElOX01BVENILCBWQVJfQVNTSUdOIH0gZnJvbSAnLi9jb21tb24tcmVnZXguanMnO1xuXG4vKipcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICogQHBhcmFtIHtPYmplY3Q9fSBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgLy8gcmVtb3ZlIHByZXZpb3VzIHByb3BlcnRpZXNcbiAgZm9yIChsZXQgcCBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgLy8gTk9URTogZm9yIGJjIHdpdGggc2hpbSwgZG9uJ3QgYXBwbHkgbnVsbCB2YWx1ZXMuXG4gICAgaWYgKHAgPT09IG51bGwpIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkocCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsZW1lbnQuc3R5bGUuc2V0UHJvcGVydHkocCwgcHJvcGVydGllc1twXSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlcbiAqIEByZXR1cm4ge3N0cmluZ31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGVWYWx1ZShlbGVtZW50LCBwcm9wZXJ0eSkge1xuICAvKipcbiAgICogQGNvbnN0IHtzdHJpbmd9XG4gICAqL1xuICBjb25zdCB2YWx1ZSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpO1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuICcnO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiB2YWx1ZS50cmltKCk7XG4gIH1cbn1cblxuLyoqXG4gKiByZXR1cm4gdHJ1ZSBpZiBgY3NzVGV4dGAgY29udGFpbnMgYSBtaXhpbiBkZWZpbml0aW9uIG9yIGNvbnN1bXB0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gY3NzVGV4dFxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRldGVjdE1peGluKGNzc1RleHQpIHtcbiAgY29uc3QgaGFzID0gTUlYSU5fTUFUQ0gudGVzdChjc3NUZXh0KSB8fCBWQVJfQVNTSUdOLnRlc3QoY3NzVGV4dCk7XG4gIC8vIHJlc2V0IHN0YXRlIG9mIHRoZSByZWdleGVzXG4gIE1JWElOX01BVENILmxhc3RJbmRleCA9IDA7XG4gIFZBUl9BU1NJR04ubGFzdEluZGV4ID0gMDtcbiAgcmV0dXJuIGhhcztcbn1cbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuLypcbiAqIFRoZSBhcHBseSBzaGltIHNpbXVsYXRlcyB0aGUgYmVoYXZpb3Igb2YgYEBhcHBseWAgcHJvcG9zZWQgYXRcbiAqIGh0dHBzOi8vdGFiYXRraW5zLmdpdGh1Yi5pby9zcGVjcy9jc3MtYXBwbHktcnVsZS8uXG4gKiBUaGUgYXBwcm9hY2ggaXMgdG8gY29udmVydCBhIHByb3BlcnR5IGxpa2UgdGhpczpcbiAqXG4gKiAgICAtLWZvbzoge2NvbG9yOiByZWQ7IGJhY2tncm91bmQ6IGJsdWU7fVxuICpcbiAqIHRvIHRoaXM6XG4gKlxuICogICAgLS1mb29fLV9jb2xvcjogcmVkO1xuICogICAgLS1mb29fLV9iYWNrZ3JvdW5kOiBibHVlO1xuICpcbiAqIFRoZW4gd2hlcmUgYEBhcHBseSAtLWZvb2AgaXMgdXNlZCwgdGhhdCBpcyBjb252ZXJ0ZWQgdG86XG4gKlxuICogICAgY29sb3I6IHZhcigtLWZvb18tX2NvbG9yKTtcbiAqICAgIGJhY2tncm91bmQ6IHZhcigtLWZvb18tX2JhY2tncm91bmQpO1xuICpcbiAqIFRoaXMgYXBwcm9hY2ggZ2VuZXJhbGx5IHdvcmtzIGJ1dCB0aGVyZSBhcmUgc29tZSBpc3N1ZXMgYW5kIGxpbWl0YXRpb25zLlxuICogQ29uc2lkZXIsIGZvciBleGFtcGxlLCB0aGF0IHNvbWV3aGVyZSAqYmV0d2Vlbiogd2hlcmUgYC0tZm9vYCBpcyBzZXQgYW5kIHVzZWQsXG4gKiBhbm90aGVyIGVsZW1lbnQgc2V0cyBpdCB0bzpcbiAqXG4gKiAgICAtLWZvbzogeyBib3JkZXI6IDJweCBzb2xpZCByZWQ7IH1cbiAqXG4gKiBXZSBtdXN0IG5vdyBlbnN1cmUgdGhhdCB0aGUgY29sb3IgYW5kIGJhY2tncm91bmQgZnJvbSB0aGUgcHJldmlvdXMgc2V0dGluZ1xuICogZG8gbm90IGFwcGx5LiBUaGlzIGlzIGFjY29tcGxpc2hlZCBieSBjaGFuZ2luZyB0aGUgcHJvcGVydHkgc2V0IHRvIHRoaXM6XG4gKlxuICogICAgLS1mb29fLV9ib3JkZXI6IDJweCBzb2xpZCByZWQ7XG4gKiAgICAtLWZvb18tX2NvbG9yOiBpbml0aWFsO1xuICogICAgLS1mb29fLV9iYWNrZ3JvdW5kOiBpbml0aWFsO1xuICpcbiAqIFRoaXMgd29ya3MgYnV0IGludHJvZHVjZXMgb25lIG5ldyBpc3N1ZS5cbiAqIENvbnNpZGVyIHRoaXMgc2V0dXAgYXQgdGhlIHBvaW50IHdoZXJlIHRoZSBgQGFwcGx5YCBpcyB1c2VkOlxuICpcbiAqICAgIGJhY2tncm91bmQ6IG9yYW5nZTtcbiAqICAgIGBAYXBwbHlgIC0tZm9vO1xuICpcbiAqIEluIHRoaXMgY2FzZSB0aGUgYmFja2dyb3VuZCB3aWxsIGJlIHVuc2V0IChpbml0aWFsKSByYXRoZXIgdGhhbiB0aGUgZGVzaXJlZFxuICogYG9yYW5nZWAuIFdlIGFkZHJlc3MgdGhpcyBieSBhbHRlcmluZyB0aGUgcHJvcGVydHkgc2V0IHRvIHVzZSBhIGZhbGxiYWNrXG4gKiB2YWx1ZSBsaWtlIHRoaXM6XG4gKlxuICogICAgY29sb3I6IHZhcigtLWZvb18tX2NvbG9yKTtcbiAqICAgIGJhY2tncm91bmQ6IHZhcigtLWZvb18tX2JhY2tncm91bmQsIG9yYW5nZSk7XG4gKiAgICBib3JkZXI6IHZhcigtLWZvb18tX2JvcmRlcik7XG4gKlxuICogTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGlzIHJldGFpbmVkIGluIHRoZSBwcm9wZXJ0eSBzZXQgYW5kIHRoZSBgYmFja2dyb3VuZGAgaXNcbiAqIHRoZSBkZXNpcmVkIGBvcmFuZ2VgLiBUaGlzIGxlYWRzIHVzIHRvIGEgbGltaXRhdGlvbi5cbiAqXG4gKiBMaW1pdGF0aW9uIDE6XG5cbiAqIE9ubHkgcHJvcGVydGllcyBpbiB0aGUgcnVsZSB3aGVyZSB0aGUgYEBhcHBseWBcbiAqIGlzIHVzZWQgYXJlIGNvbnNpZGVyZWQgYXMgZGVmYXVsdCB2YWx1ZXMuXG4gKiBJZiBhbm90aGVyIHJ1bGUgbWF0Y2hlcyB0aGUgZWxlbWVudCBhbmQgc2V0cyBgYmFja2dyb3VuZGAgd2l0aFxuICogbGVzcyBzcGVjaWZpY2l0eSB0aGFuIHRoZSBydWxlIGluIHdoaWNoIGBAYXBwbHlgIGFwcGVhcnMsXG4gKiB0aGUgYGJhY2tncm91bmRgIHdpbGwgbm90IGJlIHNldC5cbiAqXG4gKiBMaW1pdGF0aW9uIDI6XG4gKlxuICogV2hlbiB1c2luZyBQb2x5bWVyJ3MgYHVwZGF0ZVN0eWxlc2AgYXBpLCBuZXcgcHJvcGVydGllcyBtYXkgbm90IGJlIHNldCBmb3JcbiAqIGBAYXBwbHlgIHByb3BlcnRpZXMuXG5cbiovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IHtmb3JFYWNoUnVsZSwgcHJvY2Vzc1ZhcmlhYmxlQW5kRmFsbGJhY2ssIHJ1bGVzRm9yU3R5bGUsIHRvQ3NzVGV4dCwgZ2F0aGVyU3R5bGVUZXh0fSBmcm9tICcuL3N0eWxlLXV0aWwuanMnO1xuaW1wb3J0IHtNSVhJTl9NQVRDSCwgVkFSX0FTU0lHTn0gZnJvbSAnLi9jb21tb24tcmVnZXguanMnO1xuaW1wb3J0IHtkZXRlY3RNaXhpbn0gZnJvbSAnLi9jb21tb24tdXRpbHMuanMnO1xuaW1wb3J0IHtTdHlsZU5vZGV9IGZyb20gJy4vY3NzLXBhcnNlLmpzJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG5jb25zdCBBUFBMWV9OQU1FX0NMRUFOID0gLztcXHMqL207XG5jb25zdCBJTklUSUFMX0lOSEVSSVQgPSAvXlxccyooaW5pdGlhbCl8KGluaGVyaXQpXFxzKiQvO1xuY29uc3QgSU1QT1JUQU5UID0gL1xccyohaW1wb3J0YW50LztcblxuLy8gc2VwYXJhdG9yIHVzZWQgYmV0d2VlbiBtaXhpbi1uYW1lIGFuZCBtaXhpbi1wcm9wZXJ0eS1uYW1lIHdoZW4gcHJvZHVjaW5nIHByb3BlcnRpZXNcbi8vIE5PVEU6IHBsYWluICctJyBtYXkgY2F1c2UgY29sbGlzaW9ucyBpbiB1c2VyIHN0eWxlc1xuY29uc3QgTUlYSU5fVkFSX1NFUCA9ICdfLV8nO1xuXG4vKipcbiAqIEB0eXBlZGVmIHshT2JqZWN0PHN0cmluZywgc3RyaW5nPn1cbiAqL1xubGV0IFByb3BlcnR5RW50cnk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLyoqXG4gKiBAdHlwZWRlZiB7IU9iamVjdDxzdHJpbmcsIGJvb2xlYW4+fVxuICovXG5sZXQgRGVwZW5kYW50c0VudHJ5OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbi8qKiBAdHlwZWRlZiB7e1xuICogICAgcHJvcGVydGllczogUHJvcGVydHlFbnRyeSxcbiAqICAgIGRlcGVuZGFudHM6IERlcGVuZGFudHNFbnRyeVxuICogfX1cbiAqL1xubGV0IE1peGluTWFwRW50cnk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLy8gbWFwIG9mIG1peGluIHRvIHByb3BlcnR5IG5hbWVzXG4vLyAtLWZvbzoge2JvcmRlcjogMnB4fSAtPiB7cHJvcGVydGllczogeygtLWZvbywgWydib3JkZXInXSl9LCBkZXBlbmRhbnRzOiB7J2VsZW1lbnQtbmFtZSc6IHByb3RvfX1cbmNsYXNzIE1peGluTWFwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIEB0eXBlIHshT2JqZWN0PHN0cmluZywgIU1peGluTWFwRW50cnk+fSAqL1xuICAgIHRoaXMuX21hcCA9IHt9O1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKiBAcGFyYW0geyFQcm9wZXJ0eUVudHJ5fSBwcm9wc1xuICAgKi9cbiAgc2V0KG5hbWUsIHByb3BzKSB7XG4gICAgbmFtZSA9IG5hbWUudHJpbSgpO1xuICAgIHRoaXMuX21hcFtuYW1lXSA9IHtcbiAgICAgIHByb3BlcnRpZXM6IHByb3BzLFxuICAgICAgZGVwZW5kYW50czoge31cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge01peGluTWFwRW50cnl9XG4gICAqL1xuICBnZXQobmFtZSkge1xuICAgIG5hbWUgPSBuYW1lLnRyaW0oKTtcbiAgICByZXR1cm4gdGhpcy5fbWFwW25hbWVdIHx8IG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsYmFjayBmb3Igd2hlbiBhbiBlbGVtZW50IGlzIG1hcmtlZCBpbnZhbGlkXG4gKiBAdHlwZSB7P2Z1bmN0aW9uKHN0cmluZyl9XG4gKi9cbmxldCBpbnZhbGlkQ2FsbGJhY2sgPSBudWxsO1xuXG4vKiogQHVucmVzdHJpY3RlZCAqL1xuY2xhc3MgQXBwbHlTaGltIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgLyoqIEB0eXBlIHs/c3RyaW5nfSAqL1xuICAgIHRoaXMuX2N1cnJlbnRFbGVtZW50ID0gbnVsbDtcbiAgICAvKiogQHR5cGUge0hUTUxNZXRhRWxlbWVudH0gKi9cbiAgICB0aGlzLl9tZWFzdXJlRWxlbWVudCA9IG51bGw7XG4gICAgdGhpcy5fbWFwID0gbmV3IE1peGluTWFwKCk7XG4gIH1cbiAgLyoqXG4gICAqIHJldHVybiB0cnVlIGlmIGBjc3NUZXh0YCBjb250YWlucyBhIG1peGluIGRlZmluaXRpb24gb3IgY29uc3VtcHRpb25cbiAgICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHRcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIGRldGVjdE1peGluKGNzc1RleHQpIHtcbiAgICByZXR1cm4gZGV0ZWN0TWl4aW4oY3NzVGV4dCk7XG4gIH1cblxuICAvKipcbiAgICogR2F0aGVyIHN0eWxlcyBpbnRvIG9uZSBzdHlsZSBmb3IgZWFzaWVyIHByb2Nlc3NpbmdcbiAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAgICogQHJldHVybiB7SFRNTFN0eWxlRWxlbWVudH1cbiAgICovXG4gIGdhdGhlclN0eWxlcyh0ZW1wbGF0ZSkge1xuICAgIGNvbnN0IHN0eWxlVGV4dCA9IGdhdGhlclN0eWxlVGV4dCh0ZW1wbGF0ZS5jb250ZW50KTtcbiAgICBpZiAoc3R5bGVUZXh0KSB7XG4gICAgICBjb25zdCBzdHlsZSA9IC8qKiBAdHlwZSB7IUhUTUxTdHlsZUVsZW1lbnR9ICovKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJykpO1xuICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSBzdHlsZVRleHQ7XG4gICAgICB0ZW1wbGF0ZS5jb250ZW50Lmluc2VydEJlZm9yZShzdHlsZSwgdGVtcGxhdGUuY29udGVudC5maXJzdENoaWxkKTtcbiAgICAgIHJldHVybiBzdHlsZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgKiBAcmV0dXJuIHtTdHlsZU5vZGV9XG4gICAqL1xuICB0cmFuc2Zvcm1UZW1wbGF0ZSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUpIHtcbiAgICBpZiAodGVtcGxhdGUuX2dhdGhlcmVkU3R5bGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGVtcGxhdGUuX2dhdGhlcmVkU3R5bGUgPSB0aGlzLmdhdGhlclN0eWxlcyh0ZW1wbGF0ZSk7XG4gICAgfVxuICAgIC8qKiBAdHlwZSB7SFRNTFN0eWxlRWxlbWVudH0gKi9cbiAgICBjb25zdCBzdHlsZSA9IHRlbXBsYXRlLl9nYXRoZXJlZFN0eWxlO1xuICAgIHJldHVybiBzdHlsZSA/IHRoaXMudHJhbnNmb3JtU3R5bGUoc3R5bGUsIGVsZW1lbnROYW1lKSA6IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxTdHlsZUVsZW1lbnR9IHN0eWxlXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgKiBAcmV0dXJuIHtTdHlsZU5vZGV9XG4gICAqL1xuICB0cmFuc2Zvcm1TdHlsZShzdHlsZSwgZWxlbWVudE5hbWUgPSAnJykge1xuICAgIGxldCBhc3QgPSBydWxlc0ZvclN0eWxlKHN0eWxlKTtcbiAgICB0aGlzLnRyYW5zZm9ybVJ1bGVzKGFzdCwgZWxlbWVudE5hbWUpO1xuICAgIHN0eWxlLnRleHRDb250ZW50ID0gdG9Dc3NUZXh0KGFzdCk7XG4gICAgcmV0dXJuIGFzdDtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAgICogQHJldHVybiB7U3R5bGVOb2RlfVxuICAgKi9cbiAgdHJhbnNmb3JtQ3VzdG9tU3R5bGUoc3R5bGUpIHtcbiAgICBsZXQgYXN0ID0gcnVsZXNGb3JTdHlsZShzdHlsZSk7XG4gICAgZm9yRWFjaFJ1bGUoYXN0LCAocnVsZSkgPT4ge1xuICAgICAgaWYgKHJ1bGVbJ3NlbGVjdG9yJ10gPT09ICc6cm9vdCcpIHtcbiAgICAgICAgcnVsZVsnc2VsZWN0b3InXSA9ICdodG1sJztcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNmb3JtUnVsZShydWxlKTtcbiAgICB9KVxuICAgIHN0eWxlLnRleHRDb250ZW50ID0gdG9Dc3NUZXh0KGFzdCk7XG4gICAgcmV0dXJuIGFzdDtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtTdHlsZU5vZGV9IHJ1bGVzXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgKi9cbiAgdHJhbnNmb3JtUnVsZXMocnVsZXMsIGVsZW1lbnROYW1lKSB7XG4gICAgdGhpcy5fY3VycmVudEVsZW1lbnQgPSBlbGVtZW50TmFtZTtcbiAgICBmb3JFYWNoUnVsZShydWxlcywgKHIpID0+IHtcbiAgICAgIHRoaXMudHJhbnNmb3JtUnVsZShyKTtcbiAgICB9KTtcbiAgICB0aGlzLl9jdXJyZW50RWxlbWVudCA9IG51bGw7XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7IVN0eWxlTm9kZX0gcnVsZVxuICAgKi9cbiAgdHJhbnNmb3JtUnVsZShydWxlKSB7XG4gICAgcnVsZVsnY3NzVGV4dCddID0gdGhpcy50cmFuc2Zvcm1Dc3NUZXh0KHJ1bGVbJ3BhcnNlZENzc1RleHQnXSwgcnVsZSk7XG4gICAgLy8gOnJvb3Qgd2FzIG9ubHkgdXNlZCBmb3IgdmFyaWFibGUgYXNzaWdubWVudCBpbiBwcm9wZXJ0eSBzaGltLFxuICAgIC8vIGJ1dCBnZW5lcmF0ZXMgaW52YWxpZCBzZWxlY3RvcnMgd2l0aCByZWFsIHByb3BlcnRpZXMuXG4gICAgLy8gcmVwbGFjZSB3aXRoIGA6aG9zdCA+ICpgLCB3aGljaCBzZXJ2ZXMgdGhlIHNhbWUgZWZmZWN0XG4gICAgaWYgKHJ1bGVbJ3NlbGVjdG9yJ10gPT09ICc6cm9vdCcpIHtcbiAgICAgIHJ1bGVbJ3NlbGVjdG9yJ10gPSAnOmhvc3QgPiAqJztcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBjc3NUZXh0XG4gICAqIEBwYXJhbSB7IVN0eWxlTm9kZX0gcnVsZVxuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICB0cmFuc2Zvcm1Dc3NUZXh0KGNzc1RleHQsIHJ1bGUpIHtcbiAgICAvLyBwcm9kdWNlIHZhcmlhYmxlc1xuICAgIGNzc1RleHQgPSBjc3NUZXh0LnJlcGxhY2UoVkFSX0FTU0lHTiwgKG1hdGNoVGV4dCwgcHJvcGVydHlOYW1lLCB2YWx1ZVByb3BlcnR5LCB2YWx1ZU1peGluKSA9PlxuICAgICAgdGhpcy5fcHJvZHVjZUNzc1Byb3BlcnRpZXMobWF0Y2hUZXh0LCBwcm9wZXJ0eU5hbWUsIHZhbHVlUHJvcGVydHksIHZhbHVlTWl4aW4sIHJ1bGUpKTtcbiAgICAvLyBjb25zdW1lIG1peGluc1xuICAgIHJldHVybiB0aGlzLl9jb25zdW1lQ3NzUHJvcGVydGllcyhjc3NUZXh0LCBydWxlKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5XG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9nZXRJbml0aWFsVmFsdWVGb3JQcm9wZXJ0eShwcm9wZXJ0eSkge1xuICAgIGlmICghdGhpcy5fbWVhc3VyZUVsZW1lbnQpIHtcbiAgICAgIHRoaXMuX21lYXN1cmVFbGVtZW50ID0gLyoqIEB0eXBlIHtIVE1MTWV0YUVsZW1lbnR9ICovKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ21ldGEnKSk7XG4gICAgICB0aGlzLl9tZWFzdXJlRWxlbWVudC5zZXRBdHRyaWJ1dGUoJ2FwcGx5LXNoaW0tbWVhc3VyZScsICcnKTtcbiAgICAgIHRoaXMuX21lYXN1cmVFbGVtZW50LnN0eWxlLmFsbCA9ICdpbml0aWFsJztcbiAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodGhpcy5fbWVhc3VyZUVsZW1lbnQpO1xuICAgIH1cbiAgICByZXR1cm4gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5fbWVhc3VyZUVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUocHJvcGVydHkpO1xuICB9XG4gIC8qKlxuICAgKiBXYWxrIG92ZXIgYWxsIHJ1bGVzIGJlZm9yZSB0aGlzIHJ1bGUgdG8gZmluZCBmYWxsYmFja3MgZm9yIG1peGluc1xuICAgKlxuICAgKiBAcGFyYW0geyFTdHlsZU5vZGV9IHN0YXJ0UnVsZVxuICAgKiBAcmV0dXJuIHshT2JqZWN0fVxuICAgKi9cbiAgX2ZhbGxiYWNrc0Zyb21QcmV2aW91c1J1bGVzKHN0YXJ0UnVsZSkge1xuICAgIC8vIGZpbmQgdGhlIFwidG9wXCIgcnVsZVxuICAgIGxldCB0b3BSdWxlID0gc3RhcnRSdWxlO1xuICAgIHdoaWxlICh0b3BSdWxlWydwYXJlbnQnXSkge1xuICAgICAgdG9wUnVsZSA9IHRvcFJ1bGVbJ3BhcmVudCddO1xuICAgIH1cbiAgICBjb25zdCBmYWxsYmFja3MgPSB7fTtcbiAgICBsZXQgc2VlblN0YXJ0UnVsZSA9IGZhbHNlO1xuICAgIGZvckVhY2hSdWxlKHRvcFJ1bGUsIChyKSA9PiB7XG4gICAgICAvLyBzdG9wIHdoZW4gd2UgaGl0IHRoZSBpbnB1dCBydWxlXG4gICAgICBzZWVuU3RhcnRSdWxlID0gc2VlblN0YXJ0UnVsZSB8fCByID09PSBzdGFydFJ1bGU7XG4gICAgICBpZiAoc2VlblN0YXJ0UnVsZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBOT1RFOiBPbmx5IG1hdGNoaW5nIHNlbGVjdG9ycyBhcmUgXCJzYWZlXCIgZm9yIHRoaXMgZmFsbGJhY2sgcHJvY2Vzc2luZ1xuICAgICAgLy8gSXQgd291bGQgYmUgcHJvaGliaXRpdmUgdG8gcnVuIGBtYXRjaGVzU2VsZWN0b3IoKWAgb24gZWFjaCBzZWxlY3RvcixcbiAgICAgIC8vIHNvIHdlIGNoZWF0IGFuZCBvbmx5IGNoZWNrIGlmIHRoZSBzYW1lIHNlbGVjdG9yIHN0cmluZyBpcyB1c2VkLCB3aGljaFxuICAgICAgLy8gZ3VhcmFudGVlcyB0aGluZ3MgbGlrZSBzcGVjaWZpY2l0eSBtYXRjaGluZ1xuICAgICAgaWYgKHJbJ3NlbGVjdG9yJ10gPT09IHN0YXJ0UnVsZVsnc2VsZWN0b3InXSkge1xuICAgICAgICBPYmplY3QuYXNzaWduKGZhbGxiYWNrcywgdGhpcy5fY3NzVGV4dFRvTWFwKHJbJ3BhcnNlZENzc1RleHQnXSkpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBmYWxsYmFja3M7XG4gIH1cbiAgLyoqXG4gICAqIHJlcGxhY2UgbWl4aW4gY29uc3VtcHRpb24gd2l0aCB2YXJpYWJsZSBjb25zdW1wdGlvblxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0geyFTdHlsZU5vZGU9fSBydWxlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9jb25zdW1lQ3NzUHJvcGVydGllcyh0ZXh0LCBydWxlKSB7XG4gICAgLyoqIEB0eXBlIHtBcnJheX0gKi9cbiAgICBsZXQgbSA9IG51bGw7XG4gICAgLy8gbG9vcCBvdmVyIHRleHQgdW50aWwgYWxsIG1peGlucyB3aXRoIGRlZmludGlvbnMgaGF2ZSBiZWVuIGFwcGxpZWRcbiAgICB3aGlsZSgobSA9IE1JWElOX01BVENILmV4ZWModGV4dCkpKSB7XG4gICAgICBsZXQgbWF0Y2hUZXh0ID0gbVswXTtcbiAgICAgIGxldCBtaXhpbk5hbWUgPSBtWzFdO1xuICAgICAgbGV0IGlkeCA9IG0uaW5kZXg7XG4gICAgICAvLyBjb2xsZWN0IHByb3BlcnRpZXMgYmVmb3JlIGFwcGx5IHRvIGJlIFwiZGVmYXVsdHNcIiBpZiBtaXhpbiBtaWdodCBvdmVycmlkZSB0aGVtXG4gICAgICAvLyBtYXRjaCBpbmNsdWRlcyBhIFwicHJlZml4XCIsIHNvIGZpbmQgdGhlIHN0YXJ0IGFuZCBlbmQgcG9zaXRpb25zIG9mIEBhcHBseVxuICAgICAgbGV0IGFwcGx5UG9zID0gaWR4ICsgbWF0Y2hUZXh0LmluZGV4T2YoJ0BhcHBseScpO1xuICAgICAgbGV0IGFmdGVyQXBwbHlQb3MgPSBpZHggKyBtYXRjaFRleHQubGVuZ3RoO1xuICAgICAgLy8gZmluZCBwcm9wcyBkZWZpbmVkIGJlZm9yZSB0aGlzIEBhcHBseVxuICAgICAgbGV0IHRleHRCZWZvcmVBcHBseSA9IHRleHQuc2xpY2UoMCwgYXBwbHlQb3MpO1xuICAgICAgbGV0IHRleHRBZnRlckFwcGx5ID0gdGV4dC5zbGljZShhZnRlckFwcGx5UG9zKTtcbiAgICAgIGxldCBkZWZhdWx0cyA9IHJ1bGUgPyB0aGlzLl9mYWxsYmFja3NGcm9tUHJldmlvdXNSdWxlcyhydWxlKSA6IHt9O1xuICAgICAgT2JqZWN0LmFzc2lnbihkZWZhdWx0cywgdGhpcy5fY3NzVGV4dFRvTWFwKHRleHRCZWZvcmVBcHBseSkpO1xuICAgICAgbGV0IHJlcGxhY2VtZW50ID0gdGhpcy5fYXRBcHBseVRvQ3NzUHJvcGVydGllcyhtaXhpbk5hbWUsIGRlZmF1bHRzKTtcbiAgICAgIC8vIHVzZSByZWdleCBtYXRjaCBwb3NpdGlvbiB0byByZXBsYWNlIG1peGluLCBrZWVwIGxpbmVhciBwcm9jZXNzaW5nIHRpbWVcbiAgICAgIHRleHQgPSBgJHt0ZXh0QmVmb3JlQXBwbHl9JHtyZXBsYWNlbWVudH0ke3RleHRBZnRlckFwcGx5fWA7XG4gICAgICAvLyBtb3ZlIHJlZ2V4IHNlYXJjaCB0byBfYWZ0ZXJfIHJlcGxhY2VtZW50XG4gICAgICBNSVhJTl9NQVRDSC5sYXN0SW5kZXggPSBpZHggKyByZXBsYWNlbWVudC5sZW5ndGg7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0O1xuICB9XG4gIC8qKlxuICAgKiBwcm9kdWNlIHZhcmlhYmxlIGNvbnN1bXB0aW9uIGF0IHRoZSBzaXRlIG9mIG1peGluIGNvbnN1bXB0aW9uXG4gICAqIGBAYXBwbHlgIC0tZm9vOyAtPiBmb3IgYWxsIHByb3BzICgke3Byb3BuYW1lfTogdmFyKC0tZm9vXy1fJHtwcm9wbmFtZX0sICR7ZmFsbGJhY2tbcHJvcG5hbWVdfX0pKVxuICAgKiBFeGFtcGxlOlxuICAgKiAgYm9yZGVyOiB2YXIoLS1mb29fLV9ib3JkZXIpOyBwYWRkaW5nOiB2YXIoLS1mb29fLV9wYWRkaW5nLCAycHgpXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBtaXhpbk5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R9IGZhbGxiYWNrc1xuICAgKiBAcmV0dXJuIHtzdHJpbmd9XG4gICAqL1xuICBfYXRBcHBseVRvQ3NzUHJvcGVydGllcyhtaXhpbk5hbWUsIGZhbGxiYWNrcykge1xuICAgIG1peGluTmFtZSA9IG1peGluTmFtZS5yZXBsYWNlKEFQUExZX05BTUVfQ0xFQU4sICcnKTtcbiAgICBsZXQgdmFycyA9IFtdO1xuICAgIGxldCBtaXhpbkVudHJ5ID0gdGhpcy5fbWFwLmdldChtaXhpbk5hbWUpO1xuICAgIC8vIGlmIHdlIGRlcGVuZCBvbiBhIG1peGluIGJlZm9yZSBpdCBpcyBjcmVhdGVkXG4gICAgLy8gbWFrZSBhIHNlbnRpbmVsIGVudHJ5IGluIHRoZSBtYXAgdG8gYWRkIHRoaXMgZWxlbWVudCBhcyBhIGRlcGVuZGVuY3kgZm9yIHdoZW4gaXQgaXMgZGVmaW5lZC5cbiAgICBpZiAoIW1peGluRW50cnkpIHtcbiAgICAgIHRoaXMuX21hcC5zZXQobWl4aW5OYW1lLCB7fSk7XG4gICAgICBtaXhpbkVudHJ5ID0gdGhpcy5fbWFwLmdldChtaXhpbk5hbWUpO1xuICAgIH1cbiAgICBpZiAobWl4aW5FbnRyeSkge1xuICAgICAgaWYgKHRoaXMuX2N1cnJlbnRFbGVtZW50KSB7XG4gICAgICAgIG1peGluRW50cnkuZGVwZW5kYW50c1t0aGlzLl9jdXJyZW50RWxlbWVudF0gPSB0cnVlO1xuICAgICAgfVxuICAgICAgbGV0IHAsIHBhcnRzLCBmO1xuICAgICAgY29uc3QgcHJvcGVydGllcyA9IG1peGluRW50cnkucHJvcGVydGllcztcbiAgICAgIGZvciAocCBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgIGYgPSBmYWxsYmFja3MgJiYgZmFsbGJhY2tzW3BdO1xuICAgICAgICBwYXJ0cyA9IFtwLCAnOiB2YXIoJywgbWl4aW5OYW1lLCBNSVhJTl9WQVJfU0VQLCBwXTtcbiAgICAgICAgaWYgKGYpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKCcsJywgZi5yZXBsYWNlKElNUE9SVEFOVCwgJycpKTtcbiAgICAgICAgfVxuICAgICAgICBwYXJ0cy5wdXNoKCcpJyk7XG4gICAgICAgIGlmIChJTVBPUlRBTlQudGVzdChwcm9wZXJ0aWVzW3BdKSkge1xuICAgICAgICAgIHBhcnRzLnB1c2goJyAhaW1wb3J0YW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFycy5wdXNoKHBhcnRzLmpvaW4oJycpKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhcnMuam9pbignOyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlcbiAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9yZXBsYWNlSW5pdGlhbE9ySW5oZXJpdChwcm9wZXJ0eSwgdmFsdWUpIHtcbiAgICBsZXQgbWF0Y2ggPSBJTklUSUFMX0lOSEVSSVQuZXhlYyh2YWx1ZSk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBpZiAobWF0Y2hbMV0pIHtcbiAgICAgICAgLy8gaW5pdGlhbFxuICAgICAgICAvLyByZXBsYWNlIGBpbml0aWFsYCB3aXRoIHRoZSBjb25jcmV0ZSBpbml0aWFsIHZhbHVlIGZvciB0aGlzIHByb3BlcnR5XG4gICAgICAgIHZhbHVlID0gdGhpcy5fZ2V0SW5pdGlhbFZhbHVlRm9yUHJvcGVydHkocHJvcGVydHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW5oZXJpdFxuICAgICAgICAvLyB3aXRoIHRoaXMgcHVycG9zZnVsbHkgaWxsZWdhbCB2YWx1ZSwgdGhlIHZhcmlhYmxlIHdpbGwgYmUgaW52YWxpZCBhdFxuICAgICAgICAvLyBjb21wdXRlIHRpbWUgKGh0dHBzOi8vd3d3LnczLm9yZy9UUi9jc3MtdmFyaWFibGVzLyNpbnZhbGlkLWF0LWNvbXB1dGVkLXZhbHVlLXRpbWUpXG4gICAgICAgIC8vIGFuZCBmb3IgaW5oZXJpdGluZyB2YWx1ZXMsIHdpbGwgYmVoYXZlIHNpbWlsYXJseVxuICAgICAgICAvLyB3ZSBjYW5ub3Qgc3VwcG9ydCB0aGUgc2FtZSBiZWhhdmlvciBmb3Igbm9uIGluaGVyaXRpbmcgdmFsdWVzIGxpa2UgJ2JvcmRlcidcbiAgICAgICAgdmFsdWUgPSAnYXBwbHktc2hpbS1pbmhlcml0JztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFwicGFyc2VcIiBhIG1peGluIGRlZmluaXRpb24gaW50byBhIG1hcCBvZiBwcm9wZXJ0aWVzIGFuZCB2YWx1ZXNcbiAgICogY3NzVGV4dFRvTWFwKCdib3JkZXI6IDJweCBzb2xpZCBibGFjaycpIC0+ICgnYm9yZGVyJywgJzJweCBzb2xpZCBibGFjaycpXG4gICAqIEBwYXJhbSB7c3RyaW5nfSB0ZXh0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IHJlcGxhY2VJbml0aWFsT3JJbmhlcml0XG4gICAqIEByZXR1cm4geyFPYmplY3Q8c3RyaW5nLCBzdHJpbmc+fVxuICAgKi9cbiAgX2Nzc1RleHRUb01hcCh0ZXh0LCByZXBsYWNlSW5pdGlhbE9ySW5oZXJpdCA9IGZhbHNlKSB7XG4gICAgbGV0IHByb3BzID0gdGV4dC5zcGxpdCgnOycpO1xuICAgIGxldCBwcm9wZXJ0eSwgdmFsdWU7XG4gICAgbGV0IG91dCA9IHt9O1xuICAgIGZvciAobGV0IGkgPSAwLCBwLCBzcDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBwID0gcHJvcHNbaV07XG4gICAgICBpZiAocCkge1xuICAgICAgICBzcCA9IHAuc3BsaXQoJzonKTtcbiAgICAgICAgLy8gaWdub3JlIGxpbmVzIHRoYXQgYXJlbid0IGRlZmluaXRpb25zIGxpa2UgQG1lZGlhXG4gICAgICAgIGlmIChzcC5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgcHJvcGVydHkgPSBzcFswXS50cmltKCk7XG4gICAgICAgICAgLy8gc29tZSBwcm9wZXJ0aWVzIG1heSBoYXZlICc6JyBpbiB0aGUgdmFsdWUsIGxpa2UgZGF0YSB1cmxzXG4gICAgICAgICAgdmFsdWUgPSBzcC5zbGljZSgxKS5qb2luKCc6Jyk7XG4gICAgICAgICAgaWYgKHJlcGxhY2VJbml0aWFsT3JJbmhlcml0KSB7XG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXMuX3JlcGxhY2VJbml0aWFsT3JJbmhlcml0KHByb3BlcnR5LCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIG91dFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7TWl4aW5NYXBFbnRyeX0gbWl4aW5FbnRyeVxuICAgKi9cbiAgX2ludmFsaWRhdGVNaXhpbkVudHJ5KG1peGluRW50cnkpIHtcbiAgICBpZiAoIWludmFsaWRDYWxsYmFjaykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBlbGVtZW50TmFtZSBpbiBtaXhpbkVudHJ5LmRlcGVuZGFudHMpIHtcbiAgICAgIGlmIChlbGVtZW50TmFtZSAhPT0gdGhpcy5fY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgaW52YWxpZENhbGxiYWNrKGVsZW1lbnROYW1lKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtzdHJpbmd9IG1hdGNoVGV4dFxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHlOYW1lXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gdmFsdWVQcm9wZXJ0eVxuICAgKiBAcGFyYW0gez9zdHJpbmd9IHZhbHVlTWl4aW5cbiAgICogQHBhcmFtIHshU3R5bGVOb2RlfSBydWxlXG4gICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICovXG4gIF9wcm9kdWNlQ3NzUHJvcGVydGllcyhtYXRjaFRleHQsIHByb3BlcnR5TmFtZSwgdmFsdWVQcm9wZXJ0eSwgdmFsdWVNaXhpbiwgcnVsZSkge1xuICAgIC8vIGhhbmRsZSBjYXNlIHdoZXJlIHByb3BlcnR5IHZhbHVlIGlzIGEgbWl4aW5cbiAgICBpZiAodmFsdWVQcm9wZXJ0eSkge1xuICAgICAgLy8gZm9ybTogLS1taXhpbjI6IHZhcigtLW1peGluMSksIHdoZXJlIC0tbWl4aW4xIGlzIGluIHRoZSBtYXBcbiAgICAgIHByb2Nlc3NWYXJpYWJsZUFuZEZhbGxiYWNrKHZhbHVlUHJvcGVydHksIChwcmVmaXgsIHZhbHVlKSA9PiB7XG4gICAgICAgIGlmICh2YWx1ZSAmJiB0aGlzLl9tYXAuZ2V0KHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlTWl4aW4gPSBgQGFwcGx5ICR7dmFsdWV9O2BcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICghdmFsdWVNaXhpbikge1xuICAgICAgcmV0dXJuIG1hdGNoVGV4dDtcbiAgICB9XG4gICAgbGV0IG1peGluQXNQcm9wZXJ0aWVzID0gdGhpcy5fY29uc3VtZUNzc1Byb3BlcnRpZXMoJycgKyB2YWx1ZU1peGluLCBydWxlKTtcbiAgICBsZXQgcHJlZml4ID0gbWF0Y2hUZXh0LnNsaWNlKDAsIG1hdGNoVGV4dC5pbmRleE9mKCctLScpKTtcbiAgICAvLyBgaW5pdGlhbGAgYW5kIGBpbmhlcml0YCBhcyBwcm9wZXJ0aWVzIGluIGEgbWFwIHNob3VsZCBiZSByZXBsYWNlZCBiZWNhdXNlXG4gICAgLy8gdGhlc2Uga2V5d29yZHMgYXJlIGVhZ2VybHkgZXZhbHVhdGVkIHdoZW4gdGhlIG1peGluIGJlY29tZXMgQ1NTIEN1c3RvbSBQcm9wZXJ0aWVzLFxuICAgIC8vIGFuZCB3b3VsZCBzZXQgdGhlIHZhcmlhYmxlIHZhbHVlLCByYXRoZXIgdGhhbiBjYXJyeSB0aGUga2V5d29yZCB0byB0aGUgYHZhcigpYCB1c2FnZS5cbiAgICBsZXQgbWl4aW5WYWx1ZXMgPSB0aGlzLl9jc3NUZXh0VG9NYXAobWl4aW5Bc1Byb3BlcnRpZXMsIHRydWUpO1xuICAgIGxldCBjb21iaW5lZFByb3BzID0gbWl4aW5WYWx1ZXM7XG4gICAgbGV0IG1peGluRW50cnkgPSB0aGlzLl9tYXAuZ2V0KHByb3BlcnR5TmFtZSk7XG4gICAgbGV0IG9sZFByb3BzID0gbWl4aW5FbnRyeSAmJiBtaXhpbkVudHJ5LnByb3BlcnRpZXM7XG4gICAgaWYgKG9sZFByb3BzKSB7XG4gICAgICAvLyBOT1RFOiBzaW5jZSB3ZSB1c2UgbWl4aW4sIHRoZSBtYXAgb2YgcHJvcGVydGllcyBpcyB1cGRhdGVkIGhlcmVcbiAgICAgIC8vIGFuZCB0aGlzIGlzIHdoYXQgd2Ugd2FudC5cbiAgICAgIGNvbWJpbmVkUHJvcHMgPSBPYmplY3QuYXNzaWduKE9iamVjdC5jcmVhdGUob2xkUHJvcHMpLCBtaXhpblZhbHVlcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX21hcC5zZXQocHJvcGVydHlOYW1lLCBjb21iaW5lZFByb3BzKTtcbiAgICB9XG4gICAgbGV0IG91dCA9IFtdO1xuICAgIGxldCBwLCB2O1xuICAgIC8vIHNldCB2YXJpYWJsZXMgZGVmaW5lZCBieSBjdXJyZW50IG1peGluXG4gICAgbGV0IG5lZWRUb0ludmFsaWRhdGUgPSBmYWxzZTtcbiAgICBmb3IgKHAgaW4gY29tYmluZWRQcm9wcykge1xuICAgICAgdiA9IG1peGluVmFsdWVzW3BdO1xuICAgICAgLy8gaWYgcHJvcGVydHkgbm90IGRlZmluZWQgYnkgY3VycmVudCBtaXhpbiwgc2V0IGluaXRpYWxcbiAgICAgIGlmICh2ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdiA9ICdpbml0aWFsJztcbiAgICAgIH1cbiAgICAgIGlmIChvbGRQcm9wcyAmJiAhKHAgaW4gb2xkUHJvcHMpKSB7XG4gICAgICAgIG5lZWRUb0ludmFsaWRhdGUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgb3V0LnB1c2goYCR7cHJvcGVydHlOYW1lfSR7TUlYSU5fVkFSX1NFUH0ke3B9OiAke3Z9YCk7XG4gICAgfVxuICAgIGlmIChuZWVkVG9JbnZhbGlkYXRlKSB7XG4gICAgICB0aGlzLl9pbnZhbGlkYXRlTWl4aW5FbnRyeShtaXhpbkVudHJ5KTtcbiAgICB9XG4gICAgaWYgKG1peGluRW50cnkpIHtcbiAgICAgIG1peGluRW50cnkucHJvcGVydGllcyA9IGNvbWJpbmVkUHJvcHM7XG4gICAgfVxuICAgIC8vIGJlY2F1c2UgdGhlIG1peGluTWFwIGlzIGdsb2JhbCwgdGhlIG1peGluIG1pZ2h0IGNvbmZsaWN0IHdpdGhcbiAgICAvLyBhIGRpZmZlcmVudCBzY29wZSdzIHNpbXBsZSB2YXJpYWJsZSBkZWZpbml0aW9uOlxuICAgIC8vIEV4YW1wbGU6XG4gICAgLy8gc29tZSBzdHlsZSBzb21ld2hlcmU6XG4gICAgLy8gLS1taXhpbjE6eyAuLi4gfVxuICAgIC8vIC0tbWl4aW4yOiB2YXIoLS1taXhpbjEpO1xuICAgIC8vIHNvbWUgb3RoZXIgZWxlbWVudDpcbiAgICAvLyAtLW1peGluMTogMTBweCBzb2xpZCByZWQ7XG4gICAgLy8gLS1mb286IHZhcigtLW1peGluMSk7XG4gICAgLy8gSW4gdGhpcyBjYXNlLCB3ZSBsZWF2ZSB0aGUgb3JpZ2luYWwgdmFyaWFibGUgZGVmaW5pdGlvbiBpbiBwbGFjZS5cbiAgICBpZiAodmFsdWVQcm9wZXJ0eSkge1xuICAgICAgcHJlZml4ID0gYCR7bWF0Y2hUZXh0fTske3ByZWZpeH1gO1xuICAgIH1cbiAgICByZXR1cm4gYCR7cHJlZml4fSR7b3V0LmpvaW4oJzsgJyl9O2A7XG4gIH1cbn1cblxuLyogZXhwb3J0cyAqL1xuLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1hc3NpZ24gKi9cbkFwcGx5U2hpbS5wcm90b3R5cGVbJ2RldGVjdE1peGluJ10gPSBBcHBseVNoaW0ucHJvdG90eXBlLmRldGVjdE1peGluO1xuQXBwbHlTaGltLnByb3RvdHlwZVsndHJhbnNmb3JtU3R5bGUnXSA9IEFwcGx5U2hpbS5wcm90b3R5cGUudHJhbnNmb3JtU3R5bGU7XG5BcHBseVNoaW0ucHJvdG90eXBlWyd0cmFuc2Zvcm1DdXN0b21TdHlsZSddID0gQXBwbHlTaGltLnByb3RvdHlwZS50cmFuc2Zvcm1DdXN0b21TdHlsZTtcbkFwcGx5U2hpbS5wcm90b3R5cGVbJ3RyYW5zZm9ybVJ1bGVzJ10gPSBBcHBseVNoaW0ucHJvdG90eXBlLnRyYW5zZm9ybVJ1bGVzO1xuQXBwbHlTaGltLnByb3RvdHlwZVsndHJhbnNmb3JtUnVsZSddID0gQXBwbHlTaGltLnByb3RvdHlwZS50cmFuc2Zvcm1SdWxlO1xuQXBwbHlTaGltLnByb3RvdHlwZVsndHJhbnNmb3JtVGVtcGxhdGUnXSA9IEFwcGx5U2hpbS5wcm90b3R5cGUudHJhbnNmb3JtVGVtcGxhdGU7XG5BcHBseVNoaW0ucHJvdG90eXBlWydfc2VwYXJhdG9yJ10gPSBNSVhJTl9WQVJfU0VQO1xuLyogZXNsaW50LWVuYWJsZSBuby1zZWxmLWFzc2lnbiAqL1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KEFwcGx5U2hpbS5wcm90b3R5cGUsICdpbnZhbGlkQ2FsbGJhY2snLCB7XG4gIC8qKiBAcmV0dXJuIHs/ZnVuY3Rpb24oc3RyaW5nKX0gKi9cbiAgZ2V0KCkge1xuICAgIHJldHVybiBpbnZhbGlkQ2FsbGJhY2s7XG4gIH0sXG4gIC8qKiBAcGFyYW0gez9mdW5jdGlvbihzdHJpbmcpfSBjYiAqL1xuICBzZXQoY2IpIHtcbiAgICBpbnZhbGlkQ2FsbGJhY2sgPSBjYjtcbiAgfVxufSk7XG5cbmV4cG9ydCBkZWZhdWx0IEFwcGx5U2hpbTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogQGNvbnN0IHshT2JqZWN0PHN0cmluZywgIUhUTUxUZW1wbGF0ZUVsZW1lbnQ+fVxuICovXG5jb25zdCB0ZW1wbGF0ZU1hcCA9IHt9O1xuZXhwb3J0IGRlZmF1bHQgdGVtcGxhdGVNYXA7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuaW1wb3J0IHRlbXBsYXRlTWFwIGZyb20gJy4vdGVtcGxhdGUtbWFwLmpzJztcbmltcG9ydCB7U3R5bGVOb2RlfSBmcm9tICcuL2Nzcy1wYXJzZS5qcyc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLypcbiAqIFV0aWxpdGllcyBmb3IgaGFuZGxpbmcgaW52YWxpZGF0aW5nIGFwcGx5LXNoaW0gbWl4aW5zIGZvciBhIGdpdmVuIHRlbXBsYXRlLlxuICpcbiAqIFRoZSBpbnZhbGlkYXRpb24gc3RyYXRlZ3kgaW52b2x2ZXMga2VlcGluZyB0cmFjayBvZiB0aGUgXCJjdXJyZW50XCIgdmVyc2lvbiBvZiBhIHRlbXBsYXRlJ3MgbWl4aW5zLCBhbmQgdXBkYXRpbmcgdGhhdCBjb3VudCB3aGVuIGEgbWl4aW4gaXMgaW52YWxpZGF0ZWQuXG4gKiBUaGUgdGVtcGxhdGVcbiAqL1xuXG4vKiogQGNvbnN0IHtzdHJpbmd9ICovXG5jb25zdCBDVVJSRU5UX1ZFUlNJT04gPSAnX2FwcGx5U2hpbUN1cnJlbnRWZXJzaW9uJztcblxuLyoqIEBjb25zdCB7c3RyaW5nfSAqL1xuY29uc3QgTkVYVF9WRVJTSU9OID0gJ19hcHBseVNoaW1OZXh0VmVyc2lvbic7XG5cbi8qKiBAY29uc3Qge3N0cmluZ30gKi9cbmNvbnN0IFZBTElEQVRJTkdfVkVSU0lPTiA9ICdfYXBwbHlTaGltVmFsaWRhdGluZ1ZlcnNpb24nO1xuXG4vKipcbiAqIEBjb25zdCB7UHJvbWlzZTx2b2lkPn1cbiAqL1xuY29uc3QgcHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpO1xuXG4vKipcbiAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZGF0ZShlbGVtZW50TmFtZSl7XG4gIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlTWFwW2VsZW1lbnROYW1lXTtcbiAgaWYgKHRlbXBsYXRlKSB7XG4gICAgaW52YWxpZGF0ZVRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gY2FuIGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyB0byBtYXJrIGEgdGVtcGxhdGUgaW52YWxpZFxuICogYW5kIHNpZ25hbCB0aGF0IHRoZSBzdHlsZSBpbnNpZGUgbXVzdCBiZSByZWdlbmVyYXRlZC5cbiAqXG4gKiBVc2UgYHN0YXJ0VmFsaWRhdGluZ1RlbXBsYXRlYCB0byBiZWdpbiBhbiBhc3luY2hyb25vdXMgdmFsaWRhdGlvbiBjeWNsZS5cbiAqIER1cmluZyB0aGF0IGN5Y2xlLCBjYWxsIGB0ZW1wbGF0ZUlzVmFsaWRhdGluZ2AgdG8gc2VlIGlmIHRoZSB0ZW1wbGF0ZSBtdXN0XG4gKiBiZSByZXZhbGlkYXRlZFxuICogQHBhcmFtIHtIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW52YWxpZGF0ZVRlbXBsYXRlKHRlbXBsYXRlKSB7XG4gIC8vIGRlZmF1bHQgdGhlIGN1cnJlbnQgdmVyc2lvbiB0byAwXG4gIHRlbXBsYXRlW0NVUlJFTlRfVkVSU0lPTl0gPSB0ZW1wbGF0ZVtDVVJSRU5UX1ZFUlNJT05dIHx8IDA7XG4gIC8vIGVuc3VyZSB0aGUgXCJ2YWxpZGF0aW5nIGZvclwiIGZsYWcgZXhpc3RzXG4gIHRlbXBsYXRlW1ZBTElEQVRJTkdfVkVSU0lPTl0gPSB0ZW1wbGF0ZVtWQUxJREFUSU5HX1ZFUlNJT05dIHx8IDA7XG4gIC8vIGluY3JlbWVudCB0aGUgbmV4dCB2ZXJzaW9uXG4gIHRlbXBsYXRlW05FWFRfVkVSU0lPTl0gPSAodGVtcGxhdGVbTkVYVF9WRVJTSU9OXSB8fCAwKSArIDE7XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZChlbGVtZW50TmFtZSkge1xuICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZU1hcFtlbGVtZW50TmFtZV07XG4gIGlmICh0ZW1wbGF0ZSkge1xuICAgIHJldHVybiB0ZW1wbGF0ZUlzVmFsaWQodGVtcGxhdGUpO1xuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEBwYXJhbSB7SFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAqIEByZXR1cm4ge2Jvb2xlYW59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0ZW1wbGF0ZUlzVmFsaWQodGVtcGxhdGUpIHtcbiAgcmV0dXJuIHRlbXBsYXRlW0NVUlJFTlRfVkVSU0lPTl0gPT09IHRlbXBsYXRlW05FWFRfVkVSU0lPTl07XG59XG5cbi8qKlxuICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNWYWxpZGF0aW5nKGVsZW1lbnROYW1lKSB7XG4gIGxldCB0ZW1wbGF0ZSA9IHRlbXBsYXRlTWFwW2VsZW1lbnROYW1lXTtcbiAgaWYgKHRlbXBsYXRlKSB7XG4gICAgcmV0dXJuIHRlbXBsYXRlSXNWYWxpZGF0aW5nKHRlbXBsYXRlKTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSB0ZW1wbGF0ZSBpcyBjdXJyZW50bHkgaW52YWxpZCBhbmQgYHN0YXJ0VmFsaWRhdGluZ2AgaGFzIGJlZW4gY2FsbGVkIHNpbmNlIHRoZSBsYXN0IGludmFsaWRhdGlvbi5cbiAqIElmIGZhbHNlLCB0aGUgdGVtcGxhdGUgbXVzdCBiZSB2YWxpZGF0ZWQuXG4gKiBAcGFyYW0ge0hUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlXG4gKiBAcmV0dXJuIHtib29sZWFufVxuICovXG5leHBvcnQgZnVuY3Rpb24gdGVtcGxhdGVJc1ZhbGlkYXRpbmcodGVtcGxhdGUpIHtcbiAgcmV0dXJuICF0ZW1wbGF0ZUlzVmFsaWQodGVtcGxhdGUpICYmIHRlbXBsYXRlW1ZBTElEQVRJTkdfVkVSU0lPTl0gPT09IHRlbXBsYXRlW05FWFRfVkVSU0lPTl07XG59XG5cbi8qKlxuICogdGhlIHRlbXBsYXRlIGlzIG1hcmtlZCBhcyBgdmFsaWRhdGluZ2AgZm9yIG9uZSBtaWNyb3Rhc2sgc28gdGhhdCBhbGwgaW5zdGFuY2VzXG4gKiBmb3VuZCBpbiB0aGUgdHJlZSBjcmF3bCBvZiBgYXBwbHlTdHlsZWAgd2lsbCB1cGRhdGUgdGhlbXNlbHZlcyxcbiAqIGJ1dCB0aGUgdGVtcGxhdGUgd2lsbCBvbmx5IGJlIHVwZGF0ZWQgb25jZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuKi9cbmV4cG9ydCBmdW5jdGlvbiBzdGFydFZhbGlkYXRpbmcoZWxlbWVudE5hbWUpIHtcbiAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVNYXBbZWxlbWVudE5hbWVdO1xuICBzdGFydFZhbGlkYXRpbmdUZW1wbGF0ZSh0ZW1wbGF0ZSk7XG59XG5cbi8qKlxuICogQmVnaW4gYW4gYXN5bmNocm9ub3VzIGludmFsaWRhdGlvbiBjeWNsZS5cbiAqIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBldmVyeSB2YWxpZGF0aW9uIG9mIGEgdGVtcGxhdGVcbiAqXG4gKiBBZnRlciBvbmUgbWljcm90YXNrLCB0aGUgdGVtcGxhdGUgd2lsbCBiZSBtYXJrZWQgYXMgdmFsaWQgdW50aWwgdGhlIG5leHQgY2FsbCB0byBgaW52YWxpZGF0ZVRlbXBsYXRlYFxuICogQHBhcmFtIHtIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICovXG5leHBvcnQgZnVuY3Rpb24gc3RhcnRWYWxpZGF0aW5nVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgLy8gcmVtZW1iZXIgdGhhdCB0aGUgY3VycmVudCBcIm5leHQgdmVyc2lvblwiIGlzIHRoZSByZWFzb24gZm9yIHRoaXMgdmFsaWRhdGlvbiBjeWNsZVxuICB0ZW1wbGF0ZVtWQUxJREFUSU5HX1ZFUlNJT05dID0gdGVtcGxhdGVbTkVYVF9WRVJTSU9OXTtcbiAgLy8gaG93ZXZlciwgdGhlcmUgb25seSBuZWVkcyB0byBiZSBvbmUgYXN5bmMgdGFzayB0byBjbGVhciB0aGUgY291bnRlcnNcbiAgaWYgKCF0ZW1wbGF0ZS5fdmFsaWRhdGluZykge1xuICAgIHRlbXBsYXRlLl92YWxpZGF0aW5nID0gdHJ1ZTtcbiAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAvLyBzeW5jIHRoZSBjdXJyZW50IHZlcnNpb24gdG8gbGV0IGZ1dHVyZSBpbnZhbGlkYXRpb25zIGNhdXNlIGEgcmVmcmVzaCBjeWNsZVxuICAgICAgdGVtcGxhdGVbQ1VSUkVOVF9WRVJTSU9OXSA9IHRlbXBsYXRlW05FWFRfVkVSU0lPTl07XG4gICAgICB0ZW1wbGF0ZS5fdmFsaWRhdGluZyA9IGZhbHNlO1xuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQHJldHVybiB7Ym9vbGVhbn1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVsZW1lbnRzQXJlSW52YWxpZCgpIHtcbiAgZm9yIChsZXQgZWxlbWVudE5hbWUgaW4gdGVtcGxhdGVNYXApIHtcbiAgICBsZXQgdGVtcGxhdGUgPSB0ZW1wbGF0ZU1hcFtlbGVtZW50TmFtZV07XG4gICAgaWYgKCF0ZW1wbGF0ZUlzVmFsaWQodGVtcGxhdGUpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuLyoqIEB0eXBlIHtQcm9taXNlPHZvaWQ+fSAqL1xubGV0IHJlYWR5UHJvbWlzZSA9IG51bGw7XG5cbi8qKiBAdHlwZSB7P2Z1bmN0aW9uKD9mdW5jdGlvbigpKX0gKi9cbmxldCB3aGVuUmVhZHkgPSB3aW5kb3dbJ0hUTUxJbXBvcnRzJ10gJiYgd2luZG93WydIVE1MSW1wb3J0cyddWyd3aGVuUmVhZHknXSB8fCBudWxsO1xuXG4vKiogQHR5cGUge2Z1bmN0aW9uKCl9ICovXG5sZXQgcmVzb2x2ZUZuO1xuXG4vKipcbiAqIEBwYXJhbSB7P2Z1bmN0aW9uKCl9IGNhbGxiYWNrXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGRvY3VtZW50V2FpdChjYWxsYmFjaykge1xuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdoZW5SZWFkeSkge1xuICAgICAgd2hlblJlYWR5KGNhbGxiYWNrKVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoIXJlYWR5UHJvbWlzZSkge1xuICAgICAgICByZWFkeVByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge3Jlc29sdmVGbiA9IHJlc29sdmV9KTtcbiAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICByZXNvbHZlRm4oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdyZWFkeXN0YXRlY2hhbmdlJywgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdjb21wbGV0ZScpIHtcbiAgICAgICAgICAgICAgcmVzb2x2ZUZuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJlYWR5UHJvbWlzZS50aGVuKGZ1bmN0aW9uKCl7IGNhbGxiYWNrICYmIGNhbGxiYWNrKCk7IH0pO1xuICAgIH1cbiAgfSk7XG59XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5pbXBvcnQgZG9jdW1lbnRXYWl0IGZyb20gJy4vZG9jdW1lbnQtd2FpdC5qcyc7XG5cbi8qKlxuICogQHR5cGVkZWYge0hUTUxTdHlsZUVsZW1lbnQgfCB7Z2V0U3R5bGU6IGZ1bmN0aW9uKCk6SFRNTFN0eWxlRWxlbWVudH19XG4gKi9cbmV4cG9ydCBsZXQgQ3VzdG9tU3R5bGVQcm92aWRlcjtcblxuY29uc3QgU0VFTl9NQVJLRVIgPSAnX19zZWVuQnlTaGFkeUNTUyc7XG5jb25zdCBDQUNIRURfU1RZTEUgPSAnX19zaGFkeUNTU0NhY2hlZFN0eWxlJztcblxuLyoqIEB0eXBlIHs/ZnVuY3Rpb24oIUhUTUxTdHlsZUVsZW1lbnQpfSAqL1xubGV0IHRyYW5zZm9ybUZuID0gbnVsbDtcblxuLyoqIEB0eXBlIHs/ZnVuY3Rpb24oKX0gKi9cbmxldCB2YWxpZGF0ZUZuID0gbnVsbDtcblxuLyoqXG5UaGlzIGludGVyZmFjZSBpcyBwcm92aWRlZCB0byBhZGQgZG9jdW1lbnQtbGV2ZWwgPHN0eWxlPiBlbGVtZW50cyB0byBTaGFkeUNTUyBmb3IgcHJvY2Vzc2luZy5cblRoZXNlIHN0eWxlcyBtdXN0IGJlIHByb2Nlc3NlZCBieSBTaGFkeUNTUyB0byBzaW11bGF0ZSBTaGFkb3dSb290IHVwcGVyLWJvdW5kIGVuY2Fwc3VsYXRpb24gZnJvbSBvdXRzaWRlIHN0eWxlc1xuSW4gYWRkaXRpb24sIHRoZXNlIHN0eWxlcyBtYXkgYWxzbyBuZWVkIHRvIGJlIHByb2Nlc3NlZCBmb3IgQGFwcGx5IHJ1bGVzIGFuZCBDU1MgQ3VzdG9tIFByb3BlcnRpZXNcblxuVG8gYWRkIGRvY3VtZW50LWxldmVsIHN0eWxlcyB0byBTaGFkeUNTUywgb25lIGNhbiBjYWxsIGBTaGFkeUNTUy5hZGREb2N1bWVudFN0eWxlKHN0eWxlRWxlbWVudClgIG9yIGBTaGFkeUNTUy5hZGREb2N1bWVudFN0eWxlKHtnZXRTdHlsZTogKCkgPT4gc3R5bGVFbGVtZW50fSlgXG5cbkluIGFkZGl0aW9uLCBpZiB0aGUgcHJvY2VzcyB1c2VkIHRvIGRpc2NvdmVyIGRvY3VtZW50LWxldmVsIHN0eWxlcyBjYW4gYmUgc3luY2hyb25vdXNseSBmbHVzaGVkLCBvbmUgc2hvdWxkIHNldCBgU2hhZHlDU1MuZG9jdW1lbnRTdHlsZUZsdXNoYC5cblRoaXMgZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgd2hlbiBjYWxjdWxhdGluZyBzdHlsZXMuXG5cbkFuIGV4YW1wbGUgdXNhZ2Ugb2YgdGhlIGRvY3VtZW50LWxldmVsIHN0eWxpbmcgYXBpIGNhbiBiZSBmb3VuZCBpbiBgZXhhbXBsZXMvZG9jdW1lbnQtc3R5bGUtbGliLmpzYFxuXG5AdW5yZXN0cmljdGVkXG4qL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ3VzdG9tU3R5bGVJbnRlcmZhY2Uge1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvKiogQHR5cGUgeyFBcnJheTwhQ3VzdG9tU3R5bGVQcm92aWRlcj59ICovXG4gICAgdGhpc1snY3VzdG9tU3R5bGVzJ10gPSBbXTtcbiAgICB0aGlzWydlbnF1ZXVlZCddID0gZmFsc2U7XG4gICAgLy8gTk9URShkZnJlZWRtKTogdXNlIHF1b3RlcyBoZXJlIHRvIHByZXZlbnQgY2xvc3VyZSBpbmxpbmluZyB0byBgZnVuY3Rpb24oKXt9YDtcbiAgICBkb2N1bWVudFdhaXQoKCkgPT4ge1xuICAgICAgaWYgKHdpbmRvd1snU2hhZHlDU1MnXVsnZmx1c2hDdXN0b21TdHlsZXMnXSkge1xuICAgICAgICB3aW5kb3dbJ1NoYWR5Q1NTJ11bJ2ZsdXNoQ3VzdG9tU3R5bGVzJ10oKTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG4gIC8qKlxuICAgKiBRdWV1ZSBhIHZhbGlkYXRpb24gZm9yIG5ldyBjdXN0b20gc3R5bGVzIHRvIGJhdGNoIHN0eWxlIHJlY2FsY3VsYXRpb25zXG4gICAqL1xuICBlbnF1ZXVlRG9jdW1lbnRWYWxpZGF0aW9uKCkge1xuICAgIGlmICh0aGlzWydlbnF1ZXVlZCddIHx8ICF2YWxpZGF0ZUZuKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXNbJ2VucXVldWVkJ10gPSB0cnVlO1xuICAgIGRvY3VtZW50V2FpdCh2YWxpZGF0ZUZuKTtcbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHshSFRNTFN0eWxlRWxlbWVudH0gc3R5bGVcbiAgICovXG4gIGFkZEN1c3RvbVN0eWxlKHN0eWxlKSB7XG4gICAgaWYgKCFzdHlsZVtTRUVOX01BUktFUl0pIHtcbiAgICAgIHN0eWxlW1NFRU5fTUFSS0VSXSA9IHRydWU7XG4gICAgICB0aGlzWydjdXN0b21TdHlsZXMnXS5wdXNoKHN0eWxlKTtcbiAgICAgIHRoaXMuZW5xdWV1ZURvY3VtZW50VmFsaWRhdGlvbigpO1xuICAgIH1cbiAgfVxuICAvKipcbiAgICogQHBhcmFtIHshQ3VzdG9tU3R5bGVQcm92aWRlcn0gY3VzdG9tU3R5bGVcbiAgICogQHJldHVybiB7SFRNTFN0eWxlRWxlbWVudH1cbiAgICovXG4gIGdldFN0eWxlRm9yQ3VzdG9tU3R5bGUoY3VzdG9tU3R5bGUpIHtcbiAgICBpZiAoY3VzdG9tU3R5bGVbQ0FDSEVEX1NUWUxFXSkge1xuICAgICAgcmV0dXJuIGN1c3RvbVN0eWxlW0NBQ0hFRF9TVFlMRV07XG4gICAgfVxuICAgIGxldCBzdHlsZTtcbiAgICBpZiAoY3VzdG9tU3R5bGVbJ2dldFN0eWxlJ10pIHtcbiAgICAgIHN0eWxlID0gY3VzdG9tU3R5bGVbJ2dldFN0eWxlJ10oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUgPSBjdXN0b21TdHlsZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0eWxlO1xuICB9XG4gIC8qKlxuICAgKiBAcmV0dXJuIHshQXJyYXk8IUN1c3RvbVN0eWxlUHJvdmlkZXI+fVxuICAgKi9cbiAgcHJvY2Vzc1N0eWxlcygpIHtcbiAgICBjb25zdCBjcyA9IHRoaXNbJ2N1c3RvbVN0eWxlcyddO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGN1c3RvbVN0eWxlID0gY3NbaV07XG4gICAgICBpZiAoY3VzdG9tU3R5bGVbQ0FDSEVEX1NUWUxFXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHN0eWxlID0gdGhpcy5nZXRTdHlsZUZvckN1c3RvbVN0eWxlKGN1c3RvbVN0eWxlKTtcbiAgICAgIGlmIChzdHlsZSkge1xuICAgICAgICAvLyBIVE1MSW1wb3J0cyBwb2x5ZmlsbCBtYXkgaGF2ZSBjbG9uZWQgdGhlIHN0eWxlIGludG8gdGhlIG1haW4gZG9jdW1lbnQsXG4gICAgICAgIC8vIHdoaWNoIGlzIHJlZmVyZW5jZWQgd2l0aCBfX2FwcGxpZWRFbGVtZW50LlxuICAgICAgICBjb25zdCBzdHlsZVRvVHJhbnNmb3JtID0gLyoqIEB0eXBlIHshSFRNTFN0eWxlRWxlbWVudH0gKi8oc3R5bGVbJ19fYXBwbGllZEVsZW1lbnQnXSB8fCBzdHlsZSk7XG4gICAgICAgIGlmICh0cmFuc2Zvcm1Gbikge1xuICAgICAgICAgIHRyYW5zZm9ybUZuKHN0eWxlVG9UcmFuc2Zvcm0pO1xuICAgICAgICB9XG4gICAgICAgIGN1c3RvbVN0eWxlW0NBQ0hFRF9TVFlMRV0gPSBzdHlsZVRvVHJhbnNmb3JtO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY3M7XG4gIH1cbn1cblxuLyogZXNsaW50LWRpc2FibGUgbm8tc2VsZi1hc3NpZ24gKi9cbkN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZVsnYWRkQ3VzdG9tU3R5bGUnXSA9IEN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZS5hZGRDdXN0b21TdHlsZTtcbkN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZVsnZ2V0U3R5bGVGb3JDdXN0b21TdHlsZSddID0gQ3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvdG90eXBlLmdldFN0eWxlRm9yQ3VzdG9tU3R5bGU7XG5DdXN0b21TdHlsZUludGVyZmFjZS5wcm90b3R5cGVbJ3Byb2Nlc3NTdHlsZXMnXSA9IEN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb3RvdHlwZS5wcm9jZXNzU3R5bGVzO1xuLyogZXNsaW50LWVuYWJsZSBuby1zZWxmLWFzc2lnbiAqL1xuXG5PYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21TdHlsZUludGVyZmFjZS5wcm90b3R5cGUsIHtcbiAgJ3RyYW5zZm9ybUNhbGxiYWNrJzoge1xuICAgIC8qKiBAcmV0dXJuIHs/ZnVuY3Rpb24oIUhUTUxTdHlsZUVsZW1lbnQpfSAqL1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB0cmFuc2Zvcm1GbjtcbiAgICB9LFxuICAgIC8qKiBAcGFyYW0gez9mdW5jdGlvbighSFRNTFN0eWxlRWxlbWVudCl9IGZuICovXG4gICAgc2V0KGZuKSB7XG4gICAgICB0cmFuc2Zvcm1GbiA9IGZuO1xuICAgIH1cbiAgfSxcbiAgJ3ZhbGlkYXRlQ2FsbGJhY2snOiB7XG4gICAgLyoqIEByZXR1cm4gez9mdW5jdGlvbigpfSAqL1xuICAgIGdldCgpIHtcbiAgICAgIHJldHVybiB2YWxpZGF0ZUZuO1xuICAgIH0sXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHs/ZnVuY3Rpb24oKX0gZm5cbiAgICAgKiBAdGhpcyB7Q3VzdG9tU3R5bGVJbnRlcmZhY2V9XG4gICAgICovXG4gICAgc2V0KGZuKSB7XG4gICAgICBsZXQgbmVlZHNFbnF1ZXVlID0gZmFsc2U7XG4gICAgICBpZiAoIXZhbGlkYXRlRm4pIHtcbiAgICAgICAgbmVlZHNFbnF1ZXVlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHZhbGlkYXRlRm4gPSBmbjtcbiAgICAgIGlmIChuZWVkc0VucXVldWUpIHtcbiAgICAgICAgdGhpcy5lbnF1ZXVlRG9jdW1lbnRWYWxpZGF0aW9uKCk7XG4gICAgICB9XG4gICAgfSxcbiAgfVxufSlcblxuLyoqIEB0eXBlZGVmIHt7XG4gKiBjdXN0b21TdHlsZXM6ICFBcnJheTwhQ3VzdG9tU3R5bGVQcm92aWRlcj4sXG4gKiBhZGRDdXN0b21TdHlsZTogZnVuY3Rpb24oIUN1c3RvbVN0eWxlUHJvdmlkZXIpLFxuICogZ2V0U3R5bGVGb3JDdXN0b21TdHlsZTogZnVuY3Rpb24oIUN1c3RvbVN0eWxlUHJvdmlkZXIpOiBIVE1MU3R5bGVFbGVtZW50LFxuICogZmluZFN0eWxlczogZnVuY3Rpb24oKSxcbiAqIHRyYW5zZm9ybUNhbGxiYWNrOiA/ZnVuY3Rpb24oIUhUTUxTdHlsZUVsZW1lbnQpLFxuICogdmFsaWRhdGVDYWxsYmFjazogP2Z1bmN0aW9uKClcbiAqIH19XG4gKi9cbmV4cG9ydCBjb25zdCBDdXN0b21TdHlsZUludGVyZmFjZUludGVyZmFjZSA9IHt9O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEFwcGx5U2hpbSBmcm9tICcuLi9zcmMvYXBwbHktc2hpbS5qcyc7XG5pbXBvcnQgdGVtcGxhdGVNYXAgZnJvbSAnLi4vc3JjL3RlbXBsYXRlLW1hcC5qcyc7XG5pbXBvcnQge2dldElzRXh0ZW5kcywgdG9Dc3NUZXh0LCBlbGVtZW50SGFzQnVpbHRDc3N9IGZyb20gJy4uL3NyYy9zdHlsZS11dGlsLmpzJztcbmltcG9ydCAqIGFzIEFwcGx5U2hpbVV0aWxzIGZyb20gJy4uL3NyYy9hcHBseS1zaGltLXV0aWxzLmpzJztcbmltcG9ydCB7Z2V0Q29tcHV0ZWRTdHlsZVZhbHVlLCB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzfSBmcm9tICcuLi9zcmMvY29tbW9uLXV0aWxzLmpzJztcbmltcG9ydCB7Q3VzdG9tU3R5bGVJbnRlcmZhY2VJbnRlcmZhY2V9IGZyb20gJy4uL3NyYy9jdXN0b20tc3R5bGUtaW50ZXJmYWNlLmpzJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuaW1wb3J0IHtuYXRpdmVDc3NWYXJpYWJsZXMsIG5hdGl2ZVNoYWRvdywgY3NzQnVpbGQsIGRpc2FibGVSdW50aW1lfSBmcm9tICcuLi9zcmMvc3R5bGUtc2V0dGluZ3MuanMnO1xuXG4vKiogQGNvbnN0IHtBcHBseVNoaW19ICovXG5jb25zdCBhcHBseVNoaW0gPSBuZXcgQXBwbHlTaGltKCk7XG5cbmNsYXNzIEFwcGx5U2hpbUludGVyZmFjZSB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIC8qKiBAdHlwZSB7P0N1c3RvbVN0eWxlSW50ZXJmYWNlSW50ZXJmYWNlfSAqL1xuICAgIHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2UgPSBudWxsO1xuICAgIGFwcGx5U2hpbVsnaW52YWxpZENhbGxiYWNrJ10gPSBBcHBseVNoaW1VdGlscy5pbnZhbGlkYXRlO1xuICB9XG4gIGVuc3VyZSgpIHtcbiAgICBpZiAodGhpcy5jdXN0b21TdHlsZUludGVyZmFjZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAod2luZG93LlNoYWR5Q1NTLkN1c3RvbVN0eWxlSW50ZXJmYWNlKSB7XG4gICAgICB0aGlzLmN1c3RvbVN0eWxlSW50ZXJmYWNlID1cbiAgICAgICAgICAvKiogQHR5cGUgeyFDdXN0b21TdHlsZUludGVyZmFjZUludGVyZmFjZX0gKi8gKFxuICAgICAgICAgICAgICB3aW5kb3cuU2hhZHlDU1MuQ3VzdG9tU3R5bGVJbnRlcmZhY2UpO1xuICAgICAgdGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsndHJhbnNmb3JtQ2FsbGJhY2snXSA9IChzdHlsZSkgPT4ge1xuICAgICAgICBhcHBseVNoaW0udHJhbnNmb3JtQ3VzdG9tU3R5bGUoc3R5bGUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ3ZhbGlkYXRlQ2FsbGJhY2snXSA9ICgpID0+IHtcbiAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcbiAgICAgICAgICBpZiAodGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsnZW5xdWV1ZWQnXSkge1xuICAgICAgICAgICAgdGhpcy5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICAgKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAgICovXG4gIHByZXBhcmVUZW1wbGF0ZSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIGlmIChlbGVtZW50SGFzQnVpbHRDc3ModGVtcGxhdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRlbXBsYXRlTWFwW2VsZW1lbnROYW1lXSA9IHRlbXBsYXRlO1xuICAgIGxldCBhc3QgPSBhcHBseVNoaW0udHJhbnNmb3JtVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lKTtcbiAgICAvLyBzYXZlIG9yaWdpbmFsIHN0eWxlIGFzdCB0byB1c2UgZm9yIHJldmFsaWRhdGluZyBpbnN0YW5jZXNcbiAgICB0ZW1wbGF0ZVsnX3N0eWxlQXN0J10gPSBhc3Q7XG4gIH1cbiAgZmx1c2hDdXN0b21TdHlsZXMoKSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICBpZiAoIXRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2UpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgbGV0IHN0eWxlcyA9IHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ3Byb2Nlc3NTdHlsZXMnXSgpO1xuICAgIGlmICghdGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsnZW5xdWV1ZWQnXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGxldCBjcyA9IHN0eWxlc1tpXTtcbiAgICAgIGxldCBzdHlsZSA9IHRoaXMuY3VzdG9tU3R5bGVJbnRlcmZhY2VbJ2dldFN0eWxlRm9yQ3VzdG9tU3R5bGUnXShjcyk7XG4gICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgYXBwbHlTaGltLnRyYW5zZm9ybUN1c3RvbVN0eWxlKHN0eWxlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5jdXN0b21TdHlsZUludGVyZmFjZVsnZW5xdWV1ZWQnXSA9IGZhbHNlO1xuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICAgKi9cbiAgc3R5bGVTdWJ0cmVlKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgICB0aGlzLmVuc3VyZSgpO1xuICAgIGlmIChwcm9wZXJ0aWVzKSB7XG4gICAgICB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzKGVsZW1lbnQsIHByb3BlcnRpZXMpO1xuICAgIH1cbiAgICBpZiAoZWxlbWVudC5zaGFkb3dSb290KSB7XG4gICAgICB0aGlzLnN0eWxlRWxlbWVudChlbGVtZW50KTtcbiAgICAgIGxldCBzaGFkb3dDaGlsZHJlbiA9XG4gICAgICAgICAgLyoqIEB0eXBlIHshUGFyZW50Tm9kZX0gKi8gKGVsZW1lbnQuc2hhZG93Um9vdCkuY2hpbGRyZW4gfHxcbiAgICAgICAgICBlbGVtZW50LnNoYWRvd1Jvb3QuY2hpbGROb2RlcztcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hhZG93Q2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5zdHlsZVN1YnRyZWUoLyoqIEB0eXBlIHtIVE1MRWxlbWVudH0gKi8oc2hhZG93Q2hpbGRyZW5baV0pKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgbGV0IGNoaWxkcmVuID0gZWxlbWVudC5jaGlsZHJlbiB8fCBlbGVtZW50LmNoaWxkTm9kZXM7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoaWxkcmVuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHRoaXMuc3R5bGVTdWJ0cmVlKC8qKiBAdHlwZSB7SFRNTEVsZW1lbnR9ICovKGNoaWxkcmVuW2ldKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gICAqL1xuICBzdHlsZUVsZW1lbnQoZWxlbWVudCkge1xuICAgIHRoaXMuZW5zdXJlKCk7XG4gICAgbGV0IHtpc30gPSBnZXRJc0V4dGVuZHMoZWxlbWVudCk7XG4gICAgbGV0IHRlbXBsYXRlID0gdGVtcGxhdGVNYXBbaXNdO1xuICAgIGlmICh0ZW1wbGF0ZSAmJiBlbGVtZW50SGFzQnVpbHRDc3ModGVtcGxhdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0ZW1wbGF0ZSAmJiAhQXBwbHlTaGltVXRpbHMudGVtcGxhdGVJc1ZhbGlkKHRlbXBsYXRlKSkge1xuICAgICAgLy8gb25seSByZXZhbGlkYXRlIHRlbXBsYXRlIG9uY2VcbiAgICAgIGlmICghQXBwbHlTaGltVXRpbHMudGVtcGxhdGVJc1ZhbGlkYXRpbmcodGVtcGxhdGUpKSB7XG4gICAgICAgIHRoaXMucHJlcGFyZVRlbXBsYXRlKHRlbXBsYXRlLCBpcyk7XG4gICAgICAgIEFwcGx5U2hpbVV0aWxzLnN0YXJ0VmFsaWRhdGluZ1RlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgIH1cbiAgICAgIC8vIHVwZGF0ZSB0aGlzIGVsZW1lbnQgaW5zdGFuY2VcbiAgICAgIGxldCByb290ID0gZWxlbWVudC5zaGFkb3dSb290O1xuICAgICAgaWYgKHJvb3QpIHtcbiAgICAgICAgbGV0IHN0eWxlID0gLyoqIEB0eXBlIHtIVE1MU3R5bGVFbGVtZW50fSAqLyhyb290LnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlJykpO1xuICAgICAgICBpZiAoc3R5bGUpIHtcbiAgICAgICAgICAvLyByZXVzZSB0aGUgdGVtcGxhdGUncyBzdHlsZSBhc3QsIGl0IGhhcyBhbGwgdGhlIG9yaWdpbmFsIGNzcyB0ZXh0XG4gICAgICAgICAgc3R5bGVbJ19fY3NzUnVsZXMnXSA9IHRlbXBsYXRlWydfc3R5bGVBc3QnXTtcbiAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHRvQ3NzVGV4dCh0ZW1wbGF0ZVsnX3N0eWxlQXN0J10pXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0PX0gcHJvcGVydGllc1xuICAgKi9cbiAgc3R5bGVEb2N1bWVudChwcm9wZXJ0aWVzKSB7XG4gICAgdGhpcy5lbnN1cmUoKTtcbiAgICB0aGlzLnN0eWxlU3VidHJlZShkb2N1bWVudC5ib2R5LCBwcm9wZXJ0aWVzKTtcbiAgfVxufVxuXG5pZiAoIXdpbmRvdy5TaGFkeUNTUyB8fCAhd2luZG93LlNoYWR5Q1NTLlNjb3BpbmdTaGltKSB7XG4gIGNvbnN0IGFwcGx5U2hpbUludGVyZmFjZSA9IG5ldyBBcHBseVNoaW1JbnRlcmZhY2UoKTtcbiAgbGV0IEN1c3RvbVN0eWxlSW50ZXJmYWNlID0gd2luZG93LlNoYWR5Q1NTICYmIHdpbmRvdy5TaGFkeUNTUy5DdXN0b21TdHlsZUludGVyZmFjZTtcblxuICAvKiogQHN1cHByZXNzIHtkdXBsaWNhdGV9ICovXG4gIHdpbmRvdy5TaGFkeUNTUyA9IHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlbGVtZW50TmFtZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nPX0gZWxlbWVudEV4dGVuZHNcbiAgICAgKi9cbiAgICBwcmVwYXJlVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lLCBlbGVtZW50RXh0ZW5kcykgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG4gICAgICBhcHBseVNoaW1JbnRlcmZhY2UuZmx1c2hDdXN0b21TdHlsZXMoKTtcbiAgICAgIGFwcGx5U2hpbUludGVyZmFjZS5wcmVwYXJlVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGVsZW1lbnRFeHRlbmRzXG4gICAgICovXG4gICAgcHJlcGFyZVRlbXBsYXRlU3R5bGVzKHRlbXBsYXRlLCBlbGVtZW50TmFtZSwgZWxlbWVudEV4dGVuZHMpIHtcbiAgICAgIHdpbmRvdy5TaGFkeUNTUy5wcmVwYXJlVGVtcGxhdGUodGVtcGxhdGUsIGVsZW1lbnROYW1lLCBlbGVtZW50RXh0ZW5kcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lXG4gICAgICovXG4gICAgcHJlcGFyZVRlbXBsYXRlRG9tKHRlbXBsYXRlLCBlbGVtZW50TmFtZSkge30sIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbGVtZW50XG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBwcm9wZXJ0aWVzXG4gICAgICovXG4gICAgc3R5bGVTdWJ0cmVlKGVsZW1lbnQsIHByb3BlcnRpZXMpIHtcbiAgICAgIGFwcGx5U2hpbUludGVyZmFjZS5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgYXBwbHlTaGltSW50ZXJmYWNlLnN0eWxlU3VidHJlZShlbGVtZW50LCBwcm9wZXJ0aWVzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAgICAgKi9cbiAgICBzdHlsZUVsZW1lbnQoZWxlbWVudCkge1xuICAgICAgYXBwbHlTaGltSW50ZXJmYWNlLmZsdXNoQ3VzdG9tU3R5bGVzKCk7XG4gICAgICBhcHBseVNoaW1JbnRlcmZhY2Uuc3R5bGVFbGVtZW50KGVsZW1lbnQpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBzdHlsZURvY3VtZW50KHByb3BlcnRpZXMpIHtcbiAgICAgIGFwcGx5U2hpbUludGVyZmFjZS5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgICAgYXBwbHlTaGltSW50ZXJmYWNlLnN0eWxlRG9jdW1lbnQocHJvcGVydGllcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpO1xuICAgIH0sXG5cbiAgICBmbHVzaEN1c3RvbVN0eWxlcygpIHtcbiAgICAgIGFwcGx5U2hpbUludGVyZmFjZS5mbHVzaEN1c3RvbVN0eWxlcygpO1xuICAgIH0sXG5cbiAgICBuYXRpdmVDc3M6IG5hdGl2ZUNzc1ZhcmlhYmxlcyxcbiAgICBuYXRpdmVTaGFkb3c6IG5hdGl2ZVNoYWRvdyxcbiAgICBjc3NCdWlsZDogY3NzQnVpbGQsXG4gICAgZGlzYWJsZVJ1bnRpbWU6IGRpc2FibGVSdW50aW1lLFxuICB9O1xuXG4gIGlmIChDdXN0b21TdHlsZUludGVyZmFjZSkge1xuICAgIHdpbmRvdy5TaGFkeUNTUy5DdXN0b21TdHlsZUludGVyZmFjZSA9IEN1c3RvbVN0eWxlSW50ZXJmYWNlO1xuICB9XG59XG5cbndpbmRvdy5TaGFkeUNTUy5BcHBseVNoaW0gPSBhcHBseVNoaW07XG4iLCAiLyoqXG4gKiBAZmlsZW92ZXJ2aWV3XG4gKiBAc3VwcHJlc3Mge2NoZWNrUHJvdG90eXBhbFR5cGVzfVxuICogQGxpY2Vuc2UgQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuICogaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmRcbiAqIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXlcbiAqIGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnlcbiAqIEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVBcbiAqIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiAqL1xuaW1wb3J0IHsgUHJvcGVydHlBY2Nlc3NvcnMgfSBmcm9tICcuL3Byb3BlcnR5LWFjY2Vzc29ycy5qcyc7XG5cbmltcG9ydCB7IGRlZHVwaW5nTWl4aW4gfSBmcm9tICcuLi91dGlscy9taXhpbi5qcyc7XG5cbmNvbnN0IEhPU1RfRElSID0gLzpob3N0XFwoOmRpclxcKChsdHJ8cnRsKVxcKVxcKS9nO1xuY29uc3QgSE9TVF9ESVJfUkVQTEFDTUVOVCA9ICc6aG9zdChbZGlyPVwiJDFcIl0pJztcblxuY29uc3QgRUxfRElSID0gLyhbXFxzXFx3LSNcXC5cXFtcXF1cXCpdKik6ZGlyXFwoKGx0cnxydGwpXFwpL2c7XG5jb25zdCBFTF9ESVJfUkVQTEFDTUVOVCA9ICc6aG9zdChbZGlyPVwiJDJcIl0pICQxJztcblxuY29uc3QgRElSX0NIRUNLID0gLzpkaXJcXCgoPzpsdHJ8cnRsKVxcKS87XG5cbmNvbnN0IFNISU1fU0hBRE9XID0gQm9vbGVhbih3aW5kb3dbJ1NoYWR5RE9NJ10gJiYgd2luZG93WydTaGFkeURPTSddWydpblVzZSddKTtcblxuLyoqXG4gKiBAdHlwZSB7IUFycmF5PCFQb2x5bWVyX0Rpck1peGluPn1cbiAqL1xuY29uc3QgRElSX0lOU1RBTkNFUyA9IFtdO1xuXG4vKiogQHR5cGUgez9NdXRhdGlvbk9ic2VydmVyfSAqL1xubGV0IG9ic2VydmVyID0gbnVsbDtcblxubGV0IGRvY3VtZW50RGlyID0gJyc7XG5cbmZ1bmN0aW9uIGdldFJUTCgpIHtcbiAgZG9jdW1lbnREaXIgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkaXInKTtcbn1cblxuLyoqXG4gKiBAcGFyYW0geyFQb2x5bWVyX0Rpck1peGlufSBpbnN0YW5jZSBJbnN0YW5jZSB0byBzZXQgUlRMIHN0YXR1cyBvblxuICovXG5mdW5jdGlvbiBzZXRSVEwoaW5zdGFuY2UpIHtcbiAgaWYgKCFpbnN0YW5jZS5fX2F1dG9EaXJPcHRPdXQpIHtcbiAgICBjb25zdCBlbCA9IC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyhpbnN0YW5jZSk7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdkaXInLCBkb2N1bWVudERpcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdXBkYXRlRGlyZWN0aW9uKCkge1xuICBnZXRSVEwoKTtcbiAgZG9jdW1lbnREaXIgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkaXInKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBESVJfSU5TVEFOQ0VTLmxlbmd0aDsgaSsrKSB7XG4gICAgc2V0UlRMKERJUl9JTlNUQU5DRVNbaV0pO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRha2VSZWNvcmRzKCkge1xuICBpZiAob2JzZXJ2ZXIgJiYgb2JzZXJ2ZXIudGFrZVJlY29yZHMoKS5sZW5ndGgpIHtcbiAgICB1cGRhdGVEaXJlY3Rpb24oKTtcbiAgfVxufVxuXG4vKipcbiAqIEVsZW1lbnQgY2xhc3MgbWl4aW4gdGhhdCBhbGxvd3MgZWxlbWVudHMgdG8gdXNlIHRoZSBgOmRpcmAgQ1NTIFNlbGVjdG9yIHRvXG4gKiBoYXZlIHRleHQgZGlyZWN0aW9uIHNwZWNpZmljIHN0eWxpbmcuXG4gKlxuICogV2l0aCB0aGlzIG1peGluLCBhbnkgc3R5bGVzaGVldCBwcm92aWRlZCBpbiB0aGUgdGVtcGxhdGUgd2lsbCB0cmFuc2Zvcm1cbiAqIGA6ZGlyYCBpbnRvIGA6aG9zdChbZGlyXSlgIGFuZCBzeW5jIGRpcmVjdGlvbiB3aXRoIHRoZSBwYWdlIHZpYSB0aGVcbiAqIGVsZW1lbnQncyBgZGlyYCBhdHRyaWJ1dGUuXG4gKlxuICogRWxlbWVudHMgY2FuIG9wdCBvdXQgb2YgdGhlIGdsb2JhbCBwYWdlIHRleHQgZGlyZWN0aW9uIGJ5IHNldHRpbmcgdGhlIGBkaXJgXG4gKiBhdHRyaWJ1dGUgZGlyZWN0bHkgaW4gYHJlYWR5KClgIG9yIGluIEhUTUwuXG4gKlxuICogQ2F2ZWF0czpcbiAqIC0gQXBwbGljYXRpb25zIG11c3Qgc2V0IGA8aHRtbCBkaXI9XCJsdHJcIj5gIG9yIGA8aHRtbCBkaXI9XCJydGxcIj5gIHRvIHN5bmNcbiAqICAgZGlyZWN0aW9uXG4gKiAtIEF1dG9tYXRpYyBsZWZ0LXRvLXJpZ2h0IG9yIHJpZ2h0LXRvLWxlZnQgc3R5bGluZyBpcyBzeW5jJ2Qgd2l0aCB0aGVcbiAqICAgYDxodG1sPmAgZWxlbWVudCBvbmx5LlxuICogLSBDaGFuZ2luZyBgZGlyYCBhdCBydW50aW1lIGlzIHN1cHBvcnRlZC5cbiAqIC0gT3B0aW5nIG91dCBvZiB0aGUgZ2xvYmFsIGRpcmVjdGlvbiBzdHlsaW5nIGlzIHBlcm1hbmVudFxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQGFwcGxpZXNNaXhpbiBQcm9wZXJ0eUFjY2Vzc29yc1xuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIENsYXNzIHRvIGFwcGx5IG1peGluIHRvLlxuICogQHJldHVybiB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIHdpdGggbWl4aW4gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGNvbnN0IERpck1peGluID0gZGVkdXBpbmdNaXhpbigoYmFzZSkgPT4ge1xuXG4gIGlmICghU0hJTV9TSEFET1cpIHtcbiAgICBpZiAoIW9ic2VydmVyKSB7XG4gICAgICBnZXRSVEwoKTtcbiAgICAgIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIodXBkYXRlRGlyZWN0aW9uKTtcbiAgICAgIG9ic2VydmVyLm9ic2VydmUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCB7YXR0cmlidXRlczogdHJ1ZSwgYXR0cmlidXRlRmlsdGVyOiBbJ2RpciddfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0eUFjY2Vzc29yc31cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0IGVsZW1lbnRCYXNlID0gUHJvcGVydHlBY2Nlc3NvcnMoYmFzZSk7XG5cbiAgLyoqXG4gICAqIEBwb2x5bWVyXG4gICAqIEBtaXhpbkNsYXNzXG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0Rpck1peGlufVxuICAgKi9cbiAgY2xhc3MgRGlyIGV4dGVuZHMgZWxlbWVudEJhc2Uge1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNzc1RleHQgLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBiYXNlVVJJIC5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IC5cbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBJbnRlcmZhY2VzIGluIGNsb3N1cmUgZG8gbm90IGluaGVyaXQgc3RhdGljcywgYnV0IGNsYXNzZXMgZG9cbiAgICAgKiBAbm9jb2xsYXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBfcHJvY2Vzc1N0eWxlVGV4dChjc3NUZXh0LCBiYXNlVVJJKSB7XG4gICAgICAvLyBUT0RPKGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMzI0MCk6XG4gICAgICAvLyAgICAgQ2hhbmdlIGJhY2sgdG8ganVzdCBzdXBlci5tZXRob2RDYWxsKClcbiAgICAgIGNzc1RleHQgPSBlbGVtZW50QmFzZS5fcHJvY2Vzc1N0eWxlVGV4dC5jYWxsKHRoaXMsIGNzc1RleHQsIGJhc2VVUkkpO1xuICAgICAgaWYgKCFTSElNX1NIQURPVyAmJiBESVJfQ0hFQ0sudGVzdChjc3NUZXh0KSkge1xuICAgICAgICBjc3NUZXh0ID0gdGhpcy5fcmVwbGFjZURpckluQ3NzVGV4dChjc3NUZXh0KTtcbiAgICAgICAgdGhpcy5fX2FjdGl2YXRlRGlyID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjc3NUZXh0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJlcGxhY2UgYDpkaXJgIGluIHRoZSBnaXZlbiBDU1MgdGV4dFxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRleHQgQ1NTIHRleHQgdG8gcmVwbGFjZSBESVJcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IE1vZGlmaWVkIENTU1xuICAgICAqIEBub2NvbGxhcHNlXG4gICAgICovXG4gICAgc3RhdGljIF9yZXBsYWNlRGlySW5Dc3NUZXh0KHRleHQpIHtcbiAgICAgIGxldCByZXBsYWNlZFRleHQgPSB0ZXh0O1xuICAgICAgcmVwbGFjZWRUZXh0ID0gcmVwbGFjZWRUZXh0LnJlcGxhY2UoSE9TVF9ESVIsIEhPU1RfRElSX1JFUExBQ01FTlQpO1xuICAgICAgcmVwbGFjZWRUZXh0ID0gcmVwbGFjZWRUZXh0LnJlcGxhY2UoRUxfRElSLCBFTF9ESVJfUkVQTEFDTUVOVCk7XG4gICAgICByZXR1cm4gcmVwbGFjZWRUZXh0O1xuICAgIH1cblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbiAgICAgIHRoaXMuX19hdXRvRGlyT3B0T3V0ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9IENsb3N1cmUgZG9lc24ndCB1bmRlcnN0YW5kIHRoYXQgYHRoaXNgIGlzIGFuXG4gICAgICogICAgIEhUTUxFbGVtZW50XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICByZWFkeSgpIHtcbiAgICAgIHN1cGVyLnJlYWR5KCk7XG4gICAgICB0aGlzLl9fYXV0b0Rpck9wdE91dCA9IC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyh0aGlzKS5oYXNBdHRyaWJ1dGUoJ2RpcicpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IElmIGl0IGV4aXN0cyBvbiBlbGVtZW50QmFzZSwgaXQgY2FuIGJlXG4gICAgICogICBzdXBlcidkXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgIGlmIChlbGVtZW50QmFzZS5wcm90b3R5cGUuY29ubmVjdGVkQ2FsbGJhY2spIHtcbiAgICAgICAgc3VwZXIuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yLl9fYWN0aXZhdGVEaXIpIHtcbiAgICAgICAgdGFrZVJlY29yZHMoKTtcbiAgICAgICAgRElSX0lOU1RBTkNFUy5wdXNoKHRoaXMpO1xuICAgICAgICBzZXRSVEwodGhpcyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHN1cHByZXNzIHttaXNzaW5nUHJvcGVydGllc30gSWYgaXQgZXhpc3RzIG9uIGVsZW1lbnRCYXNlLCBpdCBjYW4gYmVcbiAgICAgKiAgIHN1cGVyJ2RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGRpc2Nvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgaWYgKGVsZW1lbnRCYXNlLnByb3RvdHlwZS5kaXNjb25uZWN0ZWRDYWxsYmFjaykge1xuICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY29uc3RydWN0b3IuX19hY3RpdmF0ZURpcikge1xuICAgICAgICBjb25zdCBpZHggPSBESVJfSU5TVEFOQ0VTLmluZGV4T2YodGhpcyk7XG4gICAgICAgIGlmIChpZHggPiAtMSkge1xuICAgICAgICAgIERJUl9JTlNUQU5DRVMuc3BsaWNlKGlkeCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBEaXIuX19hY3RpdmF0ZURpciA9IGZhbHNlO1xuXG4gIHJldHVybiBEaXI7XG59KTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKipcbiAqIE1vZHVsZSBmb3Igc2NoZWR1bGluZyBmbHVzaGFibGUgcHJlLXJlbmRlciBhbmQgcG9zdC1yZW5kZXIgdGFza3MuXG4gKlxuICogQHN1bW1hcnkgTW9kdWxlIGZvciBzY2hlZHVsaW5nIGZsdXNoYWJsZSBwcmUtcmVuZGVyIGFuZCBwb3N0LXJlbmRlciB0YXNrcy5cbiAqL1xuXG5pbXBvcnQgJy4vYm9vdC5qcyc7XG5cbmxldCBzY2hlZHVsZWQgPSBmYWxzZTtcbmxldCBiZWZvcmVSZW5kZXJRdWV1ZSA9IFtdO1xubGV0IGFmdGVyUmVuZGVyUXVldWUgPSBbXTtcblxuZnVuY3Rpb24gc2NoZWR1bGUoKSB7XG4gIHNjaGVkdWxlZCA9IHRydWU7XG4gIC8vIGJlZm9yZSBuZXh0IHJlbmRlclxuICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24oKSB7XG4gICAgc2NoZWR1bGVkID0gZmFsc2U7XG4gICAgZmx1c2hRdWV1ZShiZWZvcmVSZW5kZXJRdWV1ZSk7XG4gICAgLy8gYWZ0ZXIgdGhlIHJlbmRlclxuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBydW5RdWV1ZShhZnRlclJlbmRlclF1ZXVlKTtcbiAgICB9KTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGZsdXNoUXVldWUocXVldWUpIHtcbiAgd2hpbGUgKHF1ZXVlLmxlbmd0aCkge1xuICAgIGNhbGxNZXRob2QocXVldWUuc2hpZnQoKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gcnVuUXVldWUocXVldWUpIHtcbiAgZm9yIChsZXQgaT0wLCBsPXF1ZXVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGNhbGxNZXRob2QocXVldWUuc2hpZnQoKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gY2FsbE1ldGhvZChpbmZvKSB7XG4gIGNvbnN0IGNvbnRleHQgPSBpbmZvWzBdO1xuICBjb25zdCBjYWxsYmFjayA9IGluZm9bMV07XG4gIGNvbnN0IGFyZ3MgPSBpbmZvWzJdO1xuICB0cnkge1xuICAgIGNhbGxiYWNrLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICB9IGNhdGNoKGUpIHtcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRocm93IGU7XG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGbHVzaGVzIGFsbCBgYmVmb3JlTmV4dFJlbmRlcmAgdGFza3MsIGZvbGxvd2VkIGJ5IGFsbCBgYWZ0ZXJOZXh0UmVuZGVyYFxuICogdGFza3MuXG4gKlxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZsdXNoKCkge1xuICB3aGlsZSAoYmVmb3JlUmVuZGVyUXVldWUubGVuZ3RoIHx8IGFmdGVyUmVuZGVyUXVldWUubGVuZ3RoKSB7XG4gICAgZmx1c2hRdWV1ZShiZWZvcmVSZW5kZXJRdWV1ZSk7XG4gICAgZmx1c2hRdWV1ZShhZnRlclJlbmRlclF1ZXVlKTtcbiAgfVxuICBzY2hlZHVsZWQgPSBmYWxzZTtcbn1cblxuXG4vKipcbiAqIEVucXVldWVzIGEgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSBydW4gYmVmb3JlIHRoZSBuZXh0IHJlbmRlciwgYXRcbiAqIGByZXF1ZXN0QW5pbWF0aW9uRnJhbWVgIHRpbWluZy5cbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VmdWwgZm9yIGVucXVldWluZyB3b3JrIHRoYXQgcmVxdWlyZXMgRE9NIG1lYXN1cmVtZW50LFxuICogc2luY2UgbWVhc3VyZW1lbnQgbWF5IG5vdCBiZSByZWxpYWJsZSBpbiBjdXN0b20gZWxlbWVudCBjYWxsYmFja3MgYmVmb3JlXG4gKiB0aGUgZmlyc3QgcmVuZGVyLCBhcyB3ZWxsIGFzIGZvciBiYXRjaGluZyBtZWFzdXJlbWVudCB0YXNrcyBpbiBnZW5lcmFsLlxuICpcbiAqIFRhc2tzIGluIHRoaXMgcXVldWUgbWF5IGJlIGZsdXNoZWQgYnkgY2FsbGluZyBgZmx1c2goKWAuXG4gKlxuICogQHBhcmFtIHsqfSBjb250ZXh0IENvbnRleHQgb2JqZWN0IHRoZSBjYWxsYmFjayBmdW5jdGlvbiB3aWxsIGJlIGJvdW5kIHRvXG4gKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLiopOnZvaWR9IGNhbGxiYWNrIENhbGxiYWNrIGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFBcnJheT19IGFyZ3MgQW4gYXJyYXkgb2YgYXJndW1lbnRzIHRvIGNhbGwgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpdGhcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBiZWZvcmVOZXh0UmVuZGVyKGNvbnRleHQsIGNhbGxiYWNrLCBhcmdzKSB7XG4gIGlmICghc2NoZWR1bGVkKSB7XG4gICAgc2NoZWR1bGUoKTtcbiAgfVxuICBiZWZvcmVSZW5kZXJRdWV1ZS5wdXNoKFtjb250ZXh0LCBjYWxsYmFjaywgYXJnc10pO1xufVxuXG4vKipcbiAqIEVucXVldWVzIGEgY2FsbGJhY2sgd2hpY2ggd2lsbCBiZSBydW4gYWZ0ZXIgdGhlIG5leHQgcmVuZGVyLCBlcXVpdmFsZW50XG4gKiB0byBvbmUgdGFzayAoYHNldFRpbWVvdXRgKSBhZnRlciB0aGUgbmV4dCBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYC5cbiAqXG4gKiBUaGlzIG1ldGhvZCBpcyB1c2VmdWwgZm9yIHR1bmluZyB0aGUgZmlyc3QtcmVuZGVyIHBlcmZvcm1hbmNlIG9mIGFuXG4gKiBlbGVtZW50IG9yIGFwcGxpY2F0aW9uIGJ5IGRlZmVycmluZyBub24tY3JpdGljYWwgd29yayB1bnRpbCBhZnRlciB0aGVcbiAqIGZpcnN0IHBhaW50LiAgVHlwaWNhbCBub24tcmVuZGVyLWNyaXRpY2FsIHdvcmsgbWF5IGluY2x1ZGUgYWRkaW5nIFVJXG4gKiBldmVudCBsaXN0ZW5lcnMgYW5kIGFyaWEgYXR0cmlidXRlcy5cbiAqXG4gKiBAcGFyYW0geyp9IGNvbnRleHQgQ29udGV4dCBvYmplY3QgdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdpbGwgYmUgYm91bmQgdG9cbiAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uKik6dm9pZH0gY2FsbGJhY2sgQ2FsbGJhY2sgZnVuY3Rpb25cbiAqIEBwYXJhbSB7IUFycmF5PX0gYXJncyBBbiBhcnJheSBvZiBhcmd1bWVudHMgdG8gY2FsbCB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gd2l0aFxuICogQHJldHVybiB7dm9pZH1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFmdGVyTmV4dFJlbmRlcihjb250ZXh0LCBjYWxsYmFjaywgYXJncykge1xuICBpZiAoIXNjaGVkdWxlZCkge1xuICAgIHNjaGVkdWxlKCk7XG4gIH1cbiAgYWZ0ZXJSZW5kZXJRdWV1ZS5wdXNoKFtjb250ZXh0LCBjYWxsYmFjaywgYXJnc10pO1xufVxuXG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cblxuZnVuY3Rpb24gcmVzb2x2ZSgpIHtcbiAgZG9jdW1lbnQuYm9keS5yZW1vdmVBdHRyaWJ1dGUoJ3VucmVzb2x2ZWQnKTtcbn1cblxuaWYgKGRvY3VtZW50LnJlYWR5U3RhdGUgPT09ICdpbnRlcmFjdGl2ZScgfHwgZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xuICByZXNvbHZlKCk7XG59IGVsc2Uge1xuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHJlc29sdmUpO1xufVxuXG5leHBvcnQge307XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi9ib290LmpzJztcblxuZnVuY3Rpb24gbmV3U3BsaWNlKGluZGV4LCByZW1vdmVkLCBhZGRlZENvdW50KSB7XG4gIHJldHVybiB7XG4gICAgaW5kZXg6IGluZGV4LFxuICAgIHJlbW92ZWQ6IHJlbW92ZWQsXG4gICAgYWRkZWRDb3VudDogYWRkZWRDb3VudFxuICB9O1xufVxuXG5jb25zdCBFRElUX0xFQVZFID0gMDtcbmNvbnN0IEVESVRfVVBEQVRFID0gMTtcbmNvbnN0IEVESVRfQUREID0gMjtcbmNvbnN0IEVESVRfREVMRVRFID0gMztcblxuLy8gTm90ZTogVGhpcyBmdW5jdGlvbiBpcyAqYmFzZWQqIG9uIHRoZSBjb21wdXRhdGlvbiBvZiB0aGUgTGV2ZW5zaHRlaW5cbi8vIFwiZWRpdFwiIGRpc3RhbmNlLiBUaGUgb25lIGNoYW5nZSBpcyB0aGF0IFwidXBkYXRlc1wiIGFyZSB0cmVhdGVkIGFzIHR3b1xuLy8gZWRpdHMgLSBub3Qgb25lLiBXaXRoIEFycmF5IHNwbGljZXMsIGFuIHVwZGF0ZSBpcyByZWFsbHkgYSBkZWxldGVcbi8vIGZvbGxvd2VkIGJ5IGFuIGFkZC4gQnkgcmV0YWluaW5nIHRoaXMsIHdlIG9wdGltaXplIGZvciBcImtlZXBpbmdcIiB0aGVcbi8vIG1heGltdW0gYXJyYXkgaXRlbXMgaW4gdGhlIG9yaWdpbmFsIGFycmF5LiBGb3IgZXhhbXBsZTpcbi8vXG4vLyAgICd4eHh4MTIzJyAtPiAnMTIzeXl5eSdcbi8vXG4vLyBXaXRoIDEtZWRpdCB1cGRhdGVzLCB0aGUgc2hvcnRlc3QgcGF0aCB3b3VsZCBiZSBqdXN0IHRvIHVwZGF0ZSBhbGwgc2V2ZW5cbi8vIGNoYXJhY3RlcnMuIFdpdGggMi1lZGl0IHVwZGF0ZXMsIHdlIGRlbGV0ZSA0LCBsZWF2ZSAzLCBhbmQgYWRkIDQuIFRoaXNcbi8vIGxlYXZlcyB0aGUgc3Vic3RyaW5nICcxMjMnIGludGFjdC5cbmZ1bmN0aW9uIGNhbGNFZGl0RGlzdGFuY2VzKGN1cnJlbnQsIGN1cnJlbnRTdGFydCwgY3VycmVudEVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbGQsIG9sZFN0YXJ0LCBvbGRFbmQpIHtcbiAgLy8gXCJEZWxldGlvblwiIGNvbHVtbnNcbiAgbGV0IHJvd0NvdW50ID0gb2xkRW5kIC0gb2xkU3RhcnQgKyAxO1xuICBsZXQgY29sdW1uQ291bnQgPSBjdXJyZW50RW5kIC0gY3VycmVudFN0YXJ0ICsgMTtcbiAgbGV0IGRpc3RhbmNlcyA9IG5ldyBBcnJheShyb3dDb3VudCk7XG5cbiAgLy8gXCJBZGRpdGlvblwiIHJvd3MuIEluaXRpYWxpemUgbnVsbCBjb2x1bW4uXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcm93Q291bnQ7IGkrKykge1xuICAgIGRpc3RhbmNlc1tpXSA9IG5ldyBBcnJheShjb2x1bW5Db3VudCk7XG4gICAgZGlzdGFuY2VzW2ldWzBdID0gaTtcbiAgfVxuXG4gIC8vIEluaXRpYWxpemUgbnVsbCByb3dcbiAgZm9yIChsZXQgaiA9IDA7IGogPCBjb2x1bW5Db3VudDsgaisrKVxuICAgIGRpc3RhbmNlc1swXVtqXSA9IGo7XG5cbiAgZm9yIChsZXQgaSA9IDE7IGkgPCByb3dDb3VudDsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDE7IGogPCBjb2x1bW5Db3VudDsgaisrKSB7XG4gICAgICBpZiAoZXF1YWxzKGN1cnJlbnRbY3VycmVudFN0YXJ0ICsgaiAtIDFdLCBvbGRbb2xkU3RhcnQgKyBpIC0gMV0pKVxuICAgICAgICBkaXN0YW5jZXNbaV1bal0gPSBkaXN0YW5jZXNbaSAtIDFdW2ogLSAxXTtcbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQgbm9ydGggPSBkaXN0YW5jZXNbaSAtIDFdW2pdICsgMTtcbiAgICAgICAgbGV0IHdlc3QgPSBkaXN0YW5jZXNbaV1baiAtIDFdICsgMTtcbiAgICAgICAgZGlzdGFuY2VzW2ldW2pdID0gbm9ydGggPCB3ZXN0ID8gbm9ydGggOiB3ZXN0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBkaXN0YW5jZXM7XG59XG5cbi8vIFRoaXMgc3RhcnRzIGF0IHRoZSBmaW5hbCB3ZWlnaHQsIGFuZCB3YWxrcyBcImJhY2t3YXJkXCIgYnkgZmluZGluZ1xuLy8gdGhlIG1pbmltdW0gcHJldmlvdXMgd2VpZ2h0IHJlY3Vyc2l2ZWx5IHVudGlsIHRoZSBvcmlnaW4gb2YgdGhlIHdlaWdodFxuLy8gbWF0cml4LlxuZnVuY3Rpb24gc3BsaWNlT3BlcmF0aW9uc0Zyb21FZGl0RGlzdGFuY2VzKGRpc3RhbmNlcykge1xuICBsZXQgaSA9IGRpc3RhbmNlcy5sZW5ndGggLSAxO1xuICBsZXQgaiA9IGRpc3RhbmNlc1swXS5sZW5ndGggLSAxO1xuICBsZXQgY3VycmVudCA9IGRpc3RhbmNlc1tpXVtqXTtcbiAgbGV0IGVkaXRzID0gW107XG4gIHdoaWxlIChpID4gMCB8fCBqID4gMCkge1xuICAgIGlmIChpID09IDApIHtcbiAgICAgIGVkaXRzLnB1c2goRURJVF9BREQpO1xuICAgICAgai0tO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGlmIChqID09IDApIHtcbiAgICAgIGVkaXRzLnB1c2goRURJVF9ERUxFVEUpO1xuICAgICAgaS0tO1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGxldCBub3J0aFdlc3QgPSBkaXN0YW5jZXNbaSAtIDFdW2ogLSAxXTtcbiAgICBsZXQgd2VzdCA9IGRpc3RhbmNlc1tpIC0gMV1bal07XG4gICAgbGV0IG5vcnRoID0gZGlzdGFuY2VzW2ldW2ogLSAxXTtcblxuICAgIGxldCBtaW47XG4gICAgaWYgKHdlc3QgPCBub3J0aClcbiAgICAgIG1pbiA9IHdlc3QgPCBub3J0aFdlc3QgPyB3ZXN0IDogbm9ydGhXZXN0O1xuICAgIGVsc2VcbiAgICAgIG1pbiA9IG5vcnRoIDwgbm9ydGhXZXN0ID8gbm9ydGggOiBub3J0aFdlc3Q7XG5cbiAgICBpZiAobWluID09IG5vcnRoV2VzdCkge1xuICAgICAgaWYgKG5vcnRoV2VzdCA9PSBjdXJyZW50KSB7XG4gICAgICAgIGVkaXRzLnB1c2goRURJVF9MRUFWRSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlZGl0cy5wdXNoKEVESVRfVVBEQVRFKTtcbiAgICAgICAgY3VycmVudCA9IG5vcnRoV2VzdDtcbiAgICAgIH1cbiAgICAgIGktLTtcbiAgICAgIGotLTtcbiAgICB9IGVsc2UgaWYgKG1pbiA9PSB3ZXN0KSB7XG4gICAgICBlZGl0cy5wdXNoKEVESVRfREVMRVRFKTtcbiAgICAgIGktLTtcbiAgICAgIGN1cnJlbnQgPSB3ZXN0O1xuICAgIH0gZWxzZSB7XG4gICAgICBlZGl0cy5wdXNoKEVESVRfQUREKTtcbiAgICAgIGotLTtcbiAgICAgIGN1cnJlbnQgPSBub3J0aDtcbiAgICB9XG4gIH1cblxuICBlZGl0cy5yZXZlcnNlKCk7XG4gIHJldHVybiBlZGl0cztcbn1cblxuLyoqXG4gKiBTcGxpY2UgUHJvamVjdGlvbiBmdW5jdGlvbnM6XG4gKlxuICogQSBzcGxpY2UgbWFwIGlzIGEgcmVwcmVzZW50YXRpb24gb2YgaG93IGEgcHJldmlvdXMgYXJyYXkgb2YgaXRlbXNcbiAqIHdhcyB0cmFuc2Zvcm1lZCBpbnRvIGEgbmV3IGFycmF5IG9mIGl0ZW1zLiBDb25jZXB0dWFsbHkgaXQgaXMgYSBsaXN0IG9mXG4gKiB0dXBsZXMgb2ZcbiAqXG4gKiAgIDxpbmRleCwgcmVtb3ZlZCwgYWRkZWRDb3VudD5cbiAqXG4gKiB3aGljaCBhcmUga2VwdCBpbiBhc2NlbmRpbmcgaW5kZXggb3JkZXIgb2YuIFRoZSB0dXBsZSByZXByZXNlbnRzIHRoYXQgYXRcbiAqIHRoZSB8aW5kZXh8LCB8cmVtb3ZlZHwgc2VxdWVuY2Ugb2YgaXRlbXMgd2VyZSByZW1vdmVkLCBhbmQgY291bnRpbmcgZm9yd2FyZFxuICogZnJvbSB8aW5kZXh8LCB8YWRkZWRDb3VudHwgaXRlbXMgd2VyZSBhZGRlZC5cbiAqL1xuXG4vKipcbiAqIExhY2tpbmcgaW5kaXZpZHVhbCBzcGxpY2UgbXV0YXRpb24gaW5mb3JtYXRpb24sIHRoZSBtaW5pbWFsIHNldCBvZlxuICogc3BsaWNlcyBjYW4gYmUgc3ludGhlc2l6ZWQgZ2l2ZW4gdGhlIHByZXZpb3VzIHN0YXRlIGFuZCBmaW5hbCBzdGF0ZSBvZiBhblxuICogYXJyYXkuIFRoZSBiYXNpYyBhcHByb2FjaCBpcyB0byBjYWxjdWxhdGUgdGhlIGVkaXQgZGlzdGFuY2UgbWF0cml4IGFuZFxuICogY2hvb3NlIHRoZSBzaG9ydGVzdCBwYXRoIHRocm91Z2ggaXQuXG4gKlxuICogQ29tcGxleGl0eTogTyhsICogcClcbiAqICAgbDogVGhlIGxlbmd0aCBvZiB0aGUgY3VycmVudCBhcnJheVxuICogICBwOiBUaGUgbGVuZ3RoIG9mIHRoZSBvbGQgYXJyYXlcbiAqXG4gKiBAcGFyYW0geyFBcnJheX0gY3VycmVudCBUaGUgY3VycmVudCBcImNoYW5nZWRcIiBhcnJheSBmb3Igd2hpY2ggdG9cbiAqIGNhbGN1bGF0ZSBzcGxpY2VzLlxuICogQHBhcmFtIHtudW1iZXJ9IGN1cnJlbnRTdGFydCBTdGFydGluZyBpbmRleCBpbiB0aGUgYGN1cnJlbnRgIGFycmF5IGZvclxuICogd2hpY2ggc3BsaWNlcyBhcmUgY2FsY3VsYXRlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBjdXJyZW50RW5kIEVuZGluZyBpbmRleCBpbiB0aGUgYGN1cnJlbnRgIGFycmF5IGZvclxuICogd2hpY2ggc3BsaWNlcyBhcmUgY2FsY3VsYXRlZC5cbiAqIEBwYXJhbSB7IUFycmF5fSBvbGQgVGhlIG9yaWdpbmFsIFwidW5jaGFuZ2VkXCIgYXJyYXkgdG8gY29tcGFyZSBgY3VycmVudGBcbiAqIGFnYWluc3QgdG8gZGV0ZXJtaW5lIHNwbGljZXMuXG4gKiBAcGFyYW0ge251bWJlcn0gb2xkU3RhcnQgU3RhcnRpbmcgaW5kZXggaW4gdGhlIGBvbGRgIGFycmF5IGZvclxuICogd2hpY2ggc3BsaWNlcyBhcmUgY2FsY3VsYXRlZC5cbiAqIEBwYXJhbSB7bnVtYmVyfSBvbGRFbmQgRW5kaW5nIGluZGV4IGluIHRoZSBgb2xkYCBhcnJheSBmb3JcbiAqIHdoaWNoIHNwbGljZXMgYXJlIGNhbGN1bGF0ZWQuXG4gKiBAcmV0dXJuIHshQXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2Ygc3BsaWNlIHJlY29yZCBvYmplY3RzLiBFYWNoIG9mIHRoZXNlXG4gKiBjb250YWluczogYGluZGV4YCB0aGUgbG9jYXRpb24gd2hlcmUgdGhlIHNwbGljZSBvY2N1cnJlZDsgYHJlbW92ZWRgXG4gKiB0aGUgYXJyYXkgb2YgcmVtb3ZlZCBpdGVtcyBmcm9tIHRoaXMgbG9jYXRpb247IGBhZGRlZENvdW50YCB0aGUgbnVtYmVyXG4gKiBvZiBpdGVtcyBhZGRlZCBhdCB0aGlzIGxvY2F0aW9uLlxuICovXG5mdW5jdGlvbiBjYWxjU3BsaWNlcyhjdXJyZW50LCBjdXJyZW50U3RhcnQsIGN1cnJlbnRFbmQsXG4gICAgICAgICAgICAgICAgICAgICAgb2xkLCBvbGRTdGFydCwgb2xkRW5kKSB7XG4gIGxldCBwcmVmaXhDb3VudCA9IDA7XG4gIGxldCBzdWZmaXhDb3VudCA9IDA7XG4gIGxldCBzcGxpY2U7XG5cbiAgbGV0IG1pbkxlbmd0aCA9IE1hdGgubWluKGN1cnJlbnRFbmQgLSBjdXJyZW50U3RhcnQsIG9sZEVuZCAtIG9sZFN0YXJ0KTtcbiAgaWYgKGN1cnJlbnRTdGFydCA9PSAwICYmIG9sZFN0YXJ0ID09IDApXG4gICAgcHJlZml4Q291bnQgPSBzaGFyZWRQcmVmaXgoY3VycmVudCwgb2xkLCBtaW5MZW5ndGgpO1xuXG4gIGlmIChjdXJyZW50RW5kID09IGN1cnJlbnQubGVuZ3RoICYmIG9sZEVuZCA9PSBvbGQubGVuZ3RoKVxuICAgIHN1ZmZpeENvdW50ID0gc2hhcmVkU3VmZml4KGN1cnJlbnQsIG9sZCwgbWluTGVuZ3RoIC0gcHJlZml4Q291bnQpO1xuXG4gIGN1cnJlbnRTdGFydCArPSBwcmVmaXhDb3VudDtcbiAgb2xkU3RhcnQgKz0gcHJlZml4Q291bnQ7XG4gIGN1cnJlbnRFbmQgLT0gc3VmZml4Q291bnQ7XG4gIG9sZEVuZCAtPSBzdWZmaXhDb3VudDtcblxuICBpZiAoY3VycmVudEVuZCAtIGN1cnJlbnRTdGFydCA9PSAwICYmIG9sZEVuZCAtIG9sZFN0YXJ0ID09IDApXG4gICAgcmV0dXJuIFtdO1xuXG4gIGlmIChjdXJyZW50U3RhcnQgPT0gY3VycmVudEVuZCkge1xuICAgIHNwbGljZSA9IG5ld1NwbGljZShjdXJyZW50U3RhcnQsIFtdLCAwKTtcbiAgICB3aGlsZSAob2xkU3RhcnQgPCBvbGRFbmQpXG4gICAgICBzcGxpY2UucmVtb3ZlZC5wdXNoKG9sZFtvbGRTdGFydCsrXSk7XG5cbiAgICByZXR1cm4gWyBzcGxpY2UgXTtcbiAgfSBlbHNlIGlmIChvbGRTdGFydCA9PSBvbGRFbmQpXG4gICAgcmV0dXJuIFsgbmV3U3BsaWNlKGN1cnJlbnRTdGFydCwgW10sIGN1cnJlbnRFbmQgLSBjdXJyZW50U3RhcnQpIF07XG5cbiAgbGV0IG9wcyA9IHNwbGljZU9wZXJhdGlvbnNGcm9tRWRpdERpc3RhbmNlcyhcbiAgICAgIGNhbGNFZGl0RGlzdGFuY2VzKGN1cnJlbnQsIGN1cnJlbnRTdGFydCwgY3VycmVudEVuZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2xkLCBvbGRTdGFydCwgb2xkRW5kKSk7XG5cbiAgc3BsaWNlID0gdW5kZWZpbmVkO1xuICBsZXQgc3BsaWNlcyA9IFtdO1xuICBsZXQgaW5kZXggPSBjdXJyZW50U3RhcnQ7XG4gIGxldCBvbGRJbmRleCA9IG9sZFN0YXJ0O1xuICBmb3IgKGxldCBpID0gMDsgaSA8IG9wcy5sZW5ndGg7IGkrKykge1xuICAgIHN3aXRjaChvcHNbaV0pIHtcbiAgICAgIGNhc2UgRURJVF9MRUFWRTpcbiAgICAgICAgaWYgKHNwbGljZSkge1xuICAgICAgICAgIHNwbGljZXMucHVzaChzcGxpY2UpO1xuICAgICAgICAgIHNwbGljZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGluZGV4Kys7XG4gICAgICAgIG9sZEluZGV4Kys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFRElUX1VQREFURTpcbiAgICAgICAgaWYgKCFzcGxpY2UpXG4gICAgICAgICAgc3BsaWNlID0gbmV3U3BsaWNlKGluZGV4LCBbXSwgMCk7XG5cbiAgICAgICAgc3BsaWNlLmFkZGVkQ291bnQrKztcbiAgICAgICAgaW5kZXgrKztcblxuICAgICAgICBzcGxpY2UucmVtb3ZlZC5wdXNoKG9sZFtvbGRJbmRleF0pO1xuICAgICAgICBvbGRJbmRleCsrO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgRURJVF9BREQ6XG4gICAgICAgIGlmICghc3BsaWNlKVxuICAgICAgICAgIHNwbGljZSA9IG5ld1NwbGljZShpbmRleCwgW10sIDApO1xuXG4gICAgICAgIHNwbGljZS5hZGRlZENvdW50Kys7XG4gICAgICAgIGluZGV4Kys7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSBFRElUX0RFTEVURTpcbiAgICAgICAgaWYgKCFzcGxpY2UpXG4gICAgICAgICAgc3BsaWNlID0gbmV3U3BsaWNlKGluZGV4LCBbXSwgMCk7XG5cbiAgICAgICAgc3BsaWNlLnJlbW92ZWQucHVzaChvbGRbb2xkSW5kZXhdKTtcbiAgICAgICAgb2xkSW5kZXgrKztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKHNwbGljZSkge1xuICAgIHNwbGljZXMucHVzaChzcGxpY2UpO1xuICB9XG4gIHJldHVybiBzcGxpY2VzO1xufVxuXG5mdW5jdGlvbiBzaGFyZWRQcmVmaXgoY3VycmVudCwgb2xkLCBzZWFyY2hMZW5ndGgpIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWFyY2hMZW5ndGg7IGkrKylcbiAgICBpZiAoIWVxdWFscyhjdXJyZW50W2ldLCBvbGRbaV0pKVxuICAgICAgcmV0dXJuIGk7XG4gIHJldHVybiBzZWFyY2hMZW5ndGg7XG59XG5cbmZ1bmN0aW9uIHNoYXJlZFN1ZmZpeChjdXJyZW50LCBvbGQsIHNlYXJjaExlbmd0aCkge1xuICBsZXQgaW5kZXgxID0gY3VycmVudC5sZW5ndGg7XG4gIGxldCBpbmRleDIgPSBvbGQubGVuZ3RoO1xuICBsZXQgY291bnQgPSAwO1xuICB3aGlsZSAoY291bnQgPCBzZWFyY2hMZW5ndGggJiYgZXF1YWxzKGN1cnJlbnRbLS1pbmRleDFdLCBvbGRbLS1pbmRleDJdKSlcbiAgICBjb3VudCsrO1xuXG4gIHJldHVybiBjb3VudDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFycmF5IG9mIHNwbGljZSByZWNvcmRzIGluZGljYXRpbmcgdGhlIG1pbmltdW0gZWRpdHMgcmVxdWlyZWRcbiAqIHRvIHRyYW5zZm9ybSB0aGUgYHByZXZpb3VzYCBhcnJheSBpbnRvIHRoZSBgY3VycmVudGAgYXJyYXkuXG4gKlxuICogU3BsaWNlIHJlY29yZHMgYXJlIG9yZGVyZWQgYnkgaW5kZXggYW5kIGNvbnRhaW4gdGhlIGZvbGxvd2luZyBmaWVsZHM6XG4gKiAtIGBpbmRleGA6IGluZGV4IHdoZXJlIGVkaXQgc3RhcnRlZFxuICogLSBgcmVtb3ZlZGA6IGFycmF5IG9mIHJlbW92ZWQgaXRlbXMgZnJvbSB0aGlzIGluZGV4XG4gKiAtIGBhZGRlZENvdW50YDogbnVtYmVyIG9mIGl0ZW1zIGFkZGVkIGF0IHRoaXMgaW5kZXhcbiAqXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIGJhc2VkIG9uIHRoZSBMZXZlbnNodGVpbiBcIm1pbmltdW0gZWRpdCBkaXN0YW5jZVwiXG4gKiBhbGdvcml0aG0uIE5vdGUgdGhhdCB1cGRhdGVzIGFyZSB0cmVhdGVkIGFzIHJlbW92YWwgZm9sbG93ZWQgYnkgYWRkaXRpb24uXG4gKlxuICogVGhlIHdvcnN0LWNhc2UgdGltZSBjb21wbGV4aXR5IG9mIHRoaXMgYWxnb3JpdGhtIGlzIGBPKGwgKiBwKWBcbiAqICAgbDogVGhlIGxlbmd0aCBvZiB0aGUgY3VycmVudCBhcnJheVxuICogICBwOiBUaGUgbGVuZ3RoIG9mIHRoZSBwcmV2aW91cyBhcnJheVxuICpcbiAqIEhvd2V2ZXIsIHRoZSB3b3JzdC1jYXNlIGNvbXBsZXhpdHkgaXMgcmVkdWNlZCBieSBhbiBgTyhuKWAgb3B0aW1pemF0aW9uXG4gKiB0byBkZXRlY3QgYW55IHNoYXJlZCBwcmVmaXggJiBzdWZmaXggYmV0d2VlbiB0aGUgdHdvIGFycmF5cyBhbmQgb25seVxuICogcGVyZm9ybSB0aGUgbW9yZSBleHBlbnNpdmUgbWluaW11bSBlZGl0IGRpc3RhbmNlIGNhbGN1bGF0aW9uIG92ZXIgdGhlXG4gKiBub24tc2hhcmVkIHBvcnRpb25zIG9mIHRoZSBhcnJheXMuXG4gKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFBcnJheX0gY3VycmVudCBUaGUgXCJjaGFuZ2VkXCIgYXJyYXkgZm9yIHdoaWNoIHNwbGljZXMgd2lsbCBiZVxuICogY2FsY3VsYXRlZC5cbiAqIEBwYXJhbSB7IUFycmF5fSBwcmV2aW91cyBUaGUgXCJ1bmNoYW5nZWRcIiBvcmlnaW5hbCBhcnJheSB0byBjb21wYXJlXG4gKiBgY3VycmVudGAgYWdhaW5zdCB0byBkZXRlcm1pbmUgdGhlIHNwbGljZXMuXG4gKiBAcmV0dXJuIHshQXJyYXl9IFJldHVybnMgYW4gYXJyYXkgb2Ygc3BsaWNlIHJlY29yZCBvYmplY3RzLiBFYWNoIG9mIHRoZXNlXG4gKiBjb250YWluczogYGluZGV4YCB0aGUgbG9jYXRpb24gd2hlcmUgdGhlIHNwbGljZSBvY2N1cnJlZDsgYHJlbW92ZWRgXG4gKiB0aGUgYXJyYXkgb2YgcmVtb3ZlZCBpdGVtcyBmcm9tIHRoaXMgbG9jYXRpb247IGBhZGRlZENvdW50YCB0aGUgbnVtYmVyXG4gKiBvZiBpdGVtcyBhZGRlZCBhdCB0aGlzIGxvY2F0aW9uLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlU3BsaWNlcyhjdXJyZW50LCBwcmV2aW91cykge1xuICByZXR1cm4gY2FsY1NwbGljZXMoY3VycmVudCwgMCwgY3VycmVudC5sZW5ndGgsIHByZXZpb3VzLCAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91cy5sZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBlcXVhbHMoY3VycmVudFZhbHVlLCBwcmV2aW91c1ZhbHVlKSB7XG4gIHJldHVybiBjdXJyZW50VmFsdWUgPT09IHByZXZpb3VzVmFsdWU7XG59XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi9ib290LmpzJztcblxuaW1wb3J0IHsgY2FsY3VsYXRlU3BsaWNlcyB9IGZyb20gJy4vYXJyYXktc3BsaWNlLmpzJztcbmltcG9ydCB7IG1pY3JvVGFzayB9IGZyb20gJy4vYXN5bmMuanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4vd3JhcC5qcyc7XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIGBub2RlYCBpcyBhIHNsb3QgZWxlbWVudFxuICogQHBhcmFtIHshTm9kZX0gbm9kZSBOb2RlIHRvIHRlc3QuXG4gKiBAcmV0dXJuIHtib29sZWFufSBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGBub2RlYCBpcyBhIHNsb3RcbiAqIEBwcml2YXRlXG4gKi9cbmZ1bmN0aW9uIGlzU2xvdChub2RlKSB7XG4gIHJldHVybiAobm9kZS5sb2NhbE5hbWUgPT09ICdzbG90Jyk7XG59XG5cbi8qKlxuICogQ2xhc3MgdGhhdCBsaXN0ZW5zIGZvciBjaGFuZ2VzIChhZGRpdGlvbnMgb3IgcmVtb3ZhbHMpIHRvXG4gKiBcImZsYXR0ZW5lZCBub2Rlc1wiIG9uIGEgZ2l2ZW4gYG5vZGVgLiBUaGUgbGlzdCBvZiBmbGF0dGVuZWQgbm9kZXMgY29uc2lzdHNcbiAqIG9mIGEgbm9kZSdzIGNoaWxkcmVuIGFuZCwgZm9yIGFueSBjaGlsZHJlbiB0aGF0IGFyZSBgPHNsb3Q+YCBlbGVtZW50cyxcbiAqIHRoZSBleHBhbmRlZCBmbGF0dGVuZWQgbGlzdCBvZiBgYXNzaWduZWROb2Rlc2AuXG4gKiBGb3IgZXhhbXBsZSwgaWYgdGhlIG9ic2VydmVkIG5vZGUgaGFzIGNoaWxkcmVuIGA8YT48L2E+PHNsb3Q+PC9zbG90PjxiPjwvYj5gXG4gKiBhbmQgdGhlIGA8c2xvdD5gIGhhcyBvbmUgYDxkaXY+YCBhc3NpZ25lZCB0byBpdCwgdGhlbiB0aGUgZmxhdHRlbmVkXG4gKiBub2RlcyBsaXN0IGlzIGA8YT48L2E+PGRpdj48L2Rpdj48Yj48L2I+YC4gSWYgdGhlIGA8c2xvdD5gIGhhcyBvdGhlclxuICogYDxzbG90PmAgZWxlbWVudHMgYXNzaWduZWQgdG8gaXQsIHRoZXNlIGFyZSBmbGF0dGVuZWQgYXMgd2VsbC5cbiAqXG4gKiBUaGUgcHJvdmlkZWQgYGNhbGxiYWNrYCBpcyBjYWxsZWQgd2hlbmV2ZXIgYW55IGNoYW5nZSB0byB0aGlzIGxpc3RcbiAqIG9mIGZsYXR0ZW5lZCBub2RlcyBvY2N1cnMsIHdoZXJlIGFuIGFkZGl0aW9uIG9yIHJlbW92YWwgb2YgYSBub2RlIGlzXG4gKiBjb25zaWRlcmVkIGEgY2hhbmdlLiBUaGUgYGNhbGxiYWNrYCBpcyBjYWxsZWQgd2l0aCBvbmUgYXJndW1lbnQsIGFuIG9iamVjdFxuICogY29udGFpbmluZyBhbiBhcnJheSBvZiBhbnkgYGFkZGVkTm9kZXNgIGFuZCBgcmVtb3ZlZE5vZGVzYC5cbiAqXG4gKiBOb3RlOiB0aGUgY2FsbGJhY2sgaXMgY2FsbGVkIGFzeW5jaHJvbm91cyB0byBhbnkgY2hhbmdlc1xuICogYXQgYSBtaWNyb3Rhc2sgY2hlY2twb2ludC4gVGhpcyBpcyBiZWNhdXNlIG9ic2VydmF0aW9uIGlzIHBlcmZvcm1lZCB1c2luZ1xuICogYE11dGF0aW9uT2JzZXJ2ZXJgIGFuZCB0aGUgYDxzbG90PmAgZWxlbWVudCdzIGBzbG90Y2hhbmdlYCBldmVudCB3aGljaFxuICogYXJlIGFzeW5jaHJvbm91cy5cbiAqXG4gKiBBbiBleGFtcGxlOlxuICogYGBganNcbiAqIGNsYXNzIFRlc3RTZWxmT2JzZXJ2ZSBleHRlbmRzIFBvbHltZXJFbGVtZW50IHtcbiAqICAgc3RhdGljIGdldCBpcygpIHsgcmV0dXJuICd0ZXN0LXNlbGYtb2JzZXJ2ZSc7fVxuICogICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAqICAgICBzdXBlci5jb25uZWN0ZWRDYWxsYmFjaygpO1xuICogICAgIHRoaXMuX29ic2VydmVyID0gbmV3IEZsYXR0ZW5lZE5vZGVzT2JzZXJ2ZXIodGhpcywgKGluZm8pID0+IHtcbiAqICAgICAgIHRoaXMuaW5mbyA9IGluZm87XG4gKiAgICAgfSk7XG4gKiAgIH1cbiAqICAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gKiAgICAgc3VwZXIuZGlzY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAqICAgICB0aGlzLl9vYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gKiAgIH1cbiAqIH1cbiAqIGN1c3RvbUVsZW1lbnRzLmRlZmluZShUZXN0U2VsZk9ic2VydmUuaXMsIFRlc3RTZWxmT2JzZXJ2ZSk7XG4gKiBgYGBcbiAqXG4gKiBAc3VtbWFyeSBDbGFzcyB0aGF0IGxpc3RlbnMgZm9yIGNoYW5nZXMgKGFkZGl0aW9ucyBvciByZW1vdmFscykgdG9cbiAqIFwiZmxhdHRlbmVkIG5vZGVzXCIgb24gYSBnaXZlbiBgbm9kZWAuXG4gKiBAaW1wbGVtZW50cyB7UG9seW1lckRvbUFwaS5PYnNlcnZlSGFuZGxlfVxuICovXG5leHBvcnQgbGV0IEZsYXR0ZW5lZE5vZGVzT2JzZXJ2ZXIgPSBjbGFzcyB7XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgZmxhdHRlbmVkIG5vZGVzIGZvciB0aGUgZ2l2ZW4gYG5vZGVgLlxuICAgKiBUaGlzIGxpc3QgY29uc2lzdHMgb2YgYSBub2RlJ3MgY2hpbGRyZW4gYW5kLCBmb3IgYW55IGNoaWxkcmVuXG4gICAqIHRoYXQgYXJlIGA8c2xvdD5gIGVsZW1lbnRzLCB0aGUgZXhwYW5kZWQgZmxhdHRlbmVkIGxpc3Qgb2YgYGFzc2lnbmVkTm9kZXNgLlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgdGhlIG9ic2VydmVkIG5vZGUgaGFzIGNoaWxkcmVuIGA8YT48L2E+PHNsb3Q+PC9zbG90PjxiPjwvYj5gXG4gICAqIGFuZCB0aGUgYDxzbG90PmAgaGFzIG9uZSBgPGRpdj5gIGFzc2lnbmVkIHRvIGl0LCB0aGVuIHRoZSBmbGF0dGVuZWRcbiAgICogbm9kZXMgbGlzdCBpcyBgPGE+PC9hPjxkaXY+PC9kaXY+PGI+PC9iPmAuIElmIHRoZSBgPHNsb3Q+YCBoYXMgb3RoZXJcbiAgICogYDxzbG90PmAgZWxlbWVudHMgYXNzaWduZWQgdG8gaXQsIHRoZXNlIGFyZSBmbGF0dGVuZWQgYXMgd2VsbC5cbiAgICpcbiAgICogQHBhcmFtIHshSFRNTEVsZW1lbnR8IUhUTUxTbG90RWxlbWVudH0gbm9kZSBUaGUgbm9kZSBmb3Igd2hpY2ggdG9cbiAgICogICAgICByZXR1cm4gdGhlIGxpc3Qgb2YgZmxhdHRlbmVkIG5vZGVzLlxuICAgKiBAcmV0dXJuIHshQXJyYXk8IU5vZGU+fSBUaGUgbGlzdCBvZiBmbGF0dGVuZWQgbm9kZXMgZm9yIHRoZSBnaXZlbiBgbm9kZWAuXG4gICAqIEBub2NvbGxhcHNlIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzI3NjNcbiAgICovXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICBzdGF0aWMgZ2V0RmxhdHRlbmVkTm9kZXMobm9kZSkge1xuICAgIGNvbnN0IHdyYXBwZWQgPSB3cmFwKG5vZGUpO1xuICAgIGlmIChpc1Nsb3Qobm9kZSkpIHtcbiAgICAgIG5vZGUgPSAvKiogQHR5cGUgeyFIVE1MU2xvdEVsZW1lbnR9ICovKG5vZGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtYXNzaWduXG4gICAgICByZXR1cm4gd3JhcHBlZC5hc3NpZ25lZE5vZGVzKHtmbGF0dGVuOiB0cnVlfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBBcnJheS5mcm9tKHdyYXBwZWQuY2hpbGROb2RlcykubWFwKChub2RlKSA9PiB7XG4gICAgICAgIGlmIChpc1Nsb3Qobm9kZSkpIHtcbiAgICAgICAgICBub2RlID0gLyoqIEB0eXBlIHshSFRNTFNsb3RFbGVtZW50fSAqLyhub2RlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zZWxmLWFzc2lnblxuICAgICAgICAgIHJldHVybiB3cmFwKG5vZGUpLmFzc2lnbmVkTm9kZXMoe2ZsYXR0ZW46IHRydWV9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gW25vZGVdO1xuICAgICAgICB9XG4gICAgICB9KS5yZWR1Y2UoKGEsIGIpID0+IGEuY29uY2F0KGIpLCBbXSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSB0YXJnZXQgTm9kZSBvbiB3aGljaCB0byBsaXN0ZW4gZm9yIGNoYW5nZXMuXG4gICAqIEBwYXJhbSB7P2Z1bmN0aW9uKHRoaXM6IEVsZW1lbnQsIHsgdGFyZ2V0OiAhSFRNTEVsZW1lbnQsIGFkZGVkTm9kZXM6ICFBcnJheTwhRWxlbWVudD4sIHJlbW92ZWROb2RlczogIUFycmF5PCFFbGVtZW50PiB9KTp2b2lkfSBjYWxsYmFjayBGdW5jdGlvbiBjYWxsZWQgd2hlbiB0aGVyZSBhcmUgYWRkaXRpb25zXG4gICAqIG9yIHJlbW92YWxzIGZyb20gdGhlIHRhcmdldCdzIGxpc3Qgb2YgZmxhdHRlbmVkIG5vZGVzLlxuICAgKi9cbiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lXG4gIGNvbnN0cnVjdG9yKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7TXV0YXRpb25PYnNlcnZlcn1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX3NoYWR5Q2hpbGRyZW5PYnNlcnZlciA9IG51bGw7XG4gICAgLyoqXG4gICAgICogQHR5cGUge011dGF0aW9uT2JzZXJ2ZXJ9XG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLl9uYXRpdmVDaGlsZHJlbk9ic2VydmVyID0gbnVsbDtcbiAgICB0aGlzLl9jb25uZWN0ZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7IUhUTUxFbGVtZW50fVxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5fdGFyZ2V0ID0gdGFyZ2V0O1xuICAgIHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLl9lZmZlY3RpdmVOb2RlcyA9IFtdO1xuICAgIHRoaXMuX29ic2VydmVyID0gbnVsbDtcbiAgICB0aGlzLl9zY2hlZHVsZWQgPSBmYWxzZTtcbiAgICAvKipcbiAgICAgKiBAdHlwZSB7ZnVuY3Rpb24oKX1cbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuX2JvdW5kU2NoZWR1bGUgPSAoKSA9PiB7XG4gICAgICB0aGlzLl9zY2hlZHVsZSgpO1xuICAgIH07XG4gICAgdGhpcy5jb25uZWN0KCk7XG4gICAgdGhpcy5fc2NoZWR1bGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZXMgYW4gb2JzZXJ2ZXIuIFRoaXMgbWV0aG9kIGlzIGF1dG9tYXRpY2FsbHkgY2FsbGVkIHdoZW5cbiAgICogYSBgRmxhdHRlbmVkTm9kZXNPYnNlcnZlcmAgaXMgY3JlYXRlZC4gSXQgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHRvXG4gICAqIHJlLWFjdGl2YXRlIGFuIG9ic2VydmVyIHRoYXQgaGFzIGJlZW4gZGVhY3RpdmF0ZWQgdmlhIHRoZSBgZGlzY29ubmVjdGAgbWV0aG9kLlxuICAgKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgY29ubmVjdCgpIHtcbiAgICBpZiAoaXNTbG90KHRoaXMuX3RhcmdldCkpIHtcbiAgICAgIHRoaXMuX2xpc3RlblNsb3RzKFt0aGlzLl90YXJnZXRdKTtcbiAgICB9IGVsc2UgaWYgKHdyYXAodGhpcy5fdGFyZ2V0KS5jaGlsZHJlbikge1xuICAgICAgdGhpcy5fbGlzdGVuU2xvdHMoXG4gICAgICAgICAgLyoqIEB0eXBlIHshTm9kZUxpc3Q8IU5vZGU+fSAqLyAod3JhcCh0aGlzLl90YXJnZXQpLmNoaWxkcmVuKSk7XG4gICAgICBpZiAod2luZG93LlNoYWR5RE9NKSB7XG4gICAgICAgIHRoaXMuX3NoYWR5Q2hpbGRyZW5PYnNlcnZlciA9XG4gICAgICAgICAgd2luZG93LlNoYWR5RE9NLm9ic2VydmVDaGlsZHJlbih0aGlzLl90YXJnZXQsIChtdXRhdGlvbnMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NNdXRhdGlvbnMobXV0YXRpb25zKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX25hdGl2ZUNoaWxkcmVuT2JzZXJ2ZXIgPVxuICAgICAgICAgIG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX3Byb2Nlc3NNdXRhdGlvbnMobXV0YXRpb25zKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fbmF0aXZlQ2hpbGRyZW5PYnNlcnZlci5vYnNlcnZlKHRoaXMuX3RhcmdldCwge2NoaWxkTGlzdDogdHJ1ZX0pO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLl9jb25uZWN0ZWQgPSB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYWN0aXZhdGVzIHRoZSBmbGF0dGVuZWQgbm9kZXMgb2JzZXJ2ZXIuIEFmdGVyIGNhbGxpbmcgdGhpcyBtZXRob2RcbiAgICogdGhlIG9ic2VydmVyIGNhbGxiYWNrIHdpbGwgbm90IGJlIGNhbGxlZCB3aGVuIGNoYW5nZXMgdG8gZmxhdHRlbmVkIG5vZGVzXG4gICAqIG9jY3VyLiBUaGUgYGNvbm5lY3RgIG1ldGhvZCBtYXkgYmUgc3Vic2VxdWVudGx5IGNhbGxlZCB0byByZWFjdGl2YXRlXG4gICAqIHRoZSBvYnNlcnZlci5cbiAgICpcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBkaXNjb25uZWN0KCkge1xuICAgIGlmIChpc1Nsb3QodGhpcy5fdGFyZ2V0KSkge1xuICAgICAgdGhpcy5fdW5saXN0ZW5TbG90cyhbdGhpcy5fdGFyZ2V0XSk7XG4gICAgfSBlbHNlIGlmICh3cmFwKHRoaXMuX3RhcmdldCkuY2hpbGRyZW4pIHtcbiAgICAgIHRoaXMuX3VubGlzdGVuU2xvdHMoXG4gICAgICAgICAgLyoqIEB0eXBlIHshTm9kZUxpc3Q8IU5vZGU+fSAqLyAod3JhcCh0aGlzLl90YXJnZXQpLmNoaWxkcmVuKSk7XG4gICAgICBpZiAod2luZG93LlNoYWR5RE9NICYmIHRoaXMuX3NoYWR5Q2hpbGRyZW5PYnNlcnZlcikge1xuICAgICAgICB3aW5kb3cuU2hhZHlET00udW5vYnNlcnZlQ2hpbGRyZW4odGhpcy5fc2hhZHlDaGlsZHJlbk9ic2VydmVyKTtcbiAgICAgICAgdGhpcy5fc2hhZHlDaGlsZHJlbk9ic2VydmVyID0gbnVsbDtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fbmF0aXZlQ2hpbGRyZW5PYnNlcnZlcikge1xuICAgICAgICB0aGlzLl9uYXRpdmVDaGlsZHJlbk9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgdGhpcy5fbmF0aXZlQ2hpbGRyZW5PYnNlcnZlciA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuX2Nvbm5lY3RlZCA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfc2NoZWR1bGUoKSB7XG4gICAgaWYgKCF0aGlzLl9zY2hlZHVsZWQpIHtcbiAgICAgIHRoaXMuX3NjaGVkdWxlZCA9IHRydWU7XG4gICAgICBtaWNyb1Rhc2sucnVuKCgpID0+IHRoaXMuZmx1c2goKSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8TXV0YXRpb25SZWNvcmQ+fSBtdXRhdGlvbnMgTXV0YXRpb25zIHNpZ25hbGVkIGJ5IHRoZSBtdXRhdGlvbiBvYnNlcnZlclxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX3Byb2Nlc3NNdXRhdGlvbnMobXV0YXRpb25zKSB7XG4gICAgdGhpcy5fcHJvY2Vzc1Nsb3RNdXRhdGlvbnMobXV0YXRpb25zKTtcbiAgICB0aGlzLmZsdXNoKCk7XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtBcnJheTxNdXRhdGlvblJlY29yZD59IG11dGF0aW9ucyBNdXRhdGlvbnMgc2lnbmFsZWQgYnkgdGhlIG11dGF0aW9uIG9ic2VydmVyXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBfcHJvY2Vzc1Nsb3RNdXRhdGlvbnMobXV0YXRpb25zKSB7XG4gICAgaWYgKG11dGF0aW9ucykge1xuICAgICAgZm9yIChsZXQgaT0wOyBpIDwgbXV0YXRpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGxldCBtdXRhdGlvbiA9IG11dGF0aW9uc1tpXTtcbiAgICAgICAgaWYgKG11dGF0aW9uLmFkZGVkTm9kZXMpIHtcbiAgICAgICAgICB0aGlzLl9saXN0ZW5TbG90cyhtdXRhdGlvbi5hZGRlZE5vZGVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobXV0YXRpb24ucmVtb3ZlZE5vZGVzKSB7XG4gICAgICAgICAgdGhpcy5fdW5saXN0ZW5TbG90cyhtdXRhdGlvbi5yZW1vdmVkTm9kZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoZXMgdGhlIG9ic2VydmVyIGNhdXNpbmcgYW55IHBlbmRpbmcgY2hhbmdlcyB0byBiZSBpbW1lZGlhdGVseVxuICAgKiBkZWxpdmVyZWQgdGhlIG9ic2VydmVyIGNhbGxiYWNrLiBCeSBkZWZhdWx0IHRoZXNlIGNoYW5nZXMgYXJlIGRlbGl2ZXJlZFxuICAgKiBhc3luY2hyb25vdXNseSBhdCB0aGUgbmV4dCBtaWNyb3Rhc2sgY2hlY2twb2ludC5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gUmV0dXJucyB0cnVlIGlmIGFueSBwZW5kaW5nIGNoYW5nZXMgY2F1c2VkIHRoZSBvYnNlcnZlclxuICAgKiBjYWxsYmFjayB0byBydW4uXG4gICAqL1xuICBmbHVzaCgpIHtcbiAgICBpZiAoIXRoaXMuX2Nvbm5lY3RlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAod2luZG93LlNoYWR5RE9NKSB7XG4gICAgICBTaGFkeURPTS5mbHVzaCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fbmF0aXZlQ2hpbGRyZW5PYnNlcnZlcikge1xuICAgICAgdGhpcy5fcHJvY2Vzc1Nsb3RNdXRhdGlvbnModGhpcy5fbmF0aXZlQ2hpbGRyZW5PYnNlcnZlci50YWtlUmVjb3JkcygpKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuX3NoYWR5Q2hpbGRyZW5PYnNlcnZlcikge1xuICAgICAgdGhpcy5fcHJvY2Vzc1Nsb3RNdXRhdGlvbnModGhpcy5fc2hhZHlDaGlsZHJlbk9ic2VydmVyLnRha2VSZWNvcmRzKCkpO1xuICAgIH1cbiAgICB0aGlzLl9zY2hlZHVsZWQgPSBmYWxzZTtcbiAgICBsZXQgaW5mbyA9IHtcbiAgICAgIHRhcmdldDogdGhpcy5fdGFyZ2V0LFxuICAgICAgYWRkZWROb2RlczogW10sXG4gICAgICByZW1vdmVkTm9kZXM6IFtdXG4gICAgfTtcbiAgICBsZXQgbmV3Tm9kZXMgPSB0aGlzLmNvbnN0cnVjdG9yLmdldEZsYXR0ZW5lZE5vZGVzKHRoaXMuX3RhcmdldCk7XG4gICAgbGV0IHNwbGljZXMgPSBjYWxjdWxhdGVTcGxpY2VzKG5ld05vZGVzLFxuICAgICAgdGhpcy5fZWZmZWN0aXZlTm9kZXMpO1xuICAgIC8vIHByb2Nlc3MgcmVtb3ZhbHNcbiAgICBmb3IgKGxldCBpPTAsIHM7IChpPHNwbGljZXMubGVuZ3RoKSAmJiAocz1zcGxpY2VzW2ldKTsgaSsrKSB7XG4gICAgICBmb3IgKGxldCBqPTAsIG47IChqIDwgcy5yZW1vdmVkLmxlbmd0aCkgJiYgKG49cy5yZW1vdmVkW2pdKTsgaisrKSB7XG4gICAgICAgIGluZm8ucmVtb3ZlZE5vZGVzLnB1c2gobik7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHByb2Nlc3MgYWRkc1xuICAgIGZvciAobGV0IGk9MCwgczsgKGk8c3BsaWNlcy5sZW5ndGgpICYmIChzPXNwbGljZXNbaV0pOyBpKyspIHtcbiAgICAgIGZvciAobGV0IGo9cy5pbmRleDsgaiA8IHMuaW5kZXggKyBzLmFkZGVkQ291bnQ7IGorKykge1xuICAgICAgICBpbmZvLmFkZGVkTm9kZXMucHVzaChuZXdOb2Rlc1tqXSk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBjYWNoZVxuICAgIHRoaXMuX2VmZmVjdGl2ZU5vZGVzID0gbmV3Tm9kZXM7XG4gICAgbGV0IGRpZEZsdXNoID0gZmFsc2U7XG4gICAgaWYgKGluZm8uYWRkZWROb2Rlcy5sZW5ndGggfHwgaW5mby5yZW1vdmVkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBkaWRGbHVzaCA9IHRydWU7XG4gICAgICB0aGlzLmNhbGxiYWNrLmNhbGwodGhpcy5fdGFyZ2V0LCBpbmZvKTtcbiAgICB9XG4gICAgcmV0dXJuIGRpZEZsdXNoO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUFycmF5PCFOb2RlPnwhTm9kZUxpc3Q8IU5vZGU+fSBub2RlTGlzdCBOb2RlcyB0aGF0IGNvdWxkIGNoYW5nZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgX2xpc3RlblNsb3RzKG5vZGVMaXN0KSB7XG4gICAgZm9yIChsZXQgaT0wOyBpIDwgbm9kZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBuID0gbm9kZUxpc3RbaV07XG4gICAgICBpZiAoaXNTbG90KG4pKSB7XG4gICAgICAgIG4uYWRkRXZlbnRMaXN0ZW5lcignc2xvdGNoYW5nZScsIHRoaXMuX2JvdW5kU2NoZWR1bGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFBcnJheTwhTm9kZT58IU5vZGVMaXN0PCFOb2RlPn0gbm9kZUxpc3QgTm9kZXMgdGhhdCBjb3VsZCBjaGFuZ2VcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIF91bmxpc3RlblNsb3RzKG5vZGVMaXN0KSB7XG4gICAgZm9yIChsZXQgaT0wOyBpIDwgbm9kZUxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBuID0gbm9kZUxpc3RbaV07XG4gICAgICBpZiAoaXNTbG90KG4pKSB7XG4gICAgICAgIG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2xvdGNoYW5nZScsIHRoaXMuX2JvdW5kU2NoZWR1bGUpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG59OyIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICcuL2Jvb3QuanMnO1xuaW1wb3J0IHtlbnF1ZXVlRGVib3VuY2VyLCBmbHVzaERlYm91bmNlcnN9IGZyb20gJy4uL3V0aWxzL2RlYm91bmNlLmpzJztcbmV4cG9ydCB7ZW5xdWV1ZURlYm91bmNlcn07XG5cbi8qKlxuICogRm9yY2VzIHNldmVyYWwgY2xhc3NlcyBvZiBhc3luY2hyb25vdXNseSBxdWV1ZWQgdGFza3MgdG8gZmx1c2g6XG4gKiAtIERlYm91bmNlcnMgYWRkZWQgdmlhIGBlbnF1ZXVlRGVib3VuY2VyYFxuICogLSBTaGFkeURPTSBkaXN0cmlidXRpb25cbiAqXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5leHBvcnQgY29uc3QgZmx1c2ggPSBmdW5jdGlvbigpIHtcbiAgbGV0IHNoYWR5RE9NLCBkZWJvdW5jZXJzO1xuICBkbyB7XG4gICAgc2hhZHlET00gPSB3aW5kb3cuU2hhZHlET00gJiYgU2hhZHlET00uZmx1c2goKTtcbiAgICBpZiAod2luZG93LlNoYWR5Q1NTICYmIHdpbmRvdy5TaGFkeUNTUy5TY29waW5nU2hpbSkge1xuICAgICAgd2luZG93LlNoYWR5Q1NTLlNjb3BpbmdTaGltLmZsdXNoKCk7XG4gICAgfVxuICAgIGRlYm91bmNlcnMgPSBmbHVzaERlYm91bmNlcnMoKTtcbiAgfSB3aGlsZSAoc2hhZHlET00gfHwgZGVib3VuY2Vycyk7XG59O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJy4uL3V0aWxzL2Jvb3QuanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4uL3V0aWxzL3dyYXAuanMnO1xuaW1wb3J0ICcuLi91dGlscy9zZXR0aW5ncy5qcyc7XG5pbXBvcnQgeyBGbGF0dGVuZWROb2Rlc09ic2VydmVyIH0gZnJvbSAnLi4vdXRpbHMvZmxhdHRlbmVkLW5vZGVzLW9ic2VydmVyLmpzJztcbmV4cG9ydCB7IGZsdXNoLCBlbnF1ZXVlRGVib3VuY2VyIGFzIGFkZERlYm91bmNlciB9IGZyb20gJy4uL3V0aWxzL2ZsdXNoLmpzJztcbi8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG5pbXBvcnQgeyBEZWJvdW5jZXIgfSBmcm9tICcuLi91dGlscy9kZWJvdW5jZS5qcyc7ICAvLyB1c2VkIGluIHR5cGUgYW5ub3RhdGlvbnNcbi8qIGVzbGludC1lbmFibGUgbm8tdW51c2VkLXZhcnMgKi9cblxuY29uc3QgcCA9IEVsZW1lbnQucHJvdG90eXBlO1xuLyoqXG4gKiBAY29uc3Qge2Z1bmN0aW9uKHRoaXM6Tm9kZSwgc3RyaW5nKTogYm9vbGVhbn1cbiAqL1xuY29uc3Qgbm9ybWFsaXplZE1hdGNoZXNTZWxlY3RvciA9IHAubWF0Y2hlcyB8fCBwLm1hdGNoZXNTZWxlY3RvciB8fFxuICBwLm1vek1hdGNoZXNTZWxlY3RvciB8fCBwLm1zTWF0Y2hlc1NlbGVjdG9yIHx8XG4gIHAub01hdGNoZXNTZWxlY3RvciB8fCBwLndlYmtpdE1hdGNoZXNTZWxlY3RvcjtcblxuLyoqXG4gKiBDcm9zcy1wbGF0Zm9ybSBgZWxlbWVudC5tYXRjaGVzYCBzaGltLlxuICpcbiAqIEBmdW5jdGlvbiBtYXRjaGVzU2VsZWN0b3JcbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGUgTm9kZSB0byBjaGVjayBzZWxlY3RvciBhZ2FpbnN0XG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgU2VsZWN0b3IgdG8gbWF0Y2hcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbm9kZSBtYXRjaGVkIHNlbGVjdG9yXG4gKi9cbmV4cG9ydCBjb25zdCBtYXRjaGVzU2VsZWN0b3IgPSBmdW5jdGlvbihub2RlLCBzZWxlY3Rvcikge1xuICByZXR1cm4gbm9ybWFsaXplZE1hdGNoZXNTZWxlY3Rvci5jYWxsKG5vZGUsIHNlbGVjdG9yKTtcbn07XG5cbi8qKlxuICogTm9kZSBBUEkgd3JhcHBlciBjbGFzcyByZXR1cm5lZCBmcm9tIGBQb2x5bWVyLmRvbS4odGFyZ2V0KWAgd2hlblxuICogYHRhcmdldGAgaXMgYSBgTm9kZWAuXG4gKiBAaW1wbGVtZW50cyB7UG9seW1lckRvbUFwaX1cbiAqIEB1bnJlc3RyaWN0ZWRcbiAqL1xuY2xhc3MgRG9tQXBpTmF0aXZlIHtcblxuICAvKipcbiAgICogQHBhcmFtIHshTm9kZX0gbm9kZSBOb2RlIGZvciB3aGljaCB0byBjcmVhdGUgYSBQb2x5bWVyLmRvbSBoZWxwZXIgb2JqZWN0LlxuICAgKi9cbiAgY29uc3RydWN0b3Iobm9kZSkge1xuICAgIGlmICh3aW5kb3dbJ1NoYWR5RE9NJ10gJiYgd2luZG93WydTaGFkeURPTSddWydpblVzZSddKSB7XG4gICAgICB3aW5kb3dbJ1NoYWR5RE9NJ11bJ3BhdGNoJ10obm9kZSk7XG4gICAgfVxuICAgIHRoaXMubm9kZSA9IG5vZGU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBpbnN0YW5jZSBvZiBgRmxhdHRlbmVkTm9kZXNPYnNlcnZlcmAgdGhhdFxuICAgKiBsaXN0ZW5zIGZvciBub2RlIGNoYW5nZXMgb24gdGhpcyBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6SFRNTEVsZW1lbnQsIHsgdGFyZ2V0OiAhSFRNTEVsZW1lbnQsIGFkZGVkTm9kZXM6ICFBcnJheTwhRWxlbWVudD4sIHJlbW92ZWROb2RlczogIUFycmF5PCFFbGVtZW50PiB9KTp2b2lkfSBjYWxsYmFjayBDYWxsZWQgd2hlbiBkaXJlY3Qgb3IgZGlzdHJpYnV0ZWQgY2hpbGRyZW5cbiAgICogICBvZiB0aGlzIGVsZW1lbnQgY2hhbmdlc1xuICAgKiBAcmV0dXJuIHshUG9seW1lckRvbUFwaS5PYnNlcnZlSGFuZGxlfSBPYnNlcnZlciBpbnN0YW5jZVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIG9ic2VydmVOb2RlcyhjYWxsYmFjaykge1xuICAgIHJldHVybiBuZXcgRmxhdHRlbmVkTm9kZXNPYnNlcnZlcihcbiAgICAgICAgLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovKHRoaXMubm9kZSksIGNhbGxiYWNrKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyBhbiBvYnNlcnZlciBwcmV2aW91c2x5IGNyZWF0ZWQgdmlhIGBvYnNlcnZlTm9kZXNgXG4gICAqXG4gICAqIEBwYXJhbSB7IVBvbHltZXJEb21BcGkuT2JzZXJ2ZUhhbmRsZX0gb2JzZXJ2ZXJIYW5kbGUgT2JzZXJ2ZXIgaW5zdGFuY2VcbiAgICogICB0byBkaXNjb25uZWN0LlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIHVub2JzZXJ2ZU5vZGVzKG9ic2VydmVySGFuZGxlKSB7XG4gICAgb2JzZXJ2ZXJIYW5kbGUuZGlzY29ubmVjdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFByb3ZpZGVkIGFzIGEgYmFja3dhcmRzLWNvbXBhdGlibGUgQVBJIG9ubHkuICBUaGlzIG1ldGhvZCBkb2VzIG5vdGhpbmcuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBub3RpZnlPYnNlcnZlcigpIHt9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgcHJvdmlkZWQgbm9kZSBpcyBjb250YWluZWQgd2l0aCB0aGlzIGVsZW1lbnQnc1xuICAgKiBsaWdodC1ET00gY2hpbGRyZW4gb3Igc2hhZG93IHJvb3QsIGluY2x1ZGluZyBhbnkgbmVzdGVkIHNoYWRvdyByb290c1xuICAgKiBvZiBjaGlsZHJlbiB0aGVyZWluLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgTm9kZSB0byB0ZXN0XG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gYG5vZGVgIGlzIGNvbnRhaW5lZCB3aXRoaW5cbiAgICogICB0aGlzIGVsZW1lbnQncyBsaWdodCBvciBzaGFkb3cgRE9NLlxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIGRlZXBDb250YWlucyhub2RlKSB7XG4gICAgaWYgKHdyYXAodGhpcy5ub2RlKS5jb250YWlucyhub2RlKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGxldCBuID0gbm9kZTtcbiAgICBsZXQgZG9jID0gbm9kZS5vd25lckRvY3VtZW50O1xuICAgIC8vIHdhbGsgZnJvbSBub2RlIHRvIGB0aGlzYCBvciBgZG9jdW1lbnRgXG4gICAgd2hpbGUgKG4gJiYgbiAhPT0gZG9jICYmIG4gIT09IHRoaXMubm9kZSkge1xuICAgICAgLy8gdXNlIGxvZ2ljYWwgcGFyZW50bm9kZSwgb3IgbmF0aXZlIFNoYWRvd1Jvb3QgaG9zdFxuICAgICAgbiA9IHdyYXAobikucGFyZW50Tm9kZSB8fCB3cmFwKG4pLmhvc3Q7XG4gICAgfVxuICAgIHJldHVybiBuID09PSB0aGlzLm5vZGU7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcm9vdCBub2RlIG9mIHRoaXMgbm9kZS4gIEVxdWl2YWxlbnQgdG8gYGdldFJvb3ROb2RlKClgLlxuICAgKlxuICAgKiBAcmV0dXJuIHshTm9kZX0gVG9wIG1vc3QgZWxlbWVudCBpbiB0aGUgZG9tIHRyZWUgaW4gd2hpY2ggdGhlIG5vZGVcbiAgICogZXhpc3RzLiBJZiB0aGUgbm9kZSBpcyBjb25uZWN0ZWQgdG8gYSBkb2N1bWVudCB0aGlzIGlzIGVpdGhlciBhXG4gICAqIHNoYWRvd1Jvb3Qgb3IgdGhlIGRvY3VtZW50OyBvdGhlcndpc2UsIGl0IG1heSBiZSB0aGUgbm9kZVxuICAgKiBpdHNlbGYgb3IgYSBub2RlIG9yIGRvY3VtZW50IGZyYWdtZW50IGNvbnRhaW5pbmcgaXQuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0T3duZXJSb290KCkge1xuICAgIHJldHVybiB3cmFwKHRoaXMubm9kZSkuZ2V0Um9vdE5vZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3Igc2xvdCBlbGVtZW50cywgcmV0dXJucyB0aGUgbm9kZXMgYXNzaWduZWQgdG8gdGhlIHNsb3Q7IG90aGVyd2lzZVxuICAgKiBhbiBlbXB0eSBhcnJheS4gSXQgaXMgZXF1aXZhbGVudCB0byBgPHNsb3Q+LmFkZGlnbmVkTm9kZXMoe2ZsYXR0ZW46dHJ1ZX0pYC5cbiAgICpcbiAgICogQHJldHVybiB7IUFycmF5PCFOb2RlPn0gQXJyYXkgb2YgYXNzaWduZWQgbm9kZXNcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBnZXREaXN0cmlidXRlZE5vZGVzKCkge1xuICAgIHJldHVybiAodGhpcy5ub2RlLmxvY2FsTmFtZSA9PT0gJ3Nsb3QnKSA/XG4gICAgICB3cmFwKHRoaXMubm9kZSkuYXNzaWduZWROb2Rlcyh7ZmxhdHRlbjogdHJ1ZX0pIDpcbiAgICAgIFtdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgYWxsIHNsb3RzIHRoaXMgZWxlbWVudCB3YXMgZGlzdHJpYnV0ZWQgdG8uXG4gICAqXG4gICAqIEByZXR1cm4geyFBcnJheTwhSFRNTFNsb3RFbGVtZW50Pn0gRGVzY3JpcHRpb25cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBnZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cygpIHtcbiAgICBsZXQgaXAkID0gW107XG4gICAgbGV0IG4gPSB3cmFwKHRoaXMubm9kZSkuYXNzaWduZWRTbG90O1xuICAgIHdoaWxlIChuKSB7XG4gICAgICBpcCQucHVzaChuKTtcbiAgICAgIG4gPSB3cmFwKG4pLmFzc2lnbmVkU2xvdDtcbiAgICB9XG4gICAgcmV0dXJuIGlwJDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxscyBgaW1wb3J0Tm9kZWAgb24gdGhlIGBvd25lckRvY3VtZW50YCBmb3IgdGhpcyBub2RlLlxuICAgKlxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlIE5vZGUgdG8gaW1wb3J0XG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gZGVlcCBUcnVlIGlmIHRoZSBub2RlIHNob3VsZCBiZSBjbG9uZWQgZGVlcGx5IGR1cmluZ1xuICAgKiAgIGltcG9ydFxuICAgKiBAcmV0dXJuIHtOb2RlfSBDbG9uZSBvZiBnaXZlbiBub2RlIGltcG9ydGVkIHRvIHRoaXMgb3duZXIgZG9jdW1lbnRcbiAgICovXG4gIGltcG9ydE5vZGUobm9kZSwgZGVlcCkge1xuICAgIGxldCBkb2MgPSB0aGlzLm5vZGUgaW5zdGFuY2VvZiBEb2N1bWVudCA/IHRoaXMubm9kZSA6XG4gICAgICB0aGlzLm5vZGUub3duZXJEb2N1bWVudDtcbiAgICByZXR1cm4gd3JhcChkb2MpLmltcG9ydE5vZGUobm9kZSwgZGVlcCk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybiB7IUFycmF5PCFOb2RlPn0gUmV0dXJucyBhIGZsYXR0ZW5lZCBsaXN0IG9mIGFsbCBjaGlsZCBub2RlcyBhbmRcbiAgICogbm9kZXMgYXNzaWduZWQgdG8gY2hpbGQgc2xvdHMuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0RWZmZWN0aXZlQ2hpbGROb2RlcygpIHtcbiAgICByZXR1cm4gRmxhdHRlbmVkTm9kZXNPYnNlcnZlci5nZXRGbGF0dGVuZWROb2RlcyhcbiAgICAgICAgLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovICh0aGlzLm5vZGUpKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgZmlsdGVyZWQgbGlzdCBvZiBmbGF0dGVuZWQgY2hpbGQgZWxlbWVudHMgZm9yIHRoaXMgZWxlbWVudCBiYXNlZFxuICAgKiBvbiB0aGUgZ2l2ZW4gc2VsZWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvciBTZWxlY3RvciB0byBmaWx0ZXIgbm9kZXMgYWdhaW5zdFxuICAgKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxFbGVtZW50Pn0gTGlzdCBvZiBmbGF0dGVuZWQgY2hpbGQgZWxlbWVudHNcbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBxdWVyeURpc3RyaWJ1dGVkRWxlbWVudHMoc2VsZWN0b3IpIHtcbiAgICBsZXQgYyQgPSB0aGlzLmdldEVmZmVjdGl2ZUNoaWxkTm9kZXMoKTtcbiAgICBsZXQgbGlzdCA9IFtdO1xuICAgIGZvciAobGV0IGk9MCwgbD1jJC5sZW5ndGgsIGM7IChpPGwpICYmIChjPWMkW2ldKTsgaSsrKSB7XG4gICAgICBpZiAoKGMubm9kZVR5cGUgPT09IE5vZGUuRUxFTUVOVF9OT0RFKSAmJlxuICAgICAgICAgIG1hdGNoZXNTZWxlY3RvcihjLCBzZWxlY3RvcikpIHtcbiAgICAgICAgbGlzdC5wdXNoKGMpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbGlzdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3Igc2hhZG93IHJvb3RzLCByZXR1cm5zIHRoZSBjdXJyZW50bHkgZm9jdXNlZCBlbGVtZW50IHdpdGhpbiB0aGlzXG4gICAqIHNoYWRvdyByb290LlxuICAgKlxuICAgKiByZXR1cm4ge05vZGV8dW5kZWZpbmVkfSBDdXJyZW50bHkgZm9jdXNlZCBlbGVtZW50XG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgZ2V0IGFjdGl2ZUVsZW1lbnQoKSB7XG4gICAgbGV0IG5vZGUgPSB0aGlzLm5vZGU7XG4gICAgcmV0dXJuIG5vZGUuX2FjdGl2ZUVsZW1lbnQgIT09IHVuZGVmaW5lZCA/IG5vZGUuX2FjdGl2ZUVsZW1lbnQgOiBub2RlLmFjdGl2ZUVsZW1lbnQ7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9yd2FyZE1ldGhvZHMocHJvdG8sIG1ldGhvZHMpIHtcbiAgZm9yIChsZXQgaT0wOyBpIDwgbWV0aG9kcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBtZXRob2QgPSBtZXRob2RzW2ldO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIHZhbGlkLWpzZG9jICovXG4gICAgcHJvdG9bbWV0aG9kXSA9IC8qKiBAdGhpcyB7RG9tQXBpTmF0aXZlfSAqLyBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLm5vZGVbbWV0aG9kXS5hcHBseSh0aGlzLm5vZGUsIGFyZ3VtZW50cyk7XG4gICAgfTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlICovXG4gIH1cbn1cblxuZnVuY3Rpb24gZm9yd2FyZFJlYWRPbmx5UHJvcGVydGllcyhwcm90bywgcHJvcGVydGllcykge1xuICBmb3IgKGxldCBpPTA7IGkgPCBwcm9wZXJ0aWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgbGV0IG5hbWUgPSBwcm9wZXJ0aWVzW2ldO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShwcm90bywgbmFtZSwge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgY29uc3QgZG9tQXBpID0gLyoqIEB0eXBlIHtEb21BcGlOYXRpdmV9ICovKHRoaXMpO1xuICAgICAgICByZXR1cm4gZG9tQXBpLm5vZGVbbmFtZV07XG4gICAgICB9LFxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgfSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZm9yd2FyZFByb3BlcnRpZXMocHJvdG8sIHByb3BlcnRpZXMpIHtcbiAgZm9yIChsZXQgaT0wOyBpIDwgcHJvcGVydGllcy5sZW5ndGg7IGkrKykge1xuICAgIGxldCBuYW1lID0gcHJvcGVydGllc1tpXTtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG8sIG5hbWUsIHtcbiAgICAgIC8qKlxuICAgICAgICogQHRoaXMge0RvbUFwaU5hdGl2ZX1cbiAgICAgICAqIEByZXR1cm4geyp9IC5cbiAgICAgICAqL1xuICAgICAgZ2V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVtuYW1lXTtcbiAgICAgIH0sXG4gICAgICAvKipcbiAgICAgICAqIEB0aGlzIHtEb21BcGlOYXRpdmV9XG4gICAgICAgKiBAcGFyYW0geyp9IHZhbHVlIC5cbiAgICAgICAqL1xuICAgICAgc2V0OiBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICB0aGlzLm5vZGVbbmFtZV0gPSB2YWx1ZTtcbiAgICAgIH0sXG4gICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICB9KTtcbiAgfVxufVxuXG5cbi8qKlxuICogRXZlbnQgQVBJIHdyYXBwZXIgY2xhc3MgcmV0dXJuZWQgZnJvbSBgZG9tLih0YXJnZXQpYCB3aGVuXG4gKiBgdGFyZ2V0YCBpcyBhbiBgRXZlbnRgLlxuICovXG5leHBvcnQgY2xhc3MgRXZlbnRBcGkge1xuICBjb25zdHJ1Y3RvcihldmVudCkge1xuICAgIHRoaXMuZXZlbnQgPSBldmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBmaXJzdCBub2RlIG9uIHRoZSBgY29tcG9zZWRQYXRoYCBvZiB0aGlzIGV2ZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHshRXZlbnRUYXJnZXR9IFRoZSBub2RlIHRoaXMgZXZlbnQgd2FzIGRpc3BhdGNoZWQgdG9cbiAgICovXG4gIGdldCByb290VGFyZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLnBhdGhbMF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbG9jYWwgKHJlLXRhcmdldGVkKSB0YXJnZXQgZm9yIHRoaXMgZXZlbnQuXG4gICAqXG4gICAqIEByZXR1cm4geyFFdmVudFRhcmdldH0gVGhlIGxvY2FsIChyZS10YXJnZXRlZCkgdGFyZ2V0IGZvciB0aGlzIGV2ZW50LlxuICAgKi9cbiAgZ2V0IGxvY2FsVGFyZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLmV2ZW50LnRhcmdldDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBgY29tcG9zZWRQYXRoYCBmb3IgdGhpcyBldmVudC5cbiAgICogQHJldHVybiB7IUFycmF5PCFFdmVudFRhcmdldD59IFRoZSBub2RlcyB0aGlzIGV2ZW50IHByb3BhZ2F0ZWQgdGhyb3VnaFxuICAgKi9cbiAgZ2V0IHBhdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuZXZlbnQuY29tcG9zZWRQYXRoKCk7XG4gIH1cbn1cblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7Ym9vbGVhbj19IGRlZXBcbiAqIEByZXR1cm4geyFOb2RlfVxuICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLmNsb25lTm9kZTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHshTm9kZX1cbiAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5hcHBlbmRDaGlsZDtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0geyFOb2RlfSBuZXdDaGlsZFxuICogQHBhcmFtIHtOb2RlfSByZWZDaGlsZFxuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlO1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7IU5vZGV9IG5vZGVcbiAqIEByZXR1cm4geyFOb2RlfVxuICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLnJlbW92ZUNoaWxkO1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7IU5vZGV9IG9sZENoaWxkXG4gKiBAcGFyYW0geyFOb2RlfSBuZXdDaGlsZFxuICogQHJldHVybiB7IU5vZGV9XG4gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUucmVwbGFjZUNoaWxkO1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gdmFsdWVcbiAqIEByZXR1cm4ge3ZvaWR9XG4gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUuc2V0QXR0cmlidXRlO1xuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHt2b2lkfVxuICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLnJlbW92ZUF0dHJpYnV0ZTtcbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEByZXR1cm4gez9FbGVtZW50fVxuICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3I7XG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yXG4gKiBAcmV0dXJuIHshTm9kZUxpc3Q8IUVsZW1lbnQ+fVxuICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGw7XG5cbi8qKiBAdHlwZSB7P05vZGV9ICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLnBhcmVudE5vZGU7XG4vKiogQHR5cGUgez9Ob2RlfSAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5maXJzdENoaWxkO1xuLyoqIEB0eXBlIHs/Tm9kZX0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUubGFzdENoaWxkO1xuLyoqIEB0eXBlIHs/Tm9kZX0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUubmV4dFNpYmxpbmc7XG4vKiogQHR5cGUgez9Ob2RlfSAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5wcmV2aW91c1NpYmxpbmc7XG4vKiogQHR5cGUgez9IVE1MRWxlbWVudH0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUuZmlyc3RFbGVtZW50Q2hpbGQ7XG4vKiogQHR5cGUgez9IVE1MRWxlbWVudH0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUubGFzdEVsZW1lbnRDaGlsZDtcbi8qKiBAdHlwZSB7P0hUTUxFbGVtZW50fSAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5uZXh0RWxlbWVudFNpYmxpbmc7XG4vKiogQHR5cGUgez9IVE1MRWxlbWVudH0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUucHJldmlvdXNFbGVtZW50U2libGluZztcbi8qKiBAdHlwZSB7IUFycmF5PCFOb2RlPn0gKi9cbkRvbUFwaU5hdGl2ZS5wcm90b3R5cGUuY2hpbGROb2Rlcztcbi8qKiBAdHlwZSB7IUFycmF5PCFIVE1MRWxlbWVudD59ICovXG5Eb21BcGlOYXRpdmUucHJvdG90eXBlLmNoaWxkcmVuO1xuLyoqIEB0eXBlIHs/RE9NVG9rZW5MaXN0fSAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5jbGFzc0xpc3Q7XG5cbi8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS50ZXh0Q29udGVudDtcbi8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuRG9tQXBpTmF0aXZlLnByb3RvdHlwZS5pbm5lckhUTUw7XG5cbmxldCBEb21BcGlJbXBsID0gRG9tQXBpTmF0aXZlO1xuXG5pZiAod2luZG93WydTaGFkeURPTSddICYmIHdpbmRvd1snU2hhZHlET00nXVsnaW5Vc2UnXSAmJiB3aW5kb3dbJ1NoYWR5RE9NJ11bJ25vUGF0Y2gnXSAmJiB3aW5kb3dbJ1NoYWR5RE9NJ11bJ1dyYXBwZXInXSkge1xuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKiBAZXh0ZW5kcyB7SFRNTEVsZW1lbnR9XG4gICAqL1xuICBjbGFzcyBXcmFwcGVyIGV4dGVuZHMgd2luZG93WydTaGFkeURPTSddWydXcmFwcGVyJ10ge31cblxuICAvLyBjb3B5IGJlc3Bva2UgQVBJIG9udG8gd3JhcHBlclxuICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhEb21BcGlOYXRpdmUucHJvdG90eXBlKS5mb3JFYWNoKChwcm9wKSA9PiB7XG4gICAgaWYgKHByb3AgIT0gJ2FjdGl2ZUVsZW1lbnQnKSB7XG4gICAgICBXcmFwcGVyLnByb3RvdHlwZVtwcm9wXSA9IERvbUFwaU5hdGl2ZS5wcm90b3R5cGVbcHJvcF07XG4gICAgfVxuICB9KTtcblxuICAvLyBOb3RlLCBgY2xhc3NMaXN0YCBpcyBoZXJlIG9ubHkgZm9yIGxlZ2FjeSBjb21wYXRpYmlsaXR5IHNpbmNlIGl0IGRvZXMgbm90XG4gIC8vIHRyaWdnZXIgZGlzdHJpYnV0aW9uIGluIHYxIFNoYWRvdyBET00uXG4gIGZvcndhcmRSZWFkT25seVByb3BlcnRpZXMoV3JhcHBlci5wcm90b3R5cGUsIFtcbiAgICAnY2xhc3NMaXN0J1xuICBdKTtcblxuICBEb21BcGlJbXBsID0gV3JhcHBlcjtcblxuICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhFdmVudEFwaS5wcm90b3R5cGUsIHtcblxuICAgIC8vIFJldHVybnMgdGhlIFwibG93ZXN0XCIgbm9kZSBpbiB0aGUgc2FtZSByb290IGFzIHRoZSBldmVudCdzIGN1cnJlbnRUYXJnZXQuXG4gICAgLy8gV2hlbiBpbiBgbm9QYXRjaGAgbW9kZSwgdGhpcyBtdXN0IGJlIGNhbGN1bGF0ZWQgYnkgd2Fsa2luZyB0aGUgZXZlbnQnc1xuICAgIC8vIHBhdGguXG4gICAgbG9jYWxUYXJnZXQ6IHtcbiAgICAgIGdldCgpIHtcbiAgICAgICAgY29uc3QgY3VycmVudCA9IHRoaXMuZXZlbnQuY3VycmVudFRhcmdldDtcbiAgICAgICAgY29uc3QgY3VycmVudFJvb3QgPSBjdXJyZW50ICYmIGRvbShjdXJyZW50KS5nZXRPd25lclJvb3QoKTtcbiAgICAgICAgY29uc3QgcCQgPSB0aGlzLnBhdGg7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcCQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBjb25zdCBlID0gcCRbaV07XG4gICAgICAgICAgaWYgKGRvbShlKS5nZXRPd25lclJvb3QoKSA9PT0gY3VycmVudFJvb3QpIHtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH0sXG5cbiAgICBwYXRoOiB7XG4gICAgICBnZXQoKSB7XG4gICAgICAgIHJldHVybiB3aW5kb3dbJ1NoYWR5RE9NJ11bJ2NvbXBvc2VkUGF0aCddKHRoaXMuZXZlbnQpO1xuICAgICAgfSxcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICAgIH1cbiAgfSk7XG5cbn0gZWxzZSB7XG5cbiAgLy8gTWV0aG9kcyB0aGF0IGNhbiBwcm92b2tlIGRpc3RyaWJ1dGlvbiBvciBtdXN0IHJldHVybiB0aGUgbG9naWNhbCwgbm90XG4gIC8vIGNvbXBvc2VkIHRyZWUuXG4gIGZvcndhcmRNZXRob2RzKERvbUFwaU5hdGl2ZS5wcm90b3R5cGUsIFtcbiAgICAnY2xvbmVOb2RlJywgJ2FwcGVuZENoaWxkJywgJ2luc2VydEJlZm9yZScsICdyZW1vdmVDaGlsZCcsXG4gICAgJ3JlcGxhY2VDaGlsZCcsICdzZXRBdHRyaWJ1dGUnLCAncmVtb3ZlQXR0cmlidXRlJyxcbiAgICAncXVlcnlTZWxlY3RvcicsICdxdWVyeVNlbGVjdG9yQWxsJ1xuICBdKTtcblxuICAvLyBQcm9wZXJ0aWVzIHRoYXQgc2hvdWxkIHJldHVybiB0aGUgbG9naWNhbCwgbm90IGNvbXBvc2VkIHRyZWUuIE5vdGUsIGBjbGFzc0xpc3RgXG4gIC8vIGlzIGhlcmUgb25seSBmb3IgbGVnYWN5IGNvbXBhdGliaWxpdHkgc2luY2UgaXQgZG9lcyBub3QgdHJpZ2dlciBkaXN0cmlidXRpb25cbiAgLy8gaW4gdjEgU2hhZG93IERPTS5cbiAgZm9yd2FyZFJlYWRPbmx5UHJvcGVydGllcyhEb21BcGlOYXRpdmUucHJvdG90eXBlLCBbXG4gICAgJ3BhcmVudE5vZGUnLCAnZmlyc3RDaGlsZCcsICdsYXN0Q2hpbGQnLFxuICAgICduZXh0U2libGluZycsICdwcmV2aW91c1NpYmxpbmcnLCAnZmlyc3RFbGVtZW50Q2hpbGQnLFxuICAgICdsYXN0RWxlbWVudENoaWxkJywgJ25leHRFbGVtZW50U2libGluZycsICdwcmV2aW91c0VsZW1lbnRTaWJsaW5nJyxcbiAgICAnY2hpbGROb2RlcycsICdjaGlsZHJlbicsICdjbGFzc0xpc3QnXG4gIF0pO1xuXG4gIGZvcndhcmRQcm9wZXJ0aWVzKERvbUFwaU5hdGl2ZS5wcm90b3R5cGUsIFtcbiAgICAndGV4dENvbnRlbnQnLCAnaW5uZXJIVE1MJywgJ2NsYXNzTmFtZSdcbiAgXSk7XG59XG5cbmV4cG9ydCBjb25zdCBEb21BcGkgPSBEb21BcGlJbXBsO1xuXG4vKipcbiAqIExlZ2FjeSBET00gYW5kIEV2ZW50IG1hbmlwdWxhdGlvbiBBUEkgd3JhcHBlciBmYWN0b3J5IHVzZWQgdG8gYWJzdHJhY3RcbiAqIGRpZmZlcmVuY2VzIGJldHdlZW4gbmF0aXZlIFNoYWRvdyBET00gYW5kIFwiU2hhZHkgRE9NXCIgd2hlbiBwb2x5ZmlsbGluZyBvblxuICogb2xkZXIgYnJvd3NlcnMuXG4gKlxuICogTm90ZSB0aGF0IGluIFBvbHltZXIgMi54IHVzZSBvZiBgUG9seW1lci5kb21gIGlzIG5vIGxvbmdlciByZXF1aXJlZCBhbmRcbiAqIGluIHRoZSBtYWpvcml0eSBvZiBjYXNlcyBzaW1wbHkgZmFjYWRlcyBkaXJlY3RseSB0byB0aGUgc3RhbmRhcmQgbmF0aXZlXG4gKiBBUEkuXG4gKlxuICogQHN1bW1hcnkgTGVnYWN5IERPTSBhbmQgRXZlbnQgbWFuaXB1bGF0aW9uIEFQSSB3cmFwcGVyIGZhY3RvcnkgdXNlZCB0b1xuICogYWJzdHJhY3QgZGlmZmVyZW5jZXMgYmV0d2VlbiBuYXRpdmUgU2hhZG93IERPTSBhbmQgXCJTaGFkeSBET00uXCJcbiAqIEBwYXJhbSB7KE5vZGV8RXZlbnR8RG9tQXBpTmF0aXZlfEV2ZW50QXBpKT19IG9iaiBOb2RlIG9yIGV2ZW50IHRvIG9wZXJhdGUgb25cbiAqIEByZXR1cm4geyFEb21BcGlOYXRpdmV8IUV2ZW50QXBpfSBXcmFwcGVyIHByb3ZpZGluZyBlaXRoZXIgbm9kZSBBUEkgb3IgZXZlbnQgQVBJXG4gKi9cbmV4cG9ydCBjb25zdCBkb20gPSBmdW5jdGlvbihvYmopIHtcbiAgb2JqID0gb2JqIHx8IGRvY3VtZW50O1xuICBpZiAob2JqIGluc3RhbmNlb2YgRG9tQXBpSW1wbCkge1xuICAgIHJldHVybiAvKiogQHR5cGUgeyFEb21BcGl9ICovKG9iaik7XG4gIH1cbiAgaWYgKG9iaiBpbnN0YW5jZW9mIEV2ZW50QXBpKSB7XG4gICAgcmV0dXJuIC8qKiBAdHlwZSB7IUV2ZW50QXBpfSAqLyhvYmopO1xuICB9XG4gIGxldCBoZWxwZXIgPSBvYmpbJ19fZG9tQXBpJ107XG4gIGlmICghaGVscGVyKSB7XG4gICAgaWYgKG9iaiBpbnN0YW5jZW9mIEV2ZW50KSB7XG4gICAgICBoZWxwZXIgPSBuZXcgRXZlbnRBcGkob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGVscGVyID0gbmV3IERvbUFwaUltcGwoLyoqIEB0eXBlIHtOb2RlfSAqLyhvYmopKTtcbiAgICB9XG4gICAgb2JqWydfX2RvbUFwaSddID0gaGVscGVyO1xuICB9XG4gIHJldHVybiBoZWxwZXI7XG59O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxOSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbmltcG9ydCAnLi9ib290LmpzJztcbmltcG9ydCB7d3JhcH0gZnJvbSAnLi93cmFwLmpzJztcblxuY29uc3QgU2hhZHlET00gPSB3aW5kb3cuU2hhZHlET007XG5jb25zdCBTaGFkeUNTUyA9IHdpbmRvdy5TaGFkeUNTUztcblxuLyoqXG4gKiBSZXR1cm4gdHJ1ZSBpZiBub2RlIHNjb3BlIGlzIGNvcnJlY3QuXG4gKlxuICogQHBhcmFtIHshRWxlbWVudH0gbm9kZSBOb2RlIHRvIGNoZWNrIHNjb3BlXG4gKiBAcGFyYW0geyFOb2RlfSBzY29wZSBTY29wZSByZWZlcmVuY2VcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgbm9kZSBpcyBpbiBzY29wZVxuICovXG5mdW5jdGlvbiBzYW1lU2NvcGUobm9kZSwgc2NvcGUpIHtcbiAgcmV0dXJuIHdyYXAobm9kZSkuZ2V0Um9vdE5vZGUoKSA9PT0gc2NvcGU7XG59XG5cbi8qKlxuICogRW5zdXJlIHRoYXQgZWxlbWVudHMgaW4gYSBTaGFkb3dET00gY29udGFpbmVyIGFyZSBzY29wZWQgY29ycmVjdGx5LlxuICogVGhpcyBmdW5jdGlvbiBpcyBvbmx5IG5lZWRlZCB3aGVuIFNoYWR5RE9NIGlzIHVzZWQgYW5kIHVucGF0Y2hlZCBET00gQVBJcyBhcmUgdXNlZCBpbiB0aGlyZCBwYXJ0eSBjb2RlLlxuICogVGhpcyBjYW4gaGFwcGVuIGluIG5vUGF0Y2ggbW9kZSBvciB3aGVuIHNwZWNpYWxpemVkIEFQSXMgbGlrZSByYW5nZXMgb3IgdGFibGVzIGFyZSB1c2VkIHRvIG11dGF0ZSBET00uXG4gKlxuICogQHBhcmFtICB7IUVsZW1lbnR9IGNvbnRhaW5lciBDb250YWluZXIgZWxlbWVudCB0byBzY29wZVxuICogQHBhcmFtICB7Ym9vbGVhbj19IHNob3VsZE9ic2VydmUgaWYgdHJ1ZSwgc3RhcnQgYSBtdXRhdGlvbiBvYnNlcnZlciBmb3IgYWRkZWQgbm9kZXMgdG8gdGhlIGNvbnRhaW5lclxuICogQHJldHVybiB7P011dGF0aW9uT2JzZXJ2ZXJ9IFJldHVybnMgYSBuZXcgTXV0YXRpb25PYnNlcnZlciBvbiBgY29udGFpbmVyYCBpZiBgc2hvdWxkT2JzZXJ2ZWAgaXMgdHJ1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNjb3BlU3VidHJlZShjb250YWluZXIsIHNob3VsZE9ic2VydmUgPSBmYWxzZSkge1xuICAvLyBJZiB1c2luZyBuYXRpdmUgU2hhZG93RE9NLCBhYm9ydFxuICBpZiAoIVNoYWR5RE9NIHx8ICFTaGFkeUNTUykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIC8vIFNoYWR5Q1NTIGhhbmRsZXMgRE9NIG11dGF0aW9ucyB3aGVuIFNoYWR5RE9NIGRvZXMgbm90IGhhbmRsZSBzY29waW5nIGl0c2VsZlxuICBpZiAoIVNoYWR5RE9NWydoYW5kbGVzRHluYW1pY1Njb3BpbmcnXSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIGNvbnN0IFNjb3BpbmdTaGltID0gU2hhZHlDU1NbJ1Njb3BpbmdTaGltJ107XG4gIC8vIGlmIFNjb3BpbmdTaGltIGlzIG5vdCBhdmFpbGFibGUsIGFib3J0XG4gIGlmICghU2NvcGluZ1NoaW0pIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICAvLyBjYXB0dXJlIGNvcnJlY3Qgc2NvcGUgZm9yIGNvbnRhaW5lclxuICBjb25zdCBjb250YWluZXJTY29wZSA9IFNjb3BpbmdTaGltWydzY29wZUZvck5vZGUnXShjb250YWluZXIpO1xuICBjb25zdCByb290ID0gd3JhcChjb250YWluZXIpLmdldFJvb3ROb2RlKCk7XG5cbiAgY29uc3Qgc2NvcGlmeSA9IChub2RlKSA9PiB7XG4gICAgaWYgKCFzYW1lU2NvcGUobm9kZSwgcm9vdCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gTk9URTogbmF0aXZlIHFTQSBkb2VzIG5vdCBob25vciBzY29wZWQgRE9NLCBidXQgaXQgaXMgZmFzdGVyLCBhbmQgdGhlIHNhbWUgYmVoYXZpb3IgYXMgUG9seW1lciB2MVxuICAgIGNvbnN0IGVsZW1lbnRzID0gQXJyYXkuZnJvbShTaGFkeURPTVsnbmF0aXZlTWV0aG9kcyddWydxdWVyeVNlbGVjdG9yQWxsJ10uY2FsbChub2RlLCAnKicpKTtcbiAgICBlbGVtZW50cy5wdXNoKG5vZGUpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGVsID0gZWxlbWVudHNbaV07XG4gICAgICBpZiAoIXNhbWVTY29wZShlbCwgcm9vdCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjdXJyZW50U2NvcGUgPSBTY29waW5nU2hpbVsnY3VycmVudFNjb3BlRm9yTm9kZSddKGVsKTtcbiAgICAgIGlmIChjdXJyZW50U2NvcGUgIT09IGNvbnRhaW5lclNjb3BlKSB7XG4gICAgICAgIGlmIChjdXJyZW50U2NvcGUgIT09ICcnKSB7XG4gICAgICAgICAgU2NvcGluZ1NoaW1bJ3Vuc2NvcGVOb2RlJ10oZWwsIGN1cnJlbnRTY29wZSk7XG4gICAgICAgIH1cbiAgICAgICAgU2NvcGluZ1NoaW1bJ3Njb3BlTm9kZSddKGVsLCBjb250YWluZXJTY29wZSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8vIHNjb3BlIGV2ZXJ5dGhpbmcgaW4gY29udGFpbmVyXG4gIHNjb3BpZnkoY29udGFpbmVyKTtcblxuICBpZiAoc2hvdWxkT2JzZXJ2ZSkge1xuICAgIGNvbnN0IG1vID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKG14bnMpID0+IHtcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbXhucy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCBteG4gPSBteG5zW2ldO1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IG14bi5hZGRlZE5vZGVzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgY29uc3QgYWRkZWROb2RlID0gbXhuLmFkZGVkTm9kZXNbal07XG4gICAgICAgICAgaWYgKGFkZGVkTm9kZS5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpIHtcbiAgICAgICAgICAgIHNjb3BpZnkoYWRkZWROb2RlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgICBtby5vYnNlcnZlKGNvbnRhaW5lciwge2NoaWxkTGlzdDogdHJ1ZSwgc3VidHJlZTogdHJ1ZX0pO1xuICAgIHJldHVybiBtbztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufSIsICIvKipcbiAqIEBmaWxlb3ZlcnZpZXdcbiAqIEBzdXBwcmVzcyB7Y2hlY2tQcm90b3R5cGFsVHlwZXN9XG4gKiBAbGljZW5zZSBDb3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG4gKiBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZFxuICogYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heVxuICogYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieVxuICogR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUFxuICogcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG5pbXBvcnQgeyBFbGVtZW50TWl4aW4gfSBmcm9tICcuL2VsZW1lbnQtbWl4aW4uanMnO1xuaW1wb3J0IHsgZGVkdXBpbmdNaXhpbiB9IGZyb20gJy4uL3V0aWxzL21peGluLmpzJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICcuLi91dGlscy93cmFwLmpzJztcblxuY29uc3QgRElTQUJMRURfQVRUUiA9ICdkaXNhYmxlLXVwZ3JhZGUnO1xuXG5leHBvcnQgY29uc3QgZmluZE9ic2VydmVkQXR0cmlidXRlc0dldHRlciA9IChjdG9yKSA9PiB7XG4gIHdoaWxlIChjdG9yKSB7XG4gICAgY29uc3QgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoY3RvciwgJ29ic2VydmVkQXR0cmlidXRlcycpO1xuICAgIGlmIChkZXNjKSB7XG4gICAgICByZXR1cm4gZGVzYy5nZXQ7XG4gICAgfVxuICAgIGN0b3IgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2YoY3Rvci5wcm90b3R5cGUpLmNvbnN0cnVjdG9yO1xuICB9XG4gIHJldHVybiAoKSA9PiBbXTtcbn07XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0aGF0IGFsbG93cyB0aGUgZWxlbWVudCB0byBib290IHVwIGluIGEgbm9uLWVuYWJsZWRcbiAqIHN0YXRlIHdoZW4gdGhlIGBkaXNhYmxlLXVwZ3JhZGVgIGF0dHJpYnV0ZSBpcyBwcmVzZW50LiBUaGlzIG1peGluIGlzXG4gKiBkZXNpZ25lZCB0byBiZSB1c2VkIHdpdGggZWxlbWVudCBjbGFzc2VzIGxpa2UgUG9seW1lckVsZW1lbnQgdGhhdCBwZXJmb3JtXG4gKiBpbml0aWFsIHN0YXJ0dXAgd29yayB3aGVuIHRoZXkgYXJlIGZpcnN0IGNvbm5lY3RlZC4gV2hlbiB0aGVcbiAqIGBkaXNhYmxlLXVwZ3JhZGVgIGF0dHJpYnV0ZSBpcyByZW1vdmVkLCBpZiB0aGUgZWxlbWVudCBpcyBjb25uZWN0ZWQsIGl0XG4gKiBib290cyB1cCBhbmQgXCJlbmFibGVzXCIgYXMgaXQgb3RoZXJ3aXNlIHdvdWxkOyBpZiBpdCBpcyBub3QgY29ubmVjdGVkLCB0aGVcbiAqIGVsZW1lbnQgYm9vdHMgdXAgd2hlbiBpdCBpcyBuZXh0IGNvbm5lY3RlZC5cbiAqXG4gKiBVc2luZyBgZGlzYWJsZS11cGdyYWRlYCB3aXRoIFBvbHltZXJFbGVtZW50IHByZXZlbnRzIGFueSBkYXRhIHByb3BhZ2F0aW9uXG4gKiB0byB0aGUgZWxlbWVudCwgYW55IGVsZW1lbnQgRE9NIGZyb20gc3RhbXBpbmcsIG9yIGFueSB3b3JrIGRvbmUgaW5cbiAqIGNvbm5lY3RlZC9kaXNjb25uY3RlZENhbGxiYWNrIGZyb20gb2NjdXJpbmcsIGJ1dCBpdCBkb2VzIG5vdCBwcmV2ZW50IHdvcmtcbiAqIGRvbmUgaW4gdGhlIGVsZW1lbnQgY29uc3RydWN0b3IuXG4gKlxuICogTm90ZSwgdGhpcyBtaXhpbiBtdXN0IGJlIGFwcGxpZWQgb24gdG9wIG9mIGFueSBlbGVtZW50IGNsYXNzIHRoYXRcbiAqIGl0c2VsZiBpbXBsZW1lbnRzIGEgYGNvbm5lY3RlZENhbGxiYWNrYCBzbyB0aGF0IGl0IGNhbiBjb250cm9sIHRoZSB3b3JrXG4gKiBkb25lIGluIGBjb25uZWN0ZWRDYWxsYmFja2AuIEZvciBleGFtcGxlLFxuICpcbiAqICAgICBNeUNsYXNzID0gRGlzYWJsZVVwZ3JhZGVNaXhpbihjbGFzcyBleHRlbmRzIEJhc2VDbGFzcyB7Li4ufSk7XG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAYXBwbGllc01peGluIEVsZW1lbnRNaXhpblxuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIENsYXNzIHRvIGFwcGx5IG1peGluIHRvLlxuICogQHJldHVybiB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIHdpdGggbWl4aW4gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGNvbnN0IERpc2FibGVVcGdyYWRlTWl4aW4gPSBkZWR1cGluZ01peGluKChiYXNlKSA9PiB7XG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfRWxlbWVudE1peGlufVxuICAgKiBAZXh0ZW5kcyB7SFRNTEVsZW1lbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdCBzdXBlckNsYXNzID0gRWxlbWVudE1peGluKGJhc2UpO1xuXG4gIC8vIFdvcmsgYXJvdW5kIGZvciBjbG9zdXJlIGJ1ZyAjMTI2OTM0NDU4LiBVc2luZyBgc3VwZXJgIGluIGEgcHJvcGVydHlcbiAgLy8gZ2V0dGVyIGRvZXMgbm90IHdvcmsgc28gaW5zdGVhZCB3ZSBzZWFyY2ggdGhlIEJhc2UgcHJvdG90eXBlIGZvciBhblxuICAvLyBpbXBsZW1lbnRhdGlvbiBvZiBvYnNlcnZlZEF0dHJpYnV0ZXMgc28gdGhhdCB3ZSBjYW4gb3ZlcnJpZGUgYW5kIGNhbGxcbiAgLy8gdGhlIGBzdXBlcmAgZ2V0dGVyLiBOb3RlLCB0aGlzIGlzIGRvbmUgb25lIHRpbWUgZXZlciBiZWNhdXNlIHdlIGFzc3VtZVxuICAvLyB0aGF0IGBCYXNlYCBpcyBhbHdheXMgY29tZXMgZnJvbSBgUG9seW1lci5MZWdhY3lFbGVtZW50TWl4bmAuXG4gIGxldCBvYnNlcnZlZEF0dHJpYnV0ZXNHZXR0ZXIgPSBmaW5kT2JzZXJ2ZWRBdHRyaWJ1dGVzR2V0dGVyKHN1cGVyQ2xhc3MpO1xuXG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9EaXNhYmxlVXBncmFkZU1peGlufVxuICAgKi9cbiAgY2xhc3MgRGlzYWJsZVVwZ3JhZGVDbGFzcyBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgLyoqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH0gKi9cbiAgICAgIHRoaXMuX19pc1VwZ3JhZGVEaXNhYmxlZDtcbiAgICB9XG5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgIHJldHVybiBvYnNlcnZlZEF0dHJpYnV0ZXNHZXR0ZXIuY2FsbCh0aGlzKS5jb25jYXQoRElTQUJMRURfQVRUUik7XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBlbGVtZW50IGZyb20gaW5pdGlhbGl6aW5nIHByb3BlcnRpZXMgd2hlbiBpdCdzIHVwZ3JhZGUgZGlzYWJsZWQuXG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIF9pbml0aWFsaXplUHJvcGVydGllcygpIHtcbiAgICAgIGlmICh0aGlzLmhhc0F0dHJpYnV0ZShESVNBQkxFRF9BVFRSKSkge1xuICAgICAgICB0aGlzLl9faXNVcGdyYWRlRGlzYWJsZWQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VwZXIuX2luaXRpYWxpemVQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBlbGVtZW50IGZyb20gZW5hYmxpbmcgcHJvcGVydGllcyB3aGVuIGl0J3MgdXBncmFkZSBkaXNhYmxlZC5cbiAgICAvLyBOb3JtYWxseSBvdmVycmlkaW5nIGNvbm5lY3RlZENhbGxiYWNrIHdvdWxkIGJlIGVub3VnaCwgYnV0IGRvbS0qIGVsZW1lbnRzXG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIF9lbmFibGVQcm9wZXJ0aWVzKCkge1xuICAgICAgaWYgKCF0aGlzLl9faXNVcGdyYWRlRGlzYWJsZWQpIHtcbiAgICAgICAgc3VwZXIuX2VuYWJsZVByb3BlcnRpZXMoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgZWxlbWVudCBzdGFydHMgdXBncmFkZS1kaXNhYmxlZCBhbmQgYSBwcm9wZXJ0eSBpcyBzZXQgZm9yXG4gICAgLy8gd2hpY2ggYW4gYWNjZXNzb3IgZXhpc3RzLCB0aGUgZGVmYXVsdCBzaG91bGQgbm90IGJlIGFwcGxpZWQuXG4gICAgLy8gVGhpcyBhZGRpdGlvbmFsIGNoZWNrIGlzIG5lZWRlZCBiZWNhdXNlIGRlZmF1bHRzIGFyZSBhcHBsaWVkIHZpYVxuICAgIC8vIGBfaW5pdGlhbGl6ZVByb3BlcnRpZXNgIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBpbml0aWFsIHByb3BlcnRpZXNcbiAgICAvLyBoYXZlIGJlZW4gc2V0IHdoZW4gdGhlIGVsZW1lbnQgc3RhcnRzIHVwZ3JhZGUtZGlzYWJsZWQuXG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIF9jYW5BcHBseVByb3BlcnR5RGVmYXVsdChwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHN1cGVyLl9jYW5BcHBseVByb3BlcnR5RGVmYXVsdChwcm9wZXJ0eSkgJiZcbiAgICAgICAgISh0aGlzLl9faXNVcGdyYWRlRGlzYWJsZWQgJiYgdGhpcy5faXNQcm9wZXJ0eVBlbmRpbmcocHJvcGVydHkpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBBdHRyaWJ1dGUgbmFtZS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IG9sZCBUaGUgcHJldmlvdXMgdmFsdWUgZm9yIHRoZSBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBUaGUgbmV3IHZhbHVlIGZvciB0aGUgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gbmFtZXNwYWNlIFRoZSBYTUwgbmFtZXNwYWNlIGZvciB0aGUgYXR0cmlidXRlLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgdmFsdWUsIG5hbWVzcGFjZSkge1xuICAgICAgaWYgKG5hbWUgPT0gRElTQUJMRURfQVRUUikge1xuICAgICAgICAvLyBXaGVuIGRpc2FibGUtdXBncmFkZSBpcyByZW1vdmVkLCBpbnRpYWxpemUgcHJvcGVydGllcyBhbmRcbiAgICAgICAgLy8gcHJvdm9rZSBjb25uZWN0ZWRDYWxsYmFjayBpZiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5IGNvbm5lY3RlZC5cbiAgICAgICAgaWYgKHRoaXMuX19pc1VwZ3JhZGVEaXNhYmxlZCAmJiB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICAgICAgc3VwZXIuX2luaXRpYWxpemVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgdGhpcy5fX2lzVXBncmFkZURpc2FibGVkID0gZmFsc2U7XG4gICAgICAgICAgaWYgKHdyYXAodGhpcykuaXNDb25uZWN0ZWQpIHtcbiAgICAgICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdXBlci5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soXG4gICAgICAgICAgICBuYW1lLCBvbGQsIHZhbHVlLCAvKiogQHR5cGUge251bGx8c3RyaW5nfSAqLyAobmFtZXNwYWNlKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBlbGVtZW50IGZyb20gY29ubmVjdGluZyB3aGVuIGl0J3MgdXBncmFkZSBkaXNhYmxlZC5cbiAgICAvLyBUaGlzIHByZXZlbnRzIHVzZXIgY29kZSBpbiBgYXR0YWNoZWRgIGZyb20gYmVpbmcgY2FsbGVkLlxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgIGlmICghdGhpcy5fX2lzVXBncmFkZURpc2FibGVkKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJldmVudCBlbGVtZW50IGZyb20gZGlzY29ubmVjdGluZyB3aGVuIGl0J3MgdXBncmFkZSBkaXNhYmxlZC5cbiAgICAvLyBUaGlzIGF2b2lkcyBhbGxvd2luZyB1c2VyIGNvZGUgYGRldGFjaGVkYCBmcm9tIGJlaW5nIGNhbGxlZCB3aXRob3V0IGFcbiAgICAvLyBwYWlyZWQgY2FsbCB0byBgYXR0YWNoZWRgLlxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgIGlmICghdGhpcy5fX2lzVXBncmFkZURpc2FibGVkKSB7XG4gICAgICAgIHN1cGVyLmRpc2Nvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICB9XG4gICAgfVxuXG4gIH1cblxuICByZXR1cm4gRGlzYWJsZVVwZ3JhZGVDbGFzcztcbn0pO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJ0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL2VudHJ5cG9pbnRzL2FwcGx5LXNoaW0uanMnO1xuaW1wb3J0IHsgRWxlbWVudE1peGluLCBidWlsdENTUyB9IGZyb20gJy4uL21peGlucy9lbGVtZW50LW1peGluLmpzJztcbmltcG9ydCB7IEdlc3R1cmVFdmVudExpc3RlbmVycyB9IGZyb20gJy4uL21peGlucy9nZXN0dXJlLWV2ZW50LWxpc3RlbmVycy5qcyc7XG5pbXBvcnQgeyBEaXJNaXhpbiB9IGZyb20gJy4uL21peGlucy9kaXItbWl4aW4uanMnO1xuaW1wb3J0IHsgZGVkdXBpbmdNaXhpbiB9IGZyb20gJy4uL3V0aWxzL21peGluLmpzJztcbmltcG9ydCAnLi4vdXRpbHMvcmVuZGVyLXN0YXR1cy5qcyc7XG5pbXBvcnQgJy4uL3V0aWxzL3VucmVzb2x2ZWQuanMnO1xuaW1wb3J0IHsgZG9tLCBtYXRjaGVzU2VsZWN0b3IgfSBmcm9tICcuL3BvbHltZXIuZG9tLmpzJztcbmltcG9ydCB7IHNldFRvdWNoQWN0aW9uIH0gZnJvbSAnLi4vdXRpbHMvZ2VzdHVyZXMuanMnO1xuaW1wb3J0IHsgRGVib3VuY2VyIH0gZnJvbSAnLi4vdXRpbHMvZGVib3VuY2UuanMnO1xuaW1wb3J0IHsgdGltZU91dCwgbWljcm9UYXNrIH0gZnJvbSAnLi4vdXRpbHMvYXN5bmMuanMnO1xuaW1wb3J0IHsgZ2V0IH0gZnJvbSAnLi4vdXRpbHMvcGF0aC5qcyc7XG5pbXBvcnQgeyB3cmFwIH0gZnJvbSAnLi4vdXRpbHMvd3JhcC5qcyc7XG5pbXBvcnQgeyBzY29wZVN1YnRyZWUgfSBmcm9tICcuLi91dGlscy9zY29wZS1zdWJ0cmVlLmpzJztcbmltcG9ydCB7IGxlZ2FjeU9wdGltaXphdGlvbnMsIGxlZ2FjeU5vT2JzZXJ2ZWRBdHRyaWJ1dGVzIH0gZnJvbSAnLi4vdXRpbHMvc2V0dGluZ3MuanMnO1xuaW1wb3J0IHsgZmluZE9ic2VydmVkQXR0cmlidXRlc0dldHRlciB9IGZyb20gJy4uL21peGlucy9kaXNhYmxlLXVwZ3JhZGUtbWl4aW4uanMnO1xuaW1wb3J0IHsgcmVnaXN0ZXIgfSBmcm9tICcuLi91dGlscy90ZWxlbWV0cnkuanMnO1xuXG5jb25zdCBESVNBQkxFRF9BVFRSID0gJ2Rpc2FibGUtdXBncmFkZSc7XG5cbmxldCBzdHlsZUludGVyZmFjZSA9IHdpbmRvdy5TaGFkeUNTUztcblxuLyoqXG4gKiBFbGVtZW50IGNsYXNzIG1peGluIHRoYXQgcHJvdmlkZXMgUG9seW1lcidzIFwibGVnYWN5XCIgQVBJIGludGVuZGVkIHRvIGJlXG4gKiBiYWNrd2FyZC1jb21wYXRpYmxlIHRvIHRoZSBncmVhdGVzdCBleHRlbnQgcG9zc2libGUgd2l0aCB0aGUgQVBJXG4gKiBmb3VuZCBvbiB0aGUgUG9seW1lciAxLnggYFBvbHltZXIuQmFzZWAgcHJvdG90eXBlIGFwcGxpZWQgdG8gYWxsIGVsZW1lbnRzXG4gKiBkZWZpbmVkIHVzaW5nIHRoZSBgUG9seW1lcih7Li4ufSlgIGZ1bmN0aW9uLlxuICpcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAcG9seW1lclxuICogQGFwcGxpZXNNaXhpbiBFbGVtZW50TWl4aW5cbiAqIEBhcHBsaWVzTWl4aW4gR2VzdHVyZUV2ZW50TGlzdGVuZXJzXG4gKiBAYXBwbGllc01peGluIERpck1peGluXG4gKiBAcHJvcGVydHkgaXNBdHRhY2hlZCB7Ym9vbGVhbn0gU2V0IHRvIGB0cnVlYCBpbiB0aGlzIGVsZW1lbnQnc1xuICogICBgY29ubmVjdGVkQ2FsbGJhY2tgIGFuZCBgZmFsc2VgIGluIGBkaXNjb25uZWN0ZWRDYWxsYmFja2BcbiAqIEBzdW1tYXJ5IEVsZW1lbnQgY2xhc3MgbWl4aW4gdGhhdCBwcm92aWRlcyBQb2x5bWVyJ3MgXCJsZWdhY3lcIiBBUElcbiAqL1xuZXhwb3J0IGNvbnN0IExlZ2FjeUVsZW1lbnRNaXhpbiA9IGRlZHVwaW5nTWl4aW4oKGJhc2UpID0+IHtcblxuICAvLyBUT0RPKGtzY2hhYWYpOiBOb3RlLCB0aGUgYEBpbXBsZW1lbnRzIHtQb2x5bWVyX0Rpck1peGlufWAgaXMgcmVxdWlyZWQgaGVyZVxuICAvLyAocmF0aGVyIHRoYW4gb24gbGVnYWN5RWxlbWVudEJhc2UpIGZvciB1bmtub3duIHJlYXNvbnMuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfRWxlbWVudE1peGlufVxuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9HZXN0dXJlRXZlbnRMaXN0ZW5lcnN9XG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0Rpck1peGlufVxuICAgKiBAZXh0ZW5kcyB7SFRNTEVsZW1lbnR9XG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBjb25zdCBHZXN0dXJlc0VsZW1lbnQgPSBHZXN0dXJlRXZlbnRMaXN0ZW5lcnMoRWxlbWVudE1peGluKGJhc2UpKTtcblxuICAvLyBOb3RlLCB0aGUgRGlyTWl4aW4gZG9lcyBub3RoaW5nIGlmIGNzcyBpcyBidWlsdCBzbyBhdm9pZCBpbmNsdWRpbmcgaXRcbiAgLy8gaW4gdGhhdCBjYXNlLlxuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGV4dGVuZHMge0dlc3R1cmVzRWxlbWVudH1cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGNvbnN0IGxlZ2FjeUVsZW1lbnRCYXNlID0gYnVpbHRDU1MgPyBHZXN0dXJlc0VsZW1lbnQgOlxuICAgIERpck1peGluKEdlc3R1cmVzRWxlbWVudCk7XG5cbiAgY29uc3Qgb2JzZXJ2ZWRBdHRyaWJ1dGVzR2V0dGVyID0gZmluZE9ic2VydmVkQXR0cmlidXRlc0dldHRlcihsZWdhY3lFbGVtZW50QmFzZSk7XG5cbiAgLyoqXG4gICAqIE1hcCBvZiBzaW1wbGUgbmFtZXMgdG8gdG91Y2ggYWN0aW9uIG5hbWVzXG4gICAqIEBkaWN0XG4gICAqL1xuICBjb25zdCBESVJFQ1RJT05fTUFQID0ge1xuICAgICd4JzogJ3Bhbi14JyxcbiAgICAneSc6ICdwYW4teScsXG4gICAgJ25vbmUnOiAnbm9uZScsXG4gICAgJ2FsbCc6ICdhdXRvJ1xuICB9O1xuXG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAZXh0ZW5kcyB7bGVnYWN5RWxlbWVudEJhc2V9XG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX0xlZ2FjeUVsZW1lbnRNaXhpbn1cbiAgICogQHVucmVzdHJpY3RlZFxuICAgKi9cbiAgY2xhc3MgTGVnYWN5RWxlbWVudCBleHRlbmRzIGxlZ2FjeUVsZW1lbnRCYXNlIHtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgc3VwZXIoKTtcbiAgICAgIC8qKiBAdHlwZSB7Ym9vbGVhbn0gKi9cbiAgICAgIHRoaXMuaXNBdHRhY2hlZDtcbiAgICAgIC8qKiBAdHlwZSB7P1dlYWtNYXA8IUVsZW1lbnQsICFPYmplY3Q8c3RyaW5nLCAhRnVuY3Rpb24+Pn0gKi9cbiAgICAgIHRoaXMuX19ib3VuZExpc3RlbmVycztcbiAgICAgIC8qKiBAdHlwZSB7P09iamVjdDxzdHJpbmcsID9GdW5jdGlvbj59ICovXG4gICAgICB0aGlzLl9kZWJvdW5jZXJzO1xuICAgICAgLy8gTk9URTogSW5saW5lZCBmb3IgcGVyZiBmcm9tIHZlcnNpb24gb2YgRGlzYWJsZVVwZ3JhZGVNaXhpbi5cbiAgICAgIC8qKiBAdHlwZSB7Ym9vbGVhbnx1bmRlZmluZWR9ICovXG4gICAgICB0aGlzLl9faXNVcGdyYWRlRGlzYWJsZWQ7XG4gICAgICAvKiogQHR5cGUge2Jvb2xlYW58dW5kZWZpbmVkfSAqL1xuICAgICAgdGhpcy5fX25lZWRzQXR0cmlidXRlc0F0Q29ubmVjdGVkO1xuICAgICAgLyoqIEB0eXBlIHtib29sZWFufHVuZGVmaW5lZH0gKi9cbiAgICAgIHRoaXMuX2xlZ2FjeUZvcmNlT2JzZXJ2ZWRBdHRyaWJ1dGVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcndhcmRzIGBpbXBvcnRNZXRhYCBmcm9tIHRoZSBwcm90b3R5cGUgKGkuZS4gZnJvbSB0aGUgaW5mbyBvYmplY3RcbiAgICAgKiBwYXNzZWQgdG8gYFBvbHltZXIoey4uLn0pYCkgdG8gdGhlIHN0YXRpYyBBUEkuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHshT2JqZWN0fSBUaGUgYGltcG9ydC5tZXRhYCBvYmplY3Qgc2V0IG9uIHRoZSBwcm90b3R5cGVcbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBgdGhpc2AgaXMgYWx3YXlzIGluIHRoZSBpbnN0YW5jZSBpblxuICAgICAqICBjbG9zdXJlIGZvciBzb21lIHJlYXNvbiBldmVuIGluIGEgc3RhdGljIG1ldGhvZCwgcmF0aGVyIHRoYW4gdGhlIGNsYXNzXG4gICAgICogQG5vY29sbGFwc2VcbiAgICAgKi9cbiAgICBzdGF0aWMgZ2V0IGltcG9ydE1ldGEoKSB7XG4gICAgICByZXR1cm4gdGhpcy5wcm90b3R5cGUuaW1wb3J0TWV0YTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMZWdhY3kgY2FsbGJhY2sgY2FsbGVkIGR1cmluZyB0aGUgYGNvbnN0cnVjdG9yYCwgZm9yIG92ZXJyaWRpbmdcbiAgICAgKiBieSB0aGUgdXNlci5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGNyZWF0ZWQoKSB7fVxuXG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuIGF0dHJpYnV0ZSByZWFjdGlvbiB3aGVuIHRoZSBgbGVnYWN5Tm9PYnNlcnZlZEF0dHJpYnV0ZXNgXG4gICAgICogc2V0dGluZyBpcyBpbiB1c2UuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiBhdHRyaWJ1dGUgdGhhdCBjaGFuZ2VkXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBvbGQgT2xkIGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gdmFsdWUgTmV3IGF0dHJpYnV0ZSB2YWx1ZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgX19hdHRyaWJ1dGVSZWFjdGlvbihuYW1lLCBvbGQsIHZhbHVlKSB7XG4gICAgICBpZiAoKHRoaXMuX19kYXRhQXR0cmlidXRlcyAmJiB0aGlzLl9fZGF0YUF0dHJpYnV0ZXNbbmFtZV0pIHx8IG5hbWUgPT09IERJU0FCTEVEX0FUVFIpIHtcbiAgICAgICAgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkLCB2YWx1ZSwgbnVsbCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgdmFsdWUgb2YgYW4gYXR0cmlidXRlLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBhdHRyaWJ1dGUgdG8gY2hhbmdlLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfG51bWJlcnxib29sZWFufCFUcnVzdGVkSFRNTHwhVHJ1c3RlZFNjcmlwdFVSTHwhVHJ1c3RlZFVSTH0gdmFsdWUgVGhlIG5ldyBhdHRyaWJ1dGUgdmFsdWUuXG4gICAgICovXG4gICAgc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKSB7XG4gICAgICBpZiAobGVnYWN5Tm9PYnNlcnZlZEF0dHJpYnV0ZXMgJiYgIXRoaXMuX2xlZ2FjeUZvcmNlT2JzZXJ2ZWRBdHRyaWJ1dGVzKSB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5nZXRBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgIHN1cGVyLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG4gICAgICAgIC8vIHZhbHVlIGNvZXJjZWQgdG8gU3RyaW5nIGZvciBjbG9zdXJlJ3MgYmVuZWZpdFxuICAgICAgICB0aGlzLl9fYXR0cmlidXRlUmVhY3Rpb24obmFtZSwgb2xkVmFsdWUsIFN0cmluZyh2YWx1ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VwZXIuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuIGF0dHJpYnV0ZS5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBUaGUgbmFtZSBvZiB0aGUgYXR0cmlidXRlIHRvIHJlbW92ZS5cbiAgICAgKi9cbiAgICByZW1vdmVBdHRyaWJ1dGUobmFtZSkge1xuICAgICAgaWYgKGxlZ2FjeU5vT2JzZXJ2ZWRBdHRyaWJ1dGVzICYmICF0aGlzLl9sZWdhY3lGb3JjZU9ic2VydmVkQXR0cmlidXRlcykge1xuICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuZ2V0QXR0cmlidXRlKG5hbWUpO1xuICAgICAgICBzdXBlci5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgIHRoaXMuX19hdHRyaWJ1dGVSZWFjdGlvbihuYW1lLCBvbGRWYWx1ZSwgbnVsbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdXBlci5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTk9URTogSW5saW5lZCBmb3IgcGVyZiBmcm9tIHZlcnNpb24gb2YgRGlzYWJsZVVwZ3JhZGVNaXhpbi5cbiAgICBzdGF0aWMgZ2V0IG9ic2VydmVkQXR0cmlidXRlcygpIHtcbiAgICAgIGlmIChsZWdhY3lOb09ic2VydmVkQXR0cmlidXRlcyAmJiAhdGhpcy5wcm90b3R5cGUuX2xlZ2FjeUZvcmNlT2JzZXJ2ZWRBdHRyaWJ1dGVzKSB7XG4gICAgICAgIC8vIEVuc3VyZSB0aGlzIGVsZW1lbnQgaXMgcHJvcGVydHkgcmVnaXN0ZXJlZCB3aXRoIHRoZSB0ZWxlbWV0cnkgc3lzdGVtLlxuICAgICAgICBpZiAoIXRoaXMuaGFzT3duUHJvcGVydHkoSlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnX19vYnNlcnZlZEF0dHJpYnV0ZXMnLCB0aGlzKSkpIHtcbiAgICAgICAgICB0aGlzLl9fb2JzZXJ2ZWRBdHRyaWJ1dGVzID0gW107XG4gICAgICAgICAgcmVnaXN0ZXIodGhpcy5wcm90b3R5cGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLl9fb2JzZXJ2ZWRBdHRyaWJ1dGVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG9ic2VydmVkQXR0cmlidXRlc0dldHRlci5jYWxsKHRoaXMpLmNvbmNhdChESVNBQkxFRF9BVFRSKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOT1RFOiBJbmxpbmVkIGZvciBwZXJmIGZyb20gdmVyc2lvbiBvZiBEaXNhYmxlVXBncmFkZU1peGluLlxuICAgIC8vIFByZXZlbnQgZWxlbWVudCBmcm9tIGVuYWJsaW5nIHByb3BlcnRpZXMgd2hlbiBpdCdzIHVwZ3JhZGUgZGlzYWJsZWQuXG4gICAgLy8gTm9ybWFsbHkgb3ZlcnJpZGluZyBjb25uZWN0ZWRDYWxsYmFjayB3b3VsZCBiZSBlbm91Z2gsIGJ1dCBkb20tKiBlbGVtZW50c1xuICAgIC8qKiBAb3ZlcnJpZGUgKi9cbiAgICBfZW5hYmxlUHJvcGVydGllcygpIHtcbiAgICAgIGlmICghdGhpcy5fX2lzVXBncmFkZURpc2FibGVkKSB7XG4gICAgICAgIHN1cGVyLl9lbmFibGVQcm9wZXJ0aWVzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTk9URTogSW5saW5lZCBmb3IgcGVyZiBmcm9tIHZlcnNpb24gb2YgRGlzYWJsZVVwZ3JhZGVNaXhpbi5cbiAgICAvLyBJZiB0aGUgZWxlbWVudCBzdGFydHMgdXBncmFkZS1kaXNhYmxlZCBhbmQgYSBwcm9wZXJ0eSBpcyBzZXQgZm9yXG4gICAgLy8gd2hpY2ggYW4gYWNjZXNzb3IgZXhpc3RzLCB0aGUgZGVmYXVsdCBzaG91bGQgbm90IGJlIGFwcGxpZWQuXG4gICAgLy8gVGhpcyBhZGRpdGlvbmFsIGNoZWNrIGlzIG5lZWRlZCBiZWNhdXNlIGRlZmF1bHRzIGFyZSBhcHBsaWVkIHZpYVxuICAgIC8vIGBfaW5pdGlhbGl6ZVByb3BlcnRpZXNgIHdoaWNoIGlzIGNhbGxlZCBhZnRlciBpbml0aWFsIHByb3BlcnRpZXNcbiAgICAvLyBoYXZlIGJlZW4gc2V0IHdoZW4gdGhlIGVsZW1lbnQgc3RhcnRzIHVwZ3JhZGUtZGlzYWJsZWQuXG4gICAgLyoqIEBvdmVycmlkZSAqL1xuICAgIF9jYW5BcHBseVByb3BlcnR5RGVmYXVsdChwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHN1cGVyLl9jYW5BcHBseVByb3BlcnR5RGVmYXVsdChwcm9wZXJ0eSkgJiZcbiAgICAgICAgISh0aGlzLl9faXNVcGdyYWRlRGlzYWJsZWQgJiYgdGhpcy5faXNQcm9wZXJ0eVBlbmRpbmcocHJvcGVydHkpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhbiBpbXBsZW1lbnRhdGlvbiBvZiBgY29ubmVjdGVkQ2FsbGJhY2tgXG4gICAgICogd2hpY2ggYWRkcyBQb2x5bWVyIGxlZ2FjeSBBUEkncyBgYXR0YWNoZWRgIG1ldGhvZC5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgICAgaWYgKHRoaXMuX19uZWVkc0F0dHJpYnV0ZXNBdENvbm5lY3RlZCkge1xuICAgICAgICB0aGlzLl90YWtlQXR0cmlidXRlcygpO1xuICAgICAgfVxuICAgICAgLy8gTk9URTogSW5saW5lZCBmb3IgcGVyZiBmcm9tIHZlcnNpb24gb2YgRGlzYWJsZVVwZ3JhZGVNaXhpbi5cbiAgICAgIGlmICghdGhpcy5fX2lzVXBncmFkZURpc2FibGVkKSB7XG4gICAgICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgICAgIHRoaXMuaXNBdHRhY2hlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuYXR0YWNoZWQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBMZWdhY3kgY2FsbGJhY2sgY2FsbGVkIGR1cmluZyBgY29ubmVjdGVkQ2FsbGJhY2tgLCBmb3Igb3ZlcnJpZGluZ1xuICAgICAqIGJ5IHRoZSB1c2VyLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgYXR0YWNoZWQoKSB7fVxuXG4gICAgLyoqXG4gICAgICogUHJvdmlkZXMgYW4gaW1wbGVtZW50YXRpb24gb2YgYGRpc2Nvbm5lY3RlZENhbGxiYWNrYFxuICAgICAqIHdoaWNoIGFkZHMgUG9seW1lciBsZWdhY3kgQVBJJ3MgYGRldGFjaGVkYCBtZXRob2QuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgIC8vIE5PVEU6IElubGluZWQgZm9yIHBlcmYgZnJvbSB2ZXJzaW9uIG9mIERpc2FibGVVcGdyYWRlTWl4aW4uXG4gICAgICBpZiAoIXRoaXMuX19pc1VwZ3JhZGVEaXNhYmxlZCkge1xuICAgICAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgICAgICB0aGlzLmlzQXR0YWNoZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kZXRhY2hlZCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIExlZ2FjeSBjYWxsYmFjayBjYWxsZWQgZHVyaW5nIGBkaXNjb25uZWN0ZWRDYWxsYmFja2AsIGZvciBvdmVycmlkaW5nXG4gICAgICogYnkgdGhlIHVzZXIuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBkZXRhY2hlZCgpIHt9XG5cbiAgICAvKipcbiAgICAgKiBQcm92aWRlcyBhbiBvdmVycmlkZSBpbXBsZW1lbnRhdGlvbiBvZiBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYFxuICAgICAqIHdoaWNoIGFkZHMgdGhlIFBvbHltZXIgbGVnYWN5IEFQSSdzIGBhdHRyaWJ1dGVDaGFuZ2VkYCBtZXRob2QuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSBvbGQgT2xkIHZhbHVlIG9mIGF0dHJpYnV0ZS5cbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IHZhbHVlIEN1cnJlbnQgdmFsdWUgb2YgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gbmFtZXNwYWNlIEF0dHJpYnV0ZSBuYW1lc3BhY2UuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkLCB2YWx1ZSwgbmFtZXNwYWNlKSB7XG4gICAgICBpZiAob2xkICE9PSB2YWx1ZSkge1xuICAgICAgICAvLyBOT1RFOiBJbmxpbmVkIGZvciBwZXJmIGZyb20gdmVyc2lvbiBvZiBEaXNhYmxlVXBncmFkZU1peGluLlxuICAgICAgICBpZiAobmFtZSA9PSBESVNBQkxFRF9BVFRSKSB7XG4gICAgICAgICAgLy8gV2hlbiBkaXNhYmxlLXVwZ3JhZGUgaXMgcmVtb3ZlZCwgaW50aWFsaXplIHByb3BlcnRpZXMgYW5kXG4gICAgICAgICAgLy8gcHJvdm9rZSBjb25uZWN0ZWRDYWxsYmFjayBpZiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5IGNvbm5lY3RlZC5cbiAgICAgICAgICBpZiAodGhpcy5fX2lzVXBncmFkZURpc2FibGVkICYmIHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuX2luaXRpYWxpemVQcm9wZXJ0aWVzKCk7XG4gICAgICAgICAgICB0aGlzLl9faXNVcGdyYWRlRGlzYWJsZWQgPSBmYWxzZTtcbiAgICAgICAgICAgIGlmICh3cmFwKHRoaXMpLmlzQ29ubmVjdGVkKSB7XG4gICAgICAgICAgICAgIHRoaXMuY29ubmVjdGVkQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VwZXIuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrKG5hbWUsIG9sZCwgdmFsdWUsIG5hbWVzcGFjZSk7XG4gICAgICAgICAgdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkKG5hbWUsIG9sZCwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTGVnYWN5IGNhbGxiYWNrIGNhbGxlZCBkdXJpbmcgYGF0dHJpYnV0ZUNoYW5nZWRDaGFsbGJhY2tgLCBmb3Igb3ZlcnJpZGluZ1xuICAgICAqIGJ5IHRoZSB1c2VyLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgYXR0cmlidXRlLlxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gb2xkIE9sZCB2YWx1ZSBvZiBhdHRyaWJ1dGUuXG4gICAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBDdXJyZW50IHZhbHVlIG9mIGF0dHJpYnV0ZS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGF0dHJpYnV0ZUNoYW5nZWQobmFtZSwgb2xkLCB2YWx1ZSkge30gLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIHRoZSBkZWZhdWx0IGBQb2x5bWVyLlByb3BlcnR5RWZmZWN0c2AgaW1wbGVtZW50YXRpb24gdG9cbiAgICAgKiBhZGQgc3VwcG9ydCBmb3IgY2xhc3MgaW5pdGlhbGl6YXRpb24gdmlhIHRoZSBgX3JlZ2lzdGVyZWRgIGNhbGxiYWNrLlxuICAgICAqIFRoaXMgaXMgY2FsbGVkIG9ubHkgd2hlbiB0aGUgZmlyc3QgaW5zdGFuY2Ugb2YgdGhlIGVsZW1lbnQgaXMgY3JlYXRlZC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9XG4gICAgICovXG4gICAgX2luaXRpYWxpemVQcm9wZXJ0aWVzKCkge1xuICAgICAgLy8gTk9URTogSW5saW5lZCBmb3IgcGVyZiBmcm9tIHZlcnNpb24gb2YgRGlzYWJsZVVwZ3JhZGVNaXhpbi5cbiAgICAgIC8vIE9ubHkgYXV0by11c2UgZGlzYWJsZS11cGdyYWRlIGlmIGxlZ2FjeU9wdGltaXphdGlvbnMgaXMgc2V0LlxuICAgICAgaWYgKGxlZ2FjeU9wdGltaXphdGlvbnMgJiYgdGhpcy5oYXNBdHRyaWJ1dGUoRElTQUJMRURfQVRUUikpIHtcbiAgICAgICAgdGhpcy5fX2lzVXBncmFkZURpc2FibGVkID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxldCBwcm90byA9IE9iamVjdC5nZXRQcm90b3R5cGVPZih0aGlzKTtcbiAgICAgICAgaWYgKCFwcm90by5oYXNPd25Qcm9wZXJ0eShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdfX2hhc1JlZ2lzdGVyRmluaXNoZWQnLCBwcm90bykpKSB7XG4gICAgICAgICAgdGhpcy5fcmVnaXN0ZXJlZCgpO1xuICAgICAgICAgIC8vIGJhY2tzdG9wIGluIGNhc2UgdGhlIGBfcmVnaXN0ZXJlZGAgaW1wbGVtZW50YXRpb24gZG9lcyBub3Qgc2V0IHRoaXNcbiAgICAgICAgICBwcm90by5fX2hhc1JlZ2lzdGVyRmluaXNoZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHN1cGVyLl9pbml0aWFsaXplUHJvcGVydGllcygpO1xuICAgICAgICB0aGlzLnJvb3QgPSAvKiogQHR5cGUge0hUTUxFbGVtZW50fSAqLyh0aGlzKTtcbiAgICAgICAgdGhpcy5jcmVhdGVkKCk7XG4gICAgICAgIC8vIFB1bGwgYWxsIGF0dHJpYnV0ZSB2YWx1ZXMgMXggaWYgYGxlZ2FjeU5vT2JzZXJ2ZWRBdHRyaWJ1dGVzYCBpcyBzZXQuXG4gICAgICAgIGlmIChsZWdhY3lOb09ic2VydmVkQXR0cmlidXRlcyAmJiAhdGhpcy5fbGVnYWN5Rm9yY2VPYnNlcnZlZEF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICBpZiAodGhpcy5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3Rha2VBdHRyaWJ1dGVzKCk7XG4gICAgICAgICAgLy8gRWxlbWVudCBjcmVhdGVkIGZyb20gc2NyYXRjaCBvciBwYXJzZXIgZ2VuZXJhdGVkXG4gICAgICAgICAgfSBlbHNlIGlmICghdGhpcy5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICB0aGlzLl9fbmVlZHNBdHRyaWJ1dGVzQXRDb25uZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBFbnN1cmUgbGlzdGVuZXJzIGFyZSBhcHBsaWVkIGltbWVkaWF0ZWx5IHNvIHRoYXQgdGhleSBhcmVcbiAgICAgICAgLy8gYWRkZWQgYmVmb3JlIGRlY2xhcmF0aXZlIGV2ZW50IGxpc3RlbmVycy4gVGhpcyBhbGxvd3MgYW4gZWxlbWVudCB0b1xuICAgICAgICAvLyBkZWNvcmF0ZSBpdHNlbGYgdmlhIGFuIGV2ZW50IHByaW9yIHRvIGFueSBkZWNsYXJhdGl2ZSBsaXN0ZW5lcnNcbiAgICAgICAgLy8gc2VlaW5nIHRoZSBldmVudC4gTm90ZSwgdGhpcyBlbnN1cmVzIGNvbXBhdGliaWxpdHkgd2l0aCAxLnggb3JkZXJpbmcuXG4gICAgICAgIHRoaXMuX2FwcGx5TGlzdGVuZXJzKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX3Rha2VBdHRyaWJ1dGVzKCkge1xuICAgICAgY29uc3QgYSA9IHRoaXMuYXR0cmlidXRlcztcbiAgICAgIGZvciAobGV0IGk9MCwgbD1hLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjb25zdCBhdHRyID0gYVtpXTtcbiAgICAgICAgdGhpcy5fX2F0dHJpYnV0ZVJlYWN0aW9uKGF0dHIubmFtZSwgbnVsbCwgYXR0ci52YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGF1dG9tYXRpY2FsbHkgd2hlbiBhbiBlbGVtZW50IGlzIGluaXRpYWxpemluZy5cbiAgICAgKiBVc2VycyBtYXkgb3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gcGVyZm9ybSBjbGFzcyByZWdpc3RyYXRpb24gdGltZVxuICAgICAqIHdvcmsuIFRoZSBpbXBsZW1lbnRhdGlvbiBzaG91bGQgZW5zdXJlIHRoZSB3b3JrIGlzIHBlcmZvcm1lZFxuICAgICAqIG9ubHkgb25jZSBmb3IgdGhlIGNsYXNzLlxuICAgICAqIEBwcm90ZWN0ZWRcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9yZWdpc3RlcmVkKCkge31cblxuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyB0aGUgZGVmYXVsdCBgUG9seW1lci5Qcm9wZXJ0eUVmZmVjdHNgIGltcGxlbWVudGF0aW9uIHRvXG4gICAgICogYWRkIHN1cHBvcnQgZm9yIGluc3RhbGxpbmcgYGhvc3RBdHRyaWJ1dGVzYCBhbmQgYGxpc3RlbmVyc2AuXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHJlYWR5KCkge1xuICAgICAgdGhpcy5fZW5zdXJlQXR0cmlidXRlcygpO1xuICAgICAgc3VwZXIucmVhZHkoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBFbnN1cmVzIGFuIGVsZW1lbnQgaGFzIHJlcXVpcmVkIGF0dHJpYnV0ZXMuIENhbGxlZCB3aGVuIHRoZSBlbGVtZW50XG4gICAgICogaXMgYmVpbmcgcmVhZGllZCB2aWEgYHJlYWR5YC4gVXNlcnMgc2hvdWxkIG92ZXJyaWRlIHRvIHNldCB0aGVcbiAgICAgKiBlbGVtZW50J3MgcmVxdWlyZWQgYXR0cmlidXRlcy4gVGhlIGltcGxlbWVudGF0aW9uIHNob3VsZCBiZSBzdXJlXG4gICAgICogdG8gY2hlY2sgYW5kIG5vdCBvdmVycmlkZSBleGlzdGluZyBhdHRyaWJ1dGVzIGFkZGVkIGJ5XG4gICAgICogdGhlIHVzZXIgb2YgdGhlIGVsZW1lbnQuIFR5cGljYWxseSwgc2V0dGluZyBhdHRyaWJ1dGVzIHNob3VsZCBiZSBsZWZ0XG4gICAgICogdG8gdGhlIGVsZW1lbnQgdXNlciBhbmQgbm90IGRvbmUgaGVyZTsgcmVhc29uYWJsZSBleGNlcHRpb25zIGluY2x1ZGVcbiAgICAgKiBzZXR0aW5nIGFyaWEgcm9sZXMgYW5kIGZvY3VzYWJpbGl0eS5cbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfZW5zdXJlQXR0cmlidXRlcygpIHt9XG5cbiAgICAvKipcbiAgICAgKiBBZGRzIGVsZW1lbnQgZXZlbnQgbGlzdGVuZXJzLiBDYWxsZWQgd2hlbiB0aGUgZWxlbWVudFxuICAgICAqIGlzIGJlaW5nIHJlYWRpZWQgdmlhIGByZWFkeWAuIFVzZXJzIHNob3VsZCBvdmVycmlkZSB0b1xuICAgICAqIGFkZCBhbnkgcmVxdWlyZWQgZWxlbWVudCBldmVudCBsaXN0ZW5lcnMuXG4gICAgICogSW4gcGVyZm9ybWFuY2UgY3JpdGljYWwgZWxlbWVudHMsIHRoZSB3b3JrIGRvbmUgaGVyZSBzaG91bGQgYmUga2VwdFxuICAgICAqIHRvIGEgbWluaW11bSBzaW5jZSBpdCBpcyBkb25lIGJlZm9yZSB0aGUgZWxlbWVudCBpcyByZW5kZXJlZC4gSW5cbiAgICAgKiB0aGVzZSBlbGVtZW50cywgY29uc2lkZXIgYWRkaW5nIGxpc3RlbmVycyBhc3luY2hyb25vdXNseSBzbyBhcyBub3QgdG9cbiAgICAgKiBibG9jayByZW5kZXIuXG4gICAgICogQHByb3RlY3RlZFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2FwcGx5TGlzdGVuZXJzKCkge31cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgdHlwZWQgSmF2YVNjcmlwdCB2YWx1ZSB0byBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgYXMgYmFja3dhcmQtY29tcGF0aWJsZSBsZWdhY3kgQVBJXG4gICAgICogb25seS4gIEl0IGlzIG5vdCBkaXJlY3RseSBjYWxsZWQgYnkgYW55IFBvbHltZXIgZmVhdHVyZXMuIFRvIGN1c3RvbWl6ZVxuICAgICAqIGhvdyBwcm9wZXJ0aWVzIGFyZSBzZXJpYWxpemVkIHRvIGF0dHJpYnV0ZXMgZm9yIGF0dHJpYnV0ZSBiaW5kaW5ncyBhbmRcbiAgICAgKiBgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlYCBwcm9wZXJ0aWVzIGFzIHdlbGwgYXMgdGhpcyBtZXRob2QsIG92ZXJyaWRlXG4gICAgICogdGhlIGBfc2VyaWFsaXplVmFsdWVgIG1ldGhvZCBwcm92aWRlZCBieSBgUG9seW1lci5Qcm9wZXJ0eUFjY2Vzc29yc2AuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIGRlc2VyaWFsaXplXG4gICAgICogQHJldHVybiB7c3RyaW5nIHwgdW5kZWZpbmVkfSBTZXJpYWxpemVkIHZhbHVlXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgc2VyaWFsaXplKHZhbHVlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc2VyaWFsaXplVmFsdWUodmFsdWUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgc3RyaW5nIHRvIGEgdHlwZWQgSmF2YVNjcmlwdCB2YWx1ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgYXMgYmFja3dhcmQtY29tcGF0aWJsZSBsZWdhY3kgQVBJXG4gICAgICogb25seS4gIEl0IGlzIG5vdCBkaXJlY3RseSBjYWxsZWQgYnkgYW55IFBvbHltZXIgZmVhdHVyZXMuICBUbyBjdXN0b21pemVcbiAgICAgKiBob3cgYXR0cmlidXRlcyBhcmUgZGVzZXJpYWxpemVkIHRvIHByb3BlcnRpZXMgZm9yIGluXG4gICAgICogYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AsIG92ZXJyaWRlIGBfZGVzZXJpYWxpemVWYWx1ZWAgbWV0aG9kXG4gICAgICogcHJvdmlkZWQgYnkgYFBvbHltZXIuUHJvcGVydHlBY2Nlc3NvcnNgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHZhbHVlIFN0cmluZyB0byBkZXNlcmlhbGl6ZVxuICAgICAqIEBwYXJhbSB7Kn0gdHlwZSBUeXBlIHRvIGRlc2VyaWFsaXplIHRoZSBzdHJpbmcgdG9cbiAgICAgKiBAcmV0dXJuIHsqfSBSZXR1cm5zIHRoZSBkZXNlcmlhbGl6ZWQgdmFsdWUgaW4gdGhlIGB0eXBlYCBnaXZlbi5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBkZXNlcmlhbGl6ZSh2YWx1ZSwgdHlwZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX2Rlc2VyaWFsaXplVmFsdWUodmFsdWUsIHR5cGUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlcmlhbGl6ZXMgYSBwcm9wZXJ0eSB0byBpdHMgYXNzb2NpYXRlZCBhdHRyaWJ1dGUuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGFzIGJhY2t3YXJkLWNvbXBhdGlibGUgbGVnYWN5IEFQSVxuICAgICAqIG9ubHkuICBJdCBpcyBub3QgZGlyZWN0bHkgY2FsbGVkIGJ5IGFueSBQb2x5bWVyIGZlYXR1cmVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWUgdG8gcmVmbGVjdC5cbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGF0dHJpYnV0ZSBBdHRyaWJ1dGUgbmFtZSB0byByZWZsZWN0LlxuICAgICAqIEBwYXJhbSB7Kj19IHZhbHVlIFByb3BlcnR5IHZhbHVlIHRvIHJlZmxlY3QuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICByZWZsZWN0UHJvcGVydHlUb0F0dHJpYnV0ZShwcm9wZXJ0eSwgYXR0cmlidXRlLCB2YWx1ZSkge1xuICAgICAgdGhpcy5fcHJvcGVydHlUb0F0dHJpYnV0ZShwcm9wZXJ0eSwgYXR0cmlidXRlLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0cyBhIHR5cGVkIHZhbHVlIHRvIGFuIEhUTUwgYXR0cmlidXRlIG9uIGEgbm9kZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhpcyBtZXRob2QgaXMgcHJvdmlkZWQgYXMgYmFja3dhcmQtY29tcGF0aWJsZSBsZWdhY3kgQVBJXG4gICAgICogb25seS4gIEl0IGlzIG5vdCBkaXJlY3RseSBjYWxsZWQgYnkgYW55IFBvbHltZXIgZmVhdHVyZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIFZhbHVlIHRvIHNlcmlhbGl6ZS5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gYXR0cmlidXRlIEF0dHJpYnV0ZSBuYW1lIHRvIHNlcmlhbGl6ZSB0by5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGUgRWxlbWVudCB0byBzZXQgYXR0cmlidXRlIHRvLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgc2VyaWFsaXplVmFsdWVUb0F0dHJpYnV0ZSh2YWx1ZSwgYXR0cmlidXRlLCBub2RlKSB7XG4gICAgICB0aGlzLl92YWx1ZVRvTm9kZUF0dHJpYnV0ZSgvKiogQHR5cGUge0VsZW1lbnR9ICovIChub2RlIHx8IHRoaXMpLCB2YWx1ZSwgYXR0cmlidXRlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb3BpZXMgb3duIHByb3BlcnRpZXMgKGluY2x1ZGluZyBhY2Nlc3NvciBkZXNjcmlwdG9ycykgZnJvbSBhIHNvdXJjZVxuICAgICAqIG9iamVjdCB0byBhIHRhcmdldCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRhcmdldCBvYmplY3QgdG8gY29weSBwcm9wZXJ0aWVzIHRvLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBhcGkgU291cmNlIG9iamVjdCB0byBjb3B5IHByb3BlcnRpZXMgZnJvbS5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IHByb3RvdHlwZSBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIGFzIGZpcnN0IGFyZ3VtZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGV4dGVuZChwcm90b3R5cGUsIGFwaSkge1xuICAgICAgaWYgKCEocHJvdG90eXBlICYmIGFwaSkpIHtcbiAgICAgICAgcmV0dXJuIHByb3RvdHlwZSB8fCBhcGk7XG4gICAgICB9XG4gICAgICBsZXQgbiQgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcGkpO1xuICAgICAgZm9yIChsZXQgaT0wLCBuOyAoaTxuJC5sZW5ndGgpICYmIChuPW4kW2ldKTsgaSsrKSB7XG4gICAgICAgIGxldCBwZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoYXBpLCBuKTtcbiAgICAgICAgaWYgKHBkKSB7XG4gICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgbiwgcGQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcHJvdG90eXBlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvcGllcyBwcm9wcyBmcm9tIGEgc291cmNlIG9iamVjdCB0byBhIHRhcmdldCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBOb3RlLCB0aGlzIG1ldGhvZCB1c2VzIGEgc2ltcGxlIGBmb3IuLi5pbmAgc3RyYXRlZ3kgZm9yIGVudW1lcmF0aW5nXG4gICAgICogcHJvcGVydGllcy4gIFRvIGVuc3VyZSBvbmx5IGBvd25Qcm9wZXJ0aWVzYCBhcmUgY29waWVkIGZyb20gc291cmNlXG4gICAgICogdG8gdGFyZ2V0IGFuZCB0aGF0IGFjY2Vzc29yIGltcGxlbWVudGF0aW9ucyBhcmUgY29waWVkLCB1c2UgYGV4dGVuZGAuXG4gICAgICpcbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IHRhcmdldCBUYXJnZXQgb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyB0by5cbiAgICAgKiBAcGFyYW0geyFPYmplY3R9IHNvdXJjZSBTb3VyY2Ugb2JqZWN0IHRvIGNvcHkgcHJvcGVydGllcyBmcm9tLlxuICAgICAqIEByZXR1cm4geyFPYmplY3R9IFRhcmdldCBvYmplY3QgdGhhdCB3YXMgcGFzc2VkIGFzIGZpcnN0IGFyZ3VtZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIG1peGluKHRhcmdldCwgc291cmNlKSB7XG4gICAgICBmb3IgKGxldCBpIGluIHNvdXJjZSkge1xuICAgICAgICB0YXJnZXRbaV0gPSBzb3VyY2VbaV07XG4gICAgICB9XG4gICAgICByZXR1cm4gdGFyZ2V0O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldHMgdGhlIHByb3RvdHlwZSBvZiBhbiBvYmplY3QuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoaXMgbWV0aG9kIGlzIHByb3ZpZGVkIGFzIGJhY2t3YXJkLWNvbXBhdGlibGUgbGVnYWN5IEFQSVxuICAgICAqIG9ubHkuICBJdCBpcyBub3QgZGlyZWN0bHkgY2FsbGVkIGJ5IGFueSBQb2x5bWVyIGZlYXR1cmVzLlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCBvbiB3aGljaCB0byBzZXQgdGhlIHByb3RvdHlwZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcHJvdG90eXBlIFRoZSBwcm90b3R5cGUgdGhhdCB3aWxsIGJlIHNldCBvbiB0aGUgZ2l2ZW5cbiAgICAgKiBgb2JqZWN0YC5cbiAgICAgKiBAcmV0dXJuIHtPYmplY3R9IFJldHVybnMgdGhlIGdpdmVuIGBvYmplY3RgIHdpdGggaXRzIHByb3RvdHlwZSBzZXRcbiAgICAgKiB0byB0aGUgZ2l2ZW4gYHByb3RvdHlwZWAgb2JqZWN0LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGNoYWluT2JqZWN0KG9iamVjdCwgcHJvdG90eXBlKSB7XG4gICAgICBpZiAob2JqZWN0ICYmIHByb3RvdHlwZSAmJiBvYmplY3QgIT09IHByb3RvdHlwZSkge1xuICAgICAgICBvYmplY3QuX19wcm90b19fID0gcHJvdG90eXBlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG9iamVjdDtcbiAgICB9XG5cbiAgICAvKiAqKioqIEJlZ2luIFRlbXBsYXRlICoqKiogKi9cblxuICAgIC8qKlxuICAgICAqIENhbGxzIGBpbXBvcnROb2RlYCBvbiB0aGUgYGNvbnRlbnRgIG9mIHRoZSBgdGVtcGxhdGVgIHNwZWNpZmllZCBhbmRcbiAgICAgKiByZXR1cm5zIGEgZG9jdW1lbnQgZnJhZ21lbnQgY29udGFpbmluZyB0aGUgaW1wb3J0ZWQgY29udGVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7SFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgSFRNTCB0ZW1wbGF0ZSBlbGVtZW50IHRvIGluc3RhbmNlLlxuICAgICAqIEByZXR1cm4geyFEb2N1bWVudEZyYWdtZW50fSBEb2N1bWVudCBmcmFnbWVudCBjb250YWluaW5nIHRoZSBpbXBvcnRlZFxuICAgICAqICAgdGVtcGxhdGUgY29udGVudC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBnby9taXNzaW5nZm5wcm9wc1xuICAgICAqL1xuICAgIGluc3RhbmNlVGVtcGxhdGUodGVtcGxhdGUpIHtcbiAgICAgIGxldCBjb250ZW50ID0gdGhpcy5jb25zdHJ1Y3Rvci5fY29udGVudEZvclRlbXBsYXRlKHRlbXBsYXRlKTtcbiAgICAgIGxldCBkb20gPSAvKiogQHR5cGUgeyFEb2N1bWVudEZyYWdtZW50fSAqL1xuICAgICAgICAoZG9jdW1lbnQuaW1wb3J0Tm9kZShjb250ZW50LCB0cnVlKSk7XG4gICAgICByZXR1cm4gZG9tO1xuICAgIH1cblxuICAgIC8qICoqKiogQmVnaW4gRXZlbnRzICoqKiogKi9cblxuXG5cbiAgICAvKipcbiAgICAgKiBEaXNwYXRjaGVzIGEgY3VzdG9tIGV2ZW50IHdpdGggYW4gb3B0aW9uYWwgZGV0YWlsIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgTmFtZSBvZiBldmVudCB0eXBlLlxuICAgICAqIEBwYXJhbSB7Kj19IGRldGFpbCBEZXRhaWwgdmFsdWUgY29udGFpbmluZyBldmVudC1zcGVjaWZpY1xuICAgICAqICAgcGF5bG9hZC5cbiAgICAgKiBAcGFyYW0ge3sgYnViYmxlczogKGJvb2xlYW58dW5kZWZpbmVkKSwgY2FuY2VsYWJsZTogKGJvb2xlYW58dW5kZWZpbmVkKSxcbiAgICAgKiAgICAgY29tcG9zZWQ6IChib29sZWFufHVuZGVmaW5lZCkgfT19XG4gICAgICogIG9wdGlvbnMgT2JqZWN0IHNwZWNpZnlpbmcgb3B0aW9ucy4gIFRoZXNlIG1heSBpbmNsdWRlOlxuICAgICAqICBgYnViYmxlc2AgKGJvb2xlYW4sIGRlZmF1bHRzIHRvIGB0cnVlYCksXG4gICAgICogIGBjYW5jZWxhYmxlYCAoYm9vbGVhbiwgZGVmYXVsdHMgdG8gZmFsc2UpLCBhbmRcbiAgICAgKiAgYG5vZGVgIG9uIHdoaWNoIHRvIGZpcmUgdGhlIGV2ZW50IChIVE1MRWxlbWVudCwgZGVmYXVsdHMgdG8gYHRoaXNgKS5cbiAgICAgKiBAcmV0dXJuIHshRXZlbnR9IFRoZSBuZXcgZXZlbnQgdGhhdCB3YXMgZmlyZWQuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZmlyZSh0eXBlLCBkZXRhaWwsIG9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICAgICAgZGV0YWlsID0gKGRldGFpbCA9PT0gbnVsbCB8fCBkZXRhaWwgPT09IHVuZGVmaW5lZCkgPyB7fSA6IGRldGFpbDtcbiAgICAgIGxldCBldmVudCA9IG5ldyBFdmVudCh0eXBlLCB7XG4gICAgICAgIGJ1YmJsZXM6IG9wdGlvbnMuYnViYmxlcyA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IG9wdGlvbnMuYnViYmxlcyxcbiAgICAgICAgY2FuY2VsYWJsZTogQm9vbGVhbihvcHRpb25zLmNhbmNlbGFibGUpLFxuICAgICAgICBjb21wb3NlZDogb3B0aW9ucy5jb21wb3NlZCA9PT0gdW5kZWZpbmVkID8gdHJ1ZTogb3B0aW9ucy5jb21wb3NlZFxuICAgICAgfSk7XG4gICAgICBldmVudC5kZXRhaWwgPSBkZXRhaWw7XG4gICAgICBsZXQgbm9kZSA9IG9wdGlvbnMubm9kZSB8fCB0aGlzO1xuICAgICAgd3JhcChub2RlKS5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gYWRkIGFuIGV2ZW50IGxpc3RlbmVyIG9uIGEgZ2l2ZW4gZWxlbWVudCxcbiAgICAgKiBsYXRlIGJvdW5kIHRvIGEgbmFtZWQgbWV0aG9kIG9uIHRoaXMgZWxlbWVudC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7P0V2ZW50VGFyZ2V0fSBub2RlIEVsZW1lbnQgdG8gYWRkIGV2ZW50IGxpc3RlbmVyIHRvLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiBldmVudCB0byBsaXN0ZW4gZm9yLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBtZXRob2ROYW1lIE5hbWUgb2YgaGFuZGxlciBtZXRob2Qgb24gYHRoaXNgIHRvIGNhbGwuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBsaXN0ZW4obm9kZSwgZXZlbnROYW1lLCBtZXRob2ROYW1lKSB7XG4gICAgICBub2RlID0gLyoqIEB0eXBlIHshRXZlbnRUYXJnZXR9ICovIChub2RlIHx8IHRoaXMpO1xuICAgICAgbGV0IGhibCA9IHRoaXMuX19ib3VuZExpc3RlbmVycyB8fFxuICAgICAgICAodGhpcy5fX2JvdW5kTGlzdGVuZXJzID0gbmV3IFdlYWtNYXAoKSk7XG4gICAgICBsZXQgYmwgPSBoYmwuZ2V0KG5vZGUpO1xuICAgICAgaWYgKCFibCkge1xuICAgICAgICBibCA9IHt9O1xuICAgICAgICBoYmwuc2V0KG5vZGUsIGJsKTtcbiAgICAgIH1cbiAgICAgIGxldCBrZXkgPSBldmVudE5hbWUgKyBtZXRob2ROYW1lO1xuICAgICAgaWYgKCFibFtrZXldKSB7XG4gICAgICAgIGJsW2tleV0gPSB0aGlzLl9hZGRNZXRob2RFdmVudExpc3RlbmVyVG9Ob2RlKFxuICAgICAgICAgICAgLyoqIEB0eXBlIHshTm9kZX0gKi8gKG5vZGUpLCBldmVudE5hbWUsIG1ldGhvZE5hbWUsIHRoaXMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgYW4gZXZlbnQgbGlzdGVuZXIgZnJvbSBhIGdpdmVuIGVsZW1lbnQsXG4gICAgICogbGF0ZSBib3VuZCB0byBhIG5hbWVkIG1ldGhvZCBvbiB0aGlzIGVsZW1lbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gez9FdmVudFRhcmdldH0gbm9kZSBFbGVtZW50IHRvIHJlbW92ZSBldmVudCBsaXN0ZW5lciBmcm9tLlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgTmFtZSBvZiBldmVudCB0byBzdG9wIGxpc3RlbmluZyB0by5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbWV0aG9kTmFtZSBOYW1lIG9mIGhhbmRsZXIgbWV0aG9kIG9uIGB0aGlzYCB0byBub3QgY2FsbFxuICAgICBhbnltb3JlLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgdW5saXN0ZW4obm9kZSwgZXZlbnROYW1lLCBtZXRob2ROYW1lKSB7XG4gICAgICBub2RlID0gLyoqIEB0eXBlIHshRXZlbnRUYXJnZXR9ICovIChub2RlIHx8IHRoaXMpO1xuICAgICAgbGV0IGJsID0gdGhpcy5fX2JvdW5kTGlzdGVuZXJzICYmXG4gICAgICAgICAgdGhpcy5fX2JvdW5kTGlzdGVuZXJzLmdldCgvKiogQHR5cGUgeyFFbGVtZW50fSAqLyAobm9kZSkpO1xuICAgICAgbGV0IGtleSA9IGV2ZW50TmFtZSArIG1ldGhvZE5hbWU7XG4gICAgICBsZXQgaGFuZGxlciA9IGJsICYmIGJsW2tleV07XG4gICAgICBpZiAoaGFuZGxlcikge1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVyRnJvbU5vZGUoXG4gICAgICAgICAgICAvKiogQHR5cGUgeyFOb2RlfSAqLyAobm9kZSksIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICAgIGJsW2tleV0gPSAvKiogQHR5cGUgez99ICovIChudWxsKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBPdmVycmlkZSBzY3JvbGxpbmcgYmVoYXZpb3IgdG8gYWxsIGRpcmVjdGlvbiwgb25lIGRpcmVjdGlvbiwgb3Igbm9uZS5cbiAgICAgKlxuICAgICAqIFZhbGlkIHNjcm9sbCBkaXJlY3Rpb25zOlxuICAgICAqICAgLSAnYWxsJzogc2Nyb2xsIGluIGFueSBkaXJlY3Rpb25cbiAgICAgKiAgIC0gJ3gnOiBzY3JvbGwgb25seSBpbiB0aGUgJ3gnIGRpcmVjdGlvblxuICAgICAqICAgLSAneSc6IHNjcm9sbCBvbmx5IGluIHRoZSAneScgZGlyZWN0aW9uXG4gICAgICogICAtICdub25lJzogZGlzYWJsZSBzY3JvbGxpbmcgZm9yIHRoaXMgbm9kZVxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBkaXJlY3Rpb24gRGlyZWN0aW9uIHRvIGFsbG93IHNjcm9sbGluZ1xuICAgICAqIERlZmF1bHRzIHRvIGBhbGxgLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudD19IG5vZGUgRWxlbWVudCB0byBhcHBseSBzY3JvbGwgZGlyZWN0aW9uIHNldHRpbmcuXG4gICAgICogRGVmYXVsdHMgdG8gYHRoaXNgLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgc2V0U2Nyb2xsRGlyZWN0aW9uKGRpcmVjdGlvbiwgbm9kZSkge1xuICAgICAgc2V0VG91Y2hBY3Rpb24oXG4gICAgICAgICAgLyoqIEB0eXBlIHshRWxlbWVudH0gKi8gKG5vZGUgfHwgdGhpcyksXG4gICAgICAgICAgRElSRUNUSU9OX01BUFtkaXJlY3Rpb25dIHx8ICdhdXRvJyk7XG4gICAgfVxuICAgIC8qICoqKiogRW5kIEV2ZW50cyAqKioqICovXG5cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcnVuIGBxdWVyeVNlbGVjdG9yYCBvbiB0aGlzIGxvY2FsIERPTSBzY29wZS5cbiAgICAgKlxuICAgICAqIFRoaXMgZnVuY3Rpb24gY2FsbHMgYFBvbHltZXIuZG9tKHRoaXMucm9vdCkucXVlcnlTZWxlY3RvcihzbGN0cilgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNsY3RyIFNlbGVjdG9yIHRvIHJ1biBvbiB0aGlzIGxvY2FsIERPTSBzY29wZVxuICAgICAqIEByZXR1cm4ge0VsZW1lbnR9IEVsZW1lbnQgZm91bmQgYnkgdGhlIHNlbGVjdG9yLCBvciBudWxsIGlmIG5vdCBmb3VuZC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICAkJChzbGN0cikge1xuICAgICAgLy8gTm90ZSwgbm8gbmVlZCB0byBgd3JhcGAgdGhpcyBiZWNhdXNlIHJvb3QgaXMgYWx3YXlzIHBhdGNoZWRcbiAgICAgIHJldHVybiB0aGlzLnJvb3QucXVlcnlTZWxlY3RvcihzbGN0cik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJuIHRoZSBlbGVtZW50IHdob3NlIGxvY2FsIGRvbSB3aXRoaW4gd2hpY2ggdGhpcyBlbGVtZW50XG4gICAgICogaXMgY29udGFpbmVkLiBUaGlzIGlzIGEgc2hvcnRoYW5kIGZvclxuICAgICAqIGB0aGlzLmdldFJvb3ROb2RlKCkuaG9zdGAuXG4gICAgICogQHRoaXMge0VsZW1lbnR9XG4gICAgICogQHJldHVybiB7P05vZGV9IFRoZSBlbGVtZW50IHdob3NlIGxvY2FsIGRvbSB3aXRoaW4gd2hpY2ggdGhpcyBlbGVtZW50IGlzXG4gICAgICogY29udGFpbmVkLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGdldCBkb21Ib3N0KCkge1xuICAgICAgbGV0IHJvb3QgPSB3cmFwKHRoaXMpLmdldFJvb3ROb2RlKCk7XG4gICAgICByZXR1cm4gKHJvb3QgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KSA/IC8qKiBAdHlwZSB7U2hhZG93Um9vdH0gKi8gKHJvb3QpLmhvc3QgOiByb290O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZvcmNlIHRoaXMgZWxlbWVudCB0byBkaXN0cmlidXRlIGl0cyBjaGlsZHJlbiB0byBpdHMgbG9jYWwgZG9tLlxuICAgICAqIFRoaXMgc2hvdWxkIG5vdCBiZSBuZWNlc3NhcnkgYXMgb2YgUG9seW1lciAyLjAuMiBhbmQgaXMgcHJvdmlkZWQgb25seVxuICAgICAqIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eS5cbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGRpc3RyaWJ1dGVDb250ZW50KCkge1xuICAgICAgY29uc3QgdGhpc0VsID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAodGhpcyk7XG4gICAgICBjb25zdCBkb21BcGkgPSAvKiogQHR5cGUge1BvbHltZXJEb21BcGl9ICovKGRvbSh0aGlzRWwpKTtcbiAgICAgIGlmICh3aW5kb3cuU2hhZHlET00gJiYgZG9tQXBpLnNoYWRvd1Jvb3QpIHtcbiAgICAgICAgU2hhZHlET00uZmx1c2goKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbGlzdCBvZiBub2RlcyB0aGF0IGFyZSB0aGUgZWZmZWN0aXZlIGNoaWxkTm9kZXMuIFRoZSBlZmZlY3RpdmVcbiAgICAgKiBjaGlsZE5vZGVzIGxpc3QgaXMgdGhlIHNhbWUgYXMgdGhlIGVsZW1lbnQncyBjaGlsZE5vZGVzIGV4Y2VwdCB0aGF0XG4gICAgICogYW55IGA8Y29udGVudD5gIGVsZW1lbnRzIGFyZSByZXBsYWNlZCB3aXRoIHRoZSBsaXN0IG9mIG5vZGVzIGRpc3RyaWJ1dGVkXG4gICAgICogdG8gdGhlIGA8Y29udGVudD5gLCB0aGUgcmVzdWx0IG9mIGl0cyBgZ2V0RGlzdHJpYnV0ZWROb2Rlc2AgbWV0aG9kLlxuICAgICAqIEByZXR1cm4geyFBcnJheTwhTm9kZT59IExpc3Qgb2YgZWZmZWN0aXZlIGNoaWxkIG5vZGVzLlxuICAgICAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfSBMZWdhY3lFbGVtZW50TWl4aW4gbXVzdCBiZSBhcHBsaWVkIHRvIGFuXG4gICAgICogICAgIEhUTUxFbGVtZW50XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZ2V0RWZmZWN0aXZlQ2hpbGROb2RlcygpIHtcbiAgICAgIGNvbnN0IHRoaXNFbCA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKHRoaXMpO1xuICAgICAgY29uc3QgZG9tQXBpID0gLyoqIEB0eXBlIHtQb2x5bWVyRG9tQXBpfSAqLyAoZG9tKHRoaXNFbCkpO1xuICAgICAgcmV0dXJuIGRvbUFwaS5nZXRFZmZlY3RpdmVDaGlsZE5vZGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2Ygbm9kZXMgZGlzdHJpYnV0ZWQgd2l0aGluIHRoaXMgZWxlbWVudCB0aGF0IG1hdGNoXG4gICAgICogYHNlbGVjdG9yYC4gVGhlc2UgY2FuIGJlIGRvbSBjaGlsZHJlbiBvciBlbGVtZW50cyBkaXN0cmlidXRlZCB0b1xuICAgICAqIGNoaWxkcmVuIHRoYXQgYXJlIGluc2VydGlvbiBwb2ludHMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIFNlbGVjdG9yIHRvIHJ1bi5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8IU5vZGU+fSBMaXN0IG9mIGRpc3RyaWJ1dGVkIGVsZW1lbnRzIHRoYXQgbWF0Y2ggc2VsZWN0b3IuXG4gICAgICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9IExlZ2FjeUVsZW1lbnRNaXhpbiBtdXN0IGJlIGFwcGxpZWQgdG8gYW5cbiAgICAgKiBIVE1MRWxlbWVudFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHF1ZXJ5RGlzdHJpYnV0ZWRFbGVtZW50cyhzZWxlY3Rvcikge1xuICAgICAgY29uc3QgdGhpc0VsID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAodGhpcyk7XG4gICAgICBjb25zdCBkb21BcGkgPSAvKiogQHR5cGUge1BvbHltZXJEb21BcGl9ICovIChkb20odGhpc0VsKSk7XG4gICAgICByZXR1cm4gZG9tQXBpLnF1ZXJ5RGlzdHJpYnV0ZWRFbGVtZW50cyhzZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgZWxlbWVudHMgdGhhdCBhcmUgdGhlIGVmZmVjdGl2ZSBjaGlsZHJlbi4gVGhlIGVmZmVjdGl2ZVxuICAgICAqIGNoaWxkcmVuIGxpc3QgaXMgdGhlIHNhbWUgYXMgdGhlIGVsZW1lbnQncyBjaGlsZHJlbiBleGNlcHQgdGhhdFxuICAgICAqIGFueSBgPGNvbnRlbnQ+YCBlbGVtZW50cyBhcmUgcmVwbGFjZWQgd2l0aCB0aGUgbGlzdCBvZiBlbGVtZW50c1xuICAgICAqIGRpc3RyaWJ1dGVkIHRvIHRoZSBgPGNvbnRlbnQ+YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm4geyFBcnJheTwhTm9kZT59IExpc3Qgb2YgZWZmZWN0aXZlIGNoaWxkcmVuLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGdldEVmZmVjdGl2ZUNoaWxkcmVuKCkge1xuICAgICAgbGV0IGxpc3QgPSB0aGlzLmdldEVmZmVjdGl2ZUNoaWxkTm9kZXMoKTtcbiAgICAgIHJldHVybiBsaXN0LmZpbHRlcihmdW5jdGlvbigvKiogQHR5cGUgeyFOb2RlfSAqLyBuKSB7XG4gICAgICAgIHJldHVybiAobi5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyBvZiB0ZXh0IGNvbnRlbnQgdGhhdCBpcyB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcbiAgICAgKiB0ZXh0IGNvbnRlbnQncyBvZiB0aGUgZWxlbWVudCdzIGVmZmVjdGl2ZSBjaGlsZE5vZGVzICh0aGUgZWxlbWVudHNcbiAgICAgKiByZXR1cm5lZCBieSA8YSBocmVmPVwiI2dldEVmZmVjdGl2ZUNoaWxkTm9kZXM+Z2V0RWZmZWN0aXZlQ2hpbGROb2RlczwvYT4uXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IExpc3Qgb2YgZWZmZWN0aXZlIGNoaWxkcmVuLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGdldEVmZmVjdGl2ZVRleHRDb250ZW50KCkge1xuICAgICAgbGV0IGNuID0gdGhpcy5nZXRFZmZlY3RpdmVDaGlsZE5vZGVzKCk7XG4gICAgICBsZXQgdGMgPSBbXTtcbiAgICAgIGZvciAobGV0IGk9MCwgYzsgKGMgPSBjbltpXSk7IGkrKykge1xuICAgICAgICBpZiAoYy5ub2RlVHlwZSAhPT0gTm9kZS5DT01NRU5UX05PREUpIHtcbiAgICAgICAgICB0Yy5wdXNoKGMudGV4dENvbnRlbnQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdGMuam9pbignJyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgZmlyc3QgZWZmZWN0aXZlIGNoaWxkTm9kZSB3aXRoaW4gdGhpcyBlbGVtZW50IHRoYXRcbiAgICAgKiBtYXRjaCBgc2VsZWN0b3JgLiBUaGVzZSBjYW4gYmUgZG9tIGNoaWxkIG5vZGVzIG9yIGVsZW1lbnRzIGRpc3RyaWJ1dGVkXG4gICAgICogdG8gY2hpbGRyZW4gdGhhdCBhcmUgaW5zZXJ0aW9uIHBvaW50cy5cbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3IgU2VsZWN0b3IgdG8gcnVuLlxuICAgICAqIEByZXR1cm4ge05vZGV9IEZpcnN0IGVmZmVjdGl2ZSBjaGlsZCBub2RlIHRoYXQgbWF0Y2hlcyBzZWxlY3Rvci5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBxdWVyeUVmZmVjdGl2ZUNoaWxkcmVuKHNlbGVjdG9yKSB7XG4gICAgICBsZXQgZSQgPSB0aGlzLnF1ZXJ5RGlzdHJpYnV0ZWRFbGVtZW50cyhzZWxlY3Rvcik7XG4gICAgICByZXR1cm4gZSQgJiYgZSRbMF07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2YgZWZmZWN0aXZlIGNoaWxkTm9kZXMgd2l0aGluIHRoaXMgZWxlbWVudCB0aGF0XG4gICAgICogbWF0Y2ggYHNlbGVjdG9yYC4gVGhlc2UgY2FuIGJlIGRvbSBjaGlsZCBub2RlcyBvciBlbGVtZW50cyBkaXN0cmlidXRlZFxuICAgICAqIHRvIGNoaWxkcmVuIHRoYXQgYXJlIGluc2VydGlvbiBwb2ludHMuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIFNlbGVjdG9yIHRvIHJ1bi5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8IU5vZGU+fSBMaXN0IG9mIGVmZmVjdGl2ZSBjaGlsZCBub2RlcyB0aGF0IG1hdGNoXG4gICAgICogICAgIHNlbGVjdG9yLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHF1ZXJ5QWxsRWZmZWN0aXZlQ2hpbGRyZW4oc2VsZWN0b3IpIHtcbiAgICAgIHJldHVybiB0aGlzLnF1ZXJ5RGlzdHJpYnV0ZWRFbGVtZW50cyhzZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGxpc3Qgb2Ygbm9kZXMgZGlzdHJpYnV0ZWQgdG8gdGhpcyBlbGVtZW50J3MgYDxzbG90PmAuXG4gICAgICpcbiAgICAgKiBJZiB0aGlzIGVsZW1lbnQgY29udGFpbnMgbW9yZSB0aGFuIG9uZSBgPHNsb3Q+YCBpbiBpdHMgbG9jYWwgRE9NLFxuICAgICAqIGFuIG9wdGlvbmFsIHNlbGVjdG9yIG1heSBiZSBwYXNzZWQgdG8gY2hvb3NlIHRoZSBkZXNpcmVkIGNvbnRlbnQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IHNsY3RyIENTUyBzZWxlY3RvciB0byBjaG9vc2UgdGhlIGRlc2lyZWRcbiAgICAgKiAgIGA8c2xvdD5gLiAgRGVmYXVsdHMgdG8gYGNvbnRlbnRgLlxuICAgICAqIEByZXR1cm4geyFBcnJheTwhTm9kZT59IExpc3Qgb2YgZGlzdHJpYnV0ZWQgbm9kZXMgZm9yIHRoZSBgPHNsb3Q+YC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBnZXRDb250ZW50Q2hpbGROb2RlcyhzbGN0cikge1xuICAgICAgLy8gTm90ZSwgbm8gbmVlZCB0byBgd3JhcGAgdGhpcyBiZWNhdXNlIHJvb3QgaXMgYWx3YXlzXG4gICAgICBsZXQgY29udGVudCA9IHRoaXMucm9vdC5xdWVyeVNlbGVjdG9yKHNsY3RyIHx8ICdzbG90Jyk7XG4gICAgICByZXR1cm4gY29udGVudCA/XG4gICAgICAgICAgLyoqIEB0eXBlIHtQb2x5bWVyRG9tQXBpfSAqLyAoZG9tKGNvbnRlbnQpKS5nZXREaXN0cmlidXRlZE5vZGVzKCkgOlxuICAgICAgICAgIFtdO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBsaXN0IG9mIGVsZW1lbnQgY2hpbGRyZW4gZGlzdHJpYnV0ZWQgdG8gdGhpcyBlbGVtZW50J3NcbiAgICAgKiBgPHNsb3Q+YC5cbiAgICAgKlxuICAgICAqIElmIHRoaXMgZWxlbWVudCBjb250YWlucyBtb3JlIHRoYW4gb25lIGA8c2xvdD5gIGluIGl0c1xuICAgICAqIGxvY2FsIERPTSwgYW4gb3B0aW9uYWwgc2VsZWN0b3IgbWF5IGJlIHBhc3NlZCB0byBjaG9vc2UgdGhlIGRlc2lyZWRcbiAgICAgKiBjb250ZW50LiAgVGhpcyBtZXRob2QgZGlmZmVycyBmcm9tIGBnZXRDb250ZW50Q2hpbGROb2Rlc2AgaW4gdGhhdCBvbmx5XG4gICAgICogZWxlbWVudHMgYXJlIHJldHVybmVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBzbGN0ciBDU1Mgc2VsZWN0b3IgdG8gY2hvb3NlIHRoZSBkZXNpcmVkXG4gICAgICogICBgPGNvbnRlbnQ+YC4gIERlZmF1bHRzIHRvIGBjb250ZW50YC5cbiAgICAgKiBAcmV0dXJuIHshQXJyYXk8IUhUTUxFbGVtZW50Pn0gTGlzdCBvZiBkaXN0cmlidXRlZCBub2RlcyBmb3IgdGhlXG4gICAgICogICBgPHNsb3Q+YC5cbiAgICAgKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c31cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBnZXRDb250ZW50Q2hpbGRyZW4oc2xjdHIpIHtcbiAgICAgIGxldCBjaGlsZHJlbiA9IC8qKiBAdHlwZSB7IUFycmF5PCFIVE1MRWxlbWVudD59ICovKHRoaXMuZ2V0Q29udGVudENoaWxkTm9kZXMoc2xjdHIpLmZpbHRlcihmdW5jdGlvbihuKSB7XG4gICAgICAgIHJldHVybiAobi5ub2RlVHlwZSA9PT0gTm9kZS5FTEVNRU5UX05PREUpO1xuICAgICAgfSkpO1xuICAgICAgcmV0dXJuIGNoaWxkcmVuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENoZWNrcyB3aGV0aGVyIGFuIGVsZW1lbnQgaXMgaW4gdGhpcyBlbGVtZW50J3MgbGlnaHQgRE9NIHRyZWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gez9Ob2RlfSBub2RlIFRoZSBlbGVtZW50IHRvIGJlIGNoZWNrZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiBub2RlIGlzIGluIHRoaXMgZWxlbWVudCdzIGxpZ2h0IERPTSB0cmVlLlxuICAgICAqIEBzdXBwcmVzcyB7aW52YWxpZENhc3RzfSBMZWdhY3lFbGVtZW50TWl4aW4gbXVzdCBiZSBhcHBsaWVkIHRvIGFuXG4gICAgICogSFRNTEVsZW1lbnRcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBpc0xpZ2h0RGVzY2VuZGFudChub2RlKSB7XG4gICAgICBjb25zdCB0aGlzTm9kZSA9IC8qKiBAdHlwZSB7Tm9kZX0gKi8gKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXNOb2RlICE9PSBub2RlICYmIHdyYXAodGhpc05vZGUpLmNvbnRhaW5zKG5vZGUpICYmXG4gICAgICAgIHdyYXAodGhpc05vZGUpLmdldFJvb3ROb2RlKCkgPT09IHdyYXAobm9kZSkuZ2V0Um9vdE5vZGUoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDaGVja3Mgd2hldGhlciBhbiBlbGVtZW50IGlzIGluIHRoaXMgZWxlbWVudCdzIGxvY2FsIERPTSB0cmVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHshRWxlbWVudH0gbm9kZSBUaGUgZWxlbWVudCB0byBiZSBjaGVja2VkLlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IHRydWUgaWYgbm9kZSBpcyBpbiB0aGlzIGVsZW1lbnQncyBsb2NhbCBET00gdHJlZS5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBpc0xvY2FsRGVzY2VuZGFudChub2RlKSB7XG4gICAgICByZXR1cm4gdGhpcy5yb290ID09PSB3cmFwKG5vZGUpLmdldFJvb3ROb2RlKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTm8tb3AgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LiBUaGlzIHNob3VsZCBub3cgYmUgaGFuZGxlZCBieVxuICAgICAqIFNoYWR5Q3NzIGxpYnJhcnkuXG4gICAgICogQHBhcmFtICB7IUVsZW1lbnR9IGNvbnRhaW5lciBDb250YWluZXIgZWxlbWVudCB0byBzY29wZVxuICAgICAqIEBwYXJhbSAge2Jvb2xlYW49fSBzaG91bGRPYnNlcnZlIGlmIHRydWUsIHN0YXJ0IGEgbXV0YXRpb24gb2JzZXJ2ZXIgZm9yIGFkZGVkIG5vZGVzIHRvIHRoZSBjb250YWluZXJcbiAgICAgKiBAcmV0dXJuIHs/TXV0YXRpb25PYnNlcnZlcn0gUmV0dXJucyBhIG5ldyBNdXRhdGlvbk9ic2VydmVyIG9uIGBjb250YWluZXJgIGlmIGBzaG91bGRPYnNlcnZlYCBpcyB0cnVlLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHNjb3BlU3VidHJlZShjb250YWluZXIsIHNob3VsZE9ic2VydmUgPSBmYWxzZSkge1xuICAgICAgcmV0dXJuIHNjb3BlU3VidHJlZShjb250YWluZXIsIHNob3VsZE9ic2VydmUpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGNvbXB1dGVkIHN0eWxlIHZhbHVlIGZvciB0aGUgZ2l2ZW4gcHJvcGVydHkuXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFRoZSBjc3MgcHJvcGVydHkgbmFtZS5cbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFJldHVybnMgdGhlIGNvbXB1dGVkIGNzcyBwcm9wZXJ0eSB2YWx1ZSBmb3IgdGhlIGdpdmVuXG4gICAgICogYHByb3BlcnR5YC5cbiAgICAgKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c30gTGVnYWN5RWxlbWVudE1peGluIG11c3QgYmUgYXBwbGllZCB0byBhblxuICAgICAqICAgICBIVE1MRWxlbWVudFxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGdldENvbXB1dGVkU3R5bGVWYWx1ZShwcm9wZXJ0eSkge1xuICAgICAgcmV0dXJuIHN0eWxlSW50ZXJmYWNlLmdldENvbXB1dGVkU3R5bGVWYWx1ZSgvKiogQHR5cGUgeyFFbGVtZW50fSAqLyh0aGlzKSwgcHJvcGVydHkpO1xuICAgIH1cblxuICAgIC8vIGRlYm91bmNlXG5cbiAgICAvKipcbiAgICAgKiBDYWxsIGBkZWJvdW5jZWAgdG8gY29sbGFwc2UgbXVsdGlwbGUgcmVxdWVzdHMgZm9yIGEgbmFtZWQgdGFzayBpbnRvXG4gICAgICogb25lIGludm9jYXRpb24gd2hpY2ggaXMgbWFkZSBhZnRlciB0aGUgd2FpdCB0aW1lIGhhcyBlbGFwc2VkIHdpdGhcbiAgICAgKiBubyBuZXcgcmVxdWVzdC4gIElmIG5vIHdhaXQgdGltZSBpcyBnaXZlbiwgdGhlIGNhbGxiYWNrIHdpbGwgYmUgY2FsbGVkXG4gICAgICogYXQgbWljcm90YXNrIHRpbWluZyAoZ3VhcmFudGVlZCBiZWZvcmUgcGFpbnQpLlxuICAgICAqXG4gICAgICogICAgIGRlYm91bmNlZENsaWNrQWN0aW9uKGUpIHtcbiAgICAgKiAgICAgICAvLyB3aWxsIG5vdCBjYWxsIGBwcm9jZXNzQ2xpY2tgIG1vcmUgdGhhbiBvbmNlIHBlciAxMDBtc1xuICAgICAqICAgICAgIHRoaXMuZGVib3VuY2UoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgICogICAgICAgIHRoaXMucHJvY2Vzc0NsaWNrKCk7XG4gICAgICogICAgICAgfSAxMDApO1xuICAgICAqICAgICB9XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gam9iTmFtZSBTdHJpbmcgdG8gaWRlbnRpZnkgdGhlIGRlYm91bmNlIGpvYi5cbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCk6dm9pZH0gY2FsbGJhY2sgRnVuY3Rpb24gdGhhdCBpcyBjYWxsZWQgKHdpdGggYHRoaXNgXG4gICAgICogICBjb250ZXh0KSB3aGVuIHRoZSB3YWl0IHRpbWUgZWxhcHNlcy5cbiAgICAgKiBAcGFyYW0ge251bWJlcj19IHdhaXQgT3B0aW9uYWwgd2FpdCB0aW1lIGluIG1pbGxpc2Vjb25kcyAobXMpIGFmdGVyIHRoZVxuICAgICAqICAgbGFzdCBzaWduYWwgdGhhdCBtdXN0IGVsYXBzZSBiZWZvcmUgaW52b2tpbmcgYGNhbGxiYWNrYFxuICAgICAqIEByZXR1cm4geyFPYmplY3R9IFJldHVybnMgYSBkZWJvdW5jZXIgb2JqZWN0IG9uIHdoaWNoIGV4aXN0cyB0aGVcbiAgICAgKiBmb2xsb3dpbmcgbWV0aG9kczogYGlzQWN0aXZlKClgIHJldHVybnMgdHJ1ZSBpZiB0aGUgZGVib3VuY2VyIGlzXG4gICAgICogYWN0aXZlOyBgY2FuY2VsKClgIGNhbmNlbHMgdGhlIGRlYm91bmNlciBpZiBpdCBpcyBhY3RpdmU7XG4gICAgICogYGZsdXNoKClgIGltbWVkaWF0ZWx5IGludm9rZXMgdGhlIGRlYm91bmNlZCBjYWxsYmFjayBpZiB0aGUgZGVib3VuY2VyXG4gICAgICogaXMgYWN0aXZlLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGRlYm91bmNlKGpvYk5hbWUsIGNhbGxiYWNrLCB3YWl0KSB7XG4gICAgICB0aGlzLl9kZWJvdW5jZXJzID0gdGhpcy5fZGVib3VuY2VycyB8fCB7fTtcbiAgICAgIHJldHVybiB0aGlzLl9kZWJvdW5jZXJzW2pvYk5hbWVdID0gRGVib3VuY2VyLmRlYm91bmNlKFxuICAgICAgICAgICAgdGhpcy5fZGVib3VuY2Vyc1tqb2JOYW1lXVxuICAgICAgICAgICwgd2FpdCA+IDAgPyB0aW1lT3V0LmFmdGVyKHdhaXQpIDogbWljcm9UYXNrXG4gICAgICAgICAgLCBjYWxsYmFjay5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBuYW1lZCBkZWJvdW5jZXIgaXMgYWN0aXZlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGpvYk5hbWUgVGhlIG5hbWUgb2YgdGhlIGRlYm91bmNlciBzdGFydGVkIHdpdGggYGRlYm91bmNlYFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGRlYm91bmNlciBpcyBhY3RpdmUgKGhhcyBub3QgeWV0IGZpcmVkKS5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBpc0RlYm91bmNlckFjdGl2ZShqb2JOYW1lKSB7XG4gICAgICB0aGlzLl9kZWJvdW5jZXJzID0gdGhpcy5fZGVib3VuY2VycyB8fCB7fTtcbiAgICAgIGxldCBkZWJvdW5jZXIgPSB0aGlzLl9kZWJvdW5jZXJzW2pvYk5hbWVdO1xuICAgICAgcmV0dXJuICEhKGRlYm91bmNlciAmJiBkZWJvdW5jZXIuaXNBY3RpdmUoKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogSW1tZWRpYXRlbHkgY2FsbHMgdGhlIGRlYm91bmNlciBgY2FsbGJhY2tgIGFuZCBpbmFjdGl2YXRlcyBpdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqb2JOYW1lIFRoZSBuYW1lIG9mIHRoZSBkZWJvdW5jZXIgc3RhcnRlZCB3aXRoIGBkZWJvdW5jZWBcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGZsdXNoRGVib3VuY2VyKGpvYk5hbWUpIHtcbiAgICAgIHRoaXMuX2RlYm91bmNlcnMgPSB0aGlzLl9kZWJvdW5jZXJzIHx8IHt9O1xuICAgICAgbGV0IGRlYm91bmNlciA9IHRoaXMuX2RlYm91bmNlcnNbam9iTmFtZV07XG4gICAgICBpZiAoZGVib3VuY2VyKSB7XG4gICAgICAgIGRlYm91bmNlci5mbHVzaCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENhbmNlbHMgYW4gYWN0aXZlIGRlYm91bmNlci4gIFRoZSBgY2FsbGJhY2tgIHdpbGwgbm90IGJlIGNhbGxlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBqb2JOYW1lIFRoZSBuYW1lIG9mIHRoZSBkZWJvdW5jZXIgc3RhcnRlZCB3aXRoIGBkZWJvdW5jZWBcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGNhbmNlbERlYm91bmNlcihqb2JOYW1lKSB7XG4gICAgICB0aGlzLl9kZWJvdW5jZXJzID0gdGhpcy5fZGVib3VuY2VycyB8fCB7fTtcbiAgICAgIGxldCBkZWJvdW5jZXIgPSB0aGlzLl9kZWJvdW5jZXJzW2pvYk5hbWVdO1xuICAgICAgaWYgKGRlYm91bmNlcikge1xuICAgICAgICBkZWJvdW5jZXIuY2FuY2VsKCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUnVucyBhIGNhbGxiYWNrIGZ1bmN0aW9uIGFzeW5jaHJvbm91c2x5LlxuICAgICAqXG4gICAgICogQnkgZGVmYXVsdCAoaWYgbm8gd2FpdFRpbWUgaXMgc3BlY2lmaWVkKSwgYXN5bmMgY2FsbGJhY2tzIGFyZSBydW4gYXRcbiAgICAgKiBtaWNyb3Rhc2sgdGltaW5nLCB3aGljaCB3aWxsIG9jY3VyIGJlZm9yZSBwYWludC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7IUZ1bmN0aW9ufSBjYWxsYmFjayBUaGUgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcnVuLCBib3VuZCB0b1xuICAgICAqICAgICBgdGhpc2AuXG4gICAgICogQHBhcmFtIHtudW1iZXI9fSB3YWl0VGltZSBUaW1lIHRvIHdhaXQgYmVmb3JlIGNhbGxpbmcgdGhlXG4gICAgICogICBgY2FsbGJhY2tgLiAgSWYgdW5zcGVjaWZpZWQgb3IgMCwgdGhlIGNhbGxiYWNrIHdpbGwgYmUgcnVuIGF0IG1pY3JvdGFza1xuICAgICAqICAgdGltaW5nIChiZWZvcmUgcGFpbnQpLlxuICAgICAqIEByZXR1cm4ge251bWJlcn0gSGFuZGxlIHRoYXQgbWF5IGJlIHVzZWQgdG8gY2FuY2VsIHRoZSBhc3luYyBqb2IuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgYXN5bmMoY2FsbGJhY2ssIHdhaXRUaW1lKSB7XG4gICAgICByZXR1cm4gd2FpdFRpbWUgPiAwID8gdGltZU91dC5ydW4oY2FsbGJhY2suYmluZCh0aGlzKSwgd2FpdFRpbWUpIDpcbiAgICAgICAgICB+bWljcm9UYXNrLnJ1bihjYWxsYmFjay5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDYW5jZWxzIGFuIGFzeW5jIG9wZXJhdGlvbiBzdGFydGVkIHdpdGggYGFzeW5jYC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoYW5kbGUgSGFuZGxlIHJldHVybmVkIGZyb20gb3JpZ2luYWwgYGFzeW5jYCBjYWxsIHRvXG4gICAgICogICBjYW5jZWwuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBjYW5jZWxBc3luYyhoYW5kbGUpIHtcbiAgICAgIGhhbmRsZSA8IDAgPyBtaWNyb1Rhc2suY2FuY2VsKH5oYW5kbGUpIDpcbiAgICAgICAgICB0aW1lT3V0LmNhbmNlbChoYW5kbGUpO1xuICAgIH1cblxuICAgIC8vIG90aGVyXG5cbiAgICAvKipcbiAgICAgKiBDb252ZW5pZW5jZSBtZXRob2QgZm9yIGNyZWF0aW5nIGFuIGVsZW1lbnQgYW5kIGNvbmZpZ3VyaW5nIGl0LlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHRhZyBIVE1MIGVsZW1lbnQgdGFnIHRvIGNyZWF0ZS5cbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHByb3BzIE9iamVjdCBvZiBwcm9wZXJ0aWVzIHRvIGNvbmZpZ3VyZSBvbiB0aGVcbiAgICAgKiAgICBpbnN0YW5jZS5cbiAgICAgKiBAcmV0dXJuIHshRWxlbWVudH0gTmV3bHkgY3JlYXRlZCBhbmQgY29uZmlndXJlZCBlbGVtZW50LlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIGNyZWF0ZSh0YWcsIHByb3BzKSB7XG4gICAgICBsZXQgZWx0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgICAgaWYgKHByb3BzKSB7XG4gICAgICAgIGlmIChlbHQuc2V0UHJvcGVydGllcykge1xuICAgICAgICAgIGVsdC5zZXRQcm9wZXJ0aWVzKHByb3BzKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmb3IgKGxldCBuIGluIHByb3BzKSB7XG4gICAgICAgICAgICBlbHRbbl0gPSBwcm9wc1tuXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBlbHQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUG9seWZpbGwgZm9yIEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXMsIHdoaWNoIGlzIHNvbWV0aW1lcyBzdGlsbFxuICAgICAqIHByZWZpeGVkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHNlbGVjdG9yIFNlbGVjdG9yIHRvIHRlc3QuXG4gICAgICogQHBhcmFtIHshRWxlbWVudD19IG5vZGUgRWxlbWVudCB0byB0ZXN0IHRoZSBzZWxlY3RvciBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGVsZW1lbnQgbWF0Y2hlcyB0aGUgc2VsZWN0b3IuXG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgZWxlbWVudE1hdGNoZXMoc2VsZWN0b3IsIG5vZGUpIHtcbiAgICAgIHJldHVybiBtYXRjaGVzU2VsZWN0b3IoIChub2RlIHx8IHRoaXMpLCBzZWxlY3Rvcik7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyBhbiBIVE1MIGF0dHJpYnV0ZSBvbiBvciBvZmYuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBIVE1MIGF0dHJpYnV0ZSBuYW1lXG4gICAgICogQHBhcmFtIHtib29sZWFuPX0gYm9vbCBCb29sZWFuIHRvIGZvcmNlIHRoZSBhdHRyaWJ1dGUgb24gb3Igb2ZmLlxuICAgICAqICAgIFdoZW4gdW5zcGVjaWZpZWQsIHRoZSBzdGF0ZSBvZiB0aGUgYXR0cmlidXRlIHdpbGwgYmUgcmV2ZXJzZWQuXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gdHJ1ZSBpZiB0aGUgYXR0cmlidXRlIG5vdyBleGlzdHNcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICB0b2dnbGVBdHRyaWJ1dGUobmFtZSwgYm9vbCkge1xuICAgICAgbGV0IG5vZGUgPSAvKiogQHR5cGUge0VsZW1lbnR9ICovKHRoaXMpO1xuICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgbm9kZSA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8oYXJndW1lbnRzWzJdKTtcbiAgICAgIH1cbiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcbiAgICAgICAgYm9vbCA9ICFub2RlLmhhc0F0dHJpYnV0ZShuYW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChib29sKSB7XG4gICAgICAgIHdyYXAobm9kZSkuc2V0QXR0cmlidXRlKG5hbWUsICcnKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cmFwKG5vZGUpLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogVG9nZ2xlcyBhIENTUyBjbGFzcyBvbiBvciBvZmYuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZSBDU1MgY2xhc3MgbmFtZVxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbj19IGJvb2wgQm9vbGVhbiB0byBmb3JjZSB0aGUgY2xhc3Mgb24gb3Igb2ZmLlxuICAgICAqICAgIFdoZW4gdW5zcGVjaWZpZWQsIHRoZSBzdGF0ZSBvZiB0aGUgY2xhc3Mgd2lsbCBiZSByZXZlcnNlZC5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnQ9fSBub2RlIE5vZGUgdG8gdGFyZ2V0LiAgRGVmYXVsdHMgdG8gYHRoaXNgLlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgdG9nZ2xlQ2xhc3MobmFtZSwgYm9vbCwgbm9kZSkge1xuICAgICAgbm9kZSA9IC8qKiBAdHlwZSB7RWxlbWVudH0gKi8gKG5vZGUgfHwgdGhpcyk7XG4gICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxKSB7XG4gICAgICAgIGJvb2wgPSAhbm9kZS5jbGFzc0xpc3QuY29udGFpbnMobmFtZSk7XG4gICAgICB9XG4gICAgICBpZiAoYm9vbCkge1xuICAgICAgICBub2RlLmNsYXNzTGlzdC5hZGQobmFtZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBub2RlLmNsYXNzTGlzdC5yZW1vdmUobmFtZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3Jvc3MtcGxhdGZvcm0gaGVscGVyIGZvciBzZXR0aW5nIGFuIGVsZW1lbnQncyBDU1MgYHRyYW5zZm9ybWAgcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdHJhbnNmb3JtVGV4dCBUcmFuc2Zvcm0gc2V0dGluZy5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnQ9fSBub2RlIEVsZW1lbnQgdG8gYXBwbHkgdGhlIHRyYW5zZm9ybSB0by5cbiAgICAgKiBEZWZhdWx0cyB0byBgdGhpc2BcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIHRyYW5zZm9ybSh0cmFuc2Zvcm1UZXh0LCBub2RlKSB7XG4gICAgICBub2RlID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAobm9kZSB8fCB0aGlzKTtcbiAgICAgIG5vZGUuc3R5bGUud2Via2l0VHJhbnNmb3JtID0gdHJhbnNmb3JtVGV4dDtcbiAgICAgIG5vZGUuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtVGV4dDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcm9zcy1wbGF0Zm9ybSBoZWxwZXIgZm9yIHNldHRpbmcgYW4gZWxlbWVudCdzIENTUyBgdHJhbnNsYXRlM2RgXG4gICAgICogcHJvcGVydHkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IHggWCBvZmZzZXQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ8c3RyaW5nfSB5IFkgb2Zmc2V0LlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfHN0cmluZ30geiBaIG9mZnNldC5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnQ9fSBub2RlIEVsZW1lbnQgdG8gYXBwbHkgdGhlIHRyYW5zZm9ybSB0by5cbiAgICAgKiBEZWZhdWx0cyB0byBgdGhpc2AuXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICB0cmFuc2xhdGUzZCh4LCB5LCB6LCBub2RlKSB7XG4gICAgICBub2RlID0gLyoqIEB0eXBlIHtFbGVtZW50fSAqLyAobm9kZSB8fCB0aGlzKTtcbiAgICAgIHRoaXMudHJhbnNmb3JtKCd0cmFuc2xhdGUzZCgnICsgeCArICcsJyArIHkgKyAnLCcgKyB6ICsgJyknLCBub2RlKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIGFuIGl0ZW0gZnJvbSBhbiBhcnJheSwgaWYgaXQgZXhpc3RzLlxuICAgICAqXG4gICAgICogSWYgdGhlIGFycmF5IGlzIHNwZWNpZmllZCBieSBwYXRoLCBhIGNoYW5nZSBub3RpZmljYXRpb24gaXNcbiAgICAgKiBnZW5lcmF0ZWQsIHNvIHRoYXQgb2JzZXJ2ZXJzLCBkYXRhIGJpbmRpbmdzIGFuZCBjb21wdXRlZFxuICAgICAqIHByb3BlcnRpZXMgd2F0Y2hpbmcgdGhhdCBwYXRoIGNhbiB1cGRhdGUuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgYXJyYXkgaXMgcGFzc2VkIGRpcmVjdGx5LCAqKm5vIGNoYW5nZVxuICAgICAqIG5vdGlmaWNhdGlvbiBpcyBnZW5lcmF0ZWQqKi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nIHwgIUFycmF5PG51bWJlcnxzdHJpbmc+fSBhcnJheU9yUGF0aCBQYXRoIHRvIGFycmF5IGZyb21cbiAgICAgKiAgICAgd2hpY2ggdG8gcmVtb3ZlIHRoZSBpdGVtXG4gICAgICogICAob3IgdGhlIGFycmF5IGl0c2VsZikuXG4gICAgICogQHBhcmFtIHsqfSBpdGVtIEl0ZW0gdG8gcmVtb3ZlLlxuICAgICAqIEByZXR1cm4ge0FycmF5fSBBcnJheSBjb250YWluaW5nIGl0ZW0gcmVtb3ZlZC5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBhcnJheURlbGV0ZShhcnJheU9yUGF0aCwgaXRlbSkge1xuICAgICAgbGV0IGluZGV4O1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyYXlPclBhdGgpKSB7XG4gICAgICAgIGluZGV4ID0gYXJyYXlPclBhdGguaW5kZXhPZihpdGVtKTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICByZXR1cm4gYXJyYXlPclBhdGguc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGV0IGFyciA9IGdldCh0aGlzLCBhcnJheU9yUGF0aCk7XG4gICAgICAgIGluZGV4ID0gYXJyLmluZGV4T2YoaXRlbSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaWNlKGFycmF5T3JQYXRoLCBpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIGxvZ2dpbmdcblxuICAgIC8qKlxuICAgICAqIEZhY2FkZXMgYGNvbnNvbGUubG9nYC9gd2FybmAvYGVycm9yYCBhcyBvdmVycmlkZSBwb2ludC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsZXZlbCBPbmUgb2YgJ2xvZycsICd3YXJuJywgJ2Vycm9yJ1xuICAgICAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgQXJyYXkgb2Ygc3RyaW5ncyBvciBvYmplY3RzIHRvIGxvZ1xuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICogQG92ZXJyaWRlXG4gICAgICovXG4gICAgX2xvZ2dlcihsZXZlbCwgYXJncykge1xuICAgICAgLy8gYWNjZXB0IFsnZm9vJywgJ2JhciddIGFuZCBbWydmb28nLCAnYmFyJ11dXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShhcmdzKSAmJiBhcmdzLmxlbmd0aCA9PT0gMSAmJiBBcnJheS5pc0FycmF5KGFyZ3NbMF0pKSB7XG4gICAgICAgIGFyZ3MgPSBhcmdzWzBdO1xuICAgICAgfVxuICAgICAgc3dpdGNoKGxldmVsKSB7XG4gICAgICAgIGNhc2UgJ2xvZyc6XG4gICAgICAgIGNhc2UgJ3dhcm4nOlxuICAgICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgICAgY29uc29sZVtsZXZlbF0oLi4uYXJncyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRmFjYWRlcyBgY29uc29sZS5sb2dgIGFzIGFuIG92ZXJyaWRlIHBvaW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIEFycmF5IG9mIHN0cmluZ3Mgb3Igb2JqZWN0cyB0byBsb2dcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9sb2coLi4uYXJncykge1xuICAgICAgdGhpcy5fbG9nZ2VyKCdsb2cnLCBhcmdzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBGYWNhZGVzIGBjb25zb2xlLndhcm5gIGFzIGFuIG92ZXJyaWRlIHBvaW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIEFycmF5IG9mIHN0cmluZ3Mgb3Igb2JqZWN0cyB0byBsb2dcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF93YXJuKC4uLmFyZ3MpIHtcbiAgICAgIHRoaXMuX2xvZ2dlcignd2FybicsIGFyZ3MpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZhY2FkZXMgYGNvbnNvbGUuZXJyb3JgIGFzIGFuIG92ZXJyaWRlIHBvaW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIHsuLi4qfSBhcmdzIEFycmF5IG9mIHN0cmluZ3Mgb3Igb2JqZWN0cyB0byBsb2dcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqIEBvdmVycmlkZVxuICAgICAqL1xuICAgIF9lcnJvciguLi5hcmdzKSB7XG4gICAgICB0aGlzLl9sb2dnZXIoJ2Vycm9yJywgYXJncyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRm9ybWF0cyBhIG1lc3NhZ2UgdXNpbmcgdGhlIGVsZW1lbnQgdHlwZSBhbiBhIG1ldGhvZCBuYW1lLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IG1ldGhvZE5hbWUgTWV0aG9kIG5hbWUgdG8gYXNzb2NpYXRlIHdpdGggbWVzc2FnZVxuICAgICAqIEBwYXJhbSB7Li4uKn0gYXJncyBBcnJheSBvZiBzdHJpbmdzIG9yIG9iamVjdHMgdG8gbG9nXG4gICAgICogQHJldHVybiB7IUFycmF5fSBBcnJheSB3aXRoIGZvcm1hdHRpbmcgaW5mb3JtYXRpb24gZm9yIGBjb25zb2xlYFxuICAgICAqICAgbG9nZ2luZy5cbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKi9cbiAgICBfbG9nZihtZXRob2ROYW1lLCAuLi5hcmdzKSB7XG4gICAgICByZXR1cm4gWydbJXM6OiVzXScsIHRoaXMuaXMsIG1ldGhvZE5hbWUsIC4uLmFyZ3NdO1xuICAgIH1cblxuICB9XG5cbiAgTGVnYWN5RWxlbWVudC5wcm90b3R5cGUuaXMgPSAnJztcblxuICByZXR1cm4gTGVnYWN5RWxlbWVudDtcbn0pO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbmltcG9ydCB7IExlZ2FjeUVsZW1lbnRNaXhpbiB9IGZyb20gJy4vbGVnYWN5LWVsZW1lbnQtbWl4aW4uanMnO1xuaW1wb3J0IHsgbGVnYWN5T3B0aW1pemF0aW9ucyB9IGZyb20gJy4uL3V0aWxzL3NldHRpbmdzLmpzJztcblxuY29uc3QgbGlmZWN5Y2xlUHJvcHMgPSB7XG4gIGF0dGFjaGVkOiB0cnVlLFxuICBkZXRhY2hlZDogdHJ1ZSxcbiAgcmVhZHk6IHRydWUsXG4gIGNyZWF0ZWQ6IHRydWUsXG4gIGJlZm9yZVJlZ2lzdGVyOiB0cnVlLFxuICByZWdpc3RlcmVkOiB0cnVlLFxuICBhdHRyaWJ1dGVDaGFuZ2VkOiB0cnVlLFxuICBsaXN0ZW5lcnM6IHRydWUsXG4gIGhvc3RBdHRyaWJ1dGVzOiB0cnVlXG59O1xuXG5jb25zdCBleGNsdWRlT25JbmZvID0ge1xuICBhdHRhY2hlZDogdHJ1ZSxcbiAgZGV0YWNoZWQ6IHRydWUsXG4gIHJlYWR5OiB0cnVlLFxuICBjcmVhdGVkOiB0cnVlLFxuICBiZWZvcmVSZWdpc3RlcjogdHJ1ZSxcbiAgcmVnaXN0ZXJlZDogdHJ1ZSxcbiAgYXR0cmlidXRlQ2hhbmdlZDogdHJ1ZSxcbiAgYmVoYXZpb3JzOiB0cnVlLFxuICBfbm9BY2Nlc3NvcnM6IHRydWVcbn07XG5cbmNvbnN0IGV4Y2x1ZGVPbkJlaGF2aW9ycyA9IE9iamVjdC5hc3NpZ24oe1xuICBsaXN0ZW5lcnM6IHRydWUsXG4gIGhvc3RBdHRyaWJ1dGVzOiB0cnVlLFxuICBwcm9wZXJ0aWVzOiB0cnVlLFxuICBvYnNlcnZlcnM6IHRydWUsXG59LCBleGNsdWRlT25JbmZvKTtcblxuZnVuY3Rpb24gY29weVByb3BlcnRpZXMoc291cmNlLCB0YXJnZXQsIGV4Y2x1ZGVQcm9wcykge1xuICBjb25zdCBub0FjY2Vzc29ycyA9IHNvdXJjZS5fbm9BY2Nlc3NvcnM7XG4gIGNvbnN0IHByb3BlcnR5TmFtZXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2UpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHByb3BlcnR5TmFtZXMubGVuZ3RoOyBpKyspIHtcbiAgICBsZXQgcCA9IHByb3BlcnR5TmFtZXNbaV07XG4gICAgaWYgKHAgaW4gZXhjbHVkZVByb3BzKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgaWYgKG5vQWNjZXNzb3JzKSB7XG4gICAgICB0YXJnZXRbcF0gPSBzb3VyY2VbcF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGxldCBwZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioc291cmNlLCBwKTtcbiAgICAgIGlmIChwZCkge1xuICAgICAgICAvLyBlbnN1cmUgcHJvcGVydHkgaXMgY29uZmlndXJhYmxlIHNvIHRoYXQgYSBsYXRlciBiZWhhdmlvciBjYW5cbiAgICAgICAgLy8gcmUtY29uZmlndXJlIGl0LlxuICAgICAgICBwZC5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBwLCBwZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQXBwbGllcyBhIFwibGVnYWN5XCIgYmVoYXZpb3Igb3IgYXJyYXkgb2YgYmVoYXZpb3JzIHRvIHRoZSBwcm92aWRlZCBjbGFzcy5cbiAqXG4gKiBOb3RlOiB0aGlzIG1ldGhvZCB3aWxsIGF1dG9tYXRpY2FsbHkgYWxzbyBhcHBseSB0aGUgYExlZ2FjeUVsZW1lbnRNaXhpbmBcbiAqIHRvIGVuc3VyZSB0aGF0IGFueSBsZWdhY3kgYmVoYXZpb3JzIGNhbiByZWx5IG9uIGxlZ2FjeSBQb2x5bWVyIEFQSSBvblxuICogdGhlIHVuZGVybHlpbmcgZWxlbWVudC5cbiAqXG4gKiBAZnVuY3Rpb25cbiAqIEB0ZW1wbGF0ZSBUXG4gKiBAcGFyYW0geyFPYmplY3R8IUFycmF5PCFPYmplY3Q+fSBiZWhhdmlvcnMgQmVoYXZpb3Igb2JqZWN0IG9yIGFycmF5IG9mIGJlaGF2aW9ycy5cbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OlQpfSBrbGFzcyBFbGVtZW50IGNsYXNzLlxuICogQHJldHVybiB7P30gUmV0dXJucyBhIG5ldyBFbGVtZW50IGNsYXNzIGV4dGVuZGVkIGJ5IHRoZVxuICogcGFzc2VkIGluIGBiZWhhdmlvcnNgIGFuZCBhbHNvIGJ5IGBMZWdhY3lFbGVtZW50TWl4aW5gLlxuICogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHMsIGNoZWNrVHlwZXN9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtaXhpbkJlaGF2aW9ycyhiZWhhdmlvcnMsIGtsYXNzKSB7XG4gIHJldHVybiBHZW5lcmF0ZUNsYXNzRnJvbUluZm8oe30sIExlZ2FjeUVsZW1lbnRNaXhpbihrbGFzcyksIGJlaGF2aW9ycyk7XG59XG5cbi8vIE5PVEU6XG4vLyAxLnhcbi8vIEJlaGF2aW9ycyB3ZXJlIG1peGVkIGluICppbiByZXZlcnNlIG9yZGVyKiBhbmQgZGUtZHVwZWQgb24gdGhlIGZseS5cbi8vIFRoZSBydWxlIHdhcyB0aGF0IGJlaGF2aW9yIHByb3BlcnRpZXMgd2VyZSBjb3BpZWQgb250byB0aGUgZWxlbWVudFxuLy8gcHJvdG90eXBlIGlmIGFuZCBvbmx5IGlmIHRoZSBwcm9wZXJ0eSBkaWQgbm90IGFscmVhZHkgZXhpc3QuXG4vLyBHaXZlbjogUG9seW1lcnsgYmVoYXZpb3JzOiBbQSwgQiwgQywgQSwgQl19LCBwcm9wZXJ0eSBjb3B5IG9yZGVyIHdhczpcbi8vICgxKSwgQiwgKDIpLCBBLCAoMykgQy4gVGhpcyBtZWFucyBwcm90b3R5cGUgcHJvcGVydGllcyB3aW4gb3ZlclxuLy8gQiBwcm9wZXJ0aWVzIHdpbiBvdmVyIEEgd2luIG92ZXIgQy4gVGhpcyBtaXJyb3JzIHdoYXQgd291bGQgaGFwcGVuXG4vLyB3aXRoIGluaGVyaXRhbmNlIGlmIGVsZW1lbnQgZXh0ZW5kZWQgQiBleHRlbmRlZCBBIGV4dGVuZGVkIEMuXG4vL1xuLy8gQWdhaW4gZ2l2ZW4sIFBvbHltZXJ7IGJlaGF2aW9yczogW0EsIEIsIEMsIEEsIEJdfSwgdGhlIHJlc3VsdGluZ1xuLy8gYGJlaGF2aW9yc2AgYXJyYXkgd2FzIFtDLCBBLCBCXS5cbi8vIEJlaGF2aW9yIGxpZmVjeWNsZSBtZXRob2RzIHdlcmUgY2FsbGVkIGluIGJlaGF2aW9yIGFycmF5IG9yZGVyXG4vLyBmb2xsb3dlZCBieSB0aGUgZWxlbWVudCwgZS5nLiAoMSkgQy5jcmVhdGVkLCAoMikgQS5jcmVhdGVkLFxuLy8gKDMpIEIuY3JlYXRlZCwgKDQpIGVsZW1lbnQuY3JlYXRlZC4gVGhlcmUgd2FzIG5vIHN1cHBvcnQgZm9yXG4vLyBzdXBlciwgYW5kIFwic3VwZXItYmVoYXZpb3JcIiBtZXRob2RzIHdlcmUgY2FsbGFibGUgb25seSBieSBuYW1lKS5cbi8vXG4vLyAyLnhcbi8vIEJlaGF2aW9ycyBhcmUgbWFkZSBpbnRvIHByb3BlciBtaXhpbnMgd2hpY2ggbGl2ZSBpbiB0aGVcbi8vIGVsZW1lbnQncyBwcm90b3R5cGUgY2hhaW4uIEJlaGF2aW9ycyBhcmUgcGxhY2VkIGluIHRoZSBlbGVtZW50IHByb3RvdHlwZVxuLy8gZWxkZXN0IHRvIHlvdW5nZXN0IGFuZCBkZS1kdXBlZCB5b3VuZ2VzdCB0byBvbGRlc3Q6XG4vLyBTbywgZmlyc3QgW0EsIEIsIEMsIEEsIEJdIGJlY29tZXMgW0MsIEEsIEJdIHRoZW4sXG4vLyB0aGUgZWxlbWVudCBwcm90b3R5cGUgYmVjb21lcyAob2xkZXN0KSAoMSkgUG9seW1lckVsZW1lbnQsICgyKSBjbGFzcyhDKSxcbi8vICgzKSBjbGFzcyhBKSwgKDQpIGNsYXNzKEIpLCAoNSkgY2xhc3MoUG9seW1lcih7Li4ufSkpLlxuLy8gUmVzdWx0OlxuLy8gVGhpcyBtZWFucyBlbGVtZW50IHByb3BlcnRpZXMgd2luIG92ZXIgQiBwcm9wZXJ0aWVzIHdpbiBvdmVyIEEgd2luXG4vLyBvdmVyIEMuIChzYW1lIGFzIDEueClcbi8vIElmIGxpZmVjeWNsZSBpcyBjYWxsZWQgKHN1cGVyIHRoZW4gbWUpLCBvcmRlciBpc1xuLy8gKDEpIEMuY3JlYXRlZCwgKDIpIEEuY3JlYXRlZCwgKDMpIEIuY3JlYXRlZCwgKDQpIGVsZW1lbnQuY3JlYXRlZFxuLy8gKGFnYWluIHNhbWUgYXMgMS54KVxuZnVuY3Rpb24gYXBwbHlCZWhhdmlvcnMocHJvdG8sIGJlaGF2aW9ycywgbGlmZWN5Y2xlKSB7XG4gIGZvciAobGV0IGk9MDsgaTxiZWhhdmlvcnMubGVuZ3RoOyBpKyspIHtcbiAgICBhcHBseUluZm8ocHJvdG8sIGJlaGF2aW9yc1tpXSwgbGlmZWN5Y2xlLCBleGNsdWRlT25CZWhhdmlvcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5SW5mbyhwcm90bywgaW5mbywgbGlmZWN5Y2xlLCBleGNsdWRlUHJvcHMpIHtcbiAgY29weVByb3BlcnRpZXMoaW5mbywgcHJvdG8sIGV4Y2x1ZGVQcm9wcyk7XG4gIGZvciAobGV0IHAgaW4gbGlmZWN5Y2xlUHJvcHMpIHtcbiAgICBpZiAoaW5mb1twXSkge1xuICAgICAgbGlmZWN5Y2xlW3BdID0gbGlmZWN5Y2xlW3BdIHx8IFtdO1xuICAgICAgbGlmZWN5Y2xlW3BdLnB1c2goaW5mb1twXSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBhcmFtIHtBcnJheX0gYmVoYXZpb3JzIExpc3Qgb2YgYmVoYXZpb3JzIHRvIGZsYXR0ZW4uXG4gKiBAcGFyYW0ge0FycmF5PX0gbGlzdCBUYXJnZXQgbGlzdCB0byBmbGF0dGVuIGJlaGF2aW9ycyBpbnRvLlxuICogQHBhcmFtIHtBcnJheT19IGV4Y2x1ZGUgTGlzdCBvZiBiZWhhdmlvcnMgdG8gZXhjbHVkZSBmcm9tIHRoZSBsaXN0LlxuICogQHJldHVybiB7IUFycmF5fSBSZXR1cm5zIHRoZSBsaXN0IG9mIGZsYXR0ZW5lZCBiZWhhdmlvcnMuXG4gKi9cbmZ1bmN0aW9uIGZsYXR0ZW5CZWhhdmlvcnMoYmVoYXZpb3JzLCBsaXN0LCBleGNsdWRlKSB7XG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICBmb3IgKGxldCBpPWJlaGF2aW9ycy5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBsZXQgYiA9IGJlaGF2aW9yc1tpXTtcbiAgICBpZiAoYikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYikpIHtcbiAgICAgICAgZmxhdHRlbkJlaGF2aW9ycyhiLCBsaXN0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIGRlZHVwXG4gICAgICAgIGlmIChsaXN0LmluZGV4T2YoYikgPCAwICYmICghZXhjbHVkZSB8fCBleGNsdWRlLmluZGV4T2YoYikgPCAwKSkge1xuICAgICAgICAgIGxpc3QudW5zaGlmdChiKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLndhcm4oJ2JlaGF2aW9yIGlzIG51bGwsIGNoZWNrIGZvciBtaXNzaW5nIG9yIDQwNCBpbXBvcnQnKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGxpc3Q7XG59XG5cbi8qKlxuICogQ29waWVzIHByb3BlcnR5IGRlc2NyaXB0b3JzIGZyb20gc291cmNlIHRvIHRhcmdldCwgb3ZlcndyaXRpbmcgYWxsIGZpZWxkc1xuICogb2YgYW55IHByZXZpb3VzIGRlc2NyaXB0b3IgZm9yIGEgcHJvcGVydHkgKmV4Y2VwdCogZm9yIGB2YWx1ZWAsIHdoaWNoIGlzXG4gKiBtZXJnZWQgaW4gZnJvbSB0aGUgdGFyZ2V0IGlmIGl0IGRvZXMgbm90IGV4aXN0IG9uIHRoZSBzb3VyY2UuXG4gKlxuICogQHBhcmFtIHsqfSB0YXJnZXQgVGFyZ2V0IHByb3BlcnRpZXMgb2JqZWN0XG4gKiBAcGFyYW0geyp9IHNvdXJjZSBTb3VyY2UgcHJvcGVydGllcyBvYmplY3RcbiAqL1xuZnVuY3Rpb24gbWVyZ2VQcm9wZXJ0aWVzKHRhcmdldCwgc291cmNlKSB7XG4gIGZvciAoY29uc3QgcCBpbiBzb3VyY2UpIHtcbiAgICBjb25zdCB0YXJnZXRJbmZvID0gdGFyZ2V0W3BdO1xuICAgIGNvbnN0IHNvdXJjZUluZm8gPSBzb3VyY2VbcF07XG4gICAgaWYgKCEoJ3ZhbHVlJyBpbiBzb3VyY2VJbmZvKSAmJiB0YXJnZXRJbmZvICYmICgndmFsdWUnIGluIHRhcmdldEluZm8pKSB7XG4gICAgICB0YXJnZXRbcF0gPSBPYmplY3QuYXNzaWduKHt2YWx1ZTogdGFyZ2V0SW5mby52YWx1ZX0sIHNvdXJjZUluZm8pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0YXJnZXRbcF0gPSBzb3VyY2VJbmZvO1xuICAgIH1cbiAgfVxufVxuXG5jb25zdCBMZWdhY3lFbGVtZW50ID0gTGVnYWN5RWxlbWVudE1peGluKEhUTUxFbGVtZW50KTtcblxuLyogTm90ZSBhYm91dCBjb25zdHJ1Y3Rpb24gYW5kIGV4dGVuc2lvbiBvZiBsZWdhY3kgY2xhc3Nlcy5cbiAgW0NoYW5nZWQgaW4gUTQgMjAxOCB0byBvcHRpbWl6ZSBwZXJmb3JtYW5jZS5dXG5cbiAgV2hlbiBjYWxsaW5nIGBQb2x5bWVyYCBvciBgbWl4aW5CZWhhdmlvcnNgLCB0aGUgZ2VuZXJhdGVkIGNsYXNzIGJlbG93IGlzXG4gIG1hZGUuIFRoZSBsaXN0IG9mIGJlaGF2aW9ycyB3YXMgcHJldmlvdXNseSBtYWRlIGludG8gb25lIGdlbmVyYXRlZCBjbGFzcyBwZXJcbiAgYmVoYXZpb3IsIGJ1dCB0aGlzIGlzIG5vIGxvbmdlciB0aGUgY2FzZSBhcyBiZWhhdmlvcnMgYXJlIG5vdyBjYWxsZWRcbiAgbWFudWFsbHkuIE5vdGUsIHRoZXJlIG1heSAqc3RpbGwqIGJlIG11bHRpcGxlIGdlbmVyYXRlZCBjbGFzc2VzIGluIHRoZVxuICBlbGVtZW50J3MgcHJvdG90eXBlIGNoYWluIGlmIGV4dGVuc2lvbiBpcyB1c2VkIHdpdGggYG1peGluQmVoYXZpb3JzYC5cblxuICBUaGUgZ2VuZXJhdGVkIGNsYXNzIGlzIGRpcmVjdGx5IHRpZWQgdG8gdGhlIGluZm8gb2JqZWN0IGFuZCBiZWhhdmlvcnNcbiAgdXNlZCB0byBjcmVhdGUgaXQuIFRoYXQgbGlzdCBvZiBiZWhhdmlvcnMgaXMgZmlsdGVyZWQgc28gaXQncyBvbmx5IHRoZVxuICBiZWhhdmlvcnMgbm90IGFjdGl2ZSBvbiB0aGUgc3VwZXJjbGFzcy4gSW4gb3JkZXIgdG8gY2FsbCB0aHJvdWdoIHRvIHRoZVxuICBlbnRpcmUgbGlzdCBvZiBsaWZlY3ljbGUgbWV0aG9kcywgaXQncyBpbXBvcnRhbnQgdG8gY2FsbCBgc3VwZXJgLlxuXG4gIFRoZSBlbGVtZW50J3MgYHByb3BlcnRpZXNgIGFuZCBgb2JzZXJ2ZXJzYCBhcmUgY29udHJvbGxlZCB2aWEgdGhlIGZpbmFsaXphdGlvblxuICBtZWNoYW5pc20gcHJvdmlkZWQgYnkgYFByb3BlcnRpZXNNaXhpbmAuIGBQcm9wZXJ0aWVzYCBhbmQgYG9ic2VydmVyc2AgYXJlXG4gIGNvbGxlY3RlZCBieSBtYW51YWxseSB0cmF2ZXJzaW5nIHRoZSBwcm90b3R5cGUgY2hhaW4gYW5kIG1lcmdpbmcuXG5cbiAgVG8gbGltaXQgY2hhbmdlcywgdGhlIGBfcmVnaXN0ZXJlZGAgbWV0aG9kIGlzIGNhbGxlZCB2aWEgYF9pbml0aWFsaXplUHJvcGVydGllc2BcbiAgYW5kIG5vdCBgX2ZpbmFsaXplQ2xhc3NgLlxuXG4qL1xuLyoqXG4gKiBAcGFyYW0geyFQb2x5bWVySW5pdH0gaW5mbyBQb2x5bWVyIGluZm8gb2JqZWN0XG4gKiBAcGFyYW0ge2Z1bmN0aW9uKG5ldzpIVE1MRWxlbWVudCl9IEJhc2UgYmFzZSBjbGFzcyB0byBleHRlbmQgd2l0aCBpbmZvIG9iamVjdFxuICogQHBhcmFtIHtPYmplY3Q9fSBiZWhhdmlvcnMgYmVoYXZpb3JzIHRvIGNvcHkgaW50byB0aGUgZWxlbWVudFxuICogQHJldHVybiB7ZnVuY3Rpb24obmV3OkhUTUxFbGVtZW50KX0gR2VuZXJhdGVkIGNsYXNzXG4gKiBAc3VwcHJlc3Mge2NoZWNrVHlwZXN9XG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBHZW5lcmF0ZUNsYXNzRnJvbUluZm8oaW5mbywgQmFzZSwgYmVoYXZpb3JzKSB7XG5cbiAgLy8gbWFuYWdlcyBiZWhhdmlvciBhbmQgbGlmZWN5Y2xlIHByb2Nlc3NpbmcgKGZpbGxlZCBpbiBhZnRlciBjbGFzcyBkZWZpbml0aW9uKVxuICBsZXQgYmVoYXZpb3JMaXN0O1xuICBjb25zdCBsaWZlY3ljbGUgPSB7fTtcblxuICAvKiogQHByaXZhdGUgKi9cbiAgY2xhc3MgUG9seW1lckdlbmVyYXRlZCBleHRlbmRzIEJhc2Uge1xuXG4gICAgLy8gZXhwbGljaXRseSBub3QgY2FsbGluZyBzdXBlci5fZmluYWxpemVDbGFzc1xuICAgIC8qKiBAbm9jb2xsYXBzZSAqL1xuICAgIHN0YXRpYyBfZmluYWxpemVDbGFzcygpIHtcbiAgICAgIC8vIGlmIGNhbGxpbmcgdmlhIGEgc3ViY2xhc3MgdGhhdCBoYXNuJ3QgYmVlbiBnZW5lcmF0ZWQsIHBhc3MgdGhyb3VnaCB0byBzdXBlclxuICAgICAgaWYgKCF0aGlzLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2dlbmVyYXRlZEZyb20nLCB0aGlzKSkpIHtcbiAgICAgICAgLy8gVE9ETyhodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtY29tcGlsZXIvaXNzdWVzLzMyNDApOlxuICAgICAgICAvLyAgICAgQ2hhbmdlIGJhY2sgdG8ganVzdCBzdXBlci5tZXRob2RDYWxsKClcbiAgICAgICAgQmFzZS5fZmluYWxpemVDbGFzcy5jYWxsKHRoaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gaW50ZXJsZWF2ZSBwcm9wZXJ0aWVzIGFuZCBvYnNlcnZlcnMgcGVyIGJlaGF2aW9yIGFuZCBgaW5mb2BcbiAgICAgICAgaWYgKGJlaGF2aW9yTGlzdCkge1xuICAgICAgICAgIGZvciAobGV0IGk9MCwgYjsgaSA8IGJlaGF2aW9yTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYiA9IGJlaGF2aW9yTGlzdFtpXTtcbiAgICAgICAgICAgIGlmIChiLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVQcm9wZXJ0aWVzKGIucHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYi5vYnNlcnZlcnMpIHtcbiAgICAgICAgICAgICAgdGhpcy5jcmVhdGVPYnNlcnZlcnMoYi5vYnNlcnZlcnMsIGIucHJvcGVydGllcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpbmZvLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICB0aGlzLmNyZWF0ZVByb3BlcnRpZXMoaW5mby5wcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5mby5vYnNlcnZlcnMpIHtcbiAgICAgICAgICB0aGlzLmNyZWF0ZU9ic2VydmVycyhpbmZvLm9ic2VydmVycywgaW5mby5wcm9wZXJ0aWVzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gcHJlcGFyZSB0aGUgZWxlbWVudCB0ZW1wbGF0ZVxuICAgICAgICB0aGlzLl9wcmVwYXJlVGVtcGxhdGUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICBjb25zdCBwcm9wZXJ0aWVzID0ge307XG4gICAgICBpZiAoYmVoYXZpb3JMaXN0KSB7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaSA8IGJlaGF2aW9yTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIG1lcmdlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBiZWhhdmlvckxpc3RbaV0ucHJvcGVydGllcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIG1lcmdlUHJvcGVydGllcyhwcm9wZXJ0aWVzLCBpbmZvLnByb3BlcnRpZXMpO1xuICAgICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gICAgfVxuXG4gICAgLyoqIEBub2NvbGxhcHNlICovXG4gICAgc3RhdGljIGdldCBvYnNlcnZlcnMoKSB7XG4gICAgICBsZXQgb2JzZXJ2ZXJzID0gW107XG4gICAgICBpZiAoYmVoYXZpb3JMaXN0KSB7XG4gICAgICAgIGZvciAobGV0IGk9MCwgYjsgaSA8IGJlaGF2aW9yTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGIgPSBiZWhhdmlvckxpc3RbaV07XG4gICAgICAgICAgaWYgKGIub2JzZXJ2ZXJzKSB7XG4gICAgICAgICAgICBvYnNlcnZlcnMgPSBvYnNlcnZlcnMuY29uY2F0KGIub2JzZXJ2ZXJzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpbmZvLm9ic2VydmVycykge1xuICAgICAgICBvYnNlcnZlcnMgPSBvYnNlcnZlcnMuY29uY2F0KGluZm8ub2JzZXJ2ZXJzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBvYnNlcnZlcnM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBjcmVhdGVkKCkge1xuICAgICAgc3VwZXIuY3JlYXRlZCgpO1xuICAgICAgY29uc3QgbGlzdCA9IGxpZmVjeWNsZS5jcmVhdGVkO1xuICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpc3RbaV0uY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgX3JlZ2lzdGVyZWQoKSB7XG4gICAgICAvKiBOT1RFOiBgYmVmb3JlUmVnaXN0ZXJgIGlzIGNhbGxlZCBoZXJlIGZvciBiYywgYnV0IHRoZSBiZWhhdmlvclxuICAgICAgICBpcyBkaWZmZXJlbnQgdGhhbiBpbiAxLnguIEluIDEuMCwgdGhlIG1ldGhvZCB3YXMgY2FsbGVkICphZnRlcipcbiAgICAgICAgbWl4aW5nIHByb3RvdHlwZXMgdG9nZXRoZXIgYnV0ICpiZWZvcmUqIHByb2Nlc3Npbmcgb2YgbWV0YS1vYmplY3RzLlxuICAgICAgICBIb3dldmVyLCBkeW5hbWljIGVmZmVjdHMgY2FuIHN0aWxsIGJlIHNldCBoZXJlIGFuZCBjYW4gYmUgZG9uZSBlaXRoZXJcbiAgICAgICAgaW4gYGJlZm9yZVJlZ2lzdGVyYCBvciBgcmVnaXN0ZXJlZGAuIEl0IGlzIG5vIGxvbmdlciBwb3NzaWJsZSB0byBzZXRcbiAgICAgICAgYGlzYCBpbiBgYmVmb3JlUmVnaXN0ZXJgIGFzIHlvdSBjb3VsZCBpbiAxLnguXG4gICAgICAqL1xuICAgICAgLy8gb25seSBwcm9jZWVkIGlmIHRoZSBnZW5lcmF0ZWQgY2xhc3MnIHByb3RvdHlwZSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZC5cbiAgICAgIGNvbnN0IGdlbmVyYXRlZFByb3RvID0gUG9seW1lckdlbmVyYXRlZC5wcm90b3R5cGU7XG4gICAgICBpZiAoIWdlbmVyYXRlZFByb3RvLmhhc093blByb3BlcnR5KEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ19faGFzUmVnaXN0ZXJGaW5pc2hlZCcsIGdlbmVyYXRlZFByb3RvKSkpIHtcbiAgICAgICAgZ2VuZXJhdGVkUHJvdG8uX19oYXNSZWdpc3RlckZpbmlzaGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gZW5zdXJlIHN1cGVyY2xhc3MgaXMgcmVnaXN0ZXJlZCBmaXJzdC5cbiAgICAgICAgc3VwZXIuX3JlZ2lzdGVyZWQoKTtcbiAgICAgICAgLy8gY29weSBwcm9wZXJ0aWVzIG9udG8gdGhlIGdlbmVyYXRlZCBjbGFzcyBsYXppbHkgaWYgd2UncmUgb3B0aW1pemluZyxcbiAgICAgICAgaWYgKGxlZ2FjeU9wdGltaXphdGlvbnMpIHtcbiAgICAgICAgICBjb3B5UHJvcGVydGllc1RvUHJvdG8oZ2VuZXJhdGVkUHJvdG8pO1xuICAgICAgICB9XG4gICAgICAgIC8vIG1ha2Ugc3VyZSBsZWdhY3kgbGlmZWN5Y2xlIGlzIGNhbGxlZCBvbiB0aGUgKmVsZW1lbnQqJ3MgcHJvdG90eXBlXG4gICAgICAgIC8vIGFuZCBub3QgdGhlIGdlbmVyYXRlZCBjbGFzcyBwcm90b3R5cGU7IGlmIHRoZSBlbGVtZW50IGhhcyBiZWVuXG4gICAgICAgIC8vIGV4dGVuZGVkLCB0aGVzZSBhcmUgKm5vdCogdGhlIHNhbWUuXG4gICAgICAgIGNvbnN0IHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpO1xuICAgICAgICBsZXQgbGlzdCA9IGxpZmVjeWNsZS5iZWZvcmVSZWdpc3RlcjtcbiAgICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsaXN0W2ldLmNhbGwocHJvdG8pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBsaXN0ID0gbGlmZWN5Y2xlLnJlZ2lzdGVyZWQ7XG4gICAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgICAgZm9yIChsZXQgaT0wOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGlzdFtpXS5jYWxsKHByb3RvKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIF9hcHBseUxpc3RlbmVycygpIHtcbiAgICAgIHN1cGVyLl9hcHBseUxpc3RlbmVycygpO1xuICAgICAgY29uc3QgbGlzdCA9IGxpZmVjeWNsZS5saXN0ZW5lcnM7XG4gICAgICBpZiAobGlzdCkge1xuICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gbGlzdFtpXTtcbiAgICAgICAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBsIGluIGxpc3RlbmVycykge1xuICAgICAgICAgICAgICB0aGlzLl9hZGRNZXRob2RFdmVudExpc3RlbmVyVG9Ob2RlKHRoaXMsIGwsIGxpc3RlbmVyc1tsXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbm90ZTogZXhjZXB0aW9uIHRvIFwic3VwZXIgdGhlbiBtZVwiIHJ1bGU7XG4gICAgLy8gZG8gd29yayBiZWZvcmUgY2FsbGluZyBzdXBlciBzbyB0aGF0IHN1cGVyIGF0dHJpYnV0ZXNcbiAgICAvLyBvbmx5IGFwcGx5IGlmIG5vdCBhbHJlYWR5IHNldC5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIF9lbnN1cmVBdHRyaWJ1dGVzKCkge1xuICAgICAgY29uc3QgbGlzdCA9IGxpZmVjeWNsZS5ob3N0QXR0cmlidXRlcztcbiAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgIGZvciAobGV0IGk9bGlzdC5sZW5ndGgtMTsgaSA+PSAwOyBpLS0pIHtcbiAgICAgICAgICBjb25zdCBob3N0QXR0cmlidXRlcyA9IGxpc3RbaV07XG4gICAgICAgICAgZm9yIChsZXQgYSBpbiBob3N0QXR0cmlidXRlcykge1xuICAgICAgICAgICAgICB0aGlzLl9lbnN1cmVBdHRyaWJ1dGUoYSwgaG9zdEF0dHJpYnV0ZXNbYV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBzdXBlci5fZW5zdXJlQXR0cmlidXRlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgcmVhZHkoKSB7XG4gICAgICBzdXBlci5yZWFkeSgpO1xuICAgICAgbGV0IGxpc3QgPSBsaWZlY3ljbGUucmVhZHk7XG4gICAgICBpZiAobGlzdCkge1xuICAgICAgICBmb3IgKGxldCBpPTA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgbGlzdFtpXS5jYWxsKHRoaXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBhdHRhY2hlZCgpIHtcbiAgICAgIHN1cGVyLmF0dGFjaGVkKCk7XG4gICAgICBsZXQgbGlzdCA9IGxpZmVjeWNsZS5hdHRhY2hlZDtcbiAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsaXN0W2ldLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGRldGFjaGVkKCkge1xuICAgICAgc3VwZXIuZGV0YWNoZWQoKTtcbiAgICAgIGxldCBsaXN0ID0gbGlmZWN5Y2xlLmRldGFjaGVkO1xuICAgICAgaWYgKGxpc3QpIHtcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGxpc3RbaV0uY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEltcGxlbWVudHMgbmF0aXZlIEN1c3RvbSBFbGVtZW50cyBgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrYCB0b1xuICAgICAqIHNldCBhbiBhdHRyaWJ1dGUgdmFsdWUgdG8gYSBwcm9wZXJ0eSB2aWEgYF9hdHRyaWJ1dGVUb1Byb3BlcnR5YC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBuYW1lIE5hbWUgb2YgYXR0cmlidXRlIHRoYXQgY2hhbmdlZFxuICAgICAqIEBwYXJhbSB7P3N0cmluZ30gb2xkIE9sZCBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgKiBAcGFyYW0gez9zdHJpbmd9IHZhbHVlIE5ldyBhdHRyaWJ1dGUgdmFsdWVcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGF0dHJpYnV0ZUNoYW5nZWQobmFtZSwgb2xkLCB2YWx1ZSkge1xuICAgICAgc3VwZXIuYXR0cmlidXRlQ2hhbmdlZCgpO1xuICAgICAgbGV0IGxpc3QgPSBsaWZlY3ljbGUuYXR0cmlidXRlQ2hhbmdlZDtcbiAgICAgIGlmIChsaXN0KSB7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaSA8IGxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICBsaXN0W2ldLmNhbGwodGhpcywgbmFtZSwgb2xkLCB2YWx1ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBhcHBseSBiZWhhdmlvcnMsIG5vdGUgYWN0dWFsIGNvcHlpbmcgaXMgZG9uZSBsYXppbHkgYXQgZmlyc3QgaW5zdGFuY2UgY3JlYXRpb25cbiAgaWYgKGJlaGF2aW9ycykge1xuICAgIC8vIE5PVEU6IGVuc3VyZSB0aGUgYmVoYXZpb3IgaXMgZXh0ZW5kaW5nIGEgY2xhc3Mgd2l0aFxuICAgIC8vIGxlZ2FjeSBlbGVtZW50IGFwaS4gVGhpcyBpcyBuZWNlc3Nhcnkgc2luY2UgYmVoYXZpb3JzIGV4cGVjdCB0byBiZSBhYmxlXG4gICAgLy8gdG8gYWNjZXNzIDEueCBsZWdhY3kgYXBpLlxuICAgIGlmICghQXJyYXkuaXNBcnJheShiZWhhdmlvcnMpKSB7XG4gICAgICBiZWhhdmlvcnMgPSBbYmVoYXZpb3JzXTtcbiAgICB9XG4gICAgbGV0IHN1cGVyQmVoYXZpb3JzID0gQmFzZS5wcm90b3R5cGUuYmVoYXZpb3JzO1xuICAgIC8vIGdldCBmbGF0dGVuZWQsIGRlZHVwZWQgbGlzdCBvZiBiZWhhdmlvcnMgKm5vdCogYWxyZWFkeSBvbiBzdXBlciBjbGFzc1xuICAgIGJlaGF2aW9yTGlzdCA9IGZsYXR0ZW5CZWhhdmlvcnMoYmVoYXZpb3JzLCBudWxsLCBzdXBlckJlaGF2aW9ycyk7XG4gICAgUG9seW1lckdlbmVyYXRlZC5wcm90b3R5cGUuYmVoYXZpb3JzID0gc3VwZXJCZWhhdmlvcnMgP1xuICAgICAgc3VwZXJCZWhhdmlvcnMuY29uY2F0KGJlaGF2aW9ycykgOiBiZWhhdmlvckxpc3Q7XG4gIH1cblxuICBjb25zdCBjb3B5UHJvcGVydGllc1RvUHJvdG8gPSAocHJvdG8pID0+IHtcbiAgICBpZiAoYmVoYXZpb3JMaXN0KSB7XG4gICAgICBhcHBseUJlaGF2aW9ycyhwcm90bywgYmVoYXZpb3JMaXN0LCBsaWZlY3ljbGUpO1xuICAgIH1cbiAgICBhcHBseUluZm8ocHJvdG8sIGluZm8sIGxpZmVjeWNsZSwgZXhjbHVkZU9uSW5mbyk7XG4gIH07XG5cbiAgLy8gY29weSBwcm9wZXJ0aWVzIGlmIHdlJ3JlIG5vdCBvcHRpbWl6aW5nXG4gIGlmICghbGVnYWN5T3B0aW1pemF0aW9ucykge1xuICAgIGNvcHlQcm9wZXJ0aWVzVG9Qcm90byhQb2x5bWVyR2VuZXJhdGVkLnByb3RvdHlwZSk7XG4gIH1cblxuICBQb2x5bWVyR2VuZXJhdGVkLmdlbmVyYXRlZEZyb20gPSBpbmZvO1xuXG4gIHJldHVybiBQb2x5bWVyR2VuZXJhdGVkO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIGNsYXNzIHRoYXQgZXh0ZW5kcyBgTGVnYWN5RWxlbWVudGAgYmFzZWQgb24gdGhlXG4gKiBwcm92aWRlZCBpbmZvIG9iamVjdC4gIE1ldGFkYXRhIG9iamVjdHMgb24gdGhlIGBpbmZvYCBvYmplY3RcbiAqIChgcHJvcGVydGllc2AsIGBvYnNlcnZlcnNgLCBgbGlzdGVuZXJzYCwgYGJlaGF2aW9yc2AsIGBpc2ApIGFyZSB1c2VkXG4gKiBmb3IgUG9seW1lcidzIG1ldGEtcHJvZ3JhbW1pbmcgc3lzdGVtcywgYW5kIGFueSBmdW5jdGlvbnMgYXJlIGNvcGllZFxuICogdG8gdGhlIGdlbmVyYXRlZCBjbGFzcy5cbiAqXG4gKiBWYWxpZCBcIm1ldGFkYXRhXCIgdmFsdWVzIGFyZSBhcyBmb2xsb3dzOlxuICpcbiAqIGBpc2A6IFN0cmluZyBwcm92aWRpbmcgdGhlIHRhZyBuYW1lIHRvIHJlZ2lzdGVyIHRoZSBlbGVtZW50IHVuZGVyLiBJblxuICogYWRkaXRpb24sIGlmIGEgYGRvbS1tb2R1bGVgIHdpdGggdGhlIHNhbWUgaWQgZXhpc3RzLCB0aGUgZmlyc3QgdGVtcGxhdGVcbiAqIGluIHRoYXQgYGRvbS1tb2R1bGVgIHdpbGwgYmUgc3RhbXBlZCBpbnRvIHRoZSBzaGFkb3cgcm9vdCBvZiB0aGlzIGVsZW1lbnQsXG4gKiB3aXRoIHN1cHBvcnQgZm9yIGRlY2xhcmF0aXZlIGV2ZW50IGxpc3RlbmVycyAoYG9uLS4uLmApLCBQb2x5bWVyIGRhdGFcbiAqIGJpbmRpbmdzIChgW1suLi5dXWAgYW5kIGB7ey4uLn19YCksIGFuZCBpZC1iYXNlZCBub2RlIGZpbmRpbmcgaW50b1xuICogYHRoaXMuJGAuXG4gKlxuICogYHByb3BlcnRpZXNgOiBPYmplY3QgZGVzY3JpYmluZyBwcm9wZXJ0eS1yZWxhdGVkIG1ldGFkYXRhIHVzZWQgYnkgUG9seW1lclxuICogZmVhdHVyZXMgKGtleTogcHJvcGVydHkgbmFtZXMsIHZhbHVlOiBvYmplY3QgY29udGFpbmluZyBwcm9wZXJ0eSBtZXRhZGF0YSkuXG4gKiBWYWxpZCBrZXlzIGluIHBlci1wcm9wZXJ0eSBtZXRhZGF0YSBpbmNsdWRlOlxuICogLSBgdHlwZWAgKFN0cmluZ3xOdW1iZXJ8T2JqZWN0fEFycmF5fC4uLik6IFVzZWQgYnlcbiAqICAgYGF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja2AgdG8gZGV0ZXJtaW5lIGhvdyBzdHJpbmctYmFzZWQgYXR0cmlidXRlc1xuICogICBhcmUgZGVzZXJpYWxpemVkIHRvIEphdmFTY3JpcHQgcHJvcGVydHkgdmFsdWVzLlxuICogLSBgbm90aWZ5YCAoYm9vbGVhbik6IENhdXNlcyBhIGNoYW5nZSBpbiB0aGUgcHJvcGVydHkgdG8gZmlyZSBhXG4gKiAgIG5vbi1idWJibGluZyBldmVudCBjYWxsZWQgYDxwcm9wZXJ0eT4tY2hhbmdlZGAuIEVsZW1lbnRzIHRoYXQgaGF2ZVxuICogICBlbmFibGVkIHR3by13YXkgYmluZGluZyB0byB0aGUgcHJvcGVydHkgdXNlIHRoaXMgZXZlbnQgdG8gb2JzZXJ2ZSBjaGFuZ2VzLlxuICogLSBgcmVhZE9ubHlgIChib29sZWFuKTogQ3JlYXRlcyBhIGdldHRlciBmb3IgdGhlIHByb3BlcnR5LCBidXQgbm8gc2V0dGVyLlxuICogICBUbyBzZXQgYSByZWFkLW9ubHkgcHJvcGVydHksIHVzZSB0aGUgcHJpdmF0ZSBzZXR0ZXIgbWV0aG9kXG4gKiAgIGBfc2V0UHJvcGVydHkocHJvcGVydHksIHZhbHVlKWAuXG4gKiAtIGBvYnNlcnZlcmAgKHN0cmluZyk6IE9ic2VydmVyIG1ldGhvZCBuYW1lIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlblxuICogICB0aGUgcHJvcGVydHkgY2hhbmdlcy4gVGhlIGFyZ3VtZW50cyBvZiB0aGUgbWV0aG9kIGFyZVxuICogICBgKHZhbHVlLCBwcmV2aW91c1ZhbHVlKWAuXG4gKiAtIGBjb21wdXRlZGAgKHN0cmluZyk6IFN0cmluZyBkZXNjcmliaW5nIG1ldGhvZCBhbmQgZGVwZW5kZW50IHByb3BlcnRpZXNcbiAqICAgZm9yIGNvbXB1dGluZyB0aGUgdmFsdWUgb2YgdGhpcyBwcm9wZXJ0eSAoZS5nLiBgJ2NvbXB1dGVGb28oYmFyLCB6b3QpJ2ApLlxuICogICBDb21wdXRlZCBwcm9wZXJ0aWVzIGFyZSByZWFkLW9ubHkgYnkgZGVmYXVsdCBhbmQgY2FuIG9ubHkgYmUgY2hhbmdlZFxuICogICB2aWEgdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgY29tcHV0aW5nIG1ldGhvZC5cbiAqXG4gKiBgb2JzZXJ2ZXJzYDogQXJyYXkgb2Ygc3RyaW5ncyBkZXNjcmliaW5nIG11bHRpLXByb3BlcnR5IG9ic2VydmVyIG1ldGhvZHNcbiAqICBhbmQgdGhlaXIgZGVwZW5kZW50IHByb3BlcnRpZXMgKGUuZy4gYCdvYnNlcnZlQUJDKGEsIGIsIGMpJ2ApLlxuICpcbiAqIGBsaXN0ZW5lcnNgOiBPYmplY3QgZGVzY3JpYmluZyBldmVudCBsaXN0ZW5lcnMgdG8gYmUgYWRkZWQgdG8gZWFjaFxuICogIGluc3RhbmNlIG9mIHRoaXMgZWxlbWVudCAoa2V5OiBldmVudCBuYW1lLCB2YWx1ZTogbWV0aG9kIG5hbWUpLlxuICpcbiAqIGBiZWhhdmlvcnNgOiBBcnJheSBvZiBhZGRpdGlvbmFsIGBpbmZvYCBvYmplY3RzIGNvbnRhaW5pbmcgbWV0YWRhdGFcbiAqIGFuZCBjYWxsYmFja3MgaW4gdGhlIHNhbWUgZm9ybWF0IGFzIHRoZSBgaW5mb2Agb2JqZWN0IGhlcmUgd2hpY2ggYXJlXG4gKiBtZXJnZWQgaW50byB0aGlzIGVsZW1lbnQuXG4gKlxuICogYGhvc3RBdHRyaWJ1dGVzYDogT2JqZWN0IGxpc3RpbmcgYXR0cmlidXRlcyB0byBiZSBhcHBsaWVkIHRvIHRoZSBob3N0XG4gKiAgb25jZSBjcmVhdGVkIChrZXk6IGF0dHJpYnV0ZSBuYW1lLCB2YWx1ZTogYXR0cmlidXRlIHZhbHVlKS4gIFZhbHVlc1xuICogIGFyZSBzZXJpYWxpemVkIGJhc2VkIG9uIHRoZSB0eXBlIG9mIHRoZSB2YWx1ZS4gIEhvc3QgYXR0cmlidXRlcyBzaG91bGRcbiAqICBnZW5lcmFsbHkgYmUgbGltaXRlZCB0byBhdHRyaWJ1dGVzIHN1Y2ggYXMgYHRhYkluZGV4YCBhbmQgYGFyaWEtLi4uYC5cbiAqICBBdHRyaWJ1dGVzIGluIGBob3N0QXR0cmlidXRlc2AgYXJlIG9ubHkgYXBwbGllZCBpZiBhIHVzZXItc3VwcGxpZWRcbiAqICBhdHRyaWJ1dGUgaXMgbm90IGFscmVhZHkgcHJlc2VudCAoYXR0cmlidXRlcyBpbiBtYXJrdXAgb3ZlcnJpZGVcbiAqICBgaG9zdEF0dHJpYnV0ZXNgKS5cbiAqXG4gKiBJbiBhZGRpdGlvbiwgdGhlIGZvbGxvd2luZyBQb2x5bWVyLXNwZWNpZmljIGNhbGxiYWNrcyBtYXkgYmUgcHJvdmlkZWQ6XG4gKiAtIGByZWdpc3RlcmVkYDogY2FsbGVkIGFmdGVyIGZpcnN0IGluc3RhbmNlIG9mIHRoaXMgZWxlbWVudCxcbiAqIC0gYGNyZWF0ZWRgOiBjYWxsZWQgZHVyaW5nIGBjb25zdHJ1Y3RvcmBcbiAqIC0gYGF0dGFjaGVkYDogY2FsbGVkIGR1cmluZyBgY29ubmVjdGVkQ2FsbGJhY2tgXG4gKiAtIGBkZXRhY2hlZGA6IGNhbGxlZCBkdXJpbmcgYGRpc2Nvbm5lY3RlZENhbGxiYWNrYFxuICogLSBgcmVhZHlgOiBjYWxsZWQgYmVmb3JlIGZpcnN0IGBhdHRhY2hlZGAsIGFmdGVyIGFsbCBwcm9wZXJ0aWVzIG9mXG4gKiAgIHRoaXMgZWxlbWVudCBoYXZlIGJlZW4gcHJvcGFnYXRlZCB0byBpdHMgdGVtcGxhdGUgYW5kIGFsbCBvYnNlcnZlcnNcbiAqICAgaGF2ZSBydW5cbiAqXG4gKiBAcGFyYW0geyFQb2x5bWVySW5pdH0gaW5mbyBPYmplY3QgY29udGFpbmluZyBQb2x5bWVyIG1ldGFkYXRhIGFuZCBmdW5jdGlvbnNcbiAqICAgdG8gYmVjb21lIGNsYXNzIG1ldGhvZHMuXG4gKiBAdGVtcGxhdGUgVFxuICogQHBhcmFtIHtmdW5jdGlvbihUKTpUfSBtaXhpbiBPcHRpb25hbCBtaXhpbiB0byBhcHBseSB0byBsZWdhY3kgYmFzZSBjbGFzc1xuICogICBiZWZvcmUgZXh0ZW5kaW5nIHdpdGggUG9seW1lciBtZXRhcHJvZ3JhbW1pbmcuXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihuZXc6SFRNTEVsZW1lbnQpfSBHZW5lcmF0ZWQgY2xhc3NcbiAqL1xuZXhwb3J0IGNvbnN0IENsYXNzID0gZnVuY3Rpb24oaW5mbywgbWl4aW4pIHtcbiAgaWYgKCFpbmZvKSB7XG4gICAgY29uc29sZS53YXJuKCdQb2x5bWVyLkNsYXNzIHJlcXVpcmVzIGBpbmZvYCBhcmd1bWVudCcpO1xuICB9XG4gIGxldCBrbGFzcyA9IG1peGluID8gbWl4aW4oTGVnYWN5RWxlbWVudCkgOlxuICAgICAgTGVnYWN5RWxlbWVudDtcbiAga2xhc3MgPSBHZW5lcmF0ZUNsYXNzRnJvbUluZm8oaW5mbywga2xhc3MsIGluZm8uYmVoYXZpb3JzKTtcbiAgLy8gZGVjb3JhdGUga2xhc3Mgd2l0aCByZWdpc3RyYXRpb24gaW5mb1xuICBrbGFzcy5pcyA9IGtsYXNzLnByb3RvdHlwZS5pcyA9IGluZm8uaXM7XG4gIHJldHVybiBrbGFzcztcbn07XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCB7IENsYXNzIH0gZnJvbSAnLi9jbGFzcy5qcyc7XG5cbmltcG9ydCAnLi4vdXRpbHMvYm9vdC5qcyc7XG5cbi8qKlxuICogTGVnYWN5IGNsYXNzIGZhY3RvcnkgYW5kIHJlZ2lzdHJhdGlvbiBoZWxwZXIgZm9yIGRlZmluaW5nIFBvbHltZXJcbiAqIGVsZW1lbnRzLlxuICpcbiAqIFRoaXMgbWV0aG9kIGlzIGVxdWl2YWxlbnQgdG9cbiAqXG4gKiAgICAgaW1wb3J0IHtDbGFzc30gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L2NsYXNzLmpzJztcbiAqICAgICBjdXN0b21FbGVtZW50cy5kZWZpbmUoaW5mby5pcywgQ2xhc3MoaW5mbykpO1xuICpcbiAqIFNlZSBgQ2xhc3NgIGZvciBkZXRhaWxzIG9uIHZhbGlkIGxlZ2FjeSBtZXRhZGF0YSBmb3JtYXQgZm9yIGBpbmZvYC5cbiAqXG4gKiBAZ2xvYmFsXG4gKiBAb3ZlcnJpZGVcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHshUG9seW1lckluaXR9IGluZm8gT2JqZWN0IGNvbnRhaW5pbmcgUG9seW1lciBtZXRhZGF0YSBhbmQgZnVuY3Rpb25zXG4gKiAgIHRvIGJlY29tZSBjbGFzcyBtZXRob2RzLlxuICogQHJldHVybiB7ZnVuY3Rpb24obmV3OiBIVE1MRWxlbWVudCl9IEdlbmVyYXRlZCBjbGFzc1xuICogQHN1cHByZXNzIHtkdXBsaWNhdGUsIGludmFsaWRDYXN0cywgY2hlY2tUeXBlc31cbiAqL1xuY29uc3QgUG9seW1lciA9IGZ1bmN0aW9uKGluZm8pIHtcbiAgLy8gaWYgaW5wdXQgaXMgYSBgY2xhc3NgIChha2EgYSBmdW5jdGlvbiB3aXRoIGEgcHJvdG90eXBlKSwgdXNlIHRoZSBwcm90b3R5cGVcbiAgLy8gcmVtZW1iZXIgdGhhdCB0aGUgYGNvbnN0cnVjdG9yYCB3aWxsIG5ldmVyIGJlIGNhbGxlZFxuICBsZXQga2xhc3M7XG4gIGlmICh0eXBlb2YgaW5mbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIGtsYXNzID0gaW5mbztcbiAgfSBlbHNlIHtcbiAgICBrbGFzcyA9IFBvbHltZXIuQ2xhc3MoaW5mbyk7XG4gIH1cbiAgLy8gQ29weSBvcHQgb3V0IGZvciBgbGVnYWN5Tm9PYnNlcnZlZEF0dHJpYnV0ZXNgIGZyb20gaW5mbyBvYmplY3QgdG8gY2xhc3MuXG4gIGlmIChpbmZvLl9sZWdhY3lGb3JjZU9ic2VydmVkQXR0cmlidXRlcykge1xuICAgIGtsYXNzLnByb3RvdHlwZS5fbGVnYWN5Rm9yY2VPYnNlcnZlZEF0dHJpYnV0ZXMgPSBpbmZvLl9sZWdhY3lGb3JjZU9ic2VydmVkQXR0cmlidXRlcztcbiAgfVxuICBjdXN0b21FbGVtZW50cy5kZWZpbmUoa2xhc3MuaXMsIC8qKiBAdHlwZSB7IUhUTUxFbGVtZW50fSAqLyhrbGFzcykpO1xuICByZXR1cm4ga2xhc3M7XG59O1xuXG5Qb2x5bWVyLkNsYXNzID0gQ2xhc3M7XG5cbmV4cG9ydCB7IFBvbHltZXIgfTsiLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCB7IGRlZHVwaW5nTWl4aW4gfSBmcm9tICcuLi91dGlscy9taXhpbi5qcyc7XG5cbi8vIENvbW1vbiBpbXBsZW1lbnRhdGlvbiBmb3IgbWl4aW4gJiBiZWhhdmlvclxuZnVuY3Rpb24gbXV0YWJsZVByb3BlcnR5Q2hhbmdlKGluc3QsIHByb3BlcnR5LCB2YWx1ZSwgb2xkLCBtdXRhYmxlRGF0YSkge1xuICBsZXQgaXNPYmplY3Q7XG4gIGlmIChtdXRhYmxlRGF0YSkge1xuICAgIGlzT2JqZWN0ID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwpO1xuICAgIC8vIFB1bGwgYG9sZGAgZm9yIE9iamVjdHMgZnJvbSB0ZW1wIGNhY2hlLCBidXQgdHJlYXQgYG51bGxgIGFzIGEgcHJpbWl0aXZlXG4gICAgaWYgKGlzT2JqZWN0KSB7XG4gICAgICBvbGQgPSBpbnN0Ll9fZGF0YVRlbXBbcHJvcGVydHldO1xuICAgIH1cbiAgfVxuICAvLyBTdHJpY3QgZXF1YWxpdHkgY2hlY2ssIGJ1dCByZXR1cm4gZmFsc2UgZm9yIE5hTj09PU5hTlxuICBsZXQgc2hvdWxkQ2hhbmdlID0gKG9sZCAhPT0gdmFsdWUgJiYgKG9sZCA9PT0gb2xkIHx8IHZhbHVlID09PSB2YWx1ZSkpO1xuICAvLyBPYmplY3RzIGFyZSBzdG9yZWQgaW4gdGVtcG9yYXJ5IGNhY2hlIChjbGVhcmVkIGF0IGVuZCBvZlxuICAvLyB0dXJuKSwgd2hpY2ggaXMgdXNlZCBmb3IgZGlydHktY2hlY2tpbmdcbiAgaWYgKGlzT2JqZWN0ICYmIHNob3VsZENoYW5nZSkge1xuICAgIGluc3QuX19kYXRhVGVtcFtwcm9wZXJ0eV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gc2hvdWxkQ2hhbmdlO1xufVxuXG4vKipcbiAqIEVsZW1lbnQgY2xhc3MgbWl4aW4gdG8gc2tpcCBzdHJpY3QgZGlydHktY2hlY2tpbmcgZm9yIG9iamVjdHMgYW5kIGFycmF5c1xuICogKGFsd2F5cyBjb25zaWRlciB0aGVtIHRvIGJlIFwiZGlydHlcIiksIGZvciB1c2Ugb24gZWxlbWVudHMgdXRpbGl6aW5nXG4gKiBgUHJvcGVydHlFZmZlY3RzYFxuICpcbiAqIEJ5IGRlZmF1bHQsIGBQcm9wZXJ0eUVmZmVjdHNgIHBlcmZvcm1zIHN0cmljdCBkaXJ0eSBjaGVja2luZyBvblxuICogb2JqZWN0cywgd2hpY2ggbWVhbnMgdGhhdCBhbnkgZGVlcCBtb2RpZmljYXRpb25zIHRvIGFuIG9iamVjdCBvciBhcnJheSB3aWxsXG4gKiBub3QgYmUgcHJvcGFnYXRlZCB1bmxlc3MgXCJpbW11dGFibGVcIiBkYXRhIHBhdHRlcm5zIGFyZSB1c2VkIChpLmUuIGFsbCBvYmplY3RcbiAqIHJlZmVyZW5jZXMgZnJvbSB0aGUgcm9vdCB0byB0aGUgbXV0YXRpb24gd2VyZSBjaGFuZ2VkKS5cbiAqXG4gKiBQb2x5bWVyIGFsc28gcHJvdmlkZXMgYSBwcm9wcmlldGFyeSBkYXRhIG11dGF0aW9uIGFuZCBwYXRoIG5vdGlmaWNhdGlvbiBBUElcbiAqIChlLmcuIGBub3RpZnlQYXRoYCwgYHNldGAsIGFuZCBhcnJheSBtdXRhdGlvbiBBUEkncykgdGhhdCBhbGxvdyBlZmZpY2llbnRcbiAqIG11dGF0aW9uIGFuZCBub3RpZmljYXRpb24gb2YgZGVlcCBjaGFuZ2VzIGluIGFuIG9iamVjdCBncmFwaCB0byBhbGwgZWxlbWVudHNcbiAqIGJvdW5kIHRvIHRoZSBzYW1lIG9iamVjdCBncmFwaC5cbiAqXG4gKiBJbiBjYXNlcyB3aGVyZSBuZWl0aGVyIGltbXV0YWJsZSBwYXR0ZXJucyBub3IgdGhlIGRhdGEgbXV0YXRpb24gQVBJIGNhbiBiZVxuICogdXNlZCwgYXBwbHlpbmcgdGhpcyBtaXhpbiB3aWxsIGNhdXNlIFBvbHltZXIgdG8gc2tpcCBkaXJ0eSBjaGVja2luZyBmb3JcbiAqIG9iamVjdHMgYW5kIGFycmF5cyAoYWx3YXlzIGNvbnNpZGVyIHRoZW0gdG8gYmUgXCJkaXJ0eVwiKS4gIFRoaXMgYWxsb3dzIGFcbiAqIHVzZXIgdG8gbWFrZSBhIGRlZXAgbW9kaWZpY2F0aW9uIHRvIGEgYm91bmQgb2JqZWN0IGdyYXBoLCBhbmQgdGhlbiBlaXRoZXJcbiAqIHNpbXBseSByZS1zZXQgdGhlIG9iamVjdCAoZS5nLiBgdGhpcy5pdGVtcyA9IHRoaXMuaXRlbXNgKSBvciBjYWxsIGBub3RpZnlQYXRoYFxuICogKGUuZy4gYHRoaXMubm90aWZ5UGF0aCgnaXRlbXMnKWApIHRvIHVwZGF0ZSB0aGUgdHJlZS4gIE5vdGUgdGhhdCBhbGxcbiAqIGVsZW1lbnRzIHRoYXQgd2lzaCB0byBiZSB1cGRhdGVkIGJhc2VkIG9uIGRlZXAgbXV0YXRpb25zIG11c3QgYXBwbHkgdGhpc1xuICogbWl4aW4gb3Igb3RoZXJ3aXNlIHNraXAgc3RyaWN0IGRpcnR5IGNoZWNraW5nIGZvciBvYmplY3RzL2FycmF5cy5cbiAqIFNwZWNpZmljYWxseSwgYW55IGVsZW1lbnRzIGluIHRoZSBiaW5kaW5nIHRyZWUgYmV0d2VlbiB0aGUgc291cmNlIG9mIGFcbiAqIG11dGF0aW9uIGFuZCB0aGUgY29uc3VtcHRpb24gb2YgaXQgbXVzdCBhcHBseSB0aGlzIG1peGluIG9yIGVuYWJsZSB0aGVcbiAqIGBPcHRpb25hbE11dGFibGVEYXRhYCBtaXhpbi5cbiAqXG4gKiBJbiBvcmRlciB0byBtYWtlIHRoZSBkaXJ0eSBjaGVjayBzdHJhdGVneSBjb25maWd1cmFibGUsIHNlZVxuICogYE9wdGlvbmFsTXV0YWJsZURhdGFgLlxuICpcbiAqIE5vdGUsIHRoZSBwZXJmb3JtYW5jZSBjaGFyYWN0ZXJpc3RpY3Mgb2YgcHJvcGFnYXRpbmcgbGFyZ2Ugb2JqZWN0IGdyYXBoc1xuICogd2lsbCBiZSB3b3JzZSBhcyBvcHBvc2VkIHRvIHVzaW5nIHN0cmljdCBkaXJ0eSBjaGVja2luZyB3aXRoIGltbXV0YWJsZVxuICogcGF0dGVybnMgb3IgUG9seW1lcidzIHBhdGggbm90aWZpY2F0aW9uIEFQSS5cbiAqXG4gKiBAbWl4aW5GdW5jdGlvblxuICogQHBvbHltZXJcbiAqIEBzdW1tYXJ5IEVsZW1lbnQgY2xhc3MgbWl4aW4gdG8gc2tpcCBzdHJpY3QgZGlydHktY2hlY2tpbmcgZm9yIG9iamVjdHNcbiAqICAgYW5kIGFycmF5c1xuICogQHRlbXBsYXRlIFRcbiAqIEBwYXJhbSB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIENsYXNzIHRvIGFwcGx5IG1peGluIHRvLlxuICogQHJldHVybiB7ZnVuY3Rpb24obmV3OlQpfSBzdXBlckNsYXNzIHdpdGggbWl4aW4gYXBwbGllZC5cbiAqL1xuZXhwb3J0IGNvbnN0IE11dGFibGVEYXRhID0gZGVkdXBpbmdNaXhpbihzdXBlckNsYXNzID0+IHtcblxuICAvKipcbiAgICogQHBvbHltZXJcbiAgICogQG1peGluQ2xhc3NcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfTXV0YWJsZURhdGF9XG4gICAqL1xuICBjbGFzcyBNdXRhYmxlRGF0YSBleHRlbmRzIHN1cGVyQ2xhc3Mge1xuICAgIC8qKlxuICAgICAqIE92ZXJyaWRlcyBgUHJvcGVydHlFZmZlY3RzYCB0byBwcm92aWRlIG9wdGlvbiBmb3Igc2tpcHBpbmdcbiAgICAgKiBzdHJpY3QgZXF1YWxpdHkgY2hlY2tpbmcgZm9yIE9iamVjdHMgYW5kIEFycmF5cy5cbiAgICAgKlxuICAgICAqIFRoaXMgbWV0aG9kIHB1bGxzIHRoZSB2YWx1ZSB0byBkaXJ0eSBjaGVjayBhZ2FpbnN0IGZyb20gdGhlIGBfX2RhdGFUZW1wYFxuICAgICAqIGNhY2hlIChyYXRoZXIgdGhhbiB0aGUgbm9ybWFsIGBfX2RhdGFgIGNhY2hlKSBmb3IgT2JqZWN0cy4gIFNpbmNlIHRoZSB0ZW1wXG4gICAgICogY2FjaGUgaXMgY2xlYXJlZCBhdCB0aGUgZW5kIG9mIGEgdHVybiwgdGhpcyBpbXBsZW1lbnRhdGlvbiBhbGxvd3NcbiAgICAgKiBzaWRlLWVmZmVjdHMgb2YgZGVlcCBvYmplY3QgY2hhbmdlcyB0byBiZSBwcm9jZXNzZWQgYnkgcmUtc2V0dGluZyB0aGVcbiAgICAgKiBzYW1lIG9iamVjdCAodXNpbmcgdGhlIHRlbXAgY2FjaGUgYXMgYW4gaW4tdHVybiBiYWNrc3RvcCB0byBwcmV2ZW50XG4gICAgICogY3ljbGVzIGR1ZSB0byAyLXdheSBub3RpZmljYXRpb24pLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Kn0gb2xkIFByZXZpb3VzIHByb3BlcnR5IHZhbHVlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcHJvcGVydHkgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBjaGFuZ2VcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX3Nob3VsZFByb3BlcnR5Q2hhbmdlKHByb3BlcnR5LCB2YWx1ZSwgb2xkKSB7XG4gICAgICByZXR1cm4gbXV0YWJsZVByb3BlcnR5Q2hhbmdlKHRoaXMsIHByb3BlcnR5LCB2YWx1ZSwgb2xkLCB0cnVlKTtcbiAgICB9XG5cbiAgfVxuXG4gIHJldHVybiBNdXRhYmxlRGF0YTtcblxufSk7XG5cbi8qKlxuICogRWxlbWVudCBjbGFzcyBtaXhpbiB0byBhZGQgdGhlIG9wdGlvbmFsIGFiaWxpdHkgdG8gc2tpcCBzdHJpY3RcbiAqIGRpcnR5LWNoZWNraW5nIGZvciBvYmplY3RzIGFuZCBhcnJheXMgKGFsd2F5cyBjb25zaWRlciB0aGVtIHRvIGJlXG4gKiBcImRpcnR5XCIpIGJ5IHNldHRpbmcgYSBgbXV0YWJsZS1kYXRhYCBhdHRyaWJ1dGUgb24gYW4gZWxlbWVudCBpbnN0YW5jZS5cbiAqXG4gKiBCeSBkZWZhdWx0LCBgUHJvcGVydHlFZmZlY3RzYCBwZXJmb3JtcyBzdHJpY3QgZGlydHkgY2hlY2tpbmcgb25cbiAqIG9iamVjdHMsIHdoaWNoIG1lYW5zIHRoYXQgYW55IGRlZXAgbW9kaWZpY2F0aW9ucyB0byBhbiBvYmplY3Qgb3IgYXJyYXkgd2lsbFxuICogbm90IGJlIHByb3BhZ2F0ZWQgdW5sZXNzIFwiaW1tdXRhYmxlXCIgZGF0YSBwYXR0ZXJucyBhcmUgdXNlZCAoaS5lLiBhbGwgb2JqZWN0XG4gKiByZWZlcmVuY2VzIGZyb20gdGhlIHJvb3QgdG8gdGhlIG11dGF0aW9uIHdlcmUgY2hhbmdlZCkuXG4gKlxuICogUG9seW1lciBhbHNvIHByb3ZpZGVzIGEgcHJvcHJpZXRhcnkgZGF0YSBtdXRhdGlvbiBhbmQgcGF0aCBub3RpZmljYXRpb24gQVBJXG4gKiAoZS5nLiBgbm90aWZ5UGF0aGAsIGBzZXRgLCBhbmQgYXJyYXkgbXV0YXRpb24gQVBJJ3MpIHRoYXQgYWxsb3cgZWZmaWNpZW50XG4gKiBtdXRhdGlvbiBhbmQgbm90aWZpY2F0aW9uIG9mIGRlZXAgY2hhbmdlcyBpbiBhbiBvYmplY3QgZ3JhcGggdG8gYWxsIGVsZW1lbnRzXG4gKiBib3VuZCB0byB0aGUgc2FtZSBvYmplY3QgZ3JhcGguXG4gKlxuICogSW4gY2FzZXMgd2hlcmUgbmVpdGhlciBpbW11dGFibGUgcGF0dGVybnMgbm9yIHRoZSBkYXRhIG11dGF0aW9uIEFQSSBjYW4gYmVcbiAqIHVzZWQsIGFwcGx5aW5nIHRoaXMgbWl4aW4gd2lsbCBhbGxvdyBQb2x5bWVyIHRvIHNraXAgZGlydHkgY2hlY2tpbmcgZm9yXG4gKiBvYmplY3RzIGFuZCBhcnJheXMgKGFsd2F5cyBjb25zaWRlciB0aGVtIHRvIGJlIFwiZGlydHlcIikuICBUaGlzIGFsbG93cyBhXG4gKiB1c2VyIHRvIG1ha2UgYSBkZWVwIG1vZGlmaWNhdGlvbiB0byBhIGJvdW5kIG9iamVjdCBncmFwaCwgYW5kIHRoZW4gZWl0aGVyXG4gKiBzaW1wbHkgcmUtc2V0IHRoZSBvYmplY3QgKGUuZy4gYHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zYCkgb3IgY2FsbCBgbm90aWZ5UGF0aGBcbiAqIChlLmcuIGB0aGlzLm5vdGlmeVBhdGgoJ2l0ZW1zJylgKSB0byB1cGRhdGUgdGhlIHRyZWUuICBOb3RlIHRoYXQgYWxsXG4gKiBlbGVtZW50cyB0aGF0IHdpc2ggdG8gYmUgdXBkYXRlZCBiYXNlZCBvbiBkZWVwIG11dGF0aW9ucyBtdXN0IGFwcGx5IHRoaXNcbiAqIG1peGluIG9yIG90aGVyd2lzZSBza2lwIHN0cmljdCBkaXJ0eSBjaGVja2luZyBmb3Igb2JqZWN0cy9hcnJheXMuXG4gKiBTcGVjaWZpY2FsbHksIGFueSBlbGVtZW50cyBpbiB0aGUgYmluZGluZyB0cmVlIGJldHdlZW4gdGhlIHNvdXJjZSBvZiBhXG4gKiBtdXRhdGlvbiBhbmQgdGhlIGNvbnN1bXB0aW9uIG9mIGl0IG11c3QgZW5hYmxlIHRoaXMgbWl4aW4gb3IgYXBwbHkgdGhlXG4gKiBgTXV0YWJsZURhdGFgIG1peGluLlxuICpcbiAqIFdoaWxlIHRoaXMgbWl4aW4gYWRkcyB0aGUgYWJpbGl0eSB0byBmb3JnbyBPYmplY3QvQXJyYXkgZGlydHkgY2hlY2tpbmcsXG4gKiB0aGUgYG11dGFibGVEYXRhYCBmbGFnIGRlZmF1bHRzIHRvIGZhbHNlIGFuZCBtdXN0IGJlIHNldCBvbiB0aGUgaW5zdGFuY2UuXG4gKlxuICogTm90ZSwgdGhlIHBlcmZvcm1hbmNlIGNoYXJhY3RlcmlzdGljcyBvZiBwcm9wYWdhdGluZyBsYXJnZSBvYmplY3QgZ3JhcGhzXG4gKiB3aWxsIGJlIHdvcnNlIGJ5IHJlbHlpbmcgb24gYG11dGFibGVEYXRhOiB0cnVlYCBhcyBvcHBvc2VkIHRvIHVzaW5nXG4gKiBzdHJpY3QgZGlydHkgY2hlY2tpbmcgd2l0aCBpbW11dGFibGUgcGF0dGVybnMgb3IgUG9seW1lcidzIHBhdGggbm90aWZpY2F0aW9uXG4gKiBBUEkuXG4gKlxuICogQG1peGluRnVuY3Rpb25cbiAqIEBwb2x5bWVyXG4gKiBAc3VtbWFyeSBFbGVtZW50IGNsYXNzIG1peGluIHRvIG9wdGlvbmFsbHkgc2tpcCBzdHJpY3QgZGlydHktY2hlY2tpbmdcbiAqICAgZm9yIG9iamVjdHMgYW5kIGFycmF5c1xuICovXG5leHBvcnQgY29uc3QgT3B0aW9uYWxNdXRhYmxlRGF0YSA9IGRlZHVwaW5nTWl4aW4oc3VwZXJDbGFzcyA9PiB7XG5cbiAgLyoqXG4gICAqIEBtaXhpbkNsYXNzXG4gICAqIEBwb2x5bWVyXG4gICAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX09wdGlvbmFsTXV0YWJsZURhdGF9XG4gICAqL1xuICBjbGFzcyBPcHRpb25hbE11dGFibGVEYXRhIGV4dGVuZHMgc3VwZXJDbGFzcyB7XG5cbiAgICAvKiogQG5vY29sbGFwc2UgKi9cbiAgICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAvKipcbiAgICAgICAgICogSW5zdGFuY2UtbGV2ZWwgZmxhZyBmb3IgY29uZmlndXJpbmcgdGhlIGRpcnR5LWNoZWNraW5nIHN0cmF0ZWd5XG4gICAgICAgICAqIGZvciB0aGlzIGVsZW1lbnQuICBXaGVuIHRydWUsIE9iamVjdHMgYW5kIEFycmF5cyB3aWxsIHNraXAgZGlydHlcbiAgICAgICAgICogY2hlY2tpbmcsIG90aGVyd2lzZSBzdHJpY3QgZXF1YWxpdHkgY2hlY2tpbmcgd2lsbCBiZSB1c2VkLlxuICAgICAgICAgKi9cbiAgICAgICAgbXV0YWJsZURhdGE6IEJvb2xlYW5cbiAgICAgIH07XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogT3ZlcnJpZGVzIGBQcm9wZXJ0eUVmZmVjdHNgIHRvIHByb3ZpZGUgb3B0aW9uIGZvciBza2lwcGluZ1xuICAgICAqIHN0cmljdCBlcXVhbGl0eSBjaGVja2luZyBmb3IgT2JqZWN0cyBhbmQgQXJyYXlzLlxuICAgICAqXG4gICAgICogV2hlbiBgdGhpcy5tdXRhYmxlRGF0YWAgaXMgdHJ1ZSBvbiB0aGlzIGluc3RhbmNlLCB0aGlzIG1ldGhvZFxuICAgICAqIHB1bGxzIHRoZSB2YWx1ZSB0byBkaXJ0eSBjaGVjayBhZ2FpbnN0IGZyb20gdGhlIGBfX2RhdGFUZW1wYCBjYWNoZVxuICAgICAqIChyYXRoZXIgdGhhbiB0aGUgbm9ybWFsIGBfX2RhdGFgIGNhY2hlKSBmb3IgT2JqZWN0cy4gIFNpbmNlIHRoZSB0ZW1wXG4gICAgICogY2FjaGUgaXMgY2xlYXJlZCBhdCB0aGUgZW5kIG9mIGEgdHVybiwgdGhpcyBpbXBsZW1lbnRhdGlvbiBhbGxvd3NcbiAgICAgKiBzaWRlLWVmZmVjdHMgb2YgZGVlcCBvYmplY3QgY2hhbmdlcyB0byBiZSBwcm9jZXNzZWQgYnkgcmUtc2V0dGluZyB0aGVcbiAgICAgKiBzYW1lIG9iamVjdCAodXNpbmcgdGhlIHRlbXAgY2FjaGUgYXMgYW4gaW4tdHVybiBiYWNrc3RvcCB0byBwcmV2ZW50XG4gICAgICogY3ljbGVzIGR1ZSB0byAyLXdheSBub3RpZmljYXRpb24pLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyBwcm9wZXJ0eSB2YWx1ZVxuICAgICAqIEBwYXJhbSB7Kn0gb2xkIFByZXZpb3VzIHByb3BlcnR5IHZhbHVlXG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcHJvcGVydHkgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBjaGFuZ2VcbiAgICAgKiBAcHJvdGVjdGVkXG4gICAgICovXG4gICAgX3Nob3VsZFByb3BlcnR5Q2hhbmdlKHByb3BlcnR5LCB2YWx1ZSwgb2xkKSB7XG4gICAgICByZXR1cm4gbXV0YWJsZVByb3BlcnR5Q2hhbmdlKHRoaXMsIHByb3BlcnR5LCB2YWx1ZSwgb2xkLCB0aGlzLm11dGFibGVEYXRhKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gT3B0aW9uYWxNdXRhYmxlRGF0YTtcblxufSk7XG5cbi8vIEV4cG9ydCBmb3IgdXNlIGJ5IGxlZ2FjeSBiZWhhdmlvclxuTXV0YWJsZURhdGEuX211dGFibGVQcm9wZXJ0eUNoYW5nZSA9IG11dGFibGVQcm9wZXJ0eUNoYW5nZTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuXG4vKipcbiAqIE1vZHVsZSBmb3IgcHJlcGFyaW5nIGFuZCBzdGFtcGluZyBpbnN0YW5jZXMgb2YgdGVtcGxhdGVzIHRoYXQgdXRpbGl6ZVxuICogUG9seW1lcidzIGRhdGEtYmluZGluZyBhbmQgZGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXIgZmVhdHVyZXMuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgLy8gR2V0IGEgdGVtcGxhdGUgZnJvbSBzb21ld2hlcmUsIGUuZy4gbGlnaHQgRE9NXG4gKiAgICAgbGV0IHRlbXBsYXRlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpO1xuICogICAgIC8vIFByZXBhcmUgdGhlIHRlbXBsYXRlXG4gKiAgICAgbGV0IFRlbXBsYXRlQ2xhc3MgPSBUZW1wbGF0aXplLnRlbXBsYXRpemUodGVtcGxhdGUpO1xuICogICAgIC8vIEluc3RhbmNlIHRoZSB0ZW1wbGF0ZSB3aXRoIGFuIGluaXRpYWwgZGF0YSBtb2RlbFxuICogICAgIGxldCBpbnN0YW5jZSA9IG5ldyBUZW1wbGF0ZUNsYXNzKHtteVByb3A6ICdpbml0aWFsJ30pO1xuICogICAgIC8vIEluc2VydCB0aGUgaW5zdGFuY2UncyBET00gc29tZXdoZXJlLCBlLmcuIGVsZW1lbnQncyBzaGFkb3cgRE9NXG4gKiAgICAgdGhpcy5zaGFkb3dSb290LmFwcGVuZENoaWxkKGluc3RhbmNlLnJvb3QpO1xuICogICAgIC8vIENoYW5naW5nIGEgcHJvcGVydHkgb24gdGhlIGluc3RhbmNlIHdpbGwgcHJvcGFnYXRlIHRvIGJpbmRpbmdzXG4gKiAgICAgLy8gaW4gdGhlIHRlbXBsYXRlXG4gKiAgICAgaW5zdGFuY2UubXlQcm9wID0gJ25ldyB2YWx1ZSc7XG4gKlxuICogVGhlIGBvcHRpb25zYCBkaWN0aW9uYXJ5IHBhc3NlZCB0byBgdGVtcGxhdGl6ZWAgYWxsb3dzIGZvciBjdXN0b21pemluZ1xuICogZmVhdHVyZXMgb2YgdGhlIGdlbmVyYXRlZCB0ZW1wbGF0ZSBjbGFzcywgaW5jbHVkaW5nIGhvdyBvdXRlci1zY29wZSBob3N0XG4gKiBwcm9wZXJ0aWVzIHNob3VsZCBiZSBmb3J3YXJkZWQgaW50byB0ZW1wbGF0ZSBpbnN0YW5jZXMsIGhvdyBhbnkgaW5zdGFuY2VcbiAqIHByb3BlcnRpZXMgYWRkZWQgaW50byB0aGUgdGVtcGxhdGUncyBzY29wZSBzaG91bGQgYmUgbm90aWZpZWQgb3V0IHRvXG4gKiB0aGUgaG9zdCwgYW5kIHdoZXRoZXIgdGhlIGluc3RhbmNlIHNob3VsZCBiZSBkZWNvcmF0ZWQgYXMgYSBcInBhcmVudCBtb2RlbFwiXG4gKiBvZiBhbnkgZXZlbnQgaGFuZGxlcnMuXG4gKlxuICogICAgIC8vIEN1c3RvbWl6ZSBwcm9wZXJ0eSBmb3J3YXJkaW5nIGFuZCBldmVudCBtb2RlbCBkZWNvcmF0aW9uXG4gKiAgICAgbGV0IFRlbXBsYXRlQ2xhc3MgPSBUZW1wbGF0aXplLnRlbXBsYXRpemUodGVtcGxhdGUsIHRoaXMsIHtcbiAqICAgICAgIHBhcmVudE1vZGVsOiB0cnVlLFxuICogICAgICAgZm9yd2FyZEhvc3RQcm9wKHByb3BlcnR5LCB2YWx1ZSkgey4uLn0sXG4gKiAgICAgICBpbnN0YW5jZVByb3BzOiB7Li4ufSxcbiAqICAgICAgIG5vdGlmeUluc3RhbmNlUHJvcChpbnN0YW5jZSwgcHJvcGVydHksIHZhbHVlKSB7Li4ufSxcbiAqICAgICB9KTtcbiAqXG4gKiBAc3VtbWFyeSBNb2R1bGUgZm9yIHByZXBhcmluZyBhbmQgc3RhbXBpbmcgaW5zdGFuY2VzIG9mIHRlbXBsYXRlc1xuICogICB1dGlsaXppbmcgUG9seW1lciB0ZW1wbGF0aW5nIGZlYXR1cmVzLlxuICovXG5cbmltcG9ydCAnLi9ib290LmpzJztcblxuaW1wb3J0IHsgUHJvcGVydHlFZmZlY3RzIH0gZnJvbSAnLi4vbWl4aW5zL3Byb3BlcnR5LWVmZmVjdHMuanMnO1xuaW1wb3J0IHsgTXV0YWJsZURhdGEgfSBmcm9tICcuLi9taXhpbnMvbXV0YWJsZS1kYXRhLmpzJztcbmltcG9ydCB7IHN0cmljdFRlbXBsYXRlUG9saWN5LCBsZWdhY3lXYXJuaW5ncyB9IGZyb20gJy4vc2V0dGluZ3MuanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4vd3JhcC5qcyc7XG5cbi8vIEJhc2UgY2xhc3MgZm9yIEhUTUxUZW1wbGF0ZUVsZW1lbnQgZXh0ZW5zaW9uIHRoYXQgaGFzIHByb3BlcnR5IGVmZmVjdHNcbi8vIG1hY2hpbmVyeSBmb3IgcHJvcGFnYXRpbmcgaG9zdCBwcm9wZXJ0aWVzIHRvIGNoaWxkcmVuLiBUaGlzIGlzIGFuIEVTNVxuLy8gY2xhc3Mgb25seSBiZWNhdXNlIEJhYmVsIChpbmNvcnJlY3RseSkgcmVxdWlyZXMgc3VwZXIoKSBpbiB0aGUgY2xhc3Ncbi8vIGNvbnN0cnVjdG9yIGV2ZW4gdGhvdWdoIG5vIGB0aGlzYCBpcyB1c2VkIGFuZCBpdCByZXR1cm5zIGFuIGluc3RhbmNlLlxubGV0IG5ld0luc3RhbmNlID0gbnVsbDtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIHtIVE1MVGVtcGxhdGVFbGVtZW50fVxuICogQHByaXZhdGVcbiAqL1xuZnVuY3Rpb24gSFRNTFRlbXBsYXRlRWxlbWVudEV4dGVuc2lvbigpIHsgcmV0dXJuIG5ld0luc3RhbmNlOyB9XG5IVE1MVGVtcGxhdGVFbGVtZW50RXh0ZW5zaW9uLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoSFRNTFRlbXBsYXRlRWxlbWVudC5wcm90b3R5cGUsIHtcbiAgY29uc3RydWN0b3I6IHtcbiAgICB2YWx1ZTogSFRNTFRlbXBsYXRlRWxlbWVudEV4dGVuc2lvbixcbiAgICB3cml0YWJsZTogdHJ1ZVxuICB9XG59KTtcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c31cbiAqIEBleHRlbmRzIHtIVE1MVGVtcGxhdGVFbGVtZW50RXh0ZW5zaW9ufVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgRGF0YVRlbXBsYXRlID0gUHJvcGVydHlFZmZlY3RzKEhUTUxUZW1wbGF0ZUVsZW1lbnRFeHRlbnNpb24pO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGltcGxlbWVudHMge1BvbHltZXJfTXV0YWJsZURhdGF9XG4gKiBAZXh0ZW5kcyB7RGF0YVRlbXBsYXRlfVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgTXV0YWJsZURhdGFUZW1wbGF0ZSA9IE11dGFibGVEYXRhKERhdGFUZW1wbGF0ZSk7XG5cbi8vIEFwcGxpZXMgYSBEYXRhVGVtcGxhdGUgc3ViY2xhc3MgdG8gYSA8dGVtcGxhdGU+IGluc3RhbmNlXG5mdW5jdGlvbiB1cGdyYWRlVGVtcGxhdGUodGVtcGxhdGUsIGNvbnN0cnVjdG9yKSB7XG4gIG5ld0luc3RhbmNlID0gdGVtcGxhdGU7XG4gIE9iamVjdC5zZXRQcm90b3R5cGVPZih0ZW1wbGF0ZSwgY29uc3RydWN0b3IucHJvdG90eXBlKTtcbiAgbmV3IGNvbnN0cnVjdG9yKCk7XG4gIG5ld0luc3RhbmNlID0gbnVsbDtcbn1cblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBUZW1wbGF0ZUluc3RhbmNlLlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyB7SFRNTEVsZW1lbnR9XG4gKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9XG4gKiBAcHJpdmF0ZVxuICovXG5jb25zdCB0ZW1wbGF0ZUluc3RhbmNlQmFzZSA9IFByb3BlcnR5RWZmZWN0cyhjbGFzcyB7fSk7XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG93SGlkZUNoaWxkcmVuKGhpZGUsIGNoaWxkcmVuKSB7XG4gIGZvciAobGV0IGk9MDsgaTxjaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgIGxldCBuID0gY2hpbGRyZW5baV07XG4gICAgLy8gSWdub3JlIG5vbi1jaGFuZ2VzXG4gICAgaWYgKEJvb2xlYW4oaGlkZSkgIT0gQm9vbGVhbihuLl9faGlkZVRlbXBsYXRlQ2hpbGRyZW5fXykpIHtcbiAgICAgIC8vIGNsZWFyIGFuZCByZXN0b3JlIHRleHRcbiAgICAgIGlmIChuLm5vZGVUeXBlID09PSBOb2RlLlRFWFRfTk9ERSkge1xuICAgICAgICBpZiAoaGlkZSkge1xuICAgICAgICAgIG4uX19wb2x5bWVyVGV4dENvbnRlbnRfXyA9IG4udGV4dENvbnRlbnQ7XG4gICAgICAgICAgbi50ZXh0Q29udGVudCA9ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG4udGV4dENvbnRlbnQgPSBuLl9fcG9seW1lclRleHRDb250ZW50X187XG4gICAgICAgIH1cbiAgICAgIC8vIHJlbW92ZSBhbmQgcmVwbGFjZSBzbG90XG4gICAgICB9IGVsc2UgaWYgKG4ubG9jYWxOYW1lID09PSAnc2xvdCcpIHtcbiAgICAgICAgaWYgKGhpZGUpIHtcbiAgICAgICAgICBuLl9fcG9seW1lclJlcGxhY2VkX18gPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCdoaWRkZW4tc2xvdCcpO1xuICAgICAgICAgIHdyYXAod3JhcChuKS5wYXJlbnROb2RlKS5yZXBsYWNlQ2hpbGQobi5fX3BvbHltZXJSZXBsYWNlZF9fLCBuKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCByZXBsYWNlID0gbi5fX3BvbHltZXJSZXBsYWNlZF9fO1xuICAgICAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgICAgICB3cmFwKHdyYXAocmVwbGFjZSkucGFyZW50Tm9kZSkucmVwbGFjZUNoaWxkKG4sIHJlcGxhY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gaGlkZSBhbmQgc2hvdyBub2Rlc1xuICAgICAgZWxzZSBpZiAobi5zdHlsZSkge1xuICAgICAgICBpZiAoaGlkZSkge1xuICAgICAgICAgIG4uX19wb2x5bWVyRGlzcGxheV9fID0gbi5zdHlsZS5kaXNwbGF5O1xuICAgICAgICAgIG4uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuLnN0eWxlLmRpc3BsYXkgPSBuLl9fcG9seW1lckRpc3BsYXlfXztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBuLl9faGlkZVRlbXBsYXRlQ2hpbGRyZW5fXyA9IGhpZGU7XG4gICAgaWYgKG4uX3Nob3dIaWRlQ2hpbGRyZW4pIHtcbiAgICAgIG4uX3Nob3dIaWRlQ2hpbGRyZW4oaGlkZSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHBvbHltZXJcbiAqIEBjdXN0b21FbGVtZW50XG4gKiBAYXBwbGllc01peGluIFByb3BlcnR5RWZmZWN0c1xuICogQHVucmVzdHJpY3RlZFxuICovXG5jbGFzcyBUZW1wbGF0ZUluc3RhbmNlQmFzZSBleHRlbmRzIHRlbXBsYXRlSW5zdGFuY2VCYXNlIHtcbiAgY29uc3RydWN0b3IocHJvcHMpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuX2NvbmZpZ3VyZVByb3BlcnRpZXMocHJvcHMpO1xuICAgIC8qKiBAdHlwZSB7IVN0YW1wZWRUZW1wbGF0ZX0gKi9cbiAgICB0aGlzLnJvb3QgPSB0aGlzLl9zdGFtcFRlbXBsYXRlKHRoaXMuX19kYXRhSG9zdCk7XG4gICAgLy8gU2F2ZSBsaXN0IG9mIHN0YW1wZWQgY2hpbGRyZW5cbiAgICBsZXQgY2hpbGRyZW4gPSBbXTtcbiAgICAvKiogQHN1cHByZXNzIHtpbnZhbGlkQ2FzdHN9ICovXG4gICAgdGhpcy5jaGlsZHJlbiA9IC8qKiBAdHlwZSB7IU5vZGVMaXN0fSAqLyAoY2hpbGRyZW4pO1xuICAgIC8vIFBvbHltZXIgMS54IGRpZCBub3QgdXNlIGBQb2x5bWVyLmRvbWAgaGVyZSBzbyBub3QgYm90aGVyaW5nLlxuICAgIGZvciAobGV0IG4gPSB0aGlzLnJvb3QuZmlyc3RDaGlsZDsgbjsgbj1uLm5leHRTaWJsaW5nKSB7XG4gICAgICBjaGlsZHJlbi5wdXNoKG4pO1xuICAgICAgbi5fX3RlbXBsYXRpemVJbnN0YW5jZSA9IHRoaXM7XG4gICAgfVxuICAgIGlmICh0aGlzLl9fdGVtcGxhdGl6ZU93bmVyICYmXG4gICAgICB0aGlzLl9fdGVtcGxhdGl6ZU93bmVyLl9faGlkZVRlbXBsYXRlQ2hpbGRyZW5fXykge1xuICAgICAgdGhpcy5fc2hvd0hpZGVDaGlsZHJlbih0cnVlKTtcbiAgICB9XG4gICAgLy8gRmx1c2ggcHJvcHMgb25seSB3aGVuIHByb3BzIGFyZSBwYXNzZWQgaWYgaW5zdGFuY2UgcHJvcHMgZXhpc3RcbiAgICAvLyBvciB3aGVuIHRoZXJlIGlzbid0IGluc3RhbmNlIHByb3BzLlxuICAgIGxldCBvcHRpb25zID0gdGhpcy5fX3RlbXBsYXRpemVPcHRpb25zO1xuICAgIGlmICgocHJvcHMgJiYgb3B0aW9ucy5pbnN0YW5jZVByb3BzKSB8fCAhb3B0aW9ucy5pbnN0YW5jZVByb3BzKSB7XG4gICAgICB0aGlzLl9lbmFibGVQcm9wZXJ0aWVzKCk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBDb25maWd1cmUgdGhlIGdpdmVuIGBwcm9wc2AgYnkgY2FsbGluZyBgX3NldFBlbmRpbmdQcm9wZXJ0eWAuIEFsc29cbiAgICogc2V0cyBhbnkgcHJvcGVydGllcyBzdG9yZWQgaW4gYF9faG9zdFByb3BzYC5cbiAgICogQHByaXZhdGVcbiAgICogQHBhcmFtIHtPYmplY3R9IHByb3BzIE9iamVjdCBvZiBwcm9wZXJ0eSBuYW1lLXZhbHVlIHBhaXJzIHRvIHNldC5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIF9jb25maWd1cmVQcm9wZXJ0aWVzKHByb3BzKSB7XG4gICAgbGV0IG9wdGlvbnMgPSB0aGlzLl9fdGVtcGxhdGl6ZU9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMuZm9yd2FyZEhvc3RQcm9wKSB7XG4gICAgICBmb3IgKGxldCBocHJvcCBpbiB0aGlzLl9faG9zdFByb3BzKSB7XG4gICAgICAgIHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eShocHJvcCwgdGhpcy5fX2RhdGFIb3N0WydfaG9zdF8nICsgaHByb3BdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gQW55IGluc3RhbmNlIHByb3BzIHBhc3NlZCBpbiB0aGUgY29uc3RydWN0b3Igd2lsbCBvdmVyd3JpdGUgaG9zdCBwcm9wcztcbiAgICAvLyBub3JtYWxseSB0aGlzIHdvdWxkIGJlIGEgdXNlciBlcnJvciBidXQgd2UgZG9uJ3Qgc3BlY2lmaWNhbGx5IGZpbHRlciB0aGVtXG4gICAgZm9yIChsZXQgaXByb3AgaW4gcHJvcHMpIHtcbiAgICAgIHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eShpcHJvcCwgcHJvcHNbaXByb3BdKTtcbiAgICB9XG4gIH1cbiAgLyoqXG4gICAqIEZvcndhcmRzIGEgaG9zdCBwcm9wZXJ0eSB0byB0aGlzIGluc3RhbmNlLiAgVGhpcyBtZXRob2Qgc2hvdWxkIGJlXG4gICAqIGNhbGxlZCBvbiBpbnN0YW5jZXMgZnJvbSB0aGUgYG9wdGlvbnMuZm9yd2FyZEhvc3RQcm9wYCBjYWxsYmFja1xuICAgKiB0byBwcm9wYWdhdGUgY2hhbmdlcyBvZiBob3N0IHByb3BlcnRpZXMgdG8gZWFjaCBpbnN0YW5jZS5cbiAgICpcbiAgICogTm90ZSB0aGlzIG1ldGhvZCBlbnF1ZXVlcyB0aGUgY2hhbmdlLCB3aGljaCBhcmUgZmx1c2hlZCBhcyBhIGJhdGNoLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSBvciBwYXRoIG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSBvZiB0aGUgcHJvcGVydHkgdG8gZm9yd2FyZFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgZm9yd2FyZEhvc3RQcm9wKHByb3AsIHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuX3NldFBlbmRpbmdQcm9wZXJ0eU9yUGF0aChwcm9wLCB2YWx1ZSwgZmFsc2UsIHRydWUpKSB7XG4gICAgICB0aGlzLl9fZGF0YUhvc3QuX2VucXVldWVDbGllbnQodGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHBvaW50IGZvciBhZGRpbmcgY3VzdG9tIG9yIHNpbXVsYXRlZCBldmVudCBoYW5kbGluZy5cbiAgICpcbiAgICogQG92ZXJyaWRlXG4gICAqIEBwYXJhbSB7IU5vZGV9IG5vZGUgTm9kZSB0byBhZGQgZXZlbnQgbGlzdGVuZXIgdG9cbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50TmFtZSBOYW1lIG9mIGV2ZW50XG4gICAqIEBwYXJhbSB7ZnVuY3Rpb24oIUV2ZW50KTp2b2lkfSBoYW5kbGVyIExpc3RlbmVyIGZ1bmN0aW9uIHRvIGFkZFxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgX2FkZEV2ZW50TGlzdGVuZXJUb05vZGUobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyKSB7XG4gICAgaWYgKHRoaXMuX21ldGhvZEhvc3QgJiYgdGhpcy5fX3RlbXBsYXRpemVPcHRpb25zLnBhcmVudE1vZGVsKSB7XG4gICAgICAvLyBJZiB0aGlzIGluc3RhbmNlIHNob3VsZCBiZSBjb25zaWRlcmVkIGEgcGFyZW50IG1vZGVsLCBkZWNvcmF0ZVxuICAgICAgLy8gZXZlbnRzIHRoaXMgdGVtcGxhdGUgaW5zdGFuY2UgYXMgYG1vZGVsYFxuICAgICAgdGhpcy5fbWV0aG9kSG9zdC5fYWRkRXZlbnRMaXN0ZW5lclRvTm9kZShub2RlLCBldmVudE5hbWUsIChlKSA9PiB7XG4gICAgICAgIGUubW9kZWwgPSB0aGlzO1xuICAgICAgICBoYW5kbGVyKGUpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE90aGVyd2lzZSBkZWxlZ2F0ZSB0byB0aGUgdGVtcGxhdGUncyBob3N0ICh3aGljaCBjb3VsZCBiZSlcbiAgICAgIC8vIGFub3RoZXIgdGVtcGxhdGUgaW5zdGFuY2VcbiAgICAgIGxldCB0ZW1wbGF0ZUhvc3QgPSB0aGlzLl9fZGF0YUhvc3QuX19kYXRhSG9zdDtcbiAgICAgIGlmICh0ZW1wbGF0ZUhvc3QpIHtcbiAgICAgICAgdGVtcGxhdGVIb3N0Ll9hZGRFdmVudExpc3RlbmVyVG9Ob2RlKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBTaG93cyBvciBoaWRlcyB0aGUgdGVtcGxhdGUgaW5zdGFuY2UgdG9wIGxldmVsIGNoaWxkIGVsZW1lbnRzLiBGb3JcbiAgICogdGV4dCBub2RlcywgYHRleHRDb250ZW50YCBpcyByZW1vdmVkIHdoaWxlIFwiaGlkZGVuXCIgYW5kIHJlcGxhY2VkIHdoZW5cbiAgICogXCJzaG93bi5cIlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhpZGUgU2V0IHRvIHRydWUgdG8gaGlkZSB0aGUgY2hpbGRyZW47XG4gICAqIHNldCB0byBmYWxzZSB0byBzaG93IHRoZW0uXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9zaG93SGlkZUNoaWxkcmVuKGhpZGUpIHtcbiAgICBzaG93SGlkZUNoaWxkcmVuKGhpZGUsIHRoaXMuY2hpbGRyZW4pO1xuICB9XG4gIC8qKlxuICAgKiBPdmVycmlkZXMgZGVmYXVsdCBwcm9wZXJ0eS1lZmZlY3RzIGltcGxlbWVudGF0aW9uIHRvIGludGVyY2VwdFxuICAgKiB0ZXh0Q29udGVudCBiaW5kaW5ncyB3aGlsZSBjaGlsZHJlbiBhcmUgXCJoaWRkZW5cIiBhbmQgY2FjaGUgaW5cbiAgICogcHJpdmF0ZSBzdG9yYWdlIGZvciBsYXRlciByZXRyaWV2YWwuXG4gICAqXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcGFyYW0geyFOb2RlfSBub2RlIFRoZSBub2RlIHRvIHNldCBhIHByb3BlcnR5IG9uXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wIFRoZSBwcm9wZXJ0eSB0byBzZXRcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0XG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBwcm90ZWN0ZWRcbiAgICovXG4gIF9zZXRVbm1hbmFnZWRQcm9wZXJ0eVRvTm9kZShub2RlLCBwcm9wLCB2YWx1ZSkge1xuICAgIGlmIChub2RlLl9faGlkZVRlbXBsYXRlQ2hpbGRyZW5fXyAmJlxuICAgICAgICBub2RlLm5vZGVUeXBlID09IE5vZGUuVEVYVF9OT0RFICYmIHByb3AgPT0gJ3RleHRDb250ZW50Jykge1xuICAgICAgbm9kZS5fX3BvbHltZXJUZXh0Q29udGVudF9fID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1cGVyLl9zZXRVbm1hbmFnZWRQcm9wZXJ0eVRvTm9kZShub2RlLCBwcm9wLCB2YWx1ZSk7XG4gICAgfVxuICB9XG4gIC8qKlxuICAgKiBGaW5kIHRoZSBwYXJlbnQgbW9kZWwgb2YgdGhpcyB0ZW1wbGF0ZSBpbnN0YW5jZS4gIFRoZSBwYXJlbnQgbW9kZWxcbiAgICogaXMgZWl0aGVyIGFub3RoZXIgdGVtcGxhdGl6ZSBpbnN0YW5jZSB0aGF0IGhhZCBvcHRpb24gYHBhcmVudE1vZGVsOiB0cnVlYCxcbiAgICogb3IgZWxzZSB0aGUgaG9zdCBlbGVtZW50LlxuICAgKlxuICAgKiBAcmV0dXJuIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9IFRoZSBwYXJlbnQgbW9kZWwgb2YgdGhpcyBpbnN0YW5jZVxuICAgKi9cbiAgZ2V0IHBhcmVudE1vZGVsKCkge1xuICAgIGxldCBtb2RlbCA9IHRoaXMuX19wYXJlbnRNb2RlbDtcbiAgICBpZiAoIW1vZGVsKSB7XG4gICAgICBsZXQgb3B0aW9ucztcbiAgICAgIG1vZGVsID0gdGhpcztcbiAgICAgIGRvIHtcbiAgICAgICAgLy8gQSB0ZW1wbGF0ZSBpbnN0YW5jZSdzIGBfX2RhdGFIb3N0YCBpcyBhIDx0ZW1wbGF0ZT5cbiAgICAgICAgLy8gYG1vZGVsLl9fZGF0YUhvc3QuX19kYXRhSG9zdGAgaXMgdGhlIHRlbXBsYXRlJ3MgaG9zdFxuICAgICAgICBtb2RlbCA9IG1vZGVsLl9fZGF0YUhvc3QuX19kYXRhSG9zdDtcbiAgICAgIH0gd2hpbGUgKChvcHRpb25zID0gbW9kZWwuX190ZW1wbGF0aXplT3B0aW9ucykgJiYgIW9wdGlvbnMucGFyZW50TW9kZWwpO1xuICAgICAgdGhpcy5fX3BhcmVudE1vZGVsID0gbW9kZWw7XG4gICAgfVxuICAgIHJldHVybiBtb2RlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHViIG9mIEhUTUxFbGVtZW50J3MgYGRpc3BhdGNoRXZlbnRgLCBzbyB0aGF0IGVmZmVjdHMgdGhhdCBtYXlcbiAgICogZGlzcGF0Y2ggZXZlbnRzIHNhZmVseSBuby1vcC5cbiAgICpcbiAgICogQHBhcmFtIHtFdmVudH0gZXZlbnQgRXZlbnQgdG8gZGlzcGF0Y2hcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gQWx3YXlzIHRydWUuXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgIGRpc3BhdGNoRXZlbnQoZXZlbnQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG4vKiogQHR5cGUgeyFEYXRhVGVtcGxhdGV9ICovXG5UZW1wbGF0ZUluc3RhbmNlQmFzZS5wcm90b3R5cGUuX19kYXRhSG9zdDtcbi8qKiBAdHlwZSB7IVRlbXBsYXRpemVPcHRpb25zfSAqL1xuVGVtcGxhdGVJbnN0YW5jZUJhc2UucHJvdG90eXBlLl9fdGVtcGxhdGl6ZU9wdGlvbnM7XG4vKiogQHR5cGUgeyFQb2x5bWVyX1Byb3BlcnR5RWZmZWN0c30gKi9cblRlbXBsYXRlSW5zdGFuY2VCYXNlLnByb3RvdHlwZS5fbWV0aG9kSG9zdDtcbi8qKiBAdHlwZSB7IU9iamVjdH0gKi9cblRlbXBsYXRlSW5zdGFuY2VCYXNlLnByb3RvdHlwZS5fX3RlbXBsYXRpemVPd25lcjtcbi8qKiBAdHlwZSB7IU9iamVjdH0gKi9cblRlbXBsYXRlSW5zdGFuY2VCYXNlLnByb3RvdHlwZS5fX2hvc3RQcm9wcztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBleHRlbmRzIHtUZW1wbGF0ZUluc3RhbmNlQmFzZX1cbiAqIEBpbXBsZW1lbnRzIHtQb2x5bWVyX011dGFibGVEYXRhfVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgTXV0YWJsZVRlbXBsYXRlSW5zdGFuY2VCYXNlID0gTXV0YWJsZURhdGEoXG4gICAgLy8gVGhpcyBjYXN0IHNob3VsZG4ndCBiZSBuZWNjZXNzYXJ5LCBidXQgQ2xvc3VyZSBkb2Vzbid0IHVuZGVyc3RhbmQgdGhhdFxuICAgIC8vIFRlbXBsYXRlSW5zdGFuY2VCYXNlIGlzIGEgY29uc3RydWN0b3IgZnVuY3Rpb24uXG4gICAgLyoqIEB0eXBlIHtmdW5jdGlvbihuZXc6VGVtcGxhdGVJbnN0YW5jZUJhc2UpfSAqLyAoVGVtcGxhdGVJbnN0YW5jZUJhc2UpKTtcblxuZnVuY3Rpb24gZmluZE1ldGhvZEhvc3QodGVtcGxhdGUpIHtcbiAgLy8gVGVjaG5pY2FsbHkgdGhpcyBzaG91bGQgYmUgdGhlIG93bmVyIG9mIHRoZSBvdXRlcm1vc3QgdGVtcGxhdGUuXG4gIC8vIEluIHNoYWRvdyBkb20sIHRoaXMgaXMgYWx3YXlzIGdldFJvb3ROb2RlKCkuaG9zdCwgYnV0IHdlIGNhblxuICAvLyBhcHByb3hpbWF0ZSB0aGlzIHZpYSBjb29wZXJhdGlvbiB3aXRoIG91ciBkYXRhSG9zdCBhbHdheXMgc2V0dGluZ1xuICAvLyBgX21ldGhvZEhvc3RgIGFzIGxvbmcgYXMgdGhlcmUgd2VyZSBiaW5kaW5ncyAob3IgaWQncykgb24gdGhpc1xuICAvLyBpbnN0YW5jZSBjYXVzaW5nIGl0IHRvIGdldCBhIGRhdGFIb3N0LlxuICBsZXQgdGVtcGxhdGVIb3N0ID0gdGVtcGxhdGUuX19kYXRhSG9zdDtcbiAgcmV0dXJuIHRlbXBsYXRlSG9zdCAmJiB0ZW1wbGF0ZUhvc3QuX21ldGhvZEhvc3QgfHwgdGVtcGxhdGVIb3N0O1xufVxuXG4vKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuLyoqXG4gKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSBjbGFzcy5wcm90b3R5cGUgaXMgbm90IGRlZmluZWQgZm9yIHNvbWUgcmVhc29uXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVRlbXBsYXRpemVyQ2xhc3ModGVtcGxhdGUsIHRlbXBsYXRlSW5mbywgb3B0aW9ucykge1xuICAvKipcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBleHRlbmRzIHtUZW1wbGF0ZUluc3RhbmNlQmFzZX1cbiAgICovXG4gIGxldCB0ZW1wbGF0aXplckJhc2UgPSBvcHRpb25zLm11dGFibGVEYXRhID9cbiAgICBNdXRhYmxlVGVtcGxhdGVJbnN0YW5jZUJhc2UgOiBUZW1wbGF0ZUluc3RhbmNlQmFzZTtcblxuICAvLyBBZmZvcmRhbmNlIGZvciBnbG9iYWwgbWl4aW5zIG9udG8gVGVtcGxhdGl6ZUluc3RhbmNlXG4gIGlmICh0ZW1wbGF0aXplLm1peGluKSB7XG4gICAgdGVtcGxhdGl6ZXJCYXNlID0gdGVtcGxhdGl6ZS5taXhpbih0ZW1wbGF0aXplckJhc2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFub255bW91cyBjbGFzcyBjcmVhdGVkIGJ5IHRoZSB0ZW1wbGF0aXplXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbGV0IGtsYXNzID0gY2xhc3MgZXh0ZW5kcyB0ZW1wbGF0aXplckJhc2UgeyB9O1xuICAvKiogQG92ZXJyaWRlICovXG4gIGtsYXNzLnByb3RvdHlwZS5fX3RlbXBsYXRpemVPcHRpb25zID0gb3B0aW9ucztcbiAga2xhc3MucHJvdG90eXBlLl9iaW5kVGVtcGxhdGUodGVtcGxhdGUpO1xuICBhZGROb3RpZnlFZmZlY3RzKGtsYXNzLCB0ZW1wbGF0ZSwgdGVtcGxhdGVJbmZvLCBvcHRpb25zKTtcbiAgcmV0dXJuIGtsYXNzO1xufVxuXG4vKipcbiAqIEFkZHMgcHJvcGFnYXRlIGVmZmVjdHMgZnJvbSB0aGUgdGVtcGxhdGUgdG8gdGhlIHRlbXBsYXRlIGluc3RhbmNlIGZvclxuICogcHJvcGVydGllcyB0aGF0IHRoZSBob3N0IGJpbmRzIHRvIHRoZSB0ZW1wbGF0ZSB1c2luZyB0aGUgYF9ob3N0X2AgcHJlZml4LlxuICpcbiAqIEBzdXBwcmVzcyB7bWlzc2luZ1Byb3BlcnRpZXN9IGNsYXNzLnByb3RvdHlwZSBpcyBub3QgZGVmaW5lZCBmb3Igc29tZSByZWFzb25cbiAqL1xuZnVuY3Rpb24gYWRkUHJvcGFnYXRlRWZmZWN0cyh0YXJnZXQsIHRlbXBsYXRlSW5mbywgb3B0aW9ucywgbWV0aG9kSG9zdCkge1xuICBsZXQgdXNlckZvcndhcmRIb3N0UHJvcCA9IG9wdGlvbnMuZm9yd2FyZEhvc3RQcm9wO1xuICBpZiAodXNlckZvcndhcmRIb3N0UHJvcCAmJiB0ZW1wbGF0ZUluZm8uaGFzSG9zdFByb3BzKSB7XG4gICAgLy8gVW5kZXIgdGhlIGByZW1vdmVOZXN0ZWRUZW1wbGF0ZXNgIG9wdGltaXphdGlvbiwgYSBjdXN0b20gZWxlbWVudCBsaWtlXG4gICAgLy8gYGRvbS1pZmAgb3IgYGRvbS1yZXBlYXRgIGNhbiBpdHNlbGYgYmUgdHJlYXRlZCBhcyB0aGUgXCJ0ZW1wbGF0ZVwiOyB0aGlzXG4gICAgLy8gZmxhZyBpcyB1c2VkIHRvIHN3aXRjaCBiZXR3ZWVuIHVwZ3JhZGluZyBhIGA8dGVtcGxhdGU+YCB0byBiZSBhIHByb3BlcnR5XG4gICAgLy8gZWZmZWN0cyBjbGllbnQgdnMuIGFkZGluZyB0aGUgZWZmZWN0cyBkaXJlY3RseSB0byB0aGUgY3VzdG9tIGVsZW1lbnRcbiAgICBjb25zdCBpc1RlbXBsYXRlID0gdGFyZ2V0LmxvY2FsTmFtZSA9PSAndGVtcGxhdGUnO1xuICAgIC8vIFByb3ZpZGUgZGF0YSBBUEkgYW5kIHByb3BlcnR5IGVmZmVjdHMgb24gbWVtb2l6ZWQgdGVtcGxhdGUgY2xhc3NcbiAgICBsZXQga2xhc3MgPSB0ZW1wbGF0ZUluZm8udGVtcGxhdGl6ZVRlbXBsYXRlQ2xhc3M7XG4gICAgaWYgKCFrbGFzcykge1xuICAgICAgaWYgKGlzVGVtcGxhdGUpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAZXh0ZW5kcyB7RGF0YVRlbXBsYXRlfVxuICAgICAgICAgKi9cbiAgICAgICAgbGV0IHRlbXBsYXRpemVkQmFzZSA9XG4gICAgICAgICAgICBvcHRpb25zLm11dGFibGVEYXRhID8gTXV0YWJsZURhdGFUZW1wbGF0ZSA6IERhdGFUZW1wbGF0ZTtcblxuICAgICAgICAvLyBOT1RFOiBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8yOTI4LFxuICAgICAgICAvLyBjb21iaW5pbmcgdGhlIG5leHQgdHdvIGxpbmVzIGludG8gb25lIGFzc2lnbm1lbnQgY2F1c2VzIGEgc3B1cmlvdXNcbiAgICAgICAgLy8gdHlwZSBlcnJvci5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIGNsYXNzIFRlbXBsYXRpemVkVGVtcGxhdGUgZXh0ZW5kcyB0ZW1wbGF0aXplZEJhc2Uge31cbiAgICAgICAga2xhc3MgPSB0ZW1wbGF0ZUluZm8udGVtcGxhdGl6ZVRlbXBsYXRlQ2xhc3MgPSBUZW1wbGF0aXplZFRlbXBsYXRlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAgICAgKiBAZXh0ZW5kcyB7UG9seW1lckVsZW1lbnR9XG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCB0ZW1wbGF0aXplZEJhc2UgPSB0YXJnZXQuY29uc3RydWN0b3I7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgY2FjaGVkIHN1YmNsYXNzIG9mIHRoZSBiYXNlIGN1c3RvbSBlbGVtZW50IGNsYXNzIG9udG8gd2hpY2hcbiAgICAgICAgLy8gdG8gcHV0IHRoZSB0ZW1wbGF0ZS1zcGVjaWZpYyBwcm9wYWdhdGUgZWZmZWN0c1xuICAgICAgICAvLyBOT1RFOiBkdWUgdG8gaHR0cHM6Ly9naXRodWIuY29tL2dvb2dsZS9jbG9zdXJlLWNvbXBpbGVyL2lzc3Vlcy8yOTI4LFxuICAgICAgICAvLyBjb21iaW5pbmcgdGhlIG5leHQgdHdvIGxpbmVzIGludG8gb25lIGFzc2lnbm1lbnQgY2F1c2VzIGEgc3B1cmlvdXNcbiAgICAgICAgLy8gdHlwZSBlcnJvci5cbiAgICAgICAgLyoqIEBwcml2YXRlICovXG4gICAgICAgIGNsYXNzIFRlbXBsYXRpemVkVGVtcGxhdGVFeHRlbnNpb24gZXh0ZW5kcyB0ZW1wbGF0aXplZEJhc2Uge31cbiAgICAgICAga2xhc3MgPSB0ZW1wbGF0ZUluZm8udGVtcGxhdGl6ZVRlbXBsYXRlQ2xhc3MgPVxuICAgICAgICAgICAgVGVtcGxhdGl6ZWRUZW1wbGF0ZUV4dGVuc2lvbjtcbiAgICAgIH1cbiAgICAgIC8vIEFkZCB0ZW1wbGF0ZSAtID5pbnN0YW5jZXMgZWZmZWN0c1xuICAgICAgLy8gYW5kIGhvc3QgPC0gdGVtcGxhdGUgZWZmZWN0c1xuICAgICAgbGV0IGhvc3RQcm9wcyA9IHRlbXBsYXRlSW5mby5ob3N0UHJvcHM7XG4gICAgICBmb3IgKGxldCBwcm9wIGluIGhvc3RQcm9wcykge1xuICAgICAgICBrbGFzcy5wcm90b3R5cGUuX2FkZFByb3BlcnR5RWZmZWN0KCdfaG9zdF8nICsgcHJvcCxcbiAgICAgICAgICBrbGFzcy5wcm90b3R5cGUuUFJPUEVSVFlfRUZGRUNUX1RZUEVTLlBST1BBR0FURSxcbiAgICAgICAgICB7Zm46IGNyZWF0ZUZvcndhcmRIb3N0UHJvcEVmZmVjdChwcm9wLCB1c2VyRm9yd2FyZEhvc3RQcm9wKX0pO1xuICAgICAgICBrbGFzcy5wcm90b3R5cGUuX2NyZWF0ZU5vdGlmeWluZ1Byb3BlcnR5KCdfaG9zdF8nICsgcHJvcCk7XG4gICAgICB9XG4gICAgICBpZiAobGVnYWN5V2FybmluZ3MgJiYgbWV0aG9kSG9zdCkge1xuICAgICAgICB3YXJuT25VbmRlY2xhcmVkUHJvcGVydGllcyh0ZW1wbGF0ZUluZm8sIG9wdGlvbnMsIG1ldGhvZEhvc3QpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBNaXggYW55IHByZS1ib3VuZCBkYXRhIGludG8gX19kYXRhOyBubyBuZWVkIHRvIGZsdXNoIHRoaXMgdG9cbiAgICAvLyBpbnN0YW5jZXMgc2luY2UgdGhleSBwdWxsIGZyb20gdGhlIHRlbXBsYXRlIGF0IGluc3RhbmNlLXRpbWVcbiAgICBpZiAodGFyZ2V0Ll9fZGF0YVByb3RvKSB7XG4gICAgICAvLyBOb3RlLCBnZW5lcmFsbHkgYF9fZGF0YVByb3RvYCBjb3VsZCBiZSBjaGFpbmVkLCBidXQgaXQncyBndWFyYW50ZWVkXG4gICAgICAvLyB0byBub3QgYmUgc2luY2UgdGhpcyBpcyBhIHZhbmlsbGEgdGVtcGxhdGUgd2UganVzdCBhZGRlZCBlZmZlY3RzIHRvXG4gICAgICBPYmplY3QuYXNzaWduKHRhcmdldC5fX2RhdGEsIHRhcmdldC5fX2RhdGFQcm90byk7XG4gICAgfVxuICAgIGlmIChpc1RlbXBsYXRlKSB7XG4gICAgICB1cGdyYWRlVGVtcGxhdGUodGFyZ2V0LCBrbGFzcyk7XG4gICAgICAvLyBDbGVhciBhbnkgcGVuZGluZyBkYXRhIGZvciBwZXJmb3JtYW5jZVxuICAgICAgdGFyZ2V0Ll9fZGF0YVRlbXAgPSB7fTtcbiAgICAgIHRhcmdldC5fX2RhdGFQZW5kaW5nID0gbnVsbDtcbiAgICAgIHRhcmdldC5fX2RhdGFPbGQgPSBudWxsO1xuICAgICAgdGFyZ2V0Ll9lbmFibGVQcm9wZXJ0aWVzKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFN3aXp6bGUgdGhlIGNhY2hlZCBzdWJjbGFzcyBwcm90b3R5cGUgb250byB0aGUgY3VzdG9tIGVsZW1lbnRcbiAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0YXJnZXQsIGtsYXNzLnByb3RvdHlwZSk7XG4gICAgICAvLyBDaGVjayBmb3IgYW55IHByZS1ib3VuZCBpbnN0YW5jZSBob3N0IHByb3BlcnRpZXMsIGFuZCBkbyB0aGVcbiAgICAgIC8vIGluc3RhbmNlIHByb3BlcnR5IGRlbGV0ZS9hc3NpZ24gZGFuY2UgZm9yIHRob3NlIChkaXJlY3RseSBpbnRvIGRhdGE7XG4gICAgICAvLyBub3QgbmVlZCB0byBnbyB0aHJvdWdoIGFjY2Vzc29yIHNpbmNlIHRoZXkgYXJlIHB1bGxlZCBhdCBpbnN0YW5jZSB0aW1lKVxuICAgICAgY29uc3QgaG9zdFByb3BzID0gdGVtcGxhdGVJbmZvLmhvc3RQcm9wcztcbiAgICAgIGZvciAobGV0IHByb3AgaW4gaG9zdFByb3BzKSB7XG4gICAgICAgIHByb3AgPSAnX2hvc3RfJyArIHByb3A7XG4gICAgICAgIGlmIChwcm9wIGluIHRhcmdldCkge1xuICAgICAgICAgIGNvbnN0IHZhbCA9IHRhcmdldFtwcm9wXTtcbiAgICAgICAgICBkZWxldGUgdGFyZ2V0W3Byb3BdO1xuICAgICAgICAgIHRhcmdldC5fX2RhdGFbcHJvcF0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbi8qIGVzbGludC1lbmFibGUgdmFsaWQtanNkb2MgKi9cblxuZnVuY3Rpb24gY3JlYXRlRm9yd2FyZEhvc3RQcm9wRWZmZWN0KGhvc3RQcm9wLCB1c2VyRm9yd2FyZEhvc3RQcm9wKSB7XG4gIHJldHVybiBmdW5jdGlvbiBmb3J3YXJkSG9zdFByb3AodGVtcGxhdGUsIHByb3AsIHByb3BzKSB7XG4gICAgdXNlckZvcndhcmRIb3N0UHJvcC5jYWxsKHRlbXBsYXRlLl9fdGVtcGxhdGl6ZU93bmVyLFxuICAgICAgcHJvcC5zdWJzdHJpbmcoJ19ob3N0XycubGVuZ3RoKSwgcHJvcHNbcHJvcF0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBhZGROb3RpZnlFZmZlY3RzKGtsYXNzLCB0ZW1wbGF0ZSwgdGVtcGxhdGVJbmZvLCBvcHRpb25zKSB7XG4gIGxldCBob3N0UHJvcHMgPSB0ZW1wbGF0ZUluZm8uaG9zdFByb3BzIHx8IHt9O1xuICBmb3IgKGxldCBpcHJvcCBpbiBvcHRpb25zLmluc3RhbmNlUHJvcHMpIHtcbiAgICBkZWxldGUgaG9zdFByb3BzW2lwcm9wXTtcbiAgICBsZXQgdXNlck5vdGlmeUluc3RhbmNlUHJvcCA9IG9wdGlvbnMubm90aWZ5SW5zdGFuY2VQcm9wO1xuICAgIGlmICh1c2VyTm90aWZ5SW5zdGFuY2VQcm9wKSB7XG4gICAgICBrbGFzcy5wcm90b3R5cGUuX2FkZFByb3BlcnR5RWZmZWN0KGlwcm9wLFxuICAgICAgICBrbGFzcy5wcm90b3R5cGUuUFJPUEVSVFlfRUZGRUNUX1RZUEVTLk5PVElGWSxcbiAgICAgICAge2ZuOiBjcmVhdGVOb3RpZnlJbnN0YW5jZVByb3BFZmZlY3QoaXByb3AsIHVzZXJOb3RpZnlJbnN0YW5jZVByb3ApfSk7XG4gICAgfVxuICB9XG4gIGlmIChvcHRpb25zLmZvcndhcmRIb3N0UHJvcCAmJiB0ZW1wbGF0ZS5fX2RhdGFIb3N0KSB7XG4gICAgZm9yIChsZXQgaHByb3AgaW4gaG9zdFByb3BzKSB7XG4gICAgICAvLyBBcyB3ZSdyZSBpdGVyYXRpbmcgaG9zdFByb3BzIGluIHRoaXMgZnVuY3Rpb24sIG5vdGUgd2hldGhlclxuICAgICAgLy8gdGhlcmUgd2VyZSBhbnksIGZvciBhbiBvcHRpbWl6YXRpb24gaW4gYWRkUHJvcGFnYXRlRWZmZWN0c1xuICAgICAgaWYgKCF0ZW1wbGF0ZUluZm8uaGFzSG9zdFByb3BzKSB7XG4gICAgICAgIHRlbXBsYXRlSW5mby5oYXNIb3N0UHJvcHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAga2xhc3MucHJvdG90eXBlLl9hZGRQcm9wZXJ0eUVmZmVjdChocHJvcCxcbiAgICAgICAga2xhc3MucHJvdG90eXBlLlBST1BFUlRZX0VGRkVDVF9UWVBFUy5OT1RJRlksXG4gICAgICAgIHtmbjogY3JlYXRlTm90aWZ5SG9zdFByb3BFZmZlY3QoKX0pO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVOb3RpZnlJbnN0YW5jZVByb3BFZmZlY3QoaW5zdFByb3AsIHVzZXJOb3RpZnlJbnN0YW5jZVByb3ApIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG5vdGlmeUluc3RhbmNlUHJvcChpbnN0LCBwcm9wLCBwcm9wcykge1xuICAgIHVzZXJOb3RpZnlJbnN0YW5jZVByb3AuY2FsbChpbnN0Ll9fdGVtcGxhdGl6ZU93bmVyLFxuICAgICAgaW5zdCwgcHJvcCwgcHJvcHNbcHJvcF0pO1xuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVOb3RpZnlIb3N0UHJvcEVmZmVjdCgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG5vdGlmeUhvc3RQcm9wKGluc3QsIHByb3AsIHByb3BzKSB7XG4gICAgaW5zdC5fX2RhdGFIb3N0Ll9zZXRQZW5kaW5nUHJvcGVydHlPclBhdGgoJ19ob3N0XycgKyBwcm9wLCBwcm9wc1twcm9wXSwgdHJ1ZSwgdHJ1ZSk7XG4gIH07XG59XG5cblxuLyoqXG4gKiBSZXR1cm5zIGFuIGFub255bW91cyBgUHJvcGVydHlFZmZlY3RzYCBjbGFzcyBib3VuZCB0byB0aGVcbiAqIGA8dGVtcGxhdGU+YCBwcm92aWRlZC4gIEluc3RhbmNpbmcgdGhlIGNsYXNzIHdpbGwgcmVzdWx0IGluIHRoZVxuICogdGVtcGxhdGUgYmVpbmcgc3RhbXBlZCBpbnRvIGEgZG9jdW1lbnQgZnJhZ21lbnQgc3RvcmVkIGFzIHRoZSBpbnN0YW5jZSdzXG4gKiBgcm9vdGAgcHJvcGVydHksIGFmdGVyIHdoaWNoIGl0IGNhbiBiZSBhcHBlbmRlZCB0byB0aGUgRE9NLlxuICpcbiAqIFRlbXBsYXRlcyBtYXkgdXRpbGl6ZSBhbGwgUG9seW1lciBkYXRhLWJpbmRpbmcgZmVhdHVyZXMgYXMgd2VsbCBhc1xuICogZGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXJzLiAgRXZlbnQgbGlzdGVuZXJzIGFuZCBpbmxpbmUgY29tcHV0aW5nXG4gKiBmdW5jdGlvbnMgaW4gdGhlIHRlbXBsYXRlIHdpbGwgYmUgY2FsbGVkIG9uIHRoZSBob3N0IG9mIHRoZSB0ZW1wbGF0ZS5cbiAqXG4gKiBUaGUgY29uc3RydWN0b3IgcmV0dXJuZWQgdGFrZXMgYSBzaW5nbGUgYXJndW1lbnQgZGljdGlvbmFyeSBvZiBpbml0aWFsXG4gKiBwcm9wZXJ0eSB2YWx1ZXMgdG8gcHJvcGFnYXRlIGludG8gdGVtcGxhdGUgYmluZGluZ3MuICBBZGRpdGlvbmFsbHlcbiAqIGhvc3QgcHJvcGVydGllcyBjYW4gYmUgZm9yd2FyZGVkIGluLCBhbmQgaW5zdGFuY2UgcHJvcGVydGllcyBjYW4gYmVcbiAqIG5vdGlmaWVkIG91dCBieSBwcm92aWRpbmcgb3B0aW9uYWwgY2FsbGJhY2tzIGluIHRoZSBgb3B0aW9uc2AgZGljdGlvbmFyeS5cbiAqXG4gKiBWYWxpZCBjb25maWd1cmF0aW9uIGluIGBvcHRpb25zYCBhcmUgYXMgZm9sbG93czpcbiAqXG4gKiAtIGBmb3J3YXJkSG9zdFByb3AocHJvcGVydHksIHZhbHVlKWA6IENhbGxlZCB3aGVuIGEgcHJvcGVydHkgcmVmZXJlbmNlZFxuICogICBpbiB0aGUgdGVtcGxhdGUgY2hhbmdlZCBvbiB0aGUgdGVtcGxhdGUncyBob3N0LiBBcyB0aGlzIGxpYnJhcnkgZG9lc1xuICogICBub3QgcmV0YWluIHJlZmVyZW5jZXMgdG8gdGVtcGxhdGVzIGluc3RhbmNlZCBieSB0aGUgdXNlciwgaXQgaXMgdGhlXG4gKiAgIHRlbXBsYXRpemUgb3duZXIncyByZXNwb25zaWJpbGl0eSB0byBmb3J3YXJkIGhvc3QgcHJvcGVydHkgY2hhbmdlcyBpbnRvXG4gKiAgIHVzZXItc3RhbXBlZCBpbnN0YW5jZXMuICBUaGUgYGluc3RhbmNlLmZvcndhcmRIb3N0UHJvcChwcm9wZXJ0eSwgdmFsdWUpYFxuICogICAgbWV0aG9kIG9uIHRoZSBnZW5lcmF0ZWQgY2xhc3Mgc2hvdWxkIGJlIGNhbGxlZCB0byBmb3J3YXJkIGhvc3RcbiAqICAgcHJvcGVydGllcyBpbnRvIHRoZSB0ZW1wbGF0ZSB0byBwcmV2ZW50IHVubmVjZXNzYXJ5IHByb3BlcnR5LWNoYW5nZWRcbiAqICAgbm90aWZpY2F0aW9ucy4gQW55IHByb3BlcnRpZXMgcmVmZXJlbmNlZCBpbiB0aGUgdGVtcGxhdGUgdGhhdCBhcmUgbm90XG4gKiAgIGRlZmluZWQgaW4gYGluc3RhbmNlUHJvcHNgIHdpbGwgYmUgbm90aWZpZWQgdXAgdG8gdGhlIHRlbXBsYXRlJ3MgaG9zdFxuICogICBhdXRvbWF0aWNhbGx5LlxuICogLSBgaW5zdGFuY2VQcm9wc2A6IERpY3Rpb25hcnkgb2YgcHJvcGVydHkgbmFtZXMgdGhhdCB3aWxsIGJlIGFkZGVkXG4gKiAgIHRvIHRoZSBpbnN0YW5jZSBieSB0aGUgdGVtcGxhdGl6ZSBvd25lci4gIFRoZXNlIHByb3BlcnRpZXMgc2hhZG93IGFueVxuICogICBob3N0IHByb3BlcnRpZXMsIGFuZCBjaGFuZ2VzIHdpdGhpbiB0aGUgdGVtcGxhdGUgdG8gdGhlc2UgcHJvcGVydGllc1xuICogICB3aWxsIHJlc3VsdCBpbiBgbm90aWZ5SW5zdGFuY2VQcm9wYCBiZWluZyBjYWxsZWQuXG4gKiAtIGBtdXRhYmxlRGF0YWA6IFdoZW4gYHRydWVgLCB0aGUgZ2VuZXJhdGVkIGNsYXNzIHdpbGwgc2tpcCBzdHJpY3RcbiAqICAgZGlydHktY2hlY2tpbmcgZm9yIG9iamVjdHMgYW5kIGFycmF5cyAoYWx3YXlzIGNvbnNpZGVyIHRoZW0gdG8gYmVcbiAqICAgXCJkaXJ0eVwiKS5cbiAqIC0gYG5vdGlmeUluc3RhbmNlUHJvcChpbnN0YW5jZSwgcHJvcGVydHksIHZhbHVlKWA6IENhbGxlZCB3aGVuXG4gKiAgIGFuIGluc3RhbmNlIHByb3BlcnR5IGNoYW5nZXMuICBVc2VycyBtYXkgY2hvb3NlIHRvIGNhbGwgYG5vdGlmeVBhdGhgXG4gKiAgIG9uIGUuZy4gdGhlIG93bmVyIHRvIG5vdGlmeSB0aGUgY2hhbmdlLlxuICogLSBgcGFyZW50TW9kZWxgOiBXaGVuIGB0cnVlYCwgZXZlbnRzIGhhbmRsZWQgYnkgZGVjbGFyYXRpdmUgZXZlbnQgbGlzdGVuZXJzXG4gKiAgIChgb24tZXZlbnQ9XCJoYW5kbGVyXCJgKSB3aWxsIGJlIGRlY29yYXRlZCB3aXRoIGEgYG1vZGVsYCBwcm9wZXJ0eSBwb2ludGluZ1xuICogICB0byB0aGUgdGVtcGxhdGUgaW5zdGFuY2UgdGhhdCBzdGFtcGVkIGl0LiAgSXQgd2lsbCBhbHNvIGJlIHJldHVybmVkXG4gKiAgIGZyb20gYGluc3RhbmNlLnBhcmVudE1vZGVsYCBpbiBjYXNlcyB3aGVyZSB0ZW1wbGF0ZSBpbnN0YW5jZSBuZXN0aW5nXG4gKiAgIGNhdXNlcyBhbiBpbm5lciBtb2RlbCB0byBzaGFkb3cgYW4gb3V0ZXIgbW9kZWwuXG4gKlxuICogQWxsIGNhbGxiYWNrcyBhcmUgY2FsbGVkIGJvdW5kIHRvIHRoZSBgb3duZXJgLiBBbnkgY29udGV4dFxuICogbmVlZGVkIGZvciB0aGUgY2FsbGJhY2tzIChzdWNoIGFzIHJlZmVyZW5jZXMgdG8gYGluc3RhbmNlc2Agc3RhbXBlZClcbiAqIHNob3VsZCBiZSBzdG9yZWQgb24gdGhlIGBvd25lcmAgc3VjaCB0aGF0IHRoZXkgY2FuIGJlIHJldHJpZXZlZCB2aWFcbiAqIGB0aGlzYC5cbiAqXG4gKiBXaGVuIGBvcHRpb25zLmZvcndhcmRIb3N0UHJvcGAgaXMgZGVjbGFyZWQgYXMgYW4gb3B0aW9uLCBhbnkgcHJvcGVydGllc1xuICogcmVmZXJlbmNlZCBpbiB0aGUgdGVtcGxhdGUgd2lsbCBiZSBhdXRvbWF0aWNhbGx5IGZvcndhcmRlZCBmcm9tIHRoZSBob3N0IG9mXG4gKiB0aGUgYDx0ZW1wbGF0ZT5gIHRvIGluc3RhbmNlcywgd2l0aCB0aGUgZXhjZXB0aW9uIG9mIGFueSBwcm9wZXJ0aWVzIGxpc3RlZCBpblxuICogdGhlIGBvcHRpb25zLmluc3RhbmNlUHJvcHNgIG9iamVjdC4gIGBpbnN0YW5jZVByb3BzYCBhcmUgYXNzdW1lZCB0byBiZVxuICogbWFuYWdlZCBieSB0aGUgb3duZXIgb2YgdGhlIGluc3RhbmNlcywgZWl0aGVyIHBhc3NlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvclxuICogb3Igc2V0IGFmdGVyIHRoZSBmYWN0LiAgTm90ZSwgYW55IHByb3BlcnRpZXMgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yIHdpbGxcbiAqIGFsd2F5cyBiZSBzZXQgdG8gdGhlIGluc3RhbmNlIChyZWdhcmRsZXNzIG9mIHdoZXRoZXIgdGhleSB3b3VsZCBub3JtYWxseVxuICogYmUgZm9yd2FyZGVkIGZyb20gdGhlIGhvc3QpLlxuICpcbiAqIE5vdGUgdGhhdCBgdGVtcGxhdGl6ZSgpYCBjYW4gYmUgcnVuIG9ubHkgb25jZSBmb3IgYSBnaXZlbiBgPHRlbXBsYXRlPmAuXG4gKiBGdXJ0aGVyIGNhbGxzIHdpbGwgcmVzdWx0IGluIGFuIGVycm9yLiBBbHNvLCB0aGVyZSBpcyBhIHNwZWNpYWxcbiAqIGJlaGF2aW9yIGlmIHRoZSB0ZW1wbGF0ZSB3YXMgZHVwbGljYXRlZCB0aHJvdWdoIGEgbWVjaGFuaXNtIHN1Y2ggYXNcbiAqIGA8ZG9tLXJlcGVhdD5gIG9yIGA8dGVzdC1maXh0dXJlPmAuIEluIHRoaXMgY2FzZSwgYWxsIGNhbGxzIHRvXG4gKiBgdGVtcGxhdGl6ZSgpYCByZXR1cm4gdGhlIHNhbWUgY2xhc3MgZm9yIGFsbCBkdXBsaWNhdGVzIG9mIGEgdGVtcGxhdGUuXG4gKiBUaGUgY2xhc3MgcmV0dXJuZWQgZnJvbSBgdGVtcGxhdGl6ZSgpYCBpcyBnZW5lcmF0ZWQgb25seSBvbmNlIHVzaW5nXG4gKiB0aGUgYG9wdGlvbnNgIGZyb20gdGhlIGZpcnN0IGNhbGwuIFRoaXMgbWVhbnMgdGhhdCBhbnkgYG9wdGlvbnNgXG4gKiBwcm92aWRlZCB0byBzdWJzZXF1ZW50IGNhbGxzIHdpbGwgYmUgaWdub3JlZC4gVGhlcmVmb3JlLCBpdCBpcyB2ZXJ5XG4gKiBpbXBvcnRhbnQgbm90IHRvIGNsb3NlIG92ZXIgYW55IHZhcmlhYmxlcyBpbnNpZGUgdGhlIGNhbGxiYWNrcy4gQWxzbyxcbiAqIGFycm93IGZ1bmN0aW9ucyBtdXN0IGJlIGF2b2lkZWQgYmVjYXVzZSB0aGV5IGJpbmQgdGhlIG91dGVyIGB0aGlzYC5cbiAqIEluc2lkZSB0aGUgY2FsbGJhY2tzLCBhbnkgY29udGV4dHVhbCBpbmZvcm1hdGlvbiBjYW4gYmUgYWNjZXNzZWRcbiAqIHRocm91Z2ggYHRoaXNgLCB3aGljaCBwb2ludHMgdG8gdGhlIGBvd25lcmAuXG4gKlxuICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGUgVGVtcGxhdGUgdG8gdGVtcGxhdGl6ZVxuICogQHBhcmFtIHtQb2x5bWVyX1Byb3BlcnR5RWZmZWN0cz19IG93bmVyIE93bmVyIG9mIHRoZSB0ZW1wbGF0ZSBpbnN0YW5jZXM7XG4gKiAgIGFueSBvcHRpb25hbCBjYWxsYmFja3Mgd2lsbCBiZSBib3VuZCB0byB0aGlzIG93bmVyLlxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zIE9wdGlvbnMgZGljdGlvbmFyeSAoc2VlIHN1bW1hcnkgZm9yIGRldGFpbHMpXG4gKiBAcmV0dXJuIHtmdW5jdGlvbihuZXc6VGVtcGxhdGVJbnN0YW5jZUJhc2UsIE9iamVjdD0pfSBHZW5lcmF0ZWQgY2xhc3MgYm91bmRcbiAqICAgdG8gdGhlIHRlbXBsYXRlIHByb3ZpZGVkXG4gKiBAc3VwcHJlc3Mge2ludmFsaWRDYXN0c31cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRlbXBsYXRpemUodGVtcGxhdGUsIG93bmVyLCBvcHRpb25zKSB7XG4gIC8vIFVuZGVyIHN0cmljdFRlbXBsYXRlUG9saWN5LCB0aGUgdGVtcGxhdGl6ZWQgZWxlbWVudCBtdXN0IGJlIG93bmVkXG4gIC8vIGJ5IGEgKHRydXN0ZWQpIFBvbHltZXIgZWxlbWVudCwgaW5kaWNhdGVkIGJ5IGV4aXN0ZW5jZSBvZiBfbWV0aG9kSG9zdDtcbiAgLy8gZS5nLiBmb3IgZG9tLWlmICYgZG9tLXJlcGVhdCBpbiBtYWluIGRvY3VtZW50LCBfbWV0aG9kSG9zdCBpcyBudWxsXG4gIGlmIChzdHJpY3RUZW1wbGF0ZVBvbGljeSAmJiAhZmluZE1ldGhvZEhvc3QodGVtcGxhdGUpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdzdHJpY3RUZW1wbGF0ZVBvbGljeTogdGVtcGxhdGUgb3duZXIgbm90IHRydXN0ZWQnKTtcbiAgfVxuICBvcHRpb25zID0gLyoqIEB0eXBlIHshVGVtcGxhdGl6ZU9wdGlvbnN9ICovKG9wdGlvbnMgfHwge30pO1xuICBpZiAodGVtcGxhdGUuX190ZW1wbGF0aXplT3duZXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0EgPHRlbXBsYXRlPiBjYW4gb25seSBiZSB0ZW1wbGF0aXplZCBvbmNlJyk7XG4gIH1cbiAgdGVtcGxhdGUuX190ZW1wbGF0aXplT3duZXIgPSBvd25lcjtcbiAgY29uc3QgY3RvciA9IG93bmVyID8gb3duZXIuY29uc3RydWN0b3IgOiBUZW1wbGF0ZUluc3RhbmNlQmFzZTtcbiAgbGV0IHRlbXBsYXRlSW5mbyA9IGN0b3IuX3BhcnNlVGVtcGxhdGUodGVtcGxhdGUpO1xuICAvLyBHZXQgbWVtb2l6ZWQgYmFzZSBjbGFzcyBmb3IgdGhlIHByb3RvdHlwaWNhbCB0ZW1wbGF0ZSwgd2hpY2hcbiAgLy8gaW5jbHVkZXMgcHJvcGVydHkgZWZmZWN0cyBmb3IgYmluZGluZyB0ZW1wbGF0ZSAmIGZvcndhcmRpbmdcbiAgLyoqXG4gICAqIEBjb25zdHJ1Y3RvclxuICAgKiBAZXh0ZW5kcyB7VGVtcGxhdGVJbnN0YW5jZUJhc2V9XG4gICAqL1xuICBsZXQgYmFzZUNsYXNzID0gdGVtcGxhdGVJbmZvLnRlbXBsYXRpemVJbnN0YW5jZUNsYXNzO1xuICBpZiAoIWJhc2VDbGFzcykge1xuICAgIGJhc2VDbGFzcyA9IGNyZWF0ZVRlbXBsYXRpemVyQ2xhc3ModGVtcGxhdGUsIHRlbXBsYXRlSW5mbywgb3B0aW9ucyk7XG4gICAgdGVtcGxhdGVJbmZvLnRlbXBsYXRpemVJbnN0YW5jZUNsYXNzID0gYmFzZUNsYXNzO1xuICB9XG4gIGNvbnN0IG1ldGhvZEhvc3QgPSBmaW5kTWV0aG9kSG9zdCh0ZW1wbGF0ZSk7XG4gIC8vIEhvc3QgcHJvcGVydHkgZm9yd2FyZGluZyBtdXN0IGJlIGluc3RhbGxlZCBvbnRvIHRlbXBsYXRlIGluc3RhbmNlXG4gIGFkZFByb3BhZ2F0ZUVmZmVjdHModGVtcGxhdGUsIHRlbXBsYXRlSW5mbywgb3B0aW9ucywgbWV0aG9kSG9zdCk7XG4gIC8vIFN1YmNsYXNzIGJhc2UgY2xhc3MgYW5kIGFkZCByZWZlcmVuY2UgZm9yIHRoaXMgc3BlY2lmaWMgdGVtcGxhdGVcbiAgLyoqIEBwcml2YXRlICovXG4gIGxldCBrbGFzcyA9IGNsYXNzIFRlbXBsYXRlSW5zdGFuY2UgZXh0ZW5kcyBiYXNlQ2xhc3Mge307XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAga2xhc3MucHJvdG90eXBlLl9tZXRob2RIb3N0ID0gbWV0aG9kSG9zdDtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBrbGFzcy5wcm90b3R5cGUuX19kYXRhSG9zdCA9IC8qKiBAdHlwZSB7IURhdGFUZW1wbGF0ZX0gKi8gKHRlbXBsYXRlKTtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBrbGFzcy5wcm90b3R5cGUuX190ZW1wbGF0aXplT3duZXIgPSAvKiogQHR5cGUgeyFPYmplY3R9ICovIChvd25lcik7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAga2xhc3MucHJvdG90eXBlLl9faG9zdFByb3BzID0gdGVtcGxhdGVJbmZvLmhvc3RQcm9wcztcbiAga2xhc3MgPSAvKiogQHR5cGUge2Z1bmN0aW9uKG5ldzpUZW1wbGF0ZUluc3RhbmNlQmFzZSl9ICovKGtsYXNzKTsgLy9lc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtYXNzaWduXG4gIHJldHVybiBrbGFzcztcbn1cblxuZnVuY3Rpb24gd2Fybk9uVW5kZWNsYXJlZFByb3BlcnRpZXModGVtcGxhdGVJbmZvLCBvcHRpb25zLCBtZXRob2RIb3N0KSB7XG4gIGNvbnN0IGRlY2xhcmVkUHJvcHMgPSBtZXRob2RIb3N0LmNvbnN0cnVjdG9yLl9wcm9wZXJ0aWVzO1xuICBjb25zdCB7cHJvcGVydHlFZmZlY3RzfSA9IHRlbXBsYXRlSW5mbztcbiAgY29uc3Qge2luc3RhbmNlUHJvcHN9ID0gb3B0aW9ucztcbiAgZm9yIChsZXQgcHJvcCBpbiBwcm9wZXJ0eUVmZmVjdHMpIHtcbiAgICAvLyBFbnN1cmUgcHJvcGVydGllcyB3aXRoIHRlbXBsYXRlIGVmZmVjdHMgYXJlIGRlY2xhcmVkIG9uIHRoZSBvdXRlcm1vc3RcbiAgICAvLyBob3N0IChgbWV0aG9kSG9zdGApLCB1bmxlc3MgdGhleSBhcmUgaW5zdGFuY2UgcHJvcHMgb3Igc3RhdGljIGZ1bmN0aW9uc1xuICAgIGlmICghZGVjbGFyZWRQcm9wc1twcm9wXSAmJiAhKGluc3RhbmNlUHJvcHMgJiYgaW5zdGFuY2VQcm9wc1twcm9wXSkpIHtcbiAgICAgIGNvbnN0IGVmZmVjdHMgPSBwcm9wZXJ0eUVmZmVjdHNbcHJvcF07XG4gICAgICBmb3IgKGxldCBpPTA7IGk8ZWZmZWN0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBjb25zdCB7cGFydH0gPSBlZmZlY3RzW2ldLmluZm87XG4gICAgICAgIGlmICghKHBhcnQuc2lnbmF0dXJlICYmIHBhcnQuc2lnbmF0dXJlLnN0YXRpYykpIHtcbiAgICAgICAgICBjb25zb2xlLndhcm4oYFByb3BlcnR5ICcke3Byb3B9JyB1c2VkIGluIHRlbXBsYXRlIGJ1dCBub3QgYCArXG4gICAgICAgICAgICBgZGVjbGFyZWQgaW4gJ3Byb3BlcnRpZXMnOyBhdHRyaWJ1dGUgd2lsbCBub3QgYmUgb2JzZXJ2ZWQuYCk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB0ZW1wbGF0ZSBcIm1vZGVsXCIgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gZWxlbWVudCwgd2hpY2hcbiAqIHNlcnZlcyBhcyB0aGUgYmluZGluZyBzY29wZSBmb3IgdGhlIHRlbXBsYXRlIGluc3RhbmNlIHRoZSBlbGVtZW50IGlzXG4gKiBjb250YWluZWQgaW4uIEEgdGVtcGxhdGUgbW9kZWwgaXMgYW4gaW5zdGFuY2Ugb2ZcbiAqIGBUZW1wbGF0ZUluc3RhbmNlQmFzZWAsIGFuZCBzaG91bGQgYmUgdXNlZCB0byBtYW5pcHVsYXRlIGRhdGFcbiAqIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRlbXBsYXRlIGluc3RhbmNlLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogICBsZXQgbW9kZWwgPSBtb2RlbEZvckVsZW1lbnQoZWwpO1xuICogICBpZiAobW9kZWwuaW5kZXggPCAxMCkge1xuICogICAgIG1vZGVsLnNldCgnaXRlbS5jaGVja2VkJywgdHJ1ZSk7XG4gKiAgIH1cbiAqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSB0ZW1wbGF0ZSBUaGUgbW9kZWwgd2lsbCBiZSByZXR1cm5lZCBmb3JcbiAqICAgZWxlbWVudHMgc3RhbXBlZCBmcm9tIHRoaXMgdGVtcGxhdGUgKGFjY2VwdHMgZWl0aGVyIGFuIEhUTUxUZW1wbGF0ZUVsZW1lbnQpXG4gKiAgIG9yIGEgYDxkb20taWY+YC9gPGRvbS1yZXBlYXQ+YCBlbGVtZW50IHdoZW4gdXNpbmcgYHJlbW92ZU5lc3RlZFRlbXBsYXRlc2BcbiAqICAgb3B0aW1pemF0aW9uLlxuICogQHBhcmFtIHtOb2RlPX0gbm9kZSBOb2RlIGZvciB3aGljaCB0byByZXR1cm4gYSB0ZW1wbGF0ZSBtb2RlbC5cbiAqIEByZXR1cm4ge1RlbXBsYXRlSW5zdGFuY2VCYXNlfSBUZW1wbGF0ZSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlXG4gKiAgIGJpbmRpbmcgc2NvcGUgZm9yIHRoZSBlbGVtZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBtb2RlbEZvckVsZW1lbnQodGVtcGxhdGUsIG5vZGUpIHtcbiAgbGV0IG1vZGVsO1xuICB3aGlsZSAobm9kZSkge1xuICAgIC8vIEFuIGVsZW1lbnQgd2l0aCBhIF9fdGVtcGxhdGl6ZUluc3RhbmNlIG1hcmtzIHRoZSB0b3AgYm91bmRhcnlcbiAgICAvLyBvZiBhIHNjb3BlOyB3YWxrIHVwIHVudGlsIHdlIGZpbmQgb25lLCBhbmQgdGhlbiBlbnN1cmUgdGhhdFxuICAgIC8vIGl0cyBfX2RhdGFIb3N0IG1hdGNoZXMgYHRoaXNgLCBtZWFuaW5nIHRoaXMgZG9tLXJlcGVhdCBzdGFtcGVkIGl0XG4gICAgaWYgKChtb2RlbCA9IG5vZGUuX19kYXRhSG9zdCA/IG5vZGUgOiBub2RlLl9fdGVtcGxhdGl6ZUluc3RhbmNlKSkge1xuICAgICAgLy8gRm91bmQgYW4gZWxlbWVudCBzdGFtcGVkIGJ5IGFub3RoZXIgdGVtcGxhdGU7IGtlZXAgd2Fsa2luZyB1cFxuICAgICAgLy8gZnJvbSBpdHMgX19kYXRhSG9zdFxuICAgICAgaWYgKG1vZGVsLl9fZGF0YUhvc3QgIT0gdGVtcGxhdGUpIHtcbiAgICAgICAgbm9kZSA9IG1vZGVsLl9fZGF0YUhvc3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbW9kZWw7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFN0aWxsIGluIGEgdGVtcGxhdGUgc2NvcGUsIGtlZXAgZ29pbmcgdXAgdW50aWxcbiAgICAgIC8vIGEgX190ZW1wbGF0aXplSW5zdGFuY2UgaXMgZm91bmRcbiAgICAgIG5vZGUgPSB3cmFwKG5vZGUpLnBhcmVudE5vZGU7XG4gICAgfVxuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5leHBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlQmFzZSB9O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgeyBUZW1wbGF0ZUluc3RhbmNlQmFzZSwgdGVtcGxhdGl6ZSwgbW9kZWxGb3JFbGVtZW50IH0gZnJvbSAnLi4vdXRpbHMvdGVtcGxhdGl6ZS5qcyc7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcblxuLyoqXG4gKiBAdHlwZWRlZiB7e1xuICogICBfdGVtcGxhdGl6ZXJUZW1wbGF0ZTogSFRNTFRlbXBsYXRlRWxlbWVudCxcbiAqICAgX3BhcmVudE1vZGVsOiBib29sZWFuLFxuICogICBfaW5zdGFuY2VQcm9wczogT2JqZWN0LFxuICogICBfZm9yd2FyZEhvc3RQcm9wVjI6IEZ1bmN0aW9uLFxuICogICBfbm90aWZ5SW5zdGFuY2VQcm9wVjI6IEZ1bmN0aW9uLFxuICogICBjdG9yOiBmdW5jdGlvbihuZXc6VGVtcGxhdGVJbnN0YW5jZUJhc2UsIE9iamVjdD0pXG4gKiB9fVxuICovXG5sZXQgVGVtcGxhdGl6ZXJVc2VyOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lXG5cbi8qKlxuICogVGhlIGBUZW1wbGF0aXplcmAgYmVoYXZpb3IgYWRkcyBtZXRob2RzIHRvIGdlbmVyYXRlIGluc3RhbmNlcyBvZlxuICogdGVtcGxhdGVzIHRoYXQgYXJlIGVhY2ggbWFuYWdlZCBieSBhbiBhbm9ueW1vdXMgYFByb3BlcnR5RWZmZWN0c2BcbiAqIGluc3RhbmNlIHdoZXJlIGRhdGEtYmluZGluZ3MgaW4gdGhlIHN0YW1wZWQgdGVtcGxhdGUgY29udGVudCBhcmUgYm91bmQgdG9cbiAqIGFjY2Vzc29ycyBvbiBpdHNlbGYuXG4gKlxuICogVGhpcyBiZWhhdmlvciBpcyBwcm92aWRlZCBpbiBQb2x5bWVyIDIueC0zLnggYXMgYSBoeWJyaWQtZWxlbWVudCBjb252ZW5pZW5jZVxuICogb25seS4gIEZvciBub24taHlicmlkIHVzYWdlLCB0aGUgYFRlbXBsYXRpemVgIGxpYnJhcnlcbiAqIHNob3VsZCBiZSB1c2VkIGluc3RlYWQuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiAgICAgaW1wb3J0IHtkb219IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLmRvbS5qcyc7XG4gKiAgICAgLy8gR2V0IGEgdGVtcGxhdGUgZnJvbSBzb21ld2hlcmUsIGUuZy4gbGlnaHQgRE9NXG4gKiAgICAgbGV0IHRlbXBsYXRlID0gdGhpcy5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpO1xuICogICAgIC8vIFByZXBhcmUgdGhlIHRlbXBsYXRlXG4gKiAgICAgdGhpcy50ZW1wbGF0aXplKHRlbXBsYXRlKTtcbiAqICAgICAvLyBJbnN0YW5jZSB0aGUgdGVtcGxhdGUgd2l0aCBhbiBpbml0aWFsIGRhdGEgbW9kZWxcbiAqICAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLnN0YW1wKHtteVByb3A6ICdpbml0aWFsJ30pO1xuICogICAgIC8vIEluc2VydCB0aGUgaW5zdGFuY2UncyBET00gc29tZXdoZXJlLCBlLmcuIGxpZ2h0IERPTVxuICogICAgIGRvbSh0aGlzKS5hcHBlbmRDaGlsZChpbnN0YW5jZS5yb290KTtcbiAqICAgICAvLyBDaGFuZ2luZyBhIHByb3BlcnR5IG9uIHRoZSBpbnN0YW5jZSB3aWxsIHByb3BhZ2F0ZSB0byBiaW5kaW5nc1xuICogICAgIC8vIGluIHRoZSB0ZW1wbGF0ZVxuICogICAgIGluc3RhbmNlLm15UHJvcCA9ICduZXcgdmFsdWUnO1xuICpcbiAqIFVzZXJzIG9mIGBUZW1wbGF0aXplcmAgbWF5IG5lZWQgdG8gaW1wbGVtZW50IHRoZSBmb2xsb3dpbmcgYWJzdHJhY3RcbiAqIEFQSSdzIHRvIGRldGVybWluZSBob3cgcHJvcGVydGllcyBhbmQgcGF0aHMgZnJvbSB0aGUgaG9zdCBzaG91bGQgYmVcbiAqIGZvcndhcmRlZCBpbnRvIHRvIGluc3RhbmNlczpcbiAqXG4gKiAgICAgX2ZvcndhcmRIb3N0UHJvcFYyOiBmdW5jdGlvbihwcm9wLCB2YWx1ZSlcbiAqXG4gKiBMaWtld2lzZSwgdXNlcnMgbWF5IGltcGxlbWVudCB0aGVzZSBhZGRpdGlvbmFsIGFic3RyYWN0IEFQSSdzIHRvIGRldGVybWluZVxuICogaG93IGluc3RhbmNlLXNwZWNpZmljIHByb3BlcnRpZXMgdGhhdCBjaGFuZ2Ugb24gdGhlIGluc3RhbmNlIHNob3VsZCBiZVxuICogZm9yd2FyZGVkIG91dCB0byB0aGUgaG9zdCwgaWYgbmVjZXNzYXJ5LlxuICpcbiAqICAgICBfbm90aWZ5SW5zdGFuY2VQcm9wVjI6IGZ1bmN0aW9uKGluc3QsIHByb3AsIHZhbHVlKVxuICpcbiAqIEluIG9yZGVyIHRvIGRldGVybWluZSB3aGljaCBwcm9wZXJ0aWVzIGFyZSBpbnN0YW5jZS1zcGVjaWZpYyBhbmQgcmVxdWlyZVxuICogY3VzdG9tIG5vdGlmaWNhdGlvbiB2aWEgYF9ub3RpZnlJbnN0YW5jZVByb3BgLCBkZWZpbmUgYW4gYF9pbnN0YW5jZVByb3BzYFxuICogb2JqZWN0IGNvbnRhaW5pbmcga2V5cyBmb3IgZWFjaCBpbnN0YW5jZSBwcm9wLCBmb3IgZXhhbXBsZTpcbiAqXG4gKiAgICAgX2luc3RhbmNlUHJvcHM6IHtcbiAqICAgICAgIGl0ZW06IHRydWUsXG4gKiAgICAgICBpbmRleDogdHJ1ZVxuICogICAgIH1cbiAqXG4gKiBBbnkgcHJvcGVydGllcyB1c2VkIGluIHRoZSB0ZW1wbGF0ZSB0aGF0IGFyZSBub3QgZGVmaW5lZCBpbiBfaW5zdGFuY2VQcm9wXG4gKiB3aWxsIGJlIGZvcndhcmRlZCBvdXQgdG8gdGhlIFRlbXBsYXRpemUgYG93bmVyYCBhdXRvbWF0aWNhbGx5LlxuICpcbiAqIFVzZXJzIG1heSBhbHNvIGltcGxlbWVudCB0aGUgZm9sbG93aW5nIGFic3RyYWN0IGZ1bmN0aW9uIHRvIHNob3cgb3JcbiAqIGhpZGUgYW55IERPTSBnZW5lcmF0ZWQgdXNpbmcgYHN0YW1wYDpcbiAqXG4gKiAgICAgX3Nob3dIaWRlQ2hpbGRyZW46IGZ1bmN0aW9uKHNob3VsZEhpZGUpXG4gKlxuICogTm90ZSB0aGF0IHNvbWUgY2FsbGJhY2tzIGFyZSBzdWZmaXhlZCB3aXRoIGBWMmAgaW4gdGhlIFBvbHltZXIgMi54IGJlaGF2aW9yXG4gKiBhcyB0aGUgaW1wbGVtZW50YXRpb25zIHdpbGwgbmVlZCB0byBkaWZmZXIgZnJvbSB0aGUgY2FsbGJhY2tzIHJlcXVpcmVkXG4gKiBieSB0aGUgMS54IFRlbXBsYXRpemVyIEFQSSBkdWUgdG8gY2hhbmdlcyBpbiB0aGUgYFRlbXBsYXRlSW5zdGFuY2VgIEFQSVxuICogYmV0d2VlbiB2ZXJzaW9ucyAxLnggYW5kIDIueC5cbiAqXG4gKiBAcG9seW1lckJlaGF2aW9yXG4gKi9cbmV4cG9ydCBjb25zdCBUZW1wbGF0aXplciA9IHtcblxuICAvKipcbiAgICogR2VuZXJhdGVzIGFuIGFub255bW91cyBgVGVtcGxhdGVJbnN0YW5jZWAgY2xhc3MgKHN0b3JlZCBhcyBgdGhpcy5jdG9yYClcbiAgICogZm9yIHRoZSBwcm92aWRlZCB0ZW1wbGF0ZS4gIFRoaXMgbWV0aG9kIHNob3VsZCBiZSBjYWxsZWQgb25jZSBwZXJcbiAgICogdGVtcGxhdGUgdG8gcHJlcGFyZSBhbiBlbGVtZW50IGZvciBzdGFtcGluZyB0aGUgdGVtcGxhdGUsIGZvbGxvd2VkXG4gICAqIGJ5IGBzdGFtcGAgdG8gY3JlYXRlIG5ldyBpbnN0YW5jZXMgb2YgdGhlIHRlbXBsYXRlLlxuICAgKlxuICAgKiBAcGFyYW0geyFIVE1MVGVtcGxhdGVFbGVtZW50fSB0ZW1wbGF0ZSBUZW1wbGF0ZSB0byBwcmVwYXJlXG4gICAqIEBwYXJhbSB7Ym9vbGVhbj19IG11dGFibGVEYXRhIFdoZW4gYHRydWVgLCB0aGUgZ2VuZXJhdGVkIGNsYXNzIHdpbGwgc2tpcFxuICAgKiAgIHN0cmljdCBkaXJ0eS1jaGVja2luZyBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzIChhbHdheXMgY29uc2lkZXIgdGhlbSB0b1xuICAgKiAgIGJlIFwiZGlydHlcIikuIERlZmF1bHRzIHRvIGZhbHNlLlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKiBAdGhpcyB7VGVtcGxhdGl6ZXJVc2VyfVxuICAgKi9cbiAgdGVtcGxhdGl6ZSh0ZW1wbGF0ZSwgbXV0YWJsZURhdGEpIHtcbiAgICB0aGlzLl90ZW1wbGF0aXplclRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgdGhpcy5jdG9yID1cbiAgICAgICAgdGVtcGxhdGl6ZSh0ZW1wbGF0ZSwgLyoqIEB0eXBlIHshUG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9ICovICh0aGlzKSwge1xuICAgICAgICAgIG11dGFibGVEYXRhOiBCb29sZWFuKG11dGFibGVEYXRhKSxcbiAgICAgICAgICBwYXJlbnRNb2RlbDogdGhpcy5fcGFyZW50TW9kZWwsXG4gICAgICAgICAgaW5zdGFuY2VQcm9wczogdGhpcy5faW5zdGFuY2VQcm9wcyxcbiAgICAgICAgICBmb3J3YXJkSG9zdFByb3A6IHRoaXMuX2ZvcndhcmRIb3N0UHJvcFYyLFxuICAgICAgICAgIG5vdGlmeUluc3RhbmNlUHJvcDogdGhpcy5fbm90aWZ5SW5zdGFuY2VQcm9wVjJcbiAgICAgICAgfSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlIHRlbXBsYXRlIHByZXBhcmVkIGJ5IGB0ZW1wbGF0aXplYC4gIFRoZSBvYmplY3RcbiAgICogcmV0dXJuZWQgaXMgYW4gaW5zdGFuY2Ugb2YgdGhlIGFub255bW91cyBjbGFzcyBnZW5lcmF0ZWQgYnkgYHRlbXBsYXRpemVgXG4gICAqIHdob3NlIGByb290YCBwcm9wZXJ0eSBpcyBhIGRvY3VtZW50IGZyYWdtZW50IGNvbnRhaW5pbmcgbmV3bHkgY2xvbmVkXG4gICAqIHRlbXBsYXRlIGNvbnRlbnQsIGFuZCB3aGljaCBoYXMgcHJvcGVydHkgYWNjZXNzb3JzIGNvcnJlc3BvbmRpbmcgdG9cbiAgICogcHJvcGVydGllcyByZWZlcmVuY2VkIGluIHRlbXBsYXRlIGJpbmRpbmdzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdD19IG1vZGVsIE9iamVjdCBjb250YWluaW5nIGluaXRpYWwgcHJvcGVydHkgdmFsdWVzIHRvXG4gICAqICAgcG9wdWxhdGUgaW50byB0aGUgdGVtcGxhdGUgYmluZGluZ3MuXG4gICAqIEByZXR1cm4ge1RlbXBsYXRlSW5zdGFuY2VCYXNlfSBSZXR1cm5zIHRoZSBjcmVhdGVkIGluc3RhbmNlIG9mXG4gICAqIHRoZSB0ZW1wbGF0ZSBwcmVwYXJlZCBieSBgdGVtcGxhdGl6ZWAuXG4gICAqIEB0aGlzIHtUZW1wbGF0aXplclVzZXJ9XG4gICAqL1xuICBzdGFtcChtb2RlbCkge1xuICAgIHJldHVybiBuZXcgdGhpcy5jdG9yKG1vZGVsKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdGVtcGxhdGUgXCJtb2RlbFwiIChgVGVtcGxhdGVJbnN0YW5jZWApIGFzc29jaWF0ZWQgd2l0aFxuICAgKiBhIGdpdmVuIGVsZW1lbnQsIHdoaWNoIHNlcnZlcyBhcyB0aGUgYmluZGluZyBzY29wZSBmb3IgdGhlIHRlbXBsYXRlXG4gICAqIGluc3RhbmNlIHRoZSBlbGVtZW50IGlzIGNvbnRhaW5lZCBpbi4gIEEgdGVtcGxhdGUgbW9kZWwgc2hvdWxkIGJlIHVzZWRcbiAgICogdG8gbWFuaXB1bGF0ZSBkYXRhIGFzc29jaWF0ZWQgd2l0aCB0aGlzIHRlbXBsYXRlIGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbCBFbGVtZW50IGZvciB3aGljaCB0byByZXR1cm4gYSB0ZW1wbGF0ZSBtb2RlbC5cbiAgICogQHJldHVybiB7VGVtcGxhdGVJbnN0YW5jZUJhc2V9IE1vZGVsIHJlcHJlc2VudGluZyB0aGUgYmluZGluZyBzY29wZSBmb3JcbiAgICogICB0aGUgZWxlbWVudC5cbiAgICogQHRoaXMge1RlbXBsYXRpemVyVXNlcn1cbiAgICovXG4gIG1vZGVsRm9yRWxlbWVudChlbCkge1xuICAgIHJldHVybiBtb2RlbEZvckVsZW1lbnQodGhpcy5fdGVtcGxhdGl6ZXJUZW1wbGF0ZSwgZWwpO1xuICB9XG59O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbi8qKlxuICogQGZpbGVvdmVydmlld1xuICpcbiAqIE1vZHVsZSB0byBoaWRlIGA8ZG9tLWJpbmQ+YCwgYDxkb20taWY+YCwgYW5kIGA8ZG9tLXJlcGVhdD5gIGVsZW1lbnRzXG4gKiBvcHRpbWFsbHkgaW4gU2hhZHlET01cbiAqL1xuXG5pbXBvcnQge2xlZ2FjeU9wdGltaXphdGlvbnMsIHVzZVNoYWRvd30gZnJvbSAnLi9zZXR0aW5ncy5qcyc7XG5cbmxldCBlbGVtZW50c0hpZGRlbiA9IGZhbHNlO1xuXG4vKipcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgZWxlbWVudHMgd2lsbCBiZSBoaWRkZW4gZ2xvYmFsbHlcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGhpZGVFbGVtZW50c0dsb2JhbGx5KCkge1xuICBpZiAobGVnYWN5T3B0aW1pemF0aW9ucyAmJiAhdXNlU2hhZG93KSB7XG4gICAgaWYgKCFlbGVtZW50c0hpZGRlbikge1xuICAgICAgZWxlbWVudHNIaWRkZW4gPSB0cnVlO1xuICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgc3R5bGUudGV4dENvbnRlbnQgPSAnZG9tLWJpbmQsZG9tLWlmLGRvbS1yZXBlYXR7ZGlzcGxheTpub25lO30nO1xuICAgICAgZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn0iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnLi4vdXRpbHMvYm9vdC5qcyc7XG5cbmltcG9ydCB7IFByb3BlcnR5RWZmZWN0cyB9IGZyb20gJy4uL21peGlucy9wcm9wZXJ0eS1lZmZlY3RzLmpzJztcbmltcG9ydCB7IE9wdGlvbmFsTXV0YWJsZURhdGEgfSBmcm9tICcuLi9taXhpbnMvbXV0YWJsZS1kYXRhLmpzJztcbmltcG9ydCB7IEdlc3R1cmVFdmVudExpc3RlbmVycyB9IGZyb20gJy4uL21peGlucy9nZXN0dXJlLWV2ZW50LWxpc3RlbmVycy5qcyc7XG5pbXBvcnQgeyBzdHJpY3RUZW1wbGF0ZVBvbGljeSB9IGZyb20gJy4uL3V0aWxzL3NldHRpbmdzLmpzJztcbmltcG9ydCB7IHdyYXAgfSBmcm9tICcuLi91dGlscy93cmFwLmpzJztcbmltcG9ydCB7IGhpZGVFbGVtZW50c0dsb2JhbGx5IH0gZnJvbSAnLi4vdXRpbHMvaGlkZS10ZW1wbGF0ZS1jb250cm9scy5qcyc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyB7SFRNTEVsZW1lbnR9XG4gKiBAaW1wbGVtZW50cyB7UG9seW1lcl9Qcm9wZXJ0eUVmZmVjdHN9XG4gKiBAaW1wbGVtZW50cyB7UG9seW1lcl9PcHRpb25hbE11dGFibGVEYXRhfVxuICogQGltcGxlbWVudHMge1BvbHltZXJfR2VzdHVyZUV2ZW50TGlzdGVuZXJzfVxuICogQHByaXZhdGVcbiAqL1xuY29uc3QgZG9tQmluZEJhc2UgPVxuICBHZXN0dXJlRXZlbnRMaXN0ZW5lcnMoXG4gICAgT3B0aW9uYWxNdXRhYmxlRGF0YShcbiAgICAgIFByb3BlcnR5RWZmZWN0cyhIVE1MRWxlbWVudCkpKTtcblxuLyoqXG4gKiBDdXN0b20gZWxlbWVudCB0byBhbGxvdyB1c2luZyBQb2x5bWVyJ3MgdGVtcGxhdGUgZmVhdHVyZXMgKGRhdGEgYmluZGluZyxcbiAqIGRlY2xhcmF0aXZlIGV2ZW50IGxpc3RlbmVycywgZXRjLikgaW4gdGhlIG1haW4gZG9jdW1lbnQgd2l0aG91dCBkZWZpbmluZ1xuICogYSBuZXcgY3VzdG9tIGVsZW1lbnQuXG4gKlxuICogYDx0ZW1wbGF0ZT5gIHRhZ3MgdXRpbGl6aW5nIGJpbmRpbmdzIG1heSBiZSB3cmFwcGVkIHdpdGggdGhlIGA8ZG9tLWJpbmQ+YFxuICogZWxlbWVudCwgd2hpY2ggd2lsbCBpbW1lZGlhdGVseSBzdGFtcCB0aGUgd3JhcHBlZCB0ZW1wbGF0ZSBpbnRvIHRoZSBtYWluXG4gKiBkb2N1bWVudCBhbmQgYmluZCBlbGVtZW50cyB0byB0aGUgYGRvbS1iaW5kYCBlbGVtZW50IGl0c2VsZiBhcyB0aGVcbiAqIGJpbmRpbmcgc2NvcGUuXG4gKlxuICogQHBvbHltZXJcbiAqIEBjdXN0b21FbGVtZW50XG4gKiBAYXBwbGllc01peGluIFByb3BlcnR5RWZmZWN0c1xuICogQGFwcGxpZXNNaXhpbiBPcHRpb25hbE11dGFibGVEYXRhXG4gKiBAYXBwbGllc01peGluIEdlc3R1cmVFdmVudExpc3RlbmVyc1xuICogQGV4dGVuZHMge2RvbUJpbmRCYXNlfVxuICogQHN1bW1hcnkgQ3VzdG9tIGVsZW1lbnQgdG8gYWxsb3cgdXNpbmcgUG9seW1lcidzIHRlbXBsYXRlIGZlYXR1cmVzIChkYXRhXG4gKiAgIGJpbmRpbmcsIGRlY2xhcmF0aXZlIGV2ZW50IGxpc3RlbmVycywgZXRjLikgaW4gdGhlIG1haW4gZG9jdW1lbnQuXG4gKi9cbmV4cG9ydCBjbGFzcyBEb21CaW5kIGV4dGVuZHMgZG9tQmluZEJhc2Uge1xuXG4gIHN0YXRpYyBnZXQgb2JzZXJ2ZWRBdHRyaWJ1dGVzKCkgeyByZXR1cm4gWydtdXRhYmxlLWRhdGEnXTsgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgaWYgKHN0cmljdFRlbXBsYXRlUG9saWN5KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYHN0cmljdFRlbXBsYXRlUG9saWN5OiBkb20tYmluZCBub3QgYWxsb3dlZGApO1xuICAgIH1cbiAgICB0aGlzLnJvb3QgPSBudWxsO1xuICAgIHRoaXMuJCA9IG51bGw7XG4gICAgdGhpcy5fX2NoaWxkcmVuID0gbnVsbDtcbiAgfVxuXG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXVudXNlZC12YXJzICovXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHBhcmFtIHtzdHJpbmd9IG5hbWUgTmFtZSBvZiBhdHRyaWJ1dGUgdGhhdCBjaGFuZ2VkXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gb2xkIE9sZCBhdHRyaWJ1dGUgdmFsdWVcbiAgICogQHBhcmFtIHs/c3RyaW5nfSB2YWx1ZSBOZXcgYXR0cmlidXRlIHZhbHVlXG4gICAqIEBwYXJhbSB7P3N0cmluZ30gbmFtZXNwYWNlIEF0dHJpYnV0ZSBuYW1lc3BhY2UuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sobmFtZSwgb2xkLCB2YWx1ZSwgbmFtZXNwYWNlKSB7XG4gICAgLy8gYXNzdW1lcyBvbmx5IG9uZSBvYnNlcnZlZCBhdHRyaWJ1dGVcbiAgICB0aGlzLm11dGFibGVEYXRhID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIGlmICghaGlkZUVsZW1lbnRzR2xvYmFsbHkoKSkge1xuICAgICAgdGhpcy5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgZGlzY29ubmVjdGVkQ2FsbGJhY2soKSB7XG4gICAgdGhpcy5fX3JlbW92ZUNoaWxkcmVuKCk7XG4gIH1cblxuICBfX2luc2VydENoaWxkcmVuKCkge1xuICAgIHdyYXAod3JhcCh0aGlzKS5wYXJlbnROb2RlKS5pbnNlcnRCZWZvcmUodGhpcy5yb290LCB0aGlzKTtcbiAgfVxuXG4gIF9fcmVtb3ZlQ2hpbGRyZW4oKSB7XG4gICAgaWYgKHRoaXMuX19jaGlsZHJlbikge1xuICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuX19jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLnJvb3QuYXBwZW5kQ2hpbGQodGhpcy5fX2NoaWxkcmVuW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yY2VzIHRoZSBlbGVtZW50IHRvIHJlbmRlciBpdHMgY29udGVudC4gVGhpcyBpcyB0eXBpY2FsbHkgb25seVxuICAgKiBuZWNlc3NhcnkgdG8gY2FsbCBpZiBIVE1MSW1wb3J0cyB3aXRoIHRoZSBhc3luYyBhdHRyaWJ1dGUgYXJlIHVzZWQuXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICByZW5kZXIoKSB7XG4gICAgbGV0IHRlbXBsYXRlO1xuICAgIGlmICghdGhpcy5fX2NoaWxkcmVuKSB7XG4gICAgICB0ZW1wbGF0ZSA9IC8qKiBAdHlwZSB7P0hUTUxUZW1wbGF0ZUVsZW1lbnR9ICovKHRlbXBsYXRlIHx8IHRoaXMucXVlcnlTZWxlY3RvcigndGVtcGxhdGUnKSk7XG4gICAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgIC8vIFdhaXQgdW50aWwgY2hpbGRMaXN0IGNoYW5nZXMgYW5kIHRlbXBsYXRlIHNob3VsZCBiZSB0aGVyZSBieSB0aGVuXG4gICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICB0ZW1wbGF0ZSA9IC8qKiBAdHlwZSB7SFRNTFRlbXBsYXRlRWxlbWVudH0gKi8odGhpcy5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpKTtcbiAgICAgICAgICBpZiAodGVtcGxhdGUpIHtcbiAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZG9tLWJpbmQgcmVxdWlyZXMgYSA8dGVtcGxhdGU+IGNoaWxkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLCB7Y2hpbGRMaXN0OiB0cnVlfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucm9vdCA9IHRoaXMuX3N0YW1wVGVtcGxhdGUoXG4gICAgICAgIC8qKiBAdHlwZSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9ICovKHRlbXBsYXRlKSk7XG4gICAgICB0aGlzLiQgPSB0aGlzLnJvb3QuJDtcbiAgICAgIHRoaXMuX19jaGlsZHJlbiA9IFtdO1xuICAgICAgZm9yIChsZXQgbj10aGlzLnJvb3QuZmlyc3RDaGlsZDsgbjsgbj1uLm5leHRTaWJsaW5nKSB7XG4gICAgICAgIHRoaXMuX19jaGlsZHJlblt0aGlzLl9fY2hpbGRyZW4ubGVuZ3RoXSA9IG47XG4gICAgICB9XG4gICAgICB0aGlzLl9lbmFibGVQcm9wZXJ0aWVzKCk7XG4gICAgfVxuICAgIHRoaXMuX19pbnNlcnRDaGlsZHJlbigpO1xuICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2RvbS1jaGFuZ2UnLCB7XG4gICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgY29tcG9zZWQ6IHRydWVcbiAgICB9KSk7XG4gIH1cblxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2RvbS1iaW5kJywgRG9tQmluZCk7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCB7IFBvbHltZXJFbGVtZW50IH0gZnJvbSAnLi4vLi4vcG9seW1lci1lbGVtZW50LmpzJztcblxuaW1wb3J0IHsgVGVtcGxhdGVJbnN0YW5jZUJhc2UsIHRlbXBsYXRpemUsIG1vZGVsRm9yRWxlbWVudCB9IGZyb20gJy4uL3V0aWxzL3RlbXBsYXRpemUuanMnOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5pbXBvcnQgeyBEZWJvdW5jZXIgfSBmcm9tICcuLi91dGlscy9kZWJvdW5jZS5qcyc7XG5pbXBvcnQgeyBlbnF1ZXVlRGVib3VuY2VyLCBmbHVzaCB9IGZyb20gJy4uL3V0aWxzL2ZsdXNoLmpzJztcbmltcG9ydCB7IE9wdGlvbmFsTXV0YWJsZURhdGEgfSBmcm9tICcuLi9taXhpbnMvbXV0YWJsZS1kYXRhLmpzJztcbmltcG9ydCB7IG1hdGNoZXMsIHRyYW5zbGF0ZSB9IGZyb20gJy4uL3V0aWxzL3BhdGguanMnO1xuaW1wb3J0IHsgdGltZU91dCwgbWljcm9UYXNrIH0gZnJvbSAnLi4vdXRpbHMvYXN5bmMuanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4uL3V0aWxzL3dyYXAuanMnO1xuaW1wb3J0IHsgaGlkZUVsZW1lbnRzR2xvYmFsbHkgfSBmcm9tICcuLi91dGlscy9oaWRlLXRlbXBsYXRlLWNvbnRyb2xzLmpzJztcbmltcG9ydCB7IHN1cHByZXNzVGVtcGxhdGVOb3RpZmljYXRpb25zIH0gZnJvbSAnLi4vdXRpbHMvc2V0dGluZ3MuanMnO1xuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGltcGxlbWVudHMge1BvbHltZXJfT3B0aW9uYWxNdXRhYmxlRGF0YX1cbiAqIEBleHRlbmRzIHtQb2x5bWVyRWxlbWVudH1cbiAqIEBwcml2YXRlXG4gKi9cbmNvbnN0IGRvbVJlcGVhdEJhc2UgPSBPcHRpb25hbE11dGFibGVEYXRhKFBvbHltZXJFbGVtZW50KTtcblxuLyoqXG4gKiBUaGUgYDxkb20tcmVwZWF0PmAgZWxlbWVudCB3aWxsIGF1dG9tYXRpY2FsbHkgc3RhbXAgYW5kIGJpbmRzIG9uZSBpbnN0YW5jZVxuICogb2YgdGVtcGxhdGUgY29udGVudCB0byBlYWNoIG9iamVjdCBpbiBhIHVzZXItcHJvdmlkZWQgYXJyYXkuXG4gKiBgZG9tLXJlcGVhdGAgYWNjZXB0cyBhbiBgaXRlbXNgIHByb3BlcnR5LCBhbmQgb25lIGluc3RhbmNlIG9mIHRoZSB0ZW1wbGF0ZVxuICogaXMgc3RhbXBlZCBmb3IgZWFjaCBpdGVtIGludG8gdGhlIERPTSBhdCB0aGUgbG9jYXRpb24gb2YgdGhlIGBkb20tcmVwZWF0YFxuICogZWxlbWVudC4gIFRoZSBgaXRlbWAgcHJvcGVydHkgd2lsbCBiZSBzZXQgb24gZWFjaCBpbnN0YW5jZSdzIGJpbmRpbmdcbiAqIHNjb3BlLCB0aHVzIHRlbXBsYXRlcyBzaG91bGQgYmluZCB0byBzdWItcHJvcGVydGllcyBvZiBgaXRlbWAuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBgYGBodG1sXG4gKiA8ZG9tLW1vZHVsZSBpZD1cImVtcGxveWVlLWxpc3RcIj5cbiAqXG4gKiAgIDx0ZW1wbGF0ZT5cbiAqXG4gKiAgICAgPGRpdj4gRW1wbG95ZWUgbGlzdDogPC9kaXY+XG4gKiAgICAgPGRvbS1yZXBlYXQgaXRlbXM9XCJ7e2VtcGxveWVlc319XCI+XG4gKiAgICAgICA8dGVtcGxhdGU+XG4gKiAgICAgICAgIDxkaXY+Rmlyc3QgbmFtZTogPHNwYW4+e3tpdGVtLmZpcnN0fX08L3NwYW4+PC9kaXY+XG4gKiAgICAgICAgIDxkaXY+TGFzdCBuYW1lOiA8c3Bhbj57e2l0ZW0ubGFzdH19PC9zcGFuPjwvZGl2PlxuICogICAgICAgPC90ZW1wbGF0ZT5cbiAqICAgICA8L2RvbS1yZXBlYXQ+XG4gKlxuICogICA8L3RlbXBsYXRlPlxuICpcbiAqIDwvZG9tLW1vZHVsZT5cbiAqIGBgYFxuICpcbiAqIFdpdGggdGhlIGZvbGxvd2luZyBjdXN0b20gZWxlbWVudCBkZWZpbml0aW9uOlxuICpcbiAqIGBgYGpzXG4gKiBjbGFzcyBFbXBsb3llZUxpc3QgZXh0ZW5kcyBQb2x5bWVyRWxlbWVudCB7XG4gKiAgIHN0YXRpYyBnZXQgaXMoKSB7IHJldHVybiAnZW1wbG95ZWUtbGlzdCc7IH1cbiAqICAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICogICAgIHJldHVybiB7XG4gKiAgICAgICBlbXBsb3llZXM6IHtcbiAqICAgICAgICAgdmFsdWUoKSB7XG4gKiAgICAgICAgICAgcmV0dXJuIFtcbiAqICAgICAgICAgICAgIHtmaXJzdDogJ0JvYicsIGxhc3Q6ICdTbWl0aCd9LFxuICogICAgICAgICAgICAge2ZpcnN0OiAnU2FsbHknLCBsYXN0OiAnSm9obnNvbid9LFxuICogICAgICAgICAgICAgLi4uXG4gKiAgICAgICAgICAgXTtcbiAqICAgICAgICAgfVxuICogICAgICAgfVxuICogICAgIH07XG4gKiAgIH1cbiAqIH1cbiAqIGBgYFxuICpcbiAqIE5vdGlmaWNhdGlvbnMgZm9yIGNoYW5nZXMgdG8gaXRlbXMgc3ViLXByb3BlcnRpZXMgd2lsbCBiZSBmb3J3YXJkZWQgdG8gdGVtcGxhdGVcbiAqIGluc3RhbmNlcywgd2hpY2ggd2lsbCB1cGRhdGUgdmlhIHRoZSBub3JtYWwgc3RydWN0dXJlZCBkYXRhIG5vdGlmaWNhdGlvbiBzeXN0ZW0uXG4gKlxuICogTXV0YXRpb25zIHRvIHRoZSBgaXRlbXNgIGFycmF5IGl0c2VsZiBzaG91bGQgYmUgbWFkZSB1c2luZyB0aGUgQXJyYXlcbiAqIG11dGF0aW9uIEFQSSdzIG9uIHRoZSBQcm9wZXJ0eUVmZmVjdHMgbWl4aW4gKGBwdXNoYCwgYHBvcGAsIGBzcGxpY2VgLFxuICogYHNoaWZ0YCwgYHVuc2hpZnRgKSwgYW5kIHRlbXBsYXRlIGluc3RhbmNlcyB3aWxsIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZVxuICogZGF0YSBpbiB0aGUgYXJyYXkuXG4gKlxuICogRXZlbnRzIGNhdWdodCBieSBldmVudCBoYW5kbGVycyB3aXRoaW4gdGhlIGBkb20tcmVwZWF0YCB0ZW1wbGF0ZSB3aWxsIGJlXG4gKiBkZWNvcmF0ZWQgd2l0aCBhIGBtb2RlbGAgcHJvcGVydHksIHdoaWNoIHJlcHJlc2VudHMgdGhlIGJpbmRpbmcgc2NvcGUgZm9yXG4gKiBlYWNoIHRlbXBsYXRlIGluc3RhbmNlLiAgVGhlIG1vZGVsIHNob3VsZCBiZSB1c2VkIHRvIG1hbmlwdWxhdGUgZGF0YSBvbiB0aGVcbiAqIGluc3RhbmNlLCBmb3IgZXhhbXBsZSBgZXZlbnQubW9kZWwuc2V0KCdpdGVtLmNoZWNrZWQnLCB0cnVlKTtgLlxuICpcbiAqIEFsdGVybmF0aXZlbHksIHRoZSBtb2RlbCBmb3IgYSB0ZW1wbGF0ZSBpbnN0YW5jZSBmb3IgYW4gZWxlbWVudCBzdGFtcGVkIGJ5XG4gKiBhIGBkb20tcmVwZWF0YCBjYW4gYmUgb2J0YWluZWQgdXNpbmcgdGhlIGBtb2RlbEZvckVsZW1lbnRgIEFQSSBvbiB0aGVcbiAqIGBkb20tcmVwZWF0YCB0aGF0IHN0YW1wZWQgaXQsIGZvciBleGFtcGxlXG4gKiBgdGhpcy4kLmRvbVJlcGVhdC5tb2RlbEZvckVsZW1lbnQoZXZlbnQudGFyZ2V0KS5zZXQoJ2l0ZW0uY2hlY2tlZCcsIHRydWUpO2AuXG4gKiBUaGlzIG1heSBiZSB1c2VmdWwgZm9yIG1hbmlwdWxhdGluZyBpbnN0YW5jZSBkYXRhIG9mIGV2ZW50IHRhcmdldHMgb2J0YWluZWRcbiAqIGJ5IGV2ZW50IGhhbmRsZXJzIG9uIHBhcmVudHMgb2YgdGhlIGBkb20tcmVwZWF0YCAoZXZlbnQgZGVsZWdhdGlvbikuXG4gKlxuICogQSB2aWV3LXNwZWNpZmljIGZpbHRlci9zb3J0IG1heSBiZSBhcHBsaWVkIHRvIGVhY2ggYGRvbS1yZXBlYXRgIGJ5IHN1cHBseWluZyBhXG4gKiBgZmlsdGVyYCBhbmQvb3IgYHNvcnRgIHByb3BlcnR5LiAgVGhpcyBtYXkgYmUgYSBzdHJpbmcgdGhhdCBuYW1lcyBhIGZ1bmN0aW9uIG9uXG4gKiB0aGUgaG9zdCwgb3IgYSBmdW5jdGlvbiBtYXkgYmUgYXNzaWduZWQgdG8gdGhlIHByb3BlcnR5IGRpcmVjdGx5LiAgVGhlIGZ1bmN0aW9uc1xuICogc2hvdWxkIGltcGxlbWVudGVkIGZvbGxvd2luZyB0aGUgc3RhbmRhcmQgYEFycmF5YCBmaWx0ZXIvc29ydCBBUEkuXG4gKlxuICogSW4gb3JkZXIgdG8gcmUtcnVuIHRoZSBmaWx0ZXIgb3Igc29ydCBmdW5jdGlvbnMgYmFzZWQgb24gY2hhbmdlcyB0byBzdWItZmllbGRzXG4gKiBvZiBgaXRlbXNgLCB0aGUgYG9ic2VydmVgIHByb3BlcnR5IG1heSBiZSBzZXQgYXMgYSBzcGFjZS1zZXBhcmF0ZWQgbGlzdCBvZlxuICogYGl0ZW1gIHN1Yi1maWVsZHMgdGhhdCBzaG91bGQgY2F1c2UgYSByZS1maWx0ZXIvc29ydCB3aGVuIG1vZGlmaWVkLiAgSWZcbiAqIHRoZSBmaWx0ZXIgb3Igc29ydCBmdW5jdGlvbiBkZXBlbmRzIG9uIHByb3BlcnRpZXMgbm90IGNvbnRhaW5lZCBpbiBgaXRlbXNgLFxuICogdGhlIHVzZXIgc2hvdWxkIG9ic2VydmUgY2hhbmdlcyB0byB0aG9zZSBwcm9wZXJ0aWVzIGFuZCBjYWxsIGByZW5kZXJgIHRvIHVwZGF0ZVxuICogdGhlIHZpZXcgYmFzZWQgb24gdGhlIGRlcGVuZGVuY3kgY2hhbmdlLlxuICpcbiAqIEZvciBleGFtcGxlLCBmb3IgYW4gYGRvbS1yZXBlYXRgIHdpdGggYSBmaWx0ZXIgb2YgdGhlIGZvbGxvd2luZzpcbiAqXG4gKiBgYGBqc1xuICogaXNFbmdpbmVlcihpdGVtKSB7XG4gKiAgIHJldHVybiBpdGVtLnR5cGUgPT0gJ2VuZ2luZWVyJyB8fCBpdGVtLm1hbmFnZXIudHlwZSA9PSAnZW5naW5lZXInO1xuICogfVxuICogYGBgXG4gKlxuICogVGhlbiB0aGUgYG9ic2VydmVgIHByb3BlcnR5IHNob3VsZCBiZSBjb25maWd1cmVkIGFzIGZvbGxvd3M6XG4gKlxuICogYGBgaHRtbFxuICogPGRvbS1yZXBlYXQgaXRlbXM9XCJ7e2VtcGxveWVlc319XCIgZmlsdGVyPVwiaXNFbmdpbmVlclwiIG9ic2VydmU9XCJ0eXBlIG1hbmFnZXIudHlwZVwiPlxuICogYGBgXG4gKlxuICogQGN1c3RvbUVsZW1lbnRcbiAqIEBwb2x5bWVyXG4gKiBAZXh0ZW5kcyB7ZG9tUmVwZWF0QmFzZX1cbiAqIEBhcHBsaWVzTWl4aW4gT3B0aW9uYWxNdXRhYmxlRGF0YVxuICogQHN1bW1hcnkgQ3VzdG9tIGVsZW1lbnQgZm9yIHN0YW1waW5nIGluc3RhbmNlIG9mIGEgdGVtcGxhdGUgYm91bmQgdG9cbiAqICAgaXRlbXMgaW4gYW4gYXJyYXkuXG4gKi9cbmV4cG9ydCBjbGFzcyBEb21SZXBlYXQgZXh0ZW5kcyBkb21SZXBlYXRCYXNlIHtcblxuICAvLyBOb3QgbmVlZGVkIHRvIGZpbmQgdGVtcGxhdGU7IGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGFuYWx5emVyXG4gIC8vIGNhbiBmaW5kIHRoZSB0YWcgbmFtZSBmcm9tIGN1c3RvbUVsZW1lbnRzLmRlZmluZSBjYWxsXG4gIHN0YXRpYyBnZXQgaXMoKSB7IHJldHVybiAnZG9tLXJlcGVhdCc7IH1cblxuICBzdGF0aWMgZ2V0IHRlbXBsYXRlKCkgeyByZXR1cm4gbnVsbDsgfVxuXG4gIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcblxuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW5ldmVyIERPTSBpcyBhZGRlZCBvciByZW1vdmVkIGJ5IHRoaXMgdGVtcGxhdGUgKGJ5XG4gICAgICogZGVmYXVsdCwgcmVuZGVyaW5nIG9jY3VycyBsYXppbHkpLiAgVG8gZm9yY2UgaW1tZWRpYXRlIHJlbmRlcmluZywgY2FsbFxuICAgICAqIGByZW5kZXJgLlxuICAgICAqXG4gICAgICogQGV2ZW50IGRvbS1jaGFuZ2VcbiAgICAgKi9cbiAgICByZXR1cm4ge1xuXG4gICAgICAvKipcbiAgICAgICAqIEFuIGFycmF5IGNvbnRhaW5pbmcgaXRlbXMgZGV0ZXJtaW5pbmcgaG93IG1hbnkgaW5zdGFuY2VzIG9mIHRoZSB0ZW1wbGF0ZVxuICAgICAgICogdG8gc3RhbXAgYW5kIHRoYXQgdGhhdCBlYWNoIHRlbXBsYXRlIGluc3RhbmNlIHNob3VsZCBiaW5kIHRvLlxuICAgICAgICovXG4gICAgICBpdGVtczoge1xuICAgICAgICB0eXBlOiBBcnJheVxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdmFyaWFibGUgdG8gYWRkIHRvIHRoZSBiaW5kaW5nIHNjb3BlIGZvciB0aGUgYXJyYXlcbiAgICAgICAqIGVsZW1lbnQgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gdGVtcGxhdGUgaW5zdGFuY2UuXG4gICAgICAgKi9cbiAgICAgIGFzOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6ICdpdGVtJ1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBUaGUgbmFtZSBvZiB0aGUgdmFyaWFibGUgdG8gYWRkIHRvIHRoZSBiaW5kaW5nIHNjb3BlIHdpdGggdGhlIGluZGV4XG4gICAgICAgKiBvZiB0aGUgaW5zdGFuY2UgaW4gdGhlIHNvcnRlZCBhbmQgZmlsdGVyZWQgbGlzdCBvZiByZW5kZXJlZCBpdGVtcy5cbiAgICAgICAqIE5vdGUsIGZvciB0aGUgaW5kZXggaW4gdGhlIGB0aGlzLml0ZW1zYCBhcnJheSwgdXNlIHRoZSB2YWx1ZSBvZiB0aGVcbiAgICAgICAqIGBpdGVtc0luZGV4QXNgIHByb3BlcnR5LlxuICAgICAgICovXG4gICAgICBpbmRleEFzOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6ICdpbmRleCdcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogVGhlIG5hbWUgb2YgdGhlIHZhcmlhYmxlIHRvIGFkZCB0byB0aGUgYmluZGluZyBzY29wZSB3aXRoIHRoZSBpbmRleFxuICAgICAgICogb2YgdGhlIGluc3RhbmNlIGluIHRoZSBgdGhpcy5pdGVtc2AgYXJyYXkuIE5vdGUsIGZvciB0aGUgaW5kZXggb2ZcbiAgICAgICAqIHRoaXMgaW5zdGFuY2UgaW4gdGhlIHNvcnRlZCBhbmQgZmlsdGVyZWQgbGlzdCBvZiByZW5kZXJlZCBpdGVtcyxcbiAgICAgICAqIHVzZSB0aGUgdmFsdWUgb2YgdGhlIGBpbmRleEFzYCBwcm9wZXJ0eS5cbiAgICAgICAqL1xuICAgICAgaXRlbXNJbmRleEFzOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgdmFsdWU6ICdpdGVtc0luZGV4J1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgc2hvdWxkIGRldGVybWluZSB0aGUgc29ydCBvcmRlciBvZiB0aGUgaXRlbXMuICBUaGlzXG4gICAgICAgKiBwcm9wZXJ0eSBzaG91bGQgZWl0aGVyIGJlIHByb3ZpZGVkIGFzIGEgc3RyaW5nLCBpbmRpY2F0aW5nIGEgbWV0aG9kXG4gICAgICAgKiBuYW1lIG9uIHRoZSBlbGVtZW50J3MgaG9zdCwgb3IgZWxzZSBiZSBhbiBhY3R1YWwgZnVuY3Rpb24uICBUaGVcbiAgICAgICAqIGZ1bmN0aW9uIHNob3VsZCBtYXRjaCB0aGUgc29ydCBmdW5jdGlvbiBwYXNzZWQgdG8gYEFycmF5LnNvcnRgLlxuICAgICAgICogVXNpbmcgYSBzb3J0IGZ1bmN0aW9uIGhhcyBubyBlZmZlY3Qgb24gdGhlIHVuZGVybHlpbmcgYGl0ZW1zYCBhcnJheS5cbiAgICAgICAqL1xuICAgICAgc29ydDoge1xuICAgICAgICB0eXBlOiBGdW5jdGlvbixcbiAgICAgICAgb2JzZXJ2ZXI6ICdfX3NvcnRDaGFuZ2VkJ1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBBIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gZmlsdGVyIGl0ZW1zIG91dCBvZiB0aGUgdmlldy4gIFRoaXNcbiAgICAgICAqIHByb3BlcnR5IHNob3VsZCBlaXRoZXIgYmUgcHJvdmlkZWQgYXMgYSBzdHJpbmcsIGluZGljYXRpbmcgYSBtZXRob2RcbiAgICAgICAqIG5hbWUgb24gdGhlIGVsZW1lbnQncyBob3N0LCBvciBlbHNlIGJlIGFuIGFjdHVhbCBmdW5jdGlvbi4gIFRoZVxuICAgICAgICogZnVuY3Rpb24gc2hvdWxkIG1hdGNoIHRoZSBzb3J0IGZ1bmN0aW9uIHBhc3NlZCB0byBgQXJyYXkuZmlsdGVyYC5cbiAgICAgICAqIFVzaW5nIGEgZmlsdGVyIGZ1bmN0aW9uIGhhcyBubyBlZmZlY3Qgb24gdGhlIHVuZGVybHlpbmcgYGl0ZW1zYCBhcnJheS5cbiAgICAgICAqL1xuICAgICAgZmlsdGVyOiB7XG4gICAgICAgIHR5cGU6IEZ1bmN0aW9uLFxuICAgICAgICBvYnNlcnZlcjogJ19fZmlsdGVyQ2hhbmdlZCdcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB1c2luZyBhIGBmaWx0ZXJgIG9yIGBzb3J0YCBmdW5jdGlvbiwgdGhlIGBvYnNlcnZlYCBwcm9wZXJ0eVxuICAgICAgICogc2hvdWxkIGJlIHNldCB0byBhIHNwYWNlLXNlcGFyYXRlZCBsaXN0IG9mIHRoZSBuYW1lcyBvZiBpdGVtXG4gICAgICAgKiBzdWItZmllbGRzIHRoYXQgc2hvdWxkIHRyaWdnZXIgYSByZS1zb3J0IG9yIHJlLWZpbHRlciB3aGVuIGNoYW5nZWQuXG4gICAgICAgKiBUaGVzZSBzaG91bGQgZ2VuZXJhbGx5IGJlIGZpZWxkcyBvZiBgaXRlbWAgdGhhdCB0aGUgc29ydCBvciBmaWx0ZXJcbiAgICAgICAqIGZ1bmN0aW9uIGRlcGVuZHMgb24uXG4gICAgICAgKi9cbiAgICAgIG9ic2VydmU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBvYnNlcnZlcjogJ19fb2JzZXJ2ZUNoYW5nZWQnXG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gdXNpbmcgYSBgZmlsdGVyYCBvciBgc29ydGAgZnVuY3Rpb24sIHRoZSBgZGVsYXlgIHByb3BlcnR5XG4gICAgICAgKiBkZXRlcm1pbmVzIGEgZGVib3VuY2UgdGltZSBpbiBtcyBhZnRlciBhIGNoYW5nZSB0byBvYnNlcnZlZCBpdGVtXG4gICAgICAgKiBwcm9wZXJ0aWVzIHRoYXQgbXVzdCBwYXNzIGJlZm9yZSB0aGUgZmlsdGVyIG9yIHNvcnQgaXMgcmUtcnVuLlxuICAgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gcmF0ZS1saW1pdGluZyBzaHVmZmxpbmcgb2YgdGhlIHZpZXcgd2hlblxuICAgICAgICogaXRlbSBjaGFuZ2VzIG1heSBiZSBmcmVxdWVudC5cbiAgICAgICAqL1xuICAgICAgZGVsYXk6IE51bWJlcixcblxuICAgICAgLyoqXG4gICAgICAgKiBDb3VudCBvZiBjdXJyZW50bHkgcmVuZGVyZWQgaXRlbXMgYWZ0ZXIgYGZpbHRlcmAgKGlmIGFueSkgaGFzIGJlZW4gYXBwbGllZC5cbiAgICAgICAqIElmIFwiY2h1bmtpbmcgbW9kZVwiIGlzIGVuYWJsZWQsIGByZW5kZXJlZEl0ZW1Db3VudGAgaXMgdXBkYXRlZCBlYWNoIHRpbWUgYVxuICAgICAgICogc2V0IG9mIHRlbXBsYXRlIGluc3RhbmNlcyBpcyByZW5kZXJlZC5cbiAgICAgICAqXG4gICAgICAgKi9cbiAgICAgIHJlbmRlcmVkSXRlbUNvdW50OiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgbm90aWZ5OiAhc3VwcHJlc3NUZW1wbGF0ZU5vdGlmaWNhdGlvbnMsXG4gICAgICAgIHJlYWRPbmx5OiB0cnVlXG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gZ3JlYXRlciB0aGFuIHplcm8sIGRlZmluZXMgYW4gaW5pdGlhbCBjb3VudCBvZiB0ZW1wbGF0ZSBpbnN0YW5jZXNcbiAgICAgICAqIHRvIHJlbmRlciBhZnRlciBzZXR0aW5nIHRoZSBgaXRlbXNgIGFycmF5LCBiZWZvcmUgdGhlIG5leHQgcGFpbnQsIGFuZFxuICAgICAgICogcHV0cyB0aGUgYGRvbS1yZXBlYXRgIGludG8gXCJjaHVua2luZyBtb2RlXCIuICBUaGUgcmVtYWluaW5nIGl0ZW1zIChhbmRcbiAgICAgICAqIGFueSBmdXR1cmUgaXRlbXMgYXMgYSByZXN1bHQgb2YgcHVzaGluZyBvbnRvIHRoZSBhcnJheSkgd2lsbCBiZSBjcmVhdGVkXG4gICAgICAgKiBhbmQgcmVuZGVyZWQgaW5jcmVtZW50YWxseSBhdCBlYWNoIGFuaW1hdGlvbiBmcmFtZSB0aGVyZW9mIHVudGlsIGFsbFxuICAgICAgICogaW5zdGFuY2VzIGhhdmUgYmVlbiByZW5kZXJlZC5cbiAgICAgICAqL1xuICAgICAgaW5pdGlhbENvdW50OiB7XG4gICAgICAgIHR5cGU6IE51bWJlclxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIGBpbml0aWFsQ291bnRgIGlzIHVzZWQsIHRoaXMgcHJvcGVydHkgZGVmaW5lcyBhIGZyYW1lIHJhdGUgKGluXG4gICAgICAgKiBmcHMpIHRvIHRhcmdldCBieSB0aHJvdHRsaW5nIHRoZSBudW1iZXIgb2YgaW5zdGFuY2VzIHJlbmRlcmVkIGVhY2hcbiAgICAgICAqIGZyYW1lIHRvIG5vdCBleGNlZWQgdGhlIGJ1ZGdldCBmb3IgdGhlIHRhcmdldCBmcmFtZSByYXRlLiAgVGhlXG4gICAgICAgKiBmcmFtZXJhdGUgaXMgZWZmZWN0aXZlbHkgdGhlIG51bWJlciBvZiBgcmVxdWVzdEFuaW1hdGlvbkZyYW1lYHMgdGhhdFxuICAgICAgICogaXQgdHJpZXMgdG8gYWxsb3cgdG8gYWN0dWFsbHkgZmlyZSBpbiBhIGdpdmVuIHNlY29uZC4gSXQgZG9lcyB0aGlzXG4gICAgICAgKiBieSBtZWFzdXJpbmcgdGhlIHRpbWUgYmV0d2VlbiBgckFGYHMgYW5kIGNvbnRpbnVvdXNseSBhZGp1c3RpbmcgdGhlXG4gICAgICAgKiBudW1iZXIgb2YgaXRlbXMgY3JlYXRlZCBlYWNoIGByQUZgIHRvIG1haW50YWluIHRoZSB0YXJnZXQgZnJhbWVyYXRlLlxuICAgICAgICogU2V0dGluZyB0aGlzIHRvIGEgaGlnaGVyIG51bWJlciBhbGxvd3MgbG93ZXIgbGF0ZW5jeSBhbmQgaGlnaGVyXG4gICAgICAgKiB0aHJvdWdocHV0IGZvciBldmVudCBoYW5kbGVycyBhbmQgb3RoZXIgdGFza3MsIGJ1dCByZXN1bHRzIGluIGFcbiAgICAgICAqIGxvbmdlciB0aW1lIGZvciB0aGUgcmVtYWluaW5nIGl0ZW1zIHRvIGNvbXBsZXRlIHJlbmRlcmluZy5cbiAgICAgICAqL1xuICAgICAgdGFyZ2V0RnJhbWVyYXRlOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgdmFsdWU6IDIwXG4gICAgICB9LFxuXG4gICAgICBfdGFyZ2V0RnJhbWVUaW1lOiB7XG4gICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgY29tcHV0ZWQ6ICdfX2NvbXB1dGVGcmFtZVRpbWUodGFyZ2V0RnJhbWVyYXRlKSdcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgZ2xvYmFsIGBzdXBwcmVzc1RlbXBsYXRlTm90aWZpY2F0aW9uc2Agc2V0dGluZyBpcyB1c2VkLCBzZXR0aW5nXG4gICAgICAgKiBgbm90aWZ5RG9tQ2hhbmdlOiB0cnVlYCB3aWxsIGVuYWJsZSBmaXJpbmcgYGRvbS1jaGFuZ2VgIGV2ZW50cyBvbiB0aGlzXG4gICAgICAgKiBlbGVtZW50LlxuICAgICAgICovXG4gICAgICBub3RpZnlEb21DaGFuZ2U6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhblxuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBXaGVuIGNodW5raW5nIGlzIGVuYWJsZWQgdmlhIGBpbml0aWFsQ291bnRgIGFuZCB0aGUgYGl0ZW1zYCBhcnJheSBpc1xuICAgICAgICogc2V0IHRvIGEgbmV3IGFycmF5LCB0aGlzIGZsYWcgY29udHJvbHMgd2hldGhlciB0aGUgcHJldmlvdXNseSByZW5kZXJlZFxuICAgICAgICogaW5zdGFuY2VzIGFyZSByZXVzZWQgb3Igbm90LlxuICAgICAgICpcbiAgICAgICAqIFdoZW4gYHRydWVgLCBhbnkgcHJldmlvdXNseSByZW5kZXJlZCB0ZW1wbGF0ZSBpbnN0YW5jZXMgYXJlIHVwZGF0ZWQgaW5cbiAgICAgICAqIHBsYWNlIHRvIHRoZWlyIG5ldyBpdGVtIHZhbHVlcyBzeW5jaHJvbm91c2x5IGluIG9uZSBzaG90LCBhbmQgdGhlbiBhbnlcbiAgICAgICAqIGZ1cnRoZXIgaXRlbXMgKGlmIGFueSkgYXJlIGNodW5rZWQgb3V0LiAgV2hlbiBgZmFsc2VgLCB0aGUgbGlzdCBpc1xuICAgICAgICogcmV0dXJuZWQgYmFjayB0byBpdHMgYGluaXRpYWxDb3VudGAgKGFueSBpbnN0YW5jZXMgb3ZlciB0aGUgaW5pdGlhbFxuICAgICAgICogY291bnQgYXJlIGRpc2NhcmRlZCkgYW5kIHRoZSByZW1haW5kZXIgb2YgdGhlIGxpc3QgaXMgY2h1bmtlZCBiYWNrIGluLlxuICAgICAgICogU2V0IHRoaXMgdG8gYHRydWVgIHRvIGF2b2lkIHJlLWNyZWF0aW5nIHRoZSBsaXN0IGFuZCBsb3Npbmcgc2Nyb2xsXG4gICAgICAgKiBwb3NpdGlvbiwgYWx0aG91Z2ggbm90ZSB0aGF0IHdoZW4gY2hhbmdpbmcgdGhlIGxpc3QgdG8gY29tcGxldGVseVxuICAgICAgICogZGlmZmVyZW50IGRhdGEgdGhlIHJlbmRlciB0aHJlYWQgd2lsbCBiZSBibG9ja2VkIHVudGlsIGFsbCBleGlzdGluZ1xuICAgICAgICogaW5zdGFuY2VzIGFyZSB1cGRhdGVkIHRvIHRoZWlyIG5ldyBkYXRhLlxuICAgICAgICovXG4gICAgICByZXVzZUNodW5rZWRJbnN0YW5jZXM6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhblxuICAgICAgfVxuXG4gICAgfTtcblxuICB9XG5cbiAgc3RhdGljIGdldCBvYnNlcnZlcnMoKSB7XG4gICAgcmV0dXJuIFsgJ19faXRlbXNDaGFuZ2VkKGl0ZW1zLiopJyBdO1xuICB9XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9faW5zdGFuY2VzID0gW107XG4gICAgdGhpcy5fX3JlbmRlckRlYm91bmNlciA9IG51bGw7XG4gICAgdGhpcy5fX2l0ZW1zSWR4VG9JbnN0SWR4ID0ge307XG4gICAgdGhpcy5fX2NodW5rQ291bnQgPSBudWxsO1xuICAgIHRoaXMuX19yZW5kZXJTdGFydFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX19pdGVtc0FycmF5Q2hhbmdlZCA9IGZhbHNlO1xuICAgIHRoaXMuX19zaG91bGRNZWFzdXJlQ2h1bmsgPSBmYWxzZTtcbiAgICB0aGlzLl9fc2hvdWxkQ29udGludWVDaHVua2luZyA9IGZhbHNlO1xuICAgIHRoaXMuX19jaHVua2luZ0lkID0gMDtcbiAgICB0aGlzLl9fc29ydEZuID0gbnVsbDtcbiAgICB0aGlzLl9fZmlsdGVyRm4gPSBudWxsO1xuICAgIHRoaXMuX19vYnNlcnZlUGF0aHMgPSBudWxsO1xuICAgIC8qKiBAdHlwZSB7P2Z1bmN0aW9uKG5ldzpUZW1wbGF0ZUluc3RhbmNlQmFzZSwgT2JqZWN0PSl9ICovXG4gICAgdGhpcy5fX2N0b3IgPSBudWxsO1xuICAgIHRoaXMuX19pc0RldGFjaGVkID0gdHJ1ZTtcbiAgICB0aGlzLnRlbXBsYXRlID0gbnVsbDtcbiAgICAvKiogQHR5cGUge1RlbXBsYXRlSW5mb30gKi9cbiAgICB0aGlzLl90ZW1wbGF0ZUluZm87XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIHRoaXMuX19pc0RldGFjaGVkID0gdHJ1ZTtcbiAgICBmb3IgKGxldCBpPTA7IGk8dGhpcy5fX2luc3RhbmNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5fX2RldGFjaEluc3RhbmNlKGkpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgaWYgKCFoaWRlRWxlbWVudHNHbG9iYWxseSgpKSB7XG4gICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICAgIC8vIG9ubHkgcGVyZm9ybSBhdHRhY2htZW50IGlmIHRoZSBlbGVtZW50IHdhcyBwcmV2aW91c2x5IGRldGFjaGVkLlxuICAgIGlmICh0aGlzLl9faXNEZXRhY2hlZCkge1xuICAgICAgdGhpcy5fX2lzRGV0YWNoZWQgPSBmYWxzZTtcbiAgICAgIGxldCB3cmFwcGVkUGFyZW50ID0gd3JhcCh3cmFwKHRoaXMpLnBhcmVudE5vZGUpO1xuICAgICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuX19pbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fX2F0dGFjaEluc3RhbmNlKGksIHdyYXBwZWRQYXJlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9fZW5zdXJlVGVtcGxhdGl6ZWQoKSB7XG4gICAgLy8gVGVtcGxhdGl6aW5nIChnZW5lcmF0aW5nIHRoZSBpbnN0YW5jZSBjb25zdHJ1Y3RvcikgbmVlZHMgdG8gd2FpdFxuICAgIC8vIHVudGlsIHJlYWR5LCBzaW5jZSB3b24ndCBoYXZlIGl0cyB0ZW1wbGF0ZSBjb250ZW50IGhhbmRlZCBiYWNrIHRvXG4gICAgLy8gaXQgdW50aWwgdGhlblxuICAgIGlmICghdGhpcy5fX2N0b3IpIHtcbiAgICAgIC8vIFdoZW4gYHJlbW92ZU5lc3RlZFRlbXBsYXRlc2AgaXMgdHJ1ZSwgdGhlIFwidGVtcGxhdGVcIiBpcyB0aGUgZWxlbWVudFxuICAgICAgLy8gaXRzZWxmLCB3aGljaCBoYXMgYmVlbiBnaXZlbiBhIGBfdGVtcGxhdGVJbmZvYCBwcm9wZXJ0eVxuICAgICAgY29uc3QgdGhpc0FzVGVtcGxhdGUgPSAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyAoXG4gICAgICAgICAgLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovICh0aGlzKSk7XG4gICAgICBsZXQgdGVtcGxhdGUgPSB0aGlzLnRlbXBsYXRlID0gdGhpc0FzVGVtcGxhdGUuX3RlbXBsYXRlSW5mbyA/XG4gICAgICAgICAgdGhpc0FzVGVtcGxhdGUgOlxuICAgICAgICAgIC8qKiBAdHlwZSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9ICovICh0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlJykpO1xuICAgICAgaWYgKCF0ZW1wbGF0ZSkge1xuICAgICAgICAvLyBXYWl0IHVudGlsIGNoaWxkTGlzdCBjaGFuZ2VzIGFuZCB0ZW1wbGF0ZSBzaG91bGQgYmUgdGhlcmUgYnkgdGhlblxuICAgICAgICBsZXQgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG4gICAgICAgICAgaWYgKHRoaXMucXVlcnlTZWxlY3RvcigndGVtcGxhdGUnKSkge1xuICAgICAgICAgICAgb2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgdGhpcy5fX3JlbmRlcigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2RvbS1yZXBlYXQgcmVxdWlyZXMgYSA8dGVtcGxhdGU+IGNoaWxkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLCB7Y2hpbGRMaXN0OiB0cnVlfSk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIFRlbXBsYXRlIGluc3RhbmNlIHByb3BzIHRoYXQgc2hvdWxkIGJlIGV4Y2x1ZGVkIGZyb20gZm9yd2FyZGluZ1xuICAgICAgbGV0IGluc3RhbmNlUHJvcHMgPSB7fTtcbiAgICAgIGluc3RhbmNlUHJvcHNbdGhpcy5hc10gPSB0cnVlO1xuICAgICAgaW5zdGFuY2VQcm9wc1t0aGlzLmluZGV4QXNdID0gdHJ1ZTtcbiAgICAgIGluc3RhbmNlUHJvcHNbdGhpcy5pdGVtc0luZGV4QXNdID0gdHJ1ZTtcbiAgICAgIHRoaXMuX19jdG9yID0gdGVtcGxhdGl6ZSh0ZW1wbGF0ZSwgdGhpcywge1xuICAgICAgICBtdXRhYmxlRGF0YTogdGhpcy5tdXRhYmxlRGF0YSxcbiAgICAgICAgcGFyZW50TW9kZWw6IHRydWUsXG4gICAgICAgIGluc3RhbmNlUHJvcHM6IGluc3RhbmNlUHJvcHMsXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdGhpcyB7RG9tUmVwZWF0fVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSB0byBzZXRcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBzZXQgcHJvcGVydHkgdG9cbiAgICAgICAgICovXG4gICAgICAgIGZvcndhcmRIb3N0UHJvcDogZnVuY3Rpb24ocHJvcCwgdmFsdWUpIHtcbiAgICAgICAgICBsZXQgaSQgPSB0aGlzLl9faW5zdGFuY2VzO1xuICAgICAgICAgIGZvciAobGV0IGk9MCwgaW5zdDsgKGk8aSQubGVuZ3RoKSAmJiAoaW5zdD1pJFtpXSk7IGkrKykge1xuICAgICAgICAgICAgaW5zdC5mb3J3YXJkSG9zdFByb3AocHJvcCwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0aGlzIHtEb21SZXBlYXR9XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBpbnN0IEluc3RhbmNlIHRvIG5vdGlmeVxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcCBQcm9wZXJ0eSB0byBub3RpZnlcbiAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSB0byBub3RpZnlcbiAgICAgICAgICovXG4gICAgICAgIG5vdGlmeUluc3RhbmNlUHJvcDogZnVuY3Rpb24oaW5zdCwgcHJvcCwgdmFsdWUpIHtcbiAgICAgICAgICBpZiAobWF0Y2hlcyh0aGlzLmFzLCBwcm9wKSkge1xuICAgICAgICAgICAgbGV0IGlkeCA9IGluc3RbdGhpcy5pdGVtc0luZGV4QXNdO1xuICAgICAgICAgICAgaWYgKHByb3AgPT0gdGhpcy5hcykge1xuICAgICAgICAgICAgICB0aGlzLml0ZW1zW2lkeF0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGxldCBwYXRoID0gdHJhbnNsYXRlKHRoaXMuYXMsIGAke0pTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2l0ZW1zJywgdGhpcyl9LiR7aWR4fWAsIHByb3ApO1xuICAgICAgICAgICAgdGhpcy5ub3RpZnlQYXRoKHBhdGgsIHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIF9fZ2V0TWV0aG9kSG9zdCgpIHtcbiAgICAvLyBUZWNobmljYWxseSB0aGlzIHNob3VsZCBiZSB0aGUgb3duZXIgb2YgdGhlIG91dGVybW9zdCB0ZW1wbGF0ZS5cbiAgICAvLyBJbiBzaGFkb3cgZG9tLCB0aGlzIGlzIGFsd2F5cyBnZXRSb290Tm9kZSgpLmhvc3QsIGJ1dCB3ZSBjYW5cbiAgICAvLyBhcHByb3hpbWF0ZSB0aGlzIHZpYSBjb29wZXJhdGlvbiB3aXRoIG91ciBkYXRhSG9zdCBhbHdheXMgc2V0dGluZ1xuICAgIC8vIGBfbWV0aG9kSG9zdGAgYXMgbG9uZyBhcyB0aGVyZSB3ZXJlIGJpbmRpbmdzIChvciBpZCdzKSBvbiB0aGlzXG4gICAgLy8gaW5zdGFuY2UgY2F1c2luZyBpdCB0byBnZXQgYSBkYXRhSG9zdC5cbiAgICByZXR1cm4gdGhpcy5fX2RhdGFIb3N0Ll9tZXRob2RIb3N0IHx8IHRoaXMuX19kYXRhSG9zdDtcbiAgfVxuXG4gIF9fZnVuY3Rpb25Gcm9tUHJvcGVydHlWYWx1ZShmdW5jdGlvbk9yTWV0aG9kTmFtZSkge1xuICAgIGlmICh0eXBlb2YgZnVuY3Rpb25Pck1ldGhvZE5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBsZXQgbWV0aG9kTmFtZSA9IGZ1bmN0aW9uT3JNZXRob2ROYW1lO1xuICAgICAgbGV0IG9iaiA9IHRoaXMuX19nZXRNZXRob2RIb3N0KCk7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7IHJldHVybiBvYmpbbWV0aG9kTmFtZV0uYXBwbHkob2JqLCBhcmd1bWVudHMpOyB9O1xuICAgIH1cblxuICAgIHJldHVybiBmdW5jdGlvbk9yTWV0aG9kTmFtZTtcbiAgfVxuXG4gIF9fc29ydENoYW5nZWQoc29ydCkge1xuICAgIHRoaXMuX19zb3J0Rm4gPSB0aGlzLl9fZnVuY3Rpb25Gcm9tUHJvcGVydHlWYWx1ZShzb3J0KTtcbiAgICBpZiAodGhpcy5pdGVtcykgeyB0aGlzLl9fZGVib3VuY2VSZW5kZXIodGhpcy5fX3JlbmRlcik7IH1cbiAgfVxuXG4gIF9fZmlsdGVyQ2hhbmdlZChmaWx0ZXIpIHtcbiAgICB0aGlzLl9fZmlsdGVyRm4gPSB0aGlzLl9fZnVuY3Rpb25Gcm9tUHJvcGVydHlWYWx1ZShmaWx0ZXIpO1xuICAgIGlmICh0aGlzLml0ZW1zKSB7IHRoaXMuX19kZWJvdW5jZVJlbmRlcih0aGlzLl9fcmVuZGVyKTsgfVxuICB9XG5cbiAgX19jb21wdXRlRnJhbWVUaW1lKHJhdGUpIHtcbiAgICByZXR1cm4gTWF0aC5jZWlsKDEwMDAvcmF0ZSk7XG4gIH1cblxuICBfX29ic2VydmVDaGFuZ2VkKCkge1xuICAgIHRoaXMuX19vYnNlcnZlUGF0aHMgPSB0aGlzLm9ic2VydmUgJiZcbiAgICAgIHRoaXMub2JzZXJ2ZS5yZXBsYWNlKCcuKicsICcuJykuc3BsaXQoJyAnKTtcbiAgfVxuXG4gIF9faGFuZGxlT2JzZXJ2ZWRQYXRocyhwYXRoKSB7XG4gICAgLy8gSGFuZGxlIGNhc2VzIHdoZXJlIHBhdGggY2hhbmdlcyBzaG91bGQgY2F1c2UgYSByZS1zb3J0L2ZpbHRlclxuICAgIGlmICh0aGlzLl9fc29ydEZuIHx8IHRoaXMuX19maWx0ZXJGbikge1xuICAgICAgaWYgKCFwYXRoKSB7XG4gICAgICAgIC8vIEFsd2F5cyByZS1yZW5kZXIgaWYgdGhlIGl0ZW0gaXRzZWxmIGNoYW5nZWRcbiAgICAgICAgdGhpcy5fX2RlYm91bmNlUmVuZGVyKHRoaXMuX19yZW5kZXIsIHRoaXMuZGVsYXkpO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLl9fb2JzZXJ2ZVBhdGhzKSB7XG4gICAgICAgIC8vIE90aGVyd2lzZSwgcmUtcmVuZGVyIGlmIHRoZSBwYXRoIGNoYW5nZWQgbWF0Y2hlcyBhbiBvYnNlcnZlZCBwYXRoXG4gICAgICAgIGxldCBwYXRocyA9IHRoaXMuX19vYnNlcnZlUGF0aHM7XG4gICAgICAgIGZvciAobGV0IGk9MDsgaTxwYXRocy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGlmIChwYXRoLmluZGV4T2YocGF0aHNbaV0pID09PSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9fZGVib3VuY2VSZW5kZXIodGhpcy5fX3JlbmRlciwgdGhpcy5kZWxheSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgX19pdGVtc0NoYW5nZWQoY2hhbmdlKSB7XG4gICAgaWYgKHRoaXMuaXRlbXMgJiYgIUFycmF5LmlzQXJyYXkodGhpcy5pdGVtcykpIHtcbiAgICAgIGNvbnNvbGUud2FybignZG9tLXJlcGVhdCBleHBlY3RlZCBhcnJheSBmb3IgYGl0ZW1zYCwgZm91bmQnLCB0aGlzLml0ZW1zKTtcbiAgICB9XG4gICAgLy8gSWYgcGF0aCB3YXMgdG8gYW4gaXRlbSAoZS5nLiAnaXRlbXMuMycgb3IgJ2l0ZW1zLjMuZm9vJyksIGZvcndhcmQgdGhlXG4gICAgLy8gcGF0aCB0byB0aGF0IGluc3RhbmNlIHN5bmNocm9ub3VzbHkgKHJldHVybnMgZmFsc2UgZm9yIG5vbi1pdGVtIHBhdGhzKVxuICAgIGlmICghdGhpcy5fX2hhbmRsZUl0ZW1QYXRoKGNoYW5nZS5wYXRoLCBjaGFuZ2UudmFsdWUpKSB7XG4gICAgICAvLyBPdGhlcndpc2UsIHRoZSBhcnJheSB3YXMgcmVzZXQgKCdpdGVtcycpIG9yIHNwbGljZWQgKCdpdGVtcy5zcGxpY2VzJyksXG4gICAgICAvLyBzbyBxdWV1ZSBhIHJlbmRlci4gIFJlc3RhcnQgY2h1bmtpbmcgd2hlbiB0aGUgaXRlbXMgY2hhbmdlZCAoZm9yXG4gICAgICAvLyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5KSwgdW5sZXNzIGByZXVzZUNodW5rZWRJbnN0YW5jZXNgIG9wdGlvbiBpcyBzZXRcbiAgICAgIGlmIChjaGFuZ2UucGF0aCA9PT0gJ2l0ZW1zJykge1xuICAgICAgICB0aGlzLl9faXRlbXNBcnJheUNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5fX2RlYm91bmNlUmVuZGVyKHRoaXMuX19yZW5kZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAcGFyYW0ge2Z1bmN0aW9uKHRoaXM6RG9tUmVwZWF0KX0gZm4gRnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gICAqIEBwYXJhbSB7bnVtYmVyPX0gZGVsYXkgRGVsYXkgaW4gbXMgdG8gZGVib3VuY2UgYnkuXG4gICAqL1xuICBfX2RlYm91bmNlUmVuZGVyKGZuLCBkZWxheSA9IDApIHtcbiAgICB0aGlzLl9fcmVuZGVyRGVib3VuY2VyID0gRGVib3VuY2VyLmRlYm91bmNlKFxuICAgICAgICAgIHRoaXMuX19yZW5kZXJEZWJvdW5jZXJcbiAgICAgICAgLCBkZWxheSA+IDAgPyB0aW1lT3V0LmFmdGVyKGRlbGF5KSA6IG1pY3JvVGFza1xuICAgICAgICAsIGZuLmJpbmQodGhpcykpO1xuICAgIGVucXVldWVEZWJvdW5jZXIodGhpcy5fX3JlbmRlckRlYm91bmNlcik7XG4gIH1cblxuICAvKipcbiAgICogRm9yY2VzIHRoZSBlbGVtZW50IHRvIHJlbmRlciBpdHMgY29udGVudC4gTm9ybWFsbHkgcmVuZGVyaW5nIGlzXG4gICAqIGFzeW5jaHJvbm91cyB0byBhIHByb3Zva2luZyBjaGFuZ2UuIFRoaXMgaXMgZG9uZSBmb3IgZWZmaWNpZW5jeSBzb1xuICAgKiB0aGF0IG11bHRpcGxlIGNoYW5nZXMgdHJpZ2dlciBvbmx5IGEgc2luZ2xlIHJlbmRlci4gVGhlIHJlbmRlciBtZXRob2RcbiAgICogc2hvdWxkIGJlIGNhbGxlZCBpZiwgZm9yIGV4YW1wbGUsIHRlbXBsYXRlIHJlbmRlcmluZyBpcyByZXF1aXJlZCB0b1xuICAgKiB2YWxpZGF0ZSBhcHBsaWNhdGlvbiBzdGF0ZS5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIHJlbmRlcigpIHtcbiAgICAvLyBRdWV1ZSB0aGlzIHJlcGVhdGVyLCB0aGVuIGZsdXNoIGFsbCBpbiBvcmRlclxuICAgIHRoaXMuX19kZWJvdW5jZVJlbmRlcih0aGlzLl9fcmVuZGVyKTtcbiAgICBmbHVzaCgpO1xuICB9XG5cbiAgX19yZW5kZXIoKSB7XG4gICAgaWYgKCF0aGlzLl9fZW5zdXJlVGVtcGxhdGl6ZWQoKSkge1xuICAgICAgLy8gTm8gdGVtcGxhdGUgZm91bmQgeWV0XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGxldCBpdGVtcyA9IHRoaXMuaXRlbXMgfHwgW107XG4gICAgLy8gU29ydCBhbmQgZmlsdGVyIHRoZSBpdGVtcyBpbnRvIGEgbWFwcGluZyBhcnJheSBmcm9tIGluc3RhbmNlLT5pdGVtXG4gICAgY29uc3QgaXNudElkeFRvSXRlbXNJZHggPSB0aGlzLl9fc29ydEFuZEZpbHRlckl0ZW1zKGl0ZW1zKTtcbiAgICAvLyBJZiB3ZSdyZSBjaHVua2luZywgaW5jcmVhc2UgdGhlIGxpbWl0IGlmIHRoZXJlIGFyZSBuZXcgaW5zdGFuY2VzIHRvXG4gICAgLy8gY3JlYXRlIGFuZCBzY2hlZHVsZSB0aGUgbmV4dCBjaHVua1xuICAgIGNvbnN0IGxpbWl0ID0gdGhpcy5fX2NhbGN1bGF0ZUxpbWl0KGlzbnRJZHhUb0l0ZW1zSWR4Lmxlbmd0aCk7XG4gICAgLy8gQ3JlYXRlLCB1cGRhdGUsIGFuZC9vciByZW1vdmUgaW5zdGFuY2VzXG4gICAgdGhpcy5fX3VwZGF0ZUluc3RhbmNlcyhpdGVtcywgbGltaXQsIGlzbnRJZHhUb0l0ZW1zSWR4KTtcbiAgICAvLyBJZiB3ZSdyZSBjaHVua2luZywgc2NoZWR1bGUgYSByQUYgdGFzayB0byBtZWFzdXJlL2NvbnRpbnVlIGNodW5raW5nLiAgICAgXG4gICAgLy8gRG8gdGhpcyBiZWZvcmUgYW55IG5vdGlmeWluZyBldmVudHMgKHJlbmRlcmVkSXRlbUNvdW50ICYgZG9tLWNoYW5nZSlcbiAgICAvLyBzaW5jZSB0aG9zZSBjb3VsZCBtb2RpZnkgaXRlbXMgYW5kIGVucXVldWUgYSBuZXcgZnVsbCByZW5kZXIgd2hpY2ggd2lsbFxuICAgIC8vIHByZS1lbXB0IHRoaXMgbWVhc3VyZW1lbnQuXG4gICAgaWYgKHRoaXMuaW5pdGlhbENvdW50ICYmXG4gICAgICAgKHRoaXMuX19zaG91bGRNZWFzdXJlQ2h1bmsgfHwgdGhpcy5fX3Nob3VsZENvbnRpbnVlQ2h1bmtpbmcpKSB7XG4gICAgICBjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLl9fY2h1bmtpbmdJZCk7XG4gICAgICB0aGlzLl9fY2h1bmtpbmdJZCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB0aGlzLl9fY29udGludWVDaHVua2luZygpKTtcbiAgICB9XG4gICAgLy8gU2V0IHJlbmRlcmVkIGl0ZW0gY291bnRcbiAgICB0aGlzLl9zZXRSZW5kZXJlZEl0ZW1Db3VudCh0aGlzLl9faW5zdGFuY2VzLmxlbmd0aCk7XG4gICAgLy8gTm90aWZ5IHVzZXJzXG4gICAgaWYgKCFzdXBwcmVzc1RlbXBsYXRlTm90aWZpY2F0aW9ucyB8fCB0aGlzLm5vdGlmeURvbUNoYW5nZSkge1xuICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgnZG9tLWNoYW5nZScsIHtcbiAgICAgICAgYnViYmxlczogdHJ1ZSxcbiAgICAgICAgY29tcG9zZWQ6IHRydWVcbiAgICAgIH0pKTtcbiAgICB9XG4gIH1cblxuICBfX3NvcnRBbmRGaWx0ZXJJdGVtcyhpdGVtcykge1xuICAgIC8vIEdlbmVyYXRlIGFycmF5IG1hcGluZyB0aGUgaW5zdGFuY2UgaW5kZXggdG8gdGhlIGl0ZW1zIGFycmF5IGluZGV4XG4gICAgbGV0IGlzbnRJZHhUb0l0ZW1zSWR4ID0gbmV3IEFycmF5KGl0ZW1zLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaT0wOyBpPGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpc250SWR4VG9JdGVtc0lkeFtpXSA9IGk7XG4gICAgfVxuICAgIC8vIEFwcGx5IHVzZXIgZmlsdGVyXG4gICAgaWYgKHRoaXMuX19maWx0ZXJGbikge1xuICAgICAgaXNudElkeFRvSXRlbXNJZHggPSBpc250SWR4VG9JdGVtc0lkeC5maWx0ZXIoKGksIGlkeCwgYXJyYXkpID0+XG4gICAgICAgIHRoaXMuX19maWx0ZXJGbihpdGVtc1tpXSwgaWR4LCBhcnJheSkpO1xuICAgIH1cbiAgICAvLyBBcHBseSB1c2VyIHNvcnRcbiAgICBpZiAodGhpcy5fX3NvcnRGbikge1xuICAgICAgaXNudElkeFRvSXRlbXNJZHguc29ydCgoYSwgYikgPT4gdGhpcy5fX3NvcnRGbihpdGVtc1thXSwgaXRlbXNbYl0pKTtcbiAgICB9XG4gICAgcmV0dXJuIGlzbnRJZHhUb0l0ZW1zSWR4O1xuICB9XG5cbiAgX19jYWxjdWxhdGVMaW1pdChmaWx0ZXJlZEl0ZW1Db3VudCkge1xuICAgIGxldCBsaW1pdCA9IGZpbHRlcmVkSXRlbUNvdW50O1xuICAgIGNvbnN0IGN1cnJlbnRDb3VudCA9IHRoaXMuX19pbnN0YW5jZXMubGVuZ3RoO1xuICAgIC8vIFdoZW4gY2h1bmtpbmcsIHdlIGluY3JlYXNlIHRoZSBsaW1pdCBmcm9tIHRoZSBjdXJyZW50bHkgcmVuZGVyZWQgY291bnRcbiAgICAvLyBieSB0aGUgY2h1bmsgY291bnQgdGhhdCBpcyByZS1jYWxjdWxhdGVkIGFmdGVyIGVhY2ggckFGICh3aXRoIHNwZWNpYWxcbiAgICAvLyBjYXNlcyBmb3IgcmVzZXRpbmcgdGhlIGxpbWl0IHRvIGluaXRpYWxDb3VudCBhZnRlciBjaGFuZ2luZyBpdGVtcylcbiAgICBpZiAodGhpcy5pbml0aWFsQ291bnQpIHtcbiAgICAgIGxldCBuZXdDb3VudDtcbiAgICAgIGlmICghdGhpcy5fX2NodW5rQ291bnQgfHxcbiAgICAgICAgKHRoaXMuX19pdGVtc0FycmF5Q2hhbmdlZCAmJiAhdGhpcy5yZXVzZUNodW5rZWRJbnN0YW5jZXMpKSB7XG4gICAgICAgIC8vIExpbWl0IG5leHQgcmVuZGVyIHRvIHRoZSBpbml0aWFsIGNvdW50XG4gICAgICAgIGxpbWl0ID0gTWF0aC5taW4oZmlsdGVyZWRJdGVtQ291bnQsIHRoaXMuaW5pdGlhbENvdW50KTtcbiAgICAgICAgLy8gU3VidHJhY3Qgb2ZmIGFueSBleGlzdGluZyBpbnN0YW5jZXMgdG8gZGV0ZXJtaW5lIHRoZSBudW1iZXIgb2ZcbiAgICAgICAgLy8gaW5zdGFuY2VzIHRoYXQgd2lsbCBiZSBjcmVhdGVkXG4gICAgICAgIG5ld0NvdW50ID0gTWF0aC5tYXgobGltaXQgLSBjdXJyZW50Q291bnQsIDApO1xuICAgICAgICAvLyBJbml0aWFsaXplIHRoZSBjaHVuayBzaXplIHdpdGggaG93IG1hbnkgaXRlbXMgd2UncmUgY3JlYXRpbmdcbiAgICAgICAgdGhpcy5fX2NodW5rQ291bnQgPSBuZXdDb3VudCB8fCAxO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVGhlIG51bWJlciBvZiBuZXcgaW5zdGFuY2VzIHRoYXQgd2lsbCBiZSBjcmVhdGVkIGlzIGJhc2VkIG9uIHRoZVxuICAgICAgICAvLyBleGlzdGluZyBpbnN0YW5jZXMsIHRoZSBuZXcgbGlzdCBzaXplLCBhbmQgdGhlIGNodW5rIHNpemVcbiAgICAgICAgbmV3Q291bnQgPSBNYXRoLm1pbihcbiAgICAgICAgICBNYXRoLm1heChmaWx0ZXJlZEl0ZW1Db3VudCAtIGN1cnJlbnRDb3VudCwgMCksIFxuICAgICAgICAgIHRoaXMuX19jaHVua0NvdW50KTtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSBsaW1pdCBiYXNlZCBvbiBob3cgbWFueSBuZXcgaXRlbXMgd2UncmUgbWFraW5nLCBsaW1pdGVkXG4gICAgICAgIC8vIGJ1eSB0aGUgdG90YWwgc2l6ZSBvZiB0aGUgbGlzdFxuICAgICAgICBsaW1pdCA9IE1hdGgubWluKGN1cnJlbnRDb3VudCArIG5ld0NvdW50LCBmaWx0ZXJlZEl0ZW1Db3VudCk7XG4gICAgICB9XG4gICAgICAvLyBSZWNvcmQgc29tZSBzdGF0ZSBhYm91dCBjaHVua2luZyBmb3IgdXNlIGluIGBfX2NvbnRpbnVlQ2h1bmtpbmdgXG4gICAgICB0aGlzLl9fc2hvdWxkTWVhc3VyZUNodW5rID0gbmV3Q291bnQgPT09IHRoaXMuX19jaHVua0NvdW50O1xuICAgICAgdGhpcy5fX3Nob3VsZENvbnRpbnVlQ2h1bmtpbmcgPSBsaW1pdCA8IGZpbHRlcmVkSXRlbUNvdW50O1xuICAgICAgdGhpcy5fX3JlbmRlclN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIH1cbiAgICB0aGlzLl9faXRlbXNBcnJheUNoYW5nZWQgPSBmYWxzZTtcbiAgICByZXR1cm4gbGltaXQ7XG4gIH1cblxuICBfX2NvbnRpbnVlQ2h1bmtpbmcoKSB7XG4gICAgLy8gU2ltcGxlIGF1dG8gY2h1bmtTaXplIHRocm90dGxpbmcgYWxnb3JpdGhtIGJhc2VkIG9uIGZlZWRiYWNrIGxvb3A6XG4gICAgLy8gbWVhc3VyZSBhY3R1YWwgdGltZSBiZXR3ZWVuIGZyYW1lcyBhbmQgc2NhbGUgY2h1bmsgY291bnQgYnkgcmF0aW8gb2ZcbiAgICAvLyB0YXJnZXQvYWN0dWFsIGZyYW1lIHRpbWUuICBPbmx5IG1vZGlmeSBjaHVuayBzaXplIGlmIG91ciBtZWFzdXJlbWVudFxuICAgIC8vIHJlZmxlY3RzIHRoZSBjb3N0IG9mIGEgY3JlYXRpbmcgYSBmdWxsIGNodW5rJ3Mgd29ydGggb2YgaW5zdGFuY2VzOyB0aGlzXG4gICAgLy8gYXZvaWRzIHNjYWxpbmcgdXAgdGhlIGNodW5rIHNpemUgaWYgd2UgZS5nLiBxdWlja2x5IHJlLXJlbmRlcmVkIGluc3RhbmNlc1xuICAgIC8vIGluIHBsYWNlXG4gICAgaWYgKHRoaXMuX19zaG91bGRNZWFzdXJlQ2h1bmspIHtcbiAgICAgIGNvbnN0IHJlbmRlclRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuX19yZW5kZXJTdGFydFRpbWU7XG4gICAgICBjb25zdCByYXRpbyA9IHRoaXMuX3RhcmdldEZyYW1lVGltZSAvIHJlbmRlclRpbWU7XG4gICAgICB0aGlzLl9fY2h1bmtDb3VudCA9IE1hdGgucm91bmQodGhpcy5fX2NodW5rQ291bnQgKiByYXRpbykgfHwgMTtcbiAgICB9XG4gICAgLy8gRW5xdWV1ZSBhIG5ldyByZW5kZXIgaWYgd2UgaGF2ZW4ndCByZWFjaGVkIHRoZSBmdWxsIHNpemUgb2YgdGhlIGxpc3RcbiAgICBpZiAodGhpcy5fX3Nob3VsZENvbnRpbnVlQ2h1bmtpbmcpIHtcbiAgICAgIHRoaXMuX19kZWJvdW5jZVJlbmRlcih0aGlzLl9fcmVuZGVyKTtcbiAgICB9XG4gIH1cbiAgXG4gIF9fdXBkYXRlSW5zdGFuY2VzKGl0ZW1zLCBsaW1pdCwgaXNudElkeFRvSXRlbXNJZHgpIHtcbiAgICAvLyBpdGVtcy0+aW5zdCBtYXAga2VwdCBmb3IgaXRlbSBwYXRoIGZvcndhcmRpbmdcbiAgICBjb25zdCBpdGVtc0lkeFRvSW5zdElkeCA9IHRoaXMuX19pdGVtc0lkeFRvSW5zdElkeCA9IHt9O1xuICAgIGxldCBpbnN0SWR4O1xuICAgIC8vIEdlbmVyYXRlIGluc3RhbmNlcyBhbmQgYXNzaWduIGl0ZW1zXG4gICAgZm9yIChpbnN0SWR4PTA7IGluc3RJZHg8bGltaXQ7IGluc3RJZHgrKykge1xuICAgICAgbGV0IGluc3QgPSB0aGlzLl9faW5zdGFuY2VzW2luc3RJZHhdO1xuICAgICAgbGV0IGl0ZW1JZHggPSBpc250SWR4VG9JdGVtc0lkeFtpbnN0SWR4XTtcbiAgICAgIGxldCBpdGVtID0gaXRlbXNbaXRlbUlkeF07XG4gICAgICBpdGVtc0lkeFRvSW5zdElkeFtpdGVtSWR4XSA9IGluc3RJZHg7XG4gICAgICBpZiAoaW5zdCkge1xuICAgICAgICBpbnN0Ll9zZXRQZW5kaW5nUHJvcGVydHkodGhpcy5hcywgaXRlbSk7XG4gICAgICAgIGluc3QuX3NldFBlbmRpbmdQcm9wZXJ0eSh0aGlzLmluZGV4QXMsIGluc3RJZHgpO1xuICAgICAgICBpbnN0Ll9zZXRQZW5kaW5nUHJvcGVydHkodGhpcy5pdGVtc0luZGV4QXMsIGl0ZW1JZHgpO1xuICAgICAgICBpbnN0Ll9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX19pbnNlcnRJbnN0YW5jZShpdGVtLCBpbnN0SWR4LCBpdGVtSWR4KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gUmVtb3ZlIGFueSBleHRyYSBpbnN0YW5jZXMgZnJvbSBwcmV2aW91cyBzdGF0ZVxuICAgIGZvciAobGV0IGk9dGhpcy5fX2luc3RhbmNlcy5sZW5ndGgtMTsgaT49aW5zdElkeDsgaS0tKSB7XG4gICAgICB0aGlzLl9fZGV0YWNoQW5kUmVtb3ZlSW5zdGFuY2UoaSk7XG4gICAgfVxuICB9XG5cbiAgX19kZXRhY2hJbnN0YW5jZShpZHgpIHtcbiAgICBsZXQgaW5zdCA9IHRoaXMuX19pbnN0YW5jZXNbaWR4XTtcbiAgICBjb25zdCB3cmFwcGVkUm9vdCA9IHdyYXAoaW5zdC5yb290KTtcbiAgICBmb3IgKGxldCBpPTA7IGk8aW5zdC5jaGlsZHJlbi5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGVsID0gaW5zdC5jaGlsZHJlbltpXTtcbiAgICAgIHdyYXBwZWRSb290LmFwcGVuZENoaWxkKGVsKTtcbiAgICB9XG4gICAgcmV0dXJuIGluc3Q7XG4gIH1cblxuICBfX2F0dGFjaEluc3RhbmNlKGlkeCwgcGFyZW50KSB7XG4gICAgbGV0IGluc3QgPSB0aGlzLl9faW5zdGFuY2VzW2lkeF07XG4gICAgLy8gTm90ZSwgdGhpcyBpcyBwcmUtd3JhcHBlZCBhcyBhbiBvcHRpbWl6YXRpb25cbiAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGluc3Qucm9vdCwgdGhpcyk7XG4gIH1cblxuICBfX2RldGFjaEFuZFJlbW92ZUluc3RhbmNlKGlkeCkge1xuICAgIHRoaXMuX19kZXRhY2hJbnN0YW5jZShpZHgpO1xuICAgIHRoaXMuX19pbnN0YW5jZXMuc3BsaWNlKGlkeCwgMSk7XG4gIH1cblxuICBfX3N0YW1wSW5zdGFuY2UoaXRlbSwgaW5zdElkeCwgaXRlbUlkeCkge1xuICAgIGxldCBtb2RlbCA9IHt9O1xuICAgIG1vZGVsW3RoaXMuYXNdID0gaXRlbTtcbiAgICBtb2RlbFt0aGlzLmluZGV4QXNdID0gaW5zdElkeDtcbiAgICBtb2RlbFt0aGlzLml0ZW1zSW5kZXhBc10gPSBpdGVtSWR4O1xuICAgIHJldHVybiBuZXcgdGhpcy5fX2N0b3IobW9kZWwpO1xuICB9XG5cbiAgX19pbnNlcnRJbnN0YW5jZShpdGVtLCBpbnN0SWR4LCBpdGVtSWR4KSB7XG4gICAgY29uc3QgaW5zdCA9IHRoaXMuX19zdGFtcEluc3RhbmNlKGl0ZW0sIGluc3RJZHgsIGl0ZW1JZHgpO1xuICAgIGxldCBiZWZvcmVSb3cgPSB0aGlzLl9faW5zdGFuY2VzW2luc3RJZHggKyAxXTtcbiAgICBsZXQgYmVmb3JlTm9kZSA9IGJlZm9yZVJvdyA/IGJlZm9yZVJvdy5jaGlsZHJlblswXSA6IHRoaXM7XG4gICAgd3JhcCh3cmFwKHRoaXMpLnBhcmVudE5vZGUpLmluc2VydEJlZm9yZShpbnN0LnJvb3QsIGJlZm9yZU5vZGUpO1xuICAgIHRoaXMuX19pbnN0YW5jZXNbaW5zdElkeF0gPSBpbnN0O1xuICAgIHJldHVybiBpbnN0O1xuICB9XG5cbiAgLy8gSW1wbGVtZW50cyBleHRlbnNpb24gcG9pbnQgZnJvbSBUZW1wbGF0aXplIG1peGluXG4gIC8qKlxuICAgKiBTaG93cyBvciBoaWRlcyB0aGUgdGVtcGxhdGUgaW5zdGFuY2UgdG9wIGxldmVsIGNoaWxkIGVsZW1lbnRzLiBGb3JcbiAgICogdGV4dCBub2RlcywgYHRleHRDb250ZW50YCBpcyByZW1vdmVkIHdoaWxlIFwiaGlkZGVuXCIgYW5kIHJlcGxhY2VkIHdoZW5cbiAgICogXCJzaG93bi5cIlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IGhpZGRlbiBTZXQgdG8gdHJ1ZSB0byBoaWRlIHRoZSBjaGlsZHJlbjtcbiAgICogc2V0IHRvIGZhbHNlIHRvIHNob3cgdGhlbS5cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICogQHByb3RlY3RlZFxuICAgKi9cbiAgX3Nob3dIaWRlQ2hpbGRyZW4oaGlkZGVuKSB7XG4gICAgZm9yIChsZXQgaT0wOyBpPHRoaXMuX19pbnN0YW5jZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMuX19pbnN0YW5jZXNbaV0uX3Nob3dIaWRlQ2hpbGRyZW4oaGlkZGVuKTtcbiAgICB9XG4gIH1cblxuICAvLyBDYWxsZWQgYXMgYSBzaWRlIGVmZmVjdCBvZiBhIGhvc3QgaXRlbXMuPGtleT4uPHBhdGg+IHBhdGggY2hhbmdlLFxuICAvLyByZXNwb25zaWJsZSBmb3Igbm90aWZ5aW5nIGl0ZW0uPHBhdGg+IGNoYW5nZXMgdG8gaW5zdCBmb3Iga2V5XG4gIF9faGFuZGxlSXRlbVBhdGgocGF0aCwgdmFsdWUpIHtcbiAgICBsZXQgaXRlbXNQYXRoID0gcGF0aC5zbGljZSg2KTsgLy8gJ2l0ZW1zLicubGVuZ3RoID09IDZcbiAgICBsZXQgZG90ID0gaXRlbXNQYXRoLmluZGV4T2YoJy4nKTtcbiAgICBsZXQgaXRlbXNJZHggPSBkb3QgPCAwID8gaXRlbXNQYXRoIDogaXRlbXNQYXRoLnN1YnN0cmluZygwLCBkb3QpO1xuICAgIC8vIElmIHBhdGggd2FzIGluZGV4IGludG8gYXJyYXkuLi5cbiAgICBpZiAoaXRlbXNJZHggPT0gcGFyc2VJbnQoaXRlbXNJZHgsIDEwKSkge1xuICAgICAgbGV0IGl0ZW1TdWJQYXRoID0gZG90IDwgMCA/ICcnIDogaXRlbXNQYXRoLnN1YnN0cmluZyhkb3QrMSk7XG4gICAgICAvLyBJZiB0aGUgcGF0aCBpcyBvYnNlcnZlZCwgaXQgd2lsbCB0cmlnZ2VyIGEgZnVsbCByZWZyZXNoXG4gICAgICB0aGlzLl9faGFuZGxlT2JzZXJ2ZWRQYXRocyhpdGVtU3ViUGF0aCk7XG4gICAgICAvLyBOb3RlLCBldmVuIGlmIGEgcnVsbCByZWZyZXNoIGlzIHRyaWdnZXJlZCwgYWx3YXlzIGRvIHRoZSBwYXRoXG4gICAgICAvLyBub3RpZmljYXRpb24gYmVjYXVzZSB1bmxlc3MgbXV0YWJsZURhdGEgaXMgdXNlZCBmb3IgZG9tLXJlcGVhdFxuICAgICAgLy8gYW5kIGFsbCBlbGVtZW50cyBpbiB0aGUgaW5zdGFuY2Ugc3VidHJlZSwgYSBmdWxsIHJlZnJlc2ggbWF5XG4gICAgICAvLyBub3QgdHJpZ2dlciB0aGUgcHJvcGVyIHVwZGF0ZS5cbiAgICAgIGxldCBpbnN0SWR4ID0gdGhpcy5fX2l0ZW1zSWR4VG9JbnN0SWR4W2l0ZW1zSWR4XTtcbiAgICAgIGxldCBpbnN0ID0gdGhpcy5fX2luc3RhbmNlc1tpbnN0SWR4XTtcbiAgICAgIGlmIChpbnN0KSB7XG4gICAgICAgIGxldCBpdGVtUGF0aCA9IHRoaXMuYXMgKyAoaXRlbVN1YlBhdGggPyAnLicgKyBpdGVtU3ViUGF0aCA6ICcnKTtcbiAgICAgICAgLy8gVGhpcyBpcyBlZmZlY3RpdmVseSBgbm90aWZ5UGF0aGAsIGJ1dCBhdm9pZHMgc29tZSBvZiB0aGUgb3ZlcmhlYWRcbiAgICAgICAgLy8gb2YgdGhlIHB1YmxpYyBBUElcbiAgICAgICAgaW5zdC5fc2V0UGVuZGluZ1Byb3BlcnR5T3JQYXRoKGl0ZW1QYXRoLCB2YWx1ZSwgZmFsc2UsIHRydWUpO1xuICAgICAgICBpbnN0Ll9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpdGVtIGFzc29jaWF0ZWQgd2l0aCBhIGdpdmVuIGVsZW1lbnQgc3RhbXBlZCBieVxuICAgKiB0aGlzIGBkb20tcmVwZWF0YC5cbiAgICpcbiAgICogTm90ZSwgdG8gbW9kaWZ5IHN1Yi1wcm9wZXJ0aWVzIG9mIHRoZSBpdGVtLFxuICAgKiBgbW9kZWxGb3JFbGVtZW50KGVsKS5zZXQoJ2l0ZW0uPHN1Yi1wcm9wPicsIHZhbHVlKWBcbiAgICogc2hvdWxkIGJlIHVzZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7IUhUTUxFbGVtZW50fSBlbCBFbGVtZW50IGZvciB3aGljaCB0byByZXR1cm4gdGhlIGl0ZW0uXG4gICAqIEByZXR1cm4geyp9IEl0ZW0gYXNzb2NpYXRlZCB3aXRoIHRoZSBlbGVtZW50LlxuICAgKi9cbiAgaXRlbUZvckVsZW1lbnQoZWwpIHtcbiAgICBsZXQgaW5zdGFuY2UgPSB0aGlzLm1vZGVsRm9yRWxlbWVudChlbCk7XG4gICAgcmV0dXJuIGluc3RhbmNlICYmIGluc3RhbmNlW3RoaXMuYXNdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGluc3QgaW5kZXggZm9yIGEgZ2l2ZW4gZWxlbWVudCBzdGFtcGVkIGJ5IHRoaXMgYGRvbS1yZXBlYXRgLlxuICAgKiBJZiBgc29ydGAgaXMgcHJvdmlkZWQsIHRoZSBpbmRleCB3aWxsIHJlZmxlY3QgdGhlIHNvcnRlZCBvcmRlciAocmF0aGVyXG4gICAqIHRoYW4gdGhlIG9yaWdpbmFsIGFycmF5IG9yZGVyKS5cbiAgICpcbiAgICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgZm9yIHdoaWNoIHRvIHJldHVybiB0aGUgaW5kZXguXG4gICAqIEByZXR1cm4gez9udW1iZXJ9IFJvdyBpbmRleCBhc3NvY2lhdGVkIHdpdGggdGhlIGVsZW1lbnQgKG5vdGUgdGhpcyBtYXlcbiAgICogICBub3QgY29ycmVzcG9uZCB0byB0aGUgYXJyYXkgaW5kZXggaWYgYSB1c2VyIGBzb3J0YCBpcyBhcHBsaWVkKS5cbiAgICovXG4gIGluZGV4Rm9yRWxlbWVudChlbCkge1xuICAgIGxldCBpbnN0YW5jZSA9IHRoaXMubW9kZWxGb3JFbGVtZW50KGVsKTtcbiAgICByZXR1cm4gaW5zdGFuY2UgJiYgaW5zdGFuY2VbdGhpcy5pbmRleEFzXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB0ZW1wbGF0ZSBcIm1vZGVsXCIgYXNzb2NpYXRlZCB3aXRoIGEgZ2l2ZW4gZWxlbWVudCwgd2hpY2hcbiAgICogc2VydmVzIGFzIHRoZSBiaW5kaW5nIHNjb3BlIGZvciB0aGUgdGVtcGxhdGUgaW5zdGFuY2UgdGhlIGVsZW1lbnQgaXNcbiAgICogY29udGFpbmVkIGluLiBBIHRlbXBsYXRlIG1vZGVsXG4gICAqIHNob3VsZCBiZSB1c2VkIHRvIG1hbmlwdWxhdGUgZGF0YSBhc3NvY2lhdGVkIHdpdGggdGhpcyB0ZW1wbGF0ZSBpbnN0YW5jZS5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogICBsZXQgbW9kZWwgPSBtb2RlbEZvckVsZW1lbnQoZWwpO1xuICAgKiAgIGlmIChtb2RlbC5pbmRleCA8IDEwKSB7XG4gICAqICAgICBtb2RlbC5zZXQoJ2l0ZW0uY2hlY2tlZCcsIHRydWUpO1xuICAgKiAgIH1cbiAgICpcbiAgICogQHBhcmFtIHshSFRNTEVsZW1lbnR9IGVsIEVsZW1lbnQgZm9yIHdoaWNoIHRvIHJldHVybiBhIHRlbXBsYXRlIG1vZGVsLlxuICAgKiBAcmV0dXJuIHtUZW1wbGF0ZUluc3RhbmNlQmFzZX0gTW9kZWwgcmVwcmVzZW50aW5nIHRoZSBiaW5kaW5nIHNjb3BlIGZvclxuICAgKiAgIHRoZSBlbGVtZW50LlxuICAgKi9cbiAgbW9kZWxGb3JFbGVtZW50KGVsKSB7XG4gICAgcmV0dXJuIG1vZGVsRm9yRWxlbWVudCh0aGlzLnRlbXBsYXRlLCBlbCk7XG4gIH1cblxufVxuXG5jdXN0b21FbGVtZW50cy5kZWZpbmUoRG9tUmVwZWF0LmlzLCBEb21SZXBlYXQpO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgeyBQb2x5bWVyRWxlbWVudCB9IGZyb20gJy4uLy4uL3BvbHltZXItZWxlbWVudC5qcyc7XG5cbmltcG9ydCB7IERlYm91bmNlciB9IGZyb20gJy4uL3V0aWxzL2RlYm91bmNlLmpzJztcbmltcG9ydCB7IGVucXVldWVEZWJvdW5jZXIsIGZsdXNoIH0gZnJvbSAnLi4vdXRpbHMvZmx1c2guanMnO1xuaW1wb3J0IHsgbWljcm9UYXNrIH0gZnJvbSAnLi4vdXRpbHMvYXN5bmMuanMnO1xuaW1wb3J0IHsgcm9vdCB9IGZyb20gJy4uL3V0aWxzL3BhdGguanMnO1xuaW1wb3J0IHsgd3JhcCB9IGZyb20gJy4uL3V0aWxzL3dyYXAuanMnO1xuaW1wb3J0IHsgaGlkZUVsZW1lbnRzR2xvYmFsbHkgfSBmcm9tICcuLi91dGlscy9oaWRlLXRlbXBsYXRlLWNvbnRyb2xzLmpzJztcbmltcG9ydCB7IGZhc3REb21JZiwgc3RyaWN0VGVtcGxhdGVQb2xpY3ksIHN1cHByZXNzVGVtcGxhdGVOb3RpZmljYXRpb25zIH0gZnJvbSAnLi4vdXRpbHMvc2V0dGluZ3MuanMnO1xuaW1wb3J0IHsgc2hvd0hpZGVDaGlsZHJlbiwgdGVtcGxhdGl6ZSB9IGZyb20gJy4uL3V0aWxzL3RlbXBsYXRpemUuanMnO1xuXG4vKipcbiAqIEBjdXN0b21FbGVtZW50XG4gKiBAcG9seW1lclxuICogQGV4dGVuZHMgUG9seW1lckVsZW1lbnRcbiAqIEBzdW1tYXJ5IEJhc2UgY2xhc3MgZm9yIGRvbS1pZiBlbGVtZW50OyBzdWJjbGFzc2VkIGludG8gY29uY3JldGVcbiAqICAgaW1wbGVtZW50YXRpb24uXG4gKi9cbmNsYXNzIERvbUlmQmFzZSBleHRlbmRzIFBvbHltZXJFbGVtZW50IHtcblxuICAvLyBOb3QgbmVlZGVkIHRvIGZpbmQgdGVtcGxhdGU7IGNhbiBiZSByZW1vdmVkIG9uY2UgdGhlIGFuYWx5emVyXG4gIC8vIGNhbiBmaW5kIHRoZSB0YWcgbmFtZSBmcm9tIGN1c3RvbUVsZW1lbnRzLmRlZmluZSBjYWxsXG4gIHN0YXRpYyBnZXQgaXMoKSB7IHJldHVybiAnZG9tLWlmJzsgfVxuXG4gIHN0YXRpYyBnZXQgdGVtcGxhdGUoKSB7IHJldHVybiBudWxsOyB9XG5cbiAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuXG4gICAgcmV0dXJuIHtcblxuICAgICAgLyoqXG4gICAgICAgKiBGaXJlZCB3aGVuZXZlciBET00gaXMgYWRkZWQgb3IgcmVtb3ZlZC9oaWRkZW4gYnkgdGhpcyB0ZW1wbGF0ZSAoYnlcbiAgICAgICAqIGRlZmF1bHQsIHJlbmRlcmluZyBvY2N1cnMgbGF6aWx5KS4gIFRvIGZvcmNlIGltbWVkaWF0ZSByZW5kZXJpbmcsIGNhbGxcbiAgICAgICAqIGByZW5kZXJgLlxuICAgICAgICpcbiAgICAgICAqIEBldmVudCBkb20tY2hhbmdlXG4gICAgICAgKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBBIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoaXMgdGVtcGxhdGUgc2hvdWxkIHN0YW1wLlxuICAgICAgICovXG4gICAgICBpZjoge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICBvYnNlcnZlcjogJ19fZGVib3VuY2VSZW5kZXInXG4gICAgICB9LFxuXG4gICAgICAvKipcbiAgICAgICAqIFdoZW4gdHJ1ZSwgZWxlbWVudHMgd2lsbCBiZSByZW1vdmVkIGZyb20gRE9NIGFuZCBkaXNjYXJkZWQgd2hlbiBgaWZgXG4gICAgICAgKiBiZWNvbWVzIGZhbHNlIGFuZCByZS1jcmVhdGVkIGFuZCBhZGRlZCBiYWNrIHRvIHRoZSBET00gd2hlbiBgaWZgXG4gICAgICAgKiBiZWNvbWVzIHRydWUuICBCeSBkZWZhdWx0LCBzdGFtcGVkIGVsZW1lbnRzIHdpbGwgYmUgaGlkZGVuIGJ1dCBsZWZ0XG4gICAgICAgKiBpbiB0aGUgRE9NIHdoZW4gYGlmYCBiZWNvbWVzIGZhbHNlLCB3aGljaCBpcyBnZW5lcmFsbHkgcmVzdWx0c1xuICAgICAgICogaW4gYmV0dGVyIHBlcmZvcm1hbmNlLlxuICAgICAgICovXG4gICAgICByZXN0YW1wOiB7XG4gICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgIG9ic2VydmVyOiAnX19kZWJvdW5jZVJlbmRlcidcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogV2hlbiB0aGUgZ2xvYmFsIGBzdXBwcmVzc1RlbXBsYXRlTm90aWZpY2F0aW9uc2Agc2V0dGluZyBpcyB1c2VkLCBzZXR0aW5nXG4gICAgICAgKiBgbm90aWZ5RG9tQ2hhbmdlOiB0cnVlYCB3aWxsIGVuYWJsZSBmaXJpbmcgYGRvbS1jaGFuZ2VgIGV2ZW50cyBvbiB0aGlzXG4gICAgICAgKiBlbGVtZW50LlxuICAgICAgICovXG4gICAgICBub3RpZnlEb21DaGFuZ2U6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhblxuICAgICAgfVxuICAgIH07XG5cbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX3JlbmRlckRlYm91bmNlciA9IG51bGw7XG4gICAgdGhpcy5fbGFzdElmID0gZmFsc2U7XG4gICAgdGhpcy5fX2hpZGVUZW1wbGF0ZUNoaWxkcmVuX18gPSBmYWxzZTtcbiAgICAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50fHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLl9fdGVtcGxhdGU7XG4gICAgLyoqIEB0eXBlIHshVGVtcGxhdGVJbmZvfHVuZGVmaW5lZH0gKi9cbiAgICB0aGlzLl90ZW1wbGF0ZUluZm87XG4gIH1cblxuICBfX2RlYm91bmNlUmVuZGVyKCkge1xuICAgIC8vIFJlbmRlciBpcyBhc3luYyBmb3IgMiByZWFzb25zOlxuICAgIC8vIDEuIFRvIGVsaW1pbmF0ZSBkb20gY3JlYXRpb24gdHJhc2hpbmcgaWYgdXNlciBjb2RlIHRocmFzaGVzIGBpZmAgaW4gdGhlXG4gICAgLy8gICAgc2FtZSB0dXJuLiBUaGlzIHdhcyBtb3JlIGNvbW1vbiBpbiAxLnggd2hlcmUgYSBjb21wb3VuZCBjb21wdXRlZFxuICAgIC8vICAgIHByb3BlcnR5IGNvdWxkIHJlc3VsdCBpbiB0aGUgcmVzdWx0IGNoYW5naW5nIG11bHRpcGxlIHRpbWVzLCBidXQgaXNcbiAgICAvLyAgICBtaXRpZ2F0ZWQgdG8gYSBsYXJnZSBleHRlbnQgYnkgYmF0Y2hlZCBwcm9wZXJ0eSBwcm9jZXNzaW5nIGluIDIueC5cbiAgICAvLyAyLiBUbyBhdm9pZCBkb3VibGUgb2JqZWN0IHByb3BhZ2F0aW9uIHdoZW4gYSBiYWcgaW5jbHVkaW5nIHZhbHVlcyBib3VuZFxuICAgIC8vICAgIHRvIHRoZSBgaWZgIHByb3BlcnR5IGFzIHdlbGwgYXMgb25lIG9yIG1vcmUgaG9zdFByb3BzIGNvdWxkIGVucXVldWVcbiAgICAvLyAgICB0aGUgPGRvbS1pZj4gdG8gZmx1c2ggYmVmb3JlIHRoZSA8dGVtcGxhdGU+J3MgaG9zdCBwcm9wZXJ0eVxuICAgIC8vICAgIGZvcndhcmRpbmcuIEluIHRoYXQgc2NlbmFyaW8gY3JlYXRpbmcgYW4gaW5zdGFuY2Ugd291bGQgcmVzdWx0IGluXG4gICAgLy8gICAgdGhlIGhvc3QgcHJvcHMgYmVpbmcgc2V0IG9uY2UsIGFuZCB0aGVuIHRoZSBlbnF1ZXVlZCBjaGFuZ2VzIG9uIHRoZVxuICAgIC8vICAgIHRlbXBsYXRlIHdvdWxkIHNldCBwcm9wZXJ0aWVzIGEgc2Vjb25kIHRpbWUsIHBvdGVudGlhbGx5IGNhdXNpbmcgYW5cbiAgICAvLyAgICBvYmplY3QgdG8gYmUgc2V0IHRvIGFuIGluc3RhbmNlIG1vcmUgdGhhbiBvbmNlLiAgQ3JlYXRpbmcgdGhlXG4gICAgLy8gICAgaW5zdGFuY2UgYXN5bmMgZnJvbSBmbHVzaGluZyBkYXRhIGVuc3VyZXMgdGhpcyBkb2Vzbid0IGhhcHBlbi4gSWZcbiAgICAvLyAgICB3ZSB3YW50ZWQgYSBzeW5jIG9wdGlvbiBpbiB0aGUgZnV0dXJlLCBzaW1wbHkgaGF2aW5nIDxkb20taWY+IGZsdXNoXG4gICAgLy8gICAgKG9yIGNsZWFyKSBpdHMgdGVtcGxhdGUncyBwZW5kaW5nIGhvc3QgcHJvcGVydGllcyBiZWZvcmUgY3JlYXRpbmdcbiAgICAvLyAgICB0aGUgaW5zdGFuY2Ugd291bGQgYWxzbyBhdm9pZCB0aGUgcHJvYmxlbS5cbiAgICB0aGlzLl9fcmVuZGVyRGVib3VuY2VyID0gRGVib3VuY2VyLmRlYm91bmNlKFxuICAgICAgICAgIHRoaXMuX19yZW5kZXJEZWJvdW5jZXJcbiAgICAgICAgLCBtaWNyb1Rhc2tcbiAgICAgICAgLCAoKSA9PiB0aGlzLl9fcmVuZGVyKCkpO1xuICAgIGVucXVldWVEZWJvdW5jZXIodGhpcy5fX3JlbmRlckRlYm91bmNlcik7XG4gIH1cblxuICAvKipcbiAgICogQG92ZXJyaWRlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICBzdXBlci5kaXNjb25uZWN0ZWRDYWxsYmFjaygpO1xuICAgIGNvbnN0IHBhcmVudCA9IHdyYXAodGhpcykucGFyZW50Tm9kZTtcbiAgICBpZiAoIXBhcmVudCB8fCAocGFyZW50Lm5vZGVUeXBlID09IE5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSAmJlxuICAgICAgICAhd3JhcChwYXJlbnQpLmhvc3QpKSB7XG4gICAgICB0aGlzLl9fdGVhcmRvd25JbnN0YW5jZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIGNvbm5lY3RlZENhbGxiYWNrKCkge1xuICAgIHN1cGVyLmNvbm5lY3RlZENhbGxiYWNrKCk7XG4gICAgaWYgKCFoaWRlRWxlbWVudHNHbG9iYWxseSgpKSB7XG4gICAgICB0aGlzLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgfVxuICAgIGlmICh0aGlzLmlmKSB7XG4gICAgICB0aGlzLl9fZGVib3VuY2VSZW5kZXIoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlcyBhIHRlbXBsYXRlIGhhcyBiZWVuIGFzc2lnbmVkIHRvIGB0aGlzLl9fdGVtcGxhdGVgLiAgSWYgaXQgaGFzIG5vdFxuICAgKiB5ZXQgYmVlbiwgaXQgcXVlcnlTZWxlY3RvcnMgZm9yIGl0IGluIGl0cyBjaGlsZHJlbiBhbmQgaWYgaXQgZG9lcyBub3QgeWV0XG4gICAqIGV4aXN0IChlLmcuIGluIHBhcnNlci1nZW5lcmF0ZWQgY2FzZSksIG9wZW5zIGEgbXV0YXRpb24gb2JzZXJ2ZXIgYW5kXG4gICAqIHdhaXRzIGZvciBpdCB0byBhcHBlYXIgKHJldHVybnMgZmFsc2UgaWYgaXQgaGFzIG5vdCB5ZXQgYmVlbiBmb3VuZCxcbiAgICogb3RoZXJ3aXNlIHRydWUpLiAgSW4gdGhlIGByZW1vdmVOZXN0ZWRUZW1wbGF0ZXNgIGNhc2UsIHRoZSBcInRlbXBsYXRlXCIgd2lsbFxuICAgKiBiZSB0aGUgYGRvbS1pZmAgZWxlbWVudCBpdHNlbGYuXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgd2hlbiBhIHRlbXBsYXRlIGhhcyBiZWVuIGZvdW5kLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIF9fZW5zdXJlVGVtcGxhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9fdGVtcGxhdGUpIHtcbiAgICAgIC8vIFdoZW4gYHJlbW92ZU5lc3RlZFRlbXBsYXRlc2AgaXMgdHJ1ZSwgdGhlIFwidGVtcGxhdGVcIiBpcyB0aGUgZWxlbWVudFxuICAgICAgLy8gaXRzZWxmLCB3aGljaCBoYXMgYmVlbiBnaXZlbiBhIGBfdGVtcGxhdGVJbmZvYCBwcm9wZXJ0eVxuICAgICAgY29uc3QgdGhpc0FzVGVtcGxhdGUgPSAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyAoXG4gICAgICAgICAgLyoqIEB0eXBlIHshSFRNTEVsZW1lbnR9ICovICh0aGlzKSk7XG4gICAgICBsZXQgdGVtcGxhdGUgPSB0aGlzQXNUZW1wbGF0ZS5fdGVtcGxhdGVJbmZvID9cbiAgICAgICAgICB0aGlzQXNUZW1wbGF0ZSA6XG4gICAgICAgICAgLyoqIEB0eXBlIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gKi9cbiAgICAgICAgICAod3JhcCh0aGlzQXNUZW1wbGF0ZSkucXVlcnlTZWxlY3RvcigndGVtcGxhdGUnKSk7XG4gICAgICBpZiAoIXRlbXBsYXRlKSB7XG4gICAgICAgIC8vIFdhaXQgdW50aWwgY2hpbGRMaXN0IGNoYW5nZXMgYW5kIHRlbXBsYXRlIHNob3VsZCBiZSB0aGVyZSBieSB0aGVuXG4gICAgICAgIGxldCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKCgpID0+IHtcbiAgICAgICAgICBpZiAod3JhcCh0aGlzKS5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZScpKSB7XG4gICAgICAgICAgICBvYnNlcnZlci5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB0aGlzLl9fcmVuZGVyKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZG9tLWlmIHJlcXVpcmVzIGEgPHRlbXBsYXRlPiBjaGlsZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIG9ic2VydmVyLm9ic2VydmUodGhpcywge2NoaWxkTGlzdDogdHJ1ZX0pO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLl9fdGVtcGxhdGUgPSB0ZW1wbGF0ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlcyBhIGFuIGluc3RhbmNlIG9mIHRoZSB0ZW1wbGF0ZSBoYXMgYmVlbiBjcmVhdGVkIGFuZCBpbnNlcnRlZC4gVGhpc1xuICAgKiBtZXRob2QgbWF5IHJldHVybiBmYWxzZSBpZiB0aGUgdGVtcGxhdGUgaGFzIG5vdCB5ZXQgYmVlbiBmb3VuZCBvciBpZlxuICAgKiB0aGVyZSBpcyBubyBgcGFyZW50Tm9kZWAgdG8gaW5zZXJ0IHRoZSB0ZW1wbGF0ZSBpbnRvIChpbiBlaXRoZXIgY2FzZSxcbiAgICogY29ubmVjdGlvbiBvciB0aGUgdGVtcGxhdGUtZmluZGluZyBtdXRhdGlvbiBvYnNlcnZlciBmaXJpbmcgd2lsbCBxdWV1ZVxuICAgKiBhbm90aGVyIHJlbmRlciwgY2F1c2luZyB0aGlzIG1ldGhvZCB0byBiZSBjYWxsZWQgYWdhaW4gYXQgYSBtb3JlXG4gICAqIGFwcHJvcHJpYXRlIHRpbWUpLlxuICAgKlxuICAgKiBTdWJjbGFzc2VzIHNob3VsZCBpbXBsZW1lbnQgdGhlIGZvbGxvd2luZyBtZXRob2RzIGNhbGxlZCBoZXJlOlxuICAgKiAtIGBfX2hhc0luc3RhbmNlYFxuICAgKiAtIGBfX2NyZWF0ZUFuZEluc2VydEluc3RhbmNlYFxuICAgKiAtIGBfX2dldEluc3RhbmNlTm9kZXNgXG4gICAqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIGluc3RhbmNlIHdhcyBjcmVhdGVkLCBmYWxzZSBvdGhlcndpc2UuXG4gICAqL1xuICBfX2Vuc3VyZUluc3RhbmNlKCkge1xuICAgIGxldCBwYXJlbnROb2RlID0gd3JhcCh0aGlzKS5wYXJlbnROb2RlO1xuICAgIGlmICghdGhpcy5fX2hhc0luc3RhbmNlKCkpIHtcbiAgICAgIC8vIEd1YXJkIGFnYWluc3QgZWxlbWVudCBiZWluZyBkZXRhY2hlZCB3aGlsZSByZW5kZXIgd2FzIHF1ZXVlZFxuICAgICAgaWYgKCFwYXJlbnROb2RlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIC8vIEZpbmQgdGhlIHRlbXBsYXRlICh3aGVuIGZhbHNlLCB0aGVyZSB3YXMgbm8gdGVtcGxhdGUgeWV0KVxuICAgICAgaWYgKCF0aGlzLl9fZW5zdXJlVGVtcGxhdGUoKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICB0aGlzLl9fY3JlYXRlQW5kSW5zZXJ0SW5zdGFuY2UocGFyZW50Tm9kZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIE1vdmUgaW5zdGFuY2UgY2hpbGRyZW4gaWYgbmVjZXNzYXJ5XG4gICAgICBsZXQgY2hpbGRyZW4gPSB0aGlzLl9fZ2V0SW5zdGFuY2VOb2RlcygpO1xuICAgICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICAvLyBEZXRlY3QgY2FzZSB3aGVyZSBkb20taWYgd2FzIHJlLWF0dGFjaGVkIGluIG5ldyBwb3NpdGlvblxuICAgICAgICBsZXQgbGFzdENoaWxkID0gd3JhcCh0aGlzKS5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIGlmIChsYXN0Q2hpbGQgIT09IGNoaWxkcmVuW2NoaWxkcmVuLmxlbmd0aC0xXSkge1xuICAgICAgICAgIGZvciAobGV0IGk9MCwgbjsgKGk8Y2hpbGRyZW4ubGVuZ3RoKSAmJiAobj1jaGlsZHJlbltpXSk7IGkrKykge1xuICAgICAgICAgICAgd3JhcChwYXJlbnROb2RlKS5pbnNlcnRCZWZvcmUobiwgdGhpcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcmNlcyB0aGUgZWxlbWVudCB0byByZW5kZXIgaXRzIGNvbnRlbnQuIE5vcm1hbGx5IHJlbmRlcmluZyBpc1xuICAgKiBhc3luY2hyb25vdXMgdG8gYSBwcm92b2tpbmcgY2hhbmdlLiBUaGlzIGlzIGRvbmUgZm9yIGVmZmljaWVuY3kgc29cbiAgICogdGhhdCBtdWx0aXBsZSBjaGFuZ2VzIHRyaWdnZXIgb25seSBhIHNpbmdsZSByZW5kZXIuIFRoZSByZW5kZXIgbWV0aG9kXG4gICAqIHNob3VsZCBiZSBjYWxsZWQgaWYsIGZvciBleGFtcGxlLCB0ZW1wbGF0ZSByZW5kZXJpbmcgaXMgcmVxdWlyZWQgdG9cbiAgICogdmFsaWRhdGUgYXBwbGljYXRpb24gc3RhdGUuXG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICByZW5kZXIoKSB7XG4gICAgZmx1c2goKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQZXJmb3JtcyB0aGUga2V5IHJlbmRlcmluZyBzdGVwczpcbiAgICogMS4gRW5zdXJlIGEgdGVtcGxhdGUgaW5zdGFuY2UgaGFzIGJlZW4gc3RhbXBlZCAod2hlbiB0cnVlKVxuICAgKiAyLiBSZW1vdmUgdGhlIHRlbXBsYXRlIGluc3RhbmNlICh3aGVuIGZhbHNlIGFuZCByZXN0YW1wOnRydWUpXG4gICAqIDMuIFN5bmMgdGhlIGhpZGRlbiBzdGF0ZSBvZiB0aGUgaW5zdGFuY2Ugbm9kZXMgd2l0aCB0aGUgaWYvcmVzdGFtcCBzdGF0ZVxuICAgKiA0LiBGaXJlcyB0aGUgYGRvbS1jaGFuZ2VgIGV2ZW50IHdoZW4gbmVjZXNzYXJ5XG4gICAqXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBfX3JlbmRlcigpIHtcbiAgICBpZiAodGhpcy5pZikge1xuICAgICAgaWYgKCF0aGlzLl9fZW5zdXJlSW5zdGFuY2UoKSkge1xuICAgICAgICAvLyBObyB0ZW1wbGF0ZSBmb3VuZCB5ZXRcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodGhpcy5yZXN0YW1wKSB7XG4gICAgICB0aGlzLl9fdGVhcmRvd25JbnN0YW5jZSgpO1xuICAgIH1cbiAgICB0aGlzLl9zaG93SGlkZUNoaWxkcmVuKCk7XG4gICAgaWYgKCghc3VwcHJlc3NUZW1wbGF0ZU5vdGlmaWNhdGlvbnMgfHwgdGhpcy5ub3RpZnlEb21DaGFuZ2UpXG4gICAgICAgICYmIHRoaXMuaWYgIT0gdGhpcy5fbGFzdElmKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KCdkb20tY2hhbmdlJywge1xuICAgICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICBjb21wb3NlZDogdHJ1ZVxuICAgICAgfSkpO1xuICAgICAgdGhpcy5fbGFzdElmID0gdGhpcy5pZjtcbiAgICB9XG4gIH1cblxuICAvLyBJZGVhbGx5IHRoZXNlIHdvdWxkIGJlIGFubm90YXRlZCBhcyBhYnN0cmFjdCBtZXRob2RzIGluIGFuIGFic3RyYWN0IGNsYXNzLFxuICAvLyBidXQgY2xvc3VyZSBjb21waWxlciBpcyBmaW5uaWNreVxuICAvKiBlc2xpbnQtZGlzYWJsZSB2YWxpZC1qc2RvYyAqL1xuICAvKipcbiAgICogQWJzdHJhY3QgQVBJIHRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzOiBSZXR1cm5zIHRydWUgaWYgYSB0ZW1wbGF0ZVxuICAgKiBpbnN0YW5jZSBoYXMgYmVlbiBjcmVhdGVkIGFuZCBpbnNlcnRlZC5cbiAgICpcbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIHdoZW4gYW4gaW5zdGFuY2UgaGFzIGJlZW4gY3JlYXRlZC5cbiAgICovXG4gIF9faGFzSW5zdGFuY2UoKSB7IH1cblxuICAvKipcbiAgICogQWJzdHJhY3QgQVBJIHRvIGJlIGltcGxlbWVudGVkIGJ5IHN1YmNsYXNzOiBSZXR1cm5zIHRoZSBjaGlsZCBub2RlcyBzdGFtcGVkXG4gICAqIGZyb20gYSB0ZW1wbGF0ZSBpbnN0YW5jZS5cbiAgICpcbiAgICogQHByb3RlY3RlZFxuICAgKiBAcmV0dXJuIHtBcnJheTxOb2RlPn0gQXJyYXkgb2YgY2hpbGQgbm9kZXMgc3RhbXBlZCBmcm9tIHRoZSB0ZW1wbGF0ZVxuICAgKiBpbnN0YW5jZS5cbiAgICovXG4gIF9fZ2V0SW5zdGFuY2VOb2RlcygpIHsgfVxuXG4gIC8qKlxuICAgKiBBYnN0cmFjdCBBUEkgdG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3M6IENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgdGhlXG4gICAqIHRlbXBsYXRlIGFuZCBpbnNlcnRzIGl0IGludG8gdGhlIGdpdmVuIHBhcmVudCBub2RlLlxuICAgKlxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBwYXJhbSB7Tm9kZX0gcGFyZW50Tm9kZSBUaGUgcGFyZW50IG5vZGUgdG8gaW5zZXJ0IHRoZSBpbnN0YW5jZSBpbnRvXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBfX2NyZWF0ZUFuZEluc2VydEluc3RhbmNlKHBhcmVudE5vZGUpIHsgfSAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgLyoqXG4gICAqIEFic3RyYWN0IEFQSSB0byBiZSBpbXBsZW1lbnRlZCBieSBzdWJjbGFzczogUmVtb3ZlcyBub2RlcyBjcmVhdGVkIGJ5IGFuXG4gICAqIGluc3RhbmNlIG9mIGEgdGVtcGxhdGUgYW5kIGFueSBhc3NvY2lhdGVkIGNsZWFudXAuXG4gICAqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIF9fdGVhcmRvd25JbnN0YW5jZSgpIHsgfVxuXG4gIC8qKlxuICAgKiBBYnN0cmFjdCBBUEkgdG8gYmUgaW1wbGVtZW50ZWQgYnkgc3ViY2xhc3M6IFNob3dzIG9yIGhpZGVzIGFueSB0ZW1wbGF0ZVxuICAgKiBpbnN0YW5jZSBjaGlsZE5vZGVzIGJhc2VkIG9uIHRoZSBgaWZgIHN0YXRlIG9mIHRoZSBlbGVtZW50IGFuZCBpdHNcbiAgICogYF9faGlkZVRlbXBsYXRlQ2hpbGRyZW5fX2AgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwcm90ZWN0ZWRcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIF9zaG93SGlkZUNoaWxkcmVuKCkgeyB9XG4gIC8qIGVzbGludC1lbmFibGUgdmFsaWQtanNkb2MgKi9cbn1cblxuLyoqXG4gKiBUaGUgdmVyc2lvbiBvZiBEb21JZiB1c2VkIHdoZW4gYGZhc3REb21JZmAgc2V0dGluZyBpcyBpbiB1c2UsIHdoaWNoIGlzXG4gKiBvcHRpbWl6ZWQgZm9yIGZpcnN0LXJlbmRlciAoYnV0IGFkZHMgYSB0YXggdG8gYWxsIHN1YnNlcXVlbnQgcHJvcGVydHkgdXBkYXRlc1xuICogb24gdGhlIGhvc3QsIHdoZXRoZXIgdGhleSB3ZXJlIHVzZWQgaW4gYSBnaXZlbiBgZG9tLWlmYCBvciBub3QpLlxuICpcbiAqIFRoaXMgaW1wbGVtZW50YXRpb24gYXZvaWRzIHVzZSBvZiBgVGVtcGxhdGl6ZXJgLCB3aGljaCBpbnRyb2R1Y2VzIGEgbmV3IHNjb3BlXG4gKiAoYSBub24tZWxlbWVudCBQcm9wZXJ0eUVmZmVjdHMgaW5zdGFuY2UpLCB3aGljaCBpcyBub3Qgc3RyaWN0bHkgbmVjZXNzYXJ5XG4gKiBzaW5jZSBgZG9tLWlmYCBuZXZlciBpbnRyb2R1Y2VzIG5ldyBwcm9wZXJ0aWVzIHRvIGl0cyBzY29wZSAodW5saWtlXG4gKiBgZG9tLXJlcGVhdGApLiBUYWtpbmcgYWR2YW50YWdlIG9mIHRoaXMgZmFjdCwgdGhlIGBkb20taWZgIHJlYWNoZXMgdXAgdG8gaXRzXG4gKiBgX19kYXRhSG9zdGAgYW5kIHN0YW1wcyB0aGUgdGVtcGxhdGUgZGlyZWN0bHkgZnJvbSB0aGUgaG9zdCB1c2luZyB0aGUgaG9zdCdzXG4gKiBydW50aW1lIGBfc3RhbXBUZW1wbGF0ZWAgQVBJLCB3aGljaCBiaW5kcyB0aGUgcHJvcGVydHkgZWZmZWN0cyBvZiB0aGVcbiAqIHRlbXBsYXRlIGRpcmVjdGx5IHRvIHRoZSBob3N0LiBUaGlzIGJvdGggYXZvaWRzIHRoZSBpbnRlcm1lZGlhcnlcbiAqIGBUZW1wbGF0aXplcmAgaW5zdGFuY2UsIGJ1dCBhbHNvIGF2b2lkcyB0aGUgbmVlZCB0byBiaW5kIGhvc3QgcHJvcGVydGllcyB0b1xuICogdGhlIGA8dGVtcGxhdGU+YCBlbGVtZW50IGFuZCBmb3J3YXJkIHRob3NlIGludG8gdGhlIHRlbXBsYXRlIGluc3RhbmNlLlxuICpcbiAqIEluIHRoaXMgdmVyc2lvbiBvZiBgZG9tLWlmYCwgdGhlIGB0aGlzLl9faW5zdGFuY2VgIG1ldGhvZCBpcyB0aGVcbiAqIGBEb2N1bWVudEZyYWdtZW50YCByZXR1cm5lZCBmcm9tIGBfc3RhbXBUZW1wbGF0ZWAsIHdoaWNoIGFsc28gc2VydmVzIGFzIHRoZVxuICogaGFuZGxlIGZvciBsYXRlciByZW1vdmluZyBpdCB1c2luZyB0aGUgYF9yZW1vdmVCb3VuZERvbWAgbWV0aG9kLlxuICovXG5jbGFzcyBEb21JZkZhc3QgZXh0ZW5kcyBEb21JZkJhc2Uge1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fX2luc3RhbmNlID0gbnVsbDtcbiAgICB0aGlzLl9fc3luY0luZm8gPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudGF0aW9uIG9mIGFic3RyYWN0IEFQSSBuZWVkZWQgYnkgRG9tSWZCYXNlLlxuICAgKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gVHJ1ZSB3aGVuIGFuIGluc3RhbmNlIGhhcyBiZWVuIGNyZWF0ZWQuXG4gICAqL1xuICBfX2hhc0luc3RhbmNlKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMuX19pbnN0YW5jZSk7XG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50YXRpb24gb2YgYWJzdHJhY3QgQVBJIG5lZWRlZCBieSBEb21JZkJhc2UuXG4gICAqXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcmV0dXJuIHtBcnJheTxOb2RlPn0gQXJyYXkgb2YgY2hpbGQgbm9kZXMgc3RhbXBlZCBmcm9tIHRoZSB0ZW1wbGF0ZVxuICAgKiBpbnN0YW5jZS5cbiAgICovXG4gIF9fZ2V0SW5zdGFuY2VOb2RlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fX2luc3RhbmNlLnRlbXBsYXRlSW5mby5jaGlsZE5vZGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudGF0aW9uIG9mIGFic3RyYWN0IEFQSSBuZWVkZWQgYnkgRG9tSWZCYXNlLlxuICAgKlxuICAgKiBTdGFtcHMgdGhlIHRlbXBsYXRlIGJ5IGNhbGxpbmcgYF9zdGFtcFRlbXBsYXRlYCBvbiB0aGUgYF9fZGF0YUhvc3RgIG9mIHRoaXNcbiAgICogZWxlbWVudCBhbmQgdGhlbiBpbnNlcnRzIHRoZSByZXN1bHRpbmcgbm9kZXMgaW50byB0aGUgZ2l2ZW4gYHBhcmVudE5vZGVgLlxuICAgKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHBhcmFtIHtOb2RlfSBwYXJlbnROb2RlIFRoZSBwYXJlbnQgbm9kZSB0byBpbnNlcnQgdGhlIGluc3RhbmNlIGludG9cbiAgICogQHJldHVybiB7dm9pZH1cbiAgICovXG4gIF9fY3JlYXRlQW5kSW5zZXJ0SW5zdGFuY2UocGFyZW50Tm9kZSkge1xuICAgIGNvbnN0IGhvc3QgPSB0aGlzLl9fZGF0YUhvc3QgfHwgdGhpcztcbiAgICBpZiAoc3RyaWN0VGVtcGxhdGVQb2xpY3kpIHtcbiAgICAgIGlmICghdGhpcy5fX2RhdGFIb3N0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignc3RyaWN0VGVtcGxhdGVQb2xpY3k6IHRlbXBsYXRlIG93bmVyIG5vdCB0cnVzdGVkJyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIFByZS1iaW5kIGFuZCBsaW5rIHRoZSB0ZW1wbGF0ZSBpbnRvIHRoZSBlZmZlY3RzIHN5c3RlbVxuICAgIGNvbnN0IHRlbXBsYXRlSW5mbyA9IGhvc3QuX2JpbmRUZW1wbGF0ZShcbiAgICAgICAgLyoqIEB0eXBlIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gKi8gKHRoaXMuX190ZW1wbGF0ZSksIHRydWUpO1xuICAgIC8vIEluc3RhbGwgcnVuRWZmZWN0cyBob29rIHRoYXQgcHJldmVudHMgcnVubmluZyBwcm9wZXJ0eSBlZmZlY3RzXG4gICAgLy8gKGFuZCBhbnkgbmVzdGVkIHRlbXBsYXRlIGVmZmVjdHMpIHdoZW4gdGhlIGBpZmAgaXMgZmFsc2VcbiAgICB0ZW1wbGF0ZUluZm8ucnVuRWZmZWN0cyA9IChydW5FZmZlY3RzLCBjaGFuZ2VkUHJvcHMsIGhhc1BhdGhzKSA9PiB7XG4gICAgICBsZXQgc3luY0luZm8gPSB0aGlzLl9fc3luY0luZm87XG4gICAgICBpZiAodGhpcy5pZikge1xuICAgICAgICAvLyBNaXggYW55IHByb3BzIHRoYXQgY2hhbmdlZCB3aGlsZSB0aGUgYGlmYCB3YXMgZmFsc2UgaW50byBgY2hhbmdlZFByb3BzYFxuICAgICAgICBpZiAoc3luY0luZm8pIHtcbiAgICAgICAgICAvLyBJZiB0aGVyZSB3ZXJlIHByb3BlcnRpZXMgcmVjZWl2ZWQgd2hpbGUgdGhlIGBpZmAgd2FzIGZhbHNlLCBpdCBpc1xuICAgICAgICAgIC8vIGltcG9ydGFudCB0byBzeW5jIHRoZSBoaWRkZW4gc3RhdGUgd2l0aCB0aGUgZWxlbWVudCBfZmlyc3RfLCBzbyB0aGF0XG4gICAgICAgICAgLy8gbmV3IGJpbmRpbmdzIHRvIGUuZy4gYHRleHRDb250ZW50YCBkbyBub3QgZ2V0IHN0b21wZWQgb24gYnlcbiAgICAgICAgICAvLyBwcmUtaGlkZGVuIHZhbHVlcyBpZiBgX3Nob3dIaWRlQ2hpbGRyZW5gIHdlcmUgdG8gYmUgY2FsbGVkIGxhdGVyIGF0XG4gICAgICAgICAgLy8gdGhlIG5leHQgcmVuZGVyLiBDbGVhcmluZyBgX19pbnZhbGlkUHJvcHNgIGhlcmUgZW5zdXJlc1xuICAgICAgICAgIC8vIGBfc2hvd0hpZGVDaGlsZHJlbmAncyBjYWxsIHRvIGBfX3N5bmNIb3N0UHJvcGVydGllc2Agbm8tb3BzLCBzb1xuICAgICAgICAgIC8vIHRoYXQgd2UgZG9uJ3QgY2FsbCBgcnVuRWZmZWN0c2AgbW9yZSBvZnRlbiB0aGFuIG5lY2Vzc2FyeS5cbiAgICAgICAgICB0aGlzLl9fc3luY0luZm8gPSBudWxsO1xuICAgICAgICAgIHRoaXMuX3Nob3dIaWRlQ2hpbGRyZW4oKTtcbiAgICAgICAgICBjaGFuZ2VkUHJvcHMgPSBPYmplY3QuYXNzaWduKHN5bmNJbmZvLmNoYW5nZWRQcm9wcywgY2hhbmdlZFByb3BzKTtcbiAgICAgICAgfVxuICAgICAgICBydW5FZmZlY3RzKGNoYW5nZWRQcm9wcywgaGFzUGF0aHMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQWNjdW11bGF0ZSBhbnkgdmFsdWVzIGNoYW5nZWQgd2hpbGUgYGlmYCB3YXMgZmFsc2UsIGFsb25nIHdpdGggdGhlXG4gICAgICAgIC8vIHJ1bkVmZmVjdHMgbWV0aG9kIHRvIHN5bmMgdGhlbSwgc28gdGhhdCB3ZSBjYW4gcmVwbGF5IHRoZW0gb25jZSBgaWZgXG4gICAgICAgIC8vIGJlY29tZXMgdHJ1ZVxuICAgICAgICBpZiAodGhpcy5fX2luc3RhbmNlKSB7XG4gICAgICAgICAgaWYgKCFzeW5jSW5mbykge1xuICAgICAgICAgICAgc3luY0luZm8gPSB0aGlzLl9fc3luY0luZm8gPSB7IHJ1bkVmZmVjdHMsIGNoYW5nZWRQcm9wczoge30gfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGhhc1BhdGhzKSB7XG4gICAgICAgICAgICAvLyBTdG9yZSByb290IG9iamVjdCBvZiBhbnkgcGF0aHM7IHRoaXMgd2lsbCBlbnN1cmUgZGlyZWN0IGJpbmRpbmdzXG4gICAgICAgICAgICAvLyBsaWtlIFtbb2JqLmZvb11dIGJpbmRpbmdzIHJ1biBhZnRlciBhIGBzZXQoJ29iai5mb28nLCB2KWAsIGJ1dFxuICAgICAgICAgICAgLy8gbm90ZSB0aGF0IHBhdGggbm90aWZpY2F0aW9ucyBsaWtlIGBzZXQoJ29iai5mb28uYmFyJywgdilgIHdpbGxcbiAgICAgICAgICAgIC8vIG5vdCBwcm9wYWdhdGUuIFNpbmNlIGJhdGNoZWQgcGF0aCBub3RpZmljYXRpb25zIGFyZSBub3RcbiAgICAgICAgICAgIC8vIHN1cHBvcnRlZCwgd2UgY2Fubm90IHNpbXBseSBhY2N1bXVsYXRlIHBhdGggbm90aWZpY2F0aW9ucy4gVGhpc1xuICAgICAgICAgICAgLy8gaXMgZXF1aXZhbGVudCB0byB0aGUgbm9uLWZhc3REb21JZiBjYXNlLCB3aGljaCBzdG9yZXMgcm9vdChwKSBpblxuICAgICAgICAgICAgLy8gX19pbnZhbGlkUHJvcHMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IHAgaW4gY2hhbmdlZFByb3BzKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJvb3RQcm9wID0gcm9vdChwKTtcbiAgICAgICAgICAgICAgc3luY0luZm8uY2hhbmdlZFByb3BzW3Jvb3RQcm9wXSA9IHRoaXMuX19kYXRhSG9zdFtyb290UHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oc3luY0luZm8uY2hhbmdlZFByb3BzLCBjaGFuZ2VkUHJvcHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgLy8gU3RhbXAgdGhlIHRlbXBsYXRlLCBhbmQgc2V0IGl0cyBEb2N1bWVudEZyYWdtZW50IHRvIHRoZSBcImluc3RhbmNlXCJcbiAgICB0aGlzLl9faW5zdGFuY2UgPSBob3N0Ll9zdGFtcFRlbXBsYXRlKFxuICAgICAgICAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyAodGhpcy5fX3RlbXBsYXRlKSwgdGVtcGxhdGVJbmZvKTtcbiAgICB3cmFwKHBhcmVudE5vZGUpLmluc2VydEJlZm9yZSh0aGlzLl9faW5zdGFuY2UsIHRoaXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJ1biBlZmZlY3RzIGZvciBhbnkgcHJvcGVydGllcyB0aGF0IGNoYW5nZWQgd2hpbGUgdGhlIGBpZmAgd2FzIGZhbHNlLlxuICAgKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgX19zeW5jSG9zdFByb3BlcnRpZXMoKSB7XG4gICAgY29uc3Qgc3luY0luZm8gPSB0aGlzLl9fc3luY0luZm87XG4gICAgaWYgKHN5bmNJbmZvKSB7XG4gICAgICB0aGlzLl9fc3luY0luZm8gPSBudWxsO1xuICAgICAgc3luY0luZm8ucnVuRWZmZWN0cyhzeW5jSW5mby5jaGFuZ2VkUHJvcHMsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50YXRpb24gb2YgYWJzdHJhY3QgQVBJIG5lZWRlZCBieSBEb21JZkJhc2UuXG4gICAqXG4gICAqIFJlbW92ZSB0aGUgaW5zdGFuY2UgYW5kIGFueSBub2RlcyBpdCBjcmVhdGVkLiAgVXNlcyB0aGUgYF9fZGF0YUhvc3RgJ3NcbiAgICogcnVudGltZSBgX3JlbW92ZUJvdW5kRG9tYCBtZXRob2QuXG4gICAqXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgX190ZWFyZG93bkluc3RhbmNlKCkge1xuICAgIGNvbnN0IGhvc3QgPSB0aGlzLl9fZGF0YUhvc3QgfHwgdGhpcztcbiAgICBpZiAodGhpcy5fX2luc3RhbmNlKSB7XG4gICAgICBob3N0Ll9yZW1vdmVCb3VuZERvbSh0aGlzLl9faW5zdGFuY2UpO1xuICAgICAgdGhpcy5fX2luc3RhbmNlID0gbnVsbDtcbiAgICAgIHRoaXMuX19zeW5jSW5mbyA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudGF0aW9uIG9mIGFic3RyYWN0IEFQSSBuZWVkZWQgYnkgRG9tSWZCYXNlLlxuICAgKlxuICAgKiBTaG93cyBvciBoaWRlcyB0aGUgdGVtcGxhdGUgaW5zdGFuY2UgdG9wIGxldmVsIGNoaWxkIG5vZGVzLiBGb3JcbiAgICogdGV4dCBub2RlcywgYHRleHRDb250ZW50YCBpcyByZW1vdmVkIHdoaWxlIFwiaGlkZGVuXCIgYW5kIHJlcGxhY2VkIHdoZW5cbiAgICogXCJzaG93bi5cIlxuICAgKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybiB7dm9pZH1cbiAgICogQHByb3RlY3RlZFxuICAgKiBAc3VwcHJlc3Mge3Zpc2liaWxpdHl9XG4gICAqL1xuICBfc2hvd0hpZGVDaGlsZHJlbigpIHtcbiAgICBjb25zdCBoaWRkZW4gPSB0aGlzLl9faGlkZVRlbXBsYXRlQ2hpbGRyZW5fXyB8fCAhdGhpcy5pZjtcbiAgICBpZiAodGhpcy5fX2luc3RhbmNlICYmIEJvb2xlYW4odGhpcy5fX2luc3RhbmNlLl9faGlkZGVuKSAhPT0gaGlkZGVuKSB7XG4gICAgICB0aGlzLl9faW5zdGFuY2UuX19oaWRkZW4gPSBoaWRkZW47XG4gICAgICBzaG93SGlkZUNoaWxkcmVuKGhpZGRlbiwgdGhpcy5fX2luc3RhbmNlLnRlbXBsYXRlSW5mby5jaGlsZE5vZGVzKTtcbiAgICB9XG4gICAgaWYgKCFoaWRkZW4pIHtcbiAgICAgIHRoaXMuX19zeW5jSG9zdFByb3BlcnRpZXMoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaGUgXCJsZWdhY3lcIiBpbXBsZW1lbnRhdGlvbiBvZiBgZG9tLWlmYCwgaW1wbGVtZW50ZWQgdXNpbmcgYFRlbXBsYXRpemVyYC5cbiAqXG4gKiBJbiB0aGlzIHZlcnNpb24sIGB0aGlzLl9faW5zdGFuY2VgIGlzIHRoZSBgVGVtcGxhdGVJbnN0YW5jZWAgcmV0dXJuZWRcbiAqIGZyb20gdGhlIHRlbXBsYXRpemVkIGNvbnN0cnVjdG9yLlxuICovXG5jbGFzcyBEb21JZkxlZ2FjeSBleHRlbmRzIERvbUlmQmFzZSB7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLl9fY3RvciA9IG51bGw7XG4gICAgdGhpcy5fX2luc3RhbmNlID0gbnVsbDtcbiAgICB0aGlzLl9faW52YWxpZFByb3BzID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnRhdGlvbiBvZiBhYnN0cmFjdCBBUEkgbmVlZGVkIGJ5IERvbUlmQmFzZS5cbiAgICpcbiAgICogQG92ZXJyaWRlXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgd2hlbiBhbiBpbnN0YW5jZSBoYXMgYmVlbiBjcmVhdGVkLlxuICAgKi9cbiAgX19oYXNJbnN0YW5jZSgpIHtcbiAgICByZXR1cm4gQm9vbGVhbih0aGlzLl9faW5zdGFuY2UpO1xuICB9XG5cbiAgLyoqXG4gICAqIEltcGxlbWVudGF0aW9uIG9mIGFic3RyYWN0IEFQSSBuZWVkZWQgYnkgRG9tSWZCYXNlLlxuICAgKlxuICAgKiBAb3ZlcnJpZGVcbiAgICogQHJldHVybiB7QXJyYXk8Tm9kZT59IEFycmF5IG9mIGNoaWxkIG5vZGVzIHN0YW1wZWQgZnJvbSB0aGUgdGVtcGxhdGVcbiAgICogaW5zdGFuY2UuXG4gICAqL1xuICBfX2dldEluc3RhbmNlTm9kZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX19pbnN0YW5jZS5jaGlsZHJlbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbXBsZW1lbnRhdGlvbiBvZiBhYnN0cmFjdCBBUEkgbmVlZGVkIGJ5IERvbUlmQmFzZS5cbiAgICpcbiAgICogU3RhbXBzIHRoZSB0ZW1wbGF0ZSBieSBjcmVhdGluZyBhIG5ldyBpbnN0YW5jZSBvZiB0aGUgdGVtcGxhdGl6ZWRcbiAgICogY29uc3RydWN0b3IgKHdoaWNoIGlzIGNyZWF0ZWQgbGF6aWx5IGlmIGl0IGRvZXMgbm90IHlldCBleGlzdCksIGFuZCB0aGVuXG4gICAqIGluc2VydHMgaXRzIHJlc3VsdGluZyBgcm9vdGAgZG9jIGZyYWdtZW50IGludG8gdGhlIGdpdmVuIGBwYXJlbnROb2RlYC5cbiAgICpcbiAgICogQG92ZXJyaWRlXG4gICAqIEBwYXJhbSB7Tm9kZX0gcGFyZW50Tm9kZSBUaGUgcGFyZW50IG5vZGUgdG8gaW5zZXJ0IHRoZSBpbnN0YW5jZSBpbnRvXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBfX2NyZWF0ZUFuZEluc2VydEluc3RhbmNlKHBhcmVudE5vZGUpIHtcbiAgICAvLyBFbnN1cmUgd2UgaGF2ZSBhbiBpbnN0YW5jZSBjb25zdHJ1Y3RvclxuICAgIGlmICghdGhpcy5fX2N0b3IpIHtcbiAgICAgIHRoaXMuX19jdG9yID0gdGVtcGxhdGl6ZShcbiAgICAgICAgICAvKiogQHR5cGUgeyFIVE1MVGVtcGxhdGVFbGVtZW50fSAqLyAodGhpcy5fX3RlbXBsYXRlKSwgdGhpcywge1xuICAgICAgICAgICAgLy8gZG9tLWlmIHRlbXBsYXRpemVyIGluc3RhbmNlcyByZXF1aXJlIGBtdXRhYmxlOiB0cnVlYCwgYXNcbiAgICAgICAgICAgIC8vIGBfX3N5bmNIb3N0UHJvcGVydGllc2AgcmVsaWVzIG9uIHRoYXQgYmVoYXZpb3IgdG8gc3luYyBvYmplY3RzXG4gICAgICAgICAgICBtdXRhYmxlRGF0YTogdHJ1ZSxcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IHByb3AgUHJvcGVydHkgdG8gZm9yd2FyZFxuICAgICAgICAgICAgICogQHBhcmFtIHsqfSB2YWx1ZSBWYWx1ZSBvZiBwcm9wZXJ0eVxuICAgICAgICAgICAgICogQHRoaXMge0RvbUlmTGVnYWN5fVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBmb3J3YXJkSG9zdFByb3A6IGZ1bmN0aW9uKHByb3AsIHZhbHVlKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLl9faW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pZikge1xuICAgICAgICAgICAgICAgICAgdGhpcy5fX2luc3RhbmNlLmZvcndhcmRIb3N0UHJvcChwcm9wLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgYW4gaW5zdGFuY2UgYnV0IGFyZSBzcXVlbGNoaW5nIGhvc3QgcHJvcGVydHlcbiAgICAgICAgICAgICAgICAgIC8vIGZvcndhcmRpbmcgZHVlIHRvIGlmIGJlaW5nIGZhbHNlLCBub3RlIHRoZSBpbnZhbGlkYXRlZFxuICAgICAgICAgICAgICAgICAgLy8gcHJvcGVydGllcyBzbyBgX19zeW5jSG9zdFByb3BlcnRpZXNgIGNhbiBzeW5jIHRoZW0gdGhlIG5leHRcbiAgICAgICAgICAgICAgICAgIC8vIHRpbWUgYGlmYCBiZWNvbWVzIHRydWVcbiAgICAgICAgICAgICAgICAgIHRoaXMuX19pbnZhbGlkUHJvcHMgPVxuICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX19pbnZhbGlkUHJvcHMgfHwgT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgICAgICAgICAgICAgICAgIHRoaXMuX19pbnZhbGlkUHJvcHNbcm9vdChwcm9wKV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBDcmVhdGUgYW5kIGluc2VydCB0aGUgaW5zdGFuY2VcbiAgICB0aGlzLl9faW5zdGFuY2UgPSBuZXcgdGhpcy5fX2N0b3IoKTtcbiAgICB3cmFwKHBhcmVudE5vZGUpLmluc2VydEJlZm9yZSh0aGlzLl9faW5zdGFuY2Uucm9vdCwgdGhpcyk7XG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50YXRpb24gb2YgYWJzdHJhY3QgQVBJIG5lZWRlZCBieSBEb21JZkJhc2UuXG4gICAqXG4gICAqIFJlbW92ZXMgdGhlIGluc3RhbmNlIGFuZCBhbnkgbm9kZXMgaXQgY3JlYXRlZC5cbiAgICpcbiAgICogQG92ZXJyaWRlXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqL1xuICBfX3RlYXJkb3duSW5zdGFuY2UoKSB7XG4gICAgaWYgKHRoaXMuX19pbnN0YW5jZSkge1xuICAgICAgbGV0IGMkID0gdGhpcy5fX2luc3RhbmNlLmNoaWxkcmVuO1xuICAgICAgaWYgKGMkICYmIGMkLmxlbmd0aCkge1xuICAgICAgICAvLyB1c2UgZmlyc3QgY2hpbGQgcGFyZW50LCBmb3IgY2FzZSB3aGVuIGRvbS1pZiBtYXkgaGF2ZSBiZWVuIGRldGFjaGVkXG4gICAgICAgIGxldCBwYXJlbnQgPSB3cmFwKGMkWzBdKS5wYXJlbnROb2RlO1xuICAgICAgICAvLyBJbnN0YW5jZSBjaGlsZHJlbiBtYXkgYmUgZGlzY29ubmVjdGVkIGZyb20gcGFyZW50cyB3aGVuIGRvbS1pZlxuICAgICAgICAvLyBkZXRhY2hlcyBpZiBhIHRyZWUgd2FzIGlubmVySFRNTCdlZFxuICAgICAgICBpZiAocGFyZW50KSB7XG4gICAgICAgICAgcGFyZW50ID0gd3JhcChwYXJlbnQpO1xuICAgICAgICAgIGZvciAobGV0IGk9MCwgbjsgKGk8YyQubGVuZ3RoKSAmJiAobj1jJFtpXSk7IGkrKykge1xuICAgICAgICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG4pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fX2ludmFsaWRQcm9wcyA9IG51bGw7XG4gICAgICB0aGlzLl9faW5zdGFuY2UgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBGb3J3YXJkcyBhbnkgcHJvcGVydGllcyB0aGF0IGNoYW5nZWQgd2hpbGUgdGhlIGBpZmAgd2FzIGZhbHNlIGludG8gdGhlXG4gICAqIHRlbXBsYXRlIGluc3RhbmNlIGFuZCBmbHVzaGVzIGl0LlxuICAgKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgX19zeW5jSG9zdFByb3BlcnRpZXMoKSB7XG4gICAgbGV0IHByb3BzID0gdGhpcy5fX2ludmFsaWRQcm9wcztcbiAgICBpZiAocHJvcHMpIHtcbiAgICAgIHRoaXMuX19pbnZhbGlkUHJvcHMgPSBudWxsO1xuICAgICAgZm9yIChsZXQgcHJvcCBpbiBwcm9wcykge1xuICAgICAgICB0aGlzLl9faW5zdGFuY2UuX3NldFBlbmRpbmdQcm9wZXJ0eShwcm9wLCB0aGlzLl9fZGF0YUhvc3RbcHJvcF0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fX2luc3RhbmNlLl9mbHVzaFByb3BlcnRpZXMoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSW1wbGVtZW50YXRpb24gb2YgYWJzdHJhY3QgQVBJIG5lZWRlZCBieSBEb21JZkJhc2UuXG4gICAqXG4gICAqIFNob3dzIG9yIGhpZGVzIHRoZSB0ZW1wbGF0ZSBpbnN0YW5jZSB0b3AgbGV2ZWwgY2hpbGQgZWxlbWVudHMuIEZvclxuICAgKiB0ZXh0IG5vZGVzLCBgdGV4dENvbnRlbnRgIGlzIHJlbW92ZWQgd2hpbGUgXCJoaWRkZW5cIiBhbmQgcmVwbGFjZWQgd2hlblxuICAgKiBcInNob3duLlwiXG4gICAqXG4gICAqIEBvdmVycmlkZVxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEByZXR1cm4ge3ZvaWR9XG4gICAqIEBzdXBwcmVzcyB7dmlzaWJpbGl0eX1cbiAgICovXG4gIF9zaG93SGlkZUNoaWxkcmVuKCkge1xuICAgIGNvbnN0IGhpZGRlbiA9IHRoaXMuX19oaWRlVGVtcGxhdGVDaGlsZHJlbl9fIHx8ICF0aGlzLmlmO1xuICAgIGlmICh0aGlzLl9faW5zdGFuY2UgJiYgQm9vbGVhbih0aGlzLl9faW5zdGFuY2UuX19oaWRkZW4pICE9PSBoaWRkZW4pIHtcbiAgICAgIHRoaXMuX19pbnN0YW5jZS5fX2hpZGRlbiA9IGhpZGRlbjtcbiAgICAgIHRoaXMuX19pbnN0YW5jZS5fc2hvd0hpZGVDaGlsZHJlbihoaWRkZW4pO1xuICAgIH1cbiAgICBpZiAoIWhpZGRlbikge1xuICAgICAgdGhpcy5fX3N5bmNIb3N0UHJvcGVydGllcygpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoZSBgPGRvbS1pZj5gIGVsZW1lbnQgd2lsbCBzdGFtcCBhIGxpZ2h0LWRvbSBgPHRlbXBsYXRlPmAgY2hpbGQgd2hlblxuICogdGhlIGBpZmAgcHJvcGVydHkgYmVjb21lcyB0cnV0aHksIGFuZCB0aGUgdGVtcGxhdGUgY2FuIHVzZSBQb2x5bWVyXG4gKiBkYXRhLWJpbmRpbmcgYW5kIGRlY2xhcmF0aXZlIGV2ZW50IGZlYXR1cmVzIHdoZW4gdXNlZCBpbiB0aGUgY29udGV4dCBvZlxuICogYSBQb2x5bWVyIGVsZW1lbnQncyB0ZW1wbGF0ZS5cbiAqXG4gKiBXaGVuIGBpZmAgYmVjb21lcyBmYWxzeSwgdGhlIHN0YW1wZWQgY29udGVudCBpcyBoaWRkZW4gYnV0IG5vdFxuICogcmVtb3ZlZCBmcm9tIGRvbS4gV2hlbiBgaWZgIHN1YnNlcXVlbnRseSBiZWNvbWVzIHRydXRoeSBhZ2FpbiwgdGhlIGNvbnRlbnRcbiAqIGlzIHNpbXBseSByZS1zaG93bi4gVGhpcyBhcHByb2FjaCBpcyB1c2VkIGR1ZSB0byBpdHMgZmF2b3JhYmxlIHBlcmZvcm1hbmNlXG4gKiBjaGFyYWN0ZXJpc3RpY3M6IHRoZSBleHBlbnNlIG9mIGNyZWF0aW5nIHRlbXBsYXRlIGNvbnRlbnQgaXMgcGFpZCBvbmx5XG4gKiBvbmNlIGFuZCBsYXppbHkuXG4gKlxuICogU2V0IHRoZSBgcmVzdGFtcGAgcHJvcGVydHkgdG8gdHJ1ZSB0byBmb3JjZSB0aGUgc3RhbXBlZCBjb250ZW50IHRvIGJlXG4gKiBjcmVhdGVkIC8gZGVzdHJveWVkIHdoZW4gdGhlIGBpZmAgY29uZGl0aW9uIGNoYW5nZXMuXG4gKlxuICogQGN1c3RvbUVsZW1lbnRcbiAqIEBwb2x5bWVyXG4gKiBAZXh0ZW5kcyBEb21JZkJhc2VcbiAqIEBjb25zdHJ1Y3RvclxuICogQHN1bW1hcnkgQ3VzdG9tIGVsZW1lbnQgdGhhdCBjb25kaXRpb25hbGx5IHN0YW1wcyBhbmQgaGlkZXMgb3IgcmVtb3Zlc1xuICogICB0ZW1wbGF0ZSBjb250ZW50IGJhc2VkIG9uIGEgYm9vbGVhbiBmbGFnLlxuICovXG5leHBvcnQgY29uc3QgRG9tSWYgPSBmYXN0RG9tSWYgPyBEb21JZkZhc3QgOiBEb21JZkxlZ2FjeTtcblxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKERvbUlmLmlzLCBEb21JZik7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE3IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbkNvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG5zdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCB7IFBvbHltZXJFbGVtZW50IH0gZnJvbSAnLi4vLi4vcG9seW1lci1lbGVtZW50LmpzJztcblxuaW1wb3J0IHsgZGVkdXBpbmdNaXhpbiB9IGZyb20gJy4uL3V0aWxzL21peGluLmpzJztcbmltcG9ydCB7IGNhbGN1bGF0ZVNwbGljZXMgfSBmcm9tICcuLi91dGlscy9hcnJheS1zcGxpY2UuanMnO1xuaW1wb3J0IHsgRWxlbWVudE1peGluIH0gZnJvbSAnLi4vbWl4aW5zL2VsZW1lbnQtbWl4aW4uanMnO1xuXG4vKipcbiAqIEVsZW1lbnQgbWl4aW4gZm9yIHJlY29yZGluZyBkeW5hbWljIGFzc29jaWF0aW9ucyBiZXR3ZWVuIGl0ZW0gcGF0aHMgaW4gYVxuICogbWFzdGVyIGBpdGVtc2AgYXJyYXkgYW5kIGEgYHNlbGVjdGVkYCBhcnJheSBzdWNoIHRoYXQgcGF0aCBjaGFuZ2VzIHRvIHRoZVxuICogbWFzdGVyIGFycmF5IChhdCB0aGUgaG9zdCkgZWxlbWVudCBvciBlbHNld2hlcmUgdmlhIGRhdGEtYmluZGluZykgYXJlXG4gKiBjb3JyZWN0bHkgcHJvcGFnYXRlZCB0byBpdGVtcyBpbiB0aGUgc2VsZWN0ZWQgYXJyYXkgYW5kIHZpY2UtdmVyc2EuXG4gKlxuICogVGhlIGBpdGVtc2AgcHJvcGVydHkgYWNjZXB0cyBhbiBhcnJheSBvZiB1c2VyIGRhdGEsIGFuZCB2aWEgdGhlXG4gKiBgc2VsZWN0KGl0ZW0pYCBhbmQgYGRlc2VsZWN0KGl0ZW0pYCBBUEksIHVwZGF0ZXMgdGhlIGBzZWxlY3RlZGAgcHJvcGVydHlcbiAqIHdoaWNoIG1heSBiZSBib3VuZCB0byBvdGhlciBwYXJ0cyBvZiB0aGUgYXBwbGljYXRpb24sIGFuZCBhbnkgY2hhbmdlcyB0b1xuICogc3ViLWZpZWxkcyBvZiBgc2VsZWN0ZWRgIGl0ZW0ocykgd2lsbCBiZSBrZXB0IGluIHN5bmMgd2l0aCBpdGVtcyBpbiB0aGVcbiAqIGBpdGVtc2AgYXJyYXkuICBXaGVuIGBtdWx0aWAgaXMgZmFsc2UsIGBzZWxlY3RlZGAgaXMgYSBwcm9wZXJ0eVxuICogcmVwcmVzZW50aW5nIHRoZSBsYXN0IHNlbGVjdGVkIGl0ZW0uICBXaGVuIGBtdWx0aWAgaXMgdHJ1ZSwgYHNlbGVjdGVkYFxuICogaXMgYW4gYXJyYXkgb2YgbXVsdGlwbHkgc2VsZWN0ZWQgaXRlbXMuXG4gKlxuICogQHBvbHltZXJcbiAqIEBtaXhpbkZ1bmN0aW9uXG4gKiBAYXBwbGllc01peGluIEVsZW1lbnRNaXhpblxuICogQHN1bW1hcnkgRWxlbWVudCBtaXhpbiBmb3IgcmVjb3JkaW5nIGR5bmFtaWMgYXNzb2NpYXRpb25zIGJldHdlZW4gaXRlbSBwYXRocyBpbiBhXG4gKiBtYXN0ZXIgYGl0ZW1zYCBhcnJheSBhbmQgYSBgc2VsZWN0ZWRgIGFycmF5XG4gKi9cbmxldCBBcnJheVNlbGVjdG9yTWl4aW4gPSBkZWR1cGluZ01peGluKHN1cGVyQ2xhc3MgPT4ge1xuXG4gIC8qKlxuICAgKiBAY29uc3RydWN0b3JcbiAgICogQGltcGxlbWVudHMge1BvbHltZXJfRWxlbWVudE1peGlufVxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgbGV0IGVsZW1lbnRCYXNlID0gRWxlbWVudE1peGluKHN1cGVyQ2xhc3MpO1xuXG4gIC8qKlxuICAgKiBAcG9seW1lclxuICAgKiBAbWl4aW5DbGFzc1xuICAgKiBAaW1wbGVtZW50cyB7UG9seW1lcl9BcnJheVNlbGVjdG9yTWl4aW59XG4gICAqIEB1bnJlc3RyaWN0ZWRcbiAgICovXG4gIGNsYXNzIEFycmF5U2VsZWN0b3JNaXhpbiBleHRlbmRzIGVsZW1lbnRCYXNlIHtcblxuICAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcbiAgICAgIHJldHVybiB7XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEFuIGFycmF5IGNvbnRhaW5pbmcgaXRlbXMgZnJvbSB3aGljaCBzZWxlY3Rpb24gd2lsbCBiZSBtYWRlLlxuICAgICAgICAgKi9cbiAgICAgICAgaXRlbXM6IHtcbiAgICAgICAgICB0eXBlOiBBcnJheSxcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBgdHJ1ZWAsIG11bHRpcGxlIGl0ZW1zIG1heSBiZSBzZWxlY3RlZCBhdCBvbmNlIChpbiB0aGlzIGNhc2UsXG4gICAgICAgICAqIGBzZWxlY3RlZGAgaXMgYW4gYXJyYXkgb2YgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW1zKS4gIFdoZW4gYGZhbHNlYCxcbiAgICAgICAgICogb25seSBvbmUgaXRlbSBtYXkgYmUgc2VsZWN0ZWQgYXQgYSB0aW1lLlxuICAgICAgICAgKi9cbiAgICAgICAgbXVsdGk6IHtcbiAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBgbXVsdGlgIGlzIHRydWUsIHRoaXMgaXMgYW4gYXJyYXkgdGhhdCBjb250YWlucyBhbnkgc2VsZWN0ZWQuXG4gICAgICAgICAqIFdoZW4gYG11bHRpYCBpcyBmYWxzZSwgdGhpcyBpcyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIGl0ZW0sIG9yIGBudWxsYFxuICAgICAgICAgKiBpZiBubyBpdGVtIGlzIHNlbGVjdGVkLlxuICAgICAgICAgKiBAdHlwZSB7P09iamVjdHw/QXJyYXk8IU9iamVjdD59XG4gICAgICAgICAqL1xuICAgICAgICBzZWxlY3RlZDoge3R5cGU6IE9iamVjdCwgbm90aWZ5OiB0cnVlfSxcblxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBgbXVsdGlgIGlzIGZhbHNlLCB0aGlzIGlzIHRoZSBjdXJyZW50bHkgc2VsZWN0ZWQgaXRlbSwgb3IgYG51bGxgXG4gICAgICAgICAqIGlmIG5vIGl0ZW0gaXMgc2VsZWN0ZWQuXG4gICAgICAgICAqIEB0eXBlIHs/T2JqZWN0fVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZWN0ZWRJdGVtOiB7dHlwZTogT2JqZWN0LCBub3RpZnk6IHRydWV9LFxuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGVuIGB0cnVlYCwgY2FsbGluZyBgc2VsZWN0YCBvbiBhbiBpdGVtIHRoYXQgaXMgYWxyZWFkeSBzZWxlY3RlZFxuICAgICAgICAgKiB3aWxsIGRlc2VsZWN0IHRoZSBpdGVtLlxuICAgICAgICAgKi9cbiAgICAgICAgdG9nZ2xlOiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlfVxuXG4gICAgICB9O1xuICAgIH1cblxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZXJzKCkge1xuICAgICAgcmV0dXJuIFsnX191cGRhdGVTZWxlY3Rpb24obXVsdGksIGl0ZW1zLiopJ107XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICBzdXBlcigpO1xuICAgICAgdGhpcy5fX2xhc3RJdGVtcyA9IG51bGw7XG4gICAgICB0aGlzLl9fbGFzdE11bHRpID0gbnVsbDtcbiAgICAgIHRoaXMuX19zZWxlY3RlZE1hcCA9IG51bGw7XG4gICAgfVxuXG4gICAgX191cGRhdGVTZWxlY3Rpb24obXVsdGksIGl0ZW1zSW5mbykge1xuICAgICAgbGV0IHBhdGggPSBpdGVtc0luZm8ucGF0aDtcbiAgICAgIGlmIChwYXRoID09IEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2l0ZW1zJywgdGhpcykpIHtcbiAgICAgICAgLy8gQ2FzZSAxIC0gaXRlbXMgYXJyYXkgY2hhbmdlZCwgc28gZGlmZiBhZ2FpbnN0IHByZXZpb3VzIGFycmF5IGFuZFxuICAgICAgICAvLyBkZXNlbGVjdCBhbnkgcmVtb3ZlZCBpdGVtcyBhbmQgYWRqdXN0IHNlbGVjdGVkIGluZGljZXNcbiAgICAgICAgbGV0IG5ld0l0ZW1zID0gaXRlbXNJbmZvLmJhc2UgfHwgW107XG4gICAgICAgIGxldCBsYXN0SXRlbXMgPSB0aGlzLl9fbGFzdEl0ZW1zO1xuICAgICAgICBsZXQgbGFzdE11bHRpID0gdGhpcy5fX2xhc3RNdWx0aTtcbiAgICAgICAgaWYgKG11bHRpICE9PSBsYXN0TXVsdGkpIHtcbiAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhc3RJdGVtcykge1xuICAgICAgICAgIGxldCBzcGxpY2VzID0gY2FsY3VsYXRlU3BsaWNlcyhuZXdJdGVtcywgbGFzdEl0ZW1zKTtcbiAgICAgICAgICB0aGlzLl9fYXBwbHlTcGxpY2VzKHNwbGljZXMpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX19sYXN0SXRlbXMgPSBuZXdJdGVtcztcbiAgICAgICAgdGhpcy5fX2xhc3RNdWx0aSA9IG11bHRpO1xuICAgICAgfSBlbHNlIGlmIChpdGVtc0luZm8ucGF0aCA9PSBgJHtKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdpdGVtcycsIHRoaXMpfS5zcGxpY2VzYCkge1xuICAgICAgICAvLyBDYXNlIDIgLSBnb3Qgc3BlY2lmaWMgc3BsaWNlIGluZm9ybWF0aW9uIGRlc2NyaWJpbmcgdGhlIGFycmF5IG11dGF0aW9uOlxuICAgICAgICAvLyBkZXNlbGVjdCBhbnkgcmVtb3ZlZCBpdGVtcyBhbmQgYWRqdXN0IHNlbGVjdGVkIGluZGljZXNcbiAgICAgICAgdGhpcy5fX2FwcGx5U3BsaWNlcyhpdGVtc0luZm8udmFsdWUuaW5kZXhTcGxpY2VzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIENhc2UgMyAtIGFuIGFycmF5IGVsZW1lbnQgd2FzIGNoYW5nZWQsIHNvIGRlc2VsZWN0IHRoZSBwcmV2aW91c1xuICAgICAgICAvLyBpdGVtIGZvciB0aGF0IGluZGV4IGlmIGl0IHdhcyBwcmV2aW91c2x5IHNlbGVjdGVkXG4gICAgICAgIGxldCBwYXJ0ID0gcGF0aC5zbGljZShgJHtKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdpdGVtcycsIHRoaXMpfS5gLmxlbmd0aCk7XG4gICAgICAgIGxldCBpZHggPSBwYXJzZUludChwYXJ0LCAxMCk7XG4gICAgICAgIGlmICgocGFydC5pbmRleE9mKCcuJykgPCAwKSAmJiBwYXJ0ID09IGlkeCkge1xuICAgICAgICAgIHRoaXMuX19kZXNlbGVjdENoYW5nZWRJZHgoaWR4KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIF9fYXBwbHlTcGxpY2VzKHNwbGljZXMpIHtcbiAgICAgIGxldCBzZWxlY3RlZCA9IHRoaXMuX19zZWxlY3RlZE1hcDtcbiAgICAgIC8vIEFkanVzdCBzZWxlY3RlZCBpbmRpY2VzIGFuZCBtYXJrIHJlbW92YWxzXG4gICAgICBmb3IgKGxldCBpPTA7IGk8c3BsaWNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICBsZXQgcyA9IHNwbGljZXNbaV07XG4gICAgICAgIHNlbGVjdGVkLmZvckVhY2goKGlkeCwgaXRlbSkgPT4ge1xuICAgICAgICAgIGlmIChpZHggPCBzLmluZGV4KSB7XG4gICAgICAgICAgICAvLyBubyBjaGFuZ2VcbiAgICAgICAgICB9IGVsc2UgaWYgKGlkeCA+PSBzLmluZGV4ICsgcy5yZW1vdmVkLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gYWRqdXN0IGluZGV4XG4gICAgICAgICAgICBzZWxlY3RlZC5zZXQoaXRlbSwgaWR4ICsgcy5hZGRlZENvdW50IC0gcy5yZW1vdmVkLmxlbmd0aCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHJlbW92ZSBpbmRleFxuICAgICAgICAgICAgc2VsZWN0ZWQuc2V0KGl0ZW0sIC0xKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmb3IgKGxldCBqPTA7IGo8cy5hZGRlZENvdW50OyBqKyspIHtcbiAgICAgICAgICBsZXQgaWR4ID0gcy5pbmRleCArIGo7XG4gICAgICAgICAgaWYgKHNlbGVjdGVkLmhhcyh0aGlzLml0ZW1zW2lkeF0pKSB7XG4gICAgICAgICAgICBzZWxlY3RlZC5zZXQodGhpcy5pdGVtc1tpZHhdLCBpZHgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gVXBkYXRlIGxpbmtlZCBwYXRoc1xuICAgICAgdGhpcy5fX3VwZGF0ZUxpbmtzKCk7XG4gICAgICAvLyBSZW1vdmUgc2VsZWN0ZWQgaXRlbXMgdGhhdCB3ZXJlIHJlbW92ZWQgZnJvbSB0aGUgaXRlbXMgYXJyYXlcbiAgICAgIGxldCBzaWR4ID0gMDtcbiAgICAgIHNlbGVjdGVkLmZvckVhY2goKGlkeCwgaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaWR4IDwgMCkge1xuICAgICAgICAgIGlmICh0aGlzLm11bHRpKSB7XG4gICAgICAgICAgICB0aGlzLnNwbGljZShKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdzZWxlY3RlZCcsIHRoaXMpLCBzaWR4LCAxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRJdGVtID0gbnVsbDtcbiAgICAgICAgICB9XG4gICAgICAgICAgc2VsZWN0ZWQuZGVsZXRlKGl0ZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHNpZHgrKztcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgX191cGRhdGVMaW5rcygpIHtcbiAgICAgIHRoaXMuX19kYXRhTGlua2VkUGF0aHMgPSB7fTtcbiAgICAgIGlmICh0aGlzLm11bHRpKSB7XG4gICAgICAgIGxldCBzaWR4ID0gMDtcbiAgICAgICAgdGhpcy5fX3NlbGVjdGVkTWFwLmZvckVhY2goaWR4ID0+IHtcbiAgICAgICAgICBpZiAoaWR4ID49IDApIHtcbiAgICAgICAgICAgIHRoaXMubGlua1BhdGhzKFxuICAgICAgICAgICAgICAgIGAke0pTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2l0ZW1zJywgdGhpcyl9LiR7aWR4fWAsXG4gICAgICAgICAgICAgICAgYCR7SlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnc2VsZWN0ZWQnLCB0aGlzKX0uJHtzaWR4Kyt9YCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX19zZWxlY3RlZE1hcC5mb3JFYWNoKGlkeCA9PiB7XG4gICAgICAgICAgdGhpcy5saW5rUGF0aHMoXG4gICAgICAgICAgICAgIEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ3NlbGVjdGVkJywgdGhpcyksXG4gICAgICAgICAgICAgIGAke0pTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ2l0ZW1zJywgdGhpcyl9LiR7aWR4fWApO1xuICAgICAgICAgIHRoaXMubGlua1BhdGhzKFxuICAgICAgICAgICAgICBKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdzZWxlY3RlZEl0ZW0nLCB0aGlzKSxcbiAgICAgICAgICAgICAgYCR7SlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnaXRlbXMnLCB0aGlzKX0uJHtpZHh9YCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENsZWFycyB0aGUgc2VsZWN0aW9uIHN0YXRlLlxuICAgICAqIEBvdmVycmlkZVxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgY2xlYXJTZWxlY3Rpb24oKSB7XG4gICAgICAvLyBVbmJpbmQgcHJldmlvdXMgc2VsZWN0aW9uXG4gICAgICB0aGlzLl9fZGF0YUxpbmtlZFBhdGhzID0ge307XG4gICAgICAvLyBUaGUgc2VsZWN0ZWQgbWFwIHN0b3JlcyAzIHBpZWNlcyBvZiBpbmZvcm1hdGlvbjpcbiAgICAgIC8vIGtleTogaXRlbXMgYXJyYXkgb2JqZWN0XG4gICAgICAvLyB2YWx1ZTogaXRlbXMgYXJyYXkgaW5kZXhcbiAgICAgIC8vIG9yZGVyOiBzZWxlY3RlZCBhcnJheSBpbmRleFxuICAgICAgdGhpcy5fX3NlbGVjdGVkTWFwID0gbmV3IE1hcCgpO1xuICAgICAgLy8gSW5pdGlhbGl6ZSBzZWxlY3Rpb25cbiAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLm11bHRpID8gW10gOiBudWxsO1xuICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0gPSBudWxsO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgaXRlbSBpcyBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyp9IGl0ZW0gSXRlbSBmcm9tIGBpdGVtc2AgYXJyYXkgdG8gdGVzdFxuICAgICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGl0ZW0gaXMgc2VsZWN0ZWRcbiAgICAgKi9cbiAgICBpc1NlbGVjdGVkKGl0ZW0pIHtcbiAgICAgIHJldHVybiB0aGlzLl9fc2VsZWN0ZWRNYXAuaGFzKGl0ZW0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgaXRlbSBpcyBjdXJyZW50bHkgc2VsZWN0ZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWR4IEluZGV4IGZyb20gYGl0ZW1zYCBhcnJheSB0byB0ZXN0XG4gICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgaXRlbSBpcyBzZWxlY3RlZFxuICAgICAqL1xuICAgIGlzSW5kZXhTZWxlY3RlZChpZHgpIHtcbiAgICAgIHJldHVybiB0aGlzLmlzU2VsZWN0ZWQodGhpcy5pdGVtc1tpZHhdKTtcbiAgICB9XG5cbiAgICBfX2Rlc2VsZWN0Q2hhbmdlZElkeChpZHgpIHtcbiAgICAgIGxldCBzaWR4ID0gdGhpcy5fX3NlbGVjdGVkSW5kZXhGb3JJdGVtSW5kZXgoaWR4KTtcbiAgICAgIGlmIChzaWR4ID49IDApIHtcbiAgICAgICAgbGV0IGkgPSAwO1xuICAgICAgICB0aGlzLl9fc2VsZWN0ZWRNYXAuZm9yRWFjaCgoaWR4LCBpdGVtKSA9PiB7XG4gICAgICAgICAgaWYgKHNpZHggPT0gaSsrKSB7XG4gICAgICAgICAgICB0aGlzLmRlc2VsZWN0KGl0ZW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX19zZWxlY3RlZEluZGV4Rm9ySXRlbUluZGV4KGlkeCkge1xuICAgICAgbGV0IHNlbGVjdGVkID0gdGhpcy5fX2RhdGFMaW5rZWRQYXRoc1tgJHtKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdpdGVtcycsIHRoaXMpfS4ke2lkeH1gXTtcbiAgICAgIGlmIChzZWxlY3RlZCkge1xuICAgICAgICByZXR1cm4gcGFyc2VJbnQoc2VsZWN0ZWQuc2xpY2UoYCR7SlNDb21waWxlcl9yZW5hbWVQcm9wZXJ0eSgnc2VsZWN0ZWQnLCB0aGlzKX0uYC5sZW5ndGgpLCAxMCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRGVzZWxlY3RzIHRoZSBnaXZlbiBpdGVtIGlmIGl0IGlzIGFscmVhZHkgc2VsZWN0ZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyp9IGl0ZW0gSXRlbSBmcm9tIGBpdGVtc2AgYXJyYXkgdG8gZGVzZWxlY3RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIGRlc2VsZWN0KGl0ZW0pIHtcbiAgICAgIGxldCBpZHggPSB0aGlzLl9fc2VsZWN0ZWRNYXAuZ2V0KGl0ZW0pO1xuICAgICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICAgIHRoaXMuX19zZWxlY3RlZE1hcC5kZWxldGUoaXRlbSk7XG4gICAgICAgIGxldCBzaWR4O1xuICAgICAgICBpZiAodGhpcy5tdWx0aSkge1xuICAgICAgICAgIHNpZHggPSB0aGlzLl9fc2VsZWN0ZWRJbmRleEZvckl0ZW1JbmRleChpZHgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX191cGRhdGVMaW5rcygpO1xuICAgICAgICBpZiAodGhpcy5tdWx0aSkge1xuICAgICAgICAgIHRoaXMuc3BsaWNlKEpTQ29tcGlsZXJfcmVuYW1lUHJvcGVydHkoJ3NlbGVjdGVkJywgdGhpcyksIHNpZHgsIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkSXRlbSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBEZXNlbGVjdHMgdGhlIGdpdmVuIGluZGV4IGlmIGl0IGlzIGFscmVhZHkgc2VsZWN0ZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWR4IEluZGV4IGZyb20gYGl0ZW1zYCBhcnJheSB0byBkZXNlbGVjdFxuICAgICAqIEByZXR1cm4ge3ZvaWR9XG4gICAgICovXG4gICAgZGVzZWxlY3RJbmRleChpZHgpIHtcbiAgICAgIHRoaXMuZGVzZWxlY3QodGhpcy5pdGVtc1tpZHhdKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZWxlY3RzIHRoZSBnaXZlbiBpdGVtLiAgV2hlbiBgdG9nZ2xlYCBpcyB0cnVlLCB0aGlzIHdpbGwgYXV0b21hdGljYWxseVxuICAgICAqIGRlc2VsZWN0IHRoZSBpdGVtIGlmIGFscmVhZHkgc2VsZWN0ZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0geyp9IGl0ZW0gSXRlbSBmcm9tIGBpdGVtc2AgYXJyYXkgdG8gc2VsZWN0XG4gICAgICogQHJldHVybiB7dm9pZH1cbiAgICAgKi9cbiAgICBzZWxlY3QoaXRlbSkge1xuICAgICAgdGhpcy5zZWxlY3RJbmRleCh0aGlzLml0ZW1zLmluZGV4T2YoaXRlbSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNlbGVjdHMgdGhlIGdpdmVuIGluZGV4LiAgV2hlbiBgdG9nZ2xlYCBpcyB0cnVlLCB0aGlzIHdpbGwgYXV0b21hdGljYWxseVxuICAgICAqIGRlc2VsZWN0IHRoZSBpdGVtIGlmIGFscmVhZHkgc2VsZWN0ZWQuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaWR4IEluZGV4IGZyb20gYGl0ZW1zYCBhcnJheSB0byBzZWxlY3RcbiAgICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgICAqL1xuICAgIHNlbGVjdEluZGV4KGlkeCkge1xuICAgICAgbGV0IGl0ZW0gPSB0aGlzLml0ZW1zW2lkeF07XG4gICAgICBpZiAoIXRoaXMuaXNTZWxlY3RlZChpdGVtKSkge1xuICAgICAgICBpZiAoIXRoaXMubXVsdGkpIHtcbiAgICAgICAgICB0aGlzLl9fc2VsZWN0ZWRNYXAuY2xlYXIoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9fc2VsZWN0ZWRNYXAuc2V0KGl0ZW0sIGlkeCk7XG4gICAgICAgIHRoaXMuX191cGRhdGVMaW5rcygpO1xuICAgICAgICBpZiAodGhpcy5tdWx0aSkge1xuICAgICAgICAgIHRoaXMucHVzaChKU0NvbXBpbGVyX3JlbmFtZVByb3BlcnR5KCdzZWxlY3RlZCcsIHRoaXMpLCBpdGVtKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZEl0ZW0gPSBpdGVtO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMudG9nZ2xlKSB7XG4gICAgICAgIHRoaXMuZGVzZWxlY3RJbmRleChpZHgpO1xuICAgICAgfVxuICAgIH1cblxuICB9XG5cbiAgcmV0dXJuIEFycmF5U2VsZWN0b3JNaXhpbjtcblxufSk7XG5cbi8vIGV4cG9ydCBtaXhpblxuZXhwb3J0IHsgQXJyYXlTZWxlY3Rvck1peGluIH07XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZXh0ZW5kcyB7UG9seW1lckVsZW1lbnR9XG4gKiBAaW1wbGVtZW50cyB7UG9seW1lcl9BcnJheVNlbGVjdG9yTWl4aW59XG4gKiBAcHJpdmF0ZVxuICovXG5sZXQgYmFzZUFycmF5U2VsZWN0b3IgPSBBcnJheVNlbGVjdG9yTWl4aW4oUG9seW1lckVsZW1lbnQpO1xuXG4vKipcbiAqIEVsZW1lbnQgaW1wbGVtZW50aW5nIHRoZSBgQXJyYXlTZWxlY3RvcmAgbWl4aW4sIHdoaWNoIHJlY29yZHNcbiAqIGR5bmFtaWMgYXNzb2NpYXRpb25zIGJldHdlZW4gaXRlbSBwYXRocyBpbiBhIG1hc3RlciBgaXRlbXNgIGFycmF5IGFuZCBhXG4gKiBgc2VsZWN0ZWRgIGFycmF5IHN1Y2ggdGhhdCBwYXRoIGNoYW5nZXMgdG8gdGhlIG1hc3RlciBhcnJheSAoYXQgdGhlIGhvc3QpXG4gKiBlbGVtZW50IG9yIGVsc2V3aGVyZSB2aWEgZGF0YS1iaW5kaW5nKSBhcmUgY29ycmVjdGx5IHByb3BhZ2F0ZWQgdG8gaXRlbXNcbiAqIGluIHRoZSBzZWxlY3RlZCBhcnJheSBhbmQgdmljZS12ZXJzYS5cbiAqXG4gKiBUaGUgYGl0ZW1zYCBwcm9wZXJ0eSBhY2NlcHRzIGFuIGFycmF5IG9mIHVzZXIgZGF0YSwgYW5kIHZpYSB0aGVcbiAqIGBzZWxlY3QoaXRlbSlgIGFuZCBgZGVzZWxlY3QoaXRlbSlgIEFQSSwgdXBkYXRlcyB0aGUgYHNlbGVjdGVkYCBwcm9wZXJ0eVxuICogd2hpY2ggbWF5IGJlIGJvdW5kIHRvIG90aGVyIHBhcnRzIG9mIHRoZSBhcHBsaWNhdGlvbiwgYW5kIGFueSBjaGFuZ2VzIHRvXG4gKiBzdWItZmllbGRzIG9mIGBzZWxlY3RlZGAgaXRlbShzKSB3aWxsIGJlIGtlcHQgaW4gc3luYyB3aXRoIGl0ZW1zIGluIHRoZVxuICogYGl0ZW1zYCBhcnJheS4gIFdoZW4gYG11bHRpYCBpcyBmYWxzZSwgYHNlbGVjdGVkYCBpcyBhIHByb3BlcnR5XG4gKiByZXByZXNlbnRpbmcgdGhlIGxhc3Qgc2VsZWN0ZWQgaXRlbS4gIFdoZW4gYG11bHRpYCBpcyB0cnVlLCBgc2VsZWN0ZWRgXG4gKiBpcyBhbiBhcnJheSBvZiBtdWx0aXBseSBzZWxlY3RlZCBpdGVtcy5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqIGBgYGpzXG4gKiBpbXBvcnQge1BvbHltZXJFbGVtZW50fSBmcm9tICdAcG9seW1lci9wb2x5bWVyJztcbiAqIGltcG9ydCAnQHBvbHltZXIvcG9seW1lci9saWIvZWxlbWVudHMvYXJyYXktc2VsZWN0b3IuanMnO1xuICpcbiAqIGNsYXNzIEVtcGxveWVlTGlzdCBleHRlbmRzIFBvbHltZXJFbGVtZW50IHtcbiAqICAgc3RhdGljIGdldCBfdGVtcGxhdGUoKSB7XG4gKiAgICAgcmV0dXJuIGh0bWxgXG4gKiAgICAgICAgIDxkaXY+IEVtcGxveWVlIGxpc3Q6IDwvZGl2PlxuICogICAgICAgICA8ZG9tLXJlcGVhdCBpZD1cImVtcGxveWVlTGlzdFwiIGl0ZW1zPVwie3tlbXBsb3llZXN9fVwiPlxuICogICAgICAgICAgIDx0ZW1wbGF0ZT5cbiAqICAgICAgICAgICAgIDxkaXY+Rmlyc3QgbmFtZTogPHNwYW4+e3tpdGVtLmZpcnN0fX08L3NwYW4+PC9kaXY+XG4gKiAgICAgICAgICAgICAgIDxkaXY+TGFzdCBuYW1lOiA8c3Bhbj57e2l0ZW0ubGFzdH19PC9zcGFuPjwvZGl2PlxuICogICAgICAgICAgICAgICA8YnV0dG9uIG9uLWNsaWNrPVwidG9nZ2xlU2VsZWN0aW9uXCI+U2VsZWN0PC9idXR0b24+XG4gKiAgICAgICAgICAgPC90ZW1wbGF0ZT5cbiAqICAgICAgICAgPC9kb20tcmVwZWF0PlxuICpcbiAqICAgICAgICAgPGFycmF5LXNlbGVjdG9yIGlkPVwic2VsZWN0b3JcIlxuICogICAgICAgICAgICAgICAgICAgICAgICAgaXRlbXM9XCJ7e2VtcGxveWVlc319XCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkPVwie3tzZWxlY3RlZH19XCJcbiAqICAgICAgICAgICAgICAgICAgICAgICAgIG11bHRpIHRvZ2dsZT48L2FycmF5LXNlbGVjdG9yPlxuICpcbiAqICAgICAgICAgPGRpdj4gU2VsZWN0ZWQgZW1wbG95ZWVzOiA8L2Rpdj5cbiAqICAgICAgICAgPGRvbS1yZXBlYXQgaXRlbXM9XCJ7e3NlbGVjdGVkfX1cIj5cbiAqICAgICAgICAgICA8dGVtcGxhdGU+XG4gKiAgICAgICAgICAgICA8ZGl2PkZpcnN0IG5hbWU6IDxzcGFuPnt7aXRlbS5maXJzdH19PC9zcGFuPjwvZGl2PlxuICogICAgICAgICAgICAgPGRpdj5MYXN0IG5hbWU6IDxzcGFuPnt7aXRlbS5sYXN0fX08L3NwYW4+PC9kaXY+XG4gKiAgICAgICAgICAgPC90ZW1wbGF0ZT5cbiAqICAgICAgICAgPC9kb20tcmVwZWF0PmA7XG4gKiAgIH1cbiAqICAgc3RhdGljIGdldCBpcygpIHsgcmV0dXJuICdlbXBsb3llZS1saXN0JzsgfVxuICogICBzdGF0aWMgZ2V0IHByb3BlcnRpZXMoKSB7XG4gKiAgICAgcmV0dXJuIHtcbiAqICAgICAgIGVtcGxveWVlczoge1xuICogICAgICAgICB2YWx1ZSgpIHtcbiAqICAgICAgICAgICByZXR1cm4gW1xuICogICAgICAgICAgICAge2ZpcnN0OiAnQm9iJywgbGFzdDogJ1NtaXRoJ30sXG4gKiAgICAgICAgICAgICB7Zmlyc3Q6ICdTYWxseScsIGxhc3Q6ICdKb2huc29uJ30sXG4gKiAgICAgICAgICAgICAuLi5cbiAqICAgICAgICAgICBdO1xuICogICAgICAgICB9XG4gKiAgICAgICB9XG4gKiAgICAgfTtcbiAqICAgfVxuICogICB0b2dnbGVTZWxlY3Rpb24oZSkge1xuICogICAgIGNvbnN0IGl0ZW0gPSB0aGlzLiQuZW1wbG95ZWVMaXN0Lml0ZW1Gb3JFbGVtZW50KGUudGFyZ2V0KTtcbiAqICAgICB0aGlzLiQuc2VsZWN0b3Iuc2VsZWN0KGl0ZW0pO1xuICogICB9XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBAcG9seW1lclxuICogQGN1c3RvbUVsZW1lbnRcbiAqIEBleHRlbmRzIHtiYXNlQXJyYXlTZWxlY3Rvcn1cbiAqIEBhcHBsaWVzTWl4aW4gQXJyYXlTZWxlY3Rvck1peGluXG4gKiBAc3VtbWFyeSBDdXN0b20gZWxlbWVudCB0aGF0IGxpbmtzIHBhdGhzIGJldHdlZW4gYW4gaW5wdXQgYGl0ZW1zYCBhcnJheSBhbmRcbiAqICAgYW4gb3V0cHV0IGBzZWxlY3RlZGAgaXRlbSBvciBhcnJheSBiYXNlZCBvbiBjYWxscyB0byBpdHMgc2VsZWN0aW9uIEFQSS5cbiAqL1xuY2xhc3MgQXJyYXlTZWxlY3RvciBleHRlbmRzIGJhc2VBcnJheVNlbGVjdG9yIHtcbiAgLy8gTm90IG5lZWRlZCB0byBmaW5kIHRlbXBsYXRlOyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBhbmFseXplclxuICAvLyBjYW4gZmluZCB0aGUgdGFnIG5hbWUgZnJvbSBjdXN0b21FbGVtZW50cy5kZWZpbmUgY2FsbFxuICBzdGF0aWMgZ2V0IGlzKCkgeyByZXR1cm4gJ2FycmF5LXNlbGVjdG9yJzsgfVxuICBzdGF0aWMgZ2V0IHRlbXBsYXRlKCkgeyByZXR1cm4gbnVsbDsgfVxufVxuY3VzdG9tRWxlbWVudHMuZGVmaW5lKEFycmF5U2VsZWN0b3IuaXMsIEFycmF5U2VsZWN0b3IpO1xuZXhwb3J0IHsgQXJyYXlTZWxlY3RvciB9O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbid1c2Ugc3RyaWN0JztcblxuaW1wb3J0IEN1c3RvbVN0eWxlSW50ZXJmYWNlIGZyb20gJy4uL3NyYy9jdXN0b20tc3R5bGUtaW50ZXJmYWNlLmpzJztcbmltcG9ydCB7Z2V0Q29tcHV0ZWRTdHlsZVZhbHVlLCB1cGRhdGVOYXRpdmVQcm9wZXJ0aWVzfSBmcm9tICcuLi9zcmMvY29tbW9uLXV0aWxzLmpzJztcbmltcG9ydCB7bmF0aXZlQ3NzVmFyaWFibGVzLCBuYXRpdmVTaGFkb3csIGNzc0J1aWxkLCBkaXNhYmxlUnVudGltZX0gZnJvbSAnLi4vc3JjL3N0eWxlLXNldHRpbmdzLmpzJztcblxuY29uc3QgY3VzdG9tU3R5bGVJbnRlcmZhY2UgPSBuZXcgQ3VzdG9tU3R5bGVJbnRlcmZhY2UoKTtcblxuaWYgKCF3aW5kb3cuU2hhZHlDU1MpIHtcbiAgd2luZG93LlNoYWR5Q1NTID0ge1xuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUhUTUxUZW1wbGF0ZUVsZW1lbnR9IHRlbXBsYXRlXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGVsZW1lbnROYW1lXG4gICAgICogQHBhcmFtIHtzdHJpbmc9fSBlbGVtZW50RXh0ZW5kc1xuICAgICAqL1xuICAgIHByZXBhcmVUZW1wbGF0ZSh0ZW1wbGF0ZSwgZWxlbWVudE5hbWUsIGVsZW1lbnRFeHRlbmRzKSB7fSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAgICAgKi9cbiAgICBwcmVwYXJlVGVtcGxhdGVEb20odGVtcGxhdGUsIGVsZW1lbnROYW1lKSB7fSwgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshSFRNTFRlbXBsYXRlRWxlbWVudH0gdGVtcGxhdGVcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gZWxlbWVudE5hbWVcbiAgICAgKiBAcGFyYW0ge3N0cmluZz19IGVsZW1lbnRFeHRlbmRzXG4gICAgICovXG4gICAgcHJlcGFyZVRlbXBsYXRlU3R5bGVzKHRlbXBsYXRlLCBlbGVtZW50TmFtZSwgZWxlbWVudEV4dGVuZHMpIHt9LCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVudXNlZC12YXJzXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsZW1lbnRcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBzdHlsZVN1YnRyZWUoZWxlbWVudCwgcHJvcGVydGllcykge1xuICAgICAgY3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvY2Vzc1N0eWxlcygpO1xuICAgICAgdXBkYXRlTmF0aXZlUHJvcGVydGllcyhlbGVtZW50LCBwcm9wZXJ0aWVzKTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbGVtZW50XG4gICAgICovXG4gICAgc3R5bGVFbGVtZW50KGVsZW1lbnQpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby11bnVzZWQtdmFyc1xuICAgICAgY3VzdG9tU3R5bGVJbnRlcmZhY2UucHJvY2Vzc1N0eWxlcygpO1xuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHByb3BlcnRpZXNcbiAgICAgKi9cbiAgICBzdHlsZURvY3VtZW50KHByb3BlcnRpZXMpIHtcbiAgICAgIGN1c3RvbVN0eWxlSW50ZXJmYWNlLnByb2Nlc3NTdHlsZXMoKTtcbiAgICAgIHVwZGF0ZU5hdGl2ZVByb3BlcnRpZXMoZG9jdW1lbnQuYm9keSwgcHJvcGVydGllcyk7XG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxlbWVudFxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBwcm9wZXJ0eVxuICAgICAqIEByZXR1cm4ge3N0cmluZ31cbiAgICAgKi9cbiAgICBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpIHtcbiAgICAgIHJldHVybiBnZXRDb21wdXRlZFN0eWxlVmFsdWUoZWxlbWVudCwgcHJvcGVydHkpO1xuICAgIH0sXG5cbiAgICBmbHVzaEN1c3RvbVN0eWxlcygpIHt9LFxuICAgIG5hdGl2ZUNzczogbmF0aXZlQ3NzVmFyaWFibGVzLFxuICAgIG5hdGl2ZVNoYWRvdzogbmF0aXZlU2hhZG93LFxuICAgIGNzc0J1aWxkOiBjc3NCdWlsZCxcbiAgICBkaXNhYmxlUnVudGltZTogZGlzYWJsZVJ1bnRpbWUsXG4gIH1cbn1cblxud2luZG93LlNoYWR5Q1NTLkN1c3RvbVN0eWxlSW50ZXJmYWNlID0gY3VzdG9tU3R5bGVJbnRlcmZhY2U7IiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJ0B3ZWJjb21wb25lbnRzL3NoYWR5Y3NzL2VudHJ5cG9pbnRzL2N1c3RvbS1zdHlsZS1pbnRlcmZhY2UuanMnO1xuXG5pbXBvcnQgeyBjc3NGcm9tTW9kdWxlcyB9IGZyb20gJy4uL3V0aWxzL3N0eWxlLWdhdGhlci5qcyc7XG5cbmNvbnN0IGF0dHIgPSAnaW5jbHVkZSc7XG5cbmNvbnN0IEN1c3RvbVN0eWxlSW50ZXJmYWNlID0gd2luZG93LlNoYWR5Q1NTLkN1c3RvbVN0eWxlSW50ZXJmYWNlO1xuXG4vKipcbiAqIEN1c3RvbSBlbGVtZW50IGZvciBkZWZpbmluZyBzdHlsZXMgaW4gdGhlIG1haW4gZG9jdW1lbnQgdGhhdCBjYW4gdGFrZVxuICogYWR2YW50YWdlIG9mIFtzaGFkeSBET01dKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3NoYWR5Y3NzKSBzaGltc1xuICogZm9yIHN0eWxlIGVuY2Fwc3VsYXRpb24sIGN1c3RvbSBwcm9wZXJ0aWVzLCBhbmQgY3VzdG9tIG1peGlucy5cbiAqXG4gKiAtIERvY3VtZW50IHN0eWxlcyBkZWZpbmVkIGluIGEgYDxjdXN0b20tc3R5bGU+YCBhcmUgc2hpbW1lZCB0byBlbnN1cmUgdGhleVxuICogICBkbyBub3QgbGVhayBpbnRvIGxvY2FsIERPTSB3aGVuIHJ1bm5pbmcgb24gYnJvd3NlcnMgd2l0aG91dCBuYXRpdmVcbiAqICAgU2hhZG93IERPTS5cbiAqIC0gQ3VzdG9tIHByb3BlcnRpZXMgY2FuIGJlIGRlZmluZWQgaW4gYSBgPGN1c3RvbS1zdHlsZT5gLiBVc2UgdGhlIGBodG1sYCBzZWxlY3RvclxuICogICB0byBkZWZpbmUgY3VzdG9tIHByb3BlcnRpZXMgdGhhdCBhcHBseSB0byBhbGwgY3VzdG9tIGVsZW1lbnRzLlxuICogLSBDdXN0b20gbWl4aW5zIGNhbiBiZSBkZWZpbmVkIGluIGEgYDxjdXN0b20tc3R5bGU+YCwgaWYgeW91IGltcG9ydCB0aGUgb3B0aW9uYWxcbiAqICAgW2FwcGx5IHNoaW1dKGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJjb21wb25lbnRzL3NoYWR5Y3NzI2Fib3V0LWFwcGx5c2hpbSlcbiAqICAgKGBzaGFkeWNzcy9hcHBseS1zaGltLmh0bWxgKS5cbiAqXG4gKiBUbyB1c2U6XG4gKlxuICogLSBJbXBvcnQgYGN1c3RvbS1zdHlsZS5odG1sYC5cbiAqIC0gUGxhY2UgYSBgPGN1c3RvbS1zdHlsZT5gIGVsZW1lbnQgaW4gdGhlIG1haW4gZG9jdW1lbnQsIHdyYXBwaW5nIGFuIGlubGluZSBgPHN0eWxlPmAgdGFnIHRoYXRcbiAqICAgY29udGFpbnMgdGhlIENTUyBydWxlcyB5b3Ugd2FudCB0byBzaGltLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICpcbiAqIGBgYGh0bWxcbiAqIDwhLS0gaW1wb3J0IGFwcGx5IHNoaW0tLW9ubHkgcmVxdWlyZWQgaWYgdXNpbmcgbWl4aW5zIC0tPlxuICogPGxpbmsgcmVsPVwiaW1wb3J0XCIgaHJlZj1cImJvd2VyX2NvbXBvbmVudHMvc2hhZHljc3MvYXBwbHktc2hpbS5odG1sXCI+XG4gKiA8IS0tIGltcG9ydCBjdXN0b20tc3R5bGUgZWxlbWVudCAtLT5cbiAqIDxsaW5rIHJlbD1cImltcG9ydFwiIGhyZWY9XCJib3dlcl9jb21wb25lbnRzL3BvbHltZXIvbGliL2VsZW1lbnRzL2N1c3RvbS1zdHlsZS5odG1sXCI+XG4gKlxuICogPGN1c3RvbS1zdHlsZT5cbiAqICAgPHN0eWxlPlxuICogICAgIGh0bWwge1xuICogICAgICAgLS1jdXN0b20tY29sb3I6IGJsdWU7XG4gKiAgICAgICAtLWN1c3RvbS1taXhpbjoge1xuICogICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAqICAgICAgICAgY29sb3I6IHJlZDtcbiAqICAgICAgIH07XG4gKiAgICAgfVxuICogICA8L3N0eWxlPlxuICogPC9jdXN0b20tc3R5bGU+XG4gKiBgYGBcbiAqXG4gKiBAY3VzdG9tRWxlbWVudFxuICogQGV4dGVuZHMgSFRNTEVsZW1lbnRcbiAqIEBzdW1tYXJ5IEN1c3RvbSBlbGVtZW50IGZvciBkZWZpbmluZyBzdHlsZXMgaW4gdGhlIG1haW4gZG9jdW1lbnQgdGhhdCBjYW5cbiAqICAgdGFrZSBhZHZhbnRhZ2Ugb2YgUG9seW1lcidzIHN0eWxlIHNjb3BpbmcgYW5kIGN1c3RvbSBwcm9wZXJ0aWVzIHNoaW1zLlxuICovXG5leHBvcnQgY2xhc3MgQ3VzdG9tU3R5bGUgZXh0ZW5kcyBIVE1MRWxlbWVudCB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5fc3R5bGUgPSBudWxsO1xuICAgIEN1c3RvbVN0eWxlSW50ZXJmYWNlLmFkZEN1c3RvbVN0eWxlKHRoaXMpO1xuICB9XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBsaWdodC1ET00gYDxzdHlsZT5gIGNoaWxkIHRoaXMgZWxlbWVudCB3cmFwcy4gIFVwb24gZmlyc3RcbiAgICogY2FsbCBhbnkgc3R5bGUgbW9kdWxlcyByZWZlcmVuY2VkIHZpYSB0aGUgYGluY2x1ZGVgIGF0dHJpYnV0ZSB3aWxsIGJlXG4gICAqIGNvbmNhdGVuYXRlZCB0byB0aGlzIGVsZW1lbnQncyBgPHN0eWxlPmAuXG4gICAqXG4gICAqIEBleHBvcnRcbiAgICogQHJldHVybiB7SFRNTFN0eWxlRWxlbWVudH0gVGhpcyBlbGVtZW50J3MgbGlnaHQtRE9NIGA8c3R5bGU+YFxuICAgKi9cbiAgZ2V0U3R5bGUoKSB7XG4gICAgaWYgKHRoaXMuX3N0eWxlKSB7XG4gICAgICByZXR1cm4gdGhpcy5fc3R5bGU7XG4gICAgfVxuICAgIGNvbnN0IHN0eWxlID0gLyoqIEB0eXBlIHtIVE1MU3R5bGVFbGVtZW50fSAqLyh0aGlzLnF1ZXJ5U2VsZWN0b3IoJ3N0eWxlJykpO1xuICAgIGlmICghc3R5bGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICB0aGlzLl9zdHlsZSA9IHN0eWxlO1xuICAgIGNvbnN0IGluY2x1ZGUgPSBzdHlsZS5nZXRBdHRyaWJ1dGUoYXR0cik7XG4gICAgaWYgKGluY2x1ZGUpIHtcbiAgICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgIC8qKiBAc3VwcHJlc3Mge2RlcHJlY2F0ZWR9ICovXG4gICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGNzc0Zyb21Nb2R1bGVzKGluY2x1ZGUpICsgc3R5bGUudGV4dENvbnRlbnQ7XG4gICAgfVxuICAgIC8qXG4gICAgSFRNTCBJbXBvcnRzIHN0eWxpbmcgdGhlIG1haW4gZG9jdW1lbnQgYXJlIGRlcHJlY2F0ZWQgaW4gQ2hyb21lXG4gICAgaHR0cHM6Ly9jcmJ1Zy5jb20vNTIzOTUyXG5cbiAgICBJZiB0aGlzIGVsZW1lbnQgaXMgbm90IGluIHRoZSBtYWluIGRvY3VtZW50LCB0aGVuIGl0IG11c3QgYmUgaW4gYW4gSFRNTCBJbXBvcnQgZG9jdW1lbnQuXG4gICAgSW4gdGhhdCBjYXNlLCBtb3ZlIHRoZSBjdXN0b20gc3R5bGUgdG8gdGhlIG1haW4gZG9jdW1lbnQuXG5cbiAgICBUaGUgb3JkZXJpbmcgb2YgYDxjdXN0b20tc3R5bGU+YCBzaG91bGQgc3RheSB0aGUgc2FtZSBhcyB3aGVuIGxvYWRlZCBieSBIVE1MIEltcG9ydHMsIGJ1dCB0aGVyZSBtYXkgYmUgb2RkXG4gICAgY2FzZXMgb2Ygb3JkZXJpbmcgdy5yLnQgdGhlIG1haW4gZG9jdW1lbnQgc3R5bGVzLlxuICAgICovXG4gICAgaWYgKHRoaXMub3duZXJEb2N1bWVudCAhPT0gd2luZG93LmRvY3VtZW50KSB7XG4gICAgICB3aW5kb3cuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0aGlzKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX3N0eWxlO1xuICB9XG59XG5cbndpbmRvdy5jdXN0b21FbGVtZW50cy5kZWZpbmUoJ2N1c3RvbS1zdHlsZScsIEN1c3RvbVN0eWxlKTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTcgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcblRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbnN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0IHsgTXV0YWJsZURhdGEgfSBmcm9tICcuLi9taXhpbnMvbXV0YWJsZS1kYXRhLmpzJztcblxubGV0IG11dGFibGVQcm9wZXJ0eUNoYW5nZTtcbi8qKiBAc3VwcHJlc3Mge21pc3NpbmdQcm9wZXJ0aWVzfSAqL1xuKCgpID0+IHtcbiAgbXV0YWJsZVByb3BlcnR5Q2hhbmdlID0gTXV0YWJsZURhdGEuX211dGFibGVQcm9wZXJ0eUNoYW5nZTtcbn0pKCk7XG5cbi8qKlxuICogTGVnYWN5IGVsZW1lbnQgYmVoYXZpb3IgdG8gc2tpcCBzdHJpY3QgZGlydHktY2hlY2tpbmcgZm9yIG9iamVjdHMgYW5kIGFycmF5cyxcbiAqIChhbHdheXMgY29uc2lkZXIgdGhlbSB0byBiZSBcImRpcnR5XCIpIGZvciB1c2Ugb24gbGVnYWN5IEFQSSBQb2x5bWVyIGVsZW1lbnRzLlxuICpcbiAqIEJ5IGRlZmF1bHQsIGBQb2x5bWVyLlByb3BlcnR5RWZmZWN0c2AgcGVyZm9ybXMgc3RyaWN0IGRpcnR5IGNoZWNraW5nIG9uXG4gKiBvYmplY3RzLCB3aGljaCBtZWFucyB0aGF0IGFueSBkZWVwIG1vZGlmaWNhdGlvbnMgdG8gYW4gb2JqZWN0IG9yIGFycmF5IHdpbGxcbiAqIG5vdCBiZSBwcm9wYWdhdGVkIHVubGVzcyBcImltbXV0YWJsZVwiIGRhdGEgcGF0dGVybnMgYXJlIHVzZWQgKGkuZS4gYWxsIG9iamVjdFxuICogcmVmZXJlbmNlcyBmcm9tIHRoZSByb290IHRvIHRoZSBtdXRhdGlvbiB3ZXJlIGNoYW5nZWQpLlxuICpcbiAqIFBvbHltZXIgYWxzbyBwcm92aWRlcyBhIHByb3ByaWV0YXJ5IGRhdGEgbXV0YXRpb24gYW5kIHBhdGggbm90aWZpY2F0aW9uIEFQSVxuICogKGUuZy4gYG5vdGlmeVBhdGhgLCBgc2V0YCwgYW5kIGFycmF5IG11dGF0aW9uIEFQSSdzKSB0aGF0IGFsbG93IGVmZmljaWVudFxuICogbXV0YXRpb24gYW5kIG5vdGlmaWNhdGlvbiBvZiBkZWVwIGNoYW5nZXMgaW4gYW4gb2JqZWN0IGdyYXBoIHRvIGFsbCBlbGVtZW50c1xuICogYm91bmQgdG8gdGhlIHNhbWUgb2JqZWN0IGdyYXBoLlxuICpcbiAqIEluIGNhc2VzIHdoZXJlIG5laXRoZXIgaW1tdXRhYmxlIHBhdHRlcm5zIG5vciB0aGUgZGF0YSBtdXRhdGlvbiBBUEkgY2FuIGJlXG4gKiB1c2VkLCBhcHBseWluZyB0aGlzIG1peGluIHdpbGwgY2F1c2UgUG9seW1lciB0byBza2lwIGRpcnR5IGNoZWNraW5nIGZvclxuICogb2JqZWN0cyBhbmQgYXJyYXlzIChhbHdheXMgY29uc2lkZXIgdGhlbSB0byBiZSBcImRpcnR5XCIpLiAgVGhpcyBhbGxvd3MgYVxuICogdXNlciB0byBtYWtlIGEgZGVlcCBtb2RpZmljYXRpb24gdG8gYSBib3VuZCBvYmplY3QgZ3JhcGgsIGFuZCB0aGVuIGVpdGhlclxuICogc2ltcGx5IHJlLXNldCB0aGUgb2JqZWN0IChlLmcuIGB0aGlzLml0ZW1zID0gdGhpcy5pdGVtc2ApIG9yIGNhbGwgYG5vdGlmeVBhdGhgXG4gKiAoZS5nLiBgdGhpcy5ub3RpZnlQYXRoKCdpdGVtcycpYCkgdG8gdXBkYXRlIHRoZSB0cmVlLiAgTm90ZSB0aGF0IGFsbFxuICogZWxlbWVudHMgdGhhdCB3aXNoIHRvIGJlIHVwZGF0ZWQgYmFzZWQgb24gZGVlcCBtdXRhdGlvbnMgbXVzdCBhcHBseSB0aGlzXG4gKiBtaXhpbiBvciBvdGhlcndpc2Ugc2tpcCBzdHJpY3QgZGlydHkgY2hlY2tpbmcgZm9yIG9iamVjdHMvYXJyYXlzLlxuICogU3BlY2lmaWNhbGx5LCBhbnkgZWxlbWVudHMgaW4gdGhlIGJpbmRpbmcgdHJlZSBiZXR3ZWVuIHRoZSBzb3VyY2Ugb2YgYVxuICogbXV0YXRpb24gYW5kIHRoZSBjb25zdW1wdGlvbiBvZiBpdCBtdXN0IGFwcGx5IHRoaXMgYmVoYXZpb3Igb3IgZW5hYmxlIHRoZVxuICogYFBvbHltZXIuT3B0aW9uYWxNdXRhYmxlRGF0YUJlaGF2aW9yYC5cbiAqXG4gKiBJbiBvcmRlciB0byBtYWtlIHRoZSBkaXJ0eSBjaGVjayBzdHJhdGVneSBjb25maWd1cmFibGUsIHNlZVxuICogYFBvbHltZXIuT3B0aW9uYWxNdXRhYmxlRGF0YUJlaGF2aW9yYC5cbiAqXG4gKiBOb3RlLCB0aGUgcGVyZm9ybWFuY2UgY2hhcmFjdGVyaXN0aWNzIG9mIHByb3BhZ2F0aW5nIGxhcmdlIG9iamVjdCBncmFwaHNcbiAqIHdpbGwgYmUgd29yc2UgYXMgb3Bwb3NlZCB0byB1c2luZyBzdHJpY3QgZGlydHkgY2hlY2tpbmcgd2l0aCBpbW11dGFibGVcbiAqIHBhdHRlcm5zIG9yIFBvbHltZXIncyBwYXRoIG5vdGlmaWNhdGlvbiBBUEkuXG4gKlxuICogQHBvbHltZXJCZWhhdmlvclxuICogQHN1bW1hcnkgQmVoYXZpb3IgdG8gc2tpcCBzdHJpY3QgZGlydHktY2hlY2tpbmcgZm9yIG9iamVjdHMgYW5kXG4gKiAgIGFycmF5c1xuICovXG5leHBvcnQgY29uc3QgTXV0YWJsZURhdGFCZWhhdmlvciA9IHtcblxuICAvKipcbiAgICogT3ZlcnJpZGVzIGBQb2x5bWVyLlByb3BlcnR5RWZmZWN0c2AgdG8gcHJvdmlkZSBvcHRpb24gZm9yIHNraXBwaW5nXG4gICAqIHN0cmljdCBlcXVhbGl0eSBjaGVja2luZyBmb3IgT2JqZWN0cyBhbmQgQXJyYXlzLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCBwdWxscyB0aGUgdmFsdWUgdG8gZGlydHkgY2hlY2sgYWdhaW5zdCBmcm9tIHRoZSBgX19kYXRhVGVtcGBcbiAgICogY2FjaGUgKHJhdGhlciB0aGFuIHRoZSBub3JtYWwgYF9fZGF0YWAgY2FjaGUpIGZvciBPYmplY3RzLiAgU2luY2UgdGhlIHRlbXBcbiAgICogY2FjaGUgaXMgY2xlYXJlZCBhdCB0aGUgZW5kIG9mIGEgdHVybiwgdGhpcyBpbXBsZW1lbnRhdGlvbiBhbGxvd3NcbiAgICogc2lkZS1lZmZlY3RzIG9mIGRlZXAgb2JqZWN0IGNoYW5nZXMgdG8gYmUgcHJvY2Vzc2VkIGJ5IHJlLXNldHRpbmcgdGhlXG4gICAqIHNhbWUgb2JqZWN0ICh1c2luZyB0aGUgdGVtcCBjYWNoZSBhcyBhbiBpbi10dXJuIGJhY2tzdG9wIHRvIHByZXZlbnRcbiAgICogY3ljbGVzIGR1ZSB0byAyLXdheSBub3RpZmljYXRpb24pLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gcHJvcGVydHkgUHJvcGVydHkgbmFtZVxuICAgKiBAcGFyYW0geyp9IHZhbHVlIE5ldyBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAcGFyYW0geyp9IG9sZCBQcmV2aW91cyBwcm9wZXJ0eSB2YWx1ZVxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBwcm9wZXJ0eSBzaG91bGQgYmUgY29uc2lkZXJlZCBhIGNoYW5nZVxuICAgKiBAcHJvdGVjdGVkXG4gICAqIEBvdmVycmlkZVxuICAgKi9cbiAgX3Nob3VsZFByb3BlcnR5Q2hhbmdlKHByb3BlcnR5LCB2YWx1ZSwgb2xkKSB7XG4gICAgcmV0dXJuIG11dGFibGVQcm9wZXJ0eUNoYW5nZSh0aGlzLCBwcm9wZXJ0eSwgdmFsdWUsIG9sZCwgdHJ1ZSk7XG4gIH1cbn07XG5cbi8qKlxuICogTGVnYWN5IGVsZW1lbnQgYmVoYXZpb3IgdG8gYWRkIHRoZSBvcHRpb25hbCBhYmlsaXR5IHRvIHNraXAgc3RyaWN0XG4gKiBkaXJ0eS1jaGVja2luZyBmb3Igb2JqZWN0cyBhbmQgYXJyYXlzIChhbHdheXMgY29uc2lkZXIgdGhlbSB0byBiZVxuICogXCJkaXJ0eVwiKSBieSBzZXR0aW5nIGEgYG11dGFibGUtZGF0YWAgYXR0cmlidXRlIG9uIGFuIGVsZW1lbnQgaW5zdGFuY2UuXG4gKlxuICogQnkgZGVmYXVsdCwgYFBvbHltZXIuUHJvcGVydHlFZmZlY3RzYCBwZXJmb3JtcyBzdHJpY3QgZGlydHkgY2hlY2tpbmcgb25cbiAqIG9iamVjdHMsIHdoaWNoIG1lYW5zIHRoYXQgYW55IGRlZXAgbW9kaWZpY2F0aW9ucyB0byBhbiBvYmplY3Qgb3IgYXJyYXkgd2lsbFxuICogbm90IGJlIHByb3BhZ2F0ZWQgdW5sZXNzIFwiaW1tdXRhYmxlXCIgZGF0YSBwYXR0ZXJucyBhcmUgdXNlZCAoaS5lLiBhbGwgb2JqZWN0XG4gKiByZWZlcmVuY2VzIGZyb20gdGhlIHJvb3QgdG8gdGhlIG11dGF0aW9uIHdlcmUgY2hhbmdlZCkuXG4gKlxuICogUG9seW1lciBhbHNvIHByb3ZpZGVzIGEgcHJvcHJpZXRhcnkgZGF0YSBtdXRhdGlvbiBhbmQgcGF0aCBub3RpZmljYXRpb24gQVBJXG4gKiAoZS5nLiBgbm90aWZ5UGF0aGAsIGBzZXRgLCBhbmQgYXJyYXkgbXV0YXRpb24gQVBJJ3MpIHRoYXQgYWxsb3cgZWZmaWNpZW50XG4gKiBtdXRhdGlvbiBhbmQgbm90aWZpY2F0aW9uIG9mIGRlZXAgY2hhbmdlcyBpbiBhbiBvYmplY3QgZ3JhcGggdG8gYWxsIGVsZW1lbnRzXG4gKiBib3VuZCB0byB0aGUgc2FtZSBvYmplY3QgZ3JhcGguXG4gKlxuICogSW4gY2FzZXMgd2hlcmUgbmVpdGhlciBpbW11dGFibGUgcGF0dGVybnMgbm9yIHRoZSBkYXRhIG11dGF0aW9uIEFQSSBjYW4gYmVcbiAqIHVzZWQsIGFwcGx5aW5nIHRoaXMgbWl4aW4gd2lsbCBhbGxvdyBQb2x5bWVyIHRvIHNraXAgZGlydHkgY2hlY2tpbmcgZm9yXG4gKiBvYmplY3RzIGFuZCBhcnJheXMgKGFsd2F5cyBjb25zaWRlciB0aGVtIHRvIGJlIFwiZGlydHlcIikuICBUaGlzIGFsbG93cyBhXG4gKiB1c2VyIHRvIG1ha2UgYSBkZWVwIG1vZGlmaWNhdGlvbiB0byBhIGJvdW5kIG9iamVjdCBncmFwaCwgYW5kIHRoZW4gZWl0aGVyXG4gKiBzaW1wbHkgcmUtc2V0IHRoZSBvYmplY3QgKGUuZy4gYHRoaXMuaXRlbXMgPSB0aGlzLml0ZW1zYCkgb3IgY2FsbCBgbm90aWZ5UGF0aGBcbiAqIChlLmcuIGB0aGlzLm5vdGlmeVBhdGgoJ2l0ZW1zJylgKSB0byB1cGRhdGUgdGhlIHRyZWUuICBOb3RlIHRoYXQgYWxsXG4gKiBlbGVtZW50cyB0aGF0IHdpc2ggdG8gYmUgdXBkYXRlZCBiYXNlZCBvbiBkZWVwIG11dGF0aW9ucyBtdXN0IGFwcGx5IHRoaXNcbiAqIG1peGluIG9yIG90aGVyd2lzZSBza2lwIHN0cmljdCBkaXJ0eSBjaGVja2luZyBmb3Igb2JqZWN0cy9hcnJheXMuXG4gKiBTcGVjaWZpY2FsbHksIGFueSBlbGVtZW50cyBpbiB0aGUgYmluZGluZyB0cmVlIGJldHdlZW4gdGhlIHNvdXJjZSBvZiBhXG4gKiBtdXRhdGlvbiBhbmQgdGhlIGNvbnN1bXB0aW9uIG9mIGl0IG11c3QgZW5hYmxlIHRoaXMgYmVoYXZpb3Igb3IgYXBwbHkgdGhlXG4gKiBgUG9seW1lci5PcHRpb25hbE11dGFibGVEYXRhQmVoYXZpb3JgLlxuICpcbiAqIFdoaWxlIHRoaXMgYmVoYXZpb3IgYWRkcyB0aGUgYWJpbGl0eSB0byBmb3JnbyBPYmplY3QvQXJyYXkgZGlydHkgY2hlY2tpbmcsXG4gKiB0aGUgYG11dGFibGVEYXRhYCBmbGFnIGRlZmF1bHRzIHRvIGZhbHNlIGFuZCBtdXN0IGJlIHNldCBvbiB0aGUgaW5zdGFuY2UuXG4gKlxuICogTm90ZSwgdGhlIHBlcmZvcm1hbmNlIGNoYXJhY3RlcmlzdGljcyBvZiBwcm9wYWdhdGluZyBsYXJnZSBvYmplY3QgZ3JhcGhzXG4gKiB3aWxsIGJlIHdvcnNlIGJ5IHJlbHlpbmcgb24gYG11dGFibGVEYXRhOiB0cnVlYCBhcyBvcHBvc2VkIHRvIHVzaW5nXG4gKiBzdHJpY3QgZGlydHkgY2hlY2tpbmcgd2l0aCBpbW11dGFibGUgcGF0dGVybnMgb3IgUG9seW1lcidzIHBhdGggbm90aWZpY2F0aW9uXG4gKiBBUEkuXG4gKlxuICogQHBvbHltZXJCZWhhdmlvclxuICogQHN1bW1hcnkgQmVoYXZpb3IgdG8gb3B0aW9uYWxseSBza2lwIHN0cmljdCBkaXJ0eS1jaGVja2luZyBmb3Igb2JqZWN0cyBhbmRcbiAqICAgYXJyYXlzXG4gKi9cbmV4cG9ydCBjb25zdCBPcHRpb25hbE11dGFibGVEYXRhQmVoYXZpb3IgPSB7XG5cbiAgcHJvcGVydGllczoge1xuICAgIC8qKlxuICAgICAqIEluc3RhbmNlLWxldmVsIGZsYWcgZm9yIGNvbmZpZ3VyaW5nIHRoZSBkaXJ0eS1jaGVja2luZyBzdHJhdGVneVxuICAgICAqIGZvciB0aGlzIGVsZW1lbnQuICBXaGVuIHRydWUsIE9iamVjdHMgYW5kIEFycmF5cyB3aWxsIHNraXAgZGlydHlcbiAgICAgKiBjaGVja2luZywgb3RoZXJ3aXNlIHN0cmljdCBlcXVhbGl0eSBjaGVja2luZyB3aWxsIGJlIHVzZWQuXG4gICAgICovXG4gICAgbXV0YWJsZURhdGE6IEJvb2xlYW5cbiAgfSxcblxuICAvKipcbiAgICogT3ZlcnJpZGVzIGBQb2x5bWVyLlByb3BlcnR5RWZmZWN0c2AgdG8gc2tpcCBzdHJpY3QgZXF1YWxpdHkgY2hlY2tpbmdcbiAgICogZm9yIE9iamVjdHMgYW5kIEFycmF5cy5cbiAgICpcbiAgICogUHVsbHMgdGhlIHZhbHVlIHRvIGRpcnR5IGNoZWNrIGFnYWluc3QgZnJvbSB0aGUgYF9fZGF0YVRlbXBgIGNhY2hlXG4gICAqIChyYXRoZXIgdGhhbiB0aGUgbm9ybWFsIGBfX2RhdGFgIGNhY2hlKSBmb3IgT2JqZWN0cy4gIFNpbmNlIHRoZSB0ZW1wXG4gICAqIGNhY2hlIGlzIGNsZWFyZWQgYXQgdGhlIGVuZCBvZiBhIHR1cm4sIHRoaXMgaW1wbGVtZW50YXRpb24gYWxsb3dzXG4gICAqIHNpZGUtZWZmZWN0cyBvZiBkZWVwIG9iamVjdCBjaGFuZ2VzIHRvIGJlIHByb2Nlc3NlZCBieSByZS1zZXR0aW5nIHRoZVxuICAgKiBzYW1lIG9iamVjdCAodXNpbmcgdGhlIHRlbXAgY2FjaGUgYXMgYW4gaW4tdHVybiBiYWNrc3RvcCB0byBwcmV2ZW50XG4gICAqIGN5Y2xlcyBkdWUgdG8gMi13YXkgbm90aWZpY2F0aW9uKS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IHByb3BlcnR5IFByb3BlcnR5IG5hbWVcbiAgICogQHBhcmFtIHsqfSB2YWx1ZSBOZXcgcHJvcGVydHkgdmFsdWVcbiAgICogQHBhcmFtIHsqfSBvbGQgUHJldmlvdXMgcHJvcGVydHkgdmFsdWVcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgcHJvcGVydHkgc2hvdWxkIGJlIGNvbnNpZGVyZWQgYSBjaGFuZ2VcbiAgICogQHByb3RlY3RlZFxuICAgKiBAb3ZlcnJpZGVcbiAgICovXG4gIF9zaG91bGRQcm9wZXJ0eUNoYW5nZShwcm9wZXJ0eSwgdmFsdWUsIG9sZCkge1xuICAgIHJldHVybiBtdXRhYmxlUHJvcGVydHlDaGFuZ2UodGhpcywgcHJvcGVydHksIHZhbHVlLCBvbGQsIHRoaXMubXV0YWJsZURhdGEpO1xuICB9XG59O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNyBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0XG5UaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dFxuVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0XG5Db2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhcyBwYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzb1xuc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudCBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbmltcG9ydCB7IExlZ2FjeUVsZW1lbnRNaXhpbiB9IGZyb20gJy4vbGliL2xlZ2FjeS9sZWdhY3ktZWxlbWVudC1taXhpbi5qcyc7XG5leHBvcnQgeyBQb2x5bWVyIH0gZnJvbSAgJy4vbGliL2xlZ2FjeS9wb2x5bWVyLWZuLmpzJztcbi8qIHRlbXBsYXRlIGVsZW1lbnRzICovXG5pbXBvcnQgJy4vbGliL2xlZ2FjeS90ZW1wbGF0aXplci1iZWhhdmlvci5qcyc7XG5pbXBvcnQgJy4vbGliL2VsZW1lbnRzL2RvbS1iaW5kLmpzJztcbmltcG9ydCAnLi9saWIvZWxlbWVudHMvZG9tLXJlcGVhdC5qcyc7XG5pbXBvcnQgJy4vbGliL2VsZW1lbnRzL2RvbS1pZi5qcyc7XG5pbXBvcnQgJy4vbGliL2VsZW1lbnRzL2FycmF5LXNlbGVjdG9yLmpzJztcbi8qIGN1c3RvbS1zdHlsZSAqL1xuaW1wb3J0ICcuL2xpYi9lbGVtZW50cy9jdXN0b20tc3R5bGUuanMnO1xuLyogYmMgYmVoYXZpb3JzICovXG5pbXBvcnQgJy4vbGliL2xlZ2FjeS9tdXRhYmxlLWRhdGEtYmVoYXZpb3IuanMnO1xuLyogaW1wb3J0IGh0bWwtdGFnIHRvIGV4cG9ydCBodG1sICovXG5leHBvcnQgeyBodG1sIH0gZnJvbSAnLi9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuXG4vLyBiY1xuZXhwb3J0IGNvbnN0IEJhc2UgPSBMZWdhY3lFbGVtZW50TWl4aW4oSFRNTEVsZW1lbnQpLnByb3RvdHlwZTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5cbi8qKlxuICogQ2hyb21lIHVzZXMgYW4gb2xkZXIgdmVyc2lvbiBvZiBET00gTGV2ZWwgMyBLZXlib2FyZCBFdmVudHNcbiAqXG4gKiBNb3N0IGtleXMgYXJlIGxhYmVsZWQgYXMgdGV4dCwgYnV0IHNvbWUgYXJlIFVuaWNvZGUgY29kZXBvaW50cy5cbiAqIFZhbHVlcyB0YWtlbiBmcm9tOlxuICogaHR0cDovL3d3dy53My5vcmcvVFIvMjAwNy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAwNzEyMjEva2V5c2V0Lmh0bWwjS2V5U2V0LVNldFxuICovXG52YXIgS0VZX0lERU5USUZJRVIgPSB7XG4gICdVKzAwMDgnOiAnYmFja3NwYWNlJyxcbiAgJ1UrMDAwOSc6ICd0YWInLFxuICAnVSswMDFCJzogJ2VzYycsXG4gICdVKzAwMjAnOiAnc3BhY2UnLFxuICAnVSswMDdGJzogJ2RlbCdcbn07XG5cbi8qKlxuICogU3BlY2lhbCB0YWJsZSBmb3IgS2V5Ym9hcmRFdmVudC5rZXlDb2RlLlxuICogS2V5Ym9hcmRFdmVudC5rZXlJZGVudGlmaWVyIGlzIGJldHRlciwgYW5kIEtleUJvYXJkRXZlbnQua2V5IGlzIGV2ZW4gYmV0dGVyXG4gKiB0aGFuIHRoYXQuXG4gKlxuICogVmFsdWVzIGZyb206XG4gKiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvS2V5Ym9hcmRFdmVudC5rZXlDb2RlI1ZhbHVlX29mX2tleUNvZGVcbiAqL1xudmFyIEtFWV9DT0RFID0ge1xuICA4OiAnYmFja3NwYWNlJyxcbiAgOTogJ3RhYicsXG4gIDEzOiAnZW50ZXInLFxuICAyNzogJ2VzYycsXG4gIDMzOiAncGFnZXVwJyxcbiAgMzQ6ICdwYWdlZG93bicsXG4gIDM1OiAnZW5kJyxcbiAgMzY6ICdob21lJyxcbiAgMzI6ICdzcGFjZScsXG4gIDM3OiAnbGVmdCcsXG4gIDM4OiAndXAnLFxuICAzOTogJ3JpZ2h0JyxcbiAgNDA6ICdkb3duJyxcbiAgNDY6ICdkZWwnLFxuICAxMDY6ICcqJ1xufTtcblxuLyoqXG4gKiBNT0RJRklFUl9LRVlTIG1hcHMgdGhlIHNob3J0IG5hbWUgZm9yIG1vZGlmaWVyIGtleXMgdXNlZCBpbiBhIGtleVxuICogY29tYm8gc3RyaW5nIHRvIHRoZSBwcm9wZXJ0eSBuYW1lIHRoYXQgcmVmZXJlbmNlcyB0aG9zZSBzYW1lIGtleXNcbiAqIGluIGEgS2V5Ym9hcmRFdmVudCBpbnN0YW5jZS5cbiAqL1xudmFyIE1PRElGSUVSX0tFWVMgPSB7XG4gICdzaGlmdCc6ICdzaGlmdEtleScsXG4gICdjdHJsJzogJ2N0cmxLZXknLFxuICAnYWx0JzogJ2FsdEtleScsXG4gICdtZXRhJzogJ21ldGFLZXknXG59O1xuXG4vKipcbiAqIEtleWJvYXJkRXZlbnQua2V5IGlzIG1vc3RseSByZXByZXNlbnRlZCBieSBwcmludGFibGUgY2hhcmFjdGVyIG1hZGUgYnlcbiAqIHRoZSBrZXlib2FyZCwgd2l0aCB1bnByaW50YWJsZSBrZXlzIGxhYmVsZWQgbmljZWx5LlxuICpcbiAqIEhvd2V2ZXIsIG9uIE9TIFgsIEFsdCtjaGFyIGNhbiBtYWtlIGEgVW5pY29kZSBjaGFyYWN0ZXIgdGhhdCBmb2xsb3dzIGFuXG4gKiBBcHBsZS1zcGVjaWZpYyBtYXBwaW5nLiBJbiB0aGlzIGNhc2UsIHdlIGZhbGwgYmFjayB0byAua2V5Q29kZS5cbiAqL1xudmFyIEtFWV9DSEFSID0gL1thLXowLTkqXS87XG5cbi8qKlxuICogTWF0Y2hlcyBhIGtleUlkZW50aWZpZXIgc3RyaW5nLlxuICovXG52YXIgSURFTlRfQ0hBUiA9IC9VXFwrLztcblxuLyoqXG4gKiBNYXRjaGVzIGFycm93IGtleXMgaW4gR2Vja28gMjcuMCtcbiAqL1xudmFyIEFSUk9XX0tFWSA9IC9eYXJyb3cvO1xuXG4vKipcbiAqIE1hdGNoZXMgc3BhY2Uga2V5cyBldmVyeXdoZXJlIChub3RhYmx5IGluY2x1ZGluZyBJRTEwJ3MgZXhjZXB0aW9uYWwgbmFtZVxuICogYHNwYWNlYmFyYCkuXG4gKi9cbnZhciBTUEFDRV9LRVkgPSAvXnNwYWNlKGJhcik/LztcblxuLyoqXG4gKiBNYXRjaGVzIEVTQyBrZXkuXG4gKlxuICogVmFsdWUgZnJvbTogaHR0cDovL3czYy5naXRodWIuaW8vdWlldmVudHMta2V5LyNrZXktRXNjYXBlXG4gKi9cbnZhciBFU0NfS0VZID0gL15lc2NhcGUkLztcblxuLyoqXG4gKiBUcmFuc2Zvcm1zIHRoZSBrZXkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBLZXlCb2FyZEV2ZW50LmtleVxuICogQHBhcmFtIHtCb29sZWFufSBbbm9TcGVjaWFsQ2hhcnNdIExpbWl0cyB0aGUgdHJhbnNmb3JtYXRpb24gdG9cbiAqIGFscGhhLW51bWVyaWMgY2hhcmFjdGVycy5cbiAqL1xuZnVuY3Rpb24gdHJhbnNmb3JtS2V5KGtleSwgbm9TcGVjaWFsQ2hhcnMpIHtcbiAgdmFyIHZhbGlkS2V5ID0gJyc7XG4gIGlmIChrZXkpIHtcbiAgICB2YXIgbEtleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsS2V5ID09PSAnICcgfHwgU1BBQ0VfS0VZLnRlc3QobEtleSkpIHtcbiAgICAgIHZhbGlkS2V5ID0gJ3NwYWNlJztcbiAgICB9IGVsc2UgaWYgKEVTQ19LRVkudGVzdChsS2V5KSkge1xuICAgICAgdmFsaWRLZXkgPSAnZXNjJztcbiAgICB9IGVsc2UgaWYgKGxLZXkubGVuZ3RoID09IDEpIHtcbiAgICAgIGlmICghbm9TcGVjaWFsQ2hhcnMgfHwgS0VZX0NIQVIudGVzdChsS2V5KSkge1xuICAgICAgICB2YWxpZEtleSA9IGxLZXk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChBUlJPV19LRVkudGVzdChsS2V5KSkge1xuICAgICAgdmFsaWRLZXkgPSBsS2V5LnJlcGxhY2UoJ2Fycm93JywgJycpO1xuICAgIH0gZWxzZSBpZiAobEtleSA9PSAnbXVsdGlwbHknKSB7XG4gICAgICAvLyBudW1wYWQgJyonIGNhbiBtYXAgdG8gTXVsdGlwbHkgb24gSUUvV2luZG93c1xuICAgICAgdmFsaWRLZXkgPSAnKic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbGlkS2V5ID0gbEtleTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbGlkS2V5O1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1LZXlJZGVudGlmaWVyKGtleUlkZW50KSB7XG4gIHZhciB2YWxpZEtleSA9ICcnO1xuICBpZiAoa2V5SWRlbnQpIHtcbiAgICBpZiAoa2V5SWRlbnQgaW4gS0VZX0lERU5USUZJRVIpIHtcbiAgICAgIHZhbGlkS2V5ID0gS0VZX0lERU5USUZJRVJba2V5SWRlbnRdO1xuICAgIH0gZWxzZSBpZiAoSURFTlRfQ0hBUi50ZXN0KGtleUlkZW50KSkge1xuICAgICAga2V5SWRlbnQgPSBwYXJzZUludChrZXlJZGVudC5yZXBsYWNlKCdVKycsICcweCcpLCAxNik7XG4gICAgICB2YWxpZEtleSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoa2V5SWRlbnQpLnRvTG93ZXJDYXNlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhbGlkS2V5ID0ga2V5SWRlbnQudG9Mb3dlckNhc2UoKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbGlkS2V5O1xufVxuXG5mdW5jdGlvbiB0cmFuc2Zvcm1LZXlDb2RlKGtleUNvZGUpIHtcbiAgdmFyIHZhbGlkS2V5ID0gJyc7XG4gIGlmIChOdW1iZXIoa2V5Q29kZSkpIHtcbiAgICBpZiAoa2V5Q29kZSA+PSA2NSAmJiBrZXlDb2RlIDw9IDkwKSB7XG4gICAgICAvLyBhc2NpaSBhLXpcbiAgICAgIC8vIGxvd2VyY2FzZSBpcyAzMiBvZmZzZXQgZnJvbSB1cHBlcmNhc2VcbiAgICAgIHZhbGlkS2V5ID0gU3RyaW5nLmZyb21DaGFyQ29kZSgzMiArIGtleUNvZGUpO1xuICAgIH0gZWxzZSBpZiAoa2V5Q29kZSA+PSAxMTIgJiYga2V5Q29kZSA8PSAxMjMpIHtcbiAgICAgIC8vIGZ1bmN0aW9uIGtleXMgZjEtZjEyXG4gICAgICB2YWxpZEtleSA9ICdmJyArIChrZXlDb2RlIC0gMTEyICsgMSk7XG4gICAgfSBlbHNlIGlmIChrZXlDb2RlID49IDQ4ICYmIGtleUNvZGUgPD0gNTcpIHtcbiAgICAgIC8vIHRvcCAwLTkga2V5c1xuICAgICAgdmFsaWRLZXkgPSBTdHJpbmcoa2V5Q29kZSAtIDQ4KTtcbiAgICB9IGVsc2UgaWYgKGtleUNvZGUgPj0gOTYgJiYga2V5Q29kZSA8PSAxMDUpIHtcbiAgICAgIC8vIG51bSBwYWQgMC05XG4gICAgICB2YWxpZEtleSA9IFN0cmluZyhrZXlDb2RlIC0gOTYpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWxpZEtleSA9IEtFWV9DT0RFW2tleUNvZGVdO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsaWRLZXk7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlcyB0aGUgbm9ybWFsaXplZCBrZXkgZm9yIGEgS2V5Ym9hcmRFdmVudC5cbiAqIEBwYXJhbSB7S2V5Ym9hcmRFdmVudH0ga2V5RXZlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW25vU3BlY2lhbENoYXJzXSBTZXQgdG8gdHJ1ZSB0byBsaW1pdCBrZXlFdmVudC5rZXlcbiAqIHRyYW5zZm9ybWF0aW9uIHRvIGFscGhhLW51bWVyaWMgY2hhcnMuIFRoaXMgaXMgdXNlZnVsIHdpdGgga2V5XG4gKiBjb21iaW5hdGlvbnMgbGlrZSBzaGlmdCArIDIsIHdoaWNoIG9uIEZGIGZvciBNYWNPUyBwcm9kdWNlc1xuICoga2V5RXZlbnQua2V5ID0gQFxuICogVG8gZ2V0IDIgcmV0dXJuZWQsIHNldCBub1NwZWNpYWxDaGFycyA9IHRydWVcbiAqIFRvIGdldCBAIHJldHVybmVkLCBzZXQgbm9TcGVjaWFsQ2hhcnMgPSBmYWxzZVxuICovXG5mdW5jdGlvbiBub3JtYWxpemVkS2V5Rm9yRXZlbnQoa2V5RXZlbnQsIG5vU3BlY2lhbENoYXJzKSB7XG4gIC8vIEZhbGwgYmFjayBmcm9tIC5rZXksIHRvIC5kZXRhaWwua2V5IGZvciBhcnRpZmljYWwga2V5Ym9hcmQgZXZlbnRzLFxuICAvLyBhbmQgdGhlbiB0byBkZXByZWNhdGVkIC5rZXlJZGVudGlmaWVyIGFuZCAua2V5Q29kZS5cbiAgaWYgKGtleUV2ZW50LmtleSkge1xuICAgIHJldHVybiB0cmFuc2Zvcm1LZXkoa2V5RXZlbnQua2V5LCBub1NwZWNpYWxDaGFycyk7XG4gIH1cbiAgaWYgKGtleUV2ZW50LmRldGFpbCAmJiBrZXlFdmVudC5kZXRhaWwua2V5KSB7XG4gICAgcmV0dXJuIHRyYW5zZm9ybUtleShrZXlFdmVudC5kZXRhaWwua2V5LCBub1NwZWNpYWxDaGFycyk7XG4gIH1cbiAgcmV0dXJuIHRyYW5zZm9ybUtleUlkZW50aWZpZXIoa2V5RXZlbnQua2V5SWRlbnRpZmllcikgfHxcbiAgICAgIHRyYW5zZm9ybUtleUNvZGUoa2V5RXZlbnQua2V5Q29kZSkgfHwgJyc7XG59XG5cbmZ1bmN0aW9uIGtleUNvbWJvTWF0Y2hlc0V2ZW50KGtleUNvbWJvLCBldmVudCkge1xuICAvLyBGb3IgY29tYm9zIHdpdGggbW9kaWZpZXJzIHdlIHN1cHBvcnQgb25seSBhbHBoYS1udW1lcmljIGtleXNcbiAgdmFyIGtleUV2ZW50ID0gbm9ybWFsaXplZEtleUZvckV2ZW50KGV2ZW50LCBrZXlDb21iby5oYXNNb2RpZmllcnMpO1xuICByZXR1cm4ga2V5RXZlbnQgPT09IGtleUNvbWJvLmtleSAmJlxuICAgICAgKCFrZXlDb21iby5oYXNNb2RpZmllcnMgfHxcbiAgICAgICAoISFldmVudC5zaGlmdEtleSA9PT0gISFrZXlDb21iby5zaGlmdEtleSAmJlxuICAgICAgICAhIWV2ZW50LmN0cmxLZXkgPT09ICEha2V5Q29tYm8uY3RybEtleSAmJlxuICAgICAgICAhIWV2ZW50LmFsdEtleSA9PT0gISFrZXlDb21iby5hbHRLZXkgJiZcbiAgICAgICAgISFldmVudC5tZXRhS2V5ID09PSAhIWtleUNvbWJvLm1ldGFLZXkpKTtcbn1cblxuZnVuY3Rpb24gcGFyc2VLZXlDb21ib1N0cmluZyhrZXlDb21ib1N0cmluZykge1xuICBpZiAoa2V5Q29tYm9TdHJpbmcubGVuZ3RoID09PSAxKSB7XG4gICAgcmV0dXJuIHtjb21ibzoga2V5Q29tYm9TdHJpbmcsIGtleToga2V5Q29tYm9TdHJpbmcsIGV2ZW50OiAna2V5ZG93bid9O1xuICB9XG4gIHJldHVybiBrZXlDb21ib1N0cmluZy5zcGxpdCgnKycpXG4gICAgICAucmVkdWNlKGZ1bmN0aW9uKHBhcnNlZEtleUNvbWJvLCBrZXlDb21ib1BhcnQpIHtcbiAgICAgICAgdmFyIGV2ZW50UGFydHMgPSBrZXlDb21ib1BhcnQuc3BsaXQoJzonKTtcbiAgICAgICAgdmFyIGtleU5hbWUgPSBldmVudFBhcnRzWzBdO1xuICAgICAgICB2YXIgZXZlbnQgPSBldmVudFBhcnRzWzFdO1xuXG4gICAgICAgIGlmIChrZXlOYW1lIGluIE1PRElGSUVSX0tFWVMpIHtcbiAgICAgICAgICBwYXJzZWRLZXlDb21ib1tNT0RJRklFUl9LRVlTW2tleU5hbWVdXSA9IHRydWU7XG4gICAgICAgICAgcGFyc2VkS2V5Q29tYm8uaGFzTW9kaWZpZXJzID0gdHJ1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYXJzZWRLZXlDb21iby5rZXkgPSBrZXlOYW1lO1xuICAgICAgICAgIHBhcnNlZEtleUNvbWJvLmV2ZW50ID0gZXZlbnQgfHwgJ2tleWRvd24nO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHBhcnNlZEtleUNvbWJvO1xuICAgICAgfSwge2NvbWJvOiBrZXlDb21ib1N0cmluZy5zcGxpdCgnOicpLnNoaWZ0KCl9KTtcbn1cblxuZnVuY3Rpb24gcGFyc2VFdmVudFN0cmluZyhldmVudFN0cmluZykge1xuICByZXR1cm4gZXZlbnRTdHJpbmcudHJpbSgpLnNwbGl0KCcgJykubWFwKGZ1bmN0aW9uKGtleUNvbWJvU3RyaW5nKSB7XG4gICAgcmV0dXJuIHBhcnNlS2V5Q29tYm9TdHJpbmcoa2V5Q29tYm9TdHJpbmcpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBgUG9seW1lci5Jcm9uQTExeUtleXNCZWhhdmlvcmAgcHJvdmlkZXMgYSBub3JtYWxpemVkIGludGVyZmFjZSBmb3IgcHJvY2Vzc2luZ1xuICoga2V5Ym9hcmQgY29tbWFuZHMgdGhhdCBwZXJ0YWluIHRvIFtXQUktQVJJQSBiZXN0XG4gKiBwcmFjdGljZXNdKGh0dHA6Ly93d3cudzMub3JnL1RSL3dhaS1hcmlhLXByYWN0aWNlcy8ja2JkX2dlbmVyYWxfYmluZGluZykuIFRoZVxuICogZWxlbWVudCB0YWtlcyBjYXJlIG9mIGJyb3dzZXIgZGlmZmVyZW5jZXMgd2l0aCByZXNwZWN0IHRvIEtleWJvYXJkIGV2ZW50cyBhbmRcbiAqIHVzZXMgYW4gZXhwcmVzc2l2ZSBzeW50YXggdG8gZmlsdGVyIGtleSBwcmVzc2VzLlxuICpcbiAqIFVzZSB0aGUgYGtleUJpbmRpbmdzYCBwcm90b3R5cGUgcHJvcGVydHkgdG8gZXhwcmVzcyB3aGF0IGNvbWJpbmF0aW9uIG9mIGtleXNcbiAqIHdpbGwgdHJpZ2dlciB0aGUgY2FsbGJhY2suIEEga2V5IGJpbmRpbmcgaGFzIHRoZSBmb3JtYXRcbiAqIGBcIktFWStNT0RJRklFUjpFVkVOVFwiOiBcImNhbGxiYWNrXCJgIChgXCJLRVlcIjogXCJjYWxsYmFja1wiYCBvclxuICogYFwiS0VZOkVWRU5UXCI6IFwiY2FsbGJhY2tcImAgYXJlIHZhbGlkIGFzIHdlbGwpLiBTb21lIGV4YW1wbGVzOlxuICpcbiAqICAgICAga2V5QmluZGluZ3M6IHtcbiAqICAgICAgICAnc3BhY2UnOiAnX29uS2V5ZG93bicsIC8vIHNhbWUgYXMgJ3NwYWNlOmtleWRvd24nXG4gKiAgICAgICAgJ3NoaWZ0K3RhYic6ICdfb25LZXlkb3duJyxcbiAqICAgICAgICAnZW50ZXI6a2V5cHJlc3MnOiAnX29uS2V5cHJlc3MnLFxuICogICAgICAgICdlc2M6a2V5dXAnOiAnX29uS2V5dXAnXG4gKiAgICAgIH1cbiAqXG4gKiBUaGUgY2FsbGJhY2sgd2lsbCByZWNlaXZlIHdpdGggYW4gZXZlbnQgY29udGFpbmluZyB0aGUgZm9sbG93aW5nIGluZm9ybWF0aW9uXG4gKiBpbiBgZXZlbnQuZGV0YWlsYDpcbiAqXG4gKiAgICAgIF9vbktleWRvd246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gKiAgICAgICAgY29uc29sZS5sb2coZXZlbnQuZGV0YWlsLmNvbWJvKTsgLy8gS0VZK01PRElGSUVSLCBlLmcuIFwic2hpZnQrdGFiXCJcbiAqICAgICAgICBjb25zb2xlLmxvZyhldmVudC5kZXRhaWwua2V5KTsgLy8gS0VZIG9ubHksIGUuZy4gXCJ0YWJcIlxuICogICAgICAgIGNvbnNvbGUubG9nKGV2ZW50LmRldGFpbC5ldmVudCk7IC8vIEVWRU5ULCBlLmcuIFwia2V5ZG93blwiXG4gKiAgICAgICAgY29uc29sZS5sb2coZXZlbnQuZGV0YWlsLmtleWJvYXJkRXZlbnQpOyAvLyB0aGUgb3JpZ2luYWwgS2V5Ym9hcmRFdmVudFxuICogICAgICB9XG4gKlxuICogVXNlIHRoZSBga2V5RXZlbnRUYXJnZXRgIGF0dHJpYnV0ZSB0byBzZXQgdXAgZXZlbnQgaGFuZGxlcnMgb24gYSBzcGVjaWZpY1xuICogbm9kZS5cbiAqXG4gKiBTZWUgdGhlIFtkZW1vIHNvdXJjZVxuICogY29kZV0oaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXJFbGVtZW50cy9pcm9uLWExMXkta2V5cy1iZWhhdmlvci9ibG9iL21hc3Rlci9kZW1vL3gta2V5LWF3YXJlLmh0bWwpXG4gKiBmb3IgYW4gZXhhbXBsZS5cbiAqXG4gKiBAZGVtbyBkZW1vL2luZGV4Lmh0bWxcbiAqIEBwb2x5bWVyQmVoYXZpb3JcbiAqL1xuZXhwb3J0IGNvbnN0IElyb25BMTF5S2V5c0JlaGF2aW9yID0ge1xuICBwcm9wZXJ0aWVzOiB7XG4gICAgLyoqXG4gICAgICogVGhlIEV2ZW50VGFyZ2V0IHRoYXQgd2lsbCBiZSBmaXJpbmcgcmVsZXZhbnQgS2V5Ym9hcmRFdmVudHMuIFNldCBpdCB0b1xuICAgICAqIGBudWxsYCB0byBkaXNhYmxlIHRoZSBsaXN0ZW5lcnMuXG4gICAgICogQHR5cGUgez9FdmVudFRhcmdldH1cbiAgICAgKi9cbiAgICBrZXlFdmVudFRhcmdldDoge1xuICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhpcyBwcm9wZXJ0eSB3aWxsIGNhdXNlIHRoZSBpbXBsZW1lbnRpbmcgZWxlbWVudCB0b1xuICAgICAqIGF1dG9tYXRpY2FsbHkgc3RvcCBwcm9wYWdhdGlvbiBvbiBhbnkgaGFuZGxlZCBLZXlib2FyZEV2ZW50cy5cbiAgICAgKi9cbiAgICBzdG9wS2V5Ym9hcmRFdmVudFByb3BhZ2F0aW9uOiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlfSxcblxuICAgIF9ib3VuZEtleUhhbmRsZXJzOiB7XG4gICAgICB0eXBlOiBBcnJheSxcbiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICAvLyBXZSB1c2UgdGhpcyBkdWUgdG8gYSBsaW1pdGF0aW9uIGluIElFMTAgd2hlcmUgaW5zdGFuY2VzIHdpbGwgaGF2ZVxuICAgIC8vIG93biBwcm9wZXJ0aWVzIG9mIGV2ZXJ5dGhpbmcgb24gdGhlIFwicHJvdG90eXBlXCIuXG4gICAgX2ltcGVyYXRpdmVLZXlCaW5kaW5nczoge1xuICAgICAgdHlwZTogT2JqZWN0LFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIG9ic2VydmVyczogWydfcmVzZXRLZXlFdmVudExpc3RlbmVycyhrZXlFdmVudFRhcmdldCwgX2JvdW5kS2V5SGFuZGxlcnMpJ10sXG5cblxuICAvKipcbiAgICogVG8gYmUgdXNlZCB0byBleHByZXNzIHdoYXQgY29tYmluYXRpb24gb2Yga2V5cyAgd2lsbCB0cmlnZ2VyIHRoZSByZWxhdGl2ZVxuICAgKiBjYWxsYmFjay4gZS5nLiBga2V5QmluZGluZ3M6IHsgJ2VzYyc6ICdfb25Fc2NQcmVzc2VkJ31gXG4gICAqIEB0eXBlIHshT2JqZWN0fVxuICAgKi9cbiAga2V5QmluZGluZ3M6IHt9LFxuXG4gIHJlZ2lzdGVyZWQ6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3ByZXBLZXlCaW5kaW5ncygpO1xuICB9LFxuXG4gIGF0dGFjaGVkOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9saXN0ZW5LZXlFdmVudExpc3RlbmVycygpO1xuICB9LFxuXG4gIGRldGFjaGVkOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl91bmxpc3RlbktleUV2ZW50TGlzdGVuZXJzKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhbiBiZSB1c2VkIHRvIGltcGVyYXRpdmVseSBhZGQgYSBrZXkgYmluZGluZyB0byB0aGUgaW1wbGVtZW50aW5nXG4gICAqIGVsZW1lbnQuIFRoaXMgaXMgdGhlIGltcGVyYXRpdmUgZXF1aXZhbGVudCBvZiBkZWNsYXJpbmcgYSBrZXliaW5kaW5nXG4gICAqIGluIHRoZSBga2V5QmluZGluZ3NgIHByb3RvdHlwZSBwcm9wZXJ0eS5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGV2ZW50U3RyaW5nXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBoYW5kbGVyTmFtZVxuICAgKi9cbiAgYWRkT3duS2V5QmluZGluZzogZnVuY3Rpb24oZXZlbnRTdHJpbmcsIGhhbmRsZXJOYW1lKSB7XG4gICAgdGhpcy5faW1wZXJhdGl2ZUtleUJpbmRpbmdzW2V2ZW50U3RyaW5nXSA9IGhhbmRsZXJOYW1lO1xuICAgIHRoaXMuX3ByZXBLZXlCaW5kaW5ncygpO1xuICAgIHRoaXMuX3Jlc2V0S2V5RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfSxcblxuICAvKipcbiAgICogV2hlbiBjYWxsZWQsIHdpbGwgcmVtb3ZlIGFsbCBpbXBlcmF0aXZlbHktYWRkZWQga2V5IGJpbmRpbmdzLlxuICAgKi9cbiAgcmVtb3ZlT3duS2V5QmluZGluZ3M6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2ltcGVyYXRpdmVLZXlCaW5kaW5ncyA9IHt9O1xuICAgIHRoaXMuX3ByZXBLZXlCaW5kaW5ncygpO1xuICAgIHRoaXMuX3Jlc2V0S2V5RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIGEga2V5Ym9hcmQgZXZlbnQgbWF0Y2hlcyBgZXZlbnRTdHJpbmdgLlxuICAgKlxuICAgKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGV2ZW50XG4gICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudFN0cmluZ1xuICAgKiBAcmV0dXJuIHtib29sZWFufVxuICAgKi9cbiAga2V5Ym9hcmRFdmVudE1hdGNoZXNLZXlzOiBmdW5jdGlvbihldmVudCwgZXZlbnRTdHJpbmcpIHtcbiAgICB2YXIga2V5Q29tYm9zID0gcGFyc2VFdmVudFN0cmluZyhldmVudFN0cmluZyk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBrZXlDb21ib3MubGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmIChrZXlDb21ib01hdGNoZXNFdmVudChrZXlDb21ib3NbaV0sIGV2ZW50KSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9LFxuXG4gIF9jb2xsZWN0S2V5QmluZGluZ3M6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBrZXlCaW5kaW5ncyA9IHRoaXMuYmVoYXZpb3JzLm1hcChmdW5jdGlvbihiZWhhdmlvcikge1xuICAgICAgcmV0dXJuIGJlaGF2aW9yLmtleUJpbmRpbmdzO1xuICAgIH0pO1xuXG4gICAgaWYgKGtleUJpbmRpbmdzLmluZGV4T2YodGhpcy5rZXlCaW5kaW5ncykgPT09IC0xKSB7XG4gICAgICBrZXlCaW5kaW5ncy5wdXNoKHRoaXMua2V5QmluZGluZ3MpO1xuICAgIH1cblxuICAgIHJldHVybiBrZXlCaW5kaW5ncztcbiAgfSxcblxuICBfcHJlcEtleUJpbmRpbmdzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9rZXlCaW5kaW5ncyA9IHt9O1xuXG4gICAgdGhpcy5fY29sbGVjdEtleUJpbmRpbmdzKCkuZm9yRWFjaChmdW5jdGlvbihrZXlCaW5kaW5ncykge1xuICAgICAgZm9yICh2YXIgZXZlbnRTdHJpbmcgaW4ga2V5QmluZGluZ3MpIHtcbiAgICAgICAgdGhpcy5fYWRkS2V5QmluZGluZyhldmVudFN0cmluZywga2V5QmluZGluZ3NbZXZlbnRTdHJpbmddKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcblxuICAgIGZvciAodmFyIGV2ZW50U3RyaW5nIGluIHRoaXMuX2ltcGVyYXRpdmVLZXlCaW5kaW5ncykge1xuICAgICAgdGhpcy5fYWRkS2V5QmluZGluZyhcbiAgICAgICAgICBldmVudFN0cmluZywgdGhpcy5faW1wZXJhdGl2ZUtleUJpbmRpbmdzW2V2ZW50U3RyaW5nXSk7XG4gICAgfVxuXG4gICAgLy8gR2l2ZSBwcmVjZWRlbmNlIHRvIGNvbWJvcyB3aXRoIG1vZGlmaWVycyB0byBiZSBjaGVja2VkIGZpcnN0LlxuICAgIGZvciAodmFyIGV2ZW50TmFtZSBpbiB0aGlzLl9rZXlCaW5kaW5ncykge1xuICAgICAgdGhpcy5fa2V5QmluZGluZ3NbZXZlbnROYW1lXS5zb3J0KGZ1bmN0aW9uKGtiMSwga2IyKSB7XG4gICAgICAgIHZhciBiMSA9IGtiMVswXS5oYXNNb2RpZmllcnM7XG4gICAgICAgIHZhciBiMiA9IGtiMlswXS5oYXNNb2RpZmllcnM7XG4gICAgICAgIHJldHVybiAoYjEgPT09IGIyKSA/IDAgOiBiMSA/IC0xIDogMTtcbiAgICAgIH0pXG4gICAgfVxuICB9LFxuXG4gIF9hZGRLZXlCaW5kaW5nOiBmdW5jdGlvbihldmVudFN0cmluZywgaGFuZGxlck5hbWUpIHtcbiAgICBwYXJzZUV2ZW50U3RyaW5nKGV2ZW50U3RyaW5nKS5mb3JFYWNoKGZ1bmN0aW9uKGtleUNvbWJvKSB7XG4gICAgICB0aGlzLl9rZXlCaW5kaW5nc1trZXlDb21iby5ldmVudF0gPVxuICAgICAgICAgIHRoaXMuX2tleUJpbmRpbmdzW2tleUNvbWJvLmV2ZW50XSB8fCBbXTtcblxuICAgICAgdGhpcy5fa2V5QmluZGluZ3Nba2V5Q29tYm8uZXZlbnRdLnB1c2goW2tleUNvbWJvLCBoYW5kbGVyTmFtZV0pO1xuICAgIH0sIHRoaXMpO1xuICB9LFxuXG4gIF9yZXNldEtleUV2ZW50TGlzdGVuZXJzOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl91bmxpc3RlbktleUV2ZW50TGlzdGVuZXJzKCk7XG5cbiAgICBpZiAodGhpcy5pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9saXN0ZW5LZXlFdmVudExpc3RlbmVycygpO1xuICAgIH1cbiAgfSxcblxuICBfbGlzdGVuS2V5RXZlbnRMaXN0ZW5lcnM6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5rZXlFdmVudFRhcmdldCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBPYmplY3Qua2V5cyh0aGlzLl9rZXlCaW5kaW5ncykuZm9yRWFjaChmdW5jdGlvbihldmVudE5hbWUpIHtcbiAgICAgIHZhciBrZXlCaW5kaW5ncyA9IHRoaXMuX2tleUJpbmRpbmdzW2V2ZW50TmFtZV07XG4gICAgICB2YXIgYm91bmRLZXlIYW5kbGVyID0gdGhpcy5fb25LZXlCaW5kaW5nRXZlbnQuYmluZCh0aGlzLCBrZXlCaW5kaW5ncyk7XG5cbiAgICAgIHRoaXMuX2JvdW5kS2V5SGFuZGxlcnMucHVzaChcbiAgICAgICAgICBbdGhpcy5rZXlFdmVudFRhcmdldCwgZXZlbnROYW1lLCBib3VuZEtleUhhbmRsZXJdKTtcblxuICAgICAgdGhpcy5rZXlFdmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgYm91bmRLZXlIYW5kbGVyKTtcbiAgICB9LCB0aGlzKTtcbiAgfSxcblxuICBfdW5saXN0ZW5LZXlFdmVudExpc3RlbmVyczogZnVuY3Rpb24oKSB7XG4gICAgdmFyIGtleUhhbmRsZXJUdXBsZTtcbiAgICB2YXIga2V5RXZlbnRUYXJnZXQ7XG4gICAgdmFyIGV2ZW50TmFtZTtcbiAgICB2YXIgYm91bmRLZXlIYW5kbGVyO1xuXG4gICAgd2hpbGUgKHRoaXMuX2JvdW5kS2V5SGFuZGxlcnMubGVuZ3RoKSB7XG4gICAgICAvLyBNeSBraW5nZG9tIGZvciBibG9jay1zY29wZSBiaW5kaW5nIGFuZCBkZXN0cnVjdHVyaW5nIGFzc2lnbm1lbnQuLlxuICAgICAga2V5SGFuZGxlclR1cGxlID0gdGhpcy5fYm91bmRLZXlIYW5kbGVycy5wb3AoKTtcbiAgICAgIGtleUV2ZW50VGFyZ2V0ID0ga2V5SGFuZGxlclR1cGxlWzBdO1xuICAgICAgZXZlbnROYW1lID0ga2V5SGFuZGxlclR1cGxlWzFdO1xuICAgICAgYm91bmRLZXlIYW5kbGVyID0ga2V5SGFuZGxlclR1cGxlWzJdO1xuXG4gICAgICBrZXlFdmVudFRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgYm91bmRLZXlIYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgX29uS2V5QmluZGluZ0V2ZW50OiBmdW5jdGlvbihrZXlCaW5kaW5ncywgZXZlbnQpIHtcbiAgICBpZiAodGhpcy5zdG9wS2V5Ym9hcmRFdmVudFByb3BhZ2F0aW9uKSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG5cbiAgICAvLyBpZiBldmVudCBoYXMgYmVlbiBhbHJlYWR5IHByZXZlbnRlZCwgZG9uJ3QgZG8gYW55dGhpbmdcbiAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5QmluZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBrZXlDb21ibyA9IGtleUJpbmRpbmdzW2ldWzBdO1xuICAgICAgdmFyIGhhbmRsZXJOYW1lID0ga2V5QmluZGluZ3NbaV1bMV07XG4gICAgICBpZiAoa2V5Q29tYm9NYXRjaGVzRXZlbnQoa2V5Q29tYm8sIGV2ZW50KSkge1xuICAgICAgICB0aGlzLl90cmlnZ2VyS2V5SGFuZGxlcihrZXlDb21ibywgaGFuZGxlck5hbWUsIGV2ZW50KTtcbiAgICAgICAgLy8gZXhpdCB0aGUgbG9vcCBpZiBldmVudERlZmF1bHQgd2FzIHByZXZlbnRlZFxuICAgICAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBfdHJpZ2dlcktleUhhbmRsZXI6IGZ1bmN0aW9uKGtleUNvbWJvLCBoYW5kbGVyTmFtZSwga2V5Ym9hcmRFdmVudCkge1xuICAgIHZhciBkZXRhaWwgPSBPYmplY3QuY3JlYXRlKGtleUNvbWJvKTtcbiAgICBkZXRhaWwua2V5Ym9hcmRFdmVudCA9IGtleWJvYXJkRXZlbnQ7XG4gICAgdmFyIGV2ZW50ID1cbiAgICAgICAgbmV3IEN1c3RvbUV2ZW50KGtleUNvbWJvLmV2ZW50LCB7ZGV0YWlsOiBkZXRhaWwsIGNhbmNlbGFibGU6IHRydWV9KTtcbiAgICB0aGlzW2hhbmRsZXJOYW1lXS5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICBpZiAoZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkge1xuICAgICAga2V5Ym9hcmRFdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgfVxufTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5cbi8qKlxuICBJcm9uRm9ybUVsZW1lbnRCZWhhdmlvciBhZGRzIGEgYG5hbWVgLCBgdmFsdWVgIGFuZCBgcmVxdWlyZWRgIHByb3BlcnRpZXMgdG9cbiAgYSBjdXN0b20gZWxlbWVudC4gSXQgbW9zdGx5IGV4aXN0cyBmb3IgYmFja2NvbXBhdGliaWxpdHkgd2l0aCBQb2x5bWVyIDEueCwgYW5kXG4gIGlzIHByb2JhYmx5IG5vdCBzb21ldGhpbmcgeW91IHdhbnQgdG8gdXNlLlxuXG4gIEBkZW1vIGRlbW8vaW5kZXguaHRtbFxuICBAcG9seW1lckJlaGF2aW9yXG4gKi9cbmV4cG9ydCBjb25zdCBJcm9uRm9ybUVsZW1lbnRCZWhhdmlvciA9IHtcblxuICBwcm9wZXJ0aWVzOiB7XG4gICAgLyoqXG4gICAgICogVGhlIG5hbWUgb2YgdGhpcyBlbGVtZW50LlxuICAgICAqL1xuICAgIG5hbWU6IHt0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGZvciB0aGlzIGVsZW1lbnQuXG4gICAgICogQHR5cGUgeyp9XG4gICAgICovXG4gICAgdmFsdWU6IHtub3RpZnk6IHRydWUsIHR5cGU6IFN0cmluZ30sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSB0byBtYXJrIHRoZSBpbnB1dCBhcyByZXF1aXJlZC4gSWYgdXNlZCBpbiBhIGZvcm0sIGFcbiAgICAgKiBjdXN0b20gZWxlbWVudCB0aGF0IHVzZXMgdGhpcyBiZWhhdmlvciBzaG91bGQgYWxzbyB1c2VcbiAgICAgKiBJcm9uVmFsaWRhdGFibGVCZWhhdmlvciBhbmQgZGVmaW5lIGEgY3VzdG9tIHZhbGlkYXRpb24gbWV0aG9kLlxuICAgICAqIE90aGVyd2lzZSwgYSBgcmVxdWlyZWRgIGVsZW1lbnQgd2lsbCBhbHdheXMgYmUgY29uc2lkZXJlZCB2YWxpZC5cbiAgICAgKiBJdCdzIGFsc28gc3Ryb25nbHkgcmVjb21tZW5kZWQgdG8gcHJvdmlkZSBhIHZpc3VhbCBzdHlsZSBmb3IgdGhlIGVsZW1lbnRcbiAgICAgKiB3aGVuIGl0cyB2YWx1ZSBpcyBpbnZhbGlkLlxuICAgICAqL1xuICAgIHJlcXVpcmVkOiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlfSxcbiAgfSxcblxuICAvLyBFbXB0eSBpbXBsZW1lbnRhdGlvbnMgZm9yIGJhY2tjb21wYXRpYmlsaXR5LlxuICBhdHRhY2hlZDogZnVuY3Rpb24oKSB7fSxcbiAgZGV0YWNoZWQ6IGZ1bmN0aW9uKCkge31cbn07XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJ0Bwb2x5bWVyL3BvbHltZXIvcG9seW1lci1sZWdhY3kuanMnO1xuXG5pbXBvcnQge2RvbX0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L3BvbHltZXIuZG9tLmpzJztcblxuLyoqXG4gKiBAZGVtbyBkZW1vL2luZGV4Lmh0bWxcbiAqIEBwb2x5bWVyQmVoYXZpb3JcbiAqL1xuZXhwb3J0IGNvbnN0IElyb25Db250cm9sU3RhdGUgPSB7XG5cbiAgcHJvcGVydGllczoge1xuXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhlIGVsZW1lbnQgY3VycmVudGx5IGhhcyBmb2N1cy5cbiAgICAgKi9cbiAgICBmb2N1c2VkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgbm90aWZ5OiB0cnVlLFxuICAgICAgcmVhZE9ubHk6IHRydWUsXG4gICAgICByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWVcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgdGhlIHVzZXIgY2Fubm90IGludGVyYWN0IHdpdGggdGhpcyBlbGVtZW50LlxuICAgICAqL1xuICAgIGRpc2FibGVkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgbm90aWZ5OiB0cnVlLFxuICAgICAgb2JzZXJ2ZXI6ICdfZGlzYWJsZWRDaGFuZ2VkJyxcbiAgICAgIHJlZmxlY3RUb0F0dHJpYnV0ZTogdHJ1ZVxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBWYWx1ZSBvZiB0aGUgYHRhYmluZGV4YCBhdHRyaWJ1dGUgYmVmb3JlIGBkaXNhYmxlZGAgd2FzIGFjdGl2YXRlZC5cbiAgICAgKiBgbnVsbGAgbWVhbnMgdGhlIGF0dHJpYnV0ZSB3YXMgbm90IHByZXNlbnQuXG4gICAgICogQHR5cGUgez9zdHJpbmd8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIF9vbGRUYWJJbmRleDoge3R5cGU6IFN0cmluZ30sXG5cbiAgICBfYm91bmRGb2N1c0JsdXJIYW5kbGVyOiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZvY3VzQmx1ckhhbmRsZXIuYmluZCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgb2JzZXJ2ZXJzOiBbJ19jaGFuZ2VkQ29udHJvbFN0YXRlKGZvY3VzZWQsIGRpc2FibGVkKSddLFxuXG4gIC8qKlxuICAgKiBAcmV0dXJuIHt2b2lkfVxuICAgKi9cbiAgcmVhZHk6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9ib3VuZEZvY3VzQmx1ckhhbmRsZXIsIHRydWUpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2JvdW5kRm9jdXNCbHVySGFuZGxlciwgdHJ1ZSk7XG4gIH0sXG5cbiAgX2ZvY3VzQmx1ckhhbmRsZXI6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gUG9seW1lciB0YWtlcyBjYXJlIG9mIHJldGFyZ2V0aW5nIGV2ZW50cy5cbiAgICB0aGlzLl9zZXRGb2N1c2VkKGV2ZW50LnR5cGUgPT09ICdmb2N1cycpO1xuICAgIHJldHVybjtcbiAgfSxcblxuICBfZGlzYWJsZWRDaGFuZ2VkOiBmdW5jdGlvbihkaXNhYmxlZCwgb2xkKSB7XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGlzYWJsZWQnLCBkaXNhYmxlZCA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgIHRoaXMuc3R5bGUucG9pbnRlckV2ZW50cyA9IGRpc2FibGVkID8gJ25vbmUnIDogJyc7XG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICAvLyBSZWFkIHRoZSBgdGFiaW5kZXhgIGF0dHJpYnV0ZSBpbnN0ZWFkIG9mIHRoZSBgdGFiSW5kZXhgIHByb3BlcnR5LlxuICAgICAgLy8gVGhlIHByb3BlcnR5IHJldHVybnMgYC0xYCBpZiB0aGVyZSBpcyBubyBgdGFiaW5kZXhgIGF0dHJpYnV0ZS5cbiAgICAgIC8vIFRoaXMgZGlzdGluY3Rpb24gaXMgaW1wb3J0YW50IHdoZW4gcmVzdG9yaW5nIHRoZSB2YWx1ZSBiZWNhdXNlXG4gICAgICAvLyBsZWF2aW5nIGAtMWAgaGlkZXMgc2hhZG93IHJvb3QgY2hpbGRyZW4gZnJvbSB0aGUgdGFiIG9yZGVyLlxuICAgICAgdGhpcy5fb2xkVGFiSW5kZXggPSB0aGlzLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICAgIHRoaXMuX3NldEZvY3VzZWQoZmFsc2UpO1xuICAgICAgdGhpcy50YWJJbmRleCA9IC0xO1xuICAgICAgdGhpcy5ibHVyKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl9vbGRUYWJJbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAodGhpcy5fb2xkVGFiSW5kZXggPT09IG51bGwpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoJ3RhYmluZGV4Jyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCB0aGlzLl9vbGRUYWJJbmRleCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIF9jaGFuZ2VkQ29udHJvbFN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICAvLyBfY29udHJvbFN0YXRlQ2hhbmdlZCBpcyBhYnN0cmFjdCwgZm9sbG93LW9uIGJlaGF2aW9ycyBtYXkgaW1wbGVtZW50IGl0XG4gICAgaWYgKHRoaXMuX2NvbnRyb2xTdGF0ZUNoYW5nZWQpIHtcbiAgICAgIHRoaXMuX2NvbnRyb2xTdGF0ZUNoYW5nZWQoKTtcbiAgICB9XG4gIH1cblxufTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5pbXBvcnQgJy4vaXJvbi1jb250cm9sLXN0YXRlLmpzJztcblxuaW1wb3J0IHtJcm9uQTExeUtleXNCZWhhdmlvcn0gZnJvbSAnQHBvbHltZXIvaXJvbi1hMTF5LWtleXMtYmVoYXZpb3IvaXJvbi1hMTF5LWtleXMtYmVoYXZpb3IuanMnO1xuaW1wb3J0IHtkb219IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLmRvbS5qcyc7XG5cbi8qKlxuICogQGRlbW8gZGVtby9pbmRleC5odG1sXG4gKiBAcG9seW1lckJlaGF2aW9yIElyb25CdXR0b25TdGF0ZVxuICovXG5leHBvcnQgY29uc3QgSXJvbkJ1dHRvblN0YXRlSW1wbCA9IHtcblxuICBwcm9wZXJ0aWVzOiB7XG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCB0aGUgdXNlciBpcyBjdXJyZW50bHkgaG9sZGluZyBkb3duIHRoZSBidXR0b24uXG4gICAgICovXG4gICAgcHJlc3NlZDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIHJlYWRPbmx5OiB0cnVlLFxuICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlLFxuICAgICAgb2JzZXJ2ZXI6ICdfcHJlc3NlZENoYW5nZWQnXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIHRydWUsIHRoZSBidXR0b24gdG9nZ2xlcyB0aGUgYWN0aXZlIHN0YXRlIHdpdGggZWFjaCB0YXAgb3IgcHJlc3NcbiAgICAgKiBvZiB0aGUgc3BhY2ViYXIuXG4gICAgICovXG4gICAgdG9nZ2xlczoge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZSwgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlfSxcblxuICAgIC8qKlxuICAgICAqIElmIHRydWUsIHRoZSBidXR0b24gaXMgYSB0b2dnbGUgYW5kIGlzIGN1cnJlbnRseSBpbiB0aGUgYWN0aXZlIHN0YXRlLlxuICAgICAqL1xuICAgIGFjdGl2ZTpcbiAgICAgICAge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZSwgbm90aWZ5OiB0cnVlLCByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWV9LFxuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGUgZWxlbWVudCBpcyBjdXJyZW50bHkgYmVpbmcgcHJlc3NlZCBieSBhIFwicG9pbnRlcixcIiB3aGljaFxuICAgICAqIGlzIGxvb3NlbHkgZGVmaW5lZCBhcyBtb3VzZSBvciB0b3VjaCBpbnB1dCAoYnV0IHNwZWNpZmljYWxseSBleGNsdWRpbmdcbiAgICAgKiBrZXlib2FyZCBpbnB1dCkuXG4gICAgICovXG4gICAgcG9pbnRlckRvd246IHt0eXBlOiBCb29sZWFuLCByZWFkT25seTogdHJ1ZSwgdmFsdWU6IGZhbHNlfSxcblxuICAgIC8qKlxuICAgICAqIFRydWUgaWYgdGhlIGlucHV0IGRldmljZSB0aGF0IGNhdXNlZCB0aGUgZWxlbWVudCB0byByZWNlaXZlIGZvY3VzXG4gICAgICogd2FzIGEga2V5Ym9hcmQuXG4gICAgICovXG4gICAgcmVjZWl2ZWRGb2N1c0Zyb21LZXlib2FyZDoge3R5cGU6IEJvb2xlYW4sIHJlYWRPbmx5OiB0cnVlfSxcblxuICAgIC8qKlxuICAgICAqIFRoZSBhcmlhIGF0dHJpYnV0ZSB0byBiZSBzZXQgaWYgdGhlIGJ1dHRvbiBpcyBhIHRvZ2dsZSBhbmQgaW4gdGhlXG4gICAgICogYWN0aXZlIHN0YXRlLlxuICAgICAqL1xuICAgIGFyaWFBY3RpdmVBdHRyaWJ1dGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHZhbHVlOiAnYXJpYS1wcmVzc2VkJyxcbiAgICAgIG9ic2VydmVyOiAnX2FyaWFBY3RpdmVBdHRyaWJ1dGVDaGFuZ2VkJ1xuICAgIH1cbiAgfSxcblxuICBsaXN0ZW5lcnM6IHtkb3duOiAnX2Rvd25IYW5kbGVyJywgdXA6ICdfdXBIYW5kbGVyJywgdGFwOiAnX3RhcEhhbmRsZXInfSxcblxuICBvYnNlcnZlcnM6XG4gICAgICBbJ19mb2N1c0NoYW5nZWQoZm9jdXNlZCknLCAnX2FjdGl2ZUNoYW5nZWQoYWN0aXZlLCBhcmlhQWN0aXZlQXR0cmlidXRlKSddLFxuXG4gIC8qKlxuICAgKiBAdHlwZSB7IU9iamVjdH1cbiAgICovXG4gIGtleUJpbmRpbmdzOiB7XG4gICAgJ2VudGVyOmtleWRvd24nOiAnX2FzeW5jQ2xpY2snLFxuICAgICdzcGFjZTprZXlkb3duJzogJ19zcGFjZUtleURvd25IYW5kbGVyJyxcbiAgICAnc3BhY2U6a2V5dXAnOiAnX3NwYWNlS2V5VXBIYW5kbGVyJyxcbiAgfSxcblxuICBfbW91c2VFdmVudFJlOiAvXm1vdXNlLyxcblxuICBfdGFwSGFuZGxlcjogZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMudG9nZ2xlcykge1xuICAgICAgLy8gYSB0YXAgaXMgbmVlZGVkIHRvIHRvZ2dsZSB0aGUgYWN0aXZlIHN0YXRlXG4gICAgICB0aGlzLl91c2VyQWN0aXZhdGUoIXRoaXMuYWN0aXZlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgX2ZvY3VzQ2hhbmdlZDogZnVuY3Rpb24oZm9jdXNlZCkge1xuICAgIHRoaXMuX2RldGVjdEtleWJvYXJkRm9jdXMoZm9jdXNlZCk7XG5cbiAgICBpZiAoIWZvY3VzZWQpIHtcbiAgICAgIHRoaXMuX3NldFByZXNzZWQoZmFsc2UpO1xuICAgIH1cbiAgfSxcblxuICBfZGV0ZWN0S2V5Ym9hcmRGb2N1czogZnVuY3Rpb24oZm9jdXNlZCkge1xuICAgIHRoaXMuX3NldFJlY2VpdmVkRm9jdXNGcm9tS2V5Ym9hcmQoIXRoaXMucG9pbnRlckRvd24gJiYgZm9jdXNlZCk7XG4gIH0sXG5cbiAgLy8gdG8gZW11bGF0ZSBuYXRpdmUgY2hlY2tib3gsIChkZS0pYWN0aXZhdGlvbnMgZnJvbSBhIHVzZXIgaW50ZXJhY3Rpb24gZmlyZVxuICAvLyAnY2hhbmdlJyBldmVudHNcbiAgX3VzZXJBY3RpdmF0ZTogZnVuY3Rpb24oYWN0aXZlKSB7XG4gICAgaWYgKHRoaXMuYWN0aXZlICE9PSBhY3RpdmUpIHtcbiAgICAgIHRoaXMuYWN0aXZlID0gYWN0aXZlO1xuICAgICAgdGhpcy5maXJlKCdjaGFuZ2UnKTtcbiAgICB9XG4gIH0sXG5cbiAgX2Rvd25IYW5kbGVyOiBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuX3NldFBvaW50ZXJEb3duKHRydWUpO1xuICAgIHRoaXMuX3NldFByZXNzZWQodHJ1ZSk7XG4gICAgdGhpcy5fc2V0UmVjZWl2ZWRGb2N1c0Zyb21LZXlib2FyZChmYWxzZSk7XG4gIH0sXG5cbiAgX3VwSGFuZGxlcjogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fc2V0UG9pbnRlckRvd24oZmFsc2UpO1xuICAgIHRoaXMuX3NldFByZXNzZWQoZmFsc2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBAcGFyYW0geyFLZXlib2FyZEV2ZW50fSBldmVudCAuXG4gICAqL1xuICBfc3BhY2VLZXlEb3duSGFuZGxlcjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIga2V5Ym9hcmRFdmVudCA9IGV2ZW50LmRldGFpbC5rZXlib2FyZEV2ZW50O1xuICAgIHZhciB0YXJnZXQgPSBkb20oa2V5Ym9hcmRFdmVudCkubG9jYWxUYXJnZXQ7XG5cbiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIHRoaXMgaXMgY29taW5nIGZyb20gYSBmb2N1c2VkIGxpZ2h0IGNoaWxkLCBzaW5jZSB0aGF0XG4gICAgLy8gZWxlbWVudCB3aWxsIGRlYWwgd2l0aCBpdC5cbiAgICBpZiAodGhpcy5pc0xpZ2h0RGVzY2VuZGFudCgvKiogQHR5cGUge05vZGV9ICovICh0YXJnZXQpKSlcbiAgICAgIHJldHVybjtcblxuICAgIGtleWJvYXJkRXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBrZXlib2FyZEV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgIHRoaXMuX3NldFByZXNzZWQodHJ1ZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7IUtleWJvYXJkRXZlbnR9IGV2ZW50IC5cbiAgICovXG4gIF9zcGFjZUtleVVwSGFuZGxlcjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIga2V5Ym9hcmRFdmVudCA9IGV2ZW50LmRldGFpbC5rZXlib2FyZEV2ZW50O1xuICAgIHZhciB0YXJnZXQgPSBkb20oa2V5Ym9hcmRFdmVudCkubG9jYWxUYXJnZXQ7XG5cbiAgICAvLyBJZ25vcmUgdGhlIGV2ZW50IGlmIHRoaXMgaXMgY29taW5nIGZyb20gYSBmb2N1c2VkIGxpZ2h0IGNoaWxkLCBzaW5jZSB0aGF0XG4gICAgLy8gZWxlbWVudCB3aWxsIGRlYWwgd2l0aCBpdC5cbiAgICBpZiAodGhpcy5pc0xpZ2h0RGVzY2VuZGFudCgvKiogQHR5cGUge05vZGV9ICovICh0YXJnZXQpKSlcbiAgICAgIHJldHVybjtcblxuICAgIGlmICh0aGlzLnByZXNzZWQpIHtcbiAgICAgIHRoaXMuX2FzeW5jQ2xpY2soKTtcbiAgICB9XG4gICAgdGhpcy5fc2V0UHJlc3NlZChmYWxzZSk7XG4gIH0sXG5cbiAgLy8gdHJpZ2dlciBjbGljayBhc3luY2hyb25vdXNseSwgdGhlIGFzeW5jaHJvbnkgaXMgdXNlZnVsIHRvIGFsbG93IG9uZVxuICAvLyBldmVudCBoYW5kbGVyIHRvIHVud2luZCBiZWZvcmUgdHJpZ2dlcmluZyBhbm90aGVyIGV2ZW50XG4gIF9hc3luY0NsaWNrOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLmFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5jbGljaygpO1xuICAgIH0sIDEpO1xuICB9LFxuXG4gIC8vIGFueSBvZiB0aGVzZSBjaGFuZ2VzIGFyZSBjb25zaWRlcmVkIGEgY2hhbmdlIHRvIGJ1dHRvbiBzdGF0ZVxuXG4gIF9wcmVzc2VkQ2hhbmdlZDogZnVuY3Rpb24ocHJlc3NlZCkge1xuICAgIHRoaXMuX2NoYW5nZWRCdXR0b25TdGF0ZSgpO1xuICB9LFxuXG4gIF9hcmlhQWN0aXZlQXR0cmlidXRlQ2hhbmdlZDogZnVuY3Rpb24odmFsdWUsIG9sZFZhbHVlKSB7XG4gICAgaWYgKG9sZFZhbHVlICYmIG9sZFZhbHVlICE9IHZhbHVlICYmIHRoaXMuaGFzQXR0cmlidXRlKG9sZFZhbHVlKSkge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUob2xkVmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICBfYWN0aXZlQ2hhbmdlZDogZnVuY3Rpb24oYWN0aXZlLCBhcmlhQWN0aXZlQXR0cmlidXRlKSB7XG4gICAgaWYgKHRoaXMudG9nZ2xlcykge1xuICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUodGhpcy5hcmlhQWN0aXZlQXR0cmlidXRlLCBhY3RpdmUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUodGhpcy5hcmlhQWN0aXZlQXR0cmlidXRlKTtcbiAgICB9XG4gICAgdGhpcy5fY2hhbmdlZEJ1dHRvblN0YXRlKCk7XG4gIH0sXG5cbiAgX2NvbnRyb2xTdGF0ZUNoYW5nZWQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLl9zZXRQcmVzc2VkKGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fY2hhbmdlZEJ1dHRvblN0YXRlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8vIHByb3ZpZGUgaG9vayBmb3IgZm9sbG93LW9uIGJlaGF2aW9ycyB0byByZWFjdCB0byBidXR0b24tc3RhdGVcblxuICBfY2hhbmdlZEJ1dHRvblN0YXRlOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fYnV0dG9uU3RhdGVDaGFuZ2VkKSB7XG4gICAgICB0aGlzLl9idXR0b25TdGF0ZUNoYW5nZWQoKTsgIC8vIGFic3RyYWN0XG4gICAgfVxuICB9XG5cbn07XG5cbi8qKiBAcG9seW1lckJlaGF2aW9yICovXG5leHBvcnQgY29uc3QgSXJvbkJ1dHRvblN0YXRlID0gW0lyb25BMTF5S2V5c0JlaGF2aW9yLCBJcm9uQnV0dG9uU3RhdGVJbXBsXTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTQgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5cbmltcG9ydCB7SXJvbkExMXlLZXlzQmVoYXZpb3J9IGZyb20gJ0Bwb2x5bWVyL2lyb24tYTExeS1rZXlzLWJlaGF2aW9yL2lyb24tYTExeS1rZXlzLWJlaGF2aW9yLmpzJztcbmltcG9ydCB7UG9seW1lcn0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L3BvbHltZXItZm4uanMnO1xuaW1wb3J0IHtkb219IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLmRvbS5qcyc7XG5pbXBvcnQge2h0bWx9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnLmpzJztcblxudmFyIFV0aWxpdHkgPSB7XG4gIGRpc3RhbmNlOiBmdW5jdGlvbih4MSwgeTEsIHgyLCB5Mikge1xuICAgIHZhciB4RGVsdGEgPSAoeDEgLSB4Mik7XG4gICAgdmFyIHlEZWx0YSA9ICh5MSAtIHkyKTtcblxuICAgIHJldHVybiBNYXRoLnNxcnQoeERlbHRhICogeERlbHRhICsgeURlbHRhICogeURlbHRhKTtcbiAgfSxcblxuICBub3c6IHdpbmRvdy5wZXJmb3JtYW5jZSAmJiB3aW5kb3cucGVyZm9ybWFuY2Uubm93ID9cbiAgICAgIHdpbmRvdy5wZXJmb3JtYW5jZS5ub3cuYmluZCh3aW5kb3cucGVyZm9ybWFuY2UpIDpcbiAgICAgIERhdGUubm93XG59O1xuXG4vKipcbiAqIEBwYXJhbSB7SFRNTEVsZW1lbnR9IGVsZW1lbnRcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBFbGVtZW50TWV0cmljcyhlbGVtZW50KSB7XG4gIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XG4gIHRoaXMud2lkdGggPSB0aGlzLmJvdW5kaW5nUmVjdC53aWR0aDtcbiAgdGhpcy5oZWlnaHQgPSB0aGlzLmJvdW5kaW5nUmVjdC5oZWlnaHQ7XG5cbiAgdGhpcy5zaXplID0gTWF0aC5tYXgodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xufVxuXG5FbGVtZW50TWV0cmljcy5wcm90b3R5cGUgPSB7XG4gIGdldCBib3VuZGluZ1JlY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgfSxcblxuICBmdXJ0aGVzdENvcm5lckRpc3RhbmNlRnJvbTogZnVuY3Rpb24oeCwgeSkge1xuICAgIHZhciB0b3BMZWZ0ID0gVXRpbGl0eS5kaXN0YW5jZSh4LCB5LCAwLCAwKTtcbiAgICB2YXIgdG9wUmlnaHQgPSBVdGlsaXR5LmRpc3RhbmNlKHgsIHksIHRoaXMud2lkdGgsIDApO1xuICAgIHZhciBib3R0b21MZWZ0ID0gVXRpbGl0eS5kaXN0YW5jZSh4LCB5LCAwLCB0aGlzLmhlaWdodCk7XG4gICAgdmFyIGJvdHRvbVJpZ2h0ID0gVXRpbGl0eS5kaXN0YW5jZSh4LCB5LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG5cbiAgICByZXR1cm4gTWF0aC5tYXgodG9wTGVmdCwgdG9wUmlnaHQsIGJvdHRvbUxlZnQsIGJvdHRvbVJpZ2h0KTtcbiAgfVxufTtcblxuLyoqXG4gKiBAcGFyYW0ge0hUTUxFbGVtZW50fSBlbGVtZW50XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gUmlwcGxlKGVsZW1lbnQpIHtcbiAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgdGhpcy5jb2xvciA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLmNvbG9yO1xuXG4gIHRoaXMud2F2ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB0aGlzLndhdmVDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgdGhpcy53YXZlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHRoaXMuY29sb3I7XG4gIHRoaXMud2F2ZS5jbGFzc0xpc3QuYWRkKCd3YXZlJyk7XG4gIHRoaXMud2F2ZUNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCd3YXZlLWNvbnRhaW5lcicpO1xuICBkb20odGhpcy53YXZlQ29udGFpbmVyKS5hcHBlbmRDaGlsZCh0aGlzLndhdmUpO1xuXG4gIHRoaXMucmVzZXRJbnRlcmFjdGlvblN0YXRlKCk7XG59XG5cblJpcHBsZS5NQVhfUkFESVVTID0gMzAwO1xuXG5SaXBwbGUucHJvdG90eXBlID0ge1xuICBnZXQgcmVjZW50ZXJzKCkge1xuICAgIHJldHVybiB0aGlzLmVsZW1lbnQucmVjZW50ZXJzO1xuICB9LFxuXG4gIGdldCBjZW50ZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5jZW50ZXI7XG4gIH0sXG5cbiAgZ2V0IG1vdXNlRG93bkVsYXBzZWQoKSB7XG4gICAgdmFyIGVsYXBzZWQ7XG5cbiAgICBpZiAoIXRoaXMubW91c2VEb3duU3RhcnQpIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIGVsYXBzZWQgPSBVdGlsaXR5Lm5vdygpIC0gdGhpcy5tb3VzZURvd25TdGFydDtcblxuICAgIGlmICh0aGlzLm1vdXNlVXBTdGFydCkge1xuICAgICAgZWxhcHNlZCAtPSB0aGlzLm1vdXNlVXBFbGFwc2VkO1xuICAgIH1cblxuICAgIHJldHVybiBlbGFwc2VkO1xuICB9LFxuXG4gIGdldCBtb3VzZVVwRWxhcHNlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5tb3VzZVVwU3RhcnQgPyBVdGlsaXR5Lm5vdygpIC0gdGhpcy5tb3VzZVVwU3RhcnQgOiAwO1xuICB9LFxuXG4gIGdldCBtb3VzZURvd25FbGFwc2VkU2Vjb25kcygpIHtcbiAgICByZXR1cm4gdGhpcy5tb3VzZURvd25FbGFwc2VkIC8gMTAwMDtcbiAgfSxcblxuICBnZXQgbW91c2VVcEVsYXBzZWRTZWNvbmRzKCkge1xuICAgIHJldHVybiB0aGlzLm1vdXNlVXBFbGFwc2VkIC8gMTAwMDtcbiAgfSxcblxuICBnZXQgbW91c2VJbnRlcmFjdGlvblNlY29uZHMoKSB7XG4gICAgcmV0dXJuIHRoaXMubW91c2VEb3duRWxhcHNlZFNlY29uZHMgKyB0aGlzLm1vdXNlVXBFbGFwc2VkU2Vjb25kcztcbiAgfSxcblxuICBnZXQgaW5pdGlhbE9wYWNpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5pbml0aWFsT3BhY2l0eTtcbiAgfSxcblxuICBnZXQgb3BhY2l0eURlY2F5VmVsb2NpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudC5vcGFjaXR5RGVjYXlWZWxvY2l0eTtcbiAgfSxcblxuICBnZXQgcmFkaXVzKCkge1xuICAgIHZhciB3aWR0aDIgPSB0aGlzLmNvbnRhaW5lck1ldHJpY3Mud2lkdGggKiB0aGlzLmNvbnRhaW5lck1ldHJpY3Mud2lkdGg7XG4gICAgdmFyIGhlaWdodDIgPSB0aGlzLmNvbnRhaW5lck1ldHJpY3MuaGVpZ2h0ICogdGhpcy5jb250YWluZXJNZXRyaWNzLmhlaWdodDtcbiAgICB2YXIgd2F2ZVJhZGl1cyA9XG4gICAgICAgIE1hdGgubWluKE1hdGguc3FydCh3aWR0aDIgKyBoZWlnaHQyKSwgUmlwcGxlLk1BWF9SQURJVVMpICogMS4xICsgNTtcblxuICAgIHZhciBkdXJhdGlvbiA9IDEuMSAtIDAuMiAqICh3YXZlUmFkaXVzIC8gUmlwcGxlLk1BWF9SQURJVVMpO1xuICAgIHZhciB0aW1lTm93ID0gdGhpcy5tb3VzZUludGVyYWN0aW9uU2Vjb25kcyAvIGR1cmF0aW9uO1xuICAgIHZhciBzaXplID0gd2F2ZVJhZGl1cyAqICgxIC0gTWF0aC5wb3coODAsIC10aW1lTm93KSk7XG5cbiAgICByZXR1cm4gTWF0aC5hYnMoc2l6ZSk7XG4gIH0sXG5cbiAgZ2V0IG9wYWNpdHkoKSB7XG4gICAgaWYgKCF0aGlzLm1vdXNlVXBTdGFydCkge1xuICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbE9wYWNpdHk7XG4gICAgfVxuXG4gICAgcmV0dXJuIE1hdGgubWF4KFxuICAgICAgICAwLFxuICAgICAgICB0aGlzLmluaXRpYWxPcGFjaXR5IC1cbiAgICAgICAgICAgIHRoaXMubW91c2VVcEVsYXBzZWRTZWNvbmRzICogdGhpcy5vcGFjaXR5RGVjYXlWZWxvY2l0eSk7XG4gIH0sXG5cbiAgZ2V0IG91dGVyT3BhY2l0eSgpIHtcbiAgICAvLyBMaW5lYXIgaW5jcmVhc2UgaW4gYmFja2dyb3VuZCBvcGFjaXR5LCBjYXBwZWQgYXQgdGhlIG9wYWNpdHlcbiAgICAvLyBvZiB0aGUgd2F2ZWZyb250ICh3YXZlT3BhY2l0eSkuXG4gICAgdmFyIG91dGVyT3BhY2l0eSA9IHRoaXMubW91c2VVcEVsYXBzZWRTZWNvbmRzICogMC4zO1xuICAgIHZhciB3YXZlT3BhY2l0eSA9IHRoaXMub3BhY2l0eTtcblxuICAgIHJldHVybiBNYXRoLm1heCgwLCBNYXRoLm1pbihvdXRlck9wYWNpdHksIHdhdmVPcGFjaXR5KSk7XG4gIH0sXG5cbiAgZ2V0IGlzT3BhY2l0eUZ1bGx5RGVjYXllZCgpIHtcbiAgICByZXR1cm4gdGhpcy5vcGFjaXR5IDwgMC4wMSAmJlxuICAgICAgICB0aGlzLnJhZGl1cyA+PSBNYXRoLm1pbih0aGlzLm1heFJhZGl1cywgUmlwcGxlLk1BWF9SQURJVVMpO1xuICB9LFxuXG4gIGdldCBpc1Jlc3RpbmdBdE1heFJhZGl1cygpIHtcbiAgICByZXR1cm4gdGhpcy5vcGFjaXR5ID49IHRoaXMuaW5pdGlhbE9wYWNpdHkgJiZcbiAgICAgICAgdGhpcy5yYWRpdXMgPj0gTWF0aC5taW4odGhpcy5tYXhSYWRpdXMsIFJpcHBsZS5NQVhfUkFESVVTKTtcbiAgfSxcblxuICBnZXQgaXNBbmltYXRpb25Db21wbGV0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5tb3VzZVVwU3RhcnQgPyB0aGlzLmlzT3BhY2l0eUZ1bGx5RGVjYXllZCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1Jlc3RpbmdBdE1heFJhZGl1cztcbiAgfSxcblxuICBnZXQgdHJhbnNsYXRpb25GcmFjdGlvbigpIHtcbiAgICByZXR1cm4gTWF0aC5taW4oXG4gICAgICAgIDEsIHRoaXMucmFkaXVzIC8gdGhpcy5jb250YWluZXJNZXRyaWNzLnNpemUgKiAyIC8gTWF0aC5zcXJ0KDIpKTtcbiAgfSxcblxuICBnZXQgeE5vdygpIHtcbiAgICBpZiAodGhpcy54RW5kKSB7XG4gICAgICByZXR1cm4gdGhpcy54U3RhcnQgKyB0aGlzLnRyYW5zbGF0aW9uRnJhY3Rpb24gKiAodGhpcy54RW5kIC0gdGhpcy54U3RhcnQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnhTdGFydDtcbiAgfSxcblxuICBnZXQgeU5vdygpIHtcbiAgICBpZiAodGhpcy55RW5kKSB7XG4gICAgICByZXR1cm4gdGhpcy55U3RhcnQgKyB0aGlzLnRyYW5zbGF0aW9uRnJhY3Rpb24gKiAodGhpcy55RW5kIC0gdGhpcy55U3RhcnQpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnlTdGFydDtcbiAgfSxcblxuICBnZXQgaXNNb3VzZURvd24oKSB7XG4gICAgcmV0dXJuIHRoaXMubW91c2VEb3duU3RhcnQgJiYgIXRoaXMubW91c2VVcFN0YXJ0O1xuICB9LFxuXG4gIHJlc2V0SW50ZXJhY3Rpb25TdGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5tYXhSYWRpdXMgPSAwO1xuICAgIHRoaXMubW91c2VEb3duU3RhcnQgPSAwO1xuICAgIHRoaXMubW91c2VVcFN0YXJ0ID0gMDtcblxuICAgIHRoaXMueFN0YXJ0ID0gMDtcbiAgICB0aGlzLnlTdGFydCA9IDA7XG4gICAgdGhpcy54RW5kID0gMDtcbiAgICB0aGlzLnlFbmQgPSAwO1xuICAgIHRoaXMuc2xpZGVEaXN0YW5jZSA9IDA7XG5cbiAgICB0aGlzLmNvbnRhaW5lck1ldHJpY3MgPSBuZXcgRWxlbWVudE1ldHJpY3ModGhpcy5lbGVtZW50KTtcbiAgfSxcblxuICBkcmF3OiBmdW5jdGlvbigpIHtcbiAgICB2YXIgc2NhbGU7XG4gICAgdmFyIGR4O1xuICAgIHZhciBkeTtcblxuICAgIHRoaXMud2F2ZS5zdHlsZS5vcGFjaXR5ID0gdGhpcy5vcGFjaXR5O1xuXG4gICAgc2NhbGUgPSB0aGlzLnJhZGl1cyAvICh0aGlzLmNvbnRhaW5lck1ldHJpY3Muc2l6ZSAvIDIpO1xuICAgIGR4ID0gdGhpcy54Tm93IC0gKHRoaXMuY29udGFpbmVyTWV0cmljcy53aWR0aCAvIDIpO1xuICAgIGR5ID0gdGhpcy55Tm93IC0gKHRoaXMuY29udGFpbmVyTWV0cmljcy5oZWlnaHQgLyAyKTtcblxuXG4gICAgLy8gMmQgdHJhbnNmb3JtIGZvciBzYWZhcmkgYmVjYXVzZSBvZiBib3JkZXItcmFkaXVzIGFuZCBvdmVyZmxvdzpoaWRkZW5cbiAgICAvLyBjbGlwcGluZyBidWcuIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD05ODUzOFxuICAgIHRoaXMud2F2ZUNvbnRhaW5lci5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPVxuICAgICAgICAndHJhbnNsYXRlKCcgKyBkeCArICdweCwgJyArIGR5ICsgJ3B4KSc7XG4gICAgdGhpcy53YXZlQ29udGFpbmVyLnN0eWxlLnRyYW5zZm9ybSA9XG4gICAgICAgICd0cmFuc2xhdGUzZCgnICsgZHggKyAncHgsICcgKyBkeSArICdweCwgMCknO1xuICAgIHRoaXMud2F2ZS5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSAnc2NhbGUoJyArIHNjYWxlICsgJywnICsgc2NhbGUgKyAnKSc7XG4gICAgdGhpcy53YXZlLnN0eWxlLnRyYW5zZm9ybSA9ICdzY2FsZTNkKCcgKyBzY2FsZSArICcsJyArIHNjYWxlICsgJywxKSc7XG4gIH0sXG5cbiAgLyoqIEBwYXJhbSB7RXZlbnQ9fSBldmVudCAqL1xuICBkb3duQWN0aW9uOiBmdW5jdGlvbihldmVudCkge1xuICAgIHZhciB4Q2VudGVyID0gdGhpcy5jb250YWluZXJNZXRyaWNzLndpZHRoIC8gMjtcbiAgICB2YXIgeUNlbnRlciA9IHRoaXMuY29udGFpbmVyTWV0cmljcy5oZWlnaHQgLyAyO1xuXG4gICAgdGhpcy5yZXNldEludGVyYWN0aW9uU3RhdGUoKTtcbiAgICB0aGlzLm1vdXNlRG93blN0YXJ0ID0gVXRpbGl0eS5ub3coKTtcblxuICAgIGlmICh0aGlzLmNlbnRlcikge1xuICAgICAgdGhpcy54U3RhcnQgPSB4Q2VudGVyO1xuICAgICAgdGhpcy55U3RhcnQgPSB5Q2VudGVyO1xuICAgICAgdGhpcy5zbGlkZURpc3RhbmNlID1cbiAgICAgICAgICBVdGlsaXR5LmRpc3RhbmNlKHRoaXMueFN0YXJ0LCB0aGlzLnlTdGFydCwgdGhpcy54RW5kLCB0aGlzLnlFbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnhTdGFydCA9IGV2ZW50ID9cbiAgICAgICAgICBldmVudC5kZXRhaWwueCAtIHRoaXMuY29udGFpbmVyTWV0cmljcy5ib3VuZGluZ1JlY3QubGVmdCA6XG4gICAgICAgICAgdGhpcy5jb250YWluZXJNZXRyaWNzLndpZHRoIC8gMjtcbiAgICAgIHRoaXMueVN0YXJ0ID0gZXZlbnQgP1xuICAgICAgICAgIGV2ZW50LmRldGFpbC55IC0gdGhpcy5jb250YWluZXJNZXRyaWNzLmJvdW5kaW5nUmVjdC50b3AgOlxuICAgICAgICAgIHRoaXMuY29udGFpbmVyTWV0cmljcy5oZWlnaHQgLyAyO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnJlY2VudGVycykge1xuICAgICAgdGhpcy54RW5kID0geENlbnRlcjtcbiAgICAgIHRoaXMueUVuZCA9IHlDZW50ZXI7XG4gICAgICB0aGlzLnNsaWRlRGlzdGFuY2UgPVxuICAgICAgICAgIFV0aWxpdHkuZGlzdGFuY2UodGhpcy54U3RhcnQsIHRoaXMueVN0YXJ0LCB0aGlzLnhFbmQsIHRoaXMueUVuZCk7XG4gICAgfVxuXG4gICAgdGhpcy5tYXhSYWRpdXMgPSB0aGlzLmNvbnRhaW5lck1ldHJpY3MuZnVydGhlc3RDb3JuZXJEaXN0YW5jZUZyb20oXG4gICAgICAgIHRoaXMueFN0YXJ0LCB0aGlzLnlTdGFydCk7XG5cbiAgICB0aGlzLndhdmVDb250YWluZXIuc3R5bGUudG9wID1cbiAgICAgICAgKHRoaXMuY29udGFpbmVyTWV0cmljcy5oZWlnaHQgLSB0aGlzLmNvbnRhaW5lck1ldHJpY3Muc2l6ZSkgLyAyICsgJ3B4JztcbiAgICB0aGlzLndhdmVDb250YWluZXIuc3R5bGUubGVmdCA9XG4gICAgICAgICh0aGlzLmNvbnRhaW5lck1ldHJpY3Mud2lkdGggLSB0aGlzLmNvbnRhaW5lck1ldHJpY3Muc2l6ZSkgLyAyICsgJ3B4JztcblxuICAgIHRoaXMud2F2ZUNvbnRhaW5lci5zdHlsZS53aWR0aCA9IHRoaXMuY29udGFpbmVyTWV0cmljcy5zaXplICsgJ3B4JztcbiAgICB0aGlzLndhdmVDb250YWluZXIuc3R5bGUuaGVpZ2h0ID0gdGhpcy5jb250YWluZXJNZXRyaWNzLnNpemUgKyAncHgnO1xuICB9LFxuXG4gIC8qKiBAcGFyYW0ge0V2ZW50PX0gZXZlbnQgKi9cbiAgdXBBY3Rpb246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmlzTW91c2VEb3duKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5tb3VzZVVwU3RhcnQgPSBVdGlsaXR5Lm5vdygpO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24oKSB7XG4gICAgZG9tKGRvbSh0aGlzLndhdmVDb250YWluZXIpLnBhcmVudE5vZGUpLnJlbW92ZUNoaWxkKHRoaXMud2F2ZUNvbnRhaW5lcik7XG4gIH1cbn07XG5cbi8qKlxuTWF0ZXJpYWwgZGVzaWduOiBbU3VyZmFjZVxucmVhY3Rpb25dKGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vZGVzaWduL3NwZWMvYW5pbWF0aW9uL3Jlc3BvbnNpdmUtaW50ZXJhY3Rpb24uaHRtbCNyZXNwb25zaXZlLWludGVyYWN0aW9uLXN1cmZhY2UtcmVhY3Rpb24pXG5cbmBwYXBlci1yaXBwbGVgIHByb3ZpZGVzIGEgdmlzdWFsIGVmZmVjdCB0aGF0IG90aGVyIHBhcGVyIGVsZW1lbnRzIGNhblxudXNlIHRvIHNpbXVsYXRlIGEgcmlwcGxpbmcgZWZmZWN0IGVtYW5hdGluZyBmcm9tIHRoZSBwb2ludCBvZiBjb250YWN0LiAgVGhlXG5lZmZlY3QgY2FuIGJlIHZpc3VhbGl6ZWQgYXMgYSBjb25jZW50cmljIGNpcmNsZSB3aXRoIG1vdGlvbi5cblxuRXhhbXBsZTpcblxuICAgIDxkaXYgc3R5bGU9XCJwb3NpdGlvbjpyZWxhdGl2ZVwiPlxuICAgICAgPHBhcGVyLXJpcHBsZT48L3BhcGVyLXJpcHBsZT5cbiAgICA8L2Rpdj5cblxuTm90ZSwgaXQncyBpbXBvcnRhbnQgdGhhdCB0aGUgcGFyZW50IGNvbnRhaW5lciBvZiB0aGUgcmlwcGxlIGJlIHJlbGF0aXZlXG5wb3NpdGlvbiwgb3RoZXJ3aXNlIHRoZSByaXBwbGUgd2lsbCBlbWFuYXRlIG91dHNpZGUgb2YgdGhlIGRlc2lyZWQgY29udGFpbmVyLlxuXG5gcGFwZXItcmlwcGxlYCBsaXN0ZW5zIHRvIFwibW91c2Vkb3duXCIgYW5kIFwibW91c2V1cFwiIGV2ZW50cyBzbyBpdCB3b3VsZCBkaXNwbGF5XG5yaXBwbGUgZWZmZWN0IHdoZW4gdG91Y2hlcyBvbiBpdC4gIFlvdSBjYW4gYWxzbyBkZWZlYXQgdGhlIGRlZmF1bHQgYmVoYXZpb3IgYW5kXG5tYW51YWxseSByb3V0ZSB0aGUgZG93biBhbmQgdXAgYWN0aW9ucyB0byB0aGUgcmlwcGxlIGVsZW1lbnQuICBOb3RlIHRoYXQgaXQgaXNcbmltcG9ydGFudCBpZiB5b3UgY2FsbCBgZG93bkFjdGlvbigpYCB5b3Ugd2lsbCBoYXZlIHRvIG1ha2Ugc3VyZSB0byBjYWxsXG5gdXBBY3Rpb24oKWAgc28gdGhhdCBgcGFwZXItcmlwcGxlYCB3b3VsZCBlbmQgdGhlIGFuaW1hdGlvbiBsb29wLlxuXG5FeGFtcGxlOlxuXG4gICAgPHBhcGVyLXJpcHBsZSBpZD1cInJpcHBsZVwiIHN0eWxlPVwicG9pbnRlci1ldmVudHM6IG5vbmU7XCI+PC9wYXBlci1yaXBwbGU+XG4gICAgLi4uXG4gICAgZG93bkFjdGlvbjogZnVuY3Rpb24oZSkge1xuICAgICAgdGhpcy4kLnJpcHBsZS5kb3duQWN0aW9uKGUuZGV0YWlsKTtcbiAgICB9LFxuICAgIHVwQWN0aW9uOiBmdW5jdGlvbihlKSB7XG4gICAgICB0aGlzLiQucmlwcGxlLnVwQWN0aW9uKCk7XG4gICAgfVxuXG5TdHlsaW5nIHJpcHBsZSBlZmZlY3Q6XG5cbiAgVXNlIENTUyBjb2xvciBwcm9wZXJ0eSB0byBzdHlsZSB0aGUgcmlwcGxlOlxuXG4gICAgcGFwZXItcmlwcGxlIHtcbiAgICAgIGNvbG9yOiAjNDI4NWY0O1xuICAgIH1cblxuICBOb3RlIHRoYXQgQ1NTIGNvbG9yIHByb3BlcnR5IGlzIGluaGVyaXRlZCBzbyBpdCBpcyBub3QgcmVxdWlyZWQgdG8gc2V0IGl0IG9uXG4gIHRoZSBgcGFwZXItcmlwcGxlYCBlbGVtZW50IGRpcmVjdGx5LlxuXG5CeSBkZWZhdWx0LCB0aGUgcmlwcGxlIGlzIGNlbnRlcmVkIG9uIHRoZSBwb2ludCBvZiBjb250YWN0LiAgQXBwbHkgdGhlXG5gcmVjZW50ZXJzYCBhdHRyaWJ1dGUgdG8gaGF2ZSB0aGUgcmlwcGxlIGdyb3cgdG93YXJkIHRoZSBjZW50ZXIgb2YgaXRzXG5jb250YWluZXIuXG5cbiAgICA8cGFwZXItcmlwcGxlIHJlY2VudGVycz48L3BhcGVyLXJpcHBsZT5cblxuWW91IGNhbiBhbHNvICBjZW50ZXIgdGhlIHJpcHBsZSBpbnNpZGUgaXRzIGNvbnRhaW5lciBmcm9tIHRoZSBzdGFydC5cblxuICAgIDxwYXBlci1yaXBwbGUgY2VudGVyPjwvcGFwZXItcmlwcGxlPlxuXG5BcHBseSBgY2lyY2xlYCBjbGFzcyB0byBtYWtlIHRoZSByaXBwbGluZyBlZmZlY3Qgd2l0aGluIGEgY2lyY2xlLlxuXG4gICAgPHBhcGVyLXJpcHBsZSBjbGFzcz1cImNpcmNsZVwiPjwvcGFwZXItcmlwcGxlPlxuXG5AZWxlbWVudCBwYXBlci1yaXBwbGVcbkBkZW1vIGRlbW8vaW5kZXguaHRtbFxuKi9cblBvbHltZXIoe1xuICAvKiogQG92ZXJyaWRlICovXG4gIF90ZW1wbGF0ZTogaHRtbGBcbiAgICA8c3R5bGU+XG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGJvcmRlci1yYWRpdXM6IGluaGVyaXQ7XG4gICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcblxuICAgICAgICAvKiBTZWUgUG9seW1lckVsZW1lbnRzL3BhcGVyLWJlaGF2aW9ycy9pc3N1ZXMvMzQuIE9uIG5vbi1DaHJvbWUgYnJvd3NlcnMsXG4gICAgICAgICAqIGNyZWF0aW5nIGEgbm9kZSAod2l0aCBhIHBvc2l0aW9uOmFic29sdXRlKSBpbiB0aGUgbWlkZGxlIG9mIGFuIGV2ZW50XG4gICAgICAgICAqIGhhbmRsZXIgXCJpbnRlcnJ1cHRzXCIgdGhhdCBldmVudCBoYW5kbGVyICh3aGljaCBoYXBwZW5zIHdoZW4gdGhlXG4gICAgICAgICAqIHJpcHBsZSBpcyBjcmVhdGVkIG9uIGRlbWFuZCkgKi9cbiAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFthbmltYXRpbmddKSB7XG4gICAgICAgIC8qIFRoaXMgcmVzb2x2ZXMgYSByZW5kZXJpbmcgaXNzdWUgaW4gQ2hyb21lIChhcyBvZiA0MCkgd2hlcmUgdGhlXG4gICAgICAgICAgIHJpcHBsZSBpcyBub3QgcHJvcGVybHkgY2xpcHBlZCBieSBpdHMgcGFyZW50ICh3aGljaCBtYXkgaGF2ZVxuICAgICAgICAgICByb3VuZGVkIGNvcm5lcnMpLiBTZWU6IGh0dHA6Ly9qc2Jpbi5jb20vdGVtZXhhLzRcblxuICAgICAgICAgICBOb3RlOiBXZSBvbmx5IGFwcGx5IHRoaXMgc3R5bGUgY29uZGl0aW9uYWxseS4gT3RoZXJ3aXNlLCB0aGUgYnJvd3NlclxuICAgICAgICAgICB3aWxsIGNyZWF0ZSBhIG5ldyBjb21wb3NpdGluZyBsYXllciBmb3IgZXZlcnkgcmlwcGxlIGVsZW1lbnQgb24gdGhlXG4gICAgICAgICAgIHBhZ2UsIGFuZCB0aGF0IHdvdWxkIGJlIGJhZC4gKi9cbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLCAwKTtcbiAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGUzZCgwLCAwLCAwKTtcbiAgICAgIH1cblxuICAgICAgI2JhY2tncm91bmQsXG4gICAgICAjd2F2ZXMsXG4gICAgICAud2F2ZS1jb250YWluZXIsXG4gICAgICAud2F2ZSB7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIHRvcDogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgI2JhY2tncm91bmQsXG4gICAgICAud2F2ZSB7XG4gICAgICAgIG9wYWNpdHk6IDA7XG4gICAgICB9XG5cbiAgICAgICN3YXZlcyxcbiAgICAgIC53YXZlIHtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLndhdmUtY29udGFpbmVyLFxuICAgICAgLndhdmUge1xuICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KC5jaXJjbGUpICNiYWNrZ3JvdW5kLFxuICAgICAgOmhvc3QoLmNpcmNsZSkgI3dhdmVzIHtcbiAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xuICAgICAgfVxuXG4gICAgICA6aG9zdCguY2lyY2xlKSAud2F2ZS1jb250YWluZXIge1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgfVxuICAgIDwvc3R5bGU+XG5cbiAgICA8ZGl2IGlkPVwiYmFja2dyb3VuZFwiPjwvZGl2PlxuICAgIDxkaXYgaWQ9XCJ3YXZlc1wiPjwvZGl2PlxuYCxcblxuICBpczogJ3BhcGVyLXJpcHBsZScsXG4gIGJlaGF2aW9yczogW0lyb25BMTF5S2V5c0JlaGF2aW9yXSxcblxuICBwcm9wZXJ0aWVzOiB7XG4gICAgLyoqXG4gICAgICogVGhlIGluaXRpYWwgb3BhY2l0eSBzZXQgb24gdGhlIHdhdmUuXG4gICAgICogQHR5cGUgbnVtYmVyXG4gICAgICogQGRlZmF1bHQgMC4yNVxuICAgICAqL1xuICAgIGluaXRpYWxPcGFjaXR5OiB7dHlwZTogTnVtYmVyLCB2YWx1ZTogMC4yNX0sXG5cbiAgICAvKipcbiAgICAgKiBIb3cgZmFzdCAob3BhY2l0eSBwZXIgc2Vjb25kKSB0aGUgd2F2ZSBmYWRlcyBvdXQuXG4gICAgICpcbiAgICAgKiBAdHlwZSBudW1iZXJcbiAgICAgKiBAZGVmYXVsdCAwLjhcbiAgICAgKi9cbiAgICBvcGFjaXR5RGVjYXlWZWxvY2l0eToge3R5cGU6IE51bWJlciwgdmFsdWU6IDAuOH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCByaXBwbGVzIHdpbGwgZXhoaWJpdCBhIGdyYXZpdGF0aW9uYWwgcHVsbCB0b3dhcmRzXG4gICAgICogdGhlIGNlbnRlciBvZiB0aGVpciBjb250YWluZXIgYXMgdGhleSBmYWRlIGF3YXkuXG4gICAgICpcbiAgICAgKiBAdHlwZSBib29sZWFuXG4gICAgICogQGRlZmF1bHQgZmFsc2VcbiAgICAgKi9cbiAgICByZWNlbnRlcnM6IHt0eXBlOiBCb29sZWFuLCB2YWx1ZTogZmFsc2V9LFxuXG4gICAgLyoqXG4gICAgICogSWYgdHJ1ZSwgcmlwcGxlcyB3aWxsIGNlbnRlciBpbnNpZGUgaXRzIGNvbnRhaW5lclxuICAgICAqXG4gICAgICogQHR5cGUgYm9vbGVhblxuICAgICAqIEBkZWZhdWx0IGZhbHNlXG4gICAgICovXG4gICAgY2VudGVyOiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlfSxcblxuICAgIC8qKlxuICAgICAqIEEgbGlzdCBvZiB0aGUgdmlzdWFsIHJpcHBsZXMuXG4gICAgICpcbiAgICAgKiBAdHlwZSBBcnJheVxuICAgICAqIEBkZWZhdWx0IFtdXG4gICAgICovXG4gICAgcmlwcGxlczoge1xuICAgICAgdHlwZTogQXJyYXksXG4gICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJ1ZSB3aGVuIHRoZXJlIGFyZSB2aXNpYmxlIHJpcHBsZXMgYW5pbWF0aW5nIHdpdGhpbiB0aGVcbiAgICAgKiBlbGVtZW50LlxuICAgICAqL1xuICAgIGFuaW1hdGluZzpcbiAgICAgICAge3R5cGU6IEJvb2xlYW4sIHJlYWRPbmx5OiB0cnVlLCByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWUsIHZhbHVlOiBmYWxzZX0sXG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCB0aGUgcmlwcGxlIHdpbGwgcmVtYWluIGluIHRoZSBcImRvd25cIiBzdGF0ZSB1bnRpbCBgaG9sZERvd25gXG4gICAgICogaXMgc2V0IHRvIGZhbHNlIGFnYWluLlxuICAgICAqL1xuICAgIGhvbGREb3duOiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlLCBvYnNlcnZlcjogJ19ob2xkRG93bkNoYW5nZWQnfSxcblxuICAgIC8qKlxuICAgICAqIElmIHRydWUsIHRoZSByaXBwbGUgd2lsbCBub3QgZ2VuZXJhdGUgYSByaXBwbGUgZWZmZWN0XG4gICAgICogdmlhIHBvaW50ZXIgaW50ZXJhY3Rpb24uXG4gICAgICogQ2FsbGluZyByaXBwbGUncyBpbXBlcmF0aXZlIGFwaSBsaWtlIGBzaW11bGF0ZWRSaXBwbGVgIHdpbGxcbiAgICAgKiBzdGlsbCBnZW5lcmF0ZSB0aGUgcmlwcGxlIGVmZmVjdC5cbiAgICAgKi9cbiAgICBub2luazoge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX0sXG5cbiAgICBfYW5pbWF0aW5nOiB7dHlwZTogQm9vbGVhbn0sXG5cbiAgICBfYm91bmRBbmltYXRlOiB7XG4gICAgICB0eXBlOiBGdW5jdGlvbixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZS5iaW5kKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBnZXQgdGFyZ2V0KCkge1xuICAgIHJldHVybiB0aGlzLmtleUV2ZW50VGFyZ2V0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBAdHlwZSB7IU9iamVjdH1cbiAgICovXG4gIGtleUJpbmRpbmdzOiB7XG4gICAgJ2VudGVyOmtleWRvd24nOiAnX29uRW50ZXJLZXlkb3duJyxcbiAgICAnc3BhY2U6a2V5ZG93bic6ICdfb25TcGFjZUtleWRvd24nLFxuICAgICdzcGFjZTprZXl1cCc6ICdfb25TcGFjZUtleXVwJ1xuICB9LFxuXG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgYXR0YWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vIFNldCB1cCBhMTF5S2V5c0JlaGF2aW9yIHRvIGxpc3RlbiB0byBrZXkgZXZlbnRzIG9uIHRoZSB0YXJnZXQsXG4gICAgLy8gc28gdGhhdCBzcGFjZSBhbmQgZW50ZXIgYWN0aXZhdGUgdGhlIHJpcHBsZSBldmVuIGlmIHRoZSB0YXJnZXQgZG9lc24ndFxuICAgIC8vIGhhbmRsZSBrZXkgZXZlbnRzLiBUaGUga2V5IGhhbmRsZXJzIGRlYWwgd2l0aCBgbm9pbmtgIHRoZW1zZWx2ZXMuXG4gICAgaWYgKGRvbSh0aGlzKS5wYXJlbnROb2RlLm5vZGVUeXBlID09IDExKSB7ICAvLyBET0NVTUVOVF9GUkFHTUVOVF9OT0RFXG4gICAgICB0aGlzLmtleUV2ZW50VGFyZ2V0ID0gZG9tKHRoaXMpLmdldE93bmVyUm9vdCgpLmhvc3Q7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMua2V5RXZlbnRUYXJnZXQgPSBkb20odGhpcykucGFyZW50Tm9kZTtcbiAgICB9XG4gICAgdmFyIGtleUV2ZW50VGFyZ2V0ID0gLyoqIEB0eXBlIHshRXZlbnRUYXJnZXR9ICovICh0aGlzLmtleUV2ZW50VGFyZ2V0KTtcbiAgICB0aGlzLmxpc3RlbihrZXlFdmVudFRhcmdldCwgJ3VwJywgJ3VpVXBBY3Rpb24nKTtcbiAgICB0aGlzLmxpc3RlbihrZXlFdmVudFRhcmdldCwgJ2Rvd24nLCAndWlEb3duQWN0aW9uJyk7XG4gIH0sXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBkZXRhY2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy51bmxpc3Rlbih0aGlzLmtleUV2ZW50VGFyZ2V0LCAndXAnLCAndWlVcEFjdGlvbicpO1xuICAgIHRoaXMudW5saXN0ZW4odGhpcy5rZXlFdmVudFRhcmdldCwgJ2Rvd24nLCAndWlEb3duQWN0aW9uJyk7XG4gICAgdGhpcy5rZXlFdmVudFRhcmdldCA9IG51bGw7XG4gIH0sXG5cbiAgZ2V0IHNob3VsZEtlZXBBbmltYXRpbmcoKSB7XG4gICAgZm9yICh2YXIgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucmlwcGxlcy5sZW5ndGg7ICsraW5kZXgpIHtcbiAgICAgIGlmICghdGhpcy5yaXBwbGVzW2luZGV4XS5pc0FuaW1hdGlvbkNvbXBsZXRlKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfSxcblxuICBzaW11bGF0ZWRSaXBwbGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuZG93bkFjdGlvbihudWxsKTtcblxuICAgIC8vIFBsZWFzZSBzZWUgcG9seW1lci9wb2x5bWVyIzEzMDVcbiAgICB0aGlzLmFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy51cEFjdGlvbigpO1xuICAgIH0sIDEpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcm92b2tlcyBhIHJpcHBsZSBkb3duIGVmZmVjdCB2aWEgYSBVSSBldmVudCxcbiAgICogcmVzcGVjdGluZyB0aGUgYG5vaW5rYCBwcm9wZXJ0eS5cbiAgICogQHBhcmFtIHtFdmVudD19IGV2ZW50XG4gICAqL1xuICB1aURvd25BY3Rpb246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKCF0aGlzLm5vaW5rKSB7XG4gICAgICB0aGlzLmRvd25BY3Rpb24oZXZlbnQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUHJvdm9rZXMgYSByaXBwbGUgZG93biBlZmZlY3QgdmlhIGEgVUkgZXZlbnQsXG4gICAqICpub3QqIHJlc3BlY3RpbmcgdGhlIGBub2lua2AgcHJvcGVydHkuXG4gICAqIEBwYXJhbSB7RXZlbnQ9fSBldmVudFxuICAgKi9cbiAgZG93bkFjdGlvbjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAodGhpcy5ob2xkRG93biAmJiB0aGlzLnJpcHBsZXMubGVuZ3RoID4gMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciByaXBwbGUgPSB0aGlzLmFkZFJpcHBsZSgpO1xuXG4gICAgcmlwcGxlLmRvd25BY3Rpb24oZXZlbnQpO1xuXG4gICAgaWYgKCF0aGlzLl9hbmltYXRpbmcpIHtcbiAgICAgIHRoaXMuX2FuaW1hdGluZyA9IHRydWU7XG4gICAgICB0aGlzLmFuaW1hdGUoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFByb3Zva2VzIGEgcmlwcGxlIHVwIGVmZmVjdCB2aWEgYSBVSSBldmVudCxcbiAgICogcmVzcGVjdGluZyB0aGUgYG5vaW5rYCBwcm9wZXJ0eS5cbiAgICogQHBhcmFtIHtFdmVudD19IGV2ZW50XG4gICAqL1xuICB1aVVwQWN0aW9uOiBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICghdGhpcy5ub2luaykge1xuICAgICAgdGhpcy51cEFjdGlvbihldmVudCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBQcm92b2tlcyBhIHJpcHBsZSB1cCBlZmZlY3QgdmlhIGEgVUkgZXZlbnQsXG4gICAqICpub3QqIHJlc3BlY3RpbmcgdGhlIGBub2lua2AgcHJvcGVydHkuXG4gICAqIEBwYXJhbSB7RXZlbnQ9fSBldmVudFxuICAgKi9cbiAgdXBBY3Rpb246IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKHRoaXMuaG9sZERvd24pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJpcHBsZXMuZm9yRWFjaChmdW5jdGlvbihyaXBwbGUpIHtcbiAgICAgIHJpcHBsZS51cEFjdGlvbihldmVudCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9hbmltYXRpbmcgPSB0cnVlO1xuICAgIHRoaXMuYW5pbWF0ZSgpO1xuICB9LFxuXG4gIG9uQW5pbWF0aW9uQ29tcGxldGU6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX2FuaW1hdGluZyA9IGZhbHNlO1xuICAgIHRoaXMuJC5iYWNrZ3JvdW5kLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnO1xuICAgIHRoaXMuZmlyZSgndHJhbnNpdGlvbmVuZCcpO1xuICB9LFxuXG4gIGFkZFJpcHBsZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJpcHBsZSA9IG5ldyBSaXBwbGUodGhpcyk7XG5cbiAgICBkb20odGhpcy4kLndhdmVzKS5hcHBlbmRDaGlsZChyaXBwbGUud2F2ZUNvbnRhaW5lcik7XG4gICAgdGhpcy4kLmJhY2tncm91bmQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcmlwcGxlLmNvbG9yO1xuICAgIHRoaXMucmlwcGxlcy5wdXNoKHJpcHBsZSk7XG5cbiAgICB0aGlzLl9zZXRBbmltYXRpbmcodHJ1ZSk7XG5cbiAgICByZXR1cm4gcmlwcGxlO1xuICB9LFxuXG4gIHJlbW92ZVJpcHBsZTogZnVuY3Rpb24ocmlwcGxlKSB7XG4gICAgdmFyIHJpcHBsZUluZGV4ID0gdGhpcy5yaXBwbGVzLmluZGV4T2YocmlwcGxlKTtcblxuICAgIGlmIChyaXBwbGVJbmRleCA8IDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnJpcHBsZXMuc3BsaWNlKHJpcHBsZUluZGV4LCAxKTtcblxuICAgIHJpcHBsZS5yZW1vdmUoKTtcblxuICAgIGlmICghdGhpcy5yaXBwbGVzLmxlbmd0aCkge1xuICAgICAgdGhpcy5fc2V0QW5pbWF0aW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgYW5pbWF0ZVJpcHBsZSgpIGluc3RlYWQuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIG5hbWUgY29uZmxpY3RzIHdpdGggRWxlbWVudCNhbmltYXRlKCkuXG4gICAqIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L2FuaW1hdGUuXG4gICAqXG4gICAqIEBzdXBwcmVzcyB7Y2hlY2tUeXBlc31cbiAgICogQG92ZXJyaWRlXG4gICAqL1xuICBhbmltYXRlOiBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuX2FuaW1hdGluZykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgaW5kZXg7XG4gICAgdmFyIHJpcHBsZTtcblxuICAgIGZvciAoaW5kZXggPSAwOyBpbmRleCA8IHRoaXMucmlwcGxlcy5sZW5ndGg7ICsraW5kZXgpIHtcbiAgICAgIHJpcHBsZSA9IHRoaXMucmlwcGxlc1tpbmRleF07XG5cbiAgICAgIHJpcHBsZS5kcmF3KCk7XG5cbiAgICAgIHRoaXMuJC5iYWNrZ3JvdW5kLnN0eWxlLm9wYWNpdHkgPSByaXBwbGUub3V0ZXJPcGFjaXR5O1xuXG4gICAgICBpZiAocmlwcGxlLmlzT3BhY2l0eUZ1bGx5RGVjYXllZCAmJiAhcmlwcGxlLmlzUmVzdGluZ0F0TWF4UmFkaXVzKSB7XG4gICAgICAgIHRoaXMucmVtb3ZlUmlwcGxlKHJpcHBsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnNob3VsZEtlZXBBbmltYXRpbmcgJiYgdGhpcy5yaXBwbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5vbkFuaW1hdGlvbkNvbXBsZXRlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fYm91bmRBbmltYXRlKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFuIGFsaWFzIGZvciBhbmltYXRlKCkgd2hvc2UgbmFtZSBkb2VzIG5vdCBjb25mbGljdCB3aXRoIHRoZSBwbGF0Zm9ybVxuICAgKiBFbGVtZW50LmFuaW1hdGUoKSBtZXRob2QuXG4gICAqL1xuICBhbmltYXRlUmlwcGxlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5hbmltYXRlKCk7XG4gIH0sXG5cbiAgX29uRW50ZXJLZXlkb3duOiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLnVpRG93bkFjdGlvbigpO1xuICAgIHRoaXMuYXN5bmModGhpcy51aVVwQWN0aW9uLCAxKTtcbiAgfSxcblxuICBfb25TcGFjZUtleWRvd246IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMudWlEb3duQWN0aW9uKCk7XG4gIH0sXG5cbiAgX29uU3BhY2VLZXl1cDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy51aVVwQWN0aW9uKCk7XG4gIH0sXG5cbiAgLy8gbm90ZTogaG9sZERvd24gZG9lcyBub3QgcmVzcGVjdCBub2luayBzaW5jZSBpdCBjYW4gYmUgYSBmb2N1cyBiYXNlZFxuICAvLyBlZmZlY3QuXG4gIF9ob2xkRG93bkNoYW5nZWQ6IGZ1bmN0aW9uKG5ld1ZhbCwgb2xkVmFsKSB7XG4gICAgaWYgKG9sZFZhbCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChuZXdWYWwpIHtcbiAgICAgIHRoaXMuZG93bkFjdGlvbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVwQWN0aW9uKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gIEZpcmVkIHdoZW4gdGhlIGFuaW1hdGlvbiBmaW5pc2hlcy5cbiAgVGhpcyBpcyB1c2VmdWwgaWYgeW91IHdhbnQgdG8gd2FpdCB1bnRpbFxuICB0aGUgcmlwcGxlIGFuaW1hdGlvbiBmaW5pc2hlcyB0byBwZXJmb3JtIHNvbWUgYWN0aW9uLlxuXG4gIEBldmVudCB0cmFuc2l0aW9uZW5kXG4gIEBwYXJhbSB7e25vZGU6IE9iamVjdH19IGRldGFpbCBDb250YWlucyB0aGUgYW5pbWF0ZWQgbm9kZS5cbiAgKi9cbn0pO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzJztcbmltcG9ydCAnQHBvbHltZXIvcGFwZXItcmlwcGxlL3BhcGVyLXJpcHBsZS5qcyc7XG5cbmltcG9ydCB7SXJvbkJ1dHRvblN0YXRlSW1wbH0gZnJvbSAnQHBvbHltZXIvaXJvbi1iZWhhdmlvcnMvaXJvbi1idXR0b24tc3RhdGUuanMnO1xuaW1wb3J0IHtkb219IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLmRvbS5qcyc7XG5cbi8qKlxuICogYFBhcGVyUmlwcGxlQmVoYXZpb3JgIGR5bmFtaWNhbGx5IGltcGxlbWVudHMgYSByaXBwbGUgd2hlbiB0aGUgZWxlbWVudCBoYXNcbiAqIGZvY3VzIHZpYSBwb2ludGVyIG9yIGtleWJvYXJkLlxuICpcbiAqIE5PVEU6IFRoaXMgYmVoYXZpb3IgaXMgaW50ZW5kZWQgdG8gYmUgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIGFuZCBhZnRlclxuICogYElyb25CdXR0b25TdGF0ZWAgYW5kIGBJcm9uQ29udHJvbFN0YXRlYC5cbiAqXG4gKiBAcG9seW1lckJlaGF2aW9yIFBhcGVyUmlwcGxlQmVoYXZpb3JcbiAqL1xuZXhwb3J0IGNvbnN0IFBhcGVyUmlwcGxlQmVoYXZpb3IgPSB7XG4gIHByb3BlcnRpZXM6IHtcbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCB0aGUgZWxlbWVudCB3aWxsIG5vdCBwcm9kdWNlIGEgcmlwcGxlIGVmZmVjdCB3aGVuIGludGVyYWN0ZWRcbiAgICAgKiB3aXRoIHZpYSB0aGUgcG9pbnRlci5cbiAgICAgKi9cbiAgICBub2luazoge3R5cGU6IEJvb2xlYW4sIG9ic2VydmVyOiAnX25vaW5rQ2hhbmdlZCd9LFxuXG4gICAgLyoqXG4gICAgICogQHR5cGUge0VsZW1lbnR8dW5kZWZpbmVkfVxuICAgICAqL1xuICAgIF9yaXBwbGVDb250YWluZXI6IHtcbiAgICAgIHR5cGU6IE9iamVjdCxcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVuc3VyZXMgYSBgPHBhcGVyLXJpcHBsZT5gIGVsZW1lbnQgaXMgYXZhaWxhYmxlIHdoZW4gdGhlIGVsZW1lbnQgaXNcbiAgICogZm9jdXNlZC5cbiAgICovXG4gIF9idXR0b25TdGF0ZUNoYW5nZWQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLmZvY3VzZWQpIHtcbiAgICAgIHRoaXMuZW5zdXJlUmlwcGxlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbiBhZGRpdGlvbiB0byB0aGUgZnVuY3Rpb25hbGl0eSBwcm92aWRlZCBpbiBgSXJvbkJ1dHRvblN0YXRlYCwgZW5zdXJlc1xuICAgKiBhIHJpcHBsZSBlZmZlY3QgaXMgY3JlYXRlZCB3aGVuIHRoZSBlbGVtZW50IGlzIGluIGEgYHByZXNzZWRgIHN0YXRlLlxuICAgKi9cbiAgX2Rvd25IYW5kbGVyOiBmdW5jdGlvbihldmVudCkge1xuICAgIElyb25CdXR0b25TdGF0ZUltcGwuX2Rvd25IYW5kbGVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgIGlmICh0aGlzLnByZXNzZWQpIHtcbiAgICAgIHRoaXMuZW5zdXJlUmlwcGxlKGV2ZW50KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEVuc3VyZXMgdGhpcyBlbGVtZW50IGNvbnRhaW5zIGEgcmlwcGxlIGVmZmVjdC4gRm9yIHN0YXJ0dXAgZWZmaWNpZW5jeVxuICAgKiB0aGUgcmlwcGxlIGVmZmVjdCBpcyBkeW5hbWljYWxseSBvbiBkZW1hbmQgd2hlbiBuZWVkZWQuXG4gICAqIEBwYXJhbSB7IUV2ZW50PX0gb3B0VHJpZ2dlcmluZ0V2ZW50IChvcHRpb25hbCkgZXZlbnQgdGhhdCB0cmlnZ2VyZWQgdGhlXG4gICAqIHJpcHBsZS5cbiAgICovXG4gIGVuc3VyZVJpcHBsZTogZnVuY3Rpb24ob3B0VHJpZ2dlcmluZ0V2ZW50KSB7XG4gICAgaWYgKCF0aGlzLmhhc1JpcHBsZSgpKSB7XG4gICAgICB0aGlzLl9yaXBwbGUgPSB0aGlzLl9jcmVhdGVSaXBwbGUoKTtcbiAgICAgIHRoaXMuX3JpcHBsZS5ub2luayA9IHRoaXMubm9pbms7XG4gICAgICB2YXIgcmlwcGxlQ29udGFpbmVyID0gdGhpcy5fcmlwcGxlQ29udGFpbmVyIHx8IHRoaXMucm9vdDtcbiAgICAgIGlmIChyaXBwbGVDb250YWluZXIpIHtcbiAgICAgICAgZG9tKHJpcHBsZUNvbnRhaW5lcikuYXBwZW5kQ2hpbGQodGhpcy5fcmlwcGxlKTtcbiAgICAgIH1cbiAgICAgIGlmIChvcHRUcmlnZ2VyaW5nRXZlbnQpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGV2ZW50IGhhcHBlbmVkIGluc2lkZSBvZiB0aGUgcmlwcGxlIGNvbnRhaW5lclxuICAgICAgICAvLyBGYWxsIGJhY2sgdG8gaG9zdCBpbnN0ZWFkIG9mIHRoZSByb290IGJlY2F1c2UgZGlzdHJpYnV0ZWQgdGV4dFxuICAgICAgICAvLyBub2RlcyBhcmUgbm90IHZhbGlkIGV2ZW50IHRhcmdldHNcbiAgICAgICAgdmFyIGRvbUNvbnRhaW5lciA9IGRvbSh0aGlzLl9yaXBwbGVDb250YWluZXIgfHwgdGhpcyk7XG4gICAgICAgIHZhciB0YXJnZXQgPSBkb20ob3B0VHJpZ2dlcmluZ0V2ZW50KS5yb290VGFyZ2V0O1xuICAgICAgICBpZiAoZG9tQ29udGFpbmVyLmRlZXBDb250YWlucygvKiogQHR5cGUge05vZGV9ICovICh0YXJnZXQpKSkge1xuICAgICAgICAgIHRoaXMuX3JpcHBsZS51aURvd25BY3Rpb24ob3B0VHJpZ2dlcmluZ0V2ZW50KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYDxwYXBlci1yaXBwbGU+YCBlbGVtZW50IHVzZWQgYnkgdGhpcyBlbGVtZW50IHRvIGNyZWF0ZVxuICAgKiByaXBwbGUgZWZmZWN0cy4gVGhlIGVsZW1lbnQncyByaXBwbGUgaXMgY3JlYXRlZCBvbiBkZW1hbmQsIHdoZW5cbiAgICogbmVjZXNzYXJ5LCBhbmQgY2FsbGluZyB0aGlzIG1ldGhvZCB3aWxsIGZvcmNlIHRoZVxuICAgKiByaXBwbGUgdG8gYmUgY3JlYXRlZC5cbiAgICovXG4gIGdldFJpcHBsZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5lbnN1cmVSaXBwbGUoKTtcbiAgICByZXR1cm4gdGhpcy5fcmlwcGxlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBlbGVtZW50IGN1cnJlbnRseSBjb250YWlucyBhIHJpcHBsZSBlZmZlY3QuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59XG4gICAqL1xuICBoYXNSaXBwbGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBCb29sZWFuKHRoaXMuX3JpcHBsZSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSB0aGUgZWxlbWVudCdzIHJpcHBsZSBlZmZlY3QgdmlhIGNyZWF0aW5nIGEgYDxwYXBlci1yaXBwbGU+YC5cbiAgICogT3ZlcnJpZGUgdGhpcyBtZXRob2QgdG8gY3VzdG9taXplIHRoZSByaXBwbGUgZWxlbWVudC5cbiAgICogQHJldHVybiB7IVBhcGVyUmlwcGxlRWxlbWVudH0gUmV0dXJucyBhIGA8cGFwZXItcmlwcGxlPmAgZWxlbWVudC5cbiAgICovXG4gIF9jcmVhdGVSaXBwbGU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBlbGVtZW50ID0gLyoqIEB0eXBlIHshUGFwZXJSaXBwbGVFbGVtZW50fSAqLyAoXG4gICAgICAgIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3BhcGVyLXJpcHBsZScpKTtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfSxcblxuICBfbm9pbmtDaGFuZ2VkOiBmdW5jdGlvbihub2luaykge1xuICAgIGlmICh0aGlzLmhhc1JpcHBsZSgpKSB7XG4gICAgICB0aGlzLl9yaXBwbGUubm9pbmsgPSBub2luaztcbiAgICB9XG4gIH1cbn07XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJ0Bwb2x5bWVyL3BvbHltZXIvcG9seW1lci1sZWdhY3kuanMnO1xuXG5pbXBvcnQge0lyb25CdXR0b25TdGF0ZX0gZnJvbSAnQHBvbHltZXIvaXJvbi1iZWhhdmlvcnMvaXJvbi1idXR0b24tc3RhdGUuanMnO1xuaW1wb3J0IHtJcm9uQ29udHJvbFN0YXRlfSBmcm9tICdAcG9seW1lci9pcm9uLWJlaGF2aW9ycy9pcm9uLWNvbnRyb2wtc3RhdGUuanMnO1xuXG5pbXBvcnQge1BhcGVyUmlwcGxlQmVoYXZpb3J9IGZyb20gJy4vcGFwZXItcmlwcGxlLWJlaGF2aW9yLmpzJztcblxuLyoqXG4gKiBgUGFwZXJJbmt5Rm9jdXNCZWhhdmlvcmAgaW1wbGVtZW50cyBhIHJpcHBsZSB3aGVuIHRoZSBlbGVtZW50IGhhcyBrZXlib2FyZFxuICogZm9jdXMuXG4gKlxuICogQHBvbHltZXJCZWhhdmlvciBQYXBlcklua3lGb2N1c0JlaGF2aW9yXG4gKi9cbmV4cG9ydCBjb25zdCBQYXBlcklua3lGb2N1c0JlaGF2aW9ySW1wbCA9IHtcbiAgb2JzZXJ2ZXJzOiBbJ19mb2N1c2VkQ2hhbmdlZChyZWNlaXZlZEZvY3VzRnJvbUtleWJvYXJkKSddLFxuXG4gIF9mb2N1c2VkQ2hhbmdlZDogZnVuY3Rpb24ocmVjZWl2ZWRGb2N1c0Zyb21LZXlib2FyZCkge1xuICAgIGlmIChyZWNlaXZlZEZvY3VzRnJvbUtleWJvYXJkKSB7XG4gICAgICB0aGlzLmVuc3VyZVJpcHBsZSgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5oYXNSaXBwbGUoKSkge1xuICAgICAgdGhpcy5fcmlwcGxlLmhvbGREb3duID0gcmVjZWl2ZWRGb2N1c0Zyb21LZXlib2FyZDtcbiAgICB9XG4gIH0sXG5cbiAgX2NyZWF0ZVJpcHBsZTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJpcHBsZSA9IFBhcGVyUmlwcGxlQmVoYXZpb3IuX2NyZWF0ZVJpcHBsZSgpO1xuICAgIHJpcHBsZS5pZCA9ICdpbmsnO1xuICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2NlbnRlcicsICcnKTtcbiAgICByaXBwbGUuY2xhc3NMaXN0LmFkZCgnY2lyY2xlJyk7XG4gICAgcmV0dXJuIHJpcHBsZTtcbiAgfVxufTtcblxuLyoqIEBwb2x5bWVyQmVoYXZpb3IgKi9cbmV4cG9ydCBjb25zdCBQYXBlcklua3lGb2N1c0JlaGF2aW9yID0gW1xuICBJcm9uQnV0dG9uU3RhdGUsXG4gIElyb25Db250cm9sU3RhdGUsXG4gIFBhcGVyUmlwcGxlQmVoYXZpb3IsXG4gIFBhcGVySW5reUZvY3VzQmVoYXZpb3JJbXBsXG5dO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzJztcblxuLyoqXG4gKiBgaXJvbi1yYW5nZS1iZWhhdmlvcmAgcHJvdmlkZXMgdGhlIGJlaGF2aW9yIGZvciBzb21ldGhpbmcgd2l0aCBhIG1pbmltdW0gdG9cbiAqIG1heGltdW0gcmFuZ2UuXG4gKlxuICogQGRlbW8gZGVtby9pbmRleC5odG1sXG4gKiBAcG9seW1lckJlaGF2aW9yXG4gKi9cbmV4cG9ydCBjb25zdCBJcm9uUmFuZ2VCZWhhdmlvciA9IHtcblxuICBwcm9wZXJ0aWVzOiB7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCB2YWx1ZS5cbiAgICAgKi9cbiAgICB2YWx1ZToge3R5cGU6IE51bWJlciwgdmFsdWU6IDAsIG5vdGlmeTogdHJ1ZSwgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlfSxcblxuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgdGhhdCBpbmRpY2F0ZXMgdGhlIG1pbmltdW0gdmFsdWUgb2YgdGhlIHJhbmdlLlxuICAgICAqL1xuICAgIG1pbjoge3R5cGU6IE51bWJlciwgdmFsdWU6IDAsIG5vdGlmeTogdHJ1ZX0sXG5cbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIHRoYXQgaW5kaWNhdGVzIHRoZSBtYXhpbXVtIHZhbHVlIG9mIHRoZSByYW5nZS5cbiAgICAgKi9cbiAgICBtYXg6IHt0eXBlOiBOdW1iZXIsIHZhbHVlOiAxMDAsIG5vdGlmeTogdHJ1ZX0sXG5cbiAgICAvKipcbiAgICAgKiBTcGVjaWZpZXMgdGhlIHZhbHVlIGdyYW51bGFyaXR5IG9mIHRoZSByYW5nZSdzIHZhbHVlLlxuICAgICAqL1xuICAgIHN0ZXA6IHt0eXBlOiBOdW1iZXIsIHZhbHVlOiAxLCBub3RpZnk6IHRydWV9LFxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgcmF0aW8gb2YgdGhlIHZhbHVlLlxuICAgICAqL1xuICAgIHJhdGlvOiB7dHlwZTogTnVtYmVyLCB2YWx1ZTogMCwgcmVhZE9ubHk6IHRydWUsIG5vdGlmeTogdHJ1ZX0sXG4gIH0sXG5cbiAgb2JzZXJ2ZXJzOiBbJ191cGRhdGUodmFsdWUsIG1pbiwgbWF4LCBzdGVwKSddLFxuXG4gIF9jYWxjUmF0aW86IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmV0dXJuICh0aGlzLl9jbGFtcFZhbHVlKHZhbHVlKSAtIHRoaXMubWluKSAvICh0aGlzLm1heCAtIHRoaXMubWluKTtcbiAgfSxcblxuICBfY2xhbXBWYWx1ZTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICByZXR1cm4gTWF0aC5taW4odGhpcy5tYXgsIE1hdGgubWF4KHRoaXMubWluLCB0aGlzLl9jYWxjU3RlcCh2YWx1ZSkpKTtcbiAgfSxcblxuICBfY2FsY1N0ZXA6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgLy8gcG9seW1lci9pc3N1ZXMvMjQ5M1xuICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cbiAgICBpZiAoIXRoaXMuc3RlcCkge1xuICAgICAgcmV0dXJuIHZhbHVlO1xuICAgIH1cblxuICAgIHZhciBudW1TdGVwcyA9IE1hdGgucm91bmQoKHZhbHVlIC0gdGhpcy5taW4pIC8gdGhpcy5zdGVwKTtcbiAgICBpZiAodGhpcy5zdGVwIDwgMSkge1xuICAgICAgLyoqXG4gICAgICAgKiBGb3Igc21hbGwgdmFsdWVzIG9mIHRoaXMuc3RlcCwgaWYgd2UgY2FsY3VsYXRlIHRoZSBzdGVwIHVzaW5nXG4gICAgICAgKiBgTWF0aC5yb3VuZCh2YWx1ZSAvIHN0ZXApICogc3RlcGAgd2UgbWF5IGhpdCBhIHByZWNpc2lvbiBwb2ludCBpc3N1ZVxuICAgICAgICogZWcuIDAuMSAqIDAuMiA9ICAwLjAyMDAwMDAwMDAwMDAwMDAwNFxuICAgICAgICogaHR0cDovL2RvY3Mub3JhY2xlLmNvbS9jZC9FMTk5NTctMDEvODA2LTM1NjgvbmNnX2dvbGRiZXJnLmh0bWxcbiAgICAgICAqXG4gICAgICAgKiBhcyBhIHdvcmsgYXJvdW5kIHdlIGNhbiBkaXZpZGUgYnkgdGhlIHJlY2lwcm9jYWwgb2YgYHN0ZXBgXG4gICAgICAgKi9cbiAgICAgIHJldHVybiBudW1TdGVwcyAvICgxIC8gdGhpcy5zdGVwKSArIHRoaXMubWluO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gbnVtU3RlcHMgKiB0aGlzLnN0ZXAgKyB0aGlzLm1pbjtcbiAgICB9XG4gIH0sXG5cbiAgX3ZhbGlkYXRlVmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgIHZhciB2ID0gdGhpcy5fY2xhbXBWYWx1ZSh0aGlzLnZhbHVlKTtcbiAgICB0aGlzLnZhbHVlID0gdGhpcy5vbGRWYWx1ZSA9IGlzTmFOKHYpID8gdGhpcy5vbGRWYWx1ZSA6IHY7XG4gICAgcmV0dXJuIHRoaXMudmFsdWUgIT09IHY7XG4gIH0sXG5cbiAgX3VwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdmFsaWRhdGVWYWx1ZSgpO1xuICAgIHRoaXMuX3NldFJhdGlvKHRoaXMuX2NhbGNSYXRpbyh0aGlzLnZhbHVlKSAqIDEwMCk7XG4gIH1cblxufTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5pbXBvcnQge2h0bWx9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnLmpzJztcblxuLyoqXG5UaGUgYDxpcm9uLWZsZXgtbGF5b3V0PmAgY29tcG9uZW50IHByb3ZpZGVzIHNpbXBsZSB3YXlzIHRvIHVzZVxuW0NTUyBmbGV4aWJsZSBib3hcbmxheW91dF0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvR3VpZGUvQ1NTL0ZsZXhpYmxlX2JveGVzKSxcbmFsc28ga25vd24gYXMgZmxleGJveC4gTm90ZSB0aGF0IHRoaXMgaXMgYW4gb2xkIGVsZW1lbnQsIHRoYXQgd2FzIHdyaXR0ZW5cbmJlZm9yZSBhbGwgbW9kZXJuIGJyb3dzZXJzIGhhZCBub24tcHJlZml4ZWQgZmxleCBzdHlsZXMuIEFzIHN1Y2gsIG5vd2FkYXlzIHlvdVxuZG9uJ3QgcmVhbGx5IG5lZWQgdG8gdXNlIHRoaXMgZWxlbWVudCBhbnltb3JlLCBhbmQgY2FuIHVzZSBDU1MgZmxleCBzdHlsZXNcbmRpcmVjdGx5IGluIHlvdXIgY29kZS5cblxuVGhpcyBjb21wb25lbnQgcHJvdmlkZXMgdHdvIGRpZmZlcmVudCB3YXlzIHRvIHVzZSBmbGV4Ym94OlxuXG4xLiBbTGF5b3V0XG5jbGFzc2VzXShodHRwczovL2dpdGh1Yi5jb20vUG9seW1lckVsZW1lbnRzL2lyb24tZmxleC1sYXlvdXQvdHJlZS9tYXN0ZXIvaXJvbi1mbGV4LWxheW91dC1jbGFzc2VzLmh0bWwpLlxuVGhlIGxheW91dCBjbGFzcyBzdHlsZXNoZWV0IHByb3ZpZGVzIGEgc2ltcGxlIHNldCBvZiBjbGFzcy1iYXNlZCBmbGV4Ym94IHJ1bGVzLFxudGhhdCBsZXQgeW91IHNwZWNpZnkgbGF5b3V0IHByb3BlcnRpZXMgZGlyZWN0bHkgaW4gbWFya3VwLiBZb3UgbXVzdCBpbmNsdWRlIHRoaXNcbmZpbGUgaW4gZXZlcnkgZWxlbWVudCB0aGF0IG5lZWRzIHRvIHVzZSB0aGVtLlxuXG4gICAgU2FtcGxlIHVzZTpcblxuICAgIGBgYFxuICAgIDxjdXN0b20tZWxlbWVudC1kZW1vPlxuICAgICAgPHRlbXBsYXRlPlxuICAgICAgICA8c2NyaXB0IHNyYz1cIi4uL3dlYmNvbXBvbmVudHNqcy93ZWJjb21wb25lbnRzLWxpdGUuanNcIj48L3NjcmlwdD5cbiAgICAgICAgPG5leHQtY29kZS1ibG9jaz48L25leHQtY29kZS1ibG9jaz5cbiAgICAgIDwvdGVtcGxhdGU+XG4gICAgPC9jdXN0b20tZWxlbWVudC1kZW1vPlxuICAgIGBgYFxuXG4gICAgYGBganNcbiAgICBpbXBvcnQge2h0bWx9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnLmpzJztcbiAgICBpbXBvcnQgJ0Bwb2x5bWVyL2lyb24tZmxleC1sYXlvdXQvaXJvbi1mbGV4LWxheW91dC1jbGFzc2VzLmpzJztcblxuICAgIGNvbnN0IHRlbXBsYXRlID0gaHRtbGBcbiAgICAgIDxzdHlsZSBpcz1cImN1c3RvbS1zdHlsZVwiIGluY2x1ZGU9XCJpcm9uLWZsZXggaXJvbi1mbGV4LWFsaWdubWVudFwiPjwvc3R5bGU+XG4gICAgICA8c3R5bGU+XG4gICAgICAgIC50ZXN0IHsgd2lkdGg6IDEwMHB4OyB9XG4gICAgICA8L3N0eWxlPlxuICAgICAgPGRpdiBjbGFzcz1cImxheW91dCBob3Jpem9udGFsIGNlbnRlci1jZW50ZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInRlc3RcIj5ob3Jpem9udGFsIGxheW91dCBjZW50ZXIgYWxpZ25tZW50PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICBgO1xuICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodGVtcGxhdGUuY29udGVudCk7XG4gICAgYGBgXG5cbjIuIFtDdXN0b20gQ1NTXG5taXhpbnNdKGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyRWxlbWVudHMvaXJvbi1mbGV4LWxheW91dC9ibG9iL21hc3Rlci9pcm9uLWZsZXgtbGF5b3V0Lmh0bWwpLlxuVGhlIG1peGluIHN0eWxlc2hlZXQgaW5jbHVkZXMgY3VzdG9tIENTUyBtaXhpbnMgdGhhdCBjYW4gYmUgYXBwbGllZCBpbnNpZGUgYSBDU1NcbnJ1bGUgdXNpbmcgdGhlIGBAYXBwbHlgIGZ1bmN0aW9uLlxuXG5QbGVhc2Ugbm90ZSB0aGF0IHRoZSBvbGQgWy9kZWVwLyBsYXlvdXRcbmNsYXNzZXNdKGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyRWxlbWVudHMvaXJvbi1mbGV4LWxheW91dC90cmVlL21hc3Rlci9jbGFzc2VzKVxuYXJlIGRlcHJlY2F0ZWQsIGFuZCBzaG91bGQgbm90IGJlIHVzZWQuIFRvIGNvbnRpbnVlIHVzaW5nIGxheW91dCBwcm9wZXJ0aWVzXG5kaXJlY3RseSBpbiBtYXJrdXAsIHBsZWFzZSBzd2l0Y2ggdG8gdXNpbmcgdGhlIG5ldyBgZG9tLW1vZHVsZWAtYmFzZWRcbltsYXlvdXRcbmNsYXNzZXNdKGh0dHBzOi8vZ2l0aHViLmNvbS9Qb2x5bWVyRWxlbWVudHMvaXJvbi1mbGV4LWxheW91dC90cmVlL21hc3Rlci9pcm9uLWZsZXgtbGF5b3V0LWNsYXNzZXMuaHRtbCkuXG5QbGVhc2Ugbm90ZSB0aGF0IHRoZSBuZXcgdmVyc2lvbiBkb2VzIG5vdCB1c2UgYC9kZWVwL2AsIGFuZCB0aGVyZWZvcmUgcmVxdWlyZXNcbnlvdSB0byBpbXBvcnQgdGhlIGBkb20tbW9kdWxlc2AgaW4gZXZlcnkgZWxlbWVudCB0aGF0IG5lZWRzIHRvIHVzZSB0aGVtLlxuXG5AZ3JvdXAgSXJvbiBFbGVtZW50c1xuQHBzZXVkb0VsZW1lbnQgaXJvbi1mbGV4LWxheW91dFxuQGRlbW8gZGVtby9pbmRleC5odG1sXG4qL1xuY29uc3QgdGVtcGxhdGUgPSBodG1sYFxuPGN1c3RvbS1zdHlsZT5cbiAgPHN0eWxlIGlzPVwiY3VzdG9tLXN0eWxlXCI+XG4gICAgW2hpZGRlbl0ge1xuICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgIH1cbiAgPC9zdHlsZT5cbjwvY3VzdG9tLXN0eWxlPlxuPGN1c3RvbS1zdHlsZT5cbiAgPHN0eWxlIGlzPVwiY3VzdG9tLXN0eWxlXCI+XG4gICAgaHRtbCB7XG5cbiAgICAgIC0tbGF5b3V0OiB7XG4gICAgICAgIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xuICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7XG4gICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1pbmxpbmU6IHtcbiAgICAgICAgZGlzcGxheTogLW1zLWlubGluZS1mbGV4Ym94O1xuICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWlubGluZS1mbGV4O1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWhvcml6b250YWw6IHtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0O1xuXG4gICAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogcm93O1xuICAgICAgICAtd2Via2l0LWZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1ob3Jpem9udGFsLXJldmVyc2U6IHtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0O1xuXG4gICAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG4gICAgICAgIC13ZWJraXQtZmxleC1kaXJlY3Rpb246IHJvdy1yZXZlcnNlO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC12ZXJ0aWNhbDoge1xuICAgICAgICBAYXBwbHkgLS1sYXlvdXQ7XG5cbiAgICAgICAgLW1zLWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgIC13ZWJraXQtZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LXZlcnRpY2FsLXJldmVyc2U6IHtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0O1xuXG4gICAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7XG4gICAgICAgIC13ZWJraXQtZmxleC1kaXJlY3Rpb246IGNvbHVtbi1yZXZlcnNlO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uLXJldmVyc2U7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC13cmFwOiB7XG4gICAgICAgIC1tcy1mbGV4LXdyYXA6IHdyYXA7XG4gICAgICAgIC13ZWJraXQtZmxleC13cmFwOiB3cmFwO1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXA7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC13cmFwLXJldmVyc2U6IHtcbiAgICAgICAgLW1zLWZsZXgtd3JhcDogd3JhcC1yZXZlcnNlO1xuICAgICAgICAtd2Via2l0LWZsZXgtd3JhcDogd3JhcC1yZXZlcnNlO1xuICAgICAgICBmbGV4LXdyYXA6IHdyYXAtcmV2ZXJzZTtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWZsZXgtYXV0bzoge1xuICAgICAgICAtbXMtZmxleDogMSAxIGF1dG87XG4gICAgICAgIC13ZWJraXQtZmxleDogMSAxIGF1dG87XG4gICAgICAgIGZsZXg6IDEgMSBhdXRvO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZmxleC1ub25lOiB7XG4gICAgICAgIC1tcy1mbGV4OiBub25lO1xuICAgICAgICAtd2Via2l0LWZsZXg6IG5vbmU7XG4gICAgICAgIGZsZXg6IG5vbmU7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1mbGV4OiB7XG4gICAgICAgIC1tcy1mbGV4OiAxIDEgMC4wMDAwMDAwMDFweDtcbiAgICAgICAgLXdlYmtpdC1mbGV4OiAxO1xuICAgICAgICBmbGV4OiAxO1xuICAgICAgICAtd2Via2l0LWZsZXgtYmFzaXM6IDAuMDAwMDAwMDAxcHg7XG4gICAgICAgIGZsZXgtYmFzaXM6IDAuMDAwMDAwMDAxcHg7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1mbGV4LTI6IHtcbiAgICAgICAgLW1zLWZsZXg6IDI7XG4gICAgICAgIC13ZWJraXQtZmxleDogMjtcbiAgICAgICAgZmxleDogMjtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWZsZXgtMzoge1xuICAgICAgICAtbXMtZmxleDogMztcbiAgICAgICAgLXdlYmtpdC1mbGV4OiAzO1xuICAgICAgICBmbGV4OiAzO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZmxleC00OiB7XG4gICAgICAgIC1tcy1mbGV4OiA0O1xuICAgICAgICAtd2Via2l0LWZsZXg6IDQ7XG4gICAgICAgIGZsZXg6IDQ7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1mbGV4LTU6IHtcbiAgICAgICAgLW1zLWZsZXg6IDU7XG4gICAgICAgIC13ZWJraXQtZmxleDogNTtcbiAgICAgICAgZmxleDogNTtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWZsZXgtNjoge1xuICAgICAgICAtbXMtZmxleDogNjtcbiAgICAgICAgLXdlYmtpdC1mbGV4OiA2O1xuICAgICAgICBmbGV4OiA2O1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZmxleC03OiB7XG4gICAgICAgIC1tcy1mbGV4OiA3O1xuICAgICAgICAtd2Via2l0LWZsZXg6IDc7XG4gICAgICAgIGZsZXg6IDc7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1mbGV4LTg6IHtcbiAgICAgICAgLW1zLWZsZXg6IDg7XG4gICAgICAgIC13ZWJraXQtZmxleDogODtcbiAgICAgICAgZmxleDogODtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWZsZXgtOToge1xuICAgICAgICAtbXMtZmxleDogOTtcbiAgICAgICAgLXdlYmtpdC1mbGV4OiA5O1xuICAgICAgICBmbGV4OiA5O1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZmxleC0xMDoge1xuICAgICAgICAtbXMtZmxleDogMTA7XG4gICAgICAgIC13ZWJraXQtZmxleDogMTA7XG4gICAgICAgIGZsZXg6IDEwO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZmxleC0xMToge1xuICAgICAgICAtbXMtZmxleDogMTE7XG4gICAgICAgIC13ZWJraXQtZmxleDogMTE7XG4gICAgICAgIGZsZXg6IDExO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZmxleC0xMjoge1xuICAgICAgICAtbXMtZmxleDogMTI7XG4gICAgICAgIC13ZWJraXQtZmxleDogMTI7XG4gICAgICAgIGZsZXg6IDEyO1xuICAgICAgfTtcblxuICAgICAgLyogYWxpZ25tZW50IGluIGNyb3NzIGF4aXMgKi9cblxuICAgICAgLS1sYXlvdXQtc3RhcnQ6IHtcbiAgICAgICAgLW1zLWZsZXgtYWxpZ246IHN0YXJ0O1xuICAgICAgICAtd2Via2l0LWFsaWduLWl0ZW1zOiBmbGV4LXN0YXJ0O1xuICAgICAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWNlbnRlcjoge1xuICAgICAgICAtbXMtZmxleC1hbGlnbjogY2VudGVyO1xuICAgICAgICAtd2Via2l0LWFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1lbmQ6IHtcbiAgICAgICAgLW1zLWZsZXgtYWxpZ246IGVuZDtcbiAgICAgICAgLXdlYmtpdC1hbGlnbi1pdGVtczogZmxleC1lbmQ7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWJhc2VsaW5lOiB7XG4gICAgICAgIC1tcy1mbGV4LWFsaWduOiBiYXNlbGluZTtcbiAgICAgICAgLXdlYmtpdC1hbGlnbi1pdGVtczogYmFzZWxpbmU7XG4gICAgICAgIGFsaWduLWl0ZW1zOiBiYXNlbGluZTtcbiAgICAgIH07XG5cbiAgICAgIC8qIGFsaWdubWVudCBpbiBtYWluIGF4aXMgKi9cblxuICAgICAgLS1sYXlvdXQtc3RhcnQtanVzdGlmaWVkOiB7XG4gICAgICAgIC1tcy1mbGV4LXBhY2s6IHN0YXJ0O1xuICAgICAgICAtd2Via2l0LWp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LXN0YXJ0O1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtY2VudGVyLWp1c3RpZmllZDoge1xuICAgICAgICAtbXMtZmxleC1wYWNrOiBjZW50ZXI7XG4gICAgICAgIC13ZWJraXQtanVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZW5kLWp1c3RpZmllZDoge1xuICAgICAgICAtbXMtZmxleC1wYWNrOiBlbmQ7XG4gICAgICAgIC13ZWJraXQtanVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWFyb3VuZC1qdXN0aWZpZWQ6IHtcbiAgICAgICAgLW1zLWZsZXgtcGFjazogZGlzdHJpYnV0ZTtcbiAgICAgICAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1qdXN0aWZpZWQ6IHtcbiAgICAgICAgLW1zLWZsZXgtcGFjazoganVzdGlmeTtcbiAgICAgICAgLXdlYmtpdC1qdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG4gICAgICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWNlbnRlci1jZW50ZXI6IHtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWNlbnRlcjtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWNlbnRlci1qdXN0aWZpZWQ7XG4gICAgICB9O1xuXG4gICAgICAvKiBzZWxmIGFsaWdubWVudCAqL1xuXG4gICAgICAtLWxheW91dC1zZWxmLXN0YXJ0OiB7XG4gICAgICAgIC1tcy1hbGlnbi1zZWxmOiBmbGV4LXN0YXJ0O1xuICAgICAgICAtd2Via2l0LWFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG4gICAgICAgIGFsaWduLXNlbGY6IGZsZXgtc3RhcnQ7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1zZWxmLWNlbnRlcjoge1xuICAgICAgICAtbXMtYWxpZ24tc2VsZjogY2VudGVyO1xuICAgICAgICAtd2Via2l0LWFsaWduLXNlbGY6IGNlbnRlcjtcbiAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtc2VsZi1lbmQ6IHtcbiAgICAgICAgLW1zLWFsaWduLXNlbGY6IGZsZXgtZW5kO1xuICAgICAgICAtd2Via2l0LWFsaWduLXNlbGY6IGZsZXgtZW5kO1xuICAgICAgICBhbGlnbi1zZWxmOiBmbGV4LWVuZDtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LXNlbGYtc3RyZXRjaDoge1xuICAgICAgICAtbXMtYWxpZ24tc2VsZjogc3RyZXRjaDtcbiAgICAgICAgLXdlYmtpdC1hbGlnbi1zZWxmOiBzdHJldGNoO1xuICAgICAgICBhbGlnbi1zZWxmOiBzdHJldGNoO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtc2VsZi1iYXNlbGluZToge1xuICAgICAgICAtbXMtYWxpZ24tc2VsZjogYmFzZWxpbmU7XG4gICAgICAgIC13ZWJraXQtYWxpZ24tc2VsZjogYmFzZWxpbmU7XG4gICAgICAgIGFsaWduLXNlbGY6IGJhc2VsaW5lO1xuICAgICAgfTtcblxuICAgICAgLyogbXVsdGktbGluZSBhbGlnbm1lbnQgaW4gbWFpbiBheGlzICovXG5cbiAgICAgIC0tbGF5b3V0LXN0YXJ0LWFsaWduZWQ6IHtcbiAgICAgICAgLW1zLWZsZXgtbGluZS1wYWNrOiBzdGFydDsgIC8qIElFMTAgKi9cbiAgICAgICAgLW1zLWFsaWduLWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG4gICAgICAgIC13ZWJraXQtYWxpZ24tY29udGVudDogZmxleC1zdGFydDtcbiAgICAgICAgYWxpZ24tY29udGVudDogZmxleC1zdGFydDtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWVuZC1hbGlnbmVkOiB7XG4gICAgICAgIC1tcy1mbGV4LWxpbmUtcGFjazogZW5kOyAgLyogSUUxMCAqL1xuICAgICAgICAtbXMtYWxpZ24tY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIC13ZWJraXQtYWxpZ24tY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgIGFsaWduLWNvbnRlbnQ6IGZsZXgtZW5kO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtY2VudGVyLWFsaWduZWQ6IHtcbiAgICAgICAgLW1zLWZsZXgtbGluZS1wYWNrOiBjZW50ZXI7ICAvKiBJRTEwICovXG4gICAgICAgIC1tcy1hbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgIC13ZWJraXQtYWxpZ24tY29udGVudDogY2VudGVyO1xuICAgICAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1iZXR3ZWVuLWFsaWduZWQ6IHtcbiAgICAgICAgLW1zLWZsZXgtbGluZS1wYWNrOiBqdXN0aWZ5OyAgLyogSUUxMCAqL1xuICAgICAgICAtbXMtYWxpZ24tY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgICAgICAgLXdlYmtpdC1hbGlnbi1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgICBhbGlnbi1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtYXJvdW5kLWFsaWduZWQ6IHtcbiAgICAgICAgLW1zLWZsZXgtbGluZS1wYWNrOiBkaXN0cmlidXRlOyAgLyogSUUxMCAqL1xuICAgICAgICAtbXMtYWxpZ24tY29udGVudDogc3BhY2UtYXJvdW5kO1xuICAgICAgICAtd2Via2l0LWFsaWduLWNvbnRlbnQ6IHNwYWNlLWFyb3VuZDtcbiAgICAgICAgYWxpZ24tY29udGVudDogc3BhY2UtYXJvdW5kO1xuICAgICAgfTtcblxuICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgICAgICAgICAgICBPdGhlciBMYXlvdXRcbiAgICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAgIC0tbGF5b3V0LWJsb2NrOiB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtaW52aXNpYmxlOiB7XG4gICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbiAhaW1wb3J0YW50O1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtcmVsYXRpdmU6IHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZml0OiB7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtc2Nyb2xsOiB7XG4gICAgICAgIC13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOiB0b3VjaDtcbiAgICAgICAgb3ZlcmZsb3c6IGF1dG87XG4gICAgICB9O1xuXG4gICAgICAtLWxheW91dC1mdWxsYmxlZWQ6IHtcbiAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICBoZWlnaHQ6IDEwMHZoO1xuICAgICAgfTtcblxuICAgICAgLyogZml4ZWQgcG9zaXRpb24gKi9cblxuICAgICAgLS1sYXlvdXQtZml4ZWQtdG9wOiB7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICBsZWZ0OiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWZpeGVkLXJpZ2h0OiB7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgdG9wOiAwO1xuICAgICAgICByaWdodDogMDtcbiAgICAgICAgYm90dG9tOiAwO1xuICAgICAgfTtcblxuICAgICAgLS1sYXlvdXQtZml4ZWQtYm90dG9tOiB7XG4gICAgICAgIHBvc2l0aW9uOiBmaXhlZDtcbiAgICAgICAgcmlnaHQ6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgIH07XG5cbiAgICAgIC0tbGF5b3V0LWZpeGVkLWxlZnQ6IHtcbiAgICAgICAgcG9zaXRpb246IGZpeGVkO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGJvdHRvbTogMDtcbiAgICAgICAgbGVmdDogMDtcbiAgICAgIH07XG5cbiAgICB9XG4gIDwvc3R5bGU+XG48L2N1c3RvbS1zdHlsZT5gO1xuXG50ZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XG5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQpO1xuXG52YXIgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuc3R5bGUudGV4dENvbnRlbnQgPSAnW2hpZGRlbl0geyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nO1xuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5cbmltcG9ydCB7aHRtbH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuY29uc3QgdGVtcGxhdGUgPSBodG1sYFxuPGN1c3RvbS1zdHlsZT5cbiAgPHN0eWxlIGlzPVwiY3VzdG9tLXN0eWxlXCI+XG4gICAgaHRtbCB7XG5cbiAgICAgIC8qIE1hdGVyaWFsIERlc2lnbiBjb2xvciBwYWxldHRlIGZvciBHb29nbGUgcHJvZHVjdHMgKi9cblxuICAgICAgLS1nb29nbGUtcmVkLTEwMDogI2Y0YzdjMztcbiAgICAgIC0tZ29vZ2xlLXJlZC0zMDA6ICNlNjdjNzM7XG4gICAgICAtLWdvb2dsZS1yZWQtNTAwOiAjZGI0NDM3O1xuICAgICAgLS1nb29nbGUtcmVkLTcwMDogI2M1MzkyOTtcblxuICAgICAgLS1nb29nbGUtYmx1ZS0xMDA6ICNjNmRhZmM7XG4gICAgICAtLWdvb2dsZS1ibHVlLTMwMDogIzdiYWFmNztcbiAgICAgIC0tZ29vZ2xlLWJsdWUtNTAwOiAjNDI4NWY0O1xuICAgICAgLS1nb29nbGUtYmx1ZS03MDA6ICMzMzY3ZDY7XG5cbiAgICAgIC0tZ29vZ2xlLWdyZWVuLTEwMDogI2I3ZTFjZDtcbiAgICAgIC0tZ29vZ2xlLWdyZWVuLTMwMDogIzU3YmI4YTtcbiAgICAgIC0tZ29vZ2xlLWdyZWVuLTUwMDogIzBmOWQ1ODtcbiAgICAgIC0tZ29vZ2xlLWdyZWVuLTcwMDogIzBiODA0MztcblxuICAgICAgLS1nb29nbGUteWVsbG93LTEwMDogI2ZjZThiMjtcbiAgICAgIC0tZ29vZ2xlLXllbGxvdy0zMDA6ICNmN2NiNGQ7XG4gICAgICAtLWdvb2dsZS15ZWxsb3ctNTAwOiAjZjRiNDAwO1xuICAgICAgLS1nb29nbGUteWVsbG93LTcwMDogI2YwOTMwMDtcblxuICAgICAgLS1nb29nbGUtZ3JleS0xMDA6ICNmNWY1ZjU7XG4gICAgICAtLWdvb2dsZS1ncmV5LTMwMDogI2UwZTBlMDtcbiAgICAgIC0tZ29vZ2xlLWdyZXktNTAwOiAjOWU5ZTllO1xuICAgICAgLS1nb29nbGUtZ3JleS03MDA6ICM2MTYxNjE7XG5cbiAgICAgIC8qIE1hdGVyaWFsIERlc2lnbiBjb2xvciBwYWxldHRlIGZyb20gb25saW5lIHNwZWMgZG9jdW1lbnQgKi9cblxuICAgICAgLS1wYXBlci1yZWQtNTA6ICNmZmViZWU7XG4gICAgICAtLXBhcGVyLXJlZC0xMDA6ICNmZmNkZDI7XG4gICAgICAtLXBhcGVyLXJlZC0yMDA6ICNlZjlhOWE7XG4gICAgICAtLXBhcGVyLXJlZC0zMDA6ICNlNTczNzM7XG4gICAgICAtLXBhcGVyLXJlZC00MDA6ICNlZjUzNTA7XG4gICAgICAtLXBhcGVyLXJlZC01MDA6ICNmNDQzMzY7XG4gICAgICAtLXBhcGVyLXJlZC02MDA6ICNlNTM5MzU7XG4gICAgICAtLXBhcGVyLXJlZC03MDA6ICNkMzJmMmY7XG4gICAgICAtLXBhcGVyLXJlZC04MDA6ICNjNjI4Mjg7XG4gICAgICAtLXBhcGVyLXJlZC05MDA6ICNiNzFjMWM7XG4gICAgICAtLXBhcGVyLXJlZC1hMTAwOiAjZmY4YTgwO1xuICAgICAgLS1wYXBlci1yZWQtYTIwMDogI2ZmNTI1MjtcbiAgICAgIC0tcGFwZXItcmVkLWE0MDA6ICNmZjE3NDQ7XG4gICAgICAtLXBhcGVyLXJlZC1hNzAwOiAjZDUwMDAwO1xuXG4gICAgICAtLXBhcGVyLXBpbmstNTA6ICNmY2U0ZWM7XG4gICAgICAtLXBhcGVyLXBpbmstMTAwOiAjZjhiYmQwO1xuICAgICAgLS1wYXBlci1waW5rLTIwMDogI2Y0OGZiMTtcbiAgICAgIC0tcGFwZXItcGluay0zMDA6ICNmMDYyOTI7XG4gICAgICAtLXBhcGVyLXBpbmstNDAwOiAjZWM0MDdhO1xuICAgICAgLS1wYXBlci1waW5rLTUwMDogI2U5MWU2MztcbiAgICAgIC0tcGFwZXItcGluay02MDA6ICNkODFiNjA7XG4gICAgICAtLXBhcGVyLXBpbmstNzAwOiAjYzIxODViO1xuICAgICAgLS1wYXBlci1waW5rLTgwMDogI2FkMTQ1NztcbiAgICAgIC0tcGFwZXItcGluay05MDA6ICM4ODBlNGY7XG4gICAgICAtLXBhcGVyLXBpbmstYTEwMDogI2ZmODBhYjtcbiAgICAgIC0tcGFwZXItcGluay1hMjAwOiAjZmY0MDgxO1xuICAgICAgLS1wYXBlci1waW5rLWE0MDA6ICNmNTAwNTc7XG4gICAgICAtLXBhcGVyLXBpbmstYTcwMDogI2M1MTE2MjtcblxuICAgICAgLS1wYXBlci1wdXJwbGUtNTA6ICNmM2U1ZjU7XG4gICAgICAtLXBhcGVyLXB1cnBsZS0xMDA6ICNlMWJlZTc7XG4gICAgICAtLXBhcGVyLXB1cnBsZS0yMDA6ICNjZTkzZDg7XG4gICAgICAtLXBhcGVyLXB1cnBsZS0zMDA6ICNiYTY4Yzg7XG4gICAgICAtLXBhcGVyLXB1cnBsZS00MDA6ICNhYjQ3YmM7XG4gICAgICAtLXBhcGVyLXB1cnBsZS01MDA6ICM5YzI3YjA7XG4gICAgICAtLXBhcGVyLXB1cnBsZS02MDA6ICM4ZTI0YWE7XG4gICAgICAtLXBhcGVyLXB1cnBsZS03MDA6ICM3YjFmYTI7XG4gICAgICAtLXBhcGVyLXB1cnBsZS04MDA6ICM2YTFiOWE7XG4gICAgICAtLXBhcGVyLXB1cnBsZS05MDA6ICM0YTE0OGM7XG4gICAgICAtLXBhcGVyLXB1cnBsZS1hMTAwOiAjZWE4MGZjO1xuICAgICAgLS1wYXBlci1wdXJwbGUtYTIwMDogI2UwNDBmYjtcbiAgICAgIC0tcGFwZXItcHVycGxlLWE0MDA6ICNkNTAwZjk7XG4gICAgICAtLXBhcGVyLXB1cnBsZS1hNzAwOiAjYWEwMGZmO1xuXG4gICAgICAtLXBhcGVyLWRlZXAtcHVycGxlLTUwOiAjZWRlN2Y2O1xuICAgICAgLS1wYXBlci1kZWVwLXB1cnBsZS0xMDA6ICNkMWM0ZTk7XG4gICAgICAtLXBhcGVyLWRlZXAtcHVycGxlLTIwMDogI2IzOWRkYjtcbiAgICAgIC0tcGFwZXItZGVlcC1wdXJwbGUtMzAwOiAjOTU3NWNkO1xuICAgICAgLS1wYXBlci1kZWVwLXB1cnBsZS00MDA6ICM3ZTU3YzI7XG4gICAgICAtLXBhcGVyLWRlZXAtcHVycGxlLTUwMDogIzY3M2FiNztcbiAgICAgIC0tcGFwZXItZGVlcC1wdXJwbGUtNjAwOiAjNWUzNWIxO1xuICAgICAgLS1wYXBlci1kZWVwLXB1cnBsZS03MDA6ICM1MTJkYTg7XG4gICAgICAtLXBhcGVyLWRlZXAtcHVycGxlLTgwMDogIzQ1MjdhMDtcbiAgICAgIC0tcGFwZXItZGVlcC1wdXJwbGUtOTAwOiAjMzExYjkyO1xuICAgICAgLS1wYXBlci1kZWVwLXB1cnBsZS1hMTAwOiAjYjM4OGZmO1xuICAgICAgLS1wYXBlci1kZWVwLXB1cnBsZS1hMjAwOiAjN2M0ZGZmO1xuICAgICAgLS1wYXBlci1kZWVwLXB1cnBsZS1hNDAwOiAjNjUxZmZmO1xuICAgICAgLS1wYXBlci1kZWVwLXB1cnBsZS1hNzAwOiAjNjIwMGVhO1xuXG4gICAgICAtLXBhcGVyLWluZGlnby01MDogI2U4ZWFmNjtcbiAgICAgIC0tcGFwZXItaW5kaWdvLTEwMDogI2M1Y2FlOTtcbiAgICAgIC0tcGFwZXItaW5kaWdvLTIwMDogIzlmYThkYTtcbiAgICAgIC0tcGFwZXItaW5kaWdvLTMwMDogIzc5ODZjYjtcbiAgICAgIC0tcGFwZXItaW5kaWdvLTQwMDogIzVjNmJjMDtcbiAgICAgIC0tcGFwZXItaW5kaWdvLTUwMDogIzNmNTFiNTtcbiAgICAgIC0tcGFwZXItaW5kaWdvLTYwMDogIzM5NDlhYjtcbiAgICAgIC0tcGFwZXItaW5kaWdvLTcwMDogIzMwM2Y5ZjtcbiAgICAgIC0tcGFwZXItaW5kaWdvLTgwMDogIzI4MzU5MztcbiAgICAgIC0tcGFwZXItaW5kaWdvLTkwMDogIzFhMjM3ZTtcbiAgICAgIC0tcGFwZXItaW5kaWdvLWExMDA6ICM4YzllZmY7XG4gICAgICAtLXBhcGVyLWluZGlnby1hMjAwOiAjNTM2ZGZlO1xuICAgICAgLS1wYXBlci1pbmRpZ28tYTQwMDogIzNkNWFmZTtcbiAgICAgIC0tcGFwZXItaW5kaWdvLWE3MDA6ICMzMDRmZmU7XG5cbiAgICAgIC0tcGFwZXItYmx1ZS01MDogI2UzZjJmZDtcbiAgICAgIC0tcGFwZXItYmx1ZS0xMDA6ICNiYmRlZmI7XG4gICAgICAtLXBhcGVyLWJsdWUtMjAwOiAjOTBjYWY5O1xuICAgICAgLS1wYXBlci1ibHVlLTMwMDogIzY0YjVmNjtcbiAgICAgIC0tcGFwZXItYmx1ZS00MDA6ICM0MmE1ZjU7XG4gICAgICAtLXBhcGVyLWJsdWUtNTAwOiAjMjE5NmYzO1xuICAgICAgLS1wYXBlci1ibHVlLTYwMDogIzFlODhlNTtcbiAgICAgIC0tcGFwZXItYmx1ZS03MDA6ICMxOTc2ZDI7XG4gICAgICAtLXBhcGVyLWJsdWUtODAwOiAjMTU2NWMwO1xuICAgICAgLS1wYXBlci1ibHVlLTkwMDogIzBkNDdhMTtcbiAgICAgIC0tcGFwZXItYmx1ZS1hMTAwOiAjODJiMWZmO1xuICAgICAgLS1wYXBlci1ibHVlLWEyMDA6ICM0NDhhZmY7XG4gICAgICAtLXBhcGVyLWJsdWUtYTQwMDogIzI5NzlmZjtcbiAgICAgIC0tcGFwZXItYmx1ZS1hNzAwOiAjMjk2MmZmO1xuXG4gICAgICAtLXBhcGVyLWxpZ2h0LWJsdWUtNTA6ICNlMWY1ZmU7XG4gICAgICAtLXBhcGVyLWxpZ2h0LWJsdWUtMTAwOiAjYjNlNWZjO1xuICAgICAgLS1wYXBlci1saWdodC1ibHVlLTIwMDogIzgxZDRmYTtcbiAgICAgIC0tcGFwZXItbGlnaHQtYmx1ZS0zMDA6ICM0ZmMzZjc7XG4gICAgICAtLXBhcGVyLWxpZ2h0LWJsdWUtNDAwOiAjMjliNmY2O1xuICAgICAgLS1wYXBlci1saWdodC1ibHVlLTUwMDogIzAzYTlmNDtcbiAgICAgIC0tcGFwZXItbGlnaHQtYmx1ZS02MDA6ICMwMzliZTU7XG4gICAgICAtLXBhcGVyLWxpZ2h0LWJsdWUtNzAwOiAjMDI4OGQxO1xuICAgICAgLS1wYXBlci1saWdodC1ibHVlLTgwMDogIzAyNzdiZDtcbiAgICAgIC0tcGFwZXItbGlnaHQtYmx1ZS05MDA6ICMwMTU3OWI7XG4gICAgICAtLXBhcGVyLWxpZ2h0LWJsdWUtYTEwMDogIzgwZDhmZjtcbiAgICAgIC0tcGFwZXItbGlnaHQtYmx1ZS1hMjAwOiAjNDBjNGZmO1xuICAgICAgLS1wYXBlci1saWdodC1ibHVlLWE0MDA6ICMwMGIwZmY7XG4gICAgICAtLXBhcGVyLWxpZ2h0LWJsdWUtYTcwMDogIzAwOTFlYTtcblxuICAgICAgLS1wYXBlci1jeWFuLTUwOiAjZTBmN2ZhO1xuICAgICAgLS1wYXBlci1jeWFuLTEwMDogI2IyZWJmMjtcbiAgICAgIC0tcGFwZXItY3lhbi0yMDA6ICM4MGRlZWE7XG4gICAgICAtLXBhcGVyLWN5YW4tMzAwOiAjNGRkMGUxO1xuICAgICAgLS1wYXBlci1jeWFuLTQwMDogIzI2YzZkYTtcbiAgICAgIC0tcGFwZXItY3lhbi01MDA6ICMwMGJjZDQ7XG4gICAgICAtLXBhcGVyLWN5YW4tNjAwOiAjMDBhY2MxO1xuICAgICAgLS1wYXBlci1jeWFuLTcwMDogIzAwOTdhNztcbiAgICAgIC0tcGFwZXItY3lhbi04MDA6ICMwMDgzOGY7XG4gICAgICAtLXBhcGVyLWN5YW4tOTAwOiAjMDA2MDY0O1xuICAgICAgLS1wYXBlci1jeWFuLWExMDA6ICM4NGZmZmY7XG4gICAgICAtLXBhcGVyLWN5YW4tYTIwMDogIzE4ZmZmZjtcbiAgICAgIC0tcGFwZXItY3lhbi1hNDAwOiAjMDBlNWZmO1xuICAgICAgLS1wYXBlci1jeWFuLWE3MDA6ICMwMGI4ZDQ7XG5cbiAgICAgIC0tcGFwZXItdGVhbC01MDogI2UwZjJmMTtcbiAgICAgIC0tcGFwZXItdGVhbC0xMDA6ICNiMmRmZGI7XG4gICAgICAtLXBhcGVyLXRlYWwtMjAwOiAjODBjYmM0O1xuICAgICAgLS1wYXBlci10ZWFsLTMwMDogIzRkYjZhYztcbiAgICAgIC0tcGFwZXItdGVhbC00MDA6ICMyNmE2OWE7XG4gICAgICAtLXBhcGVyLXRlYWwtNTAwOiAjMDA5Njg4O1xuICAgICAgLS1wYXBlci10ZWFsLTYwMDogIzAwODk3YjtcbiAgICAgIC0tcGFwZXItdGVhbC03MDA6ICMwMDc5NmI7XG4gICAgICAtLXBhcGVyLXRlYWwtODAwOiAjMDA2OTVjO1xuICAgICAgLS1wYXBlci10ZWFsLTkwMDogIzAwNGQ0MDtcbiAgICAgIC0tcGFwZXItdGVhbC1hMTAwOiAjYTdmZmViO1xuICAgICAgLS1wYXBlci10ZWFsLWEyMDA6ICM2NGZmZGE7XG4gICAgICAtLXBhcGVyLXRlYWwtYTQwMDogIzFkZTliNjtcbiAgICAgIC0tcGFwZXItdGVhbC1hNzAwOiAjMDBiZmE1O1xuXG4gICAgICAtLXBhcGVyLWdyZWVuLTUwOiAjZThmNWU5O1xuICAgICAgLS1wYXBlci1ncmVlbi0xMDA6ICNjOGU2Yzk7XG4gICAgICAtLXBhcGVyLWdyZWVuLTIwMDogI2E1ZDZhNztcbiAgICAgIC0tcGFwZXItZ3JlZW4tMzAwOiAjODFjNzg0O1xuICAgICAgLS1wYXBlci1ncmVlbi00MDA6ICM2NmJiNmE7XG4gICAgICAtLXBhcGVyLWdyZWVuLTUwMDogIzRjYWY1MDtcbiAgICAgIC0tcGFwZXItZ3JlZW4tNjAwOiAjNDNhMDQ3O1xuICAgICAgLS1wYXBlci1ncmVlbi03MDA6ICMzODhlM2M7XG4gICAgICAtLXBhcGVyLWdyZWVuLTgwMDogIzJlN2QzMjtcbiAgICAgIC0tcGFwZXItZ3JlZW4tOTAwOiAjMWI1ZTIwO1xuICAgICAgLS1wYXBlci1ncmVlbi1hMTAwOiAjYjlmNmNhO1xuICAgICAgLS1wYXBlci1ncmVlbi1hMjAwOiAjNjlmMGFlO1xuICAgICAgLS1wYXBlci1ncmVlbi1hNDAwOiAjMDBlNjc2O1xuICAgICAgLS1wYXBlci1ncmVlbi1hNzAwOiAjMDBjODUzO1xuXG4gICAgICAtLXBhcGVyLWxpZ2h0LWdyZWVuLTUwOiAjZjFmOGU5O1xuICAgICAgLS1wYXBlci1saWdodC1ncmVlbi0xMDA6ICNkY2VkYzg7XG4gICAgICAtLXBhcGVyLWxpZ2h0LWdyZWVuLTIwMDogI2M1ZTFhNTtcbiAgICAgIC0tcGFwZXItbGlnaHQtZ3JlZW4tMzAwOiAjYWVkNTgxO1xuICAgICAgLS1wYXBlci1saWdodC1ncmVlbi00MDA6ICM5Y2NjNjU7XG4gICAgICAtLXBhcGVyLWxpZ2h0LWdyZWVuLTUwMDogIzhiYzM0YTtcbiAgICAgIC0tcGFwZXItbGlnaHQtZ3JlZW4tNjAwOiAjN2NiMzQyO1xuICAgICAgLS1wYXBlci1saWdodC1ncmVlbi03MDA6ICM2ODlmMzg7XG4gICAgICAtLXBhcGVyLWxpZ2h0LWdyZWVuLTgwMDogIzU1OGIyZjtcbiAgICAgIC0tcGFwZXItbGlnaHQtZ3JlZW4tOTAwOiAjMzM2OTFlO1xuICAgICAgLS1wYXBlci1saWdodC1ncmVlbi1hMTAwOiAjY2NmZjkwO1xuICAgICAgLS1wYXBlci1saWdodC1ncmVlbi1hMjAwOiAjYjJmZjU5O1xuICAgICAgLS1wYXBlci1saWdodC1ncmVlbi1hNDAwOiAjNzZmZjAzO1xuICAgICAgLS1wYXBlci1saWdodC1ncmVlbi1hNzAwOiAjNjRkZDE3O1xuXG4gICAgICAtLXBhcGVyLWxpbWUtNTA6ICNmOWZiZTc7XG4gICAgICAtLXBhcGVyLWxpbWUtMTAwOiAjZjBmNGMzO1xuICAgICAgLS1wYXBlci1saW1lLTIwMDogI2U2ZWU5YztcbiAgICAgIC0tcGFwZXItbGltZS0zMDA6ICNkY2U3NzU7XG4gICAgICAtLXBhcGVyLWxpbWUtNDAwOiAjZDRlMTU3O1xuICAgICAgLS1wYXBlci1saW1lLTUwMDogI2NkZGMzOTtcbiAgICAgIC0tcGFwZXItbGltZS02MDA6ICNjMGNhMzM7XG4gICAgICAtLXBhcGVyLWxpbWUtNzAwOiAjYWZiNDJiO1xuICAgICAgLS1wYXBlci1saW1lLTgwMDogIzllOWQyNDtcbiAgICAgIC0tcGFwZXItbGltZS05MDA6ICM4Mjc3MTc7XG4gICAgICAtLXBhcGVyLWxpbWUtYTEwMDogI2Y0ZmY4MTtcbiAgICAgIC0tcGFwZXItbGltZS1hMjAwOiAjZWVmZjQxO1xuICAgICAgLS1wYXBlci1saW1lLWE0MDA6ICNjNmZmMDA7XG4gICAgICAtLXBhcGVyLWxpbWUtYTcwMDogI2FlZWEwMDtcblxuICAgICAgLS1wYXBlci15ZWxsb3ctNTA6ICNmZmZkZTc7XG4gICAgICAtLXBhcGVyLXllbGxvdy0xMDA6ICNmZmY5YzQ7XG4gICAgICAtLXBhcGVyLXllbGxvdy0yMDA6ICNmZmY1OWQ7XG4gICAgICAtLXBhcGVyLXllbGxvdy0zMDA6ICNmZmYxNzY7XG4gICAgICAtLXBhcGVyLXllbGxvdy00MDA6ICNmZmVlNTg7XG4gICAgICAtLXBhcGVyLXllbGxvdy01MDA6ICNmZmViM2I7XG4gICAgICAtLXBhcGVyLXllbGxvdy02MDA6ICNmZGQ4MzU7XG4gICAgICAtLXBhcGVyLXllbGxvdy03MDA6ICNmYmMwMmQ7XG4gICAgICAtLXBhcGVyLXllbGxvdy04MDA6ICNmOWE4MjU7XG4gICAgICAtLXBhcGVyLXllbGxvdy05MDA6ICNmNTdmMTc7XG4gICAgICAtLXBhcGVyLXllbGxvdy1hMTAwOiAjZmZmZjhkO1xuICAgICAgLS1wYXBlci15ZWxsb3ctYTIwMDogI2ZmZmYwMDtcbiAgICAgIC0tcGFwZXIteWVsbG93LWE0MDA6ICNmZmVhMDA7XG4gICAgICAtLXBhcGVyLXllbGxvdy1hNzAwOiAjZmZkNjAwO1xuXG4gICAgICAtLXBhcGVyLWFtYmVyLTUwOiAjZmZmOGUxO1xuICAgICAgLS1wYXBlci1hbWJlci0xMDA6ICNmZmVjYjM7XG4gICAgICAtLXBhcGVyLWFtYmVyLTIwMDogI2ZmZTA4MjtcbiAgICAgIC0tcGFwZXItYW1iZXItMzAwOiAjZmZkNTRmO1xuICAgICAgLS1wYXBlci1hbWJlci00MDA6ICNmZmNhMjg7XG4gICAgICAtLXBhcGVyLWFtYmVyLTUwMDogI2ZmYzEwNztcbiAgICAgIC0tcGFwZXItYW1iZXItNjAwOiAjZmZiMzAwO1xuICAgICAgLS1wYXBlci1hbWJlci03MDA6ICNmZmEwMDA7XG4gICAgICAtLXBhcGVyLWFtYmVyLTgwMDogI2ZmOGYwMDtcbiAgICAgIC0tcGFwZXItYW1iZXItOTAwOiAjZmY2ZjAwO1xuICAgICAgLS1wYXBlci1hbWJlci1hMTAwOiAjZmZlNTdmO1xuICAgICAgLS1wYXBlci1hbWJlci1hMjAwOiAjZmZkNzQwO1xuICAgICAgLS1wYXBlci1hbWJlci1hNDAwOiAjZmZjNDAwO1xuICAgICAgLS1wYXBlci1hbWJlci1hNzAwOiAjZmZhYjAwO1xuXG4gICAgICAtLXBhcGVyLW9yYW5nZS01MDogI2ZmZjNlMDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTEwMDogI2ZmZTBiMjtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTIwMDogI2ZmY2M4MDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTMwMDogI2ZmYjc0ZDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTQwMDogI2ZmYTcyNjtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTUwMDogI2ZmOTgwMDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTYwMDogI2ZiOGMwMDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTcwMDogI2Y1N2MwMDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTgwMDogI2VmNmMwMDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLTkwMDogI2U2NTEwMDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLWExMDA6ICNmZmQxODA7XG4gICAgICAtLXBhcGVyLW9yYW5nZS1hMjAwOiAjZmZhYjQwO1xuICAgICAgLS1wYXBlci1vcmFuZ2UtYTQwMDogI2ZmOTEwMDtcbiAgICAgIC0tcGFwZXItb3JhbmdlLWE3MDA6ICNmZjY1MDA7XG5cbiAgICAgIC0tcGFwZXItZGVlcC1vcmFuZ2UtNTA6ICNmYmU5ZTc7XG4gICAgICAtLXBhcGVyLWRlZXAtb3JhbmdlLTEwMDogI2ZmY2NiYztcbiAgICAgIC0tcGFwZXItZGVlcC1vcmFuZ2UtMjAwOiAjZmZhYjkxO1xuICAgICAgLS1wYXBlci1kZWVwLW9yYW5nZS0zMDA6ICNmZjhhNjU7XG4gICAgICAtLXBhcGVyLWRlZXAtb3JhbmdlLTQwMDogI2ZmNzA0MztcbiAgICAgIC0tcGFwZXItZGVlcC1vcmFuZ2UtNTAwOiAjZmY1NzIyO1xuICAgICAgLS1wYXBlci1kZWVwLW9yYW5nZS02MDA6ICNmNDUxMWU7XG4gICAgICAtLXBhcGVyLWRlZXAtb3JhbmdlLTcwMDogI2U2NGExOTtcbiAgICAgIC0tcGFwZXItZGVlcC1vcmFuZ2UtODAwOiAjZDg0MzE1O1xuICAgICAgLS1wYXBlci1kZWVwLW9yYW5nZS05MDA6ICNiZjM2MGM7XG4gICAgICAtLXBhcGVyLWRlZXAtb3JhbmdlLWExMDA6ICNmZjllODA7XG4gICAgICAtLXBhcGVyLWRlZXAtb3JhbmdlLWEyMDA6ICNmZjZlNDA7XG4gICAgICAtLXBhcGVyLWRlZXAtb3JhbmdlLWE0MDA6ICNmZjNkMDA7XG4gICAgICAtLXBhcGVyLWRlZXAtb3JhbmdlLWE3MDA6ICNkZDJjMDA7XG5cbiAgICAgIC0tcGFwZXItYnJvd24tNTA6ICNlZmViZTk7XG4gICAgICAtLXBhcGVyLWJyb3duLTEwMDogI2Q3Y2NjODtcbiAgICAgIC0tcGFwZXItYnJvd24tMjAwOiAjYmNhYWE0O1xuICAgICAgLS1wYXBlci1icm93bi0zMDA6ICNhMTg4N2Y7XG4gICAgICAtLXBhcGVyLWJyb3duLTQwMDogIzhkNmU2MztcbiAgICAgIC0tcGFwZXItYnJvd24tNTAwOiAjNzk1NTQ4O1xuICAgICAgLS1wYXBlci1icm93bi02MDA6ICM2ZDRjNDE7XG4gICAgICAtLXBhcGVyLWJyb3duLTcwMDogIzVkNDAzNztcbiAgICAgIC0tcGFwZXItYnJvd24tODAwOiAjNGUzNDJlO1xuICAgICAgLS1wYXBlci1icm93bi05MDA6ICMzZTI3MjM7XG5cbiAgICAgIC0tcGFwZXItZ3JleS01MDogI2ZhZmFmYTtcbiAgICAgIC0tcGFwZXItZ3JleS0xMDA6ICNmNWY1ZjU7XG4gICAgICAtLXBhcGVyLWdyZXktMjAwOiAjZWVlZWVlO1xuICAgICAgLS1wYXBlci1ncmV5LTMwMDogI2UwZTBlMDtcbiAgICAgIC0tcGFwZXItZ3JleS00MDA6ICNiZGJkYmQ7XG4gICAgICAtLXBhcGVyLWdyZXktNTAwOiAjOWU5ZTllO1xuICAgICAgLS1wYXBlci1ncmV5LTYwMDogIzc1NzU3NTtcbiAgICAgIC0tcGFwZXItZ3JleS03MDA6ICM2MTYxNjE7XG4gICAgICAtLXBhcGVyLWdyZXktODAwOiAjNDI0MjQyO1xuICAgICAgLS1wYXBlci1ncmV5LTkwMDogIzIxMjEyMTtcblxuICAgICAgLS1wYXBlci1ibHVlLWdyZXktNTA6ICNlY2VmZjE7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS0xMDA6ICNjZmQ4ZGM7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS0yMDA6ICNiMGJlYzU7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS0zMDA6ICM5MGE0YWU7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS00MDA6ICM3ODkwOWM7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS01MDA6ICM2MDdkOGI7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS02MDA6ICM1NDZlN2E7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS03MDA6ICM0NTVhNjQ7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS04MDA6ICMzNzQ3NGY7XG4gICAgICAtLXBhcGVyLWJsdWUtZ3JleS05MDA6ICMyNjMyMzg7XG5cbiAgICAgIC8qIG9wYWNpdHkgZm9yIGRhcmsgdGV4dCBvbiBhIGxpZ2h0IGJhY2tncm91bmQgKi9cbiAgICAgIC0tZGFyay1kaXZpZGVyLW9wYWNpdHk6IDAuMTI7XG4gICAgICAtLWRhcmstZGlzYWJsZWQtb3BhY2l0eTogMC4zODsgLyogb3IgaGludCB0ZXh0IG9yIGljb24gKi9cbiAgICAgIC0tZGFyay1zZWNvbmRhcnktb3BhY2l0eTogMC41NDtcbiAgICAgIC0tZGFyay1wcmltYXJ5LW9wYWNpdHk6IDAuODc7XG5cbiAgICAgIC8qIG9wYWNpdHkgZm9yIGxpZ2h0IHRleHQgb24gYSBkYXJrIGJhY2tncm91bmQgKi9cbiAgICAgIC0tbGlnaHQtZGl2aWRlci1vcGFjaXR5OiAwLjEyO1xuICAgICAgLS1saWdodC1kaXNhYmxlZC1vcGFjaXR5OiAwLjM7IC8qIG9yIGhpbnQgdGV4dCBvciBpY29uICovXG4gICAgICAtLWxpZ2h0LXNlY29uZGFyeS1vcGFjaXR5OiAwLjc7XG4gICAgICAtLWxpZ2h0LXByaW1hcnktb3BhY2l0eTogMS4wO1xuXG4gICAgfVxuXG4gIDwvc3R5bGU+XG48L2N1c3RvbS1zdHlsZT5cbmA7XG50ZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XG5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQpO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzJztcbmltcG9ydCAnQHBvbHltZXIvaXJvbi1mbGV4LWxheW91dC9pcm9uLWZsZXgtbGF5b3V0LmpzJztcbmltcG9ydCAnQHBvbHltZXIvcGFwZXItc3R5bGVzL2NvbG9yLmpzJztcblxuaW1wb3J0IHtJcm9uUmFuZ2VCZWhhdmlvcn0gZnJvbSAnQHBvbHltZXIvaXJvbi1yYW5nZS1iZWhhdmlvci9pcm9uLXJhbmdlLWJlaGF2aW9yLmpzJztcbmltcG9ydCB7UG9seW1lcn0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvbGVnYWN5L3BvbHltZXItZm4uanMnO1xuaW1wb3J0IHtodG1sfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9odG1sLXRhZy5qcyc7XG5cbi8qKlxuTWF0ZXJpYWwgZGVzaWduOiBbUHJvZ3Jlc3MgJlxuYWN0aXZpdHldKGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vZGVzaWduL3NwZWMvY29tcG9uZW50cy9wcm9ncmVzcy1hY3Rpdml0eS5odG1sKVxuXG5UaGUgcHJvZ3Jlc3MgYmFycyBhcmUgZm9yIHNpdHVhdGlvbnMgd2hlcmUgdGhlIHBlcmNlbnRhZ2UgY29tcGxldGVkIGNhbiBiZVxuZGV0ZXJtaW5lZC4gVGhleSBnaXZlIHVzZXJzIGEgcXVpY2sgc2Vuc2Ugb2YgaG93IG11Y2ggbG9uZ2VyIGFuIG9wZXJhdGlvblxud2lsbCB0YWtlLlxuXG5FeGFtcGxlOlxuXG4gICAgPHBhcGVyLXByb2dyZXNzIHZhbHVlPVwiMTBcIj48L3BhcGVyLXByb2dyZXNzPlxuXG5UaGVyZSBpcyBhbHNvIGEgc2Vjb25kYXJ5IHByb2dyZXNzIHdoaWNoIGlzIHVzZWZ1bCBmb3IgZGlzcGxheWluZyBpbnRlcm1lZGlhdGVcbnByb2dyZXNzLCBzdWNoIGFzIHRoZSBidWZmZXIgbGV2ZWwgZHVyaW5nIGEgc3RyZWFtaW5nIHBsYXliYWNrIHByb2dyZXNzIGJhci5cblxuRXhhbXBsZTpcblxuICAgIDxwYXBlci1wcm9ncmVzcyB2YWx1ZT1cIjEwXCIgc2Vjb25kYXJ5LXByb2dyZXNzPVwiMzBcIj48L3BhcGVyLXByb2dyZXNzPlxuXG4jIyMgU3R5bGluZyBwcm9ncmVzcyBiYXI6XG5cblRvIGNoYW5nZSB0aGUgYWN0aXZlIHByb2dyZXNzIGJhciBjb2xvcjpcblxuICAgIHBhcGVyLXByb2dyZXNzIHtcbiAgICAgICAtLXBhcGVyLXByb2dyZXNzLWFjdGl2ZS1jb2xvcjogI2U5MWU2MztcbiAgICB9XG5cblRvIGNoYW5nZSB0aGUgc2Vjb25kYXJ5IHByb2dyZXNzIGJhciBjb2xvcjpcblxuICAgIHBhcGVyLXByb2dyZXNzIHtcbiAgICAgIC0tcGFwZXItcHJvZ3Jlc3Mtc2Vjb25kYXJ5LWNvbG9yOiAjZjhiYmQwO1xuICAgIH1cblxuVG8gY2hhbmdlIHRoZSBwcm9ncmVzcyBiYXIgYmFja2dyb3VuZCBjb2xvcjpcblxuICAgIHBhcGVyLXByb2dyZXNzIHtcbiAgICAgIC0tcGFwZXItcHJvZ3Jlc3MtY29udGFpbmVyLWNvbG9yOiAjNjRmZmRhO1xuICAgIH1cblxuQWRkIHRoZSBjbGFzcyBgdHJhbnNpdGluZ2AgdG8gYSBwYXBlci1wcm9ncmVzcyB0byBhbmltYXRlIHRoZSBwcm9ncmVzcyBiYXIgd2hlblxudGhlIHZhbHVlIGNoYW5nZWQuIFlvdSBjYW4gYWxzbyBjdXN0b21pemUgdGhlIHRyYW5zaXRpb246XG5cbiAgICBwYXBlci1wcm9ncmVzcyB7XG4gICAgICAtLXBhcGVyLXByb2dyZXNzLXRyYW5zaXRpb24tZHVyYXRpb246IDAuMDhzO1xuICAgICAgLS1wYXBlci1wcm9ncmVzcy10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjogZWFzZTtcbiAgICAgIC0tcGFwZXItcHJvZ3Jlc3MtdHJhbnNpdGlvbi1kZWxheTogMHM7XG4gICAgfVxuXG5UbyBjaGFuZ2UgdGhlIGR1cmF0aW9uIG9mIHRoZSBpbmRldGVybWluYXRlIGN5Y2xlOlxuXG4gICAgcGFwZXItcHJvZ3Jlc3Mge1xuICAgICAgLS1wYXBlci1wcm9ncmVzcy1pbmRldGVybWluYXRlLWN5Y2xlLWR1cmF0aW9uOiAycztcbiAgICB9XG5cblRoZSBmb2xsb3dpbmcgbWl4aW5zIGFyZSBhdmFpbGFibGUgZm9yIHN0eWxpbmc6XG5cbkN1c3RvbSBwcm9wZXJ0eSB8IERlc2NyaXB0aW9uIHwgRGVmYXVsdFxuLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tfC0tLS0tLS0tLVxuYC0tcGFwZXItcHJvZ3Jlc3MtY29udGFpbmVyYCB8IE1peGluIGFwcGxpZWQgdG8gY29udGFpbmVyIHwgYHt9YFxuYC0tcGFwZXItcHJvZ3Jlc3MtdHJhbnNpdGlvbi1kdXJhdGlvbmAgfCBEdXJhdGlvbiBvZiB0aGUgdHJhbnNpdGlvbiB8IGAwLjA4c2BcbmAtLXBhcGVyLXByb2dyZXNzLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uYCB8IFRoZSB0aW1pbmcgZnVuY3Rpb24gZm9yIHRoZSB0cmFuc2l0aW9uIHwgYGVhc2VgXG5gLS1wYXBlci1wcm9ncmVzcy10cmFuc2l0aW9uLWRlbGF5YCB8IGRlbGF5IGZvciB0aGUgdHJhbnNpdGlvbiB8IGAwc2BcbmAtLXBhcGVyLXByb2dyZXNzLWNvbnRhaW5lci1jb2xvcmAgfCBDb2xvciBvZiB0aGUgY29udGFpbmVyIHwgYC0tZ29vZ2xlLWdyZXktMzAwYFxuYC0tcGFwZXItcHJvZ3Jlc3MtYWN0aXZlLWNvbG9yYCB8IFRoZSBjb2xvciBvZiB0aGUgYWN0aXZlIGJhciB8IGAtLWdvb2dsZS1ncmVlbi01MDBgXG5gLS1wYXBlci1wcm9ncmVzcy1zZWNvbmRhcnktY29sb3JgIHwgVGhlIGNvbG9yIG9mIHRoZSBzZWNvbmRhcnkgYmFyIHwgYC0tZ29vZ2xlLWdyZWVuLTEwMGBcbmAtLXBhcGVyLXByb2dyZXNzLWRpc2FibGVkLWFjdGl2ZS1jb2xvcmAgfCBUaGUgY29sb3Igb2YgdGhlIGFjdGl2ZSBiYXIgaWYgZGlzYWJsZWQgfCBgLS1nb29nbGUtZ3JleS01MDBgXG5gLS1wYXBlci1wcm9ncmVzcy1kaXNhYmxlZC1zZWNvbmRhcnktY29sb3JgIHwgVGhlIGNvbG9yIG9mIHRoZSBzZWNvbmRhcnkgYmFyIGlmIGRpc2FibGVkICB8IGAtLWdvb2dsZS1ncmV5LTMwMGBcbmAtLXBhcGVyLXByb2dyZXNzLWhlaWdodGAgfCBUaGUgaGVpZ2h0IG9mIHRoZSBwcm9ncmVzcyBiYXIgfCBgNHB4YFxuYC0tcGFwZXItcHJvZ3Jlc3MtaW5kZXRlcm1pbmF0ZS1jeWNsZS1kdXJhdGlvbmAgfCBEdXJhdGlvbiBvZiBhbiBpbmRldGVybWluYXRlIGN5Y2xlIHwgYDJzYFxuXG5AZ3JvdXAgUGFwZXIgRWxlbWVudHNcbkBlbGVtZW50IHBhcGVyLXByb2dyZXNzXG5AZGVtbyBkZW1vL2luZGV4Lmh0bWxcbiovXG5Qb2x5bWVyKHtcbiAgX3RlbXBsYXRlOiBodG1sYFxuICAgIDxzdHlsZT5cbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogYmxvY2s7XG4gICAgICAgIHdpZHRoOiAyMDBweDtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbaGlkZGVuXSksIFtoaWRkZW5dIHtcbiAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAjcHJvZ3Jlc3NDb250YWluZXIge1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1wcm9ncmVzcy1jb250YWluZXI7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgI3Byb2dyZXNzQ29udGFpbmVyLFxuICAgICAgLyogdGhlIHN0cmlwZSBmb3IgdGhlIGluZGV0ZXJtaW5hdGUgYW5pbWF0aW9uKi9cbiAgICAgIC5pbmRldGVybWluYXRlOjphZnRlciB7XG4gICAgICAgIGhlaWdodDogdmFyKC0tcGFwZXItcHJvZ3Jlc3MtaGVpZ2h0LCA0cHgpO1xuICAgICAgfVxuXG4gICAgICAjcHJpbWFyeVByb2dyZXNzLFxuICAgICAgI3NlY29uZGFyeVByb2dyZXNzLFxuICAgICAgLmluZGV0ZXJtaW5hdGU6OmFmdGVyIHtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWZpdDtcbiAgICAgIH1cblxuICAgICAgI3Byb2dyZXNzQ29udGFpbmVyLFxuICAgICAgLmluZGV0ZXJtaW5hdGU6OmFmdGVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcGFwZXItcHJvZ3Jlc3MtY29udGFpbmVyLWNvbG9yLCB2YXIoLS1nb29nbGUtZ3JleS0zMDApKTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoLnRyYW5zaXRpbmcpICNwcmltYXJ5UHJvZ3Jlc3MsXG4gICAgICA6aG9zdCgudHJhbnNpdGluZykgI3NlY29uZGFyeVByb2dyZXNzIHtcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uLXByb3BlcnR5OiAtd2Via2l0LXRyYW5zZm9ybTtcbiAgICAgICAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogdHJhbnNmb3JtO1xuXG4gICAgICAgIC8qIER1cmF0aW9uICovXG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbjogdmFyKC0tcGFwZXItcHJvZ3Jlc3MtdHJhbnNpdGlvbi1kdXJhdGlvbiwgMC4wOHMpO1xuICAgICAgICB0cmFuc2l0aW9uLWR1cmF0aW9uOiB2YXIoLS1wYXBlci1wcm9ncmVzcy10cmFuc2l0aW9uLWR1cmF0aW9uLCAwLjA4cyk7XG5cbiAgICAgICAgLyogVGltaW5nIGZ1bmN0aW9uICovXG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IHZhcigtLXBhcGVyLXByb2dyZXNzLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uLCBlYXNlKTtcbiAgICAgICAgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IHZhcigtLXBhcGVyLXByb2dyZXNzLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uLCBlYXNlKTtcblxuICAgICAgICAvKiBEZWxheSAqL1xuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb24tZGVsYXk6IHZhcigtLXBhcGVyLXByb2dyZXNzLXRyYW5zaXRpb24tZGVsYXksIDBzKTtcbiAgICAgICAgdHJhbnNpdGlvbi1kZWxheTogdmFyKC0tcGFwZXItcHJvZ3Jlc3MtdHJhbnNpdGlvbi1kZWxheSwgMHMpO1xuICAgICAgfVxuXG4gICAgICAjcHJpbWFyeVByb2dyZXNzLFxuICAgICAgI3NlY29uZGFyeVByb2dyZXNzIHtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWZpdDtcbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0IGNlbnRlcjtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCBjZW50ZXI7XG4gICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZVgoMCk7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGVYKDApO1xuICAgICAgICB3aWxsLWNoYW5nZTogdHJhbnNmb3JtO1xuICAgICAgfVxuXG4gICAgICAjcHJpbWFyeVByb2dyZXNzIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcGFwZXItcHJvZ3Jlc3MtYWN0aXZlLWNvbG9yLCB2YXIoLS1nb29nbGUtZ3JlZW4tNTAwKSk7XG4gICAgICB9XG5cbiAgICAgICNzZWNvbmRhcnlQcm9ncmVzcyB7XG4gICAgICAgIGJhY2tncm91bmQ6IHZhcigtLXBhcGVyLXByb2dyZXNzLXNlY29uZGFyeS1jb2xvciwgdmFyKC0tZ29vZ2xlLWdyZWVuLTEwMCkpO1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbZGlzYWJsZWRdKSAjcHJpbWFyeVByb2dyZXNzIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcGFwZXItcHJvZ3Jlc3MtZGlzYWJsZWQtYWN0aXZlLWNvbG9yLCB2YXIoLS1nb29nbGUtZ3JleS01MDApKTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW2Rpc2FibGVkXSkgI3NlY29uZGFyeVByb2dyZXNzIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tcGFwZXItcHJvZ3Jlc3MtZGlzYWJsZWQtc2Vjb25kYXJ5LWNvbG9yLCB2YXIoLS1nb29nbGUtZ3JleS0zMDApKTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoOm5vdChbZGlzYWJsZWRdKSkgI3ByaW1hcnlQcm9ncmVzcy5pbmRldGVybWluYXRlIHtcbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiByaWdodCBjZW50ZXI7XG4gICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0IGNlbnRlcjtcbiAgICAgICAgLXdlYmtpdC1hbmltYXRpb246IGluZGV0ZXJtaW5hdGUtYmFyIHZhcigtLXBhcGVyLXByb2dyZXNzLWluZGV0ZXJtaW5hdGUtY3ljbGUtZHVyYXRpb24sIDJzKSBsaW5lYXIgaW5maW5pdGU7XG4gICAgICAgIGFuaW1hdGlvbjogaW5kZXRlcm1pbmF0ZS1iYXIgdmFyKC0tcGFwZXItcHJvZ3Jlc3MtaW5kZXRlcm1pbmF0ZS1jeWNsZS1kdXJhdGlvbiwgMnMpIGxpbmVhciBpbmZpbml0ZTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoOm5vdChbZGlzYWJsZWRdKSkgI3ByaW1hcnlQcm9ncmVzcy5pbmRldGVybWluYXRlOjphZnRlciB7XG4gICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICAgIC13ZWJraXQtdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyIGNlbnRlcjtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogY2VudGVyIGNlbnRlcjtcblxuICAgICAgICAtd2Via2l0LWFuaW1hdGlvbjogaW5kZXRlcm1pbmF0ZS1zcGxpdHRlciB2YXIoLS1wYXBlci1wcm9ncmVzcy1pbmRldGVybWluYXRlLWN5Y2xlLWR1cmF0aW9uLCAycykgbGluZWFyIGluZmluaXRlO1xuICAgICAgICBhbmltYXRpb246IGluZGV0ZXJtaW5hdGUtc3BsaXR0ZXIgdmFyKC0tcGFwZXItcHJvZ3Jlc3MtaW5kZXRlcm1pbmF0ZS1jeWNsZS1kdXJhdGlvbiwgMnMpIGxpbmVhciBpbmZpbml0ZTtcbiAgICAgIH1cblxuICAgICAgQC13ZWJraXQta2V5ZnJhbWVzIGluZGV0ZXJtaW5hdGUtYmFyIHtcbiAgICAgICAgMCUge1xuICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZVgoMSkgdHJhbnNsYXRlWCgtMTAwJSk7XG4gICAgICAgIH1cbiAgICAgICAgNTAlIHtcbiAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGVYKDEpIHRyYW5zbGF0ZVgoMCUpO1xuICAgICAgICB9XG4gICAgICAgIDc1JSB7XG4gICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlWCgxKSB0cmFuc2xhdGVYKDAlKTtcbiAgICAgICAgICAtd2Via2l0LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllciguMjgsLjYyLC4zNywuOTEpO1xuICAgICAgICB9XG4gICAgICAgIDEwMCUge1xuICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZVgoMCkgdHJhbnNsYXRlWCgwJSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgQC13ZWJraXQta2V5ZnJhbWVzIGluZGV0ZXJtaW5hdGUtc3BsaXR0ZXIge1xuICAgICAgICAwJSB7XG4gICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlWCguNzUpIHRyYW5zbGF0ZVgoLTEyNSUpO1xuICAgICAgICB9XG4gICAgICAgIDMwJSB7XG4gICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlWCguNzUpIHRyYW5zbGF0ZVgoLTEyNSUpO1xuICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjogY3ViaWMtYmV6aWVyKC40MiwwLC42LC44KTtcbiAgICAgICAgfVxuICAgICAgICA5MCUge1xuICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZVgoLjc1KSB0cmFuc2xhdGVYKDEyNSUpO1xuICAgICAgICB9XG4gICAgICAgIDEwMCUge1xuICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZVgoLjc1KSB0cmFuc2xhdGVYKDEyNSUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIEBrZXlmcmFtZXMgaW5kZXRlcm1pbmF0ZS1iYXIge1xuICAgICAgICAwJSB7XG4gICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZVgoMSkgdHJhbnNsYXRlWCgtMTAwJSk7XG4gICAgICAgIH1cbiAgICAgICAgNTAlIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlWCgxKSB0cmFuc2xhdGVYKDAlKTtcbiAgICAgICAgfVxuICAgICAgICA3NSUge1xuICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGVYKDEpIHRyYW5zbGF0ZVgoMCUpO1xuICAgICAgICAgIGFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246IGN1YmljLWJlemllciguMjgsLjYyLC4zNywuOTEpO1xuICAgICAgICB9XG4gICAgICAgIDEwMCUge1xuICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGVYKDApIHRyYW5zbGF0ZVgoMCUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIEBrZXlmcmFtZXMgaW5kZXRlcm1pbmF0ZS1zcGxpdHRlciB7XG4gICAgICAgIDAlIHtcbiAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlWCguNzUpIHRyYW5zbGF0ZVgoLTEyNSUpO1xuICAgICAgICB9XG4gICAgICAgIDMwJSB7XG4gICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZVgoLjc1KSB0cmFuc2xhdGVYKC0xMjUlKTtcbiAgICAgICAgICBhbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOiBjdWJpYy1iZXppZXIoLjQyLDAsLjYsLjgpO1xuICAgICAgICB9XG4gICAgICAgIDkwJSB7XG4gICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZVgoLjc1KSB0cmFuc2xhdGVYKDEyNSUpO1xuICAgICAgICB9XG4gICAgICAgIDEwMCUge1xuICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGVYKC43NSkgdHJhbnNsYXRlWCgxMjUlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIDwvc3R5bGU+XG5cbiAgICA8ZGl2IGlkPVwicHJvZ3Jlc3NDb250YWluZXJcIj5cbiAgICAgIDxkaXYgaWQ9XCJzZWNvbmRhcnlQcm9ncmVzc1wiIGhpZGRlblxcJD1cIltbX2hpZGVTZWNvbmRhcnlQcm9ncmVzcyhzZWNvbmRhcnlSYXRpbyldXVwiPjwvZGl2PlxuICAgICAgPGRpdiBpZD1cInByaW1hcnlQcm9ncmVzc1wiPjwvZGl2PlxuICAgIDwvZGl2PlxuYCxcblxuICBpczogJ3BhcGVyLXByb2dyZXNzJyxcbiAgYmVoYXZpb3JzOiBbSXJvblJhbmdlQmVoYXZpb3JdLFxuXG4gIHByb3BlcnRpZXM6IHtcbiAgICAvKipcbiAgICAgKiBUaGUgbnVtYmVyIHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCBzZWNvbmRhcnkgcHJvZ3Jlc3MuXG4gICAgICovXG4gICAgc2Vjb25kYXJ5UHJvZ3Jlc3M6IHt0eXBlOiBOdW1iZXIsIHZhbHVlOiAwfSxcblxuICAgIC8qKlxuICAgICAqIFRoZSBzZWNvbmRhcnkgcmF0aW9cbiAgICAgKi9cbiAgICBzZWNvbmRhcnlSYXRpbzoge3R5cGU6IE51bWJlciwgdmFsdWU6IDAsIHJlYWRPbmx5OiB0cnVlfSxcblxuICAgIC8qKlxuICAgICAqIFVzZSBhbiBpbmRldGVybWluYXRlIHByb2dyZXNzIGluZGljYXRvci5cbiAgICAgKi9cbiAgICBpbmRldGVybWluYXRlOlxuICAgICAgICB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlLCBvYnNlcnZlcjogJ190b2dnbGVJbmRldGVybWluYXRlJ30sXG5cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoZSBwcm9ncmVzcyBpcyBkaXNhYmxlZC5cbiAgICAgKi9cbiAgICBkaXNhYmxlZDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgIHJlZmxlY3RUb0F0dHJpYnV0ZTogdHJ1ZSxcbiAgICAgIG9ic2VydmVyOiAnX2Rpc2FibGVkQ2hhbmdlZCdcbiAgICB9XG4gIH0sXG5cbiAgb2JzZXJ2ZXJzOlxuICAgICAgWydfcHJvZ3Jlc3NDaGFuZ2VkKHNlY29uZGFyeVByb2dyZXNzLCB2YWx1ZSwgbWluLCBtYXgsIGluZGV0ZXJtaW5hdGUpJ10sXG5cbiAgaG9zdEF0dHJpYnV0ZXM6IHtyb2xlOiAncHJvZ3Jlc3NiYXInfSxcblxuICBfdG9nZ2xlSW5kZXRlcm1pbmF0ZTogZnVuY3Rpb24oaW5kZXRlcm1pbmF0ZSkge1xuICAgIC8vIElmIHdlIHVzZSBhdHRyaWJ1dGUvY2xhc3MgYmluZGluZywgdGhlIGFuaW1hdGlvbiBzb21ldGltZXMgZG9lc24ndFxuICAgIC8vIHRyYW5zbGF0ZSBwcm9wZXJseSBvbiBTYWZhcmkgNy4xLiBTbyBpbnN0ZWFkLCB3ZSB0b2dnbGUgdGhlIGNsYXNzIGhlcmUgaW5cbiAgICAvLyB0aGUgdXBkYXRlIG1ldGhvZC5cbiAgICB0aGlzLnRvZ2dsZUNsYXNzKCdpbmRldGVybWluYXRlJywgaW5kZXRlcm1pbmF0ZSwgdGhpcy4kLnByaW1hcnlQcm9ncmVzcyk7XG4gIH0sXG5cbiAgX3RyYW5zZm9ybVByb2dyZXNzOiBmdW5jdGlvbihwcm9ncmVzcywgcmF0aW8pIHtcbiAgICB2YXIgdHJhbnNmb3JtID0gJ3NjYWxlWCgnICsgKHJhdGlvIC8gMTAwKSArICcpJztcbiAgICBwcm9ncmVzcy5zdHlsZS50cmFuc2Zvcm0gPSBwcm9ncmVzcy5zdHlsZS53ZWJraXRUcmFuc2Zvcm0gPSB0cmFuc2Zvcm07XG4gIH0sXG5cbiAgX21haW5SYXRpb0NoYW5nZWQ6IGZ1bmN0aW9uKHJhdGlvKSB7XG4gICAgdGhpcy5fdHJhbnNmb3JtUHJvZ3Jlc3ModGhpcy4kLnByaW1hcnlQcm9ncmVzcywgcmF0aW8pO1xuICB9LFxuXG4gIF9wcm9ncmVzc0NoYW5nZWQ6IGZ1bmN0aW9uKFxuICAgICAgc2Vjb25kYXJ5UHJvZ3Jlc3MsIHZhbHVlLCBtaW4sIG1heCwgaW5kZXRlcm1pbmF0ZSkge1xuICAgIHNlY29uZGFyeVByb2dyZXNzID0gdGhpcy5fY2xhbXBWYWx1ZShzZWNvbmRhcnlQcm9ncmVzcyk7XG4gICAgdmFsdWUgPSB0aGlzLl9jbGFtcFZhbHVlKHZhbHVlKTtcblxuICAgIHZhciBzZWNvbmRhcnlSYXRpbyA9IHRoaXMuX2NhbGNSYXRpbyhzZWNvbmRhcnlQcm9ncmVzcykgKiAxMDA7XG4gICAgdmFyIG1haW5SYXRpbyA9IHRoaXMuX2NhbGNSYXRpbyh2YWx1ZSkgKiAxMDA7XG5cbiAgICB0aGlzLl9zZXRTZWNvbmRhcnlSYXRpbyhzZWNvbmRhcnlSYXRpbyk7XG4gICAgdGhpcy5fdHJhbnNmb3JtUHJvZ3Jlc3ModGhpcy4kLnNlY29uZGFyeVByb2dyZXNzLCBzZWNvbmRhcnlSYXRpbyk7XG4gICAgdGhpcy5fdHJhbnNmb3JtUHJvZ3Jlc3ModGhpcy4kLnByaW1hcnlQcm9ncmVzcywgbWFpblJhdGlvKTtcblxuICAgIHRoaXMuc2Vjb25kYXJ5UHJvZ3Jlc3MgPSBzZWNvbmRhcnlQcm9ncmVzcztcblxuICAgIGlmIChpbmRldGVybWluYXRlKSB7XG4gICAgICB0aGlzLnJlbW92ZUF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW5vdycsIHZhbHVlKTtcbiAgICB9XG4gICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVtaW4nLCBtaW4pO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbWF4JywgbWF4KTtcbiAgfSxcblxuICBfZGlzYWJsZWRDaGFuZ2VkOiBmdW5jdGlvbihkaXNhYmxlZCkge1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLWRpc2FibGVkJywgZGlzYWJsZWQgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgfSxcblxuICBfaGlkZVNlY29uZGFyeVByb2dyZXNzOiBmdW5jdGlvbihzZWNvbmRhcnlSYXRpbykge1xuICAgIHJldHVybiBzZWNvbmRhcnlSYXRpbyA9PT0gMDtcbiAgfVxufSk7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJ0Bwb2x5bWVyL3BvbHltZXIvcG9seW1lci1sZWdhY3kuanMnO1xuXG5pbXBvcnQge1BvbHltZXJ9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLWZuLmpzJztcbmltcG9ydCB7aHRtbH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuXG4vKipcbmBpcm9uLWExMXktYW5ub3VuY2VyYCBpcyBhIHNpbmdsZXRvbiBlbGVtZW50IHRoYXQgaXMgaW50ZW5kZWQgdG8gYWRkIGExMXlcbnRvIGZlYXR1cmVzIHRoYXQgcmVxdWlyZSBvbi1kZW1hbmQgYW5ub3VuY2VtZW50IGZyb20gc2NyZWVuIHJlYWRlcnMuIEluXG5vcmRlciB0byBtYWtlIHVzZSBvZiB0aGUgYW5ub3VuY2VyLCBpdCBpcyBiZXN0IHRvIHJlcXVlc3QgaXRzIGF2YWlsYWJpbGl0eVxuaW4gdGhlIGFubm91bmNpbmcgZWxlbWVudC5cblxuRXhhbXBsZTpcblxuICAgIFBvbHltZXIoe1xuXG4gICAgICBpczogJ3gtY2hhdHR5JyxcblxuICAgICAgYXR0YWNoZWQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUaGlzIHdpbGwgY3JlYXRlIHRoZSBzaW5nbGV0b24gZWxlbWVudCBpZiBpdCBoYXMgbm90XG4gICAgICAgIC8vIGJlZW4gY3JlYXRlZCB5ZXQ6XG4gICAgICAgIFBvbHltZXIuSXJvbkExMXlBbm5vdW5jZXIucmVxdWVzdEF2YWlsYWJpbGl0eSgpO1xuICAgICAgfVxuICAgIH0pO1xuXG5BZnRlciB0aGUgYGlyb24tYTExeS1hbm5vdW5jZXJgIGhhcyBiZWVuIG1hZGUgYXZhaWxhYmxlLCBlbGVtZW50cyBjYW5cbm1ha2UgYW5ub3VuY2VzIGJ5IGZpcmluZyBidWJibGluZyBgaXJvbi1hbm5vdW5jZWAgZXZlbnRzLlxuXG5FeGFtcGxlOlxuXG4gICAgdGhpcy5maXJlKCdpcm9uLWFubm91bmNlJywge1xuICAgICAgdGV4dDogJ1RoaXMgaXMgYW4gYW5ub3VuY2VtZW50ISdcbiAgICB9LCB7IGJ1YmJsZXM6IHRydWUgfSk7XG5cbk5vdGU6IGFubm91bmNlbWVudHMgYXJlIG9ubHkgYXVkaWJsZSBpZiB5b3UgaGF2ZSBhIHNjcmVlbiByZWFkZXIgZW5hYmxlZC5cblxuQGRlbW8gZGVtby9pbmRleC5odG1sXG4qL1xuZXhwb3J0IGNvbnN0IElyb25BMTF5QW5ub3VuY2VyID0gUG9seW1lcih7XG4gIC8qKiBAb3ZlcnJpZGUgKi9cbiAgX3RlbXBsYXRlOiBodG1sYFxuICAgIDxzdHlsZT5cbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBwb3NpdGlvbjogZml4ZWQ7XG4gICAgICAgIGNsaXA6IHJlY3QoMHB4LDBweCwwcHgsMHB4KTtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuICAgIDxkaXYgYXJpYS1saXZlJD1cIltbbW9kZV1dXCI+W1tfdGV4dF1dPC9kaXY+XG5gLFxuXG4gIGlzOiAnaXJvbi1hMTF5LWFubm91bmNlcicsXG5cbiAgcHJvcGVydGllczoge1xuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIG9mIG1vZGUgaXMgdXNlZCB0byBzZXQgdGhlIGBhcmlhLWxpdmVgIGF0dHJpYnV0ZVxuICAgICAqIGZvciB0aGUgZWxlbWVudCB0aGF0IHdpbGwgYmUgYW5ub3VuY2VkLiBWYWxpZCB2YWx1ZXMgYXJlOiBgb2ZmYCxcbiAgICAgKiBgcG9saXRlYCBhbmQgYGFzc2VydGl2ZWAuXG4gICAgICovXG4gICAgbW9kZToge3R5cGU6IFN0cmluZywgdmFsdWU6ICdwb2xpdGUnfSxcblxuICAgIC8qKlxuICAgICAqIFRoZSB0aW1lb3V0IG9uIHJlZnJlc2hpbmcgdGhlIGFubm91bmNlbWVudCB0ZXh0LiBMYXJnZXIgdGltZW91dHMgYXJlXG4gICAgICogbmVlZGVkIGZvciBjZXJ0YWluIHNjcmVlbiByZWFkZXJzIHRvIHJlLWFubm91bmNlIHRoZSBzYW1lIG1lc3NhZ2UuXG4gICAgICovXG4gICAgdGltZW91dDoge3R5cGU6IE51bWJlciwgdmFsdWU6IDE1MH0sXG5cbiAgICBfdGV4dDoge3R5cGU6IFN0cmluZywgdmFsdWU6ICcnfSxcbiAgfSxcblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghSXJvbkExMXlBbm5vdW5jZXIuaW5zdGFuY2UpIHtcbiAgICAgIElyb25BMTF5QW5ub3VuY2VyLmluc3RhbmNlID0gdGhpcztcbiAgICB9XG5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdpcm9uLWFubm91bmNlJywgdGhpcy5fb25Jcm9uQW5ub3VuY2UuYmluZCh0aGlzKSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhdXNlIGEgdGV4dCBzdHJpbmcgdG8gYmUgYW5ub3VuY2VkIGJ5IHNjcmVlbiByZWFkZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gdGV4dCBUaGUgdGV4dCB0aGF0IHNob3VsZCBiZSBhbm5vdW5jZWQuXG4gICAqL1xuICBhbm5vdW5jZTogZnVuY3Rpb24odGV4dCkge1xuICAgIHRoaXMuX3RleHQgPSAnJztcbiAgICB0aGlzLmFzeW5jKGZ1bmN0aW9uKCkge1xuICAgICAgdGhpcy5fdGV4dCA9IHRleHQ7XG4gICAgfSwgdGhpcy50aW1lb3V0KTtcbiAgfSxcblxuICBfb25Jcm9uQW5ub3VuY2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmRldGFpbCAmJiBldmVudC5kZXRhaWwudGV4dCkge1xuICAgICAgdGhpcy5hbm5vdW5jZShldmVudC5kZXRhaWwudGV4dCk7XG4gICAgfVxuICB9XG59KTtcblxuSXJvbkExMXlBbm5vdW5jZXIuaW5zdGFuY2UgPSBudWxsO1xuXG5Jcm9uQTExeUFubm91bmNlci5yZXF1ZXN0QXZhaWxhYmlsaXR5ID0gZnVuY3Rpb24oKSB7XG4gIGlmICghSXJvbkExMXlBbm5vdW5jZXIuaW5zdGFuY2UpIHtcbiAgICBJcm9uQTExeUFubm91bmNlci5pbnN0YW5jZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lyb24tYTExeS1hbm5vdW5jZXInKTtcbiAgfVxuXG4gIGlmIChkb2N1bWVudC5ib2R5KSB7XG4gICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChJcm9uQTExeUFubm91bmNlci5pbnN0YW5jZSk7XG4gIH0gZWxzZSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChJcm9uQTExeUFubm91bmNlci5pbnN0YW5jZSk7XG4gICAgfSk7XG4gIH1cbn07XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5pbXBvcnQgJ0Bwb2x5bWVyL3BvbHltZXIvcG9seW1lci1sZWdhY3kuanMnO1xuXG5pbXBvcnQge1BvbHltZXJ9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLWZuLmpzJztcblxuZXhwb3J0IGNsYXNzIElyb25NZXRhIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7e1xuICAgKiAgIHR5cGU6IChzdHJpbmd8bnVsbHx1bmRlZmluZWQpLFxuICAgKiAgIGtleTogKHN0cmluZ3xudWxsfHVuZGVmaW5lZCksXG4gICAqICAgdmFsdWU6ICosXG4gICAqIH09fSBvcHRpb25zXG4gICAqL1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgSXJvbk1ldGFbJyAnXShvcHRpb25zKTtcblxuICAgIC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xuICAgIHRoaXMudHlwZSA9IChvcHRpb25zICYmIG9wdGlvbnMudHlwZSkgfHwgJ2RlZmF1bHQnO1xuICAgIC8qKiBAdHlwZSB7c3RyaW5nfG51bGx8dW5kZWZpbmVkfSAqL1xuICAgIHRoaXMua2V5ID0gb3B0aW9ucyAmJiBvcHRpb25zLmtleTtcbiAgICBpZiAob3B0aW9ucyAmJiAndmFsdWUnIGluIG9wdGlvbnMpIHtcbiAgICAgIC8qKiBAdHlwZSB7Kn0gKi9cbiAgICAgIHRoaXMudmFsdWUgPSBvcHRpb25zLnZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHsqfSAqL1xuICBnZXQgdmFsdWUoKSB7XG4gICAgdmFyIHR5cGUgPSB0aGlzLnR5cGU7XG4gICAgdmFyIGtleSA9IHRoaXMua2V5O1xuXG4gICAgaWYgKHR5cGUgJiYga2V5KSB7XG4gICAgICByZXR1cm4gSXJvbk1ldGEudHlwZXNbdHlwZV0gJiYgSXJvbk1ldGEudHlwZXNbdHlwZV1ba2V5XTtcbiAgICB9XG4gIH1cblxuICAvKiogQHBhcmFtIHsqfSB2YWx1ZSAqL1xuICBzZXQgdmFsdWUodmFsdWUpIHtcbiAgICB2YXIgdHlwZSA9IHRoaXMudHlwZTtcbiAgICB2YXIga2V5ID0gdGhpcy5rZXk7XG5cbiAgICBpZiAodHlwZSAmJiBrZXkpIHtcbiAgICAgIHR5cGUgPSBJcm9uTWV0YS50eXBlc1t0eXBlXSA9IElyb25NZXRhLnR5cGVzW3R5cGVdIHx8IHt9O1xuICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgZGVsZXRlIHR5cGVba2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHR5cGVba2V5XSA9IHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKiBAcmV0dXJuIHshQXJyYXk8Kj59ICovXG4gIGdldCBsaXN0KCkge1xuICAgIHZhciB0eXBlID0gdGhpcy50eXBlO1xuXG4gICAgaWYgKHR5cGUpIHtcbiAgICAgIHZhciBpdGVtcyA9IElyb25NZXRhLnR5cGVzW3RoaXMudHlwZV07XG4gICAgICBpZiAoIWl0ZW1zKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGl0ZW1zKS5tYXAoZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHJldHVybiBtZXRhRGF0YXNbdGhpcy50eXBlXVtrZXldO1xuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG4gIGJ5S2V5KGtleSkge1xuICAgIHRoaXMua2V5ID0ga2V5O1xuICAgIHJldHVybiB0aGlzLnZhbHVlO1xuICB9XG59O1xuXG4vLyBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gY29udmluY2UgQ2xvc3VyZSBub3QgdG8gcmVtb3ZlIGNvbnN0cnVjdG9yIGNhbGxzXG4vLyBmb3IgaW5zdGFuY2VzIHRoYXQgYXJlIG5vdCBoZWxkIGFueXdoZXJlLiBGb3IgZXhhbXBsZSwgd2hlblxuLy8gYG5ldyBJcm9uTWV0YSh7Li4ufSlgIGlzIHVzZWQgb25seSBmb3IgdGhlIHNpZGUgZWZmZWN0IG9mIGFkZGluZyBhIHZhbHVlLlxuSXJvbk1ldGFbJyAnXSA9IGZ1bmN0aW9uKCkge307XG5cbklyb25NZXRhLnR5cGVzID0ge307XG5cbnZhciBtZXRhRGF0YXMgPSBJcm9uTWV0YS50eXBlcztcblxuLyoqXG5gaXJvbi1tZXRhYCBpcyBhIGdlbmVyaWMgZWxlbWVudCB5b3UgY2FuIHVzZSBmb3Igc2hhcmluZyBpbmZvcm1hdGlvbiBhY3Jvc3MgdGhlXG5ET00gdHJlZS4gSXQgdXNlcyBbbW9ub3N0YXRlIHBhdHRlcm5dKGh0dHA6Ly9jMi5jb20vY2dpL3dpa2k/TW9ub3N0YXRlUGF0dGVybilcbnN1Y2ggdGhhdCBhbnkgaW5zdGFuY2Ugb2YgaXJvbi1tZXRhIGhhcyBhY2Nlc3MgdG8gdGhlIHNoYXJlZCBpbmZvcm1hdGlvbi4gWW91XG5jYW4gdXNlIGBpcm9uLW1ldGFgIHRvIHNoYXJlIHdoYXRldmVyIHlvdSB3YW50IChvciBjcmVhdGUgYW4gZXh0ZW5zaW9uIFtsaWtlXG54LW1ldGFdIGZvciBlbmhhbmNlbWVudHMpLlxuXG5UaGUgYGlyb24tbWV0YWAgaW5zdGFuY2VzIGNvbnRhaW5pbmcgeW91ciBhY3R1YWwgZGF0YSBjYW4gYmUgbG9hZGVkIGluIGFuXG5pbXBvcnQsIG9yIGNvbnN0cnVjdGVkIGluIGFueSB3YXkgeW91IHNlZSBmaXQuIFRoZSBvbmx5IHJlcXVpcmVtZW50IGlzIHRoYXQgeW91XG5jcmVhdGUgdGhlbSBiZWZvcmUgeW91IHRyeSB0byBhY2Nlc3MgdGhlbS5cblxuRXhhbXBsZXM6XG5cbklmIEkgY3JlYXRlIGFuIGluc3RhbmNlIGxpa2UgdGhpczpcblxuICAgIDxpcm9uLW1ldGEga2V5PVwiaW5mb1wiIHZhbHVlPVwiZm9vL2JhclwiPjwvaXJvbi1tZXRhPlxuXG5Ob3RlIHRoYXQgdmFsdWU9XCJmb28vYmFyXCIgaXMgdGhlIG1ldGFkYXRhIEkndmUgZGVmaW5lZC4gSSBjb3VsZCBkZWZpbmUgbW9yZVxuYXR0cmlidXRlcyBvciB1c2UgY2hpbGQgbm9kZXMgdG8gZGVmaW5lIGFkZGl0aW9uYWwgbWV0YWRhdGEuXG5cbk5vdyBJIGNhbiBhY2Nlc3MgdGhhdCBlbGVtZW50IChhbmQgaXQncyBtZXRhZGF0YSkgZnJvbSBhbnkgaXJvbi1tZXRhIGluc3RhbmNlXG52aWEgdGhlIGJ5S2V5IG1ldGhvZCwgZS5nLlxuXG4gICAgbWV0YS5ieUtleSgnaW5mbycpO1xuXG5QdXJlIGltcGVyYXRpdmUgZm9ybSB3b3VsZCBiZSBsaWtlOlxuXG4gICAgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaXJvbi1tZXRhJykuYnlLZXkoJ2luZm8nKTtcblxuT3IsIGluIGEgUG9seW1lciBlbGVtZW50LCB5b3UgY2FuIGluY2x1ZGUgYSBtZXRhIGluIHlvdXIgdGVtcGxhdGU6XG5cbiAgICA8aXJvbi1tZXRhIGlkPVwibWV0YVwiPjwvaXJvbi1tZXRhPlxuICAgIC4uLlxuICAgIHRoaXMuJC5tZXRhLmJ5S2V5KCdpbmZvJyk7XG5cbkBncm91cCBJcm9uIEVsZW1lbnRzXG5AZGVtbyBkZW1vL2luZGV4Lmh0bWxcbkBlbGVtZW50IGlyb24tbWV0YVxuKi9cblBvbHltZXIoe1xuXG4gIGlzOiAnaXJvbi1tZXRhJyxcblxuICBwcm9wZXJ0aWVzOiB7XG5cbiAgICAvKipcbiAgICAgKiBUaGUgdHlwZSBvZiBtZXRhLWRhdGEuICBBbGwgbWV0YS1kYXRhIG9mIHRoZSBzYW1lIHR5cGUgaXMgc3RvcmVkXG4gICAgICogdG9nZXRoZXIuXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICB0eXBlOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICB2YWx1ZTogJ2RlZmF1bHQnLFxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBUaGUga2V5IHVzZWQgdG8gc3RvcmUgYHZhbHVlYCB1bmRlciB0aGUgYHR5cGVgIG5hbWVzcGFjZS5cbiAgICAgKiBAdHlwZSB7P3N0cmluZ31cbiAgICAgKi9cbiAgICBrZXk6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGhlIG1ldGEtZGF0YSB0byBzdG9yZSBvciByZXRyaWV2ZS5cbiAgICAgKiBAdHlwZSB7Kn1cbiAgICAgKi9cbiAgICB2YWx1ZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgbm90aWZ5OiB0cnVlLFxuICAgIH0sXG5cbiAgICAvKipcbiAgICAgKiBJZiB0cnVlLCBgdmFsdWVgIGlzIHNldCB0byB0aGUgaXJvbi1tZXRhIGluc3RhbmNlIGl0c2VsZi5cbiAgICAgKi9cbiAgICBzZWxmOiB7dHlwZTogQm9vbGVhbiwgb2JzZXJ2ZXI6ICdfc2VsZkNoYW5nZWQnfSxcblxuICAgIF9fbWV0YToge3R5cGU6IEJvb2xlYW4sIGNvbXB1dGVkOiAnX19jb21wdXRlTWV0YSh0eXBlLCBrZXksIHZhbHVlKSd9XG4gIH0sXG5cbiAgaG9zdEF0dHJpYnV0ZXM6IHtoaWRkZW46IHRydWV9LFxuXG4gIF9fY29tcHV0ZU1ldGE6IGZ1bmN0aW9uKHR5cGUsIGtleSwgdmFsdWUpIHtcbiAgICB2YXIgbWV0YSA9IG5ldyBJcm9uTWV0YSh7dHlwZTogdHlwZSwga2V5OiBrZXl9KTtcblxuICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBtZXRhLnZhbHVlKSB7XG4gICAgICBtZXRhLnZhbHVlID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlICE9PSBtZXRhLnZhbHVlKSB7XG4gICAgICB0aGlzLnZhbHVlID0gbWV0YS52YWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWV0YTtcbiAgfSxcblxuICBnZXQgbGlzdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fX21ldGEgJiYgdGhpcy5fX21ldGEubGlzdDtcbiAgfSxcblxuICBfc2VsZkNoYW5nZWQ6IGZ1bmN0aW9uKHNlbGYpIHtcbiAgICBpZiAoc2VsZikge1xuICAgICAgdGhpcy52YWx1ZSA9IHRoaXM7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXRyaWV2ZXMgbWV0YSBkYXRhIHZhbHVlIGJ5IGtleS5cbiAgICpcbiAgICogQG1ldGhvZCBieUtleVxuICAgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIG1ldGEtZGF0YSB0byBiZSByZXR1cm5lZC5cbiAgICogQHJldHVybiB7Kn1cbiAgICovXG4gIGJ5S2V5OiBmdW5jdGlvbihrZXkpIHtcbiAgICByZXR1cm4gbmV3IElyb25NZXRhKHt0eXBlOiB0aGlzLnR5cGUsIGtleToga2V5fSkudmFsdWU7XG4gIH1cbn0pO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzJztcblxuaW1wb3J0IHtJcm9uTWV0YX0gZnJvbSAnQHBvbHltZXIvaXJvbi1tZXRhL2lyb24tbWV0YS5qcyc7XG5cbi8qKlxuICogU2luZ2xldG9uIElyb25NZXRhIGluc3RhbmNlLlxuICovXG5leHBvcnQgbGV0IElyb25WYWxpZGF0YWJsZUJlaGF2aW9yTWV0YSA9IG51bGw7XG5cbi8qKlxuICogYFVzZSBJcm9uVmFsaWRhdGFibGVCZWhhdmlvcmAgdG8gaW1wbGVtZW50IGFuIGVsZW1lbnQgdGhhdCB2YWxpZGF0ZXNcbiAqIHVzZXIgaW5wdXQuIFVzZSB0aGUgcmVsYXRlZCBgSXJvblZhbGlkYXRvckJlaGF2aW9yYCB0byBhZGQgY3VzdG9tXG4gKiB2YWxpZGF0aW9uIGxvZ2ljIHRvIGFuIGlyb24taW5wdXQuXG4gKlxuICogQnkgZGVmYXVsdCwgYW4gYDxpcm9uLWZvcm0+YCBlbGVtZW50IHZhbGlkYXRlcyBpdHMgZmllbGRzIHdoZW4gdGhlIHVzZXJcbiAqIHByZXNzZXMgdGhlIHN1Ym1pdCBidXR0b24uIFRvIHZhbGlkYXRlIGEgZm9ybSBpbXBlcmF0aXZlbHksIGNhbGwgdGhlIGZvcm0nc1xuICogYHZhbGlkYXRlKClgIG1ldGhvZCwgd2hpY2ggaW4gdHVybiB3aWxsIGNhbGwgYHZhbGlkYXRlKClgIG9uIGFsbCBpdHNcbiAqIGNoaWxkcmVuLiBCeSB1c2luZyBgSXJvblZhbGlkYXRhYmxlQmVoYXZpb3JgLCB5b3VyIGN1c3RvbSBlbGVtZW50XG4gKiB3aWxsIGdldCBhIHB1YmxpYyBgdmFsaWRhdGUoKWAsIHdoaWNoIHdpbGwgcmV0dXJuIHRoZSB2YWxpZGl0eSBvZiB0aGVcbiAqIGVsZW1lbnQsIGFuZCBhIGNvcnJlc3BvbmRpbmcgYGludmFsaWRgIGF0dHJpYnV0ZSwgd2hpY2ggY2FuIGJlIHVzZWQgZm9yXG4gKiBzdHlsaW5nLlxuICpcbiAqIFRvIGltcGxlbWVudCB0aGUgY3VzdG9tIHZhbGlkYXRpb24gbG9naWMgb2YgeW91ciBlbGVtZW50LCB5b3UgbXVzdCBvdmVycmlkZVxuICogdGhlIHByb3RlY3RlZCBgX2dldFZhbGlkaXR5KClgIG1ldGhvZCBvZiB0aGlzIGJlaGF2aW91ciwgcmF0aGVyIHRoYW5cbiAqIGB2YWxpZGF0ZSgpYC4gU2VlXG4gKiBbdGhpc10oaHR0cHM6Ly9naXRodWIuY29tL1BvbHltZXJFbGVtZW50cy9pcm9uLWZvcm0vYmxvYi9tYXN0ZXIvZGVtby9zaW1wbGUtZWxlbWVudC5odG1sKVxuICogZm9yIGFuIGV4YW1wbGUuXG4gKlxuICogIyMjIEFjY2Vzc2liaWxpdHlcbiAqXG4gKiBDaGFuZ2luZyB0aGUgYGludmFsaWRgIHByb3BlcnR5LCBlaXRoZXIgbWFudWFsbHkgb3IgYnkgY2FsbGluZyBgdmFsaWRhdGUoKWBcbiAqIHdpbGwgdXBkYXRlIHRoZSBgYXJpYS1pbnZhbGlkYCBhdHRyaWJ1dGUuXG4gKlxuICogQGRlbW8gZGVtby9pbmRleC5odG1sXG4gKiBAcG9seW1lckJlaGF2aW9yXG4gKi9cbmV4cG9ydCBjb25zdCBJcm9uVmFsaWRhdGFibGVCZWhhdmlvciA9IHtcblxuICBwcm9wZXJ0aWVzOiB7XG4gICAgLyoqXG4gICAgICogTmFtZSBvZiB0aGUgdmFsaWRhdG9yIHRvIHVzZS5cbiAgICAgKi9cbiAgICB2YWxpZGF0b3I6IHt0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGUgbGFzdCBjYWxsIHRvIGB2YWxpZGF0ZWAgaXMgaW52YWxpZC5cbiAgICAgKi9cbiAgICBpbnZhbGlkOiB7XG4gICAgICBub3RpZnk6IHRydWUsXG4gICAgICByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWUsXG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgb2JzZXJ2ZXI6ICdfaW52YWxpZENoYW5nZWQnXG4gICAgfSxcbiAgfSxcblxuICByZWdpc3RlcmVkOiBmdW5jdGlvbigpIHtcbiAgICBJcm9uVmFsaWRhdGFibGVCZWhhdmlvck1ldGEgPSBuZXcgSXJvbk1ldGEoe3R5cGU6ICd2YWxpZGF0b3InfSk7XG4gIH0sXG5cbiAgX2ludmFsaWRDaGFuZ2VkOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5pbnZhbGlkKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS1pbnZhbGlkJywgJ3RydWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcpO1xuICAgIH1cbiAgfSxcblxuICAvKiBSZWNvbXB1dGUgdGhpcyBldmVyeSB0aW1lIGl0J3MgbmVlZGVkLCBiZWNhdXNlIHdlIGRvbid0IGtub3cgaWYgdGhlXG4gICAqIHVuZGVybHlpbmcgSXJvblZhbGlkYXRhYmxlQmVoYXZpb3JNZXRhIGhhcyBjaGFuZ2VkLiAqL1xuICBnZXQgX3ZhbGlkYXRvcigpIHtcbiAgICByZXR1cm4gSXJvblZhbGlkYXRhYmxlQmVoYXZpb3JNZXRhICYmXG4gICAgICAgIElyb25WYWxpZGF0YWJsZUJlaGF2aW9yTWV0YS5ieUtleSh0aGlzLnZhbGlkYXRvcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgdGhlIHZhbGlkYXRvciBgdmFsaWRhdG9yYCBleGlzdHMuXG4gICAqL1xuICBoYXNWYWxpZGF0b3I6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLl92YWxpZGF0b3IgIT0gbnVsbDtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSBgdmFsdWVgIGlzIHZhbGlkLCBhbmQgdXBkYXRlcyBgaW52YWxpZGAuIElmIHlvdSB3YW50XG4gICAqIHlvdXIgZWxlbWVudCB0byBoYXZlIGN1c3RvbSB2YWxpZGF0aW9uIGxvZ2ljLCBkbyBub3Qgb3ZlcnJpZGUgdGhpcyBtZXRob2Q7XG4gICAqIG92ZXJyaWRlIGBfZ2V0VmFsaWRpdHkodmFsdWUpYCBpbnN0ZWFkLlxuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBEZXByZWNhdGVkOiBUaGUgdmFsdWUgdG8gYmUgdmFsaWRhdGVkLiBCeSBkZWZhdWx0LFxuICAgKiBpdCBpcyBwYXNzZWQgdG8gdGhlIHZhbGlkYXRvcidzIGB2YWxpZGF0ZSgpYCBmdW5jdGlvbiwgaWYgYSB2YWxpZGF0b3IgaXNcbiAgIHNldC5cbiAgICogSWYgdGhpcyBhcmd1bWVudCBpcyBub3Qgc3BlY2lmaWVkLCB0aGVuIHRoZSBlbGVtZW50J3MgYHZhbHVlYCBwcm9wZXJ0eVxuICAgKiBpcyB1c2VkLCBpZiBpdCBleGlzdHMuXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgYHZhbHVlYCBpcyB2YWxpZC5cbiAgICovXG4gIHZhbGlkYXRlOiBmdW5jdGlvbih2YWx1ZSkge1xuICAgIC8vIElmIHRoaXMgaXMgYW4gZWxlbWVudCB0aGF0IGFsc28gaGFzIGEgdmFsdWUgcHJvcGVydHksIGFuZCB0aGVyZSB3YXNcbiAgICAvLyBubyBleHBsaWNpdCB2YWx1ZSBhcmd1bWVudCBwYXNzZWQsIHVzZSB0aGUgZWxlbWVudCdzIHByb3BlcnR5IGluc3RlYWQuXG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgJiYgdGhpcy52YWx1ZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgdGhpcy5pbnZhbGlkID0gIXRoaXMuX2dldFZhbGlkaXR5KHRoaXMudmFsdWUpO1xuICAgIGVsc2VcbiAgICAgIHRoaXMuaW52YWxpZCA9ICF0aGlzLl9nZXRWYWxpZGl0eSh2YWx1ZSk7XG4gICAgcmV0dXJuICF0aGlzLmludmFsaWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIHZhbGlkLiAgQnkgZGVmYXVsdCwgaXQgaXMgcGFzc2VkXG4gICAqIHRvIHRoZSB2YWxpZGF0b3IncyBgdmFsaWRhdGUoKWAgZnVuY3Rpb24sIGlmIGEgdmFsaWRhdG9yIGlzIHNldC4gWW91XG4gICAqIHNob3VsZCBvdmVycmlkZSB0aGlzIG1ldGhvZCBpZiB5b3Ugd2FudCB0byBpbXBsZW1lbnQgY3VzdG9tIHZhbGlkaXR5XG4gICAqIGxvZ2ljIGZvciB5b3VyIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZSBUaGUgdmFsdWUgdG8gYmUgdmFsaWRhdGVkLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIGB2YWx1ZWAgaXMgdmFsaWQuXG4gICAqL1xuXG4gIF9nZXRWYWxpZGl0eTogZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZiAodGhpcy5oYXNWYWxpZGF0b3IoKSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3ZhbGlkYXRvci52YWxpZGF0ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzJztcblxuaW1wb3J0IHtJcm9uQTExeUFubm91bmNlcn0gZnJvbSAnQHBvbHltZXIvaXJvbi1hMTF5LWFubm91bmNlci9pcm9uLWExMXktYW5ub3VuY2VyLmpzJztcbmltcG9ydCB7SXJvblZhbGlkYXRhYmxlQmVoYXZpb3J9IGZyb20gJ0Bwb2x5bWVyL2lyb24tdmFsaWRhdGFibGUtYmVoYXZpb3IvaXJvbi12YWxpZGF0YWJsZS1iZWhhdmlvci5qcyc7XG5pbXBvcnQge1BvbHltZXJ9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLWZuLmpzJztcbmltcG9ydCB7ZG9tfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvcG9seW1lci5kb20uanMnO1xuaW1wb3J0IHtodG1sfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi91dGlscy9odG1sLXRhZy5qcyc7XG5cbi8qKlxuYDxpcm9uLWlucHV0PmAgaXMgYSB3cmFwcGVyIHRvIGEgbmF0aXZlIGA8aW5wdXQ+YCBlbGVtZW50LCB0aGF0IGFkZHMgdHdvLXdheVxuYmluZGluZyBhbmQgcHJldmVudGlvbiBvZiBpbnZhbGlkIGlucHV0LiBUbyB1c2UgaXQsIHlvdSBtdXN0IGRpc3RyaWJ1dGUgYSBuYXRpdmVcbmA8aW5wdXQ+YCB5b3Vyc2VsZi4gWW91IGNhbiBjb250aW51ZSB0byB1c2UgdGhlIG5hdGl2ZSBgaW5wdXRgIGFzIHlvdSB3b3VsZFxubm9ybWFsbHk6XG5cbiAgICA8aXJvbi1pbnB1dD5cbiAgICAgIDxpbnB1dD5cbiAgICA8L2lyb24taW5wdXQ+XG5cbiAgICA8aXJvbi1pbnB1dD5cbiAgICAgIDxpbnB1dCB0eXBlPVwiZW1haWxcIiBkaXNhYmxlZD5cbiAgICA8L2lyb24taW5wdXQ+XG5cbiMjIyBUd28td2F5IGJpbmRpbmdcblxuQnkgZGVmYXVsdCB5b3UgY2FuIG9ubHkgZ2V0IG5vdGlmaWVkIG9mIGNoYW5nZXMgdG8gYSBuYXRpdmUgYDxpbnB1dD5gJ3MgYHZhbHVlYFxuZHVlIHRvIHVzZXIgaW5wdXQ6XG5cbiAgICA8aW5wdXQgdmFsdWU9XCJ7e215VmFsdWU6OmlucHV0fX1cIj5cblxuVGhpcyBtZWFucyB0aGF0IGlmIHlvdSBpbXBlcmF0aXZlbHkgc2V0IHRoZSB2YWx1ZSAoaS5lLiBgc29tZU5hdGl2ZUlucHV0LnZhbHVlID1cbidmb28nYCksIG5vIGV2ZW50cyB3aWxsIGJlIGZpcmVkIGFuZCB0aGlzIGNoYW5nZSBjYW5ub3QgYmUgb2JzZXJ2ZWQuXG5cbmBpcm9uLWlucHV0YCBhZGRzIHRoZSBgYmluZC12YWx1ZWAgcHJvcGVydHkgdGhhdCBtaXJyb3JzIHRoZSBuYXRpdmUgYGlucHV0YCdzXG4nYHZhbHVlYCBwcm9wZXJ0eTsgdGhpcyBwcm9wZXJ0eSBjYW4gYmUgdXNlZCBmb3IgdHdvLXdheSBkYXRhIGJpbmRpbmcuXG5gYmluZC12YWx1ZWAgd2lsbCBub3RpZnkgaWYgaXQgaXMgY2hhbmdlZCBlaXRoZXIgYnkgdXNlciBpbnB1dCBvciBieSBzY3JpcHQuXG5cbiAgICA8aXJvbi1pbnB1dCBiaW5kLXZhbHVlPVwie3tteVZhbHVlfX1cIj5cbiAgICAgIDxpbnB1dD5cbiAgICA8L2lyb24taW5wdXQ+XG5cbk5vdGU6IHRoaXMgbWVhbnMgdGhhdCBpZiB5b3Ugd2FudCB0byBpbXBlcmF0aXZlbHkgc2V0IHRoZSBuYXRpdmUgYGlucHV0YCdzLCB5b3Vcbl9tdXN0XyBzZXQgYGJpbmQtdmFsdWVgIGluc3RlYWQsIHNvIHRoYXQgdGhlIHdyYXBwZXIgYGlyb24taW5wdXRgIGNhbiBiZVxubm90aWZpZWQuXG5cbiMjIyBWYWxpZGF0aW9uXG5cbmBpcm9uLWlucHV0YCB1c2VzIHRoZSBuYXRpdmUgYGlucHV0YCdzIHZhbGlkYXRpb24uIEZvciBzaW1wbGljaXR5LCBgaXJvbi1pbnB1dGBcbmhhcyBhIGB2YWxpZGF0ZSgpYCBtZXRob2QgKHdoaWNoIGludGVybmFsbHkganVzdCBjaGVja3MgdGhlIGRpc3RyaWJ1dGVkXG5gaW5wdXRgJ3MgdmFsaWRpdHkpLCB3aGljaCBzZXRzIGFuIGBpbnZhbGlkYCBhdHRyaWJ1dGUgdGhhdCBjYW4gYWxzbyBiZSB1c2VkIGZvclxuc3R5bGluZy5cblxuVG8gdmFsaWRhdGUgYXV0b21hdGljYWxseSBhcyB5b3UgdHlwZSwgeW91IGNhbiB1c2UgdGhlIGBhdXRvLXZhbGlkYXRlYFxuYXR0cmlidXRlLlxuXG5gaXJvbi1pbnB1dGAgYWxzbyBmaXJlcyBhbiBgaXJvbi1pbnB1dC12YWxpZGF0ZWAgZXZlbnQgYWZ0ZXIgYHZhbGlkYXRlKClgIGlzXG5jYWxsZWQuIFlvdSBjYW4gdXNlIGl0IHRvIGltcGxlbWVudCBhIGN1c3RvbSB2YWxpZGF0b3I6XG5cbiAgICB2YXIgQ2F0c09ubHlWYWxpZGF0b3IgPSB7XG4gICAgICB2YWxpZGF0ZTogZnVuY3Rpb24oaXJvbklucHV0KSB7XG4gICAgICAgIHZhciB2YWxpZCA9ICFpcm9uSW5wdXQuYmluZFZhbHVlIHx8IGlyb25JbnB1dC5iaW5kVmFsdWUgPT09ICdjYXQnO1xuICAgICAgICBpcm9uSW5wdXQuaW52YWxpZCA9ICF2YWxpZDtcbiAgICAgICAgcmV0dXJuIHZhbGlkO1xuICAgICAgfVxuICAgIH1cbiAgICBpcm9uSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaXJvbi1pbnB1dC12YWxpZGF0ZScsIGZ1bmN0aW9uKCkge1xuICAgICAgQ2F0c09ubHkudmFsaWRhdGUoaW5wdXQyKTtcbiAgICB9KTtcblxuWW91IGNhbiBhbHNvIHVzZSBhbiBlbGVtZW50IGltcGxlbWVudGluZyBhblxuW2BJcm9uVmFsaWRhdG9yQmVoYXZpb3JgXSgvZWxlbWVudC9Qb2x5bWVyRWxlbWVudHMvaXJvbi12YWxpZGF0YWJsZS1iZWhhdmlvcikuXG5UaGlzIGV4YW1wbGUgY2FuIGFsc28gYmUgZm91bmQgaW4gdGhlIGRlbW8gZm9yIHRoaXMgZWxlbWVudDpcblxuICAgIDxpcm9uLWlucHV0IHZhbGlkYXRvcj1cImNhdHMtb25seVwiPlxuICAgICAgPGlucHV0PlxuICAgIDwvaXJvbi1pbnB1dD5cblxuIyMjIFByZXZlbnRpbmcgaW52YWxpZCBpbnB1dFxuXG5JdCBtYXkgYmUgZGVzaXJhYmxlIHRvIG9ubHkgYWxsb3cgdXNlcnMgdG8gZW50ZXIgY2VydGFpbiBjaGFyYWN0ZXJzLiBZb3UgY2FuIHVzZVxudGhlIGBhbGxvd2VkLXBhdHRlcm5gIGF0dHJpYnV0ZSB0byBhY2NvbXBsaXNoIHRoaXMuIFRoaXMgZmVhdHVyZSBpcyBzZXBhcmF0ZVxuZnJvbSB2YWxpZGF0aW9uLCBhbmQgYGFsbG93ZWQtcGF0dGVybmAgZG9lcyBub3QgYWZmZWN0IGhvdyB0aGUgaW5wdXQgaXNcbnZhbGlkYXRlZC5cblxuICAgIC8vIE9ubHkgYWxsb3cgdHlwaW5nIGRpZ2l0cywgYnV0IGEgdmFsaWQgaW5wdXQgaGFzIGV4YWN0bHkgNSBkaWdpdHMuXG4gICAgPGlyb24taW5wdXQgYWxsb3dlZC1wYXR0ZXJuPVwiWzAtOV1cIj5cbiAgICAgIDxpbnB1dCBwYXR0ZXJuPVwiXFxkezV9XCI+XG4gICAgPC9pcm9uLWlucHV0PlxuXG5AZGVtbyBkZW1vL2luZGV4Lmh0bWxcbiovXG5Qb2x5bWVyKHtcbiAgX3RlbXBsYXRlOiBodG1sYFxuICAgIDxzdHlsZT5cbiAgICAgIDpob3N0IHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgfVxuICAgIDwvc3R5bGU+XG4gICAgPHNsb3QgaWQ9XCJjb250ZW50XCI+PC9zbG90PlxuYCxcblxuICBpczogJ2lyb24taW5wdXQnLFxuICBiZWhhdmlvcnM6IFtJcm9uVmFsaWRhdGFibGVCZWhhdmlvcl0sXG5cbiAgLyoqXG4gICAqIEZpcmVkIHdoZW5ldmVyIGB2YWxpZGF0ZSgpYCBpcyBjYWxsZWQuXG4gICAqXG4gICAqIEBldmVudCBpcm9uLWlucHV0LXZhbGlkYXRlXG4gICAqL1xuXG4gIHByb3BlcnRpZXM6IHtcblxuICAgIC8qKlxuICAgICAqIFVzZSB0aGlzIHByb3BlcnR5IGluc3RlYWQgb2YgYHZhbHVlYCBmb3IgdHdvLXdheSBkYXRhIGJpbmRpbmcsIG9yIHRvXG4gICAgICogc2V0IGEgZGVmYXVsdCB2YWx1ZSBmb3IgdGhlIGlucHV0LiAqKkRvIG5vdCoqIHVzZSB0aGUgZGlzdHJpYnV0ZWRcbiAgICAgKiBpbnB1dCdzIGB2YWx1ZWAgcHJvcGVydHkgdG8gc2V0IGEgZGVmYXVsdCB2YWx1ZS5cbiAgICAgKi9cbiAgICBiaW5kVmFsdWU6IHt0eXBlOiBTdHJpbmcsIHZhbHVlOiAnJ30sXG5cbiAgICAvKipcbiAgICAgKiBDb21wdXRlZCBwcm9wZXJ0eSB0aGF0IGVjaG9lcyBgYmluZFZhbHVlYCAobW9zdGx5IHVzZWQgZm9yIFBvbHltZXIgMS4wXG4gICAgICogYmFja2NvbXBhdGliaWxpdHksIGlmIHlvdSB3ZXJlIG9uZS13YXkgYmluZGluZyB0byB0aGUgUG9seW1lciAxLjBcbiAgICAgKiBgaW5wdXQgaXM9XCJpcm9uLWlucHV0XCJgIHZhbHVlIGF0dHJpYnV0ZSkuXG4gICAgICovXG4gICAgdmFsdWU6IHt0eXBlOiBTdHJpbmcsIGNvbXB1dGVkOiAnX2NvbXB1dGVWYWx1ZShiaW5kVmFsdWUpJ30sXG5cbiAgICAvKipcbiAgICAgKiBSZWdleC1saWtlIGxpc3Qgb2YgY2hhcmFjdGVycyBhbGxvd2VkIGFzIGlucHV0OyBhbGwgY2hhcmFjdGVycyBub3QgaW4gdGhlXG4gICAgICogbGlzdCB3aWxsIGJlIHJlamVjdGVkLiBUaGUgcmVjb21tZW5kZWQgZm9ybWF0IHNob3VsZCBiZSBhIGxpc3Qgb2YgYWxsb3dlZFxuICAgICAqIGNoYXJhY3RlcnMsIGZvciBleGFtcGxlLCBgW2EtekEtWjAtOS4rLSE7Ol1gLlxuICAgICAqXG4gICAgICogVGhpcyBwYXR0ZXJuIHJlcHJlc2VudHMgdGhlIGFsbG93ZWQgY2hhcmFjdGVycyBmb3IgdGhlIGZpZWxkOyBhcyB0aGUgdXNlclxuICAgICAqIGlucHV0cyB0ZXh0LCBlYWNoIGluZGl2aWR1YWwgY2hhcmFjdGVyIHdpbGwgYmUgY2hlY2tlZCBhZ2FpbnN0IHRoZVxuICAgICAqIHBhdHRlcm4gKHJhdGhlciB0aGFuIGNoZWNraW5nIHRoZSBlbnRpcmUgdmFsdWUgYXMgYSB3aG9sZSkuIElmIGFcbiAgICAgKiBjaGFyYWN0ZXIgaXMgbm90IGEgbWF0Y2gsIGl0IHdpbGwgYmUgcmVqZWN0ZWQuXG4gICAgICpcbiAgICAgKiBQYXN0ZWQgaW5wdXQgd2lsbCBoYXZlIGVhY2ggY2hhcmFjdGVyIGNoZWNrZWQgaW5kaXZpZHVhbGx5OyBpZiBhbnlcbiAgICAgKiBjaGFyYWN0ZXIgZG9lc24ndCBtYXRjaCBgYWxsb3dlZFBhdHRlcm5gLCB0aGUgZW50aXJlIHBhc3RlZCBzdHJpbmcgd2lsbFxuICAgICAqIGJlIHJlamVjdGVkLlxuICAgICAqXG4gICAgICogTm90ZTogaWYgeW91IHdlcmUgdXNpbmcgYGlyb24taW5wdXRgIGluIDEuMCwgeW91IHdlcmUgYWxzbyByZXF1aXJlZCB0b1xuICAgICAqIHNldCBgcHJldmVudC1pbnZhbGlkLWlucHV0YC4gVGhpcyBpcyBubyBsb25nZXIgbmVlZGVkIGFzIG9mIFBvbHltZXIgMi4wLFxuICAgICAqIGFuZCB3aWxsIGJlIHNldCBhdXRvbWF0aWNhbGx5IGZvciB5b3UgaWYgYW4gYGFsbG93ZWRQYXR0ZXJuYCBpcyBwcm92aWRlZC5cbiAgICAgKlxuICAgICAqL1xuICAgIGFsbG93ZWRQYXR0ZXJuOiB7dHlwZTogU3RyaW5nfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0byB0cnVlIHRvIGF1dG8tdmFsaWRhdGUgdGhlIGlucHV0IHZhbHVlIGFzIHlvdSB0eXBlLlxuICAgICAqL1xuICAgIGF1dG9WYWxpZGF0ZToge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX0sXG5cbiAgICAvKipcbiAgICAgKiBUaGUgbmF0aXZlIGlucHV0IGVsZW1lbnQuXG4gICAgICovXG4gICAgX2lucHV0RWxlbWVudDogT2JqZWN0LFxuICB9LFxuXG4gIG9ic2VydmVyczogWydfYmluZFZhbHVlQ2hhbmdlZChiaW5kVmFsdWUsIF9pbnB1dEVsZW1lbnQpJ10sXG4gIGxpc3RlbmVyczogeydpbnB1dCc6ICdfb25JbnB1dCcsICdrZXlwcmVzcyc6ICdfb25LZXlwcmVzcyd9LFxuXG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgIElyb25BMTF5QW5ub3VuY2VyLnJlcXVlc3RBdmFpbGFiaWxpdHkoKTtcbiAgICB0aGlzLl9wcmV2aW91c1ZhbGlkSW5wdXQgPSAnJztcbiAgICB0aGlzLl9wYXR0ZXJuQWxyZWFkeUNoZWNrZWQgPSBmYWxzZTtcbiAgfSxcblxuICBhdHRhY2hlZDogZnVuY3Rpb24oKSB7XG4gICAgLy8gSWYgdGhlIGlucHV0IGlzIGFkZGVkIGF0IGEgbGF0ZXIgdGltZSwgdXBkYXRlIHRoZSBpbnRlcm5hbCByZWZlcmVuY2UuXG4gICAgdGhpcy5fb2JzZXJ2ZXIgPSBkb20odGhpcykub2JzZXJ2ZU5vZGVzKGZ1bmN0aW9uKGluZm8pIHtcbiAgICAgIHRoaXMuX2luaXRTbG90dGVkSW5wdXQoKTtcbiAgICB9LmJpbmQodGhpcykpO1xuICB9LFxuXG4gIGRldGFjaGVkOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5fb2JzZXJ2ZXIpIHtcbiAgICAgIGRvbSh0aGlzKS51bm9ic2VydmVOb2Rlcyh0aGlzLl9vYnNlcnZlcik7XG4gICAgICB0aGlzLl9vYnNlcnZlciA9IG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkaXN0cmlidXRlZCBpbnB1dCBlbGVtZW50LlxuICAgKi9cbiAgZ2V0IGlucHV0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50O1xuICB9LFxuXG4gIF9pbml0U2xvdHRlZElucHV0OiBmdW5jdGlvbigpIHtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnQgPSB0aGlzLmdldEVmZmVjdGl2ZUNoaWxkcmVuKClbMF07XG5cbiAgICBpZiAodGhpcy5pbnB1dEVsZW1lbnQgJiYgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUpIHtcbiAgICAgIHRoaXMuYmluZFZhbHVlID0gdGhpcy5pbnB1dEVsZW1lbnQudmFsdWU7XG4gICAgfVxuXG4gICAgdGhpcy5maXJlKCdpcm9uLWlucHV0LXJlYWR5Jyk7XG4gIH0sXG5cbiAgZ2V0IF9wYXR0ZXJuUmVnRXhwKCkge1xuICAgIHZhciBwYXR0ZXJuO1xuICAgIGlmICh0aGlzLmFsbG93ZWRQYXR0ZXJuKSB7XG4gICAgICBwYXR0ZXJuID0gbmV3IFJlZ0V4cCh0aGlzLmFsbG93ZWRQYXR0ZXJuKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoICh0aGlzLmlucHV0RWxlbWVudC50eXBlKSB7XG4gICAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgICAgcGF0dGVybiA9IC9bMC05LixlLV0vO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcGF0dGVybjtcbiAgfSxcblxuICAvKipcbiAgICogQHN1cHByZXNzIHtjaGVja1R5cGVzfVxuICAgKi9cbiAgX2JpbmRWYWx1ZUNoYW5nZWQ6IGZ1bmN0aW9uKGJpbmRWYWx1ZSwgaW5wdXRFbGVtZW50KSB7XG4gICAgLy8gVGhlIG9ic2VydmVyIGNvdWxkIGhhdmUgcnVuIGJlZm9yZSBhdHRhY2hlZCgpIHdoZW4gd2UgaGF2ZSBhY3R1YWxseVxuICAgIC8vIGluaXRpYWxpemVkIHRoaXMgcHJvcGVydHkuXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoYmluZFZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGlucHV0RWxlbWVudC52YWx1ZSA9IG51bGw7XG4gICAgfSBlbHNlIGlmIChiaW5kVmFsdWUgIT09IGlucHV0RWxlbWVudC52YWx1ZSkge1xuICAgICAgdGhpcy5pbnB1dEVsZW1lbnQudmFsdWUgPSBiaW5kVmFsdWU7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXV0b1ZhbGlkYXRlKSB7XG4gICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gICAgfVxuXG4gICAgLy8gbWFudWFsbHkgbm90aWZ5IGJlY2F1c2Ugd2UgZG9uJ3Qgd2FudCB0byBub3RpZnkgdW50aWwgYWZ0ZXIgc2V0dGluZyB2YWx1ZVxuICAgIHRoaXMuZmlyZSgnYmluZC12YWx1ZS1jaGFuZ2VkJywge3ZhbHVlOiBiaW5kVmFsdWV9KTtcbiAgfSxcblxuICBfb25JbnB1dDogZnVuY3Rpb24oKSB7XG4gICAgLy8gTmVlZCB0byB2YWxpZGF0ZSBlYWNoIG9mIHRoZSBjaGFyYWN0ZXJzIHBhc3RlZCBpZiB0aGV5IGhhdmVuJ3RcbiAgICAvLyBiZWVuIHZhbGlkYXRlZCBpbnNpZGUgYF9vbktleXByZXNzYCBhbHJlYWR5LlxuICAgIGlmICh0aGlzLmFsbG93ZWRQYXR0ZXJuICYmICF0aGlzLl9wYXR0ZXJuQWxyZWFkeUNoZWNrZWQpIHtcbiAgICAgIHZhciB2YWxpZCA9IHRoaXMuX2NoZWNrUGF0dGVyblZhbGlkaXR5KCk7XG4gICAgICBpZiAoIXZhbGlkKSB7XG4gICAgICAgIHRoaXMuX2Fubm91bmNlSW52YWxpZENoYXJhY3RlcihcbiAgICAgICAgICAgICdJbnZhbGlkIHN0cmluZyBvZiBjaGFyYWN0ZXJzIG5vdCBlbnRlcmVkLicpO1xuICAgICAgICB0aGlzLmlucHV0RWxlbWVudC52YWx1ZSA9IHRoaXMuX3ByZXZpb3VzVmFsaWRJbnB1dDtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5iaW5kVmFsdWUgPSB0aGlzLl9wcmV2aW91c1ZhbGlkSW5wdXQgPSB0aGlzLmlucHV0RWxlbWVudC52YWx1ZTtcbiAgICB0aGlzLl9wYXR0ZXJuQWxyZWFkeUNoZWNrZWQgPSBmYWxzZTtcbiAgfSxcblxuICBfaXNQcmludGFibGU6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gV2hhdCBhIGNvbnRyb2wvcHJpbnRhYmxlIGNoYXJhY3RlciBpcyB2YXJpZXMgd2lsZGx5IGJhc2VkIG9uIHRoZSBicm93c2VyLlxuICAgIC8vIC0gbW9zdCBjb250cm9sIGNoYXJhY3RlcnMgKGFycm93cywgYmFja3NwYWNlKSBkbyBub3Qgc2VuZCBhIGBrZXlwcmVzc2BcbiAgICAvLyBldmVudFxuICAgIC8vICAgaW4gQ2hyb21lLCBidXQgdGhlICpkbyogb24gRmlyZWZveFxuICAgIC8vIC0gaW4gRmlyZWZveCwgd2hlbiB0aGV5IGRvIHNlbmQgYSBga2V5cHJlc3NgIGV2ZW50LCBjb250cm9sIGNoYXJzIGhhdmVcbiAgICAvLyAgIGEgY2hhckNvZGUgPSAwLCBrZXlDb2RlID0geHggKGZvciBleC4gNDAgZm9yIGRvd24gYXJyb3cpXG4gICAgLy8gLSBwcmludGFibGUgY2hhcmFjdGVycyBhbHdheXMgc2VuZCBhIGtleXByZXNzIGV2ZW50LlxuICAgIC8vIC0gaW4gRmlyZWZveCwgcHJpbnRhYmxlIGNoYXJzIGFsd2F5cyBoYXZlIGEga2V5Q29kZSA9IDAuIEluIENocm9tZSwgdGhlXG4gICAgLy8ga2V5Q29kZVxuICAgIC8vICAgYWx3YXlzIG1hdGNoZXMgdGhlIGNoYXJDb2RlLlxuICAgIC8vIE5vbmUgb2YgdGhpcyBtYWtlcyBhbnkgc2Vuc2UuXG5cbiAgICAvLyBGb3IgdGhlc2Uga2V5cywgQVNDSUkgY29kZSA9PSBicm93c2VyIGtleWNvZGUuXG4gICAgdmFyIGFueU5vblByaW50YWJsZSA9IChldmVudC5rZXlDb2RlID09IDgpIHx8ICAvLyBiYWNrc3BhY2VcbiAgICAgICAgKGV2ZW50LmtleUNvZGUgPT0gOSkgfHwgICAgICAgICAgICAgICAgICAgIC8vIHRhYlxuICAgICAgICAoZXZlbnQua2V5Q29kZSA9PSAxMykgfHwgICAgICAgICAgICAgICAgICAgLy8gZW50ZXJcbiAgICAgICAgKGV2ZW50LmtleUNvZGUgPT0gMjcpOyAgICAgICAgICAgICAgICAgICAgIC8vIGVzY2FwZVxuXG4gICAgLy8gRm9yIHRoZXNlIGtleXMsIG1ha2Ugc3VyZSBpdCdzIGEgYnJvd3NlciBrZXljb2RlIGFuZCBub3QgYW4gQVNDSUkgY29kZS5cbiAgICB2YXIgbW96Tm9uUHJpbnRhYmxlID0gKGV2ZW50LmtleUNvZGUgPT0gMTkpIHx8ICAvLyBwYXVzZVxuICAgICAgICAoZXZlbnQua2V5Q29kZSA9PSAyMCkgfHwgICAgICAgICAgICAgICAgICAgIC8vIGNhcHMgbG9ja1xuICAgICAgICAoZXZlbnQua2V5Q29kZSA9PSA0NSkgfHwgICAgICAgICAgICAgICAgICAgIC8vIGluc2VydFxuICAgICAgICAoZXZlbnQua2V5Q29kZSA9PSA0NikgfHwgICAgICAgICAgICAgICAgICAgIC8vIGRlbGV0ZVxuICAgICAgICAoZXZlbnQua2V5Q29kZSA9PSAxNDQpIHx8ICAgICAgICAgICAgICAgICAgIC8vIG51bSBsb2NrXG4gICAgICAgIChldmVudC5rZXlDb2RlID09IDE0NSkgfHwgICAgICAgICAgICAgICAgICAgLy8gc2Nyb2xsIGxvY2tcbiAgICAgICAgKGV2ZW50LmtleUNvZGUgPiAzMiAmJlxuICAgICAgICAgZXZlbnQua2V5Q29kZSA8IDQxKSB8fCAgLy8gcGFnZSB1cC9kb3duLCBlbmQsIGhvbWUsIGFycm93c1xuICAgICAgICAoZXZlbnQua2V5Q29kZSA+IDExMSAmJiBldmVudC5rZXlDb2RlIDwgMTI0KTsgIC8vIGZuIGtleXNcblxuICAgIHJldHVybiAhYW55Tm9uUHJpbnRhYmxlICYmICEoZXZlbnQuY2hhckNvZGUgPT0gMCAmJiBtb3pOb25QcmludGFibGUpO1xuICB9LFxuXG4gIF9vbktleXByZXNzOiBmdW5jdGlvbihldmVudCkge1xuICAgIGlmICghdGhpcy5hbGxvd2VkUGF0dGVybiAmJiB0aGlzLmlucHV0RWxlbWVudC50eXBlICE9PSAnbnVtYmVyJykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgcmVnZXhwID0gdGhpcy5fcGF0dGVyblJlZ0V4cDtcbiAgICBpZiAoIXJlZ2V4cCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBzcGVjaWFsIGtleXMgYW5kIGJhY2tzcGFjZVxuICAgIGlmIChldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkgfHwgZXZlbnQuYWx0S2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgdGhlIHBhdHRlcm4gZWl0aGVyIGhlcmUgb3IgaW4gYF9vbklucHV0YCwgYnV0IG5vdCBpbiBib3RoLlxuICAgIHRoaXMuX3BhdHRlcm5BbHJlYWR5Q2hlY2tlZCA9IHRydWU7XG5cbiAgICB2YXIgdGhpc0NoYXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGV2ZW50LmNoYXJDb2RlKTtcbiAgICBpZiAodGhpcy5faXNQcmludGFibGUoZXZlbnQpICYmICFyZWdleHAudGVzdCh0aGlzQ2hhcikpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9hbm5vdW5jZUludmFsaWRDaGFyYWN0ZXIoXG4gICAgICAgICAgJ0ludmFsaWQgY2hhcmFjdGVyICcgKyB0aGlzQ2hhciArICcgbm90IGVudGVyZWQuJyk7XG4gICAgfVxuICB9LFxuXG4gIF9jaGVja1BhdHRlcm5WYWxpZGl0eTogZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlZ2V4cCA9IHRoaXMuX3BhdHRlcm5SZWdFeHA7XG4gICAgaWYgKCFyZWdleHApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlLmxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIXJlZ2V4cC50ZXN0KHRoaXMuaW5wdXRFbGVtZW50LnZhbHVlW2ldKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyB2YWxpZC4gVGhlIHZhbGlkYXRvciBwcm92aWRlZCBpbiBgdmFsaWRhdG9yYFxuICAgKiB3aWxsIGJlIHVzZWQgZmlyc3QsIHRoZW4gYW55IGNvbnN0cmFpbnRzLlxuICAgKiBAcmV0dXJuIHtib29sZWFufSBUcnVlIGlmIHRoZSB2YWx1ZSBpcyB2YWxpZC5cbiAgICovXG4gIHZhbGlkYXRlOiBmdW5jdGlvbigpIHtcbiAgICBpZiAoIXRoaXMuaW5wdXRFbGVtZW50KSB7XG4gICAgICB0aGlzLmludmFsaWQgPSBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFVzZSB0aGUgbmVzdGVkIGlucHV0J3MgbmF0aXZlIHZhbGlkaXR5LlxuICAgIHZhciB2YWxpZCA9IHRoaXMuaW5wdXRFbGVtZW50LmNoZWNrVmFsaWRpdHkoKTtcblxuICAgIC8vIE9ubHkgZG8gZXh0cmEgY2hlY2tpbmcgaWYgdGhlIGJyb3dzZXIgdGhvdWdodCB0aGlzIHdhcyB2YWxpZC5cbiAgICBpZiAodmFsaWQpIHtcbiAgICAgIC8vIEVtcHR5LCByZXF1aXJlZCBpbnB1dCBpcyBpbnZhbGlkXG4gICAgICBpZiAodGhpcy5yZXF1aXJlZCAmJiB0aGlzLmJpbmRWYWx1ZSA9PT0gJycpIHtcbiAgICAgICAgdmFsaWQgPSBmYWxzZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5oYXNWYWxpZGF0b3IoKSkge1xuICAgICAgICB2YWxpZCA9IElyb25WYWxpZGF0YWJsZUJlaGF2aW9yLnZhbGlkYXRlLmNhbGwodGhpcywgdGhpcy5iaW5kVmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuaW52YWxpZCA9ICF2YWxpZDtcbiAgICB0aGlzLmZpcmUoJ2lyb24taW5wdXQtdmFsaWRhdGUnKTtcbiAgICByZXR1cm4gdmFsaWQ7XG4gIH0sXG5cbiAgX2Fubm91bmNlSW52YWxpZENoYXJhY3RlcjogZnVuY3Rpb24obWVzc2FnZSkge1xuICAgIHRoaXMuZmlyZSgnaXJvbi1hbm5vdW5jZScsIHt0ZXh0OiBtZXNzYWdlfSk7XG4gIH0sXG5cbiAgX2NvbXB1dGVWYWx1ZTogZnVuY3Rpb24oYmluZFZhbHVlKSB7XG4gICAgcmV0dXJuIGJpbmRWYWx1ZTtcbiAgfVxufSk7XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG5cbmV4cG9ydCB7fTsgLy8gZW5zdXJlIHRoaXMgZmlsZSBjYW4gb25seSBiZSBwYXJzZWQgYXMgYSBtb2R1bGUuXG5cbi8vIEdpdmUgdGhlIHVzZXIgdGhlIGNob2ljZSB0byBvcHQgb3V0IG9mIGZvbnQgbG9hZGluZy5cbmlmICghd2luZG93LnBvbHltZXJTa2lwTG9hZGluZ0ZvbnRSb2JvdG8pIHtcbiAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpbmsnKTtcbiAgbGluay5yZWwgPSAnc3R5bGVzaGVldCc7XG4gIGxpbmsudHlwZSA9ICd0ZXh0L2Nzcyc7XG4gIGxpbmsuY3Jvc3NPcmlnaW4gPSAnYW5vbnltb3VzJztcbiAgbGluay5ocmVmID1cbiAgICAgICdodHRwczovL2ZvbnRzLmdvb2dsZWFwaXMuY29tL2Nzcz9mYW1pbHk9Um9ib3RvK01vbm86NDAwLDcwMHxSb2JvdG86NDAwLDMwMCwzMDBpdGFsaWMsNDAwaXRhbGljLDUwMCw1MDBpdGFsaWMsNzAwLDcwMGl0YWxpYyc7XG4gIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluayk7XG59XG4iLCAiLyoqXG5AbGljZW5zZVxuQ29weXJpZ2h0IChjKSAyMDE1IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cblRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0xJQ0VOU0UudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9BVVRIT1JTLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmVcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9DT05UUklCVVRPUlMudHh0IENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzXG5wYXJ0IG9mIHRoZSBwb2x5bWVyIHByb2plY3QgaXMgYWxzbyBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50XG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vUEFURU5UUy50eHRcbiovXG4vKlxuVHlwb2dyYXBoaWMgc3R5bGVzIGFyZSBwcm92aWRlZCBtYXRjaGluZyB0aGUgTWF0ZXJpYWwgRGVzaWduIHN0YW5kYXJkIHN0eWxlczpcbmh0dHA6Ly93d3cuZ29vZ2xlLmNvbS9kZXNpZ24vc3BlYy9zdHlsZS90eXBvZ3JhcGh5Lmh0bWwjdHlwb2dyYXBoeS1zdGFuZGFyZC1zdHlsZXNcblxuTm90ZSB0aGF0IHRoZXNlIGFyZSBFbmdsaXNoL0xhdGluIGNlbnRyaWMgc3R5bGVzLiBZb3UgbWF5IG5lZWQgdG8gZnVydGhlciBhZGp1c3RcbmxpbmUgaGVpZ2h0cyBhbmQgd2VpZ2h0cyBmb3IgQ0pLIHR5cGVzZXR0aW5nLiBTZWUgdGhlIG5vdGVzIGluIHRoZSBNYXRlcmlhbFxuRGVzaWduIHR5cG9ncmFwaHkgc2VjdGlvbi5cbiovXG5cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5pbXBvcnQgJ0Bwb2x5bWVyL2ZvbnQtcm9ib3RvL3JvYm90by5qcyc7XG5cbmltcG9ydCB7aHRtbH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuY29uc3QgdGVtcGxhdGUgPSBodG1sYDxjdXN0b20tc3R5bGU+XG4gIDxzdHlsZSBpcz1cImN1c3RvbS1zdHlsZVwiPlxuICAgIGh0bWwge1xuXG4gICAgICAvKiBTaGFyZWQgU3R5bGVzICovXG4gICAgICAtLXBhcGVyLWZvbnQtY29tbW9uLWJhc2U6IHtcbiAgICAgICAgZm9udC1mYW1pbHk6ICdSb2JvdG8nLCAnTm90bycsIHNhbnMtc2VyaWY7XG4gICAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xuICAgICAgfTtcblxuICAgICAgLS1wYXBlci1mb250LWNvbW1vbi1jb2RlOiB7XG4gICAgICAgIGZvbnQtZmFtaWx5OiAnUm9ib3RvIE1vbm8nLCAnQ29uc29sYXMnLCAnTWVubG8nLCBtb25vc3BhY2U7XG4gICAgICAgIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xuICAgICAgfTtcblxuICAgICAgLS1wYXBlci1mb250LWNvbW1vbi1leHBlbnNpdmUta2VybmluZzoge1xuICAgICAgICB0ZXh0LXJlbmRlcmluZzogb3B0aW1pemVMZWdpYmlsaXR5O1xuICAgICAgfTtcblxuICAgICAgLS1wYXBlci1mb250LWNvbW1vbi1ub3dyYXA6IHtcbiAgICAgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gICAgICB9O1xuXG4gICAgICAvKiBNYXRlcmlhbCBGb250IFN0eWxlcyAqL1xuXG4gICAgICAtLXBhcGVyLWZvbnQtZGlzcGxheTQ6IHtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tYmFzZTtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tbm93cmFwO1xuXG4gICAgICAgIGZvbnQtc2l6ZTogMTEycHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiAzMDA7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAtLjA0NGVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMTIwcHg7XG4gICAgICB9O1xuXG4gICAgICAtLXBhcGVyLWZvbnQtZGlzcGxheTM6IHtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tYmFzZTtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tbm93cmFwO1xuXG4gICAgICAgIGZvbnQtc2l6ZTogNTZweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgbGV0dGVyLXNwYWNpbmc6IC0uMDI2ZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiA2MHB4O1xuICAgICAgfTtcblxuICAgICAgLS1wYXBlci1mb250LWRpc3BsYXkyOiB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLWJhc2U7XG5cbiAgICAgICAgZm9udC1zaXplOiA0NXB4O1xuICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogLS4wMThlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDQ4cHg7XG4gICAgICB9O1xuXG4gICAgICAtLXBhcGVyLWZvbnQtZGlzcGxheTE6IHtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tYmFzZTtcblxuICAgICAgICBmb250LXNpemU6IDM0cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAtLjAxZW07XG4gICAgICAgIGxpbmUtaGVpZ2h0OiA0MHB4O1xuICAgICAgfTtcblxuICAgICAgLS1wYXBlci1mb250LWhlYWRsaW5lOiB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLWJhc2U7XG5cbiAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogLS4wMTJlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDMycHg7XG4gICAgICB9O1xuXG4gICAgICAtLXBhcGVyLWZvbnQtdGl0bGU6IHtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tYmFzZTtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tbm93cmFwO1xuXG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDUwMDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDI4cHg7XG4gICAgICB9O1xuXG4gICAgICAtLXBhcGVyLWZvbnQtc3ViaGVhZDoge1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1mb250LWNvbW1vbi1iYXNlO1xuXG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgZm9udC13ZWlnaHQ6IDQwMDtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gICAgICB9O1xuXG4gICAgICAtLXBhcGVyLWZvbnQtYm9keTI6IHtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tYmFzZTtcblxuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICAgICAgfTtcblxuICAgICAgLS1wYXBlci1mb250LWJvZHkxOiB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLWJhc2U7XG5cbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICAgIH07XG5cbiAgICAgIC0tcGFwZXItZm9udC1jYXB0aW9uOiB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLWJhc2U7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLW5vd3JhcDtcblxuICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiAwLjAxMWVtO1xuICAgICAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICAgIH07XG5cbiAgICAgIC0tcGFwZXItZm9udC1tZW51OiB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLWJhc2U7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLW5vd3JhcDtcblxuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA1MDA7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyNHB4O1xuICAgICAgfTtcblxuICAgICAgLS1wYXBlci1mb250LWJ1dHRvbjoge1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1mb250LWNvbW1vbi1iYXNlO1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1mb250LWNvbW1vbi1ub3dyYXA7XG5cbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBsZXR0ZXItc3BhY2luZzogMC4wMThlbTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IDI0cHg7XG4gICAgICAgIHRleHQtdHJhbnNmb3JtOiB1cHBlcmNhc2U7XG4gICAgICB9O1xuXG4gICAgICAtLXBhcGVyLWZvbnQtY29kZTI6IHtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jb21tb24tY29kZTtcblxuICAgICAgICBmb250LXNpemU6IDE0cHg7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiA3MDA7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAgICAgfTtcblxuICAgICAgLS1wYXBlci1mb250LWNvZGUxOiB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY29tbW9uLWNvZGU7XG5cbiAgICAgICAgZm9udC1zaXplOiAxNHB4O1xuICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICBsaW5lLWhlaWdodDogMjBweDtcbiAgICAgIH07XG5cbiAgICB9XG5cbiAgPC9zdHlsZT5cbjwvY3VzdG9tLXN0eWxlPmA7XG50ZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XG5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQpO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzJztcblxuLyoqXG4gKiBVc2UgYFBvbHltZXIuUGFwZXJJbnB1dEFkZG9uQmVoYXZpb3JgIHRvIGltcGxlbWVudCBhbiBhZGQtb24gZm9yXG4gKiBgPHBhcGVyLWlucHV0LWNvbnRhaW5lcj5gLiBBIGFkZC1vbiBhcHBlYXJzIGJlbG93IHRoZSBpbnB1dCwgYW5kIG1heSBkaXNwbGF5XG4gKiBpbmZvcm1hdGlvbiBiYXNlZCBvbiB0aGUgaW5wdXQgdmFsdWUgYW5kIHZhbGlkaXR5IHN1Y2ggYXMgYSBjaGFyYWN0ZXIgY291bnRlclxuICogb3IgYW4gZXJyb3IgbWVzc2FnZS5cbiAqIEBwb2x5bWVyQmVoYXZpb3JcbiAqL1xuZXhwb3J0IGNvbnN0IFBhcGVySW5wdXRBZGRvbkJlaGF2aW9yID0ge1xuICBhdHRhY2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5maXJlKCdhZGRvbi1hdHRhY2hlZCcpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBUaGUgZnVuY3Rpb24gY2FsbGVkIGJ5IGA8cGFwZXItaW5wdXQtY29udGFpbmVyPmAgd2hlbiB0aGUgaW5wdXQgdmFsdWUgb3JcbiAgICogdmFsaWRpdHkgY2hhbmdlcy5cbiAgICogQHBhcmFtIHt7XG4gICAqICAgaW52YWxpZDogYm9vbGVhbixcbiAgICogICBpbnB1dEVsZW1lbnQ6IChFbGVtZW50fHVuZGVmaW5lZCksXG4gICAqICAgdmFsdWU6IChzdHJpbmd8dW5kZWZpbmVkKVxuICAgKiB9fSBzdGF0ZSAtXG4gICAqICAgICBpbnB1dEVsZW1lbnQ6IFRoZSBpbnB1dCBlbGVtZW50LlxuICAgKiAgICAgdmFsdWU6IFRoZSBpbnB1dCB2YWx1ZS5cbiAgICogICAgIGludmFsaWQ6IFRydWUgaWYgdGhlIGlucHV0IHZhbHVlIGlzIGludmFsaWQuXG4gICAqL1xuICB1cGRhdGU6IGZ1bmN0aW9uKHN0YXRlKSB7fVxuXG59O1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuaW1wb3J0ICdAcG9seW1lci9wb2x5bWVyL3BvbHltZXItbGVnYWN5LmpzJztcbmltcG9ydCAnQHBvbHltZXIvcGFwZXItc3R5bGVzL3R5cG9ncmFwaHkuanMnO1xuXG5pbXBvcnQge1BvbHltZXJ9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLWZuLmpzJztcbmltcG9ydCB7aHRtbH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuXG5pbXBvcnQge1BhcGVySW5wdXRBZGRvbkJlaGF2aW9yfSBmcm9tICcuL3BhcGVyLWlucHV0LWFkZG9uLWJlaGF2aW9yLmpzJztcblxuLypcbmA8cGFwZXItaW5wdXQtY2hhci1jb3VudGVyPmAgaXMgYSBjaGFyYWN0ZXIgY291bnRlciBmb3IgdXNlIHdpdGhcbmA8cGFwZXItaW5wdXQtY29udGFpbmVyPmAuIEl0IHNob3dzIHRoZSBudW1iZXIgb2YgY2hhcmFjdGVycyBlbnRlcmVkIGluIHRoZVxuaW5wdXQgYW5kIHRoZSBtYXggbGVuZ3RoIGlmIGl0IGlzIHNwZWNpZmllZC5cblxuICAgIDxwYXBlci1pbnB1dC1jb250YWluZXI+XG4gICAgICA8aW5wdXQgbWF4bGVuZ3RoPVwiMjBcIj5cbiAgICAgIDxwYXBlci1pbnB1dC1jaGFyLWNvdW50ZXI+PC9wYXBlci1pbnB1dC1jaGFyLWNvdW50ZXI+XG4gICAgPC9wYXBlci1pbnB1dC1jb250YWluZXI+XG5cbiMjIyBTdHlsaW5nXG5cblRoZSBmb2xsb3dpbmcgbWl4aW4gaXMgYXZhaWxhYmxlIGZvciBzdHlsaW5nOlxuXG5DdXN0b20gcHJvcGVydHkgfCBEZXNjcmlwdGlvbiB8IERlZmF1bHRcbi0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tXG5gLS1wYXBlci1pbnB1dC1jaGFyLWNvdW50ZXJgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgZWxlbWVudCB8IGB7fWBcbiovXG5Qb2x5bWVyKHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBfdGVtcGxhdGU6IGh0bWxgXG4gICAgPHN0eWxlPlxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIGZsb2F0OiByaWdodDtcblxuICAgICAgICBAYXBwbHkgLS1wYXBlci1mb250LWNhcHRpb247XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNoYXItY291bnRlcjtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW2hpZGRlbl0pIHtcbiAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICA6aG9zdCg6ZGlyKHJ0bCkpIHtcbiAgICAgICAgZmxvYXQ6IGxlZnQ7XG4gICAgICB9XG4gICAgPC9zdHlsZT5cblxuICAgIDxzcGFuPltbX2NoYXJDb3VudGVyU3RyXV08L3NwYW4+XG5gLFxuXG4gIGlzOiAncGFwZXItaW5wdXQtY2hhci1jb3VudGVyJyxcbiAgYmVoYXZpb3JzOiBbUGFwZXJJbnB1dEFkZG9uQmVoYXZpb3JdLFxuICBwcm9wZXJ0aWVzOiB7X2NoYXJDb3VudGVyU3RyOiB7dHlwZTogU3RyaW5nLCB2YWx1ZTogJzAnfX0sXG5cbiAgLyoqXG4gICAqIFRoaXMgb3ZlcnJpZGVzIHRoZSB1cGRhdGUgZnVuY3Rpb24gaW4gUGFwZXJJbnB1dEFkZG9uQmVoYXZpb3IuXG4gICAqIEBwYXJhbSB7e1xuICAgKiAgIGlucHV0RWxlbWVudDogKEVsZW1lbnR8dW5kZWZpbmVkKSxcbiAgICogICB2YWx1ZTogKHN0cmluZ3x1bmRlZmluZWQpLFxuICAgKiAgIGludmFsaWQ6IGJvb2xlYW5cbiAgICogfX0gc3RhdGUgLVxuICAgKiAgICAgaW5wdXRFbGVtZW50OiBUaGUgaW5wdXQgZWxlbWVudC5cbiAgICogICAgIHZhbHVlOiBUaGUgaW5wdXQgdmFsdWUuXG4gICAqICAgICBpbnZhbGlkOiBUcnVlIGlmIHRoZSBpbnB1dCB2YWx1ZSBpcyBpbnZhbGlkLlxuICAgKi9cbiAgdXBkYXRlOiBmdW5jdGlvbihzdGF0ZSkge1xuICAgIGlmICghc3RhdGUuaW5wdXRFbGVtZW50KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgc3RhdGUudmFsdWUgPSBzdGF0ZS52YWx1ZSB8fCAnJztcblxuICAgIHZhciBjb3VudGVyID0gc3RhdGUudmFsdWUudG9TdHJpbmcoKS5sZW5ndGgudG9TdHJpbmcoKTtcblxuICAgIGlmIChzdGF0ZS5pbnB1dEVsZW1lbnQuaGFzQXR0cmlidXRlKCdtYXhsZW5ndGgnKSkge1xuICAgICAgY291bnRlciArPSAnLycgKyBzdGF0ZS5pbnB1dEVsZW1lbnQuZ2V0QXR0cmlidXRlKCdtYXhsZW5ndGgnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jaGFyQ291bnRlclN0ciA9IGNvdW50ZXI7XG4gIH1cbn0pO1xuIiwgIi8qKlxuQGxpY2Vuc2VcbkNvcHlyaWdodCAoYykgMjAxNSBUaGUgUG9seW1lciBQcm9qZWN0IEF1dGhvcnMuIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG5UaGlzIGNvZGUgbWF5IG9ubHkgYmUgdXNlZCB1bmRlciB0aGUgQlNEIHN0eWxlIGxpY2Vuc2UgZm91bmQgYXRcbmh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dCBUaGUgY29tcGxldGUgc2V0IG9mIGF1dGhvcnMgbWF5IGJlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBjb250cmlidXRvcnMgbWF5IGJlXG5mb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dCBDb2RlIGRpc3RyaWJ1dGVkIGJ5IEdvb2dsZSBhc1xucGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc28gc3ViamVjdCB0byBhbiBhZGRpdGlvbmFsIElQIHJpZ2h0cyBncmFudFxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4qL1xuLyogVGFrZW4gZnJvbVxuICogaHR0cHM6Ly93d3cuZ29vZ2xlLmNvbS9kZXNpZ24vc3BlYy9zdHlsZS9jb2xvci5odG1sI2NvbG9yLXVpLWNvbG9yLWFwcGxpY2F0aW9uXG4gKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5pbXBvcnQgJy4vY29sb3IuanMnO1xuXG5pbXBvcnQge2h0bWx9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnLmpzJztcbmNvbnN0IHRlbXBsYXRlID0gaHRtbGBcbjxjdXN0b20tc3R5bGU+XG4gIDxzdHlsZSBpcz1cImN1c3RvbS1zdHlsZVwiPlxuICAgIGh0bWwge1xuICAgICAgLypcbiAgICAgICAqIFlvdSBjYW4gdXNlIHRoZXNlIGdlbmVyaWMgdmFyaWFibGVzIGluIHlvdXIgZWxlbWVudHMgZm9yIGVhc3kgdGhlbWluZy5cbiAgICAgICAqIEZvciBleGFtcGxlLCBpZiBhbGwgeW91ciBlbGVtZW50cyB1c2UgXFxgLS1wcmltYXJ5LXRleHQtY29sb3JcXGAgYXMgaXRzIG1haW5cbiAgICAgICAqIGNvbG9yLCB0aGVuIHN3aXRjaGluZyBmcm9tIGEgbGlnaHQgdG8gYSBkYXJrIHRoZW1lIGlzIGp1c3QgYSBtYXR0ZXIgb2ZcbiAgICAgICAqIGNoYW5naW5nIHRoZSB2YWx1ZSBvZiBcXGAtLXByaW1hcnktdGV4dC1jb2xvclxcYCBpbiB5b3VyIGFwcGxpY2F0aW9uLlxuICAgICAgICovXG4gICAgICAtLXByaW1hcnktdGV4dC1jb2xvcjogdmFyKC0tbGlnaHQtdGhlbWUtdGV4dC1jb2xvcik7XG4gICAgICAtLXByaW1hcnktYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQtdGhlbWUtYmFja2dyb3VuZC1jb2xvcik7XG4gICAgICAtLXNlY29uZGFyeS10ZXh0LWNvbG9yOiB2YXIoLS1saWdodC10aGVtZS1zZWNvbmRhcnktY29sb3IpO1xuICAgICAgLS1kaXNhYmxlZC10ZXh0LWNvbG9yOiB2YXIoLS1saWdodC10aGVtZS1kaXNhYmxlZC1jb2xvcik7XG4gICAgICAtLWRpdmlkZXItY29sb3I6IHZhcigtLWxpZ2h0LXRoZW1lLWRpdmlkZXItY29sb3IpO1xuICAgICAgLS1lcnJvci1jb2xvcjogdmFyKC0tcGFwZXItZGVlcC1vcmFuZ2UtYTcwMCk7XG5cbiAgICAgIC8qXG4gICAgICAgKiBQcmltYXJ5IGFuZCBhY2NlbnQgY29sb3JzLiBBbHNvIHNlZSBjb2xvci5qcyBmb3IgbW9yZSBjb2xvcnMuXG4gICAgICAgKi9cbiAgICAgIC0tcHJpbWFyeS1jb2xvcjogdmFyKC0tcGFwZXItaW5kaWdvLTUwMCk7XG4gICAgICAtLWxpZ2h0LXByaW1hcnktY29sb3I6IHZhcigtLXBhcGVyLWluZGlnby0xMDApO1xuICAgICAgLS1kYXJrLXByaW1hcnktY29sb3I6IHZhcigtLXBhcGVyLWluZGlnby03MDApO1xuXG4gICAgICAtLWFjY2VudC1jb2xvcjogdmFyKC0tcGFwZXItcGluay1hMjAwKTtcbiAgICAgIC0tbGlnaHQtYWNjZW50LWNvbG9yOiB2YXIoLS1wYXBlci1waW5rLWExMDApO1xuICAgICAgLS1kYXJrLWFjY2VudC1jb2xvcjogdmFyKC0tcGFwZXItcGluay1hNDAwKTtcblxuXG4gICAgICAvKlxuICAgICAgICogTWF0ZXJpYWwgRGVzaWduIExpZ2h0IGJhY2tncm91bmQgdGhlbWVcbiAgICAgICAqL1xuICAgICAgLS1saWdodC10aGVtZS1iYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmO1xuICAgICAgLS1saWdodC10aGVtZS1iYXNlLWNvbG9yOiAjMDAwMDAwO1xuICAgICAgLS1saWdodC10aGVtZS10ZXh0LWNvbG9yOiB2YXIoLS1wYXBlci1ncmV5LTkwMCk7XG4gICAgICAtLWxpZ2h0LXRoZW1lLXNlY29uZGFyeS1jb2xvcjogIzczNzM3MzsgIC8qIGZvciBzZWNvbmRhcnkgdGV4dCBhbmQgaWNvbnMgKi9cbiAgICAgIC0tbGlnaHQtdGhlbWUtZGlzYWJsZWQtY29sb3I6ICM5YjliOWI7ICAvKiBkaXNhYmxlZC9oaW50IHRleHQgKi9cbiAgICAgIC0tbGlnaHQtdGhlbWUtZGl2aWRlci1jb2xvcjogI2RiZGJkYjtcblxuICAgICAgLypcbiAgICAgICAqIE1hdGVyaWFsIERlc2lnbiBEYXJrIGJhY2tncm91bmQgdGhlbWVcbiAgICAgICAqL1xuICAgICAgLS1kYXJrLXRoZW1lLWJhY2tncm91bmQtY29sb3I6IHZhcigtLXBhcGVyLWdyZXktOTAwKTtcbiAgICAgIC0tZGFyay10aGVtZS1iYXNlLWNvbG9yOiAjZmZmZmZmO1xuICAgICAgLS1kYXJrLXRoZW1lLXRleHQtY29sb3I6ICNmZmZmZmY7XG4gICAgICAtLWRhcmstdGhlbWUtc2Vjb25kYXJ5LWNvbG9yOiAjYmNiY2JjOyAgLyogZm9yIHNlY29uZGFyeSB0ZXh0IGFuZCBpY29ucyAqL1xuICAgICAgLS1kYXJrLXRoZW1lLWRpc2FibGVkLWNvbG9yOiAjNjQ2NDY0OyAgLyogZGlzYWJsZWQvaGludCB0ZXh0ICovXG4gICAgICAtLWRhcmstdGhlbWUtZGl2aWRlci1jb2xvcjogIzNjM2MzYztcblxuICAgICAgLypcbiAgICAgICAqIERlcHJlY2F0ZWQgdmFsdWVzIGJlY2F1c2Ugb2YgdGhlaXIgY29uZnVzaW5nIG5hbWVzLlxuICAgICAgICovXG4gICAgICAtLXRleHQtcHJpbWFyeS1jb2xvcjogdmFyKC0tZGFyay10aGVtZS10ZXh0LWNvbG9yKTtcbiAgICAgIC0tZGVmYXVsdC1wcmltYXJ5LWNvbG9yOiB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICB9XG4gIDwvc3R5bGU+XG48L2N1c3RvbS1zdHlsZT5gO1xudGVtcGxhdGUuc2V0QXR0cmlidXRlKCdzdHlsZScsICdkaXNwbGF5OiBub25lOycpO1xuZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh0ZW1wbGF0ZS5jb250ZW50KTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5pbXBvcnQgJ0Bwb2x5bWVyL2lyb24tZmxleC1sYXlvdXQvaXJvbi1mbGV4LWxheW91dC5qcyc7XG5pbXBvcnQgJ0Bwb2x5bWVyL3BhcGVyLXN0eWxlcy9kZWZhdWx0LXRoZW1lLmpzJztcbmltcG9ydCAnQHBvbHltZXIvcGFwZXItc3R5bGVzL3R5cG9ncmFwaHkuanMnO1xuXG5pbXBvcnQge1BvbHltZXJ9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLWZuLmpzJztcbmltcG9ydCB7ZG9tfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvcG9seW1lci5kb20uanMnO1xuaW1wb3J0IHtkYXNoVG9DYW1lbENhc2V9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2Nhc2UtbWFwLmpzJztcbmltcG9ydCB7aHRtbH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuY29uc3QgdGVtcGxhdGUgPSBodG1sYFxuPGN1c3RvbS1zdHlsZT5cbiAgPHN0eWxlIGlzPVwiY3VzdG9tLXN0eWxlXCI+XG4gICAgaHRtbCB7XG4gICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1zaGFyZWQtaW5wdXQtc3R5bGU6IHtcbiAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOyAvKiB0byBtYWtlIGEgc3RhY2tpbmcgY29udGV4dCAqL1xuICAgICAgICBvdXRsaW5lOiBub25lO1xuICAgICAgICBib3gtc2hhZG93OiBub25lO1xuICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBtYXgtd2lkdGg6IDEwMCU7XG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgICAgICBib3JkZXI6IG5vbmU7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtY29sb3IsIHZhcigtLXByaW1hcnktdGV4dC1jb2xvcikpO1xuICAgICAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gICAgICAgIHRleHQtYWxpZ246IGluaGVyaXQ7XG4gICAgICAgIHZlcnRpY2FsLWFsaWduOiB2YXIoLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtYWxpZ24sIGJvdHRvbSk7XG5cbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1zdWJoZWFkO1xuICAgICAgfTtcbiAgICB9XG4gIDwvc3R5bGU+XG48L2N1c3RvbS1zdHlsZT5cbmA7XG50ZW1wbGF0ZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgJ2Rpc3BsYXk6IG5vbmU7Jyk7XG5kb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHRlbXBsYXRlLmNvbnRlbnQpO1xuXG4vKlxuYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCBpcyBhIGNvbnRhaW5lciBmb3IgYSBgPGxhYmVsPmAsIGFuIGA8aXJvbi1pbnB1dD5gIG9yXG5gPHRleHRhcmVhPmAgYW5kIG9wdGlvbmFsIGFkZC1vbiBlbGVtZW50cyBzdWNoIGFzIGFuIGVycm9yIG1lc3NhZ2Ugb3IgY2hhcmFjdGVyXG5jb3VudGVyLCB1c2VkIHRvIGltcGxlbWVudCBNYXRlcmlhbCBEZXNpZ24gdGV4dCBmaWVsZHMuXG5cbkZvciBleGFtcGxlOlxuXG4gICAgPHBhcGVyLWlucHV0LWNvbnRhaW5lcj5cbiAgICAgIDxsYWJlbCBzbG90PVwibGFiZWxcIj5Zb3VyIG5hbWU8L2xhYmVsPlxuICAgICAgPGlyb24taW5wdXQgc2xvdD1cImlucHV0XCI+XG4gICAgICAgIDxpbnB1dD5cbiAgICAgIDwvaXJvbi1pbnB1dD5cbiAgICAgIC8vIEluIFBvbHltZXIgMS4wLCB5b3Ugd291bGQgdXNlIGA8aW5wdXQgaXM9XCJpcm9uLWlucHV0XCIgc2xvdD1cImlucHV0XCI+YFxuaW5zdGVhZCBvZiB0aGUgYWJvdmUuXG4gICAgPC9wYXBlci1pbnB1dC1jb250YWluZXI+XG5cbllvdSBjYW4gc3R5bGUgdGhlIG5lc3RlZCBgPGlucHV0PmAgaG93ZXZlciB5b3Ugd2FudDsgaWYgeW91IHdhbnQgaXQgdG8gbG9vayBsaWtlXG5hIE1hdGVyaWFsIERlc2lnbiBpbnB1dCwgeW91IGNhbiBzdHlsZSBpdCB3aXRoIHRoZVxuLS1wYXBlci1pbnB1dC1jb250YWluZXItc2hhcmVkLWlucHV0LXN0eWxlIG1peGluLlxuXG5EbyBub3Qgd3JhcCBgPHBhcGVyLWlucHV0LWNvbnRhaW5lcj5gIGFyb3VuZCBlbGVtZW50cyB0aGF0IGFscmVhZHkgaW5jbHVkZSBpdCxcbnN1Y2ggYXMgYDxwYXBlci1pbnB1dD5gLiBEb2luZyBzbyBtYXkgY2F1c2UgZXZlbnRzIHRvIGJvdW5jZSBpbmZpbml0ZWx5IGJldHdlZW5cbnRoZSBjb250YWluZXIgYW5kIGl0cyBjb250YWluZWQgZWxlbWVudC5cblxuIyMjIExpc3RlbmluZyBmb3IgaW5wdXQgY2hhbmdlc1xuXG5CeSBkZWZhdWx0LCBpdCBsaXN0ZW5zIGZvciBjaGFuZ2VzIG9uIHRoZSBgYmluZC12YWx1ZWAgYXR0cmlidXRlIG9uIGl0cyBjaGlsZHJlblxubm9kZXMgYW5kIHBlcmZvcm0gdGFza3Mgc3VjaCBhcyBhdXRvLXZhbGlkYXRpbmcgYW5kIGxhYmVsIHN0eWxpbmcgd2hlbiB0aGVcbmBiaW5kLXZhbHVlYCBjaGFuZ2VzLiBZb3UgY2FuIGNvbmZpZ3VyZSB0aGUgYXR0cmlidXRlIGl0IGxpc3RlbnMgdG8gd2l0aCB0aGVcbmBhdHRyLWZvci12YWx1ZWAgYXR0cmlidXRlLlxuXG4jIyMgVXNpbmcgYSBjdXN0b20gaW5wdXQgZWxlbWVudFxuXG5Zb3UgY2FuIHVzZSBhIGN1c3RvbSBpbnB1dCBlbGVtZW50IGluIGEgYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCwgZm9yIGV4YW1wbGVcbnRvIGltcGxlbWVudCBhIGNvbXBvdW5kIGlucHV0IGZpZWxkIGxpa2UgYSBzb2NpYWwgc2VjdXJpdHkgbnVtYmVyIGlucHV0LiBUaGVcbmN1c3RvbSBpbnB1dCBlbGVtZW50IHNob3VsZCBoYXZlIHRoZSBgcGFwZXItaW5wdXQtaW5wdXRgIGNsYXNzLCBoYXZlIGFcbmBub3RpZnk6dHJ1ZWAgdmFsdWUgcHJvcGVydHkgYW5kIG9wdGlvbmFsbHkgaW1wbGVtZW50c1xuYFBvbHltZXIuSXJvblZhbGlkYXRhYmxlQmVoYXZpb3JgIGlmIGl0IGlzIHZhbGlkYXRhYmxlLlxuXG4gICAgPHBhcGVyLWlucHV0LWNvbnRhaW5lciBhdHRyLWZvci12YWx1ZT1cInNzbi12YWx1ZVwiPlxuICAgICAgPGxhYmVsIHNsb3Q9XCJsYWJlbFwiPlNvY2lhbCBzZWN1cml0eSBudW1iZXI8L2xhYmVsPlxuICAgICAgPHNzbi1pbnB1dCBzbG90PVwiaW5wdXRcIiBjbGFzcz1cInBhcGVyLWlucHV0LWlucHV0XCI+PC9zc24taW5wdXQ+XG4gICAgPC9wYXBlci1pbnB1dC1jb250YWluZXI+XG5cblxuSWYgeW91J3JlIHVzaW5nIGEgYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCBpbXBlcmF0aXZlbHksIGl0J3MgaW1wb3J0YW50IHRvIG1ha2VcbnN1cmUgdGhhdCB5b3UgYXR0YWNoIGl0cyBjaGlsZHJlbiAodGhlIGBpcm9uLWlucHV0YCBhbmQgdGhlIG9wdGlvbmFsIGBsYWJlbGApXG5iZWZvcmUgeW91IGF0dGFjaCB0aGUgYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCBpdHNlbGYsIHNvIHRoYXQgaXQgY2FuIGJlIHNldCB1cFxuY29ycmVjdGx5LlxuXG4jIyMgVmFsaWRhdGlvblxuXG5JZiB0aGUgYGF1dG8tdmFsaWRhdGVgIGF0dHJpYnV0ZSBpcyBzZXQsIHRoZSBpbnB1dCBjb250YWluZXIgd2lsbCB2YWxpZGF0ZSB0aGVcbmlucHV0IGFuZCB1cGRhdGUgdGhlIGNvbnRhaW5lciBzdHlsaW5nIHdoZW4gdGhlIGlucHV0IHZhbHVlIGNoYW5nZXMuXG5cbiMjIyBBZGQtb25zXG5cbkFkZC1vbnMgYXJlIGNoaWxkIGVsZW1lbnRzIG9mIGEgYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCB3aXRoIHRoZSBgYWRkLW9uYFxuYXR0cmlidXRlIGFuZCBpbXBsZW1lbnRzIHRoZSBgUG9seW1lci5QYXBlcklucHV0QWRkb25CZWhhdmlvcmAgYmVoYXZpb3IuIFRoZXlcbmFyZSBub3RpZmllZCB3aGVuIHRoZSBpbnB1dCB2YWx1ZSBvciB2YWxpZGl0eSBjaGFuZ2VzLCBhbmQgbWF5IGltcGxlbWVudFxuZnVuY3Rpb25hbGl0eSBzdWNoIGFzIGVycm9yIG1lc3NhZ2VzIG9yIGNoYXJhY3RlciBjb3VudGVycy4gVGhleSBhcHBlYXIgYXQgdGhlXG5ib3R0b20gb2YgdGhlIGlucHV0LlxuXG4jIyMgUHJlZml4ZXMgYW5kIHN1ZmZpeGVzXG5UaGVzZSBhcmUgY2hpbGQgZWxlbWVudHMgb2YgYSBgPHBhcGVyLWlucHV0LWNvbnRhaW5lcj5gIHdpdGggdGhlIGBwcmVmaXhgXG5vciBgc3VmZml4YCBhdHRyaWJ1dGUsIGFuZCBhcmUgZGlzcGxheWVkIGlubGluZSB3aXRoIHRoZSBpbnB1dCwgYmVmb3JlIG9yIGFmdGVyLlxuXG4gICAgPHBhcGVyLWlucHV0LWNvbnRhaW5lcj5cbiAgICAgIDxkaXYgc2xvdD1cInByZWZpeFwiPiQ8L2Rpdj5cbiAgICAgIDxsYWJlbCBzbG90PVwibGFiZWxcIj5Ub3RhbDwvbGFiZWw+XG4gICAgICA8aXJvbi1pbnB1dCBzbG90PVwiaW5wdXRcIj5cbiAgICAgICAgPGlucHV0PlxuICAgICAgPC9pcm9uLWlucHV0PlxuICAgICAgLy8gSW4gUG9seW1lciAxLjAsIHlvdSB3b3VsZCB1c2UgYDxpbnB1dCBpcz1cImlyb24taW5wdXRcIiBzbG90PVwiaW5wdXRcIj5gXG5pbnN0ZWFkIG9mIHRoZSBhYm92ZS4gPHBhcGVyLWljb24tYnV0dG9uIHNsb3Q9XCJzdWZmaXhcIlxuaWNvbj1cImNsZWFyXCI+PC9wYXBlci1pY29uLWJ1dHRvbj5cbiAgICA8L3BhcGVyLWlucHV0LWNvbnRhaW5lcj5cblxuIyMjIFN0eWxpbmdcblxuVGhlIGZvbGxvd2luZyBjdXN0b20gcHJvcGVydGllcyBhbmQgbWl4aW5zIGFyZSBhdmFpbGFibGUgZm9yIHN0eWxpbmc6XG5cbkN1c3RvbSBwcm9wZXJ0eSB8IERlc2NyaXB0aW9uIHwgRGVmYXVsdFxuLS0tLS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS1cbmAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1jb2xvcmAgfCBMYWJlbCBhbmQgdW5kZXJsaW5lIGNvbG9yIHdoZW4gdGhlIGlucHV0IGlzIG5vdCBmb2N1c2VkIHwgYC0tc2Vjb25kYXJ5LXRleHQtY29sb3JgXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItZm9jdXMtY29sb3JgIHwgTGFiZWwgYW5kIHVuZGVybGluZSBjb2xvciB3aGVuIHRoZSBpbnB1dCBpcyBmb2N1c2VkIHwgYC0tcHJpbWFyeS1jb2xvcmBcbmAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnZhbGlkLWNvbG9yYCB8IExhYmVsIGFuZCB1bmRlcmxpbmUgY29sb3Igd2hlbiB0aGUgaW5wdXQgaXMgaXMgaW52YWxpZCB8IGAtLWVycm9yLWNvbG9yYFxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0LWNvbG9yYCB8IElucHV0IGZvcmVncm91bmQgY29sb3IgfCBgLS1wcmltYXJ5LXRleHQtY29sb3JgXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXJgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgY29udGFpbmVyIHwgYHt9YFxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWRpc2FibGVkYCB8IE1peGluIGFwcGxpZWQgdG8gdGhlIGNvbnRhaW5lciB3aGVuIGl0J3MgZGlzYWJsZWQgfCBge31gXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItbGFiZWxgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgbGFiZWwgfCBge31gXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItbGFiZWwtZm9jdXNgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgbGFiZWwgd2hlbiB0aGUgaW5wdXQgaXMgZm9jdXNlZCB8IGB7fWBcbmAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1sYWJlbC1mbG9hdGluZ2AgfCBNaXhpbiBhcHBsaWVkIHRvIHRoZSBsYWJlbCB3aGVuIGZsb2F0aW5nIHwgYHt9YFxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0YCB8IE1peGluIGFwcGxpZWQgdG8gdGhlIGlucHV0IHwgYHt9YFxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0LWFsaWduYCB8IFRoZSB2ZXJ0aWNhbC1hbGlnbiBwcm9wZXJ0eSBvZiB0aGUgaW5wdXQgfCBgYm90dG9tYFxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0LWRpc2FibGVkYCB8IE1peGluIGFwcGxpZWQgdG8gdGhlIGlucHV0IHdoZW4gdGhlIGNvbXBvbmVudCBpcyBkaXNhYmxlZCB8IGB7fWBcbmAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnB1dC1mb2N1c2AgfCBNaXhpbiBhcHBsaWVkIHRvIHRoZSBpbnB1dCB3aGVuIGZvY3VzZWQgfCBge31gXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtaW52YWxpZGAgfCBNaXhpbiBhcHBsaWVkIHRvIHRoZSBpbnB1dCB3aGVuIGludmFsaWQgfCBge31gXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtd2Via2l0LXNwaW5uZXJgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgd2Via2l0IHNwaW5uZXIgfCBge31gXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtd2Via2l0LWNsZWFyYCB8IE1peGluIGFwcGxpZWQgdG8gdGhlIHdlYmtpdCBjbGVhciBidXR0b24gfCBge31gXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtd2Via2l0LWNhbGVuZGFyLXBpY2tlci1pbmRpY2F0b3JgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgd2Via2l0IGNhbGVuZGFyIHBpY2tlciBpbmRpY2F0b3IgfCBge31gXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItbXMtY2xlYXJgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgSW50ZXJuZXQgRXhwbG9yZXIgY2xlYXIgYnV0dG9uIHwgYHt9YFxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXVuZGVybGluZWAgfCBNaXhpbiBhcHBsaWVkIHRvIHRoZSB1bmRlcmxpbmUgfCBge31gXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItdW5kZXJsaW5lLWZvY3VzYCB8IE1peGluIGFwcGxpZWQgdG8gdGhlIHVuZGVybGluZSB3aGVuIHRoZSBpbnB1dCBpcyBmb2N1c2VkIHwgYHt9YFxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXVuZGVybGluZS1kaXNhYmxlZGAgfCBNaXhpbiBhcHBsaWVkIHRvIHRoZSB1bmRlcmxpbmUgd2hlbiB0aGUgaW5wdXQgaXMgZGlzYWJsZWQgfCBge31gXG5gLS1wYXBlci1pbnB1dC1wcmVmaXhgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgaW5wdXQgcHJlZml4IHwgYHt9YFxuYC0tcGFwZXItaW5wdXQtc3VmZml4YCB8IE1peGluIGFwcGxpZWQgdG8gdGhlIGlucHV0IHN1ZmZpeCB8IGB7fWBcbmAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1sYWJlbC1iZWZvcmVgIHwgTWl4aW4gYXBwbGllZCB0byBsYWJlbCBiZWZvcmUgcHNldWRvIGVsZW1lbnQgfCB7fVxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWxhYmVsLWFmdGVyYCB8IE1peGluIGFwcGxpZWQgdG8gbGFiZWwgYWZ0ZXIgcHNldWRvIGVsZW1lbnQgKHVzZWZ1bCBmb3IgcmVxdWlyZWQgYXN0ZXJpc2spIHwge31cblxuVGhpcyBlbGVtZW50IGlzIGBkaXNwbGF5OmJsb2NrYCBieSBkZWZhdWx0LCBidXQgeW91IGNhbiBzZXQgdGhlIGBpbmxpbmVgXG5hdHRyaWJ1dGUgdG8gbWFrZSBpdCBgZGlzcGxheTppbmxpbmUtYmxvY2tgLlxuKi9cblBvbHltZXIoe1xuICAvKiogQG92ZXJyaWRlICovXG4gIF90ZW1wbGF0ZTogaHRtbGBcbiAgICA8c3R5bGU+XG4gICAgICA6aG9zdCB7XG4gICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICBwYWRkaW5nOiA4cHggMDtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbaW5saW5lXSkge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtkaXNhYmxlZF0pIHtcbiAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgIG9wYWNpdHk6IDAuMzM7XG5cbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWRpc2FibGVkO1xuICAgICAgfVxuXG4gICAgICA6aG9zdChbaGlkZGVuXSkge1xuICAgICAgICBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7XG4gICAgICB9XG5cbiAgICAgIFtoaWRkZW5dIHtcbiAgICAgICAgZGlzcGxheTogbm9uZSAhaW1wb3J0YW50O1xuICAgICAgfVxuXG4gICAgICAuZmxvYXRlZC1sYWJlbC1wbGFjZWhvbGRlciB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtY2FwdGlvbjtcbiAgICAgIH1cblxuICAgICAgLnVuZGVybGluZSB7XG4gICAgICAgIGhlaWdodDogMnB4O1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG5cbiAgICAgIC5mb2N1c2VkLWxpbmUge1xuICAgICAgICBAYXBwbHkgLS1sYXlvdXQtZml0O1xuICAgICAgICBib3JkZXItYm90dG9tOiAycHggc29saWQgdmFyKC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWZvY3VzLWNvbG9yLCB2YXIoLS1wcmltYXJ5LWNvbG9yKSk7XG5cbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgY2VudGVyO1xuICAgICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjZW50ZXIgY2VudGVyO1xuICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUzZCgwLDEsMSk7XG4gICAgICAgIHRyYW5zZm9ybTogc2NhbGUzZCgwLDEsMSk7XG5cbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXVuZGVybGluZS1mb2N1cztcbiAgICAgIH1cblxuICAgICAgLnVuZGVybGluZS5pcy1oaWdobGlnaHRlZCAuZm9jdXNlZC1saW5lIHtcbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IG5vbmU7XG4gICAgICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgICAgICAgLXdlYmtpdC10cmFuc2l0aW9uOiAtd2Via2l0LXRyYW5zZm9ybSAwLjI1cztcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMjVzO1xuXG4gICAgICAgIEBhcHBseSAtLXBhcGVyLXRyYW5zaXRpb24tZWFzaW5nO1xuICAgICAgfVxuXG4gICAgICAudW5kZXJsaW5lLmlzLWludmFsaWQgLmZvY3VzZWQtbGluZSB7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWludmFsaWQtY29sb3IsIHZhcigtLWVycm9yLWNvbG9yKSk7XG4gICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBub25lO1xuICAgICAgICB0cmFuc2Zvcm06IG5vbmU7XG4gICAgICAgIC13ZWJraXQtdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gMC4yNXM7XG4gICAgICAgIHRyYW5zaXRpb246IHRyYW5zZm9ybSAwLjI1cztcblxuICAgICAgICBAYXBwbHkgLS1wYXBlci10cmFuc2l0aW9uLWVhc2luZztcbiAgICAgIH1cblxuICAgICAgLnVuZm9jdXNlZC1saW5lIHtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWZpdDtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1jb2xvciwgdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpKTtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXVuZGVybGluZTtcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW2Rpc2FibGVkXSkgLnVuZm9jdXNlZC1saW5lIHtcbiAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IGRhc2hlZDtcbiAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1wYXBlci1pbnB1dC1jb250YWluZXItY29sb3IsIHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKSk7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci11bmRlcmxpbmUtZGlzYWJsZWQ7XG4gICAgICB9XG5cbiAgICAgIC5pbnB1dC13cmFwcGVyIHtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWhvcml6b250YWw7XG4gICAgICAgIEBhcHBseSAtLWxheW91dC1jZW50ZXI7XG4gICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgIH1cblxuICAgICAgLmlucHV0LWNvbnRlbnQge1xuICAgICAgICBAYXBwbHkgLS1sYXlvdXQtZmxleC1hdXRvO1xuICAgICAgICBAYXBwbHkgLS1sYXlvdXQtcmVsYXRpdmU7XG4gICAgICAgIG1heC13aWR0aDogMTAwJTtcbiAgICAgIH1cblxuICAgICAgLmlucHV0LWNvbnRlbnQgOjpzbG90dGVkKGxhYmVsKSxcbiAgICAgIC5pbnB1dC1jb250ZW50IDo6c2xvdHRlZCgucGFwZXItaW5wdXQtbGFiZWwpIHtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICB0b3A6IDA7XG4gICAgICAgIGxlZnQ6IDA7XG4gICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICBmb250OiBpbmhlcml0O1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWNvbG9yLCB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcikpO1xuICAgICAgICAtd2Via2l0LXRyYW5zaXRpb246IC13ZWJraXQtdHJhbnNmb3JtIDAuMjVzLCB3aWR0aCAwLjI1cztcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDAuMjVzLCB3aWR0aCAwLjI1cztcbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0IHRvcDtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCB0b3A7XG4gICAgICAgIC8qIEZpeCBmb3Igc2FmYXJpIG5vdCBmb2N1c2luZyAwLWhlaWdodCBkYXRlL3RpbWUgaW5wdXRzIHdpdGggLXdlYmtpdC1hcHBlcmFuY2U6IG5vbmU7ICovXG4gICAgICAgIG1pbi1oZWlnaHQ6IDFweDtcblxuICAgICAgICBAYXBwbHkgLS1wYXBlci1mb250LWNvbW1vbi1ub3dyYXA7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtc3ViaGVhZDtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWxhYmVsO1xuICAgICAgICBAYXBwbHkgLS1wYXBlci10cmFuc2l0aW9uLWVhc2luZztcbiAgICAgIH1cblxuXG4gICAgICAuaW5wdXQtY29udGVudCA6OnNsb3R0ZWQobGFiZWwpOmJlZm9yZSxcbiAgICAgIC5pbnB1dC1jb250ZW50IDo6c2xvdHRlZCgucGFwZXItaW5wdXQtbGFiZWwpOmJlZm9yZSB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1sYWJlbC1iZWZvcmU7XG4gICAgICB9XG5cbiAgICAgIC5pbnB1dC1jb250ZW50IDo6c2xvdHRlZChsYWJlbCk6YWZ0ZXIsXG4gICAgICAuaW5wdXQtY29udGVudCA6OnNsb3R0ZWQoLnBhcGVyLWlucHV0LWxhYmVsKTphZnRlciB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1sYWJlbC1hZnRlcjtcbiAgICAgIH1cblxuICAgICAgLmlucHV0LWNvbnRlbnQubGFiZWwtaXMtZmxvYXRpbmcgOjpzbG90dGVkKGxhYmVsKSxcbiAgICAgIC5pbnB1dC1jb250ZW50LmxhYmVsLWlzLWZsb2F0aW5nIDo6c2xvdHRlZCgucGFwZXItaW5wdXQtbGFiZWwpIHtcbiAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTc1JSkgc2NhbGUoMC43NSk7XG4gICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNzUlKSBzY2FsZSgwLjc1KTtcblxuICAgICAgICAvKiBTaW5jZSB3ZSBzY2FsZSB0byA3NS8xMDAgb2YgdGhlIHNpemUsIHdlIGFjdHVhbGx5IGhhdmUgMTAwLzc1IG9mIHRoZVxuICAgICAgICBvcmlnaW5hbCBzcGFjZSBub3cgYXZhaWxhYmxlICovXG4gICAgICAgIHdpZHRoOiAxMzMlO1xuXG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1sYWJlbC1mbG9hdGluZztcbiAgICAgIH1cblxuICAgICAgOmhvc3QoOmRpcihydGwpKSAuaW5wdXQtY29udGVudC5sYWJlbC1pcy1mbG9hdGluZyA6OnNsb3R0ZWQobGFiZWwpLFxuICAgICAgOmhvc3QoOmRpcihydGwpKSAuaW5wdXQtY29udGVudC5sYWJlbC1pcy1mbG9hdGluZyA6OnNsb3R0ZWQoLnBhcGVyLWlucHV0LWxhYmVsKSB7XG4gICAgICAgIHJpZ2h0OiAwO1xuICAgICAgICBsZWZ0OiBhdXRvO1xuICAgICAgICAtd2Via2l0LXRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0IHRvcDtcbiAgICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgdG9wO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtY29udGVudC5sYWJlbC1pcy1oaWdobGlnaHRlZCA6OnNsb3R0ZWQobGFiZWwpLFxuICAgICAgLmlucHV0LWNvbnRlbnQubGFiZWwtaXMtaGlnaGxpZ2h0ZWQgOjpzbG90dGVkKC5wYXBlci1pbnB1dC1sYWJlbCkge1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWZvY3VzLWNvbG9yLCB2YXIoLS1wcmltYXJ5LWNvbG9yKSk7XG5cbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWxhYmVsLWZvY3VzO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtY29udGVudC5pcy1pbnZhbGlkIDo6c2xvdHRlZChsYWJlbCksXG4gICAgICAuaW5wdXQtY29udGVudC5pcy1pbnZhbGlkIDo6c2xvdHRlZCgucGFwZXItaW5wdXQtbGFiZWwpIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnZhbGlkLWNvbG9yLCB2YXIoLS1lcnJvci1jb2xvcikpO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtY29udGVudC5sYWJlbC1pcy1oaWRkZW4gOjpzbG90dGVkKGxhYmVsKSxcbiAgICAgIC5pbnB1dC1jb250ZW50LmxhYmVsLWlzLWhpZGRlbiA6OnNsb3R0ZWQoLnBhcGVyLWlucHV0LWxhYmVsKSB7XG4gICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICAgIH1cblxuICAgICAgLmlucHV0LWNvbnRlbnQgOjpzbG90dGVkKGlucHV0KSxcbiAgICAgIC5pbnB1dC1jb250ZW50IDo6c2xvdHRlZChpcm9uLWlucHV0KSxcbiAgICAgIC5pbnB1dC1jb250ZW50IDo6c2xvdHRlZCh0ZXh0YXJlYSksXG4gICAgICAuaW5wdXQtY29udGVudCA6OnNsb3R0ZWQoaXJvbi1hdXRvZ3Jvdy10ZXh0YXJlYSksXG4gICAgICAuaW5wdXQtY29udGVudCA6OnNsb3R0ZWQoLnBhcGVyLWlucHV0LWlucHV0KSB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1zaGFyZWQtaW5wdXQtc3R5bGU7XG4gICAgICAgIC8qIFRoZSBhcHBseSBzaGltIGRvZXNuJ3QgYXBwbHkgdGhlIG5lc3RlZCBjb2xvciBjdXN0b20gcHJvcGVydHksXG4gICAgICAgICAgc28gd2UgaGF2ZSB0byByZS1hcHBseSBpdCBoZXJlLiAqL1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0LWNvbG9yLCB2YXIoLS1wcmltYXJ5LXRleHQtY29sb3IpKTtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0O1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtY29udGVudCA6OnNsb3R0ZWQoaW5wdXQpOjotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9uLFxuICAgICAgLmlucHV0LWNvbnRlbnQgOjpzbG90dGVkKGlucHV0KTo6LXdlYmtpdC1pbm5lci1zcGluLWJ1dHRvbiB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnB1dC13ZWJraXQtc3Bpbm5lcjtcbiAgICAgIH1cblxuICAgICAgLmlucHV0LWNvbnRlbnQuZm9jdXNlZCA6OnNsb3R0ZWQoaW5wdXQpLFxuICAgICAgLmlucHV0LWNvbnRlbnQuZm9jdXNlZCA6OnNsb3R0ZWQoaXJvbi1pbnB1dCksXG4gICAgICAuaW5wdXQtY29udGVudC5mb2N1c2VkIDo6c2xvdHRlZCh0ZXh0YXJlYSksXG4gICAgICAuaW5wdXQtY29udGVudC5mb2N1c2VkIDo6c2xvdHRlZChpcm9uLWF1dG9ncm93LXRleHRhcmVhKSxcbiAgICAgIC5pbnB1dC1jb250ZW50LmZvY3VzZWQgOjpzbG90dGVkKC5wYXBlci1pbnB1dC1pbnB1dCkge1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtZm9jdXM7XG4gICAgICB9XG5cbiAgICAgIC5pbnB1dC1jb250ZW50LmlzLWludmFsaWQgOjpzbG90dGVkKGlucHV0KSxcbiAgICAgIC5pbnB1dC1jb250ZW50LmlzLWludmFsaWQgOjpzbG90dGVkKGlyb24taW5wdXQpLFxuICAgICAgLmlucHV0LWNvbnRlbnQuaXMtaW52YWxpZCA6OnNsb3R0ZWQodGV4dGFyZWEpLFxuICAgICAgLmlucHV0LWNvbnRlbnQuaXMtaW52YWxpZCA6OnNsb3R0ZWQoaXJvbi1hdXRvZ3Jvdy10ZXh0YXJlYSksXG4gICAgICAuaW5wdXQtY29udGVudC5pcy1pbnZhbGlkIDo6c2xvdHRlZCgucGFwZXItaW5wdXQtaW5wdXQpIHtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWlucHV0LWludmFsaWQ7XG4gICAgICB9XG5cbiAgICAgIC5wcmVmaXggOjpzbG90dGVkKCopIHtcbiAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1mb250LXN1YmhlYWQ7XG4gICAgICAgIEBhcHBseSAtLWxheW91dC1mbGV4LW5vbmU7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LXByZWZpeDtcbiAgICAgIH1cblxuICAgICAgLnN1ZmZpeCA6OnNsb3R0ZWQoKikge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWZvbnQtc3ViaGVhZDtcbiAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWZsZXgtbm9uZTtcblxuICAgICAgICBAYXBwbHkgLS1wYXBlci1pbnB1dC1zdWZmaXg7XG4gICAgICB9XG5cbiAgICAgIC8qIEZpcmVmb3ggc2V0cyBhIG1pbi13aWR0aCBvbiB0aGUgaW5wdXQsIHdoaWNoIGNhbiBjYXVzZSBsYXlvdXQgaXNzdWVzICovXG4gICAgICAuaW5wdXQtY29udGVudCA6OnNsb3R0ZWQoaW5wdXQpIHtcbiAgICAgICAgbWluLXdpZHRoOiAwO1xuICAgICAgfVxuXG4gICAgICAuaW5wdXQtY29udGVudCA6OnNsb3R0ZWQodGV4dGFyZWEpIHtcbiAgICAgICAgcmVzaXplOiBub25lO1xuICAgICAgfVxuXG4gICAgICAuYWRkLW9uLWNvbnRlbnQge1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICB9XG5cbiAgICAgIC5hZGQtb24tY29udGVudC5pcy1pbnZhbGlkIDo6c2xvdHRlZCgqKSB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pbnB1dC1jb250YWluZXItaW52YWxpZC1jb2xvciwgdmFyKC0tZXJyb3ItY29sb3IpKTtcbiAgICAgIH1cblxuICAgICAgLmFkZC1vbi1jb250ZW50LmlzLWhpZ2hsaWdodGVkIDo6c2xvdHRlZCgqKSB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pbnB1dC1jb250YWluZXItZm9jdXMtY29sb3IsIHZhcigtLXByaW1hcnktY29sb3IpKTtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuXG4gICAgPGRpdiBjbGFzcz1cImZsb2F0ZWQtbGFiZWwtcGxhY2Vob2xkZXJcIiBhcmlhLWhpZGRlbj1cInRydWVcIiBoaWRkZW49XCJbW25vTGFiZWxGbG9hdF1dXCI+Jm5ic3A7PC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzPVwiaW5wdXQtd3JhcHBlclwiPlxuICAgICAgPHNwYW4gY2xhc3M9XCJwcmVmaXhcIj48c2xvdCBuYW1lPVwicHJlZml4XCI+PC9zbG90Pjwvc3Bhbj5cblxuICAgICAgPGRpdiBjbGFzcyQ9XCJbW19jb21wdXRlSW5wdXRDb250ZW50Q2xhc3Mobm9MYWJlbEZsb2F0LGFsd2F5c0Zsb2F0TGFiZWwsZm9jdXNlZCxpbnZhbGlkLF9pbnB1dEhhc0NvbnRlbnQpXV1cIiBpZD1cImxhYmVsQW5kSW5wdXRDb250YWluZXJcIj5cbiAgICAgICAgPHNsb3QgbmFtZT1cImxhYmVsXCI+PC9zbG90PlxuICAgICAgICA8c2xvdCBuYW1lPVwiaW5wdXRcIj48L3Nsb3Q+XG4gICAgICA8L2Rpdj5cblxuICAgICAgPHNwYW4gY2xhc3M9XCJzdWZmaXhcIj48c2xvdCBuYW1lPVwic3VmZml4XCI+PC9zbG90Pjwvc3Bhbj5cbiAgICA8L2Rpdj5cblxuICAgIDxkaXYgY2xhc3MkPVwiW1tfY29tcHV0ZVVuZGVybGluZUNsYXNzKGZvY3VzZWQsaW52YWxpZCldXVwiPlxuICAgICAgPGRpdiBjbGFzcz1cInVuZm9jdXNlZC1saW5lXCI+PC9kaXY+XG4gICAgICA8ZGl2IGNsYXNzPVwiZm9jdXNlZC1saW5lXCI+PC9kaXY+XG4gICAgPC9kaXY+XG5cbiAgICA8ZGl2IGNsYXNzJD1cIltbX2NvbXB1dGVBZGRPbkNvbnRlbnRDbGFzcyhmb2N1c2VkLGludmFsaWQpXV1cIj5cbiAgICAgIDxzbG90IG5hbWU9XCJhZGQtb25cIj48L3Nsb3Q+XG4gICAgPC9kaXY+XG5gLFxuXG4gIGlzOiAncGFwZXItaW5wdXQtY29udGFpbmVyJyxcblxuICBwcm9wZXJ0aWVzOiB7XG4gICAgLyoqXG4gICAgICogU2V0IHRvIHRydWUgdG8gZGlzYWJsZSB0aGUgZmxvYXRpbmcgbGFiZWwuIFRoZSBsYWJlbCBkaXNhcHBlYXJzIHdoZW4gdGhlXG4gICAgICogaW5wdXQgdmFsdWUgaXMgbm90IG51bGwuXG4gICAgICovXG4gICAgbm9MYWJlbEZsb2F0OiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0byB0cnVlIHRvIGFsd2F5cyBmbG9hdCB0aGUgZmxvYXRpbmcgbGFiZWwuXG4gICAgICovXG4gICAgYWx3YXlzRmxvYXRMYWJlbDoge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX0sXG5cbiAgICAvKipcbiAgICAgKiBUaGUgYXR0cmlidXRlIHRvIGxpc3RlbiBmb3IgdmFsdWUgY2hhbmdlcyBvbi5cbiAgICAgKi9cbiAgICBhdHRyRm9yVmFsdWU6IHt0eXBlOiBTdHJpbmcsIHZhbHVlOiAnYmluZC12YWx1ZSd9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIHRydWUgdG8gYXV0by12YWxpZGF0ZSB0aGUgaW5wdXQgdmFsdWUgd2hlbiBpdCBjaGFuZ2VzLlxuICAgICAqL1xuICAgIGF1dG9WYWxpZGF0ZToge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX0sXG5cbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoZSBpbnB1dCBpcyBpbnZhbGlkLiBUaGlzIHByb3BlcnR5IGlzIHNldCBhdXRvbWF0aWNhbGx5IHdoZW4gdGhlXG4gICAgICogaW5wdXQgdmFsdWUgY2hhbmdlcyBpZiBhdXRvLXZhbGlkYXRpbmcsIG9yIHdoZW4gdGhlIGBpcm9uLWlucHV0LXZhbGlkYXRlYFxuICAgICAqIGV2ZW50IGlzIGhlYXJkIGZyb20gYSBjaGlsZC5cbiAgICAgKi9cbiAgICBpbnZhbGlkOiB7b2JzZXJ2ZXI6ICdfaW52YWxpZENoYW5nZWQnLCB0eXBlOiBCb29sZWFuLCB2YWx1ZTogZmFsc2V9LFxuXG4gICAgLyoqXG4gICAgICogVHJ1ZSBpZiB0aGUgaW5wdXQgaGFzIGZvY3VzLlxuICAgICAqL1xuICAgIGZvY3VzZWQ6IHtyZWFkT25seTogdHJ1ZSwgdHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlLCBub3RpZnk6IHRydWV9LFxuXG4gICAgX2FkZG9uczoge1xuICAgICAgdHlwZTogQXJyYXlcbiAgICAgIC8vIGRvIG5vdCBzZXQgYSBkZWZhdWx0IHZhbHVlIGhlcmUgaW50ZW50aW9uYWxseSAtIGl0IHdpbGwgYmUgaW5pdGlhbGl6ZWRcbiAgICAgIC8vIGxhemlseSB3aGVuIGEgZGlzdHJpYnV0ZWQgY2hpbGQgaXMgYXR0YWNoZWQsIHdoaWNoIG1heSBvY2N1ciBiZWZvcmVcbiAgICAgIC8vIGNvbmZpZ3VyYXRpb24gZm9yIHRoaXMgZWxlbWVudCBpbiBwb2x5ZmlsbC5cbiAgICB9LFxuXG4gICAgX2lucHV0SGFzQ29udGVudDoge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX0sXG5cbiAgICBfaW5wdXRTZWxlY3RvcjpcbiAgICAgICAge3R5cGU6IFN0cmluZywgdmFsdWU6ICdpbnB1dCxpcm9uLWlucHV0LHRleHRhcmVhLC5wYXBlci1pbnB1dC1pbnB1dCd9LFxuXG4gICAgX2JvdW5kT25Gb2N1czoge1xuICAgICAgdHlwZTogRnVuY3Rpb24sXG4gICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vbkZvY3VzLmJpbmQodGhpcyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIF9ib3VuZE9uQmx1cjoge1xuICAgICAgdHlwZTogRnVuY3Rpb24sXG4gICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vbkJsdXIuYmluZCh0aGlzKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgX2JvdW5kT25JbnB1dDoge1xuICAgICAgdHlwZTogRnVuY3Rpb24sXG4gICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vbklucHV0LmJpbmQodGhpcyk7XG4gICAgICB9XG4gICAgfSxcblxuICAgIF9ib3VuZFZhbHVlQ2hhbmdlZDoge1xuICAgICAgdHlwZTogRnVuY3Rpb24sXG4gICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9vblZhbHVlQ2hhbmdlZC5iaW5kKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBsaXN0ZW5lcnM6IHtcbiAgICAnYWRkb24tYXR0YWNoZWQnOiAnX29uQWRkb25BdHRhY2hlZCcsXG4gICAgJ2lyb24taW5wdXQtdmFsaWRhdGUnOiAnX29uSXJvbklucHV0VmFsaWRhdGUnXG4gIH0sXG5cbiAgZ2V0IF92YWx1ZUNoYW5nZWRFdmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5hdHRyRm9yVmFsdWUgKyAnLWNoYW5nZWQnO1xuICB9LFxuXG4gIGdldCBfcHJvcGVydHlGb3JWYWx1ZSgpIHtcbiAgICByZXR1cm4gZGFzaFRvQ2FtZWxDYXNlKHRoaXMuYXR0ckZvclZhbHVlKTtcbiAgfSxcblxuICBnZXQgX2lucHV0RWxlbWVudCgpIHtcbiAgICByZXR1cm4gZG9tKHRoaXMpLnF1ZXJ5U2VsZWN0b3IodGhpcy5faW5wdXRTZWxlY3Rvcik7XG4gIH0sXG5cbiAgZ2V0IF9pbnB1dEVsZW1lbnRWYWx1ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRFbGVtZW50W3RoaXMuX3Byb3BlcnR5Rm9yVmFsdWVdIHx8XG4gICAgICAgIHRoaXMuX2lucHV0RWxlbWVudC52YWx1ZTtcbiAgfSxcblxuICAvKiogQG92ZXJyaWRlICovXG4gIHJlYWR5OiBmdW5jdGlvbigpIHtcbiAgICAvLyBQYXBlci1pbnB1dCB0cmVhdHMgYSB2YWx1ZSBvZiB1bmRlZmluZWQgZGlmZmVyZW50bHkgYXQgc3RhcnR1cCB0aGFuXG4gICAgLy8gdGhlIHJlc3Qgb2YgdGhlIHRpbWUgKHNwZWNpZmljYWxseTogaXQgZG9lcyBub3QgdmFsaWRhdGUgaXQgYXQgc3RhcnR1cCxcbiAgICAvLyBidXQgaXQgZG9lcyBhZnRlciB0aGF0LiBXZSBuZWVkIHRvIHRyYWNrIHdoZXRoZXIgdGhlIGZpcnN0IHRpbWUgd2VcbiAgICAvLyBlbmNvdW50ZXIgdGhlIHZhbHVlIGlzIGJhc2ljYWxseSB0aGlzIGZpcnN0IHRpbWUsIHNvIHRoYXQgd2UgY2FuIHZhbGlkYXRlXG4gICAgLy8gaXQgY29ycmVjdGx5IHRoZSByZXN0IG9mIHRoZSB0aW1lLiBTZWVcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vUG9seW1lckVsZW1lbnRzL3BhcGVyLWlucHV0L2lzc3Vlcy82MDVcbiAgICB0aGlzLl9faXNGaXJzdFZhbHVlVXBkYXRlID0gdHJ1ZTtcbiAgICBpZiAoIXRoaXMuX2FkZG9ucykge1xuICAgICAgdGhpcy5fYWRkb25zID0gW107XG4gICAgfVxuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9ib3VuZE9uRm9jdXMsIHRydWUpO1xuICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2JvdW5kT25CbHVyLCB0cnVlKTtcbiAgfSxcblxuICAvKiogQG92ZXJyaWRlICovXG4gIGF0dGFjaGVkOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5hdHRyRm9yVmFsdWUpIHtcbiAgICAgIHRoaXMuX2lucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFxuICAgICAgICAgIHRoaXMuX3ZhbHVlQ2hhbmdlZEV2ZW50LCB0aGlzLl9ib3VuZFZhbHVlQ2hhbmdlZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCB0aGlzLl9vbklucHV0KTtcbiAgICB9XG5cbiAgICAvLyBPbmx5IHZhbGlkYXRlIHdoZW4gYXR0YWNoZWQgaWYgdGhlIGlucHV0IGFscmVhZHkgaGFzIGEgdmFsdWUuXG4gICAgaWYgKHRoaXMuX2lucHV0RWxlbWVudFZhbHVlICYmIHRoaXMuX2lucHV0RWxlbWVudFZhbHVlICE9ICcnKSB7XG4gICAgICB0aGlzLl9oYW5kbGVWYWx1ZUFuZEF1dG9WYWxpZGF0ZSh0aGlzLl9pbnB1dEVsZW1lbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oYW5kbGVWYWx1ZSh0aGlzLl9pbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfSxcblxuICAvKiogQHByaXZhdGUgKi9cbiAgX29uQWRkb25BdHRhY2hlZDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBpZiAoIXRoaXMuX2FkZG9ucykge1xuICAgICAgdGhpcy5fYWRkb25zID0gW107XG4gICAgfVxuICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG4gICAgaWYgKHRoaXMuX2FkZG9ucy5pbmRleE9mKHRhcmdldCkgPT09IC0xKSB7XG4gICAgICB0aGlzLl9hZGRvbnMucHVzaCh0YXJnZXQpO1xuICAgICAgaWYgKHRoaXMuaXNBdHRhY2hlZCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVWYWx1ZSh0aGlzLl9pbnB1dEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKiogQHByaXZhdGUgKi9cbiAgX29uRm9jdXM6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3NldEZvY3VzZWQodHJ1ZSk7XG4gIH0sXG5cbiAgLyoqIEBwcml2YXRlICovXG4gIF9vbkJsdXI6IGZ1bmN0aW9uKCkge1xuICAgIHRoaXMuX3NldEZvY3VzZWQoZmFsc2UpO1xuICAgIHRoaXMuX2hhbmRsZVZhbHVlQW5kQXV0b1ZhbGlkYXRlKHRoaXMuX2lucHV0RWxlbWVudCk7XG4gIH0sXG5cbiAgLyoqIEBwcml2YXRlICovXG4gIF9vbklucHV0OiBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuX2hhbmRsZVZhbHVlQW5kQXV0b1ZhbGlkYXRlKGV2ZW50LnRhcmdldCk7XG4gIH0sXG5cbiAgLyoqIEBwcml2YXRlICovXG4gIF9vblZhbHVlQ2hhbmdlZDogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgaW5wdXQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAvLyBQYXBlci1pbnB1dCB0cmVhdHMgYSB2YWx1ZSBvZiB1bmRlZmluZWQgZGlmZmVyZW50bHkgYXQgc3RhcnR1cCB0aGFuXG4gICAgLy8gdGhlIHJlc3Qgb2YgdGhlIHRpbWUgKHNwZWNpZmljYWxseTogaXQgZG9lcyBub3QgdmFsaWRhdGUgaXQgYXQgc3RhcnR1cCxcbiAgICAvLyBidXQgaXQgZG9lcyBhZnRlciB0aGF0LiBJZiB0aGlzIGlzIGluIGZhY3QgdGhlIGJvb3R1cCBjYXNlLCBpZ25vcmVcbiAgICAvLyB2YWxpZGF0aW9uLCBqdXN0IHRoaXMgb25jZS5cbiAgICBpZiAodGhpcy5fX2lzRmlyc3RWYWx1ZVVwZGF0ZSkge1xuICAgICAgdGhpcy5fX2lzRmlyc3RWYWx1ZVVwZGF0ZSA9IGZhbHNlO1xuICAgICAgaWYgKGlucHV0LnZhbHVlID09PSB1bmRlZmluZWQgfHwgaW5wdXQudmFsdWUgPT09ICcnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9oYW5kbGVWYWx1ZUFuZEF1dG9WYWxpZGF0ZShldmVudC50YXJnZXQpO1xuICB9LFxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBfaGFuZGxlVmFsdWU6IGZ1bmN0aW9uKGlucHV0RWxlbWVudCkge1xuICAgIHZhciB2YWx1ZSA9IHRoaXMuX2lucHV0RWxlbWVudFZhbHVlO1xuXG4gICAgLy8gdHlwZT1cIm51bWJlclwiIGhhY2sgbmVlZGVkIGJlY2F1c2UgdGhpcy52YWx1ZSBpcyBlbXB0eSB1bnRpbCBpdCdzIHZhbGlkXG4gICAgaWYgKHZhbHVlIHx8IHZhbHVlID09PSAwIHx8XG4gICAgICAgIChpbnB1dEVsZW1lbnQudHlwZSA9PT0gJ251bWJlcicgJiYgIWlucHV0RWxlbWVudC5jaGVja1ZhbGlkaXR5KCkpKSB7XG4gICAgICB0aGlzLl9pbnB1dEhhc0NvbnRlbnQgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9pbnB1dEhhc0NvbnRlbnQgPSBmYWxzZTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZUFkZG9ucyhcbiAgICAgICAge2lucHV0RWxlbWVudDogaW5wdXRFbGVtZW50LCB2YWx1ZTogdmFsdWUsIGludmFsaWQ6IHRoaXMuaW52YWxpZH0pO1xuICB9LFxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBfaGFuZGxlVmFsdWVBbmRBdXRvVmFsaWRhdGU6IGZ1bmN0aW9uKGlucHV0RWxlbWVudCkge1xuICAgIGlmICh0aGlzLmF1dG9WYWxpZGF0ZSAmJiBpbnB1dEVsZW1lbnQpIHtcbiAgICAgIHZhciB2YWxpZDtcblxuICAgICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGF0ZSkge1xuICAgICAgICB2YWxpZCA9IGlucHV0RWxlbWVudC52YWxpZGF0ZSh0aGlzLl9pbnB1dEVsZW1lbnRWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWxpZCA9IGlucHV0RWxlbWVudC5jaGVja1ZhbGlkaXR5KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmludmFsaWQgPSAhdmFsaWQ7XG4gICAgfVxuXG4gICAgLy8gQ2FsbCB0aGlzIGxhc3QgdG8gbm90aWZ5IHRoZSBhZGQtb25zLlxuICAgIHRoaXMuX2hhbmRsZVZhbHVlKGlucHV0RWxlbWVudCk7XG4gIH0sXG5cbiAgLyoqIEBwcml2YXRlICovXG4gIF9vbklyb25JbnB1dFZhbGlkYXRlOiBmdW5jdGlvbihldmVudCkge1xuICAgIHRoaXMuaW52YWxpZCA9IHRoaXMuX2lucHV0RWxlbWVudC5pbnZhbGlkO1xuICB9LFxuXG4gIC8qKiBAcHJpdmF0ZSAqL1xuICBfaW52YWxpZENoYW5nZWQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICh0aGlzLl9hZGRvbnMpIHtcbiAgICAgIHRoaXMudXBkYXRlQWRkb25zKHtpbnZhbGlkOiB0aGlzLmludmFsaWR9KTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENhbGwgdGhpcyB0byB1cGRhdGUgdGhlIHN0YXRlIG9mIGFkZC1vbnMuXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBBZGQtb24gc3RhdGUuXG4gICAqL1xuICB1cGRhdGVBZGRvbnM6IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgZm9yICh2YXIgYWRkb24sIGluZGV4ID0gMDsgYWRkb24gPSB0aGlzLl9hZGRvbnNbaW5kZXhdOyBpbmRleCsrKSB7XG4gICAgICBhZGRvbi51cGRhdGUoc3RhdGUpO1xuICAgIH1cbiAgfSxcblxuICAvKiogQHByaXZhdGUgKi9cbiAgX2NvbXB1dGVJbnB1dENvbnRlbnRDbGFzczogZnVuY3Rpb24oXG4gICAgICBub0xhYmVsRmxvYXQsIGFsd2F5c0Zsb2F0TGFiZWwsIGZvY3VzZWQsIGludmFsaWQsIF9pbnB1dEhhc0NvbnRlbnQpIHtcbiAgICB2YXIgY2xzID0gJ2lucHV0LWNvbnRlbnQnO1xuICAgIGlmICghbm9MYWJlbEZsb2F0KSB7XG4gICAgICB2YXIgbGFiZWwgPSB0aGlzLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7XG5cbiAgICAgIGlmIChhbHdheXNGbG9hdExhYmVsIHx8IF9pbnB1dEhhc0NvbnRlbnQpIHtcbiAgICAgICAgY2xzICs9ICcgbGFiZWwtaXMtZmxvYXRpbmcnO1xuICAgICAgICAvLyBJZiB0aGUgbGFiZWwgaXMgZmxvYXRpbmcsIGlnbm9yZSBhbnkgb2Zmc2V0cyB0aGF0IG1heSBoYXZlIGJlZW5cbiAgICAgICAgLy8gYXBwbGllZCBmcm9tIGEgcHJlZml4IGVsZW1lbnQuXG4gICAgICAgIHRoaXMuJC5sYWJlbEFuZElucHV0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3N0YXRpYyc7XG5cbiAgICAgICAgaWYgKGludmFsaWQpIHtcbiAgICAgICAgICBjbHMgKz0gJyBpcy1pbnZhbGlkJztcbiAgICAgICAgfSBlbHNlIGlmIChmb2N1c2VkKSB7XG4gICAgICAgICAgY2xzICs9ICcgbGFiZWwtaXMtaGlnaGxpZ2h0ZWQnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXaGVuIHRoZSBsYWJlbCBpcyBub3QgZmxvYXRpbmcsIGl0IHNob3VsZCBvdmVybGFwIHRoZSBpbnB1dCBlbGVtZW50LlxuICAgICAgICBpZiAobGFiZWwpIHtcbiAgICAgICAgICB0aGlzLiQubGFiZWxBbmRJbnB1dENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGludmFsaWQpIHtcbiAgICAgICAgICBjbHMgKz0gJyBpcy1pbnZhbGlkJztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoX2lucHV0SGFzQ29udGVudCkge1xuICAgICAgICBjbHMgKz0gJyBsYWJlbC1pcy1oaWRkZW4nO1xuICAgICAgfVxuICAgICAgaWYgKGludmFsaWQpIHtcbiAgICAgICAgY2xzICs9ICcgaXMtaW52YWxpZCc7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChmb2N1c2VkKSB7XG4gICAgICBjbHMgKz0gJyBmb2N1c2VkJztcbiAgICB9XG4gICAgcmV0dXJuIGNscztcbiAgfSxcblxuICAvKiogQHByaXZhdGUgKi9cbiAgX2NvbXB1dGVVbmRlcmxpbmVDbGFzczogZnVuY3Rpb24oZm9jdXNlZCwgaW52YWxpZCkge1xuICAgIHZhciBjbHMgPSAndW5kZXJsaW5lJztcbiAgICBpZiAoaW52YWxpZCkge1xuICAgICAgY2xzICs9ICcgaXMtaW52YWxpZCc7XG4gICAgfSBlbHNlIGlmIChmb2N1c2VkKSB7XG4gICAgICBjbHMgKz0gJyBpcy1oaWdobGlnaHRlZCdcbiAgICB9XG4gICAgcmV0dXJuIGNscztcbiAgfSxcblxuICAvKiogQHByaXZhdGUgKi9cbiAgX2NvbXB1dGVBZGRPbkNvbnRlbnRDbGFzczogZnVuY3Rpb24oZm9jdXNlZCwgaW52YWxpZCkge1xuICAgIHZhciBjbHMgPSAnYWRkLW9uLWNvbnRlbnQnO1xuICAgIGlmIChpbnZhbGlkKSB7XG4gICAgICBjbHMgKz0gJyBpcy1pbnZhbGlkJztcbiAgICB9IGVsc2UgaWYgKGZvY3VzZWQpIHtcbiAgICAgIGNscyArPSAnIGlzLWhpZ2hsaWdodGVkJ1xuICAgIH1cbiAgICByZXR1cm4gY2xzO1xuICB9XG59KTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5pbXBvcnQgJ0Bwb2x5bWVyL3BhcGVyLXN0eWxlcy9kZWZhdWx0LXRoZW1lLmpzJztcbmltcG9ydCAnQHBvbHltZXIvcGFwZXItc3R5bGVzL3R5cG9ncmFwaHkuanMnO1xuXG5pbXBvcnQge1BvbHltZXJ9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2xlZ2FjeS9wb2x5bWVyLWZuLmpzJztcbmltcG9ydCB7aHRtbH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9saWIvdXRpbHMvaHRtbC10YWcuanMnO1xuXG5pbXBvcnQge1BhcGVySW5wdXRBZGRvbkJlaGF2aW9yfSBmcm9tICcuL3BhcGVyLWlucHV0LWFkZG9uLWJlaGF2aW9yLmpzJztcblxuLypcbmA8cGFwZXItaW5wdXQtZXJyb3I+YCBpcyBhbiBlcnJvciBtZXNzYWdlIGZvciB1c2Ugd2l0aFxuYDxwYXBlci1pbnB1dC1jb250YWluZXI+YC4gVGhlIGVycm9yIGlzIGRpc3BsYXllZCB3aGVuIHRoZVxuYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCBpcyBgaW52YWxpZGAuXG5cbiAgICA8cGFwZXItaW5wdXQtY29udGFpbmVyPlxuICAgICAgPGlucHV0IHBhdHRlcm49XCJbMC05XSpcIj5cbiAgICAgIDxwYXBlci1pbnB1dC1lcnJvciBzbG90PVwiYWRkLW9uXCI+T25seSBudW1iZXJzIGFyZVxuYWxsb3dlZCE8L3BhcGVyLWlucHV0LWVycm9yPlxuICAgIDwvcGFwZXItaW5wdXQtY29udGFpbmVyPlxuXG4jIyMgU3R5bGluZ1xuXG5UaGUgZm9sbG93aW5nIGN1c3RvbSBwcm9wZXJ0aWVzIGFuZCBtaXhpbnMgYXJlIGF2YWlsYWJsZSBmb3Igc3R5bGluZzpcblxuQ3VzdG9tIHByb3BlcnR5IHwgRGVzY3JpcHRpb24gfCBEZWZhdWx0XG4tLS0tLS0tLS0tLS0tLS0tfC0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLVxuYC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWludmFsaWQtY29sb3JgIHwgVGhlIGZvcmVncm91bmQgY29sb3Igb2YgdGhlIGVycm9yIHwgYC0tZXJyb3ItY29sb3JgXG5gLS1wYXBlci1pbnB1dC1lcnJvcmAgfCBNaXhpbiBhcHBsaWVkIHRvIHRoZSBlcnJvciB8IGB7fWBcbiovXG5Qb2x5bWVyKHtcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBfdGVtcGxhdGU6IGh0bWxgXG4gICAgPHN0eWxlPlxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcblxuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWludmFsaWQtY29sb3IsIHZhcigtLWVycm9yLWNvbG9yKSk7XG5cbiAgICAgICAgQGFwcGx5IC0tcGFwZXItZm9udC1jYXB0aW9uO1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1pbnB1dC1lcnJvcjtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBsZWZ0OjA7XG4gICAgICAgIHJpZ2h0OjA7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtpbnZhbGlkXSkge1xuICAgICAgICB2aXNpYmlsaXR5OiB2aXNpYmxlO1xuICAgICAgfVxuXG4gICAgICAjYTExeVdyYXBwZXIge1xuICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtpbnZhbGlkXSkgI2ExMXlXcmFwcGVyIHtcbiAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgIH1cbiAgICA8L3N0eWxlPlxuXG4gICAgPCEtLVxuICAgIElmIHRoZSBwYXBlci1pbnB1dC1lcnJvciBlbGVtZW50IGlzIGRpcmVjdGx5IHJlZmVyZW5jZWQgYnkgYW5cbiAgICBcXGBhcmlhLWRlc2NyaWJlZGJ5XFxgIGF0dHJpYnV0ZSwgc3VjaCBhcyB3aGVuIHVzZWQgYXMgYSBwYXBlci1pbnB1dCBhZGQtb24sXG4gICAgdGhlbiBhcHBseWluZyBcXGB2aXNpYmlsaXR5OiBoaWRkZW47XFxgIHRvIHRoZSBwYXBlci1pbnB1dC1lcnJvciBlbGVtZW50IGl0c2VsZlxuICAgIGRvZXMgbm90IGhpZGUgdGhlIGVycm9yLlxuXG4gICAgRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZTpcbiAgICBodHRwczovL3d3dy53My5vcmcvVFIvYWNjbmFtZS0xLjEvI21hcHBpbmdfYWRkaXRpb25hbF9uZF9kZXNjcmlwdGlvblxuICAgIC0tPlxuICAgIDxkaXYgaWQ9XCJhMTF5V3JhcHBlclwiPlxuICAgICAgPHNsb3Q+PC9zbG90PlxuICAgIDwvZGl2PlxuYCxcblxuICBpczogJ3BhcGVyLWlucHV0LWVycm9yJyxcbiAgYmVoYXZpb3JzOiBbUGFwZXJJbnB1dEFkZG9uQmVoYXZpb3JdLFxuXG4gIHByb3BlcnRpZXM6IHtcbiAgICAvKipcbiAgICAgKiBUcnVlIGlmIHRoZSBlcnJvciBpcyBzaG93aW5nLlxuICAgICAqL1xuICAgIGludmFsaWQ6IHtyZWFkT25seTogdHJ1ZSwgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlLCB0eXBlOiBCb29sZWFufVxuICB9LFxuXG4gIC8qKlxuICAgKiBUaGlzIG92ZXJyaWRlcyB0aGUgdXBkYXRlIGZ1bmN0aW9uIGluIFBhcGVySW5wdXRBZGRvbkJlaGF2aW9yLlxuICAgKiBAcGFyYW0ge3tcbiAgICogICBpbnB1dEVsZW1lbnQ6IChFbGVtZW50fHVuZGVmaW5lZCksXG4gICAqICAgdmFsdWU6IChzdHJpbmd8dW5kZWZpbmVkKSxcbiAgICogICBpbnZhbGlkOiBib29sZWFuXG4gICAqIH19IHN0YXRlIC1cbiAgICogICAgIGlucHV0RWxlbWVudDogVGhlIGlucHV0IGVsZW1lbnQuXG4gICAqICAgICB2YWx1ZTogVGhlIGlucHV0IHZhbHVlLlxuICAgKiAgICAgaW52YWxpZDogVHJ1ZSBpZiB0aGUgaW5wdXQgdmFsdWUgaXMgaW52YWxpZC5cbiAgICovXG4gIHVwZGF0ZTogZnVuY3Rpb24oc3RhdGUpIHtcbiAgICB0aGlzLl9zZXRJbnZhbGlkKHN0YXRlLmludmFsaWQpO1xuICB9XG59KTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5cbmltcG9ydCB7SXJvbkExMXlLZXlzQmVoYXZpb3J9IGZyb20gJ0Bwb2x5bWVyL2lyb24tYTExeS1rZXlzLWJlaGF2aW9yL2lyb24tYTExeS1rZXlzLWJlaGF2aW9yLmpzJztcbmltcG9ydCB7SXJvbkNvbnRyb2xTdGF0ZX0gZnJvbSAnQHBvbHltZXIvaXJvbi1iZWhhdmlvcnMvaXJvbi1jb250cm9sLXN0YXRlLmpzJztcbmltcG9ydCB7ZG9tfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvcG9seW1lci5kb20uanMnO1xuaW1wb3J0IHtQb2x5bWVyRWxlbWVudH0gZnJvbSAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWVsZW1lbnQuanMnO1xuXG4vLyBHZW5lcmF0ZSB1bmlxdWUsIG1vbm90b25pY2FsbHkgaW5jcmVhc2luZyBJRHMgZm9yIGxhYmVscyAobmVlZGVkIGJ5XG4vLyBhcmlhLWxhYmVsbGVkYnkpIGFuZCBhZGQtb25zLlxuZXhwb3J0IGNvbnN0IFBhcGVySW5wdXRIZWxwZXIgPSB7fTtcblxuUGFwZXJJbnB1dEhlbHBlci5OZXh0TGFiZWxJRCA9IDE7XG5QYXBlcklucHV0SGVscGVyLk5leHRBZGRvbklEID0gMTtcblBhcGVySW5wdXRIZWxwZXIuTmV4dElucHV0SUQgPSAxO1xuXG4vKipcbiAqIFVzZSBgUGFwZXJJbnB1dEJlaGF2aW9yYCB0byBpbXBsZW1lbnQgaW5wdXRzIHdpdGggYDxwYXBlci1pbnB1dC1jb250YWluZXI+YC5cbiAqIFRoaXMgYmVoYXZpb3IgaXMgaW1wbGVtZW50ZWQgYnkgYDxwYXBlci1pbnB1dD5gLiBJdCBleHBvc2VzIGEgbnVtYmVyIG9mXG4gKiBwcm9wZXJ0aWVzIGZyb20gYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCBhbmQgYDxpbnB1dCBpcz1cImlyb24taW5wdXRcIj5gIGFuZFxuICogdGhleSBzaG91bGQgYmUgYm91bmQgaW4geW91ciB0ZW1wbGF0ZS5cbiAqXG4gKiBUaGUgaW5wdXQgZWxlbWVudCBjYW4gYmUgYWNjZXNzZWQgYnkgdGhlIGBpbnB1dEVsZW1lbnRgIHByb3BlcnR5IGlmIHlvdSBuZWVkXG4gKiB0byBhY2Nlc3MgcHJvcGVydGllcyBvciBtZXRob2RzIHRoYXQgYXJlIG5vdCBleHBvc2VkLlxuICogQHBvbHltZXJCZWhhdmlvciBQYXBlcklucHV0QmVoYXZpb3JcbiAqL1xuZXhwb3J0IGNvbnN0IFBhcGVySW5wdXRCZWhhdmlvckltcGwgPSB7XG5cbiAgcHJvcGVydGllczoge1xuICAgIC8qKlxuICAgICAqIEZpcmVkIHdoZW4gdGhlIGlucHV0IGNoYW5nZXMgZHVlIHRvIHVzZXIgaW50ZXJhY3Rpb24uXG4gICAgICpcbiAgICAgKiBAZXZlbnQgY2hhbmdlXG4gICAgICovXG5cbiAgICAvKipcbiAgICAgKiBUaGUgbGFiZWwgZm9yIHRoaXMgaW5wdXQuIElmIHlvdSdyZSB1c2luZyBQYXBlcklucHV0QmVoYXZpb3IgdG9cbiAgICAgKiBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZSBlbGVtZW50LCBiaW5kIHRoaXMgdG9cbiAgICAgKiBgPGxhYmVsPmAncyBjb250ZW50IGFuZCBgaGlkZGVuYCBwcm9wZXJ0eSwgZS5nLlxuICAgICAqIGA8bGFiZWwgaGlkZGVuJD1cIltbIWxhYmVsXV1cIj5bW2xhYmVsXV08L2xhYmVsPmAgaW4geW91ciBgdGVtcGxhdGVgXG4gICAgICovXG4gICAgbGFiZWw6IHt0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogVGhlIHZhbHVlIGZvciB0aGlzIGlucHV0LiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvXG4gICAgICogaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2UgZWxlbWVudCwgYmluZCB0aGlzIHRvXG4gICAgICogdGhlIGA8aXJvbi1pbnB1dD5gJ3MgYGJpbmRWYWx1ZWBcbiAgICAgKiBwcm9wZXJ0eSwgb3IgdGhlIHZhbHVlIHByb3BlcnR5IG9mIHlvdXIgaW5wdXQgdGhhdCBpcyBgbm90aWZ5OnRydWVgLlxuICAgICAqIEB0eXBlIHsqfVxuICAgICAqL1xuICAgIHZhbHVlOiB7bm90aWZ5OiB0cnVlLCB0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIHRydWUgdG8gZGlzYWJsZSB0aGlzIGlucHV0LiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvXG4gICAgICogaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2UgZWxlbWVudCwgYmluZCB0aGlzIHRvXG4gICAgICogYm90aCB0aGUgYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCdzIGFuZCB0aGUgaW5wdXQncyBgZGlzYWJsZWRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGRpc2FibGVkOiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlfSxcblxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdmFsdWUgaXMgaW52YWxpZC4gSWYgeW91J3JlIHVzaW5nIFBhcGVySW5wdXRCZWhhdmlvclxuICAgICAqIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlIGVsZW1lbnQsIGJpbmQgdGhpcyB0byBib3RoIHRoZVxuICAgICAqIGA8cGFwZXItaW5wdXQtY29udGFpbmVyPmAncyBhbmQgdGhlIGlucHV0J3MgYGludmFsaWRgIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogSWYgYGF1dG9WYWxpZGF0ZWAgaXMgdHJ1ZSwgdGhlIGBpbnZhbGlkYCBhdHRyaWJ1dGUgaXMgbWFuYWdlZFxuICAgICAqIGF1dG9tYXRpY2FsbHksIHdoaWNoIGNhbiBjbG9iYmVyIGF0dGVtcHRzIHRvIG1hbmFnZSBpdCBtYW51YWxseS5cbiAgICAgKi9cbiAgICBpbnZhbGlkOiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlLCBub3RpZnk6IHRydWV9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoaXMgdG8gc3BlY2lmeSB0aGUgcGF0dGVybiBhbGxvd2VkIGJ5IGBwcmV2ZW50SW52YWxpZElucHV0YC4gSWZcbiAgICAgKiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlXG4gICAgICogZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgYWxsb3dlZFBhdHRlcm5gXG4gICAgICogcHJvcGVydHkuXG4gICAgICovXG4gICAgYWxsb3dlZFBhdHRlcm46IHt0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogVGhlIHR5cGUgb2YgdGhlIGlucHV0LiBUaGUgc3VwcG9ydGVkIHR5cGVzIGFyZSB0aGVcbiAgICAgKiBbbmF0aXZlIGlucHV0J3NcbiAgICAgKiB0eXBlc10oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRNTC9FbGVtZW50L2lucHV0I0Zvcm1fPGlucHV0Pl90eXBlcykuXG4gICAgICogSWYgeW91J3JlIHVzaW5nIFBhcGVySW5wdXRCZWhhdmlvciB0byBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZVxuICAgICAqIGVsZW1lbnQsIGJpbmQgdGhpcyB0byB0aGUgKFBvbHltZXIgMSkgYDxpbnB1dCBpcz1cImlyb24taW5wdXRcIj5gJ3Mgb3JcbiAgICAgKiAoUG9seW1lciAyKVxuICAgICAqIGA8aXJvbi1pbnB1dD5gJ3MgYHR5cGVgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIHR5cGU6IHt0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogVGhlIGRhdGFsaXN0IG9mIHRoZSBpbnB1dCAoaWYgYW55KS4gVGhpcyBzaG91bGQgbWF0Y2ggdGhlIGlkIG9mIGFuXG4gICAgICogZXhpc3RpbmcgYDxkYXRhbGlzdD5gLiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudFxuICAgICAqIHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2UgZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0XG4gICAgICogaXM9XCJpcm9uLWlucHV0XCI+YCdzIGBsaXN0YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBsaXN0OiB7dHlwZTogU3RyaW5nfSxcblxuICAgIC8qKlxuICAgICAqIEEgcGF0dGVybiB0byB2YWxpZGF0ZSB0aGUgYGlucHV0YCB3aXRoLiBJZiB5b3UncmUgdXNpbmdcbiAgICAgKiBQYXBlcklucHV0QmVoYXZpb3IgdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2UgZWxlbWVudCwgYmluZFxuICAgICAqIHRoaXMgdG8gdGhlIGA8aW5wdXQgaXM9XCJpcm9uLWlucHV0XCI+YCdzIGBwYXR0ZXJuYCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBwYXR0ZXJuOiB7dHlwZTogU3RyaW5nfSxcblxuICAgIC8qKlxuICAgICAqIFNldCB0byB0cnVlIHRvIG1hcmsgdGhlIGlucHV0IGFzIHJlcXVpcmVkLiBJZiB5b3UncmUgdXNpbmdcbiAgICAgKiBQYXBlcklucHV0QmVoYXZpb3IgdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2UgZWxlbWVudCwgYmluZFxuICAgICAqIHRoaXMgdG8gdGhlIGA8aW5wdXQgaXM9XCJpcm9uLWlucHV0XCI+YCdzIGByZXF1aXJlZGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgcmVxdWlyZWQ6IHt0eXBlOiBCb29sZWFuLCB2YWx1ZTogZmFsc2V9LFxuXG4gICAgLyoqXG4gICAgICogVGhlIGVycm9yIG1lc3NhZ2UgdG8gZGlzcGxheSB3aGVuIHRoZSBpbnB1dCBpcyBpbnZhbGlkLiBJZiB5b3UncmUgdXNpbmdcbiAgICAgKiBQYXBlcklucHV0QmVoYXZpb3IgdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2UgZWxlbWVudCxcbiAgICAgKiBiaW5kIHRoaXMgdG8gdGhlIGA8cGFwZXItaW5wdXQtZXJyb3I+YCdzIGNvbnRlbnQsIGlmIHVzaW5nLlxuICAgICAqL1xuICAgIGVycm9yTWVzc2FnZToge3R5cGU6IFN0cmluZ30sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSB0byBzaG93IGEgY2hhcmFjdGVyIGNvdW50ZXIuXG4gICAgICovXG4gICAgY2hhckNvdW50ZXI6IHt0eXBlOiBCb29sZWFuLCB2YWx1ZTogZmFsc2V9LFxuXG4gICAgLyoqXG4gICAgICogU2V0IHRvIHRydWUgdG8gZGlzYWJsZSB0aGUgZmxvYXRpbmcgbGFiZWwuIElmIHlvdSdyZSB1c2luZ1xuICAgICAqIFBhcGVySW5wdXRCZWhhdmlvciB0byBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZSBlbGVtZW50LCBiaW5kXG4gICAgICogdGhpcyB0byB0aGUgYDxwYXBlci1pbnB1dC1jb250YWluZXI+YCdzIGBub0xhYmVsRmxvYXRgIHByb3BlcnR5LlxuICAgICAqL1xuICAgIG5vTGFiZWxGbG9hdDoge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSB0byBhbHdheXMgZmxvYXQgdGhlIGxhYmVsLiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yXG4gICAgICogdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2UgZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZVxuICAgICAqIGA8cGFwZXItaW5wdXQtY29udGFpbmVyPmAncyBgYWx3YXlzRmxvYXRMYWJlbGAgcHJvcGVydHkuXG4gICAgICovXG4gICAgYWx3YXlzRmxvYXRMYWJlbDoge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX0sXG5cbiAgICAvKipcbiAgICAgKiBTZXQgdG8gdHJ1ZSB0byBhdXRvLXZhbGlkYXRlIHRoZSBpbnB1dCB2YWx1ZS4gSWYgeW91J3JlIHVzaW5nXG4gICAgICogUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlIGVsZW1lbnQsIGJpbmRcbiAgICAgKiB0aGlzIHRvIHRoZSBgPHBhcGVyLWlucHV0LWNvbnRhaW5lcj5gJ3MgYGF1dG9WYWxpZGF0ZWAgcHJvcGVydHkuXG4gICAgICovXG4gICAgYXV0b1ZhbGlkYXRlOiB7dHlwZTogQm9vbGVhbiwgdmFsdWU6IGZhbHNlfSxcblxuICAgIC8qKlxuICAgICAqIE5hbWUgb2YgdGhlIHZhbGlkYXRvciB0byB1c2UuIElmIHlvdSdyZSB1c2luZyBQYXBlcklucHV0QmVoYXZpb3IgdG9cbiAgICAgKiBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZSBlbGVtZW50LCBiaW5kIHRoaXMgdG9cbiAgICAgKiB0aGUgYDxpbnB1dCBpcz1cImlyb24taW5wdXRcIj5gJ3MgYHZhbGlkYXRvcmAgcHJvcGVydHkuXG4gICAgICovXG4gICAgdmFsaWRhdG9yOiB7dHlwZTogU3RyaW5nfSxcblxuICAgIC8vIEhUTUxJbnB1dEVsZW1lbnQgYXR0cmlidXRlcyBmb3IgYmluZGluZyBpZiBuZWVkZWRcblxuICAgIC8qKlxuICAgICAqIElmIHlvdSdyZSB1c2luZyBQYXBlcklucHV0QmVoYXZpb3IgdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2VcbiAgICAgKiBlbGVtZW50LCBiaW5kIHRoaXMgdG8gdGhlIGA8aW5wdXQgaXM9XCJpcm9uLWlucHV0XCI+YCdzIGBhdXRvY29tcGxldGVgXG4gICAgICogcHJvcGVydHkuXG4gICAgICovXG4gICAgYXV0b2NvbXBsZXRlOiB7dHlwZTogU3RyaW5nLCB2YWx1ZTogJ29mZid9LFxuXG4gICAgLyoqXG4gICAgICogSWYgeW91J3JlIHVzaW5nIFBhcGVySW5wdXRCZWhhdmlvciB0byBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZVxuICAgICAqIGVsZW1lbnQsIGJpbmQgdGhpcyB0byB0aGUgYDxpbnB1dCBpcz1cImlyb24taW5wdXRcIj5gJ3MgYGF1dG9mb2N1c2BcbiAgICAgKiBwcm9wZXJ0eS5cbiAgICAgKlxuICAgICAqIEB0eXBlIHshYm9vbGVhbn1cbiAgICAgKi9cbiAgICBhdXRvZm9jdXM6IHt0eXBlOiBCb29sZWFuLCBvYnNlcnZlcjogJ19hdXRvZm9jdXNDaGFuZ2VkJ30sXG5cbiAgICAvKipcbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlXG4gICAgICogZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgaW5wdXRtb2RlYFxuICAgICAqIHByb3BlcnR5LlxuICAgICAqL1xuICAgIGlucHV0bW9kZToge3R5cGU6IFN0cmluZ30sXG5cbiAgICAvKipcbiAgICAgKiBUaGUgbWluaW11bSBsZW5ndGggb2YgdGhlIGlucHV0IHZhbHVlLlxuICAgICAqIElmIHlvdSdyZSB1c2luZyBQYXBlcklucHV0QmVoYXZpb3IgdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2VcbiAgICAgKiBlbGVtZW50LCBiaW5kIHRoaXMgdG8gdGhlIGA8aW5wdXQgaXM9XCJpcm9uLWlucHV0XCI+YCdzIGBtaW5sZW5ndGhgXG4gICAgICogcHJvcGVydHkuXG4gICAgICovXG4gICAgbWlubGVuZ3RoOiB7dHlwZTogTnVtYmVyfSxcblxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgaW5wdXQgdmFsdWUuXG4gICAgICogSWYgeW91J3JlIHVzaW5nIFBhcGVySW5wdXRCZWhhdmlvciB0byBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZVxuICAgICAqIGVsZW1lbnQsIGJpbmQgdGhpcyB0byB0aGUgYDxpbnB1dCBpcz1cImlyb24taW5wdXRcIj5gJ3MgYG1heGxlbmd0aGBcbiAgICAgKiBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBtYXhsZW5ndGg6IHt0eXBlOiBOdW1iZXJ9LFxuXG4gICAgLyoqXG4gICAgICogVGhlIG1pbmltdW0gKG51bWVyaWMgb3IgZGF0ZS10aW1lKSBpbnB1dCB2YWx1ZS5cbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlXG4gICAgICogZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgbWluYCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBtaW46IHt0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gKG51bWVyaWMgb3IgZGF0ZS10aW1lKSBpbnB1dCB2YWx1ZS5cbiAgICAgKiBDYW4gYmUgYSBTdHJpbmcgKGUuZy4gYFwiMjAwMC0wMS0wMVwiYCkgb3IgYSBOdW1iZXIgKGUuZy4gYDJgKS5cbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlXG4gICAgICogZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgbWF4YCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBtYXg6IHt0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogTGltaXRzIHRoZSBudW1lcmljIG9yIGRhdGUtdGltZSBpbmNyZW1lbnRzLlxuICAgICAqIElmIHlvdSdyZSB1c2luZyBQYXBlcklucHV0QmVoYXZpb3IgdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2VcbiAgICAgKiBlbGVtZW50LCBiaW5kIHRoaXMgdG8gdGhlIGA8aW5wdXQgaXM9XCJpcm9uLWlucHV0XCI+YCdzIGBzdGVwYCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBzdGVwOiB7dHlwZTogU3RyaW5nfSxcblxuICAgIC8qKlxuICAgICAqIElmIHlvdSdyZSB1c2luZyBQYXBlcklucHV0QmVoYXZpb3IgdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2VcbiAgICAgKiBlbGVtZW50LCBiaW5kIHRoaXMgdG8gdGhlIGA8aW5wdXQgaXM9XCJpcm9uLWlucHV0XCI+YCdzIGBuYW1lYCBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICBuYW1lOiB7dHlwZTogU3RyaW5nfSxcblxuICAgIC8qKlxuICAgICAqIEEgcGxhY2Vob2xkZXIgc3RyaW5nIGluIGFkZGl0aW9uIHRvIHRoZSBsYWJlbC4gSWYgdGhpcyBpcyBzZXQsIHRoZSBsYWJlbFxuICAgICAqIHdpbGwgYWx3YXlzIGZsb2F0LlxuICAgICAqL1xuICAgIHBsYWNlaG9sZGVyOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAvLyBuZWVkIHRvIHNldCBhIGRlZmF1bHQgc28gX2NvbXB1dGVBbHdheXNGbG9hdExhYmVsIGlzIHJ1blxuICAgICAgdmFsdWU6ICcnXG4gICAgfSxcblxuICAgIC8qKlxuICAgICAqIElmIHlvdSdyZSB1c2luZyBQYXBlcklucHV0QmVoYXZpb3IgdG8gaW1wbGVtZW50IHlvdXIgb3duIHBhcGVyLWlucHV0LWxpa2VcbiAgICAgKiBlbGVtZW50LCBiaW5kIHRoaXMgdG8gdGhlIGA8aW5wdXQgaXM9XCJpcm9uLWlucHV0XCI+YCdzIGByZWFkb25seWBcbiAgICAgKiBwcm9wZXJ0eS5cbiAgICAgKi9cbiAgICByZWFkb25seToge3R5cGU6IEJvb2xlYW4sIHZhbHVlOiBmYWxzZX0sXG5cbiAgICAvKipcbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlXG4gICAgICogZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgc2l6ZWAgcHJvcGVydHkuXG4gICAgICovXG4gICAgc2l6ZToge3R5cGU6IE51bWJlcn0sXG5cbiAgICAvLyBOb25zdGFuZGFyZCBhdHRyaWJ1dGVzIGZvciBiaW5kaW5nIGlmIG5lZWRlZFxuXG4gICAgLyoqXG4gICAgICogSWYgeW91J3JlIHVzaW5nIFBhcGVySW5wdXRCZWhhdmlvciB0byBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZVxuICAgICAqIGVsZW1lbnQsIGJpbmQgdGhpcyB0byB0aGUgYDxpbnB1dCBpcz1cImlyb24taW5wdXRcIj5gJ3MgYGF1dG9jYXBpdGFsaXplYFxuICAgICAqIHByb3BlcnR5LlxuICAgICAqXG4gICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgKi9cbiAgICBhdXRvY2FwaXRhbGl6ZToge3R5cGU6IFN0cmluZywgdmFsdWU6ICdub25lJ30sXG5cbiAgICAvKipcbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlXG4gICAgICogZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgYXV0b2NvcnJlY3RgXG4gICAgICogcHJvcGVydHkuXG4gICAgICovXG4gICAgYXV0b2NvcnJlY3Q6IHt0eXBlOiBTdHJpbmcsIHZhbHVlOiAnb2ZmJ30sXG5cbiAgICAvKipcbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlXG4gICAgICogZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgYXV0b3NhdmVgXG4gICAgICogcHJvcGVydHksIHVzZWQgd2l0aCB0eXBlPXNlYXJjaC5cbiAgICAgKi9cbiAgICBhdXRvc2F2ZToge3R5cGU6IFN0cmluZ30sXG5cbiAgICAvKipcbiAgICAgKiBJZiB5b3UncmUgdXNpbmcgUGFwZXJJbnB1dEJlaGF2aW9yIHRvIGltcGxlbWVudCB5b3VyIG93biBwYXBlci1pbnB1dC1saWtlXG4gICAgICogZWxlbWVudCwgYmluZCB0aGlzIHRvIHRoZSBgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgcmVzdWx0c2AgcHJvcGVydHksXG4gICAgICogdXNlZCB3aXRoIHR5cGU9c2VhcmNoLlxuICAgICAqL1xuICAgIHJlc3VsdHM6IHt0eXBlOiBOdW1iZXJ9LFxuXG4gICAgLyoqXG4gICAgICogSWYgeW91J3JlIHVzaW5nIFBhcGVySW5wdXRCZWhhdmlvciB0byBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZVxuICAgICAqIGVsZW1lbnQsIGJpbmQgdGhpcyB0byB0aGUgYDxpbnB1dCBpcz1cImlyb24taW5wdXRcIj5gJ3MgYGFjY2VwdGAgcHJvcGVydHksXG4gICAgICogdXNlZCB3aXRoIHR5cGU9ZmlsZS5cbiAgICAgKi9cbiAgICBhY2NlcHQ6IHt0eXBlOiBTdHJpbmd9LFxuXG4gICAgLyoqXG4gICAgICogSWYgeW91J3JlIHVzaW5nIFBhcGVySW5wdXRCZWhhdmlvciB0byBpbXBsZW1lbnQgeW91ciBvd24gcGFwZXItaW5wdXQtbGlrZVxuICAgICAqIGVsZW1lbnQsIGJpbmQgdGhpcyB0byB0aGVgPGlucHV0IGlzPVwiaXJvbi1pbnB1dFwiPmAncyBgbXVsdGlwbGVgIHByb3BlcnR5LFxuICAgICAqIHVzZWQgd2l0aCB0eXBlPWZpbGUuXG4gICAgICovXG4gICAgbXVsdGlwbGU6IHt0eXBlOiBCb29sZWFufSxcblxuICAgIC8qKiBAcHJpdmF0ZSAqL1xuICAgIF9hcmlhRGVzY3JpYmVkQnk6IHt0eXBlOiBTdHJpbmcsIHZhbHVlOiAnJ30sXG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfYXJpYUxhYmVsbGVkQnk6IHt0eXBlOiBTdHJpbmcsIHZhbHVlOiAnJ30sXG5cbiAgICAvKiogQHByaXZhdGUgKi9cbiAgICBfaW5wdXRJZDoge3R5cGU6IFN0cmluZywgdmFsdWU6ICcnfVxuICB9LFxuXG4gIGxpc3RlbmVyczoge1xuICAgICdhZGRvbi1hdHRhY2hlZCc6ICdfb25BZGRvbkF0dGFjaGVkJyxcbiAgfSxcblxuICAvKipcbiAgICogQHR5cGUgeyFPYmplY3R9XG4gICAqL1xuICBrZXlCaW5kaW5nczogeydzaGlmdCt0YWI6a2V5ZG93bic6ICdfb25TaGlmdFRhYkRvd24nfSxcblxuICAvKiogQHByaXZhdGUgKi9cbiAgaG9zdEF0dHJpYnV0ZXM6IHt0YWJpbmRleDogMH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSByZWZlcmVuY2UgdG8gdGhlIGlucHV0IGVsZW1lbnQuXG4gICAqIEByZXR1cm4geyFIVE1MRWxlbWVudH1cbiAgICovXG4gIGdldCBpbnB1dEVsZW1lbnQoKSB7XG4gICAgLy8gQ2hyb21lIGdlbmVyYXRlcyBhdWRpdCBlcnJvcnMgaWYgYW4gPGlucHV0IHR5cGU9XCJwYXNzd29yZFwiPiBoYXMgYVxuICAgIC8vIGR1cGxpY2F0ZSBJRCwgd2hpY2ggaXMgYWxtb3N0IGFsd2F5cyB0cnVlIGluIFNoYWR5IERPTS4gR2VuZXJhdGVcbiAgICAvLyBhIHVuaXF1ZSBJRCBpbnN0ZWFkLlxuICAgIGlmICghdGhpcy4kKSB7XG4gICAgICB0aGlzLiQgPSB7fVxuICAgIH1cbiAgICBpZiAoIXRoaXMuJC5pbnB1dCkge1xuICAgICAgdGhpcy5fZ2VuZXJhdGVJbnB1dElkKCk7XG4gICAgICB0aGlzLiQuaW5wdXQgPSB0aGlzLiQkKCcjJyArIHRoaXMuX2lucHV0SWQpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy4kLmlucHV0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcmVmZXJlbmNlIHRvIHRoZSBmb2N1c2FibGUgZWxlbWVudC5cbiAgICogQHJldHVybiB7IUhUTUxFbGVtZW50fVxuICAgKi9cbiAgZ2V0IF9mb2N1c2FibGVFbGVtZW50KCkge1xuICAgIHJldHVybiB0aGlzLmlucHV0RWxlbWVudDtcbiAgfSxcblxuICAvKiogQG92ZXJyaWRlICovXG4gIGNyZWF0ZWQ6IGZ1bmN0aW9uKCkge1xuICAgIC8vIFRoZXNlIHR5cGVzIGhhdmUgc29tZSBkZWZhdWx0IHBsYWNlaG9sZGVyIHRleHQ7IG92ZXJsYXBwaW5nXG4gICAgLy8gdGhlIGxhYmVsIG9uIHRvcCBvZiBpdCBsb29rcyB0ZXJyaWJsZS4gQXV0by1mbG9hdCB0aGUgbGFiZWwgaW4gdGhpcyBjYXNlLlxuICAgIHRoaXMuX3R5cGVzVGhhdEhhdmVUZXh0ID1cbiAgICAgICAgWydkYXRlJywgJ2RhdGV0aW1lJywgJ2RhdGV0aW1lLWxvY2FsJywgJ21vbnRoJywgJ3RpbWUnLCAnd2VlaycsICdmaWxlJ107XG4gIH0sXG5cbiAgLyoqIEBvdmVycmlkZSAqL1xuICBhdHRhY2hlZDogZnVuY3Rpb24oKSB7XG4gICAgdGhpcy5fdXBkYXRlQXJpYUxhYmVsbGVkQnkoKTtcblxuICAgIC8vIEluIHRoZSAyLjAgdmVyc2lvbiBvZiB0aGUgZWxlbWVudCwgdGhpcyBpcyBoYW5kbGVkIGluIGBvbklyb25JbnB1dFJlYWR5YCxcbiAgICAvLyBpLmUuIGFmdGVyIHRoZSBuYXRpdmUgaW5wdXQgaGFzIGZpbmlzaGVkIGRpc3RyaWJ1dGluZy4gSW4gdGhlIDEuMFxuICAgIC8vIHZlcnNpb24sIHRoZSBpbnB1dCBpcyBpbiB0aGUgc2hhZG93IHRyZWUsIHNvIGl0J3MgYWxyZWFkeSBhdmFpbGFibGUuXG4gICAgaWYgKCFQb2x5bWVyRWxlbWVudCAmJiB0aGlzLmlucHV0RWxlbWVudCAmJlxuICAgICAgICB0aGlzLl90eXBlc1RoYXRIYXZlVGV4dC5pbmRleE9mKHRoaXMuaW5wdXRFbGVtZW50LnR5cGUpICE9PSAtMSkge1xuICAgICAgdGhpcy5hbHdheXNGbG9hdExhYmVsID0gdHJ1ZTtcbiAgICB9XG4gIH0sXG5cbiAgX2FwcGVuZFN0cmluZ1dpdGhTcGFjZTogZnVuY3Rpb24oc3RyLCBtb3JlKSB7XG4gICAgaWYgKHN0cikge1xuICAgICAgc3RyID0gc3RyICsgJyAnICsgbW9yZTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3RyID0gbW9yZTtcbiAgICB9XG4gICAgcmV0dXJuIHN0cjtcbiAgfSxcblxuICBfb25BZGRvbkF0dGFjaGVkOiBmdW5jdGlvbihldmVudCkge1xuICAgIHZhciB0YXJnZXQgPSBkb20oZXZlbnQpLnJvb3RUYXJnZXQ7XG4gICAgaWYgKHRhcmdldC5pZCkge1xuICAgICAgdGhpcy5fYXJpYURlc2NyaWJlZEJ5ID1cbiAgICAgICAgICB0aGlzLl9hcHBlbmRTdHJpbmdXaXRoU3BhY2UodGhpcy5fYXJpYURlc2NyaWJlZEJ5LCB0YXJnZXQuaWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaWQgPSAncGFwZXItaW5wdXQtYWRkLW9uLScgKyBQYXBlcklucHV0SGVscGVyLk5leHRBZGRvbklEKys7XG4gICAgICB0YXJnZXQuaWQgPSBpZDtcbiAgICAgIHRoaXMuX2FyaWFEZXNjcmliZWRCeSA9XG4gICAgICAgICAgdGhpcy5fYXBwZW5kU3RyaW5nV2l0aFNwYWNlKHRoaXMuX2FyaWFEZXNjcmliZWRCeSwgaWQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVmFsaWRhdGVzIHRoZSBpbnB1dCBlbGVtZW50IGFuZCBzZXRzIGFuIGVycm9yIHN0eWxlIGlmIG5lZWRlZC5cbiAgICpcbiAgICogQHJldHVybiB7Ym9vbGVhbn1cbiAgICovXG4gIHZhbGlkYXRlOiBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dEVsZW1lbnQudmFsaWRhdGUoKTtcbiAgfSxcblxuICAvKipcbiAgICogRm9yd2FyZCBmb2N1cyB0byBpbnB1dEVsZW1lbnQuIE92ZXJyaWRlbiBmcm9tIElyb25Db250cm9sU3RhdGUuXG4gICAqL1xuICBfZm9jdXNCbHVySGFuZGxlcjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBJcm9uQ29udHJvbFN0YXRlLl9mb2N1c0JsdXJIYW5kbGVyLmNhbGwodGhpcywgZXZlbnQpO1xuXG4gICAgLy8gRm9yd2FyZCB0aGUgZm9jdXMgdG8gdGhlIG5lc3RlZCBpbnB1dC5cbiAgICBpZiAodGhpcy5mb2N1c2VkICYmICF0aGlzLl9zaGlmdFRhYlByZXNzZWQgJiYgdGhpcy5fZm9jdXNhYmxlRWxlbWVudCkge1xuICAgICAgdGhpcy5fZm9jdXNhYmxlRWxlbWVudC5mb2N1cygpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSGFuZGxlciB0aGF0IGlzIGNhbGxlZCB3aGVuIGEgc2hpZnQrdGFiIGtleXByZXNzIGlzIGRldGVjdGVkIGJ5IHRoZSBtZW51LlxuICAgKlxuICAgKiBAcGFyYW0ge0N1c3RvbUV2ZW50fSBldmVudCBBIGtleSBjb21iaW5hdGlvbiBldmVudC5cbiAgICovXG4gIF9vblNoaWZ0VGFiRG93bjogZnVuY3Rpb24oZXZlbnQpIHtcbiAgICB2YXIgb2xkVGFiSW5kZXggPSB0aGlzLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKTtcbiAgICB0aGlzLl9zaGlmdFRhYlByZXNzZWQgPSB0cnVlO1xuICAgIHRoaXMuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsICctMScpO1xuICAgIHRoaXMuYXN5bmMoZnVuY3Rpb24oKSB7XG4gICAgICB0aGlzLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCBvbGRUYWJJbmRleCk7XG4gICAgICB0aGlzLl9zaGlmdFRhYlByZXNzZWQgPSBmYWxzZTtcbiAgICB9LCAxKTtcbiAgfSxcblxuICAvKipcbiAgICogSWYgYGF1dG9WYWxpZGF0ZWAgaXMgdHJ1ZSwgdGhlbiB2YWxpZGF0ZXMgdGhlIGVsZW1lbnQuXG4gICAqL1xuICBfaGFuZGxlQXV0b1ZhbGlkYXRlOiBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5hdXRvVmFsaWRhdGUpXG4gICAgICB0aGlzLnZhbGlkYXRlKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlc3RvcmVzIHRoZSBjdXJzb3IgdG8gaXRzIG9yaWdpbmFsIHBvc2l0aW9uIGFmdGVyIHVwZGF0aW5nIHRoZSB2YWx1ZS5cbiAgICogQHBhcmFtIHtzdHJpbmd9IG5ld1ZhbHVlIFRoZSB2YWx1ZSB0aGF0IHNob3VsZCBiZSBzYXZlZC5cbiAgICovXG4gIHVwZGF0ZVZhbHVlQW5kUHJlc2VydmVDYXJldDogZnVuY3Rpb24obmV3VmFsdWUpIHtcbiAgICAvLyBOb3QgYWxsIGVsZW1lbnRzIG1pZ2h0IGhhdmUgc2VsZWN0aW9uLCBhbmQgZXZlbiBpZiB0aGV5IGhhdmUgdGhlXG4gICAgLy8gcmlnaHQgcHJvcGVydGllcywgYWNjZXNzaW5nIHRoZW0gbWlnaHQgdGhyb3cgYW4gZXhjZXB0aW9uIChsaWtlIGZvclxuICAgIC8vIDxpbnB1dCB0eXBlPW51bWJlcj4pXG4gICAgdHJ5IHtcbiAgICAgIHZhciBzdGFydCA9IHRoaXMuaW5wdXRFbGVtZW50LnNlbGVjdGlvblN0YXJ0O1xuICAgICAgdGhpcy52YWx1ZSA9IG5ld1ZhbHVlO1xuXG4gICAgICAvLyBUaGUgY3Vyc29yIGF1dG9tYXRpY2FsbHkganVtcHMgdG8gdGhlIGVuZCBhZnRlciByZS1zZXR0aW5nIHRoZSB2YWx1ZSxcbiAgICAgIC8vIHNvIHJlc3RvcmUgaXQgdG8gaXRzIG9yaWdpbmFsIHBvc2l0aW9uLlxuICAgICAgdGhpcy5pbnB1dEVsZW1lbnQuc2VsZWN0aW9uU3RhcnQgPSBzdGFydDtcbiAgICAgIHRoaXMuaW5wdXRFbGVtZW50LnNlbGVjdGlvbkVuZCA9IHN0YXJ0O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIC8vIEp1c3Qgc2V0IHRoZSB2YWx1ZSBhbmQgZ2l2ZSB1cCBvbiB0aGUgY2FyZXQuXG4gICAgICB0aGlzLnZhbHVlID0gbmV3VmFsdWU7XG4gICAgfVxuICB9LFxuXG4gIF9jb21wdXRlQWx3YXlzRmxvYXRMYWJlbDogZnVuY3Rpb24oYWx3YXlzRmxvYXRMYWJlbCwgcGxhY2Vob2xkZXIpIHtcbiAgICByZXR1cm4gcGxhY2Vob2xkZXIgfHwgYWx3YXlzRmxvYXRMYWJlbDtcbiAgfSxcblxuICBfdXBkYXRlQXJpYUxhYmVsbGVkQnk6IGZ1bmN0aW9uKCkge1xuICAgIHZhciBsYWJlbCA9IGRvbSh0aGlzLnJvb3QpLnF1ZXJ5U2VsZWN0b3IoJ2xhYmVsJyk7XG4gICAgaWYgKCFsYWJlbCkge1xuICAgICAgdGhpcy5fYXJpYUxhYmVsbGVkQnkgPSAnJztcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGxhYmVsbGVkQnk7XG4gICAgaWYgKGxhYmVsLmlkKSB7XG4gICAgICBsYWJlbGxlZEJ5ID0gbGFiZWwuaWQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGxhYmVsbGVkQnkgPSAncGFwZXItaW5wdXQtbGFiZWwtJyArIFBhcGVySW5wdXRIZWxwZXIuTmV4dExhYmVsSUQrKztcbiAgICAgIGxhYmVsLmlkID0gbGFiZWxsZWRCeTtcbiAgICB9XG4gICAgdGhpcy5fYXJpYUxhYmVsbGVkQnkgPSBsYWJlbGxlZEJ5O1xuICB9LFxuXG4gIF9nZW5lcmF0ZUlucHV0SWQ6IGZ1bmN0aW9uKCkge1xuICAgIGlmICghdGhpcy5faW5wdXRJZCB8fCB0aGlzLl9pbnB1dElkID09PSAnJykge1xuICAgICAgdGhpcy5faW5wdXRJZCA9ICdpbnB1dC0nICsgUGFwZXJJbnB1dEhlbHBlci5OZXh0SW5wdXRJRCsrO1xuICAgIH1cbiAgfSxcblxuICBfb25DaGFuZ2U6IGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgLy8gSW4gdGhlIFNoYWRvdyBET00sIHRoZSBgY2hhbmdlYCBldmVudCBpcyBub3QgbGVha2VkIGludG8gdGhlXG4gICAgLy8gYW5jZXN0b3IgdHJlZSwgc28gd2UgbXVzdCBkbyB0aGlzIG1hbnVhbGx5LlxuICAgIC8vIFNlZVxuICAgIC8vIGh0dHBzOi8vdzNjLmdpdGh1Yi5pby93ZWJjb21wb25lbnRzL3NwZWMvc2hhZG93LyNldmVudHMtdGhhdC1hcmUtbm90LWxlYWtlZC1pbnRvLWFuY2VzdG9yLXRyZWVzLlxuICAgIGlmICh0aGlzLnNoYWRvd1Jvb3QpIHtcbiAgICAgIHRoaXMuZmlyZShcbiAgICAgICAgICBldmVudC50eXBlLFxuICAgICAgICAgIHtzb3VyY2VFdmVudDogZXZlbnR9LFxuICAgICAgICAgIHtub2RlOiB0aGlzLCBidWJibGVzOiBldmVudC5idWJibGVzLCBjYW5jZWxhYmxlOiBldmVudC5jYW5jZWxhYmxlfSk7XG4gICAgfVxuICB9LFxuXG4gIF9hdXRvZm9jdXNDaGFuZ2VkOiBmdW5jdGlvbigpIHtcbiAgICAvLyBGaXJlZm94IGRvZXNuJ3QgcmVzcGVjdCB0aGUgYXV0b2ZvY3VzIGF0dHJpYnV0ZSBpZiBpdCdzIGFwcGxpZWQgYWZ0ZXJcbiAgICAvLyB0aGUgcGFnZSBpcyBsb2FkZWQgKENocm9tZS9XZWJLaXQgZG8gcmVzcGVjdCBpdCksIHByZXZlbnRpbmcgYW5cbiAgICAvLyBhdXRvZm9jdXMgYXR0cmlidXRlIHNwZWNpZmllZCBpbiBtYXJrdXAgZnJvbSB0YWtpbmcgZWZmZWN0IHdoZW4gdGhlXG4gICAgLy8gZWxlbWVudCBpcyB1cGdyYWRlZC4gQXMgYSB3b3JrYXJvdW5kLCBpZiB0aGUgYXV0b2ZvY3VzIHByb3BlcnR5IGlzIHNldCxcbiAgICAvLyBhbmQgdGhlIGZvY3VzIGhhc24ndCBhbHJlYWR5IGJlZW4gbW92ZWQgZWxzZXdoZXJlLCB3ZSB0YWtlIGZvY3VzLlxuICAgIGlmICh0aGlzLmF1dG9mb2N1cyAmJiB0aGlzLl9mb2N1c2FibGVFbGVtZW50KSB7XG4gICAgICAvLyBJbiBJRSAxMSwgdGhlIGRlZmF1bHQgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gYmUgdGhlIHBhZ2Unc1xuICAgICAgLy8gb3V0ZXJtb3N0IGh0bWwgZWxlbWVudCwgYnV0IHRoZXJlIGFyZSBhbHNvIGNhc2VzICh1bmRlciB0aGVcbiAgICAgIC8vIHBvbHlmaWxsPykgaW4gd2hpY2ggdGhlIGFjdGl2ZUVsZW1lbnQgaXMgbm90IGEgcmVhbCBIVE1MRWxlbWVudCwgYnV0XG4gICAgICAvLyBqdXN0IGEgcGxhaW4gb2JqZWN0LiBXZSBpZGVudGlmeSB0aGUgbGF0dGVyIGNhc2UgYXMgaGF2aW5nIG5vIHZhbGlkXG4gICAgICAvLyBhY3RpdmVFbGVtZW50LlxuICAgICAgdmFyIGFjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuICAgICAgdmFyIGlzQWN0aXZlRWxlbWVudFZhbGlkID0gYWN0aXZlRWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50O1xuXG4gICAgICAvLyBIYXMgc29tZSBvdGhlciBlbGVtZW50IGhhcyBhbHJlYWR5IHRha2VuIHRoZSBmb2N1cz9cbiAgICAgIHZhciBpc1NvbWVFbGVtZW50QWN0aXZlID0gaXNBY3RpdmVFbGVtZW50VmFsaWQgJiZcbiAgICAgICAgICBhY3RpdmVFbGVtZW50ICE9PSBkb2N1bWVudC5ib2R5ICYmXG4gICAgICAgICAgYWN0aXZlRWxlbWVudCAhPT0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50OyAvKiBJRSAxMSAqL1xuICAgICAgaWYgKCFpc1NvbWVFbGVtZW50QWN0aXZlKSB7XG4gICAgICAgIC8vIE5vIHNwZWNpZmljIGVsZW1lbnQgaGFzIHRha2VuIHRoZSBmb2N1cyB5ZXQsIHNvIHdlIGNhbiB0YWtlIGl0LlxuICAgICAgICB0aGlzLl9mb2N1c2FibGVFbGVtZW50LmZvY3VzKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKiogQHBvbHltZXJCZWhhdmlvciAqL1xuZXhwb3J0IGNvbnN0IFBhcGVySW5wdXRCZWhhdmlvciA9XG4gICAgW0lyb25Db250cm9sU3RhdGUsIElyb25BMTF5S2V5c0JlaGF2aW9yLCBQYXBlcklucHV0QmVoYXZpb3JJbXBsXTtcbiIsICIvKipcbkBsaWNlbnNlXG5Db3B5cmlnaHQgKGMpIDIwMTUgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0XG5odHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHQgVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdFxuaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0IFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZVxuZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHQgQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXNcbnBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnRcbmZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuKi9cbmltcG9ydCAnQHBvbHltZXIvcG9seW1lci9wb2x5bWVyLWxlZ2FjeS5qcyc7XG5pbXBvcnQgJ0Bwb2x5bWVyL2lyb24taW5wdXQvaXJvbi1pbnB1dC5qcyc7XG5pbXBvcnQgJy4vcGFwZXItaW5wdXQtY2hhci1jb3VudGVyLmpzJztcbmltcG9ydCAnLi9wYXBlci1pbnB1dC1jb250YWluZXIuanMnO1xuaW1wb3J0ICcuL3BhcGVyLWlucHV0LWVycm9yLmpzJztcblxuaW1wb3J0IHtJcm9uRm9ybUVsZW1lbnRCZWhhdmlvcn0gZnJvbSAnQHBvbHltZXIvaXJvbi1mb3JtLWVsZW1lbnQtYmVoYXZpb3IvaXJvbi1mb3JtLWVsZW1lbnQtYmVoYXZpb3IuanMnO1xuaW1wb3J0IHtEb21Nb2R1bGV9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL2VsZW1lbnRzL2RvbS1tb2R1bGUuanMnO1xuaW1wb3J0IHtQb2x5bWVyfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvcG9seW1lci1mbi5qcyc7XG5pbXBvcnQge2h0bWx9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvbGliL3V0aWxzL2h0bWwtdGFnLmpzJztcbmltcG9ydCB7UGFwZXJJbnB1dEJlaGF2aW9yfSBmcm9tICcuL3BhcGVyLWlucHV0LWJlaGF2aW9yLmpzJztcblxuLyoqXG5NYXRlcmlhbCBkZXNpZ246IFtUZXh0XG5maWVsZHNdKGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vZGVzaWduL3NwZWMvY29tcG9uZW50cy90ZXh0LWZpZWxkcy5odG1sKVxuXG5gPHBhcGVyLWlucHV0PmAgaXMgYSBzaW5nbGUtbGluZSB0ZXh0IGZpZWxkIHdpdGggTWF0ZXJpYWwgRGVzaWduIHN0eWxpbmcuXG5cbiAgICA8cGFwZXItaW5wdXQgbGFiZWw9XCJJbnB1dCBsYWJlbFwiPjwvcGFwZXItaW5wdXQ+XG5cbkl0IG1heSBpbmNsdWRlIGFuIG9wdGlvbmFsIGVycm9yIG1lc3NhZ2Ugb3IgY2hhcmFjdGVyIGNvdW50ZXIuXG5cbiAgICA8cGFwZXItaW5wdXQgZXJyb3ItbWVzc2FnZT1cIkludmFsaWQgaW5wdXQhXCIgbGFiZWw9XCJJbnB1dFxuICAgIGxhYmVsXCI+PC9wYXBlci1pbnB1dD4gPHBhcGVyLWlucHV0IGNoYXItY291bnRlciBsYWJlbD1cIklucHV0XG4gICAgbGFiZWxcIj48L3BhcGVyLWlucHV0PlxuXG5JdCBjYW4gYWxzbyBpbmNsdWRlIGN1c3RvbSBwcmVmaXggb3Igc3VmZml4IGVsZW1lbnRzLCB3aGljaCBhcmUgZGlzcGxheWVkXG5iZWZvcmUgb3IgYWZ0ZXIgdGhlIHRleHQgaW5wdXQgaXRzZWxmLiBJbiBvcmRlciBmb3IgYW4gZWxlbWVudCB0byBiZVxuY29uc2lkZXJlZCBhcyBhIHByZWZpeCwgaXQgbXVzdCBoYXZlIHRoZSBgcHJlZml4YCBhdHRyaWJ1dGUgKGFuZCBzaW1pbGFybHlcbmZvciBgc3VmZml4YCkuXG5cbiAgICA8cGFwZXItaW5wdXQgbGFiZWw9XCJ0b3RhbFwiPlxuICAgICAgPGRpdiBwcmVmaXg+JDwvZGl2PlxuICAgICAgPHBhcGVyLWljb24tYnV0dG9uIHNsb3Q9XCJzdWZmaXhcIiBpY29uPVwiY2xlYXJcIj48L3BhcGVyLWljb24tYnV0dG9uPlxuICAgIDwvcGFwZXItaW5wdXQ+XG5cbkEgYHBhcGVyLWlucHV0YCBjYW4gdXNlIHRoZSBuYXRpdmUgYHR5cGU9c2VhcmNoYCBvciBgdHlwZT1maWxlYCBmZWF0dXJlcy5cbkhvd2V2ZXIsIHNpbmNlIHdlIGNhbid0IGNvbnRyb2wgdGhlIG5hdGl2ZSBzdHlsaW5nIG9mIHRoZSBpbnB1dCAoc2VhcmNoIGljb24sXG5maWxlIGJ1dHRvbiwgZGF0ZSBwbGFjZWhvbGRlciwgZXRjLiksIGluIHRoZXNlIGNhc2VzIHRoZSBsYWJlbCB3aWxsIGJlXG5hdXRvbWF0aWNhbGx5IGZsb2F0ZWQuIFRoZSBgcGxhY2Vob2xkZXJgIGF0dHJpYnV0ZSBjYW4gc3RpbGwgYmUgdXNlZCBmb3JcbmFkZGl0aW9uYWwgaW5mb3JtYXRpb25hbCB0ZXh0LlxuXG4gICAgPHBhcGVyLWlucHV0IGxhYmVsPVwic2VhcmNoIVwiIHR5cGU9XCJzZWFyY2hcIlxuICAgICAgICBwbGFjZWhvbGRlcj1cInNlYXJjaCBmb3IgY2F0c1wiIGF1dG9zYXZlPVwidGVzdFwiIHJlc3VsdHM9XCI1XCI+XG4gICAgPC9wYXBlci1pbnB1dD5cblxuU2VlIGBQb2x5bWVyLlBhcGVySW5wdXRCZWhhdmlvcmAgZm9yIG1vcmUgQVBJIGRvY3MuXG5cbiMjIyBGb2N1c1xuXG5UbyBmb2N1cyBhIHBhcGVyLWlucHV0LCB5b3UgY2FuIGNhbGwgdGhlIG5hdGl2ZSBgZm9jdXMoKWAgbWV0aG9kIGFzIGxvbmcgYXMgdGhlXG5wYXBlciBpbnB1dCBoYXMgYSB0YWIgaW5kZXguIFNpbWlsYXJseSwgYGJsdXIoKWAgd2lsbCBibHVyIHRoZSBlbGVtZW50LlxuXG4jIyMgU3R5bGluZ1xuXG5TZWUgYFBvbHltZXIuUGFwZXJJbnB1dENvbnRhaW5lcmAgZm9yIGEgbGlzdCBvZiBjdXN0b20gcHJvcGVydGllcyB1c2VkIHRvXG5zdHlsZSB0aGlzIGVsZW1lbnQuXG5cblRoZSBmb2xsb3dpbmcgY3VzdG9tIHByb3BlcnRpZXMgYW5kIG1peGlucyBhcmUgYXZhaWxhYmxlIGZvciBzdHlsaW5nOlxuXG5DdXN0b20gcHJvcGVydHkgfCBEZXNjcmlwdGlvbiB8IERlZmF1bHRcbi0tLS0tLS0tLS0tLS0tLS18LS0tLS0tLS0tLS0tLXwtLS0tLS0tLS0tXG5gLS1wYXBlci1pbnB1dC1jb250YWluZXItbXMtY2xlYXJgIHwgTWl4aW4gYXBwbGllZCB0byB0aGUgSW50ZXJuZXQgRXhwbG9yZXIgcmV2ZWFsIGJ1dHRvbiAodGhlIGV5ZWJhbGwpIHwge31cblxuQGVsZW1lbnQgcGFwZXItaW5wdXRcbkBkZW1vIGRlbW8vaW5kZXguaHRtbFxuKi9cblBvbHltZXIoe1xuICBpczogJ3BhcGVyLWlucHV0JyxcbiAgLyoqIEBvdmVycmlkZSAqL1xuICBfdGVtcGxhdGU6IGh0bWxgXG4gICAgPHN0eWxlPlxuICAgICAgOmhvc3Qge1xuICAgICAgICBkaXNwbGF5OiBibG9jaztcbiAgICAgIH1cblxuICAgICAgOmhvc3QoW2ZvY3VzZWRdKSB7XG4gICAgICAgIG91dGxpbmU6IG5vbmU7XG4gICAgICB9XG5cbiAgICAgIDpob3N0KFtoaWRkZW5dKSB7XG4gICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcbiAgICAgIH1cblxuICAgICAgaW5wdXQge1xuICAgICAgICAvKiBGaXJlZm94IHNldHMgYSBtaW4td2lkdGggb24gdGhlIGlucHV0LCB3aGljaCBjYW4gY2F1c2UgbGF5b3V0IGlzc3VlcyAqL1xuICAgICAgICBtaW4td2lkdGg6IDA7XG4gICAgICB9XG5cbiAgICAgIC8qIEluIDEueCwgdGhlIDxpbnB1dD4gaXMgZGlzdHJpYnV0ZWQgdG8gcGFwZXItaW5wdXQtY29udGFpbmVyLCB3aGljaCBzdHlsZXMgaXQuXG4gICAgICBJbiAyLnggdGhlIDxpcm9uLWlucHV0PiBpcyBkaXN0cmlidXRlZCB0byBwYXBlci1pbnB1dC1jb250YWluZXIsIHdoaWNoIHN0eWxlc1xuICAgICAgaXQsIGJ1dCBpbiBvcmRlciBmb3IgdGhpcyB0byB3b3JrIGNvcnJlY3RseSwgd2UgbmVlZCB0byByZXNldCBzb21lXG4gICAgICBvZiB0aGUgbmF0aXZlIGlucHV0J3MgcHJvcGVydGllcyB0byBpbmhlcml0IChmcm9tIHRoZSBpcm9uLWlucHV0KSAqL1xuICAgICAgaXJvbi1pbnB1dCA+IGlucHV0IHtcbiAgICAgICAgQGFwcGx5IC0tcGFwZXItaW5wdXQtY29udGFpbmVyLXNoYXJlZC1pbnB1dC1zdHlsZTtcbiAgICAgICAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gICAgICAgIGZvbnQtd2VpZ2h0OiBpbmhlcml0O1xuICAgICAgICBmb250LXNpemU6IGluaGVyaXQ7XG4gICAgICAgIGxldHRlci1zcGFjaW5nOiBpbmhlcml0O1xuICAgICAgICB3b3JkLXNwYWNpbmc6IGluaGVyaXQ7XG4gICAgICAgIGxpbmUtaGVpZ2h0OiBpbmhlcml0O1xuICAgICAgICB0ZXh0LXNoYWRvdzogaW5oZXJpdDtcbiAgICAgICAgY29sb3I6IGluaGVyaXQ7XG4gICAgICAgIGN1cnNvcjogaW5oZXJpdDtcbiAgICAgIH1cblxuICAgICAgaW5wdXQ6ZGlzYWJsZWQge1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtZGlzYWJsZWQ7XG4gICAgICB9XG5cbiAgICAgIGlucHV0Ojotd2Via2l0LW91dGVyLXNwaW4tYnV0dG9uLFxuICAgICAgaW5wdXQ6Oi13ZWJraXQtaW5uZXItc3Bpbi1idXR0b24ge1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtd2Via2l0LXNwaW5uZXI7XG4gICAgICB9XG5cbiAgICAgIGlucHV0Ojotd2Via2l0LWNsZWFyLWJ1dHRvbiB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnB1dC13ZWJraXQtY2xlYXI7XG4gICAgICB9XG5cbiAgICAgIGlucHV0Ojotd2Via2l0LWNhbGVuZGFyLXBpY2tlci1pbmRpY2F0b3Ige1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1pbnB1dC1jb250YWluZXItaW5wdXQtd2Via2l0LWNhbGVuZGFyLXBpY2tlci1pbmRpY2F0b3I7XG4gICAgICB9XG5cbiAgICAgIGlucHV0Ojotd2Via2l0LWlucHV0LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1jb2xvciwgdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpKTtcbiAgICAgIH1cblxuICAgICAgaW5wdXQ6LW1vei1wbGFjZWhvbGRlciB7XG4gICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1pbnB1dC1jb250YWluZXItY29sb3IsIHZhcigtLXNlY29uZGFyeS10ZXh0LWNvbG9yKSk7XG4gICAgICB9XG5cbiAgICAgIGlucHV0OjotbW96LXBsYWNlaG9sZGVyIHtcbiAgICAgICAgY29sb3I6IHZhcigtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1jb2xvciwgdmFyKC0tc2Vjb25kYXJ5LXRleHQtY29sb3IpKTtcbiAgICAgIH1cblxuICAgICAgaW5wdXQ6Oi1tcy1jbGVhciB7XG4gICAgICAgIEBhcHBseSAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1tcy1jbGVhcjtcbiAgICAgIH1cblxuICAgICAgaW5wdXQ6Oi1tcy1yZXZlYWwge1xuICAgICAgICBAYXBwbHkgLS1wYXBlci1pbnB1dC1jb250YWluZXItbXMtcmV2ZWFsO1xuICAgICAgfVxuXG4gICAgICBpbnB1dDotbXMtaW5wdXQtcGxhY2Vob2xkZXIge1xuICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItaW5wdXQtY29udGFpbmVyLWNvbG9yLCB2YXIoLS1zZWNvbmRhcnktdGV4dC1jb2xvcikpO1xuICAgICAgfVxuXG4gICAgICBsYWJlbCB7XG4gICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgfVxuICAgIDwvc3R5bGU+XG5cbiAgICA8cGFwZXItaW5wdXQtY29udGFpbmVyIGlkPVwiY29udGFpbmVyXCIgbm8tbGFiZWwtZmxvYXQ9XCJbW25vTGFiZWxGbG9hdF1dXCIgYWx3YXlzLWZsb2F0LWxhYmVsPVwiW1tfY29tcHV0ZUFsd2F5c0Zsb2F0TGFiZWwoYWx3YXlzRmxvYXRMYWJlbCxwbGFjZWhvbGRlcildXVwiIGF1dG8tdmFsaWRhdGUkPVwiW1thdXRvVmFsaWRhdGVdXVwiIGRpc2FibGVkJD1cIltbZGlzYWJsZWRdXVwiIGludmFsaWQ9XCJbW2ludmFsaWRdXVwiPlxuXG4gICAgICA8c2xvdCBuYW1lPVwicHJlZml4XCIgc2xvdD1cInByZWZpeFwiPjwvc2xvdD5cblxuICAgICAgPGxhYmVsIGhpZGRlbiQ9XCJbWyFsYWJlbF1dXCIgYXJpYS1oaWRkZW49XCJ0cnVlXCIgZm9yJD1cIltbX2lucHV0SWRdXVwiIHNsb3Q9XCJsYWJlbFwiPltbbGFiZWxdXTwvbGFiZWw+XG5cbiAgICAgIDwhLS0gTmVlZCB0byBiaW5kIG1heGxlbmd0aCBzbyB0aGF0IHRoZSBwYXBlci1pbnB1dC1jaGFyLWNvdW50ZXIgd29ya3MgY29ycmVjdGx5IC0tPlxuICAgICAgPGlyb24taW5wdXQgYmluZC12YWx1ZT1cInt7dmFsdWV9fVwiIHNsb3Q9XCJpbnB1dFwiIGNsYXNzPVwiaW5wdXQtZWxlbWVudFwiIGlkJD1cIltbX2lucHV0SWRdXVwiIG1heGxlbmd0aCQ9XCJbW21heGxlbmd0aF1dXCIgYWxsb3dlZC1wYXR0ZXJuPVwiW1thbGxvd2VkUGF0dGVybl1dXCIgaW52YWxpZD1cInt7aW52YWxpZH19XCIgdmFsaWRhdG9yPVwiW1t2YWxpZGF0b3JdXVwiPlxuICAgICAgICA8aW5wdXQgYXJpYS1sYWJlbGxlZGJ5JD1cIltbX2FyaWFMYWJlbGxlZEJ5XV1cIiBhcmlhLWRlc2NyaWJlZGJ5JD1cIltbX2FyaWFEZXNjcmliZWRCeV1dXCIgZGlzYWJsZWQkPVwiW1tkaXNhYmxlZF1dXCIgdGl0bGUkPVwiW1t0aXRsZV1dXCIgdHlwZSQ9XCJbW3R5cGVdXVwiIHBhdHRlcm4kPVwiW1twYXR0ZXJuXV1cIiByZXF1aXJlZCQ9XCJbW3JlcXVpcmVkXV1cIiBhdXRvY29tcGxldGUkPVwiW1thdXRvY29tcGxldGVdXVwiIGF1dG9mb2N1cyQ9XCJbW2F1dG9mb2N1c11dXCIgaW5wdXRtb2RlJD1cIltbaW5wdXRtb2RlXV1cIiBtaW5sZW5ndGgkPVwiW1ttaW5sZW5ndGhdXVwiIG1heGxlbmd0aCQ9XCJbW21heGxlbmd0aF1dXCIgbWluJD1cIltbbWluXV1cIiBtYXgkPVwiW1ttYXhdXVwiIHN0ZXAkPVwiW1tzdGVwXV1cIiBuYW1lJD1cIltbbmFtZV1dXCIgcGxhY2Vob2xkZXIkPVwiW1twbGFjZWhvbGRlcl1dXCIgcmVhZG9ubHkkPVwiW1tyZWFkb25seV1dXCIgbGlzdCQ9XCJbW2xpc3RdXVwiIHNpemUkPVwiW1tzaXplXV1cIiBhdXRvY2FwaXRhbGl6ZSQ9XCJbW2F1dG9jYXBpdGFsaXplXV1cIiBhdXRvY29ycmVjdCQ9XCJbW2F1dG9jb3JyZWN0XV1cIiBvbi1jaGFuZ2U9XCJfb25DaGFuZ2VcIiB0YWJpbmRleCQ9XCJbW3RhYkluZGV4XV1cIiBhdXRvc2F2ZSQ9XCJbW2F1dG9zYXZlXV1cIiByZXN1bHRzJD1cIltbcmVzdWx0c11dXCIgYWNjZXB0JD1cIltbYWNjZXB0XV1cIiBtdWx0aXBsZSQ9XCJbW211bHRpcGxlXV1cIiByb2xlJD1cIltbaW5wdXRSb2xlXV1cIiBhcmlhLWhhc3BvcHVwJD1cIltbaW5wdXRBcmlhSGFzcG9wdXBdXVwiPlxuICAgICAgPC9pcm9uLWlucHV0PlxuXG4gICAgICA8c2xvdCBuYW1lPVwic3VmZml4XCIgc2xvdD1cInN1ZmZpeFwiPjwvc2xvdD5cblxuICAgICAgPHRlbXBsYXRlIGlzPVwiZG9tLWlmXCIgaWY9XCJbW2Vycm9yTWVzc2FnZV1dXCI+XG4gICAgICAgIDxwYXBlci1pbnB1dC1lcnJvciBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIiBzbG90PVwiYWRkLW9uXCI+W1tlcnJvck1lc3NhZ2VdXTwvcGFwZXItaW5wdXQtZXJyb3I+XG4gICAgICA8L3RlbXBsYXRlPlxuXG4gICAgICA8dGVtcGxhdGUgaXM9XCJkb20taWZcIiBpZj1cIltbY2hhckNvdW50ZXJdXVwiPlxuICAgICAgICA8cGFwZXItaW5wdXQtY2hhci1jb3VudGVyIHNsb3Q9XCJhZGQtb25cIj48L3BhcGVyLWlucHV0LWNoYXItY291bnRlcj5cbiAgICAgIDwvdGVtcGxhdGU+XG5cbiAgICA8L3BhcGVyLWlucHV0LWNvbnRhaW5lcj5cbiAgYCxcblxuICBiZWhhdmlvcnM6IFtQYXBlcklucHV0QmVoYXZpb3IsIElyb25Gb3JtRWxlbWVudEJlaGF2aW9yXSxcblxuICBwcm9wZXJ0aWVzOiB7XG4gICAgdmFsdWU6IHtcbiAgICAgIC8vIFJlcXVpcmVkIGZvciB0aGUgY29ycmVjdCBUeXBlU2NyaXB0IHR5cGUtZ2VuZXJhdGlvblxuICAgICAgdHlwZTogU3RyaW5nXG4gICAgfSxcblxuICAgIGlucHV0Um9sZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgdmFsdWU6IHVuZGVmaW5lZCxcbiAgICB9LFxuXG4gICAgaW5wdXRBcmlhSGFzcG9wdXA6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgfSxcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyBhIHJlZmVyZW5jZSB0byB0aGUgZm9jdXNhYmxlIGVsZW1lbnQuIE92ZXJyaWRkZW4gZnJvbVxuICAgKiBQYXBlcklucHV0QmVoYXZpb3IgdG8gY29ycmVjdGx5IGZvY3VzIHRoZSBuYXRpdmUgaW5wdXQuXG4gICAqXG4gICAqIEByZXR1cm4geyFIVE1MRWxlbWVudH1cbiAgICovXG4gIGdldCBfZm9jdXNhYmxlRWxlbWVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dEVsZW1lbnQuX2lucHV0RWxlbWVudDtcbiAgfSxcblxuICAvLyBOb3RlOiBUaGlzIGV2ZW50IGlzIG9ubHkgYXZhaWxhYmxlIGluIHRoZSAxLjAgdmVyc2lvbiBvZiB0aGlzIGVsZW1lbnQuXG4gIC8vIEluIDIuMCwgdGhlIGZ1bmN0aW9uYWxpdHkgb2YgYF9vbklyb25JbnB1dFJlYWR5YCBpcyBkb25lIGluXG4gIC8vIFBhcGVySW5wdXRCZWhhdmlvcjo6YXR0YWNoZWQuXG4gIGxpc3RlbmVyczogeydpcm9uLWlucHV0LXJlYWR5JzogJ19vbklyb25JbnB1dFJlYWR5J30sXG5cbiAgX29uSXJvbklucHV0UmVhZHk6IGZ1bmN0aW9uKCkge1xuICAgIC8vIEV2ZW4gdGhvdWdoIHRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBuZXh0IGxpbmUsIHNhdmUgdGhpcyBmb3JcbiAgICAvLyBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgc2luY2UgdGhlIG5hdGl2ZSBpbnB1dCBoYWQgdGhpcyBJRCB1bnRpbCAyLjAuNS5cbiAgICBpZiAoIXRoaXMuJC5uYXRpdmVJbnB1dCkge1xuICAgICAgdGhpcy4kLm5hdGl2ZUlucHV0ID0gLyoqIEB0eXBlIHshRWxlbWVudH0gKi8gKHRoaXMuJCQoJ2lucHV0JykpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pbnB1dEVsZW1lbnQgJiZcbiAgICAgICAgdGhpcy5fdHlwZXNUaGF0SGF2ZVRleHQuaW5kZXhPZih0aGlzLiQubmF0aXZlSW5wdXQudHlwZSkgIT09IC0xKSB7XG4gICAgICB0aGlzLmFsd2F5c0Zsb2F0TGFiZWwgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIE9ubHkgdmFsaWRhdGUgd2hlbiBhdHRhY2hlZCBpZiB0aGUgaW5wdXQgYWxyZWFkeSBoYXMgYSB2YWx1ZS5cbiAgICBpZiAoISF0aGlzLmlucHV0RWxlbWVudC5iaW5kVmFsdWUpIHtcbiAgICAgIHRoaXMuJC5jb250YWluZXIuX2hhbmRsZVZhbHVlQW5kQXV0b1ZhbGlkYXRlKHRoaXMuaW5wdXRFbGVtZW50KTtcbiAgICB9XG4gIH0sXG59KTtcbiIsICJpbXBvcnQgeyBodG1sLCBQb2x5bWVyRWxlbWVudCB9IGZyb20gJ0Bwb2x5bWVyL3BvbHltZXIvcG9seW1lci1lbGVtZW50LmpzJztcclxuaW1wb3J0IHsgbWl4aW5CZWhhdmlvcnMgfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi9sZWdhY3kvY2xhc3MuanMnO1xyXG5pbXBvcnQgeyBJcm9uQTExeUtleXNCZWhhdmlvciB9IGZyb20gJ0Bwb2x5bWVyL2lyb24tYTExeS1rZXlzLWJlaGF2aW9yL2lyb24tYTExeS1rZXlzLWJlaGF2aW9yLmpzJ1xyXG5pbXBvcnQgeyBJcm9uRm9ybUVsZW1lbnRCZWhhdmlvciB9IGZyb20gJ0Bwb2x5bWVyL2lyb24tZm9ybS1lbGVtZW50LWJlaGF2aW9yL2lyb24tZm9ybS1lbGVtZW50LWJlaGF2aW9yLmpzJ1xyXG5pbXBvcnQgeyBQYXBlcklua3lGb2N1c0JlaGF2aW9yLCBQYXBlcklua3lGb2N1c0JlaGF2aW9ySW1wbCB9IGZyb20gJ0Bwb2x5bWVyL3BhcGVyLWJlaGF2aW9ycy9wYXBlci1pbmt5LWZvY3VzLWJlaGF2aW9yLmpzJ1xyXG5pbXBvcnQgeyBJcm9uUmFuZ2VCZWhhdmlvciB9IGZyb20gJ0Bwb2x5bWVyL2lyb24tcmFuZ2UtYmVoYXZpb3IvaXJvbi1yYW5nZS1iZWhhdmlvci5qcydcclxuXHJcbmltcG9ydCAnQHBvbHltZXIvcGFwZXItcHJvZ3Jlc3MvcGFwZXItcHJvZ3Jlc3MuanMnXHJcbmltcG9ydCAnQHBvbHltZXIvcGFwZXItaW5wdXQvcGFwZXItaW5wdXQuanMnXHJcbi8qKlxyXG4gKiBgcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlcmBcclxuICpcclxuICpcclxuICogQGN1c3RvbUVsZW1lbnRcclxuICogQHBvbHltZXJcclxuICovXHJcbmNsYXNzIFBhcGVyU2luZ2xlUmFuZ2VTbGlkZXIgZXh0ZW5kc1xyXG4gICAgbWl4aW5CZWhhdmlvcnMoWyBJcm9uQTExeUtleXNCZWhhdmlvcixcclxuICAgICAgICAgICAgICAgICAgICAgSXJvbkZvcm1FbGVtZW50QmVoYXZpb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgIFBhcGVySW5reUZvY3VzQmVoYXZpb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgIFBhcGVySW5reUZvY3VzQmVoYXZpb3JJbXBsLFxyXG4gICAgICAgICAgICAgICAgICAgICBJcm9uUmFuZ2VCZWhhdmlvciBdLCBQb2x5bWVyRWxlbWVudCkge1xyXG5cclxuICAgIHN0YXRpYyBnZXQgdGVtcGxhdGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGh0bWxgXHJcbiAgICAgICAgICAgIDwhLS08dGVtcGxhdGUgc3RyaXAtd2hpdGVzcGFjZT4gLS0+XHJcbiAgICAgICAgICAgICAgICA8c3R5bGU+XHJcbiAgICAgICAgICAgICAgICAgIDpob3N0IHtcclxuICAgICAgICAgICAgICAgICAgICBAYXBwbHkgLS1sYXlvdXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWp1c3RpZmllZDtcclxuICAgICAgICAgICAgICAgICAgICBAYXBwbHkgLS1sYXlvdXQtY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyMDBweDtcclxuICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgICAgICAgICAtbW96LXVzZXItc2VsZWN0OiBub25lO1xyXG4gICAgICAgICAgICAgICAgICAgIC1tcy11c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLS1wYXBlci1wcm9ncmVzcy1hY3RpdmUtY29sb3I6IHZhcigtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItYWN0aXZlLWNvbG9yLCB2YXIoLS1nb29nbGUtYmx1ZS03MDApKTtcclxuICAgICAgICAgICAgICAgICAgICAtLXBhcGVyLXByb2dyZXNzLXNlY29uZGFyeS1jb2xvcjogdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1zZWNvbmRhcnktY29sb3IsIHZhcigtLWdvb2dsZS1ibHVlLTMwMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIC0tcGFwZXItcHJvZ3Jlc3MtZGlzYWJsZWQtYWN0aXZlLWNvbG9yOiB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWRpc2FibGVkLWFjdGl2ZS1jb2xvciwgdmFyKC0tcGFwZXItZ3JleS00MDApKTtcclxuICAgICAgICAgICAgICAgICAgICAtLXBhcGVyLXByb2dyZXNzLWRpc2FibGVkLXNlY29uZGFyeS1jb2xvcjogdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1kaXNhYmxlZC1zZWNvbmRhcnktY29sb3IsIHZhcigtLXBhcGVyLWdyZXktNDAwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLS1jYWxjdWxhdGVkLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItaGVpZ2h0OiB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWhlaWdodCwgMnB4KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLyogZm9jdXMgc2hvd3MgdGhlIHJpcHBsZSAqL1xyXG4gICAgICAgICAgICAgICAgICA6aG9zdCg6Zm9jdXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAvKiogXHJcbiAgICAgICAgICAgICAgICAgICAqIE5PVEUoa2VhbnVsZWUpOiBUaG91Z2ggOmhvc3QtY29udGV4dCBpcyBub3QgdW5pdmVyc2FsbHkgc3VwcG9ydGVkLCBzb21lIHBhZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAqIHN0aWxsIHJlbHkgb24gcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlciBiZWluZyBmbGlwcGVkIHdoZW4gZGlyPVwicnRsXCIgaXMgc2V0IG9uIGJvZHkuIEZvciBmdWxsXHJcbiAgICAgICAgICAgICAgICAgICAqIGNvbXBhdGFiaWxpdHksIGRpcj1cInJ0bFwiIG11c3QgYmUgZXhwbGljaXRseSBzZXQgb24gcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci5cclxuICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgIDpob3N0LWNvbnRleHQoW2Rpcj1cInJ0bFwiXSkgI3NsaWRlckNvbnRhaW5lciB7XHJcbiAgICAgICAgICAgICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm06IHNjYWxlWCgtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZVgoLTEpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAvKiogXHJcbiAgICAgICAgICAgICAgICAgICAqIE5PVEUoa2VhbnVsZWUpOiBUaGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlIHJ1bGUgYWJvdmUgYmVjYXVzZSA6aG9zdC1jb250ZXh0IG1heVxyXG4gICAgICAgICAgICAgICAgICAgKiBub3QgYmUgcmVjb2duaXplZC5cclxuICAgICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICAgIDpob3N0KFtkaXI9XCJydGxcIl0pICNzbGlkZXJDb250YWluZXIge1xyXG4gICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZVgoLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGVYKC0xKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLyoqIFxyXG4gICAgICAgICAgICAgICAgICAgKiBOT1RFKGtlYW51bGVlKTogTmVlZGVkIHRvIG92ZXJyaWRlIHRoZSA6aG9zdC1jb250ZXh0IHJ1bGUgKHdoZXJlIHN1cHBvcnRlZClcclxuICAgICAgICAgICAgICAgICAgICogdG8gc3VwcG9ydCBMVFIgc2xpZGVycyBpbiBSVEwgcGFnZXMuXHJcbiAgICAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgICA6aG9zdChbZGlyPVwibHRyXCJdKSAjc2xpZGVyQ29udGFpbmVyIHtcclxuICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGVYKDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGVYKDEpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAjc2xpZGVyQ29udGFpbmVyIHtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBjYWxjKDMwcHggKyB2YXIoLS1jYWxjdWxhdGVkLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItaGVpZ2h0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IGNhbGMoMTVweCArIHZhcigtLWNhbGN1bGF0ZWQtcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1oZWlnaHQpLzIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogY2FsYygxNXB4ICsgdmFyKC0tY2FsY3VsYXRlZC1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWhlaWdodCkvMik7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICNzbGlkZXJDb250YWluZXI6Zm9jdXMge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dGxpbmU6IDA7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICNzbGlkZXJDb250YWluZXIuZWRpdGFibGUge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDEycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMTJweDtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLmJhci1jb250YWluZXIge1xyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLnJpbmcgPiAuYmFyLWNvbnRhaW5lciB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogY2FsYyg1cHggKyB2YXIoLS1jYWxjdWxhdGVkLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItaGVpZ2h0KS8yKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBsZWZ0IDAuMThzIGVhc2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5yaW5nLmV4cGFuZC5kcmFnZ2luZyA+IC5iYXItY29udGFpbmVyIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiBub25lO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAucmluZy5leHBhbmQ6bm90KC5waW4pID4gLmJhci1jb250YWluZXIge1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IGNhbGMoOHB4ICsgdmFyKC0tY2FsY3VsYXRlZC1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWhlaWdodCkvMik7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICNzbGlkZXJCYXIge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE1cHggMDtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTAwJTtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWJhci1jb2xvciwgdHJhbnNwYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIC0tcGFwZXItcHJvZ3Jlc3MtY29udGFpbmVyLWNvbG9yOiB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWNvbnRhaW5lci1jb2xvciwgdmFyKC0tcGFwZXItZ3JleS00MDApKTtcclxuICAgICAgICAgICAgICAgICAgICAtLXBhcGVyLXByb2dyZXNzLWhlaWdodDogdmFyKC0tY2FsY3VsYXRlZC1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5zbGlkZXItbWFya2VycyB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogY2FsYygxNHB4ICsgdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1oZWlnaHQsMnB4KS8yKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IHZhcigtLWNhbGN1bGF0ZWQtcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0xcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgICAgICAgICAgICAgICBAYXBwbHkgLS1sYXlvdXQtaG9yaXpvbnRhbDtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLnNsaWRlci1tYXJrZXIge1xyXG4gICAgICAgICAgICAgICAgICAgIEBhcHBseSAtLWxheW91dC1mbGV4O1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgIC5zbGlkZXItbWFya2Vyczo6YWZ0ZXIsXHJcbiAgICAgICAgICAgICAgICAgIC5zbGlkZXItbWFya2VyOjphZnRlciB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogLTFweDtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogMnB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogdmFyKC0tY2FsY3VsYXRlZC1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItbWFya2Vycy1jb2xvciwgIzAwMCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5zbGlkZXIta25vYiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiBjYWxjKC0xNXB4IC0gdmFyKC0tY2FsY3VsYXRlZC1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWhlaWdodCkvMik7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNhbGMoMzBweCArIHZhcigtLWNhbGN1bGF0ZWQtcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1oZWlnaHQpKTtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMzBweCArIHZhcigtLWNhbGN1bGF0ZWQtcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1oZWlnaHQpKTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLnRyYW5zaXRpbmcgPiAuc2xpZGVyLWtub2Ige1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IGxlZnQgMC4wOHMgZWFzZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLnNsaWRlci1rbm9iOmZvY3VzIHtcclxuICAgICAgICAgICAgICAgICAgICBvdXRsaW5lOiBub25lO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAuc2xpZGVyLWtub2IuZHJhZ2dpbmcge1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5zbmFwcyA+IC5zbGlkZXIta25vYi5kcmFnZ2luZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gMC4wOHMgZWFzZTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMC4wOHMgZWFzZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLnNsaWRlci1rbm9iLWlubmVyIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDEwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIDIwcHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gMjBweCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1rbm9iLWNvbG9yLCB2YXIoLS1nb29nbGUtYmx1ZS03MDApKTtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWtub2ItY29sb3IsIHZhcigtLWdvb2dsZS1ibHVlLTcwMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLW1vei1ib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgICAgICAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb24tcHJvcGVydHk6IC13ZWJraXQtdHJhbnNmb3JtLCBiYWNrZ3JvdW5kLWNvbG9yLCBib3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbi1wcm9wZXJ0eTogdHJhbnNmb3JtLCBiYWNrZ3JvdW5kLWNvbG9yLCBib3JkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbi1kdXJhdGlvbjogMC4xOHM7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb246IGVhc2U7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5leHBhbmQ6bm90KC5waW4pID4gLnNsaWRlci1rbm9iID4gLnNsaWRlci1rbm9iLWlubmVyIHtcclxuICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUoMS41KTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuNSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5yaW5nID4gLnNsaWRlci1rbm9iID4gLnNsaWRlci1rbm9iLWlubmVyIHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWtub2Itc3RhcnQtY29sb3IsIHRyYW5zcGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWtub2Itc3RhcnQtYm9yZGVyLWNvbG9yLCB2YXIoLS1wYXBlci1ncmV5LTQwMCkpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAuc2xpZGVyLWtub2ItaW5uZXI6OmJlZm9yZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1waW4tY29sb3IsIHZhcigtLWdvb2dsZS1ibHVlLTcwMCkpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAucGluID4gLnNsaWRlci1rbm9iID4gLnNsaWRlci1rbm9iLWlubmVyOjpiZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRvcDogMDtcclxuICAgICAgICAgICAgICAgICAgICBsZWZ0OiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IC0xM3B4O1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNnB4O1xyXG4gICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjZweDtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCUgNTAlIDUwJSAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC00NWRlZykgc2NhbGUoMCkgdHJhbnNsYXRlKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC00NWRlZykgc2NhbGUoMCkgdHJhbnNsYXRlKDApO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAuc2xpZGVyLWtub2ItaW5uZXI6OmJlZm9yZSxcclxuICAgICAgICAgICAgICAgICAgLnNsaWRlci1rbm9iLWlubmVyOjphZnRlciB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogLXdlYmtpdC10cmFuc2Zvcm0gLjE4cyBlYXNlLCBiYWNrZ3JvdW5kLWNvbG9yIC4xOHMgZWFzZTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gLjE4cyBlYXNlLCBiYWNrZ3JvdW5kLWNvbG9yIC4xOHMgZWFzZTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLnBpbi5yaW5nID4gLnNsaWRlci1rbm9iID4gLnNsaWRlci1rbm9iLWlubmVyOjpiZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItcGluLXN0YXJ0LWNvbG9yLCB2YXIoLS1wYXBlci1ncmV5LTQwMCkpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAucGluLmV4cGFuZCA+IC5zbGlkZXIta25vYiA+IC5zbGlkZXIta25vYi1pbm5lcjo6YmVmb3JlIHtcclxuICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKC00NWRlZykgc2NhbGUoMSkgdHJhbnNsYXRlKDE3cHgsIC0xN3B4KTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgtNDVkZWcpIHNjYWxlKDEpIHRyYW5zbGF0ZSgxN3B4LCAtMTdweCk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5waW4gPiAuc2xpZGVyLWtub2IgPiAuc2xpZGVyLWtub2ItaW5uZXI6OmFmdGVyIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBhdHRyKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGxlZnQ6IDUwJTtcclxuICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogLTE2cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDMycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyNnB4O1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1mb250LWNvbG9yLCAjZmZmKTtcclxuICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEwcHg7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgwKSB0cmFuc2xhdGUoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgwKSB0cmFuc2xhdGUoMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgQGFwcGx5IHBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXIta25vYi1pbm5lci10ZXh0O1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAucGluLmV4cGFuZCA+IC5zbGlkZXIta25vYiA+IC5zbGlkZXIta25vYi1pbm5lcjo6YWZ0ZXIge1xyXG4gICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiBzY2FsZSgxKSB0cmFuc2xhdGUoMCwgLTE3cHgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMSkgdHJhbnNsYXRlKDAsIC0xN3B4KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLyogcGFwZXItaW5wdXQgKi9cclxuICAgICAgICAgICAgICAgICAgLnNsaWRlci1pbnB1dCB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDUwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICAtLXBhcGVyLWlucHV0LWNvbnRhaW5lci1pbnB1dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgQGFwcGx5IC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1pbnB1dDtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgLyogZGlzYWJsZWQgc3RhdGUgKi9cclxuICAgICAgICAgICAgICAgICAgI3NsaWRlckNvbnRhaW5lci5kaXNhYmxlZCB7XHJcbiAgICAgICAgICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5kaXNhYmxlZCA+IC5zbGlkZXIta25vYiA+IC5zbGlkZXIta25vYi1pbm5lciB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1kaXNhYmxlZC1rbm9iLWNvbG9yLCB2YXIoLS1wYXBlci1ncmV5LTQwMCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkIHZhcigtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItZGlzYWJsZWQta25vYi1jb2xvciwgdmFyKC0tcGFwZXItZ3JleS00MDApKTtcclxuICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogc2NhbGUzZCgwLjc1LCAwLjc1LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlM2QoMC43NSwgMC43NSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIC5kaXNhYmxlZC5yaW5nID4gLnNsaWRlci1rbm9iID4gLnNsaWRlci1rbm9iLWlubmVyIHtcclxuICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWtub2Itc3RhcnQtY29sb3IsIHRyYW5zcGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWtub2Itc3RhcnQtYm9yZGVyLWNvbG9yLCB2YXIoLS1wYXBlci1ncmV5LTQwMCkpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICBwYXBlci1yaXBwbGUge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWtub2ItY29sb3IsIHZhcigtLWdvb2dsZS1ibHVlLTcwMCkpO1xyXG4gICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJzbGlkZXJDb250YWluZXJcIlxyXG4gICAgICAgICAgICAgICAgICBjbGFzcyQ9XCJbW19nZXRDbGFzc05hbWVzKGRpc2FibGVkLCBwaW4sIHNuYXBzLCBpbW1lZGlhdGVWYWx1ZSwgbWluLCBleHBhbmQsIGRyYWdnaW5nLCB0cmFuc2l0aW5nLCBlZGl0YWJsZSldXVwiPlxyXG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiYmFyLWNvbnRhaW5lclwiPlxyXG4gICAgICAgICAgICAgICAgICAgIDxwYXBlci1wcm9ncmVzc1xyXG4gICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQkPVwiW1tkaXNhYmxlZF1dXCJcclxuICAgICAgICAgICAgICAgICAgICAgIGlkPVwic2xpZGVyQmFyXCJcclxuICAgICAgICAgICAgICAgICAgICAgIGFyaWEtaGlkZGVuPVwidHJ1ZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBtaW49XCJbW21pbl1dXCJcclxuICAgICAgICAgICAgICAgICAgICAgIG1heD1cIltbbWF4XV1cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgc3RlcD1cIltbc3RlcF1dXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHZhbHVlPVwiW1tpbW1lZGlhdGVWYWx1ZV1dXCJcclxuICAgICAgICAgICAgICAgICAgICAgIHNlY29uZGFyeS1wcm9ncmVzcz1cIltbc2Vjb25kYXJ5UHJvZ3Jlc3NdXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICBvbi1kb3duPVwiX2JhcmRvd25cIlxyXG4gICAgICAgICAgICAgICAgICAgICAgb24tdXA9XCJfcmVzZXRLbm9iXCJcclxuICAgICAgICAgICAgICAgICAgICAgIG9uLXRyYWNrPVwiX29uVHJhY2tcIj5cclxuICAgICAgICAgICAgICAgICAgICA8L3BhcGVyLXByb2dyZXNzPlxyXG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIDx0ZW1wbGF0ZSBpcz1cImRvbS1pZlwiIGlmPVwiW1tzbmFwc11dXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNsaWRlci1tYXJrZXJzXCI+XHJcbiAgICAgICAgICAgICAgICAgICAgICA8dGVtcGxhdGUgaXM9XCJkb20tcmVwZWF0XCIgaXRlbXM9XCJbW21hcmtlcnNdXVwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic2xpZGVyLW1hcmtlclwiPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgPC90ZW1wbGF0ZT5cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIDxkaXYgaWQ9XCJzbGlkZXJLbm9iXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInNsaWRlci1rbm9iXCJcclxuICAgICAgICAgICAgICAgICAgICBvbi1kb3duPVwiX2tub2Jkb3duXCJcclxuICAgICAgICAgICAgICAgICAgICBvbi11cD1cIl9yZXNldEtub2JcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uLXRyYWNrPVwiX29uVHJhY2tcIlxyXG4gICAgICAgICAgICAgICAgICAgIG9uLXRyYW5zaXRpb25lbmQ9XCJfa25vYlRyYW5zaXRpb25FbmRcIj5cclxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzbGlkZXIta25vYi1pbm5lclwiIHZhbHVlJD1cIltbZGlzcGxheUZ1bmN0aW9uKGltbWVkaWF0ZVZhbHVlKV1dXCI+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgPHRlbXBsYXRlIGlzPVwiZG9tLWlmXCIgaWY9XCJbW2VkaXRhYmxlXV1cIj5cclxuICAgICAgICAgICAgICAgICAgPHBhcGVyLWlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ9XCJpbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZT1cIm51bWJlclwiXHJcbiAgICAgICAgICAgICAgICAgICAgc3RlcD1cIltbc3RlcF1dXCJcclxuICAgICAgICAgICAgICAgICAgICBtaW49XCJbW21pbl1dXCJcclxuICAgICAgICAgICAgICAgICAgICBtYXg9XCJbW21heF1dXCJcclxuICAgICAgICAgICAgICAgICAgICBjbGFzcz1cInNsaWRlci1pbnB1dFwiXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQkPVwiW1tkaXNhYmxlZF1dXCJcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cIltbaW1tZWRpYXRlVmFsdWVdXVwiXHJcbiAgICAgICAgICAgICAgICAgICAgb24tY2hhbmdlPVwiX2NoYW5nZVZhbHVlXCJcclxuICAgICAgICAgICAgICAgICAgICBvbi1rZXlkb3duPVwiX2lucHV0S2V5RG93blwiXHJcbiAgICAgICAgICAgICAgICAgICAgbm8tbGFiZWwtZmxvYXQ+XHJcbiAgICAgICAgICAgICAgICAgIDwvcGFwZXItaW5wdXQ+XHJcbiAgICAgICAgICAgICAgICA8L3RlbXBsYXRlPlxyXG4gICAgICAgICAgICAgIDwvdGVtcGxhdGU+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxuICAgIHN0YXRpYyBnZXQgaXMoKSB7IHJldHVybiAncGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlcicgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgcHJvcGVydGllcygpIHtcclxuICAgICAgICByZXR1cm57XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBVc2VkIHRvIGN1c3RvbWl6ZSB0aGUgZGlzcGxheWVkIHZhbHVlIG9mIHRoZSBwaW4uIEUuZy4gdGhlIHZhbHVlIGNhbiBiZSBwcmVmaXhlZCB3aXRoIGEgJyQnIGxpa2UgJyQ5OSdcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGRpc3BsYXlGdW5jdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogRnVuY3Rpb24sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCB0aGUgc2xpZGVyIHRodW1iIHNuYXBzIHRvIHRpY2sgbWFya3MgZXZlbmx5IHNwYWNlZCBiYXNlZFxyXG4gICAgICAgICAgICAgKiBvbiB0aGUgYHN0ZXBgIHByb3BlcnR5IHZhbHVlLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgc25hcHM6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBJZiB0cnVlLCBhIHBpbiB3aXRoIG51bWVyaWMgdmFsdWUgbGFiZWwgaXMgc2hvd24gd2hlbiB0aGUgc2xpZGVyIHRodW1iXHJcbiAgICAgICAgICAgICAqIGlzIHByZXNzZWQuIFVzZSBmb3Igc2V0dGluZ3MgZm9yIHdoaWNoIHVzZXJzIG5lZWQgdG8ga25vdyB0aGUgZXhhY3RcclxuICAgICAgICAgICAgICogdmFsdWUgb2YgdGhlIHNldHRpbmcuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBwaW46IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWVcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBUaGUgbnVtYmVyIHRoYXQgcmVwcmVzZW50cyB0aGUgY3VycmVudCBzZWNvbmRhcnkgcHJvZ3Jlc3MuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBzZWNvbmRhcnlQcm9ncmVzczoge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBvYnNlcnZlcjogJ19zZWNvbmRhcnlQcm9ncmVzc0NoYW5nZWQnXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSWYgdHJ1ZSwgYW4gaW5wdXQgaXMgc2hvd24gYW5kIHVzZXIgY2FuIHVzZSBpdCB0byBzZXQgdGhlIHNsaWRlciB2YWx1ZS5cclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVGhlIGltbWVkaWF0ZSB2YWx1ZSBvZiB0aGUgc2xpZGVyLiAgVGhpcyB2YWx1ZSBpcyB1cGRhdGVkIHdoaWxlIHRoZSB1c2VyXHJcbiAgICAgICAgICAgICAqIGlzIGRyYWdnaW5nIHRoZSBzbGlkZXIuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpbW1lZGlhdGVWYWx1ZToge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IDAsXHJcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG5vdGlmeTogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiBtYXJrZXJzXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBtYXhNYXJrZXJzOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogMCxcclxuICAgICAgICAgICAgICAgIG5vdGlmeTogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIElmIHRydWUsIHRoZSBrbm9iIGlzIGV4cGFuZGVkXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBleHBhbmQ6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRydWUgd2hlbiB0aGUgdXNlciBpcyBkcmFnZ2luZyB0aGUgc2xpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgZHJhZ2dpbmc6IHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICByZWFkT25seTogdHJ1ZVxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgdHJhbnNpdGluZzoge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlXHJcbiAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICBtYXJrZXJzOiB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBBcnJheSxcclxuICAgICAgICAgICAgICAgIHJlYWRPbmx5OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAga2V5QmluZGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICdsZWZ0JzogJ19sZWZ0S2V5JyxcclxuICAgICAgICAgICAgICAgICdyaWdodCc6ICdfcmlnaHRLZXknLFxyXG4gICAgICAgICAgICAgICAgJ2Rvd24gcGFnZWRvd24gaG9tZSc6ICdfZGVjcmVtZW50S2V5JyxcclxuICAgICAgICAgICAgICAgICd1cCBwYWdldXAgZW5kJzogJ19pbmNyZW1lbnRLZXknXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBnZXQgb2JzZXJ2ZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBbXHJcbiAgICAgICAgICAgICdfdXBkYXRlS25vYih2YWx1ZSwgbWluLCBtYXgsIHNuYXBzLCBzdGVwKScsXHJcbiAgICAgICAgICAgICdfdmFsdWVDaGFuZ2VkKHZhbHVlKScsXHJcbiAgICAgICAgICAgICdfaW1tZWRpYXRlVmFsdWVDaGFuZ2VkKGltbWVkaWF0ZVZhbHVlKScsXHJcbiAgICAgICAgICAgICdfdXBkYXRlTWFya2VycyhtYXhNYXJrZXJzLCBtaW4sIG1heCwgc25hcHMpJ1xyXG4gICAgICAgIF1cclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3Rvcigpe1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuX2Vuc3VyZUF0dHJpYnV0ZSgncm9sZScsJ3NsaWRlcicpO1xyXG4gICAgICAgIHRoaXMuX2Vuc3VyZUF0dHJpYnV0ZSgndGFiaW5kZXgnLCcwJyk7XHJcbiAgICAgICAgLy90aGlzLnNsaWRlcktub2IgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignI3NsaWRlcktub2InKTtcclxuICAgIH1cclxuXHJcbiAgICByZWFkeSgpIHtcclxuICAgICAgICBzdXBlci5yZWFkeSgpO1xyXG4gICAgICAgIHRoaXMuaXNSZWFkeSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJLbm9iID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZXJLbm9iJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBJbmNyZWFzZXMgdmFsdWUgYnkgYHN0ZXBgIGJ1dCBub3QgYWJvdmUgYG1heGAuXHJcbiAgICAgKiBAbWV0aG9kIGluY3JlbWVudFxyXG4gICAgICovXHJcbiAgICBpbmNyZW1lbnQoKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuX2NsYW1wVmFsdWUodGhpcy52YWx1ZSArIHRoaXMuc3RlcCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWNyZWFzZXMgdmFsdWUgYnkgYHN0ZXBgIGJ1dCBub3QgYmVsb3cgYG1pbmAuXHJcbiAgICAgKiBAbWV0aG9kIGRlY3JlbWVudFxyXG4gICAgICovXHJcbiAgICBkZWNyZW1lbnQoKSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMuX2NsYW1wVmFsdWUodGhpcy52YWx1ZSAtIHRoaXMuc3RlcCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3VwZGF0ZUtub2IodmFsdWUsIG1pbiwgbWF4LCBzbmFwcywgc3RlcCkge1xyXG4gICAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCdhcmlhLXZhbHVlbWluJywgbWluKTtcclxuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZSgnYXJpYS12YWx1ZW1heCcsIG1heCk7XHJcbiAgICAgICAgdGhpcy5zZXRBdHRyaWJ1dGUoJ2FyaWEtdmFsdWVub3cnLCB2YWx1ZSk7XHJcblxyXG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uS25vYih0aGlzLl9jYWxjUmF0aW8odmFsdWUpICogMTAwKTtcclxuICAgIH1cclxuXHJcbiAgICBfdmFsdWVDaGFuZ2VkKCkge1xyXG4gICAgICAgIHRoaXMuZmlyZSgndmFsdWUtY2hhbmdlJywge2NvbXBvc2VkOiB0cnVlfSk7XHJcbiAgICB9XHJcblxyXG4gICAgX2ltbWVkaWF0ZVZhbHVlQ2hhbmdlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICB0aGlzLmZpcmUoJ2ltbWVkaWF0ZS12YWx1ZS1jaGFuZ2UnLCB7Y29tcG9zZWQ6IHRydWV9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pbW1lZGlhdGVWYWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX3NlY29uZGFyeVByb2dyZXNzQ2hhbmdlZCgpIHtcclxuICAgICAgICB0aGlzLnNlY29uZGFyeVByb2dyZXNzID0gdGhpcy5fY2xhbXBWYWx1ZSh0aGlzLnNlY29uZGFyeVByb2dyZXNzKTtcclxuICAgIH1cclxuXHJcbiAgICBfZXhwYW5kS25vYigpIHtcclxuICAgICAgICB0aGlzLl9zZXRFeHBhbmQodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Jlc2V0S25vYigpIHtcclxuICAgICAgICB0aGlzLmNhbmNlbERlYm91bmNlcignZXhwYW5kS25vYicpO1xyXG4gICAgICAgIHRoaXMuX3NldEV4cGFuZChmYWxzZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3Bvc2l0aW9uS25vYihyYXRpbykge1xyXG4gICAgICAgIHRoaXMuX3NldEltbWVkaWF0ZVZhbHVlKHRoaXMuX2NhbGNTdGVwKHRoaXMuX2NhbGNLbm9iUG9zaXRpb24ocmF0aW8pKSk7XHJcbiAgICAgICAgdGhpcy5fc2V0UmF0aW8odGhpcy5fY2FsY1JhdGlvKHRoaXMuaW1tZWRpYXRlVmFsdWUpICogMTAwKTtcclxuXHJcbiAgICAgICAgdGhpcy5zbGlkZXJLbm9iID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZXJLbm9iJyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJLbm9iLnN0eWxlLmxlZnQgPSB0aGlzLnJhdGlvICsgJyUnO1xyXG4gICAgICAgIGlmICh0aGlzLmRyYWdnaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tub2JzdGFydHggPSAodGhpcy5yYXRpbyAqIHRoaXMuX3cpIC8gMTAwO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zbGF0ZTNkKDAsIDAsIDAsIHRoaXMuc2xpZGVyS25vYik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9jYWxjS25vYlBvc2l0aW9uKHJhdGlvKSB7XHJcbiAgICAgICAgcmV0dXJuICh0aGlzLm1heCAtIHRoaXMubWluKSAqIHJhdGlvIC8gMTAwICsgdGhpcy5taW47XHJcbiAgICB9XHJcblxyXG4gICAgX29uVHJhY2soZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRldGFpbC5zdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlICdzdGFydCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFja1N0YXJ0KGV2ZW50KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0cmFjayc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFja1goZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2VuZCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90cmFja0VuZCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF90cmFja1N0YXJ0KGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5fc2V0VHJhbnNpdGluZyhmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5fdyA9IHRoaXMuJC5zbGlkZXJCYXIub2Zmc2V0V2lkdGg7XHJcbiAgICAgICAgdGhpcy5feCA9IHRoaXMucmF0aW8gKiB0aGlzLl93IC8gMTAwO1xyXG4gICAgICAgIHRoaXMuX3N0YXJ0eCA9IHRoaXMuX3g7XHJcbiAgICAgICAgdGhpcy5fa25vYnN0YXJ0eCA9IHRoaXMuX3N0YXJ0eDtcclxuICAgICAgICB0aGlzLl9taW54ID0gLSB0aGlzLl9zdGFydHg7XHJcbiAgICAgICAgdGhpcy5fbWF4eCA9IHRoaXMuX3cgLSB0aGlzLl9zdGFydHg7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJLbm9iID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZXJLbm9iJyk7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJLbm9iLmNsYXNzTGlzdC5hZGQoJ2RyYWdnaW5nJyk7XHJcbiAgICAgICAgdGhpcy5fc2V0RHJhZ2dpbmcodHJ1ZSk7XHJcbiAgICB9XHJcblxyXG4gICAgX3RyYWNrWChldmVudCkge1xyXG4gICAgICAgIGlmICghdGhpcy5kcmFnZ2luZykge1xyXG4gICAgICAgICAgICB0aGlzLl90cmFja1N0YXJ0KGV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSB0aGlzLl9pc1JUTCA/IC0xIDogMTtcclxuICAgICAgICB2YXIgZHggPSBNYXRoLm1pbihcclxuICAgICAgICAgICAgdGhpcy5fbWF4eCwgTWF0aC5tYXgodGhpcy5fbWlueCwgZXZlbnQuZGV0YWlsLmR4ICogZGlyZWN0aW9uKSk7XHJcbiAgICAgICAgdGhpcy5feCA9IHRoaXMuX3N0YXJ0eCArIGR4O1xyXG5cclxuICAgICAgICB2YXIgaW1tZWRpYXRlVmFsdWUgPSB0aGlzLl9jYWxjU3RlcCh0aGlzLl9jYWxjS25vYlBvc2l0aW9uKHRoaXMuX3ggLyB0aGlzLl93ICogMTAwKSk7XHJcbiAgICAgICAgdGhpcy5fc2V0SW1tZWRpYXRlVmFsdWUoaW1tZWRpYXRlVmFsdWUpO1xyXG5cclxuICAgICAgICAvLyB1cGRhdGUga25vYidzIHBvc2l0aW9uXHJcbiAgICAgICAgdGhpcy5zbGlkZXJLbm9iID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZXJLbm9iJyk7XHJcbiAgICAgICAgdmFyIHRyYW5zbGF0ZVggPSAoKHRoaXMuX2NhbGNSYXRpbyh0aGlzLmltbWVkaWF0ZVZhbHVlKSAqIHRoaXMuX3cpIC0gdGhpcy5fa25vYnN0YXJ0eCk7XHJcbiAgICAgICAgdGhpcy50cmFuc2xhdGUzZCh0cmFuc2xhdGVYICsgJ3B4JywgMCwgMCwgdGhpcy5zbGlkZXJLbm9iKTtcclxuICAgIH1cclxuXHJcbiAgICBfdHJhY2tFbmQoKSB7XHJcbiAgICAgICAgdGhpcy5zbGlkZXJLbm9iID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNzbGlkZXJLbm9iJyk7XHJcbiAgICAgICAgdmFyIHMgPSB0aGlzLnNsaWRlcktub2Iuc3R5bGU7XHJcblxyXG4gICAgICAgIHRoaXMuc2xpZGVyS25vYi5jbGFzc0xpc3QucmVtb3ZlKCdkcmFnZ2luZycpO1xyXG4gICAgICAgIHRoaXMuX3NldERyYWdnaW5nKGZhbHNlKTtcclxuICAgICAgICB0aGlzLl9yZXNldEtub2IoKTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdGhpcy5pbW1lZGlhdGVWYWx1ZTtcclxuXHJcbiAgICAgICAgcy50cmFuc2Zvcm0gPSBzLndlYmtpdFRyYW5zZm9ybSA9ICcnO1xyXG5cclxuICAgICAgICB0aGlzLmZpcmUoJ2NoYW5nZScsIHtjb21wb3NlZDogdHJ1ZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9rbm9iZG93bihldmVudCkge1xyXG4gICAgICAgIHRoaXMuX2V4cGFuZEtub2IoKTtcclxuXHJcbiAgICAgICAgLy8gY2FuY2VsIHNlbGVjdGlvblxyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgIC8vIHNldCB0aGUgZm9jdXMgbWFudWFsbHkgYmVjYXVzZSB3ZSB3aWxsIGNhbGxlZCBwcmV2ZW50IGRlZmF1bHRcclxuICAgICAgICB0aGlzLmZvY3VzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgX2JhcmRvd24oZXZlbnQpIHtcclxuICAgICAgICB0aGlzLl93ID0gdGhpcy4kLnNsaWRlckJhci5vZmZzZXRXaWR0aDtcclxuICAgICAgICB2YXIgcmVjdCA9IHRoaXMuJC5zbGlkZXJCYXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgdmFyIHJhdGlvID0gKGV2ZW50LmRldGFpbC54IC0gcmVjdC5sZWZ0KSAvIHRoaXMuX3cgKiAxMDA7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzUlRMKSB7XHJcbiAgICAgICAgICAgIHJhdGlvID0gMTAwIC0gcmF0aW87XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBwcmV2UmF0aW8gPSB0aGlzLnJhdGlvO1xyXG5cclxuICAgICAgICB0aGlzLl9zZXRUcmFuc2l0aW5nKHRydWUpO1xyXG5cclxuICAgICAgICB0aGlzLl9wb3NpdGlvbktub2IocmF0aW8pO1xyXG5cclxuICAgICAgICB0aGlzLmRlYm91bmNlKCdleHBhbmRLbm9iJywgdGhpcy5fZXhwYW5kS25vYiwgNjApO1xyXG5cclxuICAgICAgICAvLyBpZiB0aGUgcmF0aW8gZG9lc24ndCBjaGFuZ2UsIHNsaWRlcktub2IncyBhbmltYXRpb24gd29uJ3Qgc3RhcnRcclxuICAgICAgICAvLyBhbmQgYF9rbm9iVHJhbnNpdGlvbkVuZGAgd29uJ3QgYmUgY2FsbGVkXHJcbiAgICAgICAgLy8gVGhlcmVmb3JlLCB3ZSBuZWVkIHRvIG1hbnVhbGx5IHVwZGF0ZSB0aGUgYHRyYW5zaXRpbmdgIHN0YXRlXHJcblxyXG4gICAgICAgIGlmIChwcmV2UmF0aW8gPT09IHRoaXMucmF0aW8pIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0VHJhbnNpdGluZyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmFzeW5jKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpcmUoJ2NoYW5nZScsIHtjb21wb3NlZDogdHJ1ZX0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBjYW5jZWwgc2VsZWN0aW9uXHJcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgLy8gc2V0IHRoZSBmb2N1cyBtYW51YWxseSBiZWNhdXNlIHdlIHdpbGwgY2FsbGVkIHByZXZlbnQgZGVmYXVsdFxyXG4gICAgICAgIHRoaXMuZm9jdXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBfa25vYlRyYW5zaXRpb25FbmQoZXZlbnQpIHtcclxuICAgICAgICB0aGlzLnNsaWRlcktub2IgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignI3NsaWRlcktub2InKTtcclxuICAgICAgICBpZiAoZXZlbnQudGFyZ2V0ID09PSB0aGlzLnNsaWRlcktub2IpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0VHJhbnNpdGluZyhmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF91cGRhdGVNYXJrZXJzKG1heE1hcmtlcnMsIG1pbiwgbWF4LCBzbmFwcykge1xyXG4gICAgICAgIGlmICghc25hcHMpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2V0TWFya2VycyhbXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzdGVwcyA9IE1hdGgucm91bmQoKG1heCAtIG1pbikgLyB0aGlzLnN0ZXApO1xyXG4gICAgICAgIGlmIChzdGVwcyA+IG1heE1hcmtlcnMpIHtcclxuICAgICAgICAgICAgc3RlcHMgPSBtYXhNYXJrZXJzO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc3RlcHMgPCAwIHx8ICFpc0Zpbml0ZShzdGVwcykpIHtcclxuICAgICAgICAgICAgc3RlcHMgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9zZXRNYXJrZXJzKG5ldyBBcnJheShzdGVwcykpO1xyXG4gICAgfVxyXG5cclxuICAgIF9tZXJnZUNsYXNzZXMoY2xhc3Nlcykge1xyXG4gICAgICAgIHJldHVybiBPYmplY3Qua2V5cyhjbGFzc2VzKS5maWx0ZXIoXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKGNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzZXNbY2xhc3NOYW1lXTtcclxuICAgICAgICAgICAgfSkuam9pbignICcpO1xyXG4gICAgfVxyXG5cclxuICAgIF9nZXRDbGFzc05hbWVzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9tZXJnZUNsYXNzZXMoe1xyXG4gICAgICAgICAgICBkaXNhYmxlZDogdGhpcy5kaXNhYmxlZCxcclxuICAgICAgICAgICAgcGluOiB0aGlzLnBpbixcclxuICAgICAgICAgICAgc25hcHM6IHRoaXMuc25hcHMsXHJcbiAgICAgICAgICAgIHJpbmc6IHRoaXMuaW1tZWRpYXRlVmFsdWUgPD0gdGhpcy5taW4sXHJcbiAgICAgICAgICAgIGV4cGFuZDogdGhpcy5leHBhbmQsXHJcbiAgICAgICAgICAgIGRyYWdnaW5nOiB0aGlzLmRyYWdnaW5nLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW5nOiB0aGlzLnRyYW5zaXRpbmcsXHJcbiAgICAgICAgICAgIGVkaXRhYmxlOiB0aGlzLmVkaXRhYmxlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0IF9pc1JUTCgpIHtcclxuICAgICAgICBpZiAodGhpcy5fX2lzUlRMID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhpcy5fX2lzUlRMID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcylbJ2RpcmVjdGlvbiddID09PSAncnRsJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX19pc1JUTDtcclxuICAgIH1cclxuXHJcbiAgICBfbGVmdEtleShldmVudCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc1JUTClcclxuICAgICAgICAgICAgdGhpcy5faW5jcmVtZW50S2V5KGV2ZW50KTtcclxuICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHRoaXMuX2RlY3JlbWVudEtleShldmVudCk7XHJcbiAgICB9XHJcblxyXG4gICAgX3JpZ2h0S2V5KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2lzUlRMKVxyXG4gICAgICAgICAgICB0aGlzLl9kZWNyZW1lbnRLZXkoZXZlbnQpO1xyXG4gICAgICAgIGVsc2VcclxuICAgICAgICAgICAgdGhpcy5faW5jcmVtZW50S2V5KGV2ZW50KTtcclxuICAgIH1cclxuXHJcbiAgICBfaW5jcmVtZW50S2V5KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwua2V5ID09PSAnZW5kJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHRoaXMubWF4O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbmNyZW1lbnQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmZpcmUoJ2NoYW5nZScpO1xyXG4gICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfZGVjcmVtZW50S2V5KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKSB7XHJcbiAgICAgICAgICAgIGlmIChldmVudC5kZXRhaWwua2V5ID09PSAnaG9tZScpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLm1pbjtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVjcmVtZW50KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5maXJlKCdjaGFuZ2UnKTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX2NoYW5nZVZhbHVlKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IGV2ZW50LnRhcmdldC52YWx1ZTtcclxuICAgICAgICB0aGlzLmZpcmUoJ2NoYW5nZScsIHtjb21wb3NlZDogdHJ1ZX0pO1xyXG4gICAgfVxyXG5cclxuICAgIF9pbnB1dEtleURvd24oZXZlbnQpIHtcclxuICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjcmVhdGUgdGhlIGVsZW1lbnQgcmlwcGxlIGluc2lkZSB0aGUgYHNsaWRlcktub2JgXHJcbiAgICBfY3JlYXRlUmlwcGxlKCkge1xyXG4gICAgICAgIHRoaXMuc2xpZGVyS25vYiA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcjc2xpZGVyS25vYicpO1xyXG4gICAgICAgIHRoaXMuX3JpcHBsZUNvbnRhaW5lciA9IHRoaXMuc2xpZGVyS25vYjtcclxuICAgICAgICByZXR1cm4gUGFwZXJJbmt5Rm9jdXNCZWhhdmlvckltcGwuX2NyZWF0ZVJpcHBsZS5jYWxsKHRoaXMpOy8vLmNhbGwodGhpcyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gSGlkZSB0aGUgcmlwcGxlIHdoZW4gdXNlciBpcyBub3QgaW50ZXJhY3Rpbmcgd2l0aCBrZXlib2FyZC5cclxuICAgIC8vIFRoaXMgYmVoYXZpb3IgaXMgZGlmZmVyZW50IGZyb20gb3RoZXIgcmlwcGxlLXkgY29udHJvbHMsIGJ1dCBpc1xyXG4gICAgLy8gYWNjb3JkaW5nIHRvIHNwZWM6IGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vZGVzaWduL3NwZWMvY29tcG9uZW50cy9zbGlkZXJzLmh0bWxcclxuICAgIF9mb2N1c2VkQ2hhbmdlZChyZWNlaXZlZEZvY3VzRnJvbUtleWJvYXJkKSB7XHJcbiAgICAgICAgaWYgKHJlY2VpdmVkRm9jdXNGcm9tS2V5Ym9hcmQpIHtcclxuICAgICAgICAgICAgdGhpcy5lbnN1cmVSaXBwbGUoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuaGFzUmlwcGxlKCkpIHtcclxuICAgICAgICAgICAgLy8gbm90ZSwgcmlwcGxlIG11c3QgYmUgdW4taGlkZGVuIHByaW9yIHRvIHNldHRpbmcgYGhvbGREb3duYFxyXG4gICAgICAgICAgICBpZiAocmVjZWl2ZWRGb2N1c0Zyb21LZXlib2FyZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fcmlwcGxlLnN0eWxlLmRpc3BsYXkgPSAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3JpcHBsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3JpcHBsZS5ob2xkRG93biA9IHJlY2VpdmVkRm9jdXNGcm9tS2V5Ym9hcmQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldEVsZSh0YWcpIHsgcmV0dXJuIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKHRhZyk7IH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcmVkIHdoZW4gdGhlIHNsaWRlcidzIHZhbHVlIGNoYW5nZXMuXHJcbiAgICAgKlxyXG4gICAgICogQGV2ZW50IHZhbHVlLWNoYW5nZVxyXG4gICAgICovXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlZCB3aGVuIHRoZSBzbGlkZXIncyBpbW1lZGlhdGVWYWx1ZSBjaGFuZ2VzLiBPbmx5IG9jY3VycyB3aGlsZSB0aGVcclxuICAgICAqIHVzZXIgaXMgZHJhZ2dpbmcuXHJcbiAgICAgKlxyXG4gICAgICogVG8gZGV0ZWN0IGNoYW5nZXMgdG8gaW1tZWRpYXRlVmFsdWUgdGhhdCBoYXBwZW4gZm9yIGFueSBpbnB1dCAoaS5lLlxyXG4gICAgICogZHJhZ2dpbmcsIHRhcHBpbmcsIGNsaWNraW5nLCBldGMuKSBsaXN0ZW4gZm9yIGltbWVkaWF0ZS12YWx1ZS1jaGFuZ2VkXHJcbiAgICAgKiBpbnN0ZWFkLlxyXG4gICAgICpcclxuICAgICAqIEBldmVudCBpbW1lZGlhdGUtdmFsdWUtY2hhbmdlXHJcbiAgICAgKi9cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZpcmVkIHdoZW4gdGhlIHNsaWRlcidzIHZhbHVlIGNoYW5nZXMgZHVlIHRvIHVzZXIgaW50ZXJhY3Rpb24uXHJcbiAgICAgKlxyXG4gICAgICogQ2hhbmdlcyB0byB0aGUgc2xpZGVyJ3MgdmFsdWUgZHVlIHRvIGNoYW5nZXMgaW4gYW4gdW5kZXJseWluZ1xyXG4gICAgICogYm91bmQgdmFyaWFibGUgd2lsbCBub3QgdHJpZ2dlciB0aGlzIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqIEBldmVudCBjaGFuZ2VcclxuICAgICAqL1xyXG59XHJcblxyXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdwYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyJywgUGFwZXJTaW5nbGVSYW5nZVNsaWRlcik7XHJcbiIsICJpbXBvcnQge2h0bWwsIFBvbHltZXJFbGVtZW50fSBmcm9tICdAcG9seW1lci9wb2x5bWVyL3BvbHltZXItZWxlbWVudC5qcyc7XG5pbXBvcnQgeyBHZXN0dXJlRXZlbnRMaXN0ZW5lcnMgfSBmcm9tICdAcG9seW1lci9wb2x5bWVyL2xpYi9taXhpbnMvZ2VzdHVyZS1ldmVudC1saXN0ZW5lcnMuanMnO1xuXG5pbXBvcnQgJy4vcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci5qcydcbi8qKlxuICogYHBhcGVyLXJhbmdlLXNsaWRlcmBcbiAqIEEgbWF0ZXJpYWwgZGVzaWduLXN0eWxlIHJhbmdlLXNsaWRlciwgY29tcG9zZWQgb2YgcGFwZXItc2xpZGVyIGVsZW1lbnRzXG4gKlxuICogQGN1c3RvbUVsZW1lbnRcbiAqIEBwb2x5bWVyXG4gKiBAZGVtbyBkZW1vL2luZGV4Lmh0bWxcbiAqL1xuY2xhc3MgUGFwZXJSYW5nZVNsaWRlciBleHRlbmRzIEdlc3R1cmVFdmVudExpc3RlbmVycyhQb2x5bWVyRWxlbWVudCkge1xuICAgIHN0YXRpYyBnZXQgdGVtcGxhdGUoKSB7XG4gICAgICAgIHJldHVybiBodG1sYFxuICAgICAgICA8c3R5bGU+XG4gICAgICAgICAgICAgIC8qIGxvY2FsIHN0eWxlcyBnbyBoZXJlICovXG4gICAgICAgICAgICAgIDpob3N0IHtcbiAgICAgICAgICAgICAgICBAYXBwbHkgLS1sYXlvdXQ7XG4gICAgICAgICAgICAgICAgQGFwcGx5IC0tbGF5b3V0LWp1c3RpZmllZDtcbiAgICAgICAgICAgICAgICBAYXBwbHkgLS1sYXlvdXQtY2VudGVyO1xuICBcbiAgICAgICAgICAgICAgICAtLXBhcGVyLXJhbmdlLXNsaWRlci13aWR0aDogMjAwcHg7XG4gIFxuICAgICAgICAgICAgICAgIC0tcGFwZXItcmFuZ2Utc2xpZGVyLWxvd2VyLWNvbG9yOiAgICAgICAgICAgICB2YXIoLS1wYXBlci1ncmV5LTQwMCk7XG4gICAgICAgICAgICAgICAgLS1wYXBlci1yYW5nZS1zbGlkZXItYWN0aXZlLWNvbG9yOiAgICAgICAgICAgIHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgICAgICAgICAgIC0tcGFwZXItcmFuZ2Utc2xpZGVyLWhpZ2hlci1jb2xvcjogICAgICAgICAgICB2YXIoLS1wYXBlci1ncmV5LTQwMCk7XG4gICAgICAgICAgICAgICAgLS1wYXBlci1yYW5nZS1zbGlkZXIta25vYi1jb2xvcjogICAgICAgICAgICAgIHZhcigtLXByaW1hcnktY29sb3IpO1xuICAgICAgICAgICAgICAgIC0tcGFwZXItcmFuZ2Utc2xpZGVyLXBpbi1jb2xvcjogICAgICAgICAgICAgICB2YXIoLS1wcmltYXJ5LWNvbG9yKTtcbiAgICAgICAgICAgICAgICAtLXBhcGVyLXJhbmdlLXNsaWRlci1waW4tc3RhcnQtY29sb3I6ICAgICAgICAgdmFyKC0tcGFwZXItZ3JleS00MDApO1xuICAgICAgICAgICAgICAgIC0tcGFwZXItcmFuZ2Utc2xpZGVyLWtub2Itc3RhcnQtY29sb3I6ICAgICAgICB0cmFuc3BhcmVudDtcbiAgICAgICAgICAgICAgICAtLXBhcGVyLXJhbmdlLXNsaWRlci1rbm9iLXN0YXJ0LWJvcmRlci1jb2xvcjogdmFyKC0tcGFwZXItZ3JleS00MDApO1xuICAgICAgICAgICAgICB9XG4gIFxuICAgICAgICAgICAgICAjc2xpZGVyT3V0ZXJEaXZfMCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICAgICAgICAgICAgICAgIHdpZHRoOiB2YXIoLS1wYXBlci1yYW5nZS1zbGlkZXItd2lkdGgpO1xuICAgICAgICAgICAgICB9XG4gIFxuICAgICAgICAgICAgICAjc2xpZGVyT3V0ZXJEaXZfMSB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICAgICAgICAgICAgIGhlaWdodDogY2FsYygzMHB4ICsgdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1oZWlnaHQsIDJweCkpO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAwO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAwO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDA7XG4gICAgICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgICAgIC8qIG1pbWljIHRoZSBzaXplIG9mIHRoZSAjc2xpZGVyS25vYiBvZiBwYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyICovXG4gICAgICAgICAgICAgIC5zbGlkZXJLbm9iTWluTWF4IHtcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgbGVmdDogMDtcbiAgICAgICAgICAgICAgICB0b3A6IDA7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IGNhbGMoLTE1cHggLSB2YXIoLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWhlaWdodCwgMnB4KS8yKTtcbiAgICAgICAgICAgICAgICB3aWR0aDogY2FsYygzMHB4ICsgdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1oZWlnaHQsIDJweCkpO1xuICAgICAgICAgICAgICAgIGhlaWdodDogY2FsYygzMHB4ICsgdmFyKC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1oZWlnaHQsIDJweCkpO1xuICAgICAgICAgICAgICAgIC8qYmFja2dyb3VuZDogIzIxOTZGMzsgb3BhY2l0eTogMC4zOyovXG4gICAgICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgICAgIC5kaXZTcGFuV2lkdGgge1xuICAgICAgICAgICAgICAgICAgcG9zaXRpb246YWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICB3aWR0aDoxMDAlO1xuICAgICAgICAgICAgICAgICAgZGlzcGxheTpibG9jaztcbiAgICAgICAgICAgICAgICAgIHRvcDowcHg7XG4gICAgICAgICAgICAgIH1cbiAgXG4gICAgICAgICAgICAgICNzbGlkZXJNYXgge1xuICAgICAgICAgICAgICAgICAgbGluZS1oZWlnaHQ6IG5vcm1hbDtcbiAgICAgICAgICAgICAgICAgIC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1iYXItY29sb3I6ICAgICAgICAgICAgICAgdHJhbnNwYXJlbnQ7XG4gICAgICAgICAgICAgICAgICAtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXIta25vYi1jb2xvcjogICAgICAgICAgICAgIHZhcigtLXBhcGVyLXJhbmdlLXNsaWRlci1rbm9iLWNvbG9yKTtcbiAgICAgICAgICAgICAgICAgIC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1waW4tY29sb3I6ICAgICAgICAgICAgICAgdmFyKC0tcGFwZXItcmFuZ2Utc2xpZGVyLXBpbi1jb2xvcik7XG4gICAgICAgICAgICAgICAgICAtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItYWN0aXZlLWNvbG9yOiAgICAgICAgICAgIHZhcigtLXBhcGVyLXJhbmdlLXNsaWRlci1hY3RpdmUtY29sb3IpO1xuICAgICAgICAgICAgICAgICAgLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLXNlY29uZGFyeS1jb2xvcjogICAgICAgICB2YXIoLS1wYXBlci1yYW5nZS1zbGlkZXItaGlnaGVyLWNvbG9yKTtcbiAgICAgICAgICAgICAgICAgIC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1waW4tc3RhcnQtY29sb3I6ICAgICAgICAgdmFyKC0tcGFwZXItcmFuZ2Utc2xpZGVyLXBpbi1zdGFydC1jb2xvcik7XG4gICAgICAgICAgICAgICAgICAtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXIta25vYi1zdGFydC1jb2xvcjogICAgICAgIHZhcigtLXBhcGVyLXJhbmdlLXNsaWRlci1rbm9iLXN0YXJ0LWNvbG9yKTtcbiAgICAgICAgICAgICAgICAgIC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1rbm9iLXN0YXJ0LWJvcmRlci1jb2xvcjogdmFyKC0tcGFwZXItcmFuZ2Utc2xpZGVyLWtub2Itc3RhcnQtYm9yZGVyLWNvbG9yKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAjc2xpZGVyTWluIHtcbiAgICAgICAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiBub3JtYWw7XG4gICAgICAgICAgICAgICAgICAtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItYWN0aXZlLWNvbG9yOiAgICAgICAgICAgIHZhcigtLXBhcGVyLXJhbmdlLXNsaWRlci1sb3dlci1jb2xvcik7XG4gICAgICAgICAgICAgICAgICAtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItc2Vjb25kYXJ5LWNvbG9yOiAgICAgICAgIHRyYW5zcGFyZW50O1xuICAgICAgICAgICAgICAgICAgLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWtub2ItY29sb3I6ICAgICAgICAgICAgICB2YXIoLS1wYXBlci1yYW5nZS1zbGlkZXIta25vYi1jb2xvcik7XG4gICAgICAgICAgICAgICAgICAtLXBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXItcGluLWNvbG9yOiAgICAgICAgICAgICAgIHZhcigtLXBhcGVyLXJhbmdlLXNsaWRlci1waW4tY29sb3IpO1xuICAgICAgICAgICAgICAgICAgLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLXBpbi1zdGFydC1jb2xvcjogICAgICAgICB2YXIoLS1wYXBlci1yYW5nZS1zbGlkZXItcGluLXN0YXJ0LWNvbG9yKTtcbiAgICAgICAgICAgICAgICAgIC0tcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci1rbm9iLXN0YXJ0LWNvbG9yOiAgICAgICAgdmFyKC0tcGFwZXItcmFuZ2Utc2xpZGVyLWtub2Itc3RhcnQtY29sb3IpO1xuICAgICAgICAgICAgICAgICAgLS1wYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyLWtub2Itc3RhcnQtYm9yZGVyLWNvbG9yOiB2YXIoLS1wYXBlci1yYW5nZS1zbGlkZXIta25vYi1zdGFydC1ib3JkZXItY29sb3IpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgPC9zdHlsZT5cbiAgXG4gICAgICAgICAgPGRpdiBpZD1cInNsaWRlck91dGVyRGl2XzBcIiBzdHlsZT1cIltbbWFpbkRpdlN0eWxlXV1cIj5cbiAgICAgICAgICAgICAgPGRpdiBpZD1cInNsaWRlck91dGVyRGl2XzFcIj5cbiAgICAgICAgICAgICAgICA8IS0tIHN0eWxlPVwiYmFja2dyb3VuZDogIzIxOTZGMzsgb3BhY2l0eTowLjI7XCIgLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBpZD0nYmFja0RpdicgY2xhc3M9XCJkaXZTcGFuV2lkdGhcIiBvbi1kb3duPVwiX2JhY2tEaXZEb3duXCIgb24tdGFwPVwiX2JhY2tEaXZUYXBcIlxuICAgICAgICAgICAgICAgICAgICAgb24tdXA9XCJfYmFja0RpdlVwXCIgb24tdHJhY2s9XCJfYmFja0Rpdk9uVHJhY2tcIiBvbi10cmFuc2l0aW9uZW5kPVwiX2JhY2tEaXZUcmFuc0VuZFwiPlxuICAgICAgICAgICAgICAgICAgICA8IS0tIG11c3QgaGF2ZSB0aGlzIGluIG9yZGVyIHRvIGZvcmNlIHdpZHRoL2hlaWdodCAtLT5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBpZD0nYmFja0RpdklubmVyXzAnIHN0eWxlPVwibGluZS1oZWlnaHQ6MjAwJTtcIj48YnI+PC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gIFxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJkaXZTcGFuV2lkdGhcIiBzdHlsZT1cInBvaW50ZXItZXZlbnRzOiBub25lO1wiPlxuICAgICAgICAgICAgICAgICAgPHBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXIgaWQ9J3NsaWRlck1heCcgZGlzcGxheS1mdW5jdGlvbj1cIltbZGlzcGxheUZ1bmN0aW9uXV1cIiBkaXNhYmxlZCQ9XCJbW2Rpc2FibGVkXV1cIiBvbi1kb3duPVwiX3NsaWRlck1heERvd25cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbi11cD1cIl9zbGlkZXJNYXhVcFwiIHN0ZXA9XCJbW3N0ZXBdXVwiIG1pbj1cIltbbWluXV1cIiBtYXg9XCJbW21heF1dXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9XCJbW3ZhbHVlTWF4XV1cIiBzZWNvbmRhcnktcHJvZ3Jlc3M9J1tbbWF4XV0nIHN0eWxlPVwid2lkdGg6MTAwJTtcIj5cbiAgICAgICAgICAgICAgICAgIDwvcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cImRpdlNwYW5XaWR0aFwiIHN0eWxlPVwicG9pbnRlci1ldmVudHM6IG5vbmU7XCI+XG4gICAgICAgICAgICAgICAgICA8cGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlciBpZD0nc2xpZGVyTWluJyBkaXNwbGF5LWZ1bmN0aW9uPVwiW1tkaXNwbGF5RnVuY3Rpb25dXVwiIGRpc2FibGVkJD1cIltbZGlzYWJsZWRdXVwiIG9uLWRvd249XCJfc2xpZGVyTWluRG93blwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uLXVwPVwiX3NsaWRlck1pblVwXCIgbm9pbmsgc3RlcD1cIltbc3RlcF1dXCIgbWluPVwiW1ttaW5dXVwiIG1heD1cIltbbWF4XV1cIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT1cIltbdmFsdWVNaW5dXVwiIHN0eWxlPVwid2lkdGg6MTAwJTtcIj5cbiAgICAgICAgICAgICAgICAgIDwvcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlcj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgXG4gICAgICAgICAgICAgICAgPCEtLSBub3cgYWRkIG9uZSByZWFsIGxpbmUgLS0+XG4gICAgICAgICAgICAgICAgPGRpdiBpZD0nYmFja0RpdklubmVyXzEnIHN0eWxlPVwibGluZS1oZWlnaHQ6MTAwJTtcIj48YnI+PC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgYDtcbiAgICB9XG4gICAgc3RhdGljIGdldCBpcygpIHsgcmV0dXJuICdwYXBlci1yYW5nZS1zbGlkZXInIH1cblxuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgLy8gcHJvcGVydGllc1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAgc3RhdGljIGdldCBwcm9wZXJ0aWVzKCkge1xuICAgICAgICByZXR1cm4gIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogVXNlZCB0byBjdXN0b21pemUgdGhlIGRpc3BsYXllZCB2YWx1ZSBvZiB0aGUgcGluLiBFLmcuIHRoZSB2YWx1ZSBjYW4gYmUgcHJlZml4ZWQgd2l0aCBhICckJyBsaWtlICckOTknXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGRpc3BsYXlGdW5jdGlvbjoge1xuICAgICAgICAgICAgICAgIHR5cGU6IEZ1bmN0aW9uLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogdGhlIHdpZHRoIG9mIHRoZSBlbGVtZW50IGluIHBpeGVscy5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc2xpZGVyV2lkdGg6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICAgICAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgICAgICAgICAgbm90aWZ5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlZmxlY3RUb0F0dHJpYnV0ZTogdHJ1ZVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiB0aGUgc3R5bGUgYXR0cmlidXRlIG9mIHRoZSBlbGVtZW50LlxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBtYWluRGl2U3R5bGU6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBPYmplY3QsXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge3JldHVybiB7fX0sXG4gICAgICAgICAgICAgICAgbm90aWZ5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlZmxlY3RUb0F0dHJpYnV0ZTogdHJ1ZVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiB0aGUgbWluaW1hbCB2YWx1ZSAobG93ZXIgcmFuZ2UpIG9mIHRoZSBzbGlkZXIuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIG1pbjoge1xuICAgICAgICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIHRoZSBtYXhpbWFsIHZhbHVlICh1cHBlciByYW5nZSkgb2YgdGhlIHNsaWRlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgbWF4OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAxMDAsXG4gICAgICAgICAgICAgICAgbm90aWZ5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlZmxlY3RUb0F0dHJpYnV0ZTogdHJ1ZVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgbG93ZXIgcmFuZ2Ugb2YgdGhlIHNsaWRlci5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFsdWVNaW46IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICAgICAgbm90aWZ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWVcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHVwcGVyIHJhbmdlIG9mIHRoZSBzbGlkZXIuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhbHVlTWF4OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAxMDAsXG4gICAgICAgICAgICAgICAgbm90aWZ5OiBmYWxzZSxcbiAgICAgICAgICAgICAgICByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWVcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogdGhlIG1pbmltYWwgc3RlcC1jaGFuZ2Ugb2YgYSBrbm9iIG9uIHRoZSBzbGlkZXJcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc3RlcDoge1xuICAgICAgICAgICAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgICAgICAgICAgICB2YWx1ZTogMSxcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWUsXG4gICAgICAgICAgICAgICAgcmVmbGVjdFRvQXR0cmlidXRlOiB0cnVlXG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIG9wdGlvbmFsIG1pbmltYWwgdmFsdWUgZm9yIHRoZSBkaWZmZXJlbmNlIGJldHdlZW4gdmFsdWVNaW4gYW5kIHZhbHVlTWF4XG4gICAgICAgICAgICAgKiBieSBkZWZhdWx0IHRoaXMgaXMgbmVnYXRpdmUgKHZhbHVlRGlmZk1pbiBpcyBpZ25vcmVkKVxuICAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YWx1ZURpZmZNaW46IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICAgICAgbm90aWZ5OiB0cnVlLFxuICAgICAgICAgICAgICAgIHJlZmxlY3RUb0F0dHJpYnV0ZTogdHJ1ZVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBvcHRpb25hbCBtYXhpbWFsIHZhbHVlIGZvciB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHZhbHVlTWluIGFuZCB2YWx1ZU1heFxuICAgICAgICAgICAgICogYnkgZGVmYXVsdCB0aGlzIGlzIG5lZ2F0aXZlICh2YWx1ZURpZmZNYXggaXMgaWdub3JlZClcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFsdWVEaWZmTWF4OiB7XG4gICAgICAgICAgICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgICAgICAgICAgIHZhbHVlOiAwLFxuICAgICAgICAgICAgICAgIG5vdGlmeTogdHJ1ZSxcbiAgICAgICAgICAgICAgICByZWZsZWN0VG9BdHRyaWJ1dGU6IHRydWVcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogaWYgdHJ1ZSwgcGlucyB3aXRoIG51bWVyaWMgdmFsdWUgbGFiZWwgYXJlIHNob3duIHdoZW4gdGhlIHNsaWRlciB0aHVtYlxuICAgICAgICAgICAgICogaXMgcHJlc3NlZC4gVXNlIGZvciBzZXR0aW5ncyBmb3Igd2hpY2ggdXNlcnMgbmVlZCB0byBrbm93IHRoZSBleGFjdFxuICAgICAgICAgICAgICogdmFsdWUgb2YgdGhlIHNldHRpbmcuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGFsd2F5c1Nob3dQaW46IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWVcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogaWYgdHJ1ZSwgcGlucyB3aXRoIG51bWVyaWMgdmFsdWUgbGFiZWwgYXJlIHNob3duIHdoZW4gdGhlIHNsaWRlciB0aHVtYlxuICAgICAgICAgICAgICogaXMgcHJlc3NlZC4gVXNlIGZvciBzZXR0aW5ncyBmb3Igd2hpY2ggdXNlcnMgbmVlZCB0byBrbm93IHRoZSBleGFjdFxuICAgICAgICAgICAgICogdmFsdWUgb2YgdGhlIHNldHRpbmcuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHBpbjoge1xuICAgICAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5vdGlmeTogdHJ1ZVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBpZiB0cnVlLCB0aGUgc2xpZGVyIHRodW1iIHNuYXBzIHRvIHRpY2sgbWFya3MgZXZlbmx5IHNwYWNlZCBiYXNlZFxuICAgICAgICAgICAgICogb24gdGhlIGBzdGVwYCBwcm9wZXJ0eSB2YWx1ZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgc25hcHM6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWVcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogaWYgdHJ1ZSwgdGhlIHNsaWRlciBpcyBkaXNhYmxlZC5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGlzYWJsZWQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWVcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogYW4gb3B0aW9uIHRvIFwicmV2ZXJ0XCIgZnJvbSB0aGUgcGFwZXItcmFuZ2Utc2xpZGVyIHRvIGEgc2luZ2xlIHBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXIuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHNpbmdsZVNsaWRlcjoge1xuICAgICAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICAgICAgICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIG5vdGlmeTogdHJ1ZVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiB0aW1lLXdpbmRvdyAoaW4gbXNlYykgdG8ga2VlcCB0aGUgc2xpZGVyLl9zZXRUcmFuc2l0aW5nKHRydWUpIGZvciB0aGVcbiAgICAgICAgICAgICAqIHR3byBwYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyIGVsZW1lbnRzLCB3aGVuIHVzaW5nIHRoZSBfc2V0VmFsdWVzVHJhbnMoKSBtZXRob2QgdG8gY2hhbmdlIHRoZVxuICAgICAgICAgICAgICogc2VsZWN0ZWQgcmFuZ2UuIFRoaXMgc2hvdWxkIGJlIHNsaWdodGx5IGhpZ2hlciB0aGFuIHRoZSB0cmFuc2l0aW9uIHRpbWUgZGVmaW5lZCBmb3IgdGhlXG4gICAgICAgICAgICAgKiBwYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyICh3aGljaCwgYXMgb2YgcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlci12MS4wLjExLCBpcyAwLjA4cy8wLjE4cykuXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHRyYW5zRHVyYXRpb246IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICAgICAgICAgICAgdmFsdWU6IDI1MCxcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogaWYgc2V0IHRvIHRydWUsIHRhcHBpbmcgdGhlIHNsaWRlciBiZWxvdyBvciBhYm92ZSB0aGUgc2VsZWN0ZWQgcmFuZ2VcbiAgICAgICAgICAgICAqIHdpbGwgdXBkYXRlIHRoZSBzZWxlY3RlZCByYW5nZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGFwVmFsdWVFeHRlbmQ6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgICAgIHZhbHVlOiB0cnVlLFxuICAgICAgICAgICAgICAgIG5vdGlmeTogdHJ1ZVxuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBpZiBzZXQgdG8gdHJ1ZSwgdGFwcGluZyB0aGUgc2xpZGVyIGluc2lkZSB0aGUgc2VsZWN0ZWQgcmFuZ2VcbiAgICAgICAgICAgICAqIHdpbGwgdXBkYXRlIHRoZSBzZWxlY3RlZCByYW5nZS5cbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGFwVmFsdWVSZWR1Y2U6IHtcbiAgICAgICAgICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICAgICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBub3RpZnk6IHRydWVcbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogaWYgc2V0IHRvIHRydWUsIHRhcHBpbmcgdGhlIHNsaWRlciB3aWxsIHVwZGF0ZSB0aGUgc2VsZWN0ZWQgcmFuZ2UsXG4gICAgICAgICAgICAgKiB3aGlsZSBrZWVwaW5nIHRoZSBzYW1lIGRpZmZlcmVuY2UgYmV0d2VlbiB2YWx1ZU1pbiBhbmQgdmFsdWVNYXguXG4gICAgICAgICAgICAgKiB0YXBWYWx1ZU1vdmUgc3VwZXJzZWRlcyB0YXBWYWx1ZUV4dGVuZCBhbmQgdGFwVmFsdWVSZWR1Y2VcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdGFwVmFsdWVNb3ZlOiB7XG4gICAgICAgICAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgICAgICAgICB2YWx1ZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbm90aWZ5OiB0cnVlXG4gICAgICAgICAgICB9LFxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIC8vIGluaXRpYWwgc2V0dGluZ3NcbiAgICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICAgIHJlYWR5KCkge1xuICAgICAgICBzdXBlci5yZWFkeSgpO1xuICAgICAgICB0aGlzLmluSW5pdCA9IHRydWU7XG5cbiAgICAgICAgdmFyIHRoaXNfICAgICAgPSB0aGlzO1xuICAgICAgICB2YXIgbkluaXRUcmllcyA9IDA7XG5cbiAgICAgICAgdmFyIHNsaWRlck1pbiA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1pblwiKTtcbiAgICAgICAgdmFyIHNsaWRlck1heCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1heFwiKTtcblxuICAgICAgICAvLyBpbml0aWFsaXphdGlvbiBvbmNlIHRoZSBwYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyIGVsZW1lbnRzIGhhdmUgYmVlbiByZW5kZXJlZFxuICAgICAgICBmdW5jdGlvbiBfcmVhZHkoKSB7XG4gICAgICAgICAgICBpZihzbGlkZXJNaW4uaXNSZWFkeSAmJiBzbGlkZXJNYXguaXNSZWFkeSkge1xuICAgICAgICAgICAgICAgIHRoaXNfLmluaXQoKTtcblxuICAgICAgICAgICAgICAgIC8vIHNldHVwIGxpc3RlbmVycyBmb3IgdXBkYXRpbmcgZXZlcnl0aGluZyB3aGVuZXZlciBhIGtub2IgaXMgYWZmZWN0ZWRcbiAgICAgICAgICAgICAgICBzbGlkZXJNaW4uYWRkRXZlbnRMaXN0ZW5lcignaW1tZWRpYXRlLXZhbHVlLWNoYW5nZScsIGZ1bmN0aW9uKGN1c3RvbUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNfLl9zZXRWYWx1ZU1pbk1heCh0aGlzXy5fZ2V0VmFsdWVzTWluTWF4KHRoaXMuaW1tZWRpYXRlVmFsdWUsbnVsbCksJ2ltbWVkaWF0ZS12YWx1ZS1jaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNsaWRlck1heC5hZGRFdmVudExpc3RlbmVyKCdpbW1lZGlhdGUtdmFsdWUtY2hhbmdlJywgZnVuY3Rpb24oY3VzdG9tRXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpc18uX3NldFZhbHVlTWluTWF4KHRoaXNfLl9nZXRWYWx1ZXNNaW5NYXgobnVsbCx0aGlzLmltbWVkaWF0ZVZhbHVlKSwnaW1tZWRpYXRlLXZhbHVlLWNoYW5nZScpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgc2xpZGVyTWluLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGZ1bmN0aW9uKGN1c3RvbUV2ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXNfLl9zZXRWYWx1ZU1pbk1heCh0aGlzXy5fZ2V0VmFsdWVzTWluTWF4KHRoaXMuaW1tZWRpYXRlVmFsdWUsbnVsbCksJ2NoYW5nZScpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKHRoaXNfLmFsd2F5c1Nob3dQaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNfLiQuc2xpZGVyTWluLl9leHBhbmRLbm9iKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHNsaWRlck1heC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBmdW5jdGlvbihjdXN0b21FdmVudCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzXy5fc2V0VmFsdWVNaW5NYXgodGhpc18uX2dldFZhbHVlc01pbk1heChudWxsLHRoaXMuaW1tZWRpYXRlVmFsdWUpLCdjaGFuZ2UnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzXy5hbHdheXNTaG93UGluKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzXy4kLnNsaWRlck1heC5fZXhwYW5kS25vYigpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzXy5pbkluaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmKG5Jbml0VHJpZXMgPCAxMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IF9yZWFkeSgpOyB9LCAxMCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiY291bGQgbm90IHByb3Blcmx5IGluaXRpYWxpemUgdGhlIHVuZGVybHlpbmcgcGFwZXItc2luZ2xlLXJhbmdlLXNsaWRlciBlbGVtZW50cyAuLi5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG5Jbml0VHJpZXMrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBfcmVhZHkoKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogaW5pdGlhbGl6ZSBiYXNpYyBwcm9wZXJ0aWVzIChjYW4gYmUgY2FsbGVkIGFnYWluIGJ5IHRoZSB1c2VyKVxuICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAqL1xuICAgIGluaXQoKSB7XG4gICAgICAgIHRoaXMuc2V0U2luZ2xlU2xpZGVyKHRoaXMuc2luZ2xlU2xpZGVyKTtcbiAgICAgICAgdGhpcy5zZXREaXNhYmxlZCh0aGlzLmRpc2FibGVkKTtcblxuICAgICAgICAvLyBzb21lIGJhc2ljIHByb3BlcnRpZXNcbiAgICAgICAgaWYodGhpcy5hbHdheXNTaG93UGluKSB7IHRoaXMucGluID0gdHJ1ZTsgfVxuXG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1pblwiKS5waW4gICA9IHRoaXMucGluO1xuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNYXhcIikucGluICAgPSB0aGlzLnBpbjtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWluXCIpLnNuYXBzID0gdGhpcy5zbmFwcztcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWF4XCIpLnNuYXBzID0gdGhpcy5zbmFwcztcblxuICAgICAgICBpZih0aGlzLnNsaWRlcldpZHRoICE9IFwiXCIpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGVzKHtcbiAgICAgICAgICAgICAgICAnLS1wYXBlci1yYW5nZS1zbGlkZXItd2lkdGgnOiB0aGlzLnNsaWRlcldpZHRoLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBzaW5jZSB0aGUgdHdvIHNpbmdsZSBzbGlkZXJzIGFyZSBvdmVybGFpZCwgd2UgbmVlZCB0byByZW1vdmUgZm9yZWdyb3VuZCBjb2xvclxuICAgICAgICB0aGlzLnNsaWRlckJhciA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1pblwiKS5nZXRFbGUoJyNzbGlkZXJCYXInKTtcbiAgICAgICAgaWYodGhpcy5zbGlkZXJCYXIpIHtcbiAgICAgICAgICAgIHRoaXMucHJvZ3Jlc3NDb250YWluZXIgPSB0aGlzLnNsaWRlckJhci5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJyNwcm9ncmVzc0NvbnRhaW5lcicpO1xuICAgICAgICAgICAgaWYodGhpcy5wcm9ncmVzc0NvbnRhaW5lcikgdGhpcy5wcm9ncmVzc0NvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kID0gXCJ0cmFuc3BhcmVudFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gaW50ZXJuYWwgdmFyaWFibGUgdG8gcHJldmVudCB1bm5lZWRlZCBmaXJlIG9uIHVwZGF0ZXNcbiAgICAgICAgdGhpcy5fcHJldlVwZGF0ZVZhbHVlcyA9IFt0aGlzLm1pbiwgdGhpcy5tYXhdO1xuXG4gICAgICAgIC8vIHNldCBpbnRlcm5hbCB2YXJpYWJsZXMgdG8gY29udHJvbCB0aGUgbWluaW1hbCBhbmQgbWF4aW1hbCBkaWZmZXJlbmNlIGJldHdlZW4gc2VsZWN0ZWQgdmFsdWVzXG4gICAgICAgIHRoaXMuX3NldFZhbHVlRGlmZigpO1xuXG4gICAgICAgIC8vIGluaXRpYWwgc2V0dGluZyBhZnRlciB2ZXJpZnlpbmcgdGhpcy5fdmFsdWVEaWZmTWluLCB0aGlzLl92YWx1ZURpZmZNYXhcbiAgICAgICAgdGhpcy5fc2V0VmFsdWVNaW5NYXgodGhpcy5fZ2V0VmFsdWVzTWluTWF4KHRoaXMudmFsdWVNaW4sIHRoaXMudmFsdWVNYXgpLCdpbml0Jyk7XG5cbiAgICAgICAgLy8gYWN0aXZhdGUgdGhlIHBpbnMsIGFuZCBuZXZlciBoaWRlXG4gICAgICAgIGlmKHRoaXMuYWx3YXlzU2hvd1Bpbikge1xuICAgICAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWluXCIpLl9leHBhbmRLbm9iKCk7XG4gICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNYXhcIikuX2V4cGFuZEtub2IoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBpbnRlcm5hbCB2YXJpYWJsZXMgZm9yIG1pbmltYWwvbWF4aW1hbCBkaWZmZXJlbmNlIGJldHdlZW4gdGhpcy52YWx1ZU1pbiwgdGhpcy52YWx1ZU1heFxuICAgIC8vIGVhY2ggb25lIGlzIGJldHdlZW4gemVybyBhbmQgdGhlIG1heGltYWwgZGlmZmVyZW5jZSBhdmFpbGFibGUgaW4gdGhlIHJhbmdlLCBhbmRcbiAgICAvLyB0aGUgdGhpcy5fdmFsdWVEaWZmTWluIGNhbiBub3QgYmUgbGFyZ2VyIHRoYW4gdGhpcy5fdmFsdWVEaWZmTWF4XG4gICAgX3NldFZhbHVlRGlmZigpIHtcbiAgICAgICAgdGhpcy5fdmFsdWVEaWZmTWF4ID0gTWF0aC5tYXgodGhpcy52YWx1ZURpZmZNYXgsIDApO1xuICAgICAgICB0aGlzLl92YWx1ZURpZmZNaW4gPSBNYXRoLm1heCh0aGlzLnZhbHVlRGlmZk1pbiwgMCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGdldCBhIG5ldyBzZXQgb2YgbWluL21heCB2YWx1ZXMsIGZvbGxvd2luZyBwcmVkZWZpbmVkIHJ1bGVzIGZvciBvdmVybGFwIG9mIHRoZSB0d29cbiAgICBfZ2V0VmFsdWVzTWluTWF4KHZhbHVlTWluLHZhbHVlTWF4KSB7XG4gICAgICAgIHZhciBoYXNNaW4gPSAodmFsdWVNaW4gIT0gbnVsbCAmJiB2YWx1ZU1pbiA+PSB0aGlzLm1pbiAmJiB2YWx1ZU1pbiA8PSB0aGlzLm1heCk7XG4gICAgICAgIHZhciBoYXNNYXggPSAodmFsdWVNYXggIT0gbnVsbCAmJiB2YWx1ZU1heCA+PSB0aGlzLm1pbiAmJiB2YWx1ZU1heCA8PSB0aGlzLm1heCk7XG5cbiAgICAgICAgaWYoIWhhc01pbiAmJiAhaGFzTWF4KSB7IHJldHVybiBbdGhpcy52YWx1ZU1pbix0aGlzLnZhbHVlTWF4XTsgfVxuXG4gICAgICAgIHZhciB2YWx1ZU5vd01pbiA9IGhhc01pbiA/IHZhbHVlTWluIDogdGhpcy52YWx1ZU1pbjtcbiAgICAgICAgdmFyIHZhbHVlTm93TWF4ID0gaGFzTWF4ID8gdmFsdWVNYXggOiB0aGlzLnZhbHVlTWF4O1xuXG4gICAgICAgIHZhbHVlTm93TWluID0gTWF0aC5taW4oTWF0aC5tYXgodmFsdWVOb3dNaW4sIHRoaXMubWluKSwgdGhpcy5tYXgpXG4gICAgICAgIHZhbHVlTm93TWF4ID0gTWF0aC5taW4oTWF0aC5tYXgodmFsdWVOb3dNYXgsIHRoaXMubWluKSwgdGhpcy5tYXgpXG5cbiAgICAgICAgdmFyIGRpZmZOb3cgID0gdmFsdWVOb3dNYXggLSB2YWx1ZU5vd01pbjtcblxuICAgICAgICAvLyB0aGUgYW5jaG9yIGlzIHRoZSB2YWx1ZU1pbiBpZiBpdCBpcyBleHBsaWNpdGx5IHByb3ZpZGVkXG4gICAgICAgIGlmKGhhc01pbikge1xuICAgICAgICAgICAgaWYoZGlmZk5vdyA8IHRoaXMuX3ZhbHVlRGlmZk1pbikge1xuICAgICAgICAgICAgICAgIHZhbHVlTm93TWF4ID0gTWF0aC5taW4odGhpcy5tYXgsIHZhbHVlTm93TWluICsgdGhpcy5fdmFsdWVEaWZmTWluKTtcbiAgICAgICAgICAgICAgICBkaWZmTm93ICA9IHZhbHVlTm93TWF4IC0gdmFsdWVOb3dNaW47XG4gICAgICAgICAgICAgICAgaWYoZGlmZk5vdyA8IHRoaXMuX3ZhbHVlRGlmZk1pbikge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZU5vd01pbiA9IHZhbHVlTm93TWF4IC0gdGhpcy5fdmFsdWVEaWZmTWluO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYoZGlmZk5vdyA+IHRoaXMuX3ZhbHVlRGlmZk1heCAmJiB0aGlzLl92YWx1ZURpZmZNYXggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVOb3dNYXggPSB2YWx1ZU5vd01pbiArIHRoaXMuX3ZhbHVlRGlmZk1heDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvLyBpZiBubyB2YWx1ZU1pbiBnaXZlbiwgZGVjaWRlIHRoZSBhbmNob3IgaXMgdmFsdWVNYXhcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBpZihkaWZmTm93IDwgdGhpcy5fdmFsdWVEaWZmTWluKSB7XG4gICAgICAgICAgICAgICAgdmFsdWVOb3dNaW4gPSBNYXRoLm1heCh0aGlzLm1pbiwgdmFsdWVOb3dNYXggLSB0aGlzLl92YWx1ZURpZmZNaW4pO1xuICAgICAgICAgICAgICAgIGRpZmZOb3cgID0gdmFsdWVOb3dNYXggLSB2YWx1ZU5vd01pbjtcbiAgICAgICAgICAgICAgICBpZihkaWZmTm93IDwgdGhpcy5fdmFsdWVEaWZmTWluKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlTm93TWF4ID0gdmFsdWVOb3dNaW4gKyB0aGlzLl92YWx1ZURpZmZNaW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihkaWZmTm93ID4gdGhpcy5fdmFsdWVEaWZmTWF4ICYmIHRoaXMuX3ZhbHVlRGlmZk1heCA+IDApIHtcbiAgICAgICAgICAgICAgICB2YWx1ZU5vd01pbiA9IHZhbHVlTm93TWF4IC0gdGhpcy5fdmFsdWVEaWZmTWF4O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIFt2YWx1ZU5vd01pbiwgdmFsdWVOb3dNYXhdO1xuICAgIH1cblxuICAgIC8vIHNldCB0aGUgdmFsdWUgb2YgdGhlIGxvdyBlZGdlIG9mIHRoZSBzZWxlY3RlZCByYW5nZVxuICAgIF9zZXRWYWx1ZU1pbih2YWx1ZSkge1xuICAgICAgICB2YWx1ZSA9IE1hdGgubWF4KHZhbHVlLCB0aGlzLm1pbik7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1pblwiKS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB0aGlzLnZhbHVlTWluID0gdmFsdWU7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBzZXQgdGhlIHZhbHVlIG9mIHRoZSBoaWdoIGVkZ2Ugb2YgdGhlIHNlbGVjdGVkIHJhbmdlXG4gICAgX3NldFZhbHVlTWF4KHZhbHVlKSB7XG4gICAgICAgIHZhbHVlID0gTWF0aC5taW4odmFsdWUsIHRoaXMubWF4KTtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWF4XCIpLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMudmFsdWVNYXggICAgICAgICAgICAgICA9IHZhbHVlO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBzZXQgdGhlIHZhbHVlcyBvZiB0aGUgbG93L2hpZ2ggZWRnZXMgb2YgdGhlIHNlbGVjdGVkIHJhbmdlIGFuZCBicm9hZGNhc3QgdGhlIGNoYW5nZVxuICAgIF9zZXRWYWx1ZU1pbk1heCh2YWx1ZXNNaW5NYXgsIGV2ZW50TmFtZSkge1xuICAgICAgICB0aGlzLl9zZXRWYWx1ZU1pbih2YWx1ZXNNaW5NYXhbMF0pO1xuICAgICAgICB0aGlzLl9zZXRWYWx1ZU1heCh2YWx1ZXNNaW5NYXhbMV0pO1xuXG4gICAgICAgIC8vIGZpcmUgdG8gaW5kaWNhdGUgYW4gdXBkYXRlIG9mIHRoaXMudmFsdWVNaW4gYW5kL29yIHRoaXMudmFsdWVNYXhcbiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZXMoZXZlbnROYW1lKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gc2V0IHRoaXMudmFsdWVNaW4gYW5kL29yIHRoaXMudmFsdWVNYXggKGNhbiBpbnB1dCBudWxsIHZhbHVlcyBvciBvdXQtb2YtcmFuZ2VcbiAgICAvLyB2YWx1ZXMgaW4gb3JkZXIgdG8gc2V0IG9ubHkgb25lIG9mIHRoZSB0d28pXG4gICAgX3NldFZhbHVlc05vVHJhbnModmFsdWVNaW4sdmFsdWVNYXgsZXZlbnROYW1lKSB7XG4gICAgICAgIC8vIHNvbWUgc2FuaXR5IGNoZWNrcy9jaGFuZ2VzXG4gICAgICAgIGlmKHZhbHVlTWluICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmKHZhbHVlTWluIDwgdGhpcy5taW4gfHwgdmFsdWVNaW4gPiB0aGlzLm1heCkgdmFsdWVNaW4gPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmKHZhbHVlTWF4ICE9IG51bGwpIHtcbiAgICAgICAgICAgIGlmKHZhbHVlTWF4IDwgdGhpcy5taW4gfHwgdmFsdWVNYXggPiB0aGlzLm1heCkgdmFsdWVNYXggPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmKHZhbHVlTWluICE9IG51bGwgJiYgdmFsdWVNYXggIT0gbnVsbCkge1xuICAgICAgICAgICAgdmFsdWVNaW4gPSBNYXRoLm1pbih2YWx1ZU1pbix2YWx1ZU1heCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBub3cgdXBkYXRlIHRoZSB2YWx1ZXNcbiAgICAgICAgdGhpcy5fc2V0VmFsdWVNaW5NYXgodGhpcy5fZ2V0VmFsdWVzTWluTWF4KHZhbHVlTWluLHZhbHVlTWF4KSwgZXZlbnROYW1lKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gX3NldFZhbHVlc05vVHJhbnMgd2l0aCBhIHRyYW5zaXRpb25cbiAgICBfc2V0VmFsdWVzVHJhbnModmFsdWVNaW4sdmFsdWVNYXgsZXZlbnROYW1lKSB7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1pblwiKS5fc2V0VHJhbnNpdGluZyh0cnVlKTtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWF4XCIpLl9zZXRUcmFuc2l0aW5nKHRydWUpO1xuXG4gICAgICAgIHRoaXMuX3NldFZhbHVlc05vVHJhbnModmFsdWVNaW4sdmFsdWVNYXgsZXZlbnROYW1lKTtcblxuICAgICAgICB2YXIgdGhpc18gPSB0aGlzO1xuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdGhpc18uJC5zbGlkZXJNaW4uX3NldFRyYW5zaXRpbmcoZmFsc2UpO1xuICAgICAgICAgICAgdGhpc18uJC5zbGlkZXJNYXguX3NldFRyYW5zaXRpbmcoZmFsc2UpO1xuICAgICAgICB9LCB0aGlzXy50cmFuc0R1cmF0aW9uKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaW50ZXJmYWNlIGZvciBmdW5jdGlvbnMgdG8gY29udHJvbCB0aGUgZHJhZ2dhYmxlIGludmlzaWJsZSBkaXYgd2hpY2hcbiAgICAvLyBzcGFucyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB0aGUga25vYnNcbiAgICBfYmFja0Rpdk9uVHJhY2soZXZlbnQpIHtcbiAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgc3dpdGNoIChldmVudC5kZXRhaWwuc3RhdGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ3N0YXJ0JzpcbiAgICAgICAgICAgICAgICB0aGlzLl9iYWNrRGl2VHJhY2tTdGFydChldmVudCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd0cmFjayc6XG4gICAgICAgICAgICAgICAgdGhpcy5fYmFja0RpdlRyYWNrRHVyaW5nKGV2ZW50KTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2VuZCc6XG4gICAgICAgICAgICAgICAgdGhpcy5fYmFja0RpdlRyYWNrRW5kKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcGxhY2UtaG9sZGVyIGZ1bmN0aW9uIGZvciBwb3NzaWJsZSBsYXRlciBpbXBsZW1lbnRhdGlvblxuICAgIF9iYWNrRGl2VHJhY2tTdGFydChldmVudCkgeyByZXR1cm47IH1cblxuICAgIC8vIGZ1bmN0aW9uIHRvIGVuYWJsZSBkcmFnZ2luZyBib3RoIGtub2JzIGJ5IHVzaW5nIHRoZSBpbnZpc2libGVcbiAgICAvLyBkaXYgd2hpY2ggc3BhbnMgdGhlIGRpc3RhbmNlIGluIGJldHdlZW5cbiAgICBfYmFja0RpdlRyYWNrRHVyaW5nKGUpIHtcbiAgICAgICAgdmFyIHNsaWRlck1pbiA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1pblwiKTtcbiAgICAgICAgdmFyIHNsaWRlck1heCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1heFwiKTtcblxuICAgICAgICB0aGlzLl94MV9NaW4gPSB0aGlzLl94MF9NaW4gKyBlLmRldGFpbC5keDtcbiAgICAgICAgdmFyIGltbWVkaWF0ZVZhbHVlTWluID0gc2xpZGVyTWluLl9jYWxjU3RlcCh0aGlzLl9nZXRSYXRpb1BvcyhzbGlkZXJNaW4sIHRoaXMuX3gxX01pbi90aGlzLl94V2lkdGgpKTtcblxuICAgICAgICB0aGlzLl94MV9NYXggPSB0aGlzLl94MF9NYXggKyBlLmRldGFpbC5keDtcbiAgICAgICAgdmFyIGltbWVkaWF0ZVZhbHVlTWF4ID0gc2xpZGVyTWF4Ll9jYWxjU3RlcCh0aGlzLl9nZXRSYXRpb1BvcyhzbGlkZXJNYXgsIHRoaXMuX3gxX01heC90aGlzLl94V2lkdGgpKTtcblxuICAgICAgICBpZihpbW1lZGlhdGVWYWx1ZU1pbiA+PSB0aGlzLm1pbiAmJiBpbW1lZGlhdGVWYWx1ZU1heCA8PSB0aGlzLm1heCkge1xuICAgICAgICAgICAgdGhpcy5fc2V0VmFsdWVzV2l0aEN1cnJlbnREaWZmKGltbWVkaWF0ZVZhbHVlTWluLCBpbW1lZGlhdGVWYWx1ZU1heCwgZmFsc2UpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIF9zZXRWYWx1ZXNXaXRoQ3VycmVudERpZmYodmFsdWVNaW4sIHZhbHVlTWF4LCB1c2VUcmFucykge1xuICAgICAgICB2YXIgZGlmZk1pbiA9IHRoaXMuX3ZhbHVlRGlmZk1pbjtcbiAgICAgICAgdmFyIGRpZmZNYXggPSB0aGlzLl92YWx1ZURpZmZNYXg7XG5cbiAgICAgICAgdGhpcy5fdmFsdWVEaWZmTWluID0gdGhpcy52YWx1ZU1heCAtIHRoaXMudmFsdWVNaW47XG4gICAgICAgIHRoaXMuX3ZhbHVlRGlmZk1heCA9IHRoaXMudmFsdWVNYXggLSB0aGlzLnZhbHVlTWluO1xuXG4gICAgICAgIGlmKHVzZVRyYW5zKSB0aGlzLl9zZXRWYWx1ZXNUcmFucyh2YWx1ZU1pbiwgdmFsdWVNYXgsICdfc2V0VmFsdWVzV2l0aEN1cnJlbnREaWZmJyk7XG4gICAgICAgIGVsc2UgICAgICAgICB0aGlzLl9zZXRWYWx1ZXNOb1RyYW5zKHZhbHVlTWluLCB2YWx1ZU1heCwgJ19zZXRWYWx1ZXNXaXRoQ3VycmVudERpZmYnKTtcblxuICAgICAgICB0aGlzLl92YWx1ZURpZmZNaW4gPSBkaWZmTWluO1xuICAgICAgICB0aGlzLl92YWx1ZURpZmZNYXggPSBkaWZmTWF4O1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBwbGFjZS1ob2xkZXIgZnVuY3Rpb24gZm9yIGF0IHRoZSBlbmQgb2YgdGhlIGRyYWdnaW5nIGV2ZW50LCBzbyB0aGUgZm9sbG93aW5nXG4gICAgX2JhY2tEaXZUcmFja0VuZCgpIHsgcmV0dXJuOyB9XG5cbiAgICAvLyBfc2xpZGVyTWluRG93biwgX3NsaWRlck1heERvd24sIF9zbGlkZXJNaW5VcCwgX3NsaWRlck1heFVwXG4gICAgLy8gICAgICBzaG93L2hpZGUgcGlucyAoaWYgZGVmaW5lZCkgZm9yIG9uZSBrbm9iLCB3aGVuIHRoZSBvdGhlciBrbm9iIGlzIHByZXNzZWRcbiAgICBfc2xpZGVyTWluRG93bigpIHtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWF4XCIpLl9leHBhbmRLbm9iKCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIF9zbGlkZXJNYXhEb3duKGV2ZW50KSB7XG4gICAgICAgIGlmKCF0aGlzLnNpbmdsZVNsaWRlcikge1xuICAgICAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWluXCIpLl9leHBhbmRLbm9iKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRWYWx1ZXNOb1RyYW5zKG51bGwsdGhpcy5fZ2V0RXZlbnRWYWx1ZShldmVudCksJ19zbGlkZXJNYXhEb3duJyk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgX3NsaWRlck1pblVwKCkge1xuICAgICAgICBpZih0aGlzLmFsd2F5c1Nob3dQaW4pIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1pblwiKS5fZXhwYW5kS25vYigpO1xuICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1heFwiKS5fcmVzZXRLbm9iKCk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIF9zbGlkZXJNYXhVcCgpIHtcbiAgICAgICAgaWYodGhpcy5hbHdheXNTaG93UGluKSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNYXhcIikuX2V4cGFuZEtub2IoKTtcbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNaW5cIikuX3Jlc2V0S25vYigpO1xuICAgICAgICAgICAgaWYodGhpcy5zaW5nbGVTbGlkZXIpIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1heFwiKS5fcmVzZXRLbm9iKCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gZnVuY3Rpb24gdG8gY2FsY3VsYXRlIHRoZSB2YWx1ZSBmcm9tIGFuIGV2ZW50XG4gICAgX2dldEV2ZW50VmFsdWUoZXZlbnQpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWF4XCIpLmdldEVsZSgnI3NsaWRlckNvbnRhaW5lcicpLm9mZnNldFdpZHRoO1xuICAgICAgICB2YXIgcmVjdCAgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNYXhcIikuZ2V0RWxlKCcjc2xpZGVyQ29udGFpbmVyJykuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciByYXRpbyA9IChldmVudC5kZXRhaWwueCAtIHJlY3QubGVmdCkgLyB3aWR0aDtcbiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5taW4gKyByYXRpbyAqICh0aGlzLm1heCAtIHRoaXMubWluKTtcblxuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuXG5cbiAgICAvLyBzZXQgdGhlIHZhbHVlIGlmIHRhcHBpbmcgdGhlIHNsaWRlciBiZWxvdyBvciBhYm92ZSB0aGUgc2VsZWN0ZWQgcmFuZ2VcbiAgICBfYmFja0RpdlRhcChldmVudCkge1xuICAgICAgICB0aGlzLl9zZXRWYWx1ZU5vdyA9IGZ1bmN0aW9uKHZhbHVlTWluLHZhbHVlTWF4KSB7XG4gICAgICAgICAgICBpZih0aGlzLnRhcFZhbHVlTW92ZSkgeyB0aGlzLl9zZXRWYWx1ZXNXaXRoQ3VycmVudERpZmYodmFsdWVNaW4sdmFsdWVNYXgsdHJ1ZSk7IH1cbiAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICB7IHRoaXMuX3NldFZhbHVlc1RyYW5zKHZhbHVlTWluLHZhbHVlTWF4LCdfYmFja0RpdlRhcCcpOyAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9O1xuXG4gICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuX2dldEV2ZW50VmFsdWUoZXZlbnQpO1xuICAgICAgICBpZih2YWx1ZSA+IHRoaXMudmFsdWVNaW4gJiYgdmFsdWUgPCB0aGlzLnZhbHVlTWF4KSB7XG4gICAgICAgICAgICBpZih0aGlzLnRhcFZhbHVlUmVkdWNlKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzTG93ID0gdmFsdWUgPCAodGhpcy52YWx1ZU1pbiArICh0aGlzLnZhbHVlTWF4IC0gdGhpcy52YWx1ZU1pbikvMik7XG4gICAgICAgICAgICAgICAgaWYoaXNMb3cpIHsgdGhpcy5fc2V0VmFsdWVOb3codmFsdWUsbnVsbCk7IH1cbiAgICAgICAgICAgICAgICBlbHNlICAgICAgeyB0aGlzLl9zZXRWYWx1ZU5vdyhudWxsLHZhbHVlKTsgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYodGhpcy50YXBWYWx1ZUV4dGVuZCB8fCB0aGlzLnRhcFZhbHVlTW92ZSkge1xuICAgICAgICAgICAgaWYodmFsdWUgPCB0aGlzLnZhbHVlTWluKSB7IHRoaXMuX3NldFZhbHVlTm93KHZhbHVlLG51bGwpOyB9XG4gICAgICAgICAgICBpZih2YWx1ZSA+IHRoaXMudmFsdWVNYXgpIHsgdGhpcy5fc2V0VmFsdWVOb3cobnVsbCx2YWx1ZSk7IH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBpbml0aWFsaXphdGlvbiBiZWZvcmUgc3RhcnRpbmcgdGhlIGRyYWdnaW5nIG9mIHRoZSBpbnZpc2libGVcbiAgICAvLyBkaXYgd2hpY2ggc3BhbnMgdGhlIGRpc3RhbmNlIGluIGJldHdlZW5cbiAgICBfYmFja0RpdkRvd24oZXZlbnQpIHtcbiAgICAgICAgLy8gc2hvdyBwaW5zIGlmIGRlZmluZWRcbiAgICAgICAgdGhpcy5fc2xpZGVyTWluRG93bigpO1xuICAgICAgICB0aGlzLl9zbGlkZXJNYXhEb3duKCk7XG5cbiAgICAgICAgLy8gZ2V0IHRoZSBpbml0aWFsIHBvc2l0aW9ucyBvZiBrbm9icyBiZWZvcmUgZHJhZ2dpbmcgc3RhcnRzXG4gICAgICAgIHRoaXMuX3hXaWR0aCA9ICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNaW5cIikuZ2V0RWxlKCcjc2xpZGVyQmFyJykub2Zmc2V0V2lkdGg7XG4gICAgICAgIHRoaXMuX3gwX01pbiA9ICh0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNaW5cIikucmF0aW8gLyAxMDAuKSAqIHRoaXMuX3hXaWR0aDtcbiAgICAgICAgdGhpcy5feDBfTWF4ID0gKHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1heFwiKS5yYXRpbyAvIDEwMC4pICogdGhpcy5feFdpZHRoO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBmaW5hbGl6YXRpb24gYWZ0ZXIgZW5kaW5nIHRoZSBkcmFnZ2luZyBvZiB0aGUgaW52aXNpYmxlXG4gICAgLy8gZGl2IHdoaWNoIHNwYW5zIHRoZSBkaXN0YW5jZSBpbiBiZXR3ZWVuXG4gICAgX2JhY2tEaXZVcCgpIHtcbiAgICAgICAgLy8gaGlkZSBwaW5zIGlmIGRlZmluZWRcbiAgICAgICAgdGhpcy5fc2xpZGVyTWluVXAoKTtcbiAgICAgICAgdGhpcy5fc2xpZGVyTWF4VXAoKTtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcGxhY2UtaG9sZGVyIGZ1bmN0aW9uIGZvciBwb3NzaWJsZSBsYXRlciBpbXBsZW1lbnRhdGlvblxuICAgIF9iYWNrRGl2VHJhbnNFbmQoZXZlbnQpIHsgcmV0dXJuOyB9XG5cbiAgICAvLyB0aGUgcG9zaXRpb24gb2YgdGhlIGtub2IgZm9yIGEgZ2l2ZW4gc2luZ2xlIHNsaWRlciwgZm9yIGEgZ2l2ZW4gcmF0aW9cbiAgICBfZ2V0UmF0aW9Qb3Moc2xpZGVyLCByYXRpbykge1xuICAgICAgICByZXR1cm4gTWF0aC5tYXgoc2xpZGVyLm1pbiwgTWF0aC5taW4oc2xpZGVyLm1heCwgKHNsaWRlci5tYXggLSBzbGlkZXIubWluKSAqIHJhdGlvICsgc2xpZGVyLm1pbikpO1xuICAgIH1cblxuICAgIC8vIGhlbHBlciBmdW5jdGlvbiB0byBjYXN0IHRvIGEgYm9vbGVhblxuICAgIF90b0Jvb2wodmFsSW4pIHsgcmV0dXJuICh2YWxJbiA9PT0gXCJmYWxzZVwiIHx8IHZhbEluID09PSBcIjBcIikgPyBmYWxzZSA6IEJvb2xlYW4odmFsSW4pOyB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdGhpcy52YWx1ZU1pbiBhbmQvb3IgdGhpcy52YWx1ZU1heCAoY2FuIGlucHV0IG51bGwgdmFsdWVzIG9yIG91dC1vZi1yYW5nZVxuICAgICAqIHZhbHVlcyBpbiBvcmRlciB0byBzZXQgb25seSBvbmUgb2YgdGhlIHR3bykgLSB0aGlzIGlzIGp1c3QgYSBwdWJsaWNcbiAgICAgKiB3cmFwcGVyIGZvciB0aGlzLl9zZXRWYWx1ZXNOb1RyYW5zKCksIGJ1dCBpbmNsdWRpbmcgdHJhbnNpdGlvbiBhbmltYXRpb25cbiAgICAgKiBAbWV0aG9kIF9zZXRWYWx1ZXNUcmFuc1xuICAgICAqL1xuICAgIHNldFZhbHVlcyh2YWx1ZU1pbix2YWx1ZU1heCxldmVudE5hbWUpIHtcbiAgICAgICAgdmFyIGV2ZW50TmFtZU5vdyA9IGV2ZW50TmFtZSA/IGV2ZW50TmFtZSA6ICdzZXRWYWx1ZXMnO1xuICAgICAgICB0aGlzLl9zZXRWYWx1ZXNUcmFucyh2YWx1ZU1pbix2YWx1ZU1heCxldmVudE5hbWVOb3cpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZmlyZSB3aGVuZXZlciB0aGlzLnZhbHVlTWluIG9yIHRoaXMudmFsdWVNYXggYXJlIGNoYW5nZWRcbiAgICAgKiBAbWV0aG9kIHVwZGF0ZVZhbHVlc1xuICAgICAqL1xuICAgIHVwZGF0ZVZhbHVlcyhldmVudE5hbWUpIHtcbiAgICAgICAgdmFyIGlzTmV3TWluID0gKHRoaXMuX3ByZXZVcGRhdGVWYWx1ZXNbMF0gIT09IHRoaXMudmFsdWVNaW4pO1xuICAgICAgICB2YXIgaXNOZXdNYXggPSAodGhpcy5fcHJldlVwZGF0ZVZhbHVlc1sxXSAhPT0gdGhpcy52YWx1ZU1heCk7XG4gICAgICAgIGlmKGlzTmV3TWluIHx8IGlzTmV3TWF4KSB7XG4gICAgICAgICAgICB0aGlzLl9wcmV2VXBkYXRlVmFsdWVzID0gW3RoaXMudmFsdWVNaW4sIHRoaXMudmFsdWVNYXhdO1xuXG4gICAgICAgICAgICAvLyBmaXJlIGV2ZW50c1xuICAgICAgICAgICAgaWYoIXRoaXMuaW5Jbml0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCgndXBkYXRlVmFsdWVzJywgeyBidWJibGVzOnRydWUsIGNvbXBvc2VkOnRydWUsIGRldGFpbDp7dGhpczp0aGlzLCBldmVudE5hbWU6ZXZlbnROYW1lfSB9KSk7XG5cbiAgICAgICAgICAgICAgICBpZihpc05ld01pbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoJ3ZhbHVlLW1pbi1jaGFuZ2VkJywgeyBidWJibGVzOnRydWUsIGNvbXBvc2VkOnRydWUsIGRldGFpbDp7dGhpczp0aGlzLCB2YWx1ZTp0aGlzLnZhbHVlTWluLCBldmVudE5hbWU6ZXZlbnROYW1lfSB9KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZihpc05ld01heCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgQ3VzdG9tRXZlbnQoJ3ZhbHVlLW1heC1jaGFuZ2VkJywgeyBidWJibGVzOnRydWUsIGNvbXBvc2VkOnRydWUsIGRldGFpbDp7dGhpczp0aGlzLCB2YWx1ZTp0aGlzLnZhbHVlTWF4LCBldmVudE5hbWU6ZXZlbnROYW1lfSB9KVxuICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogc2V0IHRoZSBtaW5pbWFsIHZhbHVlIChsb3dlciByYW5nZSkgb2YgdGhlIHNsaWRlclxuICAgICAqIEBtZXRob2Qgc2V0TWluXG4gICAgICovXG4gICAgc2V0TWluKG1pbkluKSB7XG4gICAgICAgIC8vIHBhcGVyLXNpbmdsZS1yYW5nZS1zbGlkZXIgbmVlZHMgYSBzYWZldHkgY2hlY2sgdGhhdCB0aGUgbWluIHZhbHVlIHdlIGFyZSBnb2luZyB0byBzZXQgaXNcbiAgICAgICAgLy8gbm90IGxhcmdlciB0aGFuIHRoZSBtYXggdmFsdWUgd2hpY2ggaXMgYWxyZWFkeSBzZXRcbiAgICAgICAgaWYodGhpcy5tYXggPCBtaW5JbikgdGhpcy5tYXggPSBtaW5JbjtcblxuICAgICAgICB0aGlzLm1pbiA9IG1pbkluO1xuICAgICAgICB0aGlzLl9wcmV2VXBkYXRlVmFsdWVzID0gW3RoaXMubWluLCB0aGlzLm1heF07XG5cbiAgICAgICAgLy8gdXBkYXRlIHRoZSBzZWxlY3RlZCB2YWx1ZSBpZiBpdCBpcyBub3cgb3V0c2lkZSBvZiB0aGUgbG93ZXIgYm91bmQsXG4gICAgICAgIC8vIG9yIGp1c3QgdXBkYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgb3ZlcmxheSBkaXZzIGZvciB0aGUgbWluL21heCBrbm9ic1xuICAgICAgICBpZih0aGlzLnZhbHVlTWluIDwgdGhpcy5taW4pIHRoaXMuX3NldFZhbHVlc05vVHJhbnModGhpcy5taW4sbnVsbCwnc2V0TWluJyk7XG5cbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCB0aGUgbWF4aW1hbCB2YWx1ZSAodXBwZXIgcmFuZ2UpIG9mIHRoZSBzbGlkZXJcbiAgICAgKiBAbWV0aG9kIHNldE1heFxuICAgICAqL1xuICAgIHNldE1heChtYXhJbikge1xuICAgICAgICAvLyBwYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyIG5lZWRzIGEgc2FmZXR5IGNoZWNrIHRoYXQgdGhlIG1pbiB2YWx1ZSB3ZSBhcmUgZ29pbmcgdG8gc2V0IGlzXG4gICAgICAgIC8vIG5vdCBsYXJnZXIgdGhhbiB0aGUgbWF4IHZhbHVlIHdoaWNoIGlzIGFscmVhZHkgc2V0XG4gICAgICAgIGlmKHRoaXMubWluID4gbWF4SW4pIHRoaXMubWluID0gbWF4SW47XG5cbiAgICAgICAgdGhpcy5tYXggPSBtYXhJbjtcbiAgICAgICAgdGhpcy5fcHJldlVwZGF0ZVZhbHVlcyA9IFt0aGlzLm1pbiwgdGhpcy5tYXhdO1xuXG4gICAgICAgIC8vIHVwZGF0ZSB0aGUgc2VsZWN0ZWQgdmFsdWUgaWYgaXQgaXMgbm93IG91dHNpZGUgb2YgdGhlIHVwcGVyIGJvdW5kLFxuICAgICAgICAvLyBvciBqdXN0IHVwZGF0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIG92ZXJsYXkgZGl2cyBmb3IgdGhlIG1pbi9tYXgga25vYnNcbiAgICAgICAgaWYodGhpcy52YWx1ZU1heCA+IHRoaXMubWF4KSB0aGlzLl9zZXRWYWx1ZXNOb1RyYW5zKG51bGwsdGhpcy5tYXgsJ3NldE1heCcpO1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIG1pbmltYWwgc3RlcC1jaGFuZ2Ugb2YgYSBrbm9iIG9uIHRoZSBzbGlkZXJcbiAgICAgKiBAbWV0aG9kIHNldE1heFxuICAgICAqL1xuICAgIHNldFN0ZXAoc3RlcEluKSB7XG4gICAgICAgIHRoaXMuc3RlcCA9IHN0ZXBJbjtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGdldCB0bmUgcmF0aW8gKHdpdGhpbiBbMCwxXSkgY29ycmVzcG9uZGluZyB0byB0aGUgbWluL21heCB2YWx1ZXNcbiAgICAgKiBAbWV0aG9kIGdldFJhdGlvXG4gICAgICovXG4gICAgZ2V0UmF0aW8oKSB7XG4gICAgICAgIHZhciByYXRpb01pbiA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1pblwiKS5yYXRpbyAvIDEwMC47XG4gICAgICAgIHZhciByYXRpb01heCA9IHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck1heFwiKS5yYXRpbyAvIDEwMC47XG4gICAgICAgIHJldHVybiBbcmF0aW9NaW4sIHJhdGlvTWF4XTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIG1pbmltYWwgZGlmZmVyZW5jZSBiZXR3ZWVuIHNlbGVjdGVkIHZhbHVlc1xuICAgICAqIEBtZXRob2Qgc2V0VmFsdWVEaWZmTWluXG4gICAgICovXG4gICAgc2V0VmFsdWVEaWZmTWluKHZhbHVlRGlmZk1pbikge1xuICAgICAgICB0aGlzLl92YWx1ZURpZmZNaW4gPSB2YWx1ZURpZmZNaW47XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIG1heGltYWwgZGlmZmVyZW5jZSBiZXR3ZWVuIHNlbGVjdGVkIHZhbHVlc1xuICAgICAqIEBtZXRob2Qgc2V0VmFsdWVEaWZmTWF4XG4gICAgICovXG4gICAgc2V0VmFsdWVEaWZmTWF4KHZhbHVlRGlmZk1heCkge1xuICAgICAgICB0aGlzLl92YWx1ZURpZmZNYXggPSB2YWx1ZURpZmZNYXg7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIHRhcFZhbHVlRXh0ZW5kIHByb3BlcnR5XG4gICAgICogQG1ldGhvZCBzZXRWYWx1ZURpZmZNYXhcbiAgICAgKi9cbiAgICBzZXRUYXBWYWx1ZUV4dGVuZChpc1RhcFZhbHVlRXh0ZW5kKSB7XG4gICAgICAgIHRoaXMudGFwVmFsdWVFeHRlbmQgPSB0aGlzLl90b0Jvb2woaXNUYXBWYWx1ZUV4dGVuZCk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIHRhcFZhbHVlUmVkdWNlIHByb3BlcnR5XG4gICAgICogQG1ldGhvZCBzZXRWYWx1ZURpZmZNYXhcbiAgICAgKi9cbiAgICBzZXRUYXBWYWx1ZVJlZHVjZShpc1RhcFZhbHVlUmVkdWNlKSB7XG4gICAgICAgIHRoaXMudGFwVmFsdWVSZWR1Y2UgPSB0aGlzLl90b0Jvb2woaXNUYXBWYWx1ZVJlZHVjZSk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBzZXQgdGhlIHRhcFZhbHVlTW92ZSBwcm9wZXJ0eVxuICAgICAqIEBtZXRob2Qgc2V0VmFsdWVEaWZmTWF4XG4gICAgICovXG4gICAgc2V0VGFwVmFsdWVNb3ZlKGlzVGFwVmFsdWVNb3ZlKSB7XG4gICAgICAgIHRoaXMudGFwVmFsdWVNb3ZlID0gdGhpcy5fdG9Cb29sKGlzVGFwVmFsdWVNb3ZlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIHNldCB0aGUgZGlzYWJsZWQgcGFyYW1ldGVyXG4gICAgICogQG1ldGhvZCBzZXRWYWx1ZURpZmZNYXhcbiAgICAgKi9cbiAgICBzZXREaXNhYmxlZChpc0Rpc2FibGVkKSB7XG4gICAgICAgIHRoaXMuZGlzYWJsZWQgPSB0aGlzLl90b0Jvb2woaXNEaXNhYmxlZCk7XG4gICAgICAgIHZhciBwb2ludEV2dCAgPSB0aGlzLmRpc2FibGVkID8gXCJub25lXCIgOiBcImF1dG9cIjtcblxuICAgICAgICB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNYXhcIikuZ2V0RWxlKCcjc2xpZGVyS25vYicpLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBwb2ludEV2dDtcbiAgICAgICAgdGhpcy5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCIjc2xpZGVyTWluXCIpLmdldEVsZSgnI3NsaWRlcktub2InKS5zdHlsZS5wb2ludGVyRXZlbnRzID0gcG9pbnRFdnQ7XG4gICAgICAgIHRoaXMuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKFwiI3NsaWRlck91dGVyRGl2XzFcIikuc3R5bGUucG9pbnRlckV2ZW50cyAgICAgICAgICAgICAgICA9IHBvaW50RXZ0O1xuXG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjaGFuZ2UgdGhlIHNsaWRlciBiZXR3ZWVuIHRoZSBkZWZhdWx0IHBhcGVyLXJhbmdlLXNsaWRlciBhbmQgYSBwYXBlci1zaW5nbGUtcmFuZ2Utc2xpZGVyXG4gICAgICogQG1ldGhvZCBzZXRWYWx1ZURpZmZNYXhcbiAgICAgKi9cbiAgICBzZXRTaW5nbGVTbGlkZXIoaXNTaW5nbGUpIHtcbiAgICAgICAgdGhpcy5zaW5nbGVTbGlkZXIgPSB0aGlzLl90b0Jvb2woaXNTaW5nbGUpO1xuXG4gICAgICAgIHZhciBzbGlkZXJNaW4gPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNaW5cIik7XG4gICAgICAgIHZhciBzbGlkZXJNYXggPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNzbGlkZXJNYXhcIik7XG4gICAgICAgIHZhciBiYWNrRGl2ICAgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcIiNiYWNrRGl2XCIpO1xuICAgICAgICB2YXIga25vYk1pbiAgID0gc2xpZGVyTWluLmdldEVsZSgnI3NsaWRlcktub2InKTtcbiAgICAgICAgdmFyIGtub2JNYXggICA9IHNsaWRlck1heC5nZXRFbGUoJyNzbGlkZXJLbm9iJyk7XG5cbiAgICAgICAgaWYoaXNTaW5nbGUpIHtcbiAgICAgICAgICAgIGJhY2tEaXYuc3R5bGUuZGlzcGxheSAgICAgICAgID0gJ25vbmUnO1xuICAgICAgICAgICAgc2xpZGVyTWF4LnN0eWxlLnBvaW50ZXJFdmVudHMgPSAnYXV0byc7XG4gICAgICAgICAgICBzbGlkZXJNYXguc3R5bGUuZGlzcGxheSAgICAgICA9ICcnO1xuICAgICAgICAgICAgc2xpZGVyTWluLnN0eWxlLmRpc3BsYXkgICAgICAgPSAnbm9uZSc7XG4gICAgICAgICAgICBiYWNrRGl2LnN0eWxlLmN1cnNvciAgICAgICAgICA9ICdkZWZhdWx0JztcbiAgICAgICAgICAgIGtub2JNYXguc3R5bGUuY3Vyc29yICAgICAgICAgID0gJ2RlZmF1bHQnO1xuICAgICAgICAgICAga25vYk1pbi5zdHlsZS5jdXJzb3IgICAgICAgICAgPSAnZGVmYXVsdCc7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBiYWNrRGl2LnN0eWxlLmRpc3BsYXkgICAgICAgICA9ICdibG9jayc7XG4gICAgICAgICAgICBzbGlkZXJNYXguc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcbiAgICAgICAgICAgIHNsaWRlck1heC5zdHlsZS5kaXNwbGF5ICAgICAgID0gJyc7XG4gICAgICAgICAgICBzbGlkZXJNaW4uc3R5bGUuZGlzcGxheSAgICAgICA9ICcnO1xuICAgICAgICAgICAgYmFja0Rpdi5zdHlsZS5jdXJzb3IgICAgICAgICAgPSAnZXctcmVzaXplJztcbiAgICAgICAgICAgIGtub2JNYXguc3R5bGUuY3Vyc29yICAgICAgICAgID0gJ2NvbC1yZXNpemUnO1xuICAgICAgICAgICAga25vYk1pbi5zdHlsZS5jdXJzb3IgICAgICAgICAgPSAnY29sLXJlc2l6ZSc7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkaXNhYmxlIHNvbWUgb2YgdGhlIGludGVyZmFjZSBvZiB0aGUgdHdvIHNpbmdsZSBzbGlkZXJzLFxuICAgICAgICAvLyBidXQga2VlcCB0aGUga25vYnMgYWN0aXZlIGlmIG5vdCBkaXNhYmxlZFxuICAgICAgICBzbGlkZXJNYXguZ2V0RWxlKCcjc2xpZGVyQ29udGFpbmVyJykuc3R5bGUucG9pbnRlckV2ZW50cyA9IHRoaXMuc2luZ2xlU2xpZGVyID8gXCJhdXRvXCIgOiBcIm5vbmVcIjtcbiAgICAgICAgc2xpZGVyTWluLmdldEVsZSgnI3NsaWRlckNvbnRhaW5lcicpLnN0eWxlLnBvaW50ZXJFdmVudHMgPSBcIm5vbmVcIjtcblxuICAgICAgICByZXR1cm47XG4gICAgfVxufVxuXG53aW5kb3cuY3VzdG9tRWxlbWVudHMuZGVmaW5lKCdwYXBlci1yYW5nZS1zbGlkZXInLCBQYXBlclJhbmdlU2xpZGVyKTtcbiIsICJpbXBvcnQgeyBBcG9sbG9DbGllbnQsIEluTWVtb3J5Q2FjaGUgfSBmcm9tICdAYXBvbGxvL2NsaWVudC9jb3JlJztcblxuY29uc3QgY2xpZW50ID0gbmV3IEFwb2xsb0NsaWVudCh7XG4gIHVyaTogYGh0dHBzOi8vJHtwcm9jZXNzLmVudi5TSE9QX05BTUV9Lm15c2hvcGlmeS5jb20vYXBpLzIwMjEtMDEvZ3JhcGhxbC5qc29uYCxcbiAgY2FjaGU6IG5ldyBJbk1lbW9yeUNhY2hlKCksXG4gIGhlYWRlcnM6IHtcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2dyYXBocWwnLFxuICAgICdYLVNob3BpZnktU3RvcmVmcm9udC1BY2Nlc3MtVG9rZW4nOiBgJHtwcm9jZXNzLmVudi5TVE9SRUZST05UX0FDQ0VTU19UT0tFTn1gLFxuICB9LFxufSk7XG5cbndpbmRvdy5fX0FQT0xMT19DTElFTlRfXyA9IGNsaWVudDtcbiIsICJpbXBvcnQgJ3BhcGVyLXJhbmdlLXNsaWRlcic7XG5pbXBvcnQgJy4vYXBvbGxvLWNsaWVudCc7XG5pbXBvcnQgQ29tcGFyZVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvY29tbW9uL0NvbXBhcmVUYWJsZSc7XG5cbmNvbnN0IHN0YXJ0ID0gKCkgPT4ge1xuICAvLyBhZGQgYWN0aXZlIGNsYXNzIHRvIG1lbnUgaXRlbVxuICBjb25zdCBwYXRoID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICBjb25zdCBuYXZpZ2F0aW9uRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNtYWluLW1lbnUnKTtcbiAgY29uc3QgYWN0aXZlTGlua0VsZW1lbnQgPSBuYXZpZ2F0aW9uRWxlbWVudD8ucXVlcnlTZWxlY3RvcihcbiAgICBgW2hyZWYqPVwiJHtwYXRofVwiXWBcbiAgKTtcbiAgY29uc3QgYWN0aXZlUGFyZW50TGlua0VsZW1lbnQgPSBhY3RpdmVMaW5rRWxlbWVudD8uY2xvc2VzdCgnI21haW4tbWVudT5saT5hJyk7XG4gIGFjdGl2ZVBhcmVudExpbmtFbGVtZW50Py5jbGFzc0xpc3Q/LmFkZCgnYWN0aXZlJyk7XG4gIC8vIGRvY3VtZW50LmJvZHkucmVtb3ZlQXR0cmlidXRlKCdoaWRkZW4nKTtcbiAgZG9jdW1lbnQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2N1c3RvbUVsZW1lbnRzUHJlcGFyZWQnKSk7XG59O1xuXG5pZiAoL2NvbXBsZXRlfGludGVyYWN0aXZlfGxvYWRlZC8udGVzdChkb2N1bWVudC5yZWFkeVN0YXRlKSkge1xuICBjb25zb2xlLmxvZyhkb2N1bWVudC5yZWFkeVN0YXRlKTtcbiAgc3RhcnQoKTtcbn0gZWxzZSB7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBzdGFydCwgZmFsc2UpO1xufVxuXG5leHBvcnQgeyBDb21wYXJlVGFibGUgfTtcbiJdLAogICJtYXBwaW5ncyI6ICJzbEJBQUEsb0JBZ0JBLEdBQUksSUFDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNKLEFBQUMsVUFBVSxFQUFTLENBQ2hCLEdBQUksR0FBTyxNQUFPLFNBQVcsU0FBVyxPQUFTLE1BQU8sT0FBUyxTQUFXLEtBQU8sTUFBTyxPQUFTLFNBQVcsS0FBTyxHQUNySCxBQUFJLE1BQU8sU0FBVyxZQUFjLE9BQU8sSUFDdkMsT0FBTyxRQUFTLENBQUMsV0FBWSxTQUFVLEVBQVMsQ0FBRSxFQUFRLEVBQWUsRUFBTSxFQUFlLE9BRTdGLEFBQUksTUFBTyxLQUFXLFVBQVksTUFBTyxJQUFPLFNBQVksU0FDN0QsRUFBUSxFQUFlLEVBQU0sRUFBZSxHQUFPLFdBR25ELEVBQVEsRUFBZSxJQUUzQixXQUF3QixFQUFTLEVBQVUsQ0FDdkMsTUFBSSxLQUFZLEdBQ1osQ0FBSSxNQUFPLFFBQU8sUUFBVyxXQUN6QixPQUFPLGVBQWUsRUFBUyxhQUFjLENBQUUsTUFBTyxLQUd0RCxFQUFRLFdBQWEsSUFHdEIsU0FBVSxFQUFJLEVBQUcsQ0FBRSxNQUFPLEdBQVEsR0FBTSxFQUFXLEVBQVMsRUFBSSxHQUFLLE1BR25GLFNBQVUsRUFBVSxDQUNqQixHQUFJLEdBQWdCLE9BQU8sZ0JBQ3RCLENBQUUsVUFBVyxhQUFnQixRQUFTLFNBQVUsRUFBRyxFQUFHLENBQUUsRUFBRSxVQUFZLElBQ3ZFLFNBQVUsRUFBRyxFQUFHLENBQUUsT0FBUyxLQUFLLEdBQUcsQUFBSSxFQUFFLGVBQWUsSUFBSSxHQUFFLEdBQUssRUFBRSxLQUV6RSxHQUFZLFNBQVUsRUFBRyxFQUFHLENBQ3hCLEVBQWMsRUFBRyxHQUNqQixZQUFjLENBQUUsS0FBSyxZQUFjLEVBQ25DLEVBQUUsVUFBWSxJQUFNLEtBQU8sT0FBTyxPQUFPLEdBQU0sR0FBRyxVQUFZLEVBQUUsVUFBVyxHQUFJLEtBR25GLEdBQVcsT0FBTyxRQUFVLFNBQVUsRUFBRyxDQUNyQyxPQUFTLEdBQUcsRUFBSSxFQUFHLEVBQUksVUFBVSxPQUFRLEVBQUksRUFBRyxJQUFLLENBQ2pELEVBQUksVUFBVSxHQUNkLE9BQVMsS0FBSyxHQUFHLEFBQUksT0FBTyxVQUFVLGVBQWUsS0FBSyxFQUFHLElBQUksR0FBRSxHQUFLLEVBQUUsSUFFOUUsTUFBTyxJQUdYLEdBQVMsU0FBVSxFQUFHLEVBQUcsQ0FDckIsR0FBSSxHQUFJLEdBQ1IsT0FBUyxLQUFLLEdBQUcsQUFBSSxPQUFPLFVBQVUsZUFBZSxLQUFLLEVBQUcsSUFBTSxFQUFFLFFBQVEsR0FBSyxHQUM5RSxHQUFFLEdBQUssRUFBRSxJQUNiLEdBQUksR0FBSyxNQUFRLE1BQU8sUUFBTyx1QkFBMEIsV0FDckQsT0FBUyxHQUFJLEVBQUcsRUFBSSxPQUFPLHNCQUFzQixHQUFJLEVBQUksRUFBRSxPQUFRLElBQy9ELEFBQUksRUFBRSxRQUFRLEVBQUUsSUFBTSxHQUFLLE9BQU8sVUFBVSxxQkFBcUIsS0FBSyxFQUFHLEVBQUUsS0FDdkUsR0FBRSxFQUFFLElBQU0sRUFBRSxFQUFFLEtBRTFCLE1BQU8sSUFHWCxHQUFhLFNBQVUsRUFBWSxFQUFRLEVBQUssRUFBTSxDQUNsRCxHQUFJLEdBQUksVUFBVSxPQUFRLEVBQUksRUFBSSxFQUFJLEVBQVMsSUFBUyxLQUFPLEVBQU8sT0FBTyx5QkFBeUIsRUFBUSxHQUFPLEVBQU0sRUFDM0gsR0FBSSxNQUFPLFVBQVksVUFBWSxNQUFPLFNBQVEsVUFBYSxXQUFZLEVBQUksUUFBUSxTQUFTLEVBQVksRUFBUSxFQUFLLE9BQ3BILFFBQVMsR0FBSSxFQUFXLE9BQVMsRUFBRyxHQUFLLEVBQUcsSUFBSyxBQUFJLEdBQUksRUFBVyxLQUFJLEdBQUssR0FBSSxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUksRUFBRSxFQUFRLEVBQUssR0FBSyxFQUFFLEVBQVEsS0FBUyxHQUNoSixNQUFPLEdBQUksR0FBSyxHQUFLLE9BQU8sZUFBZSxFQUFRLEVBQUssR0FBSSxHQUdoRSxHQUFVLFNBQVUsRUFBWSxFQUFXLENBQ3ZDLE1BQU8sVUFBVSxFQUFRLEVBQUssQ0FBRSxFQUFVLEVBQVEsRUFBSyxLQUczRCxHQUFhLFNBQVUsRUFBYSxFQUFlLENBQy9DLEdBQUksTUFBTyxVQUFZLFVBQVksTUFBTyxTQUFRLFVBQWEsV0FBWSxNQUFPLFNBQVEsU0FBUyxFQUFhLElBR3BILEdBQVksU0FBVSxFQUFTLEVBQVksRUFBRyxFQUFXLENBQ3JELFdBQWUsRUFBTyxDQUFFLE1BQU8sYUFBaUIsR0FBSSxFQUFRLEdBQUksR0FBRSxTQUFVLEVBQVMsQ0FBRSxFQUFRLEtBQy9GLE1BQU8sSUFBSyxJQUFNLEdBQUksVUFBVSxTQUFVLEVBQVMsRUFBUSxDQUN2RCxXQUFtQixFQUFPLENBQUUsR0FBSSxDQUFFLEVBQUssRUFBVSxLQUFLLFVBQWtCLEVBQVAsQ0FBWSxFQUFPLElBQ3BGLFdBQWtCLEVBQU8sQ0FBRSxHQUFJLENBQUUsRUFBSyxFQUFVLE1BQVMsVUFBa0IsRUFBUCxDQUFZLEVBQU8sSUFDdkYsV0FBYyxFQUFRLENBQUUsRUFBTyxLQUFPLEVBQVEsRUFBTyxPQUFTLEVBQU0sRUFBTyxPQUFPLEtBQUssRUFBVyxHQUNsRyxFQUFNLEdBQVksRUFBVSxNQUFNLEVBQVMsR0FBYyxLQUFLLFdBSXRFLEdBQWMsU0FBVSxFQUFTLEVBQU0sQ0FDbkMsR0FBSSxHQUFJLENBQUUsTUFBTyxFQUFHLEtBQU0sVUFBVyxDQUFFLEdBQUksRUFBRSxHQUFLLEVBQUcsS0FBTSxHQUFFLEdBQUksTUFBTyxHQUFFLElBQU8sS0FBTSxHQUFJLElBQUssSUFBTSxFQUFHLEVBQUcsRUFBRyxFQUMvRyxNQUFPLEdBQUksQ0FBRSxLQUFNLEVBQUssR0FBSSxNQUFTLEVBQUssR0FBSSxPQUFVLEVBQUssSUFBTSxNQUFPLFNBQVcsWUFBZSxHQUFFLE9BQU8sVUFBWSxVQUFXLENBQUUsTUFBTyxRQUFVLEVBQ3ZKLFdBQWMsRUFBRyxDQUFFLE1BQU8sVUFBVSxFQUFHLENBQUUsTUFBTyxHQUFLLENBQUMsRUFBRyxLQUN6RCxXQUFjLEVBQUksQ0FDZCxHQUFJLEVBQUcsS0FBTSxJQUFJLFdBQVUsbUNBQzNCLEtBQU8sR0FBRyxHQUFJLENBQ1YsR0FBSSxFQUFJLEVBQUcsR0FBTSxHQUFJLEVBQUcsR0FBSyxFQUFJLEVBQUUsT0FBWSxFQUFHLEdBQUssRUFBRSxPQUFjLElBQUksRUFBRSxTQUFjLEVBQUUsS0FBSyxHQUFJLEdBQUssRUFBRSxPQUFTLENBQUUsR0FBSSxFQUFFLEtBQUssRUFBRyxFQUFHLEtBQUssS0FBTSxNQUFPLEdBRTNKLE9BREksRUFBSSxFQUFHLEdBQUcsR0FBSyxDQUFDLEVBQUcsR0FBSyxFQUFHLEVBQUUsUUFDekIsRUFBRyxRQUNGLE9BQVEsR0FBRyxFQUFJLEVBQUksVUFDbkIsR0FBRyxTQUFFLFFBQWdCLENBQUUsTUFBTyxFQUFHLEdBQUksS0FBTSxRQUMzQyxHQUFHLEVBQUUsUUFBUyxFQUFJLEVBQUcsR0FBSSxFQUFLLENBQUMsR0FBSSxhQUNuQyxHQUFHLEVBQUssRUFBRSxJQUFJLE1BQU8sRUFBRSxLQUFLLE1BQU8saUJBRXBDLEdBQU0sRUFBSSxFQUFFLEtBQU0sSUFBSSxFQUFFLE9BQVMsR0FBSyxFQUFFLEVBQUUsT0FBUyxLQUFRLEdBQUcsS0FBTyxHQUFLLEVBQUcsS0FBTyxHQUFJLENBQUUsRUFBSSxFQUFHLFNBQ2pHLEdBQUksRUFBRyxLQUFPLEdBQU0sRUFBQyxHQUFNLEVBQUcsR0FBSyxFQUFFLElBQU0sRUFBRyxHQUFLLEVBQUUsSUFBTSxDQUFFLEVBQUUsTUFBUSxFQUFHLEdBQUksTUFDOUUsR0FBSSxFQUFHLEtBQU8sR0FBSyxFQUFFLE1BQVEsRUFBRSxHQUFJLENBQUUsRUFBRSxNQUFRLEVBQUUsR0FBSSxFQUFJLEVBQUksTUFDN0QsR0FBSSxHQUFLLEVBQUUsTUFBUSxFQUFFLEdBQUksQ0FBRSxFQUFFLE1BQVEsRUFBRSxHQUFJLEVBQUUsSUFBSSxLQUFLLEdBQUssTUFDM0QsQUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLE1BQ2hCLEVBQUUsS0FBSyxNQUFPLFNBRXRCLEVBQUssRUFBSyxLQUFLLEVBQVMsU0FDbkIsRUFBUCxDQUFZLEVBQUssQ0FBQyxFQUFHLEdBQUksRUFBSSxTQUFLLENBQVUsRUFBSSxFQUFJLEVBQ3RELEdBQUksRUFBRyxHQUFLLEVBQUcsS0FBTSxHQUFHLEdBQUksTUFBTyxDQUFFLE1BQU8sRUFBRyxHQUFLLEVBQUcsR0FBSyxPQUFRLEtBQU0sTUFJbEYsR0FBa0IsU0FBUyxFQUFHLEVBQUcsRUFBRyxFQUFJLENBQ3BDLEFBQUksSUFBTyxRQUFXLEdBQUssR0FDM0IsRUFBRSxHQUFNLEVBQUUsSUFHZCxHQUFlLFNBQVUsRUFBRyxFQUFTLENBQ2pDLE9BQVMsS0FBSyxHQUFHLEFBQUksSUFBTSxXQUFhLENBQUMsRUFBUSxlQUFlLElBQUksR0FBUSxHQUFLLEVBQUUsS0FHdkYsR0FBVyxTQUFVLEVBQUcsQ0FDcEIsR0FBSSxHQUFJLE1BQU8sU0FBVyxZQUFjLE9BQU8sU0FBVSxFQUFJLEdBQUssRUFBRSxHQUFJLEVBQUksRUFDNUUsR0FBSSxFQUFHLE1BQU8sR0FBRSxLQUFLLEdBQ3JCLEdBQUksR0FBSyxNQUFPLEdBQUUsUUFBVyxTQUFVLE1BQU8sQ0FDMUMsS0FBTSxVQUFZLENBQ2QsTUFBSSxJQUFLLEdBQUssRUFBRSxRQUFRLEdBQUksUUFDckIsQ0FBRSxNQUFPLEdBQUssRUFBRSxLQUFNLEtBQU0sQ0FBQyxLQUc1QyxLQUFNLElBQUksV0FBVSxFQUFJLDBCQUE0QixvQ0FHeEQsR0FBUyxTQUFVLEVBQUcsRUFBRyxDQUNyQixHQUFJLEdBQUksTUFBTyxTQUFXLFlBQWMsRUFBRSxPQUFPLFVBQ2pELEdBQUksQ0FBQyxFQUFHLE1BQU8sR0FDZixHQUFJLEdBQUksRUFBRSxLQUFLLEdBQUksRUFBRyxFQUFLLEdBQUksRUFDL0IsR0FBSSxDQUNBLEtBQVEsS0FBTSxRQUFVLEtBQU0sSUFBTSxDQUFFLEdBQUksRUFBRSxRQUFRLE1BQU0sRUFBRyxLQUFLLEVBQUUsYUFFakUsRUFBUCxDQUFnQixFQUFJLENBQUUsTUFBTyxVQUM3QixDQUNJLEdBQUksQ0FDQSxBQUFJLEdBQUssQ0FBQyxFQUFFLE1BQVMsR0FBSSxFQUFFLFNBQVksRUFBRSxLQUFLLFVBRWxELENBQVUsR0FBSSxFQUFHLEtBQU0sR0FBRSxPQUU3QixNQUFPLElBR1gsR0FBVyxVQUFZLENBQ25CLE9BQVMsR0FBSyxHQUFJLEVBQUksRUFBRyxFQUFJLFVBQVUsT0FBUSxJQUMzQyxFQUFLLEVBQUcsT0FBTyxHQUFPLFVBQVUsS0FDcEMsTUFBTyxJQUdYLEdBQWlCLFVBQVksQ0FDekIsT0FBUyxHQUFJLEVBQUcsRUFBSSxFQUFHLEVBQUssVUFBVSxPQUFRLEVBQUksRUFBSSxJQUFLLEdBQUssVUFBVSxHQUFHLE9BQzdFLE9BQVMsR0FBSSxNQUFNLEdBQUksRUFBSSxFQUFHLEVBQUksRUFBRyxFQUFJLEVBQUksSUFDekMsT0FBUyxHQUFJLFVBQVUsR0FBSSxFQUFJLEVBQUcsRUFBSyxFQUFFLE9BQVEsRUFBSSxFQUFJLElBQUssSUFDMUQsRUFBRSxHQUFLLEVBQUUsR0FDakIsTUFBTyxJQUdYLEdBQVUsU0FBVSxFQUFHLENBQ25CLE1BQU8sZ0JBQWdCLElBQVcsTUFBSyxFQUFJLEVBQUcsTUFBUSxHQUFJLElBQVEsSUFHdEUsR0FBbUIsU0FBVSxFQUFTLEVBQVksRUFBVyxDQUN6RCxHQUFJLENBQUMsT0FBTyxjQUFlLEtBQU0sSUFBSSxXQUFVLHdDQUMvQyxHQUFJLEdBQUksRUFBVSxNQUFNLEVBQVMsR0FBYyxJQUFLLEVBQUcsRUFBSSxHQUMzRCxNQUFPLEdBQUksR0FBSSxFQUFLLFFBQVMsRUFBSyxTQUFVLEVBQUssVUFBVyxFQUFFLE9BQU8sZUFBaUIsVUFBWSxDQUFFLE1BQU8sT0FBUyxFQUNwSCxXQUFjLEVBQUcsQ0FBRSxBQUFJLEVBQUUsSUFBSSxHQUFFLEdBQUssU0FBVSxFQUFHLENBQUUsTUFBTyxJQUFJLFNBQVEsU0FBVSxFQUFHLEVBQUcsQ0FBRSxFQUFFLEtBQUssQ0FBQyxFQUFHLEVBQUcsRUFBRyxJQUFNLEdBQUssRUFBTyxFQUFHLE9BQzlILFdBQWdCLEVBQUcsRUFBRyxDQUFFLEdBQUksQ0FBRSxFQUFLLEVBQUUsR0FBRyxVQUFjLEVBQVAsQ0FBWSxFQUFPLEVBQUUsR0FBRyxHQUFJLElBQzNFLFdBQWMsRUFBRyxDQUFFLEVBQUUsZ0JBQWlCLElBQVUsUUFBUSxRQUFRLEVBQUUsTUFBTSxHQUFHLEtBQUssRUFBUyxHQUFVLEVBQU8sRUFBRSxHQUFHLEdBQUksR0FDbkgsV0FBaUIsRUFBTyxDQUFFLEVBQU8sT0FBUSxHQUN6QyxXQUFnQixFQUFPLENBQUUsRUFBTyxRQUFTLEdBQ3pDLFdBQWdCLEVBQUcsRUFBRyxDQUFFLEFBQUksRUFBRSxHQUFJLEVBQUUsUUFBUyxFQUFFLFFBQVEsRUFBTyxFQUFFLEdBQUcsR0FBSSxFQUFFLEdBQUcsTUFHaEYsR0FBbUIsU0FBVSxFQUFHLENBQzVCLEdBQUksR0FBRyxFQUNQLE1BQU8sR0FBSSxHQUFJLEVBQUssUUFBUyxFQUFLLFFBQVMsU0FBVSxFQUFHLENBQUUsS0FBTSxLQUFPLEVBQUssVUFBVyxFQUFFLE9BQU8sVUFBWSxVQUFZLENBQUUsTUFBTyxPQUFTLEVBQzFJLFdBQWMsRUFBRyxFQUFHLENBQUUsRUFBRSxHQUFLLEVBQUUsR0FBSyxTQUFVLEVBQUcsQ0FBRSxNQUFRLEdBQUksQ0FBQyxHQUFLLENBQUUsTUFBTyxHQUFRLEVBQUUsR0FBRyxJQUFLLEtBQU0sSUFBTSxVQUFhLEVBQUksRUFBRSxHQUFLLEdBQU8sSUFHL0ksR0FBZ0IsU0FBVSxFQUFHLENBQ3pCLEdBQUksQ0FBQyxPQUFPLGNBQWUsS0FBTSxJQUFJLFdBQVUsd0NBQy9DLEdBQUksR0FBSSxFQUFFLE9BQU8sZUFBZ0IsRUFDakMsTUFBTyxHQUFJLEVBQUUsS0FBSyxHQUFNLEdBQUksTUFBTyxLQUFhLFdBQWEsR0FBUyxHQUFLLEVBQUUsT0FBTyxZQUFhLEVBQUksR0FBSSxFQUFLLFFBQVMsRUFBSyxTQUFVLEVBQUssVUFBVyxFQUFFLE9BQU8sZUFBaUIsVUFBWSxDQUFFLE1BQU8sT0FBUyxHQUM5TSxXQUFjLEVBQUcsQ0FBRSxFQUFFLEdBQUssRUFBRSxJQUFNLFNBQVUsRUFBRyxDQUFFLE1BQU8sSUFBSSxTQUFRLFNBQVUsRUFBUyxFQUFRLENBQUUsRUFBSSxFQUFFLEdBQUcsR0FBSSxFQUFPLEVBQVMsRUFBUSxFQUFFLEtBQU0sRUFBRSxVQUNoSixXQUFnQixFQUFTLEVBQVEsRUFBRyxFQUFHLENBQUUsUUFBUSxRQUFRLEdBQUcsS0FBSyxTQUFTLEVBQUcsQ0FBRSxFQUFRLENBQUUsTUFBTyxFQUFHLEtBQU0sS0FBUyxLQUd0SCxHQUF1QixTQUFVLEVBQVEsRUFBSyxDQUMxQyxNQUFJLFFBQU8sZUFBa0IsT0FBTyxlQUFlLEVBQVEsTUFBTyxDQUFFLE1BQU8sSUFBaUIsRUFBTyxJQUFNLEVBQ2xHLEdBR1gsR0FBZSxTQUFVLEVBQUssQ0FDMUIsR0FBSSxHQUFPLEVBQUksV0FBWSxNQUFPLEdBQ2xDLEdBQUksR0FBUyxHQUNiLEdBQUksR0FBTyxLQUFNLE9BQVMsS0FBSyxHQUFLLEFBQUksT0FBTyxlQUFlLEtBQUssRUFBSyxJQUFJLEdBQU8sR0FBSyxFQUFJLElBQzVGLFNBQU8sUUFBYSxFQUNiLEdBR1gsR0FBa0IsU0FBVSxFQUFLLENBQzdCLE1BQVEsSUFBTyxFQUFJLFdBQWMsRUFBTSxDQUFFLFFBQVcsSUFHeEQsR0FBeUIsU0FBVSxFQUFVLEVBQVksQ0FDckQsR0FBSSxDQUFDLEVBQVcsSUFBSSxHQUNoQixLQUFNLElBQUksV0FBVSxrREFFeEIsTUFBTyxHQUFXLElBQUksSUFHMUIsR0FBeUIsU0FBVSxFQUFVLEVBQVksRUFBTyxDQUM1RCxHQUFJLENBQUMsRUFBVyxJQUFJLEdBQ2hCLEtBQU0sSUFBSSxXQUFVLGtEQUV4QixTQUFXLElBQUksRUFBVSxHQUNsQixHQUdYLEVBQVMsWUFBYSxJQUN0QixFQUFTLFdBQVksSUFDckIsRUFBUyxTQUFVLElBQ25CLEVBQVMsYUFBYyxJQUN2QixFQUFTLFVBQVcsSUFDcEIsRUFBUyxhQUFjLElBQ3ZCLEVBQVMsWUFBYSxJQUN0QixFQUFTLGNBQWUsSUFDeEIsRUFBUyxlQUFnQixJQUN6QixFQUFTLGtCQUFtQixJQUM1QixFQUFTLFdBQVksSUFDckIsRUFBUyxTQUFVLElBQ25CLEVBQVMsV0FBWSxJQUNyQixFQUFTLGlCQUFrQixJQUMzQixFQUFTLFVBQVcsSUFDcEIsRUFBUyxtQkFBb0IsSUFDN0IsRUFBUyxtQkFBb0IsSUFDN0IsRUFBUyxnQkFBaUIsSUFDMUIsRUFBUyx1QkFBd0IsSUFDakMsRUFBUyxlQUFnQixJQUN6QixFQUFTLGtCQUFtQixJQUM1QixFQUFTLHlCQUEwQixJQUNuQyxFQUFTLHlCQUEwQixRQzFSdkMsb0JBZ0JBLEdBQUksSUFDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNKLEFBQUMsVUFBVSxFQUFTLENBQ2hCLEdBQUksR0FBTyxNQUFPLFNBQVcsU0FBVyxPQUFTLE1BQU8sT0FBUyxTQUFXLEtBQU8sTUFBTyxPQUFTLFNBQVcsS0FBTyxHQUNySCxBQUFJLE1BQU8sU0FBVyxZQUFjLE9BQU8sSUFDdkMsT0FBTyxRQUFTLENBQUMsV0FBWSxTQUFVLEVBQVMsQ0FBRSxFQUFRLEVBQWUsRUFBTSxFQUFlLE9BRTdGLEFBQUksTUFBTyxLQUFXLFVBQVksTUFBTyxJQUFPLFNBQVksU0FDN0QsRUFBUSxFQUFlLEVBQU0sRUFBZSxHQUFPLFdBR25ELEVBQVEsRUFBZSxJQUUzQixXQUF3QixFQUFTLEVBQVUsQ0FDdkMsTUFBSSxLQUFZLEdBQ1osQ0FBSSxNQUFPLFFBQU8sUUFBVyxXQUN6QixPQUFPLGVBQWUsRUFBUyxhQUFjLENBQUUsTUFBTyxLQUd0RCxFQUFRLFdBQWEsSUFHdEIsU0FBVSxFQUFJLEVBQUcsQ0FBRSxNQUFPLEdBQVEsR0FBTSxFQUFXLEVBQVMsRUFBSSxHQUFLLE1BR25GLFNBQVUsRUFBVSxDQUNqQixHQUFJLEdBQWdCLE9BQU8sZ0JBQ3RCLENBQUUsVUFBVyxhQUFnQixRQUFTLFNBQVUsRUFBRyxFQUFHLENBQUUsRUFBRSxVQUFZLElBQ3ZFLFNBQVUsRUFBRyxFQUFHLENBQUUsT0FBUyxLQUFLLEdBQUcsQUFBSSxFQUFFLGVBQWUsSUFBSSxHQUFFLEdBQUssRUFBRSxLQUV6RSxHQUFZLFNBQVUsRUFBRyxFQUFHLENBQ3hCLEVBQWMsRUFBRyxHQUNqQixZQUFjLENBQUUsS0FBSyxZQUFjLEVBQ25DLEVBQUUsVUFBWSxJQUFNLEtBQU8sT0FBTyxPQUFPLEdBQU0sR0FBRyxVQUFZLEVBQUUsVUFBVyxHQUFJLEtBR25GLEdBQVcsT0FBTyxRQUFVLFNBQVUsRUFBRyxDQUNyQyxPQUFTLEdBQUcsRUFBSSxFQUFHLEVBQUksVUFBVSxPQUFRLEVBQUksRUFBRyxJQUFLLENBQ2pELEVBQUksVUFBVSxHQUNkLE9BQVMsS0FBSyxHQUFHLEFBQUksT0FBTyxVQUFVLGVBQWUsS0FBSyxFQUFHLElBQUksR0FBRSxHQUFLLEVBQUUsSUFFOUUsTUFBTyxJQUdYLEdBQVMsU0FBVSxFQUFHLEVBQUcsQ0FDckIsR0FBSSxHQUFJLEdBQ1IsT0FBUyxLQUFLLEdBQUcsQUFBSSxPQUFPLFVBQVUsZUFBZSxLQUFLLEVBQUcsSUFBTSxFQUFFLFFBQVEsR0FBSyxHQUM5RSxHQUFFLEdBQUssRUFBRSxJQUNiLEdBQUksR0FBSyxNQUFRLE1BQU8sUUFBTyx1QkFBMEIsV0FDckQsT0FBUyxHQUFJLEVBQUcsRUFBSSxPQUFPLHNCQUFzQixHQUFJLEVBQUksRUFBRSxPQUFRLElBQy9ELEFBQUksRUFBRSxRQUFRLEVBQUUsSUFBTSxHQUFLLE9BQU8sVUFBVSxxQkFBcUIsS0FBSyxFQUFHLEVBQUUsS0FDdkUsR0FBRSxFQUFFLElBQU0sRUFBRSxFQUFFLEtBRTFCLE1BQU8sSUFHWCxHQUFhLFNBQVUsRUFBWSxFQUFRLEVBQUssRUFBTSxDQUNsRCxHQUFJLEdBQUksVUFBVSxPQUFRLEVBQUksRUFBSSxFQUFJLEVBQVMsSUFBUyxLQUFPLEVBQU8sT0FBTyx5QkFBeUIsRUFBUSxHQUFPLEVBQU0sRUFDM0gsR0FBSSxNQUFPLFVBQVksVUFBWSxNQUFPLFNBQVEsVUFBYSxXQUFZLEVBQUksUUFBUSxTQUFTLEVBQVksRUFBUSxFQUFLLE9BQ3BILFFBQVMsR0FBSSxFQUFXLE9BQVMsRUFBRyxHQUFLLEVBQUcsSUFBSyxBQUFJLEdBQUksRUFBVyxLQUFJLEdBQUssR0FBSSxFQUFJLEVBQUUsR0FBSyxFQUFJLEVBQUksRUFBRSxFQUFRLEVBQUssR0FBSyxFQUFFLEVBQVEsS0FBUyxHQUNoSixNQUFPLEdBQUksR0FBSyxHQUFLLE9BQU8sZUFBZSxFQUFRLEVBQUssR0FBSSxHQUdoRSxHQUFVLFNBQVUsRUFBWSxFQUFXLENBQ3ZDLE1BQU8sVUFBVSxFQUFRLEVBQUssQ0FBRSxFQUFVLEVBQVEsRUFBSyxLQUczRCxHQUFhLFNBQVUsRUFBYSxFQUFlLENBQy9DLEdBQUksTUFBTyxVQUFZLFVBQVksTUFBTyxTQUFRLFVBQWEsV0FBWSxNQUFPLFNBQVEsU0FBUyxFQUFhLElBR3BILEdBQVksU0FBVSxFQUFTLEVBQVksRUFBRyxFQUFXLENBQ3JELFdBQWUsRUFBTyxDQUFFLE1BQU8sYUFBaUIsR0FBSSxFQUFRLEdBQUksR0FBRSxTQUFVLEVBQVMsQ0FBRSxFQUFRLEtBQy9GLE1BQU8sSUFBSyxJQUFNLEdBQUksVUFBVSxTQUFVLEVBQVMsRUFBUSxDQUN2RCxXQUFtQixFQUFPLENBQUUsR0FBSSxDQUFFLEVBQUssRUFBVSxLQUFLLFVBQWtCLEVBQVAsQ0FBWSxFQUFPLElBQ3BGLFdBQWtCLEVBQU8sQ0FBRSxHQUFJLENBQUUsRUFBSyxFQUFVLE1BQVMsVUFBa0IsRUFBUCxDQUFZLEVBQU8sSUFDdkYsV0FBYyxFQUFRLENBQUUsRUFBTyxLQUFPLEVBQVEsRUFBTyxPQUFTLEVBQU0sRUFBTyxPQUFPLEtBQUssRUFBVyxHQUNsRyxFQUFNLEdBQVksRUFBVSxNQUFNLEVBQVMsR0FBYyxLQUFLLFdBSXRFLEdBQWMsU0FBVSxFQUFTLEVBQU0sQ0FDbkMsR0FBSSxHQUFJLENBQUUsTUFBTyxFQUFHLEtBQU0sVUFBVyxDQUFFLEdBQUksRUFBRSxHQUFLLEVBQUcsS0FBTSxHQUFFLEdBQUksTUFBTyxHQUFFLElBQU8sS0FBTSxHQUFJLElBQUssSUFBTSxFQUFHLEVBQUcsRUFBRyxFQUMvRyxNQUFPLEdBQUksQ0FBRSxLQUFNLEVBQUssR0FBSSxNQUFTLEVBQUssR0FBSSxPQUFVLEVBQUssSUFBTSxNQUFPLFNBQVcsWUFBZSxHQUFFLE9BQU8sVUFBWSxVQUFXLENBQUUsTUFBTyxRQUFVLEVBQ3ZKLFdBQWMsRUFBRyxDQUFFLE1BQU8sVUFBVSxFQUFHLENBQUUsTUFBTyxHQUFLLENBQUMsRUFBRyxLQUN6RCxXQUFjLEVBQUksQ0FDZCxHQUFJLEVBQUcsS0FBTSxJQUFJLFdBQVUsbUNBQzNCLEtBQU8sR0FBRyxHQUFJLENBQ1YsR0FBSSxFQUFJLEVBQUcsR0FBTSxHQUFJLEVBQUcsR0FBSyxFQUFJLEVBQUUsT0FBWSxFQUFHLEdBQUssRUFBRSxPQUFjLElBQUksRUFBRSxTQUFjLEVBQUUsS0FBSyxHQUFJLEdBQUssRUFBRSxPQUFTLENBQUUsR0FBSSxFQUFFLEtBQUssRUFBRyxFQUFHLEtBQUssS0FBTSxNQUFPLEdBRTNKLE9BREksRUFBSSxFQUFHLEdBQUcsR0FBSyxDQUFDLEVBQUcsR0FBSyxFQUFHLEVBQUUsUUFDekIsRUFBRyxRQUNGLE9BQVEsR0FBRyxFQUFJLEVBQUksVUFDbkIsR0FBRyxTQUFFLFFBQWdCLENBQUUsTUFBTyxFQUFHLEdBQUksS0FBTSxRQUMzQyxHQUFHLEVBQUUsUUFBUyxFQUFJLEVBQUcsR0FBSSxFQUFLLENBQUMsR0FBSSxhQUNuQyxHQUFHLEVBQUssRUFBRSxJQUFJLE1BQU8sRUFBRSxLQUFLLE1BQU8saUJBRXBDLEdBQU0sRUFBSSxFQUFFLEtBQU0sSUFBSSxFQUFFLE9BQVMsR0FBSyxFQUFFLEVBQUUsT0FBUyxLQUFRLEdBQUcsS0FBTyxHQUFLLEVBQUcsS0FBTyxHQUFJLENBQUUsRUFBSSxFQUFHLFNBQ2pHLEdBQUksRUFBRyxLQUFPLEdBQU0sRUFBQyxHQUFNLEVBQUcsR0FBSyxFQUFFLElBQU0sRUFBRyxHQUFLLEVBQUUsSUFBTSxDQUFFLEVBQUUsTUFBUSxFQUFHLEdBQUksTUFDOUUsR0FBSSxFQUFHLEtBQU8sR0FBSyxFQUFFLE1BQVEsRUFBRSxHQUFJLENBQUUsRUFBRSxNQUFRLEVBQUUsR0FBSSxFQUFJLEVBQUksTUFDN0QsR0FBSSxHQUFLLEVBQUUsTUFBUSxFQUFFLEdBQUksQ0FBRSxFQUFFLE1BQVEsRUFBRSxHQUFJLEVBQUUsSUFBSSxLQUFLLEdBQUssTUFDM0QsQUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLE1BQ2hCLEVBQUUsS0FBSyxNQUFPLFNBRXRCLEVBQUssRUFBSyxLQUFLLEVBQVMsU0FDbkIsRUFBUCxDQUFZLEVBQUssQ0FBQyxFQUFHLEdBQUksRUFBSSxTQUFLLENBQVUsRUFBSSxFQUFJLEVBQ3RELEdBQUksRUFBRyxHQUFLLEVBQUcsS0FBTSxHQUFHLEdBQUksTUFBTyxDQUFFLE1BQU8sRUFBRyxHQUFLLEVBQUcsR0FBSyxPQUFRLEtBQU0sTUFJbEYsR0FBa0IsU0FBUyxFQUFHLEVBQUcsRUFBRyxFQUFJLENBQ3BDLEFBQUksSUFBTyxRQUFXLEdBQUssR0FDM0IsRUFBRSxHQUFNLEVBQUUsSUFHZCxHQUFlLFNBQVUsRUFBRyxFQUFTLENBQ2pDLE9BQVMsS0FBSyxHQUFHLEFBQUksSUFBTSxXQUFhLENBQUMsRUFBUSxlQUFlLElBQUksR0FBUSxHQUFLLEVBQUUsS0FHdkYsR0FBVyxTQUFVLEVBQUcsQ0FDcEIsR0FBSSxHQUFJLE1BQU8sU0FBVyxZQUFjLE9BQU8sU0FBVSxFQUFJLEdBQUssRUFBRSxHQUFJLEVBQUksRUFDNUUsR0FBSSxFQUFHLE1BQU8sR0FBRSxLQUFLLEdBQ3JCLEdBQUksR0FBSyxNQUFPLEdBQUUsUUFBVyxTQUFVLE1BQU8sQ0FDMUMsS0FBTSxVQUFZLENBQ2QsTUFBSSxJQUFLLEdBQUssRUFBRSxRQUFRLEdBQUksUUFDckIsQ0FBRSxNQUFPLEdBQUssRUFBRSxLQUFNLEtBQU0sQ0FBQyxLQUc1QyxLQUFNLElBQUksV0FBVSxFQUFJLDBCQUE0QixvQ0FHeEQsR0FBUyxTQUFVLEVBQUcsRUFBRyxDQUNyQixHQUFJLEdBQUksTUFBTyxTQUFXLFlBQWMsRUFBRSxPQUFPLFVBQ2pELEdBQUksQ0FBQyxFQUFHLE1BQU8sR0FDZixHQUFJLEdBQUksRUFBRSxLQUFLLEdBQUksRUFBRyxFQUFLLEdBQUksRUFDL0IsR0FBSSxDQUNBLEtBQVEsS0FBTSxRQUFVLEtBQU0sSUFBTSxDQUFFLEdBQUksRUFBRSxRQUFRLE1BQU0sRUFBRyxLQUFLLEVBQUUsYUFFakUsRUFBUCxDQUFnQixFQUFJLENBQUUsTUFBTyxVQUM3QixDQUNJLEdBQUksQ0FDQSxBQUFJLEdBQUssQ0FBQyxFQUFFLE1BQVMsR0FBSSxFQUFFLFNBQVksRUFBRSxLQUFLLFVBRWxELENBQVUsR0FBSSxFQUFHLEtBQU0sR0FBRSxPQUU3QixNQUFPLElBR1gsR0FBVyxVQUFZLENBQ25CLE9BQVMsR0FBSyxHQUFJLEVBQUksRUFBRyxFQUFJLFVBQVUsT0FBUSxJQUMzQyxFQUFLLEVBQUcsT0FBTyxHQUFPLFVBQVUsS0FDcEMsTUFBTyxJQUdYLEdBQWlCLFVBQVksQ0FDekIsT0FBUyxHQUFJLEVBQUcsRUFBSSxFQUFHLEVBQUssVUFBVSxPQUFRLEVBQUksRUFBSSxJQUFLLEdBQUssVUFBVSxHQUFHLE9BQzdFLE9BQVMsR0FBSSxNQUFNLEdBQUksRUFBSSxFQUFHLEVBQUksRUFBRyxFQUFJLEVBQUksSUFDekMsT0FBUyxHQUFJLFVBQVUsR0FBSSxFQUFJLEVBQUcsRUFBSyxFQUFFLE9BQVEsRUFBSSxFQUFJLElBQUssSUFDMUQsRUFBRSxHQUFLLEVBQUUsR0FDakIsTUFBTyxJQUdYLEdBQVUsU0FBVSxFQUFHLENBQ25CLE1BQU8sZ0JBQWdCLElBQVcsTUFBSyxFQUFJLEVBQUcsTUFBUSxHQUFJLElBQVEsSUFHdEUsR0FBbUIsU0FBVSxFQUFTLEVBQVksRUFBVyxDQUN6RCxHQUFJLENBQUMsT0FBTyxjQUFlLEtBQU0sSUFBSSxXQUFVLHdDQUMvQyxHQUFJLEdBQUksRUFBVSxNQUFNLEVBQVMsR0FBYyxJQUFLLEVBQUcsRUFBSSxHQUMzRCxNQUFPLEdBQUksR0FBSSxFQUFLLFFBQVMsRUFBSyxTQUFVLEVBQUssVUFBVyxFQUFFLE9BQU8sZUFBaUIsVUFBWSxDQUFFLE1BQU8sT0FBUyxFQUNwSCxXQUFjLEVBQUcsQ0FBRSxBQUFJLEVBQUUsSUFBSSxHQUFFLEdBQUssU0FBVSxFQUFHLENBQUUsTUFBTyxJQUFJLFNBQVEsU0FBVSxFQUFHLEVBQUcsQ0FBRSxFQUFFLEtBQUssQ0FBQyxFQUFHLEVBQUcsRUFBRyxJQUFNLEdBQUssRUFBTyxFQUFHLE9BQzlILFdBQWdCLEVBQUcsRUFBRyxDQUFFLEdBQUksQ0FBRSxFQUFLLEVBQUUsR0FBRyxVQUFjLEVBQVAsQ0FBWSxFQUFPLEVBQUUsR0FBRyxHQUFJLElBQzNFLFdBQWMsRUFBRyxDQUFFLEVBQUUsZ0JBQWlCLElBQVUsUUFBUSxRQUFRLEVBQUUsTUFBTSxHQUFHLEtBQUssRUFBUyxHQUFVLEVBQU8sRUFBRSxHQUFHLEdBQUksR0FDbkgsV0FBaUIsRUFBTyxDQUFFLEVBQU8sT0FBUSxHQUN6QyxXQUFnQixFQUFPLENBQUUsRUFBTyxRQUFTLEdBQ3pDLFdBQWdCLEVBQUcsRUFBRyxDQUFFLEFBQUksRUFBRSxHQUFJLEVBQUUsUUFBUyxFQUFFLFFBQVEsRUFBTyxFQUFFLEdBQUcsR0FBSSxFQUFFLEdBQUcsTUFHaEYsR0FBbUIsU0FBVSxFQUFHLENBQzVCLEdBQUksR0FBRyxFQUNQLE1BQU8sR0FBSSxHQUFJLEVBQUssUUFBUyxFQUFLLFFBQVMsU0FBVSxFQUFHLENBQUUsS0FBTSxLQUFPLEVBQUssVUFBVyxFQUFFLE9BQU8sVUFBWSxVQUFZLENBQUUsTUFBTyxPQUFTLEVBQzFJLFdBQWMsRUFBRyxFQUFHLENBQUUsRUFBRSxHQUFLLEVBQUUsR0FBSyxTQUFVLEVBQUcsQ0FBRSxNQUFRLEdBQUksQ0FBQyxHQUFLLENBQUUsTUFBTyxHQUFRLEVBQUUsR0FBRyxJQUFLLEtBQU0sSUFBTSxVQUFhLEVBQUksRUFBRSxHQUFLLEdBQU8sSUFHL0ksR0FBZ0IsU0FBVSxFQUFHLENBQ3pCLEdBQUksQ0FBQyxPQUFPLGNBQWUsS0FBTSxJQUFJLFdBQVUsd0NBQy9DLEdBQUksR0FBSSxFQUFFLE9BQU8sZUFBZ0IsRUFDakMsTUFBTyxHQUFJLEVBQUUsS0FBSyxHQUFNLEdBQUksTUFBTyxLQUFhLFdBQWEsR0FBUyxHQUFLLEVBQUUsT0FBTyxZQUFhLEVBQUksR0FBSSxFQUFLLFFBQVMsRUFBSyxTQUFVLEVBQUssVUFBVyxFQUFFLE9BQU8sZUFBaUIsVUFBWSxDQUFFLE1BQU8sT0FBUyxHQUM5TSxXQUFjLEVBQUcsQ0FBRSxFQUFFLEdBQUssRUFBRSxJQUFNLFNBQVUsRUFBRyxDQUFFLE1BQU8sSUFBSSxTQUFRLFNBQVUsRUFBUyxFQUFRLENBQUUsRUFBSSxFQUFFLEdBQUcsR0FBSSxFQUFPLEVBQVMsRUFBUSxFQUFFLEtBQU0sRUFBRSxVQUNoSixXQUFnQixFQUFTLEVBQVEsRUFBRyxFQUFHLENBQUUsUUFBUSxRQUFRLEdBQUcsS0FBSyxTQUFTLEVBQUcsQ0FBRSxFQUFRLENBQUUsTUFBTyxFQUFHLEtBQU0sS0FBUyxLQUd0SCxHQUF1QixTQUFVLEVBQVEsRUFBSyxDQUMxQyxNQUFJLFFBQU8sZUFBa0IsT0FBTyxlQUFlLEVBQVEsTUFBTyxDQUFFLE1BQU8sSUFBaUIsRUFBTyxJQUFNLEVBQ2xHLEdBR1gsR0FBZSxTQUFVLEVBQUssQ0FDMUIsR0FBSSxHQUFPLEVBQUksV0FBWSxNQUFPLEdBQ2xDLEdBQUksR0FBUyxHQUNiLEdBQUksR0FBTyxLQUFNLE9BQVMsS0FBSyxHQUFLLEFBQUksT0FBTyxlQUFlLEtBQUssRUFBSyxJQUFJLEdBQU8sR0FBSyxFQUFJLElBQzVGLFNBQU8sUUFBYSxFQUNiLEdBR1gsR0FBa0IsU0FBVSxFQUFLLENBQzdCLE1BQVEsSUFBTyxFQUFJLFdBQWMsRUFBTSxDQUFFLFFBQVcsSUFHeEQsR0FBeUIsU0FBVSxFQUFVLEVBQVksQ0FDckQsR0FBSSxDQUFDLEVBQVcsSUFBSSxHQUNoQixLQUFNLElBQUksV0FBVSxrREFFeEIsTUFBTyxHQUFXLElBQUksSUFHMUIsR0FBeUIsU0FBVSxFQUFVLEVBQVksRUFBTyxDQUM1RCxHQUFJLENBQUMsRUFBVyxJQUFJLEdBQ2hCLEtBQU0sSUFBSSxXQUFVLGtEQUV4QixTQUFXLElBQUksRUFBVSxHQUNsQixHQUdYLEVBQVMsWUFBYSxJQUN0QixFQUFTLFdBQVksSUFDckIsRUFBUyxTQUFVLElBQ25CLEVBQVMsYUFBYyxJQUN2QixFQUFTLFVBQVcsSUFDcEIsRUFBUyxhQUFjLElBQ3ZCLEVBQVMsWUFBYSxJQUN0QixFQUFTLGNBQWUsSUFDeEIsRUFBUyxlQUFnQixJQUN6QixFQUFTLGtCQUFtQixJQUM1QixFQUFTLFdBQVksSUFDckIsRUFBUyxTQUFVLElBQ25CLEVBQVMsV0FBWSxJQUNyQixFQUFTLGlCQUFrQixJQUMzQixFQUFTLFVBQVcsSUFDcEIsRUFBUyxtQkFBb0IsSUFDN0IsRUFBUyxtQkFBb0IsSUFDN0IsRUFBUyxnQkFBaUIsSUFDMUIsRUFBUyx1QkFBd0IsSUFDakMsRUFBUyxlQUFnQixJQUN6QixFQUFTLGtCQUFtQixJQUM1QixFQUFTLHlCQUEwQixJQUNuQyxFQUFTLHlCQUEwQixRQzFSdkMsaUNBRUEsR0FBTyxRQUFVLFNBQVUsRUFBTSxFQUFNLENBQ25DLEFBQUssR0FBTSxHQUFPLElBQ2QsTUFBTyxJQUFTLFlBQVksR0FBTyxDQUFFLElBQUssSUFDOUMsR0FBSSxHQUFVLE1BQU8sR0FBSyxRQUFXLFVBQWEsRUFBSyxPQUFTLEdBRTVELEVBQU0sRUFBSyxLQUFRLFNBQVUsRUFBRyxDQUNoQyxNQUFPLFVBQVUsRUFBTSxDQUNuQixNQUFPLFVBQVUsRUFBRyxFQUFHLENBQ25CLEdBQUksR0FBTyxDQUFFLElBQUssRUFBRyxNQUFPLEVBQUssSUFDN0IsRUFBTyxDQUFFLElBQUssRUFBRyxNQUFPLEVBQUssSUFDakMsTUFBTyxHQUFFLEVBQU0sTUFHeEIsRUFBSyxLQUVKLEVBQU8sR0FDWCxNQUFRLFlBQW9CLEVBQU0sQ0FLOUIsR0FKSSxHQUFRLEVBQUssUUFBVSxNQUFPLEdBQUssUUFBVyxZQUM5QyxHQUFPLEVBQUssVUFHWixJQUFTLE9BQ2IsSUFBSSxNQUFPLElBQVEsU0FBVSxNQUFPLFVBQVMsR0FBUSxHQUFLLEVBQU8sT0FDakUsR0FBSSxNQUFPLElBQVMsU0FBVSxNQUFPLE1BQUssVUFBVSxHQUVwRCxHQUFJLEdBQUcsRUFDUCxHQUFJLE1BQU0sUUFBUSxHQUFPLENBRXJCLElBREEsRUFBTSxJQUNELEVBQUksRUFBRyxFQUFJLEVBQUssT0FBUSxJQUN6QixBQUFJLEdBQUcsSUFBTyxLQUNkLEdBQU8sRUFBVSxFQUFLLEtBQU8sT0FFakMsTUFBTyxHQUFNLElBR2pCLEdBQUksSUFBUyxLQUFNLE1BQU8sT0FFMUIsR0FBSSxFQUFLLFFBQVEsS0FBVSxHQUFJLENBQzNCLEdBQUksRUFBUSxNQUFPLE1BQUssVUFBVSxhQUNsQyxLQUFNLElBQUksV0FBVSx5Q0FHeEIsR0FBSSxHQUFZLEVBQUssS0FBSyxHQUFRLEVBQzlCLEVBQU8sT0FBTyxLQUFLLEdBQU0sS0FBSyxHQUFPLEVBQUksSUFFN0MsSUFEQSxFQUFNLEdBQ0QsRUFBSSxFQUFHLEVBQUksRUFBSyxPQUFRLElBQUssQ0FDOUIsR0FBSSxHQUFNLEVBQUssR0FDWCxFQUFRLEVBQVUsRUFBSyxJQUUzQixBQUFJLENBQUMsR0FDRCxJQUFLLElBQU8sS0FDaEIsR0FBTyxLQUFLLFVBQVUsR0FBTyxJQUFNLEdBRXZDLFNBQUssT0FBTyxFQUFXLEdBQ2hCLElBQU0sRUFBTSxNQUNwQixNQ3pEUCw0QkFFQSxPQUFPLGVBQWUsR0FBUyxhQUFjLENBQzNDLE1BQU8sS0FFVCxHQUFRLFdBQWEsT0FFckIsWUFBeUIsRUFBVSxFQUFhLENBQUUsR0FBSSxDQUFFLGFBQW9CLElBQWdCLEtBQU0sSUFBSSxXQUFVLHFDQUVoSCxZQUEyQixFQUFRLEVBQU8sQ0FBRSxPQUFTLEdBQUksRUFBRyxFQUFJLEVBQU0sT0FBUSxJQUFLLENBQUUsR0FBSSxHQUFhLEVBQU0sR0FBSSxFQUFXLFdBQWEsRUFBVyxZQUFjLEdBQU8sRUFBVyxhQUFlLEdBQVUsU0FBVyxJQUFZLEdBQVcsU0FBVyxJQUFNLE9BQU8sZUFBZSxFQUFRLEVBQVcsSUFBSyxJQUU3UyxZQUFzQixFQUFhLEVBQVksRUFBYSxDQUFFLE1BQUksSUFBWSxHQUFrQixFQUFZLFVBQVcsR0FBaUIsR0FBYSxHQUFrQixFQUFhLEdBQXFCLEVBR3pNLEdBQUksSUFBYSxVQUFZLENBQzNCLE1BQU8sT0FBTyxTQUFXLFlBR3ZCLEdBQVksU0FBVSxFQUFNLENBQzlCLE1BQU8sT0FBZ0IsUUFBUSxPQUFPLEtBR3BDLEdBQVksU0FBVSxFQUFNLENBQzlCLE1BQU8sSUFBVSxHQUFRLE9BQU8sR0FBUSxLQUFPLEdBR2pELEFBQUksTUFBZ0IsQ0FBQyxHQUFVLGVBQzdCLFFBQU8sV0FBYSxPQUFPLGVBRzdCLEdBQUksSUFBaUIsR0FBVSxZQUMzQixHQUFtQixHQUFVLGNBQzdCLEdBQWdCLEdBQVUsV0FFOUIsWUFBbUIsRUFBSyxFQUFLLENBQzNCLEdBQUksR0FBUSxFQUFJLEdBQ2hCLEdBQUksR0FBUyxLQUNiLElBQUksTUFBTyxJQUFVLFdBQVksS0FBTSxJQUFJLFdBQVUsRUFBUSxzQkFDN0QsTUFBTyxJQUdULFlBQW9CLEVBQUssQ0FDdkIsR0FBSSxHQUFPLEVBQUksWUFFZixNQUFJLEtBQVMsUUFDWCxHQUFPLEVBQUssSUFFUixJQUFTLE1BQ1gsR0FBTyxTQUlKLElBQVMsT0FBWSxFQUFPLEdBR3JDLFlBQXNCLEVBQUcsQ0FDdkIsTUFBTyxhQUFhLElBR3RCLFlBQXlCLEVBQUcsQ0FDMUIsQUFBSSxHQUFnQixJQUNsQixHQUFnQixJQUFJLEdBRXBCLFdBQVcsVUFBWSxDQUNyQixLQUFNLEtBS1osWUFBaUIsRUFBSSxDQUNuQixRQUFRLFVBQVUsS0FBSyxVQUFZLENBQ2pDLEdBQUksQ0FDRixVQUNPLEVBQVAsQ0FDQSxHQUFnQixNQUt0QixZQUE2QixFQUFjLENBQ3pDLEdBQUksR0FBVSxFQUFhLFNBQzNCLEdBQUksSUFBWSxRQUNoQixHQUFhLFNBQVcsT0FFcEIsRUFBQyxHQUlMLEdBQUksQ0FDRixHQUFJLE1BQU8sSUFBWSxXQUNyQixRQUNLLENBQ0wsR0FBSSxHQUFjLEdBQVUsRUFBUyxlQUVyQyxBQUFJLEdBQ0YsRUFBWSxLQUFLLFVBR2QsRUFBUCxDQUNBLEdBQWdCLElBSXBCLFlBQTJCLEVBQWMsQ0FDdkMsRUFBYSxVQUFZLE9BQ3pCLEVBQWEsT0FBUyxPQUN0QixFQUFhLE9BQVMsU0FHeEIsWUFBMkIsRUFBYyxDQUN2QyxHQUFJLEdBQVEsRUFBYSxPQUV6QixHQUFJLEVBQUMsRUFJTCxHQUFhLE9BQVMsT0FDdEIsRUFBYSxPQUFTLFFBRXRCLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBTSxRQUN4QixJQUFtQixFQUFjLEVBQU0sR0FBRyxLQUFNLEVBQU0sR0FBRyxPQUNyRCxFQUFhLFNBQVcsVUFGSSxFQUFFLEVBRWxDLEdBSUosWUFBNEIsRUFBYyxFQUFNLEVBQU8sQ0FDckQsRUFBYSxPQUFTLFVBQ3RCLEdBQUksR0FBVyxFQUFhLFVBRTVCLEdBQUksQ0FDRixHQUFJLEdBQUksR0FBVSxFQUFVLEdBRTVCLE9BQVEsT0FDRCxPQUNILEFBQUksR0FBRyxFQUFFLEtBQUssRUFBVSxHQUN4QixVQUVHLFFBRUgsR0FEQSxHQUFrQixHQUNkLEVBQUcsRUFBRSxLQUFLLEVBQVUsT0FBWSxNQUFNLEdBQzFDLFVBRUcsV0FDSCxHQUFrQixHQUNkLEdBQUcsRUFBRSxLQUFLLEdBQ2QsYUFFRyxFQUFQLENBQ0EsR0FBZ0IsR0FHbEIsQUFBSSxFQUFhLFNBQVcsU0FBVSxHQUFvQixHQUF1QixFQUFhLFNBQVcsV0FBVyxHQUFhLE9BQVMsU0FHNUksWUFBa0IsRUFBYyxFQUFNLEVBQU8sQ0FDM0MsR0FBSSxFQUFhLFNBQVcsU0FFNUIsSUFBSSxFQUFhLFNBQVcsWUFBYSxDQUN2QyxFQUFhLE9BQU8sS0FBSyxDQUN2QixLQUFNLEVBQ04sTUFBTyxJQUdULE9BR0YsR0FBSSxFQUFhLFNBQVcsUUFBUyxDQUNuQyxFQUFhLE9BQVMsWUFDdEIsRUFBYSxPQUFTLENBQUMsQ0FDckIsS0FBTSxFQUNOLE1BQU8sSUFFVCxHQUFRLFVBQVksQ0FDbEIsTUFBTyxJQUFrQixLQUUzQixPQUdGLEdBQW1CLEVBQWMsRUFBTSxJQUd6QyxHQUFJLElBRUosVUFBWSxDQUNWLFdBQXNCLEVBQVUsRUFBWSxDQUMxQyxHQUFnQixLQUFNLEdBSXRCLEtBQUssU0FBVyxPQUNoQixLQUFLLFVBQVksRUFDakIsS0FBSyxPQUFTLE9BQ2QsS0FBSyxPQUFTLGVBQ2QsR0FBSSxHQUF1QixHQUFJLElBQXFCLE1BRXBELEdBQUksQ0FDRixLQUFLLFNBQVcsRUFBVyxLQUFLLE9BQVcsU0FDcEMsRUFBUCxDQUNBLEVBQXFCLE1BQU0sR0FHN0IsQUFBSSxLQUFLLFNBQVcsZ0JBQWdCLE1BQUssT0FBUyxTQUdwRCxVQUFhLEVBQWMsQ0FBQyxDQUMxQixJQUFLLGNBQ0wsTUFBTyxVQUF1QixDQUM1QixBQUFJLEtBQUssU0FBVyxVQUNsQixJQUFrQixNQUNsQixHQUFvQixTQUd2QixDQUNELElBQUssU0FDTCxJQUFLLFVBQVksQ0FDZixNQUFPLE1BQUssU0FBVyxhQUlwQixLQUdMLEdBRUosVUFBWSxDQUNWLFdBQThCLEVBQWMsQ0FDMUMsR0FBZ0IsS0FBTSxHQUV0QixLQUFLLGNBQWdCLEVBR3ZCLFVBQWEsRUFBc0IsQ0FBQyxDQUNsQyxJQUFLLE9BQ0wsTUFBTyxTQUFjLEVBQU8sQ0FDMUIsR0FBUyxLQUFLLGNBQWUsT0FBUSxLQUV0QyxDQUNELElBQUssUUFDTCxNQUFPLFNBQWUsRUFBTyxDQUMzQixHQUFTLEtBQUssY0FBZSxRQUFTLEtBRXZDLENBQ0QsSUFBSyxXQUNMLE1BQU8sVUFBb0IsQ0FDekIsR0FBUyxLQUFLLGNBQWUsY0FFOUIsQ0FDRCxJQUFLLFNBQ0wsSUFBSyxVQUFZLENBQ2YsTUFBTyxNQUFLLGNBQWMsU0FBVyxhQUlsQyxLQUdMLEdBRUosVUFBWSxDQUNWLFdBQW9CLEVBQVksQ0FHOUIsR0FGQSxHQUFnQixLQUFNLEdBRWxCLENBQUUsZ0JBQWdCLElBQWEsS0FBTSxJQUFJLFdBQVUsNkNBQ3ZELEdBQUksTUFBTyxJQUFlLFdBQVksS0FBTSxJQUFJLFdBQVUsNkNBQzFELEtBQUssWUFBYyxFQUdyQixVQUFhLEVBQVksQ0FBQyxDQUN4QixJQUFLLFlBQ0wsTUFBTyxTQUFtQixFQUFVLENBQ2xDLE1BQUksT0FBTyxJQUFhLFVBQVksSUFBYSxPQUMvQyxHQUFXLENBQ1QsS0FBTSxFQUNOLE1BQU8sVUFBVSxHQUNqQixTQUFVLFVBQVUsS0FJakIsR0FBSSxJQUFhLEVBQVUsS0FBSyxlQUV4QyxDQUNELElBQUssVUFDTCxNQUFPLFNBQWlCLEVBQUksQ0FDMUIsR0FBSSxHQUFRLEtBRVosTUFBTyxJQUFJLFNBQVEsU0FBVSxFQUFTLEVBQVEsQ0FDNUMsR0FBSSxNQUFPLElBQU8sV0FBWSxDQUM1QixFQUFPLEdBQUksV0FBVSxFQUFLLHVCQUMxQixPQUdGLFlBQWdCLENBQ2QsRUFBYSxjQUNiLElBR0YsR0FBSSxHQUFlLEVBQU0sVUFBVSxDQUNqQyxLQUFNLFNBQVUsRUFBTyxDQUNyQixHQUFJLENBQ0YsRUFBRyxFQUFPLFNBQ0gsRUFBUCxDQUNBLEVBQU8sR0FDUCxFQUFhLGdCQUdqQixNQUFPLEVBQ1AsU0FBVSxRQUlmLENBQ0QsSUFBSyxNQUNMLE1BQU8sU0FBYSxFQUFJLENBQ3RCLEdBQUksR0FBUyxLQUViLEdBQUksTUFBTyxJQUFPLFdBQVksS0FBTSxJQUFJLFdBQVUsRUFBSyxzQkFDdkQsR0FBSSxHQUFJLEdBQVcsTUFDbkIsTUFBTyxJQUFJLEdBQUUsU0FBVSxFQUFVLENBQy9CLE1BQU8sR0FBTyxVQUFVLENBQ3RCLEtBQU0sU0FBVSxFQUFPLENBQ3JCLEdBQUksQ0FDRixFQUFRLEVBQUcsU0FDSixFQUFQLENBQ0EsTUFBTyxHQUFTLE1BQU0sR0FHeEIsRUFBUyxLQUFLLElBRWhCLE1BQU8sU0FBVSxFQUFHLENBQ2xCLEVBQVMsTUFBTSxJQUVqQixTQUFVLFVBQVksQ0FDcEIsRUFBUyxrQkFLaEIsQ0FDRCxJQUFLLFNBQ0wsTUFBTyxTQUFnQixFQUFJLENBQ3pCLEdBQUksR0FBUyxLQUViLEdBQUksTUFBTyxJQUFPLFdBQVksS0FBTSxJQUFJLFdBQVUsRUFBSyxzQkFDdkQsR0FBSSxHQUFJLEdBQVcsTUFDbkIsTUFBTyxJQUFJLEdBQUUsU0FBVSxFQUFVLENBQy9CLE1BQU8sR0FBTyxVQUFVLENBQ3RCLEtBQU0sU0FBVSxFQUFPLENBQ3JCLEdBQUksQ0FDRixHQUFJLENBQUMsRUFBRyxHQUFRLGFBQ1QsRUFBUCxDQUNBLE1BQU8sR0FBUyxNQUFNLEdBR3hCLEVBQVMsS0FBSyxJQUVoQixNQUFPLFNBQVUsRUFBRyxDQUNsQixFQUFTLE1BQU0sSUFFakIsU0FBVSxVQUFZLENBQ3BCLEVBQVMsa0JBS2hCLENBQ0QsSUFBSyxTQUNMLE1BQU8sU0FBZ0IsRUFBSSxDQUN6QixHQUFJLEdBQVMsS0FFYixHQUFJLE1BQU8sSUFBTyxXQUFZLEtBQU0sSUFBSSxXQUFVLEVBQUssc0JBQ3ZELEdBQUksR0FBSSxHQUFXLE1BQ2YsRUFBVSxVQUFVLE9BQVMsRUFDN0IsRUFBVyxHQUNYLEVBQU8sVUFBVSxHQUNqQixFQUFNLEVBQ1YsTUFBTyxJQUFJLEdBQUUsU0FBVSxFQUFVLENBQy9CLE1BQU8sR0FBTyxVQUFVLENBQ3RCLEtBQU0sU0FBVSxFQUFPLENBQ3JCLEdBQUksR0FBUSxDQUFDLEVBR2IsR0FGQSxFQUFXLEdBRVAsQ0FBQyxHQUFTLEVBQ1osR0FBSSxDQUNGLEVBQU0sRUFBRyxFQUFLLFNBQ1AsRUFBUCxDQUNBLE1BQU8sR0FBUyxNQUFNLE9BR3hCLEdBQU0sR0FHVixNQUFPLFNBQVUsRUFBRyxDQUNsQixFQUFTLE1BQU0sSUFFakIsU0FBVSxVQUFZLENBQ3BCLEdBQUksQ0FBQyxHQUFZLENBQUMsRUFBUyxNQUFPLEdBQVMsTUFBTSxHQUFJLFdBQVUsb0NBQy9ELEVBQVMsS0FBSyxHQUNkLEVBQVMsa0JBS2hCLENBQ0QsSUFBSyxTQUNMLE1BQU8sVUFBa0IsQ0FHdkIsT0FGSSxHQUFTLEtBRUosRUFBTyxVQUFVLE9BQVEsRUFBVSxHQUFJLE9BQU0sR0FBTyxFQUFPLEVBQUcsRUFBTyxFQUFNLElBQ2xGLEVBQVEsR0FBUSxVQUFVLEdBRzVCLEdBQUksR0FBSSxHQUFXLE1BQ25CLE1BQU8sSUFBSSxHQUFFLFNBQVUsRUFBVSxDQUMvQixHQUFJLEdBQ0EsRUFBUSxFQUVaLFdBQW1CLEVBQU0sQ0FDdkIsRUFBZSxFQUFLLFVBQVUsQ0FDNUIsS0FBTSxTQUFVLEVBQUcsQ0FDakIsRUFBUyxLQUFLLElBRWhCLE1BQU8sU0FBVSxFQUFHLENBQ2xCLEVBQVMsTUFBTSxJQUVqQixTQUFVLFVBQVksQ0FDcEIsQUFBSSxJQUFVLEVBQVEsT0FDcEIsR0FBZSxPQUNmLEVBQVMsWUFFVCxFQUFVLEVBQUUsS0FBSyxFQUFRLFVBTWpDLFNBQVUsR0FDSCxVQUFZLENBQ2pCLEFBQUksR0FDRixHQUFhLGNBQ2IsRUFBZSxhQUt0QixDQUNELElBQUssVUFDTCxNQUFPLFNBQWlCLEVBQUksQ0FDMUIsR0FBSSxHQUFTLEtBRWIsR0FBSSxNQUFPLElBQU8sV0FBWSxLQUFNLElBQUksV0FBVSxFQUFLLHNCQUN2RCxHQUFJLEdBQUksR0FBVyxNQUNuQixNQUFPLElBQUksR0FBRSxTQUFVLEVBQVUsQ0FDL0IsR0FBSSxHQUFnQixHQUVoQixFQUFRLEVBQU8sVUFBVSxDQUMzQixLQUFNLFNBQVUsRUFBTyxDQUNyQixHQUFJLEVBQ0YsR0FBSSxDQUNGLEVBQVEsRUFBRyxTQUNKLEVBQVAsQ0FDQSxNQUFPLEdBQVMsTUFBTSxHQUkxQixHQUFJLEdBQVEsRUFBRSxLQUFLLEdBQU8sVUFBVSxDQUNsQyxLQUFNLFNBQVUsRUFBTyxDQUNyQixFQUFTLEtBQUssSUFFaEIsTUFBTyxTQUFVLEVBQUcsQ0FDbEIsRUFBUyxNQUFNLElBRWpCLFNBQVUsVUFBWSxDQUNwQixHQUFJLEdBQUksRUFBYyxRQUFRLEdBQzlCLEFBQUksR0FBSyxHQUFHLEVBQWMsT0FBTyxFQUFHLEdBQ3BDLE9BR0osRUFBYyxLQUFLLElBRXJCLE1BQU8sU0FBVSxFQUFHLENBQ2xCLEVBQVMsTUFBTSxJQUVqQixTQUFVLFVBQVksQ0FDcEIsT0FJSixZQUEwQixDQUN4QixBQUFJLEVBQU0sUUFBVSxFQUFjLFNBQVcsR0FBRyxFQUFTLFdBRzNELE1BQU8sV0FBWSxDQUNqQixFQUFjLFFBQVEsU0FBVSxFQUFHLENBQ2pDLE1BQU8sR0FBRSxnQkFFWCxFQUFNLG1CQUlYLENBQ0QsSUFBSyxHQUNMLE1BQU8sVUFBWSxDQUNqQixNQUFPLFNBRVAsQ0FBQyxDQUNILElBQUssT0FDTCxNQUFPLFNBQWMsRUFBRyxDQUN0QixHQUFJLEdBQUksTUFBTyxPQUFTLFdBQWEsS0FBTyxFQUM1QyxHQUFJLEdBQUssS0FBTSxLQUFNLElBQUksV0FBVSxFQUFJLHFCQUN2QyxHQUFJLEdBQVMsR0FBVSxFQUFHLElBRTFCLEdBQUksRUFBUSxDQUNWLEdBQUksR0FBYSxFQUFPLEtBQUssR0FDN0IsR0FBSSxPQUFPLEtBQWdCLEVBQVksS0FBTSxJQUFJLFdBQVUsRUFBYSxxQkFDeEUsTUFBSSxJQUFhLElBQWUsRUFBVyxjQUFnQixFQUFVLEVBQzlELEdBQUksR0FBRSxTQUFVLEVBQVUsQ0FDL0IsTUFBTyxHQUFXLFVBQVUsS0FJaEMsR0FBSSxHQUFVLGFBQ1osR0FBUyxHQUFVLEVBQUcsSUFFbEIsR0FDRixNQUFPLElBQUksR0FBRSxTQUFVLEVBQVUsQ0FDL0IsR0FBUSxVQUFZLENBQ2xCLEdBQUksR0FBUyxPQUNiLElBQUksR0FBNEIsR0FDNUIsRUFBb0IsR0FDcEIsRUFBaUIsT0FFckIsR0FBSSxDQUNGLE9BQVMsR0FBWSxFQUFPLEtBQUssR0FBRyxPQUFPLFlBQWEsRUFBTyxDQUFFLEdBQTZCLEdBQVEsRUFBVSxRQUFRLE1BQU8sRUFBNEIsR0FBTSxDQUMvSixHQUFJLEdBQVEsRUFBTSxNQUVsQixHQURBLEVBQVMsS0FBSyxHQUNWLEVBQVMsT0FBUSxjQUVoQixFQUFQLENBQ0EsRUFBb0IsR0FDcEIsRUFBaUIsU0FDakIsQ0FDQSxHQUFJLENBQ0YsQUFBSSxDQUFDLEdBQTZCLEVBQVUsUUFBVSxNQUNwRCxFQUFVLGdCQUVaLENBQ0EsR0FBSSxFQUNGLEtBQU0sSUFLWixFQUFTLGdCQU1qQixHQUFJLE1BQU0sUUFBUSxHQUNoQixNQUFPLElBQUksR0FBRSxTQUFVLEVBQVUsQ0FDL0IsR0FBUSxVQUFZLENBQ2xCLEdBQUksR0FBUyxPQUViLFFBQVMsR0FBSSxFQUFHLEVBQUksRUFBRSxPQUFRLEVBQUUsRUFFOUIsR0FEQSxFQUFTLEtBQUssRUFBRSxJQUNaLEVBQVMsT0FBUSxPQUd2QixFQUFTLGdCQUtmLEtBQU0sSUFBSSxXQUFVLEVBQUksd0JBRXpCLENBQ0QsSUFBSyxLQUNMLE1BQU8sVUFBYyxDQUNuQixPQUFTLEdBQVEsVUFBVSxPQUFRLEVBQVEsR0FBSSxPQUFNLEdBQVEsRUFBUSxFQUFHLEVBQVEsRUFBTyxJQUNyRixFQUFNLEdBQVMsVUFBVSxHQUczQixHQUFJLEdBQUksTUFBTyxPQUFTLFdBQWEsS0FBTyxFQUM1QyxNQUFPLElBQUksR0FBRSxTQUFVLEVBQVUsQ0FDL0IsR0FBUSxVQUFZLENBQ2xCLEdBQUksR0FBUyxPQUViLFFBQVMsR0FBSSxFQUFHLEVBQUksRUFBTSxPQUFRLEVBQUUsRUFFbEMsR0FEQSxFQUFTLEtBQUssRUFBTSxJQUNoQixFQUFTLE9BQVEsT0FHdkIsRUFBUyxrQkFJZCxDQUNELElBQUssR0FDTCxJQUFLLFVBQVksQ0FDZixNQUFPLFVBSUosS0FHVCxHQUFRLFdBQWEsR0FFckIsQUFBSSxNQUNGLE9BQU8sZUFBZSxHQUFZLE9BQU8sY0FBZSxDQUN0RCxNQUFPLENBQ0wsT0FBUSxHQUNSLGdCQUFpQixJQUVuQixhQUFjLE9DdG1CbEIsdUJBQU8sUUFBVSxLQUErQixhQ0FoRCw0QkFFQSxPQUFPLGVBQWUsR0FBUyxhQUFjLENBQzNDLE1BQU8sS0FFVCxHQUFRLFFBQVUsT0FFbEIsR0FBSSxJQUE0QixNQUFPLFNBQVcsWUFBYyxNQUFPLFFBQU8sS0FBUSxXQUFhLE9BQU8sSUFBSSw4QkFBZ0MsT0FDMUksR0FBVyxHQUNmLEdBQVEsUUFBVSxLQ1RsQiw0QkFFQSxPQUFPLGVBQWUsR0FBUyxhQUFjLENBQzNDLE1BQU8sS0FFVCxHQUFRLFFBQVUsR0FFbEIsR0FBSSxJQUE2QixHQUF1QixNQUV4RCxZQUFnQyxFQUFLLENBQUUsTUFBTyxJQUFPLEVBQUksV0FBYSxFQUFNLENBQUUsUUFBUyxHQUV2RixZQUFpQixFQUFLLENBQTZCLE1BQUksT0FBTyxTQUFXLFlBQWMsTUFBTyxRQUFPLFVBQWEsU0FBWSxHQUFVLFNBQWlCLEVBQUssQ0FBRSxNQUFPLE9BQU8sSUFBaUIsR0FBVSxTQUFpQixFQUFLLENBQUUsTUFBTyxJQUFPLE1BQU8sU0FBVyxZQUFjLEVBQUksY0FBZ0IsUUFBVSxJQUFRLE9BQU8sVUFBWSxTQUFXLE1BQU8sSUFBaUIsR0FBUSxHQUVuWCxHQUFJLElBQW1CLEdBQ25CLEdBQXNCLEVBSzFCLFlBQWlCLEVBQU8sQ0FDdEIsTUFBTyxJQUFZLEVBQU8sSUFHNUIsWUFBcUIsRUFBTyxFQUFZLENBQ3RDLE9BQVEsR0FBUSxRQUNULFNBQ0gsTUFBTyxNQUFLLFVBQVUsT0FFbkIsV0FDSCxNQUFPLEdBQU0sS0FBTyxhQUFhLE9BQU8sRUFBTSxLQUFNLEtBQU8saUJBRXhELFNBQ0gsTUFBSSxLQUFVLEtBQ0wsT0FHRixHQUFrQixFQUFPLFdBR2hDLE1BQU8sUUFBTyxJQUlwQixZQUEyQixFQUFPLEVBQXNCLENBQ3RELEdBQUksRUFBcUIsUUFBUSxLQUFXLEdBQzFDLE1BQU8sYUFHVCxHQUFJLEdBQWEsR0FBRyxPQUFPLEVBQXNCLENBQUMsSUFDOUMsRUFBa0IsR0FBWSxHQUVsQyxHQUFJLElBQW9CLE9BQVcsQ0FDakMsR0FBSSxHQUFjLEVBQWdCLEtBQUssR0FFdkMsR0FBSSxJQUFnQixFQUNsQixNQUFPLE9BQU8sSUFBZ0IsU0FBVyxFQUFjLEdBQVksRUFBYSxXQUV6RSxNQUFNLFFBQVEsR0FDdkIsTUFBTyxJQUFZLEVBQU8sR0FHNUIsTUFBTyxJQUFhLEVBQU8sR0FHN0IsWUFBc0IsRUFBUSxFQUFZLENBQ3hDLEdBQUksR0FBTyxPQUFPLEtBQUssR0FFdkIsR0FBSSxFQUFLLFNBQVcsRUFDbEIsTUFBTyxLQUdULEdBQUksRUFBVyxPQUFTLEdBQ3RCLE1BQU8sSUFBTSxHQUFhLEdBQVUsSUFHdEMsR0FBSSxHQUFhLEVBQUssSUFBSSxTQUFVLEVBQUssQ0FDdkMsR0FBSSxHQUFRLEdBQVksRUFBTyxHQUFNLEdBQ3JDLE1BQU8sR0FBTSxLQUFPLElBRXRCLE1BQU8sS0FBTyxFQUFXLEtBQUssTUFBUSxLQUd4QyxZQUFxQixFQUFPLEVBQVksQ0FDdEMsR0FBSSxFQUFNLFNBQVcsRUFDbkIsTUFBTyxLQUdULEdBQUksRUFBVyxPQUFTLEdBQ3RCLE1BQU8sVUFPVCxPQUpJLEdBQU0sS0FBSyxJQUFJLEdBQWtCLEVBQU0sUUFDdkMsRUFBWSxFQUFNLE9BQVMsRUFDM0IsRUFBUSxHQUVILEVBQUksRUFBRyxFQUFJLEVBQUssRUFBRSxFQUN6QixFQUFNLEtBQUssR0FBWSxFQUFNLEdBQUksSUFHbkMsTUFBSSxLQUFjLEVBQ2hCLEVBQU0sS0FBSyxtQkFDRixFQUFZLEdBQ3JCLEVBQU0sS0FBSyxPQUFPLE9BQU8sRUFBVyxnQkFHL0IsSUFBTSxFQUFNLEtBQUssTUFBUSxJQUdsQyxZQUFxQixFQUFRLENBQzNCLEdBQUksR0FBa0IsRUFBTyxPQUFPLEdBQTJCLFVBRS9ELEdBQUksTUFBTyxJQUFvQixXQUM3QixNQUFPLEdBR1QsR0FBSSxNQUFPLEdBQU8sU0FBWSxXQUM1QixNQUFPLEdBQU8sUUFJbEIsWUFBc0IsRUFBUSxDQUM1QixHQUFJLEdBQU0sT0FBTyxVQUFVLFNBQVMsS0FBSyxHQUFRLFFBQVEsYUFBYyxJQUFJLFFBQVEsS0FBTSxJQUV6RixHQUFJLElBQVEsVUFBWSxNQUFPLEdBQU8sYUFBZ0IsV0FBWSxDQUNoRSxHQUFJLEdBQU8sRUFBTyxZQUFZLEtBRTlCLEdBQUksTUFBTyxJQUFTLFVBQVksSUFBUyxHQUN2QyxNQUFPLEdBSVgsTUFBTyxNQ25JVCw0QkFFQSxPQUFPLGVBQWUsR0FBUyxhQUFjLENBQzNDLE1BQU8sS0FFVCxHQUFRLFFBQVUsR0FFbEIsWUFBbUIsRUFBVyxFQUFTLENBQ3JDLEdBQUksR0FBbUIsUUFBUSxHQUUvQixHQUFJLENBQUMsRUFDSCxLQUFNLElBQUksT0FBTSxHQUE0QixzQ0NYaEQsNEJBRUEsT0FBTyxlQUFlLEdBQVMsYUFBYyxDQUMzQyxNQUFPLEtBRVQsR0FBUSxRQUFVLEdBRWxCLEdBQUksSUFBYSxHQUF1QixNQUVwQyxHQUE2QixHQUF1QixNQUV4RCxZQUFnQyxFQUFLLENBQUUsTUFBTyxJQUFPLEVBQUksV0FBYSxFQUFNLENBQUUsUUFBUyxHQUt2RixZQUF1QixFQUFhLENBQ2xDLEdBQUksR0FBSyxFQUFZLFVBQVUsT0FDL0IsTUFBTyxJQUFPLFlBQWUsQUFsQi9CLEdBa0JrQyxHQUFXLFNBQVMsR0FDcEQsRUFBWSxVQUFVLFFBQVUsRUFFNUIsR0FBMkIsU0FDN0IsR0FBWSxVQUFVLEdBQTJCLFNBQVcsTUN0QmhFLDRCQUVBLE9BQU8sZUFBZSxHQUFTLGFBQWMsQ0FDM0MsTUFBTyxLQUVULEdBQVEsT0FBUyxHQUNqQixHQUFRLE1BQVEsR0FBUSxTQUFXLE9BRW5DLEdBQUksSUFBaUIsR0FBdUIsTUFFNUMsWUFBZ0MsRUFBSyxDQUFFLE1BQU8sSUFBTyxFQUFJLFdBQWEsRUFBTSxDQUFFLFFBQVMsR0FNdkYsR0FBSSxJQUF3QixVQUFZLENBb0J0QyxXQUFrQixFQUFZLEVBQVUsRUFBUSxDQUM5QyxLQUFLLE1BQVEsRUFBVyxNQUN4QixLQUFLLElBQU0sRUFBUyxJQUNwQixLQUFLLFdBQWEsRUFDbEIsS0FBSyxTQUFXLEVBQ2hCLEtBQUssT0FBUyxFQUdoQixHQUFJLEdBQVMsRUFBUyxVQUV0QixTQUFPLE9BQVMsVUFBa0IsQ0FDaEMsTUFBTyxDQUNMLE1BQU8sS0FBSyxNQUNaLElBQUssS0FBSyxNQUlQLEtBSVQsR0FBUSxTQUFXLEdBQ25CLEFBQUMsQUExREQsR0EwREksR0FBZSxTQUFTLElBTTVCLEdBQUksSUFBcUIsVUFBWSxDQThCbkMsV0FBZSxFQUFNLEVBQU8sRUFBSyxFQUFNLEVBQVEsRUFBTSxFQUFPLENBQzFELEtBQUssS0FBTyxFQUNaLEtBQUssTUFBUSxFQUNiLEtBQUssSUFBTSxFQUNYLEtBQUssS0FBTyxFQUNaLEtBQUssT0FBUyxFQUNkLEtBQUssTUFBUSxFQUNiLEtBQUssS0FBTyxFQUNaLEtBQUssS0FBTyxLQUdkLEdBQUksR0FBVSxFQUFNLFVBRXBCLFNBQVEsT0FBUyxVQUFrQixDQUNqQyxNQUFPLENBQ0wsS0FBTSxLQUFLLEtBQ1gsTUFBTyxLQUFLLE1BQ1osS0FBTSxLQUFLLEtBQ1gsT0FBUSxLQUFLLFNBSVYsS0FJVCxHQUFRLE1BQVEsR0FDaEIsQUFBQyxBQXpIRCxHQXlISSxHQUFlLFNBQVMsSUFLNUIsWUFBZ0IsRUFBVyxDQUN6QixNQUFPLElBQWEsTUFBUSxNQUFPLEdBQVUsTUFBUyxZQy9IeEQsNEJBRUEsT0FBTyxlQUFlLEdBQVMsYUFBYyxDQUMzQyxNQUFPLEtBRVQsR0FBUSxNQUFRLEdBQ2hCLEdBQVEsZ0JBQWtCLEdBQzFCLEdBQVEsV0FBYSxHQUNyQixHQUFRLE1BQVEsR0FBUSxrQkFBb0IsT0FFNUMsR0FBSSxJQUFXLEdBQXVCLE1BRWxDLEdBQU8sS0FFWCxZQUFnQyxFQUFLLENBQUUsTUFBTyxJQUFPLEVBQUksV0FBYSxFQUFNLENBQUUsUUFBUyxHQUV2RixHQUFJLElBQW9CLENBQ3RCLEtBQU0sR0FDTixTQUFVLENBQUMsZUFDWCxvQkFBcUIsQ0FBQyxPQUFRLHNCQUF1QixhQUFjLGdCQUNuRSxtQkFBb0IsQ0FBQyxXQUFZLE9BQVEsZUFBZ0IsY0FDekQsU0FBVSxDQUFDLFFBQ1gsYUFBYyxDQUFDLGNBQ2YsTUFBTyxDQUFDLFFBQVMsT0FBUSxZQUFhLGFBQWMsZ0JBQ3BELFNBQVUsQ0FBQyxPQUFRLFNBQ25CLGVBQWdCLENBQUMsT0FBUSxjQUN6QixlQUFnQixDQUFDLGdCQUFpQixhQUFjLGdCQUNoRCxtQkFBb0IsQ0FBQyxPQUVyQixzQkFBdUIsZ0JBQWlCLGFBQWMsZ0JBQ3RELFNBQVUsR0FDVixXQUFZLEdBQ1osWUFBYSxHQUNiLGFBQWMsR0FDZCxVQUFXLEdBQ1gsVUFBVyxHQUNYLFVBQVcsQ0FBQyxVQUNaLFlBQWEsQ0FBQyxVQUNkLFlBQWEsQ0FBQyxPQUFRLFNBQ3RCLFVBQVcsQ0FBQyxPQUFRLGFBQ3BCLFVBQVcsQ0FBQyxRQUNaLFNBQVUsQ0FBQyxRQUNYLFlBQWEsQ0FBQyxRQUNkLGlCQUFrQixDQUFDLGNBQWUsYUFBYyxrQkFDaEQsd0JBQXlCLENBQUMsUUFDMUIscUJBQXNCLENBQUMsY0FBZSxPQUFRLGNBQzlDLHFCQUFzQixDQUFDLGNBQWUsT0FBUSxhQUFjLGFBQWMsVUFDMUUsZ0JBQWlCLENBQUMsY0FBZSxPQUFRLFlBQWEsT0FBUSxjQUM5RCxxQkFBc0IsQ0FBQyxjQUFlLE9BQVEsT0FBUSxlQUFnQixjQUN0RSx3QkFBeUIsQ0FBQyxjQUFlLE9BQVEsYUFBYyxhQUFjLFVBQzdFLG9CQUFxQixDQUFDLGNBQWUsT0FBUSxhQUFjLFNBQzNELG1CQUFvQixDQUFDLGNBQWUsT0FBUSxhQUFjLFVBQzFELG9CQUFxQixDQUFDLGNBQWUsT0FBUSxjQUM3QywwQkFBMkIsQ0FBQyxjQUFlLE9BQVEsYUFBYyxVQUNqRSxvQkFBcUIsQ0FBQyxjQUFlLE9BQVEsWUFBYSxhQUMxRCxnQkFBaUIsQ0FBQyxhQUFjLGtCQUNoQyxvQkFBcUIsQ0FBQyxPQUFRLGNBQzlCLG9CQUFxQixDQUFDLE9BQVEsYUFBYyxhQUFjLFVBQzFELHVCQUF3QixDQUFDLE9BQVEsYUFBYyxhQUFjLFVBQzdELG1CQUFvQixDQUFDLE9BQVEsYUFBYyxTQUMzQyxrQkFBbUIsQ0FBQyxPQUFRLGFBQWMsVUFDMUMseUJBQTBCLENBQUMsT0FBUSxhQUFjLFdBRW5ELEdBQVEsa0JBQW9CLEdBQzVCLEdBQUksSUFBUSxPQUFPLE9BQU8sSUF3RjFCLEdBQVEsTUFBUSxHQUVoQixZQUFlLEVBQU0sRUFBUyxDQUM1QixHQUFJLEdBQWMsVUFBVSxPQUFTLEdBQUssVUFBVSxLQUFPLE9BQVksVUFBVSxHQUFLLEdBR2xGLEVBQVEsT0FDUixFQUFVLE1BQU0sUUFBUSxHQUN4QixFQUFPLENBQUMsR0FDUixFQUFRLEdBQ1IsRUFBUSxHQUNSLEVBQU8sT0FDUCxFQUFNLE9BQ04sRUFBUyxPQUNULEVBQU8sR0FDUCxFQUFZLEdBQ1osRUFBVSxFQUdkLEVBQUcsQ0FDRCxJQUNBLEdBQUksR0FBWSxJQUFVLEVBQUssT0FDM0IsRUFBVyxHQUFhLEVBQU0sU0FBVyxFQUU3QyxHQUFJLEVBQVcsQ0FLYixHQUpBLEVBQU0sRUFBVSxTQUFXLEVBQUksT0FBWSxFQUFLLEVBQUssT0FBUyxHQUM5RCxFQUFPLEVBQ1AsRUFBUyxFQUFVLE1BRWYsRUFBVSxDQUNaLEdBQUksRUFDRixFQUFPLEVBQUssWUFDUCxDQUdMLE9BRkksR0FBUSxHQUVILEVBQU0sRUFBRyxFQUFnQixPQUFPLEtBQUssR0FBTyxFQUFNLEVBQWMsT0FBUSxJQUFPLENBQ3RGLEdBQUksR0FBSSxFQUFjLEdBQ3RCLEVBQU0sR0FBSyxFQUFLLEdBR2xCLEVBQU8sRUFLVCxPQUZJLEdBQWEsRUFFUixFQUFLLEVBQUcsRUFBSyxFQUFNLE9BQVEsSUFBTSxDQUN4QyxHQUFJLEdBQVUsRUFBTSxHQUFJLEdBQ3BCLEVBQVksRUFBTSxHQUFJLEdBRTFCLEFBQUksR0FDRixJQUFXLEdBR2IsQUFBSSxHQUFXLElBQWMsS0FDM0IsR0FBSyxPQUFPLEVBQVMsR0FDckIsS0FFQSxFQUFLLEdBQVcsR0FLdEIsRUFBUSxFQUFNLE1BQ2QsRUFBTyxFQUFNLEtBQ2IsRUFBUSxFQUFNLE1BQ2QsRUFBVSxFQUFNLFFBQ2hCLEVBQVEsRUFBTSxTQUNULENBSUwsR0FIQSxFQUFNLEVBQVMsRUFBVSxFQUFRLEVBQUssR0FBUyxPQUMvQyxFQUFPLEVBQVMsRUFBTyxHQUFPLEVBRTFCLEdBQVMsS0FDWCxTQUdGLEFBQUksR0FDRixFQUFLLEtBQUssR0FJZCxHQUFJLEdBQVMsT0FFYixHQUFJLENBQUMsTUFBTSxRQUFRLEdBQU8sQ0FDeEIsR0FBSSxDQUFFLEFBM09aLEdBMk9lLEdBQUssUUFBUSxHQUNwQixLQUFNLElBQUksT0FBTSxxQkFBcUIsT0FBUSxBQTVPckQsR0E0T3dELEdBQVMsU0FBUyxHQUFPLE1BRzNFLEdBQUksR0FBVSxHQUFXLEVBQVMsRUFBSyxLQUFNLEdBRTdDLEdBQUksRUFBUyxDQUdYLEdBRkEsRUFBUyxFQUFRLEtBQUssRUFBUyxFQUFNLEVBQUssRUFBUSxFQUFNLEdBRXBELElBQVcsR0FDYixNQUdGLEdBQUksSUFBVyxJQUNiLEdBQUksQ0FBQyxFQUFXLENBQ2QsRUFBSyxNQUNMLGtCQUVPLElBQVcsUUFDcEIsR0FBTSxLQUFLLENBQUMsRUFBSyxJQUViLENBQUMsR0FDSCxHQUFLLEFBalFqQixHQWlRb0IsR0FBSyxRQUFRLEdBQ25CLEVBQU8sTUFDRixDQUNMLEVBQUssTUFDTCxXQVdWLEdBSkksSUFBVyxRQUFhLEdBQzFCLEVBQU0sS0FBSyxDQUFDLEVBQUssSUFHZixFQUNGLEVBQUssVUFDQSxDQUNMLEdBQUksR0FFSixFQUFRLENBQ04sUUFBUyxFQUNULE1BQU8sRUFDUCxLQUFNLEVBQ04sTUFBTyxFQUNQLEtBQU0sR0FFUixFQUFVLE1BQU0sUUFBUSxHQUN4QixFQUFPLEVBQVUsRUFBUSxHQUF3QixFQUFZLEVBQUssU0FBVyxNQUFRLElBQTBCLE9BQVMsRUFBd0IsR0FDaEosRUFBUSxHQUNSLEVBQVEsR0FFSixHQUNGLEVBQVUsS0FBSyxHQUdqQixFQUFTLFNBRUosSUFBVSxRQUVuQixNQUFJLEdBQU0sU0FBVyxHQUNuQixHQUFVLEVBQU0sRUFBTSxPQUFTLEdBQUcsSUFHN0IsRUFVVCxZQUF5QixFQUFVLENBQ2pDLEdBQUksR0FBVyxHQUFJLE9BQU0sRUFBUyxRQUNsQyxNQUFPLENBQ0wsTUFBTyxTQUFlLEVBQU0sQ0FDMUIsT0FBUyxHQUFJLEVBQUcsRUFBSSxFQUFTLE9BQVEsSUFDbkMsR0FBSSxFQUFTLElBQU0sS0FBTSxDQUN2QixHQUFJLEdBQUssR0FBVyxFQUFTLEdBQUksRUFBSyxLQUV0QyxJQUVBLEdBQUksRUFBSSxDQUNOLEdBQUksR0FBUyxFQUFHLE1BQU0sRUFBUyxHQUFJLFdBRW5DLEdBQUksSUFBVyxHQUNiLEVBQVMsR0FBSyxVQUNMLElBQVcsR0FDcEIsRUFBUyxHQUFLLFdBQ0wsSUFBVyxPQUNwQixNQUFPLE1BTWpCLE1BQU8sU0FBZSxFQUFNLENBQzFCLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBUyxPQUFRLElBQ25DLEdBQUksRUFBUyxJQUFNLEtBQU0sQ0FDdkIsR0FBSSxHQUFLLEdBQVcsRUFBUyxHQUFJLEVBQUssS0FFdEMsSUFFQSxHQUFJLEVBQUksQ0FDTixHQUFJLEdBQVMsRUFBRyxNQUFNLEVBQVMsR0FBSSxXQUVuQyxHQUFJLElBQVcsR0FDYixFQUFTLEdBQUssV0FDTCxJQUFXLFFBQWEsSUFBVyxHQUM1QyxNQUFPLFFBR04sQUFBSSxHQUFTLEtBQU8sR0FDekIsR0FBUyxHQUFLLFFBWXhCLFlBQW9CLEVBQVMsRUFBTSxFQUFXLENBQzVDLEdBQUksR0FBYyxFQUFRLEdBRTFCLEdBQUksRUFBYSxDQUNmLEdBQUksQ0FBQyxHQUFhLE1BQU8sSUFBZ0IsV0FFdkMsTUFBTyxHQUdULEdBQUksR0FBc0IsRUFBWSxFQUFZLE1BQVEsRUFBWSxNQUV0RSxHQUFJLE1BQU8sSUFBd0IsV0FFakMsTUFBTyxPQUVKLENBQ0wsR0FBSSxHQUFrQixFQUFZLEVBQVEsTUFBUSxFQUFRLE1BRTFELEdBQUksRUFBaUIsQ0FDbkIsR0FBSSxNQUFPLElBQW9CLFdBRTdCLE1BQU8sR0FHVCxHQUFJLEdBQXNCLEVBQWdCLEdBRTFDLEdBQUksTUFBTyxJQUF3QixXQUVqQyxNQUFPLFFDeFlmLG9CQWdCQSxHQUFJLElBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDQSxHQUNBLEdBQ0EsR0FDSixBQUFDLFVBQVUsRUFBUyxDQUNoQixHQUFJLEdBQU8sTUFBTyxTQUFXLFNBQVcsT0FBUyxNQUFPLE9BQVMsU0FBVyxLQUFPLE1BQU8sT0FBUyxTQUFXLEtBQU8sR0FDckgsQUFBSSxNQUFPLFNBQVcsWUFBYyxPQUFPLElBQ3ZDLE9BQU8sUUFBUyxDQUFDLFdBQVksU0FBVSxFQUFTLENBQUUsRUFBUSxFQUFlLEVBQU0sRUFBZSxPQUU3RixBQUFJLE1BQU8sS0FBVyxVQUFZLE1BQU8sSUFBTyxTQUFZLFNBQzdELEVBQVEsRUFBZSxFQUFNLEVBQWUsR0FBTyxXQUduRCxFQUFRLEVBQWUsSUFFM0IsV0FBd0IsRUFBUyxFQUFVLENBQ3ZDLE1BQUksS0FBWSxHQUNaLENBQUksTUFBTyxRQUFPLFFBQVcsV0FDekIsT0FBTyxlQUFlLEVBQVMsYUFBYyxDQUFFLE1BQU8sS0FHdEQsRUFBUSxXQUFhLElBR3RCLFNBQVUsRUFBSSxFQUFHLENBQUUsTUFBTyxHQUFRLEdBQU0sRUFBVyxFQUFTLEVBQUksR0FBSyxNQUduRixTQUFVLEVBQVUsQ0FDakIsR0FBSSxHQUFnQixPQUFPLGdCQUN0QixDQUFFLFVBQVcsYUFBZ0IsUUFBUyxTQUFVLEVBQUcsRUFBRyxDQUFFLEVBQUUsVUFBWSxJQUN2RSxTQUFVLEVBQUcsRUFBRyxDQUFFLE9BQVMsS0FBSyxHQUFHLEFBQUksRUFBRSxlQUFlLElBQUksR0FBRSxHQUFLLEVBQUUsS0FFekUsR0FBWSxTQUFVLEVBQUcsRUFBRyxDQUN4QixFQUFjLEVBQUcsR0FDakIsWUFBYyxDQUFFLEtBQUssWUFBYyxFQUNuQyxFQUFFLFVBQVksSUFBTSxLQUFPLE9BQU8sT0FBTyxHQUFNLEdBQUcsVUFBWSxFQUFFLFVBQVcsR0FBSSxLQUduRixHQUFXLE9BQU8sUUFBVSxTQUFVLEVBQUcsQ0FDckMsT0FBUyxHQUFHLEVBQUksRUFBRyxFQUFJLFVBQVUsT0FBUSxFQUFJLEVBQUcsSUFBSyxDQUNqRCxFQUFJLFVBQVUsR0FDZCxPQUFTLEtBQUssR0FBRyxBQUFJLE9BQU8sVUFBVSxlQUFlLEtBQUssRUFBRyxJQUFJLEdBQUUsR0FBSyxFQUFFLElBRTlFLE1BQU8sSUFHWCxHQUFTLFNBQVUsRUFBRyxFQUFHLENBQ3JCLEdBQUksR0FBSSxHQUNSLE9BQVMsS0FBSyxHQUFHLEFBQUksT0FBTyxVQUFVLGVBQWUsS0FBSyxFQUFHLElBQU0sRUFBRSxRQUFRLEdBQUssR0FDOUUsR0FBRSxHQUFLLEVBQUUsSUFDYixHQUFJLEdBQUssTUFBUSxNQUFPLFFBQU8sdUJBQTBCLFdBQ3JELE9BQVMsR0FBSSxFQUFHLEVBQUksT0FBTyxzQkFBc0IsR0FBSSxFQUFJLEVBQUUsT0FBUSxJQUMvRCxBQUFJLEVBQUUsUUFBUSxFQUFFLElBQU0sR0FBSyxPQUFPLFVBQVUscUJBQXFCLEtBQUssRUFBRyxFQUFFLEtBQ3ZFLEdBQUUsRUFBRSxJQUFNLEVBQUUsRUFBRSxLQUUxQixNQUFPLElBR1gsR0FBYSxTQUFVLEVBQVksRUFBUSxFQUFLLEVBQU0sQ0FDbEQsR0FBSSxHQUFJLFVBQVUsT0FBUSxFQUFJLEVBQUksRUFBSSxFQUFTLElBQVMsS0FBTyxFQUFPLE9BQU8seUJBQXlCLEVBQVEsR0FBTyxFQUFNLEVBQzNILEdBQUksTUFBTyxVQUFZLFVBQVksTUFBTyxTQUFRLFVBQWEsV0FBWSxFQUFJLFFBQVEsU0FBUyxFQUFZLEVBQVEsRUFBSyxPQUNwSCxRQUFTLEdBQUksRUFBVyxPQUFTLEVBQUcsR0FBSyxFQUFHLElBQUssQUFBSSxHQUFJLEVBQVcsS0FBSSxHQUFLLEdBQUksRUFBSSxFQUFFLEdBQUssRUFBSSxFQUFJLEVBQUUsRUFBUSxFQUFLLEdBQUssRUFBRSxFQUFRLEtBQVMsR0FDaEosTUFBTyxHQUFJLEdBQUssR0FBSyxPQUFPLGVBQWUsRUFBUSxFQUFLLEdBQUksR0FHaEUsR0FBVSxTQUFVLEVBQVksRUFBVyxDQUN2QyxNQUFPLFVBQVUsRUFBUSxFQUFLLENBQUUsRUFBVSxFQUFRLEVBQUssS0FHM0QsR0FBYSxTQUFVLEVBQWEsRUFBZSxDQUMvQyxHQUFJLE1BQU8sVUFBWSxVQUFZLE1BQU8sU0FBUSxVQUFhLFdBQVksTUFBTyxTQUFRLFNBQVMsRUFBYSxJQUdwSCxHQUFZLFNBQVUsRUFBUyxFQUFZLEVBQUcsRUFBVyxDQUNyRCxXQUFlLEVBQU8sQ0FBRSxNQUFPLGFBQWlCLEdBQUksRUFBUSxHQUFJLEdBQUUsU0FBVSxFQUFTLENBQUUsRUFBUSxLQUMvRixNQUFPLElBQUssSUFBTSxHQUFJLFVBQVUsU0FBVSxFQUFTLEVBQVEsQ0FDdkQsV0FBbUIsRUFBTyxDQUFFLEdBQUksQ0FBRSxFQUFLLEVBQVUsS0FBSyxVQUFrQixFQUFQLENBQVksRUFBTyxJQUNwRixXQUFrQixFQUFPLENBQUUsR0FBSSxDQUFFLEVBQUssRUFBVSxNQUFTLFVBQWtCLEVBQVAsQ0FBWSxFQUFPLElBQ3ZGLFdBQWMsRUFBUSxDQUFFLEVBQU8sS0FBTyxFQUFRLEVBQU8sT0FBUyxFQUFNLEVBQU8sT0FBTyxLQUFLLEVBQVcsR0FDbEcsRUFBTSxHQUFZLEVBQVUsTUFBTSxFQUFTLEdBQWMsS0FBSyxXQUl0RSxHQUFjLFNBQVUsRUFBUyxFQUFNLENBQ25DLEdBQUksR0FBSSxDQUFFLE1BQU8sRUFBRyxLQUFNLFVBQVcsQ0FBRSxHQUFJLEVBQUUsR0FBSyxFQUFHLEtBQU0sR0FBRSxHQUFJLE1BQU8sR0FBRSxJQUFPLEtBQU0sR0FBSSxJQUFLLElBQU0sRUFBRyxFQUFHLEVBQUcsRUFDL0csTUFBTyxHQUFJLENBQUUsS0FBTSxFQUFLLEdBQUksTUFBUyxFQUFLLEdBQUksT0FBVSxFQUFLLElBQU0sTUFBTyxTQUFXLFlBQWUsR0FBRSxPQUFPLFVBQVksVUFBVyxDQUFFLE1BQU8sUUFBVSxFQUN2SixXQUFjLEVBQUcsQ0FBRSxNQUFPLFVBQVUsRUFBRyxDQUFFLE1BQU8sR0FBSyxDQUFDLEVBQUcsS0FDekQsV0FBYyxFQUFJLENBQ2QsR0FBSSxFQUFHLEtBQU0sSUFBSSxXQUFVLG1DQUMzQixLQUFPLEdBQUcsR0FBSSxDQUNWLEdBQUksRUFBSSxFQUFHLEdBQU0sR0FBSSxFQUFHLEdBQUssRUFBSSxFQUFFLE9BQVksRUFBRyxHQUFLLEVBQUUsT0FBYyxJQUFJLEVBQUUsU0FBYyxFQUFFLEtBQUssR0FBSSxHQUFLLEVBQUUsT0FBUyxDQUFFLEdBQUksRUFBRSxLQUFLLEVBQUcsRUFBRyxLQUFLLEtBQU0sTUFBTyxHQUUzSixPQURJLEVBQUksRUFBRyxHQUFHLEdBQUssQ0FBQyxFQUFHLEdBQUssRUFBRyxFQUFFLFFBQ3pCLEVBQUcsUUFDRixPQUFRLEdBQUcsRUFBSSxFQUFJLFVBQ25CLEdBQUcsU0FBRSxRQUFnQixDQUFFLE1BQU8sRUFBRyxHQUFJLEtBQU0sUUFDM0MsR0FBRyxFQUFFLFFBQVMsRUFBSSxFQUFHLEdBQUksRUFBSyxDQUFDLEdBQUksYUFDbkMsR0FBRyxFQUFLLEVBQUUsSUFBSSxNQUFPLEVBQUUsS0FBSyxNQUFPLGlCQUVwQyxHQUFNLEVBQUksRUFBRSxLQUFNLElBQUksRUFBRSxPQUFTLEdBQUssRUFBRSxFQUFFLE9BQVMsS0FBUSxHQUFHLEtBQU8sR0FBSyxFQUFHLEtBQU8sR0FBSSxDQUFFLEVBQUksRUFBRyxTQUNqRyxHQUFJLEVBQUcsS0FBTyxHQUFNLEVBQUMsR0FBTSxFQUFHLEdBQUssRUFBRSxJQUFNLEVBQUcsR0FBSyxFQUFFLElBQU0sQ0FBRSxFQUFFLE1BQVEsRUFBRyxHQUFJLE1BQzlFLEdBQUksRUFBRyxLQUFPLEdBQUssRUFBRSxNQUFRLEVBQUUsR0FBSSxDQUFFLEVBQUUsTUFBUSxFQUFFLEdBQUksRUFBSSxFQUFJLE1BQzdELEdBQUksR0FBSyxFQUFFLE1BQVEsRUFBRSxHQUFJLENBQUUsRUFBRSxNQUFRLEVBQUUsR0FBSSxFQUFFLElBQUksS0FBSyxHQUFLLE1BQzNELEFBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxNQUNoQixFQUFFLEtBQUssTUFBTyxTQUV0QixFQUFLLEVBQUssS0FBSyxFQUFTLFNBQ25CLEVBQVAsQ0FBWSxFQUFLLENBQUMsRUFBRyxHQUFJLEVBQUksU0FBSyxDQUFVLEVBQUksRUFBSSxFQUN0RCxHQUFJLEVBQUcsR0FBSyxFQUFHLEtBQU0sR0FBRyxHQUFJLE1BQU8sQ0FBRSxNQUFPLEVBQUcsR0FBSyxFQUFHLEdBQUssT0FBUSxLQUFNLE1BSWxGLEdBQWtCLFNBQVMsRUFBRyxFQUFHLEVBQUcsRUFBSSxDQUNwQyxBQUFJLElBQU8sUUFBVyxHQUFLLEdBQzNCLEVBQUUsR0FBTSxFQUFFLElBR2QsR0FBZSxTQUFVLEVBQUcsRUFBUyxDQUNqQyxPQUFTLEtBQUssR0FBRyxBQUFJLElBQU0sV0FBYSxDQUFDLEVBQVEsZUFBZSxJQUFJLEdBQVEsR0FBSyxFQUFFLEtBR3ZGLEdBQVcsU0FBVSxFQUFHLENBQ3BCLEdBQUksR0FBSSxNQUFPLFNBQVcsWUFBYyxPQUFPLFNBQVUsRUFBSSxHQUFLLEVBQUUsR0FBSSxFQUFJLEVBQzVFLEdBQUksRUFBRyxNQUFPLEdBQUUsS0FBSyxHQUNyQixHQUFJLEdBQUssTUFBTyxHQUFFLFFBQVcsU0FBVSxNQUFPLENBQzFDLEtBQU0sVUFBWSxDQUNkLE1BQUksSUFBSyxHQUFLLEVBQUUsUUFBUSxHQUFJLFFBQ3JCLENBQUUsTUFBTyxHQUFLLEVBQUUsS0FBTSxLQUFNLENBQUMsS0FHNUMsS0FBTSxJQUFJLFdBQVUsRUFBSSwwQkFBNEIsb0NBR3hELEdBQVMsU0FBVSxFQUFHLEVBQUcsQ0FDckIsR0FBSSxHQUFJLE1BQU8sU0FBVyxZQUFjLEVBQUUsT0FBTyxVQUNqRCxHQUFJLENBQUMsRUFBRyxNQUFPLEdBQ2YsR0FBSSxHQUFJLEVBQUUsS0FBSyxHQUFJLEVBQUcsRUFBSyxHQUFJLEVBQy9CLEdBQUksQ0FDQSxLQUFRLEtBQU0sUUFBVSxLQUFNLElBQU0sQ0FBRSxHQUFJLEVBQUUsUUFBUSxNQUFNLEVBQUcsS0FBSyxFQUFFLGFBRWpFLEVBQVAsQ0FBZ0IsRUFBSSxDQUFFLE1BQU8sVUFDN0IsQ0FDSSxHQUFJLENBQ0EsQUFBSSxHQUFLLENBQUMsRUFBRSxNQUFTLEdBQUksRUFBRSxTQUFZLEVBQUUsS0FBSyxVQUVsRCxDQUFVLEdBQUksRUFBRyxLQUFNLEdBQUUsT0FFN0IsTUFBTyxJQUdYLEdBQVcsVUFBWSxDQUNuQixPQUFTLEdBQUssR0FBSSxFQUFJLEVBQUcsRUFBSSxVQUFVLE9BQVEsSUFDM0MsRUFBSyxFQUFHLE9BQU8sR0FBTyxVQUFVLEtBQ3BDLE1BQU8sSUFHWCxHQUFpQixVQUFZLENBQ3pCLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBRyxFQUFLLFVBQVUsT0FBUSxFQUFJLEVBQUksSUFBSyxHQUFLLFVBQVUsR0FBRyxPQUM3RSxPQUFTLEdBQUksTUFBTSxHQUFJLEVBQUksRUFBRyxFQUFJLEVBQUcsRUFBSSxFQUFJLElBQ3pDLE9BQVMsR0FBSSxVQUFVLEdBQUksRUFBSSxFQUFHLEVBQUssRUFBRSxPQUFRLEVBQUksRUFBSSxJQUFLLElBQzFELEVBQUUsR0FBSyxFQUFFLEdBQ2pCLE1BQU8sSUFHWCxHQUFVLFNBQVUsRUFBRyxDQUNuQixNQUFPLGdCQUFnQixJQUFXLE1BQUssRUFBSSxFQUFHLE1BQVEsR0FBSSxJQUFRLElBR3RFLEdBQW1CLFNBQVUsRUFBUyxFQUFZLEVBQVcsQ0FDekQsR0FBSSxDQUFDLE9BQU8sY0FBZSxLQUFNLElBQUksV0FBVSx3Q0FDL0MsR0FBSSxHQUFJLEVBQVUsTUFBTSxFQUFTLEdBQWMsSUFBSyxFQUFHLEVBQUksR0FDM0QsTUFBTyxHQUFJLEdBQUksRUFBSyxRQUFTLEVBQUssU0FBVSxFQUFLLFVBQVcsRUFBRSxPQUFPLGVBQWlCLFVBQVksQ0FBRSxNQUFPLE9BQVMsRUFDcEgsV0FBYyxFQUFHLENBQUUsQUFBSSxFQUFFLElBQUksR0FBRSxHQUFLLFNBQVUsRUFBRyxDQUFFLE1BQU8sSUFBSSxTQUFRLFNBQVUsRUFBRyxFQUFHLENBQUUsRUFBRSxLQUFLLENBQUMsRUFBRyxFQUFHLEVBQUcsSUFBTSxHQUFLLEVBQU8sRUFBRyxPQUM5SCxXQUFnQixFQUFHLEVBQUcsQ0FBRSxHQUFJLENBQUUsRUFBSyxFQUFFLEdBQUcsVUFBYyxFQUFQLENBQVksRUFBTyxFQUFFLEdBQUcsR0FBSSxJQUMzRSxXQUFjLEVBQUcsQ0FBRSxFQUFFLGdCQUFpQixJQUFVLFFBQVEsUUFBUSxFQUFFLE1BQU0sR0FBRyxLQUFLLEVBQVMsR0FBVSxFQUFPLEVBQUUsR0FBRyxHQUFJLEdBQ25ILFdBQWlCLEVBQU8sQ0FBRSxFQUFPLE9BQVEsR0FDekMsV0FBZ0IsRUFBTyxDQUFFLEVBQU8sUUFBUyxHQUN6QyxXQUFnQixFQUFHLEVBQUcsQ0FBRSxBQUFJLEVBQUUsR0FBSSxFQUFFLFFBQVMsRUFBRSxRQUFRLEVBQU8sRUFBRSxHQUFHLEdBQUksRUFBRSxHQUFHLE1BR2hGLEdBQW1CLFNBQVUsRUFBRyxDQUM1QixHQUFJLEdBQUcsRUFDUCxNQUFPLEdBQUksR0FBSSxFQUFLLFFBQVMsRUFBSyxRQUFTLFNBQVUsRUFBRyxDQUFFLEtBQU0sS0FBTyxFQUFLLFVBQVcsRUFBRSxPQUFPLFVBQVksVUFBWSxDQUFFLE1BQU8sT0FBUyxFQUMxSSxXQUFjLEVBQUcsRUFBRyxDQUFFLEVBQUUsR0FBSyxFQUFFLEdBQUssU0FBVSxFQUFHLENBQUUsTUFBUSxHQUFJLENBQUMsR0FBSyxDQUFFLE1BQU8sR0FBUSxFQUFFLEdBQUcsSUFBSyxLQUFNLElBQU0sVUFBYSxFQUFJLEVBQUUsR0FBSyxHQUFPLElBRy9JLEdBQWdCLFNBQVUsRUFBRyxDQUN6QixHQUFJLENBQUMsT0FBTyxjQUFlLEtBQU0sSUFBSSxXQUFVLHdDQUMvQyxHQUFJLEdBQUksRUFBRSxPQUFPLGVBQWdCLEVBQ2pDLE1BQU8sR0FBSSxFQUFFLEtBQUssR0FBTSxHQUFJLE1BQU8sS0FBYSxXQUFhLEdBQVMsR0FBSyxFQUFFLE9BQU8sWUFBYSxFQUFJLEdBQUksRUFBSyxRQUFTLEVBQUssU0FBVSxFQUFLLFVBQVcsRUFBRSxPQUFPLGVBQWlCLFVBQVksQ0FBRSxNQUFPLE9BQVMsR0FDOU0sV0FBYyxFQUFHLENBQUUsRUFBRSxHQUFLLEVBQUUsSUFBTSxTQUFVLEVBQUcsQ0FBRSxNQUFPLElBQUksU0FBUSxTQUFVLEVBQVMsRUFBUSxDQUFFLEVBQUksRUFBRSxHQUFHLEdBQUksRUFBTyxFQUFTLEVBQVEsRUFBRSxLQUFNLEVBQUUsVUFDaEosV0FBZ0IsRUFBUyxFQUFRLEVBQUcsRUFBRyxDQUFFLFFBQVEsUUFBUSxHQUFHLEtBQUssU0FBUyxFQUFHLENBQUUsRUFBUSxDQUFFLE1BQU8sRUFBRyxLQUFNLEtBQVMsS0FHdEgsR0FBdUIsU0FBVSxFQUFRLEVBQUssQ0FDMUMsTUFBSSxRQUFPLGVBQWtCLE9BQU8sZUFBZSxFQUFRLE1BQU8sQ0FBRSxNQUFPLElBQWlCLEVBQU8sSUFBTSxFQUNsRyxHQUdYLEdBQWUsU0FBVSxFQUFLLENBQzFCLEdBQUksR0FBTyxFQUFJLFdBQVksTUFBTyxHQUNsQyxHQUFJLEdBQVMsR0FDYixHQUFJLEdBQU8sS0FBTSxPQUFTLEtBQUssR0FBSyxBQUFJLE9BQU8sZUFBZSxLQUFLLEVBQUssSUFBSSxHQUFPLEdBQUssRUFBSSxJQUM1RixTQUFPLFFBQWEsRUFDYixHQUdYLEdBQWtCLFNBQVUsRUFBSyxDQUM3QixNQUFRLElBQU8sRUFBSSxXQUFjLEVBQU0sQ0FBRSxRQUFXLElBR3hELEdBQXlCLFNBQVUsRUFBVSxFQUFZLENBQ3JELEdBQUksQ0FBQyxFQUFXLElBQUksR0FDaEIsS0FBTSxJQUFJLFdBQVUsa0RBRXhCLE1BQU8sR0FBVyxJQUFJLElBRzFCLEdBQXlCLFNBQVUsRUFBVSxFQUFZLEVBQU8sQ0FDNUQsR0FBSSxDQUFDLEVBQVcsSUFBSSxHQUNoQixLQUFNLElBQUksV0FBVSxrREFFeEIsU0FBVyxJQUFJLEVBQVUsR0FDbEIsR0FHWCxFQUFTLFlBQWEsSUFDdEIsRUFBUyxXQUFZLElBQ3JCLEVBQVMsU0FBVSxJQUNuQixFQUFTLGFBQWMsSUFDdkIsRUFBUyxVQUFXLElBQ3BCLEVBQVMsYUFBYyxJQUN2QixFQUFTLFlBQWEsSUFDdEIsRUFBUyxjQUFlLElBQ3hCLEVBQVMsZUFBZ0IsSUFDekIsRUFBUyxrQkFBbUIsSUFDNUIsRUFBUyxXQUFZLElBQ3JCLEVBQVMsU0FBVSxJQUNuQixFQUFTLFdBQVksSUFDckIsRUFBUyxpQkFBa0IsSUFDM0IsRUFBUyxVQUFXLElBQ3BCLEVBQVMsbUJBQW9CLElBQzdCLEVBQVMsbUJBQW9CLElBQzdCLEVBQVMsZ0JBQWlCLElBQzFCLEVBQVMsdUJBQXdCLElBQ2pDLEVBQVMsZUFBZ0IsSUFDekIsRUFBUyxrQkFBbUIsSUFDNUIsRUFBUyx5QkFBMEIsSUFDbkMsRUFBUyx5QkFBMEIsUUMxUnZDLG9CQVVBLEdBQUksSUFBbUIsSUFHbkIsR0FBa0Isc0JBR2xCLEdBQWlCLDRCQUdqQixHQUF5QixFQUN6QixHQUF1QixFQUd2QixHQUFXLEVBQUksRUFDZixHQUFtQixpQkFHbkIsR0FBVSxxQkFDVixHQUFXLGlCQUNYLEdBQVUsbUJBQ1YsR0FBVSxnQkFDVixHQUFXLGlCQUNYLEdBQVUsb0JBQ1YsR0FBUyw2QkFDVCxHQUFTLGVBQ1QsR0FBWSxrQkFDWixHQUFZLGtCQUNaLEdBQWEsbUJBQ2IsR0FBWSxrQkFDWixHQUFTLGVBQ1QsR0FBWSxrQkFDWixHQUFZLGtCQUNaLEdBQWEsbUJBRWIsR0FBaUIsdUJBQ2pCLEdBQWMsb0JBQ2QsR0FBYSx3QkFDYixHQUFhLHdCQUNiLEdBQVUscUJBQ1YsR0FBVyxzQkFDWCxHQUFXLHNCQUNYLEdBQVcsc0JBQ1gsR0FBa0IsNkJBQ2xCLEdBQVksdUJBQ1osR0FBWSx1QkFHWixHQUFlLG1EQUNmLEdBQWdCLFFBQ2hCLEdBQWUsTUFDZixHQUFhLG1HQU1iLEdBQWUsc0JBR2YsR0FBZSxXQUdmLEdBQWUsOEJBR2YsR0FBVyxtQkFHWCxFQUFpQixHQUNyQixFQUFlLElBQWMsRUFBZSxJQUM1QyxFQUFlLElBQVcsRUFBZSxJQUN6QyxFQUFlLElBQVksRUFBZSxJQUMxQyxFQUFlLElBQW1CLEVBQWUsSUFDakQsRUFBZSxJQUFhLEdBQzVCLEVBQWUsSUFBVyxFQUFlLElBQ3pDLEVBQWUsSUFBa0IsRUFBZSxJQUNoRCxFQUFlLElBQWUsRUFBZSxJQUM3QyxFQUFlLElBQVksRUFBZSxJQUMxQyxFQUFlLElBQVUsRUFBZSxJQUN4QyxFQUFlLElBQWEsRUFBZSxJQUMzQyxFQUFlLElBQVUsRUFBZSxJQUN4QyxFQUFlLElBQWMsR0FHN0IsR0FBSSxJQUFhLE1BQU8sU0FBVSxVQUFZLFFBQVUsT0FBTyxTQUFXLFFBQVUsT0FHaEYsR0FBVyxNQUFPLE9BQVEsVUFBWSxNQUFRLEtBQUssU0FBVyxRQUFVLEtBR3hFLEdBQU8sSUFBYyxJQUFZLFNBQVMsaUJBRzFDLEdBQWMsTUFBTyxLQUFXLFVBQVksSUFBVyxDQUFDLEdBQVEsVUFBWSxHQUc1RSxHQUFhLElBQWUsTUFBTyxLQUFVLFVBQVksSUFBVSxDQUFDLEdBQU8sVUFBWSxHQUd2RixHQUFnQixJQUFjLEdBQVcsVUFBWSxHQUdyRCxHQUFjLElBQWlCLEdBQVcsUUFHMUMsR0FBWSxVQUFXLENBQ3pCLEdBQUksQ0FDRixNQUFPLEtBQWUsR0FBWSxRQUFRLGNBQ25DLEVBQVAsTUFJQSxHQUFtQixJQUFZLEdBQVMsYUFVNUMsWUFBbUIsRUFBTyxFQUFRLENBS2hDLE9BSkksR0FBUSxHQUNSLEVBQVMsRUFBTyxPQUNoQixFQUFTLEVBQU0sT0FFWixFQUFFLEVBQVEsR0FDZixFQUFNLEVBQVMsR0FBUyxFQUFPLEdBRWpDLE1BQU8sR0FhVCxZQUFtQixFQUFPLEVBQVcsQ0FJbkMsT0FISSxHQUFRLEdBQ1IsRUFBUyxFQUFRLEVBQU0sT0FBUyxFQUU3QixFQUFFLEVBQVEsR0FDZixHQUFJLEVBQVUsRUFBTSxHQUFRLEVBQU8sR0FDakMsTUFBTyxHQUdYLE1BQU8sR0FVVCxZQUFzQixFQUFLLENBQ3pCLE1BQU8sVUFBUyxFQUFRLENBQ3RCLE1BQU8sSUFBVSxLQUFPLE9BQVksRUFBTyxJQWEvQyxZQUFtQixFQUFHLEVBQVUsQ0FJOUIsT0FISSxHQUFRLEdBQ1IsRUFBUyxNQUFNLEdBRVosRUFBRSxFQUFRLEdBQ2YsRUFBTyxHQUFTLEVBQVMsR0FFM0IsTUFBTyxHQVVULFlBQW1CLEVBQU0sQ0FDdkIsTUFBTyxVQUFTLEVBQU8sQ0FDckIsTUFBTyxHQUFLLElBWWhCLFlBQWtCLEVBQVEsRUFBSyxDQUM3QixNQUFPLElBQVUsS0FBTyxPQUFZLEVBQU8sR0FVN0MsWUFBc0IsRUFBTyxDQUczQixHQUFJLEdBQVMsR0FDYixHQUFJLEdBQVMsTUFBUSxNQUFPLEdBQU0sVUFBWSxXQUM1QyxHQUFJLENBQ0YsRUFBUyxDQUFDLENBQUUsR0FBUSxVQUNiLEVBQVAsRUFFSixNQUFPLEdBVVQsWUFBb0IsRUFBSyxDQUN2QixHQUFJLEdBQVEsR0FDUixFQUFTLE1BQU0sRUFBSSxNQUV2QixTQUFJLFFBQVEsU0FBUyxFQUFPLEVBQUssQ0FDL0IsRUFBTyxFQUFFLEdBQVMsQ0FBQyxFQUFLLEtBRW5CLEVBV1QsWUFBaUIsRUFBTSxFQUFXLENBQ2hDLE1BQU8sVUFBUyxFQUFLLENBQ25CLE1BQU8sR0FBSyxFQUFVLEtBVzFCLFlBQW9CLEVBQUssQ0FDdkIsR0FBSSxHQUFRLEdBQ1IsRUFBUyxNQUFNLEVBQUksTUFFdkIsU0FBSSxRQUFRLFNBQVMsRUFBTyxDQUMxQixFQUFPLEVBQUUsR0FBUyxJQUViLEVBSVQsR0FBSSxJQUFhLE1BQU0sVUFDbkIsR0FBWSxTQUFTLFVBQ3JCLEdBQWMsT0FBTyxVQUdyQixHQUFhLEdBQUssc0JBR2xCLEdBQWMsVUFBVyxDQUMzQixHQUFJLEdBQU0sU0FBUyxLQUFLLElBQWMsR0FBVyxNQUFRLEdBQVcsS0FBSyxVQUFZLElBQ3JGLE1BQU8sR0FBTyxpQkFBbUIsRUFBTyxNQUl0QyxHQUFlLEdBQVUsU0FHekIsR0FBaUIsR0FBWSxlQU83QixHQUFpQixHQUFZLFNBRzdCLEdBQWEsT0FBTyxJQUN0QixHQUFhLEtBQUssSUFBZ0IsUUFBUSxHQUFjLFFBQ3ZELFFBQVEseURBQTBELFNBQVcsS0FJNUUsR0FBUyxHQUFLLE9BQ2QsR0FBYSxHQUFLLFdBQ2xCLEdBQWUsR0FBUSxPQUFPLGVBQWdCLFFBQzlDLEdBQXVCLEdBQVkscUJBQ25DLEdBQVMsR0FBVyxPQUdwQixHQUFtQixPQUFPLHNCQUMxQixHQUFhLEdBQVEsT0FBTyxLQUFNLFFBR2xDLEdBQVcsR0FBVSxHQUFNLFlBQzNCLEdBQU0sR0FBVSxHQUFNLE9BQ3RCLEdBQVUsR0FBVSxHQUFNLFdBQzFCLEdBQU0sR0FBVSxHQUFNLE9BQ3RCLEdBQVUsR0FBVSxHQUFNLFdBQzFCLEdBQWUsR0FBVSxPQUFRLFVBR2pDLEdBQXFCLEdBQVMsSUFDOUIsR0FBZ0IsR0FBUyxJQUN6QixHQUFvQixHQUFTLElBQzdCLEdBQWdCLEdBQVMsSUFDekIsR0FBb0IsR0FBUyxJQUc3QixHQUFjLEdBQVMsR0FBTyxVQUFZLE9BQzFDLEdBQWdCLEdBQWMsR0FBWSxRQUFVLE9BQ3BELEdBQWlCLEdBQWMsR0FBWSxTQUFXLE9BUzFELFlBQWMsRUFBUyxDQUNyQixHQUFJLEdBQVEsR0FDUixFQUFTLEVBQVUsRUFBUSxPQUFTLEVBR3hDLElBREEsS0FBSyxRQUNFLEVBQUUsRUFBUSxHQUFRLENBQ3ZCLEdBQUksR0FBUSxFQUFRLEdBQ3BCLEtBQUssSUFBSSxFQUFNLEdBQUksRUFBTSxLQVc3QixhQUFxQixDQUNuQixLQUFLLFNBQVcsR0FBZSxHQUFhLE1BQVEsR0FhdEQsWUFBb0IsRUFBSyxDQUN2QixNQUFPLE1BQUssSUFBSSxJQUFRLE1BQU8sTUFBSyxTQUFTLEdBWS9DLFlBQWlCLEVBQUssQ0FDcEIsR0FBSSxHQUFPLEtBQUssU0FDaEIsR0FBSSxHQUFjLENBQ2hCLEdBQUksR0FBUyxFQUFLLEdBQ2xCLE1BQU8sS0FBVyxHQUFpQixPQUFZLEVBRWpELE1BQU8sSUFBZSxLQUFLLEVBQU0sR0FBTyxFQUFLLEdBQU8sT0FZdEQsWUFBaUIsRUFBSyxDQUNwQixHQUFJLEdBQU8sS0FBSyxTQUNoQixNQUFPLElBQWUsRUFBSyxLQUFTLE9BQVksR0FBZSxLQUFLLEVBQU0sR0FhNUUsWUFBaUIsRUFBSyxFQUFPLENBQzNCLEdBQUksR0FBTyxLQUFLLFNBQ2hCLFNBQUssR0FBUSxJQUFnQixJQUFVLE9BQWEsR0FBaUIsRUFDOUQsS0FJVCxHQUFLLFVBQVUsTUFBUSxHQUN2QixHQUFLLFVBQVUsT0FBWSxHQUMzQixHQUFLLFVBQVUsSUFBTSxHQUNyQixHQUFLLFVBQVUsSUFBTSxHQUNyQixHQUFLLFVBQVUsSUFBTSxHQVNyQixZQUFtQixFQUFTLENBQzFCLEdBQUksR0FBUSxHQUNSLEVBQVMsRUFBVSxFQUFRLE9BQVMsRUFHeEMsSUFEQSxLQUFLLFFBQ0UsRUFBRSxFQUFRLEdBQVEsQ0FDdkIsR0FBSSxHQUFRLEVBQVEsR0FDcEIsS0FBSyxJQUFJLEVBQU0sR0FBSSxFQUFNLEtBVzdCLGFBQTBCLENBQ3hCLEtBQUssU0FBVyxHQVlsQixZQUF5QixFQUFLLENBQzVCLEdBQUksR0FBTyxLQUFLLFNBQ1osRUFBUSxHQUFhLEVBQU0sR0FFL0IsR0FBSSxFQUFRLEVBQ1YsTUFBTyxHQUVULEdBQUksR0FBWSxFQUFLLE9BQVMsRUFDOUIsTUFBSSxJQUFTLEVBQ1gsRUFBSyxNQUVMLEdBQU8sS0FBSyxFQUFNLEVBQU8sR0FFcEIsR0FZVCxZQUFzQixFQUFLLENBQ3pCLEdBQUksR0FBTyxLQUFLLFNBQ1osRUFBUSxHQUFhLEVBQU0sR0FFL0IsTUFBTyxHQUFRLEVBQUksT0FBWSxFQUFLLEdBQU8sR0FZN0MsWUFBc0IsRUFBSyxDQUN6QixNQUFPLElBQWEsS0FBSyxTQUFVLEdBQU8sR0FhNUMsWUFBc0IsRUFBSyxFQUFPLENBQ2hDLEdBQUksR0FBTyxLQUFLLFNBQ1osRUFBUSxHQUFhLEVBQU0sR0FFL0IsTUFBSSxHQUFRLEVBQ1YsRUFBSyxLQUFLLENBQUMsRUFBSyxJQUVoQixFQUFLLEdBQU8sR0FBSyxFQUVaLEtBSVQsR0FBVSxVQUFVLE1BQVEsR0FDNUIsR0FBVSxVQUFVLE9BQVksR0FDaEMsR0FBVSxVQUFVLElBQU0sR0FDMUIsR0FBVSxVQUFVLElBQU0sR0FDMUIsR0FBVSxVQUFVLElBQU0sR0FTMUIsWUFBa0IsRUFBUyxDQUN6QixHQUFJLEdBQVEsR0FDUixFQUFTLEVBQVUsRUFBUSxPQUFTLEVBR3hDLElBREEsS0FBSyxRQUNFLEVBQUUsRUFBUSxHQUFRLENBQ3ZCLEdBQUksR0FBUSxFQUFRLEdBQ3BCLEtBQUssSUFBSSxFQUFNLEdBQUksRUFBTSxLQVc3QixhQUF5QixDQUN2QixLQUFLLFNBQVcsQ0FDZCxLQUFRLEdBQUksSUFDWixJQUFPLEdBQUssS0FBTyxJQUNuQixPQUFVLEdBQUksS0FhbEIsWUFBd0IsRUFBSyxDQUMzQixNQUFPLElBQVcsS0FBTSxHQUFLLE9BQVUsR0FZekMsWUFBcUIsRUFBSyxDQUN4QixNQUFPLElBQVcsS0FBTSxHQUFLLElBQUksR0FZbkMsWUFBcUIsRUFBSyxDQUN4QixNQUFPLElBQVcsS0FBTSxHQUFLLElBQUksR0FhbkMsWUFBcUIsRUFBSyxFQUFPLENBQy9CLFVBQVcsS0FBTSxHQUFLLElBQUksRUFBSyxHQUN4QixLQUlULEdBQVMsVUFBVSxNQUFRLEdBQzNCLEdBQVMsVUFBVSxPQUFZLEdBQy9CLEdBQVMsVUFBVSxJQUFNLEdBQ3pCLEdBQVMsVUFBVSxJQUFNLEdBQ3pCLEdBQVMsVUFBVSxJQUFNLEdBVXpCLFlBQWtCLEVBQVEsQ0FDeEIsR0FBSSxHQUFRLEdBQ1IsRUFBUyxFQUFTLEVBQU8sT0FBUyxFQUd0QyxJQURBLEtBQUssU0FBVyxHQUFJLElBQ2IsRUFBRSxFQUFRLEdBQ2YsS0FBSyxJQUFJLEVBQU8sSUFjcEIsWUFBcUIsRUFBTyxDQUMxQixZQUFLLFNBQVMsSUFBSSxFQUFPLElBQ2xCLEtBWVQsWUFBcUIsRUFBTyxDQUMxQixNQUFPLE1BQUssU0FBUyxJQUFJLEdBSTNCLEdBQVMsVUFBVSxJQUFNLEdBQVMsVUFBVSxLQUFPLEdBQ25ELEdBQVMsVUFBVSxJQUFNLEdBU3pCLFlBQWUsRUFBUyxDQUN0QixLQUFLLFNBQVcsR0FBSSxJQUFVLEdBVWhDLGFBQXNCLENBQ3BCLEtBQUssU0FBVyxHQUFJLElBWXRCLFlBQXFCLEVBQUssQ0FDeEIsTUFBTyxNQUFLLFNBQVMsT0FBVSxHQVlqQyxZQUFrQixFQUFLLENBQ3JCLE1BQU8sTUFBSyxTQUFTLElBQUksR0FZM0IsWUFBa0IsRUFBSyxDQUNyQixNQUFPLE1BQUssU0FBUyxJQUFJLEdBYTNCLFlBQWtCLEVBQUssRUFBTyxDQUM1QixHQUFJLEdBQVEsS0FBSyxTQUNqQixHQUFJLFlBQWlCLElBQVcsQ0FDOUIsR0FBSSxHQUFRLEVBQU0sU0FDbEIsR0FBSSxDQUFDLElBQVEsRUFBTSxPQUFTLEdBQW1CLEVBQzdDLFNBQU0sS0FBSyxDQUFDLEVBQUssSUFDVixLQUVULEVBQVEsS0FBSyxTQUFXLEdBQUksSUFBUyxHQUV2QyxTQUFNLElBQUksRUFBSyxHQUNSLEtBSVQsR0FBTSxVQUFVLE1BQVEsR0FDeEIsR0FBTSxVQUFVLE9BQVksR0FDNUIsR0FBTSxVQUFVLElBQU0sR0FDdEIsR0FBTSxVQUFVLElBQU0sR0FDdEIsR0FBTSxVQUFVLElBQU0sR0FVdEIsWUFBdUIsRUFBTyxFQUFXLENBR3ZDLEdBQUksR0FBVSxHQUFRLElBQVUsR0FBWSxHQUN4QyxHQUFVLEVBQU0sT0FBUSxRQUN4QixHQUVBLEVBQVMsRUFBTyxPQUNoQixFQUFjLENBQUMsQ0FBQyxFQUVwQixPQUFTLEtBQU8sR0FDZCxBQUFLLElBQWEsR0FBZSxLQUFLLEVBQU8sS0FDekMsQ0FBRSxJQUFnQixJQUFPLFVBQVksR0FBUSxFQUFLLE1BQ3BELEVBQU8sS0FBSyxHQUdoQixNQUFPLEdBV1QsWUFBc0IsRUFBTyxFQUFLLENBRWhDLE9BREksR0FBUyxFQUFNLE9BQ1osS0FDTCxHQUFJLEdBQUcsRUFBTSxHQUFRLEdBQUksR0FDdkIsTUFBTyxHQUdYLE1BQU8sR0FXVCxZQUFpQixFQUFRLEVBQU0sQ0FDN0IsRUFBTyxHQUFNLEVBQU0sR0FBVSxDQUFDLEdBQVEsR0FBUyxHQUsvQyxPQUhJLEdBQVEsRUFDUixFQUFTLEVBQUssT0FFWCxHQUFVLE1BQVEsRUFBUSxHQUMvQixFQUFTLEVBQU8sR0FBTSxFQUFLLE9BRTdCLE1BQVEsSUFBUyxHQUFTLEVBQVUsRUFBUyxPQWMvQyxZQUF3QixFQUFRLEVBQVUsRUFBYSxDQUNyRCxHQUFJLEdBQVMsRUFBUyxHQUN0QixNQUFPLElBQVEsR0FBVSxFQUFTLEdBQVUsRUFBUSxFQUFZLElBVWxFLFlBQW9CLEVBQU8sQ0FDekIsTUFBTyxJQUFlLEtBQUssR0FXN0IsWUFBbUIsRUFBUSxFQUFLLENBQzlCLE1BQU8sSUFBVSxNQUFRLElBQU8sUUFBTyxHQWtCekMsWUFBcUIsRUFBTyxFQUFPLEVBQVksRUFBUyxFQUFPLENBQzdELE1BQUksS0FBVSxFQUNMLEdBRUwsR0FBUyxNQUFRLEdBQVMsTUFBUyxDQUFDLEdBQVMsSUFBVSxDQUFDLEdBQWEsR0FDaEUsSUFBVSxHQUFTLElBQVUsRUFFL0IsR0FBZ0IsRUFBTyxFQUFPLEdBQWEsRUFBWSxFQUFTLEdBa0J6RSxZQUF5QixFQUFRLEVBQU8sRUFBVyxFQUFZLEVBQVMsRUFBTyxDQUM3RSxHQUFJLEdBQVcsR0FBUSxHQUNuQixFQUFXLEdBQVEsR0FDbkIsRUFBUyxHQUNULEVBQVMsR0FFYixBQUFLLEdBQ0gsR0FBUyxHQUFPLEdBQ2hCLEVBQVMsR0FBVSxHQUFVLEdBQVksR0FFdEMsR0FDSCxHQUFTLEdBQU8sR0FDaEIsRUFBUyxHQUFVLEdBQVUsR0FBWSxHQUUzQyxHQUFJLEdBQVcsR0FBVSxJQUFhLENBQUMsR0FBYSxHQUNoRCxFQUFXLEdBQVUsSUFBYSxDQUFDLEdBQWEsR0FDaEQsRUFBWSxHQUFVLEVBRTFCLEdBQUksR0FBYSxDQUFDLEVBQ2hCLFVBQVUsR0FBUSxHQUFJLEtBQ2QsR0FBWSxHQUFhLEdBQzdCLEdBQVksRUFBUSxFQUFPLEVBQVcsRUFBWSxFQUFTLEdBQzNELEdBQVcsRUFBUSxFQUFPLEVBQVEsRUFBVyxFQUFZLEVBQVMsR0FFeEUsR0FBSSxDQUFFLEdBQVUsSUFBdUIsQ0FDckMsR0FBSSxHQUFlLEdBQVksR0FBZSxLQUFLLEVBQVEsZUFDdkQsRUFBZSxHQUFZLEdBQWUsS0FBSyxFQUFPLGVBRTFELEdBQUksR0FBZ0IsRUFBYyxDQUNoQyxHQUFJLEdBQWUsRUFBZSxFQUFPLFFBQVUsRUFDL0MsRUFBZSxFQUFlLEVBQU0sUUFBVSxFQUVsRCxVQUFVLEdBQVEsR0FBSSxLQUNmLEVBQVUsRUFBYyxFQUFjLEVBQVksRUFBUyxJQUd0RSxNQUFLLEdBR0wsSUFBVSxHQUFRLEdBQUksS0FDZixHQUFhLEVBQVEsRUFBTyxFQUFXLEVBQVksRUFBUyxJQUgxRCxHQWdCWCxZQUFxQixFQUFRLEVBQVEsRUFBVyxFQUFZLENBQzFELEdBQUksR0FBUSxFQUFVLE9BQ2xCLEVBQVMsRUFDVCxFQUFlLENBQUMsRUFFcEIsR0FBSSxHQUFVLEtBQ1osTUFBTyxDQUFDLEVBR1YsSUFEQSxFQUFTLE9BQU8sR0FDVCxLQUFTLENBQ2QsR0FBSSxHQUFPLEVBQVUsR0FDckIsR0FBSyxHQUFnQixFQUFLLEdBQ2xCLEVBQUssS0FBTyxFQUFPLEVBQUssSUFDeEIsQ0FBRSxHQUFLLElBQU0sSUFFbkIsTUFBTyxHQUdYLEtBQU8sRUFBRSxFQUFRLEdBQVEsQ0FDdkIsRUFBTyxFQUFVLEdBQ2pCLEdBQUksR0FBTSxFQUFLLEdBQ1gsRUFBVyxFQUFPLEdBQ2xCLEVBQVcsRUFBSyxHQUVwQixHQUFJLEdBQWdCLEVBQUssSUFDdkIsR0FBSSxJQUFhLFFBQWEsQ0FBRSxLQUFPLElBQ3JDLE1BQU8sT0FFSixDQUNMLEdBQUksR0FBUSxHQUFJLElBQ2hCLEdBQUksRUFDRixHQUFJLEdBQVMsRUFBVyxFQUFVLEVBQVUsRUFBSyxFQUFRLEVBQVEsR0FFbkUsR0FBSSxDQUFFLEtBQVcsT0FDVCxHQUFZLEVBQVUsRUFBVSxFQUFZLEdBQXlCLEdBQXNCLEdBQzNGLEdBRU4sTUFBTyxJQUliLE1BQU8sR0FXVCxZQUFzQixFQUFPLENBQzNCLEdBQUksQ0FBQyxHQUFTLElBQVUsR0FBUyxHQUMvQixNQUFPLEdBRVQsR0FBSSxHQUFXLEdBQVcsSUFBVSxHQUFhLEdBQVUsR0FBYSxHQUN4RSxNQUFPLEdBQVEsS0FBSyxHQUFTLElBVS9CLFlBQTBCLEVBQU8sQ0FDL0IsTUFBTyxJQUFhLElBQ2xCLEdBQVMsRUFBTSxTQUFXLENBQUMsQ0FBQyxFQUFlLEdBQWUsS0FBSyxJQVVuRSxZQUFzQixFQUFPLENBRzNCLE1BQUksT0FBTyxJQUFTLFdBQ1gsRUFFTCxHQUFTLEtBQ0osR0FFTCxNQUFPLElBQVMsU0FDWCxHQUFRLEdBQ1gsR0FBb0IsRUFBTSxHQUFJLEVBQU0sSUFDcEMsR0FBWSxHQUVYLEdBQVMsR0FVbEIsWUFBa0IsRUFBUSxDQUN4QixHQUFJLENBQUMsR0FBWSxHQUNmLE1BQU8sSUFBVyxHQUVwQixHQUFJLEdBQVMsR0FDYixPQUFTLEtBQU8sUUFBTyxHQUNyQixBQUFJLEdBQWUsS0FBSyxFQUFRLElBQVEsR0FBTyxlQUM3QyxFQUFPLEtBQUssR0FHaEIsTUFBTyxHQVVULFlBQW9CLEVBQVEsQ0FDMUIsR0FBSSxDQUFDLEdBQVMsR0FDWixNQUFPLElBQWEsR0FFdEIsR0FBSSxHQUFVLEdBQVksR0FDdEIsRUFBUyxHQUViLE9BQVMsS0FBTyxHQUNkLEFBQU0sR0FBTyxlQUFrQixJQUFXLENBQUMsR0FBZSxLQUFLLEVBQVEsS0FDckUsRUFBTyxLQUFLLEdBR2hCLE1BQU8sR0FVVCxZQUFxQixFQUFRLENBQzNCLEdBQUksR0FBWSxHQUFhLEdBQzdCLE1BQUksR0FBVSxRQUFVLEdBQUssRUFBVSxHQUFHLEdBQ2pDLEdBQXdCLEVBQVUsR0FBRyxHQUFJLEVBQVUsR0FBRyxJQUV4RCxTQUFTLEVBQVEsQ0FDdEIsTUFBTyxLQUFXLEdBQVUsR0FBWSxFQUFRLEVBQVEsSUFZNUQsWUFBNkIsRUFBTSxFQUFVLENBQzNDLE1BQUksSUFBTSxJQUFTLEdBQW1CLEdBQzdCLEdBQXdCLEdBQU0sR0FBTyxHQUV2QyxTQUFTLEVBQVEsQ0FDdEIsR0FBSSxHQUFXLEdBQUksRUFBUSxHQUMzQixNQUFRLEtBQWEsUUFBYSxJQUFhLEVBQzNDLEdBQU0sRUFBUSxHQUNkLEdBQVksRUFBVSxFQUFVLE9BQVcsR0FBeUIsS0FhNUUsWUFBb0IsRUFBUSxFQUFPLEVBQVcsQ0FLNUMsT0FKSSxHQUFRLEdBQ1IsRUFBUyxFQUFNLE9BQ2YsRUFBUyxHQUVOLEVBQUUsRUFBUSxHQUFRLENBQ3ZCLEdBQUksR0FBTSxFQUFNLEdBQ1osRUFBUSxFQUFPLEdBRW5CLEFBQUksRUFBVSxFQUFPLElBQ25CLEdBQU8sR0FBTyxHQUdsQixNQUFPLEdBVVQsWUFBMEIsRUFBTSxDQUM5QixNQUFPLFVBQVMsRUFBUSxDQUN0QixNQUFPLElBQVEsRUFBUSxJQVkzQixZQUFzQixFQUFPLENBRTNCLEdBQUksTUFBTyxJQUFTLFNBQ2xCLE1BQU8sR0FFVCxHQUFJLEdBQVMsR0FDWCxNQUFPLElBQWlCLEdBQWUsS0FBSyxHQUFTLEdBRXZELEdBQUksR0FBVSxFQUFRLEdBQ3RCLE1BQVEsSUFBVSxLQUFRLEVBQUksR0FBVSxDQUFDLEdBQVksS0FBTyxFQVU5RCxZQUFrQixFQUFPLENBQ3ZCLE1BQU8sSUFBUSxHQUFTLEVBQVEsR0FBYSxHQWlCL0MsWUFBcUIsRUFBTyxFQUFPLEVBQVcsRUFBWSxFQUFTLEVBQU8sQ0FDeEUsR0FBSSxHQUFZLEVBQVUsR0FDdEIsRUFBWSxFQUFNLE9BQ2xCLEVBQVksRUFBTSxPQUV0QixHQUFJLEdBQWEsR0FBYSxDQUFFLElBQWEsRUFBWSxHQUN2RCxNQUFPLEdBR1QsR0FBSSxHQUFVLEVBQU0sSUFBSSxHQUN4QixHQUFJLEdBQVcsRUFBTSxJQUFJLEdBQ3ZCLE1BQU8sSUFBVyxFQUVwQixHQUFJLEdBQVEsR0FDUixFQUFTLEdBQ1QsRUFBUSxFQUFVLEdBQTBCLEdBQUksSUFBVyxPQU0vRCxJQUpBLEVBQU0sSUFBSSxFQUFPLEdBQ2pCLEVBQU0sSUFBSSxFQUFPLEdBR1YsRUFBRSxFQUFRLEdBQVcsQ0FDMUIsR0FBSSxHQUFXLEVBQU0sR0FDakIsRUFBVyxFQUFNLEdBRXJCLEdBQUksRUFDRixHQUFJLEdBQVcsRUFDWCxFQUFXLEVBQVUsRUFBVSxFQUFPLEVBQU8sRUFBTyxHQUNwRCxFQUFXLEVBQVUsRUFBVSxFQUFPLEVBQU8sRUFBTyxHQUUxRCxHQUFJLElBQWEsT0FBVyxDQUMxQixHQUFJLEVBQ0YsU0FFRixFQUFTLEdBQ1QsTUFHRixHQUFJLEdBQ0YsR0FBSSxDQUFDLEdBQVUsRUFBTyxTQUFTLEVBQVUsRUFBVSxDQUM3QyxHQUFJLENBQUMsRUFBSyxJQUFJLElBQ1QsS0FBYSxHQUFZLEVBQVUsRUFBVSxFQUFVLEVBQVksRUFBUyxJQUMvRSxNQUFPLEdBQUssSUFBSSxLQUVoQixDQUNOLEVBQVMsR0FDVCxlQUVPLENBQ0wsS0FBYSxHQUNYLEVBQVUsRUFBVSxFQUFVLEVBQVksRUFBUyxJQUNwRCxDQUNMLEVBQVMsR0FDVCxPQUdKLFNBQU0sT0FBVSxHQUNoQixFQUFNLE9BQVUsR0FDVCxFQXFCVCxZQUFvQixFQUFRLEVBQU8sRUFBSyxFQUFXLEVBQVksRUFBUyxFQUFPLENBQzdFLE9BQVEsT0FDRCxJQUNILEdBQUssRUFBTyxZQUFjLEVBQU0sWUFDM0IsRUFBTyxZQUFjLEVBQU0sV0FDOUIsTUFBTyxHQUVULEVBQVMsRUFBTyxPQUNoQixFQUFRLEVBQU0sV0FFWCxJQUNILE1BQUssSUFBTyxZQUFjLEVBQU0sWUFDNUIsQ0FBQyxFQUFVLEdBQUksSUFBVyxHQUFTLEdBQUksSUFBVyxTQUtuRCxRQUNBLFFBQ0EsSUFHSCxNQUFPLElBQUcsQ0FBQyxFQUFRLENBQUMsT0FFakIsSUFDSCxNQUFPLEdBQU8sTUFBUSxFQUFNLE1BQVEsRUFBTyxTQUFXLEVBQU0sWUFFekQsUUFDQSxJQUlILE1BQU8sSUFBVyxFQUFRLE9BRXZCLElBQ0gsR0FBSSxHQUFVLE9BRVgsSUFDSCxHQUFJLEdBQVksRUFBVSxHQUcxQixHQUZBLEdBQVksR0FBVSxJQUVsQixFQUFPLE1BQVEsRUFBTSxNQUFRLENBQUMsRUFDaEMsTUFBTyxHQUdULEdBQUksR0FBVSxFQUFNLElBQUksR0FDeEIsR0FBSSxFQUNGLE1BQU8sSUFBVyxFQUVwQixHQUFXLEdBR1gsRUFBTSxJQUFJLEVBQVEsR0FDbEIsR0FBSSxHQUFTLEdBQVksRUFBUSxHQUFTLEVBQVEsR0FBUSxFQUFXLEVBQVksRUFBUyxHQUMxRixTQUFNLE9BQVUsR0FDVCxNQUVKLElBQ0gsR0FBSSxHQUNGLE1BQU8sSUFBYyxLQUFLLElBQVcsR0FBYyxLQUFLLEdBRzlELE1BQU8sR0FpQlQsWUFBc0IsRUFBUSxFQUFPLEVBQVcsRUFBWSxFQUFTLEVBQU8sQ0FDMUUsR0FBSSxHQUFZLEVBQVUsR0FDdEIsRUFBVyxHQUFLLEdBQ2hCLEVBQVksRUFBUyxPQUNyQixFQUFXLEdBQUssR0FDaEIsRUFBWSxFQUFTLE9BRXpCLEdBQUksR0FBYSxHQUFhLENBQUMsRUFDN0IsTUFBTyxHQUdULE9BREksR0FBUSxFQUNMLEtBQVMsQ0FDZCxHQUFJLEdBQU0sRUFBUyxHQUNuQixHQUFJLENBQUUsR0FBWSxJQUFPLEdBQVEsR0FBZSxLQUFLLEVBQU8sSUFDMUQsTUFBTyxHQUlYLEdBQUksR0FBVSxFQUFNLElBQUksR0FDeEIsR0FBSSxHQUFXLEVBQU0sSUFBSSxHQUN2QixNQUFPLElBQVcsRUFFcEIsR0FBSSxHQUFTLEdBQ2IsRUFBTSxJQUFJLEVBQVEsR0FDbEIsRUFBTSxJQUFJLEVBQU8sR0FHakIsT0FESSxHQUFXLEVBQ1IsRUFBRSxFQUFRLEdBQVcsQ0FDMUIsRUFBTSxFQUFTLEdBQ2YsR0FBSSxHQUFXLEVBQU8sR0FDbEIsRUFBVyxFQUFNLEdBRXJCLEdBQUksRUFDRixHQUFJLEdBQVcsRUFDWCxFQUFXLEVBQVUsRUFBVSxFQUFLLEVBQU8sRUFBUSxHQUNuRCxFQUFXLEVBQVUsRUFBVSxFQUFLLEVBQVEsRUFBTyxHQUd6RCxHQUFJLENBQUUsS0FBYSxPQUNWLElBQWEsR0FBWSxFQUFVLEVBQVUsRUFBVSxFQUFZLEVBQVMsR0FDN0UsR0FDRCxDQUNMLEVBQVMsR0FDVCxNQUVGLEdBQWEsR0FBVyxHQUFPLGVBRWpDLEdBQUksR0FBVSxDQUFDLEVBQVUsQ0FDdkIsR0FBSSxHQUFVLEVBQU8sWUFDakIsRUFBVSxFQUFNLFlBR3BCLEFBQUksR0FBVyxHQUNWLGVBQWlCLElBQVUsZUFBaUIsSUFDN0MsQ0FBRSxPQUFPLElBQVcsWUFBYyxZQUFtQixJQUNuRCxNQUFPLElBQVcsWUFBYyxZQUFtQixLQUN2RCxHQUFTLElBR2IsU0FBTSxPQUFVLEdBQ2hCLEVBQU0sT0FBVSxHQUNULEVBV1QsWUFBc0IsRUFBUSxDQUM1QixNQUFPLElBQWUsRUFBUSxHQUFRLElBV3hDLFlBQW9CLEVBQUssRUFBSyxDQUM1QixHQUFJLEdBQU8sRUFBSSxTQUNmLE1BQU8sSUFBVSxHQUNiLEVBQUssTUFBTyxJQUFPLFNBQVcsU0FBVyxRQUN6QyxFQUFLLElBVVgsWUFBc0IsRUFBUSxDQUk1QixPQUhJLEdBQVMsR0FBSyxHQUNkLEVBQVMsRUFBTyxPQUViLEtBQVUsQ0FDZixHQUFJLEdBQU0sRUFBTyxHQUNiLEVBQVEsRUFBTyxHQUVuQixFQUFPLEdBQVUsQ0FBQyxFQUFLLEVBQU8sR0FBbUIsSUFFbkQsTUFBTyxHQVdULFlBQW1CLEVBQVEsRUFBSyxDQUM5QixHQUFJLEdBQVEsR0FBUyxFQUFRLEdBQzdCLE1BQU8sSUFBYSxHQUFTLEVBQVEsT0FVdkMsR0FBSSxJQUFhLEdBQW1CLEdBQVEsR0FBa0IsUUFBVSxHQVVwRSxHQUFlLEFBQUMsR0FBK0IsU0FBUyxFQUFRLENBRWxFLE9BREksR0FBUyxHQUNOLEdBQ0wsR0FBVSxFQUFRLEdBQVcsSUFDN0IsRUFBUyxHQUFhLEdBRXhCLE1BQU8sSUFOOEIsR0FnQm5DLEdBQVMsR0FJYixBQUFLLEtBQVksR0FBTyxHQUFJLElBQVMsR0FBSSxhQUFZLE1BQVEsSUFDeEQsSUFBTyxHQUFPLEdBQUksTUFBUSxJQUMxQixJQUFXLEdBQU8sR0FBUSxZQUFjLElBQ3hDLElBQU8sR0FBTyxHQUFJLE1BQVEsSUFDMUIsSUFBVyxHQUFPLEdBQUksTUFBWSxLQUNyQyxJQUFTLFNBQVMsRUFBTyxDQUN2QixHQUFJLEdBQVMsR0FBZSxLQUFLLEdBQzdCLEVBQU8sR0FBVSxHQUFZLEVBQU0sWUFBYyxPQUNqRCxFQUFhLEVBQU8sR0FBUyxHQUFRLE9BRXpDLEdBQUksRUFDRixPQUFRLE9BQ0QsSUFBb0IsTUFBTyxRQUMzQixJQUFlLE1BQU8sUUFDdEIsSUFBbUIsTUFBTyxRQUMxQixJQUFlLE1BQU8sUUFDdEIsSUFBbUIsTUFBTyxJQUduQyxNQUFPLEtBYVgsWUFBaUIsRUFBUSxFQUFNLEVBQVMsQ0FDdEMsRUFBTyxHQUFNLEVBQU0sR0FBVSxDQUFDLEdBQVEsR0FBUyxHQU0vQyxPQUpJLEdBQ0EsRUFBUSxHQUNSLEVBQVMsRUFBSyxPQUVYLEVBQUUsRUFBUSxHQUFRLENBQ3ZCLEdBQUksR0FBTSxHQUFNLEVBQUssSUFDckIsR0FBSSxDQUFFLEdBQVMsR0FBVSxNQUFRLEVBQVEsRUFBUSxJQUMvQyxNQUVGLEVBQVMsRUFBTyxHQUVsQixHQUFJLEVBQ0YsTUFBTyxHQUVULEdBQUksR0FBUyxFQUFTLEVBQU8sT0FBUyxFQUN0QyxNQUFPLENBQUMsQ0FBQyxHQUFVLEdBQVMsSUFBVyxHQUFRLEVBQUssSUFDakQsSUFBUSxJQUFXLEdBQVksSUFXcEMsWUFBaUIsRUFBTyxFQUFRLENBQzlCLFNBQVMsR0FBaUIsR0FDbkIsQ0FBQyxDQUFDLEdBQ04sT0FBTyxJQUFTLFVBQVksR0FBUyxLQUFLLEtBQzFDLEVBQVEsSUFBTSxFQUFRLEdBQUssR0FBSyxFQUFRLEVBVzdDLFlBQWUsRUFBTyxFQUFRLENBQzVCLEdBQUksR0FBUSxHQUNWLE1BQU8sR0FFVCxHQUFJLEdBQU8sTUFBTyxHQUNsQixNQUFJLElBQVEsVUFBWSxHQUFRLFVBQVksR0FBUSxXQUNoRCxHQUFTLE1BQVEsR0FBUyxHQUNyQixHQUVGLEdBQWMsS0FBSyxJQUFVLENBQUMsR0FBYSxLQUFLLElBQ3BELEdBQVUsTUFBUSxJQUFTLFFBQU8sR0FVdkMsWUFBbUIsRUFBTyxDQUN4QixHQUFJLEdBQU8sTUFBTyxHQUNsQixNQUFRLElBQVEsVUFBWSxHQUFRLFVBQVksR0FBUSxVQUFZLEdBQVEsVUFDdkUsSUFBVSxZQUNWLElBQVUsS0FVakIsWUFBa0IsRUFBTSxDQUN0QixNQUFPLENBQUMsQ0FBQyxJQUFlLEtBQWMsR0FVeEMsWUFBcUIsRUFBTyxDQUMxQixHQUFJLEdBQU8sR0FBUyxFQUFNLFlBQ3RCLEVBQVMsTUFBTyxJQUFRLFlBQWMsRUFBSyxXQUFjLEdBRTdELE1BQU8sS0FBVSxFQVduQixZQUE0QixFQUFPLENBQ2pDLE1BQU8sS0FBVSxHQUFTLENBQUMsR0FBUyxHQVl0QyxZQUFpQyxFQUFLLEVBQVUsQ0FDOUMsTUFBTyxVQUFTLEVBQVEsQ0FDdEIsTUFBSSxJQUFVLEtBQ0wsR0FFRixFQUFPLEtBQVMsR0FDcEIsS0FBYSxRQUFjLElBQU8sUUFBTyxLQWFoRCxZQUFzQixFQUFRLENBQzVCLEdBQUksR0FBUyxHQUNiLEdBQUksR0FBVSxLQUNaLE9BQVMsS0FBTyxRQUFPLEdBQ3JCLEVBQU8sS0FBSyxHQUdoQixNQUFPLEdBVVQsR0FBSSxJQUFlLEdBQVEsU0FBUyxFQUFRLENBQzFDLEVBQVMsR0FBUyxHQUVsQixHQUFJLEdBQVMsR0FDYixNQUFJLElBQWEsS0FBSyxJQUNwQixFQUFPLEtBQUssSUFFZCxFQUFPLFFBQVEsR0FBWSxTQUFTLEVBQU8sRUFBUSxFQUFPLEVBQVEsQ0FDaEUsRUFBTyxLQUFLLEVBQVEsRUFBTyxRQUFRLEdBQWMsTUFBUyxHQUFVLEtBRS9ELElBVVQsWUFBZSxFQUFPLENBQ3BCLEdBQUksTUFBTyxJQUFTLFVBQVksR0FBUyxHQUN2QyxNQUFPLEdBRVQsR0FBSSxHQUFVLEVBQVEsR0FDdEIsTUFBUSxJQUFVLEtBQVEsRUFBSSxHQUFVLENBQUMsR0FBWSxLQUFPLEVBVTlELFlBQWtCLEVBQU0sQ0FDdEIsR0FBSSxHQUFRLEtBQU0sQ0FDaEIsR0FBSSxDQUNGLE1BQU8sSUFBYSxLQUFLLFNBQ2xCLEVBQVAsRUFDRixHQUFJLENBQ0YsTUFBUSxHQUFPLFNBQ1IsRUFBUCxHQUVKLE1BQU8sR0ErQ1QsWUFBaUIsRUFBTSxFQUFVLENBQy9CLEdBQUksTUFBTyxJQUFRLFlBQWUsR0FBWSxNQUFPLElBQVksV0FDL0QsS0FBTSxJQUFJLFdBQVUsSUFFdEIsR0FBSSxHQUFXLFVBQVcsQ0FDeEIsR0FBSSxHQUFPLFVBQ1AsRUFBTSxFQUFXLEVBQVMsTUFBTSxLQUFNLEdBQVEsRUFBSyxHQUNuRCxFQUFRLEVBQVMsTUFFckIsR0FBSSxFQUFNLElBQUksR0FDWixNQUFPLEdBQU0sSUFBSSxHQUVuQixHQUFJLEdBQVMsRUFBSyxNQUFNLEtBQU0sR0FDOUIsU0FBUyxNQUFRLEVBQU0sSUFBSSxFQUFLLEdBQ3pCLEdBRVQsU0FBUyxNQUFRLEdBQUssSUFBUSxPQUFTLElBQ2hDLEVBSVQsR0FBUSxNQUFRLEdBa0NoQixZQUFZLEVBQU8sRUFBTyxDQUN4QixNQUFPLEtBQVUsR0FBVSxJQUFVLEdBQVMsSUFBVSxFQXFCMUQsWUFBcUIsRUFBTyxDQUUxQixNQUFPLElBQWtCLElBQVUsR0FBZSxLQUFLLEVBQU8sV0FDM0QsRUFBQyxHQUFxQixLQUFLLEVBQU8sV0FBYSxHQUFlLEtBQUssSUFBVSxJQTBCbEYsR0FBSSxJQUFVLE1BQU0sUUEyQnBCLFlBQXFCLEVBQU8sQ0FDMUIsTUFBTyxJQUFTLE1BQVEsR0FBUyxFQUFNLFNBQVcsQ0FBQyxHQUFXLEdBNEJoRSxZQUEyQixFQUFPLENBQ2hDLE1BQU8sSUFBYSxJQUFVLEdBQVksR0FvQjVDLFlBQW9CLEVBQU8sQ0FHekIsR0FBSSxHQUFNLEdBQVMsR0FBUyxHQUFlLEtBQUssR0FBUyxHQUN6RCxNQUFPLElBQU8sSUFBVyxHQUFPLEdBNkJsQyxZQUFrQixFQUFPLENBQ3ZCLE1BQU8sT0FBTyxJQUFTLFVBQ3JCLEVBQVEsSUFBTSxFQUFRLEdBQUssR0FBSyxHQUFTLEdBNEI3QyxZQUFrQixFQUFPLENBQ3ZCLEdBQUksR0FBTyxNQUFPLEdBQ2xCLE1BQU8sQ0FBQyxDQUFDLEdBQVUsSUFBUSxVQUFZLEdBQVEsWUEyQmpELFlBQXNCLEVBQU8sQ0FDM0IsTUFBTyxDQUFDLENBQUMsR0FBUyxNQUFPLElBQVMsU0FvQnBDLFlBQWtCLEVBQU8sQ0FDdkIsTUFBTyxPQUFPLElBQVMsVUFDcEIsR0FBYSxJQUFVLEdBQWUsS0FBSyxJQUFVLEdBb0IxRCxHQUFJLElBQWUsR0FBbUIsR0FBVSxJQUFvQixHQXVCcEUsWUFBa0IsRUFBTyxDQUN2QixNQUFPLElBQVMsS0FBTyxHQUFLLEdBQWEsR0E0QjNDLFlBQWEsRUFBUSxFQUFNLEVBQWMsQ0FDdkMsR0FBSSxHQUFTLEdBQVUsS0FBTyxPQUFZLEdBQVEsRUFBUSxHQUMxRCxNQUFPLEtBQVcsT0FBWSxFQUFlLEVBNkIvQyxZQUFlLEVBQVEsRUFBTSxDQUMzQixNQUFPLElBQVUsTUFBUSxHQUFRLEVBQVEsRUFBTSxJQStCakQsWUFBYyxFQUFRLENBQ3BCLE1BQU8sSUFBWSxHQUFVLEdBQWMsR0FBVSxHQUFTLEdBMEJoRSxZQUFnQixFQUFRLENBQ3RCLE1BQU8sSUFBWSxHQUFVLEdBQWMsRUFBUSxJQUFRLEdBQVcsR0FxQnhFLFlBQWdCLEVBQVEsRUFBVyxDQUNqQyxNQUFPLElBQVUsS0FBTyxHQUFLLEdBQVcsRUFBUSxHQUFhLEdBQVMsR0FBYSxJQW1CckYsWUFBa0IsRUFBTyxDQUN2QixNQUFPLEdBeUJULFlBQWtCLEVBQU0sQ0FDdEIsTUFBTyxJQUFNLEdBQVEsR0FBYSxHQUFNLElBQVMsR0FBaUIsR0FxQnBFLGFBQXFCLENBQ25CLE1BQU8sR0FHVCxHQUFPLFFBQVUsS0NwMkVqQixBQWdCQSxHQUFNLElBQWEsR0FBSSxTQStDVixHQUFZLEFBQTZCLEdBQ2pELElBQUksSUFBbUIsQ0FDdEIsR0FBTSxHQUFJLEVBQUUsR0FBRyxHQUNmLFVBQVcsSUFBSSxFQUFHLElBQ1gsR0FHQSxHQUFjLEFBQUMsR0FDbkIsTUFBTyxJQUFNLFlBQWMsR0FBVyxJQUFJLEdDdkVuRCxBQXFCTyxHQUFNLElBQWUsTUFBTyxTQUFXLGFBQzFDLE9BQU8sZ0JBQWtCLE1BQ3hCLE9BQU8sZUFBcUMsNEJBQ3pDLE9BdUJELEdBQU0sSUFDVCxDQUFDLEVBQWlCLEVBQWtCLEVBQWlCLE9BQWMsQ0FDakUsS0FBTyxJQUFVLEdBQUssQ0FDcEIsR0FBTSxHQUFJLEVBQU8sWUFDakIsRUFBVSxZQUFZLEdBQ3RCLEVBQVEsSUNwRGhCLEFBNENPLEdBQU0sSUFBVyxHQUtYLEdBQVUsR0NqRHZCLEFBb0JPLEdBQU0sSUFBUyxTQUFTLE9BQU8sS0FBSyxVQUFVLE1BQU0sT0FNOUMsR0FBYSxPQUFPLFFBRXBCLEdBQWMsR0FBSSxRQUFPLEdBQUcsTUFBVSxNQUt0QyxHQUF1QixRQUs5QixRQUFlLENBSW5CLFlBQVksRUFBd0IsRUFBNEIsQ0FIdkQsS0FBQSxNQUF3QixHQUkvQixLQUFLLFFBQVUsRUFFZixHQUFNLEdBQXdCLEdBQ3hCLEVBQWdCLEdBRWhCLEVBQVMsU0FBUyxpQkFDcEIsRUFBUSxRQUNSLElBQ0EsS0FDQSxJQUlBLEVBQWdCLEVBQ2hCLEVBQVEsR0FDUixFQUFZLEVBQ1YsQ0FBQyxVQUFTLE9BQVEsQ0FBQyxXQUFXLEVBQ3BDLEtBQU8sRUFBWSxHQUFRLENBQ3pCLEdBQU0sR0FBTyxFQUFPLFdBQ3BCLEdBQUksSUFBUyxLQUFNLENBS2pCLEVBQU8sWUFBYyxFQUFNLE1BQzNCLFNBSUYsR0FGQSxJQUVJLEVBQUssV0FBYSxFQUEyQixDQUMvQyxHQUFLLEVBQWlCLGdCQUFpQixDQUNyQyxHQUFNLEdBQWMsRUFBaUIsV0FDL0IsQ0FBQyxVQUFVLEVBTWIsRUFBUSxFQUNaLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBUSxJQUMxQixBQUFJLEdBQVMsRUFBVyxHQUFHLEtBQU0sS0FDL0IsSUFHSixLQUFPLEtBQVUsR0FBRyxDQUdsQixHQUFNLEdBQWdCLEVBQVEsR0FFeEIsRUFBTyxHQUF1QixLQUFLLEdBQWdCLEdBTW5ELEVBQ0YsRUFBSyxjQUFnQixHQUNuQixFQUNELEVBQWlCLGFBQWEsR0FDbEMsRUFBaUIsZ0JBQWdCLEdBQ2xDLEdBQU0sR0FBVSxFQUFlLE1BQU0sSUFDckMsS0FBSyxNQUFNLEtBQUssQ0FBQyxLQUFNLFlBQWEsUUFBTyxPQUFNLFFBQVMsSUFDMUQsR0FBYSxFQUFRLE9BQVMsR0FHbEMsQUFBSyxFQUFpQixVQUFZLFlBQ2hDLEdBQU0sS0FBSyxHQUNYLEVBQU8sWUFBZSxFQUE2QixpQkFFNUMsRUFBSyxXQUFhLEVBQXdCLENBQ25ELEdBQU0sR0FBUSxFQUFjLEtBQzVCLEdBQUksRUFBSyxRQUFRLEtBQVcsRUFBRyxDQUM3QixHQUFNLEdBQVMsRUFBSyxXQUNkLEVBQVUsRUFBSyxNQUFNLElBQ3JCLEVBQVksRUFBUSxPQUFTLEVBR25DLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBVyxJQUFLLENBQ2xDLEdBQUksR0FDQSxFQUFJLEVBQVEsR0FDaEIsR0FBSSxJQUFNLEdBQ1IsRUFBUyxTQUNKLENBQ0wsR0FBTSxHQUFRLEdBQXVCLEtBQUssR0FDMUMsQUFBSSxJQUFVLE1BQVEsR0FBUyxFQUFNLEdBQUksS0FDdkMsR0FBSSxFQUFFLE1BQU0sRUFBRyxFQUFNLE9BQVMsRUFBTSxHQUNoQyxFQUFNLEdBQUcsTUFBTSxFQUFHLENBQUMsR0FBcUIsUUFBVSxFQUFNLElBRTlELEVBQVMsU0FBUyxlQUFlLEdBRW5DLEVBQU8sYUFBYSxFQUFRLEdBQzVCLEtBQUssTUFBTSxLQUFLLENBQUMsS0FBTSxPQUFRLE1BQU8sRUFBRSxJQUkxQyxBQUFJLEVBQVEsS0FBZSxHQUN6QixHQUFPLGFBQWEsS0FBZ0IsR0FDcEMsRUFBYyxLQUFLLElBRWxCLEVBQWMsS0FBTyxFQUFRLEdBR2hDLEdBQWEsV0FFTixFQUFLLFdBQWEsRUFDM0IsR0FBSyxFQUFpQixPQUFTLEdBQVEsQ0FDckMsR0FBTSxHQUFTLEVBQUssV0FLcEIsQUFBSSxHQUFLLGtCQUFvQixNQUFRLElBQVUsSUFDN0MsS0FDQSxFQUFPLGFBQWEsS0FBZ0IsSUFFdEMsRUFBZ0IsRUFDaEIsS0FBSyxNQUFNLEtBQUssQ0FBQyxLQUFNLE9BQVEsVUFHL0IsQUFBSSxFQUFLLGNBQWdCLEtBQ3RCLEVBQWlCLEtBQU8sR0FFekIsR0FBYyxLQUFLLEdBQ25CLEtBRUYsUUFDSyxDQUNMLEdBQUksR0FBSSxHQUNSLEtBQVEsR0FBSyxFQUFpQixLQUFLLFFBQVEsR0FBUSxFQUFJLE1BQVEsSUFLN0QsS0FBSyxNQUFNLEtBQUssQ0FBQyxLQUFNLE9BQVEsTUFBTyxLQUN0QyxLQU9SLE9BQVcsS0FBSyxHQUNkLEVBQUUsV0FBWSxZQUFZLEtBSzFCLEdBQVcsQ0FBQyxFQUFhLElBQTJCLENBQ3hELEdBQU0sR0FBUSxFQUFJLE9BQVMsRUFBTyxPQUNsQyxNQUFPLElBQVMsR0FBSyxFQUFJLE1BQU0sS0FBVyxHQTRCL0IsR0FBdUIsQUFBQyxHQUF1QixFQUFLLFFBQVUsR0FJOUQsR0FBZSxJQUFNLFNBQVMsY0FBYyxJQTRCNUMsR0FFVCw2SUM5UEosQUF3Qk0sWUFBdUIsQ0FNM0IsWUFDSSxFQUFvQixFQUNwQixFQUFzQixDQVBULEtBQUEsUUFBaUMsR0FRaEQsS0FBSyxTQUFXLEVBQ2hCLEtBQUssVUFBWSxFQUNqQixLQUFLLFFBQVUsRUFHakIsT0FBTyxFQUEwQixDQUMvQixHQUFJLEdBQUksRUFDUixPQUFXLEtBQVEsTUFBSyxRQUN0QixBQUFJLElBQVMsUUFDWCxFQUFLLFNBQVMsRUFBTyxJQUV2QixJQUVGLE9BQVcsS0FBUSxNQUFLLFFBQ3RCLEFBQUksSUFBUyxRQUNYLEVBQUssU0FLWCxRQUFNLENBdUNKLEdBQU0sR0FBVyxHQUNiLEtBQUssU0FBUyxRQUFRLFFBQVEsVUFBVSxJQUN4QyxTQUFTLFdBQVcsS0FBSyxTQUFTLFFBQVEsUUFBUyxJQUVqRCxFQUFnQixHQUNoQixFQUFRLEtBQUssU0FBUyxNQUV0QixFQUFTLFNBQVMsaUJBQ3BCLEVBQ0EsSUFDQSxLQUNBLElBQ0EsRUFBWSxFQUNaLEVBQVksRUFDWixFQUNBLEVBQU8sRUFBTyxXQUVsQixLQUFPLEVBQVksRUFBTSxRQUFRLENBRS9CLEdBREEsRUFBTyxFQUFNLEdBQ1QsQ0FBQyxHQUFxQixHQUFPLENBQy9CLEtBQUssUUFBUSxLQUFLLFFBQ2xCLElBQ0EsU0FNRixLQUFPLEVBQVksRUFBSyxPQUN0QixJQUNJLEVBQU0sV0FBYSxZQUNyQixHQUFNLEtBQUssR0FDWCxFQUFPLFlBQWUsRUFBNkIsU0FFaEQsR0FBTyxFQUFPLGNBQWdCLE1BS2pDLEdBQU8sWUFBYyxFQUFNLE1BQzNCLEVBQU8sRUFBTyxZQUtsQixHQUFJLEVBQUssT0FBUyxPQUFRLENBQ3hCLEdBQU0sR0FBTyxLQUFLLFVBQVUscUJBQXFCLEtBQUssU0FDdEQsRUFBSyxnQkFBZ0IsRUFBTSxpQkFDM0IsS0FBSyxRQUFRLEtBQUssT0FFbEIsTUFBSyxRQUFRLEtBQUssR0FBRyxLQUFLLFVBQVUsMkJBQ2hDLEVBQWlCLEVBQUssS0FBTSxFQUFLLFFBQVMsS0FBSyxVQUVyRCxJQUdGLE1BQUksS0FDRixVQUFTLFVBQVUsR0FDbkIsZUFBZSxRQUFRLElBRWxCLElDeEpYLEFBK0JBLEdBQU0sSUFBUyxPQUFPLGNBQ2xCLGFBQWMsYUFBYSxXQUFZLENBQUMsV0FBWSxBQUFDLEdBQU0sSUFFekQsR0FBZ0IsSUFBSSxNQU1wQixRQUFxQixDQU16QixZQUNJLEVBQStCLEVBQTRCLEVBQzNELEVBQTRCLENBQzlCLEtBQUssUUFBVSxFQUNmLEtBQUssT0FBUyxFQUNkLEtBQUssS0FBTyxFQUNaLEtBQUssVUFBWSxFQU1uQixTQUFPLENBQ0wsR0FBTSxHQUFJLEtBQUssUUFBUSxPQUFTLEVBQzVCLEVBQU8sR0FDUCxFQUFtQixHQUV2QixPQUFTLEdBQUksRUFBRyxFQUFJLEVBQUcsSUFBSyxDQUMxQixHQUFNLEdBQUksS0FBSyxRQUFRLEdBa0JqQixFQUFjLEVBQUUsWUFBWSxRQUlsQyxFQUFvQixHQUFjLElBQU0sSUFDcEMsRUFBRSxRQUFRLE1BQU8sRUFBYyxLQUFPLEdBSTFDLEdBQU0sR0FBaUIsR0FBdUIsS0FBSyxHQUNuRCxBQUFJLElBQW1CLEtBTXJCLEdBQVEsRUFBSyxHQUFtQixHQUFnQixJQUtoRCxHQUFRLEVBQUUsT0FBTyxFQUFHLEVBQWUsT0FBUyxFQUFlLEdBQ3ZELEVBQWUsR0FBSyxHQUF1QixFQUFlLEdBQzFELEdBR1IsVUFBUSxLQUFLLFFBQVEsR0FDZCxFQUdULG9CQUFrQixDQUNoQixHQUFNLEdBQVcsU0FBUyxjQUFjLFlBQ3BDLEVBQVEsS0FBSyxVQUNqQixNQUFJLE1BQVcsUUFLYixHQUFRLEdBQU8sV0FBVyxJQUU1QixFQUFTLFVBQVksRUFDZCxJQzNIWCxBQXdCTyxHQUFNLElBQWMsQUFBQyxHQUV0QixJQUFVLE1BQ1YsQ0FBRSxPQUFPLElBQVUsVUFBWSxNQUFPLElBQVUsWUFFekMsR0FBYSxBQUFDLEdBQ2xCLE1BQU0sUUFBUSxJQUVqQixDQUFDLENBQUUsSUFBVSxFQUFjLE9BQU8sV0FRbEMsUUFBeUIsQ0FPN0IsWUFBWSxFQUFrQixFQUFjLEVBQThCLENBRjFFLEtBQUEsTUFBUSxHQUdOLEtBQUssUUFBVSxFQUNmLEtBQUssS0FBTyxFQUNaLEtBQUssUUFBVSxFQUNmLEtBQUssTUFBUSxHQUNiLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBUSxPQUFTLEVBQUcsSUFDckMsS0FBSyxNQUEwQixHQUFLLEtBQUssY0FPcEMsYUFBVyxDQUNuQixNQUFPLElBQUksSUFBYyxNQUdqQixXQUFTLENBQ2pCLEdBQU0sR0FBVSxLQUFLLFFBQ2YsRUFBSSxFQUFRLE9BQVMsRUFDckIsRUFBUSxLQUFLLE1BZW5CLEdBQUksSUFBTSxHQUFLLEVBQVEsS0FBTyxJQUFNLEVBQVEsS0FBTyxHQUFJLENBQ3JELEdBQU0sR0FBSSxFQUFNLEdBQUcsTUFDbkIsR0FBSSxNQUFPLElBQU0sU0FDZixNQUFPLFFBQU8sR0FFaEIsR0FBSSxNQUFPLElBQU0sVUFBWSxDQUFDLEdBQVcsR0FDdkMsTUFBTyxHQUdYLEdBQUksR0FBTyxHQUVYLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBRyxJQUFLLENBQzFCLEdBQVEsRUFBUSxHQUNoQixHQUFNLEdBQU8sRUFBTSxHQUNuQixHQUFJLElBQVMsT0FBVyxDQUN0QixHQUFNLEdBQUksRUFBSyxNQUNmLEdBQUksR0FBWSxJQUFNLENBQUMsR0FBVyxHQUNoQyxHQUFRLE1BQU8sSUFBTSxTQUFXLEVBQUksT0FBTyxPQUUzQyxRQUFXLEtBQUssR0FDZCxHQUFRLE1BQU8sSUFBTSxTQUFXLEVBQUksT0FBTyxJQU1uRCxVQUFRLEVBQVEsR0FDVCxFQUdULFFBQU0sQ0FDSixBQUFJLEtBQUssT0FDUCxNQUFLLE1BQVEsR0FDYixLQUFLLFFBQVEsYUFBYSxLQUFLLEtBQU0sS0FBSyxnQkFRMUMsUUFBb0IsQ0FJeEIsWUFBWSxFQUE2QixDQUZ6QyxLQUFBLE1BQWlCLE9BR2YsS0FBSyxVQUFZLEVBR25CLFNBQVMsRUFBYyxDQUNyQixBQUFJLElBQVUsSUFBYSxFQUFDLEdBQVksSUFBVSxJQUFVLEtBQUssUUFDL0QsTUFBSyxNQUFRLEVBSVIsR0FBWSxJQUNmLE1BQUssVUFBVSxNQUFRLEtBSzdCLFFBQU0sQ0FDSixLQUFPLEdBQVksS0FBSyxRQUFRLENBQzlCLEdBQU0sR0FBWSxLQUFLLE1BQ3ZCLEtBQUssTUFBUSxHQUNiLEVBQVUsTUFFWixBQUFJLEtBQUssUUFBVSxJQUduQixLQUFLLFVBQVUsV0FZYixRQUFlLENBT25CLFlBQVksRUFBc0IsQ0FIbEMsS0FBQSxNQUFpQixPQUNULEtBQUEsZUFBMEIsT0FHaEMsS0FBSyxRQUFVLEVBUWpCLFdBQVcsRUFBZSxDQUN4QixLQUFLLFVBQVksRUFBVSxZQUFZLE1BQ3ZDLEtBQUssUUFBVSxFQUFVLFlBQVksTUFVdkMsZ0JBQWdCLEVBQVMsQ0FDdkIsS0FBSyxVQUFZLEVBQ2pCLEtBQUssUUFBVSxFQUFJLFlBUXJCLGVBQWUsRUFBYyxDQUMzQixFQUFLLFNBQVMsS0FBSyxVQUFZLE1BQy9CLEVBQUssU0FBUyxLQUFLLFFBQVUsTUFRL0IsZ0JBQWdCLEVBQWEsQ0FDM0IsRUFBSSxTQUFTLEtBQUssVUFBWSxNQUM5QixLQUFLLFFBQVUsRUFBSSxRQUNuQixFQUFJLFFBQVUsS0FBSyxVQUdyQixTQUFTLEVBQWMsQ0FDckIsS0FBSyxlQUFpQixFQUd4QixRQUFNLENBQ0osR0FBSSxLQUFLLFVBQVUsYUFBZSxLQUNoQyxPQUVGLEtBQU8sR0FBWSxLQUFLLGlCQUFpQixDQUN2QyxHQUFNLEdBQVksS0FBSyxlQUN2QixLQUFLLGVBQWlCLEdBQ3RCLEVBQVUsTUFFWixHQUFNLEdBQVEsS0FBSyxlQUNuQixBQUFJLElBQVUsSUFHZCxDQUFJLEdBQVksR0FDVixJQUFVLEtBQUssT0FDakIsS0FBSyxhQUFhLEdBRWYsQUFBSSxZQUFpQixJQUMxQixLQUFLLHVCQUF1QixHQUN2QixBQUFJLFlBQWlCLE1BQzFCLEtBQUssYUFBYSxHQUNiLEFBQUksR0FBVyxHQUNwQixLQUFLLGlCQUFpQixHQUNqQixBQUFJLElBQVUsR0FDbkIsTUFBSyxNQUFRLEdBQ2IsS0FBSyxTQUdMLEtBQUssYUFBYSxJQUlkLFNBQVMsRUFBVSxDQUN6QixLQUFLLFFBQVEsV0FBWSxhQUFhLEVBQU0sS0FBSyxTQUczQyxhQUFhLEVBQVcsQ0FDOUIsQUFBSSxLQUFLLFFBQVUsR0FHbkIsTUFBSyxRQUNMLEtBQUssU0FBUyxHQUNkLEtBQUssTUFBUSxHQUdQLGFBQWEsRUFBYyxDQUNqQyxHQUFNLEdBQU8sS0FBSyxVQUFVLFlBQzVCLEVBQVEsR0FBZ0IsR0FHeEIsR0FBTSxHQUNGLE1BQU8sSUFBVSxTQUFXLEVBQVEsT0FBTyxHQUMvQyxBQUFJLElBQVMsS0FBSyxRQUFRLGlCQUN0QixFQUFLLFdBQWEsRUFJbkIsRUFBYyxLQUFPLEVBRXRCLEtBQUssYUFBYSxTQUFTLGVBQWUsSUFFNUMsS0FBSyxNQUFRLEVBR1AsdUJBQXVCLEVBQXFCLENBQ2xELEdBQU0sR0FBVyxLQUFLLFFBQVEsZ0JBQWdCLEdBQzlDLEdBQUksS0FBSyxnQkFBaUIsS0FDdEIsS0FBSyxNQUFNLFdBQWEsRUFDMUIsS0FBSyxNQUFNLE9BQU8sRUFBTSxZQUNuQixDQUtMLEdBQU0sR0FDRixHQUFJLElBQWlCLEVBQVUsRUFBTSxVQUFXLEtBQUssU0FDbkQsRUFBVyxFQUFTLFNBQzFCLEVBQVMsT0FBTyxFQUFNLFFBQ3RCLEtBQUssYUFBYSxHQUNsQixLQUFLLE1BQVEsR0FJVCxpQkFBaUIsRUFBd0IsQ0FXL0MsQUFBSyxNQUFNLFFBQVEsS0FBSyxRQUN0QixNQUFLLE1BQVEsR0FDYixLQUFLLFNBS1AsR0FBTSxHQUFZLEtBQUssTUFDbkIsRUFBWSxFQUNaLEVBRUosT0FBVyxLQUFRLEdBRWpCLEVBQVcsRUFBVSxHQUdqQixJQUFhLFFBQ2YsR0FBVyxHQUFJLElBQVMsS0FBSyxTQUM3QixFQUFVLEtBQUssR0FDZixBQUFJLElBQWMsRUFDaEIsRUFBUyxlQUFlLE1BRXhCLEVBQVMsZ0JBQWdCLEVBQVUsRUFBWSxLQUduRCxFQUFTLFNBQVMsR0FDbEIsRUFBUyxTQUNULElBR0YsQUFBSSxFQUFZLEVBQVUsUUFFeEIsR0FBVSxPQUFTLEVBQ25CLEtBQUssTUFBTSxHQUFZLEVBQVMsVUFJcEMsTUFBTSxFQUFrQixLQUFLLFVBQVMsQ0FDcEMsR0FDSSxLQUFLLFVBQVUsV0FBYSxFQUFVLFlBQWMsS0FBSyxXQVczRCxRQUEyQixDQU8vQixZQUFZLEVBQWtCLEVBQWMsRUFBMEIsQ0FDcEUsR0FKRixLQUFBLE1BQWlCLE9BQ1QsS0FBQSxlQUEwQixPQUc1QixFQUFRLFNBQVcsR0FBSyxFQUFRLEtBQU8sSUFBTSxFQUFRLEtBQU8sR0FDOUQsS0FBTSxJQUFJLE9BQ04sMkRBRU4sS0FBSyxRQUFVLEVBQ2YsS0FBSyxLQUFPLEVBQ1osS0FBSyxRQUFVLEVBR2pCLFNBQVMsRUFBYyxDQUNyQixLQUFLLGVBQWlCLEVBR3hCLFFBQU0sQ0FDSixLQUFPLEdBQVksS0FBSyxpQkFBaUIsQ0FDdkMsR0FBTSxHQUFZLEtBQUssZUFDdkIsS0FBSyxlQUFpQixHQUN0QixFQUFVLE1BRVosR0FBSSxLQUFLLGlCQUFtQixHQUMxQixPQUVGLEdBQU0sR0FBUSxDQUFDLENBQUMsS0FBSyxlQUNyQixBQUFJLEtBQUssUUFBVSxHQUNqQixDQUFJLEVBQ0YsS0FBSyxRQUFRLGFBQWEsS0FBSyxLQUFNLElBRXJDLEtBQUssUUFBUSxnQkFBZ0IsS0FBSyxNQUVwQyxLQUFLLE1BQVEsR0FFZixLQUFLLGVBQWlCLEtBYXBCLGdCQUFpQyxHQUFrQixDQUd2RCxZQUFZLEVBQWtCLEVBQWMsRUFBOEIsQ0FDeEUsTUFBTSxFQUFTLEVBQU0sR0FDckIsS0FBSyxPQUNBLEVBQVEsU0FBVyxHQUFLLEVBQVEsS0FBTyxJQUFNLEVBQVEsS0FBTyxHQUd6RCxhQUFXLENBQ25CLE1BQU8sSUFBSSxJQUFhLE1BR2hCLFdBQVMsQ0FDakIsTUFBSSxNQUFLLE9BQ0EsS0FBSyxNQUFNLEdBQUcsTUFFaEIsTUFBTSxZQUdmLFFBQU0sQ0FDSixBQUFJLEtBQUssT0FDUCxNQUFLLE1BQVEsR0FFWixLQUFLLFFBQWdCLEtBQUssTUFBUSxLQUFLLGVBS3hDLGdCQUE0QixHQUFhLEdBTTNDLEdBQXdCLEdBSTVCLEFBQUMsS0FBSyxDQUNKLEdBQUksQ0FDRixHQUFNLEdBQVUsSUFDVixVQUFPLENBQ1QsVUFBd0IsR0FDakIsS0FJWCxPQUFPLGlCQUFpQixPQUFRLEVBQWdCLEdBRWhELE9BQU8sb0JBQW9CLE9BQVEsRUFBZ0IsU0FDNUMsRUFBUCxPQU9FLFlBQWdCLENBU3BCLFlBQVksRUFBa0IsRUFBbUIsRUFBMEIsQ0FMM0UsS0FBQSxNQUEyQyxPQUVuQyxLQUFBLGVBQW9ELE9BSTFELEtBQUssUUFBVSxFQUNmLEtBQUssVUFBWSxFQUNqQixLQUFLLGFBQWUsRUFDcEIsS0FBSyxtQkFBcUIsQUFBQyxHQUFNLEtBQUssWUFBWSxHQUdwRCxTQUFTLEVBQXdDLENBQy9DLEtBQUssZUFBaUIsRUFHeEIsUUFBTSxDQUNKLEtBQU8sR0FBWSxLQUFLLGlCQUFpQixDQUN2QyxHQUFNLEdBQVksS0FBSyxlQUN2QixLQUFLLGVBQWlCLEdBQ3RCLEVBQVUsTUFFWixHQUFJLEtBQUssaUJBQW1CLEdBQzFCLE9BR0YsR0FBTSxHQUFjLEtBQUssZUFDbkIsRUFBYyxLQUFLLE1BQ25CLEVBQXVCLEdBQWUsTUFDeEMsR0FBZSxNQUNWLEdBQVksVUFBWSxFQUFZLFNBQ3BDLEVBQVksT0FBUyxFQUFZLE1BQ2pDLEVBQVksVUFBWSxFQUFZLFNBQ3ZDLEVBQ0YsR0FBZSxNQUFTLElBQWUsTUFBUSxHQUVuRCxBQUFJLEdBQ0YsS0FBSyxRQUFRLG9CQUNULEtBQUssVUFBVyxLQUFLLG1CQUFvQixLQUFLLFdBRWhELEdBQ0YsTUFBSyxVQUFZLEdBQVcsR0FDNUIsS0FBSyxRQUFRLGlCQUNULEtBQUssVUFBVyxLQUFLLG1CQUFvQixLQUFLLFlBRXBELEtBQUssTUFBUSxFQUNiLEtBQUssZUFBaUIsR0FHeEIsWUFBWSxFQUFZLENBQ3RCLEFBQUksTUFBTyxNQUFLLE9BQVUsV0FDeEIsS0FBSyxNQUFNLEtBQUssS0FBSyxjQUFnQixLQUFLLFFBQVMsR0FFbEQsS0FBSyxNQUE4QixZQUFZLEtBUWhELEdBQWEsQUFBQyxHQUF5QyxHQUN4RCxJQUNJLENBQUMsUUFBUyxFQUFFLFFBQVMsUUFBUyxFQUFFLFFBQVMsS0FBTSxFQUFFLE1BQ2pELEVBQUUsU0NoaUJYLEFBc0JNLFlBQStCLENBVW5DLDJCQUNJLEVBQWtCLEVBQWMsRUFDaEMsRUFBc0IsQ0FDeEIsR0FBTSxHQUFTLEVBQUssR0FDcEIsTUFBSSxLQUFXLElBRU4sQUFEVyxHQUFJLElBQWtCLEVBQVMsRUFBSyxNQUFNLEdBQUksR0FDL0MsTUFFZixJQUFXLElBQ04sQ0FBQyxHQUFJLElBQVUsRUFBUyxFQUFLLE1BQU0sR0FBSSxFQUFRLGVBRXBELElBQVcsSUFDTixDQUFDLEdBQUksSUFBcUIsRUFBUyxFQUFLLE1BQU0sR0FBSSxJQUdwRCxBQURXLEdBQUksSUFBbUIsRUFBUyxFQUFNLEdBQ3ZDLE1BTW5CLHFCQUFxQixFQUFzQixDQUN6QyxNQUFPLElBQUksSUFBUyxLQUlYLEdBQTJCLEdBQUksSUMxRDVDLEFBMkNNLFlBQTBCLEVBQXNCLENBQ3BELEdBQUksR0FBZ0IsR0FBZSxJQUFJLEVBQU8sTUFDOUMsQUFBSSxJQUFrQixRQUNwQixHQUFnQixDQUNkLGFBQWMsR0FBSSxTQUNsQixVQUFXLEdBQUksTUFFakIsR0FBZSxJQUFJLEVBQU8sS0FBTSxJQUdsQyxHQUFJLEdBQVcsRUFBYyxhQUFhLElBQUksRUFBTyxTQUNyRCxHQUFJLElBQWEsT0FDZixNQUFPLEdBS1QsR0FBTSxHQUFNLEVBQU8sUUFBUSxLQUFLLElBR2hDLFNBQVcsRUFBYyxVQUFVLElBQUksR0FDbkMsSUFBYSxRQUVmLEdBQVcsR0FBSSxJQUFTLEVBQVEsRUFBTyxzQkFFdkMsRUFBYyxVQUFVLElBQUksRUFBSyxJQUluQyxFQUFjLGFBQWEsSUFBSSxFQUFPLFFBQVMsR0FDeEMsRUFrQkYsR0FBTSxJQUFpQixHQUFJLEtDM0ZsQyxBQW1CTyxHQUFNLElBQVEsR0FBSSxTQWlCWixHQUNULENBQUMsRUFDQSxFQUNBLElBQW9DLENBQ25DLEdBQUksR0FBTyxHQUFNLElBQUksR0FDckIsQUFBSSxJQUFTLFFBQ1gsSUFBWSxFQUFXLEVBQVUsWUFDakMsR0FBTSxJQUFJLEVBQVcsRUFBTyxHQUFJLElBQVEsT0FBQSxPQUFBLENBQ2pCLG9CQUNHLEtBRTFCLEVBQUssV0FBVyxJQUVsQixFQUFLLFNBQVMsR0FDZCxFQUFLLFVDbERYLEFBeURBLEFBQUksTUFBTyxTQUFXLGFBQ25CLFFBQU8saUJBQXVCLFFBQU8sZ0JBQXFCLEtBQUssS0FBSyxTQU9oRSxHQUFNLElBQU8sQ0FBQyxLQUFrQyxJQUNuRCxHQUFJLElBQWUsRUFBUyxFQUFRLE9BQVEsSUNsRWhELEdBQU0sSUFBYyxPQUFPLGlCQUNyQixHQUFhLE9BQU8sZ0JBQ3BCLEdBQWUsT0FBTyxrQkFDdEIsR0FBZSxPQUFPLGtCQUN0QixHQUFnQixPQUFPLG1CQUN2QixHQUFzQixPQUFPLHlCQUM3QixHQUFlLGtCQ05yQixHQUFJLElBQ0EsR0FBWSxFQUNoQixZQUFvQixFQUFPLENBQ3ZCLEdBQVUsRUFFZCxhQUFpQixDQUNiLEdBQVUsS0FDVixHQUFZLEVBRWhCLGFBQWtCLENBQ2QsTUFBTyxNQ1JYLFlBQVcsQ0FDUCxZQUFZLEVBQUksRUFBTyxDQUNuQixLQUFLLEdBQUssRUFDVixLQUFLLE1BQVEsSUFHckIsWUFBYSxLQUFTLEVBQU0sQ0FDeEIsR0FBSSxHQUFLLEtBQ0wsRUFBUSxHQUFRLElBQ2hCLEVBQU8sRUFBTSxJQUFJLEdBQ3JCLE1BQUssSUFDRCxHQUFPLEdBQUksR0FBSyxFQUFJLEdBQVMsR0FBRyxHQUNoQyxFQUFNLElBQUksRUFBSSxJQUVYLEVBQUssT0FBTyxHQUFHLEdBRTFCLFdBQWMsRUFBTSxDQUNoQixNQUFPLElBQUksS0FBSyxLQUFNLEdDbEIxQixZQUFzQixFQUFZLENBQzlCLE1BQU8sR0FBSyxhQUFjLEdBQUssQ0FDM0IsWUFBWSxFQUFJLEVBQU8sRUFBVSxFQUFVLENBQ3ZDLE1BQU0sRUFBSSxHQUNWLEVBQVcsRUFBTyxNQUV0QixPQUFPLEVBQVUsRUFBUSxDQUNyQixLQUFLLFNBQVcsRUFDaEIsS0FBSyxPQUFTLEVBRWxCLE1BQU8sQ0FDSCxBQUFJLEVBQUMsS0FBSyxRQUFVLEtBQUssZUFDckIsS0FBSyxNQUVULEtBQUssV0FBYSxLQUFLLE9BRTNCLEtBQU0sQ0FDRixLQUFLLFdBQ0wsS0FBSyxVQUFZLEtBQUssU0FBUyxLQUFLLEtBQUssT0FFN0MsVUFBVyxDQUNQLEFBQUksTUFBTyxNQUFLLFdBQWMsWUFDMUIsS0FBSyxZQUdiLFlBQWEsQ0FDVCxNQUFPLENBQUMsS0FBSyxZQUFjLEtBQUssT0FBTyxLQUFLLENBQUMsRUFBTyxJQUFNLEtBQUssV0FBVyxLQUFPLE1DekI3RixZQUFvQixFQUFPLEVBQUksQ0FDM0IsRUFBTSxJQUFlLEtBQUssR0FFOUIsR0FBTSxJQUFZLEdBQWEsSUNKL0IsR0FBTSxJQUFXLEVBQUssYUFBYyxHQUFLLENBQ3JDLFlBQVksRUFBSSxFQUFPLEVBQWMsQ0FDakMsTUFBTSxFQUFJLEdBQ1YsS0FBSyxRQUFVLEtBQUssUUFBUSxLQUFLLE1BQzdCLE1BQU8sSUFBaUIsWUFDeEIsR0FBZSxLQUVuQixLQUFLLFNBQVMsR0FFbEIsUUFBUyxDQUNMLE1BQU8sTUFBSyxLQUVoQixRQUFRLEVBQU8sQ0FDWCxHQUFJLE1BQU8sSUFBVSxXQUFZLENBQzdCLEdBQU0sR0FBWSxFQUNaLENBQUMsR0FBaUIsS0FBSyxLQUM3QixFQUFRLEVBQVUsR0FFdEIsS0FBSyxTQUFTLEdBQ2QsS0FBSyxNQUFNLFNBRWYsU0FBUyxFQUFPLENBQ1osS0FBSyxLQUFPLE9BQU8sT0FBTyxDQUFDLEVBQU8sS0FBSyxhQ3RCL0MsR0FBTSxJQUFhLEVBQUssYUFBYyxHQUFLLENBQ3ZDLFlBQVksRUFBSSxFQUFPLEVBQUcsRUFBYyxFQUFNLENBQzFDLE1BQU0sRUFBSSxHQUNWLEtBQUssU0FBVyxLQUFLLFNBQVMsS0FBSyxNQUNuQyxLQUFLLGFBQWUsSUFBUyxPQUFZLEVBQUssR0FBZ0IsRUFFbEUsT0FBTyxFQUFTLENBQ1osWUFBSyxRQUFVLEVBQ1IsQ0FBQyxLQUFLLGFBQWMsS0FBSyxVQUVwQyxTQUFTLEVBQVEsQ0FDYixLQUFLLGFBQWUsS0FBSyxRQUFRLEtBQUssYUFBYyxHQUNwRCxLQUFLLE1BQU0sWUNYbkIsWUFBWSxDQUNSLFlBQVksRUFBUSxFQUFNLENBQ3RCLEtBQUssT0FBUyxFQUNkLEtBQUssS0FBTyxFQUNaLEtBQUssSUFBYyxHQUFJLEtBQ3ZCLEtBQUssSUFBaUIsR0FDdEIsS0FBSyxJQUF1QixHQUVoQyxJQUFJLEVBQUksQ0FDSixHQUFXLE1BQ1gsR0FBSSxHQUFNLElBQ1YsWUFDTyxFQUVYLFlBQVksRUFBTyxDQUNmLEdBQUksR0FBVSxLQUFLLEdBQ25CLEdBQVcsTUFDWCxPQUFTLEtBQVUsR0FDZixFQUFPLEtBQUssTUFFaEIsS0FFSixZQUFhLENBQ1QsS0FBSyxZQUFZLElBRXJCLGtCQUFtQixDQUNmLEtBQUssWUFBWSxJQUVyQixVQUFXLENBRVAsQUFEWSxLQUFLLElBQ1gsUUFBUSxHQUFRLENBQ2xCLEFBQUksTUFBTyxHQUFLLFVBQWEsWUFDekIsRUFBSyxlQ2hDckIsR0FBTSxJQUFRLFFBQVEsVUFBVSxLQUFLLEtBQUssUUFBUSxXQUNsRCxhQUFrQixDQUNkLEdBQUksR0FBUSxHQUNSLEVBQ0osWUFBb0IsQ0FDaEIsRUFBSyxLQUNMLEdBQUksR0FBSSxFQUNSLEVBQVEsR0FDUixPQUFTLEdBQUksRUFBRyxFQUFNLEVBQUUsT0FBUSxFQUFJLEVBQUssSUFDckMsRUFBRSxLQUdWLE1BQU8sVUFBVSxFQUFNLENBQ25CLEVBQU0sS0FBSyxHQUNQLEdBQU0sTUFDTixHQUFLLEdBQU0sS0FJdkIsR0FBTSxJQUFPLEtBQ1AsR0FBUSxLQUNkLFFBQW9CLENBQ2hCLFlBQVksRUFBVSxFQUFNLENBQ3hCLEtBQUssU0FBVyxFQUNoQixLQUFLLEtBQU8sRUFDWixLQUFLLE1BQVEsR0FBSSxJQUFNLEtBQUssT0FBTyxLQUFLLE1BQU8sR0FDL0MsS0FBSyxJQUFlLEtBQ3BCLEtBQUssY0FBZ0IsR0FFekIsUUFBUyxDQUNMLEFBQUksS0FBSyxlQUVULElBQUssSUFBTSxDQUNQLEdBQUksR0FBUyxLQUFLLFlBQVksSUFDOUIsR0FBTSxJQUFNLENBQ1IsS0FBSyxZQUFZLEdBQWMsR0FDL0IsR0FBTSxJQUFNLENBQ1IsS0FBSyxZQUFZLFFBR3pCLEtBQUssY0FBZ0IsS0FFekIsS0FBSyxjQUFnQixJQUV6QixZQUFZLEVBQU8sRUFBSyxDQUVwQixPQURBLEtBQUssSUFBZSxFQUNaLE9BQ0MsSUFDRCxLQUFLLE9BQU8sR0FDWixLQUFLLFdBQVcsSUFDaEIsV0FDQyxJQUFjLE1BQU8sTUFBSyxhQUMxQixJQUFlLE1BQU8sTUFBSyxXQUFXLElBRS9DLEtBQUssSUFBZSxLQUV4QixRQUFTLENBQ0wsTUFBTyxNQUFLLE1BQU0sSUFBSSxJQUFNLEtBQUssU0FBUyxLQUFLLEtBQUssS0FBTSxLQUFLLE9BRW5FLFdBQVcsRUFBTyxDQUNkLEtBQUssTUFBTSxZQUFZLEdBRTNCLFVBQVcsQ0FDUCxLQUFLLE1BQU0sYUNoRW5CLEdBQU0sSUFBYyxDQUFDLEVBQU0sS0FBTyxFQUFJLFFBQVEsY0FBZSxDQUFDLEVBQUcsSUFBUyxFQUFPLEVBQUssY0FBZ0IsSUFDdEcsWUFBdUIsRUFBUSxDQUMzQixlQUF3QixHQUFjLENBQ2xDLFlBQVksRUFBVSxFQUFNLEVBQU0sQ0FDOUIsTUFBTSxFQUFVLEdBQVEsR0FDeEIsS0FBSyxLQUFPLEVBRWhCLE9BQU8sRUFBUSxDQUNYLEVBQU8sRUFBUSxLQUFLLE9BRzVCLFdBQW1CLEVBQVUsRUFBc0IsRUFBUyxDQUN4RCxHQUFNLEdBQWUsSUFBVyxHQUF3QixJQUFJLGFBQWUsWUFDckUsQ0FBRSxxQkFBcUIsR0FBSSxlQUFlLEdBQU0saUJBQWlCLElBQU8sR0FBVyxHQUF3QixHQUNqSCxlQUFzQixFQUFZLENBQzlCLGFBQWMsQ0FDVixRQUNBLEFBQUksSUFBaUIsR0FDakIsS0FBSyxXQUFhLEdBQUksR0FBVSxFQUFVLE1BRzFDLE1BQUssYUFBYSxDQUFFLEtBQU0sVUFBVyxJQUNyQyxLQUFLLFdBQWEsR0FBSSxHQUFVLEVBQVUsS0FBSyxXQUFZLGlCQUd4RCxxQkFBcUIsQ0FDNUIsTUFBTyxHQUFTLG9CQUFzQixHQUFzQixHQUVoRSxtQkFBb0IsQ0FDaEIsS0FBSyxXQUFXLFNBRXBCLHNCQUF1QixDQUNuQixLQUFLLFdBQVcsV0FFcEIseUJBQXlCLEVBQU0sRUFBVSxFQUFVLENBQy9DLEdBQUksSUFBYSxFQUNiLE9BRUosR0FBSSxHQUFNLElBQWEsR0FBSyxHQUFPLEVBQ25DLFFBQVEsSUFBSSxLQUFNLEdBQVksR0FBTyxJQUk3QyxXQUF3QixFQUFjLENBQ2xDLEdBQUksR0FBUSxFQUNaLE1BQU8sUUFBTyxPQUFPLENBQ2pCLFdBQVksR0FDWixhQUFjLEdBQ2QsS0FBTSxDQUNGLE1BQU8sSUFFWCxJQUFJLEVBQVUsQ0FDVixFQUFRLEVBQ1IsS0FBSyxXQUFXLFlBSTVCLEdBQU0sR0FBUSxHQUFJLE9BQU0sRUFBWSxVQUFXLENBQzNDLGVBQWUsRUFBUSxDQUNuQixNQUFPLElBRVgsSUFBSSxFQUFRLEVBQUssRUFBTyxFQUFVLENBQzlCLEdBQUksR0FDSixNQUFJLEtBQU8sR0FDUCxHQUFPLE9BQU8seUJBQXlCLEVBQVEsR0FDM0MsR0FBUSxFQUFLLElBQ2IsR0FBSyxJQUFJLEtBQUssRUFBVSxHQUNqQixJQUVYLFNBQVEsSUFBSSxFQUFRLEVBQUssRUFBTyxHQUN6QixLQUVYLENBQUksTUFBTyxJQUFRLFVBQVksRUFBSSxLQUFPLElBQ3RDLEVBQU8sQ0FDSCxXQUFZLEdBQ1osYUFBYyxHQUNkLFNBQVUsR0FDVixTQUlKLEVBQU8sRUFBZSxHQUUxQixPQUFPLGVBQWUsRUFBVSxFQUFLLEdBQ2pDLEVBQUssS0FDTCxFQUFLLElBQUksS0FBSyxFQUFVLEdBRXJCLE9BR2YsY0FBTyxlQUFlLEVBQVEsVUFBVyxHQUNsQyxFQUVYLE1BQU8sR0MzRlgsR0FBTSxJQUFhLEVBQUssYUFBYyxHQUFLLENBQ3ZDLFlBQVksRUFBSSxFQUFPLEVBQUcsQ0FDdEIsTUFBTSxFQUFJLEdBQ1YsS0FBSyxTQUFXLEtBQUssU0FBUyxLQUFLLE1BQ25DLEtBQUssV0FBYSxHQUNsQixLQUFLLGFBQWUsS0FDcEIsR0FBVyxFQUFPLE1BRXRCLE9BQU8sRUFBUyxDQUNaLEdBQUksS0FBSyxNQUFNLFFBQ1gsS0FBTSxJQUFJLE9BQU0seUNBRXBCLE1BQUksTUFBSyxVQUFZLEdBQ2pCLE1BQUssV0FBVyxHQUNoQixLQUFLLFFBQVUsR0FFWixLQUFLLE1BRWhCLE1BQU8sQ0FDSCxBQUFLLEtBQUssWUFDTixNQUFLLFdBQWEsR0FDZCxLQUFLLGNBQ0wsS0FBSyxlQUNULEtBQUssV0FBVyxLQUFLLFNBQ3JCLEtBQUssTUFBTSxVQUduQixTQUFTLEVBQU8sQ0FDWixLQUFLLE1BQVEsRUFDYixLQUFLLE1BQU0sU0FFZixXQUFXLEVBQVMsQ0FDaEIsR0FBTSxHQUFTLENBQUUsVUFBUyxTQUFVLEtBQUssVUFDekMsS0FBSyxNQUFNLEtBQUssY0FBYyxHQUFJLGFBQVksR0FBYyxDQUN4RCxTQUNBLFFBQVMsR0FDVCxXQUFZLEdBQ1osU0FBVSxNQUVkLEdBQU0sQ0FBRSxjQUFhLFNBQVUsRUFDL0IsS0FBSyxNQUFRLEVBQWMsRUFBUSxFQUFRLGFBQzNDLEtBQUssYUFBZSxFQUV4QixVQUFXLENBQ1AsQUFBSSxLQUFLLGNBQ0wsS0FBSyxrQkM5Q2pCLFlBQXFCLEVBQVcsQ0FDNUIsTUFBTyxBQUFDLElBQWlCLENBQ3JCLEdBQU0sR0FBVSxDQUNaLFNBQVUsYUFBYyxZQUFZLENBQ2hDLGFBQWMsQ0FDVixRQUNBLEtBQUssVUFBWSxHQUFJLEtBQ3JCLEtBQUssaUJBQWlCLEdBQWMsTUFFeEMsc0JBQXVCLENBQ25CLEtBQUssb0JBQW9CLEdBQWMsTUFFM0MsWUFBWSxFQUFPLENBQ2YsR0FBTSxDQUFFLFVBQVcsRUFDbkIsQUFBSSxFQUFPLFVBQVksR0FDbkIsR0FBTyxNQUFRLEtBQUssTUFDcEIsRUFBTyxZQUFjLEtBQUssWUFBWSxLQUFLLEtBQU0sRUFBTyxVQUN4RCxLQUFLLFVBQVUsSUFBSSxFQUFPLFVBQzFCLEVBQU0sbUJBR2QsWUFBWSxFQUFVLENBQ2xCLEtBQUssVUFBVSxPQUFPLE1BRXRCLE9BQU0sRUFBTyxDQUNiLEtBQUssT0FBUyxFQUNkLE9BQVMsS0FBWSxNQUFLLFVBQ3RCLEVBQVMsTUFHYixRQUFRLENBQ1IsTUFBTyxNQUFLLFNBR3BCLFNBQVUsRUFBVSxTQUFVLENBQUUsVUFBVSxDQUN0QyxHQUFNLEdBQVUsR0FBVyxHQUMzQixNQUFPLEdBQU8sS0FFbEIsZ0JBRUosTUFBTyxJQ3pDZixHQUFNLElBQVUsRUFBSyxhQUFjLEdBQUssQ0FDcEMsWUFBWSxFQUFJLEVBQU8sRUFBSSxFQUFRLENBQy9CLE1BQU0sRUFBSSxHQUNWLEtBQUssTUFBUSxJQUNiLEtBQUssT0FBUyxFQUVsQixPQUFPLEVBQUksRUFBUSxDQUNmLE1BQUksTUFBSyxXQUFXLElBQ2hCLE1BQUssT0FBUyxFQUNkLEtBQUssTUFBUSxLQUVWLEtBQUssTUFFaEIsV0FBVyxFQUFTLEdBQUksQ0FDcEIsTUFBTyxHQUFPLEtBQUssQ0FBQyxFQUFPLElBQU0sS0FBSyxPQUFPLEtBQU8sTUNiNUQsWUFBMEIsRUFBTyxFQUFJLENBQ2pDLEVBQU0sSUFBcUIsS0FBSyxHQUVwQyxHQUFNLElBQWtCLEdBQWEsSUNKckMsR0FBTSxJQUFTLEFBQUMsR0FBaUIsR0FBUSxJQUFPLEVBQzVDLFFBQVMsSUFDVCxJQ0RKLFlBQWlCLENBQUUsVUFBVSxDQUN6QixHQUFNLEdBQVksR0FBYyxHQUMxQixFQUFnQixHQUFZLEdBQ2xDLE1BQU8sQ0FBRSxZQUFXLGlCQ0h4QixHQUFNLElBQVcsTUFBTSxVQUFVLFNBQ2pDLGFBQXVCLENBQ25CLEdBQU0sR0FBa0IsR0FBSSxTQUN0QixFQUFrQixHQUFJLFNBQzVCLGVBQXdCLEdBQWMsQ0FDbEMsWUFBWSxFQUFVLEVBQU0sQ0FDeEIsTUFBTSxFQUFVLEdBQ2hCLEtBQUssTUFBTSxRQUFVLEdBRXpCLFFBQVMsQ0FDTCxNQUFPLE1BQUssTUFBTSxJQUFJLElBQU0sS0FBSyxTQUFTLE1BQU0sS0FBSyxLQUFNLEtBQUssT0FFcEUsT0FBTyxFQUFRLENBQ1gsS0FBSyxLQUFLLFNBQVMsR0FDbkIsS0FBSyxLQUFLLFNBRWQsVUFBVyxDQUNQLE1BQU0sV0FDTixHQUFJLEdBQU8sRUFBZ0IsSUFBSSxNQUMvQixFQUFnQixPQUFPLElBRy9CLFdBQWlCLEVBQVUsQ0FDdkIsY0FBb0IsRUFBTSxDQUN0QixNQUFPLEFBQUMsSUFBUyxDQUNiLEdBQUksR0FBTyxFQUFnQixJQUFJLEdBQy9CLEFBQUssR0FDRCxHQUFPLEdBQUksR0FBVSxFQUFVLEdBQy9CLEVBQWdCLElBQUksRUFBTSxHQUMxQixFQUFnQixJQUFJLEVBQU0sR0FDMUIsR0FBaUIsRUFBTSxJQUUzQixFQUFLLEtBQU8sRUFDWixFQUFLLFVBR2IsTUFBTyxJQUFVLEdBRXJCLE1BQU8sR0FFWCxZQUEwQixFQUFNLEVBQU0sRUFBTyxFQUFLLFVBQVcsQ0FDekQsR0FBSSxHQUFPLEVBQUssV0FDWixFQUFLLEdBQUksa0JBQWlCLEdBQWEsQ0FDdkMsT0FBUyxLQUFZLEdBQ2pCLEdBQUksR0FBUyxLQUFLLEVBQVMsYUFBYyxHQUFPLENBQzVDLEVBQUcsYUFDSCxBQUFJLEVBQUsscUJBQXNCLFlBQzNCLEdBQWlCLEVBQU0sR0FHdkIsRUFBSyxXQUVULGNBRUssR0FBUyxLQUFLLEVBQVMsV0FBWSxFQUFLLGFBQWMsQ0FDM0QsRUFBRyxhQUNILEdBQWlCLEVBQU0sRUFBTSxFQUFLLGFBQWUsUUFDakQsU0FJWixFQUFHLFFBQVEsRUFBTSxDQUFFLFVBQVcsS0M1RGxDLEdBQU0sQ0FBRSxhQUFXLGtCQUFrQixHQUFRLENBQUUsWUFDekMsR0FBVSxLQ0poQixPQUFrQixTQUNaLENBQ0YsYUFDQSxXQUNBLFVBQ0EsY0FDQSxXQUNBLGNBQ0EsYUFDQSxlQUNBLGdCQUNBLG1CQUNBLFlBQ0EsVUFDQSxZQUNBLGtCQUNBLFdBQ0Esb0JBQ0Esb0JBQ0EsaUJBQ0Esd0JBQ0EsZ0JBQ0EsbUJBQ0EsMEJBQ0EsMkJBQ0EsV0N6QkosT0FBa0IsU0FDWixDQUNGLGFBQ0EsWUFDQSxVQUNBLGNBQ0EsV0FDQSxjQUNBLGFBQ0EsZUFDQSxnQkFDQSxtQkFDQSxZQUNBLFVBQ0EsWUFDQSxrQkFDQSxXQUNBLG9CQUNBLG9CQUNBLGlCQUNBLHdCQUNBLGdCQUNBLG1CQUNBLDBCQUNBLDJCQUNBLFdDekJKLEFBQUMsVUFBVSxFQUFRLENBQ2pCLE1BQU8sYUFBZSxVQUNwQixNQUNFLElBQ0MsR0FBTyxlQUFlLEVBQU8sVUFBVyxNQUFPLENBQzlDLGFBQWMsR0FDZCxJQUFLLElBQ0gsTUFFUixZQUFlLENBQ2IsR0FBSSxHQUFTLE1BQVEsS0FDckIsRUFBTyxXQUFhLEVBQ3BCLE1BQU8sR0FBTyxVQUFVLE9BRTFCLFFBQ0YsR0FBTyxJQUFRLFdDZGYsR0FBTSxJQUFTLEdBQ1QsR0FBVSxHQUFPLFFBRWpCLEdBQWlCLHNCQUVyQixHQUlFLE9BQWEsZUFKZixHQUFjLEtBQUEsT0FBRyxTQUFVLEVBQVUsRUFBVSxDQUM3QyxTQUFJLFVBQVksRUFDVCxHQUNSLGlCQUdpQyxHQUFBLEVBQUEsR0FHbEMsV0FBWSxFQUF5QyxDQUF6QyxBQUFBLElBQUEsUUFBQSxHQUFBLElBQVosR0FBQSxHQUNFLEVBQUEsS0FBQSxLQUNFLE1BQU8sSUFBWSxTQUNaLEdBQWMsS0FBSyxFQUFPLDZEQUM3QixJQUNMLEtBUEgsU0FBQSxZQUFjLEVBQ2QsRUFBQSxLQUFPLEdBT0wsR0FBZSxFQUFNLEVBQWUsYUFFeEMsTUFBQSxJQVhvQyxrQkFjbEMsRUFDQSxFQUF5QixDQUV6QixHQUFJLENBQUMsRUFDSCxLQUFNLElBQUksR0FBZSxHQUk3QixHQUFNLElBQWtCLENBQUMsTUFBTyxPQUFRLFFBQVMsVUFHN0MsR0FBaUIsR0FBZ0IsUUFBUSxPQUU3QyxZQUF3RCxFQUFTLENBQy9ELE1BQU8sV0FBQSxDQUNMLEdBQUksR0FBZ0IsUUFBUSxJQUFXLEdBQ3JDLE1BQU8sSUFBUSxHQUFRLE1BQU0sR0FBUyxZQUs1QyxBQUFBLFVBQWlCLEVBQVMsQ0FDWCxFQUFBLElBQU0sR0FBa0IsT0FDeEIsRUFBQSxLQUFPLEdBQWtCLFFBQ3pCLEVBQUEsTUFBUSxHQUFrQixXQUh4QixHQUFBLEdBQVMsaUJBTUcsRUFBcUIsQ0FDaEQsR0FBTSxHQUFNLEdBQWdCLElBQzVCLFVBQWlCLEtBQUssSUFBSSxFQUFHLEdBQWdCLFFBQVEsSUFDOUMsS0FRSCxJQUFjLEdBQU8sU0FBVyxDQUFFLElBQUssSUFFN0MsR0FBSSxDQUFDLEdBQU8sUUFBUyxHQUFJLENBQ3ZCLE9BQU8sZUFBZSxHQUFZLFVBQVcsQ0FDM0MsTUFBTyxXQUVULEVBQUEsRUN0RUYsWUFBaUIsRUFBSyxDQUE2QixNQUFJLE9BQU8sU0FBVyxZQUFjLE1BQU8sUUFBTyxVQUFhLFNBQVksR0FBVSxTQUFpQixFQUFLLENBQUUsTUFBTyxPQUFPLElBQWlCLEdBQVUsU0FBaUIsRUFBSyxDQUFFLE1BQU8sSUFBTyxNQUFPLFNBQVcsWUFBYyxFQUFJLGNBQWdCLFFBQVUsSUFBUSxPQUFPLFVBQVksU0FBVyxNQUFPLElBQWlCLEdBQVEsR0FNcFcsWUFBc0IsRUFBTyxDQUMxQyxNQUFPLElBQVEsSUFBVSxVQUFZLElBQVUsS0NMMUMsR0FBSSxJQUFrQixNQUFPLFNBQVcsWUFBYyxPQUFPLFVBQVksS0FBTyxPQUFPLFNBQVcsYUFHOUYsR0FBd0IsTUFBTyxTQUFXLFlBQWMsT0FBTyxlQUFpQixLQUFPLE9BQU8sY0FBZ0Isa0JBRTlHLEdBQXVCLE1BQU8sU0FBVyxZQUFjLE9BQU8sYUFBZSxLQUFPLE9BQU8sWUFBYyxnQkNDN0csWUFBcUIsRUFBUSxFQUFVLENBTTVDLE9BTEksR0FBYSxlQUNiLEVBQU8sRUFDUCxFQUFTLEVBQVcsRUFDcEIsRUFFSSxHQUFRLEVBQVcsS0FBSyxFQUFPLFFBQVUsRUFBTSxNQUFRLEdBQzdELEdBQVEsRUFDUixFQUFTLEVBQVcsRUFBSyxHQUFNLE1BQVEsRUFBTSxHQUFHLFFBR2xELE1BQU8sQ0FDTCxLQUFNLEVBQ04sT0FBUSxHQ2hCTCxZQUF1QixFQUFVLENBQ3RDLE1BQU8sSUFBb0IsRUFBUyxPQUFRLEdBQVksRUFBUyxPQUFRLEVBQVMsUUFNN0UsWUFBNkIsRUFBUSxFQUFnQixDQUMxRCxHQUFJLEdBQXdCLEVBQU8sZUFBZSxPQUFTLEVBQ3ZELEVBQU8sR0FBVyxHQUF5QixFQUFPLEtBQ2xELEVBQVksRUFBZSxLQUFPLEVBQ2xDLEVBQWEsRUFBTyxlQUFlLEtBQU8sRUFDMUMsRUFBVSxFQUFlLEtBQU8sRUFDaEMsRUFBZSxFQUFlLE9BQVMsRUFBSSxFQUF3QixFQUNuRSxFQUFZLEVBQWUsT0FBUyxFQUNwQyxFQUFjLEdBQUcsT0FBTyxFQUFPLEtBQU0sS0FBSyxPQUFPLEVBQVMsS0FBSyxPQUFPLEVBQVc7QUFBQSxHQUNqRixFQUFRLEVBQUssTUFBTSxnQkFDbkIsRUFBZSxFQUFNLEdBRXpCLEdBQUksRUFBYSxPQUFTLElBQUssQ0FLN0IsT0FKSSxHQUFlLEtBQUssTUFBTSxFQUFZLElBQ3RDLEVBQW1CLEVBQVksR0FDL0IsRUFBVyxHQUVOLEVBQUksRUFBRyxFQUFJLEVBQWEsT0FBUSxHQUFLLEdBQzVDLEVBQVMsS0FBSyxFQUFhLE1BQU0sRUFBRyxFQUFJLEtBRzFDLE1BQU8sR0FBYyxHQUFtQixDQUFDLENBQUMsR0FBRyxPQUFPLEdBQVUsRUFBUyxLQUFLLE9BQU8sRUFBUyxNQUFNLEVBQUcsRUFBZSxHQUFHLElBQUksU0FBVSxFQUFTLENBQzVJLE1BQU8sQ0FBQyxHQUFJLEtBQ1YsQ0FBQyxDQUFDLElBQUssR0FBVyxFQUFtQixHQUFLLEtBQU0sQ0FBQyxHQUFJLEVBQVMsRUFBZSxPQUduRixNQUFPLEdBQWMsR0FBbUIsQ0FDeEMsQ0FBQyxHQUFHLE9BQU8sRUFBVSxHQUFJLEVBQU0sRUFBWSxJQUFLLENBQUMsR0FBRyxPQUFPLEdBQVUsR0FBZSxDQUFDLEdBQUksR0FBVyxFQUFZLEdBQUssS0FBTSxDQUFDLEdBQUcsT0FBTyxFQUFVLEdBQUksRUFBTSxFQUFZLE1BR3hLLFlBQTRCLEVBQU8sQ0FDakMsR0FBSSxHQUFnQixFQUFNLE9BQU8sU0FBVSxFQUFNLENBQy9DLEdBQUksR0FBSSxFQUFLLEdBQ1QsRUFBTyxFQUFLLEdBQ2hCLE1BQU8sS0FBUyxTQUVkLEVBQVMsS0FBSyxJQUFJLE1BQU0sS0FBTSxFQUFjLElBQUksU0FBVSxFQUFPLENBQ25FLEdBQUksR0FBUyxFQUFNLEdBQ25CLE1BQU8sR0FBTyxVQUVoQixNQUFPLEdBQWMsSUFBSSxTQUFVLEVBQU8sQ0FDeEMsR0FBSSxHQUFTLEVBQU0sR0FDZixFQUFPLEVBQU0sR0FDakIsTUFBTyxJQUFRLEVBQVEsR0FBVyxHQUFPLE1BQVEsRUFBTyxRQUN2RCxLQUFLO0FBQUEsR0FHVixZQUFvQixFQUFLLENBQ3ZCLE1BQU8sT0FBTSxFQUFNLEdBQUcsS0FBSyxLQUc3QixZQUFpQixFQUFLLEVBQUssQ0FDekIsTUFBTyxJQUFXLEVBQU0sRUFBSSxRQUFVLEVDaEV4QyxZQUFpQixFQUFLLENBQTZCLE1BQUksT0FBTyxTQUFXLFlBQWMsTUFBTyxRQUFPLFVBQWEsU0FBWSxHQUFVLFNBQWlCLEVBQUssQ0FBRSxNQUFPLE9BQU8sSUFBaUIsR0FBVSxTQUFpQixFQUFLLENBQUUsTUFBTyxJQUFPLE1BQU8sU0FBVyxZQUFjLEVBQUksY0FBZ0IsUUFBVSxJQUFRLE9BQU8sVUFBWSxTQUFXLE1BQU8sSUFBaUIsR0FBUSxHQUVuWCxZQUF5QixFQUFVLEVBQWEsQ0FBRSxHQUFJLENBQUUsYUFBb0IsSUFBZ0IsS0FBTSxJQUFJLFdBQVUscUNBRWhILFlBQTJCLEVBQVEsRUFBTyxDQUFFLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBTSxPQUFRLElBQUssQ0FBRSxHQUFJLEdBQWEsRUFBTSxHQUFJLEVBQVcsV0FBYSxFQUFXLFlBQWMsR0FBTyxFQUFXLGFBQWUsR0FBVSxTQUFXLElBQVksR0FBVyxTQUFXLElBQU0sT0FBTyxlQUFlLEVBQVEsRUFBVyxJQUFLLElBRTdTLFlBQXNCLEVBQWEsRUFBWSxFQUFhLENBQUUsTUFBSSxJQUFZLEdBQWtCLEVBQVksVUFBVyxHQUFpQixHQUFhLEdBQWtCLEVBQWEsR0FBcUIsRUFFek0sWUFBbUIsRUFBVSxFQUFZLENBQUUsR0FBSSxNQUFPLElBQWUsWUFBYyxJQUFlLEtBQVEsS0FBTSxJQUFJLFdBQVUsc0RBQXlELEVBQVMsVUFBWSxPQUFPLE9BQU8sR0FBYyxFQUFXLFVBQVcsQ0FBRSxZQUFhLENBQUUsTUFBTyxFQUFVLFNBQVUsR0FBTSxhQUFjLE1BQWUsR0FBWSxHQUFnQixFQUFVLEdBRW5YLFlBQXNCLEVBQVMsQ0FBRSxHQUFJLEdBQTRCLEtBQTZCLE1BQU8sV0FBZ0MsQ0FBRSxHQUFJLEdBQVEsR0FBZ0IsR0FBVSxFQUFRLEdBQUksRUFBMkIsQ0FBRSxHQUFJLEdBQVksR0FBZ0IsTUFBTSxZQUFhLEVBQVMsUUFBUSxVQUFVLEVBQU8sVUFBVyxPQUFxQixHQUFTLEVBQU0sTUFBTSxLQUFNLFdBQWMsTUFBTyxJQUEyQixLQUFNLElBRTVaLFlBQW9DLEVBQU0sRUFBTSxDQUFFLE1BQUksSUFBUyxJQUFRLEtBQVUsVUFBWSxNQUFPLElBQVMsWUFBc0IsRUFBZSxHQUF1QixHQUV6SyxZQUFnQyxFQUFNLENBQUUsR0FBSSxJQUFTLE9BQVUsS0FBTSxJQUFJLGdCQUFlLDZEQUFnRSxNQUFPLEdBRS9KLFlBQTBCLEVBQU8sQ0FBRSxHQUFJLEdBQVMsTUFBTyxNQUFRLFdBQWEsR0FBSSxLQUFRLE9BQVcsVUFBbUIsU0FBMEIsRUFBTyxDQUFFLEdBQUksSUFBVSxNQUFRLENBQUMsR0FBa0IsR0FBUSxNQUFPLEdBQU8sR0FBSSxNQUFPLElBQVUsV0FBYyxLQUFNLElBQUksV0FBVSxzREFBeUQsR0FBSSxNQUFPLElBQVcsWUFBYSxDQUFFLEdBQUksRUFBTyxJQUFJLEdBQVEsTUFBTyxHQUFPLElBQUksR0FBUSxFQUFPLElBQUksRUFBTyxHQUFZLFlBQW1CLENBQUUsTUFBTyxJQUFXLEVBQU8sVUFBVyxHQUFnQixNQUFNLGFBQWdCLFNBQVEsVUFBWSxPQUFPLE9BQU8sRUFBTSxVQUFXLENBQUUsWUFBYSxDQUFFLE1BQU8sRUFBUyxXQUFZLEdBQU8sU0FBVSxHQUFNLGFBQWMsTUFBa0IsR0FBZ0IsRUFBUyxJQUFrQixHQUFpQixHQUU5dUIsWUFBb0IsRUFBUSxFQUFNLEVBQU8sQ0FBRSxNQUFJLE1BQStCLEdBQWEsUUFBUSxVQUFvQixHQUFhLFNBQW9CLEVBQVEsRUFBTSxFQUFPLENBQUUsR0FBSSxHQUFJLENBQUMsTUFBTyxFQUFFLEtBQUssTUFBTSxFQUFHLEdBQU8sR0FBSSxHQUFjLFNBQVMsS0FBSyxNQUFNLEVBQVEsR0FBUSxFQUFXLEdBQUksR0FBZSxNQUFJLElBQU8sR0FBZ0IsRUFBVSxFQUFNLFdBQW1CLEdBQXNCLEdBQVcsTUFBTSxLQUFNLFdBRXJaLGFBQXFDLENBQTBFLEdBQXBFLE1BQU8sVUFBWSxhQUFlLENBQUMsUUFBUSxXQUE2QixRQUFRLFVBQVUsS0FBTSxNQUFPLEdBQU8sR0FBSSxNQUFPLFFBQVUsV0FBWSxNQUFPLEdBQU0sR0FBSSxDQUFFLFlBQUssVUFBVSxTQUFTLEtBQUssUUFBUSxVQUFVLEtBQU0sR0FBSSxVQUFZLEtBQWEsU0FBZSxFQUFQLENBQVksTUFBTyxJQUUxVCxZQUEyQixFQUFJLENBQUUsTUFBTyxVQUFTLFNBQVMsS0FBSyxHQUFJLFFBQVEsbUJBQXFCLEdBRWhHLFlBQXlCLEVBQUcsRUFBRyxDQUFFLFVBQWtCLE9BQU8sZ0JBQWtCLFNBQXlCLEVBQUcsRUFBRyxDQUFFLFNBQUUsVUFBWSxFQUFVLEdBQWEsR0FBZ0IsRUFBRyxHQUVySyxZQUF5QixFQUFHLENBQUUsVUFBa0IsT0FBTyxlQUFpQixPQUFPLGVBQWlCLFNBQXlCLEVBQUcsQ0FBRSxNQUFPLEdBQUUsV0FBYSxPQUFPLGVBQWUsSUFBYyxHQUFnQixHQWVqTSxHQUFJLElBQTRCLFNBQVUsRUFBUSxDQUN2RCxHQUFVLEVBQWMsR0FFeEIsR0FBSSxHQUFTLEdBQWEsR0FtRDFCLFdBQXNCLEVBQVMsRUFBTyxFQUFRLEVBQVcsRUFBTSxFQUFlLEVBQVksQ0FDeEYsR0FBSSxHQUFhLEVBQVUsRUFBYSxFQUVwQyxFQUVKLEdBQWdCLEtBQU0sR0FFdEIsRUFBUSxFQUFPLEtBQUssS0FBTSxHQUUxQixHQUFJLEdBQVMsTUFBTSxRQUFRLEdBQVMsRUFBTSxTQUFXLEVBQUksRUFBUSxPQUFZLEVBQVEsQ0FBQyxHQUFTLE9BRzNGLEVBQVUsRUFFZCxHQUFJLENBQUMsR0FBVyxFQUFRLENBQ3RCLEdBQUksR0FFSixFQUFXLEdBQWUsRUFBTyxHQUFHLE9BQVMsTUFBUSxJQUFpQixPQUFTLE9BQVMsRUFBYSxPQUd2RyxHQUFJLEdBQWEsRUFFakIsQUFBSSxDQUFDLEdBQWMsR0FDakIsR0FBYSxFQUFPLE9BQU8sU0FBVSxFQUFNLEVBQU0sQ0FDL0MsTUFBSSxHQUFLLEtBQ1AsRUFBSyxLQUFLLEVBQUssSUFBSSxPQUdkLEdBQ04sS0FHRCxHQUFjLEVBQVcsU0FBVyxHQUN0QyxHQUFhLFFBR2YsR0FBSSxHQUVKLEFBQUksR0FBYSxFQUNmLEVBQWEsRUFBVSxJQUFJLFNBQVUsRUFBSyxDQUN4QyxNQUFPLElBQVksRUFBUSxLQUVwQixHQUNULEdBQWEsRUFBTyxPQUFPLFNBQVUsRUFBTSxFQUFNLENBQy9DLE1BQUksR0FBSyxLQUNQLEVBQUssS0FBSyxHQUFZLEVBQUssSUFBSSxPQUFRLEVBQUssSUFBSSxRQUczQyxHQUNOLEtBR0wsR0FBSSxHQUFjLEVBRWxCLEdBQUksR0FBZSxNQUFRLEdBQWlCLEtBQU0sQ0FDaEQsR0FBSSxHQUFxQixFQUFjLFdBRXZDLEFBQUksR0FBYSxJQUNmLEdBQWMsR0F5RGxCLE1BckRBLFFBQU8saUJBQWlCLEdBQXVCLEdBQVEsQ0FDckQsS0FBTSxDQUNKLE1BQU8sZ0JBRVQsUUFBUyxDQUNQLE1BQU8sRUFJUCxXQUFZLEdBQ1osU0FBVSxJQUVaLFVBQVcsQ0FHVCxNQUFRLEdBQWMsS0FBZ0IsTUFBUSxJQUFnQixPQUFTLEVBQWMsT0FJckYsV0FBWSxHQUFjLE1BRTVCLEtBQU0sQ0FHSixNQUFPLEdBQTBDLE9BSWpELFdBQVksR0FBUSxNQUV0QixNQUFPLENBQ0wsTUFBTyxHQUFnRCxRQUV6RCxPQUFRLENBQ04sTUFBUSxHQUFXLEtBQWEsTUFBUSxJQUFhLE9BQVMsRUFBVyxRQUUzRSxVQUFXLENBQ1QsTUFBUSxHQUFjLEtBQWdCLE1BQVEsSUFBZ0IsT0FBUyxFQUFjLFFBRXZGLGNBQWUsQ0FDYixNQUFPLEdBRVQsV0FBWSxDQUdWLE1BQVEsR0FBZSxLQUFpQixNQUFRLElBQWlCLE9BQVMsRUFBZSxPQUl6RixXQUFZLEdBQWUsUUFJM0IsR0FBa0IsTUFBb0MsRUFBYyxNQUN0RSxRQUFPLGVBQWUsR0FBdUIsR0FBUSxRQUFTLENBQzVELE1BQU8sRUFBYyxNQUNyQixTQUFVLEdBQ1YsYUFBYyxLQUVULEdBQTJCLElBSXBDLENBQUksTUFBTSxrQkFDUixNQUFNLGtCQUFrQixHQUF1QixHQUFRLEdBRXZELE9BQU8sZUFBZSxHQUF1QixHQUFRLFFBQVMsQ0FDNUQsTUFBTyxRQUFRLE1BQ2YsU0FBVSxHQUNWLGFBQWMsS0FJWCxHQUdULFVBQWEsRUFBYyxDQUFDLENBQzFCLElBQUssV0FDTCxNQUFPLFVBQW9CLENBQ3pCLE1BQU8sSUFBVyxRQUluQixDQUNELElBQUssR0FDTCxJQUFLLFVBQWUsQ0FDbEIsTUFBTyxhQUlKLEdBQ08sR0FBaUIsUUFNMUIsWUFBb0IsRUFBTyxDQUNoQyxHQUFJLEdBQVMsRUFBTSxRQUVuQixHQUFJLEVBQU0sTUFDUixPQUFTLEdBQU0sRUFBRyxFQUFnQixFQUFNLE1BQU8sRUFBTSxFQUFjLE9BQVEsSUFBTyxDQUNoRixHQUFJLEdBQU8sRUFBYyxHQUV6QixBQUFJLEVBQUssS0FDUCxJQUFVO0FBQUE7QUFBQSxFQUFTLEdBQWMsRUFBSyxjQUdqQyxFQUFNLFFBQVUsRUFBTSxVQUMvQixPQUFTLEdBQU0sRUFBRyxFQUFvQixFQUFNLFVBQVcsRUFBTSxFQUFrQixPQUFRLElBQU8sQ0FDNUYsR0FBSSxHQUFXLEVBQWtCLEdBQ2pDLEdBQVU7QUFBQTtBQUFBLEVBQVMsR0FBb0IsRUFBTSxPQUFRLEdBSXpELE1BQU8sR0MxUUYsWUFBcUIsRUFBUSxFQUFVLEVBQWEsQ0FDekQsTUFBTyxJQUFJLElBQWEsaUJBQWlCLE9BQU8sR0FBYyxPQUFXLEVBQVEsQ0FBQyxJQ0o3RSxHQUFJLEdBQU8sT0FBTyxPQUFPLENBRTlCLEtBQU0sT0FFTixTQUFVLFdBQ1YscUJBQXNCLHNCQUN0QixvQkFBcUIscUJBQ3JCLGNBQWUsZUFDZixNQUFPLFFBQ1AsU0FBVSxXQUVWLGdCQUFpQixpQkFDakIsZ0JBQWlCLGlCQUNqQixvQkFBcUIscUJBRXJCLFNBQVUsV0FDVixJQUFLLFdBQ0wsTUFBTyxhQUNQLE9BQVEsY0FDUixRQUFTLGVBQ1QsS0FBTSxZQUNOLEtBQU0sWUFDTixLQUFNLFlBQ04sT0FBUSxjQUNSLGFBQWMsY0FFZCxVQUFXLFlBRVgsV0FBWSxZQUNaLFVBQVcsV0FDWCxjQUFlLGNBRWYsa0JBQW1CLG1CQUNuQiwwQkFBMkIsMEJBRTNCLHVCQUF3Qix1QkFDeEIsdUJBQXdCLHVCQUN4QixpQkFBa0Isa0JBQ2xCLHVCQUF3Qix1QkFDeEIsMEJBQTJCLDBCQUMzQixzQkFBdUIsc0JBQ3ZCLHFCQUFzQixxQkFDdEIsc0JBQXVCLHNCQUN2Qiw2QkFBOEIsNEJBRTlCLHFCQUFzQixzQkFFdEIsaUJBQWtCLGtCQUVsQixzQkFBdUIsc0JBQ3ZCLHNCQUF1QixzQkFDdkIseUJBQTBCLHlCQUMxQixxQkFBc0IscUJBQ3RCLG9CQUFxQixvQkFDckIsNEJBQTZCLDZCQ3pEaEIsWUFBbUIsRUFBVyxFQUFTLENBQ3BELEdBQUksR0FBbUIsUUFBUSxHQUUvQixHQUFJLENBQUMsRUFDSCxLQUFNLElBQUksT0FBTSxHQUE0QixtQ0NIaEQsR0FBSSxJQUE0QixNQUFPLFNBQVcsWUFBYyxNQUFPLFFBQU8sS0FBUSxXQUFhLE9BQU8sSUFBSSw4QkFBZ0MsT0FDdkksR0FBUSxHQ0lBLFlBQXVCLEVBQWEsQ0FDakQsR0FBSSxHQUFLLEVBQVksVUFBVSxPQUMvQixNQUFPLElBQU8sWUFBYyxHQUFVLEdBQ3RDLEVBQVksVUFBVSxRQUFVLEVBRTVCLElBQ0YsR0FBWSxVQUFVLElBQTZCLEdDTmhELEdBQUksSUFBd0IsVUFBWSxDQW9CN0MsV0FBa0IsRUFBWSxFQUFVLEVBQVEsQ0FDOUMsS0FBSyxNQUFRLEVBQVcsTUFDeEIsS0FBSyxJQUFNLEVBQVMsSUFDcEIsS0FBSyxXQUFhLEVBQ2xCLEtBQUssU0FBVyxFQUNoQixLQUFLLE9BQVMsRUFHaEIsR0FBSSxHQUFTLEVBQVMsVUFFdEIsU0FBTyxPQUFTLFVBQWtCLENBQ2hDLE1BQU8sQ0FDTCxNQUFPLEtBQUssTUFDWixJQUFLLEtBQUssTUFJUCxLQUdULEdBQWMsSUFNUCxHQUFJLEdBQXFCLFVBQVksQ0E4QjFDLFdBQWUsRUFBTSxFQUFPLEVBQUssRUFBTSxFQUFRLEVBQU0sRUFBTyxDQUMxRCxLQUFLLEtBQU8sRUFDWixLQUFLLE1BQVEsRUFDYixLQUFLLElBQU0sRUFDWCxLQUFLLEtBQU8sRUFDWixLQUFLLE9BQVMsRUFDZCxLQUFLLE1BQVEsRUFDYixLQUFLLEtBQU8sRUFDWixLQUFLLEtBQU8sS0FHZCxHQUFJLEdBQVUsRUFBTSxVQUVwQixTQUFRLE9BQVMsVUFBa0IsQ0FDakMsTUFBTyxDQUNMLEtBQU0sS0FBSyxLQUNYLE1BQU8sS0FBSyxNQUNaLEtBQU0sS0FBSyxLQUNYLE9BQVEsS0FBSyxTQUlWLEtBR1QsR0FBYyxHQUtQLFlBQWdCLEVBQVcsQ0FDaEMsTUFBTyxJQUFhLE1BQVEsTUFBTyxHQUFVLE1BQVMsU0M3R2pELEdBQUksR0FBWSxPQUFPLE9BQU8sQ0FDbkMsSUFBSyxRQUNMLElBQUssUUFDTCxLQUFNLElBQ04sT0FBUSxJQUNSLElBQUssSUFDTCxRQUFTLElBQ1QsUUFBUyxJQUNULE9BQVEsTUFDUixNQUFPLElBQ1AsT0FBUSxJQUNSLEdBQUksSUFDSixVQUFXLElBQ1gsVUFBVyxJQUNYLFFBQVMsSUFDVCxLQUFNLElBQ04sUUFBUyxJQUNULEtBQU0sT0FDTixJQUFLLE1BQ0wsTUFBTyxRQUNQLE9BQVEsU0FDUixhQUFjLGNBQ2QsUUFBUyxZQzFCWCxZQUFpQixFQUFLLENBQTZCLE1BQUksT0FBTyxTQUFXLFlBQWMsTUFBTyxRQUFPLFVBQWEsU0FBWSxHQUFVLFNBQWlCLEVBQUssQ0FBRSxNQUFPLE9BQU8sSUFBaUIsR0FBVSxTQUFpQixFQUFLLENBQUUsTUFBTyxJQUFPLE1BQU8sU0FBVyxZQUFjLEVBQUksY0FBZ0IsUUFBVSxJQUFRLE9BQU8sVUFBWSxTQUFXLE1BQU8sSUFBaUIsR0FBUSxHQUluWCxHQUFJLElBQW1CLEdBQ25CLEdBQXNCLEVBS1gsWUFBaUIsRUFBTyxDQUNyQyxNQUFPLElBQVksRUFBTyxJQUc1QixZQUFxQixFQUFPLEVBQVksQ0FDdEMsT0FBUSxHQUFRLFFBQ1QsU0FDSCxNQUFPLE1BQUssVUFBVSxPQUVuQixXQUNILE1BQU8sR0FBTSxLQUFPLGFBQWEsT0FBTyxFQUFNLEtBQU0sS0FBTyxpQkFFeEQsU0FDSCxNQUFJLEtBQVUsS0FDTCxPQUdGLEdBQWtCLEVBQU8sV0FHaEMsTUFBTyxRQUFPLElBSXBCLFlBQTJCLEVBQU8sRUFBc0IsQ0FDdEQsR0FBSSxFQUFxQixRQUFRLEtBQVcsR0FDMUMsTUFBTyxhQUdULEdBQUksR0FBYSxHQUFHLE9BQU8sRUFBc0IsQ0FBQyxJQUM5QyxFQUFrQixHQUFZLEdBRWxDLEdBQUksSUFBb0IsT0FBVyxDQUNqQyxHQUFJLEdBQWMsRUFBZ0IsS0FBSyxHQUV2QyxHQUFJLElBQWdCLEVBQ2xCLE1BQU8sT0FBTyxJQUFnQixTQUFXLEVBQWMsR0FBWSxFQUFhLFdBRXpFLE1BQU0sUUFBUSxHQUN2QixNQUFPLElBQVksRUFBTyxHQUc1QixNQUFPLElBQWEsRUFBTyxHQUc3QixZQUFzQixFQUFRLEVBQVksQ0FDeEMsR0FBSSxHQUFPLE9BQU8sS0FBSyxHQUV2QixHQUFJLEVBQUssU0FBVyxFQUNsQixNQUFPLEtBR1QsR0FBSSxFQUFXLE9BQVMsR0FDdEIsTUFBTyxJQUFNLEdBQWEsR0FBVSxJQUd0QyxHQUFJLEdBQWEsRUFBSyxJQUFJLFNBQVUsRUFBSyxDQUN2QyxHQUFJLEdBQVEsR0FBWSxFQUFPLEdBQU0sR0FDckMsTUFBTyxHQUFNLEtBQU8sSUFFdEIsTUFBTyxLQUFPLEVBQVcsS0FBSyxNQUFRLEtBR3hDLFlBQXFCLEVBQU8sRUFBWSxDQUN0QyxHQUFJLEVBQU0sU0FBVyxFQUNuQixNQUFPLEtBR1QsR0FBSSxFQUFXLE9BQVMsR0FDdEIsTUFBTyxVQU9ULE9BSkksR0FBTSxLQUFLLElBQUksR0FBa0IsRUFBTSxRQUN2QyxFQUFZLEVBQU0sT0FBUyxFQUMzQixFQUFRLEdBRUgsRUFBSSxFQUFHLEVBQUksRUFBSyxFQUFFLEVBQ3pCLEVBQU0sS0FBSyxHQUFZLEVBQU0sR0FBSSxJQUduQyxNQUFJLEtBQWMsRUFDaEIsRUFBTSxLQUFLLG1CQUNGLEVBQVksR0FDckIsRUFBTSxLQUFLLE9BQU8sT0FBTyxFQUFXLGdCQUcvQixJQUFNLEVBQU0sS0FBSyxNQUFRLElBR2xDLFlBQXFCLEVBQVEsQ0FDM0IsR0FBSSxHQUFrQixFQUFPLE9BQU8sS0FFcEMsR0FBSSxNQUFPLElBQW9CLFdBQzdCLE1BQU8sR0FHVCxHQUFJLE1BQU8sR0FBTyxTQUFZLFdBQzVCLE1BQU8sR0FBTyxRQUlsQixZQUFzQixFQUFRLENBQzVCLEdBQUksR0FBTSxPQUFPLFVBQVUsU0FBUyxLQUFLLEdBQVEsUUFBUSxhQUFjLElBQUksUUFBUSxLQUFNLElBRXpGLEdBQUksSUFBUSxVQUFZLE1BQU8sR0FBTyxhQUFnQixXQUFZLENBQ2hFLEdBQUksR0FBTyxFQUFPLFlBQVksS0FFOUIsR0FBSSxNQUFPLElBQVMsVUFBWSxJQUFTLEdBQ3ZDLE1BQU8sR0FJWCxNQUFPLEdDMUhNLFlBQW1CLEVBQVcsRUFBUyxDQUNwRCxHQUFJLEdBQW1CLFFBQVEsR0FFL0IsR0FBSSxDQUFDLEVBQ0gsS0FBTSxJQUFJLE9BQU0sR0NFcEIsR0FBTyxJQUVQLFNBQW9CLEVBQU8sRUFBYSxDQUN0QyxNQUFPLGFBQWlCLElDVDFCLFlBQTJCLEVBQVEsRUFBTyxDQUFFLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBTSxPQUFRLElBQUssQ0FBRSxHQUFJLEdBQWEsRUFBTSxHQUFJLEVBQVcsV0FBYSxFQUFXLFlBQWMsR0FBTyxFQUFXLGFBQWUsR0FBVSxTQUFXLElBQVksR0FBVyxTQUFXLElBQU0sT0FBTyxlQUFlLEVBQVEsRUFBVyxJQUFLLElBRTdTLFlBQXNCLEVBQWEsRUFBWSxFQUFhLENBQUUsTUFBSSxJQUFZLEdBQWtCLEVBQVksVUFBVyxHQUFpQixHQUFhLEdBQWtCLEVBQWEsR0FBcUIsRUFjbE0sR0FBSSxJQUFzQixVQUFZLENBQzNDLFdBQWdCLEVBQU0sQ0FDcEIsR0FBSSxHQUFPLFVBQVUsT0FBUyxHQUFLLFVBQVUsS0FBTyxPQUFZLFVBQVUsR0FBSyxrQkFDM0UsRUFBaUIsVUFBVSxPQUFTLEdBQUssVUFBVSxLQUFPLE9BQVksVUFBVSxHQUFLLENBQ3ZGLEtBQU0sRUFDTixPQUFRLEdBRVYsTUFBTyxJQUFTLFVBQVksR0FBVSxFQUFHLG9DQUFvQyxPQUFPLEdBQVEsR0FBTyxNQUNuRyxLQUFLLEtBQU8sRUFDWixLQUFLLEtBQU8sRUFDWixLQUFLLGVBQWlCLEVBQ3RCLEtBQUssZUFBZSxLQUFPLEdBQUssR0FBVSxFQUFHLDZEQUM3QyxLQUFLLGVBQWUsT0FBUyxHQUFLLEdBQVUsRUFBRywrREFJakQsVUFBYSxFQUFRLENBQUMsQ0FDcEIsSUFBSyxHQUNMLElBQUssVUFBZSxDQUNsQixNQUFPLGFBSUosS0FTRixZQUFrQixFQUFRLENBQy9CLE1BQU8sSUFBVyxFQUFRLElDOUNyQixHQUFJLElBQW9CLE9BQU8sT0FBTyxDQUUzQyxNQUFPLFFBQ1AsU0FBVSxXQUNWLGFBQWMsZUFDZCxNQUFPLFFBQ1Asb0JBQXFCLHNCQUNyQixnQkFBaUIsa0JBQ2pCLGdCQUFpQixrQkFDakIsb0JBQXFCLHNCQUVyQixPQUFRLFNBQ1IsT0FBUSxTQUNSLE9BQVEsU0FDUixpQkFBa0IsbUJBQ2xCLG9CQUFxQixzQkFDckIsVUFBVyxZQUNYLE1BQU8sUUFDUCxLQUFNLE9BQ04sV0FBWSxhQUNaLGFBQWMsZUFDZCx1QkFBd0IsMkJDaEJuQixZQUFnQyxFQUFXLENBRWhELEdBQUksR0FBUSxFQUFVLE1BQU0sZ0JBRXhCLEVBQWUsR0FBMEIsR0FFN0MsR0FBSSxJQUFpQixFQUNuQixPQUFTLEdBQUksRUFBRyxFQUFJLEVBQU0sT0FBUSxJQUNoQyxFQUFNLEdBQUssRUFBTSxHQUFHLE1BQU0sR0FPOUIsT0FGSSxHQUFZLEVBRVQsRUFBWSxFQUFNLFFBQVUsR0FBUSxFQUFNLEtBQy9DLEVBQUUsRUFLSixPQUZJLEdBQVUsRUFBTSxPQUViLEVBQVUsR0FBYSxHQUFRLEVBQU0sRUFBVSxLQUNwRCxFQUFFLEVBSUosTUFBTyxHQUFNLE1BQU0sRUFBVyxHQUFTLEtBQUs7QUFBQSxHQUc5QyxZQUFpQixFQUFLLENBQ3BCLE9BQVMsR0FBSSxFQUFHLEVBQUksRUFBSSxPQUFRLEVBQUUsRUFDaEMsR0FBSSxFQUFJLEtBQU8sS0FBTyxFQUFJLEtBQU8sSUFDL0IsTUFBTyxHQUlYLE1BQU8sR0FPRixZQUFtQyxFQUFPLENBUS9DLE9BUEksR0FFQSxFQUFjLEdBQ2QsRUFBYyxHQUNkLEVBQVMsRUFDVCxFQUFlLEtBRVYsRUFBSSxFQUFHLEVBQUksRUFBTSxPQUFRLEVBQUUsRUFDbEMsT0FBUSxFQUFNLFdBQVcsUUFDbEIsSUFFSCxBQUFJLEVBQU0sV0FBVyxFQUFJLEtBQU8sSUFDOUIsRUFBRSxNQUtELElBRUgsRUFBYyxHQUNkLEVBQWMsR0FDZCxFQUFTLEVBQ1QsVUFFRyxPQUVBLElBRUgsRUFBRSxFQUNGLGNBR0EsQUFBSSxHQUFlLENBQUMsR0FBZ0IsS0FBaUIsTUFBUSxFQUFTLElBQ3BFLEdBQWUsR0FHakIsRUFBYyxHQUlwQixNQUFRLEdBQWdCLEtBQWtCLE1BQVEsSUFBa0IsT0FBUyxFQUFnQixFQVV4RixZQUEwQixFQUFPLENBQ3RDLEdBQUksR0FBYyxVQUFVLE9BQVMsR0FBSyxVQUFVLEtBQU8sT0FBWSxVQUFVLEdBQUssR0FDbEYsRUFBc0IsVUFBVSxPQUFTLEdBQUssVUFBVSxLQUFPLE9BQVksVUFBVSxHQUFLLEdBQzFGLEVBQWUsRUFBTSxRQUFRO0FBQUEsS0FBVSxHQUN2QyxFQUFrQixFQUFNLEtBQU8sS0FBTyxFQUFNLEtBQU8sSUFDbkQsRUFBbUIsRUFBTSxFQUFNLE9BQVMsS0FBTyxJQUMvQyxFQUFtQixFQUFNLEVBQU0sT0FBUyxLQUFPLEtBQy9DLEVBQXVCLENBQUMsR0FBZ0IsR0FBb0IsR0FBb0IsRUFDaEYsRUFBUyxHQUViLE1BQUksSUFBd0IsQ0FBRSxJQUFnQixJQUM1QyxJQUFVO0FBQUEsRUFBTyxHQUduQixHQUFVLEVBQWMsRUFBTSxRQUFRLE1BQU87QUFBQSxFQUFPLEdBQWUsRUFFL0QsR0FDRixJQUFVO0FBQUEsR0FHTCxNQUFRLEVBQU8sUUFBUSxPQUFRLFNBQVcsTUM3RzVDLEdBQUksSUFBcUIsVUFBWSxDQWdCMUMsV0FBZSxFQUFRLENBQ3JCLEdBQUksR0FBbUIsR0FBSSxHQUFNLEVBQVUsSUFBSyxFQUFHLEVBQUcsRUFBRyxFQUFHLE1BQzVELEtBQUssT0FBUyxFQUNkLEtBQUssVUFBWSxFQUNqQixLQUFLLE1BQVEsRUFDYixLQUFLLEtBQU8sRUFDWixLQUFLLFVBQVksRUFPbkIsR0FBSSxHQUFTLEVBQU0sVUFFbkIsU0FBTyxRQUFVLFVBQW1CLENBQ2xDLEtBQUssVUFBWSxLQUFLLE1BQ3RCLEdBQUksR0FBUSxLQUFLLE1BQVEsS0FBSyxZQUM5QixNQUFPLElBUVQsRUFBTyxVQUFZLFVBQXFCLENBQ3RDLEdBQUksR0FBUSxLQUFLLE1BRWpCLEdBQUksRUFBTSxPQUFTLEVBQVUsSUFDM0IsRUFBRyxDQUNELEdBQUksR0FHSixFQUFTLEdBQWMsRUFBTSxRQUFVLE1BQVEsSUFBZ0IsT0FBUyxFQUFjLEVBQU0sS0FBTyxHQUFVLEtBQU0sU0FDNUcsRUFBTSxPQUFTLEVBQVUsU0FHcEMsTUFBTyxJQUdGLEtBTUYsWUFBK0IsRUFBTSxDQUMxQyxNQUFPLEtBQVMsRUFBVSxNQUFRLElBQVMsRUFBVSxRQUFVLElBQVMsRUFBVSxLQUFPLElBQVMsRUFBVSxTQUFXLElBQVMsRUFBVSxTQUFXLElBQVMsRUFBVSxRQUFVLElBQVMsRUFBVSxPQUFTLElBQVMsRUFBVSxRQUFVLElBQVMsRUFBVSxJQUFNLElBQVMsRUFBVSxXQUFhLElBQVMsRUFBVSxXQUFhLElBQVMsRUFBVSxTQUFXLElBQVMsRUFBVSxNQUFRLElBQVMsRUFBVSxRQUdsWixZQUF1QixFQUFNLENBQzNCLE1BQ0UsT0FBTSxHQUFRLEVBQVUsSUFDeEIsRUFBTyxJQUFTLEtBQUssVUFBVSxPQUFPLGFBQWEsSUFDbkQsT0FBUSxPQUFRLE1BQU8sRUFBSyxTQUFTLElBQUksZUFBZSxNQUFNLElBQUssS0FZdkUsWUFBbUIsRUFBTyxFQUFNLENBTTlCLE9BTEksR0FBUyxFQUFNLE9BQ2YsRUFBTyxFQUFPLEtBQ2QsRUFBYSxFQUFLLE9BQ2xCLEVBQU0sRUFBSyxJQUVSLEVBQU0sR0FBWSxDQUN2QixHQUFJLEdBQU8sRUFBSyxXQUFXLEdBQ3ZCLEVBQVEsRUFBTSxLQUVkLEVBQU8sRUFBSSxFQUFNLEVBQU0sVUFHM0IsT0FBUSxPQUNELFdBRUEsT0FFQSxRQUVBLElBRUgsRUFBRSxFQUNGLGFBRUcsSUFFSCxFQUFFLEVBQ0YsRUFBRSxFQUFNLEtBQ1IsRUFBTSxVQUFZLEVBQ2xCLGFBRUcsSUFFSCxBQUFJLEVBQUssV0FBVyxFQUFNLEtBQU8sR0FDL0IsR0FBTyxFQUVQLEVBQUUsRUFHSixFQUFFLEVBQU0sS0FDUixFQUFNLFVBQVksRUFDbEIsYUFFRyxJQUVILE1BQU8sSUFBSSxHQUFNLEVBQVUsS0FBTSxFQUFLLEVBQU0sRUFBRyxFQUFPLEVBQU0sT0FFekQsSUFFSCxNQUFPLElBQVksRUFBUSxFQUFLLEVBQU8sRUFBTSxPQUUxQyxJQUVILE1BQU8sSUFBSSxHQUFNLEVBQVUsT0FBUSxFQUFLLEVBQU0sRUFBRyxFQUFPLEVBQU0sT0FFM0QsSUFFSCxNQUFPLElBQUksR0FBTSxFQUFVLElBQUssRUFBSyxFQUFNLEVBQUcsRUFBTyxFQUFNLE9BRXhELElBRUgsTUFBTyxJQUFJLEdBQU0sRUFBVSxRQUFTLEVBQUssRUFBTSxFQUFHLEVBQU8sRUFBTSxPQUU1RCxJQUVILE1BQU8sSUFBSSxHQUFNLEVBQVUsUUFBUyxFQUFLLEVBQU0sRUFBRyxFQUFPLEVBQU0sT0FFNUQsSUFFSCxHQUFJLEVBQUssV0FBVyxFQUFNLEtBQU8sSUFBTSxFQUFLLFdBQVcsRUFBTSxLQUFPLEdBQ2xFLE1BQU8sSUFBSSxHQUFNLEVBQVUsT0FBUSxFQUFLLEVBQU0sRUFBRyxFQUFPLEVBQU0sR0FHaEUsVUFFRyxJQUVILE1BQU8sSUFBSSxHQUFNLEVBQVUsTUFBTyxFQUFLLEVBQU0sRUFBRyxFQUFPLEVBQU0sT0FFMUQsSUFFSCxNQUFPLElBQUksR0FBTSxFQUFVLE9BQVEsRUFBSyxFQUFNLEVBQUcsRUFBTyxFQUFNLE9BRTNELElBRUgsTUFBTyxJQUFJLEdBQU0sRUFBVSxHQUFJLEVBQUssRUFBTSxFQUFHLEVBQU8sRUFBTSxPQUV2RCxJQUVILE1BQU8sSUFBSSxHQUFNLEVBQVUsVUFBVyxFQUFLLEVBQU0sRUFBRyxFQUFPLEVBQU0sT0FFOUQsSUFFSCxNQUFPLElBQUksR0FBTSxFQUFVLFVBQVcsRUFBSyxFQUFNLEVBQUcsRUFBTyxFQUFNLE9BRTlELEtBRUgsTUFBTyxJQUFJLEdBQU0sRUFBVSxRQUFTLEVBQUssRUFBTSxFQUFHLEVBQU8sRUFBTSxPQUU1RCxLQUVILE1BQU8sSUFBSSxHQUFNLEVBQVUsS0FBTSxFQUFLLEVBQU0sRUFBRyxFQUFPLEVBQU0sT0FFekQsS0FFSCxNQUFPLElBQUksR0FBTSxFQUFVLFFBQVMsRUFBSyxFQUFNLEVBQUcsRUFBTyxFQUFNLE9BRTVELElBRUgsTUFB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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQWtXakIsR0FBUyxhQUFhLFFBQVMsa0JBQy9CLFNBQVMsS0FBSyxZQUFZLEdBQVMsU0FFbkMsR0FBSSxJQUFRLFNBQVMsY0FBYyxTQUNuQyxHQUFNLFlBQWMseUNBQ3BCLFNBQVMsS0FBSyxZQUFZLElDbGIxQixBQWNBLEdBQU0sSUFBVztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFvVWpCLEdBQVMsYUFBYSxRQUFTLGtCQUMvQixTQUFTLEtBQUssWUFBWSxHQUFTLFNDblZuQyxBQTRGQSxFQUFRLENBQ04sVUFBVztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFB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QUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLGlCQXlEakIsR0FBUyxhQUFhLFFBQVMsa0JBQy9CLFNBQVMsS0FBSyxZQUFZLEdBQVMsU0MzRW5DLEFBbUJBLEdBQU0sSUFBVztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQXlCakIsR0FBUyxhQUFhLFFBQVMsa0JBQy9CLFNBQVMsS0FBSyxZQUFZLEdBQVMsU0FtSG5DLEVBQVEsQ0FFTixVQUFXO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFB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QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7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
