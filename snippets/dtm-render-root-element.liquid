<script>
const filters = [{stateKey:"searchString",
  actionType:"changeSearchString",
  title:"Search",
  type:"SearchInput",
  info:"",
  selected:""
  },{stateKey:"selectedCookTypesAndBrands",
  actionType:"changeCookTypesAndBrands",
  title:"Cook Types\/Brands",
  type:"NestedFilter",
  info:[['Gas Grill',['Weber', 'Napoleon', 'Broil King']], ['Charcoal Grill',['Weber', 'Kamado Joe', 'Sunterra', 'Napolean']], ['Pellet Grill',['Traeger','Louisiana','Broil King']], ['Electric Grill',[]], ['Offset Smoker',['Weber','Traeger','Kamado Joe','Yoder','Big Green Egg','Masterbuilt']], ['Pizza Oven',['Ooni','Fontana']]],
  selected:[]
  },{stateKey:"currentPriceRange",
  actionType:"changePriceRange",
  title:"Price Range",
  type:"RangeSlider",
  info:[1,30000],
  selected:[1,30000]
  },{stateKey:"currentGrillCookingAreaRange",
  actionType:"changeGrillCookingAreaRange",
  title:"Grill Cooking Area",
  type:"RangeSlider",
  info:[1,20],
  selected:[1,20]
  },{stateKey:null,
  actionType:null,
  title:"",
  type:"SearchInput",
  info:[],
  selected:[]
  },
]
{% assign firstToFifth = "first,second,third,fourth,fifth" | split: ',' %}
const filters = [
  {%- for i in firstToFifth -%}{ {%- assign keyKey = i | append: '_filter_state_key' -%}{%- assign actionKey = i | append: '_filter_action_type' -%}{%- assign titleKey = i | append: '_filter_title' -%}{%- assign typeKey = i | append: '_filter_type' -%}{%- assign infoKey = i | append: '_filter_info' -%}{%- assign selectedKey = i | append: '_filter_selected' -%}
  stateKey:{{section.settings[keyKey]|json}},
  actionType:{{section.settings[actionKey]|json}},
  title:{{section.settings[titleKey]|json}},
  type:{{section.settings[typeKey]|json}},
  info:{% if section.settings[infoKey] == "" %}{{section.settings[infoKey]|json}}{% else %}{{section.settings[infoKey]}}{% endif %},
  selected:{% if section.settings[selectedKey] == "" %}{{section.settings[selectedKey]|json}}{% else %}{{section.settings[selectedKey]}}{% endif %}
  },{% endfor %}
].filter(({key}) => key !== null);
const productType = "{{collection.all_types | first }}";
const pelement = document.createElement('product-type-collection');
pelement.setAttribute('class', 'dtm dtm-product-type-collection');
pelement.setAttribute('all-filters', JSON.stringify(filters));
pelement.setAttribute('product-type', productType);
pelement.setAttribute('default-sort-by', {{collection.default_sort_by|json}});
pelement.setAttribute('collection-title', {{section.settings.collection_title|json}});
pelement.setAttribute('collection-metafield', JSON.stringify({{collection.metafields.dtm.info|json}}));
pelement.setAttribute('empty-collection-image', {{"empty-collection.png"|asset_url|json}});
document.currentScript.parentNode.insertBefore(pelement, document.currentScript);
</script>